<html>
<head>
<title>Classification — Machine Learning Chatbot with TensorFlow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">分类—使用TensorFlow的机器学习聊天机器人</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/classification-machine-learning-chatbot-with-tensorflow-f40a3874d162?source=collection_archive---------0-----------------------#2018-03-03">https://medium.com/oracledevs/classification-machine-learning-chatbot-with-tensorflow-f40a3874d162?source=collection_archive---------0-----------------------#2018-03-03</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="a7c9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当你想创建聊天机器人时，首先要创建可视的对话流。这样的流程将有助于定义正确的意图集以及对话路径。否则很容易迷失在对话转换中，这将导致聊天机器人实现失败。我们的医疗聊天机器人系统不做任何决定，而是帮助用户使用企业系统。它获取用户输入，并在对话期间导致特定的API调用——最终触发企业系统执行一个或另一个动作。如果用户正在查找患者血压结果，聊天机器人将打开带有患者ID的血压模块。如果用户想编辑或查看血压结果，聊天机器人将加载血压结果模块，没有参数。这种聊天机器人在大型复杂的企业系统中非常有用，这有助于更快地接纳新用户，而无需额外的系统使用培训。聊天机器人的可视对话流示例:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/606d479d372cece9889206fea7fd1853.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s5MUJWsrN-vNesCR5l3Ajw.png"/></div></div></figure><p id="d353" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">会话意图可以记录在JSON文件中。您应该列出与标签、响应和上下文信息对应的对话模式。聊天机器人不仅仅是机器学习和用户输入处理，非常重要的是处理对话上下文流，通常这是在机器学习领域之外的另一个模块中完成的。我们以后会调查的。具有神经网络的机器学习负责允许聊天机器人根据用户输入计算标签概率。换句话说，机器学习有助于根据预定义的意图模式，为当前句子带来最佳匹配的标签。只要我们获得了意图标签的概率—我们知道用户想要什么，我们就可以设置对话上下文，并在下一个用户请求中—基于当前上下文做出反应:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jo"><img src="../Images/4749be8783299f130adfb3b789539461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FJbDbJUMNrsR6fBJSaE0gg.png"/></div></div></figure><p id="8ed0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">TensorFlow运行神经网络，根据提供的意向列表进行训练。每次训练运行可能会产生不同的学习结果，您应该检查<em class="jp">总损失</em>值-值越低，学习结果越好。您可能会多次进行培训，以获得最佳的学习模式:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jq"><img src="../Images/c1e57465f1f41ff59ea0d72696322ef2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*stYM6x5QS7Bqb95sBKchiQ.png"/></div></div></figure><p id="bd0a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">TensorFlow可以保存学习到的模型，以供分类API重用。调用分类API的REST接口作为单独的TensorFlow模块开发。REST由安装在TensorFlow运行时中的Flask库处理:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jr"><img src="../Images/d43b94b15021928c80940ae04c17a338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EWfjphAVIFT1DM8QXAU-tg.png"/></div></div></figure><p id="5089" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">分类函数从REST调用中获取用户输入，并通过TensorFlow模型运行它。比阈值定义的概率更高的结果被收集到有序数组中并返回。对于TensorFlow运行时中的本地测试，我们有不带REST注释的分类函数:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es js"><img src="../Images/6b6dfcd3ac69bc006ef5ea9a7bfa37de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B7mHCIifAyRDD-1Qs-Zkew.png"/></div></div></figure><p id="d46c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看看分类是如何工作的，分类的结果将驱动聊天机器人的下一步行动。每个分类请求返回匹配的标签和概率。用户输入与意图中定义的模式不相同，这就是匹配概率可能不同的原因——这是机器学习的核心部分。基于学习模型，用TensorFlow构建的神经网络假定当前用户输入的最佳标签。</p><p id="746f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用户输入“检查患者的血压结果”。该输入可以与标签blood_pressure_search和blood_pressure相关，但是分类决定第一个选项的概率更高，这是正确的。类似于用户输入“对不良药物有什么建议？”：</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jt"><img src="../Images/92ff902fd93532a0d8f6b0a2a84fa097.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kisy04-HbaU1B3abm7Epng.png"/></div></div></figure><p id="191a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过REST端点，我们可以在TensorFlow环境之外调用分类函数。这将允许我们在TensorFlow之外维护对话上下文:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ju"><img src="../Images/752a025aad0f9531fc22711636c1aaa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8oX0cgk5m6zOBefaHz6bpg.png"/></div></div></figure><p id="3137" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有用的资源:</p><ul class=""><li id="18b5" class="jv jw hh ig b ih ii il im ip jx it jy ix jz jb ka kb kc kd bi translated">TensorFlow笔记本和intents JSON可在<a class="ae ke" href="https://github.com/abaranovskis-redsamurai/redsamchatbot/tree/master/v2" rel="noopener ugc nofollow" target="_blank"> GitHub </a>资源库中获得。</li><li id="2633" class="jv jw hh ig b ih kf il kg ip kh it ki ix kj jb ka kb kc kd bi translated">关于使用TensorFlow的<a class="ae ke" href="https://chatbotsmagazine.com/contextual-chat-bots-with-tensorflow-4391749d0077" rel="noopener ugc nofollow" target="_blank">上下文聊天机器人的精彩文章</a></li><li id="c930" class="jv jw hh ig b ih kf il kg ip kh it ki ix kj jb ka kb kc kd bi translated">我之前的帖子是关于红色武士<a class="ae ke" href="http://andrejusb.blogspot.lt/2018/02/say-hello-to-red-samurai-contextual.html" rel="noopener ugc nofollow" target="_blank">聊天机器人</a></li></ul></div><div class="ab cl kk kl go km" role="separator"><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp kq"/><span class="kn bw bk ko kp"/></div><div class="ha hb hc hd he"><p id="b04f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jp">原载于2018年3月3日</em><a class="ae ke" href="https://andrejusb.blogspot.lt/2018/03/classification-machine-learning-chatbot.html" rel="noopener ugc nofollow" target="_blank"><em class="jp">andrejusb.blogspot.com</em></a><em class="jp">。</em></p></div></div>    
</body>
</html>