<html>
<head>
<title>Jenkins Pipeline: Declarative vs. Scripted</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">詹金斯管道:声明式与脚本式</h1>
<blockquote>原文：<a href="https://medium.com/globant/jenkins-pipeline-declarative-vs-scripted-21f8688ee16a?source=collection_archive---------1-----------------------#2022-02-14">https://medium.com/globant/jenkins-pipeline-declarative-vs-scripted-21f8688ee16a?source=collection_archive---------1-----------------------#2022-02-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="8ef8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">大多数DevOps工程师和开发人员在日常活动中都会与Jenkins互动。Jenkins是一个自动化工具，帮助开发人员构建、测试和部署应用程序。如今，人们更喜欢使用Jenkins管道来建立构建、测试和部署工作流，而不是自由式工作。Jenkins pipeline是构建、测试和部署应用程序的最佳推荐方式。</p><p id="3db0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Jenkins管道有两种类型:声明式和脚本式。在开始开发管道之前，必须意识到两者之间的差异。在这篇博客中，我们将讨论声明式管道和脚本式管道之间的区别。本博客将帮助您根据自己的需求选择合适的管道类型。</p><p id="f241" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文中，我们将讨论以下几点:</p><ol class=""><li id="b0fd" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">詹金斯管道公司</li><li id="7234" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">声明式与脚本式管道<br/> 2.1。简介<br/> 2.2。灵活性&amp;简单性<br/> 2.3。编程模型<br/> 2.4。局限性<br/> 2.5。与蓝海<br/> 2.6的融合。功能的</li><li id="c684" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">结论</li><li id="07d1" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">参考</li></ol><h1 id="57f4" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 1-詹金斯管道</strong></h1><p id="d74f" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">管道是一系列步骤或作业的集合，这些步骤或作业在序列中相互关联。</p><p id="98bf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Jenkins支持不同的插件，这些插件有助于实现到Jenkins的持续集成和持续交付管道。</p><p id="9ce4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">CI/CD管道是一种通过不同的工作站(例如版本控制系统、代码检查、测试用例执行、构建、工件创建、工件存储库和服务器上的部署)从版本控制系统向用户获取源代码的自动化方式。</p><p id="c74d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">管道也被称为“代码式部署”。</p><p id="cb2a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Jenkins管道被写入一个名为Jenkinsfile(您可以使用不同的名称)的文本文件中，该文件可以提交到项目的源代码控制存储库中。</p><p id="84b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以将不同的工具集集成到Jenkins上，以创建CI和CD管道。</p><p id="edd9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最初创建Jenkins Pipeline时，选择Groovy作为基础。Jenkins长期以来一直附带一个嵌入式Groovy引擎，为管理员、开发人员和用户等提供高级脚本功能。</p><p id="3a5c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Jenkins是基于DSL的，DSL是领域特定语言。特定领域语言是为解决特定领域问题而开发的语言。</p><p id="46a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">可以使用两种类型的语法来编写管道:声明式和脚本式。</p><p id="5f95" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">声明式管道和脚本式管道本质上是同一管道子系统。它们是“管道即代码”的持久实现。他们都能够使用插件和共享库。然而，它们的不同之处在于语法和灵活性。</p><h1 id="725b" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 2-声明式与脚本式管道</strong></h1><h2 id="08ea" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak"> 2.1简介:</strong></h2><p id="d45c" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">Declarative:</strong>Declarative是一种更新更高级的管道代码实现。</p><p id="3ab0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> Scripted: </strong> Scripted是Jenkins中第一个也是传统的管道代码实现。它被设计成用Groovy构建的通用DSL(领域特定语言)。</p><h2 id="bd3d" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak"> 2.2灵活性&amp;简单性:</strong></h2><p id="a8e9" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">声明性:</strong>Groovy的学习曲线通常并不适合给定团队的所有成员，因此创建了声明性管道来为创作Jenkins管道提供更简单、更有主见的定义良好的语法。</p><p id="8aee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">脚本化:脚本化管道是一个全功能的编程环境。脚本管道为Jenkins用户提供了巨大的灵活性和可扩展性。</p><h2 id="fda0" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak"> 2.3编程模型:</strong></h2><p id="bb38" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">声明性:</strong>声明性管道鼓励声明性编程模型。在声明式编程中，你指定你想要什么。你不关心它将如何完成。</p><p id="4986" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">脚本化:</strong>脚本化管道遵循一种更为强制性的编程模型。在命令式编程中，您指定您想要什么以及应该如何做。</p><h2 id="6588" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak"> 2.4限制:</strong></h2><p id="2d6a" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">声明式</strong>:声明式管道以更严格的预定义结构限制了用户可用的内容，这使得它成为更简单的CI/CD管道的理想选择。</p><p id="9d42" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">脚本化:</strong>脚本化管道提供的限制非常少，比如结构和语法是Groovy自己定义的唯一限制。对于那些有更复杂需求的用户来说，这是一个理想的选择。</p><h2 id="938b" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak"> 2.5融入蓝海:</strong></h2><p id="4ff6" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">声明性:</strong>声明性管道可以与Blue Ocean集成(Blue Ocean是Jenkins的一种新的用户体验，基于可个性化的现代设计，允许用户以图形方式创建、可视化和调试CI/CD管道)。</p><p id="e419" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">脚本化:</strong>脚本化管道不支持蓝海集成。</p><h2 id="3908" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak"> 2.6功能:</strong></h2><h2 id="967f" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak">代码验证:</strong></h2><p id="0ab5" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">声明式:</strong>声明式管道支持代码验证。代码验证在执行任何阶段之前完成。因此，如果管道中有任何语法错误或打字错误，用户将在执行开始时得到一个错误。这可能会节省我们很多时间。</p><p id="7bfc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">脚本化:</strong>脚本化管道在执行阶段之前不支持任何类型的代码验证。它将在执行特定步骤时抛出一个错误，该错误有语法错误或打字错误。</p><h2 id="3f3a" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak">从阶段重新启动:</strong></h2><p id="3146" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">声明性:</strong>声明性管道支持从失败阶段重启。它使用先前构建的工作区来确定失败的阶段，并从失败的阶段开始执行。这可能会节省我们的时间和精力。</p><p id="548d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">脚本化:</strong>脚本化管道不支持“从阶段重新启动”选项。</p><h2 id="28e4" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak">选项块:</strong></h2><p id="af68" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">声明性:</strong>声明性管道支持选项块。在声明性管道中，选项与管道逻辑分离，可以放在阶段之前。使用options指令，我们可以在管道本身中配置特定于管道的选项。</p><p id="9c38" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">脚本化:</strong>脚本化管道不支持选项块，但不同的选项(如属性)可用于管道逻辑。</p><h2 id="c192" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak">跳过阶段:</strong></h2><p id="dcb6" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">声明性:</strong>在声明性管道中，可以使用“When”块跳过阶段。如果不满足条件，则“When”块跳过整个阶段。</p><p id="f6d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">脚本化:</strong>在脚本化管道中，不能完全跳过阶段。可以使用If语句跳过阶段内部的逻辑，但是执行将通过管道中的每个阶段。</p><h2 id="eb1b" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak">环境块:</strong></h2><p id="ad92" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">声明性:</strong>声明性管道支持环境块。环境块帮助定义全局变量并将凭证加载到管道中。</p><p id="3bff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">脚本化:</strong>脚本化管道不支持环境块，但是你可以使用Groovy以不同的方式定义全局变量和使用凭证。</p><h2 id="7383" class="kt jr hh bd js ku kv kw jw kx ky kz ka ip la lb ke it lc ld ki ix le lf km lg bi translated"><strong class="ak">交叉功能支持:</strong></h2><p id="794e" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><strong class="ig hi">声明性:</strong>我们可以将脚本化管道块集成到“脚本”步骤内的声明性管道中。</p><p id="2055" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">脚本化:</strong>特定于声明性管道的块不能在脚本化管道中使用。</p><p id="8c12" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">语法:</strong></p><p id="5b1e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">声明性:</strong></p><figure class="li lj lk ll fd lm er es paragraph-image"><div class="er es lh"><img src="../Images/545da56176d34caddf470d8a7f97c8e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/0*ErQ4ZfGqCL9uJ83k"/></div></figure><p id="4f43" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">照本宣科:</strong></p><figure class="li lj lk ll fd lm er es paragraph-image"><div class="er es lp"><img src="../Images/64c6188fdd606802b12d4c8c8b529be6.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/0*msIqobLSfWftUcDF"/></div></figure><h1 id="a38b" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 3-结论:</strong></h1><p id="4f5b" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">声明式管道和脚本式管道都是构建部署管道的好方法，但如今，声明式管道是编写管道的更好方法。您可以在使用脚本步骤的声明性管道中利用脚本管道的优势，但反之则不然。</p><h1 id="9305" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated"><strong class="ak"> 4-参考:</strong></h1><p id="7368" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated"><a class="ae lq" href="https://www.jenkins.io/doc/book/pipeline/" rel="noopener ugc nofollow" target="_blank">https://www.jenkins.io/doc/book/pipeline/</a></p></div></div>    
</body>
</html>