<html>
<head>
<title>Advent of Kotlin 2018, week 1: Shortest path algorithm</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kotlin 2018问世，第一周:最短路径算法</h1>
<blockquote>原文：<a href="https://blog.kotlin-academy.com/the-advent-of-kotlin-2018-week-1-229e442a143?source=collection_archive---------0-----------------------#2018-11-25">https://blog.kotlin-academy.com/the-advent-of-kotlin-2018-week-1-229e442a143?source=collection_archive---------0-----------------------#2018-11-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div class="gh gi il"><img src="../Images/11648173d68a2ec365d797a1eeb87834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/format:webp/1*w0pETH6LTrfPuXosGycQlA.png"/></div></figure><div class=""/><blockquote class="jr js jt"><p id="cf83" class="ju jv jw jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">更新:本次挑战已经结束。这周的结果在最后。不过，如果你想挑战自己，也可以随意面对这个任务。最终，目标是学习和实践。</p></blockquote><p id="d16b" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">我们的使命是教学，我们相信最好的方法是分享知识和挑战。这就是为什么在这个降临节，我们挑战你们每一个人。在每个星期的开始，我们会公布一个你要在科特林解决的挑战。这些问题可以通过许多不同的方式和使用不同的Kotlin功能来解决。</p><p id="5a88" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">在每个周末，我们将检查所有共享的解决方案，并根据我们的代码分析选择我们最喜欢的一个。该解决方案的作者将是获胜者(参见“如何？”部分)。我们将在这里、邮件和Twitter上公布他或她的Twitter/Github用户名。我们还将展示这个解决方案，并解释为什么我们最喜欢它。我们也可能包括一些荣誉提名。</p><p id="d036" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">听起来不错？您可以从今天开始，因为这已经是第1周了！但首先，让我们描述一些细节。</p><figure class="kx ky kz la gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi kw"><img src="../Images/c9901f3141719d8da90bf49e2f1b15b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JtqiaIMw95UULg8w.jpg"/></div></div></figure><h1 id="95a1" class="lf lg iu bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">代码分析</h1><p id="b1a6" class="pw-post-body-paragraph ju jv iu jx b jy md ka kb kc me ke kf kt mf ki kj ku mg km kn kv mh kq kr ks ig bi translated">当我们判断不同的解决方案时，我们会想到几件事:</p><ul class=""><li id="7194" class="mi mj iu jx b jy jz kc kd kt mk ku ml kv mm ks mn mo mp mq bi translated">正确性——程序应该像描述的那样工作，而不仅仅是通过单元测试。</li><li id="8855" class="mi mj iu jx b jy mr kc ms kt mt ku mu kv mv ks mn mo mp mq bi translated">编码惯例和Kotlin的习惯用法——我们车间的所有服务员都知道我们非常认真地对待Kotlin中的良好实践。我们甚至在<a class="ae mw" href="https://kot.academy/Effective_Kotlin.html" rel="noopener ugc nofollow" target="_blank">有一个单独的工作室</a>专门研究这个课题。你用科特林习语吗？你能用Kotlin的特性让你的程序干净吗？</li><li id="7659" class="mi mj iu jx b jy mr kc ms kt mt ku mu kv mv ks mn mo mp mq bi translated">可读性——清楚这个程序是如何工作的吗？</li><li id="7780" class="mi mj iu jx b jy mr kc ms kt mt ku mu kv mv ks mn mo mp mq bi translated">时机——我们知道一个人可以复制另一个人的解决方案并加以改进。这就是为什么时间对我们也很重要。</li><li id="a112" class="mi mj iu jx b jy mr kc ms kt mt ku mu kv mv ks mn mo mp mq bi translated">性能——最不重要的参数，但在我们看来是非常低效的解决方案。</li></ul><h1 id="ff4d" class="lf lg iu bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">怎么会？</h1><p id="a86d" class="pw-post-body-paragraph ju jv iu jx b jy md ka kb kc me ke kf kt mf ki kj ku mg km kn kv mh kq kr ks ig bi translated">如果你想让我们考虑你的解决方案，你需要在Twitter上分享一个代码链接(可以是GitHub片段或Kotlin REPL的链接)，标签为#AdventOfKotlin18。或者，您可以将您的解决方案发送到电子邮件contact@kt.academy。我们在周日发布每周挑战，并在下周周日宣布获胜者。我们将只接受那些片段发送到欧洲中部时间周六下午12点。</p><h1 id="c779" class="lf lg iu bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">第一周挑战:在地图上标记最短路径</h1><p id="f9dd" class="pw-post-body-paragraph ju jv iu jx b jy md ka kb kc me ke kf kt mf ki kj ku mg km kn kv mh kq kr ks ig bi translated">你可能在日常生活中使用算法来寻找最短路径，而你甚至不知道。例如，你可能会使用谷歌地图这样的导航工具来帮助你找到准时到达某个地方的最佳路线。</p><figure class="kx ky kz la gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="gh gi mx"><img src="../Images/796479677eb8c9e64f0dff2c7fcbf66c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nc6SQYhjcCgaymD5EC8Qmw.png"/></div></div></figure><p id="f524" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">我第一次想到它们是在我还是个孩子的时候，当时我在玩一个老游戏——帝国时代——我想知道当你选择一个单位并点击你想让它去哪里时，它怎么可能总是选择最近的路径。</p><figure class="kx ky kz la gt ip gh gi paragraph-image"><div class="gh gi my"><img src="../Images/114ace6703b6092a69669a304f9384df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1352/format:webp/0*mhP5iJ0TEs6hqPKY.png"/></div></figure><p id="c943" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">这就是我们今天要学习的内容，而你面临的挑战是如何实施它。最后，你将为这样的地图做一个算法，其中<code class="fe mz na nb nc b">S</code>是起点，<code class="fe mz na nb nc b">X</code>是终点，<code class="fe mz na nb nc b">B</code>是一堵墙:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="ab48" class="nh lg iu nc b gy ni nj l nk nl"><strong class="nc iv">....................<br/>......X...B.........<br/>..........B.........<br/>........BBB....S....<br/>....................</strong></span></pre><p id="30bb" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">寻找并标记最佳方式:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="8e34" class="nh lg iu nc b gy ni nj l nk nl"><strong class="nc iv">.......****.........<br/>......*...B*........<br/>..........B.*.......<br/>........BBB..***....<br/>....................</strong></span></pre><p id="c44c" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">假设直线梯级的权重为1，对角线梯级的权重为1.5。</p><p id="9f7d" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">怎么做？</p><h1 id="e0b2" class="lf lg iu bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">Dijkstra算法</h1><p id="be81" class="pw-post-body-paragraph ju jv iu jx b jy md ka kb kc me ke kf kt mf ki kj ku mg km kn kv mh kq kr ks ig bi translated">最简单的算法是<a class="ae mw" href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" rel="noopener ugc nofollow" target="_blank">迪杰斯特拉算法</a>。这个想法类似于<a class="ae mw" href="https://en.wikipedia.org/wiki/Breadth-first_search" rel="noopener ugc nofollow" target="_blank">广度优先搜索</a>——我们开发通向所有方向的路径，直到到达最终点。我们总是开发最近的下一个点(从一开始就最近)。这种第一次到达新点的方式总是最优的。点的发展呈现在下面的动画中。</p><figure class="kx ky kz la gt ip gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/f90d76921c1af9f2fd23dc86d0bbb044.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/0*x3kRyNjJpkJySrE2.gif"/></div></figure><p id="5ce1" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">这种简化算法可以描述如下:</p><ol class=""><li id="7ff8" class="mi mj iu jx b jy jz kc kd kt mk ku ml kv mm ks nn mo mp mq bi translated">设置一个可能的路径列表，从起始节点开始发展到所有可能的方式。</li><li id="36ef" class="mi mj iu jx b jy mr kc ms kt mt ku mu kv mv ks nn mo mp mq bi translated">在所有可能的路径列表中查找最短的新路径。</li><li id="d050" class="mi mj iu jx b jy mr kc ms kt mt ku mu kv mv ks nn mo mp mq bi translated">如果该路径指向最终节点，则完成该算法。这条路径是我们寻找的最佳路径。</li><li id="480e" class="mi mj iu jx b jy mr kc ms kt mt ku mu kv mv ks nn mo mp mq bi translated">从可能开发的路径列表中，删除所有到所选节点的路径，并添加从该节点开始的所有路径。</li><li id="63fe" class="mi mj iu jx b jy mr kc ms kt mt ku mu kv mv ks nn mo mp mq bi translated">如果我们有一个到达终点的最优方法，就完成了。否则，请转到步骤2。</li></ol><p id="b16e" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">关于<a class="ae mw" href="https://en.wikipedia.org/wiki/Dijkstra%27s_algorithm" rel="noopener ugc nofollow" target="_blank"> Wiki </a>的详细描述。请注意，这里描述的算法略有不同。</p><figure class="kx ky kz la gt ip gh gi paragraph-image"><a href="https://leanpub.com/effectivekotlin/c/3YYtCtqCC6a4"><div class="gh gi kw"><img src="../Images/0742a8ad0cfd3851db2d28061bf6f214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xbef0K0JtDZ6F2vBVUDZsg.jpeg"/></div></a></figure><h1 id="582d" class="lf lg iu bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">A*算法</h1><p id="cf3c" class="pw-post-body-paragraph ju jv iu jx b jy md ka kb kc me ke kf kt mf ki kj ku mg km kn kv mh kq kr ks ig bi translated">Dijkstra算法的一个大问题是，它向所有方向搜索，而不是集中在最有希望的方向。当然，有时为了到达左边的点，我们首先需要向右绕过障碍物。这种情况出现在“Labitynth”测试中:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="62d1" class="nh lg iu nc b gy ni nj l nk nl"><strong class="nc iv">BB..B...B...BBBBB...<br/>....B.X.BBB.B...B.B.<br/>..BBB.B.B.B.B.B.B.B.<br/>....B.BBB.B.B.BS..B.<br/>BBB.B...B.B.BBBBBBB.<br/>..B...B.............</strong></span></pre><p id="0775" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">解决方案:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="3ed3" class="nh lg iu nc b gy ni nj l nk nl"><strong class="nc iv">BB..B...B...BBBBB.*.<br/>....B.*.BBB.B...B*B*<br/>..BBB*B.B.B.B.B.B*B*<br/>....B*BBB.B.B.B**.B*<br/>BBB.B.**B.B.BBBBBBB*<br/>..B...B.***********.</strong></span></pre><p id="260d" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">尽管在大多数情况下，尽可能快地朝着我们的目标前进会更好。下面的动画展示了所需的行为，我们将使用<a class="ae mw" href="https://en.wikipedia.org/wiki/A*_search_algorithm" rel="noopener ugc nofollow" target="_blank"> A*算法</a>来实现它:</p><figure class="kx ky kz la gt ip gh gi paragraph-image"><div class="gh gi nm"><img src="../Images/2b2bdba4eacf886e10c26a6708db2136.png" data-original-src="https://miro.medium.com/v2/resize:fit:420/0*r80hx97AN9mhGPz3.gif"/></div></figure><p id="6f67" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">如何才能实现？我们需要引入一些简单的度量——称为启发式——来告诉我们应该首先开发哪些节点。地图上最流行的一个参数是从这点到终点的直线距离。可以使用以下平衡计算:</p><figure class="kx ky kz la gt ip gh gi paragraph-image"><div class="gh gi no"><img src="../Images/ab97ddec01dbb63371dee8bc97d91d0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*h514hHn4rk1oevzxTt6vgg.png"/></div></figure><p id="1c3d" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">现在，当我们决定下一步要发展哪一点时，我们考虑两个值的和:</p><ul class=""><li id="81ea" class="mi mj iu jx b jy jz kc kd kt mk ku ml kv mm ks mn mo mp mq bi translated">从起点开始的最短的路</li><li id="5033" class="mi mj iu jx b jy mr kc ms kt mt ku mu kv mv ks mn mo mp mq bi translated">直线到终点的距离</li></ul><p id="776b" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">这样我们更喜欢我们这边的节点。它总是能给我们正确的结果吗？好了，证明了对于图的每条边(<em class="jw"> x </em>，<em class="jw"> y </em>)，如果启发式<em class="jw"> h </em>满足条件<em class="jw">h</em>(<em class="jw">x</em>)≤<em class="jw">d</em>(<em class="jw">x</em>，<em class="jw">y</em>)+<em class="jw">h</em>(<em class="jw">y</em>)，则A*正确工作，其中<em class="jw">这对我们的启发式算法来说是正确的，所以它会工作得很好。</em></p><h1 id="2a47" class="lf lg iu bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">挑战</h1><p id="5f49" class="pw-post-body-paragraph ju jv iu jx b jy md ka kb kc me ke kf kt mf ki kj ku mg km kn kv mh kq kr ks ig bi translated">你的任务是编写一个算法，在地图上找到最佳路径，并返回带有最佳路径标记的地图。起点以<code class="fe mz na nb nc b">S</code>标记，终点以<code class="fe mz na nb nc b">X</code>标记。你只能在圆点<code class="fe mz na nb nc b">.</code>上移动，并且不能走出地图。<code class="fe mz na nb nc b">B</code>是障碍。假设直线步长权重为1，对角线步长的权重为1.5。当你找到最佳路径时，你应该用<code class="fe mz na nb nc b">*</code>代替所有应该去的节点，在地图上标记出来。</p><p id="f1d2" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">例如，您对以下地图的功能:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="f0e6" class="nh lg iu nc b gy ni nj l nk nl"><strong class="nc iv">...........<br/>.......S...<br/>...........<br/>...........<br/>...........<br/>...........<br/>..X........</strong></span></pre><p id="1a9f" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">应该会返回以下结果:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="af86" class="nh lg iu nc b gy ni nj l nk nl"><strong class="nc iv">...........<br/>.......*...<br/>......*....<br/>.....*.....<br/>....*......<br/>...*.......<br/>..*........</strong></span></pre><p id="b94d" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">如果遇到障碍，应该绕行:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="a911" class="nh lg iu nc b gy ni nj l nk nl"><strong class="nc iv">....................<br/>......X...B.........<br/>..........B.........<br/>........BBB....S....<br/>....................</strong></span><span id="c261" class="nh lg iu nc b gy np nj l nk nl"><strong class="nc iv">.......****.........<br/>......*...B*........<br/>..........B.*.......<br/>........BBB..***....<br/>....................</strong></span></pre><p id="44ac" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">但是它不应该超出地图的范围:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="cc81" class="nh lg iu nc b gy ni nj l nk nl"><strong class="nc iv">......X...B.........<br/>..........B.........<br/>........BBB....S....<br/>....................</strong></span><span id="ba02" class="nh lg iu nc b gy np nj l nk nl"><strong class="nc iv">......*...B.........<br/>.......*..B.........<br/>.......*BBB*****....<br/>........***.........</strong></span></pre><p id="fb1e" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">你可以选择任何你想要的算法，但性能将被考虑在内。尽管你不需要使用比A*更高级的算法。你的算法应该总是给出正确的结果，而且不应该是随机的。如果你的算法选择的方法是最优的，但是与单元测试中的不同，那就没问题。您可以调整这个单元测试。尽管如果你决定实现一个*，选择的方式应该总是和单元测试中的一样。</p><blockquote class="nq"><p id="df67" class="nr ns iu bd nt nu nv nw nx ny nz ks dk translated">你可以用来测试的单元测试是<a class="ae mw" href="https://gist.github.com/MarcinMoskala/2f586da50a93f7954beff616e9207fa8" rel="noopener ugc nofollow" target="_blank">这里是</a>。</p><p id="552c" class="nr ns iu bd nt nu nv nw nx ny nz ks dk translated">你也可以在REPL 上在线实现一个解决方案<a class="ae mw" href="https://try.kotlinlang.org/#/UserProjects/ib5k5pb4gkqasl37jqbiuinsmg/keopnss8rr8e6n9as5l8atbi4m" rel="noopener ugc nofollow" target="_blank">(你也可以使用新的)</a></p></blockquote><p id="c8c2" class="pw-post-body-paragraph ju jv iu jx b jy oa ka kb kc ob ke kf kt oc ki kj ku od km kn kv oe kq kr ks ig bi translated">祝你好运:)</p><h1 id="da5b" class="lf lg iu bd lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc bi translated">结果</h1><p id="a4de" class="pw-post-body-paragraph ju jv iu jx b jy md ka kb kc me ke kf kt mf ki kj ku mg km kn kv mh kq kr ks ig bi translated">我对这次挑战的结果感到非常惊讶。这个相当复杂的任务只用了一个星期，我就收到了20多个正确的答案！一位与会者甚至发表了一篇文章描述他的解决方案:</p><div class="im in gp gr io of"><a href="https://ykanivets.com/doing-bfs-with-kotlin/" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iv gy z fp ok fr fs ol fu fw it bi translated">和科特林一起跳BFS</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">自从我用Kotlin写了第一行代码以来，已经快2年了。现在我把它用于所有新的应用程序，并积极地…</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">ykanivets.com</p></div></div><div class="oo l"><div class="op l oq or os oo ot iq of"/></div></div></a></div><p id="d7ee" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">我知道每个人要为此付出多少努力，所以我决定把他们都提到(最后)。</p><p id="187f" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">现在，因为这个挑战的目的是学习，我想从我的网站上给出一些评论:</p><ol class=""><li id="1791" class="mi mj iu jx b jy jz kc kd kt mk ku ml kv mm ks nn mo mp mq bi translated">我注意到最大的麻烦是为一些概念选择正确的抽象层次。这是一个复杂的问题，我将在我的下一本书中深入探讨，但在这里我只触及两个极端。</li></ol><p id="ae78" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">首先，用不同于字符列表的方式来表示地图是有好处的。额外的抽象可以通过保存额外的信息来帮助我们，例如关于职位的信息。</p><p id="b62f" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">你如何表示一个点？我很清楚，你所需要的只是一个简单的类:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="884b" class="nh lg iu nc b gy ni nj l nk nl">class Point(x: Int, y: Int)</span></pre><p id="f49f" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">尽管有些人很想用<code class="fe mz na nb nc b">Pair&lt;Int, Int&gt;</code>来代替。然后他们需要给它命名，并定义typealias:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="6c29" class="nh lg iu nc b gy ni nj l nk nl">typealias Point = <!-- -->Pair&lt;Int, Int&gt;<!-- --> </span></pre><p id="a5d8" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">他们还需要命名坐标，并定义扩展属性:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="6458" class="nh lg iu nc b gy ni nj l nk nl">val Point.x get() = first<br/>val Point.y get() = second</span></pre><p id="0965" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">这是个好主意吗？我不这么认为，而且我确信这不是科特林惯用的方式。Kotlin团队有意放弃元组，以推动人们使用类来代替，从长远来看，这是一种更好的做法。</p><p id="14d8" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">可以想象，使用typealias的解决方案很容易被另一个以相同方式表示的类似类型破坏。例如方向:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="f1ce" class="nh lg iu nc b gy ni nj l nk nl">typealias Direction = <!-- -->Pair&lt;Int, Int&gt;<br/>val Direction.dx get() = first<br/>val Direction.dy get() = second</span></pre><p id="7eaf" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">如果你需要命名元组，它在Kotlin中被称为数据类，你这样定义它:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="6a5d" class="nh lg iu nc b gy ni nj l nk nl">data class Point(x: Int, y: Int)</span></pre><p id="4273" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">它是安全的，并且总是清晰的。在科特林上课很便宜，用吧！</p><p id="d5e0" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">另一个极端是当我们在代码中提取太多抽象时。大多数项目都很好地平衡了它，但是在不同的文件和包中有太多的抽象。这让我想起了以前的好时光<a class="ae mw" href="https://github.com/EnterpriseQualityCoding/FizzBuzzEnterpriseEdition" rel="noopener ugc nofollow" target="_blank"> FizzBuzz企业版</a> :D YAGNI！保持简单。</p><p id="9291" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">2.我很高兴看到人们使用各种收集处理功能。这个问题需要很多人。只是一些建议:</p><ul class=""><li id="dd35" class="mi mj iu jx b jy jz kc kd kt mk ku ml kv mm ks mn mo mp mq bi translated">为了创建<code class="fe mz na nb nc b">Comparator</code>，我们可以使用几乎满足所有情况的<code class="fe mz na nb nc b">compareBy</code>。要使用比较器排序，我们可以使用<code class="fe mz na nb nc b">sortedWith</code>。</li><li id="2f98" class="mi mj iu jx b jy mr kc ms kt mt ku mu kv mv ks mn mo mp mq bi translated">我们可以通过<code class="fe mz na nb nc b">indexOf</code>函数找到一个元素的索引。</li></ul><p id="57ab" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">3.我们真的很喜欢GitHub项目中的基准和ReadMe。尽管我们喜欢更简短和简洁的解决方案。我们喜欢注释，但是我们喜欢自我解释的代码。</p><p id="b539" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">4.我们需要一个接一个地添加节点，因为否则可能会选择更短的节点而不是更长的路径。这是另一个测试，一些解决方案无法通过:</p><pre class="kx ky kz la gt nd nc ne nf aw ng bi"><span id="1fd3" class="nh lg iu nc b gy ni nj l nk nl">@Test<br/><strong class="nc iv">fun </strong>`Not too fast`() {<br/>    <strong class="nc iv">val </strong>mapString = <strong class="nc iv">"""<br/>    ....X.B.B.BBB.......<br/>    .....B.B.B.BB.......<br/>    .....BBBBBB.B.......<br/>    .....B..BB.BB.......<br/>    .....BBBB.BB........<br/>    .....B....S.........<br/>    ....................<br/>    """</strong>.<em class="jw">trimIndent</em>()<br/><br/>    <strong class="nc iv">val </strong>marked = <strong class="nc iv">"""<br/>    ....*.B.B.BBB.......<br/>    ....*B.B.B.BB.......<br/>    ....*BBBBBB.B.......<br/>    ....*B..BB.BB.......<br/>    ....*BBBB.BB........<br/>    ....*B*****.........<br/>    .....*..............<br/>    """</strong>.<em class="jw">trimIndent</em>()<br/><br/>    <em class="jw">assertEquals</em>(marked, <em class="jw">addPath</em>(mapString))<br/>}</span></pre></div><div class="ab cl ou ov hr ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="ig ih ii ij ik"><p id="6fe8" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">每个在挑战中学到东西的人都是赢家。我们最喜欢的解决方案是尼古拉斯·莱佩奇·‏(@ njble page)发来的:</p><div class="im in gp gr io of"><a href="https://twitter.com/search?q=%23AdventOfKotlin18&amp;src=tyah" rel="noopener  ugc nofollow" target="_blank"><div class="og ab fo"><div class="oh ab oi cl cj oj"><h2 class="bd iv gy z fp ok fr fs ol fu fw it bi translated">#AdventOfKotlin18 - Twitter搜索</h2><div class="om l"><h3 class="bd b gy z fp ok fr fs ol fu fw dk translated">#AdventOfKotlin18最新推文。阅读人们在说什么，并加入对话。</h3></div><div class="on l"><p class="bd b dl z fp ok fr fs ol fu fw dk translated">twitter.com</p></div></div><div class="oo l"><div class="pb l oq or os oo ot iq of"/></div></div></a></div><p id="7ab3" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">它简洁、简短，并且经过了很好的优化。看看这个。</p><p id="a2c6" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">以下是我们收到的所有其他正确答案的列表(按日期和时间排序):</p><p id="408a" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">Bryan Wilkinson通过电子邮件向我们发送了正确的解决方案。</p><p id="1ede" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">彼得·博罗万斯基通过电子邮件给我们发来了正确的解决方案。</p><p id="4293" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">Radim Vecerek通过电子邮件向我们发送了正确的解决方案。</p><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div></figure><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div></figure><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div></figure><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div></figure><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div></figure><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div></figure><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div></figure><p id="943e" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">Evgenii Kanivets通过电子邮件向我们发送了正确的解决方案。</p><p id="9f47" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">何塞·伊格纳西奥·阿辛·波佐(<a class="ae mw" href="https://stackoverflow.com/users/6783451/jose-ignacio-acin-pozo" rel="noopener ugc nofollow" target="_blank"> SO </a>和<a class="ae mw" href="https://github.com/Ganet" rel="noopener ugc nofollow" target="_blank"> Github </a>)通过电子邮件给我们发来了正确的解决方案。</p><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div></figure><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div></figure><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div></figure><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div></figure><p id="80d3" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">Ruben Gees通过电子邮件向我们发送了一个正确的解决方案。</p><p id="e281" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">彼得·古利亚斯通过电子邮件向我们发送了正确的解决方案。</p><p id="15fb" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">Balázs Németh通过电子邮件向我们发送了正确的解决方案。</p><figure class="kx ky kz la gt ip"><div class="bz fp l di"><div class="pc pd l"/></div><figcaption class="pe pf gj gh gi pg ph bd b be z dk">Send after qualified time</figcaption></figure><p id="5717" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">非常好，但不完全正确的解决方案已发送给Serhii Siryi。</p><p id="6566" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">如果您向我们发送了正确的解决方案，但在这里没有看到您的名字，请通过contact@kt.academy通知我们。</p><figure class="kx ky kz la gt ip gh gi paragraph-image"><a href="https://blog.kotlin-academy.com/write-for-kotlin-academy-abebd70937ce"><div class="gh gi kw"><img src="../Images/87c508a2627eaa3d0e472518952dc75a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eEoIe6R-7DJyXGh8tYeqjA.jpeg"/></div></a></figure></div><div class="ab cl ou ov hr ow" role="separator"><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz pa"/><span class="ox bw bk oy oz"/></div><div class="ig ih ii ij ik"><h2 id="0c8a" class="nh lg iu bd lh pi pj dn ll pk pl dp lp kt pm pn lt ku po pp lx kv pq pr mb ps bi translated">单击👏说“谢谢！”并帮助他人找到这篇文章。</h2><p id="21fc" class="pw-post-body-paragraph ju jv iu jx b jy md ka kb kc me ke kf kt mf ki kj ku mg km kn kv mh kq kr ks ig bi translated">你需要Kotlin工作室吗？访问<a class="ae mw" href="https://www.kt.academy/" rel="noopener ugc nofollow" target="_blank">我们的网站</a>，看看我们能为您做些什么。</p><p id="fd63" class="pw-post-body-paragraph ju jv iu jx b jy jz ka kb kc kd ke kf kt kh ki kj ku kl km kn kv kp kq kr ks ig bi translated">了解卡帕头最新的重大新闻。学院，<a class="ae mw" href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a" rel="noopener ugc nofollow" target="_blank">订阅时事通讯</a>，<a class="ae mw" href="https://twitter.com/ktdotacademy" rel="noopener ugc nofollow" target="_blank">观察Twitter </a>并在medium上关注我们。</p></div></div>    
</body>
</html>