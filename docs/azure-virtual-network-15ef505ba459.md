# 面向初学者的 Azure 虚拟网络——使用 VPC 保护您的应用

> 原文：<https://medium.com/edureka/azure-virtual-network-15ef505ba459?source=collection_archive---------4----------------------->

![](img/3ff80421836a0c1627b6d77e9ee9d2b8.png)

欢迎来到 Azure 虚拟网络的这个博客。在这篇博客中，你将学习如何使用 Azure 虚拟网络来保护你的应用程序。在继续之前，让我们先了解一下，为什么我们首先需要虚拟网络。

# 为什么是虚拟网络？

虚拟网络充当云中启动的资源之间的通信渠道。为什么虚拟？因为云中没有实际的路由器或交换机。例如，如果你在云中启动一个数据库服务器和一个网站服务器，它们需要一个媒介来交互。这种交互媒介被称为虚拟网络。

**带虚拟网络:**

![](img/7f90c7e295ef379d248ed181ce9bfab9.png)

# 什么是 Azure 虚拟网络？

**Azure 虚拟网络** ( **VNet** )是你自己的网络在云端的一种表示。它是专用于您的订阅的 **Azure** 云的逻辑隔离。

![](img/521e0b9d82e13c22289e68780ff12a72.png)

你在定义中看到了一些沉重的词汇，比如，“逻辑隔离”和“你自己网络的表现”。暂时忘记这个定义，只要记住这个:

如果两台计算机必须相互交互，它们需要有权限。您可以在虚拟网络设置中添加/删除这些权限。一旦添加了这些权限，只需将这些计算机包含在这个虚拟网络中，瞧！你准备好了。这三行总结了我们今天要完成的内容。

接下来，虚拟网络被进一步划分为组件。

# 虚拟网络组件

以下是虚拟网络组件:

*   子网
*   网络安全组

# 什么是子网？

![](img/42ed892503394903bdcfaa1001607c00.png)

每个虚拟网络都可以分成子部分，这些子部分称为子网。

子网可以进一步划分为:

*   **私有子网** —没有互联网接入的网络。
*   **公共子网** —可以访问互联网的网络。

让我们看一个例子，了解虚拟网络的实际使用情况:

![](img/60c65bd763edae0110a4f542cb2dc699.png)

在上图中，一个虚拟网络被划分为多个子网，每个子网包含一台服务器。

*   **子网 A** 是一个网络服务器，因此它是一个公共子网，因为您的网站可以通过互联网访问。
*   **子网 B** 是一个数据库服务器，因为数据库应该能够连接到 web 服务器，所以不需要互联网连接，因此它是一个私有子网。

您可能想知道，在哪里进行所有这些设置，允许哪些连接，不允许哪些连接，对吗？这就是第二个组件出现的地方，即网络安全组。

# 网络安全组

这是您进行所有连接设置的地方，比如打开哪些端口，默认情况下所有端口都是关闭的。不要害怕，这个博客会指导你完成所有的设置，而且所有的设置都非常容易。

但首先，让我向您展示虚拟网络的最终架构是什么样的:

![](img/5de5a86fe1ab547547ca39860b0eef08.png)

虚拟网络是这样工作的:

*   首先，您创建一个虚拟网络。
*   然后，在这个虚拟网络中创建子网。
*   您将每个子网与各自的虚拟机或云实例相关联。
*   将相关的网络安全组连接到每个子网。
*   在 NSG 中配置属性，一切就绪！

现在让我们用一个演示来尝试一下。

# 演示

我们将在虚拟网络中部署两台服务器，一台数据库服务器和一台网站服务器，它们将相互交互。让我们看看如何构建这个网络。

**第一步:**首先，我们将创建一个网络安全组。转到您的 Azure 仪表盘，并按照下图中的步骤操作。

![](img/d7a35a01ad345fc25af602ee98747857.png)

**第二步:**接下来，你将到达这个屏幕，在这里你将填写你的 NSG 中的所有细节，最后点击“创建”。请注意，在第二步的图像中，您正在创建一个资源组。试着把你所有的资源放在同一个组里，这样更容易管理。

![](img/1ba0dfb6bd131c90c64aee2d7a5e29f7.png)

**步骤 3:** 我们现在将创建一个虚拟网络，按照下图中的说明创建一个。请记住，在资源组中选择“使用现有的”，然后选择您之前创建的同一资源组。

![](img/755867e2469c0771f0135a707b57ff9e.png)

**步骤 4:** 接下来，我们将创建 2 个子网，一个用于我们的网站，一个用于我们的数据库。按照下图中的步骤操作:

![](img/b16d22599bf1764a5ac5df9ac711460a.png)

**步骤 5:** 在下一个屏幕上，创建两个子网。按照相同的步骤，一个用于数据库，一个用于 web 服务器。此外，附加相应的网络安全组。

![](img/eb89e34eacc40e5de2f6f80b0e0e2b4e.png)

**步骤 6:** 好了，我们的网络已经设置好了，我们现在要做的就是配置网络安全组，并在这个虚拟网络中创建我们的服务器。让我们首先创建 web 服务器。

![](img/eef9adb3c0a6eaefc67a706cd0741a43.png)

**第 7 步:**在下一个屏幕上，选择您喜欢的操作系统。对于我们的演示，我们将选择一个 Ubuntu 操作系统。最后，单击创建。

![](img/7d738b913e0b9a295cbb1247b46fd236.png)

**第 8 步:**在首页输入所有相关信息:

![](img/46b01a9395160dcc577721c9226a9a44.png)

接下来，选择相关的配置。我们选择最基本的配置，因为这是一个演示:

![](img/2dfb8cfd8b869b07555783d687c3dcdf.png)

**步骤 9:** 在下一页中，您将选择要在其中部署虚拟机的虚拟网络。

![](img/10a8de0589e6980e19559dda51ebc458.png)

接下来，选择子网:

![](img/835ad9f2070349d2a0d73e0248ee15ff.png)

打开“network security group”窗格，选择“None”选项，因为我们已经将网络安全组连接到虚拟网络。最后，单击 Ok，您的虚拟机将开始部署。对您的数据库服务器也做同样的事情。

![](img/2b25b2346b1d90dbb0118299e99aae30.png)

**步骤 10:** 你可以浏览博客开头所附的视频，了解如何配置 web 服务器和 DB 服务器，它们将指导你如何做同样的事情。让我向您展示我的 webserver 网络安全组目前的情况:

![](img/412cf38d7cfa9d1d233d20bc018ba4c5.png)

由于到目前为止入站安全规则中没有添加任何内容，如果我尝试使用 IP 地址连接到我的服务器，我会得到以下错误:

![](img/1d0efeef6fc5341be381a2455c74f805.png)

**步骤 11:** 按照下图添加任何连接属性:

![](img/470d94ca88084337202584450ad03cbb.png)

我添加了以下连接:

![](img/91fbdf2303ae098d03dbb7e504112f04.png)

要访问您的网站，您需要添加 HTTP 和 HTTPS。最后，您需要 SSH 来配置您的服务器。如果我现在尝试连接我的 web 服务器，会出现以下屏幕:

![](img/c875123a33ac7af191458c90b6fbb1e4.png)

这是 SSH 窗口:

![](img/6c3113780cc5d640d1b21a87e3e4b92c.png)

**步骤 12:** 这是我的数据库网络安全组的样子:

![](img/29d8a1c205403ffb37a9fd284f7070e1.png)

这是您配置虚拟网络的方式。如果你想查看更多关于 Python、DevOps、Ethical Hacking 等市场最热门技术的文章，那么你可以参考 [Edureka 的官方网站。](https://www.edureka.co/blog/?utm_source=medium&utm_medium=content-link&utm_campaign=azure-virtual-network-tutorial)

请留意本系列中解释 Azure 其他方面的其他文章。

> *1。* [*蔚蓝教程*](/edureka/azure-tutorial-5a97e30ee9a7)
> 
> *2。* [*Azure 门户*](/edureka/azure-portal-all-you-need-to-know-about-the-azure-console-8ade1effa474)
> 
> *3。* [*蔚蓝收纳教程*](/edureka/azure-storage-tutorial-an-introduction-to-azure-storage-dae8fd8f555c)
> 
> *4。* [*蔚蓝专用网*](/edureka/azure-virtual-network-securing-your-applications-using-vpc-744eba3aa5b1)
> 
> *5。* [*Azure DevOps 教程*](/edureka/azure-devops-cf755fb334ae)
> 
> *6。* [*天青板*](/edureka/azure-boards-ce093b2688bb)

*原载于 2017 年 8 月 22 日 https://www.edureka.co*[](https://www.edureka.co/blog/azure-virtual-network-tutorial/)**。**