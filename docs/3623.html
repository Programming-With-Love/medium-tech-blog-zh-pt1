<html>
<head>
<title>[Android]: Understanding Activity Lifecycle for Beginners-Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">[Android]:初学者理解活动生命周期-第1部分</h1>
<blockquote>原文：<a href="https://medium.com/globant/android-understanding-activity-lifecycle-for-beginners-part-1-dfa4adae715f?source=collection_archive---------2-----------------------#2021-02-08">https://medium.com/globant/android-understanding-activity-lifecycle-for-beginners-part-1-dfa4adae715f?source=collection_archive---------2-----------------------#2021-02-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/bc8592c2ce24c2aa1b249eea32c3972b.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*PvdqIQndgHYyneuJeMLq7g.jpeg"/></div><figcaption class="il im et er es in io bd b be z dx">pic credit-Google</figcaption></figure><ul class=""><li id="6579" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated"><strong class="ir hi"> <em class="jh">安卓活动</em> </strong>是非常重要的组件，也是作为安卓开发者首先要了解的。</li></ul><h1 id="2119" class="ji jj hh bd jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf bi translated"><strong class="ak">什么是活动？</strong></h1><ul class=""><li id="5878" class="ip iq hh ir b is kg iu kh iw ki iy kj ja kk jc jd je jf jg bi translated">用户在手机应用程序屏幕上看到的一切都是活动。一个活动提供了一个窗口，应用程序可以在其中绘制用户界面。</li><li id="e973" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated">我们日常使用的移动应用程序有多个屏幕，例如，假设我们有一个应用程序，其中用户首先<strong class="ir hi">登录或注册</strong>，并在<strong class="ir hi">保存</strong>按钮上单击用户导航到应用程序的<strong class="ir hi">主屏幕</strong>。这些都是执行不同操作的不同屏幕，这意味着我们的移动应用程序包含用户在屏幕上看到的多个活动。</li><li id="9b1e" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated">为了提供这种用户体验，您应该知道如何管理组件的生命周期。Android生命周期有不同的回调方法，例如，如果用户在生命周期中打开一个应用程序create方法gets调用，如果你正在使用音乐应用程序，你想切换到打开新的应用程序来查看通知消息，而不是暂停gets调用的新回调，所以每个回调都允许你执行特定的工作，以适应给定的状态变化。</li></ul><h1 id="cb98" class="ji jj hh bd jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf bi translated">活动生命周期概念:</h1><ul class=""><li id="bed3" class="ip iq hh ir b is kg iu kh iw ki iy kj ja kk jc jd je jf jg bi translated">一个Android活动在其整个生命周期中会经历许多状态。</li><li id="bf78" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated">理解生命周期阶段的框图</li></ul><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es kq"><img src="../Images/1be46327b9b664c07fd266e477c41cff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1026/format:webp/1*ukULK8M-zBRSVbgInTcdAA.png"/></div><figcaption class="il im et er es in io bd b be z dx">pic credit — developer.android</figcaption></figure><ul class=""><li id="6d4e" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">让我们一步一步来理解每种方法-</li><li id="eaab" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated">1.<strong class="ir hi"> <em class="jh"> onCreate( )- </em> </strong>这个方法在活动第一次被创建时被调用。在这个方法中，您执行基本的应用程序启动逻辑，该逻辑在活动的整个生命周期中应该只发生一次。这是活动的基本设置，比如声明用户界面。</li><li id="d419" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated">示例:</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="1676" class="la jj hh kw b fi lb lc l ld le">override fun onCreate(savedInstanceState: Bundle?) {<br/>    super.onCreate(savedInstanceState)<br/>    setContentView(R.layout.<em class="jh">activity_main</em>)<br/>    Log.d("lifecycle","onCreate invoked");<br/>}</span></pre><ul class=""><li id="5948" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">在本例中，通过将文件的资源ID<code class="du lf lg lh kw b"><strong class="ir hi">R.layout.</strong></code><strong class="ir hi"><em class="jh">activity _ main</em></strong>传递给setContentView()来指定XML布局文件。setContentView()做了什么指定视图的布局参数被忽略。视图的宽度和高度默认设置为<code class="du lf lg lh kw b"><a class="ae li" href="https://developer.android.com/reference/android/view/ViewGroup.LayoutParams#MATCH_PARENT" rel="noopener ugc nofollow" target="_blank">ViewGroup.LayoutParams#MATCH_PARENT</a></code>。要使用自己的布局参数，请调用<code class="du lf lg lh kw b"><a class="ae li" href="https://developer.android.com/reference/android/app/Activity#setContentView(android.view.View,%20android.view.ViewGroup.LayoutParams)" rel="noopener ugc nofollow" target="_blank">setContentView(android.view.View, android.view.ViewGroup.LayoutParams)</a></code>。</li><li id="9197" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated">现在，如你所见，我在代码中使用了Log.d()来理解onCreate()何时被调用。所以我创建了一个简单的程序，它有一个按钮“点击我”，这是用户可以看到的第一个屏幕，即主活动</li></ul><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es lj"><img src="../Images/ca9423ab41c797d42bd2a1c1cb808313.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/1*55_EoKlb3MVvajvWcS053w.gif"/></div><figcaption class="il im et er es in io bd b be z dx"><strong class="bd jk">Application shows for onCraete(), onStart(), onResume()</strong></figcaption></figure><ul class=""><li id="c247" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">我打开我的应用程序，在这个应用程序上，我的第一个活动也就是主活动被打开，这个<strong class="ir hi"> <em class="jh"> OnCreate() </em> </strong>被调用。</li><li id="b484" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated">2.<strong class="ir hi"> <em class="jh"> onStart() — </em> </strong>当活动对用户可见时，这个方法被调用。当活动进入开始状态时，系统调用这个回调函数，这个方法是应用程序初始化维护UI的代码的地方。</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="e8b8" class="la jj hh kw b fi lb lc l ld le">override fun onStart() {<br/>    super.onStart()<br/>    Log.d("lifecycle","onStart invoked");<br/>}</span></pre><ul class=""><li id="b50a" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">3.<strong class="ir hi"><em class="jh">【on resume()</em></strong>—当活动开始与用户交互时，调用此方法。</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="c743" class="la jj hh kw b fi lb lc l ld le">override fun onResume() {<br/>    super.onResume()<br/>    Log.d("lifecycle","onResume invoked");<br/>}</span></pre><ul class=""><li id="b8f1" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">在活动开始、重新开始(onRestart()发生在onStart()之前)或暂停(onPause())后，调用onResume()。当活动处于onResume()状态时，应用程序用户就可以使用该活动了。</li><li id="c1b2" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated">如果要更新数据，可以创建一个数据更新函数，并将该函数放在onResume()中。或者在onResume()中放一个loadData函数。</li><li id="db40" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated">4.<strong class="ir hi"><em class="jh">【on pause()</em></strong>—当活动对用户不再可见时，调用此方法。当您导航到另一个活动SecondActivity时，您可以在您的activity(比如MainActivity)中覆盖onPause()，当您返回到MainActivity时，您可以覆盖onResume()。</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="7b31" class="la jj hh kw b fi lb lc l ld le">override fun onPause() {<br/>    super.onPause()<br/>    Log.d("lifecycle","onPause invoked activity 2");<br/>}</span></pre><ul class=""><li id="6096" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">5.<strong class="ir hi"><em class="jh">【onStop()</em></strong>—当活动对用户不再可见时，调用此方法。</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="ec27" class="la jj hh kw b fi lb lc l ld le">override fun onStop() {<br/>    super.onStop()<br/>    Log.d("lifecycle","onStop invoked");<br/>}</span></pre><ul class=""><li id="22c5" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">6.<strong class="ir hi"><em class="jh">on destroy()</em></strong>—在activity销毁之前调用此方法。您的活动被销毁前收到的最后一个呼叫。这可能是因为活动即将结束(有人对它调用了finish()，或者是因为系统为了节省空间而临时销毁了活动的这个实例。</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="c018" class="la jj hh kw b fi lb lc l ld le">override fun onDestroy() {<br/>    super.onDestroy()<br/>    Log.d("lifecycle","onDestroy invoked");<br/>}</span></pre><ul class=""><li id="7c10" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">7.<strong class="ir hi"><em class="jh">【onRestart()</em></strong>—在activity销毁之前调用此方法。当当前活动重新显示给用户时，在<code class="du lf lg lh kw b">onStop()</code>之后调用<code class="du lf lg lh kw b">onRestart()</code>。</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="7348" class="la jj hh kw b fi lb lc l ld le">override fun onRestart() {<br/>    super.onRestart()<br/>    Log.d("lifecycle","onRestart invoked");<br/>}</span></pre><ul class=""><li id="2686" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">让我们通过示例程序步骤来理解-</li></ul><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es lj"><img src="../Images/9d068791ad7e91c7edfcb46aa317328b.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/1*xz3QhVJoHmAGWQ_E8XJ2GA.gif"/></div><figcaption class="il im et er es in io bd b be z dx"><strong class="bd jk">Understanding of onPause, onStop</strong></figcaption></figure><blockquote class="lk ll lm"><p id="82d1" class="ln lo jh ir b is it lp lq iu iv lr ls lt lu lv lw lx ly lz ma mb mc md me jc ha bi translated">现在，正如你在上面的<strong class="ir hi"> gif </strong>中看到的，我已经创建了一个简单的程序，在这个程序中，带有按钮“Click me”<strong class="ir hi">main Activity</strong>的屏幕1首先被调用，单击按钮时，用户导航到带有文本“Go Back”<strong class="ir hi">second Activity的新活动。</strong></p></blockquote><ul class=""><li id="b153" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">在这个导航过程中，我们调用了不同的方法:</li><li id="6091" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated">(一)。点击应用程序，我们可以看到屏幕点击我主活动</li><li id="75ac" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated"><strong class="ir hi"> 1。onCreate() — MainActivity(第一个活动)被调用</strong></li><li id="efaa" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated"><strong class="ir hi"> 2。onStart() —主活动</strong></li><li id="dc7d" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated"><strong class="ir hi"> 3。onResume() — MainActivity() </strong></li></ul><blockquote class="lk ll lm"><p id="d679" class="ln lo jh ir b is it lp lq iu iv lr ls lt lu lv lw lx ly lz ma mb mc md me jc ha bi translated">(b .)现在按下<strong class="ir hi"> ClickMe </strong>用户导航到新屏幕，即<strong class="ir hi">第二个活动</strong></p></blockquote><ul class=""><li id="1082" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated"><strong class="ir hi"> 1。onPause() — MainActivity() </strong></li><li id="1bdf" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated"><strong class="ir hi"> 2。onCreate() — SecondActivity被调用</strong></li><li id="9eb4" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated"><strong class="ir hi"> 3。onStart() — SecondActivity </strong></li><li id="9a76" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated"><strong class="ir hi"> 4。onResume() —第二个活动</strong></li><li id="a542" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated"><strong class="ir hi"> 5。onStop() —主活动</strong></li></ul><blockquote class="lk ll lm"><p id="7608" class="ln lo jh ir b is it lp lq iu iv lr ls lt lu lv lw lx ly lz ma mb mc md me jc ha bi translated">如果<!-- -->用户点击SecondActivity的文本<strong class="ir hi">“返回”</strong></p></blockquote><ul class=""><li id="3058" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated"><strong class="ir hi"> 1。onPause- SecondActivity </strong></li><li id="5761" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated"><strong class="ir hi"> 2。onCreate() — MainActivity被调用</strong></li><li id="1a22" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated"><strong class="ir hi"> 3。onStart() —主活动</strong></li><li id="16b8" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated"><strong class="ir hi"> 4。onResume() —主要活动</strong></li><li id="c431" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated"><strong class="ir hi"> 5。onStop() —SecondActivity </strong></li></ul><p id="fb9f" class="pw-post-body-paragraph ln lo hh ir b is it lp lq iu iv lr ls iw lu lv lw iy ly lz ma ja mc md me jc ha bi translated">主要活动代码:</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="174d" class="la jj hh kw b fi lb lc l ld le"><br/><br/>class MainActivity : AppCompatActivity() {<br/>    override fun onCreate(savedInstanceState: Bundle?) {<br/>        super.onCreate(savedInstanceState)<br/>        setContentView(R.layout.<em class="jh">activity_main</em>)<br/>        Log.d("lifecycle", "onCreate invoked Activity 1");<br/>        val button: Button = findViewById(R.id.<em class="jh">btnFindMe</em>)<br/>        button.setOnClickListener <strong class="kw hi">{<br/>            </strong>val intent = Intent(this, SecondActivity::class.<em class="jh">java</em>)<br/>            startActivity(intent)<br/>        <strong class="kw hi">}<br/>    </strong>}<br/><br/>    override fun onStart() {<br/>        super.onStart()<br/>        Log.d("lifecycle", "onStart invoked Activity 1");<br/>    }<br/><br/>    override fun onResume() {<br/>        super.onResume()<br/>        Log.d("lifecycle", "onResume invoked Activity 1");<br/>    }<br/><br/>    override fun onPause() {<br/>        super.onPause()<br/>        Log.d("lifecycle", "onPause invoked Activity 1");<br/>    }<br/><br/>    override fun onStop() {<br/>        super.onStop()<br/>        Log.d("lifecycle", "onStop invoked Activity 1");<br/>    }<br/><br/>    override fun onDestroy() {<br/>        super.onDestroy()<br/>        Log.d("lifecycle", "onDestroy invoked Activity 1");<br/>    }<br/><br/>    override fun onRestart() {<br/>        super.onRestart()<br/>        Log.d("lifecycle", "onRestart invoked Activity 1");<br/>    }<br/><br/>}</span></pre><p id="517e" class="pw-post-body-paragraph ln lo hh ir b is it lp lq iu iv lr ls iw lu lv lw iy ly lz ma ja mc md me jc ha bi translated">第二个活动的代码—</p><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="afed" class="la jj hh kw b fi lb lc l ld le"><br/><br/><br/>class SecondActivity : AppCompatActivity() {<br/>    override fun onCreate(savedInstanceState: Bundle?) {<br/>        super.onCreate(savedInstanceState)<br/>        setContentView(R.layout.<em class="jh">second_activity</em>)<br/>        Log.d("lifecycle", "onCreate invoked activity 2");<br/>        val txtClick: TextView = findViewById(R.id.<em class="jh">txtClickMe</em>)<br/>        txtClick.setOnClickListener <strong class="kw hi">{<br/>            </strong>val intent = Intent(this, MainActivity::class.<em class="jh">java</em>)<br/>            startActivity(intent)<br/>        <strong class="kw hi">}<br/>    </strong>}<br/><br/>    override fun onStart() {<br/>        super.onStart()<br/>        Log.d("lifecycle", "onStart invoked activity 2");<br/>    }<br/><br/>    override fun onResume() {<br/>        super.onResume()<br/>        Log.d("lifecycle", "onResume invoked activity 2");<br/>    }<br/><br/>    override fun onPause() {<br/>        super.onPause()<br/>        Log.d("lifecycle", "onPause invoked activity 2");<br/>    }<br/><br/>    override fun onStop() {<br/>        super.onStop()<br/>        Log.d("lifecycle", "onStop invoked activity 2");<br/>    }<br/><br/>    override fun onDestroy() {<br/>        super.onDestroy()<br/>        Log.d("lifecycle", "onDestroy invoked activity 2");<br/>    }<br/><br/>    override fun onRestart() {<br/>        super.onRestart()<br/>        Log.d("lifecycle", "onRestart invoked activity 2");<br/>    }<br/>}</span></pre><ul class=""><li id="d1b0" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">主活动xml-</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="2736" class="la jj hh kw b fi lb lc l ld le">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;RelativeLayout android:id="@+id/RelativeLayout01"<br/>    android:layout_width="fill_parent"<br/>    android:layout_height="fill_parent"<br/>    xmlns:android="http://schemas.android.com/apk/res/android"&gt;<br/><br/>    &lt;Button android:id="@+id/btnFindMe"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        android:layout_centerInParent="true"<br/>        android:text="Click me"&gt;&lt;/Button&gt;<br/><br/>&lt;/RelativeLayout&gt;</span></pre><ul class=""><li id="4516" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">第二个活动xml-</li></ul><pre class="kr ks kt ku fd kv kw kx ky aw kz bi"><span id="d7f5" class="la jj hh kw b fi lb lc l ld le">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;androidx.constraintlayout.widget.ConstraintLayout<br/>    xmlns:android="http://schemas.android.com/apk/res/android"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"&gt;<br/>    &lt;TextView<br/>        android:id="@+id/txtClickMe"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        android:text="Go Back!"<br/>        app:layout_constraintBottom_toBottomOf="parent"<br/>        app:layout_constraintLeft_toLeftOf="parent"<br/>        app:layout_constraintRight_toRightOf="parent"<br/>        app:layout_constraintTop_toTopOf="parent" /&gt;<br/><br/>&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span></pre><ul class=""><li id="264f" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">我使用了这个简单的代码，在其中我们可以理解活动的生命周期流程。</li><li id="7b51" class="ip iq hh ir b is kl iu km iw kn iy ko ja kp jc jd je jf jg bi translated">如果你是初学者，正在学习Android，我建议你一步一步地去理解活动生命周期流程。理解每一步，流畅地练习，保持简单</li></ul><h1 id="e683" class="ji jj hh bd jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf bi translated">你必须努力保持它的简单和有意义。</h1><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es mf"><img src="../Images/e8e0d1af07afec9fa3332155992197b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/1*GoGbmITh5s7AOkxAN2H4AA.gif"/></div><figcaption class="il im et er es in io bd b be z dx">credit — Google</figcaption></figure><ul class=""><li id="38c6" class="ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg bi translated">快乐编码:)</li></ul></div></div>    
</body>
</html>