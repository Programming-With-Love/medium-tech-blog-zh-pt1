<html>
<head>
<title>Getting Started Exploring SDKs with REPL-Driven Development in Node.js, Ruby, Python, PHP, C# and Java</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Node.js、Ruby、Python、PHP、C#和Java中的REPL驱动开发开始探索SDK</h1>
<blockquote>原文：<a href="https://medium.com/square-corner-blog/getting-started-exploring-sdks-with-repl-driven-development-in-node-js-49e6316dc6a0?source=collection_archive---------4-----------------------#2018-01-30">https://medium.com/square-corner-blog/getting-started-exploring-sdks-with-repl-driven-development-in-node-js-49e6316dc6a0?source=collection_archive---------4-----------------------#2018-01-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><blockquote class="ie"><p id="9633" class="if ig hh bd ih ii ij ik il im in io dx translated">注意，我们已经行动了！如果您想继续了解Square的最新技术内容，请访问我们的新家<a class="ae ip" href="https://developer.squareup.com/blog" rel="noopener ugc nofollow" target="_blank">https://developer.squareup.com/blog</a></p></blockquote><p id="7c69" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm io ha bi translated">使用API越快越好。SDK通过提供一个已经编写好的、预先制作好的API客户端来帮助加速这个入门过程，这个客户端<em class="jn">只需在你已经在使用的语言中</em>工作即可。例如，<a class="ae ip" href="https://docs.connect.squareup.com/" rel="noopener ugc nofollow" target="_blank"> Square Connect API </a>拥有半打语言的SDK。</p><p id="ba2d" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">那么我们如何探索一个SDK呢？一种方法是从文档中获取示例，将它们保存到文件中，然后运行它们。这个过程是可行的，但是您可以通过删除保存到文件的步骤并使用称为REPL的东西来减少第一次API调用的时间。</p><p id="9e92" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">如今，许多(如果不是大多数)语言都带有REPL。每个Square Connect SDK语言实际上都附带了一个REPL！下面我们将快速看一下用各种语言开始REPL驱动的开发的例子。如果你已经知道什么是REPL，并且想直接进入例子，这里有<a class="ae ip" rel="noopener" href="/p/49e6316dc6a0#4fc5"> <strong class="is hi"> Node.js </strong> </a>，<a class="ae ip" rel="noopener" href="/p/49e6316dc6a0#9f2d"> <strong class="is hi"> Ruby </strong> </a>，<a class="ae ip" rel="noopener" href="/p/49e6316dc6a0#835e"> <strong class="is hi"> Python </strong> </a>，<a class="ae ip" rel="noopener" href="/p/49e6316dc6a0#1c9b"> <strong class="is hi"> PHP </strong> </a>，<a class="ae ip" rel="noopener" href="/p/49e6316dc6a0#e408"> <strong class="is hi"> CSharp </strong> </a>和<a class="ae ip" rel="noopener" href="/p/49e6316dc6a0#c466"> <strong class="is hi"> Java </strong> </a>的链接。</p><h1 id="6269" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">什么是REPL？</h1><p id="c54c" class="pw-post-body-paragraph iq ir hh is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm io ha bi translated">“REPL”是首字母缩写词，代表“读取”、“评估”、“打印”和“循环”您通常从命令行输入REPL，然后通过文本界面进行交互。REPL会阅读你输入的内容，直到你按下“回车”键然后，编程语言对您输入的文本进行评估，并将结果打印到屏幕上。然后是循环部分，重新开始读取输入——这样您就有了交互体验。</p><p id="4b54" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">REPL让您尝试一段代码，并立即看到结果。它允许您直接在终端中运行代码，并立即看到结果。与将代码保存到文件中，然后用适当的语言手动执行该文件相比，这通常是一种更方便的测试代码的方式。</p><h1 id="c5c3" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak"> REPL驱动发展</strong></h1><p id="5ed4" class="pw-post-body-paragraph iq ir hh is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm io ha bi translated">首先，让我们确定REPL驱动开发(RDD)不是测试驱动开发(TDD)的替代品。RDD是你可以用来增加你的TDD的东西。REPL是一个探索的地方，然后处理你制造的混乱。您的测试巩固了您从代码中学到的东西，这些代码是为后代保留的。实际上，REPL对于探索您的测试也非常方便，尤其是在追踪错误的时候。REPL提供的紧密的、交互式的反馈循环加快了调试代码和测试的速度。</p><p id="ed8b" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">抛弃代码是一件美妙的事情。当你知道你不打算保持这种状态时，它会减轻你的压力，所以你可以去探索。你总是可以用一个你改变并重复运行的文件来做到这一点，但是在文本编辑器和终端之间来回切换需要时间。最后，你必须清理你所做的一切，否则就会留下烂摊子。REPL让你自由探索并与你的代码互动！</p><h1 id="99ed" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">REPL探索SDKs】</strong></h1><p id="ea35" class="pw-post-body-paragraph iq ir hh is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm io ha bi translated">探索您正在研究的SDK是REPL的一个很好的用途。它不仅允许您在浏览API时尝试各种端点，还允许您自省并询问响应它们能做什么。下面我们将以Square Connect SDKs为例，它支持Ruby、PHP、Python、Node.js、Java和CSharp。让我们看看如何使用流行的<a class="ae ip" href="https://brew.sh/" rel="noopener ugc nofollow" target="_blank">家酿</a>包管理器在macOS上为每种语言安装开发环境REPL。</p><h1 id="9f2d" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">红宝石</strong></h1><figure class="kx ky kz la fd lb er es paragraph-image"><div class="er es kw"><img src="../Images/caccfb73c39e9c2f0793731374b8e6f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*_i78Ls3WlNzvRQ-B07HPXQ.png"/></div><figcaption class="le lf et er es lg lh bd b be z dx">Image by Ruby Visual Identity Team, licensed under <a class="ae ip" href="https://creativecommons.org/licenses/by-sa/2.5/deed.en" rel="noopener ugc nofollow" target="_blank">CC BY-SA 2.5</a>.</figcaption></figure><p id="b90b" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">虽然Ruby已经安装在macOS上，但使用brew获得最新版本还是不错的:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="92c9" class="ln ju hh lj b fi lo lp l lq lr">$ brew install ruby</span></pre><p id="da0a" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">我们不需要为Ruby安装包管理器，因为<code class="du ls lt lu lj b">gem</code>命令是Ruby自带的。Ruby还附带了一个名为<code class="du ls lt lu lj b">irb</code>的REPL。</p><p id="768e" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">值得一提的是一种流行的<code class="du ls lt lu lj b">irb</code>替代品，叫做<code class="du ls lt lu lj b">pry</code>。Conrad Irwin做了一个很棒的演讲，展示了名为<a class="ae ip" href="https://www.youtube.com/watch?v=D9j_Mf91M0I" rel="noopener ugc nofollow" target="_blank"> REPL驱动开发和Pry </a>的高级特性。它非常值得一看。</p><p id="f1d4" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">由于RubyGems附带了Ruby，我们可以只安装<code class="du ls lt lu lj b">square_connect</code> gem:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="8471" class="ln ju hh lj b fi lo lp l lq lr">$ gem install square_connect</span></pre><p id="9c3d" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">现在我们已经准备好离开shell，进入Ruby REPL，只需输入<code class="du ls lt lu lj b">irb</code>:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="d165" class="ln ju hh lj b fi lo lp l lq lr">$ irb<br/>irb(main):001:0&gt; ▊</span></pre><p id="5760" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">这个新的命令行是一个交互式的Ruby解释器。从这里我们可以开始使用Square SDK:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="fc04" class="ln ju hh lj b fi lo lp l lq lr">irb(main):001:0 require 'square_connect'<br/>=&gt; true</span></pre><p id="1192" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">以下是从终端实时看到的上述所有步骤:</p><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es lv"><img src="../Images/dc7fd2d184b729b3d1784a4ea1811dd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*hOrh7rIFi8rM_aCAi3Pcpg.gif"/></div></div></figure><p id="e8ff" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">这样，我们就可以交互式地探索来自Ruby的Square Connect SDK了！接下来让我们看看如何在其他语言中达到这一点。</p><h1 id="1c9b" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak"> PHP </strong></h1><figure class="kx ky kz la fd lb er es paragraph-image"><div class="er es ma"><img src="../Images/7a98d34d522ac50a8238af4fff112f3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*PG3OX7n8YVtoc3I0irLVhA.png"/></div><figcaption class="le lf et er es lg lh bd b be z dx">Image by Colin Viebrock, licensed under <a class="ae ip" href="https://creativecommons.org/licenses/by-sa/4.0/" rel="noopener ugc nofollow" target="_blank">CC BY-SA 4.0</a>.</figcaption></figure><p id="f8e0" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">PHP也随macOS一起发布。我们将继续使用PHP的macOS系统版本，但是我们需要安装一个名为Composer的PHP包管理器:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="0262" class="ln ju hh lj b fi lo lp l lq lr">$ brew install homebrew/php/composer</span></pre><p id="3a69" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">从这里开始，用<code class="du ls lt lu lj b">composer</code>安装<code class="du ls lt lu lj b">square/connect</code>就很简单了:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="7db0" class="ln ju hh lj b fi lo lp l lq lr">$ composer require square/connect</span></pre><p id="fb96" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">最后，我们可以进入PHP附带的简单REPL，它需要Square Connect SDK:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="2e31" class="ln ju hh lj b fi lo lp l lq lr">$ php -a<br/>Interactive shell</span><span id="e408" class="ln ju hh lj b fi mb lp l lq lr">php &gt; require_once('vendor/square/connect/autoload.php');<br/>php &gt; ▊</span></pre><p id="c811" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">PHP内置的REPL功能不多，所以值得考虑一个替代品，比如<a class="ae ip" href="https://github.com/borisrepl/boris" rel="noopener ugc nofollow" target="_blank"> Boris </a>。</p><h1 id="4a1c" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">CSharp</h1><figure class="kx ky kz la fd lb er es paragraph-image"><div class="er es mc"><img src="../Images/44594d0d2c5736e7e3ac3f193376c323.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/format:webp/1*IiRfOUubjvPs0M2KP2Ecnw.png"/></div></figure><p id="df21" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">我们将使用Mono在macOS上运行CSharp。与其他软件包相比，此软件包需要一段时间来安装:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="4333" class="ln ju hh lj b fi lo lp l lq lr">$ brew install mono</span></pre><p id="a070" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">然后我们可以使用<code class="du ls lt lu lj b">nuget</code>为CSharp安装Square Connect SDK:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="695d" class="ln ju hh lj b fi lo lp l lq lr">$ nuget install Square.Connect</span></pre><p id="9724" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">单声道配备了CSharp REPL，因此我们将使用它。我们只需将REPL指向刚刚由<code class="du ls lt lu lj b">nuget</code>安装的Square Connect SDK <code class="du ls lt lu lj b">.dll</code>:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="2671" class="ln ju hh lj b fi lo lp l lq lr">$ csharp -r:Square.Connect.2.5.1.237/lib/net45/Square.Connect.dll<br/>csharp&gt; using Square.Connect;</span></pre><h1 id="835e" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak"> Python </strong></h1><figure class="kx ky kz la fd lb er es paragraph-image"><div class="er es kw"><img src="../Images/60e1bfda20fd813faebe123647f38328.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*6PeRsdU_7tJyYjdgebEiaQ.png"/></div><figcaption class="le lf et er es lg lh bd b be z dx">Image by the Python Software Foundation, licensed under <a class="ae ip" href="https://www.gnu.org/licenses/gpl.html" rel="noopener ugc nofollow" target="_blank">GPL</a>.</figcaption></figure><p id="a195" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">Python 2随macOS一起发布，但是让我们先来看看Python 3:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="a9cd" class="ln ju hh lj b fi lo lp l lq lr">$ brew install python3</span></pre><p id="ca3f" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">然后我们可以使用Python <code class="du ls lt lu lj b">pip</code>包管理器来安装Square Connect SDK:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="10ea" class="ln ju hh lj b fi lo lp l lq lr">$ pip3 install squareconnect</span></pre><p id="0c89" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">Python还附带了内置的REPL，所以我们将使用它:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="d485" class="ln ju hh lj b fi lo lp l lq lr">$ python3<br/>&gt;&gt;&gt; import squareconnect</span></pre><h1 id="4fc5" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak"> Node.js </strong></h1><figure class="kx ky kz la fd lb er es paragraph-image"><div class="er es kw"><img src="../Images/55b61ce77b6f21763fc89c7a03ed5bb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*pPn-60tTX8y_tHukPQqpdg.png"/></div><figcaption class="le lf et er es lg lh bd b be z dx">Image by Javacript authors, licensed under <a class="ae ip" href="https://opensource.org/licenses/MIT" rel="noopener ugc nofollow" target="_blank">MIT</a>.</figcaption></figure><p id="1839" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">Node.js没有随macOS一起发布，所以让我们从Homebrew获取它:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="ea80" class="ln ju hh lj b fi lo lp l lq lr">$ brew install node</span></pre><p id="faf6" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">然后让我们使用节点的NPM包管理器来安装Square Connect SDK:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="5850" class="ln ju hh lj b fi lo lp l lq lr">$ npm install square-connect</span></pre><p id="c380" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">现在我们准备使用Node的内置REPL:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="6d6e" class="ln ju hh lj b fi lo lp l lq lr">$ node<br/>&gt; const SquareConnect = require('square-connect');</span></pre><figure class="kx ky kz la fd lb er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es lv"><img src="../Images/314b4e86859678aab1c64e1baf2e7338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*NhQ1TKc6Ul4uHYqFiUQJKQ.gif"/></div></div></figure><h1 id="dbb2" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak"> Java </strong></h1><figure class="kx ky kz la fd lb er es paragraph-image"><div class="er es ma"><img src="../Images/61cb0cdc40719ac33e64462adb3b1b91.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/format:webp/1*mqPgvNVFUexLe1MSEYXgVg.png"/></div></figure><p id="29b6" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">与我们今天看到的其他语言不同，Java安装需要从Oracle的网页下载并点击协议进行安装。一旦安装了Java，我们将需要一个包管理器，所以我们将使用Maven:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="903e" class="ln ju hh lj b fi lo lp l lq lr">brew install maven</span></pre><p id="cefd" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">然后我们可以安装最新版本的Square Connect SDK:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="ec97" class="ln ju hh lj b fi lo lp l lq lr">$ mvn dependency:get -Dartifact=com.squareup:connect:RELEASE</span></pre><p id="4009" class="pw-post-body-paragraph iq ir hh is b it jo iv iw ix jp iz ja jb jq jd je jf jr jh ji jj js jl jm io ha bi translated">从JDK 9开始，Java附带了一个名为<code class="du ls lt lu lj b">jshell</code>的REPL。这有点冗长，但是您可以像加载其他REPLs一样加载Square Connect SDK:</p><pre class="kx ky kz la fd li lj lk ll aw lm bi"><span id="d5c4" class="ln ju hh lj b fi lo lp l lq lr">$ jshell --class-path ~/.m2/repository/com/squareup/connect/2.5.1/connect-2.5.1.jar<br/>jshell&gt; import com.squareup.connect.ApiClient;</span></pre><h1 id="bb5e" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated"><strong class="ak">结论</strong></h1><p id="fc63" class="pw-post-body-paragraph iq ir hh is b it kr iv iw ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm io ha bi translated">好吧，这是一个很大的安装！既然我们的REPLs和SDK包已经安装好了，我们就可以用上述任何一种语言来探索Square Connect SDK了。上面的每个REPLs都有不同的特性和功能。一些语言附带了很好的REPL，但通常值得探索替代方法。一些REPLs相当简单，而另一些REPLs让您可以深入代码，并可用于严肃的调试。当你尝试一门语言或一个SDK时，考虑用REPL来探索。编码快乐！</p></div></div>    
</body>
</html>