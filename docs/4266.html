<html>
<head>
<title>Exploring Jetpack Compose: Button</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索Jetpack撰写:按钮</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/exploring-jetpack-compose-button-4cfb8355e50?source=collection_archive---------0-----------------------#2019-11-10">https://medium.com/google-developer-experts/exploring-jetpack-compose-button-4cfb8355e50?source=collection_archive---------0-----------------------#2019-11-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/51374b7839df56d0379b80fdb88be78f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iRL8td5Jmam1e1z0IDTitA.png"/></div></div></figure><p id="e637" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在Android Studio 4.0 Canary 1中，我们可以开始探索Jetpack compose，这是一种以声明方式为Android应用程序构建UI的新方法。为了开始使用jetpack compose，<a class="ae jn" href="https://developer.android.com/jetpack/compose/tutorial" rel="noopener ugc nofollow" target="_blank">官方开发者网站</a>上有一个很棒的教程。在这一系列文章中，我想深入研究每一个可用的组件，探索我们如何在我们的应用程序中利用它们。</p></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><blockquote class="jv jw jx"><p id="f785" class="ip iq jy ir b is it iu iv iw ix iy iz jz jb jc jd ka jf jg jh kb jj jk jl jm ha bi translated">这最初是在我的<a class="ae jn" href="https://joebirch.co/2019/10/24/exploring-jetpack-compose-button/" rel="noopener ugc nofollow" target="_blank">个人博客</a>上发布的</p></blockquote></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><p id="78a7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在本文中，我们将从按钮组件开始，这是我们在大多数应用程序中可能会用到的东西。假设我们正在为应用程序的身份验证屏幕创建一个按钮——这里我们将创建一个新的<strong class="ir hi">按钮</strong>组件。按钮是一个可组合的组件——有两个函数可以用来构建它。第一个采用了<strong class="ir hi"> text </strong>(用于声明按钮上显示的文本)、<strong class="ir hi"> onClick </strong>(用于处理按钮上的点击事件)和<strong class="ir hi"> style </strong>(用于处理按钮的样式)属性。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="83b4" class="kl km hh kh b fi kn ko l kp kq"><a class="ae jn" href="http://twitter.com/Composable" rel="noopener ugc nofollow" target="_blank">@Composable</a><br/>fun Button(<br/>    text: String,<br/>    onClick: (() -&gt; Unit)? = null,<br/>    style: ButtonStyle = ContainedButtonStyle()<br/>)</span></pre><p id="2dcd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这里我们可以看到，至少我们需要为按钮提供一个<strong class="ir hi">文本</strong>值，其他属性被赋予默认值。让我们继续创建一个带有一些文本和onClick处理程序的简单按钮:</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="4d0f" class="kl km hh kh b fi kn ko l kp kq">Button(text = “Authenticate”, onClick = {<br/>    // handle button click<br/>})</span></pre><figure class="kc kd ke kf fd ii er es paragraph-image"><div class="er es kr"><img src="../Images/af9856385b458dea12da8546ae4ba688.png" data-original-src="https://miro.medium.com/v2/resize:fit:1180/0*Gl74RQiRB_BvA2rZ"/></div></figure><p id="dffd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在Android Studio的预览部分，我们可以看到我们的按钮显示，如上。在某些情况下，我们可能希望更多地定制按钮的实际内容，在这些情况下，我们可能希望利用其他按钮函数，该函数允许我们传入可组合子元素的集合来代替文本属性:</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="fd2e" class="kl km hh kh b fi kn ko l kp kq">@Composable<br/>fun AuthenticationButton() {<br/>    Button(onClick = {<br/>        // handle button click<br/>    }, children = {<br/>        Text(text = “Authenticate”)<br/>    })<br/>}</span></pre><p id="a707" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您希望在按钮内部显示附加内容，这将非常有用。虽然上面的例子只显示了一个文本组件——这将允许你定制文本组件以适应你的应用程序的外观，或者甚至在按钮内的文本旁边显示一个图标。</p><h1 id="4add" class="ks km hh bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">按钮样式</h1><p id="60e9" class="pw-post-body-paragraph ip iq hh ir b is lp iu iv iw lq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">我们希望使用的每个按钮样式的核心是<strong class="ir hi"> ButtonStyle </strong>类。每个样式本质上都是一个函数，用于返回ButtonStyle类的一个实例，每个类都为该样式类型提供所需的属性，同时强制其他属性。</p><figure class="kc kd ke kf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lu"><img src="../Images/6c5008cf23668ee806ec615fce2cb7c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DJRgVT7jRF-AFM0O"/></div></div></figure><p id="1f06" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">基本的ButtonStyle类可以分配给你所创建的按钮的样式，但是如果这样做的话，你至少需要为<strong class="ir hi">颜色</strong>和<strong class="ir hi">形状</strong>属性提供一个值。当您需要完全控制按钮组件的外观时，ButtonStyle是一个很好的地方。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="8577" class="kl km hh kh b fi kn ko l kp kq">@Immutable<br/>data class ButtonStyle(<br/>    val color: Color,<br/>    val shape: Shape,<br/>    val border: Border? = null,<br/>    val elevation: Dp = 0.dp,<br/>    val paddings: EdgeInsets = ButtonPaddings,<br/>    val textStyle: TextStyle? = null,<br/>    val rippleColor: Color? = null<br/>)</span></pre><p id="d564" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Button组件还为我们提供了一组助手函数，这些函数可用于提供特定类型的ButtonStyle实例。在大多数情况下，这些在您的应用程序中就足够了，所以让我们来看看如何使用其中的每一个。</p></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="40f3" class="ks km hh bd kt ku lv kw kx ky lw la lb lc lx le lf lg ly li lj lk lz lm ln lo bi translated">文本按钮样式</h1><p id="f8e9" class="pw-post-body-paragraph ip iq hh ir b is lp iu iv iw lq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">文本按钮本质上是一个没有背景形状或边框的按钮，它只包含按钮组件中的文本组件。</p><figure class="kc kd ke kf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ma"><img src="../Images/6f43d1a70e8b227f84a215034c5f2c2c.png" data-original-src="https://miro.medium.com/v2/resize:fit:920/0*acyawbYtWS7OiODH"/></div></div></figure><p id="67dd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当我们想要编写一个文本按钮时，我们使用相同的按钮组件，但是使用TextButtonStyle作为样式属性。对于TextButtonStyle，我们可以设置<strong class="ir hi">内容颜色</strong>(文本的颜色)或<strong class="ir hi">形状</strong>(按钮的形状)。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="6c01" class="kl km hh kh b fi kn ko l kp kq">@Composable<br/>fun AuthenticationButton() {<br/>    Button(text = “Authenticate”, onClick = {<br/>        // handle button click<br/>    }, style = TextButtonStyle(contentColor = Color.Cyan))<br/>}</span></pre><p id="a191" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果我们深入到TextButtonStyle的源代码，我们可以看到我们可以提供这个<strong class="ir hi"> shape </strong>和<strong class="ir hi"> contentColor </strong>属性。但是，对于正在创建的ButtonStyle，有一个用于该样式的默认集合。例如，颜色(按钮的背景色)，我们不能改变这些。TextButtonStyle为属性强制执行那些声明的值——这对于颜色是有意义的，因为我们创建一个文本按钮，它不应该有一个背景色分配给它。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="a462" class="kl km hh kh b fi kn ko l kp kq">fun TextButtonStyle(<br/>    shape: Shape = +themeShape { button },<br/>    contentColor: Color? = +themeColor { primary }<br/>) = ButtonStyle(<br/>    color = Color.Transparent,<br/>    shape = shape,<br/>    paddings = TextButtonPaddings,<br/>    textStyle = TextStyle(color = contentColor),<br/>    rippleColor = contentColor<br/>)</span></pre><h1 id="3217" class="ks km hh bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">包含的按钮样式</h1><p id="ffe0" class="pw-post-body-paragraph ip iq hh ir b is lp iu iv iw lq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">内含按钮是我们在应用程序中经常看到的标准按钮样式，如果您没有提供使用的样式，它也是应用于按钮组件的默认样式。</p><figure class="kc kd ke kf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mb"><img src="../Images/8a59e434f95bd386e93c1b54e227e7b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1eBP35YSRD3oJb7b"/></div></div></figure><p id="6787" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">但是，我们也可以为ContainedButtonStyle的实例提供我们自己的属性值，以实现更具体的样式。对于ContainedButtonStyle，我们可以设置<strong class="ir hi">颜色</strong>(这是按钮本身的颜色)<strong class="ir hi">高度</strong>(按钮的形状)<strong class="ir hi">形状</strong>(按钮的形状)和<strong class="ir hi"> rippleColor </strong>(按下时涟漪效果的颜色)。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="a78d" class="kl km hh kh b fi kn ko l kp kq">@Composable<br/>fun AuthenticationButton() {<br/>    Button(<br/>        text = “Authenticate”, onClick = {<br/>            // handle button click<br/>        }, style = ContainedButtonStyle(<br/>            color = Color.White, <br/>            rippleColor = Color.DarkGray,<br/>            elevation = Dp(4f)<br/>        )<br/>    )<br/>}</span></pre><p id="9cb9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果我们深入到ContainedButtonStyle的源代码，那么我们可以看到这个样式是如何组成的。我们上面提到的每个属性都有默认值，使用从我们的应用程序主题中获得的颜色。因此，因为ContainedButtonStyle是默认的按钮样式，默认情况下，我们的按钮将使用这种样式呈现，同时在流程中使用我们的应用程序主题。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="c3b0" class="kl km hh kh b fi kn ko l kp kq">fun ContainedButtonStyle(<br/>    color: Color = +themeColor { primary },<br/>    shape: Shape = +themeShape { button },<br/>    elevation: Dp = 2.dp,<br/>    rippleColor: Color? = null<br/>) = ButtonStyle(<br/>    color = color,<br/>    shape = shape,<br/>    elevation = elevation,<br/>    rippleColor = rippleColor<br/>)</span></pre><h1 id="5697" class="ks km hh bd kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo bi translated">轮廓按钮样式</h1><p id="229e" class="pw-post-body-paragraph ip iq hh ir b is lp iu iv iw lq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">outline按钮样式可用于显示与所包含的按钮相似的按钮，不同之处在于使用一个笔画来勾勒按钮的主体。</p><figure class="kc kd ke kf fd ii er es paragraph-image"><div class="er es mc"><img src="../Images/c5a67fde10d9dcca8a4e211008ebbb1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/0*V4-Ow7_1S2Q8N7_r"/></div></figure><p id="311b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当我们想要组成一个有轮廓的按钮组件时，我们使用相同的按钮组件，而不是使用OutlinedButtonStyle作为样式属性。对于OutlinedButtonStyle，我们可以设置<strong class="ir hi">内容颜色</strong>(这是文本的颜色)<strong class="ir hi">颜色</strong>(按钮的颜色)<strong class="ir hi">边框</strong>(用于笔画边框的颜色)和<strong class="ir hi">高度</strong>(按钮的高度)。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="0681" class="kl km hh kh b fi kn ko l kp kq">@Composable<br/>fun AuthenticationButton() {<br/>    Button(<br/>        text = “Authenticate”, onClick = {<br/>            // handle button click<br/>        }, style = OutlinedButtonStyle(<br/>            color = Color.White, <br/>            contentColor = Color.DarkGray,<br/>            border = Border(Color.DarkGray, Dp(4f)),<br/>            elevation = Dp(4f)<br/>        )<br/>    )<br/>}</span></pre><p id="8251" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果我们深入到OutlinedButtonStyle的源代码，那么我们可以看到这个样式是如何组成的。我们上面提到的每个属性都有默认值，使用从我们的应用程序主题中获得的颜色。因此，我们可以传入OutlinedButtonStyle的一个实例，而不需要这些属性值，我们的主题将用于相应地定制样式。</p><pre class="kc kd ke kf fd kg kh ki kj aw kk bi"><span id="758b" class="kl km hh kh b fi kn ko l kp kq">fun OutlinedButtonStyle(<br/>    border: Border = Border(+themeColor { onSurface.copy(alpha =    <br/>        OutlinedStrokeOpacity) }, 1.dp),<br/>        color: Color = +themeColor { surface },<br/>        shape: Shape = +themeShape { button },<br/>        elevation: Dp = 0.dp,<br/>        contentColor: Color? = +themeColor { primary }<br/>    ) = ButtonStyle(<br/>        color = color,<br/>        shape = shape,<br/>        border = border,<br/>        elevation = elevation,<br/>        textStyle = TextStyle(color = contentColor),<br/>        rippleColor = contentColor<br/>    )</span></pre></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><p id="9048" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">从这篇文章中，我们学习了如何在我们的jetpack compose UI中呈现按钮组件，以及如何使用可用的ButtonStyle实现定制它们的外观和感觉。</p><p id="894f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果有任何关于如何使用按钮组件的问题，请联系我们。否则，我会在下一篇Jetpack撰写文章中看到你！</p><div class="md me ez fb mf mg"><a href="https://twitter.com/hitherejoe" rel="noopener  ugc nofollow" target="_blank"><div class="mh ab dw"><div class="mi ab mj cl cj mk"><h2 class="bd hi fi z dy ml ea eb mm ed ef hg bi translated">乔·伯奇</h2><div class="mn l"><h3 class="bd b fi z dy ml ea eb mm ed ef dx translated">乔伯奇的最新推文(@hitherejoe)。Android Lead @Buffer。GDE为@Android、@actionsongoogle、@FlutterIO &amp;…</h3></div><div class="mo l"><p class="bd b fp z dy ml ea eb mm ed ef dx translated">twitter.com</p></div></div><div class="mp l"><div class="mq l mr ms mt mp mu in mg"/></div></div></a></div></div></div>    
</body>
</html>