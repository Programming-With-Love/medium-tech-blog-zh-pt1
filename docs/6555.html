<html>
<head>
<title>Kotlin/Native iOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">科特林/原生iOS</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/kotlin-native-ios-8ad0a45a9b46?source=collection_archive---------2-----------------------#2018-12-28">https://medium.com/quick-code/kotlin-native-ios-8ad0a45a9b46?source=collection_archive---------2-----------------------#2018-12-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="108b" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">2.<strong class="ak">创建简单的框架，描述一些K/N特性</strong></h2></div><h1 id="d02c" class="iw ix hh bd iy iz ja jb jc jd je jf jg in jh io ji iq jj ir jk it jl iu jm jn bi translated">Kotlin中的iOS特定代码</h1><p id="f80f" class="pw-post-body-paragraph jo jp hh jq b jr js ii jt ju jv il jw jx jy jz ka kb kc kd ke kf kg kh ki kj ha bi translated">我们之前配置了K/N项目<a class="ae kk" rel="noopener" href="/@yuyaHorita/kotlin-native-ios-e6480299e02f">。</a></p><p id="5829" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">在本章中，让我们创建一个具有K/N特性的简单框架。</p><p id="832c" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">首先，创建<code class="du kq kr ks kt b">iosMain/kotlin/actual.kt</code>目录和文件，就像我们在这里创建<a class="ae kk" rel="noopener" href="/@yuyaHorita/kotlin-native-ios-e6480299e02f">一样。</a></p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ku"><img src="../Images/d1646c91863acd77d352e864cfeafa11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v45wtHWXhVm__ZAwVqSxig.png"/></div></div></figure><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lg"><img src="../Images/e5458ace7a2c6d969efd840a96789cda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0AsohuFfaRZ1c9IuTovj9g.png"/></div></div></figure><p id="cdf0" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">这是脚本。如果您将Xcode项目配置为<a class="ae kk" rel="noopener" href="/@yuyaHorita/kotlin-native-ios-e6480299e02f">本章</a>，在Xcode中构建会调用构建这个共享模块。</p><p id="3b80" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">一旦构建完成，Xcode就会引用上面定义的函数。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lh"><img src="../Images/a3992e959e52f30d153101ba05336459.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yEQjIYEspdzAnXYCgQut-g.png"/></div></div></figure><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es li"><img src="../Images/342bcfa842b32d3ab1b7c7c8c98f7876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FnN_EtFbfwVDEQ-jwJ7lrw.png"/></div></div></figure><p id="a026" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">你好！！！</p><h1 id="ac85" class="iw ix hh bd iy iz ja jb jc jd je jf jg in jh io ji iq jj ir jk it jl iu jm jn bi translated">预期和实际</h1><p id="d6fc" class="pw-post-body-paragraph jo jp hh jq b jr js ii jt ju jv il jw jx jy jz ka kb kc kd ke kf kg kh ki kj ha bi translated">我们有时希望在每个平台上分离行为。我们可以使用<code class="du kq kr ks kt b">expect</code>和<code class="du kq kr ks kt b">actual</code>关键字来实现。</p><p id="8867" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated"><code class="du kq kr ks kt b">helloWorld()</code>和<code class="du kq kr ks kt b">helloiOS()</code>不再需要了。</p><p id="a704" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">相反，请定义以下函数。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lj"><img src="../Images/34dd780d618b732689d46952c3cd54ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/format:webp/1*XchCpuzFMnNTQoUcIv7MLQ.png"/></div></figure><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lk"><img src="../Images/9623e8c41ebf18a2f89334b6a9f32742.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*QOB6C_nxZ5SZcKZ0QgzeNQ.png"/></div></figure><p id="b20c" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">在这里，你不必键入<code class="du kq kr ks kt b">import platf.......</code>。当你在actual.kt中键入<code class="du kq kr ks kt b">NSDate</code>时，所需的包会被Android Studio自动补充。如果没有，请再次尝试gradle sync。</p><p id="4001" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">在iosMain部分，你用了Kotlin的基础框架！！也可以使用其他框架。</p><blockquote class="ll lm ln"><p id="d65c" class="jo jp lo jq b jr kl ii jt ju km il jw lp kn jz ka lq ko kd ke lr kp kh ki kj ha bi translated">目前，还不支持纯swift模块。可以使用其API用<code class="du kq kr ks kt b">@objc</code>导出到Objective-C的swift库。(2018/12/20)</p></blockquote><p id="4e72" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">我们用了<code class="du kq kr ks kt b">expect</code>和<code class="du kq kr ks kt b">actual</code>。<code class="du kq kr ks kt b">expect</code>仅在<code class="du kq kr ks kt b">commonMain</code>中可用。<code class="du kq kr ks kt b">expect</code>指定功能的行为取决于各平台模块的<code class="du kq kr ks kt b">actual</code>功能。</p><p id="d257" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">如果没有定义实际函数，就会出现这个错误。安全地。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es ls"><img src="../Images/78a3996d5da04d683a006a431f984976.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FrMPimRpV1XKbSk263KGSw.png"/></div></div></figure><p id="b1da" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">让我们调用<code class="du kq kr ks kt b">showCurrentTime()</code>函数。</p><pre class="kv kw kx ky fd lt kt lu lv aw lw bi"><span id="f8aa" class="lx ix hh kt b fi ly lz l ma mb">CommonKt.showCurrentTime()</span><span id="4aaa" class="lx ix hh kt b fi mc lz l ma mb">// on Console<br/><strong class="kt hi">2018-12-20 08:43:54 +0000</strong></span></pre><p id="82f0" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi">🎉 🎉</p><blockquote class="ll lm ln"><p id="f930" class="jo jp lo jq b jr kl ii jt ju km il jw lp kn jz ka lq ko kd ke lr kp kh ki kj ha bi translated"><code class="du kq kr ks kt b">expect</code>和<code class="du kq kr ks kt b">actual</code>也可以用于上课。这意味着<strong class="jq hi"> expect注释类</strong>被支持。这一点很重要，尤其是对于Android开发者来说。</p></blockquote><p id="7766" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated"><code class="du kq kr ks kt b">OptionalExpectation</code>在不需要为特定平台添加注释的情况下可用。实际示例在下面的<code class="du kq kr ks kt b">Expect Annotation Class</code>部分。</p><h1 id="f19c" class="iw ix hh bd iy iz ja jb jc jd je jf jg in jh io ji iq jj ir jk it jl iu jm jn bi translated">互操作性。</h1><p id="5bf8" class="pw-post-body-paragraph jo jp hh jq b jr js ii jt ju jv il jw jx jy jz ka kb kc kd ke kf kg kh ki kj ha bi translated">Kotlin和Swift之间有互操作性，Objective-C。</p><h2 id="b86b" class="lx ix hh bd iy md me mf jc mg mh mi jg jx mj mk ji kb ml mm jk kf mn mo jm mp bi translated">基本接口vs协议</h2><p id="9081" class="pw-post-body-paragraph jo jp hh jq b jr js ii jt ju jv il jw jx jy jz ka kb kc kd ke kf kg kh ki kj ha bi translated">Kotlin中定义的接口被导出到Swift/Objective-C协议。</p><pre class="kv kw kx ky fd lt kt lu lv aw lw bi"><span id="9148" class="lx ix hh kt b fi ly lz l ma mb">interface Common {<br/>    val languageName: String<br/>}</span></pre><p id="2859" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">在<code class="du kq kr ks kt b">common.kt</code>中定义该接口，则该接口在Swift中可用。比如，</p><pre class="kv kw kx ky fd lt kt lu lv aw lw bi"><span id="f267" class="lx ix hh kt b fi ly lz l ma mb">final class SwiftCommon: Common {<br/>    let languageName: String = "swift"<br/>}</span></pre><p id="b0f9" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">在Swift中，通用接口成为通用协议。仔细看看这个协议。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mq"><img src="../Images/ac963d77f655a734797209455788cf0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1164/format:webp/1*-esJ2OQV4h7EBDpoW-RNRw.png"/></div></div></figure><p id="64ba" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">在Xcode中，它的<code class="du kq kr ks kt b">Jump to Definition</code>。(按住command键并点按会显示菜单)</p><p id="4ff8" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">然后，你会看到。</p><pre class="kv kw kx ky fd lt kt lu lv aw lw bi"><span id="7cd8" class="lx ix hh kt b fi ly lz l ma mb">__attribute__((swift_name("Common")))<br/>@protocol SharedNativeCommon<br/>@required<br/>@property (readonly) NSString *languageName;<br/>@end;</span></pre><blockquote class="ll lm ln"><p id="ab55" class="jo jp lo jq b jr kl ii jt ju km il jw lp kn jz ka lq ko kd ke lr kp kh ki kj ha bi translated">事实上，Kotlin/Native目前还没有直接与Swift互操作，只是通过Objective-C。(2018/12/20)</p></blockquote><p id="0c09" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">多亏了<code class="du kq kr ks kt b">__attribute__</code>，Swift可以将这种Objective-C协议称为通用协议。</p><h2 id="ab74" class="lx ix hh bd iy md me mf jc mg mh mi jg jx mj mk ji kb ml mm jk kf mn mo jm mp bi translated">与@Throws和Throws的注释互操作性</h2><p id="31aa" class="pw-post-body-paragraph jo jp hh jq b jr js ii jt ju jv il jw jx jy jz ka kb kc kd ke kf kg kh ki kj ha bi translated">Kotlin注释和Swift关键字之间有一些互操作。其中之一是<code class="du kq kr ks kt b">@Throws</code>注释和<code class="du kq kr ks kt b">throws</code>关键字。</p><blockquote class="ll lm ln"><p id="b6be" class="jo jp lo jq b jr kl ii jt ju km il jw lp kn jz ka lq ko kd ke lr kp kh ki kj ha bi translated">注意，<code class="du kq kr ks kt b">@Throws</code> annotation是在kotlin-stdlib / kotlin.native中定义的注释类。这意味着您只能在本机模块的<code class="du kq kr ks kt b">actual.kt</code>中使用它。</p></blockquote><p id="31cc" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">所以，在<code class="du kq kr ks kt b">actual.kt</code>中定义这个类。</p><pre class="kv kw kx ky fd lt kt lu lv aw lw bi"><span id="51aa" class="lx ix hh kt b fi ly lz l ma mb">class Interop {<br/>    @Throws<br/>    fun sometimesErrorThrown(id: Int): String {<br/>        if (id != 0) {<br/>            return "OK"<br/>        } else {<br/>            throw Exception()<br/>        }<br/>    }<br/>}</span></pre><p id="c52e" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">我们在ViewController.swift中称之为。带有<code class="du kq kr ks kt b">@Throws</code>注释的函数被导出为<code class="du kq kr ks kt b">throws</code>函数。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es mr"><img src="../Images/717939b1b3706a2bad961d72bcbaf7dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/1*lX-gDAT_r8GZGYySkTsj0A.png"/></div></figure><p id="6cd1" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">让我们抓住一些错误。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es ms"><img src="../Images/4e6a136ebb1313e96d144002d7d9f4ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*xsom0uKd7GhbMkDKfWmAYQ.png"/></div></figure><p id="bf0c" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">输出如下。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mt"><img src="../Images/af218c3b3d4784d8b6a32994f61b7219.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I42is4BTQ_wBsxEvuN9ZCA.png"/></div></div><figcaption class="mu mv et er es mw mx bd b be z dx">Catching error from @Throws function.</figcaption></figure><p id="468e" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">我们可以捕捉错误🎉。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es my"><img src="../Images/5abbc3c083a94fa5b19556f15eb86bfc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sLiT4gjE5IQPObOfbMqTLQ.png"/></div></div><figcaption class="mu mv et er es mw mx bd b be z dx">Kotlin, Swift, Objective-C mapping from <a class="ae kk" href="https://kotlinlang.org/docs/reference/native/objc_interop.html" rel="noopener ugc nofollow" target="_blank">reference</a></figcaption></figure><p id="9fdd" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">还有许多其他映射。你可以在这里查看它们<a class="ae kk" href="https://kotlinlang.org/docs/reference/native/objc_interop.html" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="853a" class="lx ix hh bd iy md me mf jc mg mh mi jg jx mj mk ji kb ml mm jk kf mn mo jm mp bi translated">期望注释类</h2><p id="6222" class="pw-post-body-paragraph jo jp hh jq b jr js ii jt ju jv il jw jx jy jz ka kb kc kd ke kf kg kh ki kj ha bi translated">在上一节中，我们在actual.kt中定义了<code class="du kq kr ks kt b">class Interop</code>。</p><p id="25f1" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">但是，如果你想在其他平台上使用这个类呢？</p><p id="176b" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">这个类使用<code class="du kq kr ks kt b">@Throw</code>注释，它只在本机模块中可用，在Android中不可用。</p><p id="465f" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">在这种情况下，<code class="du kq kr ks kt b">expect annotation class</code>是有用的。</p><p id="be3f" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">首先，将互操作类定义从<code class="du kq kr ks kt b">actual.kt</code>移到<code class="du kq kr ks kt b">common.kt</code>。<em class="lo">未解决的参考</em>错误在这一刻出现。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es mz"><img src="../Images/6113cd76622d934381de027791ccfa85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ApOD_-LD3JAcXx4L7cBsGA.png"/></div></div></figure><p id="3074" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">要解决这个问题，请定义expect注释类并将<code class="du kq kr ks kt b">@Throws</code>注释替换为<code class="du kq kr ks kt b">@NativeThrows</code>。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es na"><img src="../Images/1ef7cc00348cb04e24d65d2acae815a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yMGE30zvEm34il9MfgaMYg.png"/></div></div></figure><p id="8ac9" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">接下来，对actual.kt中的类使用typealias，</p><pre class="kv kw kx ky fd lt kt lu lv aw lw bi"><span id="cab1" class="lx ix hh kt b fi ly lz l ma mb">actual typealias NativeThrows = Throws</span></pre><p id="3388" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">NativeThrows批注类具有带长参数的主构造函数，<code class="du kq kr ks kt b">vararg val expectionCla....</code>。这与native Throws批注类主构造函数的参数类型相同。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es nb"><img src="../Images/e7112480150c716774a5bed629f212af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PftG7EpUr2AbKRkQtEw6Qg.png"/></div></div><figcaption class="mu mv et er es mw mx bd b be z dx">Native module’s @Throws annotation definition.</figcaption></figure><p id="39d4" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">在本节中，我们只修改了Kotlin代码，没有修改swift代码。但是以前的代码工作正常。</p><p id="7e0b" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">一个很大的变化是你可以使用其他平台代码的类，比如Android，可以共享代码🎉 🎉</p><p id="7429" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">我们在这里没有准备其他模块，但是如果你准备了并且不需要任何注释，使用<strong class="jq hi"> OptionalExpectation </strong>。在这种情况下，</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es na"><img src="../Images/558fcdc03cf53eb5bb64b0f7b4c96da3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rPh1_aEvfAVLHyvx0YYlfQ.png"/></div></div></figure><p id="702f" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">然后，就不用打<code class="du kq kr ks kt b">actual typealias …</code>了。没有它构建也会成功。</p><p id="8ca3" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">试试看。只是注释掉。</p><pre class="kv kw kx ky fd lt kt lu lv aw lw bi"><span id="32e2" class="lx ix hh kt b fi ly lz l ma mb">//actual typealias NativeThrows = Throws</span></pre><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es nc"><img src="../Images/e26f612f27734792db201b96738cf1c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8Z1RaOnAr4qU8FdA8CtA2w.png"/></div></div></figure><p id="6440" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">并运行Xcode。会出现如上的一些警告，因为<code class="du kq kr ks kt b">sometimesErrorThrown</code>功能不再是<code class="du kq kr ks kt b">throws</code>功能。</p><p id="94b8" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">这表明<code class="du kq kr ks kt b">@NativeThrows</code>注释从<code class="du kq kr ks kt b">@Throws</code>注释类型别名变为无。</p><p id="5ead" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">Swift无法捕捉错误，但是当参数id == 0时，在<code class="du kq kr ks kt b">sometimesErrorThrown</code>中执行throw Exception()。所以，它崩溃了😱</p><p id="41bc" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">小心点。</p><blockquote class="ll lm ln"><p id="9dde" class="jo jp lo jq b jr kl ii jt ju km il jw lp kn jz ka lq ko kd ke lr kp kh ki kj ha bi translated"><strong class="jq hi">可选期望</strong>是实验性的，所以你需要额外的<code class="du kq kr ks kt b">@ExperimentalMultiplatform</code>注释。参考:<a class="ae kk" href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-optional-expectation/index.html" rel="noopener ugc nofollow" target="_blank">此处</a></p></blockquote><h1 id="5bfd" class="iw ix hh bd iy iz ja jb jc jd je jf jg in jh io ji iq jj ir jk it jl iu jm jn bi translated">摘要</h1><p id="b95b" class="pw-post-body-paragraph jo jp hh jq b jr js ii jt ju jv il jw jx jy jz ka kb kc kd ke kf kg kh ki kj ha bi translated">我们开发了Kotlin的简单框架。我介绍了Kotlin/Native、互操作性、expect &amp; actual关键字和本机特定API的一些特性。</p><p id="593d" class="pw-post-body-paragraph jo jp hh jq b jr kl ii jt ju km il jw jx kn jz ka kb ko kd ke kf kp kh ki kj ha bi translated">我还有其他文章。请检查一下🙏谢谢你。</p><ul class=""><li id="787b" class="nd ne hh jq b jr kl ju km jx nf kb ng kf nh kj ni nj nk nl bi translated"><a class="ae kk" rel="noopener" href="/@yuyaHorita/kotlin-native-ios-a1a73d7390fe"> <strong class="jq hi">协程与K/N的不变性</strong> </a></li><li id="a849" class="nd ne hh jq b jr nm ju nn jx no kb np kf nq kj ni nj nk nl bi translated"><strong class="jq hi">K/N+反应式编程+架构示例。(<em class="lo">即将推出</em> ) </strong></li></ul></div></div>    
</body>
</html>