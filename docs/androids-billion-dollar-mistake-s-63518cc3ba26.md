# Android çš„åäº¿ç¾å…ƒé”™è¯¯

> åŸæ–‡ï¼š<https://blog.kotlin-academy.com/androids-billion-dollar-mistake-s-63518cc3ba26?source=collection_archive---------0----------------------->

![](img/fd7e8b71567ae8554c52955d00ff1418.png)

ä¸€ç¯‡å…³äº*åäº¿ç¾å…ƒçš„é”™è¯¯*ï¼Œé‚£äº›è¢«å‡è®¾çš„é”™è¯¯å’Œé‚£äº›*ä¿æŒæ²‰é»˜çš„é”™è¯¯*ï¼Œä»¥åŠå…³äº*ä¸è¦ç”¨ç³Ÿç³•çš„æ–‡æ¡£è¯¯å¯¼æ–°å¼€å‘äººå‘˜çš„é‡è¦æ€§*çš„æ–‡ç« ã€‚

# åäº¿ç¾å…ƒçš„é”™è¯¯æŠ¥ä»·

ä½ å¬è¯´è¿‡åäº¿ç¾å…ƒçš„æŠ¥ä»·å—ï¼Ÿå¤§æ¦‚æ˜¯:

> æˆ‘ç§°ä¹‹ä¸ºæˆ‘çš„åäº¿ç¾å…ƒé”™è¯¯ã€‚è¿™æ˜¯ 1965 å¹´é›¶å¼•ç”¨çš„å‘æ˜ã€‚å½“æ—¶ï¼Œæˆ‘æ­£åœ¨ç”¨é¢å‘å¯¹è±¡è¯­è¨€(ALGOL W)è®¾è®¡ç¬¬ä¸€ä¸ªç”¨äºå¼•ç”¨çš„ç»¼åˆç±»å‹ç³»ç»Ÿã€‚æˆ‘çš„ç›®æ ‡æ˜¯ç¡®ä¿æ‰€æœ‰å¼•ç”¨çš„ä½¿ç”¨éƒ½æ˜¯ç»å¯¹å®‰å…¨çš„ï¼Œç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ‰§è¡Œæ£€æŸ¥ã€‚ä½†æ˜¯æˆ‘æ— æ³•æŠ—æ‹’æ”¾å…¥ç©ºå¼•ç”¨çš„è¯±æƒ‘ï¼Œä»…ä»…æ˜¯å› ä¸ºå®ƒå¤ªå®¹æ˜“å®ç°äº†ã€‚è¿™å¯¼è‡´äº†æ•°ä¸æ¸…çš„é”™è¯¯ã€æ¼æ´å’Œç³»ç»Ÿå´©æºƒï¼Œåœ¨è¿‡å»çš„å››åå¹´é‡Œï¼Œè¿™å¯èƒ½é€ æˆäº†æ•°åäº¿ç¾å…ƒçš„ç—›è‹¦å’ŒæŸå¤±ã€‚
> 
> 2009 å¹´ä¼¦æ•¦ QCon ä¸Šçš„ä¸œå°¼Â·éœå°”[https://en.wikipedia.org/wiki/Tony_Hoare](https://en.wikipedia.org/wiki/Tony_Hoare)

# æ‰˜å°¼Â·éœå°”æ˜¯ç¼–ç¨‹è‹±é›„ğŸ¦¸

å¦‚æœä½ åƒæˆ‘ä¸€æ ·ï¼Œå½“ç¬¬ä¸€æ¬¡å¬åˆ°è¿™å¥è¯æ—¶ï¼Œä½ çš„ååº”æ˜¯:â€œå“‡ã€‚æˆ‘ä¹ŸçŠ¯äº†å¾ˆå¤šé”™è¯¯ï¼Œä½†é€šå¸¸ä¸ä¼šèŠ±é‚£ä¹ˆå¤šé’±ï¼â€ã€‚

æœ€è¿‘æˆ‘å¯¹æ­¤æœ‰äº†æ›´æ·±çš„æ€è€ƒï¼Œæˆ‘ç°åœ¨è®¤ä¸º**ä¸œå°¼Â·éœå°”**æ˜¯ä¸€ä¸ªä¼Ÿå¤§çš„ç¼–ç¨‹è‹±é›„ï¼ä¸ä»…ä»…æ˜¯å› ä¸ºä»–åœ¨é‚£ä¸ªåäº¿ç¾å…ƒçš„é”™è¯¯ä¹‹å¤–æ‰€åšçš„ä»¤äººå°è±¡æ·±åˆ»çš„å·¥ä½œ

![](img/ea7e72887f39de146b9165f461f4a008.png)

ä¸ï¼Œæˆ‘çš„ä¸»å¼ æ˜¯ï¼Œä»–è¿˜å› ä¸ºå…¬å¼€æ‰¿æ‹…äº†å®ƒçš„â€œé”™è¯¯â€è€Œä¼Ÿå¤§ï¼

ä½ è®¤ä¸ºä»–æ˜¯å”¯ä¸€ä¸€ä¸ªçŠ¯äº†åäº¿ç¾å…ƒé”™è¯¯çš„ç¨‹åºå‘˜å—ï¼Ÿå†æƒ³æƒ³ã€‚IT éƒ¨é—¨æ˜¯å·¨å¤§çš„ã€‚è„¸ä¹¦ã€è°·æ­Œã€äºšé©¬é€Šã€è‹¹æœã€å¾®è½¯çš„å¸‚å€¼åœ¨ 5000 äº¿åˆ° 1 ä¸‡äº¿ç¾å…ƒä¹‹é—´ã€‚ä»»ä½•è®©ä»–ä»¬çš„ä¼°å€¼æŸå¤± 0.2%çš„ç¼–ç¨‹é”™è¯¯éƒ½æ˜¯ä¸€ä¸ªåäº¿ç¾å…ƒçš„é”™è¯¯ã€‚

ä¸ï¼Œä¸œå°¼Â·éœå°”è¢«ç§°ä¸ºçŠ¯äº†åäº¿ç¾å…ƒé”™è¯¯çš„äººçš„çœŸæ­£åŸå› æ˜¯**ä»–æ˜ç¡®å…¬å¼€åœ°å°†è‡ªå·±çš„å†³å®šæè¿°ä¸ºä¸€ä¸ªé”™è¯¯ï¼Œå¹¶é€šè¿‡è¿™æ ·åšå‘å‡ºäº†ä¸€ä¸ªæ˜ç¡®çš„ä¿¡å·ï¼Œäº‹æƒ…å¿…é¡»æ”¹å˜**ã€‚

**æˆ‘çš„æœ‹å‹ä»¬ï¼Œè¿™ä¸ª**å¯¹è½¯ä»¶è¡Œä¸šéå¸¸æœ‰ç›Šï¼Œè¿™å°±æ˜¯ Kotlin å’Œå…¶ä»–ç¼–ç¨‹è¯­è¨€åœ¨å®ƒä»¬çš„ç±»å‹ç³»ç»Ÿä¸­å†…ç½®äº†[é›¶å®‰å…¨çš„åŸå› ](https://kotlinlang.org/docs/reference/null-safety.html)ã€‚å®ƒä»¬ä»ç„¶æœ‰`null`ï¼Œè¿™æœ¬èº«ä¸æ˜¯é—®é¢˜ï¼Œä½†æ˜¯å®ƒè¢«é›†æˆåˆ°ç±»å‹ç³»ç»Ÿä¸­*ä»¥ç¡®ä¿æ‰€æœ‰å¼•ç”¨ç»å¯¹å®‰å…¨ï¼Œæ£€æŸ¥ç”±ç¼–è¯‘å™¨è‡ªåŠ¨æ‰§è¡Œ*ã€‚

ä¸œå°¼Â·éœå°”æ˜¯çœŸæ­£çš„ç”·å­æ±‰ï¼Œä¸€ä¸ªæ²¡æœ‰è‡ªæˆ‘æ„è¯†çš„ç¨‹åºå‘˜ï¼Œä»–ä¸ºé”™è¯¯æ‰¿æ‹…è´£ä»»ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½è®¤è¯†åˆ°é”™è¯¯ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥å¿ƒå­˜æ„Ÿæ¿€ã€‚

åœ¨ Android ä¸–ç•Œï¼Œäº‹æƒ…æœ‰ç‚¹ä¸åŒã€‚åœ¨æ·±å…¥æ¢è®¨ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆä»ä¸€ä¸ªç®€å•çš„ä¾‹å­å¼€å§‹ã€‚

## æ²™åœ°åŒˆç‰™åˆ©æ—‹è½¬

ç›´åˆ° 2019 å¹´ 5 æœˆï¼Œä¸–ç•Œä¸Šå¤§å¤šæ•°çš„ sAndroid mCodebases éƒ½è¢«åŒˆç‰™åˆ©è¯­çš„ä¸€ä¸ª[æ— æ„ä¹‰çš„ mVariant æ‰€å›°æ‰°ã€‚å®ƒçš„ç¼ºç‚¹æ˜¯æ²¡æœ‰ç»™ Android Studio ä¸­ç®€å•çš„ä»£ç é«˜äº®è§„åˆ™å¸¦æ¥ä»»ä½•å¥½å¤„ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜æ˜¾çš„ç¼ºç‚¹æ˜¯*ä½¿å¾—æ‰€æœ‰ä¸œè¥¿éƒ½ä¸é‚£ä¹ˆå¯è¯»*ã€‚](https://jakewharton.com/just-say-no-to-hungarian-notation/)

å½“ä½ åœ¨ 2019 å¹´ä¹‹å‰æå‡ºè¿™ä¸ªé—®é¢˜æ—¶ï¼Œä½ é€šå¸¸ä¼šå¾—åˆ°ä¸¤ä¸ªç­”æ¡ˆä¹‹ä¸€:

*   è¿™æ˜¯ç°çŠ¶ï¼Œæ‰€ä»¥å¾ˆå¥½ã€‚
*   æˆ‘ä»¬ Android å›¢é˜Ÿåªæ˜¯è¯´ï¼Œå¦‚æœä½ åœ¨ Android å¼€æºé¡¹ç›®ä¸­è´¡çŒ®ä»£ç ï¼Œå°±å¿…é¡»éµå®ˆè¿™ä¸ªçº¦å®šã€‚

ä½†æ˜¯å®é™…ä¸Š

*   ç¬¬ä¸€ä¸ªå›ç­”æ˜¯*é”™*ã€‚æˆ‘ä»¬çŸ¥é“è¿™ä¸€ç‚¹ï¼Œå› ä¸ºè‡ªä»åŒˆç‰™åˆ©è®°è°±æ³•è¢«åºŸé™¤åï¼Œæ²¡æœ‰äººæŠ±æ€¨è¦æ¢å¤å®ƒã€‚
*   ç¬¬äºŒä¸ªç­”æ¡ˆæ˜¯*å·®*ï¼Œå®ƒå±äº[éé”™èŒƒç•´](https://en.wikipedia.org/wiki/Not_even_wrong)ã€‚è¿™ç§è¯´æ³•æœ¬è´¨ä¸Šæ˜¯è¯´å…¶ä»–äººéƒ½é”™äº†ã€‚é‚£ä¹ˆæ˜¾è€Œæ˜“è§çš„é—®é¢˜æ˜¯:*ä¸ºä»€ä¹ˆï¼Ÿ*ã€‚å› ä¸ºæ¯ä¸ªäººéƒ½åœ¨å­¦ä¹  Android æ–‡æ¡£å’Œç¤ºä¾‹ï¼Œè¿™ç§æƒ¯ä¾‹æ— å¤„ä¸åœ¨ã€‚è¿™æ­£æ˜¯ä½ åº”è¯¥åšçš„åˆ›å»ºä¸€ä¸ªçº¦å®šçš„è‰°è‹¦è€Œä¸€è‡´çš„å·¥ä½œã€‚å®ƒåªæ˜¯ç¢°å·§æ˜¯ä¸€ä¸ªæœ‰å®³çš„æƒ¯ä¾‹ã€‚

æ˜¯ä»€ä¹ˆæ€æ­»äº† 2019 å¹´ 5 æœˆçš„ mHungarian ç¬¦å·ï¼Ÿä¸æ˜¯æ‰¿è®¤é”™è¯¯ï¼Œè€Œæ˜¯å¼•è¿›ç§‘ç‰¹æ—ã€‚ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦ç­‰è¿™ä¹ˆä¹…ï¼Ÿ

# Android çš„åäº¿ç¾å…ƒé”™è¯¯ğŸ’£

# å®šä¹‰â€œé”™è¯¯â€ä¸€è¯

Android æ˜¾ç„¶æ˜¯ä¸€ä¸ªå·¨å¤§çš„å•†ä¸šæˆåŠŸï¼Œæˆ‘å¹¶æ²¡æœ‰ç›¸åçš„è¯´æ³•ã€‚Android å’Œ iPhone å·²ç»æˆåŠŸåœ°å¯¹æ™ºèƒ½æ‰‹æœºä¸–ç•Œå®æ–½äº†åŒé‡å„æ–­ï¼Œå› æ­¤æ¥ä¸‹æ¥å‘ç”Ÿçš„äº‹æƒ…å¯èƒ½ä¹Ÿä¸æ˜¯æˆ˜æœ¯ä¸Šçš„â€œé”™è¯¯â€ã€‚æ— è®ºå¦‚ä½•ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨ Android å›¢é˜Ÿæä¾›çš„ä»»ä½•å·¥å…·ã€‚

æˆ‘ä¹Ÿè®¤ä¸ºä»ç”¨æˆ·çš„è§’åº¦æ¥çœ‹ï¼ŒAndroid æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ“ä½œç³»ç»Ÿã€‚ä½ å¯ä»¥æ›´å–œæ¬¢ iOSï¼Œæˆ‘æ²¡æ„è§ï¼Œä½†è¿™å¹¶ä¸èƒ½è®© Android å˜åã€‚

åœ¨æœ¬æ–‡çš„`Context`ä¸­ï¼Œ*é”™è¯¯*æ˜¯æŒ‡ä¸“é—¨è¯¯å¯¼å¼€å‘è€…èµ°ä¸Šä¸€æ¡ä¼šç»™ä»–ä»¬å¸¦æ¥ç—›è‹¦å’Œç£¨éš¾çš„é“è·¯ã€‚

æˆ‘ä¹Ÿä¸è®¤ä¸ºè¿™æ˜¯ Android SDK ä¸­å”¯ä¸€çš„å¤§é”™è¯¯ï¼Œç”šè‡³æ˜¯ Android SDK ä¸­æœ€é‡è¦çš„é”™è¯¯ã€‚

å¦‚æœä½ å¯¹äº†è§£ Android çš„ä¸å¥½çš„éƒ¨åˆ†æ„Ÿåˆ°å¥½å¥‡ï¼Œé‚£ä¹ˆ#androiddev Reddit ç¤¾åŒºå·²ç»æ•´ç†äº†ä¸€ä¸ªéå¸¸æœ‰ç”¨çš„åˆ—è¡¨ï¼Œåˆ—å‡ºäº†ä»–ä»¬åœ¨ Android ä¸­å‘ç°çš„ä¸å¥½çš„åœ°æ–¹ã€‚ä½†åœ¨è¿™é‡Œï¼Œæˆ‘å°†å…³æ³¨ä¸€ä¸ªæœ‰è¶£çš„åŸºæœ¬é”™è¯¯ã€‚

# Android ç‰ç±³ç…é¥¼è®¾è®¡æ¨¡å¼ğŸŒ¯

å…³äº Android çš„ä¸€ä»¶æ‚²å“€çš„äº‹æƒ…æ˜¯ï¼Œå®˜æ–¹çš„ Android æ ·æœ¬éµå¾ªä»¥è‰²åˆ—è´¹å‹’å¡é©¬ä¹”æ‰€è°“çš„ [Android ç‰ç±³ç…é¥¼è®¾è®¡æ¨¡å¼](https://speakerdeck.com/rallat/androiddevlikeaprodroidconsf?slide=24):åªæ˜¯æŠŠ*æ‰€æœ‰çš„ä¸œè¥¿*éƒ½åŒ…åœ¨ä¸€ä¸ªç‰ç±³ç…é¥¼é‡ŒğŸŒ¯åš*æ‰€æœ‰äº‹æƒ…*çš„`GodActivity`å’Œ/æˆ–`GodFragment`ã€‚

çœ‹çœ‹`[ğŸ˜± camera-samples/Camera2BasicFragment.kt ğŸ˜­](https://github.com/android/camera-samples/blob/f555592364979f4005db0bea40753e0de52c8d86/Camera2BasicKotlin/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.kt#L60-L817)`çš„ç²¾å½©æºä»£ç å§ã€‚æˆ‘ä¸å¾—ä¸å‰ªåˆ‡æ–‡ä»¶çš„å¤§éƒ¨åˆ†ä»¥é€‚åˆä¸€ä¸ªè¦ç‚¹ï¼Œä½†å®ƒä»ç„¶æ˜¯å¯è¯»çš„:

See in its full glory at [https://github.com/android/camera-samples/blob/f555592364979f4005db0bea40753e0de52c8d86/Camera2BasicKotlin/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.kt#L60-L817](https://github.com/android/camera-samples/blob/f555592364979f4005db0bea40753e0de52c8d86/Camera2BasicKotlin/Application/src/main/java/com/example/android/camera2basic/Camera2BasicFragment.kt#L60-L817)

æ¯å½“ä½ å»ºè®®åœ¨`Activity`é‡Œå†æ”¾ä¸€ä¸ªä¸œè¥¿çš„æ—¶å€™ï¼Œä¸Šå¸å°±ä¼šæ€æ­»ä¸€åªå°çŒ«ã€‚è¿™æ­£æ˜¯ Android å®˜æ–¹æ–‡æ¡£å’Œç¤ºä¾‹è‡³ä»Šæ‰€åšçš„äº‹æƒ…ã€‚

å¦‚æœä½ éµå¾ª Android ç‰ç±³ç…é¥¼è®¾è®¡æ¨¡å¼ï¼Œä¼šå‡ºä»€ä¹ˆé—®é¢˜ï¼Ÿ

# çŒ›æ’

`Activity`æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç¯å¢ƒï¼Œå……æ»¡äº†éšæ—¶å¯èƒ½çˆ†ç‚¸çš„åœ°é›·ã€‚æœ€æ˜æ˜¾çš„é—®é¢˜æ˜¯ï¼Œç”±äºè¿™ç§å¤æ‚çš„ç”Ÿå‘½å‘¨æœŸï¼Œä½ çš„`Activity`éšæ—¶å¯èƒ½è¢«ç³»ç»Ÿæ€æ­»ã€‚ä½¿ç”¨åƒ`Application`è¿™æ ·ç”Ÿå‘½å‘¨æœŸæ›´ç®€å•çš„`Context`è¦å®‰å…¨å¾—å¤šã€‚

# å†…å­˜æ³„æ¼

`Activity`æ˜¯ä¸€ä¸ªæ˜‚è´µçš„å¯¹è±¡ï¼Œå®ƒä¾èµ–äºæ•´ä¸ªç”¨æˆ·ç•Œé¢ã€‚æŠ“ä½æ´»åŠ¨å¯¹è±¡ä¸æ”¾æ˜¯å¾ˆå®¹æ˜“æ‰å…¥é™·é˜±çš„ã€‚éšä¹‹è€Œæ¥çš„æ˜¯å†…å­˜æ³„æ¼ã€‚äº‹å®ä¸Šï¼Œè¿™æ˜¯ä¸€ä¸ªå¦‚æ­¤å¸¸è§çš„é™·é˜±ï¼Œä»¥è‡³äºä½ ç”šè‡³ä¼šåœ¨ Android SDK æœ¬èº«çš„ç±»ä¸­çœ‹åˆ°è¿™ä¸ªé”™è¯¯ï¼Œæ— è®ºæ˜¯åœ¨ä¸€äº›è¹©è„šçš„ä¸‰æ˜Ÿ fork ä¸­è¿˜æ˜¯åœ¨ Android å¼€æºé¡¹ç›®æœ¬èº«ä¸­ã€‚è¿™æ˜¯ä¸€ä¸ªå¦‚æ­¤æ™®éçš„é—®é¢˜ï¼Œä»¥è‡³äº square çš„å¥½äººæŠ•å…¥æ—¶é—´å’Œç²¾åŠ›æ¥è‡ªåŠ¨æ£€æµ‹è¿™äº›é—®é¢˜ã€‚

[](https://github.com/square/leakcanary) [## æ–¹å½¢/æ³„æ¼é‡‘ä¸é›€

### LeakCanary æ˜¯ä¸€ä¸ªç”¨äº Android çš„å†…å­˜æ³„æ¼æ£€æµ‹åº“ã€‚-æ­£æ–¹å½¢/leakcanary

github.com](https://github.com/square/leakcanary) 

# å³æ—¶é—ç•™ä»£ç 

`Legacy code`ç»å¸¸è¢«ç”¨ä½œä¸€ä¸ªæ¨¡ç³Šçš„æœ¯è¯­ï¼Œæ„æ€æ˜¯â€œ*ä»£ç éš¾ä»¥ç†è§£ï¼Œä»¥è‡³äºä½ å®³æ€•æ”¹å˜å®ƒ*â€ã€‚Michael Feathers çš„ç»å…¸è‘—ä½œ:[ã€Šæœ‰æ•ˆåœ°ä½¿ç”¨é—ç•™ä»£ç ã€‹](https://www.amazon.de/Working-Effectively-Legacy-Robert-Martin/dp/0131177052)æœ‰ä¸€ä¸ªæ›´ä¸ºç²¾ç¡®å’Œå¯æ“ä½œçš„å®šä¹‰:ä»»ä½•æ²¡æœ‰è¢«å•å…ƒæµ‹è¯•è‡ªåŠ¨è¦†ç›–çš„ä»£ç éƒ½æœ‰èµ„æ ¼æˆä¸ºé—ç•™ä»£ç ã€‚

> *ä»»ä½•éµå¾ª Android ç‰ç±³ç…é¥¼è®¾è®¡æ¨¡å¼çš„ä»£ç éƒ½ç«‹å³è¢«è§†ä¸ºé—ç•™ä»£ç ã€‚*

æˆ‘ä¸€ç›´æƒ³çŸ¥é“ä¸ºä»€ä¹ˆ Android å®˜æ–¹æ–‡æ¡£å¦‚æ­¤å¼ºè°ƒä»ªå™¨æµ‹è¯•ã€‚

æ ¹æ®æˆ‘çš„ç»éªŒï¼Œè¿™äº›å¾ˆéš¾å†™ï¼ŒåŸºæœ¬ä¸Šå¾ˆæ…¢â€”â€”å®ƒä»¬å¿…é¡»åœ¨ Android è®¾å¤‡ä¸Šè¿è¡Œâ€”â€”æœ€ç³Ÿç³•çš„æ˜¯ï¼Œå½“å®ƒä»¬å¤±è´¥æ—¶ï¼Œå®ƒä»¬é€šå¸¸ä¸ä¼šå‘Šè¯‰ä½ ä»€ä¹ˆã€‚

æˆ‘èµ°äº†å®Œå…¨ç›¸åçš„æ–¹å‘ï¼Œå†™äº†è®¸å¤šç®€å•ã€å¿«é€Ÿã€é›†ä¸­çš„ JVM æµ‹è¯•ï¼Œå¹¶ä¸”æœ‰äº†æ›´å¥½çš„ç»“æœã€‚äº‹å®ä¸Šï¼Œè°·æ­Œçš„æµ‹è¯•å›¢é˜Ÿæœ‰ä¸€ç¯‡ç²¾å½©çš„æ–‡ç« ï¼Œè§£é‡Šäº†ä¸ºä»€ä¹ˆç«¯åˆ°ç«¯æµ‹è¯•æ˜¯ä¸€ä¸ªæ˜æ˜¾çš„å¥½ä¸»æ„ï¼Œä½†åœ¨å®è·µä¸­å´å¤±è´¥äº†:

> ***å¯¹æ›´å¤šçš„ç«¯åˆ°ç«¯æµ‹è¯•è¯´ä¸***
> 
> *å¥½ä¸»æ„ç»å¸¸åœ¨å®è·µä¸­å¤±è´¥ï¼Œåœ¨æµ‹è¯•é¢†åŸŸï¼Œä¸€ä¸ªæ™®éçš„å¥½ä¸»æ„ç»å¸¸åœ¨å®è·µä¸­å¤±è´¥ï¼Œé‚£å°±æ˜¯å›´ç»•ç«¯åˆ°ç«¯æµ‹è¯•æ„å»ºçš„æµ‹è¯•ç­–ç•¥ã€‚*
> 
> *[â€¦è¯·é˜…è¯»æ•´ç¯‡æ–‡ç« ï¼Œéå¸¸å¥½â€¦â€¦]* [*Google æµ‹è¯•åšå®¢:å¯¹æ›´å¤šç«¯åˆ°ç«¯æµ‹è¯•è¯´ä¸*](https://testing.googleblog.com/2015/04/just-say-no-to-more-end-to-end-tests.html)

æ‰€ä»¥ä»ªå™¨åŒ–çš„ Android æµ‹è¯•ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚

ä½†æ˜¯è€å®è¯´ï¼Œå¦‚æœä½ æŠŠä½ çš„é€»è¾‘æ”¾åœ¨ Android ç»„ä»¶é‡Œé¢ï¼Œé‚£å‡ ä¹æ˜¯ä½ èƒ½åšçš„å…¨éƒ¨:

> æ£€éªŒç‰ç±³ç…é¥¼çš„å”¯ä¸€æ–¹æ³•æ˜¯å°ä¸€å°ã€‚

å›æƒ³èµ·æ¥ï¼ŒAndroid ç‰ç±³ç…é¥¼çš„è®¾è®¡æ¨¡å¼æ˜¾ç„¶æ˜¯é”™è¯¯çš„ï¼Œè¿™è®©æˆ‘å¾ˆå¥½å¥‡:å®ƒæ¥è‡ªå“ªé‡Œï¼Œå®ƒæ˜¯å¦‚ä½•å­˜æ´»åˆ°ä»Šå¤©çš„ï¼Ÿ

# å®‰å“å·é¥¼è®¾è®¡æ¨¡å¼æ˜¯æ€ä¹ˆæˆä¸ºä¸€ä¸ªä¸œè¥¿çš„ï¼Ÿ

# æœ‰çš„`Context`ğŸ“š

ç»™ä½ ä¸€äº›`Context`ï¼Œè¿™æ˜¯ Android SDK 1.0 çš„ä¸¤ä¸ªæœ€åŸºæœ¬çš„æ„å»ºæ¨¡å—:

*   [Android . content . context](https://developer.android.com/reference/android/content/Context?hl=en)æä¾›å¯¹å…³äºåº”ç”¨ç¯å¢ƒçš„æ‰€æœ‰å…¨å±€ä¿¡æ¯çš„è®¿é—®ã€‚å®ƒå…è®¸è®¿é—®ç‰¹å®šäºåº”ç”¨ç¨‹åºçš„èµ„æºå’Œç±»ï¼Œä»¥åŠå¯¹åº”ç”¨ç¨‹åºçº§æ“ä½œçš„å‘ä¸Šè°ƒç”¨ï¼Œå¦‚å¯åŠ¨æ´»åŠ¨ã€å¹¿æ’­å’Œæ¥æ”¶æ„å›¾ç­‰ã€‚
*   [android.app.Activity](https://developer.android.com/reference/android/app/Activity?hl=en) ä¸ºåº”ç”¨ç¨‹åºæä¾›äº†ç›¸å½“äº`main()`çš„åŠŸèƒ½ï¼Œä½†å¢åŠ äº†ç§»åŠ¨æ“ä½œç³»ç»Ÿæ‰€éœ€çš„è®¸å¤šåŠŸèƒ½ï¼Œæœ€é‡è¦çš„æ˜¯å¤æ‚çš„[æ´»åŠ¨ç”Ÿå‘½å‘¨æœŸ](https://developer.android.com/guide/components/activities/activity-lifecycle?hl=en)ã€‚

è¿™ä¸¤ä¸ªæ¦‚å¿µæœ‰ä»€ä¹ˆå…³ç³»ï¼Ÿ

# æ´»åŠ¨å°±æ˜¯èƒŒæ™¯

è¿™æ˜¯ä¸€ä¸ªåœ¨ Android 1.0 ä¸­çŠ¯çš„è‡´å‘½é”™è¯¯

```
package android.app;import android.content.Context;class Activity extends Context { 
}
```

ä½†é¦–å…ˆè¦è®²ä¸€ç‚¹ç†è®ºã€‚

# æ„å›¾çš„é—ä¼ ğŸ™„

ä»ä½ çš„[é¢å‘å¯¹è±¡ç¼–ç¨‹](https://en.wikipedia.org/wiki/Object-oriented_programming) 101 è¯¾ç¨‹ä¸­ï¼Œä½ å¯èƒ½è®°å¾—å¯¹è±¡ä¹‹é—´æœ‰ä¸¤ç§éå¸¸ä¸åŒçš„å…³ç³»:

*   **ç»§æ‰¿**:æˆ¿å­**æ˜¯**å»ºç­‘
*   **æ„å›¾**:ä¸€æ ‹æˆ¿å­**æœ‰ä¸€ä¸ª**æˆ¿é—´

[ä¼˜äºç»§æ‰¿çš„ç»„åˆ](https://en.wikipedia.org/wiki/Composition_over_inheritance)æ˜¯ä¸€ä¸ªä¼—æ‰€å‘¨çŸ¥çš„è®¾è®¡åŸåˆ™ï¼Œåœ¨ä¸€äº›æœ‰å½±å“åŠ›çš„ä¹¦ç±ä¸­æœ‰æ‰€é™ˆè¿°ï¼Œå¦‚

*   [è®¾è®¡æ¨¡å¼:å¯é‡ç”¨é¢å‘å¯¹è±¡è½¯ä»¶çš„å…ƒç´ (1994)](https://en.wikipedia.org/wiki/Design_Patterns) ï¼Œä½œè€…:Erich Gammaã€Richard Helmã€Ralph Johnson å’Œ John Vlissides
*   çº¦ä¹¦äºšÂ·å¸ƒæ´›èµ«çš„ã€Šæœ‰æ•ˆçš„ Javaã€‹

Android ä»…ä»…æ˜¯å¦ä¸€ä¸ª SDK ( [è½¯ä»¶å¼€å‘å·¥å…·åŒ…](https://en.wikipedia.org/wiki/Software_development_kit))ï¼Œä½†æ˜¯æ˜¯å¦æœ‰ç†ç”±è¯´æ˜è¿™ä¸ªåŸç†åœ¨è¿™é‡Œå¹¶ä¸é€‚ç”¨ï¼Ÿå—¯ï¼Œä¸ï¼Œæˆ‘çŸ¥é“å¦‚æœä»–ä»¬ä»Šå¤©æœ‰æœºä¼šé‡å†™`Activity`ï¼ŒAndroid å›¢é˜Ÿä¸ä¼šè¿™æ ·åšï¼Œå› ä¸ºâ€¦

# ç¢ç‰‡ï¼æ˜¯ä¸Šä¸‹æ–‡ğŸ¤”

å¦‚æœä½ çœ‹ä¸€ä¸‹ [androidx.app.Fragment](https://developer.android.com/reference/androidx/fragment/app/Fragment.html?hl=en) ï¼ŒAndroid SDK çš„å¦ä¸€ä¸ªæ„å»ºå—ä¸ Activity éå¸¸ç›¸ä¼¼ï¼Œä½†åœ¨**ä¹‹å**å¼•å…¥ï¼Œä½ ä¼šæ„è¯†åˆ°å®ƒç¡®å®**è€Œä¸æ˜¯**æ‰©å±•äº†ä¸Šä¸‹æ–‡ã€‚ç›¸åï¼Œç‰‡æ®µ**å…·æœ‰**ä¸Šä¸‹æ–‡ã€‚

é‚£ä¹ˆï¼Œä¸ºä»€ä¹ˆ Android å›¢é˜Ÿä¼šæ”¹å˜ä¸»æ„ï¼Œå°½ç®¡æ˜¯æ‚„æ‚„çš„ï¼Ÿ

# åœ¨ Android ä¸­ï¼Œä¸€åˆ‡éƒ½éœ€è¦ä¸Šä¸‹æ–‡ğŸ“±

ä½ å¯ä»¥ä¹Ÿåº”è¯¥é¿å…å¢¨è¥¿å“¥å·é¥¼çš„è®¾è®¡æ¨¡å¼ã€‚ä½ æ— æ³•é€ƒé¿çš„æ˜¯ï¼Œåœ¨ Android ä¸­ï¼Œä½ éœ€è¦ä¸€ä¸ªä¸Šä¸‹æ–‡æ¥åšåŸºæœ¬ä¸Šæ‰€æœ‰çš„äº‹æƒ…:

```
class SomeThirdPartyClass {
    fun doStuff(contex: Context) = TODO()
}
```

ä½†å³ä½¿æ˜¯è¿™ç§å¹³åº¸çš„è¯¾ç¨‹ä¹Ÿæ˜¯ä¸€é¢—ç­‰å¾…çˆ†ç‚¸çš„åœ°é›·ã€‚

æ´»åŠ¨**æ˜¯ä¸€ä¸ª**ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“å°†`this@Activity`ä½œä¸ºå‚æ•°ä¼ é€’ç»™`doStuff()`ã€‚ä½†æ˜¯è¿™æ ·åšæ˜¯é”™è¯¯çš„ï¼Œä½ ä¸èƒ½ç¡®å®š`SomeThirdPartyClass`æ­£åœ¨åšæ­£ç¡®çš„äº‹æƒ…ï¼Œæˆ–è€…ä½ æ­£åœ¨åšæ­£ç¡®çš„äº‹æƒ…ã€‚å´©æºƒã€å†…å­˜æ³„æ¼å’Œä¸å¯æµ‹è¯•æ€§éšä¹‹è€Œæ¥ã€‚

æˆ‘æƒ³æŒ‡å‡ºï¼Œæˆ‘è¯´çš„ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå†å²æ€§çš„çŸ­è§†å†³å®šã€‚

# æ–‡ä»¶å’Œæ ·å“ä»Šå¤©ä»ç„¶æ˜¯ç³Ÿç³•çš„

2014 å¹´ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå¹´è½»çš„æ²¡æœ‰ç»éªŒçš„ Android å¼€å‘è€…å›¢é˜Ÿä¸­çš„ä¸€ä¸ªå¹´è½»çš„æ²¡æœ‰ç»éªŒçš„ Android å¼€å‘è€…ã€‚æˆ‘ä»¬è¯•å›¾äº†è§£è¿™äº›ä¸œè¥¿æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œå¹¶ä½¿ç”¨ Android æ–‡æ¡£å’Œæ ·æœ¬ä½œä¸ºè“å›¾ã€‚å›æƒ³èµ·æ¥ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯æ€•çš„é”™è¯¯ã€‚æˆ‘ä»¬æœ€ç»ˆå¾—åˆ°äº†ä¸€ä¸ªç—›è‹¦çš„éš¾ä»¥ç†è§£ã€éš¾ä»¥æµ‹è¯•ã€ç”šè‡³æ›´éš¾ä¿®æ”¹çš„çƒ‚æ‘Šå­ã€‚ä¸æ˜¯å› ä¸ºæˆ‘ä»¬æ²¡æœ‰éµå¾ªâ€œAndroid æœ€ä½³å®è·µâ€ï¼Œè€Œæ˜¯*æ­£æ˜¯å› ä¸ºæˆ‘ä»¬éµå¾ªäº†ï¼*

å¿«è¿›åˆ°ä»Šå¤©ï¼Œè™½ç„¶å·²ç»åœ¨å‡ ä¸ªé¢†åŸŸå–å¾—äº†è¿›å±•ï¼Œä½†å¾ˆå¤§ä¸€éƒ¨åˆ†å®˜æ–¹ Android æ–‡æ¡£å’Œç¤ºä¾‹ä»ç„¶å†™å¾—å¾ˆå·®ã€‚å®ƒç»§ç»­è¯¯å¯¼æ–°ä¸€ä»£æ²¡æœ‰ç»éªŒçš„å¼€å‘äººå‘˜ã€‚æ­£å¦‚ Bob å”å”ä¼šå‘Šè¯‰ä½ çš„ï¼Œå¤§å¤šæ•°å¼€å‘äººå‘˜éƒ½æ˜¯æ–°æ‰‹ï¼Œå› ä¸º IT è¡Œä¸šæ¯äº”å¹´å°±è¦ç¿»ä¸€ç•ªã€‚

æˆ‘æ„è¯†åˆ°ï¼Œå¯¹äºæŸäº›å­¦æ´¾æ¥è¯´ï¼Œæ‰€æœ‰è¿™äº›éƒ½æ˜¯å…¬å¹³çš„æ¸¸æˆ:â€œ*é‚£äº›é”™è¯¯æ˜¯æ„šè ¢çš„ï¼Œæˆ‘æ˜¯ä¸€ä¸ªçœŸæ­£çš„ç¨‹åºå‘˜ï¼Œä¸ä¼šä¸Šå½“ã€‚ä½ ä¸èƒ½é˜»æ­¢æ„šè ¢çš„äººå˜å¾—æ„šè ¢ï¼Œä¸æ˜¯å—ï¼Ÿ*â€ã€‚

ä½†æ˜¯æˆ‘æ¥è‡ª*ä¸ºäººç±»è€Œè®¾è®¡*å­¦æ´¾ï¼Œæ‰€ä»¥åœ¨æˆ‘çœ‹æ¥ï¼Œå½“ä¸€ä¸ªç¨‹åºå‘˜çŠ¯äº†ä¸€ä¸ªé”™è¯¯ï¼Œé‚£æ˜¯ç¨‹åºå‘˜çš„é”™ï¼Œä½†æ˜¯å½“åå¤šå¹´è¿‡å»äº†ï¼Œæˆåƒä¸Šä¸‡çš„ç¨‹åºå‘˜ä¸€æ¬¡åˆä¸€æ¬¡åœ°çŠ¯åŒæ ·çš„é”™è¯¯ï¼Œé‚£ä¹ˆå°±æ˜¯è®¾è®¡è€…å’Œæ–‡æ¡£ä½œè€…æ²¡æœ‰åšå¥½å·¥ä½œã€‚ç†æƒ³æƒ…å†µä¸‹ï¼Œåšæ­£ç¡®çš„äº‹åº”è¯¥å¾ˆå®¹æ˜“ï¼Œæ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šåº”è¯¥æ›´éš¾ã€‚

æ‰€ä»¥æ˜¯æ—¶å€™è¯´æ¸…æ¥šäº†ï¼Œå·é¥¼æ´»åŠ¨å’Œç‰‡æ®µæ˜¯ä¸å¯ä»¥çš„ã€‚å·²ç»è¿‡äº†ä¿®æ”¹æ–‡æ¡£å’Œæ ·æœ¬çš„æ—¶é—´äº†ã€‚

# â€œçŠ¯äº†é”™è¯¯â€ğŸ˜”

æˆ‘ç¡®å®æ˜ç™½ï¼Œå°½ç®¡è¿™äº›é”™è¯¯åœ¨ä»Šå¤©æ˜¯ç—›è‹¦çš„ï¼Œä½†å®ƒä»¬æ˜¯åœ¨ç‰¹å®šçš„å†å²èƒŒæ™¯ä¸‹çŠ¯ä¸‹çš„ã€‚Android é¡¹ç›®å¿…é¡»å‘å¸ƒä¸€äº›ä¸œè¥¿æˆ–è€…å˜å¾—æ— å…³ç´§è¦ï¼Œå½“æ™ºèƒ½æ‰‹æœºè¿œä¸å¦‚ä»Šå¤©å¼ºå¤§æ—¶ï¼Œè¿™æ˜¯ä¸€ä¸ªä¸åŒçš„é¢†åŸŸã€‚

JavaScript ä¹Ÿæ˜¯å¦‚æ­¤ã€‚[å®ƒçš„è®¾è®¡åœ¨çŸ­çŸ­åå¤©å†…åŒ†åŒ†å®Œæˆ](https://thenewstack.io/brendan-eich-on-creating-javascript-in-10-days-and-what-hed-do-differently-today/)ï¼Œç„¶ååœ¨[ç½‘æ™¯å¯¼èˆªå™¨ 1.0](https://fr.wikipedia.org/wiki/Netscape_Navigator) ä¸­å‡ºè´§ï¼Œå‰©ä¸‹çš„å°±æ˜¯å†å²äº†ã€‚

å¹¶ä¸æ˜¯è¯´æ²¡æœ‰è§£å†³æ–¹æ¡ˆå¯ä»¥è®©è¿™ç§å†å²é”™è¯¯å˜å¾—å¯æ§ã€‚

èªæ˜äººä¸€æ—¦ç—›è‹¦åœ°æ„è¯†åˆ°é—®é¢˜æ‰€åœ¨ï¼Œé€šå¸¸ä¼šå¾ˆå¿«æ‰¾åˆ°è§£å†³æ–¹æ¡ˆã€‚

è¿™æ­£æ˜¯ä¸œå°¼Â·éœå°”æ— æˆ‘çš„è¯šå®çš„ä¼Ÿå¤§ä¹‹å¤„:å®ƒç«‹åˆ»è®©äººæ„è¯†åˆ°è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜éœ€è¦è§£å†³ã€‚è¿™å°±æ˜¯ä»Šå¤© Android ä¸–ç•Œæ‰€ç¼ºä¹çš„ã€‚Android å®˜æ–¹æ–‡æ¡£å»¶ç»­è‡³ä»Šï¼Œç”¨å¥‡å¦™çš„ Android å·é¥¼è®¾è®¡æ¨¡å¼æ€æ­»å°çŒ«ã€‚

è¯·å…è®¸æˆ‘å¼•ç”¨ä¸œå°¼Â·éœå°”çš„è¯æ¥ç»“æŸæˆ‘çš„å‘è¨€:

> è¿™å¯¼è‡´äº†æ•°ä¸æ¸…çš„é”™è¯¯ã€æ¼æ´å’Œç³»ç»Ÿå´©æºƒï¼Œåœ¨è¿‡å»çš„åå¹´ä¸­ï¼Œè¿™å¯èƒ½é€ æˆäº†æ•°åäº¿ç¾å…ƒçš„ç—›è‹¦å’ŒæŸå¤±ã€‚

# å•å‡»ğŸ‘è¯´â€œè°¢è°¢ï¼â€å¹¶å¸®åŠ©ä»–äººæ‰¾åˆ°è¿™ç¯‡æ–‡ç« ã€‚

äº†è§£å¡å¸•å¤´æœ€æ–°çš„é‡å¤§æ–°é—»ã€‚å­¦é™¢ã€[è®¢é˜…æ—¶äº‹é€šè®¯](https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&id=d2ba84960a)ã€[è§‚å¯Ÿ Twitter](https://twitter.com/ktdotacademy) å¹¶åœ¨ medium ä¸Šå…³æ³¨æˆ‘ä»¬ã€‚

å¦‚æœæ‚¨éœ€è¦ Kotlin å·¥ä½œå®¤ï¼Œè¯·æŸ¥çœ‹æˆ‘ä»¬å¦‚ä½•å¸®åŠ©æ‚¨: [kt.academy](https://www.kt.academy/) ã€‚

[![](img/3146970f03e44cb07afe660b0d43e045.png)](https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&id=d2ba84960a)