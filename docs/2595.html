<html>
<head>
<title>Chaining Request in Rest Api using Katalon Studio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Katalon Studio在Rest Api中链接请求</h1>
<blockquote>原文：<a href="https://medium.easyread.co/chaining-request-in-rest-api-using-katalon-studio-127165d7d711?source=collection_archive---------2-----------------------#2021-09-10">https://medium.easyread.co/chaining-request-in-rest-api-using-katalon-studio-127165d7d711?source=collection_archive---------2-----------------------#2021-09-10</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="348b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在本文中，我将解释API，以及如何从API响应体中检索值，并在使用Katalon Studio在自动化测试过程中发送请求时将它用于其他API目的。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/27603fbcb8d81f8f2906e892903b7ec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x3fV8dV45cBgBtlkrrohuw.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Photo by <a class="ae ky" href="https://unsplash.com/@stephenleo1982?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Stephen Leonardi</a> on <a class="ae ky" href="https://unsplash.com/s/photos/chain?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3dc4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">什么是API？ <br/> An <a class="ae ky" href="https://www.altexsoft.com/blog/engineering/what-is-api-definition-types-specifications-documentation/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> API </strong> </a>是一组能够在一个软件产品和另一个软件产品之间进行数据传输的编程代码。它还包含这种数据交换的条款。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi kz"><img src="../Images/b479046713d3c07c08e2130bbe098abe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_5mKBP98ljSHN1Q5h-Wq0A.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">An API is not a database. It is an access point to an app that can access a database, Source: <a class="ae ky" href="https://medium.com/@perrysetgo/what-exactly-is-an-api-69f36968a41f" rel="noopener">https://medium.com/@perrysetgo/what-exactly-is-an-api-69f36968a41f</a></figcaption></figure><p id="0a04" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在其开发过程中，开发了几种类型的API样式，如下图所示:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi la"><img src="../Images/89f24355a728aa4fa14b9c6c1fbfaed6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kBALsobmWEiMVGDlkFXBkg.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><em class="lb">API styles over time, Source: </em><a class="ae ky" href="https://www.altexsoft.com/blog/soap-vs-rest-vs-graphql-vs-rpc/" rel="noopener ugc nofollow" target="_blank">https://www.altexsoft.com/blog/soap-vs-rest-vs-graphql-vs-rpc/</a></figcaption></figure><h1 id="a178" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">1.远程过程调用(RPC):调用另一个系统上的函数</h1><p id="1076" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">一个<a class="ae ky" href="https://techolution.com/types-of-apis/" rel="noopener ugc nofollow" target="_blank"> RPC </a>(远程过程调用)API是<a class="ae ky" href="https://cloud.google.com/blog/products/application-development/rest-vs-rpc-what-problems-are-you-trying-to-solve-with-your-apis" rel="noopener ugc nofollow" target="_blank">最古老和最简单的API类型</a>。RPC的目标是让客户端在服务器上执行代码。RPC APIs的主要好处是它们使开发人员更容易创建涉及多个程序或服务的应用程序。</p><p id="7935" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">远程过程调用</strong>是一种规范，允许在不同的上下文中远程执行一个函数。RPC扩展了本地过程调用的概念，但是将它放在HTTP API的上下文中。</p><h1 id="a670" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">2.简单对象访问协议(SOAP):使数据作为服务可用</h1><p id="c372" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated"><strong class="jm io"> SOAP </strong>是REST之前设计的一个协议，并进入了画面。设计SOAP背后的主要思想是确保在不同平台和编程语言上构建的程序能够以一种简单的方式交换数据。SOAP代表简单对象访问协议。</p><p id="4d36" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ky" href="https://www.altexsoft.com/blog/engineering/what-is-soap-formats-protocols-message-structure-and-how-soap-is-different-from-rest/#soap-use-cases" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> SOAP </strong> </a>是一种XML格式的、高度标准化的web通信协议。微软在XML-RPC一年后发布的SOAP继承了它的很多东西。当REST出现时，它们首先被并行使用，但很快REST赢得了流行度竞赛。</p><h1 id="a9ff" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">3.表述性状态转移(REST):使数据作为资源可用</h1><p id="92f4" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">REST是一种自解释的API架构风格，由一组架构约束定义，旨在被许多API消费者广泛采用。</p><p id="4efc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">今天最常见的API风格最初是由Roy Fielding在2000年的博士论文中描述的。REST使服务器端数据可用，用简单的格式表示，通常是JSON和XML。</p><p id="af1f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> REST </strong>是专门为处理媒体组件、文件甚至特定硬件设备上的对象而设计的。任何基于REST原则定义的web服务都可以称为RestFul web服务。Restful服务将使用普通的HTTP动词GET、POST、PUT和DELETE来处理所需的组件。REST代表代表性状态转移。</p><h1 id="0a0c" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">4.GraphQL:只查询需要的数据</h1><p id="48b2" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">它需要多次调用REST API来返回所需的人员。所以GraphQL的发明是为了改变游戏规则。</p><p id="f399" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><a class="ae ky" href="https://www.altexsoft.com/blog/engineering/graphql-core-features-architecture-pros-and-cons/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> GraphQL </strong> </a>是一种描述如何进行精确数据请求的语法。对于有许多复杂实体相互引用的应用程序数据模型来说，实现GraphQL是值得的。</p><p id="3194" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi mf translated"><span class="l mg mh mi bm mj mk ml mm mn di">以上四个API中，这次要讨论的是REST API。<br/>REST API示例可在reqres.in网站上找到。在这个网站上，我们可以看到有几种类型的请求。</span></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi mo"><img src="../Images/89fb6da5fc976b7b4ca7c685ec006b8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DbndZb0psk3Anj3YGO5lnw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">API regres, Source: <a class="ae ky" href="https://reqres.in/" rel="noopener ugc nofollow" target="_blank">https://reqres.in/</a></figcaption></figure><p id="558e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">因为我们想要创建链接请求，我们所做的是选择一些我们想要使用的请求，然后将它们移动到我们的自动化测试工具中，这是Katalon Studio，然后在那里执行它们。</p><p id="c78f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">步骤如下:</p><ol class=""><li id="0de4" class="mp mq in jm b jn jo jr js jv mr jz ms kd mt kh mu mv mw mx bi translated"><strong class="jm io">从</strong>  <strong class="jm io">网站的</strong> <a class="ae ky" href="https://reqres.in/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io">需求中选择要使用的需求。</strong></a></li></ol><p id="3173" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在请求列表中，将使用2个请求，即API GET LIST USERS和API PUT UPDATE。</p><ul class=""><li id="b1b8" class="mp mq in jm b jn jo jr js jv mr jz ms kd mt kh my mv mw mx bi translated">API获取用户列表</li></ul><p id="3afe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个API响应将返回用户列表数据。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi mz"><img src="../Images/750589d6f107497dada3f394548c653c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1038/format:webp/1*0bVUfibXrge8714Ghq6bjA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">API GET LIST USERS, Source: <a class="ae ky" href="https://reqres.in/" rel="noopener ugc nofollow" target="_blank">https://reqres.in/</a></figcaption></figure><ul class=""><li id="3171" class="mp mq in jm b jn jo jr js jv mr jz ms kd mt kh my mv mw mx bi translated">API上传更新</li></ul><p id="0ddf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个API响应将返回更新数据的结果</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi na"><img src="../Images/9fd12458d43b419f144797445b2518b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*7mQjod-pLQXos_e2iM8nVw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">API PUT UPDATE, Source: <a class="ae ky" href="https://reqres.in/" rel="noopener ugc nofollow" target="_blank">https://reqres.in/</a></figcaption></figure><p id="93e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">2.<strong class="jm io">在Katalon创建一个新项目</strong></p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nb"><img src="../Images/089f02725652f6fb764e0604b48d6929.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FXtVGOrVRuXizOwwFvAg2A.png"/></div></div></figure><p id="c6e8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 3。在Katalon中为两个API创建一个对象存储库web服务请求。</strong></p><p id="f2d5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在Katalon中，右键单击对象存储库文件夹&gt;单击新建&gt;单击Web服务请求</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nc"><img src="../Images/40708f37ce70657db8870ef2478d4114.png" data-original-src="https://miro.medium.com/v2/resize:fit:1278/format:webp/1*7NVJLcDPwFwW-JPQ6WEkKg.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Creating a New Object Repository for a Web Service Request</figcaption></figure><p id="d175" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在下一个屏幕中，在name字段中填写web服务名称，并在请求类型中选择RESTful，因为我们将使用REST API，并输入适当的API url，然后单击OK。</p><ul class=""><li id="d718" class="mp mq in jm b jn jo jr js jv mr jz ms kd mt kh my mv mw mx bi translated">Web服务请求API获取列表用户</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nd"><img src="../Images/9f3609bb74c5a21d548d063e0b76f0de.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*eLtBJOgp6Pfi9UAH1fTzKA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Fill in the name, type and url of the API GET List User Information</figcaption></figure><ul class=""><li id="ef3a" class="mp mq in jm b jn jo jr js jv mr jz ms kd mt kh my mv mw mx bi translated">Web服务请求API更新用户</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ne"><img src="../Images/7551b23ef3e78c915ad415a00c90a8ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*xkCEI4uKRjkLUK8xGUB74A.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Fill in the name, type and url of the API Update User Information</figcaption></figure><p id="ce4a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于GET List用户API，我们不需要主体请求，但是在Update用户API中，我们需要用以下json填充请求主体:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="4730" class="nk ld in ng b gy nl nm l nn no">{<br/>    "name": "${userName}",<br/>    "job": "zion resident"<br/>}</span></pre><p id="c04f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的主体请求中，name参数的值取自userName变量。在Variables选项卡上查看时，userName变量的值也取自概要文件中的全局变量。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi np"><img src="../Images/d5dc20f14834e4ce4b65efb8bc6f3da5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EoAQCh7h1uDXTsiheavu5Q.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Variables in Object repository Web Service Request</figcaption></figure><p id="6c5f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果我们在Profiles部分查看全局变量，全局变量userName的值被初始化为一个空字符串。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/9ac3d1270e1a5348e758abb41fe343d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*2-t0dwmk7uhAEULiac9Gnw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Global Variabel username diinisialisasi sebagai string kosong</figcaption></figure><h1 id="ec51" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">那么价值从何而来？</h1><p id="202d" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">好的，这个值将从我们将在Get List用户API响应中获得的参数值中填充，并且将在我们稍后制作测试用例时进行解释。</p><p id="04c2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 4。将验证添加到响应体API </strong></p><p id="da24" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在进行验证之前，希望我们已经知道预期的结果是什么。但是在这种情况下我们假设预期的结果是符合实际的。因此，将根据API响应中的值进行验证，并且只对少数参数进行验证。</p><ul class=""><li id="3bd2" class="mp mq in jm b jn jo jr js jv mr jz ms kd mt kh my mv mw mx bi translated">向回应正文API获取列表用户添加验证</li></ul><p id="e371" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当发送这个GET List Users请求时，将获得一个响应体，如下面的json所示:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="c967" class="nk ld in ng b gy nl nm l nn no">{<br/>  "page":2,<br/>  "per_page":6,<br/>  "total":12,<br/>  "total_pages":2,<br/>  "data":[<br/>    {<br/>      "id":7,<br/>      "email":"<a class="ae ky" href="mailto:michael.lawson@reqres.in" rel="noopener ugc nofollow" target="_blank">michael.lawson@reqres.in</a>",<br/>      "first_name":"Michael",<br/>      "last_name":"Lawson",<br/>      "avatar":"<a class="ae ky" href="https://reqres.in/img/faces/7-image.jpg" rel="noopener ugc nofollow" target="_blank">https://reqres.in/img/faces/7-image.jpg</a>"<br/>    },<br/>    {<br/>      "id":8,<br/>      "email":"<a class="ae ky" href="mailto:lindsay.ferguson@reqres.in" rel="noopener ugc nofollow" target="_blank">lindsay.ferguson@reqres.in</a>",<br/>      "first_name":"Lindsay",<br/>      "last_name":"Ferguson",<br/>      "avatar":"<a class="ae ky" href="https://reqres.in/img/faces/8-image.jpg" rel="noopener ugc nofollow" target="_blank">https://reqres.in/img/faces/8-image.jpg</a>"<br/>    },<br/>    {<br/>      "id":9,<br/>      "email":"<a class="ae ky" href="mailto:tobias.funke@reqres.in" rel="noopener ugc nofollow" target="_blank">tobias.funke@reqres.in</a>",<br/>      "first_name":"Tobias",<br/>      "last_name":"Funke",<br/>      "avatar":"<a class="ae ky" href="https://reqres.in/img/faces/9-image.jpg" rel="noopener ugc nofollow" target="_blank">https://reqres.in/img/faces/9-image.jpg</a>"<br/>    },<br/>    {<br/>      "id":10,<br/>      "email":"<a class="ae ky" href="mailto:byron.fields@reqres.in" rel="noopener ugc nofollow" target="_blank">byron.fields@reqres.in</a>",<br/>      "first_name":"Byron",<br/>      "last_name":"Fields",<br/>      "avatar":"<a class="ae ky" href="https://reqres.in/img/faces/10-image.jpg" rel="noopener ugc nofollow" target="_blank">https://reqres.in/img/faces/10-image.jpg</a>"<br/>    },<br/>    {<br/>      "id":11,<br/>      "email":"<a class="ae ky" href="mailto:george.edwards@reqres.in" rel="noopener ugc nofollow" target="_blank">george.edwards@reqres.in</a>",<br/>      "first_name":"George",<br/>      "last_name":"Edwards",<br/>      "avatar":"<a class="ae ky" href="https://reqres.in/img/faces/11-image.jpg" rel="noopener ugc nofollow" target="_blank">https://reqres.in/img/faces/11-image.jpg</a>"<br/>    },<br/>    {<br/>      "id":12,<br/>      "email":"<a class="ae ky" href="mailto:rachel.howell@reqres.in" rel="noopener ugc nofollow" target="_blank">rachel.howell@reqres.in</a>",<br/>      "first_name":"Rachel",<br/>      "last_name":"Howell",<br/>      "avatar":"<a class="ae ky" href="https://reqres.in/img/faces/12-image.jpg" rel="noopener ugc nofollow" target="_blank">https://reqres.in/img/faces/12-image.jpg</a>"<br/>    }],<br/>  "support":{<br/>    "url":"<a class="ae ky" href="https://reqres.in/#support-heading" rel="noopener ugc nofollow" target="_blank">https://reqres.in/#support-heading</a>",<br/>    "text":"To keep ReqRes free, contributions towards server costs are appreciated!"<br/>  }<br/>}</span></pre><p id="a666" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在对象存储库中的“验证”选项卡上，添加的断言如下:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="5798" class="nk ld in ng b gy nl nm l nn no">RequestObject request = WSResponseManager.getInstance().getCurrentRequest()</span><span id="b0db" class="nk ld in ng b gy nr nm l nn no">ResponseObject response = WSResponseManager.getInstance().getCurrentResponse()</span><span id="7a5c" class="nk ld in ng b gy nr nm l nn no">WS.verifyResponseStatusCode(response, 200)</span><span id="381f" class="nk ld in ng b gy nr nm l nn no">assertThat(response.getStatusCode()).isEqualTo(200)</span><span id="6cd5" class="nk ld in ng b gy nr nm l nn no">WS.verifyElementPropertyValue(response, 'data[1].first_name', 'Lindsay')<br/>WS.verifyElementPropertyValue(response, 'data[2].first_name', "Tobias")<br/>WS.verifyElementPropertyValue(response, 'data[2].last_name', "Funke")</span></pre><p id="051f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的脚本片段中，可以看到有4项内容得到了验证，包括:</p><p id="c947" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">a.状态代码应该是<strong class="jm io"> 200 </strong></p><p id="b0be" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">b.值键的名字，在数据参数的第一个索引中应该是Lindsay</p><p id="4830" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">c.数据参数的第二个索引中的值键名应该是Lindsay Tobias</p><p id="010e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">d.值键的姓，在数据参数的第二个索引中应该是Funke</p><ul class=""><li id="b372" class="mp mq in jm b jn jo jr js jv mr jz ms kd mt kh my mv mw mx bi translated">向响应体API更新用户<br/>添加验证当发送该更新用户请求时，将获得如下json所示的响应体:</li></ul><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="440e" class="nk ld in ng b gy nl nm l nn no">{<br/>  "name":"",<br/>  "job":"zion resident",<br/>  "updatedAt":"2021-09-10T02:22:53.421Z"<br/>}</span></pre><p id="a8e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在对象存储库中的“验证”选项卡上，添加的断言如下:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="2cf1" class="nk ld in ng b gy nl nm l nn no">RequestObject request = WSResponseManager.getInstance().getCurrentRequest()</span><span id="5183" class="nk ld in ng b gy nr nm l nn no">ResponseObject response = WSResponseManager.getInstance().getCurrentResponse()</span><span id="7d54" class="nk ld in ng b gy nr nm l nn no">WS.verifyElementPropertyValue(response, 'name', "Michael")</span><span id="a67d" class="nk ld in ng b gy nr nm l nn no">WS.verifyResponseStatusCode(response, 200)</span><span id="43a1" class="nk ld in ng b gy nr nm l nn no">assertThat(response.getStatusCode()).isEqualTo(200)</span></pre><h1 id="cff0" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated"><strong class="ak">你在上面的代码片段中看到了什么奇怪的地方吗？</strong></h1><p id="e6a1" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">是的，这当然很奇怪，因为响应主体名称是一个空字符串，而在验证选项卡中，验证的名称是Michael。</p><h1 id="54c8" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated"><strong class="ak">怎么发生的？</strong></h1><p id="2966" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">这是因为username参数值取自全局变量username，该变量当前设置为空。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nq"><img src="../Images/9ac3d1270e1a5348e758abb41fe343d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1020/format:webp/1*2-t0dwmk7uhAEULiac9Gnw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Global Variabel username is initialized as an empty string</figcaption></figure><p id="71dd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">那么，如果我们也从对象存储库中发送请求，那么对象存储库中的验证部分就不会被检查。这就是为什么当我们发送请求时，结果仍然是成功的，因为验证部分没有被检查。</p><p id="a831" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">那么我们如何运行它，以便检查验证部分呢？在这种情况下，我们需要一个<strong class="jm io">测试用例</strong>。</p><p id="7a61" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 5。在Katalon中创建一个新的测试用例</strong></p><p id="8287" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这一步中，将创建一个测试用例，它将发送一个请求并运行它的验证，以检查生成的响应是否与预期的结果一致。</p><p id="67e2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是在深入之前，您知道什么是测试用例吗？<br/><a class="ae ky" href="https://www.guru99.com/test-case.html" rel="noopener ugc nofollow" target="_blank"><strong class="jm io">测试用例</strong> </a>是为验证软件应用程序的特定特性或功能而执行的一组动作。测试用例包含测试步骤、测试数据、前置条件、后置条件，是为验证任何需求而开发的特定测试场景。</p><p id="b68a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如何在Katalon上制作一个测试用例相当容易。<br/>右击测试用例文件夹&gt;点击新建&gt;点击测试用例</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi ns"><img src="../Images/5bd5d956db3180aef6f3b7b70120f01f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1170/format:webp/1*rbWdOWJYJyqsLZfsskyWrw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Create a new test case</figcaption></figure><p id="5e45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">之后，给你的测试用例命名，然后点击OK按钮。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nt"><img src="../Images/9a146cca66714f0540e817257b126a63.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*K2lBee29MyjLPoPrvEp4RQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Membuat nama test case</figcaption></figure><p id="fc22" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">创建测试用例后，单击脚本部分并键入以下代码片段:</p><pre class="kj kk kl km gt nf ng nh ni aw nj bi"><span id="7f7d" class="nk ld in ng b gy nl nm l nn no">response1 = WS.sendRequestAndVerify(findTestObject('API Reqres/ListUsers', [('url') : GlobalVariable.url]))</span><span id="1f0b" class="nk ld in ng b gy nr nm l nn no">def slurper = new groovy.json.JsonSlurper()</span><span id="c342" class="nk ld in ng b gy nr nm l nn no">def result = slurper.parseText(response1.getResponseBodyContent())</span><span id="9709" class="nk ld in ng b gy nr nm l nn no">String apiPostLoanResponse = response1.getResponseText()</span><span id="1d0f" class="nk ld in ng b gy nr nm l nn no">def value = result.data[0].first_name</span><span id="89e3" class="nk ld in ng b gy nr nm l nn no">GlobalVariable.userName = value</span><span id="a127" class="nk ld in ng b gy nr nm l nn no">WS.sendRequestAndVerify(findTestObject('API Reqres/UpdateUsers', [('url') : GlobalVariable.url, ('userName') : GlobalVariable.userName]))</span></pre><p id="2ff5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上面的代码片段中，可以看到发送的第一个API是GET List用户API。之后，响应主体被解析为文本形式，然后基于json路径解析result.data[0]的值。first_name存储在参数值中。最后，参数value的值存储在全局变量username中。以便最初为空的全局变量username变成根据result.data[0]中的值的值。名字。</p><p id="f8f5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是API Update用户使用的值，显示在代码片段的最后一行，作为在主体请求中发送的用户名的值。因此，我们可以清楚地看到<strong class="jm io">链式API </strong>在这种情况下是如何实现的。</p><p id="fc16" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> 6。运行测试用例并检查结果</strong></p><p id="b4dd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当我们运行一个测试用例时，我们的希望是测试用例被成功执行，并且验证结果是我们所期望的。下面是测试用例运行后日志查看器的样子:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nu"><img src="../Images/a1cd8b144a0e16bd7ba5bc92d11f05af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*eYAJHeRSJuCCY3-qO40-bw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Test Case Log Viewer</figcaption></figure><p id="9be2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在上图中，可以看到每个步骤都被成功执行，以及验证结果。有趣的是，如果我们对对象存储库进行验证，并发送一个带有关键字Send Request和Verify的请求，那么验证部分将位于一个特殊的部分，如上所示。因此，要检查每个验证的结果，我们只需单击“验证”部分，即可看到如下结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nv"><img src="../Images/a366fa7fd92595b2ed57a53b267b09fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1340/format:webp/1*Iyof2loh9QNqyjEwvMX7jw.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Checking the results of verification</figcaption></figure><p id="fd59" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以，在右边也会显示验证的结果:</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi nw"><img src="../Images/48417a815c455cbb5cb3f6b81d9be1c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*hpMcnZJVlGu10xzseEUHvA.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Result of verification</figcaption></figure><p id="b9e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">基于以上验证结果，可以得出结论<strong class="jm io">链API成功</strong>是因为:<br/> <strong class="jm io"> <em class="nx">体响应API GET List User的值在json path data[0]中。first_name已成功保存到全局变量username中，API Update用户将使用该变量作为请求正文中的username参数值，并在“验证”选项卡上成功验证，即Michael。</em> </strong></p><h2 id="c351" class="nk ld in bd le ny nz dn li oa ob dp lm jv oc od lq jz oe of lu kd og oh ly oi bi translated"><strong class="ak">因此我作了这篇文章。希望对大家有用并保持健康，愿上帝与你同在💙🤍 </strong></h2><blockquote class="oj"><p id="0ea9" class="ok ol in bd om on oo op oq or os kh dk translated">她饿了。保持愚蠢。永远不要放弃追求新想法、新经历和新冒险的欲望。”</p><p id="aa53" class="ok ol in bd om on oo op oq or os kh dk translated">史蒂夫·乔布斯</p></blockquote></div><div class="ab cl ot ou hr ov" role="separator"><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy oz"/><span class="ow bw bk ox oy"/></div><div class="ig ih ii ij ik"><h1 id="7352" class="lc ld in bd le lf pa lh li lj pb ll lm ln pc lp lq lr pd lt lu lv pe lx ly lz bi translated">参考:</h1><ol class=""><li id="8ac5" class="mp mq in jm b jn ma jr mb jv pf jz pg kd ph kh mu mv mw mx bi translated"><a class="ae ky" href="https://www.altexsoft.com/blog/engineering/what-is-api-definition-types-specifications-documentation/" rel="noopener ugc nofollow" target="_blank">https://www . altex soft . com/blog/engineering/what-is-API-definition-types-specifications-documentation/</a></li><li id="0516" class="mp mq in jm b jn pi jr pj jv pk jz pl kd pm kh mu mv mw mx bi translated"><a class="ae ky" href="https://medium.com/@perrysetgo/what-exactly-is-an-api-69f36968a41f" rel="noopener">https://medium . com/@ perrysetgo/到底什么是api-69f36968a41f </a></li><li id="b9b8" class="mp mq in jm b jn pi jr pj jv pk jz pl kd pm kh mu mv mw mx bi translated"><a class="ae ky" href="https://www.guru99.com/comparison-between-web-services.html" rel="noopener ugc nofollow" target="_blank">https://www.guru99.com/comparison-between-web-services.html</a></li><li id="8023" class="mp mq in jm b jn pi jr pj jv pk jz pl kd pm kh mu mv mw mx bi translated"><a class="ae ky" href="https://techolution.com/types-of-apis/" rel="noopener ugc nofollow" target="_blank">https://techolution.com/types-of-apis/</a></li><li id="dc51" class="mp mq in jm b jn pi jr pj jv pk jz pl kd pm kh mu mv mw mx bi translated"><a class="ae ky" href="https://www.altexsoft.com/blog/soap-vs-rest-vs-graphql-vs-rpc/" rel="noopener ugc nofollow" target="_blank">https://www . altex soft . com/blog/soap-vs-rest-vs-graph QL-vs-RPC/</a></li><li id="9af4" class="mp mq in jm b jn pi jr pj jv pk jz pl kd pm kh mu mv mw mx bi translated"><a class="ae ky" href="https://www.guru99.com/test-case.html" rel="noopener ugc nofollow" target="_blank">https://www.guru99.com/test-case.html</a></li><li id="d52e" class="mp mq in jm b jn pi jr pj jv pk jz pl kd pm kh mu mv mw mx bi translated"><a class="ae ky" href="https://reqres.in/" rel="noopener ugc nofollow" target="_blank">https://reqres.in/</a></li></ol></div></div>    
</body>
</html>