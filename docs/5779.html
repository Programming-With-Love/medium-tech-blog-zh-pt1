<html>
<head>
<title>Private connectivity to Oracle Integration Cloud next generation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">与新一代Oracle集成云的私有连接</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/private-connectivity-to-oracle-integration-cloud-next-generation-d0bfae1d0804?source=collection_archive---------0-----------------------#2021-05-27">https://medium.com/oracledevs/private-connectivity-to-oracle-integration-cloud-next-generation-d0bfae1d0804?source=collection_archive---------0-----------------------#2021-05-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/87736a535d5395469dc78c86dd9a276f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4VMV12DojSnekc_65uLKkw.png"/></div></div></figure><h1 id="c801" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated"><strong class="ak">简介</strong></h1><p id="db1d" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">OCI上的Oracle集成云(OIC)下一代(第二代),作为公共服务部署，在公共互联网上提供。您可以使用OIC公共URL(* . integration . OPC . Oracle cloud . com)从任何地方执行OIC中的集成。</p><p id="0a61" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">此外，作为一项新功能，您可以将对OIC实例的访问限制到特定的IP或CIDR块，甚至虚拟云网络(VCN)(请参考<a class="ae kq" href="https://docs.oracle.com/en/cloud/paas/integration-cloud/oracle-integration-oci/restrict-access-instance.html" rel="noopener ugc nofollow" target="_blank">限制对实例的访问</a>)。</p><p id="66b1" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在大多数情况下，客户希望私下(通过OCI和内部网络之间的VPN或FastConnect链接，而不通过公共互联网发送数据)与内部应用之间的OIC实例(入站和出站集成)进行通信。在本文中，我将讨论实现私有连接的可用解决方案。</p><h1 id="3b2c" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated"><strong class="ak"> OCI私有连接解决方案</strong></h1><p id="1d21" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">Oracle集成云部署在<em class="kr"> Oracle服务网络(OSN)。</em></p><p id="b7d3" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">Oracle服务是Oracle云基础架构中为Oracle服务保留的概念网络(与OIC和Oracle分析云相同)。这些服务拥有公共IP地址，您通常可以通过公共互联网访问这些地址。然而，你可以不通过公共互联网访问OSN。</p><p id="59f1" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">对于每个OCI地区，Oracle服务网络都有一个保留的公共IP范围。如果你点击<a class="ae kq" href="https://docs.oracle.com/en-us/iaas/tools/public_ip_ranges.json" rel="noopener ugc nofollow" target="_blank">这个</a>链接，你可以找到每个地区的公共IP范围。</p><p id="490b" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">当您的主机在本地网络中时，有不同的方式:</p><ul class=""><li id="8613" class="ks kt hh jp b jq kl ju km jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">通过具有FastConnect私有对等或VPN连接的VCN进行私有访问</strong>:本地主机使用私有IP地址，并通过VCN和VCN的服务网关到达Oracle服务网络。服务网关是区域性的，仅允许访问与VCN位于同一地区的受支持Oracle服务。</li></ul><blockquote class="lb lc ld"><p id="2df6" class="jn jo kr jp b jq kl js jt ju km jw jx le kn ka kb lf ko ke kf lg kp ki kj kk ha bi translated">服务网关使用了<em class="hh">服务CIDR标签</em>的概念，这是一个字符串，表示感兴趣的服务或服务组的所有区域公共IP地址范围。<em class="hh">服务网关不允许来自OSN的连接请求进入VCN或您的内部网络。来自Oracle服务的任何连接请求都必须通过公共路径，如互联网或快速连接公共对等网络</em>。</p></blockquote><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lh"><img src="../Images/6f00aa7722cef57dd6d8c5ebee6a87c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-BpuCsZkNFragFLL.png"/></div></div><figcaption class="lm ln et er es lo lp bd b be z dx">Transit routing directly through gateways</figcaption></figure><p id="45b6" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在这种情况下，应用程序使用Oracle服务的公共DNS(例如对象存储)，流量将通过VPN或FastConnect(私有对等)路由到连接到OCI VCN的DRG。连接到DRG的路由表将流量(到对象存储或其他OSN服务)路由到连接到VCN的服务网关。连接到服务网关的路由表将流量路由回本地CIDR到DRG，DRG将流量通过VPN路由到本地网络进行快速连接(有关更多信息，请参考<a class="ae kq" href="https://docs.oracle.com/en-us/iaas/Content/Network/Tasks/transitroutingoracleservices.htm" rel="noopener ugc nofollow" target="_blank">Oracle服务的私有访问</a>文档)。</p><ul class=""><li id="fa60" class="ks kt hh jp b jq kl ju km jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">通过FastConnect公共对等进行公共访问:</strong>本地主机使用公共IP地址。</li></ul><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lq"><img src="../Images/f73860b92019a57e3ec71cfe93d74564.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bddYa8ZoUtPRfBNV.png"/></div></div></figure><p id="95d6" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在这个场景(蓝线)中，流量将使用FastConnect公共对等路由到Oracle服务(这个场景超出了本文的范围)。</p><blockquote class="lb lc ld"><p id="fbec" class="jn jo kr jp b jq kl js jt ju km jw jx le kn ka kb lf ko ke kf lg kp ki kj kk ha bi translated">请记住，在这两种情况下，内部软件应使用OSN内部Oracle Services的公共DNS(公共IP地址)(公共IP地址将使用BGP或静态路由通过FastConnect或VPN进行路由)。</p></blockquote><p id="f514" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在大多数情况下，客户不喜欢将Oracle服务的公共IP从他们的网络路由到OCI(通过VPN或FastConnect公共对等)。想象一下这样的场景:客户在第三方云提供商(与Google或AWS相同)中部署了应用程序，并且他们在内部网络和第三方云帐户之间建立了私有连接(VPN或直接连接)。在本例中，如果部署在第三方云提供商内部私有网络上的应用程序希望与Oracle服务(在我们的示例OIC中)通信，它们应该将OIC的公共IP地址从第三方云帐户内部的私有网络路由到内部网络，然后将该流量从内部网络路由到OCI。在OCI，客户喜欢使用私有IP地址而不是公共IP地址进行通信。在本文中，我将解释如何在私有IP上存档这种私有连接。</p><h1 id="b77e" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated"><strong class="ak">与OIC实例通信的私有连接解决方案</strong></h1><ol class=""><li id="be97" class="ks kt hh jp b jq jr ju jv jy lr kc ls kg lt kk lu ky kz la bi translated"><strong class="jp hi">对外集成(OIC呼叫内部服务)</strong></li></ol><p id="5d64" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">对于这个场景，我们使用OIC连接代理与内部软件进行通信。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lv"><img src="../Images/4554d81eb49dac33359a177f21877b20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G_5dCwwTqsMx5kdgnNFk3g.png"/></div></div></figure><p id="bf90" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">红线表示出站集成流程</p><p id="d45a" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">以下是实现出站专用连接的步骤:</p><ul class=""><li id="dd82" class="ks kt hh jp b jq kl ju km jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">下载连接代理</strong></li></ul><p id="513e" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">导航到OIC控制台中的集成-&gt;代理选项卡，并选择下载“连接代理”</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lw"><img src="../Images/f629933a508c3700a0111fb184f3bb93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JuxZ4HVe3QGNpBNIQXiWMw.png"/></div></div></figure><p id="fd69" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">从OIC实例下载连接代理</p><ul class=""><li id="6d6e" class="ks kt hh jp b jq kl ju km jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">创建代理组</strong></li></ul><p id="2957" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">导航到OIC控制台中的集成-&gt;代理选项卡，并创建新的代理组</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lx"><img src="../Images/9db6c27bf6d5e10644f6889d545af46b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z23-GX3Mr-XTopishop7BQ.png"/></div></div></figure><ul class=""><li id="f897" class="ks kt hh jp b jq kl ju km jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">在VCN内部供应一个计算实例(以运行连接代理)并配置和运行连接代理</strong></li></ul><p id="3ba4" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在VCN内部的私有子网中配置计算实例(VCN需要直接连接到内部网络或通过VCN中心连接，我们需要将所有区域服务的服务网关连接到VCN)。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ly"><img src="../Images/cd9199609e12b120a9bd2e0af1bbdb5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*49c2YBkTlVjGIb9P_j0JiQ.png"/></div></div></figure><p id="e10d" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">调配计算保险后，您需要将连接代理zip文件传输到计算实例，并在特定文件夹中提取zip文件。</p><p id="98dd" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">用OIC实例信息更新InstallerProfile.cfg文件</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lz"><img src="../Images/d40329252fb30eecddbca666c313cd8a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NELsx7dspqkgsrwYF6oSqw.png"/></div></div></figure><pre class="li lj lk ll fd ma mb mc md aw me bi"><span id="ec66" class="mf iq hh mb b fi mg mh l mi mj">oic_URL=https://&lt;&lt;oic instance DNS&gt;&gt;:443</span><span id="ea57" class="mf iq hh mb b fi mk mh l mi mj">agnet_GROUP_IDENTIFIER=&lt;&lt;connectivity agent group name&gt;&gt;</span><span id="6847" class="mf iq hh mb b fi mk mh l mi mj">oic_USER=&lt;&lt;OIC User&gt;&gt;</span><span id="dfe8" class="mf iq hh mb b fi mk mh l mi mj">oic_PASSWORD=&lt;&lt;OIC Password&gt;&gt;</span></pre><p id="1417" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">运行代理后，OIC用户和密码将在配置文件中编码。如果您使用代理，您需要在配置文件中填充proxy_xxx信息。</p><p id="dba4" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">此外，如果您有本地软件的特定证书，则需要将证书导入连接代理密钥库中(在&lt;<agent home=""> &gt;/agnet/cert文件夹中)。</agent></p><p id="4629" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">最后，使用以下命令运行代理:</p><pre class="li lj lk ll fd ma mb mc md aw me bi"><span id="73a9" class="mf iq hh mb b fi mg mh l mi mj">nohup java -jar connectivityagent.jar &amp;</span></pre><p id="91d6" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">此外，通过在两个或更多计算实例中运行连接代理(使用同一个代理组)，可以在高可用性模式下运行连接代理。</p><p id="cf06" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">有关更多信息，请参考以下文档:</p><pre class="li lj lk ll fd ma mb mc md aw me bi"><span id="8e50" class="mf iq hh mb b fi mg mh l mi mj"><a class="ae kq" href="https://docs.oracle.com/en/cloud/paas/integration-cloud/integrations-user/agent-download-and-installation.html#GUID-B72F9768-C3E9-4B59-BEC0-ACB03CC12C19" rel="noopener ugc nofollow" target="_blank">https://docs.oracle.com/en/cloud/paas/integration-cloud/integrations-user/agent-download-and-installation.html#GUID-B72F9768-C3E9-4B59-BEC0-ACB03CC12C19</a></span></pre><ul class=""><li id="bcd6" class="ks kt hh jp b jq kl ju km jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">在OIC中创建连接并将代理添加到连接中</strong></li></ul><p id="8d11" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">导航到OIC控制台中的集成-&gt;连接选项卡，并创建新的连接。为连接提供所有必需信息(取决于连接类型)后，将代理组添加到连接中。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ml"><img src="../Images/89f31761bfd68ebecc3b0b4a4684786d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8oJrrFIIhDOPbXOg7zSS0g.png"/></div></div></figure><p id="687d" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在上面的示例中，我创建了REST连接，该连接指向本地网络中的REST服务(运行在主机10.0.1.127和端口8080上)。</p><blockquote class="lb lc ld"><p id="7f2e" class="jn jo kr jp b jq kl js jt ju km jw jx le kn ka kb lf ko ke kf lg kp ki kj kk ha bi translated"><em class="hh">请记住，连接代理仅汇集来自OIC的信息，OIC实例与连接代理之间没有任何连接(连接代理和OIC实例之间是单向连接)。</em></p></blockquote><p id="bf8f" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">2.<strong class="jp hi">入站集成(内部应用程序称为OIC集成)</strong></p><p id="2928" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">入站集成(使用私有IP而不是OIC实例公共IP从内部到OIC实例的流量)是更复杂的解决方案。</p><p id="9a28" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">OIC产品在2021年2月发布时宣布了新功能，我们可以在OCI内部的私有子网中的OCI API网关中部署<a class="ae kq" href="https://www.oracle.com/integration/application-integration/what-is-application-integration/" rel="noopener ugc nofollow" target="_blank">应用集成</a>。在此功能之前，有一种替代解决方案可以在VCN内部的专用子网中部署反向代理(例如，您可以使用专用OCI负载平衡器作为反向代理)。在本节中，我将讨论API网关解决方案。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lv"><img src="../Images/f49934b252d83d6728c1c715a9317ad2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZZkesbhBzimgq93nSZICA.png"/></div></div></figure><p id="d08e" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">红线表示入站集成流程</p><p id="79f8" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">要实施此解决方案，我们需要执行以下步骤:</p><ul class=""><li id="0887" class="ks kt hh jp b jq kl ju km jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">在VCN内部提供私有API网关</strong></li></ul><p id="8646" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">首先，您需要在VCN内部提供专用子网(在中心/分支架构中，在VCN分支内部提供)。</p><p id="5b91" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">导航到OCI控制台，选择开发人员服务-&gt; API管理-&gt;网关</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mm"><img src="../Images/177ab54a9026b9e91a50d87d206f465e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Oqu-3LFUe1tP5aUaFvYQVg.png"/></div></div></figure><p id="39c5" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">选择隔离专区后，输入网关名称、类型(应为专用)、隔离专区、VCN和专用子网。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mn"><img src="../Images/cfb5a551e183d912d66cef9f56fa1ae7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*epyf3K9pa2yXUY66pHSryA.png"/></div></div></figure><p id="c78e" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">填充网关名称、类型、隔离舱、VCN和子网</p><p id="f53b" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">API网关配置成功后，您可以在网关详细信息页面中找到API网关主机名和私有IP地址。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mo"><img src="../Images/597a0aeead9242a6d83cae73ddaedf60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CdE8MuGek7alRmXukEzVFQ.png"/></div></div></figure><ul class=""><li id="36a7" class="ks kt hh jp b jq kl ju km jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">将OCI地区所有服务的服务网关附加到托管API网关的VCN</strong></li></ul><p id="a858" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">因为API网关通过服务网关与OIC实例进行私有通信，所以您需要将服务网关附加到您部署网关的VCN。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mp"><img src="../Images/ab7d3e0171db2d948dad7941caf43e7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e61EcjQmMm0kdyjkIXU5Yg.png"/></div></div></figure><p id="a611" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">将服务网关连接到VCN</p><ul class=""><li id="cbf3" class="ks kt hh jp b jq kl ju km jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">将OIC实例与拥有API网关实例的OCI租户集成</strong></li></ul><p id="8479" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">您需要将OIC实例与您提供的API网关的OCI租用相集成。为此，您需要导航到OIC控制台并选择设置-&gt;集成-&gt; API管理，然后选择API网关单选按钮。最后，在OIC中填充API网关信息并保存配置。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mq"><img src="../Images/9fe6e75c3e9d23abbc52055f3043a83f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZHJFDXelWcGTLVxO29E4BQ.png"/></div></div></figure><p id="81f7" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在此页面中，您需要填充租赁OCID(从OCI控制台找到它，选择用户图标，然后选择租赁)、用户OCID(从OCI控制台找到它，选择用户图标，然后选择用户设置)、私钥、私钥密码和公钥指纹(您需要首先<a class="ae kq" href="https://docs.oracle.com/en-us/iaas/Content/Functions/Tasks/functionssetupapikey.htm" rel="noopener ugc nofollow" target="_blank">生成公钥/私钥对</a>，并导入您用于集成到OIC的用户的公钥)。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mr"><img src="../Images/d01a939523af12ca150358399b544acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aBOX1cB6duK-6YHLjD-oLw.png"/></div></div></figure><p id="642e" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">选择租赁和用户详细信息</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ms"><img src="../Images/19a2af0547e9c13c2d4ab8a1f8b3ab1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gzYjKDQz2ochXmhibDe_1Q.png"/></div></div></figure><p id="c6e0" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">OCID租赁</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mt"><img src="../Images/126ed983dec9091461abe452698090ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dlPCMg63-pGgR41Uuvh6Pg.png"/></div></div></figure><p id="2228" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">用户OCID</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mu"><img src="../Images/7de9ffbb68ee833483fea80655bfdaab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jALsNi0s6UnzG5PzwymaSQ.png"/></div></div></figure><p id="c5a7" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">为用户生成或导入公钥</p><p id="8c63" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">此外，您需要在OCI根隔离专区中创建一个策略，将api网关系列中的管理权限分配给IAM组，该IAM组包含您用于集成到OIC的用户，并将该策略附加到包含API网关实例的隔离专区。</p><p id="172e" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">政策声明:</p><pre class="li lj lk ll fd ma mb mc md aw me bi"><span id="7409" class="mf iq hh mb b fi mg mh l mi mj">Allow group &lt;&lt;IAM Group name&gt;&gt; to manage api-gateway-family in compartment &lt;&lt;Compartment Name&gt;&gt;</span></pre><p id="2aae" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">要创建策略，请导航到OIC控制台并选择身份-&gt;策略并创建新策略。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mv"><img src="../Images/2eb32d3f8fb128c2a63284d79b47ec8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g2wRJdKLRtCJNxfVdXdXOw.png"/></div></div></figure><p id="d9b4" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">创建策略以管理选定隔离专区中的API系列</p><ul class=""><li id="8514" class="ks kt hh jp b jq kl ju km jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">从OCI控制台在API网关中部署集成(仅适用于REST集成)</strong></li></ul><p id="e04e" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在您将OIC实例与OCI租户集成之后，您可以简单地在API Gateway中部署集成。为此，选择集成(仅REST触发集成)并从hamburger菜单中选择API管理。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mw"><img src="../Images/d406e83d185993000e73268dd0350ece.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oz2WmF7rs32y8Tix6v5MhA.png"/></div></div></figure><p id="8453" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">为REST集成选择API管理</p><p id="018c" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在下一页中，选择API网关隔离专区、网关实例和部署名称和路径，然后选择部署。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mx"><img src="../Images/de32fcd434553ed38a3edcc3c6184f8e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UsScFw-kaVv4KW0g_N2CcQ.png"/></div></div></figure><p id="e861" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">选择隔离专区、网关和API部署名称和路径前缀</p><p id="50fb" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在网关中成功部署API后，导航到API网关并选择deployment以查看部署的API。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es my"><img src="../Images/77c9d6ffb16e3d6f2ccd845589495146.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CHlYEjGkKqeGCv54nvg23Q.png"/></div></div></figure><p id="832d" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">然后选择deployment以查看有关API Gateway中部署的更多信息。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mw"><img src="../Images/dd59361a90ae4f3f4f1aba6d0790d9b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bed0YefrL37aDQ50RtC8Ow.png"/></div></div></figure><p id="856a" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">您可以在此页面中找到部署端点</p><p id="c29c" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">现在，您可以在内部软件中使用这个部署端点来调用OIC集成。</p><ul class=""><li id="a4bf" class="ks kt hh jp b jq kl ju km jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">在API网关中为SOAP集成手动创建部署</strong></li></ul><p id="ab79" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">目前，API网关与OIC的集成仅支持REST集成(从OIC控制台直接部署到API网关)。如果您有任何SOAP集成(集成触发连接是基于SOAP的连接)，您不会在OIC控制台中获得API管理菜单项。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mz"><img src="../Images/14d5ae5f93a78c7582ce5de0caaa7372.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yE3E54eeeXkR1qvEq7sotw.png"/></div></div></figure><p id="4b72" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">StockQuote_Int是基于SOAP的集成，你不会得到这个集成的API管理菜单项</p><p id="5cb0" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">对于这种类型的集成，您应该在API Gateway中手动创建部署。为此，导航到OCI控制台并选择API网关。然后选择“部署”选项卡并创建新部署。</p><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es na"><img src="../Images/99a33633b7319ffaeded0101e5a783df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4O_FzM_8UYqPsc_RjV80KA.png"/></div></div></figure><p id="6d0f" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">为部署填充名称和路径前缀</p><p id="4fb1" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在下一页中，选择“/”作为路径，选择“POST”作为方法，选择“HTTP”作为路由类型，并输入OIC集成URL。</p><pre class="li lj lk ll fd ma mb mc md aw me bi"><span id="fab7" class="mf iq hh mb b fi mg mh l mi mj">Integration URL: https://&lt;&lt;OIC Instance DNS&gt;&gt;:443/ic/ws/integration/v1/flows/soap/&lt;&lt;integration id&gt;&gt;/&lt;&lt;integration version&gt;&gt;</span></pre><figure class="li lj lk ll fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nb"><img src="../Images/5c006e6411f12f6f3fb3316411c8fb11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gXPHO_n0QSzuP-lpcoqY_A.png"/></div></div></figure><blockquote class="lb lc ld"><p id="b2c2" class="jn jo kr jp b jq kl js jt ju km jw jx le kn ka kb lf ko ke kf lg kp ki kj kk ha bi translated">请记住，您不能直接从OIC控制台从API Gateway中取消部署集成。为此，您需要导航到API网关部署并删除部署。</p><p id="57df" class="jn jo kr jp b jq kl js jt ju km jw jx le kn ka kb lf ko ke kf lg kp ki kj kk ha bi translated">注意—免费层用户可能会体验到其帐户所含服务的变化。</p></blockquote><h1 id="94a7" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">参考资料:</h1><ul class=""><li id="fa73" class="ks kt hh jp b jq jr ju jv jy lr kc ls kg lt kk kx ky kz la bi translated"><a class="ae kq" href="https://docs.oracle.com/en-us/iaas/Content/Network/Tasks/transitroutingoracleservices.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en-us/iaas/Content/Network/Tasks/transiroutingoracleservices . htm</a></li><li id="41ed" class="ks kt hh jp b jq nc ju nd jy ne kc nf kg ng kk kx ky kz la bi translated"><a class="ae kq" href="https://docs.oracle.com/en-us/iaas/Content/Network/Tasks/servicegateway.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en-us/iaas/Content/Network/Tasks/service gateway . htm</a></li><li id="f645" class="ks kt hh jp b jq nc ju nd jy ne kc nf kg ng kk kx ky kz la bi translated"><a class="ae kq" href="https://docs.oracle.com/en/cloud/paas/integration-cloud/integrations-user/managing-agent-groups-and-connectivity-agent.html" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en/cloud/PAAs/integration-cloud/integrations-user/managing-agent-groups-and-connectivity-agent . html</a></li><li id="c6ea" class="ks kt hh jp b jq nc ju nd jy ne kc nf kg ng kk kx ky kz la bi translated"><a class="ae kq" href="https://docs.oracle.com/en-us/iaas/Content/APIGateway/Concepts/apigatewayoverview.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en-us/iaas/Content/API gateway/Concepts/API gateway overview . htm</a></li><li id="db08" class="ks kt hh jp b jq nc ju nd jy ne kc nf kg ng kk kx ky kz la bi translated"><a class="ae kq" href="https://docs.oracle.com/en-us/iaas/Content/Functions/Tasks/functionssetupapikey.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en-us/iaas/Content/Functions/Tasks/Functions setapikey . htm</a></li></ul></div></div>    
</body>
</html>