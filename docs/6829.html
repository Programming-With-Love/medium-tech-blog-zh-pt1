<html>
<head>
<title>10 Useful Tips For Ruby On Rails Developers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ruby On Rails开发人员的10个有用技巧</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/10-useful-tips-for-ruby-on-rails-developers-56f95fe1654d?source=collection_archive---------6-----------------------#2020-03-18">https://medium.com/quick-code/10-useful-tips-for-ruby-on-rails-developers-56f95fe1654d?source=collection_archive---------6-----------------------#2020-03-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="408a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Rails是用Ruby编程语言编写的模型-视图-控制器Web框架。它最大的吸引力之一是能够快速制作基于CRUD的Web应用程序。Rails相对于其他框架的一个很大的优势是它重视约定胜于配置。如果您遵循正确的惯例，您可以避免冗长的文件配置，事情就可以正常工作了！因此，您可以花更少的时间编写枯燥的配置文件，花更多的时间关注业务逻辑。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/0cd032e05b2c1bf80cf5d57aa045aec5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*uh6OACL_BgEAGJXJ.png"/></div></div></figure><p id="6674" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在下面的概述中，我们为Ruby on Rails开发者(包括新手和专业人士)提供了<strong class="ig hi"> 10个有用的技巧、想法和资源。请在这篇文章的评论中分享你的技巧、想法和建议！</strong></p><p id="9f56" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你想深入了解Ruby On Rails，请点击此链接<a class="ae jp" href="https://onlineitguru.com/ruby-on-rails-online-training-placement.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> Ruby On Rails培训</strong> </a></p><h1 id="980c" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">1.插件节省时间</h1><p id="68af" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">Rails有一个定义良好的插件结构，使您能够轻松地在应用程序中安装和使用插件。Rails之父David Heinemeier Hansson曾经说过，他在每个Rails应用程序中使用五到六个插件。</p><p id="8e81" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有一个古老的开发人员智慧金块“最好的代码是根本没有代码。”在Rails中进行开发时，让我们如此高效的部分原因是，我们不需要编写所有代码，因为社区中的其他人已经编写了一个插件，提供了我们需要的功能。</p><p id="b01a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在Rails中安装插件有几种方法，但是最常用的是使用脚本:</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="97c1" class="ky jr hh ku b fi kz la l lb lc"># Install from a git repo<br/>script/plugin install git://github.com/mislav/will_paginate.git</span><span id="9437" class="ky jr hh ku b fi ld la l lb lc"># Install from a url<br/>script/plugin install http://topfunky.net/svn/plugins/calendar_helper</span></pre><p id="cd06" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你可以通过擅长搜索网页(尤其是万能的GitHub)来节省大量的时间和精力。找到插件的几个地方是Core Rails、Railsify和Rails插件目录。需要与现有的API集成还是使用某种标准格式的数据？需要标记、分页或其他常见的Web应用程序功能吗？有可能一些优秀的Rails或Ruby开发人员已经有了一个项目，可以让你至少完成大部分工作。</p><h1 id="4808" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">2.使用Rspec进行测试既有趣又简单</h1><p id="4a4e" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">对大多数人来说，“考试”这个词会让他们想起学校考试的可怕记忆。然而，当使用Rails时，<strong class="ig hi">自动化测试</strong>可以让您的开发体验更加愉快。虽然许多人对他们有强烈的，近乎宗教的看法，但从本质上来说，自动化测试只是你编写的小助手程序，它运行你的主代码来确保它们做正确的事情。如果做得好，测试将会改善你的工作流程，增加你对结果的信心。</p><p id="2e41" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Rails自带了一个测试框架，但是在过去的几年里，所有优秀的孩子都在使用一个叫做Rspec的替代品。Rspec最大的优势是它指定测试的语法:</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="dbc8" class="ky jr hh ku b fi kz la l lb lc">describe "My Cool library" do before do<br/>    @cool = Cool.new end</span><span id="72de" class="ky jr hh ku b fi ld la l lb lc">  it "should be full of penguins." do<br/>    @cool.get_penguins!<br/>    @cool.penguin_count.should == 10<br/>  end</span><span id="31d1" class="ky jr hh ku b fi ld la l lb lc">  it "should melt if it gets too warm"<br/>end</span></pre><p id="9a7f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Rspec语法的伟大之处在于它使用了多少英语。describe块设置上下文和其中的每个断言，它接受用于解释代码应该做什么的字符串。通常，这是最重要的阶段:你坐下来写断言，尽你所能，然后你想，“对，这段代码实际上应该做什么？”</p><p id="1a17" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因为Rspec允许您省略实现断言的块(如在第二个melt示例中)，所以您可以快速地对所有功能进行头脑风暴，然后在编写代码时回过头来实现测试。与此同时，Rspec会将这些测试视为“待定”，并在您的测试运行中给你一些提示。</p><p id="116a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除了首先帮助您编写代码之外，测试的另一个好处是，一旦您有了足够多的测试，它们会让您看到所有代码是如何相关的，从而很容易知道您最近的更改是否破坏了应用程序中的其他内容。<strong class="ig hi"> Rspec通过使用定制的生成器来创建测试和你的代码的剩余部分，使得获得良好的测试覆盖率变得很容易:</strong></p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="a56c" class="ky jr hh ku b fi kz la l lb lc">$ script/generate rpsec_scaffold MyModel</span></pre><p id="28cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦您进行了测试以确保基本功能成功运行，您就可以放心地进行更改和添加新代码，而不必担心引入不可见的错误。只要你定期运行你的测试，一旦你破坏了什么，你就会知道。正如大兵哥教我们的，知道是成功的一半！</p><h1 id="6bba" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">3.节省时间，使用耙子</h1><p id="ed23" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">项目通常不仅仅包括特定于应用程序的代码。必须创建样本数据、查询Web服务、移动文件、重写代码片段等等。抵制外壳脚本或塞进迁移或控制器的冲动。使用耙子。太棒了。</p><p id="d109" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Rake是一个用Ruby写的构建工具，和make非常相似。Rails项目已经定义了几个Rake任务；要查看这些，运行rake -T命令。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="8f6e" class="ky jr hh ku b fi kz la l lb lc">macbook$ rake -T</span><span id="436d" class="ky jr hh ku b fi ld la l lb lc">rake data:bootstrap     # load in some basic data [caution: will nuke and replcace cate...<br/>rake db:create:all      # Create all the local databases defined in config/database.yml<br/>rake db:drop         # Drops the database for the current RAILS_ENV<br/>...<br/>rake ts:run          # Stop if running, then start a Sphinx searchd daemon using Thi...<br/>rake ts:start        # Start a Sphinx searchd daemon using Thinking Sphinx's settings<br/>rake ts:stop         # Stop Sphinx using Thinking Sphinx's settings</span></pre><p id="2e01" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">添加你自己的Rake任务非常容易。在下面的例子中，您可以看到任务是有名称空间的，有描述和任务名称，允许您用Ruby编写。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="7c37" class="ky jr hh ku b fi kz la l lb lc">namespace :data do desc "load in some basic data [caution: will nuke and replcace categories, categorizations and inventory items]"<br/>  task :bootstrap =&gt; :environment do<br/>    # clean out existing:<br/>    [Category, Categorization, InventoryItem].each{|m| m.find(:all).each{|i| i.destroy}}<br/>    InventoryItem.create! :name =&gt; "Compass"<br/>    c = Category.create! :name =&gt; "Basic Apparel"</span><span id="33d9" class="ky jr hh ku b fi ld la l lb lc">    ["Men’s Heavyweight Cotton T",<br/>    "Men’s Heavyweight Polo",<br/>    "Women’s Organic Cotton Fitted T",<br/>    "Women’s Fitted Polo",<br/>    "Children’s T-Shirt",<br/>    "Jr’s Distressed Hoodie",<br/>    "Hemp Messenger Bag"].each do |name|<br/>      c.inventory_items.create! :name =&gt; name<br/>    end</span><span id="69f9" class="ky jr hh ku b fi ld la l lb lc">   ...</span><span id="4edd" class="ky jr hh ku b fi ld la l lb lc">end</span></pre><h1 id="ed00" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">4.跟踪应用程序异常</h1><p id="128a" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">例外发生了，当它们发生时，你想知道它们！你的客户不应该是那个告诉你问题已经发生的人；您应该已经意识到了这个问题，并正在努力解决它。Rails中提供异常通知已经有一段时间了。有一些异常通知插件，可以很容易得到通知。然而，一些服务，如Airbrake Bug Tracker和Get Exceptional，为您的应用程序增加了很多价值。</p><p id="f66a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这两个服务都易于安装，并提供了一个很好的UI来跟踪您的异常。你甚至可以注册一个免费账户来尝试一些东西。</p><p id="72fb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过<strong class="ig hi">集中应用程序异常</strong>，你可以看到这些异常发生的频率，它们发生在什么环境中(特定的浏览器？一个特定的位置？)，存在哪些参数以及完整的堆栈跟踪。这种数据集中化有助于您发现模式并更快地解决问题，从而带来更好的应用程序和更满意的用户。</p><h1 id="6f4e" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">5.框架和服务器与机架上的导轨混合搭配</h1><p id="0015" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">从版本2.3开始，Rails在机架顶部运行。Rack使得Ruby Web框架和服务器之间的混合和匹配成为可能。如果你使用的是支持它的框架(比如Rails、Sinatra、Camping等)，你可以选择任何支持它的服务器(Mongrel、Thin、Phusion Passenger等)。)，反之亦然。</p><p id="adb4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除了引入各种新的部署选项，这一变化还意味着Rails现在可以进入令人兴奋的机架中间件世界。因为Rack位于您的应用程序和服务器的交叉点，所以它可以直接提供各种常用功能。Rack::Cache就是一个很好的例子。</p><p id="33bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Rack::Cache为您的应用程序提供了一个<strong class="ig hi">缓存层</strong>，您只需在响应中发送正确的头就可以控制它。换句话说，您所要做的就是在机架配置文件中安装一些代码:</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="3edc" class="ky jr hh ku b fi kz la l lb lc">require 'rack/cache'</span><span id="6209" class="ky jr hh ku b fi ld la l lb lc">use Rack::Cache,<br/>  :metastore =&gt; 'file:/tmp/rack_meta_dir',<br/>  :entitystore =&gt; 'file:/tmp/rack_body_dir',<br/>  :verbose =&gt; true</span></pre><p id="1a26" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">并确保您的控制器动作发送正确的头(例如，通过设置<code class="du le lf lg ku b">request.headers[“Cache-Control”]</code>)和Bam！，你有缓存。</p><h1 id="837f" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">6.轻松的数据转储</h1><p id="3c90" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">您经常需要将数据从生产环境转移到开发环境，或者从开发环境转移到您的本地，或者从您的本地转移到另一个开发人员的本地。我们反复使用的一个插件是Yaml_db。这个漂亮的小插件使您能够通过发出Rake命令来<strong class="ig hi">转储或加载数据。数据保存在db/data.yml中的一个yaml文件中，如果您需要检查数据，这是非常容易移植和阅读的。</strong></p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="fb12" class="ky jr hh ku b fi kz la l lb lc">rake db:data:dump</span><span id="4fa6" class="ky jr hh ku b fi ld la l lb lc">example data found in db/data.yml</span><span id="02df" class="ky jr hh ku b fi ld la l lb lc">---<br/>campaigns:<br/>  columns:<br/>  - id<br/>  - client_id<br/>  - name<br/>  - created_at<br/>  - updated_at<br/>  - token records:<br/>  - - "1"<br/>    - "1"<br/>    - First push<br/>    - 2008-11-03 18:23:53<br/>    - 2008-11-03 18:23:53<br/>    - 3f2523f6a665<br/>  - - "2"<br/>    - "2"<br/>    - First push<br/>    - 2008-11-03 18:26:57<br/>    - 2008-11-03 18:26:57<br/>    - 9ee8bc427d94</span></pre><h1 id="6602" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">7.把你的常数放在一个地方</h1><p id="2a14" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">所有的应用程序都有常量和变量，它们是用不变的数据定义的，比如应用程序的名称、标语、关键选项的值等等。我们使用<strong class="ig hi"> Rails初始化器特性</strong>来定义一个<code class="du le lf lg ku b">config/initializers/site_config.rb</code>来存放这些常量。通过使用这个约定，项目中的所有开发人员都知道在哪里可以找到这些常量，并且可以快速地做出更改。</p><p id="0249" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">许多人对何时将常量放在<code class="du le lf lg ku b">site_config.rb</code>中而不是放在使用它的类中有疑问。对于只在一个类中使用的常量，我们建议将其放在那个类中。但是，如果常量在多个位置使用，就把它放在site_config.rb中。</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="8d2e" class="ky jr hh ku b fi kz la l lb lc"># File config/initializers/site_config.rb</span><span id="211f" class="ky jr hh ku b fi ld la l lb lc">REPORT_RECIPIENT = 'jenn@scg.com'<br/>REPORT_ADMIN = 'michael@scg.com'</span></pre><h1 id="2b98" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">8.用于处理代码的控制台</h1><p id="e43b" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">有时你可能对一些代码感到好奇。这样行得通吗？产量是多少？我能改变什么？Rails附带了一个很棒的工具，叫做控制台。通过运行脚本/控制台，你将进入一个<strong class="ig hi">交互环境，在这里你可以访问你的Rails代码</strong>，就像应用程序正在运行一样。</p><p id="8bbb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这种环境非常有帮助。它经常在生产环境中使用，以便在不登录数据库的情况下快速查看数据。要在生产环境中实现这一点，请使用脚本/控制台RAILS_ENV=production:</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="16cc" class="ky jr hh ku b fi kz la l lb lc">macbook$ ./script/console<br/>Loading development environment (Rails 2.1.1)<br/>&gt;&gt; a = Album.find(:first)<br/>=&gt; #<br/>&gt;&gt;</span></pre><h1 id="b818" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">9.丑陋的景色让你沮丧？试试Haml。</h1><p id="2ce7" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">视图是Rails应用程序生成访问者实际看到和使用的HTML页面的方式。默认情况下，Rails使用ERb模板系统允许您在标记中嵌入Ruby，这样您就可以根据需要插入数据。然而，Rails的最新版本允许你选择模板语言，现在Ruby网络上已经在热烈讨论一个叫做Haml的替代系统。</p><p id="6bfb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Haml是作为“标记俳句”进行营销的。它的<strong class="ig hi"> CSS启发的语法让你专注于数据的语义</strong>，而不是担心使用ERb和HTML带来的所有尖括号。</p><p id="b669" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作为比较，这里是标准ERb中的一点标记:</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="d1c5" class="ky jr hh ku b fi kz la l lb lc">&lt;%= print_date %&gt;<br/>&lt;%= current_user.address %&gt;</span><span id="210b" class="ky jr hh ku b fi ld la l lb lc">&lt;%= current_user.email %&gt;<br/>&lt;%= h current_user.bio %&gt;</span></pre><p id="71a6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是Haml中的等价形式:</p><pre class="je jf jg jh fd kt ku kv kw aw kx bi"><span id="32c4" class="ky jr hh ku b fi kz la l lb lc">#profile<br/>  .left.column<br/>    #date= print_date<br/>    #address= current_user.address<br/>  .right_column<br/>    #email= current_user.email<br/>    #bio= h(current_user.bio)</span></pre><p id="2ef2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Haml并不适合所有人，许多人会发现这种语法很奇怪。但是如果你重视简洁并且精通CSS，Haml可能是你的不二之选。</p><h1 id="37a8" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">10.知道在哪里可以看到Rails中发生的事情</h1><p id="e62a" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">Rails和Ruby都有<strong class="ig hi">大而活跃的社区</strong>，不断产生变化、改进和新项目。试图跟上所有的活动可能是令人畏惧的，但是如果你想从社区的最佳工作中受益并继续增加你的Rails和Ruby知识，这是必不可少的。</p></div></div>    
</body>
</html>