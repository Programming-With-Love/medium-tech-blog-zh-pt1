<html>
<head>
<title>Dagger and Hilt navigation support in Android Studio</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android Studio中的匕首和刀柄导航支持</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/dagger-navigation-support-in-android-studio-49aa5d149ec9?source=collection_archive---------0-----------------------#2020-04-23">https://medium.com/androiddevelopers/dagger-navigation-support-in-android-studio-49aa5d149ec9?source=collection_archive---------0-----------------------#2020-04-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/489cd7cf85281136cc35f061580a6a32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fsiieKz_0I_MbqYwhXdsrA.png"/></div></div></figure><div class=""/><blockquote class="ip iq ir"><p id="d58c" class="is it iu iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">最后更新:2020年7月23日</p></blockquote><p id="6b0b" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated">你有没有在一个项目中迷失过，试图找出匕首或刀柄依赖是从哪里提供的？它来自一个<code class="du ju jv jw jx b">@Inject</code>构造函数吗？或者也许来自一种<code class="du ju jv jw jx b">@Binds</code>或<code class="du ju jv jw jx b">@Provides</code>方法？它有限定词吗？这不是一件容易的事…</p><p id="dc80" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated">🤔如果你只需点击一下就能知道更多的<em class="iu">和</em>会怎么样？🎯不要再问了！</p><p id="d510" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated">最新版本的Android Studio 4.1(目前测试版可用)带有<strong class="iv ht">新的gutter图标，允许您轻松地在Dagger相关代码</strong>之间导航:依赖生产者和消费者、组件、子组件和模块！同样，您可以在<strong class="iv ht"> <em class="iu">查找用法</em> </strong>中找到相同的信息。</p><p id="2fcf" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated"><strong class="iv ht">手柄支持</strong>已经加入Android Studio 4.2(目前在Canary)。除了上面列出的Dagger特性，你还可以从<strong class="iv ht">入口点</strong>的简单导航中获益。</p><figure class="jz ka kb kc fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es jy"><img src="../Images/7d8406b6269fe624f6f012fdbf35bbc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JHEvBK_hWDPUXYWz"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx"><em class="kh">Easy Dagger and Hilt dependency graph navigation in Android Studio</em></figcaption></figure><p id="865d" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated">如你所见，导航你的Android应用程序的匕首图从未如此简单！通过Android Studio中的新支持，从<em class="iu">确切地</em>知道依赖项将来自哪个提供者方法只需<strong class="iv ht">一次点击</strong>。</p><h1 id="c563" class="ki kj hs bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">在活动</h1><p id="ff68" class="pw-post-body-paragraph is it hs iv b iw lg iy iz ja lh jc jd jr li jg jh js lj jk jl jt lk jo jp jq ha bi translated">从Android Studio 4.1 Canary 7开始，您可以在使用匕首或刀柄的项目中看到一个新的檐槽图标:</p><figure class="jz ka kb kc fd hj er es paragraph-image"><div class="er es ll"><img src="../Images/83b79361c6bf693b352c5feb2843e75c.png" data-original-src="https://miro.medium.com/v2/resize:fit:240/0*dhZA0On3cWIpZmGx"/></div><figcaption class="kd ke et er es kf kg bd b be z dx">New Dagger and Hilt gutter icons in Android Studio</figcaption></figure><p id="3a52" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated">这些动作的行为如下:</p><ul class=""><li id="e92e" class="lm ln hs iv b iw ix ja jb jr lo js lp jt lq jq lr ls lt lu bi translated">带有向上箭头的图标-&gt;提供类型的位置(即依赖项的来源)</li><li id="f2b0" class="lm ln hs iv b iw lv ja lw jr lx js ly jt lz jq lr ls lt lu bi translated">树形图标-&gt;其中类型用作依赖项</li></ul><p id="3f42" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated">让我们看一些使用architecture-samplesGitHub示例的<a class="ae ma" href="https://github.com/android/architecture-samples/tree/dev-dagger" rel="noopener ugc nofollow" target="_blank"> Dagger分支(</a> <code class="du ju jv jw jx b"><a class="ae ma" href="https://github.com/android/architecture-samples/tree/dev-dagger" rel="noopener ugc nofollow" target="_blank">dev-dagger</a></code> <a class="ae ma" href="https://github.com/android/architecture-samples/tree/dev-dagger" rel="noopener ugc nofollow" target="_blank">)的新功能的例子。</a></p><h2 id="4ef0" class="mb kj hs bd kk mc md me ko mf mg mh ks jr mi mj kw js mk ml la jt mm mn le mo bi translated">了解依赖性来自哪里</h2><p id="e8f9" class="pw-post-body-paragraph is it hs iv b iw lg iy iz ja lh jc jd jr li jg jh js lj jk jl jt lk jo jp jq ha bi translated">给定一个可以由Dagger注入的类，如果您点击带有依赖项向上箭头的gutter图标，您将导航到告诉Dagger如何提供该类型的方法。</p><p id="66bc" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated">在下面的例子中，<code class="du ju jv jw jx b">TasksViewModel</code>依赖于<code class="du ju jv jw jx b">TasksRepository</code>。点击gutter图标会将您带到提供<code class="du ju jv jw jx b">TasksRepository</code>的<code class="du ju jv jw jx b">AppModuleBinds</code>中的<code class="du ju jv jw jx b">@Binds</code>方法:</p><figure class="jz ka kb kc fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mp"><img src="../Images/e0fe998f547d983c0e87c8a398123b05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CrpeO5bSreKAuEP-"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx">Know where a dependency is coming from</figcaption></figure><h2 id="963e" class="mb kj hs bd kk mc md me ko mf mg mh ks jr mi mj kw js mk ml la jt mm mn le mo bi translated">也适用于限定词！</h2><p id="0585" class="pw-post-body-paragraph is it hs iv b iw lg iy iz ja lh jc jd jr li jg jh js lj jk jl jt lk jo jp jq ha bi translated">鉴于上述情况，如果使用限定符提供依赖关系，它将带您到<em class="iu">确切地说是</em>那个提供者方法！</p><p id="4b00" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated"><code class="du ju jv jw jx b">DefaultTasksRepository</code>依赖于带有限定符的<code class="du ju jv jw jx b">TasksDataSource</code>。点击gutter图标会把你带到<code class="du ju jv jw jx b">AppModule</code>中为该类型提供限定符的方法:</p><figure class="jz ka kb kc fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mq"><img src="../Images/ec1dc65e804ad78a8e28a061729d3176.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*YQ9XqoEleLpJQgxR"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx">It also works with qualifiers!</figcaption></figure><h2 id="f729" class="mb kj hs bd kk mc md me ko mf mg mh ks jr mi mj kw js mk ml la jt mm mn le mo bi translated">这种类型在哪里被用作依赖项？</h2><p id="e0b7" class="pw-post-body-paragraph is it hs iv b iw lg iy iz ja lh jc jd jr li jg jh js lj jk jl jt lk jo jp jq ha bi translated">当您有一个方法告诉Dagger如何提供一个依赖项时，您可以单击带有向下箭头的gutter图标来导航到使用该依赖项的位置。如果该依赖关系由多个使用者使用，您可以从列表中选择要导航到的使用者。</p><p id="f70a" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated">在我们的项目中，<code class="du ju jv jw jx b">DefaultTasksRepository</code>被不同的<code class="du ju jv jw jx b">ViewModel</code>使用，是哪些？您可以通过点击提供者方法的gutter图标(在本例中为<code class="du ju jv jw jx b">@Binds</code>)来了解它:</p><figure class="jz ka kb kc fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mr"><img src="../Images/e05a626a6a614ad62eec723923b0b22f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LgNet3Ib6SPQCjBR"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx">Know where a type is used as a dependency</figcaption></figure><h2 id="f341" class="mb kj hs bd kk mc md me ko mf mg mh ks jr mi mj kw js mk ml la jt mm mn le mo bi translated">刀柄入口点</h2><p id="cc46" class="pw-post-body-paragraph is it hs iv b iw lg iy iz ja lh jc jd jr li jg jh js lj jk jl jt lk jo jp jq ha bi translated">当你在一个<a class="ae ma" href="https://developer.android.com/training/dependency-injection/hilt-android#not-supported" rel="noopener ugc nofollow" target="_blank">句柄入口点</a>时，gutter动作帮助你导航到一个依赖的来源。为了展示这个特性，我们将使用<a class="ae ma" href="https://codelabs.developers.google.com/codelabs/android-dagger-to-hilt/" rel="noopener ugc nofollow" target="_blank">移植匕首到刀柄代码实验室</a>的<code class="du ju jv jw jx b"><a class="ae ma" href="https://github.com/googlecodelabs/android-dagger-to-hilt/tree/interop" rel="noopener ugc nofollow" target="_blank">interop</a></code>分支。</p><figure class="jz ka kb kc fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mr"><img src="../Images/96c9521470eb9893b970aabb982ac6a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JPZhuj40GQ2RmMxU"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx"><em class="kh">Navigate where a type comes from at an entry point</em></figcaption></figure><h1 id="6db5" class="ki kj hs bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">查找用法</h1><p id="e59c" class="pw-post-body-paragraph is it hs iv b iw lg iy iz ja lh jc jd jr li jg jh js lj jk jl jt lk jo jp jq ha bi translated">你可以在Android Studio的<em class="iu">查找用法</em>功能中找到你的匕首/刀柄代码之间的相同关系。</p><p id="cb6d" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated">例如，如果您右键单击<code class="du ju jv jw jx b">AppModuleBinds</code>类的<code class="du ju jv jw jx b">bindRepository</code>并选择<strong class="iv ht"> <em class="iu">查找用法</em> </strong>，您将看到类似如下的内容:</p><figure class="jz ka kb kc fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ms"><img src="../Images/f3092ae4abe7b45f1100fc5f27cbac6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kX2rxJOHwDHGVFmR"/></div></div><figcaption class="kd ke et er es kf kg bd b be z dx"><em class="kh">Find usages about bindRepository</em></figcaption></figure></div><div class="ab cl mt mu go mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ha hb hc hd he"><p id="0960" class="pw-post-body-paragraph is it hs iv b iw ix iy iz ja jb jc jd jr jf jg jh js jj jk jl jt jn jo jp jq ha bi translated">你还在等什么，来试试吧？请在您的项目中使用它，并在这个<a class="ae ma" href="https://issuetracker.google.com/issues/new?component=192708&amp;template=840533&amp;title=%5BPlease+title+your+report%5D+%23dagger-support" rel="noopener ugc nofollow" target="_blank">链接</a>中给我们反馈。希望你喜欢它！</p></div></div>    
</body>
</html>