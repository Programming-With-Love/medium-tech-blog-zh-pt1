<html>
<head>
<title>Run Oracle Database in Docker using prebaked image from Oracle Container Registry–a two minute guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Oracle Container Registry中的预烘焙映像在Docker中运行Oracle数据库——两分钟指南</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/run-oracle-database-in-docker-using-prebaked-image-from-oracle-container-registry-a-two-minute-395b1467e44c?source=collection_archive---------0-----------------------#2017-11-18">https://medium.com/oracledevs/run-oracle-database-in-docker-using-prebaked-image-from-oracle-container-registry-a-two-minute-395b1467e44c?source=collection_archive---------0-----------------------#2017-11-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/4e15fa0ecb080e819b7ec0c5f695e827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/0*3iZTxTrMmYf2lpNZ."/></div></figure><p id="07cd" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">本文将展示如何使用Oracle Continer Registry上的预烘焙映像在Docker主机上运行Oracle数据库。我希望运行完整的12.2.0.1 Oracle企业数据库只需很少的手动工作——只需拉出并运行Docker映像。一旦它运行，我得到了Docker通常的好处，如干净的环境管理，从其他容器链接，快速停止和启动，在容器内运行脚本等。</p><p id="ecce" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">容器的最低要求是8GB磁盘空间和2GB内存。有一个需要较少资源的slim替代方案:EE的slim ( <code class="du jj jk jl jm b">12.2.0.1-slim</code>)版本不支持Analytics、Oracle R、Oracle Label Security、Oracle Text、Oracle Application Express和Oracle DataVault。我还不确定这将削减多少资源需求。</p><p id="91e0" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我最近的文章<a class="ae jn" href="https://technology.amis.nl/2017/11/17/quick-introduction-to-oracle-container-registry-running-one-of-oracles-prebaked-images/" rel="noopener ugc nofollow" target="_blank">Oracle Container Registry快速介绍——运行Oracle的预烘焙映像之一</a>解释了开始使用Oracle Container Registry的第一步，包括如何注册和接受单个映像的条款和条件。</p><p id="b0c5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">一旦解决了这个问题，我们就可以开始运行数据库了。</p><p id="10db" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这些步骤是:</p><ol class=""><li id="a2f8" class="jo jp hh in b io ip is it iw jq ja jr je js ji jt ju jv jw bi translated">启动docker</li><li id="d86d" class="jo jp hh in b io jx is jy iw jz ja ka je kb ji jt ju jv jw bi translated">登录到Oracle容器注册表</li><li id="3b26" class="jo jp hh in b io jx is jy iw jz ja ka je kb ji jt ju jv jw bi translated">Oracle数据库的拉映像——在本文中，我将使用企业版数据库映像</li><li id="0c59" class="jo jp hh in b io jx is jy iw jz ja ka je kb ji jt ju jv jw bi translated">基于该映像运行docker容器</li><li id="b5d1" class="jo jp hh in b io jx is jy iw jz ja ka je kb ji jt ju jv jw bi translated">开始与数据库交互，例如从SQL或SQL Developer。</li></ol><p id="1038" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">工作方面，会占用你不到两分钟的时间。数据库运行之前的时间主要由下载映像所需的时间决定。之后，运行容器只需要几十秒钟。</p><p id="d6dd" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">Oracle数据库映像发布在容器注册网站上:</p><figure class="kd ke kf kg fd ii er es paragraph-image"><div class="er es kc"><img src="../Images/7eb90ec4fc661572c58f6d373024e1bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/0*Co4auWtcFm6MA4X4."/></div></figure><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/24abac697db4eb21a31906a0886d5384.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*hhfqBB3SUYpL1ZA9."/></div></div></figure><figure class="kd ke kf kg fd ii er es paragraph-image"><div class="er es km"><img src="../Images/b392c36db363c456a7640707f22e7919.png" data-original-src="https://miro.medium.com/v2/resize:fit:1156/0*ukEy_hyyYmIkJynk."/></div></figure><p id="1e5b" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">将右上角的docker pull命令复制到剪贴板。记住docker run命令来运行数据库映像也是值得的。</p><p id="7c97" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">请注意，此网页包含更多有用的信息:</p><ul class=""><li id="863f" class="jo jp hh in b io ip is it iw jq ja jr je js ji kn ju jv jw bi translated">如何从容器中运行SQL脚本</li><li id="1fd1" class="jo jp hh in b io jx is jy iw jz ja ka je kb ji kn ju jv jw bi translated">如何在容器外部公开数据库[端口]</li><li id="bdbd" class="jo jp hh in b io jx is jy iw jz ja ka je kb ji kn ju jv jw bi translated">如何指定SID(默认为ORCLCDB)、PDB(默认为ORCLPDB1)、域(默认为localdomain)和分配的内存(默认为2 GB)</li><li id="6692" class="jo jp hh in b io jx is jy iw jz ja ka je kb ji kn ju jv jw bi translated">如何更改系统密码(默认为Oradoc_db1)</li><li id="22d4" class="jo jp hh in b io jx is jy iw jz ja ka je kb ji kn ju jv jw bi translated">如何利用数据库容器外部的卷来存储数据文件、重做日志、审计日志、预警日志和跟踪文件</li><li id="18d7" class="jo jp hh in b io jx is jy iw jz ja ka je kb ji kn ju jv jw bi translated">如何针对一组现有的数据库文件运行数据库服务器映像</li></ul><h1 id="3b5b" class="ko kp hh bd kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll bi translated">让我们运行一个数据库</h1><p id="8996" class="pw-post-body-paragraph il im hh in b io lm iq ir is ln iu iv iw lo iy iz ja lp jc jd je lq jg jh ji ha bi translated">启动Docker后(在我的笔记本电脑上，我正在使用Docker工具箱中的Docker快速启动终端)，使用您的Oracle帐户登录到容器注册中心。</p><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/30c625e8b43770e735662ed8bd5aed2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ik3r6wOLbngB2pZA."/></div></div></figure><p id="e1e4" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">然后使用以下命令提取数据库映像</p><blockquote class="lr ls lt"><p id="4d29" class="il im lu in b io ip iq ir is it iu iv lv ix iy iz lw jb jc jd lx jf jg jh ji ha bi translated"><em class="hh">码头工人拉container-registry.oracle.com/database/enterprise</em></p></blockquote><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/81efef41f01892fef2fe34836734ec69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KAVPnwFjqcAk7YWN."/></div></div></figure><p id="df30" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">07:09开始拉动</p><p id="88ea" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">10:28开始提取</p><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/a7858bb1abe50192190f8429fab494e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*yG7vsCP_iIJvKGYK."/></div></div></figure><p id="fca5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">10.30图像可用，现成容器关闭</p><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/2603965155e3c5926aaa7930a7fc0639.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*g9ttF6lor6_QJ_pc."/></div></div></figure><p id="48d2" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">下载花了三个半小时。那段时间我一直在做事情，所以没有浪费时间。</p><p id="c540" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">完成提取后，图像被添加到Docker图像的本地缓存中。我现在可以运行数据库了。</p><blockquote class="lr ls lt"><p id="f0df" class="il im lu in b io ip iq ir is it iu iv lv ix iy iz lw jb jc jd lx jf jg jh ji ha bi translated">【container-registry.oracle.com/database/enterprise:12.2.0.1 T2】</p></blockquote><p id="2895" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">值ORA12201_1是容器的自选名称。</p><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/11d7dd0c265c621fab1b56a22a627c7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DqPQX8TEPUW7nroe."/></div></div></figure><p id="5d63" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这里-P表示端口可以由docker选择。可以通过执行以下命令来发现映射的端口</p><blockquote class="lr ls lt"><p id="47fb" class="il im lu in b io ip iq ir is it iu iv lv ix iy iz lw jb jc jd lx jf jg jh ji ha bi translated"><em class="hh"> docker port ORA12201_1 </em></p></blockquote><figure class="kd ke kf kg fd ii er es paragraph-image"><div class="er es ly"><img src="../Images/41a58530fd379b964b4c1ec9cc23fdd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:482/0*O0Y5FvvYJu7kH-jj."/></div></figure><p id="a9d5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">几分钟后—我不确定具体需要多长时间—容器状态正常:</p><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/ad454afc5eff2c865f3834fd8ae51a84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TcoZ8ncsHa8msBXk."/></div></div></figure><p id="4a53" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">当容器状态为<em class="lu">Healthy</em>时，可以通过在容器内执行sqlplus来连接数据库服务器</p><blockquote class="lr ls lt"><p id="f880" class="il im lu in b io ip iq ir is it iu iv lv ix iy iz lw jb jc jd lx jf jg jh ji ha bi translated"><em class="hh">docker exec-it ora 12201 _ 1 bash-c " source/home/Oracle/。bashrcsqlplus /nolog" </em></p></blockquote><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/a32a74b15b8993848faac52e0a55e28e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JDIwZscVt0yIbrrp."/></div></div></figure><figure class="kd ke kf kg fd ii er es paragraph-image"><div class="er es lz"><img src="../Images/77efec9ff6a6ca00cc2624641c7acea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/0*XjqQsSSIDpvccw3S."/></div></figure><p id="1344" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">除了从容器内部连接到数据库——我们还可以把运行数据库的容器看作一个在端口32769公开数据库内部端口1521的后台程序。并且可以以常规方式使用任何能够与数据库通信的工具——前提是我们还拥有Docker主机的IP地址，如果不是从该机器本身进行连接的话:</p><figure class="kd ke kf kg fd ii er es paragraph-image"><div class="er es ma"><img src="../Images/e16112475f0c45c9dfafd051a1e48dc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/0*VqarNN6XECt9UqGV."/></div></figure><p id="b2c5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在SQL Developer中创建数据库连接的过程如下:</p><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/5483ae4c8283dc2089647024621d62e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3-VwLjK87edO3SRR."/></div></div></figure><p id="2b4a" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">使用SYS/Oradoc_db1作为凭证，Docker主机IP地址作为主机名，端口由Docker映射到容器中的端口1521，在本例中为32769。服务名由PDB名和域名组成:ORCLPDB1.localdomain</p><p id="bffe" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">一个示例查询:</p><figure class="kd ke kf kg fd ii er es paragraph-image"><div class="er es mb"><img src="../Images/efbd685e0596ac3e7c220cdc991d130c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1136/0*nGD8VGJ4CFApZXCF."/></div></figure><p id="a754" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">使用SQL连接是类似的:</p><blockquote class="lr ls lt"><p id="5307" class="il im lu in b io ip iq ir is it iu iv lv ix iy iz lw jb jc jd lx jf jg jh ji ha bi translated"><em class="hh">SQL sys/Oradoc _ db1 @ 192 . 168 . 99 . 100:32769/orclpdb 1 . local domain as SYSDBA</em></p></blockquote><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/ecba80cc95cca4f065497ec83dd49dd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*bJLIHbWZV4DwyK7n."/></div></div></figure><p id="8420" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">要停止容器和数据库:</p><blockquote class="lr ls lt"><p id="ab4b" class="il im lu in b io ip iq ir is it iu iv lv ix iy iz lw jb jc jd lx jf jg jh ji ha bi translated"><em class="hh">停靠站62eb </em></p></blockquote><p id="cdb4" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">干净利落地停下来需要几秒钟。</p><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/35be06c24cbeb7199e319b840b0986ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Xhr1ga29RPUmc0cH."/></div></div></figure><p id="269d" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在数据库启动并运行之前，重新启动大约需要1分钟:</p><figure class="kd ke kf kg fd ii er es paragraph-image"><div class="er es mc"><img src="../Images/e1738f3c0cefc812be22e104262c4c2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/0*0wtTc5FEt6d4qRJU."/></div></figure><figure class="kd ke kf kg fd ii er es paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="er es kh"><img src="../Images/eef6ba43dff83b2cbe7c98c94f8f54c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fZzg4CF4hwPHN3PY."/></div></div></figure><p id="6348" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">注意:使用这种基本方法，所有数据库文件都是在容器的文件系统中创建的。并且不能在别处获得，也不能在容器移除后存活。处理这些文件的更好方法是通过安装用于存储文件的主机文件夹或通过Docker卷。</p><p id="bb96" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><em class="lu">原载于2017年11月18日</em><a class="ae jn" href="https://technology.amis.nl/2017/11/18/run-oracle-database-in-docker-using-prebaked-image-from-oracle-container-registry-a-two-minute-guide/" rel="noopener ugc nofollow" target="_blank"><em class="lu">technology . amis . nl</em></a><em class="lu">。</em></p></div></div>    
</body>
</html>