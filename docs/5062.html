<html>
<head>
<title>Hunting bugs in the Mendix Marketplace</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在门迪克斯市场猎捕虫子</h1>
<blockquote>原文：<a href="https://medium.com/mendix/hunting-bugs-in-the-mendix-app-store-913fc9dc8eb4?source=collection_archive---------0-----------------------#2020-10-17">https://medium.com/mendix/hunting-bugs-in-the-mendix-app-store-913fc9dc8eb4?source=collection_archive---------0-----------------------#2020-10-17</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/c1c1f2b5cb9af21f24960c1f0e451abd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ywSBv23W5ni0AfZYaGSLwQ.png"/></div></div></figure><div class=""/><p id="fdc8" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><em class="jz">*这里提到的所有错误，在这篇文章发表之前，已经与出版商进行了沟通，许多问题已经得到解决。</em></p><p id="4feb" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">作为一个有趣的小练习，我从Mendix应用商店下载了一些流行的模块，并使用自动代码审查程序(简称ACR)进行了审查。不用太担心命名约定或代码可维护性，重点只是这些模块中潜在的bug。</p><p id="275d" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">目标<strong class="bd ka">不是批评</strong>app store小工具的质量，<strong class="bd ka">而是展示代码审查员</strong>发现bug的能力，同时强调这些模块中的问题，为了整个社区的利益，这些问题应该得到解决。</p><p id="51ab" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">让我们从一个愚蠢的错误开始。</p><h2 id="15d9" class="kb kc if bd kd ke kf kg kh ki kj kk kl jm km kn ko jq kp kq kr ju ks kt ku kv dt translated">规则:<a class="ae kw" href="https://sdf-docs.mansystems.com/docs/acr-rules/reliability/reassignedmembers/" rel="noopener ugc nofollow" target="_blank">不应在创建/更改对象</a>中重新分配属性</h2><p id="0eb5" class="pw-post-body-paragraph jc jd if bd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hn dt translated"><strong class="bd ka">模块</strong>:MxModelReflection<br/><strong class="bd ka">元素</strong>:IVK _重新计算大小。ChangeObjectAction<br/>T18】原因:以下成员被覆盖:CalculatedSizeInBytes</p><figure class="ld le lf lg fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lc"><img src="../Images/79512202f7ca7bd733d6a848d668ea4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OwfjBu_P7Guph0tV"/></div></div></figure><p id="24b8" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">解决方案:第二个属性应该是<code class="eh lh li lj lk b">CalculatedSizeInKiloBytes</code>。</p><p id="dbe9" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><strong class="bd ka">模块</strong>:MxModelReflection<br/><strong class="bd ka">元素</strong> : BDe_MxObjectType。delete action<br/>T26】原因:Microflow ' MxModelReflection。“BDe_MxObjectType”在循环中有delete。</p><figure class="ld le lf lg fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ll"><img src="../Images/f77e1627d6bce10c51f69e4da85dacf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*E-MeomOo2J29oOy1"/></div></div></figure><p id="fc8b" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">解决方案:所有要删除的对象都应该放在一个列表中，并在循环之外删除。</p><p id="87e1" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><strong class="bd ka">模块:</strong>xls report<br/>T31】元素: SF_Static_Validate。exclusive split<br/>T34】原因:同一个动作在一个流程中使用了多次。</p><figure class="ld le lf lg fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lm"><img src="../Images/b7ed5baf7429e5cdb83868af6da3440d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EKlAYx5IN30TLoBj"/></div></div></figure><p id="9c88" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">解决方案:检查应该是行而不是列。</p><p id="1325" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><strong class="bd ka">模块:</strong>加密<br/> <strong class="bd ka">元素:</strong> MB_OpenCertificateDetails。show page action<br/>T42】原因:同一个动作在一个流程中被多次使用。</p><figure class="ld le lf lg fq hw fe ff paragraph-image"><div class="fe ff ln"><img src="../Images/66fd28ae8fe14afc930529aed0b3043e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/0*6aGb1Kz7OPYhiBVY"/></div></figure><p id="933a" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">解决方法:页面要改成<code class="eh lh li lj lk b">PrivateKey_NewEdit</code>。</p><p id="6d83" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><strong class="bd ka">模块</strong> : EmailTemplate <br/> <strong class="bd ka">元素:</strong>IVK _发送邮件。微流程动作<br/> <strong class="bd ka">原因:</strong>同一个动作在一个流程中被多次使用。</p><figure class="ld le lf lg fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lo"><img src="../Images/c585d64806906cf547081ec34687b7bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eNcSEnhkQX8attzI"/></div></div></figure><p id="3c54" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">解决方法:应该用<code class="eh lh li lj lk b">$NewEmail/ErrorMessage</code>代替<code class="eh lh li lj lk b">$latestError/Message</code>。</p><p id="2575" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><strong class="bd ka">模块:</strong>forgot password<br/>T55】元素:MB _ step 2 _ SendConfirmationEmail。exclusive split<br/>T58】原因:同一个动作在一个流程中使用了多次。</p><figure class="ld le lf lg fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lp"><img src="../Images/530f35c9775170b427c016f5a3f1ac84.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*amXHtBaE6NHgIKuy"/></div></div></figure><p id="f28c" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">解决方法:第二次检查没有必要，只能返回true。</p><h2 id="08ff" class="kb kc if bd kd ke kf kg kh ki kj kk kl jm km kn ko jq kp kq kr ju ks kt ku kv dt translated">规则:<a class="ae kw" href="https://sdf-docs.mansystems.com/docs/acr-rules/reliability/webservicenotimeout/" rel="noopener ugc nofollow" target="_blank"> REST/Web服务应该有一个超时</a></h2><p id="7316" class="pw-post-body-paragraph jc jd if bd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hn dt translated"><strong class="bd ka">模块:</strong>门迪克索<br/> <strong class="bd ka">元素:</strong> SUB_RefreshTokens。RestCallAction <br/> <strong class="bd ka">原因:</strong>动作没有自定义请求超时。</p><figure class="ld le lf lg fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lq"><img src="../Images/df56340f2889415845041b668df29499.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CVEqRdVUE9QZJ6Vh"/></div></div></figure><p id="33be" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">解决方法:什么都不做。现在是2020年，互联网是可靠的。开玩笑的。</p><p id="1430" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><strong class="bd ka">模块</strong>:push notifications<br/><strong class="bd ka">元素</strong>:sendfcmessage。RestCallAction(和其他在同一个微流中)<br/> <strong class="bd ka">原因:</strong>动作没有自定义请求超时。</p><figure class="ld le lf lg fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lr"><img src="../Images/0f7be7701db65ea5d8109d4b4f424b9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*sCWKzUDfATQpz9NT"/></div></div></figure><p id="fa26" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">解决方案:不要在家里尝试！</p><h2 id="3a8d" class="kb kc if bd kd ke kf kg kh ki kj kk kl jm km kn ko jq kp kq kr ju ks kt ku kv dt translated">规则:<a class="ae kw" href="https://sdf-docs.mansystems.com/docs/acr-rules/reliability/hourformat/" rel="noopener ugc nofollow" target="_blank">在解析/格式化日期时间函数</a>中应正确指定小时格式</h2><p id="7431" class="pw-post-body-paragraph jc jd if bd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hn dt translated"><strong class="bd ka">模块</strong>:DocumentGenerationForMendix<br/>元素:SF _ template configuration _ Export。CreateObjectAction.Name <strong class="bd ka">原因:</strong>函数' format datetime([% current datetime %]，' yyyyMMdd-hhmm ')'未正确格式化小时。</p><figure class="ld le lf lg fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ls"><img src="../Images/554c9d4482041514305baae23eb01c1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*TqIImCHY6VvFmFY9"/></div></div></figure><p id="0069" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">解决方案:应该是<code class="eh lh li lj lk b">formatDateTime([%CurrentDateTime%], 'yyyyMMdd-HHmm')</code></p><p id="7568" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">我希望你喜欢阅读这篇文章，并希望它能帮助你构建更好的应用。</p><h1 id="bc2e" class="lt kc if bd kd lu lv lw kh lx ly lz kl ma mb mc ko md me mf kr mg mh mi ku mj dt translated">Mendix的自动代码审查程序</h1><p id="2191" class="pw-post-body-paragraph jc jd if bd b je kx jg jh ji ky jk jl jm kz jo jp jq la js jt ju lb jw jx jy hn dt translated">Mendix的自动代码审查程序检查超过150个不同类别的规则，例如<em class="jz">安全性</em>、<em class="jz">性能</em>和<em class="jz">可维护性</em>。其中有<a class="ae kw" href="https://sdf-docs.mansystems.com/docs/acr-rules/reliability/" rel="noopener ugc nofollow" target="_blank"> 40 <em class="jz">可靠性</em>规则</a>它们的目标是在你的应用程序中发现如上所述的错误。</p><p id="0412" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">不要等待，免费注册，直接体验自动化代码审查的力量:<a class="ae kw" href="https://content.mansystems.com/acr-trial-request" rel="noopener ugc nofollow" target="_blank">https://content.mansystems.com/acr-trial-request</a>。不需要信用卡。</p></div><div class="ab cl mk ml hb mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><p id="828e" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><em class="jz">最初发布于</em><a class="ae kw" href="https://www.notion.so/gajduk/Finding-bugs-in-Mendix-modules-6ab2707fa68f4e60b29ddd4fe0a23748" rel="noopener ugc nofollow" target="_blank"><em class="jz">https://www . ignition . so/gaj Duk/Finding-bugs-in-Mendix-modules-6ab 2707 fa 68 F4 e 60 b 29 DDD 4 Fe 0a 23748</em></a><em class="jz">。</em></p></div><div class="ab cl mk ml hb mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="hn ho hp hq hr"><p id="d6a5" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><em class="jz">来自发布者- </em></p><p id="3378" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">如果你喜欢这篇文章，你可以在我们的 <a class="ae kw" href="https://medium.com/mendix" rel="noopener"> <em class="jz">媒体页面</em> </a> <em class="jz">或我们自己的</em> <a class="ae kw" href="https://developers.mendix.com/community-blog/" rel="noopener ugc nofollow" target="_blank"> <em class="jz">社区博客网站</em> </a> <em class="jz">找到更多类似的内容。</em></p><p id="c4ff" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><em class="jz">有兴趣加入我们的社区吗？你可以加入我们的slack社区</em> <a class="ae kw" href="https://join.slack.com/t/mendixcommunity/shared_invite/zt-hwhwkcxu-~59ywyjqHlUHXmrw5heqpQ" rel="noopener ugc nofollow" target="_blank"> <em class="jz">这里</em> </a> <em class="jz">或者想更多参与的人，看看加入我们的聚会</em> <a class="ae kw" href="https://developers.mendix.com/meetups/#meetupsNearYou" rel="noopener ugc nofollow" target="_blank"> <em class="jz">这里</em> </a></p></div></div>    
</body>
</html>