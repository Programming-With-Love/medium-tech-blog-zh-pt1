# Android 开发从 Mac 转到 Ubuntu

> 原文：<https://medium.com/google-developer-experts/switching-from-mac-to-ubuntu-for-android-development-a0806c3d0a41?source=collection_archive---------0----------------------->

为什么，如何，接下来发生了什么。

![](img/5db3846bd02a60ef7c56d12c804c79d0.png)

Credit: [https://codersera.com/blog/ubuntu-vs-mac-os/](https://codersera.com/blog/ubuntu-vs-mac-os/)

去年年底，我决定将我的主要开发机器从 OSX 和 MacBook Pro 换成一台装有 Ubuntu 的定制 PC。以下是关于我为什么和如何决定做这个转变的叙述，我的旅程和我开始时的一些问题的一些答案。我希望你觉得有用，如果你决定走同样的路线，请告诉我！

简单说明一下:这是一个主观叙述，而不是技术比较。没有标杆，没有硬性的数字。只是一个故事。喝杯茶，放松一下，这是一种娱乐。

# 我的操作系统背景

早在 2010 年，当我加入一家时髦的新创业公司时，我收到了我的第一台 MacBook Pro。我做的第一件事是使用 [BootCamp](https://support.apple.com/boot-camp) 创建一个 Windows 分区，并将笔记本电脑用作 Windows 机器。我只在工作和私人场合使用过 Windows 操作系统。我也是 C#开发人员，所以 Windows 是有意义的。

2011 年，我转到移动团队，开始做 [Eclipse](https://developer.android.com/studio/intro/migrate#migrating_from_eclipse) 和 [XCode](https://developer.apple.com/xcode/) 。由于 XCode 过去(现在仍然)只支持 Mac ( [OSX](https://en.wikipedia.org/wiki/MacOS) )，我决定改用 Mac。我已经要学习两种新的语言和两种新的 ide，还不如扔一个新的操作系统来启动！

十年后，OSX 仍然震撼着我的世界。这些年来，我到处摆弄窗户，但很快就回到了我舒适的 OSX 家中。我专门从事 Android 开发，所以虽然我仍然到处涉足 iOS，但我的职业生活围绕着 Android Studio。Android Studio 与 XCode 不同，[支持 Windows、OSX 和 Ubuntu](https://developer.android.com/studio) 。因此，与我的 iOS 开发者表亲不同，我不局限于单一的操作系统。

# **Android Studio 是一款重磅**

在过去的 3-4 年里，Android Studio 已经成长为一个真正令人惊叹的 IDE(集成开发环境)。结合 Gradle 构建系统的进步和 Kotlin 的成功，Android 开发看起来越来越像。Net 开发，拥有可以与 [Visual Studio](https://visualstudio.microsoft.com/) (微软一直以来的旗舰 IDE)相媲美的高级 IDE。JetBrains 已经[在 Visual Studio](https://www.jetbrains.com/resharper/) 上投入了大量资金，开发了 Resharper 等产品。

但是所有这些进步都是有代价的——这是所有 Windows 用户都熟悉的，我们都开玩笑的。即资源使用。构建/编译时间长，内存使用率高，奇怪的行为，只有“再次打开和关闭”(又名[无效和重启](https://www.jetbrains.com/help/idea/invalidate-caches.html))似乎可以解决。在 Android 社区中，讽刺构建速度慢得离谱是一个很流行的笑话。但是如果你曾经从事过非常大并且管理非常糟糕的项目，干净的构建时间可能需要 6-8 分钟，这可不是闹着玩的。

# 不要吝啬你的硬件

我买的最后一台机器是 3300€的 MacBook Pro 15 寸 2017，16Gb RAM(我其实是 2018 年年中买的)。它仍然是一个伟大的机器，它仍然为我服务，但它不便宜，最近，尽管两个全新的重新安装，它正在努力做我需要它做的事情。

现在，作为一名顾问/自由职业者，我的笔记本电脑无疑是我工具箱中最重要的工具。这是我生活的来源。节省它是绝对没有意义的——我花在提高它的性能上的任何额外的钱都将获得巨大的投资回报(ROI)——这对于任何经济学家来说都是显而易见的。换句话说，对于普通用户来说，每两年购买一台全新的机器似乎有些夸张，但对我来说，这很有意义。

所以我开始思考——如果我愿意每两年花 3300€买新硬件，Mac 真的是最好的选择吗？

# 新 Mac 的利与弊

这是我在做决定时的想法。

我做的大部分工作都是远程的，在我的办公室，在我的办公桌上。改买台式电脑有意义吗？台式机通常比笔记本电脑强大得多，我的 MacBook Pro 仍然能够在我必须去现场的任何时候完成工作。不好的一面是，iMac Pro 的€超过 5000。这大大超过了 3300€，但仍然可以考虑我的投资回报率咆哮以上…

新的 M1 令人兴奋，但是它会辜负我的用例——Android 开发——的宣传吗？还是我要支付双倍的溢价(一次是因为它是苹果产品，一次是因为它是早期用户)，然后得到一个相对较小的“性价比”(相对于台式机而言)？

带着这些疑问，我觉得有必要另辟蹊径。

# 替代方案是什么样的？

我开始调查自己制造一台机器的成本。自从我用零部件组装了一台机器以来，已经过去了十多年，但事情并没有发生太大的变化。这些部分或多或少是相同的，只是有了更多的信息和可能性——在许多方面比过去容易得多。最大的问题是德国人所说的“选择的折磨”。

我发现了一个叫做 pcpartpicker.com[的整洁的小网站，有点像电脑爱好者的梦幻足球。我开始组装我能想象的最大、最糟糕的机器。钱不成问题，只要给我最好的东西就行了！](http://pcpartpicker.com)

立即激起我兴趣的是，虽然我花大量时间阅读评论、计算兼容性和观看关于不同部分和缺陷的乏味的 YouTube 剪辑没有问题，但我很难花 3000€(没有完全做过头，我的意思是如果有人愿意，他可以仅在显卡上花 15000€)。

好吧，所以乍一看，自己购买硬件和自己组装机器会节省一大笔钱……事实上，购买一台不是苹果公司制造的机器才是最节省的地方。但听起来工作量很大，对吧？

如果研究和购买所有部件(CPU、主板、风扇、机箱、硬盘、GPU)对你来说听起来太令人畏惧或无聊，那么去找你当地的发烧友(如果你住在德国 [mindfactory.de](http://mindfactory.de) 就是一个很好的例子)还是很便宜的，要么付钱让他们为你做这项工作，要么就买一个他们预先做好的配置。建造自己的机器需要投入大量的时间——研究零件、检查兼容性、将零件与其他零件的合格零件清单进行匹配……但这不是火箭科学。如果你是一名开发人员，你已经具备了这样做的技能，只是你是否有时间、耐心和兴趣的问题。

现在，人们对苹果公司给予了很大的信任，因为它确保了它们的组成部分以一种美学和几乎共生的方式协同工作，*和*虽然他们确实有一个了不起的工程团队做这件事*和*，做这件事是一种有利可图和成功的商业模式……我个人并不认为*比下一个人更有价值*。

刚刚制造了自己的机器，没有这样的工程团队，我无疑做出了一些牺牲:

我的电脑很大——箱子的大小和重量相当于一个卡车轮胎，如果没有几个橄榄球运动员，我不会把它带到任何地方。

零件的兼容性没有经过专业测试和调整。毫无疑问，有一些我没有注意到的瓶颈，这意味着功耗和性能可能会通过稍微不同的部件组合得到改善。也许我的 GPU RAM 的工作频率与我的 RAM 略有不同，主板的 PCIe 总线频率正在进行额外的转换...在我的脑海中，我通过额外花费几百欧元来应对这一点:一台 PSU，它可以为安格斯·杨斯·马歇尔·斯塔克提供足够长时间的干净、稳定的电压，足以让他撕碎他们的旧目录；一块可以控制国际空间站的主板；比大多数 RAM 模块更快的硬盘驱动器；足够的内存来容纳我的整个 MP3 收藏；一个为渲染矩阵(我指的是我们生活的那个——不是电影)而构建的 GPU，以及金钱可以买到的最好和最新的 CPU。

换句话说，不是工程师，而是我在这个问题上砸钱，它仍然远低于 3000€。我不在乎我的台式电脑的便携性、美观性或功耗——它插在电源上，放在我的桌子下面，我不打算移动它。我只需要它发出嗡嗡声(当然是比喻——它在完全、诡异、未来的寂静中运行)。

如果你感兴趣的话，这是我选定的最终零件清单。请注意，这只是一份零件清单，价格和供货情况会随着天气而变化。

[https://de.pcpartpicker.com/user/shredder666/saved/PwBDZL](https://de.pcpartpicker.com/user/shredder666/saved/PwBDZL)

# 但是现在你不能用 OSX 了

没错。硬件只是故事的一半。

新机器，非苹果机器意味着没有 OSX。那我要回到 Windows 了吗？不可能何塞。十年前，我飞跃进入了一个新的操作系统，现在是时候升级并开始成长了，我总是承诺自己:Linux 宝贝。

选择哪个 Linux 发行版？[Distrowatch.org](https://distrowatch.com/)是:goto:用来比较外面的生态系统，但又是选择的折磨。我和 [Mint](https://linuxmint.com/) 玩了一把，似乎很受 Android Devs 欢迎，但最终决定用 [Ubuntu](https://ubuntu.com/) ，因为它是 Android Studio 的[推荐发行版。当它开始变慢或堵塞时(每个操作系统似乎在一年左右后都会这样)，我想我会对 Linux 足够自信，并有足够长的脖子来探索下一个大发行版，并提升我的 Linux 街头信誉。](https://developer.android.com/studio#downloads)

在我进入 Linux 几个月之后，我可以看到你花在 OSX 上的额外的钱去了哪里。“它只是工作”是你用苹果支付的，这钱花得值。尽管如此，交换操作系统的体验还是值得一提的——我的开发体验在性能上的大幅提升弥补了花在调整和定制上的时间。我正在做的项目编译速度快了两到三倍…甚至是并行的。我同时打开了几个项目，可以进行并行的干净构建，而不会影响性能。太酷了。

我仍在适应不同的应用程序，我必须用它们来完成不同的任务。例如，Linux 不存在 SourceTree，所以我学会了使用 Android Studio 的内置 Git 管理工具，并(终于)开始喜欢上它们了。

还有其他一些小事:

*   我的蓝牙耳机接收效果很好——我可以在整个办公室走动而不会失去连接。它们与应用程序的连接和交互方式可能会有问题，有时会与其他麦克风发生冲突，但这并不致命。
*   键盘快捷键都是新的，我不能轻松地浏览我的代码——但这是一个初期问题。我实际上意识到我错过了一个数字小键盘，额外的删除按钮，主页，结束和上下翻页…我想我也会买一个机械键盘——看看这个时尚是怎么回事。
*   USB 3.0 到我的调试设备是即时的。我的意思是，构建和部署是如此之快，如果我在按下运行后没有足够快地转头，我就会错过它。好快啊！
*   不知何故，Git 似乎更快，我无法解释。是油脂闪电。
*   很容易感觉到 OSX 终端是一个更加古老和强大的动物的专有分支。Linux 终端可能是世界上最古老、最强大的软件，如果你对 OSX 终端有相当丰富的经验，你会注意到它的不同。
*   用`apt-get`很牛逼。这就像[家酿](https://brew.sh/)除了它实际工作*和*安装所有的软件，而不仅仅是命令行插件和工具。
*   桌面显示管理仍然会引起压力，正如老搭档 Thorsten Ball 所记录的那样。演示文稿、屏幕共享，以及分辨率、字体大小、缩放都会影响可读性，应用程序并不总是遵循系统设置，所以你最终不得不单独调整每个应用程序，有时在每次启动时。这很烦人——我又开始戴老花镜了，以防眼睛疲劳，直到我解决了这些问题。

# 判决

虽然我对苹果从他们的操作系统中移除了[剪纸](https://twitter.com/thorstenball/status/1339503703942963202)表示钦佩，但迄今为止，我并不介意剪纸，因为我的构建快如闪电，我的 IDE 运行流畅如丝。我可以更快更有效地开发，这就是我 90%的时间在电脑上做的事情。

有时我会在聚会和会议上做演示，为此，我想我会坚持使用我的 MacBook。除了笔记本电脑更容易携带这一显而易见的事实之外，当你站在 100 名等待你解决如何将笔记本电脑插入投影仪的人面前时，没有什么可以替代“它就是能工作”。在线演示和屏幕投影也不例外。在一大群人面前，我不打算做任何东西，除了小的演示项目，所以在这种情况下，小的性能影响是可以的。

我修改后的策略是每两年买一台新机器，但在台式机和笔记本电脑之间交替使用。因此，在两年内，MacBook Pro M1 将为 Android Studio、Gradle 和 JDK 做好准备(即[无仿真](https://androidstudio.googleblog.com/2020/12/android-emulator-apple-silicon-preview.html))而我的 MacBook Pro 就要准备退休了。这意味着我将不得不维护两台电脑:一台笔记本电脑和一台台式机，但是，嗯…奢侈的问题。

至于我刚刚组装的野兽，我看不到它在未来四年里出一点汗，而且我仍然太热爱我闪电般快速的开发系统，无法承诺任何客观的见解。一旦蜜月期结束，我会让你知道…