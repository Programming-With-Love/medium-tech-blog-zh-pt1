<html>
<head>
<title>Multiple row selection in ojTable using Oracle JET 4.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Oracle JET 4.0在ojTable中选择多行</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/multiple-row-selection-in-ojtable-using-oracle-jet-v4-86707ebef73c?source=collection_archive---------0-----------------------#2017-09-28">https://medium.com/oracledevs/multiple-row-selection-in-ojtable-using-oracle-jet-v4-86707ebef73c?source=collection_archive---------0-----------------------#2017-09-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="73f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我本来是用JET的v3写的这篇博文，就在我要发表的时候，v4发布了。因此，我更新了它，以配合v4的更新。如果有人想看v3的内容，请联系我们！</p><p id="4a1c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本文将概述在Oracle JET应用程序中从ojTable中检索行选择信息所需的步骤。在本文中使用的例子中，我使用的是来自<a class="ae jc" href="http://www.oracle.com/webfolder/technetwork/jet/jetCookbook.html?component=table&amp;demo=basicTable" rel="noopener ugc nofollow" target="_blank"> Oracle Cookbook </a>的基本ojTable，该书目前在最新发布的Oracle JET第4版上。</p><p id="3c5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">假设您已经设置了ojTable，首先在页面上创建一个按钮，该按钮将用于调用所选行上需要的操作，例如:</p><p id="83d7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">查看</strong></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="343c" class="jm jn hh ji b fi jo jp l jq jr">&lt;oj-button id='button1' on-click='[[buttonClick]]'&gt;Process Departments&lt;/oj-button&gt;</span></pre><p id="0e96" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> viewModel </strong></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="a850" class="jm jn hh ji b fi jo jp l jq jr">this.buttonClick = function () {<br/>   // Our process code will go here<br/>}</span></pre><p id="fdcb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">看下面的截图，这里我们选择了两大块的行；0到3 (4行)和5到6(两行):</p><figure class="jd je jf jg fd jt er es paragraph-image"><div class="er es js"><img src="../Images/385676375de1ffc2a0fca993a896fbb3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1066/format:webp/1*ipHPPKJDVjaLSdhsa19thA.png"/></div><figcaption class="jw jx et er es jy jz bd b be z dx">Table selection of rows 0–3 and 5–6</figcaption></figure><p id="ca65" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要输出选中的行，只需绑定到表，如下所示:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="d76f" class="jm jn hh ji b fi jo jp l jq jr">// Get the selected rows from the table<br/>   var getSelectedRows = document.getElementById('table').selection;</span></pre><figure class="jd je jf jg fd jt er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ka"><img src="../Images/63ed907c9a4ae8bb999f090e324a52f4.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*FMuq1Bt6_2gg2aCx5AAycg.png"/></div></div><figcaption class="jw jx et er es jy jz bd b be z dx">Output of getSelectedRows</figcaption></figure><p id="80d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们知道了如何获取选中的行索引，我们需要包含按钮点击逻辑来查找选中的数据并处理它。</p><p id="fa08" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在视图模型中全局创建一个可观察数组:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="38d5" class="jm jn hh ji b fi jo jp l jq jr">self.selectedDepartments = ko.observableArray();</span></pre><p id="4fd3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后将以下逻辑添加到buttonClick函数中:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="c005" class="jm jn hh ji b fi jo jp l jq jr">this.buttonClick = function () {</span><span id="1738" class="jm jn hh ji b fi kf jp l jq jr">   // Get the selected rows from the table<br/>   var getSelectedRows = document.getElementById('table').selection;</span><span id="61d5" class="jm jn hh ji b fi kf jp l jq jr">   // Ensure the selected departments array is clear<br/>   self.selectedDepartments.removeAll()</span><span id="7bec" class="jm jn hh ji b fi kf jp l jq jr">   // Loop through the selected rows<br/>   $.each(getSelectedRows, function (key, value) {</span><span id="f19a" class="jm jn hh ji b fi kf jp l jq jr">     // Retrieve the table row data<br/>     var itemModel = self.datasource.data;</span><span id="fb88" class="jm jn hh ji b fi kf jp l jq jr">     // Loop through the row data between the start and end indexes<br/>     for (var n = value.startIndex.row; n &lt;= value.endIndex.row;     ++n) {<br/>       if (itemModel.length &gt; 0) {<br/>           var modelObject = itemModel[n]</span><span id="e3e2" class="jm jn hh ji b fi kf jp l jq jr">           // Add the selected departments to an array<br/>          self.selectedDepartments.push({<br/>            depId: modelObject.DepartmentId,<br/>            depName: modelObject.DepartmentName,<br/>            locId: modelObject.LocationId,<br/>            mngId: modelObject.ManagerId<br/>          });<br/>       }</span><span id="2711" class="jm jn hh ji b fi kf jp l jq jr">    }</span><span id="b176" class="jm jn hh ji b fi kf jp l jq jr">   });</span><span id="a255" class="jm jn hh ji b fi kf jp l jq jr">  /*</span><span id="f033" class="jm jn hh ji b fi kf jp l jq jr">  Here you can use the contents of self.selectedDepartments to  process actions on the selected rows.</span><span id="9219" class="jm jn hh ji b fi kf jp l jq jr">  */</span><span id="562f" class="jm jn hh ji b fi kf jp l jq jr">  console.log(self.selectedDepartments);</span><span id="49a0" class="jm jn hh ji b fi kf jp l jq jr">}</span></pre><p id="9055" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所有选中的行数据都存储在<code class="du kg kh ki ji b">self.selectedEmployees</code>中，可以根据需要进行处理。</p><p id="78d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于我的示例，我没有任何流程逻辑，所以当我的按钮被单击时，我刚刚输出了selectedEmployees数组的内容:</p><figure class="jd je jf jg fd jt er es paragraph-image"><div class="er es kj"><img src="../Images/f620ac4d4b5fb3f825f1e6568b7c8bb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/1*E6l2yqWHQ6t1R0r9n6yokA.png"/></div><figcaption class="jw jx et er es jy jz bd b be z dx">Output of selected rows</figcaption></figure><h1 id="d08e" class="kk jn hh bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak">参考文献</strong></h1><ul class=""><li id="1241" class="lh li hh ig b ih lj il lk ip ll it lm ix ln jb lo lp lq lr bi translated">基础ojTable Cookbook:<a class="ae jc" href="http://www.oracle.com/webfolder/technetwork/jet/jetCookbook.html?component=table&amp;demo=basicTable" rel="noopener ugc nofollow" target="_blank">http://www . Oracle . com/web folder/tech network/jet/jet Cookbook . html？component = table&amp;demo = basic table</a></li><li id="b40a" class="lh li hh ig b ih ls il lt ip lu it lv ix lw jb lo lp lq lr bi translated">ojTable选择属性:<a class="ae jc" href="http://docs.oracle.com/middleware/jet400/jet/reference-jet/oj.ojTable.html#selection" rel="noopener ugc nofollow" target="_blank">http://docs . Oracle . com/middleware/jet 400/jet/reference-jet/OJ . OJ table . html # selection</a></li></ul><h1 id="b8f3" class="kk jn hh bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated"><strong class="ak">延伸阅读</strong></h1><p id="b5db" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip lx ir is it ly iv iw ix lz iz ja jb ha bi translated">在Oracle Jet中使用箭头键进行行选择—<a class="ae jc" rel="noopener" href="/@andrewpbennett92/oracle-jet-table-row-selection-using-arrow-keys-eb8cf8d5f30a">https://medium . com/@ andrewpbennett 92/Oracle-Jet-table-row-selection-using-arrow-keys-EB 8 cf 8d 5f 30 a</a></p><h1 id="7646" class="kk jn hh bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">附录</h1><p id="8b51" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip lx ir is it ly iv iw ix lz iz ja jb ha bi translated"><strong class="ig hi">查看代码</strong></p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="844e" class="jm jn hh ji b fi jo jp l jq jr">&lt;oj-button id='button1' on-click='[[buttonClick]]'&gt;Process Departments&lt;/oj-button&gt;&lt;br&gt;&lt;br&gt;</span><span id="7d0f" class="jm jn hh ji b fi kf jp l jq jr">&lt;span data-bind="visible: selectedDepartments().length"&gt;Processed the following departments:&lt;/span&gt;</span><span id="d3b6" class="jm jn hh ji b fi kf jp l jq jr">&lt;ul data-bind="foreach: selectedDepartments()"&gt;</span><span id="e88e" class="jm jn hh ji b fi kf jp l jq jr">&lt;li&gt;</span><span id="a208" class="jm jn hh ji b fi kf jp l jq jr">&lt;span data-bind="text: depId"&gt; &lt;/span&gt; -</span><span id="a1eb" class="jm jn hh ji b fi kf jp l jq jr">&lt;span data-bind="text: depName"&gt; &lt;/span&gt;</span><span id="a5cf" class="jm jn hh ji b fi kf jp l jq jr">&lt;/li&gt;</span><span id="604f" class="jm jn hh ji b fi kf jp l jq jr">&lt;/ul&gt;&lt;br&gt;</span><span id="ff8c" class="jm jn hh ji b fi kf jp l jq jr">&lt;oj-table id='table' aria-label='Departments Table' selection-mode='{"row": "multiple", "column": "multiple"}'  data='[[datasource]]' columns-default.sortable='disabled' columns='[{"headerText": "Department Id",</span><span id="ec87" class="jm jn hh ji b fi kf jp l jq jr">"field": "DepartmentId"},</span><span id="5ce7" class="jm jn hh ji b fi kf jp l jq jr">{"headerText": "Department Name",</span><span id="3e37" class="jm jn hh ji b fi kf jp l jq jr">"field": "DepartmentName"},</span><span id="2dc0" class="jm jn hh ji b fi kf jp l jq jr">{"headerText": "Location Id",</span><span id="18f3" class="jm jn hh ji b fi kf jp l jq jr">"field": "LocationId"},</span><span id="156c" class="jm jn hh ji b fi kf jp l jq jr">{"headerText": "Manager Id",</span><span id="9c28" class="jm jn hh ji b fi kf jp l jq jr">"field": "ManagerId"}]'&gt;</span><span id="2781" class="jm jn hh ji b fi kf jp l jq jr">&lt;/oj-table&gt;</span></pre></div></div>    
</body>
</html>