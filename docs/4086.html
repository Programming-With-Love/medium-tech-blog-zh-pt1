<html>
<head>
<title>Polymer Testing Tips</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">聚合物测试技巧</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/polymer-testing-tips-f217ba94a64?source=collection_archive---------0-----------------------#2016-01-05">https://medium.com/google-developer-experts/polymer-testing-tips-f217ba94a64?source=collection_archive---------0-----------------------#2016-01-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/0c3500a44edb652223382a869a5384e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2DqXGPDiF0mpcgYvUhIwMQ.jpeg"/></div></div></figure><p id="4286" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在我的<a class="ae jn" rel="noopener" href="/@granze/polymer-unit-testing-d6a69910dc31">上一篇文章</a>中，我写了如何开始在聚合物中进行单元测试。目标是设置测试环境，并使用最佳实践和利用Polymer提供的良好工具编写您的第一个测试。</p><p id="6bc1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这篇文章中，我将涵盖更高级的主题，如用户交互模拟、持续集成的自动测试、在多种操作系统/浏览器上的测试以及更多有用的技巧。</p><h1 id="cc1c" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">模拟用户交互</h1><p id="685e" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated"><a class="ae jn" href="https://github.com/PolymerElements/iron-test-helpers" rel="noopener ugc nofollow" target="_blank"> Iron Test Helpers </a>提供了一组方法来模拟鼠标或键盘与元素的交互。</p><p id="fc9f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在下面的例子中，您希望确保您的开始按钮在单击后将被禁用，以避免用户单击它两次。为此，您只需要将一个监听器连接到按钮引用，并使用<strong class="ir hi"> tap </strong>方法来模拟点击/轻击动作。</p><figure class="kr ks kt ku fd ii"><div class="bz dy l di"><div class="kv kw l"/></div></figure><h1 id="3378" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">可访问性测试</h1><p id="5ee7" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">在构建新元素或应用程序时，可访问性是需要记住的一个非常重要的方面。好消息是测试聚合物的可及性是小菜一碟。</p><p id="c421" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在WCT中构建的<strong class="ir hi"> a11ySuite() </strong>方法为给定的<em class="kx"> &lt;测试夹具&gt; </em>运行可访问性审计。将元素引用作为参数传递给a11Suite <strong class="ir hi"> </strong>方法，就完成了。那很容易，不是吗？</p><figure class="kr ks kt ku fd ii"><div class="bz dy l di"><div class="kv kw l"/></div></figure><blockquote class="ky kz la"><p id="6d8a" class="ip iq kx ir b is it iu iv iw ix iy iz lb jb jc jd lc jf jg jh ld jj jk jl jm ha bi translated">您可以使用可访问性开发工具<a class="ae jn" href="https://chrome.google.com/webstore/detail/accessibility-developer-t/fpkknkljclfencbdbgkenhalefipecmb" rel="noopener ugc nofollow" target="_blank"> Chrome扩展</a>运行相同的测试。</p></blockquote><h1 id="e553" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">测试阴影和阴暗的DOM</h1><p id="b2df" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">不幸的是，并不是所有的浏览器都支持影子DOM，因此Polymer默认使用<a class="ae jn" href="https://www.polymer-project.org/1.0/articles/shadydom.html" rel="noopener ugc nofollow" target="_blank"> Shady DOM </a>。Shady DOM兼容Shadow DOM，但是渲染的DOM树不一样。因此，如果您想确保您的元素在这两种情况下都能正常工作，您需要正确地测试它。</p><p id="f38c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为此，您只需要调用您的测试套件两次:一次像平常一样，另一次将<strong class="ir hi"> dom=shadow </strong>作为查询参数传递。</p><figure class="kr ks kt ku fd ii"><div class="bz dy l di"><div class="kv kw l"/></div></figure><h1 id="d8cf" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">CI集成和Travis徽章</h1><figure class="kr ks kt ku fd ii er es paragraph-image"><div class="er es le"><img src="../Images/329284f713f2472626fd37b601f6ba1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:400/format:webp/1*Ykmd8AevFEIBlr3_k600sA.png"/></div></figure><p id="ed0f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">WCT需要一个真正的浏览器来运行，在过去，我想知道如何在像Travis这样的持续集成环境中运行我的聚合物测试。嗯，这比你想象的要简单，只需要在你的<strong class="ir hi"> .travis.yml </strong>文件中增加几行就行了。</p><p id="149c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">首先，您需要安装Bower、web-component-tester和您的元素依赖项。<br/>既然Travis已经安装了xvfb (X虚拟帧缓冲区)和Firefox，你只需要导出显示并启动xvfb即可。</p><figure class="kr ks kt ku fd ii"><div class="bz dy l di"><div class="kv kw l"/></div></figure><h1 id="b06a" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">使用Sauce Labs进行远程测试</h1><p id="972d" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated"><a class="ae jn" href="https://saucelabs.com/" rel="noopener ugc nofollow" target="_blank">酱实验室</a>允许你在云端的多个OS/浏览器上运行测试，对于开源项目是免费的。要开始使用这项服务，你需要先在<a class="ae jn" href="https://saucelabs.com/signup" rel="noopener ugc nofollow" target="_blank">注册</a>。</p><p id="5c50" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">WCT有一个内置插件酱实验室，所以，你唯一需要做的事情，是通过一些选项给WCT:</p><pre class="kr ks kt ku fd lf lg lh li aw lj bi"><span id="da66" class="lk jp hh lg b fi ll lm l ln lo">wct --sauce 'default' --sauce-username &lt;username&gt; --sauce-access-key &lt;access-key&gt;</span></pre><p id="fd2f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在第一个选项中(<em class="kx">酱</em>)，你可以传递一个你想在其上运行测试的操作系统/浏览器列表，或者像上面的例子一样，你可以将值设置为‘default’来在预定义的浏览器中运行测试。</p><p id="fc73" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因为您必须通过测试认证，所以您还需要传递您的用户名和访问密钥。您可以在您的<a class="ae jn" href="https://saucelabs.com/beta/user-settings" rel="noopener ugc nofollow" target="_blank">用户设置页面</a>中找到这些信息。</p><p id="e944" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您想指定自己的浏览器列表，一种简便的方法是将它们列在一个名为<strong class="ir hi"> wct.conf.json </strong>的文件中，您可以将它放在项目的根目录中。</p><figure class="kr ks kt ku fd ii"><div class="bz dy l di"><div class="kv kw l"/></div></figure><h1 id="da40" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">特拉维斯+酱实验室</h1><p id="449a" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">如果您有兴趣了解如何将Travis CI与Sauce Labs集成，请观看以下Polycasts剧集中的Rob Dodson。</p><figure class="kr ks kt ku fd ii"><div class="bz dy l di"><div class="lp kw l"/></div></figure><h1 id="a0c9" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">了解更多信息</strong></h1><p id="74f3" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">本文中的大多数例子都取自我写的<strong class="ir hi"> &lt;翻转时钟&gt; </strong>元素。我建议你在Github上浏览<a class="ae jn" href="https://github.com/Granze/flip-clock" rel="noopener ugc nofollow" target="_blank">代码</a>以获得更好的概述。</p><p id="8c49" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">观看这些伟大的Polycasts剧集，你可以了解更多关于测试聚合物元素的知识。</p><figure class="kr ks kt ku fd ii"><div class="bz dy l di"><div class="lp kw l"/></div></figure><figure class="kr ks kt ku fd ii"><div class="bz dy l di"><div class="lp kw l"/></div></figure></div></div>    
</body>
</html>