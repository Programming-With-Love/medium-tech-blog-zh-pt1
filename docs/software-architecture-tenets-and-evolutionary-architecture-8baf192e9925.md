# 软件架构原则和进化架构

> 原文：<https://medium.com/walmartglobaltech/software-architecture-tenets-and-evolutionary-architecture-8baf192e9925?source=collection_archive---------4----------------------->

## 语境

这篇文章的目的是双重的。

*   架构的重要原则是什么？当我们努力构建弹性、灵活、全球规模且经济高效的云原生应用时，这些原则显得尤为重要。
*   进化架构的指导原则是什么？过去我们一直忽视的一个原则是我们架构的可进化性。当我们处理大量未知时，脆弱的体系结构不容易扩展。

## 建筑支柱

在我们集团内部，一直在努力创建一个框架，以客观地评估基于下述支柱的架构。随着我们在旅途中了解的越来越多，我们将增加或完善这些内容。

> ***可扩展性*** 我们评估您架构的可扩展性和弹性原则。这些方面在迈向云原生架构的过程中非常重要
> 
> **成本**我们评估架构的 TCO(总拥有成本),并给出优化 TCO 的路线图。随着我们将工作负载转移到云中，成本变得至关重要。随着计量托管服务在云中越来越多地被采用，了解一个人的架构的成本足迹变得更加重要。
> 
> **弹性**我们评估架构的自我修复特性。我们评估架构中的模式，以处理计划内和计划外的突发工作负载。
> 
> **安全性**我们评估所考虑的系统的安全性准备情况。我们评估一个架构对于不同种类的安全漏洞的准备程度。
> 
> **配置**我们评估配置管理在一个架构中做得有多好。例如，这可能与我们管理秘密的能力有关。
> 
> **可发展性**我们评估给定架构的可发展程度。我们从不同的维度看待可进化性。我们还提供了一个模型来使架构进化。我们规定了一组适合度函数，团队可以采用这些函数来评估他们的架构。
> 
> **可用性**我们评估您的架构的可用性。

![](img/94cb6d8868a5fe1f39d4ad5ae22174b8.png)

## 进化架构的指导原则

## 前提

回到瀑布项目黑暗的旧时代，我们会在前期的大型架构和设计上大量投资。系统是经过深思熟虑的，并且在它们生命的一英寸之内被记录。所有这些都发生在任何人删掉一行代码之前。事情一旦发生，就很少有或根本没有改变的余地。几个月后，我们经历了一个可怕的回归测试周期，最终发布了一个产品，却发现客户的需求已经发生了变化，我们最终构建了一个没人想要的东西。

谢天谢地，那些日子已经一去不复返了，大的前期设计在敏捷开发中没有位置。使用敏捷开发，团队仍然完成架构工作，但是完成的方式非常不同。敏捷团队采用一种渐进和进化的方法，而不是大规模的预先设计，即决定整个系统的架构需求。

然而，设计、构建和维护健壮的架构并不是免费的。我们需要在整个过程中保持对架构的关注，并坚持一些指导原则。

## 利益

进化架构给了我们企业架构的大部分好处，而没有试图准确预测未来所带来的问题。

这里有一些有用的技术和原则，可以帮助你在产品的生命周期中保持一个干净的架构。

> **最后责任时刻**
> 
> 最后一个负责任的时刻不是鼓励拖延，而是说你应该尽可能地拖延决定，但不能再拖了。
> 
> **理**
> 
> 在一个没有太多背景的项目中过早做出决策是非常危险的。这些决定经常导致不得不扔掉的工作。更糟糕的是，那些早期的决定会对项目的未来产生不可避免的严重后果。
> 
> **接近**
> 
> 在项目的早期，我们应该尽可能少地做出有约束力的决定。从一些关键的故事开始，但目标是端到端的软件。建立一个具有端到端数据流的框架结构，并建立您的测试方法。
> 
> 像编程语言和数据库技术这样的选择需要在项目开始时做出，但是决定正确的服务分解级别将在以后出现。
> 
> **建立轻量级文档**
> 
> *敏捷*宣言*更喜欢*“w*工作软件*胜过全面的*文档*”。
> 
> 当文档具有协作性质时，它变得更有价值。Wikis 是一个很好的方式来将设计社会化，并且在你的团队内部和外部进行交流。写或画一个图表的行为有助于你正确地思考一些事情，并增加我们自己的理解
> 
> **从一开始就建立持续集成和自动化**
> 
> 自动化测试为您提供了一个安全网，让您在知道没有破坏任何东西的情况下快速重构和更改代码。
> 
> 为了随着时间的推移发展一个架构，你需要维护和发展你所有的自动化测试——单元、集成、契约和端到端测试。不要纠结于代码覆盖度量，但是要注意那些经常失败的测试，这些会将你指向你的代码库中需要你注意的问题区域。
> 
> 没有足够的自动化测试，你的架构就不会自由发展。对现有代码进行大规模的修改和重组将会变得非常危险，并且你将会陷入维护和扩展糟糕代码的循环中，从而损害你的架构
> 
> 简单的代码和简单的设计总是最好的
> 
> 写代码容易，写别人容易理解的代码就没那么简单了。在构建复杂系统时，力求简单应该是首要考虑的问题。
> 
> **可理解性**
> 
> 可理解性是这样一个概念，即一个系统应该被呈现，以便工程师可以容易地理解它。
> 
> 一个系统越容易理解，工程师就越容易以可预测和安全的方式改变它。
> 
> 请记住，可理解性不是可观察性。
> 
> **记得康威定律**
> 
> 当设计一个系统时，很容易把注意力完全集中在技术挑战上，但是你需要考虑他们的组织结构，把正确的工作分配给正确的团队。让一个团队工作并拥有一个单独的服务要比跨团队共同拥有好得多
> 
> **鲁棒性**
> 
> 发送的东西要保守，接受的东西要开明
> 
> 在设计消息契约时，健壮性原则是一个很好的指导方针。
> 
> 一旦你在内部或外部发布了一个 API，其他系统就会开始依赖它。一旦到了野外，你的 API 就变得很难改变。当涉及到公开数据时，您应该公开最少的数据，并且应该对所有消息契约进行版本控制
> 
> 相反，当使用一个 API 时，最好忽略你不感兴趣的部分，你不在乎这些是否会随着时间而改变。

## 结论

总之，这些原则允许我们保持我们的架构向进化开放。它们必须定期应用，以防止我们的架构变得脆弱。

# **参考文献**

[1]:现代人类的进化[https://www . your genome . org/stories/Evolution-Of-Modern-Humans](https://www.yourgenome.org/stories/evolution-of-modern-humans)

[2]:易于理解

[https://www . infoq . com/articles/understand ability-metric-not-tracking/](https://www.infoq.com/articles/understandability-metric-not-tracking/)