<html>
<head>
<title>Building A Microservices Application Using Spring Boot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Spring Boot构建微服务应用程序</h1>
<blockquote>原文：<a href="https://medium.com/edureka/microservices-with-spring-boot-ffab2ce8ac34?source=collection_archive---------0-----------------------#2018-05-10">https://medium.com/edureka/microservices-with-spring-boot-ffab2ce8ac34?source=collection_archive---------0-----------------------#2018-05-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/5a0b63ca97b82a40ace37ad173656bf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*09r-S3cEbbxAWzGPPgf4-A.png"/></div><figcaption class="il im et er es in io bd b be z dx">Building Microservices using Spring Boot — Edureka</figcaption></figure><p id="ed8e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">随着云计算和容器化的出现，微服务席卷了整个世界。组织正在寻找具有<strong class="ir hi"> <em class="jn">微服务架构培训</em> </strong>的专业人员。在本文中，让我详细展示我们如何使用Spring Boot和网飞尤里卡服务器为<strong class="ir hi">顶级运动品牌</strong>创建<strong class="ir hi">微服务应用</strong>。</p><p id="aaec" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">所以，让我们开始吧，伙计们。</p><h1 id="3352" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">为什么需要Spring Boot？</h1><p id="2238" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">Spring Boot支持快速构建生产就绪型应用程序，并提供非功能性特性:</p><ul class=""><li id="6491" class="kr ks hh ir b is it iw ix ja kt je ku ji kv jm kw kx ky kz bi translated">易于与容器一起部署的嵌入式服务器</li><li id="0a93" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated">它有助于监控多个组件</li><li id="5680" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated">它有助于在外部配置组件</li></ul><p id="89de" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，让我们看看微服务架构面临哪些挑战</p><h1 id="e667" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">微服务架构面临的挑战</h1><p id="dd61" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">虽然开发许多较小的微服务看起来很容易，但是微服务架构有许多固有的复杂性。让我们来看一些挑战:</p><blockquote class="lf lg lh"><p id="1aa7" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">自动化组件</strong>:自动化一切变得很困难，因为有许多更小的组件而不是一个整体，即构建、部署、监控等。</p><p id="9d44" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">可感知性</strong>:有许多小组件需要部署和维护，有时很难监控和识别问题。它需要对所有组件都有很强的感知能力。</p><p id="bfb0" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">配置管理</strong>:非常需要维护跨各种环境的组件配置。</p><p id="2377" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">调试</strong>:探测每个服务的错误变得很困难。集中式日志记录和仪表板对于简化问题调试至关重要。</p><p id="6009" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">一致性</strong>:你不可能有多种工具来解决同一个问题。虽然促进创新很重要，但围绕用于实现/部署/监控微服务的语言、平台、技术和工具进行一些去中心化的治理也很重要。</p></blockquote><h1 id="c97c" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Spring Boot微服务:与Spring Boot共建顶级运动品牌架构</h1><p id="9c40" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">在这个spring boot微服务示例中，我们将创建顶级运动品牌应用程序，该应用程序将提供3项服务</p><h2 id="1837" class="ll jp hh bd jq lm ln lo ju lp lq lr jy ja ls lt kc je lu lv kg ji lw lx kk ly bi translated"><strong class="ak">尤里卡服务</strong></h2><p id="55d8" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">该服务将注册每个微服务，然后客户端微服务将查找Eureka服务器，以获得相关的微服务来完成工作。这个Eureka服务器归网飞所有，在这里，Spring Cloud提供了一种声明式的方法，通过Java注释来注册和调用服务。</p><h2 id="c51d" class="ll jp hh bd jq lm ln lo ju lp lq lr jy ja ls lt kc je lu lv kg ji lw lx kk ly bi translated"><strong class="ak">物品目录服务</strong></h2><p id="e00f" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">该服务将生成市场上受欢迎的运动品牌列表。</p><h2 id="7c0d" class="ll jp hh bd jq lm ln lo ju lp lq lr jy ja ls lt kc je lu lv kg ji lw lx kk ly bi translated"><strong class="ak">边缘服务</strong></h2><p id="b329" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">它类似于Spring Boot和Angular在Bootiful开发中创建的独立项目服务。但是，它将具有回退功能，防止客户端在服务不可用时收到HTTP错误。</p><figure class="ma mb mc md fd ii er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es lz"><img src="../Images/2a9d4fd06c8a8c1e81768ea7929b1782.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cQG5Ga5jMEeCuV3-G5brHg.png"/></div></div></figure><p id="e0c2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们看看创建这个spring boot微服务示例应用程序需要以下哪些工具。</p><h2 id="5454" class="ll jp hh bd jq lm ln lo ju lp lq lr jy ja ls lt kc je lu lv kg ji lw lx kk ly bi translated">所需工具</h2><ul class=""><li id="dd85" class="kr ks hh ir b is km iw kn ja mi je mj ji mk jm kw kx ky kz bi translated">Java 8</li><li id="12a4" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated">Eclipse IDE氧气</li><li id="aac0" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated">弹簧刀</li></ul><p id="b75d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您在安装和运行上述工具时遇到任何困难，请参考关于<a class="ae ml" href="https://www.edureka.co/blog/spring-boot-setup-helloworld-microservices-example?utm_source=medium&amp;utm_medium=content-link&amp;utm_campaign=microservices-with-spring-boot" rel="noopener ugc nofollow" target="_blank">安装弹簧工具套件</a>的文章。</p><h2 id="7605" class="ll jp hh bd jq lm ln lo ju lp lq lr jy ja ls lt kc je lu lv kg ji lw lx kk ly bi translated">Spring Boot微服务:创造尤里卡服务</h2><p id="fcdb" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">首先，在Eclipse IDE中创建一个<code class="du mm mn mo mp b">EurekaServer</code> Spring Starter项目。点击<strong class="ir hi"> Spring Starter项目</strong>并点击<strong class="ir hi"> Next。</strong></p><figure class="ma mb mc md fd ii er es paragraph-image"><div class="er es mq"><img src="../Images/1fda584cbac0e9c50b80fc147f0a942d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1036/format:webp/1*O2SWVAzCe7V5W-LDoFJWVw.png"/></div></figure><p id="c0be" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">将您的Spring Starter项目命名为<strong class="ir hi"> EurekaServer </strong>，其他信息将自动填充<strong class="ir hi">。</strong></p><blockquote class="lf lg lh"><p id="0901" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">注意:- </strong>确保你的互联网连接，否则它会显示一个错误。</p></blockquote><figure class="ma mb mc md fd ii er es paragraph-image"><div class="er es mr"><img src="../Images/7c93904ab40e0e1d0a57be2e4f24b524.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*q9vIJNGYft-yziY5sy9LSw.png"/></div></figure><p id="1c8b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，选择<code class="du mm mn mo mp b"><strong class="ir hi">Eureka Server</strong></code> <strong class="ir hi"> </strong>作为依赖项，点击<strong class="ir hi">完成。</strong></p><figure class="ma mb mc md fd ii er es paragraph-image"><div class="er es ms"><img src="../Images/4d292903d7a3a68ec148e3a65973722c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1112/format:webp/1*AlROwFk3aNTibEcvXSkQhQ.png"/></div></figure><p id="9807" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，修改<code class="du mm mn mo mp b">EurekaServer/src/main/resources/application.properties</code>文件，添加一个端口号并禁用注册。</p><p id="6c20" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du mm mn mo mp b">server.port=8761<br/> eureka.client.register-with-eureka=false</code></p><figure class="ma mb mc md fd ii er es paragraph-image"><div class="er es mt"><img src="../Images/32860f0d3b0e8bb86789418703a227e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*chmyeAifE93-Vb8l5f7PgQ.png"/></div></figure><p id="9f5b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，打开下面的目录，</p><p id="4950" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du mm mn mo mp b">EurekaServer/src/main/java/com/example/EurekaServiceApplication.java</code>并在<code class="du mm mn mo mp b">@SpringBootApplication</code>上方加上<code class="du mm mn mo mp b">@EnableEurekaServer</code>。</p><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="ab69" class="ll jp hh mp b fi my mz l na nb">import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;</span><span id="ee5d" class="ll jp hh mp b fi nc mz l na nb">@EnableEurekaServer<br/>@SpringBootApplication</span></pre><p id="9df4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该注释将配置一个允许其他应用程序通信的注册表。</p><figure class="ma mb mc md fd ii er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es nd"><img src="../Images/1982e7277a2b914bcfc9794ead342f3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CpaAFoRrUWlLxvlw3kS01Q.png"/></div></div></figure><p id="85bb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">启动应用程序:右击<strong class="ir hi">项目</strong>–&gt;–<strong class="ir hi">运行为</strong>–&gt;点击<strong class="ir hi"> Spring Boot App </strong>。</p><figure class="ma mb mc md fd ii er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es ne"><img src="../Images/5ea614209a81a0e9d156e2f48115f075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d4UEUCuDdrjePivIWJGuYg.png"/></div></div></figure><p id="181f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在打开<code class="du mm mn mo mp b">http://localhost:8761</code>。这里，Spring Eureka服务器将打开，并显示没有服务将运行。</p><figure class="ma mb mc md fd ii er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es nf"><img src="../Images/ed69314ee2a8a19192aca04134730156.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*llz7jFNxtQzzcSZRrxtamg.jpeg"/></div></div></figure><h2 id="c91d" class="ll jp hh bd jq lm ln lo ju lp lq lr jy ja ls lt kc je lu lv kg ji lw lx kk ly bi translated">Spring Boot微服务:创建项目目录服务</h2><p id="a3d9" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">再次创建一个新项目。使用<code class="du mm mn mo mp b">Item-catalog-service</code>作为工件名称，并点击下一个的<strong class="ir hi">。</strong></p><figure class="ma mb mc md fd ii er es paragraph-image"><div class="er es mr"><img src="../Images/32783644568141ca5577ef8b2160ec9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*Om8EpXMKz0334Zq5-xAMpw.png"/></div></figure><p id="f15f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">添加以下依赖项:</p><blockquote class="lf lg lh"><p id="880d" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">致动器</strong>:帮助您监控和管理应用的功能</p><p id="02dc" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">尤里卡</strong>T39】发现:用于服务注册</p><p id="ce02" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi"> JPA </strong>:保存/检索数据</p><p id="dbe4" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi"> H2 </strong>:内存数据库</p><p id="37c4" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi"> Rest </strong> <strong class="ir hi">存储库</strong>:将JPA存储库公开为Rest端点</p><p id="8c68" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi"> Web </strong> : Spring MVC和嵌入式Tomcat</p><p id="859c" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi"> DevTools </strong>:当文件改变时自动重新加载应用程序</p><p id="1aa4" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated">龙目岛:减少样板代码</p></blockquote><p id="443c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">点击<strong class="ir hi">完成。</strong></p><figure class="ma mb mc md fd ii er es paragraph-image"><div class="er es mr"><img src="../Images/78449e5d0436ec1117b11e183c24f293.png" data-original-src="https://miro.medium.com/v2/resize:fit:1116/format:webp/1*qgI0w1LEI4Ky1wxSGGd9iQ.png"/></div></figure><p id="6c6f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，创建一个条目实体，到<code class="du mm mn mo mp b">ItemCatalogServiceApplication.java</code>。下面的代码假设您将所有的类放在同一个文件中。</p><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="fd52" class="ll jp hh mp b fi my mz l na nb">@Data<br/>@AllArgsConstructor<br/>@NoArgsConstructor<br/>@ToString<br/>@Entity<br/>class Item {</span><span id="fc35" class="ll jp hh mp b fi nc mz l na nb">public Item(String name) {<br/>        this.name = name;<br/>    }</span><span id="8fcd" class="ll jp hh mp b fi nc mz l na nb">@Id<br/>    @GeneratedValue<br/>    private Long id;</span><span id="15f5" class="ll jp hh mp b fi nc mz l na nb">private String name;<br/>}</span><span id="7c6b" class="ll jp hh mp b fi nc mz l na nb">@RepositoryRestResource<br/>interface ItemRepository extends JpaRepository&lt;Item, Long&gt; {}</span><span id="367d" class="ll jp hh mp b fi nc mz l na nb">@Component<br/>class ItemInitializer implements CommandLineRunner {</span><span id="2156" class="ll jp hh mp b fi nc mz l na nb">private final ItemRepository ItemRepository;</span><span id="922a" class="ll jp hh mp b fi nc mz l na nb">ItemInitializer(ItemRepository itemRepository) {<br/>        this.itemRepository = itemRepository;<br/>    }</span><span id="05ca" class="ll jp hh mp b fi nc mz l na nb">@Override<br/>    public void run(String... args) throws Exception {<br/>        Stream.of(""Lining", "PUMA", "Bad Boy", "Air Jordan", "Nike", "Adidas", "Reebok")<br/>                .forEach(item -&gt; itemRepository.save(new Item(item)));</span><span id="75a7" class="ll jp hh mp b fi nc mz l na nb">itemRepository.findAll().forEach(System.out::println);<br/>    }<br/>}</span></pre><p id="4e7d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您使用的是不自动导入类的编辑器，这里是在<code class="du mm mn mo mp b">ItemCatalogServiceApplication.java</code>顶部需要导入的列表。</p><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="0022" class="ll jp hh mp b fi my mz l na nb">import lombok.AllArgsConstructor;<br/>import lombok.Data;<br/>import lombok.NoArgsConstructor;<br/>import lombok.ToString;<br/>import org.springframework.boot.CommandLineRunner;<br/>import org.springframework.boot.SpringApplication;<br/>import org.springframework.boot.autoconfigure.SpringBootApplication;<br/>import org.springframework.cloud.client.discovery.EnableDiscoveryClient;<br/>import org.springframework.data.jpa.repository.JpaRepository;<br/>import org.springframework.data.rest.core.annotation.RepositoryRestResource;<br/>import org.springframework.stereotype.Component;</span><span id="fe6d" class="ll jp hh mp b fi nc mz l na nb">import javax.persistence.Entity;<br/>import javax.persistence.GeneratedValue;<br/>import javax.persistence.Id;<br/>import java.util.stream.Stream;</span></pre><p id="8037" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在<code class="du mm mn mo mp b">item-catalog-service/src/main/resources/application.properties</code>文件中添加一个应用程序名称以显示在Eureka服务中，并将端口设置为8088。</p><p id="c8ec" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du mm mn mo mp b">server.port=8088</code></p><p id="fe7b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du mm mn mo mp b">spring.application.name=item-catalog-service</code></p><p id="6784" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，创建云属性文件</p><p id="1953" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">点击<strong class="ir hi">文件-&gt;新建-&gt;其他-&gt;文件</strong>，在该文件中添加以下代码并保存。</p><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="38e3" class="ll jp hh mp b fi my mz l na nb">eureka.instance.hostname=${vcap.application.uris[0]:localhost}<br/>eureka.instance.nonSecurePort=80<br/>eureka.instance.metadataMap.instanceId=${vcap.application.instance_id:${spring.application.name}:${spring.application.instance_id:${server.port}}}<br/>eureka.instance.leaseRenewalIntervalInSeconds = 5</span><span id="9f19" class="ll jp hh mp b fi nc mz l na nb">eureka.client.region = default<br/>eureka.client.registryFetchIntervalSeconds = 5<br/>eureka.client.serviceUrl.defaultZone=${vcap.services.pwa-eureka-service.credentials.uri}/eureka/</span></pre><p id="38b3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，要启动应用程序:</p><p id="3221" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">右键点击项目-&gt;<strong class="ir hi">运行方式</strong>-&gt;点击“<strong class="ir hi"> Spring Boot App </strong>”。</p><figure class="ma mb mc md fd ii er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es ng"><img src="../Images/81a7240043284cac00d2de9054ef913c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8BWFkfQf9TtBIfO5tuYl5g.png"/></div></div></figure><blockquote class="lf lg lh"><p id="9fdc" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">注意:</strong>如果出现错误，请尝试此步骤:右键单击<strong class="ir hi">项目</strong>–&gt;–<strong class="ir hi">运行为</strong>–&gt;单击“<strong class="ir hi"> Maven构建</strong>”</p></blockquote><p id="6c75" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在打开<code class="du mm mn mo mp b">http://localhost:8761</code>。在这里，您将看到项目目录服务正在运行。</p><figure class="ma mb mc md fd ii er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es nh"><img src="../Images/9fd111aaf13cc61d6181baf15862bfbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qlDX23FnqAKdJVmFgRZk7w.jpeg"/></div></div></figure><p id="cd4a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您将看到目录服务中的项目列表。</p><p id="c3d8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du mm mn mo mp b">Open <a class="ae ml" href="http://localhost:8088/items" rel="noopener ugc nofollow" target="_blank">http://localhost:8088/items</a></code></p><figure class="ma mb mc md fd ii er es paragraph-image"><div class="er es ni"><img src="../Images/b046b7d85ad72c2b34c6cafedf77d553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*FXqqfqkgROzIIZ2mHbZfxw.jpeg"/></div></figure><p id="bef9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在让我们继续前进，创建边缘服务。</p><h2 id="92f2" class="ll jp hh bd jq lm ln lo ju lp lq lr jy ja ls lt kc je lu lv kg ji lw lx kk ly bi translated"><strong class="ak"> Spring Boot微服务:创建边缘服务</strong></h2><p id="488a" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">它类似于Spring Boot和Angular 在<strong class="ir hi"> Bootiful开发中创建的独立项目服务。但是，它将具有回退功能，防止客户端在服务不可用时收到HTTP错误。</strong></p><p id="6810" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">再次创建一个新项目。使用<code class="du mm mn mo mp b">edge-service</code>作为工件名称。</p><figure class="ma mb mc md fd ii er es paragraph-image"><div class="er es nj"><img src="../Images/684d48afdfd1d74bcef17331d8d5a487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*64Sk5XYvoHNlvF4Q3fl8qg.png"/></div></figure><blockquote class="lf lg lh"><p id="3db8" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">尤里卡发现</strong>:用于服务注册</p><p id="07eb" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">假装</strong>:一个声明性的web服务客户端</p><p id="e6a8" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi"> Zuul </strong>:提供智能路由</p><p id="ad4a" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi"> Rest存储库</strong>:将JPA存储库公开为Rest端点</p><p id="d875" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi"> Web </strong> : Spring MVC和嵌入式Tomcat</p><p id="478d" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi"> Hystrix </strong>:一个断路器，用于停止连锁故障并启用弹性</p><p id="4c4d" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi"> Lombok </strong>:减少样板代码</p></blockquote><p id="1972" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">点击<strong class="ir hi">完成。</strong></p><figure class="ma mb mc md fd ii er es paragraph-image"><div class="er es nk"><img src="../Images/6caa4e23fd30a4cc7063710941957181.png" data-original-src="https://miro.medium.com/v2/resize:fit:1124/format:webp/1*wytBFdFKBSo1xmWZT3Wmqw.png"/></div></figure><p id="358c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">由于<code class="du mm mn mo mp b">item-catalog-service</code>在端口8088上运行，您需要配置这个应用程序在不同的端口上运行。修改<code class="du mm mn mo mp b">edge-service/src/main/resources/application.properties</code>将端口设置为8089，并设置一个应用名称。</p><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="5bb8" class="ll jp hh mp b fi my mz l na nb">server.port=8089 <br/>spring.application.name=edge-service</span></pre><p id="1176" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">现在，创建云属性文件</strong></p><p id="4c82" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">点击<strong class="ir hi">文件-&gt;新建-&gt;其他-&gt;文件</strong>，在该文件中添加以下代码并保存。</p><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="86b9" class="ll jp hh mp b fi my mz l na nb">eureka.instance.hostname=${vcap.application.uris[0]:localhost}<br/>eureka.instance.nonSecurePort=80<br/>eureka.instance.metadataMap.instanceId=${vcap.application.instance_id:${spring.application.name}:${spring.application.instance_id:${server.port}}}<br/>eureka.instance.leaseRenewalIntervalInSeconds = 5</span><span id="69a8" class="ll jp hh mp b fi nc mz l na nb">eureka.client.region = default<br/>eureka.client.registryFetchIntervalSeconds = 5<br/>eureka.client.serviceUrl.defaultZone=${vcap.services.pwa-eureka-service.credentials.uri}/eureka/</span><span id="9b4a" class="ll jp hh mp b fi nc mz l na nb">package com.example.edgeservice;</span><span id="f10e" class="ll jp hh mp b fi nc mz l na nb">import com.netflix.hystrix.contrib.javanica.annotation.HystrixCommand;<br/>import lombok.Data;<br/>import org.springframework.boot.SpringApplication;<br/>import org.springframework.boot.autoconfigure.SpringBootApplication;<br/>import org.springframework.cloud.client.circuitbreaker.EnableCircuitBreaker;<br/>import org.springframework.cloud.client.discovery.EnableDiscoveryClient;<br/>import org.springframework.cloud.netflix.feign.EnableFeignClients;<br/>import org.springframework.cloud.netflix.feign.FeignClient;<br/>import org.springframework.cloud.netflix.zuul.EnableZuulProxy;<br/>import org.springframework.hateoas.Resources;<br/>import org.springframework.web.bind.annotation.*;</span><span id="bed8" class="ll jp hh mp b fi nc mz l na nb">import java.util.ArrayList;<br/>import java.util.Collection;<br/>import java.util.stream.Collectors;</span><span id="4e1b" class="ll jp hh mp b fi nc mz l na nb"><a class="ae ml" href="http://twitter.com/EnableFeignClients" rel="noopener ugc nofollow" target="_blank">@EnableFeignClients</a><br/><a class="ae ml" href="http://twitter.com/EnableCircuitBreaker" rel="noopener ugc nofollow" target="_blank">@EnableCircuitBreaker</a><br/><a class="ae ml" href="http://twitter.com/EnableDiscoveryClien" rel="noopener ugc nofollow" target="_blank">@EnableDiscoveryClien</a>t<br/><a class="ae ml" href="http://twitter.com/EnableZuulProxy" rel="noopener ugc nofollow" target="_blank">@EnableZuulProxy</a><br/><a class="ae ml" href="http://twitter.com/SpringBootApplicatio" rel="noopener ugc nofollow" target="_blank">@SpringBootApplicatio</a>n<br/>public class EdgeServiceApplication {</span><span id="34f1" class="ll jp hh mp b fi nc mz l na nb">public static void main(String[] args) {<br/>        SpringApplication.run(EdgeServiceApplication.class, args);<br/>    }<br/>}</span></pre><p id="666c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这个文件中创建一个<code class="du mm mn mo mp b">Item</code> DTO(数据传输对象)。Lombok的<code class="du mm mn mo mp b"><a class="ae ml" href="https://projectlombok.org/features/Data.html" rel="noopener ugc nofollow" target="_blank">@Data</a></code>将生成一个<code class="du mm mn mo mp b">toString()</code>方法、getters、setters和适当的构造函数。</p><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="b140" class="ll jp hh mp b fi my mz l na nb"><a class="ae ml" href="http://twitter.com/Data" rel="noopener ugc nofollow" target="_blank">@Data</a><br/>class Item {<br/>    private String name;<br/>}</span></pre><p id="fa51" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">创建一个使用Feign与<code class="du mm mn mo mp b">Item-catalog-service</code>通信的<code class="du mm mn mo mp b">ItemClient</code>接口。</p><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="1bc5" class="ll jp hh mp b fi my mz l na nb">public class EdgeServiceApplication {</span><span id="f7ee" class="ll jp hh mp b fi nc mz l na nb">public static void main(String[] args) {<br/>        SpringApplication.run(EdgeServiceApplication.class, args);<br/>    }<br/>}</span><span id="a3dd" class="ll jp hh mp b fi nc mz l na nb"><a class="ae ml" href="http://twitter.com/Data" rel="noopener ugc nofollow" target="_blank">@Data</a><br/>class Item {<br/>    private String name;<br/>}</span><span id="263b" class="ll jp hh mp b fi nc mz l na nb">public String getName() {<br/>             return name; <br/>}<br/> <br/>public void setName(String name) { <br/>                      this.name = name;<br/>          }<br/><a class="ae ml" href="http://twitter.com/FeignClient" rel="noopener ugc nofollow" target="_blank">@FeignClient</a>("item-catalog-service")<br/>interface ItemClient {</span><span id="b376" class="ll jp hh mp b fi nc mz l na nb"><a class="ae ml" href="http://twitter.com/GetMapping" rel="noopener ugc nofollow" target="_blank">@GetMapping</a>("/items")<br/>    Resources&lt;Item&gt; readItems();<br/>}</span></pre><p id="924d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在<code class="du mm mn mo mp b">ItemClient</code>下面创建一个<code class="du mm mn mo mp b">RestController</code>，它将过滤掉不太热门的品牌，并显示一个<code class="du mm mn mo mp b">/top-brands</code>端点。</p><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="9e15" class="ll jp hh mp b fi my mz l na nb"><a class="ae ml" href="http://twitter.com/RestController" rel="noopener ugc nofollow" target="_blank">@RestController</a><br/>class GoodItemApiAdapterRestController {</span><span id="e33d" class="ll jp hh mp b fi nc mz l na nb">private final ItemClient itemClient;</span><span id="c0d5" class="ll jp hh mp b fi nc mz l na nb">public GoodItemApiAdapterRestController(ItemClient ItemClient) {<br/>        this.itemClient = itemClient;<br/>    }</span><span id="acc4" class="ll jp hh mp b fi nc mz l na nb"><a class="ae ml" href="http://twitter.com/GetMapping" rel="noopener ugc nofollow" target="_blank">@GetMapping</a>("/top-brands")<br/>    public Collection&lt;Item&gt; goodItems() {<br/>        return itemClient.readItems()<br/>                .getContent()<br/>                .stream()<br/>                .filter(this::isGreat)<br/>                .collect(Collectors.toList());<br/>    }</span><span id="8a8d" class="ll jp hh mp b fi nc mz l na nb">private boolean isGreat(Item item) {<br/>        return !item.getName().equals("Nike") &amp;&amp;<br/>                !item.getName().equals("Adidas") &amp;&amp;<br/>                !item.getName().equals("Reebok");<br/>    }<br/>}</span></pre><p id="a4ea" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">用Maven或您的IDE启动<code class="du mm mn mo mp b">edge-service</code>应用程序，并验证它是否成功注册到Eureka服务器。</p><figure class="ma mb mc md fd ii er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es nl"><img src="../Images/5949d3412306e4f100f0389ebfe31381.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oC1gMJnZBBpoySo5jU2flg.jpeg"/></div></div></figure><p id="e9aa" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在调用localhost:8089/top-brands，您将看到来自目录服务的顶级品牌列表。</p><figure class="ma mb mc md fd ii er es paragraph-image"><div class="er es nm"><img src="../Images/c67fafbab122a6e7c06057e7c01554a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*Zzc_xGg_k5sB30IpuF4BOQ.jpeg"/></div></figure><blockquote class="lf lg lh"><p id="783f" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><strong class="ir hi">注意:</strong>如果您关闭<code class="du mm mn mo mp b">item-catalog-service</code>应用程序，您将得到一个500内部服务器错误。</p></blockquote><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="7163" class="ll jp hh mp b fi my mz l na nb">$ http localhost:8089/top-brands<br/>HTTP/1.1 500<br/>Connection: close<br/>Content-Type: application/json;charset=UTF-8<br/>Date: Fri, 16 Mar 2018 12:51:22 GMT<br/>Transfer-Encoding: chunked<br/>X-Application-Context: edge-service:8089</span><span id="0d20" class="ll jp hh mp b fi nc mz l na nb">{<br/>    "error": "Internal Server Error",<br/>    "exception": "feign.RetryableException",<br/>    "message": "connect timed out executing GET <a class="ae ml" href="http://item-catalog-service/items" rel="noopener ugc nofollow" target="_blank">http://item-catalog-service/items</a>",<br/>    "path": "/top-brands",<br/>    "status": 500,<br/>    "timestamp": 1328088897672<br/>}</span></pre><p id="4c26" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要解决这个问题，您可以使用Hystrix创建一个回退方法，并告诉<code class="du mm mn mo mp b">goodItems()</code>方法使用它。</p><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="875e" class="ll jp hh mp b fi my mz l na nb">public Collection&lt;Item&gt; fallback() {<br/>    return new ArrayList&lt;&gt;();<br/>}</span><span id="6670" class="ll jp hh mp b fi nc mz l na nb"><a class="ae ml" href="http://twitter.com/HystrixCommand" rel="noopener ugc nofollow" target="_blank">@HystrixCommand</a>(fallbackMethod = "fallback")<br/><a class="ae ml" href="http://twitter.com/GetMapping" rel="noopener ugc nofollow" target="_blank">@GetMapping</a>("/top-brands")<br/>public Collection&lt;Item&gt; goodItems() {<br/>    return … <br/>}</span></pre><p id="982c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">重启<code class="du mm mn mo mp b">edge-service</code>，您应该会看到一个空列表返回。</p><pre class="ma mb mc md fd mu mp mv mw aw mx bi"><span id="b276" class="ll jp hh mp b fi my mz l na nb">$ http localhost:8089/top-brands<br/>HTTP/1.1 200<br/>Content-Type: application/json;charset=UTF-8<br/>Date: Fri, 16 Mar 2018 12:59:02 GMT<br/>Transfer-Encoding: chunked<br/>X-Application-Context: edge-service:8089<br/>[]</span></pre><p id="6e9f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">再次启动<code class="du mm mn mo mp b">item-catalog-service</code>，该列表最终将返回顶级品牌名称的完整列表。</p><p id="29bb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这就把我们带到了关于使用Spring Boot构建微服务的文章的结尾。我希望这篇文章对你有所帮助，并增加了你的知识价值。</p><p id="6864" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你想查看更多关于人工智能、DevOps、道德黑客等市场最热门技术的文章，你可以参考Edureka的官方网站。</p><p id="27e8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请留意本系列中的其他文章，它们将解释微服务的各个方面。</p><blockquote class="lf lg lh"><p id="b4a4" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><em class="hh"> 1。</em> <a class="ae ml" rel="noopener" href="/edureka/what-is-microservices-86144b17b836"> <em class="hh">什么是微服务？</em> </a></p><p id="0354" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><em class="hh"> 2。</em> <a class="ae ml" href="https://www.edureka.co/blog/object-oriented-programming/?utm_source=medium&amp;utm_medium=content-link&amp;utm_campaign=java-exception-handling" rel="noopener ugc nofollow" target="_blank"> <em class="hh"> </em> </a> <a class="ae ml" rel="noopener" href="/edureka/microservice-architecture-5e7f056b90f1"> <em class="hh">微服务架构</em> </a></p><p id="44a6" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><em class="hh"> 3。</em> <a class="ae ml" rel="noopener" href="/edureka/microservices-vs-soa-4d71c5590fc6"> <em class="hh">微服务vs SOA </em> </a></p><p id="a6ef" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><em class="hh"> 4。</em> <a class="ae ml" rel="noopener" href="/edureka/microservices-tutorial-with-example-a230413dfa13"> <em class="hh">微服务教程</em> </a></p><p id="d64d" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><em class="hh"> 5。</em> <a class="ae ml" rel="noopener" href="/edureka/microservices-design-patterns-50640c7bf4a9"> <em class="hh">微服务设计模式</em> </a></p><p id="f4d1" class="ip iq jn ir b is it iu iv iw ix iy iz li jb jc jd lj jf jg jh lk jj jk jl jm ha bi translated"><em class="hh"> 6。</em> <a class="ae ml" rel="noopener" href="/edureka/microservices-security-b01b8f2a9215"> <em class="hh">微服务安全</em> </a></p></blockquote></div><div class="ab cl nn no go np" role="separator"><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns nt"/><span class="nq bw bk nr ns"/></div><div class="ha hb hc hd he"><p id="d373" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">原载于2018年5月10日www.edureka.co</em><a class="ae ml" href="https://www.edureka.co/blog/microservices-with-spring-boot" rel="noopener ugc nofollow" target="_blank"><em class="jn"/></a><em class="jn">。</em></p></div></div>    
</body>
</html>