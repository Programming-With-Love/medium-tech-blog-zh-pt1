<html>
<head>
<title>EC by Example: GroupBy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">EC by示例:GroupBy</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/ec-by-example-groupby-7ca219358c3b?source=collection_archive---------0-----------------------#2019-01-02">https://medium.com/oracledevs/ec-by-example-groupby-7ca219358c3b?source=collection_archive---------0-----------------------#2019-01-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="6ef5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">了解如何使用<a class="ae jc" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank"> Eclipse集合</a>对集合的元素进行分组。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/b46043820a81735e5980beba143a2841.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rGwzDNPD57M1jv7mKPoahw.png"/></div></div></figure><h1 id="beb8" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">新年快乐</h1><p id="c194" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">这是我2019年的第一篇博客。我会长话短说。是时候写点代码了。</p><h1 id="818c" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">分组依据</h1><p id="5ca0" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">方法<code class="du ks kt ku kv b">groupBy</code>在<a class="ae jc" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank"> Eclipse集合</a>中返回一个<code class="du ks kt ku kv b"><a class="ae jc" rel="noopener" href="/oracledevs/multimap-how-it-works-a3430f549d35"><strong class="ig hi">Multimap</strong></a></code>。一个<code class="du ks kt ku kv b">Multimap</code>看起来像一个<code class="du ks kt ku kv b">Map</code>，因为它有像<code class="du ks kt ku kv b">get</code>和<code class="du ks kt ku kv b">put</code>这样的方法，但是一个<code class="du ks kt ku kv b">Multimap</code>中的值总是一些<code class="du ks kt ku kv b">Collection</code>类型，像一个<code class="du ks kt ku kv b">List</code>、<code class="du ks kt ku kv b">Set</code>或<code class="du ks kt ku kv b">Bag</code>。</p><p id="82b2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面的代码将说明如何根据颜色对一组<code class="du ks kt ku kv b">Fruit</code>进行分组。我们将分组结果存储在一个名为<code class="du ks kt ku kv b"><strong class="ig hi">FRUIT_BY_COLOR</strong></code>的变量中。注意，该类型是一种特殊的<code class="du ks kt ku kv b"><a class="ae jc" href="https://www.eclipse.org/collections/javadoc/9.2.0/org/eclipse/collections/api/multimap/Multimap.html" rel="noopener ugc nofollow" target="_blank">Multimap</a></code>，因为我们在<code class="du ks kt ku kv b"><a class="ae jc" href="https://www.eclipse.org/collections/javadoc/9.2.0/org/eclipse/collections/api/bag/ImmutableBag.html" rel="noopener ugc nofollow" target="_blank">ImmutableBag</a></code>上调用了<code class="du ks kt ku kv b">groupBy</code>。</p><pre class="je jf jg jh fd kw kv kx bn ky kz bi"><span id="42e6" class="la jq hh kv b be lb lc l ld le">public enum Fruit<br/>{<br/>    APPLE(Color.RED),<br/>    BANANA(Color.YELLOW),<br/>    CHERRY(Color.RED),<br/>    PEAR(Color.GREEN),<br/>    STRAWBERRY(Color.RED),<br/>    LEMON(Color.YELLOW),<br/>    KIWI(Color.GREEN);<br/><br/>    private final Color color;<br/><br/>    private static final ImmutableBagMultimap&lt;Color, Fruit&gt; FRUIT_BY_COLOR =<br/>            Bags.immutable.with(Fruit.values())<br/>                .groupBy(Fruit::getColor);<br/><br/>    Fruit(Color color)<br/>    {<br/>        this.color = color;<br/>    }<br/><br/>    public Color getColor()<br/>    {<br/>        return this.color;<br/>    }<br/><br/>    public static ImmutableBag&lt;Fruit&gt; getFruitByColor(Color color)<br/>    {<br/>        return FRUIT_BY_COLOR.get(color);<br/>    }<br/><br/>    public enum Color<br/>    {<br/>        RED, YELLOW, GREEN<br/>    }<br/>}</span></pre><p id="1e84" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以使用<code class="du ks kt ku kv b">Fruit</code>枚举上的<code class="du ks kt ku kv b">getFruitByColor</code>方法查询每种颜色的<code class="du ks kt ku kv b"><strong class="ig hi">FRUIT_BY_COLOR</strong></code> <code class="du ks kt ku kv b">Multimap</code>。</p><pre class="je jf jg jh fd kw kv kx bn ky kz bi"><span id="c415" class="la jq hh kv b be lb lc l ld le">public class FruitTest<br/>{<br/>    @Test<br/>    public void redFruit()<br/>    {<br/>        Assert.assertEquals(<br/>                Bags.immutable.with(<br/>                        Fruit.APPLE,<br/>                        Fruit.CHERRY,<br/>                        Fruit.STRAWBERRY),<br/>                Fruit.getFruitByColor(Fruit.Color.RED));<br/>    }<br/><br/>    @Test<br/>    public void yellowFruit()<br/>    {<br/>        Assert.assertEquals(<br/>                Bags.immutable.with(<br/>                        Fruit.BANANA,<br/>                        Fruit.LEMON),<br/>                Fruit.getFruitByColor(Fruit.Color.YELLOW));<br/>    }<br/><br/>    @Test<br/>    public void greenFruit()<br/>    {<br/>        Assert.assertEquals(<br/>                Bags.immutable.with(<br/>                        Fruit.PEAR,<br/>                        Fruit.KIWI),<br/>                Fruit.getFruitByColor(Fruit.Color.GREEN));<br/>    }<br/>}</span></pre><h1 id="6d6d" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">示例中涉及的API</h1><ol class=""><li id="b08c" class="lf lg hh ig b ih kn il ko ip lh it li ix lj jb lk ll lm ln bi translated"><code class="du ks kt ku kv b"><a class="ae jc" href="https://www.eclipse.org/collections/javadoc/9.2.0/org/eclipse/collections/api/bag/ImmutableBag.html#groupBy-org.eclipse.collections.api.block.function.Function-" rel="noopener ugc nofollow" target="_blank">groupBy</a></code> —使用指定的函数将一个<code class="du ks kt ku kv b">Collection</code>分组到一个<code class="du ks kt ku kv b">Multimap</code>中，为每个对象计算一个键。<code class="du ks kt ku kv b">Collection</code>的类型决定了返回的<code class="du ks kt ku kv b">Multimap</code>的类型。</li><li id="19e2" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lk ll lm ln bi translated"><code class="du ks kt ku kv b"><a class="ae jc" href="https://www.eclipse.org/collections/javadoc/9.2.0/org/eclipse/collections/impl/factory/Bags.html" rel="noopener ugc nofollow" target="_blank">Bags</a>.immutable.with</code> —使用指定的可变参数元素创建一个<code class="du ks kt ku kv b">ImmutableBag</code>。Eclipse集合中有<a class="ae jc" rel="noopener" href="/@donraab/as-a-matter-of-factory-part-1-mutable-75cc2c5d72d9">可变</a>和<a class="ae jc" rel="noopener" href="/@donraab/as-a-matter-of-factory-part-2-immutable-8cb72ff897ee">不可变</a> <code class="du ks kt ku kv b">Collection</code>工厂。</li><li id="0357" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lk ll lm ln bi translated"><code class="du ks kt ku kv b"><a class="ae jc" href="https://www.eclipse.org/collections/javadoc/9.2.0/org/eclipse/collections/api/multimap/bag/ImmutableBagMultimap.html#get-K-" rel="noopener ugc nofollow" target="_blank">get</a></code> —从<code class="du ks kt ku kv b">Multimap</code>返回一个<code class="du ks kt ku kv b">Collection</code>。在<code class="du ks kt ku kv b">ImmutableBagMultimap</code>的情况下返回一个<code class="du ks kt ku kv b">ImmutableBag</code>。</li></ol><p id="684d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">查看这个<a class="ae jc" href="http://eclipse.github.io/eclipse-collections-kata/api-design" rel="noopener ugc nofollow" target="_blank">演示</a>以了解关于Eclipse集合API的起源、设计和发展的更多信息。</p><p id="92f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank"> <em class="lt">月食收藏</em> </a> <em class="lt">是开作</em> <a class="ae jc" href="https://github.com/eclipse/eclipse-collections/blob/master/CONTRIBUTING.md" rel="noopener ugc nofollow" target="_blank"> <em class="lt">投稿</em> </a> <em class="lt">。如果你喜欢这个库，你可以在GitHub上让我们知道。</em></p></div></div>    
</body>
</html>