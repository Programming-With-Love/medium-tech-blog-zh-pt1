<html>
<head>
<title>Kotlin Collections vs Sequences in just 5 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">科特林系列与序列仅用5分钟</h1>
<blockquote>原文：<a href="https://blog.kotlin-academy.com/kotlin-collections-vs-sequences-in-just-5minutes-70a3c3ec94a8?source=collection_archive---------0-----------------------#2021-06-02">https://blog.kotlin-academy.com/kotlin-collections-vs-sequences-in-just-5minutes-70a3c3ec94a8?source=collection_archive---------0-----------------------#2021-06-02</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div class="gh gi il"><img src="../Images/f09671b1be846fd437c2cff890ec69d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:710/format:webp/1*EwATgsYEgzLwuAoUqM3bGA.png"/></div></figure><div class=""/><p id="655c" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">让我们通过一个简单的例子来理解集合和序列之间的区别:</p><pre class="kp kq kr ks gt kt ku kv kw aw kx bi"><span id="1d9b" class="ky kz iu ku b gy la lb l lc ld"><strong class="ku iv">val </strong><em class="le">operations </em>= (1..10)<br/>    .<em class="le">filter</em><strong class="ku iv">{it </strong>% 2 == 1<strong class="ku iv">}<br/>    </strong>.<em class="le">map </em><strong class="ku iv">{ it </strong>* 2 <strong class="ku iv">}<br/>    </strong>.<em class="le">take</em>(2)</span></pre><h1 id="e5ee" class="lf kz iu bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">收集</h1><p id="d2fd" class="pw-post-body-paragraph jr js iu jt b ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk mg km kn ko ig bi translated">在上面的集合<em class="le">操作</em>中，我们首先循环从1到10的数字，然后创建奇数的集合，然后通过将前一个集合的元素乘以2来创建另一个集合，然后通过取前一个集合的前2个元素来创建一个集合。</p><p id="056a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">对于上述集合示例，每个步骤的结果如下:</p><pre class="kp kq kr ks gt kt ku kv kw aw kx bi"><span id="d34d" class="ky kz iu ku b gy la lb l lc ld">val operations = (1..10) <br/>    .<em class="le">filter </em><strong class="ku iv">{ it </strong>% 2 == 1 <strong class="ku iv">} </strong><em class="le">// 1, 3, 5, 7, 9<br/>    </em>.<em class="le">map </em><strong class="ku iv">{ it </strong>* 2 <strong class="ku iv">}        </strong><em class="le">// 2, 6, 10, 14, 18<br/>    </em>.<em class="le">take</em>(2)               <em class="le">// 2, 6</em></span></pre><p id="f8d0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在，让我们来看看地图功能的集合。</p><pre class="kp kq kr ks gt kt ku kv kw aw kx bi"><span id="a10c" class="ky kz iu ku b gy la lb l lc ld">public inline fun &lt;T, R&gt; Iterable&lt;T&gt;.map(transform: (T) -&gt; R): List&lt;R&gt; {<br/>    return <em class="le">mapTo</em>(ArrayList&lt;R&gt;(<em class="le">collectionSizeOrDefault</em>(10)), transform)<br/>}</span></pre><p id="98e3" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">正如您在这里看到的，集合的map函数是一个内联函数，它接收一个集合并返回另一个集合。</p><p id="ff3b" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">所以，收藏是，</p><p id="ee04" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">1.<strong class="jt iv">热切评价</strong>。<br/>这意味着，应用于集合的所有操作总是被评估，并且它们被评估的顺序与它们被应用的顺序相同。</p><p id="012e" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">2.每个变换都在整个集合上执行<strong class="jt iv">。</strong></p><p id="bcec" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">3.在对初始集合应用转换之后，一个<strong class="jt iv">新集合被创建</strong>。</p><p id="d05a" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">4.适用于较小的列表，不适用于较大的列表，因为处理中间收集等式变得很昂贵。</p><h1 id="1ea2" class="lf kz iu bd lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb bi translated">顺序</h1><p id="6478" class="pw-post-body-paragraph jr js iu jt b ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk mg km kn ko ig bi translated">现在，让我们通过序列来理解上面的内容。</p><p id="b261" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">我们可以使用asSequence()函数将集合转换为序列，因此上面的代码可以编写如下:</p><pre class="kp kq kr ks gt kt ku kv kw aw kx bi"><span id="9529" class="ky kz iu ku b gy la lb l lc ld"><strong class="ku iv">val </strong><em class="le">operations </em>= (1..10).<em class="le">asSequence</em>()<br/>    .<em class="le">filter</em><strong class="ku iv">{it </strong>% 2 == 1<strong class="ku iv">}<br/>    </strong>.<em class="le">map </em><strong class="ku iv">{ it </strong>* 2 <strong class="ku iv">}<br/>    </strong>.<em class="le">take</em>(2)<br/>    .<em class="le">toList</em>()</span></pre><p id="f145" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">在上面的序列<em class="le">、</em>中，我们将首先遍历从1到10的数字，然后逐个查看每个元素，然后将过滤转换(这是一个中间操作)放入序列要执行的操作列表中，但不执行过滤操作，对于映射操作也是如此，一旦我们遇到终端操作，在本例中是“take”操作符，所有转换都将被应用</p><p id="dcb0" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">对于上面的代码片段，将对序列执行以下操作。</p><figure class="kp kq kr ks gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="mi mj di mk bf ml"><div class="gh gi mh"><img src="../Images/4fe94209e8b823495e1b790b0a71a859.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UEsokHFvwlLtqjWaRWvs-g.png"/></div></div></figure><p id="64b9" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">现在，让我们来看看序列的映射函数。</p><pre class="kp kq kr ks gt kt ku kv kw aw kx bi"><span id="9dba" class="ky kz iu ku b gy la lb l lc ld">public fun &lt;T, R&gt; Sequence&lt;T&gt;.map(transform: (T) -&gt; R): Sequence&lt;R&gt; {<br/>    return TransformingSequence(this, transform)<br/>}</span></pre><p id="74c2" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">序列的map函数不会创建新的集合，而是创建一个保存转换函数的TransformingSequence。</p><p id="b8db" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">所以，序列是，</p><p id="ec9f" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">1.<strong class="jt iv">延迟评估，</strong>即根据需要，基于终端操作。</p><p id="36be" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">2.对<strong class="jt iv">逐个元素</strong>执行每个转换。</p><p id="9a4d" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">3.<strong class="jt iv">没有创建新的收藏库</strong>。</p><p id="9fac" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">4.<strong class="jt iv">适合较大的列表</strong>。</p></div><div class="ab cl mm mn hr mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="ig ih ii ij ik"><h1 id="81f2" class="lf kz iu bd lg lh mt lj lk ll mu ln lo lp mv lr ls lt mw lv lw lx mx lz ma mb bi translated">点击👏说“谢谢！”并帮助他人找到这篇文章。</h1><p id="e72f" class="pw-post-body-paragraph jr js iu jt b ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk mg km kn ko ig bi translated">了解卡帕头最新的重大新闻。学院，<a class="ae my" href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a" rel="noopener ugc nofollow" target="_blank">订阅时事通讯</a>，<a class="ae my" href="https://twitter.com/ktdotacademy" rel="noopener ugc nofollow" target="_blank">观察Twitter </a>并在媒体上关注我们。</p><p id="f2c9" class="pw-post-body-paragraph jr js iu jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">如果您需要Kotlin工作室，请查看我们如何帮助您:<a class="ae my" href="https://kt.academy/" rel="noopener ugc nofollow" target="_blank"> kt.academy </a>。</p><figure class="kp kq kr ks gt ip gh gi paragraph-image"><a href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a"><div class="gh gi mz"><img src="../Images/3146970f03e44cb07afe660b0d43e045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*54OqlYA4etu7wfpmMP5TKQ.png"/></div></a></figure></div></div>    
</body>
</html>