<html>
<head>
<title>How to quickly generate a random gallery of images from an unsplash collection in javascript without using the API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在不使用API的情况下，用javascript从unsplash集合中快速生成一个随机的图像库</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/how-to-quickly-generate-a-random-gallery-of-images-from-an-unsplash-collection-in-javascript-4ddb2a6a4faf?source=collection_archive---------2-----------------------#2018-02-01">https://medium.com/quick-code/how-to-quickly-generate-a-random-gallery-of-images-from-an-unsplash-collection-in-javascript-4ddb2a6a4faf?source=collection_archive---------2-----------------------#2018-02-01</a></blockquote><div><div class="dt gw gx gy gz ha"/><div class="hb hc hd he hf"><div class=""/><p id="196c" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">有很多免费的图片占位服务，但总的来说，它们包括插入无用的猫gif，或者尼古拉斯凯奇。如果你需要一些对客户端更友好的东西——我最近发现<a class="ae jd" href="http://unsplash.com" rel="noopener ugc nofollow" target="_blank"> unsplash </a>能够从特定的集合中生成随机的图像。更好的是，它会以您指定的尺寸返回这些图像。以下是如何用javascript创建一个随机图库:</p><p id="54e5" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">首先，找到一个你喜欢的unsplash系列，并确保它有足够多的图像适合你。我想要家具，发现了这个系列:</p><pre class="je jf jg jh fe ji jj jk jl aw jm bi"><span id="72bc" class="jn jo hi jj b fj jp jq l jr js"><a class="ae jd" href="https://unsplash.com/collections/1163637/furniture" rel="noopener ugc nofollow" target="_blank">https://unsplash.com/collections/1163637/furniture</a></span></pre><p id="fe42" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这里可以看到收藏ID是<code class="dv jt ju jv jj b">1163637</code>。为了生成一个480x480格式的正方形随机图像，您需要如下切换url:</p><pre class="je jf jg jh fe ji jj jk jl aw jm bi"><span id="044f" class="jn jo hi jj b fj jp jq l jr js">https://source.unsplash.com/collection/1163637/480x480</span></pre><p id="1c01" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">请注意，我们是在unsplash之前添加源，将<code class="dv jt ju jv jj b">collections</code>更改为<code class="dv jt ju jv jj b">collection</code>，删除图库名称(<code class="dv jt ju jv jj b">furniture</code>，并添加我们想要的尺寸(<code class="dv jt ju jv jj b">480x480</code>)。换句话说，您的模板是:</p><pre class="je jf jg jh fe ji jj jk jl aw jm bi"><span id="383b" class="jn jo hi jj b fj jp jq l jr js">https://source.unsplash.com/collection/[collection_id]/[width]x[height]</span></pre><p id="7fa7" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">现在，要让javascript呈现您的图像:</p><p id="0898" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">您需要确定要渲染多少幅图像，并且您需要一个用于图库项目的模板。我将把样式留给您，并演示最简单的实现:</p><pre class="je jf jg jh fe ji jj jk jl aw jm bi"><span id="9a44" class="jn jo hi jj b fj jp jq l jr js">const numItemsToGenerate = 20; //how many gallery items you want on the screen<br/>const imageWidth = 480; //your desired image width in pixels<br/>const imageHeight = 480; //desired image height in pixels<br/>const collectionID = 1163637; //the collection ID from the original url</span><span id="0f93" class="jn jo hi jj b fj jw jq l jr js">function renderGalleryItem(){<br/>  fetch(`<a class="ae jd" href="https://source.unsplash.com/collection/1163637/480x480/?sig=${randomNumber}`" rel="noopener ugc nofollow" target="_blank">https://source.unsplash.com/collection/${</a>collectionID}<a class="ae jd" href="https://source.unsplash.com/collection/1163637/480x480/?sig=${randomNumber}`" rel="noopener ugc nofollow" target="_blank">/${</a>imageWidth<a class="ae jd" href="https://source.unsplash.com/collection/1163637/480x480/?sig=${randomNumber}`" rel="noopener ugc nofollow" target="_blank">}x${</a>imageHeight<a class="ae jd" href="https://source.unsplash.com/collection/1163637/480x480/?sig=${randomNumber}`" rel="noopener ugc nofollow" target="_blank">}/`</a>).then((response)=&gt; {    <br/>    let galleryItem = document.createElement('div');<br/>    galleryItem.classList.add('gallery-item');<br/>    galleryItem.innerHTML = `<br/>      &lt;img class="gallery-image" src="${response.url}" alt="gallery image"/&gt;<br/>    `<br/>    document.body.appendChild(galleryItem);<br/>  }) <br/>}</span><span id="49cc" class="jn jo hi jj b fj jw jq l jr js">for(let i=0;i&lt;numItemsToGenerate;i++){<br/>  renderGalleryItem();<br/>}</span></pre><p id="e862" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">上面的代码指定了您想要生成多少个随机项，您想要它们以什么宽度和高度生成，以及您想要从哪个集合中提取。从编程社区推荐的<a class="ae jd" href="https://blog.coursesity.com/best-vuejs-tutorials/" rel="noopener ugc nofollow" target="_blank">最佳Vue.js教程</a>在线学习Vue.js。</p><p id="c757" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">给定这些变量，它遍历您想要生成的项目数，并调用一个函数来创建一个包含随机unsplash图像的<code class="dv jt ju jv jj b">div</code>，并将每个<code class="dv jt ju jv jj b">div</code>追加到您的html的<code class="dv jt ju jv jj b">body</code>中。但是有一个问题——所有的图像都是相同的随机图像。</p><p id="9b23" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">要解决这个问题，您需要告诉unsplash选择图像的索引，为此，您需要注意集合中有多少图像。在写作的时候，我的收藏有242张照片。所以我需要为此设置一个变量:</p><pre class="je jf jg jh fe ji jj jk jl aw jm bi"><span id="0094" class="jn jo hi jj b fj jp jq l jr js">const numImagesAvailable = 242;</span></pre><p id="a751" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">但是为了保持随机性，您需要一种方法来随机分配242个图像中的一个:</p><pre class="je jf jg jh fe ji jj jk jl aw jm bi"><span id="26cb" class="jn jo hi jj b fj jp jq l jr js">let randomImageIndex = Math.floor(Math.random() * numImagesAvailable);</span></pre><p id="1fba" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">然后，我们需要将该图像索引传递给我们的<code class="dv jt ju jv jj b">renderGalleryItem</code>函数，因此我们将如下修改该函数:</p><pre class="je jf jg jh fe ji jj jk jl aw jm bi"><span id="66da" class="jn jo hi jj b fj jp jq l jr js">function renderGalleryItem(randomNumber){<br/>  fetch(`<a class="ae jd" href="https://source.unsplash.com/collection/1163637/480x480/?sig=${randomNumber}`" rel="noopener ugc nofollow" target="_blank">https://source.unsplash.com/collection/${</a>collectionID}<a class="ae jd" href="https://source.unsplash.com/collection/1163637/480x480/?sig=${randomNumber}`" rel="noopener ugc nofollow" target="_blank">/${</a>imageWidth<a class="ae jd" href="https://source.unsplash.com/collection/1163637/480x480/?sig=${randomNumber}`" rel="noopener ugc nofollow" target="_blank">}x${</a>imageHeight<a class="ae jd" href="https://source.unsplash.com/collection/1163637/480x480/?sig=${randomNumber}`" rel="noopener ugc nofollow" target="_blank">}/</a><a class="ae jd" href="https://source.unsplash.com/collection/1163637/480x480/?sig=${randomNumber}`" rel="noopener ugc nofollow" target="_blank">?sig=${randomNumber}`</a>) .then((response)=&gt; {    <br/>    let galleryItem = document.createElement('div');<br/>    galleryItem.classList.add('gallery-item');<br/>    galleryItem.innerHTML = `<br/>      &lt;img class="gallery-image" src="${response.url}" alt="gallery image"/&gt;<br/>    `<br/>    document.body.appendChild(galleryItem);<br/>  })<br/>}</span></pre><p id="87b8" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">在这里，我们将参数<code class="dv jt ju jv jj b">randomNumber</code>添加到了<code class="dv jt ju jv jj b">renderGalleryItem</code>函数中。在我们的<code class="dv jt ju jv jj b">fetch</code>调用中，我们将<code class="dv jt ju jv jj b">randomNumber</code>传递给unsplash给我们的一个url参数，名为<code class="dv jt ju jv jj b">sig</code>。所以在这种情况下<code class="dv jt ju jv jj b">?sig=${randomNumber}</code>。</p><p id="6185" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">所以现在整个代码如下:</p><pre class="je jf jg jh fe ji jj jk jl aw jm bi"><span id="6939" class="jn jo hi jj b fj jp jq l jr js">const numItemsToGenerate = 20; //how many gallery items you want on the screen<br/>const numImagesAvailable = 242; //how many total images are in the collection you are pulling from<br/>const imageWidth = 480; //your desired image width in pixels<br/>const imageHeight = 480; //desired image height in pixels<br/>const collectionID = 1163637; //the collection ID from the original url</span><span id="9135" class="jn jo hi jj b fj jw jq l jr js">function renderGalleryItem(randomNumber){<br/>   fetch(`<a class="ae jd" href="https://source.unsplash.com/collection/${collectionID}/${imageWidth}x${imageHeight}/?sig=${randomNumber}`" rel="noopener ugc nofollow" target="_blank">https://source.unsplash.com/collection/${collectionID}/${imageWidth}x${imageHeight}/?sig=${randomNumber}`</a>) <br/>  .then((response)=&gt; {    <br/>    let galleryItem = document.createElement('div');<br/>    galleryItem.classList.add('gallery-item');<br/>    galleryItem.innerHTML = `<br/>      &lt;img class="gallery-image" src="${response.url}" alt="gallery image"/&gt;<br/>    `<br/>    document.body.appendChild(galleryItem);<br/>  })<br/>}</span><span id="c5c5" class="jn jo hi jj b fj jw jq l jr js">for(let i=0;i&lt;numItemsToGenerate;i++){<br/>  let randomImageIndex = Math.floor(Math.random() * numImagesAvailable);<br/>  renderGalleryItem(randomImageIndex);<br/>}</span></pre><p id="b38f" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">这样做，你的页面上就会出现一堆随机的图片。现在剩下的就是按照你想要的方式摆放它们。</p><figure class="je jf jg jh fe jy es et paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="es et jx"><img src="../Images/4a909cdf571ec3af505efdfc6acae51b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ASAWVTtL1dbBJJJVkD9tpw.png"/></div></div></figure><p id="24c6" class="pw-post-body-paragraph if ig hi ih b ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc hb bi translated">如果你需要的话，这里有支笔:</p><figure class="je jf jg jh fe jy"><div class="bz dz l di"><div class="kf kg l"/></div></figure></div></div>    
</body>
</html>