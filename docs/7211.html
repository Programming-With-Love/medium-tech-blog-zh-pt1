<html>
<head>
<title>Generating Kotlin code with KotlinPoet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用KotlinPoet生成Kotlin代码</h1>
<blockquote>原文：<a href="https://medium.com/square-corner-blog/generating-kotlin-code-with-kotlinpoet-119dc20f74d4?source=collection_archive---------0-----------------------#2017-05-16">https://medium.com/square-corner-blog/generating-kotlin-code-with-kotlinpoet-119dc20f74d4?source=collection_archive---------0-----------------------#2017-05-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><blockquote class="ie"><p id="c6af" class="if ig hh bd ih ii ij ik il im in io dx translated">注意，我们已经行动了！如果您想继续了解Square的最新技术内容，请访问我们的新家<a class="ae ip" href="https://developer.squareup.com/blog" rel="noopener ugc nofollow" target="_blank">https://developer.squareup.com/blog</a></p></blockquote><p id="f6bf" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm io ha bi translated">Java代码生成已经成为简化库代码的流行解决方案。<a class="ae ip" href="https://github.com/google/dagger/" rel="noopener ugc nofollow" target="_blank"> Dagger </a>生成接口实现，<a class="ae ip" href="https://github.com/JakeWharton/butterknife/" rel="noopener ugc nofollow" target="_blank"> Butter Knife </a>生成Android UI样板，<a class="ae ip" href="https://github.com/square/wire" rel="noopener ugc nofollow" target="_blank"> Wire </a>生成数据二进制编码的值类实现。</p><p id="4693" class="pw-post-body-paragraph iq ir hh is b it jn iv iw ix jo iz ja jb jp jd je jf jq jh ji jj jr jl jm io ha bi translated">尽管Kotlin与Java有很强的互操作性，但为这些库生成的Java代码可能会让人感到陌生和违反惯例，因为它们面向Java消费者，并且缺少Kotlin的特性。</p><p id="47a8" class="pw-post-body-paragraph iq ir hh is b it jn iv iw ix jo iz ja jb jp jd je jf jq jh ji jj jr jl jm io ha bi translated">今天我们很高兴地宣布<a class="ae ip" href="http://github.com/square/kotlinpoet" rel="noopener ugc nofollow" target="_blank"> KotlinPoet </a>，一个用于生成Kotlin代码的库！</p><p id="eece" class="pw-post-body-paragraph iq ir hh is b it jn iv iw ix jo iz ja jb jp jd je jf jq jh ji jj jr jl jm io ha bi translated">Square的代码生成历史始于JavaWriter——一个需要自顶向下发射的线性代码生成器。我们与Google的Dagger团队合作开发了它的继任者<a class="ae ip" href="https://github.com/square/javapoet" rel="noopener ugc nofollow" target="_blank"> JavaPoet </a>，它在提供构建器和生成代码的不可变模型方面进一步发展了这个概念。KotlinPoet建立在JavaPoet的成功之上，为创建Kotlin提供了类似的模型:</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="b3f5" class="kb kc hh jx b fi kd ke l kf kg">val greeterClass = ClassName.get("", "Greeter")<br/>val kotlinFile = KotlinFile.builder("", "HelloWorld")<br/>    .addType(TypeSpec.classBuilder("Greeter")<br/>        .primaryConstructor(FunSpec.constructorBuilder()<br/>            .addParameter(String::class, "name")<br/>            .build())<br/>        .addProperty(PropertySpec.builder(String::class, "name")<br/>            .initializer("name")<br/>            .build())<br/>        .addFun(FunSpec.builder("greet")<br/>            .addStatement("println(%S)", "Hello, \$name")<br/>            .build())<br/>        .build())<br/>    .addFun(FunSpec.builder("main")<br/>        .addParameter(ArrayTypeName.of(String::class), "args")<br/>        .addStatement("%T(args[0]).greet()", greeterClass)<br/>        .build())<br/>    .build()</span></pre><p id="fd8c" class="pw-post-body-paragraph iq ir hh is b it jn iv iw ix jo iz ja jb jp jd je jf jq jh ji jj jr jl jm io ha bi translated">上述代码产生以下Kotlin:</p><pre class="js jt ju jv fd jw jx jy jz aw ka bi"><span id="ed17" class="kb kc hh jx b fi kd ke l kf kg">class Greeter(name: String) {<br/>  val name: String = name</span><span id="5e75" class="kb kc hh jx b fi kh ke l kf kg">  fun greet() {<br/>    println("Hello, $name")<br/>  }<br/>}</span><span id="4774" class="kb kc hh jx b fi kh ke l kf kg">fun main(args: Array&lt;String&gt;) {<br/>  Greeter(args[0]).greet()<br/>}</span></pre><p id="c236" class="pw-post-body-paragraph iq ir hh is b it jn iv iw ix jo iz ja jb jp jd je jf jq jh ji jj jr jl jm io ha bi translated">与生成Java相比，生成Kotlin还有一个优势:JavaScript和native可以作为第一方编译目标。这允许您为多个平台使用相同的工具和相同的生成代码。</p><p id="9d9b" class="pw-post-body-paragraph iq ir hh is b it jn iv iw ix jo iz ja jb jp jd je jf jq jh ji jj jr jl jm io ha bi translated">KotlinPoet目前是一个早期版本。虽然还没有涵盖所有的语言特性和语法，但是已经足够开始并公开了。我们期待着看到你用这个库构建的东西！</p><p id="68f0" class="pw-post-body-paragraph iq ir hh is b it jn iv iw ix jo iz ja jb jp jd je jf jq jh ji jj jr jl jm io ha bi translated">这篇文章总结了Square的“<a class="ae ip" rel="noopener" href="/square-corner-blog/square-open-source-loves-kotlin-c57c21710a17"> Square开源♥s·科特林</a>”系列。</p></div></div>    
</body>
</html>