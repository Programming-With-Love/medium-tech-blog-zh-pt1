<html>
<head>
<title>Automated Machine Learning — A Paradigm Shift That Accelerates Data Scientist Productivity @ Airbnb</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">自动化机器学习——加速数据科学家生产力的范式转变@ Airbnb</h1>
<blockquote>原文：<a href="https://medium.com/airbnb-engineering/automated-machine-learning-a-paradigm-shift-that-accelerates-data-scientist-productivity-airbnb-f1f8a10d61f8?source=collection_archive---------4-----------------------#2017-05-10">https://medium.com/airbnb-engineering/automated-machine-learning-a-paradigm-shift-that-accelerates-data-scientist-productivity-airbnb-f1f8a10d61f8?source=collection_archive---------4-----------------------#2017-05-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="742c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由<a class="ae jc" href="https://www.linkedin.com/in/hamelhusain/" rel="noopener ugc nofollow" target="_blank">哈默尔侯赛因</a> &amp; <a class="ae jc" href="https://www.linkedin.com/in/nicholashandel/" rel="noopener ugc nofollow" target="_blank">尼克汉德尔</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/5f87c6a314697d67e2e7a344dd41fd55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F_mgPNYVtMKDO8KSkOqS-g.png"/></div></div></figure><p id="d152" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在Airbnb，我们一直在寻找改进数据科学工作流程的方法。我们相当数量的数据科学项目涉及机器学习，并且这个工作流程的许多部分是重复的。这些重复性任务包括但不限于:</p><p id="fb18" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">探索性数据分析</strong>:在开始建模练习之前，可视化数据是机器学习中至关重要的一步。自动化任务，如绘制所有变量与预测的目标变量的对比图，以及计算汇总统计数据，可以节省大量时间。</p><p id="f145" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">特性转换</strong>:在如何编码分类变量、估算缺失值、编码序列和文本等方面有许多选择。这些特征转换中的许多都是规范的，因此它们可以可靠地应用于许多问题。</p><p id="e329" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">算法选择&amp;超参数调整</strong>:有令人眼花缭乱的算法可供选择，相关的超参数也可以调整。这些任务很容易自动化。</p><p id="76c1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">模型诊断:</strong> <a class="ae jc" href="http://scikit-learn.org/stable/modules/learning_curve.html#learning-curve" rel="noopener ugc nofollow" target="_blank">学习曲线</a>，<a class="ae jc" href="http://scikit-learn.org/stable/auto_examples/ensemble/plot_partial_dependence.html" rel="noopener ugc nofollow" target="_blank">部分依赖图</a>，特征重要度，ROC等诊断对自动生成极其有用。</p><h1 id="c042" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">进入自动机器学习(AML)</h1><p id="f7b0" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">有一个越来越多的社区围绕着创建工具来自动化上面概述的任务，以及作为机器学习工作流一部分的其他任务。概括这一思想的范式通常被称为自动机器学习，在本文的其余部分，我将简称为“AML”。</p><p id="ec31" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">反洗钱的范围并没有达成普遍共识，但是在年度ICML会议上定期组织反洗钱研讨会的人员<a class="ae jc" href="http://www.automl.org/index.html" rel="noopener ugc nofollow" target="_blank">在其网站上定义了一个合理的范围</a>，其中包括自动执行上述定义的所有重复性任务。</p><p id="a353" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">反洗钱的范围很广，但是，它真的有效吗？答案是这取决于你如何使用它。我们的观点是，很难用AML框架大规模取代数据科学家，因为大多数机器学习问题需要领域知识和人类判断才能正确设置。</p><p id="c779" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，我们发现AML工具对于涉及表格数据集的回归和分类问题最为有用，然而这一领域的发展很快。总之，<strong class="ig hi">我们认为，在某些情况下，AML可以极大地提高数据科学家的工作效率，通常提高一个数量级</strong>。</p><p id="815a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们在Airbnb通过以下方式利用反洗钱:</p><p id="b4d0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">标杆</strong></p><ul class=""><li id="3f52" class="ks kt hh ig b ih ii il im ip ku it kv ix kw jb kx ky kz la bi translated"><em class="lb">不偏不倚地展示挑战者模型:</em> AML可以使用与您的现任模型相同的训练集，快速展示过多的挑战者模型。这可以帮助数据科学家选择最佳的模型族。</li></ul><p id="f4e5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">诊断和探测</strong></p><ul class=""><li id="04b0" class="ks kt hh ig b ih ii il im ip ku it kv ix kw jb kx ky kz la bi translated"><em class="lb">检测目标泄漏</em>:由于AML以自动化的方式非常快速地构建候选模型，我们可以在建模生命周期的早期检测到<a class="ae jc" href="https://www.kaggle.com/wiki/Leakage" rel="noopener ugc nofollow" target="_blank">数据泄漏</a>。</li><li id="bcd6" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated"><em class="lb">诊断</em>:如前所述，可以自动生成标准诊断，如学习曲线、部分依赖图、特征重要性等。</li></ul><p id="74d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">自动化</strong></p><ul class=""><li id="c4e0" class="ks kt hh ig b ih ii il im ip ku it kv ix kw jb kx ky kz la bi translated">探索性数据分析、数据预处理、超参数调整、模型选择和将模型投入生产等任务可以通过自动化机器学习框架在某种程度上实现自动化。</li></ul><h1 id="1532" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">自动化机器学习工具</h1><p id="bf96" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">有大量的商业和开源工具可以解决反洗钱问题。我们试验了以下工具:</p><ul class=""><li id="9aa2" class="ks kt hh ig b ih ii il im ip ku it kv ix kw jb kx ky kz la bi translated"><a class="ae jc" href="https://github.com/rhiever/tpot" rel="noopener ugc nofollow" target="_blank"> TPOT </a></li><li id="3cb8" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated"><a class="ae jc" href="https://github.com/automl/auto-sklearn" rel="noopener ugc nofollow" target="_blank">自动Sklearn </a></li><li id="0aff" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated"><a class="ae jc" href="http://www.cs.ubc.ca/labs/beta/Projects/autoweka/" rel="noopener ugc nofollow" target="_blank"> Auto-Weka </a></li><li id="79ab" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated"><a class="ae jc" href="https://github.com/ClimbsRocks/machineJS" rel="noopener ugc nofollow" target="_blank">机-JS </a></li><li id="13db" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated"><a class="ae jc" href="https://www.datarobot.com/" rel="noopener ugc nofollow" target="_blank">数据机器人</a></li></ul><h1 id="dfcf" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">案例研究:具有客户终身价值模型的竞争基准</h1><p id="3b18" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">在Airbnb，我们使用机器学习为客人和主人建立<a class="ae jc" href="https://en.wikipedia.org/wiki/Customer_lifetime_value" rel="noopener ugc nofollow" target="_blank">客户终身价值模型</a> (LTV)。这些模型允许我们在非常精细的级别上(如果我们愿意，可以到用户级别)改进我们的决策和与我们社区的交互。</p><p id="1278" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">LTV模型被设置为客人的标准回归问题，其中目标变量是每个客人在一个时间范围内的花费。该模型的特征包括来自我们的网络和移动应用的人口统计、位置和活动信息。在这个模型中有许多移动的部分，考虑了供求弹性、预期成本和其他变量。</p><p id="68d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在构建模型的过程中，数据科学家在选择算法时保持客观是非常重要的。例如，与简单模型相比，复杂模型可能只能提供很小的增量收益，这种权衡应该慎重进行。例如，在建立LTV模型的过程中，我们屈服于对我们最喜欢的算法之一的偏见，<a class="ae jc" href="https://github.com/dmlc/xgboost" rel="noopener ugc nofollow" target="_blank">极端梯度增强树</a> (XGBoost)。我们产生偏见的原因如下:</p><ul class=""><li id="12b2" class="ks kt hh ig b ih ii il im ip ku it kv ix kw jb kx ky kz la bi translated">这种算法在密切相关的问题上表现良好。</li><li id="a90a" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated">在模型开发期间，我们做了特别的交叉验证，XGBoost似乎做得最好。</li><li id="722e" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated">我们只有有限的时间来创建这个模型，并将大部分时间花在了功能工程、数据清理和将我们的模型粘贴到生产系统上，这使得我们几乎没有时间进行严格的算法选择和调整。</li></ul><p id="9f69" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">意识到我们的偏见，我们通过AML平台输入原始训练数据，以执行健全性检查并对我们的模型误差进行基准测试。</p><p id="c8b1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下图展示了这些基准测试。该图表显示了各种模型的RMSE(均方根误差)在<a class="ae jc" href="http://robjhyndman.com/hyndsight/tscv/" rel="noopener ugc nofollow" target="_blank">过期交叉验证折叠</a>中的分布。y轴对应于不同的“蓝图”，是算法和特征工程步骤的组合。虽然不可能深入这些蓝图中的每一个细节，但下面的图表让您对现代反洗钱系统的探索广度有所了解。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lh"><img src="../Images/e7d3067ce28b1905134b4dc5f83fb75b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hEI38WHGqhGPl2MqMtGnfQ.png"/></div></div></figure><p id="4664" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用AML，我们很快得到了另一个观点:线性模型对于这个问题非常有竞争力。事实证明，AML平台测试了过多的替代功能工程步骤，并执行了更严格的超参数调整，我们没有时间手动探索。此外，这些发现使我们能够对我们的算法进行修改，并将模型误差减少5%以上，这转化为实质性的影响。</p><h1 id="2f4b" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">结论</h1><p id="91ef" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">AML是一套功能强大的技术，可通过模型调整和更好的诊断来加快数据探索以及提高模型准确性。上述案例研究强调了AML提高模型准确性的能力，但是我们也认识到了AML的其他优势。对于适合AML的问题，我们认为这种范式的使用是良好的建模卫生，因为一旦你已经组成了训练数据，尝试它是便宜的。AML不能保证改善您的结果，但我们发现，如果使用得当，它通常会改善您的结果。</p><h1 id="3bbd" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">进一步阅读</h1><ul class=""><li id="4d92" class="ks kt hh ig b ih kn il ko ip li it lj ix lk jb kx ky kz la bi translated"><a class="ae jc" href="http://www.kdnuggets.com/2017/01/current-state-automated-machine-learning.html" rel="noopener ugc nofollow" target="_blank"> KDnuggets:自动机器学习的当前状态</a></li><li id="5a74" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated"><a class="ae jc" href="https://papers.nips.cc/paper/5872-efficient-and-robust-automated-machine-learning.pdf" rel="noopener ugc nofollow" target="_blank"> NIPS:高效稳健的自动化机器学习</a></li><li id="9db4" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated">【http://www.automl.org/ T4】</li><li id="8749" class="ks kt hh ig b ih lc il ld ip le it lf ix lg jb kx ky kz la bi translated"><a class="ae jc" href="http://www.ml4aad.org/" rel="noopener ugc nofollow" target="_blank">http://www.ml4aad.org/</a></li></ul><p id="d0d3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lb">好奇？我们一直在寻找</em> <a class="ae jc" href="https://www.airbnb.com/careers/departments/data-science-analytics" rel="noopener ugc nofollow" target="_blank"> <em class="lb">有才华的人加入我们的数据科学和分析团队</em> </a> <em class="lb">！</em></p><p id="c1a3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lb">特别感谢以下编辑:</em> <a class="ll lm ge" href="https://medium.com/u/7eb9280e24bb?source=post_page-----f1f8a10d61f8--------------------------------" rel="noopener" target="_blank"> <em class="lb">迈克尔</em></a><em class="lb"/><a class="ll lm ge" href="https://medium.com/u/c00b242128fe?source=post_page-----f1f8a10d61f8--------------------------------" rel="noopener" target="_blank"><em class="lb">罗伯特·张</em></a><em class="lb"/><a class="ll lm ge" href="https://medium.com/u/f1bdf455696e?source=post_page-----f1f8a10d61f8--------------------------------" rel="noopener" target="_blank"><em class="lb">克里希纳</em> </a></p></div></div>    
</body>
</html>