<html>
<head>
<title>How to Learn React #8—Unlocking Secrets of React Form</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何学习React # 8——揭开React表单的秘密</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/lets-learn-react-chapter-8-react-forms-f3137a5c07c7?source=collection_archive---------0-----------------------#2018-02-26">https://medium.com/quick-code/lets-learn-react-chapter-8-react-forms-f3137a5c07c7?source=collection_archive---------0-----------------------#2018-02-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/169ddc681d5c7de65d9ffe77087409fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cx88IOHNXLLxt3VqlvN4Ig.png"/></div></div></figure><p id="5c94" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">正如我在<a class="ae jn" rel="noopener" href="/quick-code/lets-learn-react-chapter-7-component-life-cycle-6aaa815747db">上一章</a>中承诺的，我们将修复目前为止应用程序中的一个问题。提醒你我们是如何站到现在的。看起来是这样的。到目前为止，我还不知道什么新奇的东西，但是我们毕竟在学习反应，而不是CSS。</p><figure class="jp jq jr js fd ii er es paragraph-image"><div class="er es jo"><img src="../Images/e2390f95968ed9cef63094f6eafc9ffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1104/format:webp/1*VQLvsT-G-QLSjU49kgAYrA.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">Our application so far</figcaption></figure><p id="bba9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们现在的问题是，我们只能在点击按钮时添加食物。我不知道你，但对我来说，当用户按下回车键时添加它也是有意义的。我们将通过在<code class="du jx jy jz ka b">&lt;form&gt;</code>元素中包装我们的输入和按钮来实现这一点。这和React到目前为止都没有关系。这是纯HTML。只是为了澄清…当用户当前在HTML表单上并按enter时，表单被提交。好的，让我们继续把我们的输入包在<code class="du jx jy jz ka b">&lt;form&gt;</code>标签中。我们的组件将如下所示</p><figure class="jp jq jr js fd ii"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="68ca" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">所以现在<code class="du jx jy jz ka b">&lt;input&gt;</code>和<code class="du jx jy jz ka b">&lt;button&gt;</code>被<code class="du jx jy jz ka b">&lt;form&gt;</code>包裹着。我也给<code class="du jx jy jz ka b">&lt;button&gt;</code>加了属性<code class="du jx jy jz ka b">type=”submit”</code>。我们还需要做另一个改变。现在我们的按钮有<code class="du jx jy jz ka b">onClick</code>属性，我们真的不再需要它了。为什么？在过去，它不是表单的一部分，所以我们必须专门向按钮添加动作。现在，当点击按钮时，表单被提交。是的，你又猜对了。现在我们需要定义表单提交时需要做什么。我们将<code class="du jx jy jz ka b">onSubmit</code>属性添加到<code class="du jx jy jz ka b">&lt;form&gt;</code>中，它将是我们在<code class="du jx jy jz ka b">onClick</code>中为<code class="du jx jy jz ka b">&lt;button&gt;</code>使用的相同函数。我们走吧，别害羞，你不用等我。只是为了检查我们是否在同一页上…这就是我们的组件的样子</p><figure class="jp jq jr js fd ii"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="94e2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我想说我们做到了，但这不会那么容易。当我们尝试与我们的应用程序交互时，我们会看到我们可以输入一些内容，并可以通过ENTER提交表单。当我们这样做时，一些事情会很快发生，然后我们的应用程序会刷新。这是由HTML表单的默认行为造成的。当提交表单时，它试图联系某个服务器。在我们的例子中，我们真的没有任何服务器。我们只是想在状态上做一些改变，仅此而已。别担心，我们可以很容易地解决这个问题。我们只需要告诉表单它应该防止默认事件。我们可以通过在<code class="du jx jy jz ka b">event</code>对象上调用<code class="du jx jy jz ka b">preventDefault</code>来完成。我已经进行了修改，这就是它们的样子。我会在下面解释我到底做了什么以及为什么</p><figure class="jp jq jr js fd ii"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="6b1f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">好的……我们可以看到我改变了<code class="du jx jy jz ka b">&lt;form&gt;</code>,现在<code class="du jx jy jz ka b">onSubmit</code>正在调用不同的函数。这个函数非常简单。它有一个参数，那就是<code class="du jx jy jz ka b">event</code>对象。在这个函数中，我们只调用我们定义的<code class="du jx jy jz ka b">handleSubmit</code>函数，我们现在就去揭开它的神秘面纱。所以我们已经知道我们想要阻止表单向某个服务器发送请求。我们也知道如何做到这一点。我们就叫<code class="du jx jy jz ka b">preventDefault</code>，就这样。现在我们想按照以下方式改变我们的状态:</p><ul class=""><li id="bca3" class="kd ke hh ir b is it iw ix ja kf je kg ji kh jm ki kj kk kl bi translated">将当前膳食添加到膳食数组</li><li id="78eb" class="kd ke hh ir b is km iw kn ja ko je kp ji kq jm ki kj kk kl bi translated">清除膳食输入</li></ul><p id="a9c5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们可以调用<code class="du jx jy jz ka b">setState</code>方法2次来实现这一点，但我想避免这种情况，所以我只存储当前餐的值。然后用在了<code class="du jx jy jz ka b">setState</code>里。好的，继续玩吧。现在，我们可以通过点击或按回车键提交表单。添加新的膳食并清除输入。</p><p id="d217" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这看起来像是一个简单任务的大量工作，但今天我们讨论了React表单的功能，所以不要害羞，为自己鼓掌…你(我们)做得很好。如果你喜欢这个故事，请鼓掌让世界知道。如果你没有读过这个系列之前的故事，一定要在这里查看一下。如果你有什么意见，欢迎在评论区提问。我很乐意回答你的任何问题。在下一章中，我们将进行一点重构，我们将讨论组件道具。感谢您的关注，敬请关注，下一章再见。</p></div></div>    
</body>
</html>