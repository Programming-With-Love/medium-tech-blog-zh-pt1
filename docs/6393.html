<html>
<head>
<title>React Quick Tip: Use Class Properties and Arrow Functions to Avoid Binding `this` to Methods</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速反应提示:使用类属性和箭头函数来避免将“this”绑定到方法上</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/react-quick-tip-use-class-properties-and-arrow-functions-to-avoid-binding-this-to-methods-29628aca2e25?source=collection_archive---------1-----------------------#2018-01-29">https://medium.com/quick-code/react-quick-tip-use-class-properties-and-arrow-functions-to-avoid-binding-this-to-methods-29628aca2e25?source=collection_archive---------1-----------------------#2018-01-29</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/a83a4022f42fd0943ea819cb47d1768a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pD-5VLHTuP6SBqj6kIeM_Q.png"/></div></div></figure><div class=""/><p id="d96c" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当您想要访问React组件的类方法内部的<code class="du jn jo jp jq b">this</code>时，您需要将它绑定到您的方法:</p><pre class="jr js jt ju fd jv jq jw jx aw jy bi"><span id="d55c" class="jz ka hs jq b fi kb kc l kd ke">class Button extends Component {<br/>  constructor(props) {<br/>    super(props);<br/>    this.state = { clicked: false };</span><span id="0f46" class="jz ka hs jq b fi kf kc l kd ke">    <strong class="jq ht">this.handleClick = this.handleClick.bind(this);</strong></span><span id="fbf5" class="jz ka hs jq b fi kf kc l kd ke"><strong class="jq ht">  </strong>}</span><span id="f466" class="jz ka hs jq b fi kf kc l kd ke">  <strong class="jq ht">handleClick() {<br/>    this.setState({ clicked: true });<br/>  }</strong></span><span id="e35f" class="jz ka hs jq b fi kf kc l kd ke">  render() {<br/>    return &lt;button onClick={this.handleClick}&gt;Click Me!&lt;/button&gt;;<br/>  }<br/>}</span></pre><p id="19b2" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在构造函数中将<code class="du jn jo jp jq b">this</code>绑定到<code class="du jn jo jp jq b">handleClick</code>允许我们在<code class="du jn jo jp jq b">handleClick</code>内部使用来自<code class="du jn jo jp jq b">Component</code>的<code class="du jn jo jp jq b">this.setState</code>。如果没有这个绑定，<code class="du jn jo jp jq b">this</code>的作用域会被<code class="du jn jo jp jq b">handleClick</code>重新限定，并且会丢失组件的<code class="du jn jo jp jq b">setState</code>方法的上下文。</p><p id="773f" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">但这完全没有必要，多余的代码！</p><p id="d80b" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">你可以通过使用一些新的ES6+功能来清理这种丑陋。下面是相同的组件，使用类属性和箭头函数重写，以避免将<code class="du jn jo jp jq b">this</code>绑定到<code class="du jn jo jp jq b">handleClick</code>:</p><pre class="jr js jt ju fd jv jq jw jx aw jy bi"><span id="1685" class="jz ka hs jq b fi kb kc l kd ke">class Button extends Component {<br/>  state = { clicked: false };</span><span id="857d" class="jz ka hs jq b fi kf kc l kd ke">  <strong class="jq ht">handleClick = () =&gt; this.setState({ clicked: true });</strong></span><span id="1a59" class="jz ka hs jq b fi kf kc l kd ke">  render() {<br/>    return &lt;button onClick={this.handleClick}&gt;Click Me!&lt;/button&gt;;<br/>  }<br/>}</span></pre><p id="cdbf" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="kg">注意:您必须在自己的Babel config中启用</em><a class="ae kh" href="http://babeljs.io/docs/plugins/transform-class-properties" rel="noopener ugc nofollow" target="_blank"><em class="kg">transform-class-properties</em></a><em class="kg">才能使用类属性。如果您正在使用Create React App，这已经为您启用了。</em></p><h2 id="d869" class="jz ka hs bd ki kj kk kl km kn ko kp kq ja kr ks kt je ku kv kw ji kx ky kz la bi translated">为什么会这样？</h2><p id="1e71" class="pw-post-body-paragraph ip iq hs ir b is lb iu iv iw lc iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">这是因为两个原因:</p><ol class=""><li id="0e78" class="lg lh hs ir b is it iw ix ja li je lj ji lk jm ll lm ln lo bi translated">箭头函数本质上不会重定<code class="du jn jo jp jq b">this</code>的作用域，所以我们不需要在类构造函数中绑定<code class="du jn jo jp jq b">this</code>。</li><li id="fd16" class="lg lh hs ir b is lp iw lq ja lr je ls ji lt jm ll lm ln lo bi translated">JavaScript有一级函数，这意味着函数和数据被同等对待。因此，箭头函数可以分配给变量，或者在本例中，分配给类属性。</li></ol></div><div class="ab cl lu lv go lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ha hb hc hd he"><h2 id="b259" class="jz ka hs bd ki kj kk kl km kn ko kp kq ja kr ks kt je ku kv kw ji kx ky kz la bi translated">额外小费</h2><p id="08e4" class="pw-post-body-paragraph ip iq hs ir b is lb iu iv iw lc iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">注意，在第二个例子中，我也将<code class="du jn jo jp jq b">state</code>定义为一个类属性，这样就不需要构造函数了。</p></div><div class="ab cl lu lv go lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ha hb hc hd he"><figure class="jr js jt ju fd hj"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="1a41" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请点击👏按钮下面几下，以示支持！⬇⬇</p><p id="589c" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">谢谢！别忘了<strong class="ir ht">关注下面的</strong>快速码。</p><blockquote class="md"><p id="d216" class="me mf hs bd mg mh mi mj mk ml mm jm dx translated"><em class="mn">在</em> <a class="ae kh" href="http://www.quickcode.co/" rel="noopener ugc nofollow" target="_blank"> <em class="mn">上查找各种编程语言的免费课程</em> </a> <em class="mn">。在</em><a class="ae kh" href="https://www.messenger.com/t/1493528657352302" rel="noopener ugc nofollow" target="_blank"><em class="mn">Messenger</em></a><em class="mn">上获取新的更新。</em></p></blockquote></div></div>    
</body>
</html>