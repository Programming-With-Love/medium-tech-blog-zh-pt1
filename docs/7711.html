<html>
<head>
<title>The Styling of Electrode Component Archetype</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">电极组件原型的造型</h1>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/the-styling-of-electrode-component-archetype-356d8f8c77b3?source=collection_archive---------2-----------------------#2018-05-18">https://medium.com/walmartglobaltech/the-styling-of-electrode-component-archetype-356d8f8c77b3?source=collection_archive---------2-----------------------#2018-05-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div class="er es hf"><img src="../Images/af960259721c5ab178fe6ba365c0d418.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zHQUVBaKK6cESULfX7LE7Q.png"/></div></figure><div class=""/><p id="1809" class="pw-post-body-paragraph il im ho in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">WalmartLabs电极组件原型是一个npm模块，封装了样板文件，用于集中管理电极组件的配置、工作流程和依赖性。如果你不熟悉电极原型，请阅读<a class="jj jk ge" href="https://medium.com/u/9f67cc98eb00?source=post_page-----356d8f8c77b3--------------------------------" rel="noopener" target="_blank"> Joel Chen </a>的文章<a class="ae jl" rel="noopener" href="/walmartlabs/the-evolution-of-electrode-archetype-d61a5dcc90c9">此处</a>，然后继续下面的内容。</p><p id="a5bd" class="pw-post-body-paragraph il im ho in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">组件原型的一个关键部分是样式，这是我们一直想要改进的部分之一。“如何在电极组件中配置不同的样式”，“原型支持什么样式”，“我们可以在一个电极组件中有多种样式”是我们的开发人员经常问的问题。在本文中，我将解释样式如何在电极组件原型中工作。</p></div><div class="ab cl jm jn go jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="ha hb hc hd he"><h1 id="a219" class="jt ju ho bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">样式文件的布局</h1><p id="6290" class="pw-post-body-paragraph il im ho in b io kr iq ir is ks iu iv iw kt iy iz ja ku jc jd je kv jg jh ji ha bi translated">让我们先来看看组件样式文件的布局:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="3156" class="lf ju ho lb b fi lg lh l li lj">electrode-component<br/>    <!-- -->demo-app<br/>        src/client/styles<br/>    packages<br/>        [component]<br/>            demo/demo.[css|styl|scss]<br/>            src/styles<!-- --> </span></pre><ul class=""><li id="d075" class="lk ll ho in b io ip is it iw lm ja ln je lo ji lp lq lr ls bi translated"><code class="du lt lu lv lb b">demo-app/src/client/styles</code>:<code class="du lt lu lv lb b">demo-app</code>的样式文件；用于演示组件。</li><li id="14c3" class="lk ll ho in b io lw is lx iw ly ja lz je ma ji lp lq lr ls bi translated"><code class="du lt lu lv lb b">packages/[component]/demo</code> : <code class="du lt lu lv lb b">demo</code>文件夹是<code class="du lt lu lv lb b">demo-app</code>和<code class="du lt lu lv lb b">packages/[component]</code>之间的连接。这是<code class="du lt lu lv lb b">demo-app</code>获得<code class="du lt lu lv lb b">packages/[component]</code>样式的唯一来源。<code class="du lt lu lv lb b">demo-app</code>只会在<code class="du lt lu lv lb b">demo</code>文件夹上引用，不会在<code class="du lt lu lv lb b">src/styles</code>上引用。</li><li id="1ad5" class="lk ll ho in b io lw is lx iw ly ja lz je ma ji lp lq lr ls bi translated"><code class="du lt lu lv lb b">packages/[component]/src/styles</code>:组件的样式文件。</li></ul></div><div class="ab cl jm jn go jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="ha hb hc hd he"><h1 id="bce6" class="jt ju ho bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">可以有哪些款式？</h1><figure class="kw kx ky kz fd hj er es paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="er es mb"><img src="../Images/2bba501ae522c4d229d4916e05765930.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cP9ldmx4npNuzuQXmLD18w.png"/></div></div></figure><p id="425a" class="pw-post-body-paragraph il im ho in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">组件原型支持多种风格，如纯CSS、<a class="ae jl" href="https://github.com/css-modules/css-modules" rel="noopener ugc nofollow" target="_blank"> CSS-Modules + CSS-Next </a>、<a class="ae jl" href="http://stylus-lang.com/docs/css-style.html" rel="noopener ugc nofollow" target="_blank"> Stylus </a>和<a class="ae jl" href="http://sass-lang.com/" rel="noopener ugc nofollow" target="_blank"> SCSS </a>以及它们的组合。它支持基于不同标志和样式类型的不同样式。</p></div><div class="ab cl jm jn go jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="ha hb hc hd he"><h1 id="2d9d" class="jt ju ho bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">原型中的风格是如何捆绑在一起的？</h1><p id="286b" class="pw-post-body-paragraph il im ho in b io kr iq ir is ks iu iv iw kt iy iz ja ku jc jd je kv jg jh ji ha bi translated">在组件原型中，我们使用webpack将所有资产(包括Javascript、样式文件等)放在一个依赖图中。然后我们可以在本地静态资产上使用<em class="mg"> require() </em>。为了捆绑JavaScript之外的静态资源，您可以使用webpack加载器来编译/转换样式文件。加载器是为webpack构建的基于节点的实用程序，用于编译/转换给定类型的资源，这些资源可以捆绑到javascript模块中。以下是我们用来编译样式的webpack样式加载器:</p><ul class=""><li id="7fec" class="lk ll ho in b io ip is it iw lm ja ln je lo ji lp lq lr ls bi translated"><strong class="in hp"> css-loader: </strong>从所有css文件中收集CSS，并将它们放入一个字符串中。</li><li id="f08e" class="lk ll ho in b io lw is lx iw ly ja lz je ma ji lp lq lr ls bi translated"><strong class="in hp"> style-loader: </strong>获取上述css-loader生成的输出字符串，并将其放入index.html文件的&lt; style &gt;标签中。</li><li id="35e6" class="lk ll ho in b io lw is lx iw ly ja lz je ma ji lp lq lr ls bi translated"><strong class="in hp"> postcss-loader </strong>提供了各种插件来用JavaScript转换css。</li><li id="1e5d" class="lk ll ho in b io lw is lx iw ly ja lz je ma ji lp lq lr ls bi translated"><strong class="in hp"> stylus-relative-loader </strong>是由<a class="jj jk ge" href="https://medium.com/u/c884135151a4?source=post_page-----356d8f8c77b3--------------------------------" rel="noopener" target="_blank"> @WalmartLabs </a>创建的，一个用于固定相对导入的stylus loader。</li><li id="3f3a" class="lk ll ho in b io lw is lx iw ly ja lz je ma ji lp lq lr ls bi translated"><strong class="in hp"> sass-loader </strong>是一个sass加载器。将Sass编译为CSS。</li></ul><p id="fd0b" class="pw-post-body-paragraph il im ho in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">组件原型根据文件类型和<strong class="in hp"><em class="mg">CSS modulesupport</em></strong>标志加载样式加载器。<br/>没有<strong class="in hp"><em class="mg">CSS modulesupport</em></strong><em class="mg"/>指定或者有一个值<em class="mg"> false </em>，样式加载器将默认为以下:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="c68b" class="lf ju ho lb b fi lg lh l li lj">{      <br/>  test: /<strong class="lb hp">\.</strong>css$/,      <br/>  use: ${cssLoader}!${postcssLoader}    <br/>},    <br/>{     <br/>  test: /<strong class="lb hp">\.</strong>scss$/,     <br/>  use: `${cssQuery}!${sassLoader}`    <br/>},    <br/>{      <br/>  test: /<strong class="lb hp">\.</strong>styl$/,      <br/>  use: `${cssLoader}!${stylusLoader}`<br/>}</span></pre><p id="6fe4" class="pw-post-body-paragraph il im ho in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">使用<em class="mg"> cssModuleSupport: true </em>，所有的类名和动画名都将由CSS-Modules和CSS-Next在本地确定范围。样式加载器将按如下方式加载:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="4e81" class="lf ju ho lb b fi lg lh l li lj">const cssLoaderOptions = "?modules&amp;localIdentName=[name]__[local]___[hash:base64:5]&amp;-autoprefixer";</span><span id="c5bf" class="lf ju ho lb b fi mh lh l li lj">{      <br/>  test: /<strong class="lb hp">\.</strong>css$/,      <br/>  use: ${cssLoader}${cssLoaderOptions}!${postcssLoader}    <br/>},    <br/>{     <br/>  test: /<strong class="lb hp">\.</strong>scss$/,     <br/>  use: `${cssQuery}${cssLoaderOptions}!${sassLoader}`    <br/>},    <br/>{      <br/>  test: /<strong class="lb hp">\.</strong>styl$/,      <br/>  use: `${cssLoader}${cssLoaderOptions}!${stylusLoader}`<br/>}</span></pre><h1 id="f477" class="jt ju ho bd jv jw mi jy jz ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq bi translated">如何指定所需的样式？</h1><p id="a63b" class="pw-post-body-paragraph il im ho in b io kr iq ir is ks iu iv iw kt iy iz ja ku jc jd je kv jg jh ji ha bi translated">您可以扩展或定制电极组件的配置。为了加载相应的样式加载器，例如CSS-Modules + CSS-Next，你需要在<code class="du lt lu lv lb b">app/archetype/config</code>中指定标志<code class="du lt lu lv lb b">cssModuleSupport:true</code>(注意:这里检查标志定制<a class="ae jl" href="https://github.com/didi0613/electrode/blob/a5867531afba28f8221c9ac2e898e5a1f0402f1e/chapter1/intermediate/app-archetype/customize-config.md#extending-webpack-configurations" rel="noopener ugc nofollow" target="_blank"/>)。</p><p id="335d" class="pw-post-body-paragraph il im ho in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">组件原型将从项目中寻找定制的配置，并将它们合并到当前的webpack配置中。以下是您可以为组件选择的可用标志:</p><ul class=""><li id="81c5" class="lk ll ho in b io ip is it iw lm ja ln je lo ji lp lq lr ls bi translated"><code class="du lt lu lv lb b">cssModuleSupport</code>:启用<code class="du lt lu lv lb b">css-modules + css-next</code>支持的标志。(默认值:未定义)</li><li id="1b3a" class="lk ll ho in b io lw is lx iw ly ja lz je ma ji lp lq lr ls bi translated"><strong class="in hp">【弃用警告】</strong>这不是推荐的设置。<code class="du lt lu lv lb b">cssModulesStylusSupport</code>:启用CSS模块手写笔支持的标志。(默认值:false)</li></ul><h1 id="27ac" class="jt ju ho bd jv jw mi jy jz ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq bi translated">风格用例</h1><p id="1810" class="pw-post-body-paragraph il im ho in b io kr iq ir is ks iu iv iw kt iy iz ja ku jc jd je kv jg jh ji ha bi translated">如果不指定标志，以下是样式的默认情况:</p><ul class=""><li id="cb4d" class="lk ll ho in b io ip is it iw lm ja ln je lo ji lp lq lr ls bi translated">如果您使用的是*。css作为你的样式类型，它将使用CSS-Modules + CSS-Next</li><li id="7a20" class="lk ll ho in b io lw is lx iw ly ja lz je ma ji lp lq lr ls bi translated">如果您使用的是*。styl作为你的风格类型，它将使用手写笔</li><li id="175b" class="lk ll ho in b io lw is lx iw ly ja lz je ma ji lp lq lr ls bi translated">如果您使用的是*。scss作为您的风格类型，它将使用SCSS</li></ul><p id="6160" class="pw-post-body-paragraph il im ho in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">以下是您可以自定样式的方法:</p><ul class=""><li id="0d9f" class="lk ll ho in b io ip is it iw lm ja ln je lo ji lp lq lr ls bi translated">要使用纯CSS(不支持CSS-Modules + CSS-Next)，将<code class="du lt lu lv lb b">cssModuleSupport</code>设置为false。</li><li id="81ae" class="lk ll ho in b io lw is lx iw ly ja lz je ma ji lp lq lr ls bi translated">要使用触笔和CSS-Modules + CSS-Next，请将<code class="du lt lu lv lb b">cssModuleSupport</code>设置为true。</li><li id="5e50" class="lk ll ho in b io lw is lx iw ly ja lz je ma ji lp lq lr ls bi translated">要将SCSS与CSS-Modules + CSS-Next一起使用，请将<code class="du lt lu lv lb b">cssModuleSupport</code>设置为true。</li></ul><h1 id="6888" class="jt ju ho bd jv jw mi jy jz ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq bi translated">哪里可以找到演示？</h1><p id="603e" class="pw-post-body-paragraph il im ho in b io kr iq ir is ks iu iv iw kt iy iz ja ku jc jd je kv jg jh ji ha bi translated">为了更好地理解电极组件的样式，我们在这里为您创建了几个示例:</p><p id="784a" class="pw-post-body-paragraph il im ho in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">如果你使用css模块作为你的风格，<a class="ae jl" href="https://github.com/didi0613/oss-electrode-component-css-modules-example" rel="noopener ugc nofollow" target="_blank">这里</a>是一个演示组件。</p><p id="92a4" class="pw-post-body-paragraph il im ho in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">如果你使用SASS作为你的风格，<a class="ae jl" href="https://github.com/didi0613/oss-electrode-component-sass-example" rel="noopener ugc nofollow" target="_blank">这里</a>是给你的一个演示组件。</p><p id="71d0" class="pw-post-body-paragraph il im ho in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我们还有一个来自我们的<a class="ae jl" href="https://github.com/electrode-io/electrode/tree/master/samples/demo-component/packages/demo-component" rel="noopener ugc nofollow" target="_blank">开源电极库</a>的电极组件项目，请在这里查看<a class="ae jl" href="https://github.com/electrode-io/electrode/tree/master/samples/demo-component/packages/demo-component" rel="noopener ugc nofollow" target="_blank">。</a></p><figure class="kw kx ky kz fd hj er es paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="er es mn"><img src="../Images/dd62b839d4770ac34944bbfd03f90d5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6B3z01VncprZSxAqg3UtGA.png"/></div></div></figure><h1 id="ca73" class="jt ju ho bd jv jw mi jy jz ka mj kc kd ke mk kg kh ki ml kk kl km mm ko kp kq bi translated">大声喊出来</h1><p id="3262" class="pw-post-body-paragraph il im ho in b io kr iq ir is ks iu iv iw kt iy iz ja ku jc jd je kv jg jh ji ha bi translated">感谢<a class="jj jk ge" href="https://medium.com/u/c884135151a4?source=post_page-----356d8f8c77b3--------------------------------" rel="noopener" target="_blank"> @WalmartLabs </a>电极团队负责人<a class="jj jk ge" href="https://medium.com/u/9f67cc98eb00?source=post_page-----356d8f8c77b3--------------------------------" rel="noopener" target="_blank"> Joel Chen </a>和电极团队成员<a class="jj jk ge" href="https://medium.com/u/9095df05ab92?source=post_page-----356d8f8c77b3--------------------------------" rel="noopener" target="_blank"> Dat Vong </a> <strong class="in hp"> </strong>对本文的帮助和评论。</p></div></div>    
</body>
</html>