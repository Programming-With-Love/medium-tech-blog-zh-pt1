# ä¸ºå­¦ä¹  Node.js å’Œ Oracle æ•°æ®åº“åˆ›å»ºæ²™ç›’

> åŸæ–‡ï¼š<https://medium.com/oracledevs/creating-a-sandbox-for-learning-node-js-and-oracle-database-dd27706af6c4?source=collection_archive---------0----------------------->

éšç€ Oracle Database 12.2 å’Œ Node.js 8 çš„æ¨å‡ºï¼Œè¿™æ˜¯åˆ›å»ºæœ¬åœ°å­¦ä¹ æ²™ç›’çš„ç»ä½³æ—¶æœºã€‚ç”±äº Oracle æä¾›äº†ä¸€äº›é¢„æ„å»ºçš„è™šæ‹Ÿæœºï¼Œæ‚¨å¯ä»¥åœ¨ä¸åˆ° 20 åˆ†é’Ÿçš„æ—¶é—´å†…(ä¸åŒ…æ‹¬ä¸‹è½½æ—¶é—´)å»ºç«‹å¹¶è¿è¡Œè¿™æ ·ä¸€ä¸ªç¯å¢ƒï¼Œè€Œæ— éœ€èŠ±è´¹ä¸€åˆ†é’±ï¼ğŸ˜„

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†å¸¦é¢†ä½ åˆ›å»ºè¿™æ ·ä¸€ä¸ªæ²™ç›’ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬å°†è¦å­¦ä¹ çš„å†…å®¹çš„æ¦‚è¿°:

*   å®‰è£… VirtualBox
*   å¯¼å…¥æ•°æ®åº“åº”ç”¨ç¨‹åºå¼€å‘è™šæ‹Ÿæœº
*   å®‰è£… Node.js å’Œ Git
*   å®‰è£… Node.js é©±åŠ¨ç¨‹åºå¹¶è¿è¡Œæµ‹è¯•

# å®‰è£… VirtualBox

ä½ è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯å®‰è£… [VirtualBox 5.1 æˆ–æ›´é«˜ç‰ˆæœ¬](https://www.virtualbox.org/)ã€‚ä»€ä¹ˆæ˜¯ VirtualBoxï¼Ÿæ¥è‡ª[åœ¨çº¿æ–‡æ¡£](https://www.virtualbox.org/manual/ch01.html):

> VirtualBox æ˜¯ä¸€ä¸ªè·¨å¹³å°çš„è™šæ‹ŸåŒ–åº”ç”¨ç¨‹åºã€‚é‚£æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿé¦–å…ˆï¼Œå®ƒå¯ä»¥å®‰è£…åœ¨ä½ ç°æœ‰çš„åŸºäºè‹±ç‰¹å°”æˆ– AMD çš„ç”µè„‘ä¸Šï¼Œæ— è®ºå®ƒä»¬è¿è¡Œçš„æ˜¯ Windowsã€Macã€Linux è¿˜æ˜¯ Solaris æ“ä½œç³»ç»Ÿã€‚å…¶æ¬¡ï¼Œå®ƒæ‰©å±•äº†ç°æœ‰è®¡ç®—æœºçš„åŠŸèƒ½ï¼Œä½¿å…¶å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªæ“ä½œç³»ç»Ÿ(åœ¨å¤šä¸ªè™šæ‹Ÿæœºä¸­)ã€‚

VirtualBox æ˜¯è¿™ç±»æ²™ç›’çš„ç»ä½³è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦åœ¨ä¸»æœºæ“ä½œç³»ç»Ÿä¸Šå®‰è£…ä»»ä½•åœ¨ä¸ä½¿ç”¨æ—¶ä¼šæ¶ˆè€—èµ„æºçš„è½¯ä»¶ã€‚æˆ‘ä¸ä¼šè¯¦ç»†ä»‹ç»å®‰è£…è¿‡ç¨‹ï¼Œå› ä¸ºå®ƒä¼šå› æ‚¨çš„ä¸»æœºæ“ä½œç³»ç»Ÿè€Œå¼‚ã€‚åªéœ€å¯¼èˆªåˆ°[ä¸‹è½½é¡µé¢](https://www.virtualbox.org/wiki/Downloads)å¹¶ä¸‹è½½&ä¸ºä½ çš„æ“ä½œç³»ç»Ÿå®‰è£…åˆé€‚çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚

![](img/0075c33ecfefefeba08e9221eb543c37.png)

# å¯¼å…¥æ•°æ®åº“åº”ç”¨ç¨‹åºå¼€å‘è™šæ‹Ÿæœº

Oracle æä¾›äº†è®¸å¤šé¢„æ„å»ºçš„å¼€å‘è™šæ‹Ÿæœºï¼Œéå¸¸é€‚åˆå­¦ä¹  Oracle æŠ€æœ¯ï¼Œå› ä¸ºæ‚¨ä¸å¿…é€šè¿‡å¤æ‚çš„å®‰è£…å°±å¯ä»¥å¼€å§‹å­¦ä¹ ã€‚è½¬åˆ°[é¢„æ„å»ºçš„å¼€å‘è€…è™šæ‹Ÿæœº](http://www.oracle.com/technetwork/community/developer-vm/index.html)é¡µé¢ï¼Œå‘ä¸‹æ»šåŠ¨ç›´åˆ°çœ‹åˆ°æ•°æ®åº“åº”ç”¨å¼€å‘è™šæ‹Ÿæœºã€‚

![](img/4f02e70625b9b28643a600abd6f746f4.png)

æŸ¥çœ‹è¯¥è™šæ‹Ÿæœºä¸­çš„æ‰€æœ‰å¥½ä¸œè¥¿ï¼è¯·æ³¨æ„ï¼ŒOracle æ•°æ®åº“ 12.2.0.1 åŒ…æ‹¬è®¸å¤šç”¨äºä½¿ç”¨ JSON çš„å¢å¼ºåŠŸèƒ½ã€‚è¯·å‚é˜…[æ•°æ®åº“ JSON å¼€å‘äººå‘˜æŒ‡å—](https://docs.oracle.com/database/122/ADJSN/toc.htm)äº†è§£è¯¦ç»†ä¿¡æ¯ï¼Œå¹¶åœ¨è™šæ‹Ÿæœºå¯åŠ¨å¹¶è¿è¡Œåå°è¯•ä¸€ä¸‹ã€‚

ç‚¹å‡»æ˜¾ç¤º**ä¸‹è½½å’Œè¯´æ˜**çš„é“¾æ¥ã€‚åœ¨ä¸‹ä¸€é¡µä¸Šï¼Œæ¥å—è®¸å¯åè®®ï¼Œç„¶åå•å‡»é“¾æ¥ä¸‹è½½è™šæ‹Ÿæœºã€‚

![](img/2a1382e59a7deab3b50c48cb65375e14.png)

å¦‚æœæ‚¨å°šæœªä½¿ç”¨æ‚¨çš„ Oracle å¸æˆ·è¿›è¡Œèº«ä»½éªŒè¯ï¼Œåœ¨ä¸‹è½½å¼€å§‹ä¹‹å‰ï¼Œæ‚¨å°†è¢«é‡å®šå‘åˆ°ä¸€ä¸ªé¡µé¢è¿›è¡Œèº«ä»½éªŒè¯ã€‚å¦‚æœæ‚¨æ²¡æœ‰å¸æˆ·ï¼Œåªéœ€ç‚¹å‡»è¯¥é¡µé¢ä¸Šçš„åˆ›å»ºå¸æˆ·æŒ‰é’®æ¥åˆ›å»ºæ‚¨çš„å…è´¹å¸æˆ·ã€‚

ä¸‹è½½å®Œæˆåï¼Œæ‚¨å°±å¯ä»¥å°†è™šæ‹Ÿæœºå¯¼å…¥ VirtualBox äº†ã€‚æ‰“å¼€ VirtualBoxï¼Œç‚¹å‡»**æ–‡ä»¶>å¯¼å…¥è®¾å¤‡**ã€‚ä½¿ç”¨è®¾å¤‡å¯¼å…¥å‘å¯¼é€‰æ‹©æ‚¨ä¸‹è½½çš„**developerdaysvm 2017â€“06â€“13 _ 01**æ–‡ä»¶ï¼Œç‚¹å‡»**å¯¼å…¥**ã€‚

![](img/22041f59a2f0291aa6168e3c5816ec5d.png)

ä¸€æ—¦æ‚¨æ¥å—è®¸å¯åè®®ï¼Œå¯¼å…¥è¿‡ç¨‹å°†å¼€å§‹ã€‚å‡ åˆ†é’Ÿåï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°ä»¥ä¸‹å±å¹•ã€‚

![](img/10a77528e5116cc4099e70b6bd9046b0.png)

å¦‚æœæ‚¨ç‚¹å‡»**å¼€å§‹**æŒ‰é’®ï¼Œå°†ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çª—å£ï¼Œå…¶ä¸­åŒ…å«è¿è¡Œç»ˆç«¯çš„è™šæ‹Ÿæœº(æ‚¨å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´è™šæ‹Ÿæœºçª—å£çš„å¤§å°)ã€‚

![](img/bde8e341920dcc49e4091b8a15d1c7ca.png)

ä»¥ä¸‹æ˜¯è®©æ‚¨å¼€å§‹ä½¿ç”¨è™šæ‹Ÿæœºçš„ä¸€äº›æŠ€å·§:

*   ä¸€åˆ‡çš„å¯†ç æ˜¯:**ç”²éª¨æ–‡**
*   åŒå‡»æ¡Œé¢ä¸Šçš„å¤§å¯åŠ¨å›¾æ ‡ï¼Œæ‰“å¼€ä¸€ä¸ªæµè§ˆå™¨ï¼Œå…¶ä¸­åŒ…å«å„ç§ Oracle æŠ€æœ¯çš„å®éªŒã€‚
    è¦è®¿é—® APEXï¼Œè¯·æ‰“å¼€æµè§ˆå™¨å¹¶è½¬åˆ°[http://localhost:8080/APEX](http://localhost:8080/apex)ã€‚ä½¿ç”¨ **OBE** ç™»å½•å·¥ä½œåŒºå’Œç”¨æˆ·åå­—æ®µï¼Œä½¿ç”¨ **oracle** ç™»å½•å¯†ç ã€‚
*   ä¸ºäº†èƒ½å¤Ÿåœ¨ä¸»æœºå’Œæ¥å®¾æ“ä½œç³»ç»Ÿä¹‹é—´å¤åˆ¶/ç²˜è´´å†…å®¹ï¼Œè¯·è½¬åˆ° VirtualBox èœå•æ å¹¶é€‰æ‹©**è®¾å¤‡>å…±äº«å‰ªè´´æ¿>åŒå‘**ã€‚ç›¸ä¿¡æˆ‘ï¼Œè¿™ä¸ªä¼šæ´¾ä¸Šç”¨åœºçš„ï¼

VM å¯åŠ¨å¹¶è¿è¡Œåï¼Œæˆ‘ä»¬å°±å¯ä»¥å®‰è£… Node.js å’Œ Git äº†ã€‚

# å®‰è£… Node.js å’Œ Git

åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å®‰è£… Node.js å’Œ Gitã€‚ä¸‹ä¸€æ­¥å°†ä½¿ç”¨ Git ä¸º Oracle æ•°æ®åº“å®‰è£… Node.js é©±åŠ¨ç¨‹åºã€‚

æ‰“å¼€ç»ˆç«¯å¹¶åˆ‡æ¢åˆ° root ç”¨æˆ·:

```
su - root
# password is oracle
```

ä»¥ root ç”¨æˆ·èº«ä»½è¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
yum group install "Development Tools" -y
curl --silent --location [https://rpm.nodesource.com/setup_8.x](https://rpm.nodesource.com/setup_8.x) | bash -
yum install nodejs -y
yum install git -y
```

è¿™å°±æ˜¯å…¨éƒ¨å†…å®¹ï¼ŒNode.js å’Œ Git å·²ç»å‡†å¤‡å°±ç»ªã€‚å»æ‰¾å¸æœºï¼

# å®‰è£… Node.js é©±åŠ¨ç¨‹åºå¹¶è¿è¡Œæµ‹è¯•

é©±åŠ¨ç¨‹åºçš„ç¤ºä¾‹è„šæœ¬å¯ä»¥åœ¨ Github repo ä¸­æ‰¾åˆ°ã€‚å¼€å§‹è¿è¡Œç¤ºä¾‹æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ Git ä» GitHub å…‹éš†é©±åŠ¨ç¨‹åº repoã€‚ä»é‚£é‡Œæˆ‘ä»¬å¯ä»¥å°†ç¤ºä¾‹å¤åˆ¶åˆ°æˆ‘ä»¬è‡ªå·±çš„ç›®å½•ä¸­ï¼Œæ›´æ”¹ **dbconfig.js** ä¸­çš„å¯†ç ï¼Œå®‰è£…é©±åŠ¨ç¨‹åºï¼Œå¹¶å¼€å§‹æµ‹è¯•ï¼

**å…³é—­ä¹‹å‰æ‰“å¼€çš„ç»ˆç«¯ï¼Œæ‰“å¼€ä¸€ä¸ªæ–°çš„**(ç”¨æˆ·åº”è¯¥æ˜¯ oracle)ã€‚ç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
cd ~
echo 'export LD_LIBRARY_PATH=$ORACLE_HOME/lib' >> .bashrc
source .bashrc
git clone [https://github.com/oracle/node-oracledb.git](https://github.com/oracle/node-oracledb.git)
mkdir -p projects/oracledb-examples
cp node-oracledb/examples/* projects/oracledb-examples
cd projects/oracledb-examples
sed -i -e 's/"welcome"/"oracle"/' dbconfig.js
sed -i -e 's/"localhost\/orclpdb"/"localhost\/orcl"/' dbconfig.js
npm install oracledb
node select1.js
```

è¿è¡Œåç»­ç¤ºä¾‹åªéœ€è¦`node`åè·Ÿæ‚¨æƒ³è¦è¿è¡Œçš„ç¤ºä¾‹çš„åç§°:

```
cd ~/projects/oracledb-examples
node resultset1.js
```

äº«å—ä½ çš„æ–°æ²™ç›’ï¼