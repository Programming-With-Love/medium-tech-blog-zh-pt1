<html>
<head>
<title>Kotlin’s Nothing: Its Usefulness in Generics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">科特林的虚无:它在泛型中的有用性</h1>
<blockquote>原文：<a href="https://blog.kotlin-academy.com/kotlins-nothing-its-usefulness-in-generics-5076a6a457f7?source=collection_archive---------0-----------------------#2018-04-25">https://blog.kotlin-academy.com/kotlins-nothing-its-usefulness-in-generics-5076a6a457f7?source=collection_archive---------0-----------------------#2018-04-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/2025bc7dff14aaf1f1c0c46a51061503.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wzOHXCAS6ywoQJpo."/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Image credit: <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7a0a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">本文探讨了Kotlin的<code class="fe ky kz la lb b">Nothing</code>类型在泛型中的用途。我们来看看它与Java的关系。举个具体的例子，我们来看一个链表。</p><figure class="ld le lf lg gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi lc"><img src="../Images/62565b7e1c941d19ef5a248614c41e09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F6K2liBcORMFsEyGUsrJLg.png"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Fig. 1: A LinkedList</figcaption></figure><p id="bf3d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">LinkedList包装了某种类型<code class="fe ky kz la lb b">T</code>。链表可以是</p><ol class=""><li id="1896" class="lh li in kc b kd ke kh ki kl lj kp lk kt ll kx lm ln lo lp bi translated">一个有两个属性的<code class="fe ky kz la lb b">Node&lt;T&gt;</code>:一个<code class="fe ky kz la lb b">T</code>的<code class="fe ky kz la lb b">payload</code>，一个<code class="fe ky kz la lb b">LinkedList&lt;T&gt;</code>类型的<code class="fe ky kz la lb b">next</code>；或者</li><li id="133d" class="lh li in kc b kd lq kh lr kl ls kp lt kt lu kx lm ln lo lp bi translated">一个<code class="fe ky kz la lb b">EmptyList</code>。</li></ol><p id="c464" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">一个<code class="fe ky kz la lb b">sealed class</code>强制要求<code class="fe ky kz la lb b">LinkedList</code>要么是类型1要么是类型2。</p><p id="815b" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们可以很容易地将<code class="fe ky kz la lb b">sealed class</code>和<code class="fe ky kz la lb b">Node&lt;T&gt;</code>编码如下:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lv lw l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">A LinkedList definition; the empty list is not defined.</figcaption></figure><p id="244f" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">对空列表进行编码更具挑战性。所有空列表都是一样的。因此，空列表是一个<code class="fe ky kz la lb b">object</code>。<code class="fe ky kz la lb b">EmptyList</code>也必须是<code class="fe ky kz la lb b">LinkedList&lt;T&gt;</code>的子类。我们可以试着写</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lv lw l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Code cannot compile; Kotlin objects cannot have type parameters.</figcaption></figure><p id="b2b6" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Kotlin对象不能有类型参数。上面的代码不会编译。相反，我们可以尝试移除EmptyList的类型参数。</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lv lw l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Cannot compile; reference to T on line 5 is unresolved.</figcaption></figure><p id="e865" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">代码仍然无法编译。第5行中对<code class="fe ky kz la lb b">T</code>的引用未被解析。我们必须为<code class="fe ky kz la lb b">T</code>规定一个具体的类型。</p></div><div class="ab cl lx ly hr lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ig ih ii ij ik"><p id="3ffa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ky kz la lb b">T</code>是节点封装的有效载荷的类型。参见上面的图1。相比之下，空列表不包装任何有效载荷。所以，正确的编码是</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lv lw l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Correct code: an empty list is a LinkedList&lt;Nothing&gt;.</figcaption></figure><p id="a6cb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Kotlin <code class="fe ky kz la lb b">Nothing</code>是什么类型？从Android Studio中，选择工具- &gt;科特林- &gt;科特林REPL。在REPL窗口中，输入并运行命令<code class="fe ky kz la lb b">println(Nothing::class.java)</code>。结果是</p><pre class="ld le lf lg gt me lb mf mg aw mh bi"><span id="22a0" class="mi mj in lb b gy mk ml l mm mn">println(Nothing::class.java)<br/>class java.lang.Void</span></pre><p id="0827" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">科特林的<code class="fe ky kz la lb b">Nothing</code>类型得到了Java的<code class="fe ky kz la lb b">Void</code>类型的支持。科特林的<code class="fe ky kz la lb b">Nothing</code>型表示<em class="mo">型不存在</em>型。</p></div><div class="ab cl lx ly hr lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ig ih ii ij ik"><p id="ea27" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">作为题外话，为什么不能定义一个Kotlin函数来返回<code class="fe ky kz la lb b">Nothing</code>？例如，以下代码无法编译:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lv lw l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Kotlin does not allow Nothing to be instantiated.</figcaption></figure><p id="3949" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><code class="fe ky kz la lb b">Nothing</code>的构造函数是私有的。将上面的代码与Java代码进行比较:</p><figure class="ld le lf lg gt jo"><div class="bz fp l di"><div class="lv lw l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Java does not allow Void to be instantiated.</figcaption></figure><p id="902c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Java的<code class="fe ky kz la lb b">Void</code>类有一个私有构造函数。<code class="fe ky kz la lb b">Void</code>无法实例化。我们不能回一个<code class="fe ky kz la lb b">Void</code>。因此，我们不能在Kotlin中返回一个<code class="fe ky kz la lb b">Nothing</code>似乎是合理的。</p></div><div class="ab cl lx ly hr lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ig ih ii ij ik"><p id="517c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">我们已经展示了Kotlin的<code class="fe ky kz la lb b">Nothing</code>类型是由Java的<code class="fe ky kz la lb b">Void</code>类型支持的。科特林的<code class="fe ky kz la lb b">Nothing</code>类型用于表示泛型类型不包装任何类型。该类型不存在。</p></div><div class="ab cl lx ly hr lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="ig ih ii ij ik"><p id="2ae5" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">了解卡帕头最新的重大新闻。学院，<a class="ae jz" href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a" rel="noopener ugc nofollow" target="_blank">订阅时事通讯</a>，<a class="ae jz" href="https://twitter.com/ktdotacademy" rel="noopener ugc nofollow" target="_blank">观察Twitter </a>并在媒体上关注我们。</p><figure class="ld le lf lg gt jo gh gi paragraph-image"><a href="http://eepurl.com/diMmGv"><div class="gh gi mp"><img src="../Images/5ce68714efe3efc036e06786166954ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uDqv_d5NZnPUJA0FeZqhqQ.png"/></div></a></figure><p id="4cad" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">喜欢的话记得<strong class="kc io">拍</strong>。请注意，如果您按住鼓掌按钮，您可以留下更多的掌声。</p></div></div>    
</body>
</html>