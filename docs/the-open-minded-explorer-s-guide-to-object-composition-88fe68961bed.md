# 思想开放的探索者的对象合成指南

> 原文：<https://medium.com/javascript-scene/the-open-minded-explorer-s-guide-to-object-composition-88fe68961bed?source=collection_archive---------2----------------------->

![](img/c33bdad682f716eb7046984cc8aaa28f.png)

Indiana Jones — clement127 (CC BY-NC-ND 2.0)

不同的人似乎对物体构成有不同的定义。让我们探讨一些想法，并弄清楚这是如何发生的:

**组成:**【kom-p*嗯* - **zish** - *嗯* n】

1.  把部分或元素结合成一个整体的行为。

推而广之…

**对象构成:**

1.  将物体或属性结合起来形成一个新物体的行为。

有道理，那么为什么人们会迷路呢？进入维基百科:

## 维基百科的定义

> **对象组合**(不要与函数组合混淆)是一种将简单对象或数据类型组合成更复杂对象或数据类型的方法。

这就是人们感到困惑的地方。Wikipedia 继续**描述了一种建模复合对象的特定方法**，其中新组合的对象创建了一个嵌套的树形结构，其中组件对象作为单独的分支。看起来像这样:

```
import { a, b, c } from 'components';composedObject = {
  a: a,
  b: b,
  c: c
};
```

在本例中，每个组件都有自己的属性。那么维基百科是从哪里得到的呢？它本质上是来自四人帮的[【设计模式】](http://amzn.to/1NHXzgy)一书的**复合模式**，是面向对象设计模式的规范参考。复合模式是几种组合设计模式中的一种，它还包括聚集、策略模式等等…

复合模式是很多传统面向对象的人在想到对象组合时想到的——但是**这并不是真正完整的理解**。

> 对象嵌套并不是对象组合的决定性的突出特征。

**在 Java** 中，这是创建 [**复合对象**](https://en.wikipedia.org/wiki/Composite_data_type) **最简单的方法。**这可能解释了为什么在 GoF 书中是这样建模的，如果你只使用 Java 编码，那么在这里**结束你对组合的理解就足够了。**

然而，复合对象早在 Java 和 GoF 之前就存在了，这并不是在 JavaScript 中创建复合对象的唯一方法。

## 棕色老鼠谬论

![](img/de827a8520b20a2dacf43d23bf90fa79.png)

有些人认为不同形式的对象组合不可能是对象组合，因为它们不会创建组件成为自包含子属性的对象结构。

想象一下，如果你第一次看到一只老鼠，它是一只棕色的老鼠，然后有人向你介绍一只白色的老鼠，但你争辩说它不可能是老鼠，因为它不是棕色的。

换句话说，[正前提不能引出负结论](https://en.wikipedia.org/wiki/Negative_conclusion_from_affirmative_premises)。

## 先前技术

由于许多人认为 GoF 发明了(并因此定义了)作曲，一些现有技术:

*   “通过复合设计的可靠软件”，作者 Glenford J Myers， **1975**
*   《程序设计语言及其定义:论文选》，作者:H. Bekic，C. B. Jones， **1984**
*   “C 编程语言:包括 Ansi C、可移植性和软件工程”，作者 Douglas A. Troy，Jams D. Kiper， **1989**

所有人(除此之外还有许多人)都使用更广泛的组合定义，因为它适用于各种形式的数据结构建模。

在普遍采用 OOP 之前，数据结构组合的经典例子是 C 语言` *struct`* ,它与 JavaScript 中的对象有着共同的重要特性。在“设计模式”出现之前，许多书籍都将它作为复合数据类型引用。

在从简单数据结构构建复杂数据结构的上下文中，复合结构和组合是流行编程语言行话**的一部分，几十年前“设计模式”**还在 GoF 的眼中闪烁。

我是怎么知道这些的？在“设计模式”发布之前，我已经编程多年了，对此我记忆犹新。在狗夫把我介绍给棕色的老鼠之前，我就看到了白色的老鼠。

*复合模式理解*复合引入了一个与 JavaScript 中的大多数实际用例不太相关的复合特性:

对象嵌套并不是对象组合的决定性的显著特征。

将组成部分组合起来形成一个新对象的行为是。

甚至 GoF 也在更广泛的意义上使用组合，定义了几种组合设计模式。在这本书的开头，他们引入了一句名言“偏爱对象组合而不是类继承”，他们并没有特别提到**复合模式**这种对组合的误解就是在这里产生的，他们指的是任何对于手头的问题来说是正确的组合设计模式。

他们争论的是相对于严格的等级分类法的灵活性。不这样想是完全没有意义的。

坚持对对象组合的狭隘的、不经常需要的、面向 Java 的理解不会让你成为更好的程序员。比起僵化的等级制度，更倾向于灵活性。

> “吸收有用的，抛弃无用的。加入你自己独有的东西。”——李小龙

## JavaScript 支持对象串联(又名串联继承)

使用[对象连接](https://en.wikipedia.org/wiki/Prototype-based_programming#Concatenation)，可以将多个组件对象的属性混合到新的复合对象的根中。看起来像这样:

```
import { a, b, c } from 'components';composedObject = Object.assign({}, a, b, c);
```

你不必使用 *`Object.assign()`。*有很多方法可以实现目标，[包括邮票](/javascript-scene/introducing-the-stamp-specification-77f8911c2fee)。

**物体构成**:

1.  将物体或属性结合起来形成一个新物体的行为。

无论您使用聚合、对象嵌套还是对象连接，都没有关系。重要的是从多个组件对象组合新对象，而不是一次性继承整个层次结构。由更小的组件组成的结果是[一个复合对象](https://en.wikipedia.org/wiki/Composite_data_type)。

> "优先选择对象组合而不是类继承."~ GoF [“设计模式”](http://amzn.to/1NHXzgy)

现在去用合成制作更灵活的软件吧。

> [通过 Eric Elliott](https://ericelliottjs.com/) 了解更多关于 OO 原型的信息

***Eric Elliott****著有* [*【编程 JavaScript 应用】*](http://pjabook.com) *(O'Reilly)，以及* [*【学习 JavaScript 通用 App 开发用节点，ES6，&*](https://leanpub.com/learn-javascript-react-nodejs-es6/)*。他为 Adobe Systems 的******尊巴健身*******华尔街日报*******【ESPN*******BBC****等顶级录音师贡献了软件经验******

**他大部分时间都在旧金山湾区和世界上最美丽的女人在一起。**