<html>
<head>
<title>Avoiding Pitfalls in Microservice Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">避免微服务架构中的陷阱</h1>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/avoiding-pitfalls-in-microservice-architecture-ba038340f8c1?source=collection_archive---------2-----------------------#2016-09-22">https://medium.com/walmartglobaltech/avoiding-pitfalls-in-microservice-architecture-ba038340f8c1?source=collection_archive---------2-----------------------#2016-09-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/cdfc9d670a1e187f3f03b5526cd5cd8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aNHCNwf5nHzS3Oxu-3URXw.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Photo credit: <a class="ae hu" href="https://pixabay.com/en/tiny-people-core-apple-apple-half-700921/" rel="noopener ugc nofollow" target="_blank">Bella67</a></figcaption></figure><div class=""/><p id="e777" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在开发复杂的web应用程序时，工程师总是需要独立地计划系统的每个组件的扩展和发展。与此同时，他们还需要确保最终产品按预期工作，并且易于调试。</p><p id="184e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">微服务的主要优势包括:</p><p id="6e66" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">a)服务的独立发展和版本控制</p><p id="44b9" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">b)可以使用不同的技术和框架</p><p id="2803" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">c)易于测试单个组件</p><p id="b3d3" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">d)每项服务都可以独立扩展</p><p id="ebf1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">e)服务可以独立部署、监控和发布</p><p id="3f58" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">有一句话是这样说的:“过度发挥优势可能会成为一个弱点。”这也适用于建筑。</p><p id="6063" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在推进微服务架构时，您需要注意以下陷阱:</p><figure class="jt ju jv jw fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es js"><img src="../Images/f69c00ce129ad6e167dc8e059f1f5080.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*57r6N16hZNjD_P_huGeLHg.png"/></div></div></figure><p id="dbcf" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为了避免微服务架构带来的缺陷，请回顾以下几点:</p><p id="3d19" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy">启动单片</strong></p><p id="cbf3" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在启动平台时，很容易过度设计微服务并做出错误的假设。</p><p id="b211" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">微服务在以下方面是一项重大投资:</p><p id="0ab0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">a)采购调试微服务的工具</p><p id="639b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">b)创建测试集成解决方案的环境</p><p id="5b79" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">c)采购开发运维工具来部署、监控和管理服务</p><p id="7148" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">对于沃尔玛的搜索，类似于网飞、脸书和耐克等。我们从单片应用程序开始，只有在很好地理解了业务需求和功能之后，才开始使用微服务架构。</p><p id="f514" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy">划分权利</strong></p><p id="93f0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">a)服务具有低耦合和高内聚</p><p id="7be8" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">b)服务可以独立发展——不应该要求同时升级服务。每次服务升级都应该是向后兼容的。</p><p id="aa3d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">c)团队结构支持服务部门—确保服务所有权与团队结构同步。<a class="ae hu" href="https://en.wikipedia.org/wiki/Conway%27s_law" rel="noopener ugc nofollow" target="_blank">康威定律</a>站在你这边。</p><p id="96cf" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">d)确保记录源设计与微服务部门同步。服务之间不共享数据库，导致复杂的同步和分布式事务问题。</p><p id="3004" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy">工具</strong></p><p id="565c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">拥有合适的工具来部署、测试、监控和发布微服务集成环境。</p><p id="d001" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy">集成所有权</strong></p><p id="c5cd" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">大多数情况下，团队最终拥有各自的服务，集成最终会受到影响。确保集成层和架构有明确的归属。每个人都应该清楚集成的职责和责任。如果你有跨团队的架构师或高级工程师，那么建议让他们成为集成和架构的所有者，因为这对我们很有效。</p><p id="ec35" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy">性能&amp;可扩展性</strong></p><p id="cdc7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">a)确保产品服务的整体延迟和吞吐量不会因集成问题而降低。</p><p id="cc3e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">b)每个服务都可以伸缩，以实现系统的整体可伸缩性承诺。</p><p id="932b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">c)关注平台的整体CPU、内存、网络和磁盘资源消耗。确保由于服务的激增，大量的重复计算和数据处理不会显著增加平台的资源消耗。</p><p id="0605" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy">使用的技术</strong></p><p id="026d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">微服务不是将多种技术引入一个平台的借口。</p><p id="be0a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">每项新技术或语言投入生产都需要:</p><p id="c893" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">1)开发工具</p><p id="d6c8" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">2)测试、监控和部署框架</p><p id="78cd" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">3)技术和语言堆栈的升级和维护</p><p id="e6a7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">因此，在平台中添加新的技术栈或语言，非线性地增加了复杂性并提高了系统的维护成本。</p><p id="57c3" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">深入探究为什么平台中需要两三种以上的技术或语言来解决类似的问题。</p><p id="dbce" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果需要新的技术体系，在添加新的技术体系之前，看看旧的技术体系是否可以淘汰。</p><p id="fc4f" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hy">结论</strong></p><p id="d95e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">微服务架构在扩展和构建复杂系统方面有很多好处。但是在设计服务的时候，我建议记住所讨论的要点。</p><p id="e500" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里有几篇文章可以帮助你做出正确的选择。如果我能帮助回答你可能有的任何问题，请留下评论。感谢阅读。</p><div class="hg hh ez fb hi jx"><a href="https://www.microservices.com/talks/dont-build-a-distributed-monolith/" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab dw"><div class="jz ab ka cl cj kb"><h2 class="bd hy fi z dy kc ea eb kd ed ef hw bi translated">不要建造一个分布式的整体| Microservices.com</h2><div class="ke l"><h3 class="bd b fi z dy kc ea eb kd ed ef dx translated">所以我今天的目标是说服你们所有人不要用二进制依赖来耦合你们的系统。</h3></div><div class="kf l"><p class="bd b fp z dy kc ea eb kd ed ef dx translated">www.microservices.com</p></div></div><div class="kg l"><div class="kh l ki kj kk kg kl ho jx"/></div></div></a></div><div class="hg hh ez fb hi jx"><a href="https://www.infoq.com/articles/Diagnose-Microservice-Performance-Anti-Patterns" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab dw"><div class="jz ab ka cl cj kb"><h2 class="bd hy fi z dy kc ea eb kd ed ef hw bi translated">定位常见的微服务性能反模式</h2><div class="ke l"><h3 class="bd b fi z dy kc ea eb kd ed ef dx translated">在上一篇文章中，我们讨论了如何在Java代码中诊断常见的数据库性能热点。在…</h3></div><div class="kf l"><p class="bd b fp z dy kc ea eb kd ed ef dx translated">www.infoq.com</p></div></div><div class="kg l"><div class="km l ki kj kk kg kl ho jx"/></div></div></a></div><div class="hg hh ez fb hi jx"><a href="http://a16z.com/2016/09/01/microservices/" rel="noopener  ugc nofollow" target="_blank"><div class="jy ab dw"><div class="jz ab ka cl cj kb"><h2 class="bd hy fi z dy kc ea eb kd ed ef hw bi translated">a16z播客:关于微服务的一切</h2><div class="ke l"><h3 class="bd b fi z dy kc ea eb kd ed ef dx translated">“渐进式变革可能是个不错的理论，但在实践中，你必须有一根足够大的棍子来打击每个人…</h3></div><div class="kf l"><p class="bd b fp z dy kc ea eb kd ed ef dx translated">a16z.com</p></div></div><div class="kg l"><div class="kn l ki kj kk kg kl ho jx"/></div></div></a></div></div></div>    
</body>
</html>