<html>
<head>
<title>Is stream better than an iterative approach (e.g. For loop)?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">流比迭代方法更好吗(例如对于循环)？</h1>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/is-stream-better-than-an-iterative-approach-like-for-loop-624481d8ccae?source=collection_archive---------2-----------------------#2021-05-31">https://medium.com/walmartglobaltech/is-stream-better-than-an-iterative-approach-like-for-loop-624481d8ccae?source=collection_archive---------2-----------------------#2021-05-31</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/69e1e6bb4a0f38d270082529f1a38faa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*feg3Ii110jswahXwg18Q-g.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Source: <a class="ae it" href="https://www.incimages.com/uploaded_files/image/1920x1080/getty_506903004_200013332000928076_348061.jpg" rel="noopener ugc nofollow" target="_blank">https://www.incimages.com/uploaded_files/image/1920x1080/getty_506903004_200013332000928076_348061.jpg</a></figcaption></figure><p id="c49a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在当今数据丰富和集成的世界中，我们经常与流打交道，尤其是如果您是java程序员。然而，我们当中有多少人(java程序员)知道流的内部工作方式，或者对流是否比简单的<strong class="iw hi"> For </strong>循环更好有什么看法？</p><p id="1c9b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果你知道这些事情，那么我相信这个博客可能与你无关。如果没有，那我们再深入挖掘一下。</p><p id="008d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">既然我问了你这个问题，那么让我们从每个循环的<strong class="iw hi">内部工作开始。<br/><strong class="iw hi"><em class="js">for(int x:list)</em></strong><br/>这是一个包裹了内部迭代代码的糖衣行。</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="7ac5" class="kc kd hh jy b fi ke kf l kg kh"><em class="js">Iterator&lt;Integer&gt; iterator = list.iterator();<br/> while(iterator.hasNext()){<br/> Integer x=iterator.next();<br/> }</em></span></pre><p id="2f48" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这就是当我们为循环调用<strong class="iw hi">时所发生的情况。这背后的逻辑是迭代器是在你的应用程序代码上创建的，对于每次迭代，它将去收集并收集它需要的任何东西，然后返回到应用程序代码。<br/>如果我们使用For循环，就不可能以并行方式处理集合的元素。使用For循环，不容易实现在其上执行多个操作的东西。例如，如果你想把一个列表的元素改为大写，从中过滤出一些东西，然后把它存储在一个列表中，那么这是很有挑战性的。</strong></p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="6d30" class="kc kd hh jy b fi ke kf l kg kh">List&lt;String&gt; updatedList=new ArrayList&lt;&gt;();<br/>for(String value:list){<br/>    String valueInUpperCase = value.toUpperCase();<br/>    if(isMatching(valueInUpperCase)){<br/>        updatedList.add(valueInUpperCase);<br/>    }<br/>}</span></pre><p id="aa8f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">所有这些困难都存在，因为迭代是在代码上完成的，而不是在集合上。这里stream带有简单的逻辑，迭代将在内部通过集合完成，而不是在应用程序代码上。用技术术语来说，这是内部迭代，而for循环是应用程序代码的外部迭代。这种逻辑将缓解上述两个问题。由于流是在集合内部进行迭代，因此可以快速并行处理，因为一个元素不依赖于另一个元素，而且对于流，我们可以很容易地进行多个操作。</p><p id="61da" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">对于同一个示例，单个For循环很难做到，我们可以调用streams并将其转换为大写，然后根据需要进行过滤。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="8aed" class="kc kd hh jy b fi ke kf l kg kh"><em class="js">list.stream().map(x -&gt;x.toUpperCase()).filter(ismatching()).collect(Collectors.toList());</em><br/> </span></pre><p id="ff43" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">与For循环实现相比，它的可读性更好。</p><p id="d9df" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">考虑到所有这些因素，您可能会认为我们应该从java中移除For循环，在任何地方都使用streams。然而，事实并非如此。溪流也有它的缺点。</p><blockquote class="ki kj kk"><p id="ab95" class="iu iv js iw b ix iy iz ja jb jc jd je kl jg jh ji km jk jl jm kn jo jp jq jr ha bi translated"><strong class="iw hi">性能</strong> - &gt;当然，就性能而言，简单的For循环比stream要好，因为streams有相当多的开销。<br/> <strong class="iw hi">可读性</strong> - &gt;一个简单的for循环我们早就熟悉了，和For循环比起来，streams也没那么老。这是我们认为简单For循环可读性更强的原因之一，在某种程度上，这是正确的。例如，当我们在循环中使用2，一个在另一个里面，它是可读的。然而，当我们必须在流中做同样的事情时，你会觉得它很复杂。所以我认为这完全取决于我们对溪流的熟悉程度。简单的For循环比流更容易调试，因为传统的调试器没有配备流。</p></blockquote><p id="fa4c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">总之，我觉得streams和For loop各有所长，我们开发人员需要根据自己的需求考虑使用哪一个。我们需要做好相关的权衡，并决定何时使用流，何时进行for循环。</p></div></div>    
</body>
</html>