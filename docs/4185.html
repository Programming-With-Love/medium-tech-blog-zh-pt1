<html>
<head>
<title>Static Reprompts came back to SDK v2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">静态重新提示回到SDK v2</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/static-reprompts-came-back-to-sdk-v2-86539d8dbdb2?source=collection_archive---------7-----------------------#2018-08-08">https://medium.com/google-developer-experts/static-reprompts-came-back-to-sdk-v2-86539d8dbdb2?source=collection_archive---------7-----------------------#2018-08-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="c60f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用户可以通过谷歌助手进行许多动作的对话。尤其是，用声音说话是一种新的模式。许多开发人员期望大多数用户持续稳定地与动作进行交互。然而，它的期望是错误的。用户可以在对话中随时离开助手。也就是说，操作需要确认用户是否还在那里。</p><p id="a9ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">谷歌的行动为开发者提供了一个名为“重新提示”的功能。当处理用户没有为您的操作提供输入的情况时，开发人员可以使用这个重新提示特性。例如，如果用户在5秒钟内没有提供任何输入，该动作可以向用户发送一些短语，例如“你好？你还在吗？”。此重新提示功能在以下官方文档中有所描述:</p><div class="jc jd ez fb je jf"><a href="https://developers.google.com/actions/assistant/reprompts" rel="noopener  ugc nofollow" target="_blank"><div class="jg ab dw"><div class="jh ab ji cl cj jj"><h2 class="bd hi fi z dy jk ea eb jl ed ef hg bi translated">重新提示|对Google的操作| Google开发者</h2><div class="jm l"><h3 class="bd b fi z dy jk ea eb jl ed ef dx translated">默认情况下，当您向助手返回响应时，系统会使用默认重新提示来要求用户重复或…</h3></div><div class="jn l"><p class="bd b fp z dy jk ea eb jl ed ef dx translated">developers.google.com</p></div></div><div class="jo l"><div class="jp l jq jr js jo jt ju jf"/></div></div></a></div><p id="ce69" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">开发人员可以选择一些方法来处理用户没有输入的情况。实际上，有三种方法:</p><ul class=""><li id="321d" class="jv jw hh ig b ih ii il im ip jx it jy ix jz jb ka kb kc kd bi translated"><a class="ae ke" href="https://developers.google.com/actions/assistant/reprompts#system_default_reprompts" rel="noopener ugc nofollow" target="_blank">系统默认重新提示</a></li><li id="9153" class="jv jw hh ig b ih kf il kg ip kh it ki ix kj jb ka kb kc kd bi translated"><a class="ae ke" href="https://developers.google.com/actions/assistant/reprompts#dynamic_reprompts" rel="noopener ugc nofollow" target="_blank">动态提示</a></li><li id="32f2" class="jv jw hh ig b ih kf il kg ip kh it ki ix kj jb ka kb kc kd bi translated">静态重新提示</li></ul><p id="481f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请阅读官方文件，了解系统默认重新提示和动态重新提示的更多信息。目前，建议使用动态重新提示。使用动态重新提示，当用户不说话时，动作可以从Google上的动作接收到<code class="du kk kl km kn b">NO_INPUT</code>事件。开发人员可以在收到事件后以任何方式处理。它非常灵活。</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div class="er es ko"><img src="../Images/08b7ef7bc2c683167b0a949ff0434608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*BLj11XVydTOgQxS6sNMCCw.png"/></div></figure><h1 id="737e" class="kv kw hh bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">静态再现失败</h1><p id="5760" class="pw-post-body-paragraph ie if hh ig b ih lt ij ik il lu in io ip lv ir is it lw iv iw ix lx iz ja jb ha bi translated">曾几何时，有静态重新提示功能。我猜大多数开发者都使用了这个特性。特别是，当actions-on-google-nodejs SDK的版本是1时，静态重新提示特性是非常简单和方便的方式。</p><p id="eefc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用SDK v1，actions能够同时发送一个正常的回复短语和一些用于无输入情况的短语。下面的代码是示例:</p><pre class="kp kq kr ks fd ly kn lz ma aw mb bi"><span id="5bbe" class="mc kw hh kn b fi md me l mf mg">app.ask(<br/>  'Which is your favorite color?',<br/>  [<br/>    'Hello?',<br/>    'Are you still there?',<br/>    'Talk to you later. Bye.'<br/>  ]<br/>);</span></pre><p id="3f69" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">开发人员能够将静态重新提示指定为<code class="du kk kl km kn b">ask()</code>函数的第二个参数。这很简单。当用户什么也不说时，Google上的Actions会自动要求用户给出第二个参数的提示。特别是，当说出第三个短语时，对话也就结束了。</p><p id="0b26" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有一天，actions-on-google-nodejs SDK的第二版发布了。与v1相比，新版本有许多变化。其中一个变化是…删除静态重新提示功能！</p><p id="5d4e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在v2发布的同时，从官方文档中删除了静态重新提示功能部分。也就是说，如果开发人员希望将SDK从v1更新到v2，并且如果操作需要处理无输入的情况，他们只能选择使用动态重新提示…</p><p id="3350" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">那时，静态重新提示功能已经不存在了。</p><h1 id="eee6" class="kv kw hh bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">静态报告又回来了</h1><p id="54e6" class="pw-post-body-paragraph ie if hh ig b ih lt ij ik il lu in io ip lv ir is it lw iv iw ix lx iz ja jb ha bi translated">正如我们在上面看到的，静态重新提示非常简单。但是，动态再现并不简单。开发者需要接收<code class="du kk kl km kn b">NO_INPUT</code>事件，也需要实现事件处理程序。就是迁移成本有点大。</p><p id="7fae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">很可能，我想很多开发人员都觉得迁移很复杂。</p><p id="c84a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">实际上，一些开发人员对SDK的GitHub存储库中删除的静态重新提示功能发表了意见。发布的问题如下:</p><div class="jc jd ez fb je jf"><a href="https://github.com/actions-on-google/actions-on-google-nodejs/issues/155" rel="noopener  ugc nofollow" target="_blank"><div class="jg ab dw"><div class="jh ab ji cl cj jj"><h2 class="bd hi fi z dy jk ea eb jl ed ef hg bi translated">v2库中的静态重新提示？问题#155谷歌上的操作/谷歌节点上的操作</h2><div class="jm l"><h3 class="bd b fi z dy jk ea eb jl ed ef dx translated">我没看到https://developers . Google . com/actions/reference/nodejs/lib-v1-migration中讨论过这个。在v1中…</h3></div><div class="jn l"><p class="bd b fp z dy jk ea eb jl ed ef dx translated">github.com</p></div></div><div class="jo l"><div class="mh l jq jr js jo jt ju jf"/></div></div></a></div><p id="f6c9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">至少，开发人员必须能够以低成本将操作迁移到SDK v2。为了实现这一点，如果架构的变化是零或尽可能少，那会更好。而且，从静态重新提示迁移到动态重新提示的成本会有点大。也就是说，静态重新提示应该由SDK v2提供。</p><p id="d760" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">幸运的是，SDK v2的静态重新提示的实现已经提出。并且，这个提议被接受了。</p><div class="jc jd ez fb je jf"><a href="https://github.com/actions-on-google/actions-on-google-nodejs/issues/185" rel="noopener  ugc nofollow" target="_blank"><div class="jg ab dw"><div class="jh ab ji cl cj jj"><h2 class="bd hi fi z dy jk ea eb jl ed ef hg bi translated">提议:支持静态重新提示问题# 185 actions-on-Google/actions-on-Google-nodejs</h2><div class="jm l"><h3 class="bd b fi z dy jk ea eb jl ed ef dx translated">我的建议是:引入一个新的NoInputPrompt类，并可以使用该类指定在没有输入时的提示，直到…</h3></div><div class="jn l"><p class="bd b fp z dy jk ea eb jl ed ef dx translated">github.com</p></div></div><div class="jo l"><div class="mi l jq jr js jo jt ju jf"/></div></div></a></div><p id="df64" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在SDK v2的最新版本(从v2.3.0开始)中，开发人员可以通过SDK v2使用静态重新提示功能。</p><p id="0625" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae ke" href="https://github.com/actions-on-google/actions-on-google-nodejs/releases/tag/v2.3.0" rel="noopener ugc nofollow" target="_blank">https://github . com/actions-on-Google/actions-on-Google-nodejs/releases/tag/v 2 . 3 . 0</a></p><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="mk ml di mm bf mn"><div class="er es mj"><img src="../Images/e6adfd6e68aaef37b80b10cf304b4893.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rpSATtNGtqDX-HulnyVdjg.png"/></div></div></figure><p id="072c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要使用SDK v2中的静态重新提示特性，可以使用<code class="du kk kl km kn b"><a class="ae ke" href="https://actions-on-google.github.io/actions-on-google-nodejs/classes/conversation.conversation-1.html" rel="noopener ugc nofollow" target="_blank">Conversation&lt;TUserStorage&gt;</a></code>类的新属性<code class="du kk kl km kn b"><a class="ae ke" href="https://actions-on-google.github.io/actions-on-google-nodejs/classes/conversation.conversation-1.html#noinputs" rel="noopener ugc nofollow" target="_blank">noInputs</a></code>。与在SDK v1中将短语指定为<code class="du kk kl km kn b">app.ask()</code>的第二个参数不同，开发者不能将短语指定给<code class="du kk kl km kn b">conv.ask()</code>函数。相反，开发人员可以将短语指定给<code class="du kk kl km kn b">conv.noInputs</code>属性。以下代码是示例:</p><pre class="kp kq kr ks fd ly kn lz ma aw mb bi"><span id="418e" class="mc kw hh kn b fi md me l mf mg">app.intent('actions.intent.MAIN', conv =&gt; {<br/>  conv.noInputs = [<br/>    'Are you still there?',<br/>    'Hello?',<br/>    new SimpleResponse({<br/>      text: 'Talk to you later. Bye!',<br/>      speech: '&lt;speak&gt;Talk to you later. Bye!&lt;/speak&gt;'<br/>    })<br/>  ]<br/>  conv.ask('What's your favorite color?')<br/>})</span></pre><p id="c888" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du kk kl km kn b">conv.noInputs</code>属性可以有一个字符串数组和/或SimpleResponse对象。规范几乎和SDK v1一样，就是开发者可以给<code class="du kk kl km kn b">noInputs</code>属性指定三个短语，当第三个短语说了，对话就关闭了。</p><p id="2344" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过使用这个<code class="du kk kl km kn b">conv.noInputs</code>属性，开发者可以迁移使用静态重新提示的动作，而不需要任何架构改变。</p><h1 id="cdb7" class="kv kw hh bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">结论</h1><p id="2ba3" class="pw-post-body-paragraph ie if hh ig b ih lt ij ik il lu in io ip lv ir is it lw iv iw ix lx iz ja jb ha bi translated">开发人员可以将SDK v2的静态重新提示功能用于迁移目的。但是，开发人员应该认识到动态重新提示是被提倡的。如果没有特殊原因，请使用动态重新提示来处理无法输入的情况。</p></div></div>    
</body>
</html>