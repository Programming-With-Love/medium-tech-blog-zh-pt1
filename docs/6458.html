<html>
<head>
<title>Adding Authentication To React Redux Firebase App</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">向React Redux Firebase应用程序添加身份验证</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/adding-authentication-to-react-redux-firebase-app-f0efcb1c519a?source=collection_archive---------0-----------------------#2018-05-01">https://medium.com/quick-code/adding-authentication-to-react-redux-firebase-app-f0efcb1c519a?source=collection_archive---------0-----------------------#2018-05-01</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/0181e8bb2a04979c9fda22c8213be9f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ou27uef_kSZs9WBJhQ1Wnw.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/photos/lmFJOx7hPc4?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Micah Williams</a> on <a class="ae it" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2e7e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在<a class="ae it" rel="noopener" href="/quick-code/how-to-integrate-react-redux-and-firebase-in-3-simple-steps-c44804a6af38">这篇文章</a>中，我们学习了关于React Redux和Firebase集成的基础知识，并以工作待办应用程序结束。在本文中，我们将采用它并为其添加身份验证。为此，我们需要执行以下步骤:</p><ul class=""><li id="ccb7" class="js jt hh iw b ix iy jb jc jf ju jj jv jn jw jr jx jy jz ka bi translated">添加登录组件</li><li id="2056" class="js jt hh iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">为验证状态、登录和注销添加监听程序</li><li id="a4a8" class="js jt hh iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">在Redux中跟踪验证状态</li><li id="428c" class="js jt hh iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">确保用户只有在登录后才能访问应用程序</li><li id="7c7c" class="js jt hh iw b ix kb jb kc jf kd jj ke jn kf jr jx jy jz ka bi translated">在firebase控制台中更改数据库规则</li></ul><h2 id="3961" class="kg kh hh bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">添加登录组件</h2><p id="7716" class="pw-post-body-paragraph iu iv hh iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">该组件将处理两件事:</p><ol class=""><li id="76a9" class="js jt hh iw b ix iy jb jc jf ju jj jv jn jw jr lg jy jz ka bi translated">它将有一个按钮，当用户点击它，他将使用谷歌OAuth登录。</li><li id="a0b1" class="js jt hh iw b ix kb jb kc jf kd jj ke jn kf jr lg jy jz ka bi translated">如果用户已经登录，它会将用户重定向到应用程序</li></ol><figure class="lh li lj lk fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="a1f7" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="ln">渲染</em>负责<strong class="iw hi">点1 </strong>而<em class="ln">组件将更新</em>负责<strong class="iw hi">点2 </strong>。你也可以从<a class="ae it" href="https://blog.coursesity.com/free-react-native-courses/" rel="noopener ugc nofollow" target="_blank"> best React native课程</a>中学习。</p><h2 id="2a61" class="kg kh hh bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">正在为验证状态添加监听程序</h2><p id="83e3" class="pw-post-body-paragraph iu iv hh iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">这里我们需要3个函数。一个监听用户登录或注销。一个用于实际登录用户，另一个用于注销用户。我们需要在Firebase配置中创建新的引用，然后用它来添加这些函数。</p><figure class="lh li lj lk fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><figure class="lh li lj lk fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><p id="7bf2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><code class="du lo lp lq lr b">signIn</code>和<code class="du lo lp lq lr b">signOut</code>只是改变用户的状态。当状态改变时，fetchUser将得到通知，并更新redux存储。如果用户登录，它将使用用户对象更新它。如果用户退出，它会用<code class="du lo lp lq lr b">null</code>更新。现在我们需要实际跟踪存储中的身份验证状态</p><h2 id="132b" class="kg kh hh bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">添加受保护的路由</h2><p id="1c49" class="pw-post-body-paragraph iu iv hh iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">我们需要确定一件事。当用户未被认证时。并试图访问私有路由。那么他或她应该被重定向到登录。我们可以用高阶元件来实现这一点。该组件将简单地接受另一个组件，并在用户通过身份验证时呈现它。如果没有，它将重定向到登录页面。</p><figure class="lh li lj lk fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><figure class="lh li lj lk fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><h2 id="d7db" class="kg kh hh bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">在Redux中跟踪身份验证状态</h2><p id="4e2d" class="pw-post-body-paragraph iu iv hh iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">我们只需要添加新的reducer来处理auth状态，然后将其添加到<code class="du lo lp lq lr b">combineReducers</code>。</p><figure class="lh li lj lk fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><figure class="lh li lj lk fd ii"><div class="bz dy l di"><div class="ll lm l"/></div></figure><h2 id="e957" class="kg kh hh bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">在Firebase中更改数据库规则</h2><p id="d094" class="pw-post-body-paragraph iu iv hh iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">现在，当我们将身份验证添加到我们的应用程序中时，改变数据库的规则将是一件好事。规则会说，只有登录的用户才能访问它。要改变它，去你的Firebase控制台，并设置为这张图片。</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ls"><img src="../Images/14267000e6b69f8e1c138c9e2e145106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*96t2uOAo9dC29qkY-H7Ptw.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Database rules in firebase</figcaption></figure><h2 id="71af" class="kg kh hh bd ki kj kk kl km kn ko kp kq jf kr ks kt jj ku kv kw jn kx ky kz la bi translated">总结</h2><p id="1fc3" class="pw-post-body-paragraph iu iv hh iw b ix lb iz ja jb lc jd je jf ld jh ji jj le jl jm jn lf jp jq jr ha bi translated">就是这样。没用多长时间。我们在几分钟内就让Google OAuth开始工作了。现在，我们的应用程序已经过身份验证并受到保护。现在，用户可以登录、创建新任务并完成它们。源代码可以在<a class="ae it" href="https://github.com/codewithbernard/react-redux-firebase" rel="noopener ugc nofollow" target="_blank"> GitHub </a>获得。随意克隆它，扩展它，玩它。如果你有任何问题，不要犹豫，问。如果你喜欢这个故事，请随意鼓掌。感谢您的时间，下次再见。</p></div></div>    
</body>
</html>