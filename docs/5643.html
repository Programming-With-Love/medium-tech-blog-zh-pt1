<html>
<head>
<title>Integrating Oracle Cloud Infrastructure with Oracle Access Manager 12c</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Oracle云基础架构与Oracle Access Manager 12c集成</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/integrating-oracle-cloud-infrastructure-with-oracle-access-manager-12c-aafbb16108ca?source=collection_archive---------1-----------------------#2019-08-20">https://medium.com/oracledevs/integrating-oracle-cloud-infrastructure-with-oracle-access-manager-12c-aafbb16108ca?source=collection_archive---------1-----------------------#2019-08-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="9d9a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">一份技术白皮书，2019年8月</em></p><p id="fc6e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Oracle云基础设施(OCI)是一套互补的云服务，使您能够在高度可用的托管环境中构建和运行广泛的应用程序和服务。在过去的几年中，OCI的功能迅速增加，其中一项是安全部门通过SAML 2.0联盟增强了与外部身份提供者(IdPs)的集成。</p><p id="11b1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本文档重点介绍了作为身份提供者与Oracle Access Manager 12c (OAM)的集成，并为其实施提供了分步说明。</p><h2 id="07b5" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">实施集成</h2><p id="4e09" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">以下产品用于演示集成:</p><ul class=""><li id="7138" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">Oracle Access Manager 12c(12 . 2 . 1 . 3 . 0)，请参见Oracle技术支持<a class="ae km" href="http://support.oracle.com/rs?type=doc&amp;id=736372.1" rel="noopener ugc nofollow" target="_blank">文档ID 736372.1 </a>了解最新补丁历史的详细信息。</li><li id="9412" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">具有管理访问权限的Oracle云基础设施租赁。</li></ul><p id="726a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第一步:</strong>以管理员权限登录OCI控制台。点击位于左上角的抽屉图标，打开<strong class="ig hi">治理和管理</strong>下的侧栏菜单，选择<strong class="ig hi">身份- &gt;联盟</strong>。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ks"><img src="../Images/c03eeb2dd3819fe08794021cc10912df.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SbXgKW_URK8ZEDcKB5nOMg.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Figure 1. OCI Management Console</figcaption></figure><p id="12d0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第二步:</strong>在<strong class="ig hi">联盟</strong>页面中，找到关于OCI联盟元数据的文字说明，点击<strong class="ig hi">下载本文档</strong>链接，在浏览器中打开内容，继续保存为XML文档，例如<strong class="ig hi"> oci-metadata.xml </strong>。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ks"><img src="../Images/0253612f12d316395a3e65119ee5bfc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4FvChJrVYMz-Z861ujnJgw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Figure 2. OCI Federation Page</figcaption></figure><p id="ee32" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤3: </strong>使用具有管理员权限的用户登录OAM控制台。点击<strong class="ig hi">配置</strong>，显示<strong class="ig hi">发射台</strong>页面，在<strong class="ig hi">设置</strong>磁贴下，点击<strong class="ig hi">查看- &gt;联盟</strong>。在<strong class="ig hi">联盟设置</strong>页面点击<strong class="ig hi">导出SAML 2.0元数据</strong>下载OAM元数据文件，重命名为<strong class="ig hi"> oam-metadata.xml </strong>。编辑文件并删除部分<strong class="ig hi">&lt;MD:role descriptor…&lt;/MD:role descriptor&gt;</strong>。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es li"><img src="../Images/0fef095ce724f51adfe6b924c5d5daf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ynurSsdOVkD9DzWB1m5iag.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Figure 3. Accesing Configuration Launch Pad</figcaption></figure><div class="kt ku kv kw fd ab cb"><figure class="lj kx lk ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><img src="../Images/b95e9af54eb358bac3c5e14e90852bce.png" data-original-src="https://miro.medium.com/v2/resize:fit:522/format:webp/1*FipZC4tcWfWmsVaMl_0fNQ.png"/></div></figure><figure class="lj kx lp ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><img src="../Images/636eec25f9da0c0da8d8f5208f9b7d62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1480/format:webp/1*ez4zW4B_wyX2xgo_B7GI1Q.png"/></div><figcaption class="le lf et er es lg lh bd b be z dx lq di lr ls">Figures 4 and 5. Accesing Federation Settings Page</figcaption></figure></div><p id="1b48" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤4: </strong>在OAM控制台中点击<strong class="ig hi">联盟</strong>，显示<strong class="ig hi">发射台</strong>页面，在<strong class="ig hi">联盟</strong>磁贴下，点击<strong class="ig hi"> + - &gt;创建服务提供商合作伙伴</strong>，<strong class="ig hi"> </strong>显示服务提供商页面，继续将OCI租赁定义为服务提供商，例如:</p><ul class=""><li id="bcd2" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">输入<strong class="ig hi"> MyOCI </strong>作为名称</li><li id="6fb7" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">点击标签<strong class="ig hi">元数据文件</strong>旁边的<strong class="ig hi">浏览</strong>按钮，继续选择<strong class="ig hi"> oci-metadata.xml </strong>文件。</li><li id="b3c2" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">对于NameID格式，选择<strong class="ig hi">持久</strong></li><li id="6593" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">对于NameID值，选择<strong class="ig hi">用户ID存储属性</strong>，并输入<strong class="ig hi">邮件</strong></li><li id="2151" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">对于属性配置文件，确认默认值<strong class="ig hi">sp-属性配置文件</strong></li><li id="bdad" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">点击<strong class="ig hi">保存</strong>保存更改</li></ul><div class="kt ku kv kw fd ab cb"><figure class="lj kx lt ll lm ln lo paragraph-image"><img src="../Images/4edb609b60b0286b3796f25cd37f3287.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*N9MCkRWmimcUqNWP54BFbg.png"/></figure><figure class="lj kx lu ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><img src="../Images/9b6f53340ae36847310d4f15f40d52ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*xSfDU5v0OBsTja9U5QVutg.png"/></div><figcaption class="le lf et er es lg lh bd b be z dx lv di lw ls">Figures 6 and 7. Accesing Federation Launch Pad and Create Service Provider Partner Page</figcaption></figure></div><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es lx"><img src="../Images/168e3ccbbddfd46ff04ba8e58fcaf3a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rrT94CWnN5IHC7ADHlGzHg.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Figure 8. Defining OCI Tenancy as Service Provider Partner</figcaption></figure><p id="f4cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤5: </strong>返回<strong class="ig hi">发射台</strong>页面，在<strong class="ig hi">联盟</strong>板块下，点击<strong class="ig hi">身份提供商管理</strong>链接。在<strong class="ig hi">身份提供者管理</strong>页面中，点击<strong class="ig hi">服务提供者属性配置文件</strong>选项卡，然后点击<strong class="ig hi">搜索</strong>按钮。</p><div class="kt ku kv kw fd ab cb"><figure class="lj kx ly ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><img src="../Images/acec3f46f060862d90f12b73c1225335.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/format:webp/1*-xokg4NjH939RP9yMwYa4A.png"/></div></figure><figure class="lj kx lz ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><img src="../Images/c1295ff0fb10a6ec6808ee05689c3ba4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1424/format:webp/1*yZE9TLMGEeDRIDi4LByLiQ.png"/></div><figcaption class="le lf et er es lg lh bd b be z dx ma di mb ls">Figures 9 and 10. Accessing Service Provider Attribute Profiles Page</figcaption></figure></div><p id="d337" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第六步:</strong>从搜索结果中点击<strong class="ig hi">sp-属性-档案</strong>链接。在<strong class="ig hi"> SP属性配置文件</strong>页面中，点击<strong class="ig hi">创建</strong>按钮，继续添加属性映射，例如:</p><ul class=""><li id="2444" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">在<strong class="ig hi">消息属性名</strong>中，输入<strong class="ig hi">https://auth.oraclecloud.com/saml/claims/groupName</strong></li><li id="0e19" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">在<strong class="ig hi">值</strong>中，选择<strong class="ig hi">用户</strong>，然后选择<strong class="ig hi">组</strong>。OAM会自动将这个选择转换成一个表达式值，比如<strong class="ig hi"> $users.groups </strong></li><li id="c121" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">点击<strong class="ig hi">确定</strong>按钮确认，然后点击<strong class="ig hi">保存</strong>保存更改</li></ul><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es mc"><img src="../Images/750e4db768496d0beb30e9ec75b7a716.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*txTgkqpA_bMH5bnpcg3x3g.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Figure 11. Creating Attribute Mapping</figcaption></figure><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es md"><img src="../Images/fb3396c107357bfb87f5816e6413924e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oqRNDRcsLyFZcjalsNwMpg.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Figure 12. Saving Attribute Mapping</figcaption></figure><p id="9d35" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤7: </strong>从OAM控制台注销，然后重新启动OAM服务器。</p><p id="6a8d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第8步:</strong>使用具有管理员权限的用户登录OCI控制台。点击位于左上角的抽屉图标，打开<strong class="ig hi">治理和管理</strong>下的侧栏菜单，选择<strong class="ig hi">身份- &gt;联盟</strong>。在<strong class="ig hi">联盟</strong>页面中，单击<strong class="ig hi">添加身份提供者</strong>按钮定义新的身份提供者。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es me"><img src="../Images/1423ee18bca10354a8391c40a52f4fd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*01PTe4ja0COdlQcH1zzYOw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Figure 13. Federation Page</figcaption></figure><p id="b8cb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤9: </strong>在<strong class="ig hi">添加身份联盟</strong>页面中，输入将OAM定义为身份提供者所需的信息，例如:</p><ul class=""><li id="078d" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">对于<strong class="ig hi">名称</strong>，输入<strong class="ig hi"> MyOAM </strong></li><li id="fda6" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">对于<strong class="ig hi">描述</strong>，输入<strong class="ig hi">我的OAM IdP </strong></li><li id="9046" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">对于<strong class="ig hi">类型</strong>，选择<strong class="ig hi">微软活动目录联合服务(ADFS)或SAML 2.0兼容身份提供商</strong></li><li id="fd0a" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">在<strong class="ig hi"> XML </strong>部分，点击<strong class="ig hi">浏览</strong>按钮，继续选择<strong class="ig hi"> oam-metadata.xml </strong>文件。</li><li id="9e15" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">点击<strong class="ig hi">继续</strong>按钮。</li></ul><p id="ad53" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤10: </strong>在<strong class="ig hi">映射</strong>部分，继续将现有OAM组映射到现有OCI组，例如:</p><ul class=""><li id="bb0f" class="kd ke hh ig b ih ii il im ip kf it kg ix kh jb ki kj kk kl bi translated">对于<strong class="ig hi">身份提供者组</strong>，输入<strong class="ig hi"> OAMAdministrators </strong></li><li id="94ee" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">对于<strong class="ig hi"> OCI组</strong>，选择<strong class="ig hi">管理员</strong></li><li id="a4b8" class="kd ke hh ig b ih kn il ko ip kp it kq ix kr jb ki kj kk kl bi translated">点击<strong class="ig hi">继续</strong>按钮保存更改。</li></ul><div class="kt ku kv kw fd ab cb"><figure class="lj kx mf ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><img src="../Images/c5a1a7f0208824ab30dd55cef3297766.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*F3vQfIZshBmLEqMfiDwG3w.png"/></div></figure><figure class="lj kx mg ll lm ln lo paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><img src="../Images/60277b4d5e928a38684ff5b049045e04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*-A-wBEGLHzP8ySFKvFdJWQ.png"/></div><figcaption class="le lf et er es lg lh bd b be z dx mh di mi ls">Figure 14 and 15. Defining OAM as Identity Provider</figcaption></figure></div><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es mj"><img src="../Images/bc5cb485465973141ba5b7c72ae980ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5eapJ5fQ5ylKcuPHkHPBQQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Figure 16. OAM as Identity Provider</figcaption></figure><h2 id="8d4f" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">测试集成</h2><p id="40d7" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">配置完成后，我们可以通过执行以下步骤来测试集成。</p><p id="f583" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤1 </strong>:从OCI和OAM控制台注销，然后继续登录OCI控制台。在OCI <strong class="ig hi">登录</strong>页面中，在<strong class="ig hi">单点登录(SSO) </strong>部分下，选择<strong class="ig hi"> myoam </strong>作为身份提供者，并点击<strong class="ig hi">继续</strong>按钮。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es mk"><img src="../Images/cf97d4cb1f90bff2760b4bdb1fa73a2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bEcDO_frDgbPyanIx14bDQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Figure 17. OCI Sign-In Page</figcaption></figure><p id="16ba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第2步:</strong>您将被重定向到OAM登录页面，继续输入OAM用户凭证并单击<strong class="ig hi">登录</strong>按钮。<strong class="ig hi">注意:</strong>所选用户必须属于一个或多个映射到OCI组的OAM组。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ml"><img src="../Images/800e00648193a975a381452d49cc78af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6PnUN78axwd92FuGMwE7Xw.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Figure 18. OAM Login Page</figcaption></figure><p id="98c7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤3: </strong>通过身份验证后，您将被重定向到OCI控制台。根据OCI组成员身份，继续验证您的用户名和权限。该图显示了用户<strong class="ig hi"> oamadmin </strong>，它是OAM组<strong class="ig hi"> OAMAdministrators </strong>的成员，映射到OCI组<strong class="ig hi"> Administrators </strong>，因此在OCI租赁中具有管理特权。</p><figure class="kt ku kv kw fd kx er es paragraph-image"><div role="button" tabindex="0" class="ky kz di la bf lb"><div class="er es ks"><img src="../Images/ea406d6f58badc3e900756cae68196aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1GKY2ts_CoAclT8zbv2kyQ.png"/></div></div><figcaption class="le lf et er es lg lh bd b be z dx">Figure 19. OCI Console</figcaption></figure><h2 id="0172" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">结论</h2><p id="b0f2" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">OCI继续执行积极的路线图，提供新的功能和服务，支持Oracle应用程序，并结合Oracle数据库云服务器和Oracle自治数据库提供裸机服务器性能。</p><h2 id="de5c" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">关于作者</h2><p id="a049" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">Ricardo Gutierrez是Oracle的首席安全架构师，擅长云基础设施、混合和本地解决方案、身份和访问管理、数据库和应用程序安全。在业余时间，Ricardo使用新技术进行研究和开发，并且是<a class="ae km" href="https://www.oracle.com/webfolder/technetwork/tutorials/obe/cloud/idcs/ebs_asserter_obe/ebs-asserter.html" rel="noopener ugc nofollow" target="_blank">电子商务套件声明者(EBS Asserter) </a>的创建者，这是一个与Oracle Identity Cloud Service一起分发的单点登录应用程序。</p></div></div>    
</body>
</html>