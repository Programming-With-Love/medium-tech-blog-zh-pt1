<html>
<head>
<title>A real AFTER-Startup Microflow in Mendix? — Mendix and Me</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Mendix中真正的创业后微流？——门迪克斯和我</h1>
<blockquote>原文：<a href="https://medium.com/mendix/a-real-after-startup-microflow-in-mendix-mendix-and-me-4feb4fe0a98?source=collection_archive---------1-----------------------#2020-10-20">https://medium.com/mendix/a-real-after-startup-microflow-in-mendix-mendix-and-me-4feb4fe0a98?source=collection_archive---------1-----------------------#2020-10-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/8f4304db4503d706824096b72a555715.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L0j_Z_MTCL-60OeRbqXPWQ.png"/></div></div></figure><div class=""/><p id="37fc" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">当您构建一个Mendix应用程序时，在启动应用程序时，您会想做很多事情。初始化服务、启动进程队列、更新MxModelReflection和许多其他动作通常在AfterStartup微流中执行。这当然有很多好处。您可以确保执行这些操作，可以确保在应用程序可用时完成这些操作，并且可以在这些操作之一失败时阻止应用程序启动。</p><p id="a390" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">除了这些明显的优点，不幸的是也有一些缺点。</p><ul class=""><li id="3ee7" class="jz ka if bd b je jf ji jj jm kb jq kc ju kd jy ke kf kg kh dt translated">Mendix AfterStartup微流实际上是DuringStartup微流，因为它在应用程序启动期间运行，而不是之后。</li><li id="52f5" class="jz ka if bd b je ki ji kj jm kk jq kl ju km jy ke kf kg kh dt translated">如果您在其中执行运行时间较长的操作，应用程序的启动会花费很长时间。对于特别长的操作，甚至会发生应用程序由于超时而根本不启动的情况。</li><li id="52d9" class="jz ka if bd b je ki ji kj jm kk jq kl ju km jy ke kf kg kh dt translated">无法调试AfterStartup微流，因为Mendix调试器仅在启动后才处于活动状态。</li></ul><p id="4d55" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">有一种相处方式，没有这些缺点，不是很好吗？是的。如果你可以不具备某些优势，那么这样做也很容易。</p><h1 id="850f" class="kn ko if bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">AfterAfterStartup微流🙂</h1><p id="cc51" class="pw-post-body-paragraph jc jd if bd b je ll jg jh ji lm jk jl jm ln jo jp jq lo js jt ju lp jw jx jy hn dt translated">在易于使用的AppStore模块的帮助下，有可能有一个仅在“真正的”启动后微流完成时才开始的微流。</p><p id="c74d" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">您将失去在出现问题时中断应用程序启动的可能性。因此，您应该注意在您的微流程中集成适当的错误处理。此外，您也不能确保一旦应用程序可用，所有操作都已完成。在许多情况下，这是不必要的。例如，ProcessQueue不关心它是否在应用程序启动几秒钟后开始工作。它仍将照常运行所有进程。</p><p id="4f60" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">需要的AppStore模块可以在<a class="ae lq" href="https://appstore.home.mendix.com/link/app/111476/" rel="noopener ugc nofollow" target="_blank">这里</a>找到。它包含一个Java动作，该动作允许在一个微流中注册另一个微流，该动作仅在调用微流级联完成时执行。这个“后续微流”然后在一个单独的系统上下文中运行。因此不再有任何到调用微流的连接。您还可以确保调用微流的事务已经完成。因此，任何数据库更改都已经发生。</p><p id="49aa" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">使用这个工具，可以在正常的AfterStartup微流中注册另一个微流，当AfterStartup微流结束时，它在自己的上下文中运行。独立的AfterAfterStartup微流。</p><p id="652e" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">整个事情看起来就像这样:</p><figure class="ls lt lu lv fq hw fe ff paragraph-image"><div class="fe ff lr"><img src="../Images/5088e92689c2b7f089a53b85c1ee21e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/format:webp/0*EA5RjuwFvG5tkDtD.png"/></div></figure><p id="89eb" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">这个AfterStartup微流很快终止，应用程序很快可用。注册的AfterAfterStartup微流现在执行所有计算密集型操作。</p><figure class="ls lt lu lv fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lw"><img src="../Images/5de1133ecaf0319aca0254f5d94e0693.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Khlc5S9DH90Wl2Nt.png"/></div></div></figure><p id="b252" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">当然也可以选择混合形式。例如，您可以选择在正常的AfterStartup中中断应用程序的启动，并将其他操作外包给AfterAfterStartup。</p><h1 id="1c28" class="kn ko if bd kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk dt translated">调试器</h1><p id="bf50" class="pw-post-body-paragraph jc jd if bd b je ll jg jh ji lm jk jl jm ln jo jp jq lo js jt ju lp jw jx jy hn dt translated">如果你严格按照说明去做，你会发现有一个承诺没有兑现。AfterAfterStartup微流仍然无法调试。调试器将在AfterStartup微流之后的某个时间启动，但通常不会立即可用。如果您仍然想让AfterAfterStartup微流可调试，您可以使用一个技巧。</p><p id="7ffd" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">如果您让微流在开始时等待1-2秒(例如，使用此处显示的<a class="ae lq" href="https://appstore.home.mendix.com/link/app/170/" rel="noopener ugc nofollow" target="_blank"> CommunityCommons </a>中的延迟函数)，您可以从以下操作中使用调试器(在本例中为重操作1)。</p><p id="8b4d" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">祝你试用愉快。一如既往，我们非常欢迎您的反馈。</p></div><div class="ab cl lx ly hb lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><p id="1a2e" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><em class="me">原文于2020年10月20日</em> <a class="ae lq" href="https://mendixandme.de/index.php/2020/10/20/ein-echter-after-startup-microflow-in-mendix/" rel="noopener ugc nofollow" target="_blank"> <em class="me">以德语发表https://mendixamme . de</em></a><em class="me">。</em></p></div><div class="ab cl lx ly hb lz" role="separator"><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc md"/><span class="ma bw bk mb mc"/></div><div class="hn ho hp hq hr"><p id="d11c" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><em class="me">-来自出版商</em></p><p id="d220" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><em class="me">如果你喜欢这篇文章，你可以在我们的</em> <a class="ae lq" href="https://medium.com/mendix" rel="noopener"> <em class="me">媒体页面</em> </a> <em class="me">或者我们自己的</em> <a class="ae lq" href="https://developers.mendix.com/community-blog/" rel="noopener ugc nofollow" target="_blank"> <em class="me">社区博客网站</em> </a> <em class="me">找到更多喜欢的。</em></p><p id="fae0" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">有兴趣加入我们的社区吗？你可以加入我们的slack社区 <a class="ae lq" href="https://join.slack.com/t/mendixcommunity/shared_invite/zt-hwhwkcxu-~59ywyjqHlUHXmrw5heqpQ" rel="noopener ugc nofollow" target="_blank"> <em class="me">这里</em> </a> <em class="me">或者对于那些想要更多参与的人，看看加入我们的聚会</em> <a class="ae lq" href="https://developers.mendix.com/meetups/#meetupsNearYou" rel="noopener ugc nofollow" target="_blank"> <em class="me">这里</em> </a></p></div></div>    
</body>
</html>