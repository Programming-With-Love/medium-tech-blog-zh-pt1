<html>
<head>
<title>Automating Build and Deployment of Node.js Applications in Oracle Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Oracle云中自动构建和部署Node.js应用程序</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/automating-build-and-deployment-of-node-application-in-oracle-developer-cloud-to-application-9c33133e0e54?source=collection_archive---------0-----------------------#2017-08-11">https://medium.com/oracledevs/automating-build-and-deployment-of-node-application-in-oracle-developer-cloud-to-application-9c33133e0e54?source=collection_archive---------0-----------------------#2017-08-11</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="dba3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一个熟悉的故事:</p><ul class=""><li id="1c4b" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">与一个或多个开发人员一起开发Node.js应用程序</li><li id="2445" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">使用Oracle Developer Cloud Service来组织开发工作、托管源代码以及协调构建工作和后续部署</li><li id="10cd" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">在Oracle应用程序容器云上运行节点应用程序</li></ul><p id="5663" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我读过许多教程和博客文章，它们似乎都提供了一块拼图。本文以最简单的形式展示了整个故事。</p><p id="ae70" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将:</p><ul class=""><li id="ba1f" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">在开发者云服务上启动一个新项目</li><li id="bfcb" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">为这个新项目克隆Git存储库</li><li id="bc4a" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">在本地处理节点应用程序，并为应用程序容器云进行配置</li><li id="b45f" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">提交源代码并将其推送到Git repo</li><li id="bae9" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">在Developer Cloud service中创建一个生成作业，该作业会创建适合部署的zip文件；Git repo中主分支上的更改会触发该作业</li><li id="98cb" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">创建链接到现有Oracle应用程序容器云服务实例的部署；将部署与构建任务相关联(反之亦然)</li><li id="b8f2" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">运行构建作业，并验证应用程序将被部署到ACCS</li><li id="84da" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">添加带有环境变量定义的ACCS部署描述符(在节点应用程序中使用)</li><li id="99d1" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">在应用程序的源代码中进行更改，提交和推送，并验证实时应用程序是否得到更新</li></ul><p id="f2d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">先决条件:访问开发人员云实例和应用程序容器云服务。本地访问git，最好是节点和npm。</p><p id="c8df" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本文来源于GitHub:<a class="ae jq" href="https://github.com/lucasjellema/greeting" rel="noopener ugc nofollow" target="_blank">https://github.com/lucasjellema/greeting</a>。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es jr"><img src="../Images/e52f7b8e6af80550dae71108ee33fade.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/0*ocCVnHiHRkwr9aKX."/></div></figure><h1 id="8066" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">在开发者云服务上启动一个新项目</h1><p id="5b6f" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">在开发者云中创建新项目<em class="lc">问候</em>。</p><p id="2399" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">按照向导说明进行操作。</p><div class="js jt ju jv fd ab cb"><figure class="ld jw le lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/c0088a6b2d61151140027c8a9c3aca78.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/0*trhlGvWW78e9aFj5."/></div></figure><figure class="ld jw ln lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/76f63435cb231cdfe06cb12623b0a89e.png" data-original-src="https://miro.medium.com/v2/resize:fit:668/0*kvhdNGKpaXtpPy0h."/></div></figure><figure class="ld jw lo lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/53b7b0fa5a6af58c13fb71f3575d9ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:670/0*rkXhsSgd7fDBxcvq."/></div></figure></div><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lp"><img src="../Images/bd3b0675e7238ad67111d78cc9e74790.png" data-original-src="https://miro.medium.com/v2/resize:fit:1044/0*dT_nl3wMt7qAqTdJ."/></div></figure><p id="fdd1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在您按下Finish之后，新项目以及所有相关的资源和工具都将被初始化，比如一个新的Git存储库、一个Wiki、一个问题库。</p><p id="feca" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">配置完成后，就可以访问项目了。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lq"><img src="../Images/efefa31c2fe5a24014968200cd24b3d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/0*kLiLV7Z8bh6thVqT."/></div></figure><h1 id="a9f6" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">在本地处理节点应用程序</h1><p id="34f1" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">复制源代码存储库的git URL。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lr"><img src="../Images/e661338abb1cda1bc6fceb72814dfd14.png" data-original-src="https://miro.medium.com/v2/resize:fit:982/0*d5ZDvKn7DZsWS4VM."/></div></figure><p id="6b7f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为这个新项目克隆Git存储库</p><blockquote class="ls lt lu"><p id="0f06" class="ie if lc ig b ih ii ij ik il im in io lv iq ir is lw iu iv iw lx iy iz ja jb ha bi translated"><em class="hh">git clone</em><a class="ae jq" href="https://lucas.jellema%40amis.nl@developer.us2.oraclecloud.com/developer73410-a512292/s/developer73410-a512292_greeting_19451/scm/greeting.git" rel="noopener ugc nofollow" target="_blank"><em class="hh">https://Lucas . jellema % 40 amis . nl @ developer . us2 . Oracle cloud . com/developer 73410-a 512292/s/developer 73410-a 512292 _ greeting _ 19451/SCM/greeting . git</em></a></p></blockquote><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ly"><img src="../Images/b0197bbe2d6b2ae2ce4ec928f1d7dbf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/0*kUgY_s2WPAlbAv2B."/></div></figure><p id="8fe4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用npm init启动新的节点应用程序:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lz"><img src="../Images/2a5faa331d2998a1316729db03858e3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/0*7Pre0HJHUDYmHNHP."/></div></figure><p id="b31a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将创建package.json文件。</p><p id="9f4f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了准备最终部署到应用程序容器云的应用程序，我们需要添加manifest.json文件。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ma"><img src="../Images/0d6e56be916e987be6dff0eb3bf5f4c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/0*2CKQhftU2mOBjLMY."/></div></figure><p id="df60" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们还需要创建一个. gitignore文件，以防止node_modules被提交和推送到Git。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mb"><img src="../Images/fc7e2ba7f7c35bc3a37da75bce63a5fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:988/0*dGyCIw_Kql6adHw2."/></div></figure><p id="c208" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在app.js文件中实现应用程序本身。这是一个非常简单的应用程序，它将处理传入的请求并返回某种问候:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es mc"><img src="../Images/616d1ab81dec26c20be396a65703134b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1256/0*7dlIDFkyAbGAULYZ."/></div></div></figure><p id="c4e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请注意如何从环境变量中读取问候语，就像应该侦听请求的端口一样。如果没有提供环境值，则使用默认值。</p><h1 id="5f6e" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">提交源代码并将其推送到Git repo</h1><p id="63c1" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">开发者云服务项目中的Git存储库是空的，除了第一次创建项目时的readme.md:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es md"><img src="../Images/130e5ae2db8cbbf9f3735e7b5bf28714.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/0*R3EmMHvnZ2RWdatU."/></div></figure><p id="0c71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们提交并推送本地创建的文件:</p><div class="js jt ju jv fd ab cb"><figure class="ld jw me lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/de6a798d98e74b2ffcabb44bd8f218d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:906/0*usC9a489Ay_q2-2U."/></div></figure><figure class="ld jw mf lf lg lh li paragraph-image"><img src="../Images/1536d654f391e8b5a32c4d9fddd87fb9.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/0*aQH5FTiJ-VQTd-UL."/></figure></div><p id="7835" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">过了一会儿，这些来源出现在开发者云服务控制台中:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mg"><img src="../Images/87a56d7a986376bc651762ff08b5806e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1332/0*9L6NZjXkSkqGUIcq."/></div></figure><h1 id="8e8d" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">在开发人员云服务中创建构建作业</h1><p id="b628" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">要构建应用程序，我们可以在开发人员云服务中创建一个构建作业，创建适合部署的zip文件；这个zip文件需要包含Git的所有源代码和package.json中指定的所有依赖项(所有节点模块)。注意:构建工作在理想情况下还应该执行自动化测试——比如Yannick <a class="ae jq" href="http://www.ateam-oracle.com/automated-unit-tests-with-node-js-and-developer-cloud-services/" rel="noopener ugc nofollow" target="_blank">在这里</a>所描述的。</p><div class="js jt ju jv fd ab cb"><figure class="ld jw mh lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/ae4e4cadc5fcde5d13429f7016c7c0e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1014/0*3cpmRVedvvH3afdq."/></div></figure><figure class="ld jw mi lf lg lh li paragraph-image"><img src="../Images/f04f6482ec676f5afffc85a6222bf644.png" data-original-src="https://miro.medium.com/v2/resize:fit:856/0*blR2xDXNa1Vb9Rn6."/></figure></div><p id="c260" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">指定自由式作业。指定名称—此处为BuildAndDeploy。</p><p id="6068" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">配置包含要构建的源代码的Git存储库；这是项目创建时第一次设置的存储库。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mj"><img src="../Images/9aa41e6017680394586413e63a761b09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/0*sPFpF_HXMT4bCdAX."/></div></figure><p id="e397" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将构建作业配置为在源代码提交到Git存储库(中的主分支)时执行:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es md"><img src="../Images/33c8d873c21ff5552cb8cc4fa5b20009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/0*twterBs7bXNUEbFJ."/></div></figure><p id="ab82" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建一个执行Shell类型的构建步骤:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es mk"><img src="../Images/d6618fd9ee8c76dd7a73e9df5327005b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1246/0*1hdSTd0qXrnOVhiW."/></div></div></figure><p id="eb82" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">输入以下shell脚本命令:</p><blockquote class="ls lt lu"><p id="5c25" class="ie if lc ig b ih ii ij ik il im in io lv iq ir is lw iu iv iw lx iy iz ja jb ha bi translated"><em class="hh">git config–global URL . https://github . com/。代替git://github.com/ </em></p><p id="f5f9" class="ie if lc ig b ih ii ij ik il im in io lv iq ir is lw iu iv iw lx iy iz ja jb ha bi translated"><em class="hh"> npm安装</em></p><p id="368e" class="ie if lc ig b ih ii ij ik il im in io lv iq ir is lw iu iv iw lx iy iz ja jb ha bi translated">zip -r greeting.zip。</p></blockquote><p id="cff5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将下载所有需要的节点模块，并将所有源代码打包到一个名为greeting.zip的zip文件中。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es ml"><img src="../Images/9372ebd141c419f4832750d3aa8519bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/0*7GSIcYR0_5optguz."/></div></div></figure><p id="a53d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将greeting.zip文件归档定义为构建后步骤。这使得这个zip文件可以作为构建作业生成的工件使用——用于部署或其他构建作业。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mm"><img src="../Images/f9e09e36658a4431e76bbd2107ca2232.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/0*1Q6CTsUt8McZK5lP."/></div></figure><p id="cb36" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用“立即构建”首次运行作业。</p><div class="js jt ju jv fd ab cb"><figure class="ld jw mn lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/c4e7789a4b994719d030d0afb1be7b79.png" data-original-src="https://miro.medium.com/v2/resize:fit:574/0*0aiyab9R5a3tW7EJ."/></div></figure><figure class="ld jw mo lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/7210c6de50c29ed357d270b58c0b8dcf.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/0*EonujS6oqySzbKCq."/></div></figure><figure class="ld jw mp lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/8b27de453a9d74da85e5ebde251a2bec.png" data-original-src="https://miro.medium.com/v2/resize:fit:722/0*k_1sLCLfa5CMe5FJ."/></div></figure></div><p id="7fd3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">显示了运行shell命令的控制台输出。注意，在构建中执行的隐含的第一步包括从git存储库检索所有源代码到构建服务器的文件系统。显式shell命令随后被执行，并且可以利用这些克隆的git repo源。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mq"><img src="../Images/a3c0cd1f470b7f223a61393d94f4f084.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/0*lKTbW9DguLHy_auX."/></div></figure><p id="16b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">构建作业生成greeting.zip作为工件:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mr"><img src="../Images/479621d7dbc53bbdbccfac3809b43cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/0*Dcdd4Rlga80awr0z."/></div></figure><h1 id="7515" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">创建链接到现有Oracle应用程序容器云服务实例的部署</h1><p id="c81e" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">构建作业生成一个可以部署到ACCS实例的工件。我们需要一个部署来基于那个工件创建一个ACCS实例。部署是构建工件和特定目标环境之间的桥梁——在本例中是ACCS实例。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ms"><img src="../Images/d055f4d5ef46ebd2194b1f4ea448916d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/0*pk7Yw3FWkaadHgX-."/></div></figure><p id="5c58" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">指定将在应用程序容器云中使用的配置(用于开发人员云服务)和应用程序的名称。指定部署的类型——我们需要按需部署，因为这种部署类型可以与在构建结束时自动执行的构建作业相关联。指定部署目标—新的应用程序容器云类型。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mm"><img src="../Images/be58266321772eae74b8e0e0fd5bf03e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1334/0*1gd-PMAIjCPOX7JV."/></div></figure><p id="d7cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">提供ACCS实例的连接详细资料。按“测试连接”来验证这些详细信息。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mt"><img src="../Images/6a0c252e74753fc0799c157ac34e8c9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/0*BwIXs6VWRnIp1MKJ."/></div></figure><p id="5c22" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">成功后，点击使用连接。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mu"><img src="../Images/d57a1d92e44f966fa5f1d5233c016e79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/0*uhSjH1dm8BvZYYAb."/></div></figure><p id="e388" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">指定运行时的类型——在本例中为节点。选择此部署所基于的构建作业和工件:</p><div class="js jt ju jv fd ab cb"><figure class="ld jw mv lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/18dd0d219ee7942882991580092f59d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:990/0*ikyoTP15Kio2tcJz."/></div></figure><figure class="ld jw mw lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/8da6a8d46936149e7e4b90ee806bc587.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/0*t3BnoV3QzEJ3TeXA."/></div></figure></div><p id="d4d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:目前，部署被绑定到构建作业的一个特定实例。当将部署作为构建后步骤添加到构建作业中时，我们将总是使用由特定构建实例产生的工件。</p><p id="8a25" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">保存部署后，它会立即开始执行部署:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mx"><img src="../Images/481d7c71265a52101dd55019cbb89cca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/0*HAA0KmiXcxiNWBqF."/></div></figure><p id="4294" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在应用程序容器云控制台中，我们可以看到正在创建新的节点应用程序<em class="lc"> greeting </em></p><div class="js jt ju jv fd ab cb"><figure class="ld jw my lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/4341ba77f6a97d9854f97c0116ceb4fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/0*OPtrCWc5LRiyQyHz."/></div></figure><figure class="ld jw mz lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/09d2276c656ceebe6edf9f0ab3bffaaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/0*sd5nV_TrqXw76FsC."/></div></figure></div><p id="292e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一段时间后(实际上是相当长的一段时间),应用程序被部署并准备好被访问:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es na"><img src="../Images/53482c17e01e2a04f3f16d7520c62302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/0*BeYP6pQ_FAiT6vmR."/></div></figure><p id="16ee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是在浏览器中打开应用程序的结果</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es nb"><img src="../Images/af4970833364de690c2253a24bbdb379.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/0*u-BTI_8pcRXXCUeA."/></div></figure><p id="e042" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在将构建作业与部署相关联，以便在每个成功的构建结束时执行部署:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es nc"><img src="../Images/f1e45d7ddd089acddea92f9c2ccef687.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s0oai98xj7ifgQEW."/></div></div></figure><p id="f4f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">转到“Post Build”选项卡，选中“Oracle Cloud Service Deployment”复选框，并添加一个部署类型为Deploy的部署任务:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es nc"><img src="../Images/e7eaafe6f3ffd7e45800514b4ae68539.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*KJ-52-uj_4NeN2bi."/></div></div></figure><p id="b713" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择我们之前创建的部署:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es nd"><img src="../Images/b617aa006b9e5b68ce2c1683fe561b05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/0*nAYgb76k7s2Qe4WL."/></div></figure><p id="d2db" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">并按Save保存对构建作业定义的更改。</p><h1 id="6a3c" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">运行构建作业，并验证应用程序将被部署到ACCS(再次)</h1><p id="1689" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">如果我们现在运行构建作业，作为它的最后一个操作，它应该执行部署:</p><div class="js jt ju jv fd ab cb"><figure class="ld jw ne lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/493c20ec25953ea82e8d21b674749c73.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/0*3Ucahy2Brw6tS90b."/></div></figure><figure class="ld jw nf lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/5da648c751eaee8ed0dfd32f1bbab293.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/0*Kf2rck_w16fkbnhD."/></div></figure><figure class="ld jw ng lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/5aca152ec80ec612ba57f51c645a49de.png" data-original-src="https://miro.medium.com/v2/resize:fit:356/0*4iBksEX5Uk5TMNbn."/></div></figure></div><p id="9f5c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ACCS控制台显示，现在我们已经部署了2.0版。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es nh"><img src="../Images/9c6ac350417c64966b48417008b0f93b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/0*_YDKXcSwY-EIxIpc."/></div></figure><h1 id="b0e0" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">添加带有环境变量定义的ACCS部署描述符</h1><p id="f15d" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">app.js文件包含以下行</p><blockquote class="ls lt lu"><p id="8f6b" class="ie if lc ig b ih ii ij ik il im in io lv iq ir is lw iu iv iw lx iy iz ja jb ha bi translated"><em class="hh">var greeting = process . env . greeting | | ' Hello World！'；</em></p></blockquote><p id="4d7a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这一行引用了当前未设置的环境变量GREETING。通过将部署描述符定义为部署定义的一部分，我们不仅可以指定实例的数量及其大小以及任何服务绑定<em class="lc">和</em>环境变量(如GREETING)的值。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ni"><img src="../Images/ce86f91b55488af22c660fb4a8edc237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1342/0*xwZhVJY0Y2vJftw7."/></div></figure><p id="5802" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">添加部署描述符json:</p><blockquote class="ls lt lu"><p id="c10e" class="ie if lc ig b ih ii ij ik il im in io lv iq ir is lw iu iv iw lx iy iz ja jb ha bi translated"><em class="hh"> { <br/>"内存": " 1G "，<br/>"实例":" 1 "，<br/>"环境":{ <br/>"问候":"问候你"，<br/>"应用_前缀":" GRTZ" <br/> } <br/> } </em></p></blockquote><p id="1726" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:变量APPLICATION_PREFIX目前没有使用。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es nj"><img src="../Images/e9ce8e8032172be36ba320690c9115d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/0*DqprOCHe_fqMC7OR."/></div></figure><p id="fd45" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">保存并将再次执行部署:</p><div class="js jt ju jv fd ab cb"><figure class="ld jw nk lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/3b5ac940b22d0200a21d32a05d49fcf9.png" data-original-src="https://miro.medium.com/v2/resize:fit:812/0*_b0I1foRMgaIsnjm."/></div></figure><figure class="ld jw nl lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/2b7f218c7235db1de6dd71a315901d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/0*xj0MCmp4tfSQ_9vC."/></div></figure></div><p id="1cc0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">完成后，就可以访问应用程序了。这一次，返回的问候语是在部署描述符deployment.json(作为环境变量)中指定的，并由应用程序在运行时获取(使用process.env.GREETING)。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es nm"><img src="../Images/f4356a6b0bf5344b0b20a9310af87e42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/0*1r3Fiz5slPufLkee."/></div></figure><h1 id="7a48" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">对应用程序的源代码进行更改，并执行端到端的工作流</h1><p id="216d" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">如果我们在应用程序中做了一个更改，然后提交并将更改推送到Git，那么过一段时间后，我们应该能够验证实时应用程序是否得到了更新。</p><p id="6a77" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">进行更改—一个新的版本标签和应用程序返回的文本中的一个小更改。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es nc"><img src="../Images/66b3d23ffadc9537ca596387dbce149d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dYSPamdgdvnMKTSh."/></div></div></figure><p id="71c2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后提交更改并将更改推送到开发人员CS Git repo:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es nn"><img src="../Images/67b1fd62cc9df28189a78491d29a2228.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/0*1o4ie28A4wtRtUey."/></div></figure><p id="33f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Git repo中出现了变化:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es no"><img src="../Images/e63fb7244ea119de7ddba3f954f5d739.png" data-original-src="https://miro.medium.com/v2/resize:fit:1320/0*2U7EViZNt5oNJS00."/></div></figure><p id="3905" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在Git repo已经更新，构建作业应该被触发:</p><div class="js jt ju jv fd ab cb"><figure class="ld jw np lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/b5ef12524aa8c65e2f635ac3765af3e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1102/0*LZyQ9_7xc6BEgDgI."/></div></figure><figure class="ld jw nq lf lg lh li paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><img src="../Images/c198ee82e27a14b41c55cdbeec100fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/0*E-Qi9kfk7wqnNyrW."/></div></figure></div><p id="b7d6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一些控制台输出—显示部署已经开始:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es nc"><img src="../Images/59fee010c727c77da2200a4a7540ccd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Cjw_1kacEVJcWZB9."/></div></div></figure><p id="25d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ACCS服务控制台也清楚地表明了这一点</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es nc"><img src="../Images/caf236b1122a3c8a27f0e46c54edd5fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zVqEKCRrPQmoZP8T."/></div></div></figure><p id="4578" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">部署完成后，很明显，代码更改已经影响到了正在运行的应用程序:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mu"><img src="../Images/aabb72d1395d8a4762c8156d903a428e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/0*VEE__Bx-n9GBxwj6."/></div></figure><p id="1a39" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，编辑源代码并提交和推送到git足以触发应用程序的构建和重新部署——这要感谢Developer Cloud Service的设置。</p><h1 id="e4cd" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">后续步骤</h1><p id="1061" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">展示应用程序的多个实例如何各自拥有自己的状态，以及如何使用应用程序缓存使它们共享状态。</p><p id="8291" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">展示ACCS应用程序如何通过服务绑定轻松访问DBaaS实例(在节点应用程序的情况下，通过oracle节点驱动程序和OCI库，这些库预装了ACCS节点运行时。</p><p id="1557" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">展示如何将Oracle Management Cloud APM设置为ACCS实例的一部分，以便对在ACCS上运行的应用程序执行应用程序监控；可能也适用于日志分析。</p><h1 id="710a" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">资源</h1><p id="aaab" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">本文的资料来源可以在GitHub中找到:<a class="ae jq" href="https://github.com/lucasjellema/greeting." rel="noopener ugc nofollow" target="_blank">https://github.com/lucasjellema/greeting.</a></p><p id="622b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Abhinav Shroff撰写的Oracle社区文章—<a class="ae jq" href="https://community.oracle.com/community/oracle-cloud/platform/oracle-developer-cloud-service/blog/2016/09/07/oracle-developer-cloud-to-build-and-deploy-nodejs-rest-project-on-application-container-cloud" rel="noopener ugc nofollow" target="_blank">Oracle开发人员云在应用容器云上构建和部署Nodejs REST项目</a></p><p id="3545" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">团队编年史作者Yannick Ongena- <a class="ae jq" href="http://www.ateam-oracle.com/automated-unit-tests-with-node-js-and-developer-cloud-services/" rel="noopener ugc nofollow" target="_blank">用Node进行自动化单元测试。JS和开发者云服务</a></p><p id="ab0f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Fabrizio Marini的文章—<a class="ae jq" href="http://www.fabriziomarini.com/2016/03/oracle-application-container-cloud_30.html" rel="noopener ugc nofollow" target="_blank">Oracle Application Container Cloud&amp;开发者云服务:如何在pool(云中)创建带有DB连接的Node.js应用，以及如何使用开发者云服务将其部署在Oracle Application Container Cloud(node . js)上</a></p><p id="744d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建Node.js应用程序(Oracle文档)—<a class="ae jq" href="https://docs.oracle.com/en/cloud/paas/app-container-cloud/create-sample-node.js-applications.html" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en/cloud/PAAs/app-container-cloud/create-sample-node . js-Applications . html</a></p><p id="a975" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">开发者云服务文档— <a class="ae jq" href="https://docs.oracle.com/en/cloud/paas/developer-cloud/csdcs/managing-releases-oracle-developer-cloud-service.html#GUID-A44F8A67-1A25-424E-9569-D53EB574CF9B" rel="noopener ugc nofollow" target="_blank">在Oracle开发者云服务中管理版本</a></p><p id="47a9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Oracle文档—为ACCS部署创建元文件—<a class="ae jq" href="https://docs.oracle.com/en/cloud/paas/app-container-cloud/dvcjv/creating-meta-data-files.html" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en/cloud/PAAs/app-container-cloud/dvcjv/Creating-Meta-data-Files . html</a></p></div><div class="ab cl nr ns go nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ha hb hc hd he"><p id="ca32" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lc">原载于2017年8月11日</em><a class="ae jq" href="https://technology.amis.nl/2017/08/11/automating-build-and-deployment-of-node-application-in-oracle-developer-cloud-to-application-container-cloud/" rel="noopener ugc nofollow" target="_blank"><em class="lc">technology . amis . nl</em></a><em class="lc">。</em></p></div></div>    
</body>
</html>