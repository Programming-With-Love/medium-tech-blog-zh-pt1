# 库里还是局部申请？

> 原文：<https://medium.com/javascript-scene/curry-or-partial-application-8150044c78b8?source=collection_archive---------2----------------------->

## 
局部应用和库里的区别

许多初学函数式编程的人对部分应用程序和 currying 之间的区别感到困惑。事实上，直到最近，在 JavaScript 中很少看到真正使用 curry，许多自称为 *`curry()`* 的实用函数根本不是 curry 函数。它们是部分应用程序功能！

如果你对这两者的区别感到困惑，下面的内容应该能帮你理清思路，但首先，让我们先了解一些词汇:

# 定义

**应用:***将*函数应用于其*参数*以产生返回值的过程。

**局部应用:**将一个函数应用到*它的一些参数*的过程。部分应用的函数被返回供以后使用。换句话说，**取多参数**的函数，**返回少参数的函数。**部分应用*修复*(将函数部分应用于)返回函数内部的一个或多个参数，返回函数将剩余参数作为参数，以完成函数应用。

**Curry:** 一个函数，**将一个多参数的函数**作为输入，**返回一个只有一个参数的函数**。

# 为什么这很重要？

詹姆斯·科格兰做了一个很棒的演讲，将有助于解释为什么你应该关心:

James 谈到的特性依赖于函数类型的一致性。函数有类型。例如，采用函数和数组并返回数组的函数(例如 Function.prototype.map()):

```
(fn, array) -> array
```

*   部分应用程序**可能有也可能没有可预测的返回类型** *。*
*   在应用了所有参数之前，一个 curried 函数总是返回另一个 arity 为 1 的函数。

詹姆斯谈论的所有酷的东西都依赖于**函数类型一致性。例如，他谈到了承诺是如何帮助抽象你的程序逻辑对时间的依赖性的。**

承诺这样做是因为它们**提升了**你正在调用的任何函数，因此返回类型总是统一的:所有返回承诺的函数都返回相同的类型，这意味着你可以以标准化的方式使用它们。詹姆斯谈到了许多许诺帮助的方式。

在这种情况下，承诺是*容器*，就像**函子**(一个有趣的词，基本意思是“可以映射的东西”，例如数组。参见:**应用函子**，可以提供一种标准化的方法来处理容器内的数据，而不管数据的类型。

> **警告:**谷歌搜索函数式编程术语可能会令人生畏——这比学者们说的要容易得多。

通过处理**容器**而不是容器中的**值，你可以创建许多通用的**函数，这些函数对于使用**容器的接口**的任何东西都通用**。**

像承诺一样， **curried 函数返回共享相同接口的容器**。在这种情况下，**返回的函数是容器**。你只需不断调用返回的函数，直到你用尽了所有的参数，最终的值被返回。

换句话说，**curried 函数是一个可以提升所有参数的函数**，这样你就可以用一种标准化的方式来处理这些参数。

这种提升最常见的用例是[功能组合](/javascript-scene/master-the-javascript-interview-what-is-function-composition-20dfb109a1a0)，例如`c(x) = f(g(x))`。函数组合接受一个函数的返回值，并将其作为参数传递给另一个函数。因为函数只能返回一个值，所以应用于返回值的函数必须是一元的。

此外， **curried 函数有一个内置的迭代器机制**:一个 curried 函数将一次部分地应用一个参数，永远不会做比单个参数更多的工作。调用返回的函数具有告诉函数应用应用程序中的下一步的效果。

比如柯里化函数 a(b)(c)；不必马上调用 c 应用程序。它可以这样分解:

```
const next = a(b);
doSomeStuff().then(() => next(c));
```

您应该更清楚地了解部分应用程序和 curry 之间的区别，以及为什么您想要 curry 您的函数。

在函数式编程中，currying 最常见的用途是使函数的组合更容易。关于这个话题的更多信息，请阅读[“掌握 JavaScript 面试:什么是函数组合？”](/javascript-scene/master-the-javascript-interview-what-is-function-composition-20dfb109a1a0)

> [跟随 Eric Elliott](https://ericelliottjs.com) 学习函数式 JavaScript

***埃里克·艾略特*** *著有* [*【编程 JavaScript 应用】*](http://pjabook.com) *(奥赖利)，以及* [*【学习 JavaScript 通用 App 开发用节点，ES6，&【React】*](https://leanpub.com/learn-javascript-react-nodejs-es6/)*。他为 Adobe Systems******尊巴健身*******华尔街日报*******【ESPN*******BBC****等顶级录音师贡献了软件经验******

**他大部分时间都在旧金山湾区和世界上最美丽的女人在一起。**