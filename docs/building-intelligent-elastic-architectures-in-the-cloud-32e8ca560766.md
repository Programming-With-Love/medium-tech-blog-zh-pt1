# 在云中构建智能、弹性的架构

> 原文：<https://medium.com/capital-one-tech/building-intelligent-elastic-architectures-in-the-cloud-32e8ca560766?source=collection_archive---------3----------------------->

## Capital One 购物浏览器扩展的设计考虑到了高流量

***由首创购物高级工程总监/主管 Jason Valentino 和首创购物体验工程总监/主管 George Henderson***

![](img/a11225a1cbbc87438b3da542b508c9ef.png)

数字工具和空间推动了我们网上购物方式的变革。最近与新冠肺炎的事件让我们进一步走向网络，增加了我们对网上购物、非接触式交付和 BOPIS(网上购买，店内提货)的兴趣。数据支持我们在自己和朋友身上看到的购物行为——联合国进行的一项跨国[研究](https://unctad.org/system/files/official-document/dtlstictinf2020d1_en.pdf)得出结论，电子商务增长可能会继续快速增长。Salesforce 的研究还发现，63%的受访者声称全球化的疫情已经“改变”了他们的购物行为，可能是永远的改变。

一旦这场危机过去，零售业将如何发展仍有待观察，但我们今年早些时候看到的电子商务销售飙升可能会继续下去，今年的在线假日购物季将打破所有以往的电子商务记录。但事实是:许多购物者会在网上支付过多的钱，把省钱的机会留在桌面上。在网上找到最好的价格并不容易——折扣代码很难找到，而且可能存在隐藏的运费。这就是为什么一个发现最佳交易和优惠券的十亿美元行业现在正在蓬勃发展；这是一个由技术进步推动的行业，技术进步使得这种个性化的实时体验成为可能。

我们应该知道，因为我们是创建 Capital One Shopping 的团队的一员，Capital One Shopping 是一种在线购物工具，可以帮助客户通过搜索更低的价格和优惠券来节省费用，并通过在线购物获得奖励。

# 第一资本购物——储蓄的承诺

[Capital One Shopping 成立于 2014 年，名为 Wikibuy，于 2018 年被 Capital One 收购，是一款免费工具](https://www.wikibuy.com/)，使用原生的基于云的实时节省分析帮助购物者省钱。消费者不应该为了省钱而花几个小时在网上搜索，Capital One Shopping 将购物者已经在做的工作自动化，通过价格比较、优惠券和可兑换的奖励找到更低的价格，所有这些都在一个工具中。

2020 年，超过一半(54%)的消费者计划今年在网上进行全部或大部分假日购物，比去年的 22%增加了一倍多。我们的系统今年将看到的相应流量将创纪录，但我们已经设计了在云中弹性购物的 Capital One，可以轻松应对本季将导致的高峰。

## 首创一购物用户流量

首先也是最重要的，用户不一定要有 Capital One 账户才能使用 Capital One 购物。美国的任何人都可以安装浏览器扩展，并立即开始使用储蓄。

当客户访问 30，000 个合作伙伴零售网站之一时，浏览器扩展会唤醒并自动搜索、测试并在结账时应用最佳可用优惠券代码。

Capital One Shopping 使用一流的智能实时技术，通过在消费者购物时自动进行跨站点价格比较，在结账时主动定位和应用有价值的活动优惠券代码，并提供产品价格跟踪和警报，来消除在线购物过程中的摩擦。

该工具解决了寻找更好的交易或优惠券代码的难题。通过技术和社区的力量，可能需要 10-15 分钟的购物任务现在可以自动完成。

# 云端智能建筑的力量

也许从客户的角度来看，这种无缝体验似乎是奇迹——事实上，这是我们的目标——但它实际上是现代服务架构和数据流平台的结果，是由云技术支持的智能架构。因为我们的平台是专为云设计的，所以我们拥有大规模的弹性，可以在预计将是历史上最重要的在线假日购物周期中自信地为客户服务。

## 全栈 JavaScript

Capital One Shopping 在我们的整个堆栈中使用 JavaScript。在后端使用 Node.js 允许我们利用 React 在服务器端呈现我们的 web 应用程序。成为 fullstack JS 的动力允许围绕减轻语言上下文切换的协同作用，提供一种公共语言来标准化工具和开发人员体验。这很重要，因为随着优先级的改变和新特性的开发，我们有了一个代码库，几乎我们团队中的每个开发人员都可以阅读、理解和贡献。

## 亚马逊网络服务

capital One Shopping 100%基于云，利用 EC2 中安全、可调整大小的计算能力来托管分布在 1000 多个 Docker 容器中的近 100 个微服务。我们的消息平台在很大程度上依赖亚马逊 SES 来促进电子邮件、短信和推送通知的交付。我们还尽可能利用亚马逊 RDS 来帮助减轻数据库管理的负担，并利用亚马逊 S3 来实现安全的文件存储。

## 数据

数据是我们工作的基础，我们使用自己设计的流数据平台来支持 Capital One 购物。虽然 Capital One 的购物规模可能比更大的 Capital One 小得多，但普通的网上购物者比普通的网上银行家要活跃得多。因此，Capital One Shopping 必须接收大量数据。

我们使用基于 HDFS 的数据仓库来存储时间分区的数据。PostgreSQL 处理有界限的交易或关系数据(订单、产品页面数据、复杂查询),为了提高性能，项目通常会迁移到 Cassandra(无界限数据)或 Elasticsearch(无模式数据)。我们的内部流数据平台处理用于分析和应用程序通知的实时数据。

## 上市时间

最后但同样重要的是，在幕后，云允许 Capital One 购物团队缩短上市时间。作为一家专注于金融领域的技术公司，Capital One 拥有 100%的敏捷软件交付模型，帮助我们轻松推动创新和新功能。我们的云技术使我们能够不断改进，包括 A/B 测试我们所有的产品体验和个性化节省。与以往相比，我们可以通过一个精干的团队做更多的事情，快速将活动投放到市场中，以加快我们为客户省钱的速度。

# 通过浏览器自动折扣

当你运行谷歌 Chrome、Mozilla Firefox、微软 Edge 和 Safari 上的浏览器扩展时，可用的折扣会自动应用，而不是你必须忍受另一个询问你是否想应用折扣的弹出窗口。许多工作都是在单独的 JavaScript 上下文中后台完成的，该上下文与当前页面共享一个 DOM。我们的技术会自动为您的购物车寻找、排列和应用最有可能节省的优惠券。当用户准备购买时，我们已经知道哪张优惠券对他们来说最有价值。

我们技术中最复杂的部分是我们的价格比较功能。当扩展检测到您在一个产品页面上时，软件会识别您正在查看的确切产品，包括选定的选项变体。如果软件确定该商品在其他地方更便宜，用户会得到通知，并能够访问我们开发的产品比较页面，并立即提供服务。我们会快速记录项目价格，包括您的邮政编码的税费和运费。还会考虑其他因素，比如用户是否是不愿支付运费的亚马逊 Prime 会员。

# 结论

我们的工具充满了更多的技术——虽然我们的团队很精简，但我们正在为帮助客户无缝省钱的新行业铺平道路。自 1994 年成立以来，Capital One 一直处于金融服务领域技术创新的前沿。通过建立和投资数字工具，如 Capital One Shopping 和 [Eno](http://www.capitalone.com/eno) ，Capital One 正在创造一种[数字银行体验](https://venturebeat.com/2020/07/16/how-capital-ones-ai-assistant-achieved-99-nlu-accuracy/)，为客户提供他们控制财务所需的工具和资源。

*披露声明:2021 首创一号。观点是作者个人的观点。除非本帖中另有说明，否则 Capital One 不隶属于所提及的任何公司，也不被这些公司认可。使用或展示的所有商标和其他知识产权是其各自所有者的财产。*

*原载于*[*https://www.capitalone.com*](https://www.capitalone.com/tech/cloud/capital-one-shopping-cloud-native-since-day-one/)*。*