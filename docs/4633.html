<html>
<head>
<title>The Open Minded Explorer’s Guide to Object Composition</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">思想开放的探索者的对象合成指南</h1>
<blockquote>原文：<a href="https://medium.com/javascript-scene/the-open-minded-explorer-s-guide-to-object-composition-88fe68961bed?source=collection_archive---------2-----------------------#2015-10-14">https://medium.com/javascript-scene/the-open-minded-explorer-s-guide-to-object-composition-88fe68961bed?source=collection_archive---------2-----------------------#2015-10-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/c33bdad682f716eb7046984cc8aaa28f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJfGb8Gup4ouFUGGgorV0Q.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Indiana Jones — clement127 (CC BY-NC-ND 2.0)</figcaption></figure><div class=""/><p id="b1ae" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">不同的人似乎对物体构成有不同的定义。让我们探讨一些想法，并弄清楚这是如何发生的:</p><p id="98d3" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx">组成:</strong>【kom-p<em class="jr">嗯</em> - <strong class="iv hx"> zish </strong> - <em class="jr">嗯</em> n】</p><ol class=""><li id="8a5c" class="js jt hw iv b iw ix ja jb je ju ji jv jm jw jq jx jy jz ka bi translated">把部分或元素结合成一个整体的行为。</li></ol><p id="2615" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">推而广之…</p><p id="6732" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx">对象构成:</strong></p><ol class=""><li id="b3f2" class="js jt hw iv b iw ix ja jb je ju ji jv jm jw jq jx jy jz ka bi translated">将物体或属性结合起来形成一个新物体的行为。</li></ol><p id="afce" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">有道理，那么为什么人们会迷路呢？进入维基百科:</p><h2 id="4543" class="kb kc hw bd kd ke kf kg kh ki kj kk kl je km kn ko ji kp kq kr jm ks kt ku kv bi translated">维基百科的定义</h2><blockquote class="kw kx ky"><p id="a822" class="it iu jr iv b iw ix iy iz ja jb jc jd kz jf jg jh la jj jk jl lb jn jo jp jq ha bi translated"><strong class="iv hx">对象组合</strong>(不要与函数组合混淆)是一种将简单对象或数据类型组合成更复杂对象或数据类型的方法。</p></blockquote><p id="1317" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这就是人们感到困惑的地方。Wikipedia继续<strong class="iv hx">描述了一种建模复合对象的特定方法</strong>，其中新组合的对象创建了一个嵌套的树形结构，其中组件对象作为单独的分支。看起来像这样:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="6143" class="kb kc hw lh b fi ll lm l ln lo">import { a, b, c } from 'components';</span><span id="2a0a" class="kb kc hw lh b fi lp lm l ln lo">composedObject = {<br/>  a: a,<br/>  b: b,<br/>  c: c<br/>};</span></pre><p id="2cad" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在本例中，每个组件都有自己的属性。那么维基百科是从哪里得到的呢？它本质上是来自四人帮的<a class="ae lq" href="http://amzn.to/1NHXzgy" rel="noopener ugc nofollow" target="_blank">【设计模式】</a>一书的<strong class="iv hx">复合模式</strong>，是面向对象设计模式的规范参考。复合模式是几种组合设计模式中的一种，它还包括聚集、策略模式等等…</p><p id="8db0" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">复合模式是很多传统面向对象的人在想到对象组合时想到的——但是<strong class="iv hx">这并不是真正完整的理解</strong>。</p><blockquote class="lr"><p id="937f" class="ls lt hw bd lu lv lw lx ly lz ma jq dx translated">对象嵌套并不是对象组合的决定性的突出特征。</p></blockquote><p id="7f47" class="pw-post-body-paragraph it iu hw iv b iw mb iy iz ja mc jc jd je md jg jh ji me jk jl jm mf jo jp jq ha bi translated"><strong class="iv hx">在Java </strong>中，这是创建<a class="ae lq" href="https://en.wikipedia.org/wiki/Composite_data_type" rel="noopener ugc nofollow" target="_blank"> <strong class="iv hx">复合对象</strong> </a> <strong class="iv hx">最简单的方法。</strong>这可能解释了为什么在GoF书中是这样建模的，如果你只使用Java编码，那么在这里<strong class="iv hx">结束你对组合的理解就足够了。</strong></p><p id="835c" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">然而，复合对象早在Java和GoF之前就存在了，这并不是在JavaScript中创建复合对象的唯一方法。</p><h2 id="af07" class="kb kc hw bd kd ke kf kg kh ki kj kk kl je km kn ko ji kp kq kr jm ks kt ku kv bi translated">棕色老鼠谬论</h2><figure class="lc ld le lf fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mg"><img src="../Images/de827a8520b20a2dacf43d23bf90fa79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bb3MlyXc82wZif4-Rshclg.jpeg"/></div></div></figure><p id="50ad" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">有些人认为不同形式的对象组合不可能是对象组合，因为它们不会创建组件成为自包含子属性的对象结构。</p><p id="fd35" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">想象一下，如果你第一次看到一只老鼠，它是一只棕色的老鼠，然后有人向你介绍一只白色的老鼠，但你争辩说它不可能是老鼠，因为它不是棕色的。</p><p id="a809" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">换句话说，<a class="ae lq" href="https://en.wikipedia.org/wiki/Negative_conclusion_from_affirmative_premises" rel="noopener ugc nofollow" target="_blank">正前提不能引出负结论</a>。</p><h2 id="5afc" class="kb kc hw bd kd ke kf kg kh ki kj kk kl je km kn ko ji kp kq kr jm ks kt ku kv bi translated">先前技术</h2><p id="062f" class="pw-post-body-paragraph it iu hw iv b iw mh iy iz ja mi jc jd je mj jg jh ji mk jk jl jm ml jo jp jq ha bi translated">由于许多人认为GoF发明了(并因此定义了)作曲，一些现有技术:</p><ul class=""><li id="8657" class="js jt hw iv b iw ix ja jb je ju ji jv jm jw jq mm jy jz ka bi translated">“通过复合设计的可靠软件”，作者Glenford J Myers，<strong class="iv hx"> 1975 </strong></li><li id="8d57" class="js jt hw iv b iw mn ja mo je mp ji mq jm mr jq mm jy jz ka bi translated">《程序设计语言及其定义:论文选》，作者:H. Bekic，C. B. Jones，<strong class="iv hx"> 1984 </strong></li><li id="f43b" class="js jt hw iv b iw mn ja mo je mp ji mq jm mr jq mm jy jz ka bi translated">“C编程语言:包括Ansi C、可移植性和软件工程”，作者Douglas A. Troy，Jams D. Kiper，<strong class="iv hx"> 1989 </strong></li></ul><p id="d94d" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">所有人(除此之外还有许多人)都使用更广泛的组合定义，因为它适用于各种形式的数据结构建模。</p><p id="9db8" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在普遍采用OOP之前，数据结构组合的经典例子是C语言`<em class="jr"> struct` </em>,它与JavaScript中的对象有着共同的重要特性。在“设计模式”出现之前，许多书籍都将它作为复合数据类型引用。</p><p id="6462" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在从简单数据结构构建复杂数据结构的上下文中，复合结构和组合是流行编程语言行话<strong class="iv hx">的一部分，几十年前“设计模式”</strong>还在GoF的眼中闪烁。</p><p id="d0c4" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我是怎么知道这些的？在“设计模式”发布之前，我已经编程多年了，对此我记忆犹新。在狗夫把我介绍给棕色的老鼠之前，我就看到了白色的老鼠。</p><p id="946a" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><em class="jr">复合模式理解</em>复合引入了一个与JavaScript中的大多数实际用例不太相关的复合特性:</p><p id="5eb4" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">对象嵌套并不是对象组合的决定性的显著特征。</p><p id="3f88" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">将组成部分组合起来形成一个新对象的行为是。</p><p id="6098" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">甚至GoF也在更广泛的意义上使用组合，定义了几种组合设计模式。在这本书的开头，他们引入了一句名言“偏爱对象组合而不是类继承”，他们并没有特别提到<strong class="iv hx">复合模式</strong>这种对组合的误解就是在这里产生的，他们指的是任何对于手头的问题来说是正确的组合设计模式。</p><p id="ac6f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">他们争论的是相对于严格的等级分类法的灵活性。不这样想是完全没有意义的。</p><p id="d69d" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">坚持对对象组合的狭隘的、不经常需要的、面向Java的理解不会让你成为更好的程序员。比起僵化的等级制度，更倾向于灵活性。</p><blockquote class="lr"><p id="3573" class="ls lt hw bd lu lv lw lx ly lz ma jq dx translated">“吸收有用的，抛弃无用的。加入你自己独有的东西。”——李小龙</p></blockquote></div><div class="ab cl ms mt go mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ha hb hc hd he"><h2 id="6219" class="kb kc hw bd kd ke kf kg kh ki kj kk kl je km kn ko ji kp kq kr jm ks kt ku kv bi translated">JavaScript支持对象串联(又名串联继承)</h2><p id="d334" class="pw-post-body-paragraph it iu hw iv b iw mh iy iz ja mi jc jd je mj jg jh ji mk jk jl jm ml jo jp jq ha bi translated">使用<a class="ae lq" href="https://en.wikipedia.org/wiki/Prototype-based_programming#Concatenation" rel="noopener ugc nofollow" target="_blank">对象连接</a>，可以将多个组件对象的属性混合到新的复合对象的根中。看起来像这样:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="0d1f" class="kb kc hw lh b fi ll lm l ln lo">import { a, b, c } from 'components';</span><span id="2b8c" class="kb kc hw lh b fi lp lm l ln lo">composedObject = Object.assign({}, a, b, c);</span></pre><p id="5c13" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">你不必使用<em class="jr"> `Object.assign()`。</em>有很多方法可以实现目标，<a class="ae lq" rel="noopener" href="/javascript-scene/introducing-the-stamp-specification-77f8911c2fee">包括邮票</a>。</p><p id="0438" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx">物体构成</strong>:</p><ol class=""><li id="ec1f" class="js jt hw iv b iw ix ja jb je ju ji jv jm jw jq jx jy jz ka bi translated">将物体或属性结合起来形成一个新物体的行为。</li></ol><p id="713f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">无论您使用聚合、对象嵌套还是对象连接，都没有关系。重要的是从多个组件对象组合新对象，而不是一次性继承整个层次结构。由更小的组件组成的结果是<a class="ae lq" href="https://en.wikipedia.org/wiki/Composite_data_type" rel="noopener ugc nofollow" target="_blank">一个复合对象</a>。</p><blockquote class="lr"><p id="c568" class="ls lt hw bd lu lv lw lx ly lz ma jq dx translated">"优先选择对象组合而不是类继承."~ GoF <a class="ae lq" href="http://amzn.to/1NHXzgy" rel="noopener ugc nofollow" target="_blank">“设计模式”</a></p></blockquote><p id="758f" class="pw-post-body-paragraph it iu hw iv b iw mb iy iz ja mc jc jd je md jg jh ji me jk jl jm mf jo jp jq ha bi translated">现在去用合成制作更灵活的软件吧。</p><figure class="lc ld le lf fd hj"><div class="bz dy l di"><div class="mz na l"/></div></figure></div><div class="ab cl ms mt go mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ha hb hc hd he"><blockquote class="lr"><p id="55d7" class="ls lt hw bd lu lv lw lx ly lz ma jq dx translated"><a class="ae lq" href="https://ericelliottjs.com/" rel="noopener ugc nofollow" target="_blank">通过Eric Elliott </a>了解更多关于OO原型的信息<br/></p></blockquote></div><div class="ab cl ms mt go mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ha hb hc hd he"><p id="0108" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx"><em class="jr">Eric Elliott</em></strong><em class="jr">著有</em> <a class="ae lq" href="http://pjabook.com" rel="noopener ugc nofollow" target="_blank"> <em class="jr">【编程JavaScript应用】</em> </a> <em class="jr"> (O'Reilly)，以及</em> <a class="ae lq" href="https://leanpub.com/learn-javascript-react-nodejs-es6/" rel="noopener ugc nofollow" target="_blank"> <em class="jr">【学习JavaScript通用App开发用节点，ES6，&amp;</em></a><em class="jr">。他为Adobe Systems的</em><strong class="iv hx"><em class="jr"/></strong><em class="jr"/><strong class="iv hx"><em class="jr">尊巴健身</em></strong><em class="jr"/><strong class="iv hx"><em class="jr">华尔街日报</em></strong><em class="jr"/><strong class="iv hx"><em class="jr">【ESPN</em></strong><em class="jr"/><strong class="iv hx"><em class="jr">BBC</em></strong><em class="jr">等顶级录音师贡献了软件经验</em></p><p id="61a2" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">他大部分时间都在旧金山湾区和世界上最美丽的女人在一起。</p></div></div>    
</body>
</html>