<html>
<head>
<title>Deploy and Manage Apps on Oracle Application Container Cloud Service using Terraform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Terraform在Oracle应用容器云服务上部署和管理应用</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/deploy-and-manage-apps-on-oracle-application-container-cloud-service-using-terraform-bc9772a63d44?source=collection_archive---------0-----------------------#2018-07-27">https://medium.com/oracledevs/deploy-and-manage-apps-on-oracle-application-container-cloud-service-using-terraform-bc9772a63d44?source=collection_archive---------0-----------------------#2018-07-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="4297" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本文介绍了如何开始使用Oracle Cloud<strong class="ig hi">Terraform Providers</strong>来部署和管理部署到<strong class="ig hi"> Oracle应用容器云服务</strong>的应用程序</p><p id="42b5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Oracle Application Container Cloud Service为在运行时平台上的应用部署提供了一个快速、可扩展的平台，包括<strong class="ig hi"> Java EE </strong>、<strong class="ig hi"> Java SE、Node.js </strong>、<strong class="ig hi"> PHP </strong>、<strong class="ig hi"> Python </strong>、<strong class="ig hi"> Ruby </strong>、<strong class="ig hi"> Go </strong>和<strong class="ig hi">。网</strong></p><p id="4063" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要使用带有<code class="du jc jd je jf b"><a class="ae jg" href="https://www.terraform.io/docs/providers/oraclepaas/" rel="noopener ugc nofollow" target="_blank">oraclepaas</a></code>提供者的应用程序容器云服务，请将<code class="du jc jd je jf b">application_endpoint</code>设置为Oracle Cloud My Services dashboard的服务详细信息页面上提供的REST API端点。</p><pre class="jh ji jj jk fd jl jf jm jn aw jo bi"><span id="f216" class="jp jq hh jf b fi jr js l jt ju">provider "oraclepaas" {<br/>  version              = "~&gt; 1.3"<br/>  user                 = "${var.user}"<br/>  password             = "${var.password}"<br/>  identity_domain      = "${var.domain}"<br/>  <strong class="jf hi">application_endpoint = "</strong><a class="ae jg" href="https://apaas.us.oraclecloud.com" rel="noopener ugc nofollow" target="_blank"><strong class="jf hi">https://apaas.us.oraclecloud.com</strong></a><strong class="jf hi">"</strong><br/>}</span></pre><p id="c0dd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用<code class="du jc jd je jf b">oraclepaas_application_container</code>资源创建新的应用程序部署非常简单，只需声明所需的运行时，提供应用程序包的位置，并设置一些基本的部署特性</p><p id="9741" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们来看看如何使用来自<a class="ae jg" href="http://www.oracle.com/webfolder/technetwork/tutorials/obe/cloud/apaas/acc-getting-started/welcome.html" rel="noopener ugc nofollow" target="_blank">Oracle应用程序容器云入门</a>教程的示例EmployeeWebApp Java应用程序。下载示例<code class="du jc jd je jf b"><a class="ae jg" href="http://www.oracle.com/webfolder/technetwork/tutorials/obe/cloud/apaas/acc-getting-started/files/employees-web-app.zip" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">employees-web-app.zip</strong></a></code>应用程序，并将其上传到Oracle Storage Cloud Classic中合适的位置(例如<code class="du jc jd je jf b">my-accs-apps/employees-web-app.zip</code></p><pre class="jh ji jj jk fd jl jf jm jn aw jo bi"><span id="2682" class="jp jq hh jf b fi jr js l jt ju">resource "oraclepaas_application_container" "java-app" {<br/>  name               = "EmployeeWebApp"<br/>  runtime            = "java"<br/>  archive_url        = "my-accs-apps/employees-web-app.zip"<br/>  notes              = "Sample Tomcat application"<br/>  subscription_type  = "HOURLY"</span><span id="dd44" class="jp jq hh jf b fi jv js l jt ju">  deployment_attributes {<br/>    memory = "1G"<br/>    instances = 1<br/>  }<br/>}</span><span id="fd97" class="jp jq hh jf b fi jv js l jt ju">output "web_url" {<br/>  value = "${oraclepaas_application_container.java-app.web_url}"<br/>}</span></pre><p id="da2c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">应用配置后，部署的应用程序将在由<code class="du jc jd je jf b">web_url</code>地址提供的URL上可用。</p><figure class="jh ji jj jk fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es jw"><img src="../Images/f32f9ed4b77071f64ea7ce89d360830b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*skGYZ337VlB2UhwERJgfbg.png"/></div></div><figcaption class="ke kf et er es kg kh bd b be z dx">Example EmployeeWebApp deployment on Application Container Cloud Service</figcaption></figure><h2 id="a6bc" class="jp jq hh bd ki kj kk kl km kn ko kp kq ip kr ks kt it ku kv kw ix kx ky kz la bi translated"><strong class="ak">自动将应用上传至对象存储器</strong></h2><p id="ccc5" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">Terraform还可以使用<code class="du jc jd je jf b">opc</code> provider <code class="du jc jd je jf b">opc_storage_object</code>资源自动将本地应用程序包上传到对象存储容器。</p><pre class="jh ji jj jk fd jl jf jm jn aw jo bi"><span id="e204" class="jp jq hh jf b fi jr js l jt ju">resource "<strong class="jf hi">opc_storage_object</strong>" "example-app" {<br/>  name         = "employees-web-app.zip"<br/>  container    = "my-accs-apps"<br/>  file         = "./employees-web-app.zip"<br/>  etag         = "${md5(file("./employees-web-app.zip"))}"<br/>  content_type = "application/zip;charset=UTF-8"<br/>}</span><span id="8613" class="jp jq hh jf b fi jv js l jt ju">resource "oraclepaas_application_container" "java-app" {<br/>  name               = "EmployeeWebApp"<br/>  archive_url        = "my-accs-apps/<strong class="jf hi">${opc_storage_object.example-app.name}</strong>"<br/>  ...<br/>}</span></pre><h2 id="0e33" class="jp jq hh bd ki kj kk kl km kn ko kp kq ip kr ks kt it ku kv kw ix kx ky kz la bi translated">缩放应用</h2><p id="8f0c" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">扩展应用程序部署就像修改部署属性一样简单:</p><pre class="jh ji jj jk fd jl jf jm jn aw jo bi"><span id="e78f" class="jp jq hh jf b fi jr js l jt ju">resource "oraclepaas_application_container" "java-app" {<br/>  name               = "EmployeeWebApp"<br/>  ...</span><span id="1a6a" class="jp jq hh jf b fi jv js l jt ju">  deployment_attributes {<br/>    memory = "1G"<br/><strong class="jf hi">    instances = 2<br/></strong>  }<br/>}</span></pre><p id="73c6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后重新应用terraform配置:</p><pre class="jh ji jj jk fd jl jf jm jn aw jo bi"><span id="110d" class="jp jq hh jf b fi jr js l jt ju">$ <strong class="jf hi">terraform apply</strong><br/>Terraform will perform the following actions:</span><span id="e1cb" class="jp jq hh jf b fi jv js l jt ju">~ oraclepaas_application_container.java-app deployment_attributes.0.instances: "1" =&gt; "2"</span><span id="cdf1" class="jp jq hh jf b fi jv js l jt ju"><strong class="jf hi">Plan:</strong> 0 to add, 1 to change, 0 to destroy.</span></pre><p id="b924" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">添加或删除实例时，其他现有实例将继续运行。更改<code class="du jc jd je jf b">memory</code>大小将导致所有实例在短时间内不可用，因为应用程序将使用新值重新启动。</p><h2 id="93c6" class="jp jq hh bd ki kj kk kl km kn ko kp kq ip kr ks kt it ku kv kw ix kx ky kz la bi translated">从Git存储库部署应用程序</h2><p id="6d77" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">应用程序容器云还可以直接从源git存储库部署应用程序。我们只需设置源<code class="du jc jd je jf b">git_respository</code> URL，而不是将预打包的应用程序上传到对象存储。当从git存储库部署时，必须提供一个<code class="du jc jd je jf b">manifest</code>配置(或<code class="du jc jd je jf b">manifest_file</code>)。</p><pre class="jh ji jj jk fd jl jf jm jn aw jo bi"><span id="bd0b" class="jp jq hh jf b fi jr js l jt ju">resource "oraclepaas_application_container" "example-node-app" {<br/>  name              = "nodeWebApp"<br/>  runtime           = "node"<br/><strong class="jf hi">  git_repository    = "</strong><a class="ae jg" href="https://github.com/scross01/employee-app.git" rel="noopener ugc nofollow" target="_blank"><strong class="jf hi">https://github.com/scross01/employee-app</strong></a><strong class="jf hi">"<br/></strong>  subscription_type = "HOURLY"</span><span id="e9e6" class="jp jq hh jf b fi jv js l jt ju"><strong class="jf hi">  manifest {<br/>    runtime {<br/>      major_version = "8"<br/>    }<br/>    command = "node server.js"<br/>    type    = "web",<br/>    home    = "/employees"<br/>  }</strong></span><span id="5924" class="jp jq hh jf b fi jv js l jt ju">  deployment {<br/>    memory    = "1G"<br/>    instances = 1<br/>  }<br/>}</span></pre><p id="dd3b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">设置<code class="du jc jd je jf b">manifest</code>或<code class="du jc jd je jf b">manifest_file</code>也可用于覆盖应用程序包zip文件中的默认<code class="du jc jd je jf b">manifest.json</code>设置。</p><h1 id="2a9b" class="lg jq hh bd ki lh li lj km lk ll lm kq ln lo lp kt lq lr ls kw lt lu lv kz lw bi translated">更多示例</h1><p id="424f" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">有关将应用程序部署到应用程序容器云的更多示例，请查看</p><ul class=""><li id="cae9" class="lx ly hh ig b ih ii il im ip lz it ma ix mb jb mc md me mf bi translated"><a class="ae jg" href="https://github.com/oracle/terraform-examples/tree/master/examples/oraclepaas/accs-nodejs-app" rel="noopener ugc nofollow" target="_blank">示例<strong class="ig hi"> Node.js应用</strong>部署到Oracle应用容器云服务</a></li><li id="a99b" class="lx ly hh ig b ih mg il mh ip mi it mj ix mk jb mc md me mf bi translated"><a class="ae jg" href="https://github.com/oracle/terraform-examples/tree/master/examples/oraclepaas/accs-nodejs-app-from-git-repo" rel="noopener ugc nofollow" target="_blank">示例<strong class="ig hi"> Node.js应用</strong> <strong class="ig hi">从Git存储库</strong>部署到Oracle应用容器云服务</a></li><li id="67a3" class="lx ly hh ig b ih mg il mh ip mi it mj ix mk jb mc md me mf bi translated"><a class="ae jg" href="https://github.com/oracle/terraform-examples/tree/master/examples/oraclepaas/accs-java-app" rel="noopener ugc nofollow" target="_blank">示例<strong class="ig hi"> Java应用</strong>部署到Oracle应用容器云服务</a></li><li id="4f1d" class="lx ly hh ig b ih mg il mh ip mi it mj ix mk jb mc md me mf bi translated"><a class="ae jg" href="https://github.com/oracle/terraform-examples/tree/master/examples/oraclepaas/accs-go-app" rel="noopener ugc nofollow" target="_blank">示例<strong class="ig hi">将应用</strong>部署到Oracle应用容器云服务</a></li><li id="c6c7" class="lx ly hh ig b ih mg il mh ip mi it mj ix mk jb mc md me mf bi translated"><a class="ae jg" href="https://github.com/oracle/terraform-examples/tree/master/examples/oraclepaas/accs-php-app" rel="noopener ugc nofollow" target="_blank">示例<strong class="ig hi"> PHP应用</strong>部署到Oracle应用容器云服务</a></li><li id="264a" class="lx ly hh ig b ih mg il mh ip mi it mj ix mk jb mc md me mf bi translated"><a class="ae jg" href="https://github.com/oracle/terraform-examples/tree/master/examples/oraclepaas/accs-python-app" rel="noopener ugc nofollow" target="_blank">示例<strong class="ig hi"> Python应用</strong>部署到Oracle应用容器云服务</a></li><li id="4d61" class="lx ly hh ig b ih mg il mh ip mi it mj ix mk jb mc md me mf bi translated"><a class="ae jg" href="https://github.com/oracle/terraform-examples/tree/master/examples/oraclepaas/accs-python-app" rel="noopener ugc nofollow" target="_blank">示例<strong class="ig hi"> Python应用</strong>部署到Oracle应用容器云服务</a></li><li id="d9ea" class="lx ly hh ig b ih mg il mh ip mi it mj ix mk jb mc md me mf bi translated"><a class="ae jg" href="https://github.com/oracle/terraform-examples/tree/master/examples/oraclepaas/accs-ruby-app" rel="noopener ugc nofollow" target="_blank">示例<strong class="ig hi"> Ruby应用</strong>部署到Oracle应用容器云服务</a></li></ul><h1 id="181f" class="lg jq hh bd ki lh li lj km lk ll lm kq ln lo lp kt lq lr ls kw lt lu lv kz lw bi translated">相关文章</h1><ul class=""><li id="6c9f" class="lx ly hh ig b ih lb il lc ip ml it mm ix mn jb mc md me mf bi translated"><a class="ae jg" href="https://blogs.oracle.com/developers/announcing-terraform-support-for-oracle-cloud-platform-services" rel="noopener ugc nofollow" target="_blank">宣布Terraform支持Oracle云平台服务</a></li><li id="4873" class="lx ly hh ig b ih mg il mh ip mi it mj ix mk jb mc md me mf bi translated"><a class="ae jg" href="https://docs.oracle.com/en/cloud/paas/app-container-cloud/dvcjv/sample-applications.html" rel="noopener ugc nofollow" target="_blank">为Oracle应用容器云服务开发—示例应用</a></li></ul></div></div>    
</body>
</html>