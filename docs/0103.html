<html>
<head>
<title>Introducing MvRx: Android on Autopilot</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">介绍MvRx:自动驾驶的Android</h1>
<blockquote>原文：<a href="https://medium.com/airbnb-engineering/introducing-mvrx-android-on-autopilot-552bca86bd0a?source=collection_archive---------2-----------------------#2018-08-28">https://medium.com/airbnb-engineering/introducing-mvrx-android-on-autopilot-552bca86bd0a?source=collection_archive---------2-----------------------#2018-08-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="1c79" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">Android的新框架完全是原生的，但减少了50–75%的产品代码。</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/ed0e5bd9dfd12f795dc7f1bd5460c87c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XTEb_qIXJmWJcdj6k9-Wcw.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Havana Vieja, a great place to hang out at Airbnb HQ when you want to catch up with friends</figcaption></figure><p id="3b6d" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">在Airbnb，我们正以前所未有的速度前进。每年，越来越多的人使用Airbnb旅行。仅在今年，我们就已经推出了Airbnb Plus和T3，我们还有数不清的T2项目正在进行中，我们迫不及待地想要分享。</p><p id="a8ed" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">在Android方面，业务的天文数字增长让我们忙得不可开交。我们的应用比以往做得更多。仅在过去一年，我们就增加了286块新屏幕，而且这一速度丝毫没有放缓的迹象。为了让我们的生活更轻松，我们寻找可以用来防止重复工作的模式，这样我们就可以专注于运输产品。</p></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><h2 id="cc0b" class="kq kr hh bd ks kt ku kv kw kx ky kz la jv lb lc ld jz le lf lg kd lh li lj lk bi translated"><strong class="ak">推出MvRx </strong></h2><p id="d69f" class="pw-post-body-paragraph jm jn hh jo b jp ll ii jr js lm il ju jv ln jx jy jz lo kb kc kd lp kf kg kh ha bi translated">今天，我们准备分享我们的Android架构:<a class="ae ki" href="https://github.com/airbnb/MvRx/" rel="noopener ugc nofollow" target="_blank"> MvRx </a>。MvRx(发音为“mavericks”)诞生于这样一种认识，即我们一次又一次地解决同样的问题，分散了我们对产品运输的关注。在Android上，有无数的小事情是工程师为了让他们的应用程序高质量而不得不写或考虑的。其中一些是:</p><ul class=""><li id="3bb1" class="lq lr hh jo b jp jq js jt jv ls jz lt kd lu kh lv lw lx ly bi translated">反复创建带有工具栏、RecyclerView和页脚的布局</li><li id="0904" class="lq lr hh jo b jp lz js ma jv mb jz mc kd md kh lv lw lx ly bi translated">与Android生命周期<a class="ae ki" href="https://i.stack.imgur.com/fRxIQ.png" rel="noopener ugc nofollow" target="_blank">的争论</a></li><li id="b81b" class="lq lr hh jo b jp lz js ma jv mb jz mc kd md kh lv lw lx ly bi translated">在onSaveInstanceState中正确保存视图状态和业务逻辑</li><li id="2aca" class="lq lr hh jo b jp lz js ma jv mb jz mc kd md kh lv lw lx ly bi translated">为异步请求(如网络或数据库调用)执行onSuccess和onFailure处理程序</li><li id="64ed" class="lq lr hh jo b jp lz js ma jv mb jz mc kd md kh lv lw lx ly bi translated">还有更多…</li></ul><p id="ac57" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">MvRx使所有这些变得简单得多。当我们出发时，我们唯一的目标是让运送高质量的产品变得更容易、更快、更有趣。最初，开源这个框架并不是我们的目标。然而，一旦它开始成形，我们知道我们必须这样做。我们不仅希望与您分享它，还希望它可以用于我们在Airbnb之外的项目，因为它可以轻松地从业余爱好项目扩展到拥有70名工程师和近百万行代码的应用程序。</p><h2 id="d6ea" class="kq kr hh bd ks kt ku kv kw kx ky kz la jv lb lc ld jz le lf lg kd lh li lj lk bi translated"><strong class="ak"> MvRx在动作</strong></h2><p id="46d8" class="pw-post-body-paragraph jm jn hh jo b jp ll ii jr js lm il ju jv ln jx jy jz lo kb kc kd lp kf kg kh ha bi translated">MvRx建立在谷歌的<a class="ae ki" href="https://developer.android.com/topic/libraries/architecture/viewmodel" rel="noopener ugc nofollow" target="_blank">架构组件</a>、<a class="ae ki" href="https://github.com/ReactiveX/RxJava" rel="noopener ugc nofollow" target="_blank"> RxJava </a>、<a class="ae ki" href="https://github.com/airbnb/epoxy" rel="noopener ugc nofollow" target="_blank"> Epoxy </a>之上。这是科特林第一，只有科特林。围绕Kotlin语言进行设计使我们能够构建一个比用Java更简洁的API。</p><p id="99de" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">看起来是这样的:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="4d8d" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">在这个简单的片段中，只有18行代码，我们有一个ViewModel，它的作用范围是片段，但在配置更改时会保留，还有默认布局和屏幕的可测试状态。当状态改变时，屏幕将自动更新，但只有实际改变的特定部分将被发送到RecyclerView(感谢Epoxy)。此外，您看到的所有代码都在后台线程上运行，因为MvRx无缝地处理开箱即用的线程。</p><h2 id="75c5" class="kq kr hh bd ks kt ku kv kw kx ky kz la jv lb lc ld jz le lf lg kd lh li lj lk bi translated"><strong class="ak">Airbnb的MvRx</strong></h2><p id="6359" class="pw-post-body-paragraph jm jn hh jo b jp ll ii jr js lm il ju jv ln jx jy jz lo kb kc kd lp kf kg kh ha bi translated">仅仅几个月的时间，MvRx已经从一个试点变成了我们编写几乎100%新屏幕的标准方式，人们很喜欢它。在最近的调查中，93%接受调查的工程师(n=14)给了它8/10或更高的分数。</p><p id="9d92" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">此外，它的采用令人震惊。在整个试验过程中，增长是稳定的，但是当我们在7月份开放给任何团队使用时，采用率就自动上升了。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mg"><img src="../Images/538ecf1716732ccffcf4c39585811e34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B8CGDyDmIby2m4sGc1IShw.png"/></div></div></figure><p id="791a" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">在短短几个月内，我们已经在MvRx中构建了超过110个屏幕，并且它很快被采用为在我们的应用程序中编写任何功能的首选方式，从简单的静态功能到一些最复杂的功能。</p><h2 id="3383" class="kq kr hh bd ks kt ku kv kw kx ky kz la jv lb lc ld jz le lf lg kd lh li lj lk bi translated"><strong class="ak">入门</strong></h2><p id="f210" class="pw-post-body-paragraph jm jn hh jo b jp ll ii jr js lm il ju jv ln jx jy jz lo kb kc kd lp kf kg kh ha bi translated">我们很高兴能与世界分享MvRx。如果你想了解更多，请前往我们的GitHub Wiki 了解更多！</p><p id="9e30" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">谢谢，</p><p id="95e1" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">Airbnb移动工程</p></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><p id="9bd6" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="mh">想参与进来？我们一直在寻找</em> <a class="ae ki" href="https://www.airbnb.com/careers" rel="noopener ugc nofollow" target="_blank"> <em class="mh">有才华的人加入我们的团队</em> </a> <em class="mh">！</em></p></div></div>    
</body>
</html>