<html>
<head>
<title>Building Cryptocurrency Pricing App with Flutter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Flutter构建加密货币定价App</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/build-a-simple-app-with-pull-to-refresh-and-favourites-using-flutter-77a899904e04?source=collection_archive---------0-----------------------#2019-03-15">https://medium.com/quick-code/build-a-simple-app-with-pull-to-refresh-and-favourites-using-flutter-77a899904e04?source=collection_archive---------0-----------------------#2019-03-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/4b412d76ad8a35bd825c0e80e189c4e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LnF6rKVa-4dYOmUx4T1M8g.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Image taken from <a class="ae hu" href="https://flutter.dev" rel="noopener ugc nofollow" target="_blank">https://flutter.dev</a></figcaption></figure><div class=""/><blockquote class="iu"><p id="a258" class="iv iw hx bd ix iy iz ja jb jc jd je dx translated">Flutter允许你从一个代码库在iOS和Android上构建漂亮的原生应用</p></blockquote><p id="82fa" class="pw-post-body-paragraph jf jg hx jh b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb je ha bi translated">我最近偶然发现了Google新的用于跨平台开发的开源工具包，并决定尝试一下。你可以在这里阅读各种好处<a class="ae hu" href="https://hackernoon.com/flutter-5-reasons-why-you-may-love-it-55021fdbf1aa?gi=605beddaa2c0" rel="noopener ugc nofollow" target="_blank"/>(剧透，看起来真的很棒)，但我想我会与你分享如何用他们的教程之外的东西开始使用Flutter。</p><p id="a88f" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">我们将创建一个具有拉至刷新功能的加密货币价格表应用程序，并跟踪您最喜爱的加密货币。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kh"><img src="../Images/49f4795de2a2f5060784045b16c75c6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*faaKPo8aQn4MRYBSfBJ2wA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">What we will be doing in this tutorial.</figcaption></figure><h1 id="af5e" class="km kn hx bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">先决条件</h1><p id="5204" class="pw-post-body-paragraph jf jg hx jh b ji lk jk jl jm ll jo jp jq lm js jt ju ln jw jx jy lo ka kb je ha bi translated">我将使用装有iOS模拟器的Macbook来构建这个应用程序。随意使用Windows机器和Android模拟器。</p><p id="3a6e" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">在我们开始之前，前往<a class="ae hu" href="https://flutter.dev" rel="noopener ugc nofollow" target="_blank"> Flutter </a>并安装Flutter和各种依赖项。当你在做的时候，拿起你最喜欢的IDE并设置它使用flutter(在本教程中我们将使用VS代码)。</p><h1 id="2504" class="km kn hx bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">我们开始吧！</h1><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lp"><img src="../Images/b8c8d03f77105ef3bc16a0ea45d8809a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RH7mLDmD_MnCyNwXnWi30g.png"/></div></div></figure><p id="5608" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">在VS代码中(如果需要，在这里按照步骤<a class="ae hu" href="https://flutter.dev/docs/get-started/test-drive?tab=vscode" rel="noopener ugc nofollow" target="_blank">执行</a>，搜索<code class="du lq lr ls lt b">Flutter New Project</code>来创建一个新的颤振项目。命名为crypto_list，让flutter为我们初始化这个项目。</p><p id="a746" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">创建了一个文件<code class="du lq lr ls lt b">main.dart</code>，这将是我们应用程序的入口点。我们将从头开始构建应用程序，所以继续删除那里的所有代码。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lp"><img src="../Images/0262de9f2dcbabf0bc5ad50aee59b2d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8xl8f5pADSnGRFj0x8HexA.png"/></div></div></figure><p id="ddee" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">这是您的IDE在这一点上应该有的样子。</p><h2 id="98d6" class="lu kn hx bd ko lv lw lx ks ly lz ma kw jq mb mc la ju md me le jy mf mg li mh bi translated">创建基本用户界面</h2><figure class="ki kj kk kl fd hj"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="3f9b" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">当你启动应用程序时，代码将从<code class="du lq lr ls lt b">main</code>函数中执行。因此，让我们继续如上所述创建它。</p><pre class="ki kj kk kl fd mk lt ml mm aw mn bi"><span id="80e0" class="lu kn hx lt b fi mo mp l mq mr">open -a Simulator<br/>flutter run</span></pre><p id="ce8b" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">这将打开您的机器上使用的默认模拟器，并运行应用程序。运行它，它应该显示以下内容</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kh"><img src="../Images/22758d2003ab2a8d936402dfd8c629ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Xe-VGomZK24bnL4V08NI1g.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">It is ugly but gets the job done.</figcaption></figure><p id="cb65" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">好极了。您已经使用flutter构建了您的第一个UI！它现在很难看，所以让我们创建一些小部件来美化我们的应用程序。</p><h2 id="cb53" class="lu kn hx bd ko lv lw lx ks ly lz ma kw jq mb mc la ju md me le jy mf mg li mh bi translated">添加小部件</h2><figure class="ki kj kk kl fd hj"><div class="bz dy l di"><div class="mi mj l"/></div></figure><blockquote class="ms mt mu"><p id="2005" class="jf jg mv jh b ji kc jk jl jm kd jo jp mw ke js jt mx kf jw jx my kg ka kb je ha bi translated"><strong class="jh hy">无状态</strong>小部件是不可变的，这意味着它们的属性不能改变——所有的值都是最终的</p><p id="64df" class="jf jg mv jh b ji kc jk jl jm kd jo jp mw ke js jt mx kf jw jx my kg ka kb je ha bi translated"><strong class="jh hy">有状态</strong>小部件维护可能在小部件的生命周期中改变的状态。实现有状态小部件至少需要两个类:1)创建实例的stateful widget类，2)State类。StatefulWidget类本身是不可变的，但是State类在小部件的整个生命周期中都是持久的。</p></blockquote><p id="3b3b" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">编辑我们的代码，如上所示。</p><p id="866d" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">我们所做的是:</p><ol class=""><li id="d56f" class="mz na hx jh b ji kc jm kd jq nb ju nc jy nd je ne nf ng nh bi translated">添加一个有状态的小部件<code class="du lq lr ls lt b">CryptoList</code>，创建它的状态类<code class="du lq lr ls lt b">CryptoListState</code></li><li id="4e70" class="mz na hx jh b ji ni jm nj jq nk ju nl jy nm je ne nf ng nh bi translated">大多数逻辑将存储在<code class="du lq lr ls lt b">CryptoListState</code>中，而<code class="du lq lr ls lt b">CryptoList</code>只是创建它的状态类</li><li id="97c2" class="mz na hx jh b ji ni jm nj jq nk ju nl jy nm je ne nf ng nh bi translated"><code class="du lq lr ls lt b">build</code>描述小部件的外观。这里我们返回了<code class="du lq lr ls lt b">Scaffold</code>，它创建了一个带有<code class="du lq lr ls lt b">title</code>和<code class="du lq lr ls lt b">icons</code>的<code class="du lq lr ls lt b">appBar</code>以及带有集中文本的<code class="du lq lr ls lt b">body</code>。</li></ol><p id="f1a7" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">按<code class="du lq lr ls lt b">r</code>重新加载更改或<code class="du lq lr ls lt b">R</code>热重启(并重建状态)</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kh"><img src="../Images/d0e3dab4425c985f74a1c32f3feef6b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RKzT9aWNpHRdArksv7oEwQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Looks so much prettier!</figcaption></figure><p id="6621" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">有了<code class="du lq lr ls lt b">Scaffold</code>,我们已经无限地改进了我们应用程序的整体用户界面。还记得我们在<code class="du lq lr ls lt b">MyApp</code>类中使用了<code class="du lq lr ls lt b">theme</code>吗？它被用来设置我们的应用程序的原色，(以及扩展的<code class="du lq lr ls lt b">appBar's</code>颜色)。</p><p id="d9ba" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">请随意更改，例如<code class="du lq lr ls lt b">new ThemeData(primaryColor: Colors.orange)</code>，但我们将继续使用白色。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kh"><img src="../Images/aec883c2ed124205700ab08afc272254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4JmLsKcBJqZObWQibDA-6g.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Primary colour changed to orange.</figcaption></figure><h2 id="15bf" class="lu kn hx bd ko lv lw lx ks ly lz ma kw jq mb mc la ju md me le jy mf mg li mh bi translated">发出HTTP请求以获取数据</h2><p id="e175" class="pw-post-body-paragraph jf jg hx jh b ji lk jk jl jm ll jo jp jq lm js jt ju ln jw jx jy lo ka kb je ha bi translated">在我们将加密货币列表添加到视图主体之前，让我们首先获取继续操作所需的所有数据。</p><pre class="ki kj kk kl fd mk lt ml mm aw mn bi"><span id="d7d6" class="lu kn hx lt b fi mo mp l mq mr">import 'package:flutter/material.dart';<br/>import 'dart:math';<br/>import 'dart:async';<br/>import 'dart:convert';<br/>import 'dart:core';<br/>import 'package:http/http.dart' as http;</span></pre><p id="e939" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">在你的<code class="du lq lr ls lt b">main.dart</code>文件的顶部导入我们将要使用的所有模块。找到文件<code class="du lq lr ls lt b">pubspec.yaml</code>和<code class="du lq lr ls lt b">http: ^0.12.0+1</code>(这是进行http请求所必需的)，如下所示:</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lp"><img src="../Images/80d54a106eea291e9fd2802354c704a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3kDVLbgt5pUjQkqYRfqBfQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Once you add, flutter will automatically install the dependency</figcaption></figure><ol class=""><li id="0c78" class="mz na hx jh b ji kc jm kd jq nb ju nc jy nd je ne nf ng nh bi translated"><code class="du lq lr ls lt b">pubspec</code>是存储包元数据的地方</li><li id="6ad1" class="mz na hx jh b ji ni jm nj jq nk ju nl jy nm je ne nf ng nh bi translated"><code class="du lq lr ls lt b">dart:async</code>允许使用<code class="du lq lr ls lt b">Future</code>类编写异步代码</li><li id="654d" class="mz na hx jh b ji ni jm nj jq nk ju nl jy nm je ne nf ng nh bi translated"><code class="du lq lr ls lt b">dart:convert</code>允许解码JSON响应</li><li id="7a8d" class="mz na hx jh b ji ni jm nj jq nk ju nl jy nm je ne nf ng nh bi translated"><code class="du lq lr ls lt b">package:http/http.dart</code>允许发出http请求</li><li id="6464" class="mz na hx jh b ji ni jm nj jq nk ju nl jy nm je ne nf ng nh bi translated"><code class="du lq lr ls lt b">dart:math</code>和<code class="du lq lr ls lt b">dart:code</code>提供了一些辅助函数来操作数据</li></ol><figure class="ki kj kk kl fd hj"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="238f" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">如上所示更新代码。请阅读添加内容的评论。本质上，我们已经要求我们的小部件在状态初始化时执行<code class="du lq lr ls lt b">getCryptoPrices</code>。然后我们执行一个<code class="du lq lr ls lt b">async</code>操作来从一个api获取数据，并设置<code class="du lq lr ls lt b">cryptoList.</code>的状态</p><p id="58ed" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">按下<code class="du lq lr ls lt b">R</code>进行热重启</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nn"><img src="../Images/952e4c9ddac1c17be0c7f8ed3669e015.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Mjzo_336cRwr32grHS5XIw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Output of the app now. All the required data is available for us to use.</figcaption></figure><p id="13d9" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">太好了！我们的数据可供我们使用。我们现在可以生成UI来显示这些数据。</p><h2 id="4597" class="lu kn hx bd ko lv lw lx ks ly lz ma kw jq mb mc la ju md me le jy mf mg li mh bi translated">创建ListView</h2><figure class="ki kj kk kl fd hj"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="6d63" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">用上面显示的代码更新您的代码。增加了很多代码，但是我已经尽量多加注释，让它看得懂。以下是我们所做的工作:</p><ol class=""><li id="4120" class="mz na hx jh b ji kc jm kd jq nb ju nc jy nd je ne nf ng nh bi translated">把我们的<code class="du lq lr ls lt b">Scaffold body</code>换成<code class="du lq lr ls lt b">_buildCryptoList</code>。这返回一个<code class="du lq lr ls lt b">ListView</code>。使用<code class="du lq lr ls lt b">_buildRow</code>构建行</li><li id="68ce" class="mz na hx jh b ji ni jm nj jq nk ju nl jy nm je ne nf ng nh bi translated"><code class="du lq lr ls lt b">_buildRow</code>用颜色吸收每个加密货币对象。它相应地构建了一行:头像、标题、副标题和图标</li><li id="23b0" class="mz na hx jh b ji ni jm nj jq nk ju nl jy nm je ne nf ng nh bi translated"><code class="du lq lr ls lt b">_fav</code>点击心形图标时的处理。<code class="du lq lr ls lt b">_saved</code>包含我们喜欢的<code class="du lq lr ls lt b">crypto</code>对象列表。</li></ol><p id="76bd" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">按下<code class="du lq lr ls lt b">R</code>进行热重启</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kh"><img src="../Images/8666d6e5a9d5173d7f58408570546db5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W1yfSiirwaN1SWE0LMpFYw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Looks so much better!</figcaption></figure><p id="f3da" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">太好了！现在，您已经构建了一个非常漂亮的UI，其中包含了各种加密货币的真实数据。如果你不能理解代码，没关系！慢慢来，经过足够的练习，你会找到窍门的。否则，欢迎在下面发表评论。</p><h2 id="9c07" class="lu kn hx bd ko lv lw lx ks ly lz ma kw jq mb mc la ju md me le jy mf mg li mh bi translated">添加装载栏</h2><p id="358d" class="pw-post-body-paragraph jf jg hx jh b ji lk jk jl jm ll jo jp jq lm js jt ju ln jw jx jy lo ka kb je ha bi translated">如果你注意到，当你重启应用程序时，会有一个短暂的错误显示。这是因为当调用<code class="du lq lr ls lt b">getCryptoPrices</code>时，没有设置用于构建列表视图的<code class="du lq lr ls lt b">_cryptoList</code>状态，因此在设置状态之前会出现一个错误。让我们编辑代码以显示一个加载栏，直到<code class="du lq lr ls lt b">_cryptoList</code>被设置。</p><figure class="ki kj kk kl fd hj"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="54dd" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">用这个更新代码。我们调用了另一个函数<code class="du lq lr ls lt b">_getMainBody.</code>，而不是直接调用<code class="du lq lr ls lt b">Scaffold</code>中的<code class="du lq lr ls lt b">_buildCryptoList</code></p><p id="5017" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">在<code class="du lq lr ls lt b">getCryptoPrices</code>中，我们还在发出请求之前将<code class="du lq lr ls lt b">_loading</code>设置为true，在完成请求之后将<code class="du lq lr ls lt b">_loading</code>设置为false。<code class="du lq lr ls lt b">_getMainBody</code>然后检查并返回一个进度条，如果<code class="du lq lr ls lt b">_loading</code>为真。</p><p id="c78f" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">当你运行应用程序时，你应该会看到一个圆形的进度指示器，而不是我们之前看到的错误页面。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kh"><img src="../Images/6328bfb1eabfb7370ce63a28dc59b827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_RO-6AxErsPfts_2zeQnRg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Centralised loading bar when an API is in progress</figcaption></figure><h2 id="6c3a" class="lu kn hx bd ko lv lw lx ks ly lz ma kw jq mb mc la ju md me le jy mf mg li mh bi translated">拉至刷新</h2><p id="a725" class="pw-post-body-paragraph jf jg hx jh b ji lk jk jl jm ll jo jp jq lm js jt ju ln jw jx jy lo ka kb je ha bi translated">我们现在有一个不错的应用程序。因为我以前有过开发iOS应用的经验，所以我想看看模仿一些功能会是什么样子。最常用的功能之一是<strong class="jh hy"> <em class="mv">拉刷新。</em> </strong></p><p id="27e8" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">事实证明，其实很简单。</p><figure class="ki kj kk kl fd hj"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="50c2" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">用上述功能替换<code class="du lq lr ls lt b">_getMainBody</code>。它所做的是，不是直接返回<code class="du lq lr ls lt b">ListView</code>，而是将它包装在<code class="du lq lr ls lt b">RefreshIndicator</code>周围，这使得拉刷新成为可能。然后我们将<code class="du lq lr ls lt b">onRefresh</code>指向我们进行api调用的函数。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kh"><img src="../Images/45aef710aca3a6824d50cde52d1d0907.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z9PwmvT2jHyucSgkRG31uw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Pull down to refresh the data</figcaption></figure><p id="2a80" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">这就是为什么我们需要我们的小部件是有状态的。当数据发生变化时，无论是通过轮询还是服务推送，我们都希望数据发生变化，UI也相应地呈现出来。如果我们只想在应用程序运行期间显示一次数据，我们可以让我们的小部件成为无状态的。</p><h2 id="47f0" class="lu kn hx bd ko lv lw lx ks ly lz ma kw jq mb mc la ju md me le jy mf mg li mh bi translated">推动新观点</h2><p id="c4ac" class="pw-post-body-paragraph jf jg hx jh b ji lk jk jl jm ll jo jp jq lm js jt ju ln jw jx jy lo ka kb je ha bi translated">我们之前提到过，我们希望能够查看喜欢的加密货币。所以让我们来实现它。</p><figure class="ki kj kk kl fd hj"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="40aa" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">如上所述，实现我们之前声明的<code class="du lq lr ls lt b">_pushSaved</code>函数。我在评论中写下了正在发生的事情。基本上，我们得到每个<code class="du lq lr ls lt b">saved</code>条目，建立一个新的列表，并将其传递给新路线的<code class="du lq lr ls lt b">Scaffold.</code></p><p id="a345" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">该功能在以下情况下触发:</p><pre class="ki kj kk kl fd mk lt ml mm aw mn bi"><span id="583f" class="lu kn hx lt b fi mo mp l mq mr">new IconButton(icon: const Icon(Icons.list), onPressed: _pushSaved),</span></pre><p id="722d" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">在主屏幕上。让我们运行应用程序，看看会发生什么。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kh"><img src="../Images/9dcf97aed2345c638f5453a67a4dc162.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Rszww0cb7YyFW5CgVTy0Xw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">First favourite some items and press the top right button</figcaption></figure><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kh"><img src="../Images/b252492132f39fc710259a867233c700.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ow513fHApFiHsZEBfL7kAw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Your favourited items will be visible!</figcaption></figure><p id="057f" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">当然，如果我们不能在Android和iOS上运行跨平台框架，它就没有用了！所以下面是<strong class="jh hy"> <em class="mv">无代码变化的安卓等效截图。</em> </strong></p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es no"><img src="../Images/0fcbdb118122b490e8566a6a5062ef54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*h7VbduS8SHcXES4Bale_IQ.png"/></div></div></figure><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es no"><img src="../Images/299c70aebdaf11afd49fe97c47386d16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*94e8sOjtrrixoxkN_5aYOA.png"/></div></div></figure><p id="38d2" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">我相信某些定制肯定是可能的，以更好地适应每个平台的本机外观，例如通过使用<em class="mv"> cupertino风格</em>小部件，但这不包括在本教程中。</p></div><div class="ab cl np nq go nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ha hb hc hd he"><h1 id="05c2" class="km kn hx bd ko kp nw kr ks kt nx kv kw kx ny kz la lb nz ld le lf oa lh li lj bi translated">最后的想法</h1><p id="bd19" class="pw-post-body-paragraph jf jg hx jh b ji lk jk jl jm ll jo jp jq lm js jt ju ln jw jx jy lo ka kb je ha bi translated">这是我用Flutter做的第一个项目。我参考了官方Flutter页面中显示的原始样本，但为了方便自己的学习，对其进行了扩展。框架真的感觉很酷，所以我以后可能会写其他复杂的教程。</p><p id="a9ff" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">完整的源代码可以在这里找到:</p><div class="hg hh ez fb hi ob"><a href="https://github.com/Bilguun132/crypto_list" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab dw"><div class="od ab oe cl cj of"><h2 class="bd hy fi z dy og ea eb oh ed ef hw bi translated">Bilguun132/crypto_list</h2><div class="oi l"><h3 class="bd b fi z dy og ea eb oh ed ef dx translated">颤振演示。在GitHub上创建一个帐户，为Bilguun132/crypto_list的开发做出贡献。</h3></div><div class="oj l"><p class="bd b fp z dy og ea eb oh ed ef dx translated">github.com</p></div></div><div class="ok l"><div class="ol l om on oo ok op ho ob"/></div></div></a></div></div><div class="ab cl np nq go nr" role="separator"><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu nv"/><span class="ns bw bk nt nu"/></div><div class="ha hb hc hd he"><p id="3d9a" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">如果有人觉得这些有用，请随意分享或者让我知道是否有错误/不好的实践/实现。</p><p id="cb5b" class="pw-post-body-paragraph jf jg hx jh b ji kc jk jl jm kd jo jp jq ke js jt ju kf jw jx jy kg ka kb je ha bi translated">祝编码愉快！</p></div></div>    
</body>
</html>