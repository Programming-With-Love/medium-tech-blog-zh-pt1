<html>
<head>
<title>ARM-Tool for resource management in Azure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于Azure资源管理的工具</h1>
<blockquote>原文：<a href="https://medium.com/globant/arm-tool-for-resource-management-in-azure-3a721e02ab25?source=collection_archive---------0-----------------------#2020-12-30">https://medium.com/globant/arm-tool-for-resource-management-in-azure-3a721e02ab25?source=collection_archive---------0-----------------------#2020-12-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="8579" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">介绍</h2></div><p id="7e2f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">灵活性和配置是当今技术时代的需要，当我们谈论云时也是如此。如果您可以利用现有的模板，并且不需要额外的努力来运行系统，这难道不是一件很酷的事情吗？这就是ARM模板发挥作用的地方。ARM是一个可重用的基于组件的工具，用于管理和部署Azure中的资源。</p><h2 id="0153" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">什么是ARM (Azure资源管理器)模板？</h2><p id="c324" class="pw-post-body-paragraph iw ix hh iy b iz kn ii jb jc ko il je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">使用ARM模板，您可以在一个单元中一起部署多个资源，并且部署是幂等的。在这里，用户声明资源的类型、使用什么名称以及它应该具有哪些属性。<br/> ARM模板提供了在JSON文件中声明对象、类型、名称和属性并附加到源代码控制中的灵活性。</p><h2 id="13c0" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated"><strong class="ak">手臂模板组件</strong></h2><blockquote class="ks kt ku"><p id="2961" class="iw ix kv iy b iz ja ii jb jc jd il je kw jg jh ji kx jk jl jm ky jo jp jq jr ha bi translated">ARM模板可以用两种方式定义<br/> 1。整个资源组的内容。<br/> 2。资源组中的一个或多个资源。<br/>部署模板时，用户可以选择“完整”或“增量”模式。</p></blockquote><ol class=""><li id="142d" class="kz la hh iy b iz ja jc jd jf lb jj lc jn ld jr le lf lg lh bi translated"><strong class="iy hi">资源</strong>:可通过Azure获得的可管理项目。虚拟机、存储帐户、web应用程序、数据库和虚拟网络都是资源的例子。资源组、订阅、管理组和标记也是资源的示例。</li><li id="65c8" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr le lf lg lh bi translated"><strong class="iy hi">资源提供者</strong>:提供Azure资源的服务。例如，一个常见的资源提供者是“微软。计算”，它提供虚拟机资源。“微软。存储”是另一种常见的资源提供者。</li><li id="c508" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr le lf lg lh bi translated"><strong class="iy hi">资源组</strong>:保存Azure解决方案相关资源的容器。资源组包括那些要作为一个组来管理的资源。您可以根据什么对您的组织最有意义来决定哪些资源属于一个资源组。</li><li id="656d" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr le lf lg lh bi translated"><strong class="iy hi">资源管理器模板</strong>:一个JavaScript对象符号(JSON)文件，它定义了一个或多个要部署到资源组subscription的资源。该模板可用于一致且重复地部署资源。</li></ol><h2 id="a041" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">使用Azure资源管理器的好处</h2><ul class=""><li id="24eb" class="kz la hh iy b iz kn jc ko jf ln jj lo jn lp jr lq lf lg lh bi translated">通过声明性模板而不是脚本来管理您的基础架构。</li><li id="a00f" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr lq lf lg lh bi translated">将您的解决方案的所有资源作为一个整体进行部署、管理和监控，而不是单独处理这些资源。</li><li id="ef10" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr lq lf lg lh bi translated">在整个开发生命周期中重新部署您的解决方案，并确信您的资源以一致的状态部署。</li><li id="f5f9" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr lq lf lg lh bi translated">定义资源之间的依赖关系，以便按正确的顺序部署它们。</li><li id="5c25" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr lq lf lg lh bi translated">将访问控制应用于所有服务，因为Azure基于角色的访问控制被原生集成到管理平台中。</li><li id="393d" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr lq lf lg lh bi translated">将标签应用于资源，以逻辑方式组织订阅中的所有资源。</li><li id="b440" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr lq lf lg lh bi translated">通过查看共享相同标签的一组资源的成本，明确贵组织的帐单。</li></ul><h2 id="b638" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated"><strong class="ak">臂流(架构)</strong></h2><ol class=""><li id="858c" class="kz la hh iy b iz kn jc ko jf ln jj lo jn lp jr le lf lg lh bi translated">当用户从任何Azure工具、API或SDK发送请求时，资源管理器接收请求。</li><li id="23f6" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr le lf lg lh bi translated">它对请求进行身份验证和授权。</li><li id="8c36" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr le lf lg lh bi translated">资源管理器向Azure服务发送请求，Azure服务执行请求的操作。</li></ol><p id="9ee4" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">因为所有请求都是通过相同的API处理的，所以您可以在所有不同的工具中看到一致的结果和功能。</p><p id="c70f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">下图显示了Azure资源管理器在处理Azure请求中扮演的角色。</p><figure class="ls lt lu lv fd lw er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es lr"><img src="../Images/ace768ff7b9dce0b94c97c45f23cfc3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0icDala7AU3U7BbAbYFhwA.png"/></div></div><figcaption class="md me et er es mf mg bd b be z dx">(Image courtesy from Microsoft) ARM flow</figcaption></figure><p id="1d9e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">门户中可用的所有功能也可以通过PowerShell、Azure CLI、REST APIs和客户端SDK获得。最初通过API发布的功能将在最初发布后的180天内出现在门户中。</p><h2 id="88da" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">如何创建ARM模板(步骤)</h2><figure class="ls lt lu lv fd lw er es paragraph-image"><div class="er es mh"><img src="../Images/b14d1ddb179d0aa37bced29dc781946f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*MhxGBEv-GGXShnOP68P2jQ.png"/></div><figcaption class="md me et er es mf mg bd b be z dx">(Image courtesy from Microsoft)</figcaption></figure><h2 id="36ab" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated"><strong class="ak">使用门户网站创建模板</strong></h2><ol class=""><li id="e36d" class="kz la hh iy b iz kn jc ko jf ln jj lo jn lp jr le lf lg lh bi translated">在网络浏览器中，进入<a class="ae mi" href="https://portal.azure.com/" rel="noopener ugc nofollow" target="_blank"> Azure门户</a>并登录。</li><li id="c8db" class="kz la hh iy b iz li jc lj jf lk jj ll jn lm jr le lf lg lh bi translated">从Azure门户菜单中，选择创建资源。</li></ol><figure class="ls lt lu lv fd lw er es paragraph-image"><div class="er es mj"><img src="../Images/f588e6c84e351a8fe6a05be377c3164a.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*WxNC53Wi5SFaEVn3iQfCEg.png"/></div></figure><p id="f3e0" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">3.选择存储= &gt;存储帐户。</p><figure class="ls lt lu lv fd lw er es paragraph-image"><div class="er es mk"><img src="../Images/55263db58e7b29fbb4808c3315e613ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*_StmBTmtnebi1Xqp5n7EWQ.png"/></div></figure><p id="432e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">单击存储帐户后，如果没有所需的存储帐户名称，您需要提供一个资源组名称。</p><figure class="ls lt lu lv fd lw er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es ml"><img src="../Images/39e393cc7ed3a76bb82e64b660fa2f0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XCUTiU06xYKQA_UwWm0TMA.png"/></div></div></figure><p id="75bb" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">4.为下一步选择审查+创建按钮</p><p id="7faa" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">5.单击屏幕底部的查看+创建。它将使用存储帐户创建资源组</p><p id="3d9b" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">6.选择已创建的资源组，并选择需要为其创建ARM模板的存储帐户。</p><p id="f891" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">7.点击导出模板</p><figure class="ls lt lu lv fd lw er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mm"><img src="../Images/56a211ac60281497f60e4eca95be11c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p4o80JsPzW-GFogtD4Cz7g.png"/></div></div></figure><p id="9fac" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">8.点击下载按钮。将下载Zip文件。它会给你一个自动生成的带参数的模板。</p><figure class="ls lt lu lv fd lw er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mn"><img src="../Images/2170884cdc9e5cd16028031b25e97d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WWU8Ss7g8CCygYEG8wTL9Q.png"/></div></div></figure><p id="3d49" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">9.打开下载的zip文件，并将“template.json”保存到您的计算机中。</p><p id="ad1d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">10.选择参数选项卡以查看您为参数提供的值。记下这些值，在部署模板时会用到它们。</p><figure class="ls lt lu lv fd lw er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mo"><img src="../Images/6c9b1a6494d038d08dd5764a51419eb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YolheVpAQVE2mn8uCJFDZA.png"/></div></div></figure><h2 id="44cf" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">编辑和部署模板</h2><blockquote class="ks kt ku"><p id="c249" class="iw ix kv iy b iz ja ii jb jc jd il je kw jg jh ji kx jk jl jm ky jo jp jq jr ha bi translated">Azure Portal用于执行基本的模板部署。您可以使用名为<em class="hh">模板部署</em>的门户工具。</p><p id="3862" class="iw ix kv iy b iz ja ii jb jc jd il je kw jg jh ji kx jk jl jm ky jo jp jq jr ha bi translated">Azure要求每个Azure服务都有唯一的名称。如果您输入的存储帐户名称已经存在，您的部署可能会失败。为了避免这个问题，您可以修改模板以使用模板函数调用“uniquestring()”来生成唯一的存储帐户名。</p></blockquote><ol class=""><li id="5674" class="kz la hh iy b iz ja jc jd jf lb jj lc jn ld jr le lf lg lh bi translated">在Azure门户的搜索框中，搜索“部署”,然后从建议中选择“部署自定义模板”。</li></ol><figure class="ls lt lu lv fd lw er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mp"><img src="../Images/dd33c431595df551d7f3d2a77a77d353.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qLMSkECKX86aQBGhIVP0ng.png"/></div></div></figure><p id="f91e" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">2.在编辑器中选择选项<strong class="iy hi">构建您自己的模板。</strong></p><p id="3250" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">3.选择加载文件，然后按照说明加载您在上一节中下载的“template.json ”,或者您可以直接复制模板并粘贴到编辑器中。</p><figure class="ls lt lu lv fd lw er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mq"><img src="../Images/6c1cef3328904ca85d7fb6aadb73f6ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HkJVglxp80xm0TouvPpvWg.png"/></div></div></figure><p id="c6cc" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">4.点击保存按钮</p><p id="d7d1" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">5.选择要部署ARM模板的订阅和资源组。然后点击查看+创建按钮</p><figure class="ls lt lu lv fd lw er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mr"><img src="../Images/bffa44018953d0194804a63b1cc7599d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SmhaycU9-E7CeWyd7LWW1Q.png"/></div></div></figure><p id="0f54" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">6.成功通过验证后，单击“创建”按钮进行部署。</p><figure class="ls lt lu lv fd lw er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es ms"><img src="../Images/b108b89056b573abaa800d5319069f82.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PWk9Pyw551Y6o--cUq9Kng.png"/></div></div></figure><p id="25ff" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">7.在下一个屏幕上，它将向您显示部署状态</p><figure class="ls lt lu lv fd lw er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mt"><img src="../Images/1dadcc9a805c48371e206f6099f61271.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0h6iSrD0tgP2gSlEDXFU0Q.png"/></div></div></figure><p id="d61a" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">8.单击Go to a resource group，它将显示给定资源组上部署的所有资源</p><figure class="ls lt lu lv fd lw er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mu"><img src="../Images/5fe98a9bcfd55b03e2477d4ef810bc21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WitDKOup8Pd9C2Na3oKgUw.png"/></div></div></figure><p id="a07f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这样，您将获得所选订阅上部署的所有资源。</p><h2 id="c0cf" class="js jt hh bd ju jv jw jx jy jz ka kb kc jf kd ke kf jj kg kh ki jn kj kk kl km bi translated">结论</h2><p id="df0b" class="pw-post-body-paragraph iw ix hh iy b iz kn ii jb jc ko il je jf kp jh ji jj kq jl jm jn kr jp jq jr ha bi translated">通过使用ARM模板，你可以以一种简单的方式部署和管理你的Azure资源。由于其可重复使用的性质，人们可以一次创建模板，并且同一个模板可以多次使用，这可以节省时间和精力。</p><p id="c261" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iy hi">了解更多信息:</strong><a class="ae mi" href="https://docs.microsoft.com/en-us/azure/azure-resource-manager" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/azure/azure-resource-manager</a></p></div></div>    
</body>
</html>