# ä½¿ç”¨äº¤äº’å¼ç”»å¸ƒæ„å»ºæ‚¨çš„ç¬¬ä¸€ä¸ªåŠ¨ä½œ

> åŸæ–‡ï¼š<https://medium.com/google-developer-experts/build-your-first-action-with-interactive-canvas-11edd0698c5e?source=collection_archive---------1----------------------->

å¦‚æœä½ æ›¾ç»ä¸º Google Assistant å¼€å‘è¿‡ä¸€ä¸ªåŠ¨ä½œï¼Œä½ å¯èƒ½ä¼šè®¤ä¸ºâ€œè¿™ä¸ªå¹³å°æœ‰å¾ˆå¤§çš„æ¸¸æˆæ½œåŠ›â€ï¼Œä½†ä½ ä¼šæ„è¯†åˆ°ä½ å®é™…ä¸Šå¯ä»¥å‘ç”¨æˆ·å±•ç¤ºçš„ä¸œè¥¿éå¸¸æœ‰é™ã€‚

è¿›å…¥ï¼Œäº’åŠ¨ç”»å¸ƒï¼

![](img/64a2fa20cd5c500c6b8d0154ea8a08ef.png)

# ä»€ä¹ˆæ˜¯äº¤äº’ç”»å¸ƒï¼Ÿ

åœ¨ Google I/Oâ€™19 ä¸Šå®£å¸ƒçš„ Interactive Canvas æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œå…è®¸æ‚¨çš„æ“ä½œæä¾›ä¸°å¯Œçš„è§†è§‰æ•ˆæœï¼Œå¯ä»¥ä¸è¯­éŸ³è¿›è¡Œäº¤äº’ã€‚ç°åœ¨ï¼Œæˆ‘ä¸ªäººå¹¶ä¸è®¤ä¸ºæ¸¸æˆä¸€å®šè¦æœ‰å›¾å½¢ï¼Œæˆ‘ç›¸ä¿¡çº¯è¯­éŸ³çš„æ¸¸æˆå¯ä»¥å’Œé‡å›¾å½¢çš„æ¸¸æˆä¸€æ ·æœ‰è¶£ã€‚ä½†æ˜¯äº¤äº’å¼ç”»å¸ƒä»ç„¶æ˜¯ä¸€ä¸ªæ¸¸æˆè§„åˆ™æ”¹å˜è€…ï¼Œå› ä¸ºå®ƒå…è®¸ä½ é€šè¿‡åˆ©ç”¨ä½ å·²ç»çŸ¥é“å¹¶å–œæ¬¢çš„ç½‘ç»œæŠ€æœ¯æ¥å»ºç«‹è¯­éŸ³è½¬å‘ä½“éªŒã€‚å®ƒç›®å‰æ”¯æŒæ™ºèƒ½æ˜¾ç¤ºå™¨å’Œ Android ç§»åŠ¨è®¾å¤‡ã€‚

å¦‚æœä½ æƒ³è®©æ¸¸æˆä¸ºè°·æ­ŒåŠ©æ‰‹åšå¥½å‡†å¤‡ï¼Œè¯·ç»§ç»­é˜…è¯»ã€‚å› ä¸ºåœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è¯•ç€å¸¦ä½ å»æ„å»ºä¸€ä¸ªä½¿ç”¨äº¤äº’å¼ç”»å¸ƒçš„ç®€å•åŠ¨ä½œçš„æ­¥éª¤ã€‚

## é™åˆ¶

å°½ç®¡ Interactive Canvas æ”¯æŒç°ä»£ web æµè§ˆå™¨æ‰€æ”¯æŒçš„å¤§å¤šæ•° HTML/CSS/JS ç‰¹æ€§ï¼Œä½†ç”±äºéšç§å’Œå®‰å…¨åŸå› ï¼Œå®ƒè¿˜æ˜¯æœ‰ä¸€äº›é™åˆ¶ã€‚ä¾‹å¦‚ï¼Œæ‚¨ä¸èƒ½ä½¿ç”¨ cookies æˆ–æœ¬åœ°å­˜å‚¨ã€‚ä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°é™åˆ¶[çš„å®Œæ•´åˆ—è¡¨](https://developers.google.com/actions/interactivecanvas/build/web-app#restrictions)ã€‚

# æˆ‘ä»¬å°†è¦å»ºé€ çš„ä¸œè¥¿

æˆ‘ä»¬å°†æ„å»ºä¸€ä¸ªåŠ¨ä½œï¼Œåœ¨å±å¹•ä¸Šå‘ç”¨æˆ·æ˜¾ç¤ºå„ç§åŠ¨ç‰©å›¾æ ‡ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ç®€å•åœ°å‘Šè¯‰åŠ¨ç‰©çš„åç§°å’Œä»–ä»¬å¸Œæœ›å®ƒå˜æˆçš„é¢œè‰²æ¥æ”¹å˜æ¯ç§åŠ¨ç‰©çš„é¢œè‰²ã€‚

## å®ƒå°†å¦‚ä½•å·¥ä½œï¼Ÿ

*   ç”¨æˆ·å°†å¼€å§‹åŠ¨ä½œï¼Œæˆ‘ä»¬çš„*é»˜è®¤æ¬¢è¿æ„å›¾*å°†è§¦å‘äº¤äº’å¼ç”»å¸ƒï¼Œå‘ç”¨æˆ·æ˜¾ç¤ºå¸¦æœ‰åŠ¨ç‰©å›¾æ ‡çš„ç½‘é¡µ
*   ç”¨æˆ·å°†æŒ‘é€‰ä¸€ç§åŠ¨ç‰©å’Œä¸€ç§é¢œè‰²ï¼Œå¹¶è¯´ï¼Œä¾‹å¦‚ï¼Œ*â€œä½¿ç‹—å˜çº¢â€*
*   å’Œå¾€å¸¸ä¸€æ ·ï¼ŒAssistant ä¼šå°†ç”¨æˆ·çš„è¯è¯­è½¬æ¢æˆæ–‡æœ¬ï¼Œå¹¶å‘é€ç»™ Dialogflow
*   Dialogflow å°†ç”¨æˆ·çš„æ„å›¾ä¸ *change_animal_color intentã€*è¿›è¡ŒåŒ¹é…ï¼Œå¹¶æå–å®ä½“å€¼ä¸º *animal = dog* å’Œ *color = red*
*   æˆ‘ä»¬çš„å®ç°å°†æ›´æ–°ç”»å¸ƒçš„**æ•°æ®**(çŠ¶æ€)ã€‚è¿™ä¸ªæ›´æ–°å°†ç”±ç½‘é¡µé€šè¿‡ *InteractiveCanvas.js* æ³¨å†Œï¼Œè¿™å°†è§¦å‘ä¸€ä¸ªæ”¹å˜åŠ¨ç‰©é¢œè‰²çš„å‡½æ•°ã€‚

## å…ˆå†³æ¡ä»¶

> è¯·æ³¨æ„ï¼Œå³ä½¿æˆ‘ä»¬ä¸ä¼šåœ¨æœ¬æ–‡ç»“æŸæ—¶åˆ¶ä½œä¸€ä¸ªå®Œæ•´çš„æ¸¸æˆï¼Œä½ ä»ç„¶éœ€è¦ç†Ÿæ‚‰è°·æ­Œå¹³å°å’Œ Firebase ä¸Šçš„åŸºæœ¬åŠ¨ä½œã€‚

*   äº†è§£è°·æ­Œå¹³å°çš„åŸºæœ¬æ“ä½œ
*   ç†Ÿæ‚‰å¯¹è¯æµ
*   å®‰è£…åœ¨è®¡ç®—æœºä¸Šçš„ Node.js å’Œ firebase-tools

å¦‚æœä½ ç¼ºå°‘ä¸€ä¸ªæˆ–å¤šä¸ªå…ˆå†³æ¡ä»¶ï¼Œæˆ‘å»ºè®®åœ¨éµå¾ªæœ¬æ•™ç¨‹ä¹‹å‰å®Œæˆè°·æ­ŒåŠ©æ‰‹(1 çº§)çš„ä»£ç å®éªŒå®¤[æ„å»ºåŠ¨ä½œ](https://codelabs.developers.google.com/codelabs/actions-1/)å’Œè°·æ­ŒåŠ©æ‰‹(2 çº§)çš„[æ„å»ºåŠ¨ä½œ](https://codelabs.developers.google.com/codelabs/actions-2/)ã€‚

# æ„å»º Hello World

## åˆ›å»ºé¡¹ç›®

1.  é¦–å…ˆï¼Œåœ¨è°·æ­Œæ§åˆ¶å°ä¸Šè¿›å…¥[åŠ¨ä½œï¼Œåˆ›å»ºä¸€ä¸ªæ–°é¡¹ç›®ã€‚(åˆ«å¿˜äº†æ³¨æ„æ–°çš„ç”¨æˆ·ç•Œé¢æœ‰å¤šæ¼‚äº®ğŸ˜)](https://console.actions.google.com)
2.  é€‰æ‹©æ¸¸æˆå’Œå¨±ä¹ç±»åˆ«ï¼Œå› ä¸ºäº’åŠ¨ç”»å¸ƒä»ä»Šå¤©èµ·åªé€‚ç”¨äºæ¸¸æˆã€‚
3.  åœ¨ä¸‹ä¸€æ­¥é€‰æ‹©*å¯¹è¯*ï¼Œå› ä¸ºæˆ‘ä»¬å°†ä½¿ç”¨ Dialogflowã€‚
4.  åœ¨*æ„å»ºæ‚¨çš„æ“ä½œ*éƒ¨åˆ†ï¼Œé€‰æ‹©*æ·»åŠ æ“ä½œ*å¹¶ç‚¹å‡»*æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ªæ“ä½œ*æŒ‰é’®ã€‚é€‰æ‹©*è‡ªå®šä¹‰æ„å›¾*å¹¶ç‚¹å‡»*æ„å»ºã€‚*
5.  æ­¤æ—¶ï¼ŒDialogflow åº”è¯¥ä¼šæ‰“å¼€ã€‚å¦‚æœæ‚¨è¿˜æ²¡æœ‰ç™»å½•ï¼Œè¯·ç‚¹å‡»å³ä¸Šè§’çš„*åˆ›å»º*ã€‚
6.  å›åˆ°è°·æ­Œæ§åˆ¶å°ä¸Šçš„æ“ä½œï¼Œä»é¡¶éƒ¨èœå•ä¸­é€‰æ‹©*éƒ¨ç½²*ã€‚
7.  æ»šåŠ¨åˆ°æœ€åº•éƒ¨ï¼Œé€‰ä¸­æ ‡ç­¾ä¸º**äº¤äº’å¼ç”»å¸ƒçš„æ¡†ã€‚**å‘ä¸Šæ»šåŠ¨åˆ°é¡¶éƒ¨ï¼Œç‚¹å‡»*ä¿å­˜*ã€‚

![](img/9b777a7042cb257f32d6b82e1b648437.png)

ç§å•Šã€‚æ‚¨çš„é¡¹ç›®å’Œ Dialogflow ä»£ç†å·²å‡†å¤‡å¥½è¿›è¡Œå¼€å‘ã€‚

> *å¦‚æœæ‚¨åœ¨è¿™ä¸€æ­¥æ²¡æœ‰é€‰æ‹©æ­£ç¡®çš„ç±»åˆ«ï¼Œæ‚¨å¯ä»¥éšæ—¶é€šè¿‡ä½äº*éƒ¨ç½²>ç›®å½•ä¿¡æ¯>é™„åŠ ä¿¡æ¯ä¸‹çš„ dropbox è¿›è¡Œè®¾ç½®

## è®¾ç½®æœ¬åœ°å¼€å‘ç¯å¢ƒ

åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ Firebase äº‘åŠŸèƒ½æ¥å®ç° webhook å’Œ Firebase æ‰˜ç®¡æ¥æ‰˜ç®¡æˆ‘ä»¬çš„ web åº”ç”¨ç¨‹åºã€‚å¦‚æœæ‚¨ä»æœªåœ¨è®¡ç®—æœºä¸Šä½¿ç”¨è¿‡ firebase-toolsï¼Œé¦–å…ˆè¿è¡Œ:

```
firebase login
```

å¦‚æœæ‚¨å·²ç™»å½•ï¼Œè®©æˆ‘ä»¬åœ¨è®¡ç®—æœºä¸Šåˆ›å»ºä¸€ä¸ªç›®å½•ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤:

```
firebase init
```

å½“å®ƒé—®ä½ æ˜¯å¦å‡†å¤‡å¥½äº†ï¼Œè¯´æ˜¯ï¼Œä»åˆ—è¡¨ä¸­é€‰æ‹©ä¸»æœºå’ŒåŠŸèƒ½ç‰¹æ€§ï¼Œç„¶åæŒ‰å›è½¦é”®ã€‚

![](img/f2b90e8c3ff37d2243fa228cd7c8e144.png)

å°†å¼¹å‡ºä¸€ä¸ªæ–°åˆ—è¡¨ï¼Œé€‰æ‹©æ‚¨åœ¨å‰é¢æ­¥éª¤ä¸­åˆ›å»ºçš„é¡¹ç›®çš„é¡¹ç›® idã€‚ä»¥ as çš„èº«ä»½å›ç­”ä»¥ä¸‹é—®é¢˜:

**åŠŸèƒ½é…ç½®:**

*   Java Script è¯­è¨€
*   æ²¡æœ‰ ESLint
*   æ˜¯ï¼Œå®‰è£…ä¾èµ–é¡¹ã€‚

**æ‰˜ç®¡é…ç½®:**

*   ä½¿ç”¨(public)ä½œä¸ºæˆ‘ä»¬çš„å…¬å…±ç›®å½•ã€‚(åªéœ€æŒ‰å›è½¦é”®)
*   æ˜¯ï¼Œå°†æ­¤åº”ç”¨é…ç½®ä¸ºå•é¡µåº”ç”¨ã€‚

è¿™å°±æ˜¯æˆ‘ä»¬çš„äº‘åŠŸèƒ½å’Œæ‰˜ç®¡çš„æœ¬åœ°å¼€å‘ç¯å¢ƒï¼Œå‡†å¤‡éƒ¨ç½²åœ¨ Firebase ä¸Šã€‚

## é…ç½®æ¬¢è¿æ„å›¾

æˆ‘ä»¬çš„*é»˜è®¤æ¬¢è¿æ„å›¾*éœ€è¦åœ¨åŠ©æ‰‹ä¸­æ‰“å¼€æˆ‘ä»¬çš„ web appã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»å¯¹å®ƒè¿›è¡Œé…ç½®ï¼Œä»¥ä¾¿å®ƒç”±æˆ‘ä»¬çš„ webhook æ¥å®Œæˆã€‚æ‰“å¼€ Dialogflow æ§åˆ¶å°å¹¶:

1.  ä»åˆ—è¡¨ä¸­é€‰æ‹©*é»˜è®¤æ¬¢è¿æ„å‘*ï¼Œå¹¶åˆ é™¤è¯¥æ„å‘çš„æ‰€æœ‰åŸ¹è®­çŸ­è¯­ã€‚(æˆ‘ä»¬ä¸å¸Œæœ›æˆ‘ä»¬çš„ç”¨æˆ·é€šè¿‡ä½¿ç”¨è¿™äº›çŸ­è¯­å›åˆ°è¿™ä¸ªæ„å›¾)
2.  ç»§ç»­åˆ é™¤æ‰€æœ‰çš„å›å¤ã€‚
3.  æœ€åï¼Œé€šè¿‡ä½¿ç”¨é¡µé¢åº•éƒ¨çš„æŒ‰é’®å¯ç”¨æ„å‘çš„ webhook è°ƒç”¨ã€‚ç‚¹å‡»*ä¿å­˜ã€‚*

![](img/60bbf49361c11049a4bf860751509263.png)

## æ„å»ºåŸºç¡€:Web åº”ç”¨ç¨‹åº

æˆ‘ä»¬éœ€è¦é¦–å…ˆæ„å»ºå’Œéƒ¨ç½² web åº”ç”¨ç¨‹åºï¼Œå› ä¸ºåœ¨æ„å»ºæˆ‘ä»¬çš„å®ç°æ—¶ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒçš„ URLã€‚

æ‰“å¼€ index.html çš„**å…¬å…±>æ–‡ä»¶ï¼Œç”¨ä»¥ä¸‹ä»£ç ä¿®æ”¹å…¶å†…å®¹:**

Notice the asset that Google provides us with: interactive_canvas.min.js

*   interactive_canvas.min.js æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒå°†æ³¨å†Œæˆ‘ä»¬ä» webhook å‘é€çš„çŠ¶æ€æ›´æ–°ã€‚åŸºæœ¬ä¸Šï¼Œè¿™ä¸ªæ–‡ä»¶ä½¿æˆ‘ä»¬çš„å¯¹è¯ä»£ç†å’Œæˆ‘ä»¬çš„ web åº”ç”¨ç¨‹åºä¹‹é—´çš„é€šä¿¡æˆä¸ºå¯èƒ½ã€‚
*   interactive_canvas.min.js è¿˜æœ‰ä¸€ä¸ªè·å–ç”¨æˆ·è®¾å¤‡çš„é¡µçœ‰é«˜åº¦çš„æ–¹æ³•ã€‚

ç°åœ¨ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥éƒ¨ç½²æˆ‘ä»¬çš„ä¸»æœº:

```
firebase deploy --only hosting
```

ä¸Šä¼ å®Œæˆåï¼Œæ‚¨åº”è¯¥ä¼šåœ¨ç»ˆç«¯ä¸­çœ‹åˆ°æ‰˜ç®¡ URLã€‚æ‚¨å¯èƒ½éœ€è¦å¤åˆ¶è¯¥ URLï¼Œå› ä¸ºæˆ‘ä»¬å°†åœ¨ä¸‹ä¸€æ­¥ä¸­ä½¿ç”¨å®ƒã€‚

## æ„å»ºåŸºç¡€:å®ç°

æˆ‘ä»¬å·²ç»ç”¨ firebase-tools ä¸ºæˆ‘ä»¬çš„é¡¹ç›®ç”Ÿæˆäº†å¿…è¦çš„æ–‡ä»¶ï¼Œç°åœ¨æˆ‘ä»¬å¯ä»¥ç»§ç»­ç¼–è¾‘å®ƒä»¬äº†ã€‚

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæˆ‘ä»¬çš„ webhook å®ç°è®¾ç½®ä¾èµ–å…³ç³»ã€‚æ‰“å¼€**å‡½æ•°> package.json** ï¼Œç”¨ä»¥ä¸‹ä»£ç ä¿®æ”¹å…¶å†…å®¹:

As you can see, weâ€™re depending on the â€œpreviewâ€ version of the actions-on-google client library to use Interactive Canvas.

ç„¶ååœ¨ **functions** ç›®å½•ä¸‹è¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥å®‰è£…ä¾èµ–é¡¹:

```
npm install
```

å®‰è£…å®Œæˆåï¼Œæ‰“å¼€**å‡½æ•°> index.js** ï¼Œç”¨ä»¥ä¸‹ä»£ç ä¿®æ”¹å…¶å†…å®¹:

âš ï¸ Donâ€™t forget to replace YOUR_URL_HERE with your web apps URL âš ï¸

æ‚¨éœ€è¦è¿”å›ä¸€ä¸ªæ–°çš„ **HtmlResponse** å¯¹è±¡æ¥ä½¿ç”¨äº¤äº’å¼ç”»å¸ƒã€‚æ‚¨éœ€è¦å†™ä¸‹æ‚¨çš„ web åº”ç”¨ç¨‹åºçš„ URLï¼Œè¿™æ˜¯æ‚¨åœ¨ä¸Šä¸€æ­¥ä¸­å¤åˆ¶çš„ï¼Œå®ƒæ˜¾ç¤ºä¸º YOUR_URL_HEREã€‚

æ›´æ–° URL åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤æ¥éƒ¨ç½²æ‚¨çš„äº‘åŠŸèƒ½:

```
firebase deploy --only functions
```

ç°åœ¨ï¼Œåœ¨æ‚¨çš„ç»ˆç«¯ä¸­ï¼Œæ‚¨åº”è¯¥ä¼šçœ‹åˆ°å‡½æ•° URLã€‚å¤åˆ¶å¹¶è½¬åˆ° Dialogflow æ§åˆ¶å°ã€‚åœ¨å·¦ä¾§æ ä¸­ï¼Œç‚¹å‡»*å±¥è¡Œ*ï¼Œå¯ç”¨ Webhook å¹¶ç²˜è´´æ‚¨çš„åŠŸèƒ½ URLã€‚

![](img/3815804ed4e9c3aab7f1e7595705c30d.png)

## æµ‹è¯•æ‚¨çš„è¡ŒåŠ¨

è½¬åˆ° Google æ§åˆ¶å°ä¸Šçš„æ“ä½œï¼Œç‚¹å‡»é¡¶éƒ¨èœå•ä¸Šçš„*æµ‹è¯•*æ‰“å¼€æ¨¡æ‹Ÿå™¨ã€‚å½“ä½ è¯´*â€œè·Ÿæˆ‘çš„æµ‹è¯• app è¯´è¯â€*ä½ åº”è¯¥çœ‹åˆ°**ä½ å¥½ï¼Œä¸–ç•Œï¼**æ˜¾ç¤ºå™¨ä¸Šå†™ç€ï¼Œè¿˜å¬åˆ°â€œä½ å¥½ï¼Œä¸–ç•Œâ€ã€‚

![](img/b5594165b47820e011aec017a909b19f.png)

How exciting ğŸ‘€

åœ¨åŠ©æ‰‹ä¸­çœ‹åˆ°æˆ‘ä»¬çš„è‡ªå®šä¹‰ç½‘é¡µå¾ˆé…·ï¼Œä½†æˆ‘ä»¬ä»ç„¶æ— æ³•ç”¨è¯­éŸ³ä¸ä¹‹äº¤äº’ã€‚è®©æˆ‘ä»¬ç»§ç»­ä¸‹ä¸€éƒ¨åˆ†ï¼Œçœ‹çœ‹æˆ‘ä»¬å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹ã€‚

# æ›´è¿›ä¸€æ­¥

è®©æˆ‘ä»¬æŠŠåŠ¨ç‰©å›¾æ ‡æ”¾åœ¨å±å¹•ä¸Šï¼Œè®©ç”¨æˆ·ç”¨ä»–ä»¬çš„å£°éŸ³æ”¹å˜å®ƒä»¬çš„é¢œè‰²ã€‚

## æ‰©å±• Dialogflow ä»£ç†

åœ¨å®Œæˆçš„é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†æœ‰ 4 åªåŠ¨ç‰©æ”¹å˜é¢œè‰²ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦åœ¨å¯¹è¯æµä¸­å¤„ç†ä¸¤ä¸ªå®ä½“:åŠ¨ç‰©å’Œé¢œè‰²ã€‚å¹¸è¿çš„æ˜¯ï¼ŒDialogflow æœ‰ä¸€ä¸ªé¢œè‰²çš„ç³»ç»Ÿå®ä½“ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¿…å®šä¹‰å®ƒã€‚ä½†æ˜¯æˆ‘ä»¬ç¡®å®éœ€è¦ä¸ºåŠ¨ç‰©åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä½“æ¥å±•ç¤ºç»™ç”¨æˆ·ã€‚æ‰“å¼€ Dialogflow æ§åˆ¶å°ï¼Œç‚¹å‡»å·¦ä¾§è¾¹æ ä¸Šçš„*å®ä½“*ã€‚**åˆ›å»ºä¸€ä¸ªåä¸º animal çš„æ–°å®ä½“:**

![](img/e28c16b39018b61114a0d93c1a444263.png)

I added crow as a synonym for the bird because the icon weâ€™ll be using is technically a crow ğŸ¦

å®Œæˆåï¼Œä¿å­˜å®ƒã€‚

æˆ‘ä»¬ä¹Ÿéœ€è¦ä¸€ä¸ªæ”¹å˜åŠ¨ç‰©é¢œè‰²çš„æ–°æ„å›¾ã€‚è®©æˆ‘ä»¬ç»§ç»­åˆ›å»ºå®ƒã€‚ä»å·¦ä¾§æ é€‰æ‹©*æ„å›¾*ï¼Œç„¶å**åˆ›å»ºä¸€ä¸ªåä¸º change_animal_color:** çš„æ–°æ„å›¾

![](img/f01293f18a3947eba5de3a44c268aac9.png)

Make sure the entities are extracted properly ğŸ”

æ‚¨å¯ä»¥å¤åˆ¶ä»¥ä¸‹åŸ¹è®­çŸ­è¯­:

*   æŠŠé’è›™å˜æˆè“è‰²
*   æŠŠé¸Ÿå˜æˆé»„è‰²
*   é’è›™ç»¿
*   æŠŠç‹—çš„é¢œè‰²å˜æˆçº¢è‰²
*   æŠŠé¾™æ¶‚æˆç²‰çº¢è‰²

å‘ä¸‹æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨ï¼Œ*å¯ç”¨å±¥è¡Œ*å¹¶æ‰“å¼€**å¯ç”¨æ­¤æ„å‘çš„ webhook è°ƒç”¨**ã€‚

å®Œæˆåï¼Œç»§ç»­ä¿å­˜å®ƒã€‚

## ä¸ºæ–°æ„å›¾åˆ›é€ å®ç°

æ‰“å¼€**å‡½æ•°> index.js** ï¼Œç”¨ä»¥ä¸‹ä»£ç ä¿®æ”¹å…¶å†…å®¹:

âš ï¸ Donâ€™t forget to replace YOUR_URL_HERE with your web apps URL âš ï¸

å¦‚æ‚¨æ‰€è§ï¼Œæ–°çš„ intent å¤„ç†ç¨‹åºè¿”å›å¦ä¸€ä¸ª HtmlResponse å¯¹è±¡ã€‚ä½†æ˜¯è¿™ä¸€æ¬¡ï¼Œæˆ‘ä»¬ä¸éœ€è¦å†æ¬¡è®¾ç½® URLã€‚ç›¸åï¼Œæˆ‘ä»¬ä¼ é€’ä¸€ä¸ªå¸¦æœ‰å‚æ•°çš„ ***æ•°æ®*** å¯¹è±¡æ¥æ›´æ–°æˆ‘ä»¬çš„ web åº”ç”¨ç¨‹åºçš„çŠ¶æ€ã€‚

## æ‰©å±• web åº”ç”¨ç¨‹åº

æœ€åï¼Œå½“ *change_animal_color* æ„å›¾æ›´æ–°*æ•°æ®*(çŠ¶æ€)æ—¶ï¼Œæˆ‘ä»¬å°†ä½¿æˆ‘ä»¬çš„ web åº”ç”¨ç¨‹åºæ˜¾ç¤ºåŠ¨ç‰©å¹¶æ”¹å˜å®ƒä»¬çš„é¢œè‰²ã€‚ä¸ºæ­¤ï¼Œæ‰“å¼€**å…¬å…±>index.html**æ–‡ä»¶ï¼Œç”¨ä»¥ä¸‹ä»£ç æ›´æ”¹å…¶å†…å®¹:

Free SVG icons are courtesy of FontAwesome licensed under CC BY 4.0 License â€” More info at [http://fontawesome.com/](http://fontawesome.com/)

ä½ æ³¨æ„åˆ°æˆ‘ä»¬å·²ç»åŒ…æ‹¬ä¸¤ä¸ªæ–°æ–‡ä»¶äº†å—ï¼Ÿ *main.css* å’Œ *main.js* è®©æˆ‘ä»¬åˆ›å»ºå®ƒä»¬:

**public > main.css**

Some basic styling to make everything look alright

**public > main.js**

Notice how we use the *getHeaderHeightPx()* method of the interactiveCanvas object

å¦‚æ‚¨æ‰€è§ï¼Œweb åº”ç”¨ç¨‹åºæ³¨å†ŒçŠ¶æ€æ›´æ–°çš„æ–¹å¼å®é™…ä¸Šéå¸¸ç®€å•ã€‚

> *æ¯æ¬¡ä»æˆ‘ä»¬çš„ Webhook å‘é€ HtmlResponse æ—¶ï¼Œéƒ½ä¼šç”¨æ–°çš„æ•°æ®(çŠ¶æ€)è°ƒç”¨ onUpdate å‡½æ•°ã€‚è¿™æ—¶ï¼Œæˆ‘ä»¬å°†é€‰æ‹©ç›¸åº”åŠ¨ç‰©çš„ SVG å…ƒç´ ï¼Œå¹¶å°†å…¶å¡«å……é¢œè‰²æ›´æ”¹ä¸ºå­˜å‚¨åœ¨æ›´æ–°çŠ¶æ€ä¸­çš„é¢œè‰²ã€‚*

ç°åœ¨æˆ‘ä»¬å®Œæˆäº†ï¼Œéƒ¨ç½²æ‚¨çš„å®ç°å’Œæ‰˜ç®¡:

```
firebase deploy
```

## æµ‹è¯•æ‚¨çš„è¡ŒåŠ¨

ç»§ç»­æ‰“å¼€æ¨¡æ‹Ÿå™¨ï¼Œè¯´*â€œè·Ÿæˆ‘çš„æµ‹è¯•åº”ç”¨è¯´è¯â€ã€‚*çœ‹åˆ°å±å¹•ä¸Šçš„å›¾æ ‡åï¼Œè¯·éšæ„å°è¯•æ”¹å˜åŠ¨ç‰©çš„é¢œè‰²:

![](img/c2b7cb811e0c1ebe85782b1977609365.png)

You can also use smart display devices or Android phones to test your Action.

å¾ˆå¥½ï¼Œæ‚¨å·²ç»ç”¨äº¤äº’å¼ç”»å¸ƒåˆ›å»ºäº†æ‚¨çš„ç¬¬ä¸€ä¸ªåŠ¨ä½œğŸ‘

# äº†è§£æ›´å¤šä¿¡æ¯

ğŸ’»æ‚¨å¯ä»¥åœ¨ [Github](https://github.com/YTolun/aog-interactive-canvas-intro) ä¸Šä¸‹è½½æœ¬æ•™ç¨‹çš„ç¤ºä¾‹ä»£ç ã€‚

å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºäº¤äº’å¼ç”»å¸ƒçš„çŸ¥è¯†ï¼Œä½ å¯ä»¥è®¿é—®å®˜æ–¹æ–‡æ¡£æˆ–è€…ä½ å¯ä»¥æŸ¥çœ‹è°·æ­ŒåŠ©æ‰‹ Codelab çš„[ç”¨äº¤äº’å¼ç”»å¸ƒæ„å»ºåŠ¨ä½œï¼Œè¿™æ˜¯ç”± Yoichiro Tanaka å†™çš„ï¼Œä»–ä¹Ÿæ˜¯è°·æ­ŒåŠ©æ‰‹ GDEã€‚](https://yoichiro.github.io/codelabs/actions-with-interactive-canvas/?index=codelabs/#0)

# ç»“æŸè¯­

æ˜¾ç„¶ï¼Œå¼€å‘ä¸€ä¸ªæ¸¸æˆä¸ä»…ä»…æ˜¯ç”¨å¬è§‰å’Œè§†è§‰ååº”æ¥å›åº”ç”¨æˆ·çš„è¾“å…¥ã€‚è¯­éŸ³æ¸¸æˆè¿˜æœ‰è®¸å¤šæ–¹é¢éœ€è¦æˆ‘ä»¬å»è§£å†³ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³çš„è¯ï¼Œæœ€ç»ˆæœ‰ä¸€ç§æ–¹æ³•å‘æˆ‘ä»¬çš„ç”¨æˆ·å±•ç¤ºä¸€äº›æ¼‚äº®çš„å›¾å½¢æ˜¯å¾ˆå¥½çš„ã€‚

äº¤äº’å¼ç”»å¸ƒæœ€å¥½çš„éƒ¨åˆ†æ˜¯å®ƒåˆ©ç”¨äº†æˆ‘ä»¬è®¸å¤šäººå·²ç»å–œæ¬¢å’Œä½¿ç”¨çš„ç½‘ç»œæŠ€æœ¯ã€‚**è¿™ä¹Ÿæ„å‘³ç€ä½ å¯ä»¥åœ¨æ˜¾ç¤ºå™¨ä¸Šå±•ç¤ºçš„ä¸œè¥¿åŸºæœ¬ä¸Šæ²¡æœ‰é™åˆ¶ã€‚**è¿™å°±æ˜¯ä¸ºä»€ä¹ˆè‡ªä»äº¤äº’å¼ç”»å¸ƒå‘å¸ƒä»¥æ¥ï¼Œæˆ‘ä¸€ç›´åœ¨å°è¯•ä½¿ç”¨ JS åº“ï¼Œå®ƒå…è®¸æˆ‘åœ¨ç½‘ç»œä¸Šåˆ›å»ºåŠ¨ç”»æˆ–è§†è§‰æ•ˆæœã€‚

> ä½ è®¤ä¸ºå“ªäº› JS åº“æˆ–å·¥å…·å¯ä»¥å¾ˆå¥½åœ°ä¸ Interactive Canvas æ­é…ï¼Ÿ

éå¸¸æ„Ÿè°¢ [Allen Firstenberg](https://medium.com/u/41a6565d9e5b?source=post_page-----11edd0698c5e--------------------------------) å’Œ[Mehmet karak se](https://medium.com/u/e9a682384333?source=post_page-----11edd0698c5e--------------------------------)å¯¹æœ¬æ–‡çš„åé¦ˆã€‚ä¸è¦å¿˜è®°ğŸ‘å¦‚æœä½ å–œæ¬¢çš„è¯ã€‚**å¦‚æœä½ å’Œæˆ‘ä¸€æ ·å¯¹è¯­éŸ³æ¸¸æˆçš„æœªæ¥æ„Ÿåˆ°å…´å¥‹ï¼Œä½ åº”è¯¥åœ¨ Medium å’Œ**[**Twitter**](https://twitter.com/YTolun)**ä¸Šå…³æ³¨æˆ‘ã€‚**