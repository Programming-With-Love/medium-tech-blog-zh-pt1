<html>
<head>
<title>Getting Started with Oracle Spatial and Graph — RDF Knowledge Graph (Part 2)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle Spatial和图形入门— RDF知识图(第2部分)</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/getting-started-with-oracle-spatial-and-graph-rdf-knowledge-graph-part-2-2def0bc08a5c?source=collection_archive---------2-----------------------#2018-10-02">https://medium.com/oracledevs/getting-started-with-oracle-spatial-and-graph-rdf-knowledge-graph-part-2-2def0bc08a5c?source=collection_archive---------2-----------------------#2018-10-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="60be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是“Oracle Spatial和图形入门— RDF知识图”系列的第二部分在这篇博文中，我们将使用SQL Developer将一些公开可用的资源描述框架(RDF)数据加载到我们的DBCS实例中，并使用SQL Developer中的SPARQL查询编辑器执行一些SPARQL查询。点击<a class="ae jc" rel="noopener" href="/oracledevs/getting-started-with-oracle-spatial-and-graph-rdf-knowledge-graph-part-1-fa400427c6bd">此处</a>阅读本系列的第一部分。</p><p id="f378" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将使用的数据来自链接地理数据项目:【http://linkedgeodata.org/About T2】</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/c1e0986ba6d757c0e401d1c71697f576.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zWbdwkn5E5xMo1h7y6pSNg.png"/></div></div></figure><p id="ca8c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该项目提供了几个可下载的数据集，索引如下:<a class="ae jc" href="https://hobbitdata.informatik.uni-leipzig.de/LinkedGeoData/downloads.linkedgeodata.org/releases/" rel="noopener ugc nofollow" target="_blank">https://hobbit data . informatik . uni-Leipzig . de/LinkedGeoData/downloads . LinkedGeoData . org/releases/</a></p><p id="37be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将使用一个120万的体育设施三元数据集:<a class="ae jc" href="https://hobbitdata.informatik.uni-leipzig.de/LinkedGeoData/downloads.linkedgeodata.org/releases/2015-11-02/2015-11-02-SportThing.node.sorted.nt.bz2" rel="noopener ugc nofollow" target="_blank">https://hobbit data . informatik . uni-Leipzig . de/LinkedGeoData/downloads . LinkedGeoData . org/releases/2015-11-02/2015-11-02-sport thing . node . sorted . nt . bz2</a></p><p id="a9d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将SportThing.node.sorted.nt.bz2下载到您的客户端计算机，并使用WinSCP之类的程序将该文件复制到您的DBCS实例。参考DBCS <a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/database-dbaas-cloud/csdbi/copy-files-node.html" rel="noopener ugc nofollow" target="_blank">用户指南</a>了解更多关于如何将文件复制到您的DBCS实例或从您的实例复制文件的信息。WinSCP的详细说明可以在这篇博文末尾的HOW-TO文档中找到。在本例中，我们将文件复制到了DBCS实例上的/home/oracle。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/1535c8c29035bc3d80c49db22bdf476c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ubWxiJLF3o_7y2w8wFMdFA.jpeg"/></div></div></figure><p id="9e15" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将使用一个拥有connect、resource和适当表空间权限的普通数据库用户来执行装载操作。回想一下，在上一期文章中，我们使用系统用户来创建和配置我们的语义网络。在SQL Developer中为所需的数据库用户打开一个连接。在这个例子中，我们使用了RDFUSER。展开RDFUSER连接，并展开RDF语义图组件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/ae114244720cff5e5bfd307b10439f66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dT4_w6wuUdj1KlE4hU1Ugg.png"/></div></div></figure><p id="29a5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第一步是创建一个语义模型来保存我们的RDF数据集。右键单击模型并选择新建模型。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/992ec0eb7389bf34c6dfd2798166f407.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hNXA1W0kwTckspPqWyqboQ.png"/></div></div></figure><p id="0ba1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">输入一个模型名称，并选择创建一个具有三列的新应用程序表。选择为模型表空间创建语义网络时使用的表空间。单击应用。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jr"><img src="../Images/0945fb50b1f3c2b0383d78ff300d8364.png" data-original-src="https://miro.medium.com/v2/resize:fit:708/format:webp/1*NRuwXW1Vz2OxZqRPJePiuQ.png"/></div></figure><p id="6d19" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们现在已经创建了一个模型来保存我们的RDF数据。如果在RDF语义图下展开模型和常规模型，应该会看到我们创建的LGD _体育模型。</p><p id="07b1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们将批量加载下载的RDF文件。大容量装载流程包括两个主要步骤:</p><ol class=""><li id="9492" class="js jt hh ig b ih ii il im ip ju it jv ix jw jb jx jy jz ka bi translated">将文件从文件系统加载到数据库中的简单暂存表中。</li><li id="91fa" class="js jt hh ig b ih kb il kc ip kd it ke ix kf jb jx jy jz ka bi translated">将数据从临时表加载到我们的语义模型中。</li></ol><p id="02bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第一步涉及从外部表进行装载，因此我们需要使用系统连接在数据库中创建一个目录，并授予RDFUSER对该目录的权限。</p><p id="470f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">展开系统连接，右键单击目录。然后选择创建目录。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/d2357984315e60cc0caa8d86192bf4fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qr09iZM4zIbPGYv9BXWBFg.png"/></div></div></figure><p id="94c0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">输入目录名和数据库服务器上目录的完整路径。单击应用。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kg"><img src="../Images/8fcab86fff3bffc720e516a807d0f641.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/format:webp/1*Kz2EXWzeopyJYI-mRzZ_sA.png"/></div></figure><p id="8db5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">展开目录并单击目录名以查看详细信息。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/47070b382654a97d5b1dfc267fc3c5a0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XW7W3dNqb09Huap_KKHALQ.png"/></div></div></figure><p id="b026" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们需要将这个目录的权限授予RDFUSER。单击操作并选择授权。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/91663c4de2c1d5ffbca0933d4442f0f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BbQxfA2ugdq3GP4y3d7ECQ.png"/></div></div></figure><p id="96b7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">授予RDFUSER读写权限。单击应用。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kh"><img src="../Images/a5c72a5e37ca5d63bb0bce1eb6dd1c4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*WqEAqwM7goVaNyZ-QKDWNQ.png"/></div></figure><p id="617e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">RDFUSER现在可以访问我们的DBCS实例上的/home/oracle目录。</p><p id="b7f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在装载到staging表之前，我们需要从Unix命令行执行一些操作。下载的RDF文件是压缩的，所以我们将使用Unix命名管道来传输未压缩的数据，而不是存储文件的未压缩版本。</p><p id="029c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以oracle用户的身份使用PuTTY建立到远程DBCS实例的SSH连接(有关如何建立SSH连接的更多信息，请参见DBCS <a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/database-dbaas-cloud/csdbi/connect-ssh.html#GUID-C5DAB5B8-1FFA-4122-9181-189561F6E0F1" rel="noopener ugc nofollow" target="_blank">用户指南</a>)。然后执行以下命令创建一个命名管道来传输未压缩的数据。</p><pre class="je jf jg jh fd ki kj kk kl aw km bi"><span id="f1fc" class="kn ko hh kj b fi kp kq l kr ks">mkfifo named_pipe.nt<br/>bzcat 2015–11–02-SportThing.node.sorted.nt.bz2 &gt; named_pipe.nt &amp;</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kt"><img src="../Images/8cfafb2dd6e23b20a078dae9a541b8ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*GS1Ez10kpnCtrS9LtQzN4A.png"/></div></figure><p id="6bc7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，在SQL Developer中展开RDFUSER连接，并展开RDF语义图组件。然后右键单击Models并选择“Load RDF data into staging Table(External Table)”</p><p id="9f4e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为要创建的外部表选择一个名称(我们使用LGD _外部_选项卡),并填写“源外部表”选项卡上的其他字段。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ku"><img src="../Images/efcd3f9a0f4609d40bce15ba576fa6cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*aXgo_3s0Mr9u7kWSvMsGnw.png"/></div></figure><p id="9766" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在“输入文件”选项卡上输入要加载的文件的名称(在本例中为named_pipe.nt)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ku"><img src="../Images/d50ab718c4d3d987e5201a1d508619f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*Qx1JILi6V5tW8twAikXZ4Q.png"/></div></figure><p id="3c9f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，使用Staging Table选项卡输入将要创建的临时表的名称(我们使用LGD_STG_TAB ),并选择适当的格式。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ku"><img src="../Images/0e159293b2306ce90857d0eee32e69a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:884/format:webp/1*-pQX_Sva0_aAp8Cjfhk0RA.png"/></div></figure><p id="7027" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，单击“应用”将数据加载到LGD_STG_TAB中。检查LGD_STG_TAB的内容。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/48ca6634742a954d03e9da7e970e6194.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*odYnqskLJro6ZhLa-6i14w.png"/></div></div></figure><p id="ce80" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">接下来，我们将把数据从LGD_STG_TAB加载到LGD_SPORT语义模型中。要打开批量装载接口，请在RDFUSER连接下展开RDF Semantic Graph。然后，右键单击模型并选择“从临时表中批量加载到模型中”。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/bfe28ffafd1ed3df2a3a98c5be0b5d0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tk0Ht5R5tHZK0nXzSJbVNQ.png"/></div></div></figure><p id="0d87" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">输入LGD _体育模型，取消选择创建模型选项，因为我们已经创建了这个语义模型。此外，选择LGD_STG_TAB作为临时表名。注意不要选择外部表(LGD _外部_标签)，因为它也将被列出。有关批量加载的其他选项的更多信息，请查阅<a class="ae jc" href="https://docs.oracle.com/en/database/oracle/oracle-database/18/rdfrm/SEM_APIS-reference.html#GUID-AB6697BF-C840-4F48-8C81-FACB3CA54B1A" rel="noopener ugc nofollow" target="_blank">用户指南</a>。单击Apply，加载将在一分钟左右完成。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kh"><img src="../Images/8661b7bf1cf804e6b7252a9769a72e22.png" data-original-src="https://miro.medium.com/v2/resize:fit:830/format:webp/1*9JXR0P56xzNTV3Zc2oysKw.png"/></div></figure><p id="b05a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们已经完成了批量加载，收集整个RDF网络的统计信息是一个好主意。只有特权用户才能收集整个RDF网络的统计数据，因此我们需要使用SYSTEM用户或其他DBA用户。展开系统连接下的RDF语义图组件，右键单击RDF语义图并选择Gather Statistics。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/8955a1cb64c6b9087b351a0ae90e29a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b6gou0EEkmacqqcXHlQ8hw.png"/></div></div></figure><p id="c9fb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">输入所需的并行度，然后单击应用。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kv"><img src="../Images/b6505dfe251ec280a814ba3f38b0d0f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*QjfbmfEBqTUAEtvARxKlew.png"/></div></figure><p id="61b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">收集统计数据后，就可以查询数据了。</p><p id="e7ff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们将使用SQL Developer的SPARQL查询编辑器来查询我们的数据集。回到RDFUSER连接，在RDF语义图下展开Models和Regular Models。单击LGD _体育将打开这个语义模型的SPARQL查询编辑器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/4957cf5251591062726808f8625410c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ln8Lq6uDiCse1r7SJk8uQg.png"/></div></div></figure><p id="efa8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以在这里编辑和执行SPARQL查询。此外，还提供了几个预先创建的模板。</p><p id="cae3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击“模板”-&gt;“人口统计”-&gt;“全部计算”来计算LGD _体育模型中的所有三元组。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/4026c22ea59e27bdeb6b3442374340fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9TcR9zhIgMZ8CLfhGWulag.png"/></div></div></figure><p id="4a4e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">出现警告时，单击是。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kw"><img src="../Images/1d347f7aa69962de72e3ba305ae18224.png" data-original-src="https://miro.medium.com/v2/resize:fit:784/format:webp/1*AiVxOCTYhnzwXcoUptRsBw.png"/></div></figure><p id="9a96" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击绿色三角形运行查询。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/d70298942eccad82d0b2556f553958f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NbRWUsxfVjtbmE4hLV7J7Q.png"/></div></div></figure><p id="8ce6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您还可以直接编辑SPARQL查询。以下示例显示了一个SPARQL查询，用于获取前10个属性及其三元组计数。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/b437e9b78c2cf32b4bb1e5d322d65a2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JdQY6Pw2s23t1-zmRfjl_A.png"/></div></div></figure><p id="b06a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除了SPARQL SELECT查询，还支持构造和描述查询。下面的查询描述了LGD体育模型中的一个特定资源。请注意，查询中使用的任何名称空间前缀也将用于简化查询结果中的值。这里我们又增加了几个前缀。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/8126aa32c55c20a0367b62b4d2d17070.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bf8NXlaOItUrWyJJlNR-yw.png"/></div></div></figure><p id="a2f2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">就是这样。我们已经成功地将一个公开可用的RDF数据集批量加载到我们的DBCS实例中，并使用SQL Developer的SPARQL查询编辑器执行了一些查询。在下一期中，我们将设置一个W3C标准的SPARQL端点来提供REST接口。</p><p id="4c1f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击<a class="ae jc" href="https://github.com/mperry455/rdf-graph-oracle-public-cloud-18c/blob/main/RDF_18_1_DBCS_how_to.pdf" rel="noopener ugc nofollow" target="_blank">这里</a>获得详细的操作方法。</p></div></div>    
</body>
</html>