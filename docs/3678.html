<html>
<head>
<title>Dependency Injection with KOIN</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用KOIN的依赖注入</h1>
<blockquote>原文：<a href="https://medium.com/globant/dependency-injection-with-koin-81f92e015ac6?source=collection_archive---------0-----------------------#2021-05-18">https://medium.com/globant/dependency-injection-with-koin-81f92e015ac6?source=collection_archive---------0-----------------------#2021-05-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/ddf1425e2d9cc2b6c6d7e76d39578978.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1eAPvxtqBtNIS6zdiGqt4A.jpeg"/></div></div></figure><p id="4b29" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">什么是依赖注入(DI)？</strong></p><p id="e3df" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">假设，我们必须为MakeTea编写一个类。为此，我们将必须需要3类:牛奶，茶粉，糖</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jn"><img src="../Images/b7f66f0f91aa93770b6ba6beffa0274f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zjZeKOy-pG94UlHy"/></div></div></figure><p id="07f8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了在Tea类中准备茶，我们需要创建一个Milk类的实例来访问getMilk()方法。因此，奶茶依赖于牛奶。</p><p id="559e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">将依赖关系传递给对象有两个主要选项:</p><ul class=""><li id="6c47" class="js jt hh ir b is it iw ix ja ju je jv ji jw jm jx jy jz ka bi translated">通过构造函数的对象。</li><li id="d5e5" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated">使用阿迪框架</li></ul><p id="1054" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">为什么是迪？</strong></p><p id="cbb8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们知道软件开发的坚实原则。</p><p id="4579" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">DI具有单一责任原则和从属倒置</p><p id="65e2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">单一责任原则</strong> = <em class="kg">一个班应该做且只能做一项工作。</em></p><p id="39bb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">依赖倒置原则</strong> = <em class="kg">实体必须依赖抽象而不是具体化。您可以使用抽象，而不是使用从高级到低级模块的引用。</em></p><p id="af7a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">什么是KOIN？</strong></p><ul class=""><li id="68f8" class="js jt hh ir b is it iw ix ja ju je jv ji jw jm jx jy jz ka bi translated"><em class="kg">轻量级依赖注入</em></li><li id="b82a" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><em class="kg">用纯科特林语写的</em></li><li id="fecb" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><em class="kg">无代理</em></li><li id="cd01" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><em class="kg">没有代码生成</em></li><li id="f4f9" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><em class="kg">没有反映！</em></li><li id="30e8" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><em class="kg">没大力气学</em></li></ul><p id="f7ee" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Koin比其他DI框架更加简洁和直接。它非常适合封装的特性/库模块。</p><p id="8a7c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">为什么是锦鲤而不是匕首？</strong></p><p id="210d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 1。DI的配置:</strong></p><p id="1f61" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Dagger配置需要写更多的文件。《出埃及记》我正在使用MVVM建筑改造和现场数据。项目有活动、片段、视图模型、存储库和web服务接口。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kh"><img src="../Images/9c3477f1f5b4a74b7eebc54e5df45947.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*3KAvKryqj4FwkkKN"/></div></div></figure><p id="b1ca" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 2。代码行:</strong></p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ki"><img src="../Images/eed368003fb19f859ea212babea8994e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uWNHD55PGOLnYNMS"/></div></div></figure><p id="14de" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 3。构建时间:</strong></p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kj"><img src="../Images/323907651557cec2aab6851ab2d7958e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zau2VrIl446O8kFwGYf25w.png"/></div></div></figure><p id="767b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">项目越大，时间变得越贵！</p><p id="4b35" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 4。设置</strong></p><p id="9e63" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">《出埃及记》在模块梯度中，</p><p id="ca71" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">匕首:需要添加3个依赖项</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kk"><img src="../Images/363cc4baaf21422b0ccbf5aa28f65267.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AdJGYexhotJVQZafqyd78A.png"/></div></div></figure><p id="4f75" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">KOIN:一行就够了</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kl"><img src="../Images/fe9ee584a19498b94716263b6f382cfb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYvENUmwsCFd1Ol94cOz_w.png"/></div></div></figure><p id="740d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 5。简单易学:</strong></p><p id="90f8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于项目中的新细木工来说容易理解。不需要像匕首一样花很多时间在学习上。</p><p id="f9d9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">关键词/功能:</strong></p><ul class=""><li id="e910" class="js jt hh ir b is it iw ix ja ju je jv ji jw jm jx jy jz ka bi translated"><strong class="ir hi"> startKoin </strong>:用于创建和注册一个KoinApplication实例。也开始在应用程序上执行Koin。</li><li id="b338" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><strong class="ir hi">模块</strong>:用于声明startKoin内部的模块。也可以将所有的Koin模块作为参数传递。</li><li id="21d0" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><strong class="ir hi"> androidContext </strong>:用于注入Android上下文。通过将应用程序上下文作为参数传递，可以在startKoin中声明它。</li><li id="ffad" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><strong class="ir hi"> by inject() </strong>:这允许我们检索实例</li><li id="6e21" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><strong class="ir hi"> get() </strong>:这个函数允许我们检索一个实例(非懒惰)。通常，在构造函数中使用它来提供必要的组件实例。</li><li id="b00f" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><strong class="ir hi"> koinComponent </strong>:用相同的标签标记类，以访问koin函数</li><li id="0a0c" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><strong class="ir hi"> name = </strong>:这是用来命名定义的。当您希望同一类有多个不同类型的实例时，请使用。</li></ul><p id="2978" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">瞄准镜</strong></p><ul class=""><li id="593a" class="js jt hh ir b is it iw ix ja ju je jv ji jw jm jx jy jz ka bi translated"><strong class="ir hi"> single </strong>:总是为请求者提供依赖对象的相同副本</li><li id="9b6d" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated">工厂:总是为请求者提供一个新的依赖对象副本</li><li id="a33e" class="js jt hh ir b is kb iw kc ja kd je ke ji kf jm jx jy jz ka bi translated"><strong class="ir hi">作用域</strong>:创建对象的内联函数，这些对象持续到相关的作用域生存期。</li></ul><h1 id="e0f1" class="km kn hh bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">Kotlin项目中Koin的步骤:</h1><p id="707a" class="pw-post-body-paragraph ip iq hh ir b is lk iu iv iw ll iy iz ja lm jc jd je ln jg jh ji lo jk jl jm ha bi translated"><strong class="ir hi">第一步:</strong> <strong class="ir hi">声明一个模块</strong></p><p id="a516" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">首先，定义注入实体。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lp"><img src="../Images/043c3195b1d20629622bf9d945bac5f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JJT8dLPL0J3kV6unNkAv-g.png"/></div></div></figure><p id="2eb2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">第二步:</strong> <strong class="ir hi">启动Koin </strong></p><p id="5819" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要启动DI流程</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lq"><img src="../Images/af2af9ae96c6b65562355b19a51f17bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ABrRgs_5Nlp2ASE8xvhg4A.png"/></div></div></figure><p id="31ee" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">第三步:</strong> <strong class="ir hi">注射</strong></p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lr"><img src="../Images/668a31622cfebce752ac5f1097cc3b62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6OgfH3s2uWguLR1-dzBnCQ.png"/></div></div></figure><h1 id="b1a9" class="km kn hh bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated"><strong class="ak">我们开始吧！</strong></h1><p id="3a41" class="pw-post-body-paragraph ip iq hh ir b is lk iu iv iw ll iy iz ja lm jc jd je ln jg jh ji lo jk jl jm ha bi translated">让我们看看如何在这个例子中引入一个锦鲤。</p><p id="bc81" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 1。在Build.gradle中添加依赖关系</strong></p><p id="0516" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="kg"> //koin </em></p><p id="e524" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">实现" org . koin:koin-Android-viewmodel:{最新版本} "</p><p id="8ab6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">实现" org . koin:koin-Android:{最新版本} "</p><p id="618a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 2。创建应用程序类</strong></p><p id="6721" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">类应用程序:应用程序()</p><p id="02f9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">更新清单</p><p id="a422" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">android:name= "。应用程序"</p><p id="438b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 3。添加改型和Kotlin协同程序的依赖关系</strong></p><p id="6c98" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="kg"> //联网</em></p><p id="99fb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">实现" com.squareup.retrofit2:翻新:{最新版本} "</p><p id="3f19" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">实现" com . square up . retro fit 2:converter-Moshi:{最新版本} "</p><p id="614b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">实现" com . square up . ok http 3:ok http:{最新版本} "</p><p id="538f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">实现" com.squareup.okhttp3:日志拦截器:{最新版本} "</p><p id="a3c6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="kg"> //协程</em></p><p id="d69d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">实现" org . jetbrains . kot linx:kot linx-coroutines-Android:{最新版本} "</p><p id="bc3e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">实现" org . jetbrains . kot linx:kot linx-coroutines-core:{最新版本} "</p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="f80c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 4。现在，我们将在数据层中创建api、模型、存储库包。它会有类似于</strong>的文件</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div class="er es lu"><img src="../Images/65abd6f96e3739f4994c19937fa4ef2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/0*yRgt-_qq3mQ8ODb2"/></div></figure><p id="cae3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用<strong class="ir hi"> getUsers </strong>函数<strong class="ir hi">为ApiService、ApiHelper和ApiHelperImpl编写一个接口。</strong></p><p id="8184" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此外，对于<strong class="ir hi"> BASE_URL </strong>，您可以使用任何模拟API并添加到您的构建配置中</p><p id="a124" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">buildConfigField 'String '，' BASE_URL '，" \ " https://5e 510330 F2 c0d 300147 c 034 c . mock API . io/\ "</p><p id="3db6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，在主存储库中，我们将使用APIhelper方法更新代码</p><p id="3459" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 5。设置DI </strong></p><p id="d077" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">创建一个包"<strong class="ir hi"> di - &gt;模块"。</strong>在其中创建AppModule、ViewModelModule和RepositoryModule。</p><p id="7df0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">首先在AppModule中，我们将创建希望作为依赖项提供的函数。</p><p id="9329" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该模块是我们将向应用程序提供的依赖关系的集合。</p><p id="3e76" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在模块内部，我们可以传递我们创建的所有函数的单个实例。</p><p id="5bed" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 6。用MainRepository()的单个实例更新存储库模块</strong></p><p id="78f6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">若要在模块中提供ApiHelperImpl.kt，请创建一个实例。</p><p id="06de" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 7。使用ViewModel更新UI</strong></p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="0f43" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 8。用fetchUsers()更新ViewModel，fetch users()从主存储库实例调用getUsers()。</strong></p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="2ff4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">NetworkHelper看起来像，</p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="5cfc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">创建一个变量“mainViewModel”来传递ViewModel的实例。《出埃及记》</p><p id="c5b5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">私有</strong>val main viewModel:main viewModel by<strong class="ir hi">viewModel</strong>()</p><p id="182b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，主要的活动看起来像，</p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="4381" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">主适配器看起来像，</p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="93d8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 8。为了运行该应用程序，我们将添加所需的权限，如，</strong></p><p id="e162" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><uses-permission android:name="”android.permission.ACCESS_NETWORK_STATE”"/></p><p id="0b87" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><uses-permission android:name="”android.permission.INTERNET”"/></p><p id="6398" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了在项目中初始化Koin，我们将更新应用程序的onCreate()，</p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="c85f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们完成了这个项目。如果您运行该项目，您将在recyclerView中看到该列表。</p><h1 id="a71c" class="km kn hh bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">如何配合ViewModel使用KOIN？</h1><p id="34cb" class="pw-post-body-paragraph ip iq hh ir b is lk iu iv iw ll iy iz ja lm jc jd je ln jg jh ji lo jk jl jm ha bi translated">可以在<em class="kg">活动</em>、<em class="kg">片段</em>和<em class="kg">服务</em>中使用。</p><p id="246f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">声明:</strong></p><p id="4130" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用<code class="du lv lw lx ly b">get()</code>函数在appModule中注入依赖项。</p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="ls lt l"/></div></figure><h2 id="7990" class="lz kn hh bd ko ma mb mc ks md me mf kw ja mg mh la je mi mj le ji mk ml li mm bi translated">2种注射方式:</h2><ol class=""><li id="752f" class="js jt hh ir b is lk iw ll ja mn je mo ji mp jm mq jy jz ka bi translated"><code class="du lv lw lx ly b">by viewModel()</code> -惰性委托属性，将视图模型注入到属性中</li></ol><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mr"><img src="../Images/a4e14de4b2289ee1de6d4e276de12187.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*T-RfLvcoNg1acK0VN0Yk6w.png"/></div></div></figure><p id="e659" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">2.<code class="du lv lw lx ly b">getViewModel()</code> -获取ViewModel实例</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ms"><img src="../Images/04a2e0620971b9e489dc25b2af25052d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yDj9PrAhyhaWmLrWtNPl5Q.png"/></div></div></figure><p id="496b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">你可以从<a class="ae mt" href="https://insert-koin.io/docs/reference/koin-android/viewmodel/" rel="noopener ugc nofollow" target="_blank">这里</a>更多的参考ViewModel</p><h1 id="7f01" class="km kn hh bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">在模块中不要忘记我！:)</h1><p id="3ae3" class="pw-post-body-paragraph ip iq hh ir b is lk iu iv iw ll iy iz ja lm jc jd je ln jg jh ji lo jk jl jm ha bi translated">Kotlin有一个非常好的特性，可以在编译时解析类型。但是，在这种情况下，如果它找不到依赖项，就会触发运行时崩溃。</p><h1 id="a09c" class="km kn hh bd ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">用KOIN测试</h1><p id="19ff" class="pw-post-body-paragraph ip iq hh ir b is lk iu iv iw ll iy iz ja lm jc jd je ln jg jh ji lo jk jl jm ha bi translated"><strong class="ir hi">设置:</strong>添加依赖关系</p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="ef83" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">声明一下:</strong></p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="ls lt l"/></div></figure><p id="6419" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">使用它:</strong></p><p id="c4da" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这是一个简单的JUnit测试文件，并用KoinTest对其进行了扩展。然后，我们将能够使用by inject()操作符。</p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="ls lt l"/></div></figure></div></div>    
</body>
</html>