<html>
<head>
<title>Android MVP Series : Implementasi Unit Test pada Android MVP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android MVP Series : Implementasi Unit Test pada Android MVP</h1>
<blockquote>原文：<a href="https://medium.easyread.co/android-mvp-series-implementasi-unit-test-pada-android-mvp-f1971c44cf1c?source=collection_archive---------1-----------------------#2018-02-22">https://medium.easyread.co/android-mvp-series-implementasi-unit-test-pada-android-mvp-f1971c44cf1c?source=collection_archive---------1-----------------------#2018-02-22</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="9061" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">Bagaimana cara mengimplementasikan Local Unit Test di Android</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/bdb0de2b69ee8ef84ff1f55521715bcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1gUUcHSnrpz1JgJsK3vUUQ.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Unit Testing image from Google Images</figcaption></figure><p id="f4ff" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Setelah berhasil membuat Aplikasi Android dengan arsitektur MVP, saya akan melanjutkan dengan membahas implementasi <strong class="ku io"> <em class="lo"> Unit Testing </em> </strong> pada Android. Secara umum, <strong class="ku io"> unit testing </strong> <em class="lo"> </em> adalah praktek pengujian fungsi dan unit-unit dari kode yang sudah kita tulis untuk menyatakan apakah kode tersebut sudah sesuai dengan spesifikasi yang kita inginkan.</p><p id="c7de" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Implementasi unit test yang akan dibahas kali ini menggunakan <strong class="ku io"> <em class="lo"> jUnit </em> </strong> dan <strong class="ku io"> <em class="lo"> Mockito Framework </em> </strong> <em class="lo"> . </em> Oleh karena itu pastikan untuk menambahkan <em class="lo"> library </em> tersebut pada file <em class="lo"> build.gradle </em> proyek Android anda.</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lp lq l"/></div></figure><p id="77d9" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Sebelumnya saya akan menjelaskan apa itu <strong class="ku io"> jUniT <em class="lo"> </em> </strong> dan <strong class="ku io"> Mockito Framework </strong> yang dipakai dalam melakukan unit test pada postingan ini.</p><h1 id="9bb1" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">jUnit</h1><blockquote class="mj mk ml"><p id="3b7f" class="ks kt lo ku b kv kw jo kx ky kz jr la mm lc ld le mn lg lh li mo lk ll lm ln ig bi translated"><strong class="ku io"> JUnit </strong> is a <a class="ae mp" href="https://en.wikipedia.org/wiki/Unit_testing" rel="noopener ugc nofollow" target="_blank"> unit testing </a> <a class="ae mp" href="https://en.wikipedia.org/wiki/Software_framework" rel="noopener ugc nofollow" target="_blank"> framework </a> for the <a class="ae mp" href="https://en.wikipedia.org/wiki/Java_(programming_language)" rel="noopener ugc nofollow" target="_blank"> Java programming language </a> . JUnit has been important in the development of <a class="ae mp" href="https://en.wikipedia.org/wiki/Test-driven_development" rel="noopener ugc nofollow" target="_blank"> test-driven development </a> , and is one of a family of <a class="ae mp" href="https://en.wikipedia.org/wiki/Unit_testing" rel="noopener ugc nofollow" target="_blank"> unit testing </a> frameworks which is collectively known as <a class="ae mp" href="https://en.wikipedia.org/wiki/XUnit" rel="noopener ugc nofollow" target="_blank"> xUnit </a> that originated with <a class="ae mp" href="https://en.wikipedia.org/wiki/SUnit" rel="noopener ugc nofollow" target="_blank"> SUnit </a> . — <a class="ae mp" href="https://en.wikipedia.org/wiki/JUnit" rel="noopener ugc nofollow" target="_blank"> Wikipedia </a></p></blockquote><p id="b6a5" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Berdasarkan pengertian diatas, maka jUnit adalah <em class="lo"> framework </em> untuk unit testing pada bahasa pemograman Java. Sangat penting pada pengembangan TDD dan masih serupa dengan <em class="lo"> framework </em> unit testing lainnya seperti <em class="lo"> xUnit </em> dan <em class="lo"> sUnit. </em> Menggunakan <strong class="ku io"> <em class="lo"> annotation </em> </strong> untuk menspesifikasikan sebuah test <em class="lo"> . </em> Contoh.</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="bb85" class="mv ls in mr b gy mw mx l my mz"><strong class="mr io">public</strong> <strong class="mr io">class</strong> <strong class="mr io">FoobarTest</strong> {<br/>    @BeforeClass<br/>    <strong class="mr io">public</strong> <strong class="mr io">static</strong> void setUpClass() <strong class="mr io">throws</strong> Exception {<br/>        <em class="lo">// Code executed before the first test method</em><br/>    }<br/><br/>    @Before<br/>    <strong class="mr io">public</strong> void setUp() <strong class="mr io">throws</strong> Exception {<br/>        <em class="lo">// Code executed before each test</em><br/>    }<br/> <br/>    @Test<br/>    <strong class="mr io">public</strong> void testOneThing() {<br/>        <em class="lo">// Code that tests one thing</em><br/>    }<br/><br/>    @Test<br/>    <strong class="mr io">public</strong> void testAnotherThing() {<br/>        <em class="lo">// Code that tests another thing</em><br/>    }<br/>}</span></pre><h1 id="2f2d" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated"><strong class="ak"> Mockito </strong></h1><blockquote class="mj mk ml"><p id="0883" class="ks kt lo ku b kv kw jo kx ky kz jr la mm lc ld le mn lg lh li mo lk ll lm ln ig bi translated"><strong class="ku io"> Mockito </strong> is a mocking framework that tastes really good. It lets you write beautiful tests with a clean &amp; simple API. Mockito doesn’t give you hangover because the tests are very readable and they produce clean verification errors. — <a class="ae mp" href="http://site.mockito.org" rel="noopener ugc nofollow" target="_blank"> Mockito Docs </a></p></blockquote><p id="7578" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lo"> Nah </em> , sedangkan Mockito adalah <em class="lo"> framework </em> yang digunakan untuk proses <em class="lo"> mocking </em> atau pembuatan objek serupa yang membuat kita dapat membuat test yang <em class="lo"> simple </em> dan <em class="lo"> clean </em> . Contoh.</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="638e" class="mv ls in mr b gy mw mx l my mz">import static org.mockito.Mockito.*;<br/><br/><em class="lo">// mock creation</em><br/><strong class="mr io">List mockedList = mock(List.class);<br/></strong><br/><em class="lo">// using mock object - it does not throw any "unexpected interaction" exception</em><br/><strong class="mr io">mockedList.add("one");</strong><br/>mockedList.clear();<br/><br/><em class="lo">// selective, explicit, highly readable verification</em><br/><strong class="mr io">verify(mockedList).add("one");</strong><br/>verify(mockedList).clear();</span></pre><h1 id="59cb" class="lr ls in bd lt lu lv lw lx ly lz ma mb jt mc ju md jw me jx mf jz mg ka mh mi bi translated">Bagaimana Implementasinya ?</h1><p id="21f9" class="pw-post-body-paragraph ks kt in ku b kv na jo kx ky nb jr la lb nc ld le lf nd lh li lj ne ll lm ln ig bi translated">Setelah kita berhasil menambahkan kedua <em class="lo"> library </em> diatas, lalu kita akan menambahkan <em class="lo"> unit testing </em> pada aplikasi Android yang kita buat. Sebelumnya, saat kita menambahkan <em class="lo"> script </em> di <em class="lo"> build.gradle </em> untuk menambahkan <em class="lo"> library </em> jUnit dan Mockito tadi, kita memakai <code class="fe nf ng nh mr b"><strong class="ku io">testCompile</strong></code> , dimana artinya bahwa setiap file unit test yang kita buat harus diletakkan di <em class="lo"> package test </em> bukan <em class="lo"> package main </em> seperti biasanya. Sekarang kita akan melakukan unit test pada presenter kita sebelumnya, yaitu <strong class="ku io"> FilmFeedPresenter </strong> .</p><p id="a451" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Pertama kali, kita membuat sebuah <em class="lo"> class </em> baru di <em class="lo"> package test, </em> yaitu <em class="lo"> </em> <strong class="ku io"> FilmFeedPresenterTest.java </strong> . Pada <em class="lo"> class </em> inilah kita akan menambahkan <em class="lo"> method </em> unit test untuk melakukan test pada presenter yang tadi. Setelah membuat <em class="lo"> class </em> tersebut, maka yang perlu kita lakukan selanjutnya adalah membuat sebuah <em class="lo"> method </em> dengan <em class="lo"> annotation </em> <code class="fe nf ng nh mr b"><strong class="ku io">@Before</strong></code> <strong class="ku io"> </strong> pada <em class="lo"> class </em> tersebut. Disini saya menamakan <em class="lo"> method </em> tersebut dengan nama <code class="fe nf ng nh mr b"><strong class="ku io">setup()</strong></code> <strong class="ku io"> </strong> . <em class="lo"> Annotation </em> <code class="fe nf ng nh mr b"><strong class="ku io">@Before</strong></code> <strong class="ku io"> </strong> disini akan <strong class="ku io"> </strong> memberitahu kepada jUnit untuk selalu menjalankan <em class="lo"> method </em> <code class="fe nf ng nh mr b"><strong class="ku io">setup()</strong></code> <strong class="ku io"> </strong> tersebut setiap kali test dijalankan. Oleh karena itu, saya menamakan <em class="lo"> method </em> ini dengan <code class="fe nf ng nh mr b"><strong class="ku io">setup()</strong></code> karena di <em class="lo"> method </em> inilah kita melakukan step-step yang diperlukan untuk menyediakan kebutuhan <em class="lo"> class </em> presenter untuk menjalankan test.</p><p id="9ae2" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Seperti pada <em class="lo"> class </em> <strong class="ku io"> FilmFeedPresenter </strong> yang kita buat, kita membutuhkan <strong class="ku io"> repository </strong> dan <strong class="ku io"> view </strong> pada <em class="lo"> class </em> tersebut, sehingga setiap test dijalankan maka kedua class ini harus selalu ada.</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lp lq l"/></div></figure><p id="1313" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Pada contoh di atas, kita memakai <em class="lo"> annotation </em> <code class="fe nf ng nh mr b"><strong class="ku io">@Mock</strong></code> <strong class="ku io"> </strong> saat membuat objek view dan repository tadi. <em class="lo"> Nah </em> , disinilah kegunaan dan penjelasan mengenai konsep <em class="lo"> library </em> Mockito, yaitu proses pembuatan sebuah objek yang menyerupai objek aslinya tanpa perlu berhubungan secara langsung dengan objek aslinya. Misalnya repository disini akan berhubungan dengan sumber data, tetapi meskipun kita memakai repository saat melakukan test, kita tidak akan mengubah nilai dari data yang asli, karena repository yang kita pakai hanya objek yang menyerupai repository aslina. Selain itu, dengan Mockito kita juga bisa tidak mempedulikan objek apa sebenarnya yang digunakan oleh <em class="lo"> class </em> seperti repository dan view yang tadi <em class="lo"> . </em> Pemakaiannya cukup mudah, hanya dengan menambahkan <code class="fe nf ng nh mr b"><strong class="ku io">MockitoAnnotations.initMocks(this)</strong></code> pada method <code class="fe nf ng nh mr b"><strong class="ku io">setup()</strong></code> . Yang artinya semua variabel yang memiliki <em class="lo"> annotation </em> <code class="fe nf ng nh mr b"><strong class="ku io">@Mock</strong></code> <strong class="ku io"> </strong> akan diinstansiasi saat menjalankan test.</p><p id="d450" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lo"> Nah </em> , selanjutnya kita masuk ke <em class="lo"> method </em> apa yang akan kita test dari presenter tadi. Pada <strong class="ku io"> FilmFeedPresenter </strong> kita memiliki sebuah <em class="lo"> method </em> <code class="fe nf ng nh mr b"><strong class="ku io">loadData()</strong></code> <strong class="ku io"> </strong> , maka kita dapat membuat testnya seperti berikut.</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lp lq l"/></div></figure><h2 id="b826" class="mv ls in bd lt ni nj dn lx nk nl dp mb lb nm nn md lf no np mf lj nq nr mh ns bi translated">Sedikit membingungkan? Oke, mari saya jelaskan.</h2><p id="d1c3" class="pw-post-body-paragraph ks kt in ku b kv na jo kx ky nb jr la lb nc ld le lf nd lh li lj ne ll lm ln ig bi translated">Method yang akan ditest ialah <code class="fe nf ng nh mr b"><strong class="ku io">loadData()</strong></code> <strong class="ku io"> </strong> , maka kita akan membuat sebuah <em class="lo"> method </em> di file test, misalnya kita beri nama <code class="fe nf ng nh mr b"><strong class="ku io">loadDataToViewTest()</strong></code> <strong class="ku io"> </strong> . Pada <em class="lo"> method </em> inilah kita akan menambahkan unit test <em class="lo"> </em> kita.</p><p id="0707" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Pertama yang perlu dilakukan adalah, mari kita lihat <em class="lo"> method </em> pada presenter kita, step apa <em class="lo"> sih </em> yang akan kita lakukan saat <em class="lo"> method </em> tersebut dipanggil. <em class="lo"> Nah </em> , ternyata pada method <code class="fe nf ng nh mr b"><strong class="ku io">loadData()</strong></code> , kita akan memanggil repository untuk mengambil data film. Repository akan memanggil <em class="lo"> method </em> <code class="fe nf ng nh mr b"><strong class="ku io">getFilm()</strong></code> yang menerima sebuah <code class="fe nf ng nh mr b"><strong class="ku io">CallbackListener</strong></code> untuk mengembalikan data. Jadi pada file test yang kita buat tadi, kita tambahkan sebuah variabel <code class="fe nf ng nh mr b"><strong class="ku io">ArgumentCaptor</strong></code> yang berperan sebagai callback listener kita nantinya. ArgumentCaptor yang kita miliki merupakan callback listener dari <code class="fe nf ng nh mr b"><strong class="ku io">FilmDataSource</strong></code> <strong class="ku io"> </strong> , jadi variabel yang kita buat akan seperti ini.</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="765a" class="mv ls in mr b gy mw mx l my mz">@Captor private ArgumentCaptor&lt;FilmDataSource.LoadDataCallback&gt; loadCallbackArgumentCaptor;</span></pre><p id="9c65" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Setelah itu, callback listener yang kita miliki tadi memiliki sebuah <em class="lo"> method </em> <code class="fe nf ng nh mr b"><strong class="ku io">onDataLoaded(List&lt;Film&gt; list)</strong></code> yang akan mengembalikan <code class="fe nf ng nh mr b"><strong class="ku io">List Film</strong></code> ke repository untuk ditampilkan ke view melalui presenter. Untuk itu kita perlu membuat sebuah <em class="lo"> static </em> variabel <code class="fe nf ng nh mr b"><strong class="ku io">List Film</strong></code> pada file test kita yang akan digunakan sebagai hasil dari callback tersebut. List yang kita buat boleh berupa data kosong atau tipuan. Yang penting adalah variabel tersebut harus setipe dan sesuai dengan kembalian callback listener yang tadi. Contoh.</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="1282" class="mv ls in mr b gy mw mx l my mz">private static final <strong class="mr io">List&lt;Film&gt; <em class="lo">ITEMS</em></strong><em class="lo"> </em>= Collections.<em class="lo">emptyList</em>();</span></pre><p id="e598" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Sekarang balik lagi ke presenter yang tadi, bahwa yang dilakukan di <em class="lo"> method </em> <code class="fe nf ng nh mr b"><strong class="ku io">loadData()</strong></code> kita akan memanggil <code class="fe nf ng nh mr b"><strong class="ku io">repository.getFilm(callback)</strong></code> maka kita akan mengecek <strong class="ku io"> “apakah ketika method loadData() dipanggil, maka akan <em class="lo"> method </em> akan memanggil repository.getFilm(callback)” </strong> . <strong class="ku io"> </strong> Untuk membuktikan hal tersebut kita dapat menulisnya dengan kode.</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="0ba5" class="mv ls in mr b gy mw mx l my mz"><strong class="mr io"><em class="lo">verify</em></strong>(<strong class="mr io">repository</strong>).<strong class="mr io">getFilm</strong>(<strong class="mr io">loadCallbackArgumentCaptor.capture()</strong>);</span></pre><p id="fda4" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Baris kode ini akan memverifikasi <strong class="ku io"> “apakah benar bahwa method repository.getFilm(callback) terpanggil”. </strong> Sekarang balik lagi ke presenter, ternyata jika callback listener masuk ke <em class="lo"> method </em> <code class="fe nf ng nh mr b"><strong class="ku io">onDataLoaded(List&lt;Film&gt; list)</strong></code> maka kita akan memanggil view untuk menampilkan data List Film tersebut dengan <em class="lo"> method </em> <code class="fe nf ng nh mr b"><strong class="ku io">view.setItemToView(List)</strong></code> . Jadi yang akan kita lakukan selanjutnya pada file test kita ialah, <strong class="ku io"> membuat variabel ArgumentCaptor listener kita yang tadi akan menangkap dan mengembalikan List Film </strong> . Maka kita dapat menulisnya dengan kode.</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="7ab2" class="mv ls in mr b gy mw mx l my mz"><strong class="mr io">loadCallbackArgumentCaptor.getValue().onDataLoaded(<em class="lo">ITEMS</em>);</strong></span></pre><p id="8ddf" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Selanjutnya kita akan membuktikan <strong class="ku io"> “apakah view akan memanggil <em class="lo"> method </em> setItemToView() untuk menampilkan data ke <em class="lo"> Activity </em> atau <em class="lo"> Fragment </em> jika callback listener mengembalikan List Film” </strong> . Untuk membuktikan hal tersebut, kita dapat membuatnya dengan kode.</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="25c8" class="mv ls in mr b gy mw mx l my mz"><strong class="mr io"><em class="lo">verify</em>(view).setItemToView(<em class="lo">ITEMS</em>);</strong></span></pre><p id="29d3" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Kode ini sama seperti sebelumnya, yaitu memverifikasi bahwa <code class="fe nf ng nh mr b"><strong class="ku io">view.setItemToView(ITEMS)</strong></code> akan terpanggil. Pastikan objek yang akan dibuktikan pada setiap method sama dengan yang dikembalikan oleh setiap method. Setelah itu, jika tidak ada lagi yang dilakukan <em class="lo"> method </em> <code class="fe nf ng nh mr b"><strong class="ku io">loadData()</strong></code> , sekarang saatnya kita menjalankan file testnya. Jika kita berhasil menambahkan testnya dengan benar, maka test akan memberikan warna hijau. Jika masih gagal maka test akan memberikan warna merah.</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nt"><img src="../Images/91c563d62bf8715b596d7edb920b4173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*LzAyyx7NQ30sLg3RiytlbA.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Test Passed</figcaption></figure><p id="0315" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Selain itu, misalnya callback listener kita memiliki 2 <em class="lo"> method </em> yang dapat dikembalikan, yaitu jika berhasil akan mengembalikan method <code class="fe nf ng nh mr b"><strong class="ku io">onDataLoaded(List&lt;Film&gt; list)</strong></code> dan jika gagal akan mengembalikan <em class="lo"> method </em> <code class="fe nf ng nh mr b"><strong class="ku io">onError(Throwable throwable)</strong></code> . Maka kita juga perlu melakukan test kepada <em class="lo"> method </em> tersebut.</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="3eef" class="mv ls in mr b gy mw mx l my mz">@Override<br/>public void loadData() {<br/>    repository.getFilm(new FilmDataSource.LoadDataCallback() {<br/>        @Override<br/>        public void onDataLoaded(List&lt;Film&gt; films) {<br/>            view.setItemToView(films);<br/>        }</span><span id="2ff5" class="mv ls in mr b gy nu mx l my mz">        @Override<br/>        public void onError(Throwable e) {<br/>            view.setErrorToView();<br/>        }<br/>    });<br/>}</span></pre><p id="0234" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Misalnya untuk mengetes tahapan di <code class="fe nf ng nh mr b"><strong class="ku io">onError(Throwable throwable)</strong></code> kita menambahkan <em class="lo"> method </em> <code class="fe nf ng nh mr b"><strong class="ku io">loadDataErrorToView()</strong></code> pada file test kita. Maka hasilnya akan menjadi.</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="5cc4" class="mv ls in mr b gy mw mx l my mz">@Test<br/>public void loadDataToViewTest() {<br/>    presenter.loadData();<br/>    <br/>    <em class="lo">verify</em>(repository)<br/>.getFilm(loadCallbackArgumentCaptor.capture());<br/><br/>    loadCallbackArgumentCaptor.getValue().onDataLoaded(<em class="lo">ITEMS</em>);<br/><br/>    <em class="lo">verify</em>(view).setItemToView(<em class="lo">ITEMS</em>);<br/><br/>}<br/><br/>@Test<br/>public void loadErrorToViewTest() {<br/>    <strong class="mr io">presenter.start();<br/>    <br/>    <em class="lo">verify</em>(repository)<br/>.getFilm(loadCallbackArgumentCaptor.capture());<br/><br/>    loadCallbackArgumentCaptor.getValue().onError(<em class="lo">THROWABLE</em>);<br/><br/>    <em class="lo">verify</em>(view).setErrorToView();</strong><br/><br/>}</span></pre><p id="3bbb" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Sama seperti sebelumnya, kita perlu <strong class="ku io"> membuat variabel ArgumentCaptor listener kita yang tadi akan menangkap dan mengembalikan Throwable </strong> .</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="25ec" class="mv ls in mr b gy mw mx l my mz">private static final <strong class="mr io">Throwable <em class="lo">THROWABLE </em>= new Throwable();</strong></span><span id="aaca" class="mv ls in mr b gy nu mx l my mz"><strong class="mr io">loadCallbackArgumentCaptor.getValue().onError(<em class="lo">THROWABLE</em>);</strong></span></pre><p id="66be" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Lalu pada <code class="fe nf ng nh mr b"><strong class="ku io">onError(Throwable throwable)</strong></code> <strong class="ku io"> </strong> view kita akan memanggil <em class="lo"> method </em> <code class="fe nf ng nh mr b"><strong class="ku io">setErrorToView()</strong></code> <strong class="ku io"> </strong> , maka kita dapat membuatnya dengan.</p><pre class="kd ke kf kg gt mq mr ms mt aw mu bi"><span id="01b7" class="mv ls in mr b gy mw mx l my mz"><strong class="mr io"><em class="lo">verify</em>(view).setErrorToView();</strong></span></pre><p id="5fc7" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Kode ini akan membuktikan <strong class="ku io"> “apakah jika callback listener dikembalikan, maka view yang ditampilkan adalah Error View” </strong> .</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi nt"><img src="../Images/59d3f21304c10fb7bece9d957f51c243.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*VR1oergXnwud5nLUtkkBAA.gif"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Test Passed</figcaption></figure><p id="f7d2" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lo"> Nah </em> . kira-kira demikianlah cara kita menambahkan unit test pada aplikasi Android kita. Jika kita menambahkan <em class="lo"> method </em> lainnya, atau presenter lainnya atau kita mengubah step yang ada dalam <em class="lo"> method </em> presenter kita yang tadi, maka kita perlu menambah dan memperbaharui unit test kita tersebut.</p><p id="6e6c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Yang paling penting pada pengerjaan unit test ini ialah, setiap test yang kita buat harus mengcover semua method kita baik itu <em class="lo"> flow </em> yang normal, atau yang error atau tahapan-tahapan yang dilakukan juga sesuai. Jika kita memanggil step B terlebih dahulu, sedangkan pada implementasinya kita melakukan step A, maka test kita tidak akan <em class="lo"> passed </em> . Banyak sekali skenario yang perlu dilakukan dan ditambahkan pada unit test. Tulisan kali ini hanya membahas secara general.</p><p id="87bc" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Untuk pengembangan selanjutnya, dapat kamu lihat pada repo ini <a class="ae mp" href="https://github.com/eminartiys/memorize" rel="noopener ugc nofollow" target="_blank"> <strong class="ku io"> memorize </strong> </a> . Semoga artikel ini bermanfaat bagi kamu yang ingin mencoba. Kamu juga dapat melihat beberapa sumber dan implementasikan sesuai yang kamu mengerti. <em class="lo"> Happy Learning! </em> 😃</p></div><div class="ab cl nv nw hr nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ig ih ii ij ik"><p id="a623" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lo"> If you have any questions or complains, please feel free to contact me in these social networks: </em> <a class="ae mp" href="https://twitter.com/eyseminarti" rel="noopener ugc nofollow" target="_blank"> <em class="lo"> twitter </em> </a> <em class="lo"> , </em> <a class="ae mp" href="http://linkedin.com/in/eminarti-sianturi-08a369102" rel="noopener ugc nofollow" target="_blank"> <em class="lo"> linkedin </em> </a> <em class="lo"> , or </em> <a class="ae mp" href="mailto:eminartiys@gmail.com" rel="noopener ugc nofollow" target="_blank"> <em class="lo"> email </em> </a> <em class="lo"> . I’ll try to do my best to answer if I can, otherwise we will learn together :). </em></p></div><div class="ab cl nv nw hr nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="ig ih ii ij ik"><h2 id="ee46" class="mv ls in bd lt ni nj dn lx nk nl dp mb lb nm nn md lf no np mf lj nq nr mh ns bi translated">Referensi</h2><ol class=""><li id="a228" class="oc od in ku b kv na ky nb lb oe lf of lj og ln oh oi oj ok bi translated"><a class="ae mp" href="https://github.com/googlesamples/android-architecture" rel="noopener ugc nofollow" target="_blank"> https://github.com/googlesamples/android-architecture </a></li><li id="7a0e" class="oc od in ku b kv ol ky om lb on lf oo lj op ln oh oi oj ok bi translated"><a class="ae mp" href="https://caster.io/lessons/model-view-presenter-part-4-writing-fast-junit-jvm-tests-with-mockito" rel="noopener ugc nofollow" target="_blank"> https://caster.io/lessons/model-view-presenter-part-4-writing-fast-junit-jvm-tests-with-mockito </a></li></ol></div></div>    
</body>
</html>