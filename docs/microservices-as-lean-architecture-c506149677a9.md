# 作为精益架构的微服务

> 原文：<https://medium.com/globant/microservices-as-lean-architecture-c506149677a9?source=collection_archive---------1----------------------->

![](img/dddbd6de242a1197ec0a521978b4f7dc.png)

Mount Fuji

*在我的文章* [*传统公司采用微服务*](/globant/that-which-does-not-kill-us-makes-us-stronger-5df49b991c59) *中，我在描述了一个微服务架构实现的复杂性后提出了一个问题:值得吗？*

*在我们的工作中，经常会发现我们不得不向技术专业人员证明选择微服务架构的合理性，其中一些人不一定具有软件开发背景或丰富的经验。*

*这篇文章是针对这些情况的工具:将精益概念映射到整体系统问题，给出不以软件为中心的论点，具有更广泛的范围，并从一般工业组织的角度进行陈述。*

*精益方法由丰田公司创立，为熟悉工业生产的专业人士所熟知。这种方法长期以来一直是正式的研究生水平的学术研究的支柱，并继续为生产优化的工业组织的实质性改进提供框架。*

*精益方法论的核心是* ***浪费*** *的概念，称为* ***大木*** *，而开发这种方法论的强制性过程是* ***【大木】*** *的识别和剔除。****Mura****和****muri****是产品构建过程中必须消除的偏差，以避免浪费的累积。*

*简而言之，* ***大木*** *就是所有不为客户增加价值的东西。****Mura****是过程中发生的不均匀或一组不规则现象，而****muri****则是由***和* ***mura*** 引起的对过程或人的过度负担*

**整体系统中的覆盖层(MURI)**

**在整个软件开发生命周期中，单片系统的负担会越来越重。当实现新功能时受影响的代码量较大时，这些更改影响其他不相关模块的可能性也较大。**

*结果，任何验证特定功能的质量控制团队成员和任何解决错误或实现新功能的开发人员都负担过重。最后，任何为整体提供内存和 cpu 资源的组件，如果只有一部分接收到增量需求，也会负担过重。*

**这种过度负荷的积累主要是因为整体系统不是为具有不同资源消耗的组件的分离而设计的，也不是为管理其开发和发展的几个不同领域的团队而设计的。这一特征有利于将整体结构构建成范围更广的模块，并且没有与业务一致的分离，这主要是因为分离不是从一开始就设计好的。即使是设计出来的，也不是有目的的或灵活的，即使是设计出来的，也不一定能执行或得到验证。**

**当然，这种担心并不一定意味着单一系统不能正确构建，但由于其设计和开发中的初始倾向和相关实践，它不太可行。**

**众所周知，在设计基于微服务的架构时，需要利用领域驱动的设计实践来发现子域并确定架构的高层结构，这是本主题中整体架构的一个关键区别。**

**单片系统中的不均匀性(MURA)**

**单片系统中的不均匀性或不规则性在哪里？在单片架构设计中的非限制性耦合中可以看到 Mura，这导致实现新功能所需的时间和精力由于这些耦合而受到影响。这意味着一个简单的特性可能需要更多的时间或精力，因为其他模块或更广泛的代码库中隐含了变化。结果是，看似同样复杂的两个功能，由于其隐藏的、业务不需要的依赖关系，在实现它们的时间和精力上可能有差异。**

**因此，就所提供的功能而言，该估算不太合理，因此两个相似的功能可能被分配给两个不同的团队成员，但其中一个成员与另一个成员相比可能负担过重，从而导致不均衡。**

**单片系统中的废物(MUDA)**

**为了识别单片系统中的大木，我们将讨论 7 种类型的浪费。当相关时，我们将使用 Mary 和 Tom Poppendieck 在他们 2006 年的书中使用的软件映射(参考。1).**

****盘点*** *。在整体式系统中，可用库存是分配给整体式系统的资源，用于最坏情况下测量的容量。相比之下，微服务架构最多只能提供正常、平均使用情况下所需的资源，并且由于弹性特性，需求峰值可以通过扩展来覆盖。**

****额外加工和生产过剩*** *。这两种类型的浪费都不需要详细解释，除了考虑到与 DDD 方法更恰当地结合业务会降低生产过剩和额外处理的风险(开发特定业务域或子域在某个时刻需要的更多功能)。**

****运输*** *。Poppendieck 将这种类型的浪费映射到移交，即在团队和团队成员之间“携带”知识的文档。总的来说，他们不是一个好东西:最好在知识传播之前指导任务一段时间。将微服务分配给团队可以最大限度地减少对这种文档的需求。在构建微服务时，每个团队成员都可以指导另一个团队成员，而微服务范围的缩小使得这种指导更加容易，并且在更短的时间内完成。一个具有良好评论的* ***全工作微服务基线*** *可以，对于某些资历级别的开发人员，使入职完全无指导。在一个单一的系统中，知识界限并不明确，而且有一种趋势，那就是为一个单一的系统制作完整的文档，这种文档对于任何作为入职培训一部分的新团队成员来说都是通用的。**

****等待*** *。考虑到 muri 或 overburdens，不仅 QC 过程，而且 bug 修复和功能实现都可能产生延迟。加上已经考虑的整体的 mura，估计中的不均匀性可能导致不可预见的延迟。**

****运动*** *。按照已经提到的方法学到软件的映射，运动是软件开发中的任务切换。很明显，当一个团队对组件和每个组件的所有权进行了清晰的划分时，任务切换被最小化了。每个团队成员都可以是一个微服务的所有者，而一个自治的微服务解决方案(DDD 有界上下文)可以由整个团队所有。敏捷方法在时间方面优化的焦点在微服务架构要处理的代码范围方面也得到优化。**

****缺陷。*** *当耦合或更广泛的代码库受某个特性影响的可能性更大时，缺陷的风险就会增加。整体结构的非商业调整也是如此。**

***结论** *。单片系统中的 MURI、MURA 和 MUDA。**

**综上所述，单片系统中的耦合导致了在更广泛的代码库中的额外工作，以及考虑到其功能范围的特性估计的合理性的影响。此外，典型缺陷大木的风险上升。穆拉生成等待大木。缺乏维护软件服务的知识界定使得更大的移交(运输大木)成为可能，而将一个团队分配给整个整体增加了任务切换(运动大木)。微服务架构定义中采用的领域驱动设计实践是最大限度降低过载(muri)和生产过剩风险以及额外处理废物类型的关键。最后，资源向服务的粒度和弹性分配的不可能性产生了仅在最坏情况下(需求高峰)使用的可用库存，这构成了库存类型的大木。**

**参考文献**

*   **(1)* ***实施从概念到现金的精益软件开发。*** *玛丽和汤姆·波彭迪克。艾迪森·韦斯利专业版。2006.**