<html>
<head>
<title>Introducing Constraint Layout 2.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">引入约束布局2.0</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/introducing-constraint-layout-2-0-9daa3e99995b?source=collection_archive---------2-----------------------#2020-08-28">https://medium.com/androiddevelopers/introducing-constraint-layout-2-0-9daa3e99995b?source=collection_archive---------2-----------------------#2020-08-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/cfb59e6e26d3ba95f033f029c80ac104.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cQKSUJxHbM6A8IlydnP_DA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Illustration by <a class="ae hu" rel="noopener" href="/@VPoltrack">Virginia Poltrack</a>.</figcaption></figure><div class=""/><p id="ab22" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Constraint Layout是最受欢迎的jetpack库之一，我们很高兴地分享Constraint Layout 2.0已经发布！它具有Constraint Layout 1.1的所有特性，您可以熟悉这些特性来快速构建复杂的布局，并与Android Studio集成了工具来预览您的XML甚至编辑您的布局。</p><p id="2d9c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">约束布局2.0为约束布局带来了几个新功能。要用的话，撞一下<code class="du js jt ju jv b">build.gradle</code>里的版本。</p><pre class="jw jx jy jz fd ka jv kb kc aw kd bi"><span id="ad5e" class="ke kf hx jv b fi kg kh l ki kj">implementation “androidx.constraintlayout:constraintlayout:2.0.1”</span></pre><p id="cbb4" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">随着2.0的发布，我们还为约束布局创建了一个github <a class="ae hu" href="https://github.com/AndroidX/constraintlayout" rel="noopener ugc nofollow" target="_blank">库</a>。它目前是一个只读存储库，我们正在努力实现拉请求。</p><h1 id="5f04" class="kk kf hx bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">流动</h1><p id="27de" class="pw-post-body-paragraph iu iv hx iw b ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn ll jp jq jr ha bi translated"><a class="ae hu" href="https://developer.android.com/reference/androidx/constraintlayout/helper/widget/Flow?hl=en" rel="noopener ugc nofollow" target="_blank"> Flow </a>是一个新的虚拟布局，用于构建链，当链用完空间时，可以绕到下一行，甚至屏幕的另一部分。当您在一个链中布置多个项目，但不太确定容器在运行时会有多大时，这很有用。您可以使用它在应用程序中基于动态大小构建布局，比如旋转时的屏幕宽度。</p><figure class="jw jx jy jz fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lm"><img src="../Images/cfbd70c01e93db6a32e5fcfe081bc8ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*XKU-QriH6QxmX9q5"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx"><strong class="bd kl">Figure:</strong> Animation showing <code class="du js jt ju jv b"><em class="ln">Flow</em></code> creating multiple chains as elements overfill a row</figcaption></figure><p id="8171" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><code class="du js jt ju jv b">Flow </code>是虚拟布局。<strong class="iw hy">约束布局中的虚拟布局</strong>是参与约束和布局的虚拟视图组，但不增加层次。相反，它们参考约束布局中的其他视图来完成布局。</p><figure class="jw jx jy jz fd hj er es paragraph-image"><div class="er es lo"><img src="../Images/6a06242576fa206738414b2f045d25e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/0*cUkyjdggvoXnx19V"/></div><figcaption class="hq hr et er es hs ht bd b be z dx"><strong class="bd kl">Figure:</strong> Visualization of flow modes <code class="du js jt ju jv b"><em class="ln">"none"</em></code>, <code class="du js jt ju jv b"><em class="ln">"chain"</em></code>, <code class="du js jt ju jv b"><em class="ln">"align"</em></code></figcaption></figure><p id="d3cf" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用<code class="du js jt ju jv b">Flow</code>标签在约束布局2.0中添加一个<code class="du js jt ju jv b">Flow</code>。<code class="du js jt ju jv b">Flow</code>围绕您在<code class="du js jt ju jv b">constraint_referenced_ids</code>中传递的视图创建一个虚拟视图组，将引用的视图排列成一个链。</p><figure class="jw jx jy jz fd hj"><div class="bz dy l di"><div class="lp lq l"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Example usage of Flow in Constraint Layout</figcaption></figure><p id="3aad" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><code class="du js jt ju jv b">Flow</code>最重要的选项之一是<code class="du js jt ju jv b">wrapMode</code>，它允许您配置当内容溢出(或换行)时该做什么。</p><p id="ee32" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">您可以为<code class="du js jt ju jv b">wrapMode</code>指定三个选项:</p><ul class=""><li id="ed3d" class="lr ls hx iw b ix iy jb jc jf lt jj lu jn lv jr lw lx ly lz bi translated"><code class="du js jt ju jv b"><strong class="iw hy">none</strong></code>–创建一个单链，如果内容不合适，就会溢出</li><li id="7521" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated"><code class="du js jt ju jv b"><strong class="iw hy">chain</strong></code>–溢出时，为溢出元素创建添加另一个链</li><li id="5439" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated"><code class="du js jt ju jv b"><strong class="iw hy">align</strong></code> —类似于链，但将行与列对齐</li></ul><p id="7d72" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">要了解更多关于心流的知识，请阅读官方文件。</p><h1 id="2391" class="kk kf hx bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">层</h1><p id="3c62" class="pw-post-body-paragraph iu iv hx iw b ix lh iz ja jb li jd je jf lj jh ji jj lk jl jm jn ll jp jq jr ha bi translated">一个新的助手<code class="du js jt ju jv b"><a class="ae hu" href="https://developer.android.com/reference/androidx/constraintlayout/helper/widget/Layer" rel="noopener ugc nofollow" target="_blank">Layer</a></code>，让你从几个视图中创建一个虚拟层。与<code class="du js jt ju jv b">Flow</code>不同的是，它并不展示视图。相反，<code class="du js jt ju jv b">Layer</code>让你一次在几个视图上应用变换。</p><p id="0b37" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果你想为<code class="du js jt ju jv b">rotate</code>、<code class="du js jt ju jv b">translate</code>或<code class="du js jt ju jv b">scale</code>几个视图一起构建动画，这是很有用的。</p><figure class="jw jx jy jz fd hj er es paragraph-image"><div class="er es lo"><img src="../Images/2113f14818b0acdbe078a5d3a02ddb99.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*Tcq1VyL4vhCXCseNBqN6iw.gif"/></div><figcaption class="hq hr et er es hs ht bd b be z dx"><strong class="bd kl">Figure:</strong> Apply transformations to multiple views together using a <code class="du js jt ju jv b"><em class="ln">Layer</em></code></figcaption></figure><p id="afc5" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">图层在布局过程中调整大小，并将根据它引用的所有视图调整大小。</p><p id="f8a1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">要在约束布局2.0中添加一个层，使用<code class="du js jt ju jv b">Layer</code>标签:</p><figure class="jw jx jy jz fd hj"><div class="bz dy l di"><div class="lp lq l"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Example usage of Layer in Constraint Layout</figcaption></figure><h1 id="c053" class="kk kf hx bd kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg bi translated">运动布局</h1><figure class="jw jx jy jz fd hj er es paragraph-image"><div class="er es mf"><img src="../Images/0ce85e1729956a7442e7fdd93910562e.png" data-original-src="https://miro.medium.com/v2/resize:fit:956/0*YFs9v6vHl4ksF60o"/></div><figcaption class="hq hr et er es hs ht bd b be z dx"><strong class="bd kl">Animation:</strong> Screens of the new <a class="ae hu" href="https://github.com/android/views-widgets-samples/tree/master/ConstraintLayoutExamples/motionlayoutintegrations" rel="noopener ugc nofollow" target="_blank">Motion Layout Integrations sample</a></figcaption></figure><p id="a7fa" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">运动布局是约束布局2.0中最受期待的功能之一。它提供了一个丰富的动画系统来协调多个视图的动画。<code class="du js jt ju jv b">MotionLayout</code>基于<code class="du js jt ju jv b">ConstraintLayout</code>并对其进行扩展，允许你在多组约束(或<code class="du js jt ju jv b">ConstraintSet</code> s)之间制作动画。您可以自定义视图如何移动、滚动、缩放、旋转、淡入淡出，甚至动画化自定义属性。它还可以处理基于物理的手势和控制动画的速度。用<code class="du js jt ju jv b">MotionLayout</code>构建的动画是可查找和可逆的。这意味着你可以跳到动画中的任何一点，甚至可以倒放。</p><p id="a21b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">集成在Android Studio中的运动编辑器可以让你使用<code class="du js jt ju jv b">MotionLayout</code>构建、预览和编辑动画。这使得在协调多个视图时调整动画的细节变得容易。</p><p id="8bfc" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">了解更多关于运动编辑器的信息，请阅读Scott Swarthout的博客文章</p><div class="hg hh ez fb hi mh"><a href="https://android-developers.googleblog.com/2020/07/introducing-motion-editor.html" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hy fi z dy mm ea eb mn ed ef hw bi translated">运动编辑器简介</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">我们与Android开发者社区进行了交流，了解到动画对于使用户界面更加直观非常重要…</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">android-developers.googleblog.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv ho mh"/></div></div></a></div><p id="300a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">通过实践指南了解运动布局，查看运动布局代码实验室:</p><div class="hg hh ez fb hi mh"><a href="https://codelabs.developers.google.com/codelabs/motion-layout/#1" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hy fi z dy mm ea eb mn ed ef hw bi translated">Kotlin 03.2中的高级Android:带MotionLayout的动画</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">这个代码实验室是Kotlin高级机器人课程的一部分。如果你努力学习，你将从这门课程中获得最大的价值</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">codelabs.developers.google.com</p></div></div><div class="mq l"><div class="mw l ms mt mu mq mv ho mh"/></div></div></a></div><p id="2694" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Motion Layout是一个通用的动画工具——你可以用它在Android上制作几乎任何动画。然而，在两种情况下，Motion Layout比其他选项更擅长构建动画。</p><ul class=""><li id="d682" class="lr ls hx iw b ix iy jb jc jf lt jj lu jn lv jr lw lx ly lz bi translated"><strong class="iw hy">可查找的动画</strong> —由其他输入驱动的动画，例如响应滚动的折叠工具栏</li><li id="a5ae" class="lr ls hx iw b ix ma jb mb jf mc jj md jn me jr lw lx ly lz bi translated"><strong class="iw hy">状态转换</strong> —由状态变化驱动的动画，例如用户进入屏幕</li></ul><p id="12d3" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">新的<a class="ae hu" href="https://github.com/android/views-widgets-samples/tree/master/ConstraintLayoutExamples/motionlayoutintegrations" rel="noopener ugc nofollow" target="_blank">运动布局集成示例</a>展示了如何使用运动布局为这些用例构建丰富的动画。每个屏幕都旨在展示您可以使用Motion Layout构建的实用动画效果，以及如何构建与其他视图的集成。</p><div class="hg hh ez fb hi mh"><a href="https://github.com/android/views-widgets-samples/tree/master/ConstraintLayoutExamples/motionlayoutintegrations" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab dw"><div class="mj ab mk cl cj ml"><h2 class="bd hy fi z dy mm ea eb mn ed ef hw bi translated">Android/视图-小部件-示例</h2><div class="mo l"><h3 class="bd b fi z dy mm ea eb mn ed ef dx translated">多个示例展示了Android上视图小部件的最佳实践。-Android/视图-小部件-示例</h3></div><div class="mp l"><p class="bd b fp z dy mm ea eb mn ed ef dx translated">github.com</p></div></div><div class="mq l"><div class="mx l ms mt mu mq mv ho mh"/></div></div></a></div><p id="1bf7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">约束布局2.0中有很多新特性。查看文档、codelab和示例，开始在您的应用中使用它。</p><p id="648d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们迫不及待地想看看你的作品！</p></div></div>    
</body>
</html>