<html>
<head>
<title>Jest Integration with Angular 12</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Jest与Angular 12集成</h1>
<blockquote>原文：<a href="https://medium.com/globant/jest-integration-with-angular-12-8965ee1d8c94?source=collection_archive---------2-----------------------#2022-02-10">https://medium.com/globant/jest-integration-with-angular-12-8965ee1d8c94?source=collection_archive---------2-----------------------#2022-02-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/cff431f1fea4e5dfc793f079585acd11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2FNmoKmQnPeTpNQ-"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@casparrubin?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Caspar Camille Rubin</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="9e8c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">开始吧！</p><p id="0c66" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">默认情况下，Angular使用jasmine和karma进行单元测试。在这里，我们尝试将jest与angular项目集成起来进行轻量级单元测试。</p><h1 id="d9dd" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">1.管理依赖关系</h1><ul class=""><li id="6593" class="kq kr hh iw b ix ks jb kt jf ku jj kv jn kw jr kx ky kz la bi translated">首先，卸载所有与karma相关的devDependencies。您可以使用下面的命令卸载这些devDependencies。</li></ul><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="6954" class="lk jt hh lg b fi ll lm l ln lo">npm uninstall karma karma-chrome-launcher karma-coverage karma-jasmine karma-jasmine-html-reporter</span></pre><ul class=""><li id="4ccc" class="kq kr hh iw b ix iy jb jc jf lp jj lq jn lr jr kx ky kz la bi translated">然后安装jest相关的devDependencies，如下所示。</li></ul><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="c2e7" class="lk jt hh lg b fi ll lm l ln lo">npm install jest @types/jest jest-junit jest-preset-angular ts-jest — save-dev</span></pre><h1 id="1142" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">2.移除和更新jsons</h1><ul class=""><li id="3c75" class="kq kr hh iw b ix ks jb kt jf ku jj kv jn kw jr kx ky kz la bi translated">从angular.json中移除测试对象</li><li id="7005" class="kq kr hh iw b ix ls jb lt jf lu jj lv jn lw jr kx ky kz la bi translated">更新package.json中的脚本部分，如下所示</li></ul><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lx"><img src="../Images/232cb0ede6c44271700b3e72e1e5544f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ITV-z_BLZlcw2rWvcqT7-g.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">package.json</figcaption></figure><h1 id="4424" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">3.删除和更新配置文件</h1><ul class=""><li id="5a80" class="kq kr hh iw b ix ks jb kt jf ku jj kv jn kw jr kx ky kz la bi translated">从项目的根级别删除karma.conf.js</li><li id="46ff" class="kq kr hh iw b ix ls jb lt jf lu jj lv jn lw jr kx ky kz la bi translated">在项目的根级别创建并更新jest.config.js</li></ul><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ly"><img src="../Images/5b1ddc0f5a9757ad220cf6da814a1364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*upnkF7qiaswHI22akNfaZg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">jest.config.js</figcaption></figure><ul class=""><li id="c48c" class="kq kr hh iw b ix iy jb jc jf lp jj lq jn lr jr kx ky kz la bi translated">从src目录中删除test.ts</li><li id="3fc0" class="kq kr hh iw b ix ls jb lt jf lu jj lv jn lw jr kx ky kz la bi translated">在src目录中创建并更新setupJest.ts</li></ul><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lz"><img src="../Images/07190322d0c71b579f1a093db60014be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rVYUIih2ZNiizsr41GsVmg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">setupJest.ts</figcaption></figure><h1 id="8a3e" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">4.移除并更新tsconfig jsons</h1><ul class=""><li id="a39a" class="kq kr hh iw b ix ks jb kt jf ku jj kv jn kw jr kx ky kz la bi translated">如下所示更新tsconfig.json</li></ul><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ma"><img src="../Images/db5ef7741fa05b356d8e893c4352867c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C59j63NnLUYFH6FTYw4ZdA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">tsconfig.json</figcaption></figure><ul class=""><li id="a9cd" class="kq kr hh iw b ix iy jb jc jf lp jj lq jn lr jr kx ky kz la bi translated">如下所示更新tsconfig.spec.json</li></ul><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lx"><img src="../Images/c51f8562c87b6342d712a8f3c71a0d9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G4o2sucGThQQbsWXCg2AlQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">tsconfig.spec.json</figcaption></figure><h1 id="899a" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">4.运行并检查单元测试</h1><ul class=""><li id="df12" class="kq kr hh iw b ix ks jb kt jf ku jj kv jn kw jr kx ky kz la bi translated">在终端中运行以下脚本进行检查</li></ul><blockquote class="mb mc md"><p id="10d8" class="iu iv me iw b ix iy iz ja jb jc jd je mf jg jh ji mg jk jl jm mh jo jp jq jr ha bi translated">npm运行测试</p></blockquote><ul class=""><li id="617a" class="kq kr hh iw b ix iy jb jc jf lp jj lq jn lr jr kx ky kz la bi translated">运行下面的脚本，在观察模式下测试您的更改</li></ul><blockquote class="mb mc md"><p id="c662" class="iu iv me iw b ix iy iz ja jb jc jd je mf jg jh ji mg jk jl jm mh jo jp jq jr ha bi translated">npm运行测试:观察</p></blockquote><ul class=""><li id="249b" class="kq kr hh iw b ix iy jb jc jf lp jj lq jn lr jr kx ky kz la bi translated">运行下面的脚本来查看单个组件的覆盖范围以及完整的应用程序</li></ul><blockquote class="mb mc md"><p id="9bc2" class="iu iv me iw b ix iy iz ja jb jc jd je mf jg jh ji mg jk jl jm mh jo jp jq jr ha bi translated">npm运行测试:覆盖率</p></blockquote><p id="7c75" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">注意:在项目的根层次，覆盖率目录将被创建，如果我们在浏览器中打开index.html，我们可以看到完整应用程序的代码覆盖率。(路径:jest-ng-seed/coverage/jest-ng-seed/lcov-report/index . html)</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mi"><img src="../Images/0f0998c23029e2acdb4777d2eb9f0106.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Tpb6pKQLGfoyPQTsF_Ftww.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Code coverage sample</figcaption></figure><p id="55d7" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">请在下面的GitHub链接中找到上述代码片段和名为jest-ng-seed的种子项目。</p><div class="mj mk ez fb ml mm"><a href="https://github.com/AbhijeetGiram/jest-ng-seed" rel="noopener  ugc nofollow" target="_blank"><div class="mn ab dw"><div class="mo ab mp cl cj mq"><h2 class="bd hi fi z dy mr ea eb ms ed ef hg bi translated">GitHub—AbhijeetGiram/Jest-ng-seed:Jest与使用angular的angular应用程序集成…</h2><div class="mt l"><h3 class="bd b fi z dy mr ea eb ms ed ef dx translated">此项目是使用Angular CLI版本12.1.2生成的。为开发服务器运行ng serve。导航到…</h3></div><div class="mu l"><p class="bd b fp z dy mr ea eb ms ed ef dx translated">github.com</p></div></div><div class="mv l"><div class="mw l mx my mz mv na in mm"/></div></div></a></div></div><div class="ab cl nb nc go nd" role="separator"><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng nh"/><span class="ne bw bk nf ng"/></div><div class="ha hb hc hd he"><h1 id="a757" class="js jt hh bd ju jv ni jx jy jz nj kb kc kd nk kf kg kh nl kj kk kl nm kn ko kp bi translated">摘要</h1><p id="85ef" class="pw-post-body-paragraph iu iv hh iw b ix ks iz ja jb kt jd je jf nn jh ji jj no jl jm jn np jp jq jr ha bi translated">我们已经通过一个名为jest-ng-seed的种子项目详细探讨了jest与Angular 12的集成。</p><p id="0ea3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">编码快乐！！</p></div></div>    
</body>
</html>