<html>
<head>
<title>How to deliver your logs/metrics to Datadog using Amazon Kinesis Data Firehose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何使用Amazon Kinesis Data Firehose将您的日志/指标交付给Datadog</h1>
<blockquote>原文：<a href="https://medium.com/globant/how-to-deliver-your-logs-metrics-to-datadog-using-amazon-kinesis-data-firehose-8bfeb5d43f44?source=collection_archive---------0-----------------------#2021-04-13">https://medium.com/globant/how-to-deliver-your-logs-metrics-to-datadog-using-amazon-kinesis-data-firehose-8bfeb5d43f44?source=collection_archive---------0-----------------------#2021-04-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="2e64" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">AWS数据和分析服务不断发展；最近，我看到亚马逊Kinesis Data Firehose允许第三方目的地，如Dynatrace、Datadog和NewRelic等。这种新的集成将允许我们轻松地将我们的日志和指标流提供给这些提供商。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/2fcc3c9a5caf8bca7b1a62ec7e10e9cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fmjzw3kyJ7c6lv84A4FwYg.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Some of the third party integrations</figcaption></figure><p id="9e3e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当我看到这个新版本时，我开始着手我之前实现的一个架构，你可以在这个<a class="ae js" rel="noopener" href="/globant/ingesting-data-in-kinesis-data-streams-using-kpl-for-on-premise-application-e1957a3bfe59">链接</a>看到。因为我们通过VPN在本地将许多日志接收到AWS。然后，我决定测试新功能，并实现与datadog的集成，看看它如何在不利用以前实现的功能的情况下让日志到达Datadog。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jt"><img src="../Images/11fe57a1d44ea50609b7f650174922bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1LeqSLKV_rX76o_oD9EsQ.png"/></div></div></figure><p id="fc63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我与Datadog进行了集成，以测试这一新功能，并能够利用该工具为我们带来的优势:</p><ul class=""><li id="8b48" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb jz ka kb kc bi translated">日志解析。</li><li id="b1ec" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb jz ka kb kc bi translated">日志充实。</li><li id="905a" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb jz ka kb kc bi translated">指标的生成。</li><li id="b396" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb jz ka kb kc bi translated">过滤和优先排序。</li></ul><h1 id="08c7" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">集成是如何工作的？</h1><p id="4916" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">与这些提供者的集成都是通过一个API键完成的；您必须选择正确的端点，并使用从服务生成的API密钥。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ll"><img src="../Images/ee58ebd75209a62e4608aaa4422127c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2pyKJSiMYNSMVR5Khrg-Eg.png"/></div></div></figure><h1 id="c126" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">数据狗集成</h1><p id="cc06" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">1-进入<a class="ae js" href="https://app.datadoghq.com/account/settings#api" rel="noopener ugc nofollow" target="_blank">数据狗配置页面</a>。</p><p id="9c44" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2-创建一个API密钥。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lm"><img src="../Images/eb1fd88ffdf26d241df33f004e821f2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OLeVuCn5r4ywG7HT-4yf7w.png"/></div></div></figure><p id="93fd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3-创建Amazon Kinesis数据消防软管，并为Datadog选择端点。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ln"><img src="../Images/e75cebb5d54614c3106284373bd7ea13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1314/format:webp/1*ckGAll5gHnk-mNNXZy5wmA.png"/></div></figure><p id="5f65" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4-选择HTTP端点URL。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lo"><img src="../Images/0838360485c4b3c7d61546bca5ef9210.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*cIxu7zYIpB7IxJesHqiuzQ.png"/></div></figure><p id="b13f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5-放入步骤2中的API密钥。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lp"><img src="../Images/6dc23d19ca7dc8c0eab89ba3d6d93ae8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0I5yhjwryULaOf3qaZbEYg.png"/></div></div></figure><h1 id="8e96" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">检查集成</h1><p id="3ee9" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">在Amazon Kinesis Data Firose monitoring选项卡中检查从Amazon kine sis数据流(Sum)中读取的记录。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lq"><img src="../Images/e4c37f62547de8ed62eea78aac7e1c48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rYna-V8UA_FAsYZanzM08A.png"/></div></div></figure><p id="34c6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">检查<a class="ae js" href="https://app.datadoghq.com/logs" rel="noopener ugc nofollow" target="_blank">数据狗日志</a>。图像中的日志是从<a class="ae js" href="https://github.com/awslabs/amazon-kinesis-producer/tree/master/java/amazon-kinesis-producer-sample" rel="noopener ugc nofollow" target="_blank">样本KPL </a>生成的。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lr"><img src="../Images/c8289c7febf6c6486c75ec6f00913f1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3JiUGSJ0DWtNsUuKIsmjSg.png"/></div></div></figure><p id="0404" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦您在Datadog中有了所有的日志，您就可以利用它提供的所有功能。</p><h1 id="a05c" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">最终架构和结论</h1><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ls"><img src="../Images/58b65d097836ec8cd671b572645c15ab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rEjxnb7jBINOsgssrSjnhA.png"/></div></div></figure><p id="cddc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在上面的架构中，Amazon Kinesis数据流从运行KPL的本地应用程序接收信息。该信息通过VPN并使用VPC端点传输；它到达了Kinesis数据流。它将整个Amazon Kinesis数据消防水管流传送到数据狗。</p><p id="12b1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1-通过Amazon Kinesis Data Firehose，管理日志和指标的集成更加容易。</p><p id="e7ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2-所有集成必须使用API键；为此，您必须参考第三方提供商的文档。</p><p id="befd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3-这些集成将允许您利用这些第三方提供商在日志管理和监控方面提供的功能。</p><p id="d2ae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4-无法发送到第三方提供商的数据可以存储在本地存储桶中。</p><p id="258a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5-将有可能在Amazon Kinesis数据流中集中N个日志源，并使用Amazon Kinesis数据消防软管发送到Datadog这个用例非常普遍，因为许多公司使用其他提供商的工具作为他们的监控和日志记录核心。</p><p id="f5c2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章中，我将讨论Dynatrace、Datadog和NewRelic。尽管如此，您还必须考虑其他第三方集成，如LogicMonitor、MongoDB Cloud、Splunk和Sumo Logic。</p><p id="999e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">许多人会想为什么不直接在实例上安装Datadog代理，避免使用Kinesis？在这种情况下，使用Amazon Kinesis数据流和Amazon Kinesis Data Firehose允许AWS中有更多可以使用日志的流，例如为S3提供日志的流使用Amazon Quicksight并可视化信息。</p><p id="76ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">— <a class="ae js" href="https://www.czam.dev/" rel="noopener ugc nofollow" target="_blank">卡洛斯·桑布拉诺</a></p></div></div>    
</body>
</html>