<html>
<head>
<title>Streamline Code Reviews with ESLint + Prettier</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ESLint+appearlier简化代码审查</h1>
<blockquote>原文：<a href="https://medium.com/javascript-scene/streamline-code-reviews-with-eslint-prettier-6fb817a6b51d?source=collection_archive---------2-----------------------#2019-03-28">https://medium.com/javascript-scene/streamline-code-reviews-with-eslint-prettier-6fb817a6b51d?source=collection_archive---------2-----------------------#2019-03-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="4940" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">猎枪视频集</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/991d0b9dbb03bab579fb88c41f2f5453.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lo8cD5m7VqUXPlKF3lgfNQ.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo: <a class="ae jm" href="https://www.flickr.com/photos/luxurydesigner/" rel="noopener ugc nofollow" target="_blank">Brandon Bailey</a> — Midnight Cowboy (CC-BY-2.0)</figcaption></figure><p id="72c0" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在最新一集的《埃里克·埃利奥特的猎枪》中，这是一个为<a class="ae jm" href="https://ericelliottjs.com" rel="noopener ugc nofollow" target="_blank">EricElliottJS.com</a>成员制作的视频系列，我们通过<a class="ae jm" href="https://ericelliottjs.com/shotgun-postamp-episode-one-linting" rel="noopener ugc nofollow" target="_blank">完成了设置ESLint和appetter</a>的过程，以自动化JavaScript项目的语法检查和代码风格管理过程。</p><h2 id="181c" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">为什么自动化Lint和代码风格很重要？</h2><p id="edfd" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated"><strong class="jp hi"> ESLint </strong>自动扫描您的JavaScript文件，查找常见的语法和样式错误。</p><p id="ca6f" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated"><strong class="jp hi">更漂亮</strong>扫描您的文件的样式问题，并自动重新格式化您的代码，以确保遵循一致的规则，如缩进、间距、分号、单引号和双引号等。</p><p id="4fee" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们在团队中使用它们是因为:</p><ul class=""><li id="eb4f" class="lj lk hh jp b jq jr jt ju jw ll ka lm ke ln ki lo lp lq lr bi translated">他们让每个人都在同一页上，遵循同样的规则。</li><li id="4a27" class="lj lk hh jp b jq ls jt lt jw lu ka lv ke lw ki lo lp lq lr bi translated"><strong class="jp hi">它们节省了代码审查的时间</strong>，因为我们可以安全地忽略所有的风格问题，并专注于真正重要的事情，比如我们代码的结构和语义。</li><li id="caf1" class="lj lk hh jp b jq ls jt lt jw lu ka lv ke lw ki lo lp lq lr bi translated"><strong class="jp hi">他们捕捉错误</strong>。漂亮点，没那么漂亮，但是ESLint实际上捕捉了很多语法错误和简单形式的类型错误，比如未定义的变量。</li><li id="acad" class="lj lk hh jp b jq ls jt lt jw lu ka lv ke lw ki lo lp lq lr bi translated"><strong class="jp hi">设置这些东西是一次性成本</strong>，但节省时间的好处会随着时间的推移而增加。</li></ul><h2 id="13ab" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">配置更漂亮的以使用ESLint</h2><p id="578a" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">Prettier可以作为ESLint 的一个插件运行，它允许你用一个命令来Lint和格式化你的代码。在我看来，任何简化开发过程的方法都是成功的。beauty+ESLint是开发者天堂里的一对。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es lx"><img src="../Images/8e84b32f8c9805ce04944159c9301f19.png" data-original-src="https://miro.medium.com/v2/resize:fit:512/format:webp/1*0SNCJfem2WVKSJIDzConxg.png"/></div><figcaption class="ji jj et er es jk jl bd b be z dx">It’s dangerous to go alone! Take this.</figcaption></figure><p id="4a80" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">如果你曾经试图同时运行beautiful和ESLint，你可能会与冲突的规则作斗争。放心吧！你不是一个人。插入<a class="ae jm" href="https://github.com/prettier/eslint-config-prettier" rel="noopener ugc nofollow" target="_blank">eslint-config-appellister</a>，所有ESLint的冲突样式规则都会自动为你禁用。</p><p id="5bfe" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">如果你还没有使用<a class="ae jm" href="https://github.com/yannickcr/eslint-plugin-react" rel="noopener ugc nofollow" target="_blank"> eslint-plugin-react </a>，它可以提醒你添加PropTypes到你的组件中，并且<a class="ae jm" href="https://www.npmjs.com/package/eslint-plugin-react-hooks" rel="noopener ugc nofollow" target="_blank">eslint-plugin-React-hooks</a>可以帮助你发现用户在使用React hooks API时遇到的常见问题。首先安装所有这些组件，如<code class="du ly lz ma mb b">devDependencies</code>:</p><pre class="ix iy iz ja fd mc mb md me aw mf bi"><span id="fab0" class="kj kk hh mb b fi mg mh l mi mj">npm install --save-dev eslint eslint-config-prettier eslint-plugin-prettier eslint-plugin-react eslint-plugin-react-hooks prettier</span></pre><p id="1f8e" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">接下来，您需要一些配置文件。首先，让我们忽略一堆我们不想用<code class="du ly lz ma mb b">.eslintignore</code>处理的东西:</p><pre class="ix iy iz ja fd mc mb md me aw mf bi"><span id="468a" class="kj kk hh mb b fi mg mh l mi mj">node_modules<br/>.next</span></pre><p id="dca7" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">和<code class="du ly lz ma mb b">.prettierignore</code>:</p><pre class="ix iy iz ja fd mc mb md me aw mf bi"><span id="2018" class="kj kk hh mb b fi mg mh l mi mj">package-lock.json<br/>.next<br/>node_modules/</span></pre><p id="422d" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">你需要一把<code class="du ly lz ma mb b">.eslintrc</code>。这是我的:</p><pre class="ix iy iz ja fd mc mb md me aw mf bi"><span id="ee45" class="kj kk hh mb b fi mg mh l mi mj">{<br/>  "env": {<br/>    "browser": true,<br/>    "commonjs": true,<br/>    "es6": true,<br/>    "node": true<br/>  },<br/>  "plugins": [<br/>    "react",<br/>    "react-hooks"<br/>  ],<br/>  "extends": ["eslint:recommended", "plugin:react/recommended", "plugin:prettier/recommended"],<br/>  "parserOptions": {<br/>    "sourceType": "module",<br/>    "ecmaVersion": 2018<br/>  },<br/>  "settings": {<br/>    "react": {<br/>      "version": "detect"<br/>    }<br/>  },<br/>  "rules": {<br/>    "linebreak-style": ["error", "unix"],<br/>    "react-hooks/rules-of-hooks": "error",<br/>    "react-hooks/exhaustive-deps": "warn"<br/>  }<br/>}</span></pre><p id="aecc" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">还有一个<code class="du ly lz ma mb b">.prettierrc</code>。这是我的:</p><pre class="ix iy iz ja fd mc mb md me aw mf bi"><span id="7d74" class="kj kk hh mb b fi mg mh l mi mj">{<br/>  "singleQuote": true<br/>}</span></pre><p id="307c" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">现在你只需要给<code class="du ly lz ma mb b">package.json</code>添加一个<code class="du ly lz ma mb b">"lint"</code>脚本:</p><pre class="ix iy iz ja fd mc mb md me aw mf bi"><span id="8d85" class="kj kk hh mb b fi mg mh l mi mj">"lint": "eslint --fix . &amp;&amp; echo 'Lint complete.'"</span></pre><p id="406e" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">完成后我喜欢附和。否则，它只是在没有错误时保持沉默。</p><p id="ed48" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我还把林挺加入到我的观察脚本中，就像这样:</p><pre class="ix iy iz ja fd mc mb md me aw mf bi"><span id="0949" class="kj kk hh mb b fi mg mh l mi mj">"watch": "watch 'clear &amp;&amp; npm run -s test | tap-nirvana &amp;&amp; npm run -s lint' src",</span></pre><p id="f0dc" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">如果你从未使用过<code class="du ly lz ma mb b">watch</code>，你需要在使用之前安装它:</p><pre class="ix iy iz ja fd mc mb md me aw mf bi"><span id="8eb6" class="kj kk hh mb b fi mg mh l mi mj">npm install --save-dev watch tap-nirvana</span></pre><p id="12a9" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">如果你是一个Windows用户，我推荐使用Windows的Linux子系统。我不能保证没有它所有的脚本都能正常工作。</p><h2 id="919b" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">立即尝试Zeit</h2><blockquote class="mk ml mm"><p id="4502" class="jn jo mn jp b jq jr ii js jt ju il jv mo jx jy jz mp kb kc kd mq kf kg kh ki ha bi translated">免责声明:这里不需要免责声明。没人给我任何东西来说我将要说的话。</p></blockquote><p id="98d7" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">在视频中，我谈到了Zeit现在有多酷。成员应该<a class="ae jm" href="https://ericelliottjs.com/shotgun-postamp-episode-one-linting/" rel="noopener ugc nofollow" target="_blank">观看视频</a>来看看GitHub钩子的连续部署。</p><p id="9078" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">Zeit Now是一个很棒的托管服务，可以轻松地与GitHub集成，使用无服务器技术为您提供端到端的连续部署。不确定这意味着什么或如何编写“无服务器”应用程序？没问题。只需使用<a class="ae jm" href="https://nextjs.org/" rel="noopener ugc nofollow" target="_blank"> Next.js </a>并让Next和Now为您处理所有细节。</p><p id="bedb" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这就像拥有世界上最好的DevOps团队——而不需要雇佣全职开发人员来简化您的持续交付流程。Zeit在托管和开发时间上为我们节省了资金。</p><p id="97a6" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">由于Next的自动捆绑分裂、服务器端渲染和超快的无服务器响应时间，我们的应用程序比以往任何时候都服务得更快，它们甚至与<a class="ae jm" href="https://www.cloudflare.com/" rel="noopener ugc nofollow" target="_blank"> Cloudflare CDN </a>集成，以将世界各地的延迟降至接近零。</p><h2 id="e9b3" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">关键视频要点</h2><ul class=""><li id="9ebe" class="lj lk hh jp b jq le jt lf jw mr ka ms ke mt ki lo lp lq lr bi translated"><strong class="jp hi">甚至当我在做原型时，我也使用TDD。</strong>当您第一次开始使用TDD时，创建一个初始构建可能要多花15% — 30%的时间。有了一两年的经验，首先编写测试实际上可以节省您的时间，因为您花费更少的时间来更改代码、刷新页面以及遍历工作流来测试您的UI更改。</li><li id="e72a" class="lj lk hh jp b jq ls jt lt jw lu ka lv ke lw ki lo lp lq lr bi translated"><strong class="jp hi">自动化的lint和代码格式化通过捕捉错误并让开发人员在同一页面上，让您的团队将代码审查集中在更有意义和更有成效的主题上，从而使开发人员更有成效</strong>。</li><li id="3952" class="lj lk hh jp b jq ls jt lt jw lu ka lv ke lw ki lo lp lq lr bi translated"><strong class="jp hi">试试</strong> <a class="ae jm" href="https://zeit.co/now" rel="noopener ugc nofollow" target="_blank"> <strong class="jp hi"> Zeit现</strong> </a> <strong class="jp hi">。</strong></li><li id="7c1a" class="lj lk hh jp b jq ls jt lt jw lu ka lv ke lw ki lo lp lq lr bi translated"><strong class="jp hi">连接一个监视脚本</strong>在你编码时运行，自动lint并在每次文件保存时运行你的单元测试。</li></ul></div><div class="ab cl mu mv go mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ha hb hc hd he"><figure class="ix iy iz ja fd jb er es paragraph-image"><a href="https://ericelliottjs.com/premium-content/lesson-pure-functions"><div class="er es nb"><img src="../Images/649c1c875d8140aa42e9e3d9ffedf8e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rgRYDo68_u8KgIhnlZffcg.png"/></div></a><figcaption class="ji jj et er es jk jl bd b be z dx"><a class="ae jm" href="https://ericelliottjs.com/premium-content/lesson-pure-functions" rel="noopener ugc nofollow" target="_blank">Start your free lesson on EricElliottJS.com</a></figcaption></figure><p id="d435" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated"><strong class="jp hi"> <em class="mn">埃里克·艾略特</em> </strong> <em class="mn">是本书的作者，</em> <a class="ae jm" href="https://leanpub.com/composingsoftware" rel="noopener ugc nofollow" target="_blank"> <em class="mn">【排版软件】</em></a><em class="mn"/><a class="ae jm" href="http://pjabook.com" rel="noopener ugc nofollow" target="_blank"><em class="mn">【编程JavaScript应用】</em> </a> <em class="mn">。作为</em><a class="ae jm" href="https://ericelliottjs.com" rel="noopener ugc nofollow" target="_blank"><em class="mn">EricElliottJS.com</em></a><em class="mn">和</em><a class="ae jm" href="https://devanywhere.io" rel="noopener ugc nofollow" target="_blank"><em class="mn">devanywhere . io</em></a><em class="mn">的联合创始人，他教授开发者必备的软件开发技能。他为加密项目组建开发团队并为其提供建议，并为Adobe Systems、</em> <strong class="jp hi"> <em class="mn">、Zumba Fitness、</em> </strong> <em class="mn"> </em> <strong class="jp hi"> <em class="mn">《华尔街日报》、</em></strong><em class="mn"/><strong class="jp hi"><em class="mn">ESPN、</em></strong><em class="mn"/><strong class="jp hi"><em class="mn">BBC、</em> </strong> <em class="mn">以及包括</em> <strong class="jp hi">在内的顶级录音师提供软件体验</strong></p><p id="0b51" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">他和世界上最美丽的女人享受着与世隔绝的生活方式。</p></div></div>    
</body>
</html>