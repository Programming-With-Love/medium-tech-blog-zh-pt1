<html>
<head>
<title>The Raspberry Pi Super Computer at Java One 2022</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Java One 2022上的树莓Pi超级计算机</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/the-raspberry-pi-super-computer-in-devnucleus-at-cloud-world-2022-2d24208d1712?source=collection_archive---------0-----------------------#2022-10-18">https://medium.com/oracledevs/the-raspberry-pi-super-computer-in-devnucleus-at-cloud-world-2022-2d24208d1712?source=collection_archive---------0-----------------------#2022-10-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="a44b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">克里斯·本森</p><p id="9ae1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你愿意，你可以在GitHub <a class="ae jc" href="https://github.com/chrisbensen/chris-blogs/blob/main/%CF%80Cluster/CloudWorld2022/CloudWorld-DevNucleus2022.md" rel="noopener ugc nofollow" target="_blank">这里</a>阅读这篇博文。</p><p id="7e39" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">树莓派超级计算机最初是为2019年10月的甲骨文开放世界打造的。四个服务器机架中有1050个树莓Pi 3b+，配置在一个很大的方形盒子中，让人想起某部BBC电视剧中流行的英国警察盒子。快进到今天，树莓派超级电脑<em class="jd"> (Pi集群)</em>被送进了电子垃圾，一些零件被剥离，休眠了两年，直到今年5月，它找到了我的车库进行彻底检修。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/dc73221dd178660a8ac2fe83d196ac75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4veoQ9l84Oop2dOwStP4Yg.jpeg"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">Raspberry Pi Super Computer at Open World 2019</figcaption></figure><p id="b1d4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">关于1050年树莓派如何形成的时间历史，你可以阅读<a class="ae jc" rel="noopener" href="/chrisbensen/a-temporal-history-of-the-worlds-largest-raspberry-pi-cluster-that-we-know-of-4e4b1e214bdd">世界上最大的树莓派集群的时间历史</a>。</p><p id="3a8b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，甲骨文瑞士公司的Gerald Venzl向我介绍了12节点集群，然后我们与Stephen Chin一起讨论了一个大型集群。了解Pi群集如何在COVID锁定和加州火灾期间变成电子垃圾，以及Eric Sedlar如何拯救它，并最终将其存储在Oracle实验室。如果你觉得太长，请观看Gerald Venzl的原始构建视频<a class="ae jc" href="https://www.youtube.com/watch?v=KbVcRQQ9PNw" rel="noopener ugc nofollow" target="_blank">我们所知的世界上最大的树莓Pi集群</a>，这个<a class="ae jc" href="https://blogs.oracle.com/developers/post/building-the-worlds-largest-raspberry-pi-cluster" rel="noopener ugc nofollow" target="_blank">构建世界上最大的树莓Pi集群</a>，以及这个在我的车库中的<a class="ae jc" href="https://www.youtube.com/watch?v=ELvkg_88XSY" rel="noopener ugc nofollow" target="_blank"> Big Pi集群的视频——第一部分</a>。</p><p id="f9b5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">顺便说一句，如果你正在读这篇文章，你很有可能会成为一个伟大的杰出人物。什么是发光体？这是我们最近推出的开发小组，它将像您这样的开发人员与独家技术内容、免费赠品和社区联系起来，帮助您构建像这个集群一样酷的东西，<a class="ae jc" href="https://go.oracle.com/luminaries" rel="noopener ugc nofollow" target="_blank">成为当今的杰出人物</a>。</p><h2 id="ba98" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">恢复</h2><p id="7481" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">当CloudWorld宣布的时候，我们立即提议复活世界上最大的超级计算机<em class="jd">(据我们所知)</em>。谁不喜欢好的复活故事？这些提议大概是这样的:</p><p id="23a0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.作为Pi-Day的非功能性艺术品捐给计算机历史博物馆。<br/> 2。树莓派现在很值钱。从世界上最大的树莓派集群之一中抽彩抽取一块派，赢取免费的树莓派3B+。<br/> 3。我们有一个创造历史的机会。我们为CloudWorld修复了它，添加了风扇，使它不会过热，并将其作为“内部”和“边缘”设备运行，展示正在实验室中构建的技术。我们将包括运行在Pi集群上每个设备上的<a class="ae jc" href="https://www.oracle.com/java/graalvm/?source=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;SC=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;pcode=WWMK220210P00062" rel="noopener ugc nofollow" target="_blank"> GraalPython </a>、<a class="ae jc" href="https://www.oracle.com/java/?source=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;SC=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;pcode=WWMK220210P00062" rel="noopener ugc nofollow" target="_blank"> Java </a>和<a class="ae jc" href="https://www.oracle.com/linux/?source=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;SC=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;pcode=WWMK220210P00062" rel="noopener ugc nofollow" target="_blank"> Oracle Linux 9 </a>。所有这些都通过站点到站点<em class="jd">(滚动到底部查看相关说明)</em> VPN连接到<a class="ae jc" href="https://www.oracle.com/cloud/?source=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;SC=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;pcode=WWMK220210P00062" rel="noopener ugc nofollow" target="_blank"> Oracle云基础设施(OCI) </a>用于内部部署，并通过微服务、计算实例、自治数据库、服务网关和负载平衡器进行连接。AR可视化将是理想的，我们可以在上面运行一些很酷的东西——就像我们在Raspberry Pi迷你超级计算机上运行SETI@home时一样，这是一个84 Pi集群。我想到了建立一项服务的想法，这样世界上的任何人都可以向集群发送代码来运行工作负载，因为我们展示了我们的数字孪生AR/VR服务，并创建了博客和视频来激励开发人员和学生。我们可以向人们展示为什么开发人员和学生在学习和使用<a class="ae jc" href="https://www.oracle.com/cloud/free/?source=:ex:tb:::::RC_WWMK220309P00059:Medium_CBensen&amp;SC=:ex:tb:::::RC_WWMK220309P00059:Medium_CBensen&amp;pcode=WWMK220309P00059" rel="noopener ugc nofollow" target="_blank"> Oracle的免费层</a>时会有很多乐趣。另外，我们可以获得吉尼斯世界纪录。</p><p id="e4bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们选择了第三个选项，开始寻找新的实验室。我与上面提到的各种产品团队的领导，以及树莓Pi社区的领导，如<a class="ae jc" href="https://twitter.com/geerlingguy" rel="noopener ugc nofollow" target="_blank"> Jeff Geerling </a>和Eben Upton进行了交谈，并制定了一个计划。我不能告诉你整个计划，因为我们刚刚为它奠定了基础，但还有更多。这只是将Pi集群放入CloudWorld的DevNucleus的故事，并简单介绍了之后发生的事情。事实证明，吉尼斯世界纪录评审真的很贵！</p><p id="caaa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第一步是确定工作的预算和估算，看看是否可行。我们知道我们需要:</p><p id="0722" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.粉丝。很多粉丝。<br/> 2。更换任何丢失的零件。<br/> 3。测试一切。<br/> 4。编写新软件。</p><p id="14fe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">每个Pi网络都会启动。2019年，我在整个集群上运行了Oracle Linux 7，但它还能工作吗？我们是否拥有所有的源代码、MAC地址以及重做所需的一切？</p><p id="186c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第二步是获得一个在Pi集群上工作的地方。试着找一个有双扇门的地方，靠近货运电梯，有足够的电力和空间来工作，并且网络不是锁得很紧——不容易！我查看了甲骨文在世界各地的工厂。远程处理此类事情的后勤工作以及必须投入的所有体力工作意味着，只有满足某些要求，世界上任何地方都可以工作。我必须去那里旅行，安排好一切，并有十几个人来帮忙。我们将它设置为远程访问，但当事情不正常时，必须有人亲自到场。在与我那了不起的妻子享用了一顿美味的午餐后，我们认定我们的车库工作得最好，那就是<a class="ae jc" href="https://twitter.com/search?q=%23BigPiClusterInMyGarage&amp;src=typed_query" rel="noopener ugc nofollow" target="_blank"> #BigPiClusterInMyGarage </a>开始的地方。</p><h2 id="988f" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">添加风扇—冷却树莓酱</h2><p id="c4a0" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">一旦它被交付，我就开始工作，确保我们的预算是准确的，然后在订购替换零件(主要是风扇)的同时进行调整和测试。很多粉丝:准确地说是250个新粉丝。该群集最终有257个风扇，这还不包括每个交换机、服务器或电源中的风扇。这需要我拆卸整个集群，然后重新组装。并非每个螺栓都被拆除，但所有21个Pi 2U组都被拆卸，每5个Pi都被拆除和更换，这意味着必须打印250个带有风扇支架的新Pi球童。你可以在这里了解那个<a class="ae jc" href="https://www.thingiverse.com/thing:3958586" rel="noopener ugc nofollow" target="_blank">。</a><a class="ae jc" href="https://twitter.com/superpixels" rel="noopener ugc nofollow" target="_blank"> Victor Agreda </a>用他新买的Ultimaker S5打印了几十个球迷版的球童。这些风扇都需要电力，非常感谢<a class="ae jc" href="https://twitter.com/ThatEliGuyatOCI" rel="noopener ugc nofollow" target="_blank">伊莱·席林</a>创造了许多线束。此外，我们还添加了一些复活节彩蛋。我知道如果我把它告诉全世界，它就不算是一个复活节彩蛋，但我会在下面的颤音部分更详细地解释它(因为它太酷了，以至于什么都不说)。我有几个视频记录了一些工作，可以在<a class="ae jc" rel="noopener" href="/chrisbensen/a-temporal-history-of-the-worlds-largest-raspberry-pi-cluster-that-we-know-of-4e4b1e214bdd">中找到，这是世界上最大的树莓派星团</a>的时间历史。</p><h2 id="4b38" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">操作系统—最智能的操作系统</h2><p id="dc6d" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">我认为我们很多人在构建基础设施和硬件时低估了一个好的操作系统的价值，而Oracle Linux是最棒的。我在<a class="ae jc" rel="noopener" href="/chrisbensen/a-temporal-history-of-the-worlds-largest-raspberry-pi-cluster-that-we-know-of-4e4b1e214bdd">世界上最大的Raspberry Pi集群</a> <em class="jd">的时间历史中更详细地介绍了操作系统(我还在做一些其他的东西，这样你就可以在家里设置网络引导Pi)。</em>因为我们有大量工作要做，所以我们必须从Oracle Linux 7升级到Oracle Linux 9。我告诉你一个秘密:事情没那么简单。尽管如此，Oracle Linux团队的合作令人惊叹，他们为Pi集群设置了操作系统，确实值得称赞。去看看Oracle Linux 9，它值得使用或升级。有一些小问题，比如增加了安全层，这意味着默认情况下root帐户不再拥有SSH访问权限。</p><p id="f55e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里值得一提的是我们如何引导Pi。集群中的每个Pi都通过服务器上的一个只读NFS挂载进行网络引导，我们添加了一个systemd服务，以便在服务器或Pi引导时运行bash脚本。这使得配置我们运行的内容几乎毫不费力。</p><h2 id="2551" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">软件和云服务— GraalVM在客户端或云中快速运行</h2><p id="0e05" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">所有的软件都是开源的，可以在我们的DevRel GitHub仓库中找到。有些东西来自实验室，甚至不能作为技术预览<em class="jd">(我试过，他们只是还没准备好)</em>所以这些不包括在内。请注意，大部分代码都是快速编写的。你发现的东西可能没什么意义，所以让我解释一下。</p><p id="bddf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，是集群上的软件。服务器在<a class="ae jc" href="https://www.oracle.com/java/graalvm/?source=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;SC=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;pcode=WWMK220210P00062" rel="noopener ugc nofollow" target="_blank"> GraalVM </a>之上运行由GraalPython组成的Docker容器。那个<strong class="ig hi"> Dockerfile </strong>正在持续改进中，所以我现在还不建议复制它。我已经提供了一些bug报告，但是一旦Graal环境变量和CTRL+C开始工作<em class="jd">(并且可能为GraalPython创建了一个新的映像)</em>您就会想要深入研究了。同时，要知道这是一种方法。我看到在GraalVM 下运行纯Python代码时，性能提升了<a class="ae jc" href="https://www.graalvm.org/python/" rel="noopener ugc nofollow" target="_blank">8倍。真是令人印象深刻！</a></p><p id="a9dd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">集群上的每个设备都运行一个web服务。服务器广播UDP消息及其IP地址和端口，供任何设备侦听，并与服务器通信以进行自动发现。这是前几年新增的，当时服务器的IP地址被放入环境变量中。IP地址不会改变，所以我们可以对它进行硬编码，但有两个问题:任何从事这项工作的人都需要在他们的桌面上运行一个测试系统，并在他们的桌面上运行一个Pi或几个Pi的模拟，一旦您执行了sudo，环境变量就会丢失。这实际上解决了很多问题！一旦Pi启动，它就运行它的web服务器，监听UDP消息，向服务器注册它的IP地址和MAC地址，并监听工作。每隔一段时间，服务器将向每个Pi发送一个ping，作为健康检查，以确保它们应该在可用Pi的列表中。</p><p id="0e88" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">每五秒钟，每个Pi发送其所有数据<em class="jd"> (CPU、内存、温度等)。)</em>通过本地ORDS支持到自治数据库上的REST端点。文件可以在这里<a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/autonomous-database/adbsa/ords-autonomous-database.html#GUID-E2E921FF-2D80-4E32-9660-28506D10BADB" rel="noopener ugc nofollow" target="_blank">找到。我写了一些代码，如果Pi没有发送数据，下次它会等待更长的时间，最多60秒。事实证明，这是一座自治数据库可以轻松处理的数据山。我尝试了其他几个不应该被命名的数据库，只能说他们不能处理它，有时会导致超过五秒钟的延迟。</a></p><h2 id="4934" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">带AR/VR的数字双胞胎—可视化您的数据</h2><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ku"><img src="../Images/9a6a2f04a51ef710693ba3d0e5ea5c41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sv542XDZr-bURwmGIqKX5g.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">Raspberry Pi Super Computer Rendering</figcaption></figure><p id="4163" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我创建了一个相当详细的Pi星团的3D模型，可以在<a class="ae jc" href="https://github.com/oracle-devrel/picluster/tree/main/models" rel="noopener ugc nofollow" target="_blank">这里</a>找到，并在你最喜欢的3D程序中打开。我们的AR/VR和云专家<a class="ae jc" href="https://twitter.com/Vojtech_WW" rel="noopener ugc nofollow" target="_blank"> Wojciech Pluta </a>、<a class="ae jc" href="https://www.linkedin.com/in/victormartindeveloper" rel="noopener ugc nofollow" target="_blank"> Victor Martin </a>、<a class="ae jc" href="https://twitter.com/bogdanfarca" rel="noopener ugc nofollow" target="_blank">波格丹一世·法卡</a>和<a class="ae jc" href="https://www.linkedin.com/in/sjcoggins/" rel="noopener ugc nofollow" target="_blank">斯图尔特·科金斯</a>着手构建一些令人惊叹的AR和VR体验。他们调整数据库，编写APEX应用程序，并运行socket.io进行流式传输。他们利用了一个名为<a class="ae jc" href="https://docs.oracle.com/en-us/iaas/Content/ContEng/Concepts/contengoverview.htm" rel="noopener ugc nofollow" target="_blank">OCI·奥克</a>的Kubernettes集群，因此3D体验可以在不倒下的情况下扩展，这意味着任何人都可以在他们的客厅放一个Pi集群的数字复制品。我们有用于AR的iPad和打印的QR码，因此iPad可以以毫米级的精度跟踪集群，使与会者能够交互式地查看集群的情况。该团队还构建了一个Meta VR版本，其细节将很快揭晓。我的车库没有足够的电力来运行整个集群，所以我们将在CloudWorld开门之前集成并测试它。它可能成功，也可能失败。无论发生什么，都会是一个好故事！当我们在AR/VR Digital Twin上写了一些东西时，我会在这里添加一个链接。</p><h2 id="5077" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">OCI服务—每个项目的核心都是云基础设施</h2><p id="e2f9" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">在我的车库里，Pi集群被设置为“本地”服务器。我在我的Ubiquity Dream Machine Pro上创建了一个隔离的子网，使用一个<a class="ae jc" href="https://www.oracle.com/security/cloud-security/bastion/?source=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;SC=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;pcode=WWMK220210P00062" rel="noopener ugc nofollow" target="_blank"> Bastion </a>配置了一个到OCI的站点到站点VPN，并使用了一个具有两个网络接口<em class="jd">(一个用于Pi集群子网，一个用于Pi集群)</em>的本地跳转箱。因此，Pi群集对外界来说就像一个IP地址。出现，插上网络电源，你就好了。我希望设置也这么简单，我不必测试所有东西——确保电缆不会弹离位置——但我们只能说它很简单，因为它听起来更有趣。</p><p id="6b86" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们不会在CloudWorld控制网络，所以Pi集群是一个“边缘设备”。它使用云服务，如<a class="ae jc" href="https://docs.oracle.com/en-us/iaas/Content/Network/Tasks/servicegateway.htm" rel="noopener ugc nofollow" target="_blank">服务网关</a>、<a class="ae jc" href="https://docs.oracle.com/en-us/iaas/Content/Balance/Concepts/balanceoverview.htm" rel="noopener ugc nofollow" target="_blank">负载均衡器</a>和<a class="ae jc" href="https://docs.oracle.com/en-us/iaas/Content/GSG/Concepts/managing_your_domains.htm" rel="noopener ugc nofollow" target="_blank">域管理</a>。是的，我们有一个域名。我将在下一节讨论这个问题。</p><p id="c3be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">网络看起来像这样:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/25b723128848aad95b85785be474b473.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LT2Fs_Gl0lb8LXpAaXL8DA.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">Pi Cluster Demonstration Network Diagram</figcaption></figure><p id="5050" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您对此有任何疑问，请前往甲骨文面向开发者的公共<a class="ae jc" href="https://bit.ly/odevrel_slack" rel="noopener ugc nofollow" target="_blank"> Slack频道</a>。问任何你想问的问题。如何设置，使用什么服务。你会在那里找到你的答案！</p><h2 id="cc29" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">物联网—使用小型廉价微控制器的特定轻量级任务</h2><p id="2ded" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">我们还有一对Arduinos在集群上运行。第一个Arduino是带有以太网帽子的Arduino Mega。原代码可以在<a class="ae jc" href="https://github.com/oracle-devrel/picluster/tree/main/source/arduino/ServerSwitch" rel="noopener ugc nofollow" target="_blank">这里</a>找到。它运行一个web服务并打开两个螺线管来远程访问服务器上的物理复位和电源按钮。与资源库相比，我对软件做了一点改动，还没有发布，所以我保留了这个旧版本。我没有发布的版本会自动注册，并等待一个简单的启动命令，这时一个开发人员会进入堡垒。</p><p id="f3f2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第二个Arduino是相同的硬件，但运行一个监听JSON有效载荷的REST服务器，并连接到警察局顶部灯中的十几个<a class="ae jc" href="https://www.adafruit.com/product/1426" rel="noopener ugc nofollow" target="_blank">新像素</a>。</p><h2 id="4857" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">一种为Pi集群设计的定制编程语言</h2><p id="1d01" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">我们在OCI上托管域<a class="ae jc" href="https://warble.withoracle.cloud/code" rel="noopener ugc nofollow" target="_blank">https://whirl . with Oracle . cloud</a>，由<a class="ae jc" href="https://docs.oracle.com/en-us/iaas/Content/GSG/Concepts/managing_your_domains.htm" rel="noopener ugc nofollow" target="_blank">域管理</a>、<a class="ae jc" href="https://docs.oracle.com/en-us/iaas/Content/Balance/Concepts/balanceoverview.htm" rel="noopener ugc nofollow" target="_blank">负载平衡器</a>和<a class="ae jc" href="https://www.oracle.com/cloud/compute/?source=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;SC=:ex:tb:::::RC_WWMK220210P00062:Medium_CBensen_Pi_DevNucleaus&amp;pcode=WWMK220210P00062" rel="noopener ugc nofollow" target="_blank">计算实例</a>提供支持。compute实例运行的软件与Pi集群上运行的软件相同:一个带有GraalPython的Docker容器和一个web服务。这还没有准备好在黄金时间播出，但请在10月18日至20日在这里或Twitter上查看，因为它将在CloudWorld期间直播，我认为会很有趣。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es kv"><img src="../Images/eda60c70ab0b622d342f77df613159da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YxAmPwwUU5Hr0o8jHb4GgQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx">Warble Logo</figcaption></figure><p id="02ce" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们已经为Twitter设计了一个运行在Pi集群上的编程语言，叫做<a class="ae jc" href="https://github.com/oracle-devrel/picluster/tree/main/source/warble" rel="noopener ugc nofollow" target="_blank">颤声</a>。whirling不是一种全功能的编程语言，我走了很多捷径。它使用尽可能少的字符，这样你就可以在Twitter上发布一段颤音，并在Pi集群上运行。我有一个运行在计算机实例上的Python脚本，使用Twitter API搜索标签<strong class="ig hi"> #pi </strong>。如果下一个字符是一个左花括号，最后一个字符是一个右花括号，那么我们有一个颤音，它被存储在数据库中。例如:</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="cef1" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{PRINT(“hello cluster”)}<br/>&lt; hello cluster</span></pre><p id="0616" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当服务器有一些空闲周期时，它从数据库中获取一批颤音，找到一个CPU利用率低于30%的Pi，并将颤音发送给该Pi进行处理。颤声是用Python写的，将颤声转换成Python，然后执行它们。目前它使用Python3，但我们有一个用GraalPython编写的版本，使用了一些尖端技术，还没有向公众开放。现在，我们在甲骨文实验室的研究工程师罗德里戈·布鲁诺和T2正在准备在集群上运行。目前，通过一个易于设置的REST API将结果从颤声发布到一个自治数据库。<a class="ae jc" href="https://www.linkedin.com/in/sjcoggins/" rel="noopener ugc nofollow" target="_blank">斯图尔特·科金斯</a>和<a class="ae jc" href="https://twitter.com/thatjeffsmith" rel="noopener ugc nofollow" target="_blank">杰夫·史密斯</a>已经足够亲切地帮助这一点，并确保它坚如磐石。我们将有一个<a class="ae jc" href="https://apex.oracle.com/en/" rel="noopener ugc nofollow" target="_blank"> APEX </a>应用程序，将显示鸣鸟和它们的结果，我希望我们可以得到一个自定义可视化的领导板。</p><p id="d9d5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">看看谁能在世界上最大的树莓派集群上计算出最多位数的圆周率，这不是很酷吗？</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="9a8b" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{PRINT(2*ROUND(ACOS(0.0),3))}<br/>&lt; 3.142</span></pre><p id="6dbb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">已经够近了。</p><p id="12b9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Twitter将会非常有趣，尽管它限制了API，这也是我们拥有托管域的原因。我将提供一个REST端点来发布颤音。也许有人会想出如何用<a class="ae jc" href="https://en.wikipedia.org/wiki/Bailey–Borwein–Plouffe_formula" rel="noopener ugc nofollow" target="_blank">Bailey–borw ein–Plouffe _ formula</a>用颤声或其他方式计算圆周率。</p><p id="94fa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我不打算写语法，但我会给一些例子。</p><p id="cb50" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">颤声支持变量:</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="b6c8" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{x=0PRINT(x)}<br/>&lt; 0</span></pre><p id="6206" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">颤声可以处理复杂的表情:</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="18d0" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{x=1/16.0²*(4.0/(8*k+1)-2.0/(8*k+4)-1.0/(8*k+5)-1.0/(8*k+6)}<br/>&lt;</span></pre><p id="b0c0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">While循环:</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="7da6" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{i=0;WHILE(i&lt;10){PRINT(i);i++}}<br/>&lt; 0<br/>&lt; 1<br/>&lt; 2<br/>&lt; 3<br/>&lt; 4<br/>&lt; 5<br/>&lt; 6<br/>&lt; 7<br/>&lt; 8<br/>&lt; 9</span></pre><p id="ebba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于循环:</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="73b5" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{FOR(i=0;i&lt;10;i++){PRINT(i)}}<br/>&lt; 0<br/>&lt; 1<br/>&lt; 2<br/>&lt; 3<br/>&lt; 4<br/>&lt; 5<br/>&lt; 6<br/>&lt; 7<br/>&lt; 8<br/>&lt; 9</span></pre><p id="73e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我公开了大多数数学函数以及<strong class="ig hi"> SETPRECISION(x) </strong>。它并不缺少角色，但这很好。</p><p id="c693" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">另外，您可以保存值并再次加载它们。它们是用户特定的:</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="1a0b" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{SAVE(“pi”,1)}<br/>&lt;</span></pre><p id="4596" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后继续加载:</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="3154" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{x=LOAD(“pi”);x++;SAVE(“pi”,x);PRINT(x)}<br/>&lt; 2</span></pre><p id="049c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，复活节彩蛋。颤声可以播放声音。是的，这是另一个连接到集群的物联网设备，但它是一个带放大器的Pi！不幸的是，只有当你站在它面前时，你才能听到它。让你想来拉斯维加斯参加云世界，不是吗？</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="c0a9" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{PLAYSOUND(”<a class="ae jc" href="http://downloads.bbc.co.uk/doctorwho/sounds/tardis.mp3\\\" rel="noopener ugc nofollow" target="_blank">http://downloads.bbc.co.uk/doctorwho/sounds/tardis.mp3</a>");}<br/>&lt;</span></pre><p id="7ddd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">还有灯。这会将第一个灯变成红色:</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="48bb" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{LIGHTS(0,255,0,0)}<br/>&lt;</span></pre><p id="ce2c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你想把最后一个灯变成绿色，你应该这样做:</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="068a" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{LIGHTS(23,0,255,0)}<br/>&lt;</span></pre><p id="6074" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你想改变灯光的颜色，请执行以下操作:</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="8820" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{LIGHTS(0,0,255,0);SLEEP(20);LIGHTS(0,0,255,0)}<br/>&lt;</span></pre><p id="61ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">或者结合其中的一些:</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="4f00" class="ju jv hh kx b fi lb lc l ld le">&gt; #pi{FOR(i=0;i&lt;24;i++){LIGHTS(i,0,255,0)}SLEEP(20);FOR(i=0;i&lt;24;i++){LIGHTS(i,0,0,255)}}<br/>&lt;</span></pre><h2 id="c0c9" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">使用OCI设置站点到站点VPN</h2><p id="2c74" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">在无处不在的梦想机器Pro上，在<a class="ae jc" href="https://www.linkedin.com/in/timothy-clegg" rel="noopener ugc nofollow" target="_blank">蒂姆·克莱格</a>的帮助下，我创建了一个新的子网。这是我们遵循的步骤的概要。我不打算提供具体的屏幕截图或视频，因为无处不在和Oracle Cloud上的选项会发生变化。相反，这里有一些你需要和应该做的重点:</p><p id="7678" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在网络下创建一个新的网络，我选择“pi”。<br/> VLAN ID: 3 <br/>网络类型:标准</p><p id="a550" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建站点到站点VPN <br/>网络名称:pivpn <br/>预共享密钥:******************* <br/>服务器地址:&lt;路由器的IP地址&gt;(默认应该可以)<br/>远程网关/子网:10.0.0.0/24 <br/>远程IP地址:&lt;远程VPN的IP地址&gt; <br/>高级:手动<br/> IPsec简档:自定义<br/>路由距离:30 <br/></p><p id="391c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我创建了三个防火墙规则:</p><p id="412c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.pi模块192.168.3.1(网关)</p><p id="1f69" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">类型:局域网本地<br/>动作:丢弃<br/>源，源类型:网络<br/>源，网络:pi <br/>目的地，源类型:网络<br/>目的地，网络:pi <br/>目的地，网络类型:网关IP地址</p><p id="42ef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.默认接受pi</p><p id="2455" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">类型:LAN In <br/>动作:接受<br/>源，源类型:网络<br/>源，网络:默认<br/>目的地，源类型:网络<br/>目的地，网络:pi</p><p id="3d71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.pi块至默认值</p><p id="0998" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">类型:LAN Out <br/>动作:丢弃<br/>源，源类型:网络<br/>目的地，网络:pi <br/>目的地，源类型:网络<br/>源，网络:默认<br/>高级:手动<br/>检查匹配状态新<br/>检查匹配状态无效</p><p id="b9f3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.在OCI转到网络和站点到站点VPN <br/>创建IPSec连接。<br/>给它起个名字。<br/>你会想要这个来获取你的公共IP地址。</p><pre class="jf jg jh ji fd kw kx ky kz aw la bi"><span id="d0e5" class="ju jv hh kx b fi lb lc l ld le">dig -4 TXT +short o-o.myaddr.l.google.com <a class="ae jc" href="http://twitter.com/ns1" rel="noopener ugc nofollow" target="_blank">@ns1</a>.google.com</span></pre><p id="7d83" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">输入它。</p><p id="5930" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你需要创建两个隧道，所以我设置两个都指向同一个VPN，因为OCI需要两个，我只在我的网络上暴露了一个。您将把它添加到VPN。</p><p id="d531" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.设置一个动态路由网关<br/> 6。设置一个VCN，添加一个CIDR作为您的本地子网的入口规则，例如我的是192.168.3.0/24。</p><h2 id="7eb9" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">未来</h2><p id="e47c" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">在Oracle CloudWorld上完成了DevNucleus的测试后，Pi集群将前往Oracle实验室，在那里……好吧，接下来的部分暂时是一个秘密。潜在的用途包括:<br/> 1。运行GraalVM和Java的附加测试<br/> 2。边缘计算项目<br/> 3。机器人&amp;并行处理(即神经网络)<br/> 5。开发商向我们建议的活动</p><p id="3341" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">随着2023年圆周率日即将到来，你一定会想继续关注这项不可思议的技术的下一阶段发展。谁知道呢？一些Pi甚至会从集群中出来，进入你的手中。</p><p id="3a2f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我想感谢参与这个项目的每一个人。阅读<a class="ae jc" rel="noopener" href="/chrisbensen/a-temporal-history-of-the-worlds-largest-raspberry-pi-cluster-that-we-know-of-4e4b1e214bdd">世界上最大的树莓派集群</a>的时间历史，了解这个令人疯狂的项目是如何产生的。</p></div></div>    
</body>
</html>