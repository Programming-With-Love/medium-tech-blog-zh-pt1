<html>
<head>
<title>Advanced Usage of WorkManager in multi-process apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">WorkManager在多进程应用中的高级用法</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/advanced-usage-of-workmanager-in-multi-process-apps-4ea2d7e75501?source=collection_archive---------8-----------------------#2021-06-29">https://medium.com/androiddevelopers/advanced-usage-of-workmanager-in-multi-process-apps-4ea2d7e75501?source=collection_archive---------8-----------------------#2021-06-29</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/b7d63d650173c9bb576b591ae7594270.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GN5zwv5GsI70OJ1TlD1SsQ.png"/></div></div></figure><div class=""/><p id="00aa" class="pw-post-body-paragraph iq ir hs is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">在<a class="ae jo" rel="noopener" href="/androiddevelopers/workmanager-2-5-0-stable-released-701b668cd064"> WorkManager 2.5 </a>中，我们让多进程应用更容易接触到在指定进程中运行的特定工作管理器实例。</p><p id="e3f8" class="pw-post-body-paragraph iq ir hs is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">现在，在WorkManager 2.6中，我们更进了一步，增加了对worker在任何进程中运行的支持，并允许worker绑定到特定的进程。多进程支持对于需要在多个进程中运行工作者的应用程序特别有用。大多数应用程序在单个进程中运行良好。但是那些需要不止一个流程的企业过去很难管理流程之间的工作。直到现在！</p><p id="4e4a" class="pw-post-body-paragraph iq ir hs is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">从WorkManager 2.6开始，您可以使用<a class="ae jo" href="https://developer.android.com/topic/libraries/architecture/workmanager/advanced/listenableworker#remotelistenableworker" rel="noopener ugc nofollow" target="_blank"> RemoteListenableWorker </a>或<a class="ae jo" href="https://developer.android.com/topic/libraries/architecture/workmanager/advanced/coroutineworker#remotecoroutineworker" rel="noopener ugc nofollow" target="_blank"> RemoteCoroutineWorker </a>将一个工人绑定到一个特定的进程。对于在Kotlin中实现的Worker，应该使用RemoteCoroutineWorker。否则，您应该使用RemoteListenableWorker。在本文中，我们将演示一个用Kotlin实现的Worker，但是对于类似的Java实现，请查看下面链接的示例。</p><p id="e678" class="pw-post-body-paragraph iq ir hs is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">可以像<a class="ae jo" href="https://developer.android.com/topic/libraries/architecture/workmanager/advanced/coroutineworker" rel="noopener ugc nofollow" target="_blank">协同工作器</a>一样实现RemoteCoroutineWorker。但是，您没有覆盖“doWork ”,而是覆盖了“do <strong class="is ht"> Remote </strong> Work ”,然后绑定到一个指定的进程，在构建工作请求时，提供两个额外的参数作为输入数据的一部分:ARGUMENT_CLASS_NAME和ARGUMENT_PACKAGE_NAME:</p><figure class="jp jq jr js fd hj"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="3e83" class="pw-post-body-paragraph iq ir hs is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">对于每个RemoteWorkerService，您还需要在AndroidManifest中添加服务定义，如下所示:</p><figure class="jp jq jr js fd hj"><div class="bz dy l di"><div class="jt ju l"/></div></figure><p id="dc84" class="pw-post-body-paragraph iq ir hs is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">要查看这些新功能，请查看新的<a class="ae jo" href="https://github.com/android/architecture-components-samples/tree/main/WorkManagerMultiprocessSample" rel="noopener ugc nofollow" target="_blank">工作管理器多进程示例</a>，它同时利用了RemoteCoroutineWorker和RemoteListenableWorker。</p><p id="fd3d" class="pw-post-body-paragraph iq ir hs is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">您还可以在我们的发行说明<a class="ae jo" href="https://developer.android.com/jetpack/androidx/releases/work#version_260_2" rel="noopener ugc nofollow" target="_blank">这里</a>中看到我们在WorkManager 2.6中所做的更改和改进的详细列表。</p><p id="2195" class="pw-post-body-paragraph iq ir hs is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">最后，如果您有任何与工作管理器相关的功能请求或问题，请随时在我们的公共跟踪器中<a class="ae jo" href="https://issuetracker.google.com/issues/new?component=409906" rel="noopener ugc nofollow" target="_blank">提交问题。</a></p></div></div>    
</body>
</html>