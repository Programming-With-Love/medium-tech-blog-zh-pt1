# map structâ€”â€”è®©æˆ‘æ¥ä¸ºæ‚¨ç¼–å†™è¿™æ®µå†—é•¿çš„ä»£ç å§ï¼

> åŸæ–‡ï¼š<https://medium.com/globant/mapstruct-let-me-write-the-tedious-piece-of-code-for-you-d3c27f667314?source=collection_archive---------0----------------------->

![](img/723b74708f911b37fcd6dee9c6fe67a2.png)

Photo by [J. Kelly Brito](https://unsplash.com/@heykellybrito?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

A ä½ è¿˜åœ¨ä¸ºå¤šå±‚æ¶æ„åº”ç”¨ç¨‹åºä¸­çš„ bean mapping ç¼–å†™æ ·æ¿ä»£ç å—ï¼Ÿ

å¦‚æœæ˜¯è¿™æ ·ï¼Œæ¥ä¸‹æ¥çš„ 10 åˆ†é’Ÿå°†ä¼šç»™ä½ çš„ç¼–ç é£æ ¼å¸¦æ¥æ¬¢ä¹ã€‚

# ä»‹ç»

è®©æˆ‘ä»‹ç»ä¸€ä¸‹ [**MapStruct**](https://mapstruct.org/documentation/stable/reference/html/) â€”ä¸€ä¸ªå¼ºå¤§çš„ Java æ³¨é‡Šå¤„ç†å™¨ï¼Œé€šè¿‡ä¸ºæˆ‘ä»¬ç¼–å†™ç±»å‹å®‰å…¨çš„ bean æ˜ å°„ç±»æ¥ç®€åŒ–æˆ‘ä»¬çš„ç”Ÿæ´»ã€‚

ä¸æ‰‹åŠ¨ç¼–å†™æ˜ å°„ä»£ç ç›¸æ¯”ï¼ŒMapStruct é€šè¿‡ç”Ÿæˆåœ¨ç¼–è¯‘æ—¶æ‰‹åŠ¨ç¼–å†™çš„å†—é•¿ä¸”å®¹æ˜“å‡ºé”™çš„ä»£ç æ¥èŠ‚çœæ—¶é—´ã€‚å®ƒä½¿ç”¨åˆç†çš„ç¼ºçœå€¼ï¼Œä½†æ˜¯å½“æ¶‰åŠåˆ°æ ¹æ®æˆ‘ä»¬çš„ä¸šåŠ¡éœ€æ±‚é…ç½®æˆ–å®ç°ç‰¹æ®Šè¡Œä¸ºæ—¶ï¼Œå®ƒå°±ä¸åœ¨æˆ‘ä»¬çš„è€ƒè™‘èŒƒå›´å†…äº†ã€‚

æ‚¨ä¸€å®šåœ¨æƒ³è¿™ä¸ªé­”æœ¯æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Œæ‰€ä»¥ä¸å†å¤šè¯´ï¼Œè®©æˆ‘ä»¬ä» Mapstruct å¼€å§‹å§ã€‚

# è®¾ç½®

## ä¾èµ–æ€§-

1.  *å¦‚æœæ‚¨ä½¿ç”¨****Maven****ï¼Œè¯·å°†ä»¥ä¸‹ä¾èµ–é¡¹æ·»åŠ åˆ°æ‚¨çš„* ***POM.xml***

![](img/08da16e78b83a7c0e83de79a4485c4d2.png)

ç”¨`maven-compile-plugin`é…ç½®ï¼Œç”¨ maven å‘½ä»¤ç”Ÿæˆå®ç°ã€‚

![](img/6b7d2476ef75f38c88ee1e1ad25a429e.png)

> **æç¤º** â€”å¦‚æœä¹Ÿä½¿ç”¨ *Lombok* ï¼Œåœ¨ Mapstruct ä¹‹å‰å£°æ˜ Lombok çš„è·¯å¾„å®šä¹‰ï¼Œè®© Lombok åœ¨ Mapstruct ä¹‹å‰ç”Ÿæˆå®ç°ï¼Œè¿™æ · Mapstruct å°±å¯ä»¥ä½¿ç”¨ Lombok ç”Ÿæˆçš„æ–¹æ³•ã€‚

2.*å¦‚æœæ‚¨ä½¿ç”¨****Gradle****ï¼Œè¯·å°†ä»¥ä¸‹ä¾èµ–é¡¹æ·»åŠ åˆ°æ‚¨çš„****build . Gradle***

![](img/e175ea1e219458dbcf6e336ab2f1f862.png)

3.å¦‚æœä½¿ç”¨ *IDE* ï¼Œä¸è¦å¿˜è®°æ‰§è¡Œä»¥ä¸‹åŠ¨ä½œ-

a) *å¯ç”¨æ³¨é‡Šå¤„ç†å™¨*(é¦–é€‰é¡¹/è®¾ç½®- >æ„å»ºæ‰§è¡Œéƒ¨ç½²- >ç¼–è¯‘å™¨- >æ³¨é‡Šå¤„ç†å™¨)

b)å°† MapStruct æ’ä»¶å®‰è£…åˆ°æ‚¨çš„ IDE ä¸­-

*   è¦åœ¨ Eclipse ä¸­å®‰è£… MapStruct æ’ä»¶ï¼Œ [**ç‚¹å‡»æˆ‘**](https://marketplace.eclipse.org/content/mapstruct-eclipse-plugin)
*   è¦åœ¨ IntelliJ ä¸­å®‰è£… MapStruct æ’ä»¶ï¼Œ [**ç‚¹å‡»æˆ‘**](https://plugins.jetbrains.com/plugin/10036-mapstruct-support)

# å±¥è¡Œ

ä¸ºäº†è®©è¿™ç§ç¥å¥‡çš„äº‹æƒ…å‘ç”Ÿï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»ºä¸€ä¸ªæ¥å£ï¼Œç”¨ ***@Mapper*** æ³¨é‡Š *MapStruct* å¹¶å£°æ˜ä¸€äº›æ–¹æ³•ã€‚

è®©æˆ‘ä»¬ä¸¾ä¸ªä¾‹å­:

å‡è®¾æˆ‘ä»¬æœ‰ä¸¤ä¸ª POJO ç±»â€”â€”*Customer.java*å’Œ*å®¢æˆ·åˆ°*ã€‚javaï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨å®ƒä»¬ä¹‹é—´æ‰§è¡Œå­—æ®µæ˜ å°„ã€‚

***Customer.java***

*![](img/bdb10fdda5793c61737dc0a734404e66.png)*

*ã€CustomerDto.javaã€‘T5**T6***

*![](img/b6749b1a3b6b5116d574dd63b5f51975.png)*

*è¦åœ¨ä¸Šè¿°ä¸¤ä¸ª POJOs ä¹‹é—´å»ºç«‹æ˜ å°„é€»è¾‘ï¼Œæˆ‘ä»¬åªéœ€ç¼–å†™å¦‚ä¸‹æ¥å£*

****CustomerMapper.java****

*![](img/4944c20a426c7728846f2ca257e04c1c.png)*

> ****@ Mapper****â€”è¯¥æ³¨é‡Šå°†å‘Šè¯‰ MapStruct ç”Ÿæˆæ¥å£çš„å®ç°ç±»ã€‚**

***MapStruct* å°†é€šè¿‡æŸ¥çœ‹å£°æ˜æ–¹æ³•çš„è¿”å›ç±»å‹å’Œå‚æ•°ç±»å‹æ¥æ¨æ–­ç”¨æˆ·çš„æ„å›¾ï¼Œå¹¶å°†ä¸ºå…¶å®ç°é€»è¾‘ã€‚**

**ç¼–è¯‘å®Œä¸Šé¢çš„ä»£ç åï¼Œä½ ä¼šå¾—åˆ°ä¸‹é¢ç”± *MapStruct* è‡ªåŠ¨ç”Ÿæˆçš„ç±»**

*****CustomerMapperImpl.java*****

**![](img/c20f37787751acf035ccdd007c64a722.png)**

**åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ° MapStruct é€šè¿‡éµå¾ªæ‰€æœ‰ Java æœ€ä½³å®è·µä¸ºæˆ‘ä»¬çš„ Mapper æ¥å£ç”Ÿæˆäº†å®ç°ç±»ã€‚è¿™åªæ˜¯ POJO ä¸­ä¸¤ä¸ªå­—æ®µçš„æƒ…å†µï¼Œä½†æ˜¯è€ƒè™‘ä¸€ä¸‹ç°å®ç”Ÿæ´»ä¸­çš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥æœ‰å¤§é‡çš„å­—æ®µå’Œ POJOï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒMapstruct å¯ä»¥éå¸¸æ–¹ä¾¿åœ°ä¸ºæˆ‘ä»¬ç”Ÿæˆæ˜ å°„ã€‚**

**è¿™å¤ªé…·äº†ï¼Œå¯¹å§ï¼ğŸ˜**

**![](img/544383cf744ff08747a6fd66637d9017.png)**

**æˆ‘ä»¬å¯ä»¥åœ¨ä»¥ä¸‹ä½ç½®æ‰¾åˆ°ç”Ÿæˆçš„ç±»:**

*   **å¦‚æœä½¿ç”¨ maven - *ç›®æ ‡>ç”Ÿæˆ-æº>æ³¨é‡Š***
*   **å¦‚æœä½¿ç”¨ gradle - *æ„å»º>ç”Ÿæˆ> annotationProcessor***

> ***ä¸Šé¢çš„åœºæ™¯åªæ˜¯å­—æ®µåç›¸åŒçš„åŸºæœ¬åœºæ™¯ï¼Œä½†æ˜¯æˆ‘çŸ¥é“ç”Ÿæ´»å¹¶ä¸å®¹æ˜“ï¼Œæ‰€ä»¥ç°åœ¨è®©æˆ‘ä»¬ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°å°è¯•ä¸€äº›çœŸå®çš„åœºæ™¯:***

## ****æ˜ å°„å…·æœ‰ä¸åŒå­—æ®µåçš„å­—æ®µ:****

**æ–°çš„ POJOs å°†ä¼šæ˜¯-**

**![](img/bb014a40192b9a7fe3da8b5cceb38050.png)****![](img/c2cd93b90c5628c60115cf6d6bd2375f.png)**

**è¦ç”¨ä¸åŒçš„åç§°æ˜ å°„è¿™äº›å­—æ®µï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯å‘Šè¯‰ *MapStruct* å“ªä¸ªå­—æ®µæ˜ å°„åˆ°å“ªä¸ªå­—æ®µã€‚é€šè¿‡ä¸€ä¸ªéå¸¸ç®€å•çš„æ³¨é‡Š ***@Mapping*** ï¼Œæ–°çš„ Mapper ç•Œé¢å°†å¦‚ä¸‹æ‰€ç¤º-**

**![](img/11fa19a9a366f52f75ff3ee04e54bac9.png)**

> ****åŠ åˆ†-****
> 
> **å½“æœ‰äººæ›´æ”¹äº†å…¶ä¸­ä¸€ä¸ª POJOs ä¸­çš„å­—æ®µåç§°ï¼Œä½†å¿˜è®°åœ¨ Mapper æ¥å£ä¸­æ›´æ–°è¯¥åç§°æ—¶ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿï¼Ÿï¼Ÿ**
> 
> **ä¼šç»™å‡ºç¼–è¯‘æ—¶é”™è¯¯å—ï¼Ÿï¼Ÿï¼Ÿ**
> 
> **ç­”æ¡ˆæ˜¯å¦å®šçš„ï¼Œä½†æ˜¯å®ƒä¼šåœ¨è¿è¡Œæ—¶æ˜¾ç¤ºä¸€äº›ä¸å¸Œæœ›çš„è¡Œä¸ºï¼Œå› ä¸ºä¸ä¼šä¸ºè¯¥å­—æ®µæ‰§è¡Œæ˜ å°„ã€‚**

**ä¸ºäº†åœ¨ç¼–è¯‘æ—¶å‘ç°è¿™ä¸ªé”™è¯¯ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹é…ç½®æˆ‘ä»¬çš„æ˜ å°„å™¨**

**![](img/ad39fd1ce33deb9597b2691a92bb26e7.png)**

****æ³¨æ„**:ä»…å½“æ‚¨ç¡®å®šæƒ³è¦æ˜ å°„ POJO ä¸­çš„æ‰€æœ‰å­—æ®µæ—¶ï¼Œæ‰ä½¿ç”¨æ­¤é…ç½®ï¼Œå¦åˆ™æ‚¨å¯ä»¥å°† *ReportingPolicy* ä¿ç•™ä¸º *IGNORE* æˆ– *WARN* ä»¥é¿å…ç¼–è¯‘é”™è¯¯ã€‚**

## **ç”¨åµŒå¥— bean æ˜ å°„**bean:****

**å‡è®¾æˆ‘ä»¬åˆ†åˆ«æœ‰*Order.java*å’Œ*OrderDto.java*åœ¨*Customer.java*å’Œ*CustomerDto.java*ä¹‹å†…ï¼Œå¦‚ä¸‹-**

**![](img/7ab6d524ca7f92333670f692327cb892.png)****![](img/6717ba74961210187b04360e3cc8d932.png)**

**ä¸ºäº†è·å¾—åµŒå¥— beans çš„æ˜ å°„ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯ä¸º*Order.java*åˆ°*OrderDto.java*æ·»åŠ æ–¹æ³•ï¼Œåä¹‹äº¦ç„¶ï¼Œå¦‚æœ *MapStruct* æ£€æµ‹åˆ°éœ€è¦è½¬æ¢çš„å¯¹è±¡ç±»å‹å’Œè¦è½¬æ¢çš„æ–¹æ³•å­˜åœ¨äºåŒä¸€ä¸ªç±»ä¸­ï¼Œå®ƒå°†è‡ªåŠ¨ä½¿ç”¨å®ƒã€‚**

**æˆ‘ä»¬æ–°çš„æ˜ å°„ç•Œé¢çœ‹èµ·æ¥åƒ-**

**![](img/949883594b489d42d176e87277ff01af.png)**

## **æ˜ å°„åµŒå¥— Bean å†…çš„**å­—æ®µ:****

**è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸‹ï¼Œæˆ‘ä»¬æƒ³è¦å°†æ¥è‡ª*Order.java*çš„ *id* æ˜ å°„åˆ°*CustomerDto.java*ä¸­çš„*Customer.java*åˆ°*è®¢å• Id* çš„åµŒå¥— beanã€‚**

**æ˜ å°„å™¨å°†å¦‚ä¸‹å›¾æ‰€ç¤º-**

**![](img/28369fa35c65243acd40555a7c94e044.png)**

> ***ç±»ä¼¼åœ°ï¼Œæˆ‘ä»¬å¯ä»¥å°†é€‰å®šçš„å­—æ®µä»ä¸€ä¸ªåµŒå¥— bean æ˜ å°„åˆ°å¦ä¸€ä¸ªåµŒå¥— bean -***

**![](img/2fd412dcdc073979471ed0a06f868d19.png)**

## **ç”¨å‡ ä¸ªæºå‚æ•°ç»˜åˆ¶**æ–¹æ³•:****

**MapStruct è¿˜æ”¯æŒå¸¦æœ‰å‡ ä¸ªæºå‚æ•°çš„æ˜ å°„æ–¹æ³•ã€‚è¿™å¯¹äºå°†å‡ ä¸ªå®ä½“ç»„åˆæˆä¸€ä¸ªæ•°æ®ä¼ è¾“å¯¹è±¡éå¸¸æœ‰ç”¨ã€‚**

**ä¸‹é¢æ˜¾ç¤ºäº†ä¸€ä¸ªä¾‹å­ï¼Œå…¶ä¸­æˆ‘ä»¬æœ‰ä¸¤ä¸ªè¾“å…¥ POJO*Customer.java*å’Œ*Order.java*è¢«æ˜ å°„åˆ°å•ä¸ª POJO*CustomerDetailDto.java*:**

**![](img/903555c1e91be91497533f40b70488aa.png)**

# **ç»“è®º**

**è¿™æ˜¯å¯¹ *Mapstruct* çš„åŸºæœ¬ä»‹ç»ï¼Œä½ å¯ä»¥éšæ—¶å°† *MapStruct* ä¸ *Lombok* ç»“åˆä½¿ç”¨ï¼Œä»¥åŠ é€Ÿä½ çš„å¼€å‘ï¼Œå¹¶ä½¿ä½ çš„ä»£ç å…äºé”™è¯¯å’Œç»´æŠ¤ã€‚**

**å¦‚æœä½ çŸ¥é“å…¶ä»–æ˜ å°„æ¡†æ¶ï¼Œå¦‚*æ¨åœŸæœº*ã€ *Orika* ã€*æ¨¡å‹æ˜ å°„å™¨*å’Œ *JMapper* ï¼Œä½ ä¸€å®šåœ¨æƒ³ä¸ºä»€ä¹ˆæˆ‘è¦é€‰æ‹© *MapStruct* ï¼Ÿå®ƒæœ‰ä»€ä¹ˆç‰¹åˆ«ä¹‹å¤„ï¼Ÿ**

**æ‰€ä»¥è®©æˆ‘å‘Šè¯‰ä½ ï¼Œä½ çš„æ€è€ƒæ–¹å‘æ˜¯æ­£ç¡®çš„ï¼Œç­”æ¡ˆæ˜¯-**

> ***MapStruct ç”¨æœ€å°‘çš„é…ç½®ç»™äº†æˆ‘ä»¬æœ€å¥½çš„æ€§èƒ½ã€‚***

**è¦è¿›ä¸€æ­¥åˆ†ææ‰€æœ‰æ˜ å°„æ¡†æ¶çš„æ€§èƒ½ï¼Œè¯·é˜…è¯»æ¥è‡ª *Baeldung* çš„ä¿¡æ¯ä¸°å¯Œçš„ [***æ–‡ç« ***](https://www.baeldung.com/java-performance-mapping-frameworks) ã€‚**

**æœ‰å…³ Mapstruct çš„é«˜çº§æ¦‚å¿µï¼Œå¦‚ Spring é›†æˆã€ç±»å‹è½¬æ¢ã€é›†åˆæ˜ å°„ç­‰ï¼Œè¯·æµè§ˆæœ¬ç³»åˆ—çš„ä¸‹ä¸€ç¯‡åšå®¢ï¼Œ [c ***èˆ”æˆ‘ï¼Œæˆ‘ä¼šå¸¦ä½ åˆ°é‚£é‡Œï¼*T58**](/@akshay.jain_76848/mapstruct-advanced-concepts-and-dependency-injection-46f28af54e33)**

## **ç¼–ç å¿«ä¹ï¼**