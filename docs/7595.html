<html>
<head>
<title>How to Add an Automated Cycle Time to Azure Devops Boards</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何向Azure Devops板添加自动化周期时间</h1>
<blockquote>原文：<a href="https://medium.com/version-1/how-to-add-an-automated-cycle-time-to-azure-devops-boards-8a12d3641e81?source=collection_archive---------0-----------------------#2022-09-15">https://medium.com/version-1/how-to-add-an-automated-cycle-time-to-azure-devops-boards-8a12d3641e81?source=collection_archive---------0-----------------------#2022-09-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="0cef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除了故事点和速度之外，我强烈支持用周期时间和吞吐量来度量流程。Azure Devops有一个很好的仪表板小部件，如下所示，它只在工作完成后显示这些内容。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jc"><img src="../Images/8e2c62df9c528fd59995bbe3bcf4dabd.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/format:webp/1*czhNmBN_UnFyurVSB5ueTA.png"/></div></figure><p id="3ac6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">看板、Scrum，甚至更传统的交付团队都可以从他们的工作项目单上看到正在进行的周期时间而获得价值。我们在日常通话中使用周期时间来快速查看和讨论哪些工作项目进展慢于预期。目前，您不能单独从Azure Devops计算周期时间，但您可以与power Automate集成，后者通常与您的Office 365订阅捆绑在一起。</p><p id="018e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章中，我将展示我每天自动添加和更新周期时间的步骤，我估计在您设置访问权限后，完成这些步骤需要一个小时。</p><p id="4141" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，你需要:</p><ul class=""><li id="29bc" class="jk jl hh ig b ih ii il im ip jm it jn ix jo jb jp jq jr js bi translated">Azure Devops中用于修改流程模板的管理员访问权限</li><li id="8063" class="jk jl hh ig b ih jt il ju ip jv it jw ix jx jb jp jq jr js bi translated">用于设计流程的Power Automate订阅(我的订阅包含在Office 365许可证中)</li></ul><p id="2d38" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我假设你理解Azure Devops流程模板。我还假设您使用了与我相同的字段名和值，但是您可以根据自己的需要进行调整。</p><h1 id="b706" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">在Azure Devops中添加新字段</h1><p id="2d47" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">你需要两个字段，周期时间和开始日期。当一个工作项被移动到我们的第一个工作列时，我们的开始日期字段将被填充。对我来说，这是“发展中”。</p><p id="d3cc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">转到组织设置，然后选择左侧菜单中“纸板”下的处理。如上所述，编辑流程模板只能由管理员完成。</p><p id="fb95" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择要编辑的过程模板。然后导航到您将添加周期时间的工作项类型。我用的是“任务”。</p><h2 id="74ab" class="lc jz hh bd ka ld le lf ke lg lh li ki ip lj lk km it ll lm kq ix ln lo ku lp bi translated">周期</h2><p id="b6a9" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">选择[新字段]</p><p id="658b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建一个字段并命名，我用“周期时间”。</p><p id="d579" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择“整数”作为类型。</p><h2 id="6b8c" class="lc jz hh bd ka ld le lf ke lg lh li ki ip lj lk km it ll lm kq ix ln lo ku lp bi translated">开始日期</h2><p id="cedc" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">选择[新字段]</p><p id="b178" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建一个字段并命名，我用“开始日期”。</p><p id="74b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择“日期/时间”作为类型。</p><p id="c4ea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">完成后，你应该得到类似下面的东西。我创建了一个新组来添加我的流场。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lq"><img src="../Images/9bdcc19ea9ce2e654480caf1d214ccb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/format:webp/1*RUQOXu5gHPxFpn1Sg8vE7w.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Azure Devops Process Template</figcaption></figure><h1 id="ccd1" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">创造你的动力自动化流程</h1><p id="c969" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">这里的第一件事是在https://powerautomate.microsoft.com/<a class="ae lv" href="https://powerautomate.microsoft.com/" rel="noopener ugc nofollow" target="_blank">设立你的Power Automate账户</a>你将需要这些流量的高级许可证，我的包括在我的Office 365订阅中。</p><p id="911d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">接下来，创建到Azure Devops的连接。通过左侧菜单上的[数据]-[连接]来完成此操作。</p><p id="c315" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择[新连接]并在搜索中输入“azure devops”以过滤连接。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es lw"><img src="../Images/4f8464bd1eabb4d495271a6dd2545095.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qbNrrEGIrAwlJRw15J6uAQ.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Setting your connection</figcaption></figure><p id="e9f7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">添加连接并填写所需的值。</p><p id="443b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">准备好后，您可以点击左侧菜单中的[创建]或“我的流程”页面中的[新流程]。</p><p id="c523" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您将需要两个流程:</p><ul class=""><li id="c65a" class="jk jl hh ig b ih ii il im ip jm it jn ix jo jb jp jq jr js bi translated">一个由Azure DevOps工作项更新触发</li><li id="1180" class="jk jl hh ig b ih jt il ju ip jv it jw ix jx jb jp jq jr js bi translated">一个计划在你选择的频率下运行。</li></ul><h1 id="8c6e" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">工作开始流程</h1><p id="dd1f" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">创建新流程并选择“自动化云流程”</p><p id="59d6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在搜索框中键入“azure”并选择“当工作项更新时”</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mb"><img src="../Images/b13f2c5fa70b0e7226075546ec6fa709.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*b5sUAqMyDIbHCGHP-UMCxg.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Choosing the trigger</figcaption></figure><p id="328f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建后，您可以向“工作项更新时”框中添加值</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mc"><img src="../Images/7b2ab9712e80b7d0a3344e26c51be605.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*zZhpVy8V4INtLyp8f3daaQ.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">When a work item is updated</figcaption></figure><p id="ab89" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们正在将周期时间添加到我们的任务中。在本例中，选择您要添加周期时间的类型。</p><p id="e376" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">完成后，单击[New step]并将“condition”输入过滤器。从结果中选择条件，您的流程应该如下所示:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es lw"><img src="../Images/c64c8d1ade6fb0cdee0592ef69f4044e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E1nGa9kTGkozbTYrOZT2pw.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Using condition logic</figcaption></figure><p id="62d0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们增加了一个条件，就是我们希望电力自动化要注意。这是一个没有开始日期的工作项，也没有您想要测量周期时间的状态。对于我们来说，就是在<br/> <br/>中选择你的字段，点击进入“选择一个值”框。您将从您的工作项中获得一个可用字段的列表。使用搜索过滤器帮助您找到您的字段。然后选择开始日期。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es md"><img src="../Images/dd9a74684868d60ac6bbaf2c9f82f4bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*9ft2ZqvlaYKNZf5qON9yGw.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Setting the conditon field</figcaption></figure><p id="d884" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在您需要为开始日期“选择一个值”。选择字段，当对话框打开时，选择表达式选项卡，键入“null”并单击确定。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es lw"><img src="../Images/3a51028ffcb08e2c04b77b7bddfe64fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W1kGa7fyMADNtbtun9xevQ.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Setting the condition value</figcaption></figure><p id="6946" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在“条件”框中，添加一个组并添加每个活动状态。然后输入你要找的州。</p><p id="a2c9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:自从创建了这个流之后，我观察到一些任务被直接转移到了review状态，所以我在我的逻辑中包含了所有的活动状态。</p><p id="d49a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您的条件框现在应该如下所示:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es me"><img src="../Images/986313aaf7add8c50e946126a98dc163.png" data-original-src="https://miro.medium.com/v2/resize:fit:1370/format:webp/1*29Ilqnidb4dEgmi4YGnRGw.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Condition box</figcaption></figure><p id="6c6b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们检查开始日期<em class="lb">为空</em>，这样我们只设置了一次。如果没有这一点，每当用户在活动状态之间移动他们的工作项时，我们将重置日期并重置周期时间。</p><p id="fad9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">好了，现在我们有了逻辑，我们需要在Yes条件下更新工作项。在“是”框中单击[添加操作]。在搜索过滤器中键入“azure devops ”,然后单击[更新工作项目]</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mf"><img src="../Images/d1336595494fc0cdc7ca571d9392eba9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1132/format:webp/1*rmI06NmTwCMBZ1x1SWms6Q.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Setting Yes condition operation</figcaption></figure><p id="5e12" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，在“更新工作项”框中，再次添加您的组织名称。此外，添加您的项目名称。对于工作项id，在字段中单击并从动态内容中选择[Id]。这个Id是从上一步“当一个工作项被更新时”传递过来的。</p><p id="76f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择您正在使用的工作项类型，在本例中为“Task”。</p><p id="de0b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后选择[高级选项]。在“其他字段”中，单击进入“输入关键字”，并键入“开始日期”作为关键字。在“输入值”框中，使用对话框搜索“更改日期”。</p><p id="b129" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您的“是”框现在应该是这样的:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mg"><img src="../Images/ad257b9c2416a0a25688f086456e9aa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eEO1BGImPLPQ1GlHpvw6JA.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Updating the work item</figcaption></figure><p id="4b7f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是第一个完整的流程。现在点击保存，我们可以测试它的工作。</p><p id="c618" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我们测试之前，我们要检查流量是否打开。转到“我的流”并查看流上是否显示禁用图标。要打开它，点击3个点并选择“打开”</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mh"><img src="../Images/1a65a99a6ea1923f2b403adb3c97ffa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*XvwS0UJPCl7mgfoIRQEf9A.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Disabled flow</figcaption></figure><p id="ddc1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，流已经启动并正常工作，应该可以正常工作了。但是您可以通过在测试模式下设置流量来更快地测试它。要进行测试，再次编辑流程，然后单击屏幕右上角的[测试]。选择手动测试，然后单击[测试]按钮。</p><p id="49a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在导航到Azure DevOps并将一个工作项移动到“开发中”状态。这应该会更快地触发流，并且您可以验证开始日期已经被填充。</p><p id="d1db" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">工作开始流程现在正在运行，我们可以创建周期时间流程。</p><h1 id="25bb" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">循环时间流程</h1><p id="215c" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">对于这个流，我们需要在Azure DevOps中定义一个查询。在我的例子中，我需要所有处于开发中、审查中或准备审查状态的活动任务。添加开始日期不为空的检查。没有开始日期，我们的流无法计算CycleTime，如果为空，将会出错。我假设你理解查询，但下面的截图显示了这个查询。确保将其保存为共享查询，并通过列选项将周期时间和工作开始时间列添加到结果中。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es lw"><img src="../Images/4b86844a58a73fb2ec0f8d2b692cf00f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*exl-nKQO2LQZJAA05s9ylQ.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Azure Devops query</figcaption></figure><p id="3c73" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们有了Azure Devops中的查询，我们回到Power Automate。</p><p id="3ee3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您需要创建一个“预定云流程”。命名它，并选择它何时运行。我选择了星期，选择了星期一到星期五，时间是早上8点。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mi"><img src="../Images/1686c6f35c17347711dce85b3d653554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8PIHCBH7ueSFUbTa6KXIFA.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Creating a scheduled flow</figcaption></figure><p id="4fac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建流程后，单击[新步骤]。搜索Azure Devops并选择“获取查询结果”</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mj"><img src="../Images/2e9ab8cd331efd5a2fd122d2dc9f920d.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*MzldDSxTz8n3PXlOuF9V7g.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Get Azure Devops query results</figcaption></figure><p id="04e0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">希望这是一个简单的步骤，并给你这个:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mk"><img src="../Images/46805a1fec2e70072a6f8d77b97c763b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*Z6KN3QA-5-jgIGtNyQKYtQ.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Get query results parameters</figcaption></figure><p id="c678" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">接下来，我们初始化一个新变量，称之为工作日。这将用于保存扣除周末后的工作日数。</p><p id="a70e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">增加一个步骤。在搜索中键入“变量”并选择“初始化变量”。将其命名为“工作日”，选择Integer作为类型，并赋予其值0。如下图所示:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ml"><img src="../Images/24f269a05d8154ede38948b44b9986bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/format:webp/1*xLlqGLBCGgv8_CzbbSqaEw.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Initialize variable</figcaption></figure><p id="6cef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">添加一个新步骤，搜索“应用于每个”。选择“应用于每个”，并将“值”的动态内容添加到框中。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mm"><img src="../Images/e6b1969b34ea8e238ee7e679eb76b44e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1098/format:webp/1*mth2K_152PpGUoWJz8skJQ.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Apply to each</figcaption></figure><p id="52d4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将遍历查询结果，对每个结果应用以下操作。</p><p id="195d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在框中添加另一个操作，并再次搜索azure devops。选择“get work item details ”,像以前一样添加您的值，并为工作项Id添加动态值“ID”。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mn"><img src="../Images/e1e59d90df8fc81281ed8acfe4edf7b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o2fVYOHoh5OC1a5O-1qEuA.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Get work item details</figcaption></figure><p id="84a2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下一步要添加的是“撰写”，你的应用到每一步现在应该看起来如下。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mo"><img src="../Images/5ee17bfab4f93cf4ea353b735f2e78b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*g41_BV18yXPy5Epmn2nd8g.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Compose the Cycle Time</figcaption></figure><p id="57e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击“添加动态内容”,并复制以下公式:</p><p id="7ef7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">div(sub(ticks(format datetime(utc now()，' yyyy-MM-dd '))，ticks(format datetime(outputs(' Get _ work _ item _ details ')？[' body/fields/Microsoft _ VSTS _ Scheduling _<strong class="ig hi">start date</strong>']，' yyyy-MM-dd '))，864000000000)</p><p id="9ae7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此公式将日期转换为刻度。一天有864000000000个滴答。然后，我们使用sub从utcNow(当前日期)中减去StartDate，最后，我们将它除以1天的刻度，得到天数的差值。</p><p id="a8e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">接下来的几个步骤我们将放入一个范围内，没有别的原因，只是为了让我们在处理流程时可以折叠/展开这个部分。添加一个步骤，搜索“范围”。</p><p id="cc49" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在作用域内添加一个新步骤——“设置变量”。然后添加来自CycleTime的动态内容“输出”。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mp"><img src="../Images/6dc5584622a3b4bf804bd6823332a1fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*0YxCYM965VM9r6wLFjt7PA.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Dynamic outputs</figcaption></figure><p id="2d71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您对每个框的申请将如下所示:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mq"><img src="../Images/b3a396d4d56967e2886c044ee302948d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*NtB4I6fdrdOmf1ox_BlgQA.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Apply to each logic</figcaption></figure><p id="7d8b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，在作用域内，添加一个“递减变量”步骤。名称为“工作日”,并添加以下公式作为表达式:</p><p id="0c28" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">mul(div(sub(outputs('CycleTime ')，1)，7)，2)</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lx ly di lz bf ma"><div class="er es mr"><img src="../Images/b04281923bbe6f2dc9a2e6dff117a375.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kdMHU6LoJQeSynmXJrR4-g.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Decrement variable</figcaption></figure><p id="426b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在Scope中，添加另一个“递减变量”步骤。如果周末的开始日期晚于结束日期，此步骤将扣除两天。例如，周四-周一将包括周末。这将需要公式:</p><p id="1ce7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">if(less(sub(day ofweek(format datetime(utc now()，' yyyy-MM-dd '))，day ofweek(format datetime(outputs(' Get _ work _ item _ details ')？[' body/fields/Microsoft _ VSTS _日程安排_开始日期']，' yyyy-MM-dd '))，0)，2，0)</p><p id="bc1f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您的范围现在将如下所示:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mc"><img src="../Images/65ae7ad7c5e94240876f61ab4c3b0b02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*w20P5OIdnWHzN59B1Sf4jw.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Second Decrement variable</figcaption></figure><p id="686f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:我对上面的一些步骤进行了重命名，以使流程的工作更加清晰。</p><p id="b6cb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在范围之后，为Azure Devops添加一个新步骤。“更新工作项”。像以前一样添加连接信息，并添加CycleTime作为键，添加动态值“工作日”作为值。您的最后一步应该如下所示:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ms"><img src="../Images/2779812fd26cd48df85e3c5f0faccfa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1312/format:webp/1*IAwWW1VwOKBN5hzDkcR7-A.png"/></div></figure><p id="21b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">保存你的流量。然后，使用创建工作开始流时描述的步骤，开始并启用该流。</p><p id="e3f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您现在可以运行一个测试流程，方法是将流程置于编辑状态，然后单击屏幕右上角的[Test]。选择手动，然后点击“运行流程”开始。然后，您可以导航到测试页面，查看流程是否完成。</p><p id="6700" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您在流程中没有任何错误，那么您现在将在您的工作项中填充周期时间。您可以像我们一样，在Devops板上编辑标签的外观来显示周期时间。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mt"><img src="../Images/3f1705e7ff586972822450c0d5c5f31e.png" data-original-src="https://miro.medium.com/v2/resize:fit:478/format:webp/1*TLwHm9dIkylpX2mS5I2KQA.png"/></div><figcaption class="lr ls et er es lt lu bd b be z dx">Cycle Time displaying on tickets</figcaption></figure><p id="2185" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">周期时间有助于团队在日常通话中快速看到进展缓慢的工作项目。如果您正在使用看板，您可能还想测量某个项目在特定列中的天数。通过修改上面的步骤，您可以很容易地添加票据移动列/状态后的天数。这确实有助于找出你工作中的瓶颈。</p><p id="076c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">感谢阅读！请分享您的任何反馈。</p><p id="dcc9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">关于作者:<br/>Simon wraitt是版本1中的scrum大师。</p></div></div>    
</body>
</html>