<html>
<head>
<title>Creating React Redux Express Full Stack Application Part-II</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建React Redux Express全栈应用程序第二部分</h1>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/creating-react-redux-express-full-stack-application-part-ii-931fba94ec9b?source=collection_archive---------1-----------------------#2020-12-02">https://medium.com/walmartglobaltech/creating-react-redux-express-full-stack-application-part-ii-931fba94ec9b?source=collection_archive---------1-----------------------#2020-12-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/e395d310eb927196be99855a55123bd3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iR_YjP8JAaSTrkET-pCyvg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx"><a class="ae hu" href="https://daveceddia.com/images/8bNlffXEcC0.jpg" rel="noopener ugc nofollow" target="_blank">Image Source</a></figcaption></figure><div class=""/><h1 id="225a" class="iu iv hx bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">介绍</h1><p id="ebae" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">我们已经在<a class="ae hu" rel="noopener" href="/walmartglobaltech/creating-react-redux-express-full-stack-application-part-i-82959d847802">之前的帖子</a>中开发了带有Express后端服务器和React前端的应用程序。在这篇文章中，我们将增强React JS前端，以与Redux库集成，从而与后端无缝连接。</p><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kq"><img src="../Images/079ec249ad9c91962b57f818555a7439.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bXxrQgODMvBpeB4Xzo8Isw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Features of Redux (<a class="ae hu" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank">Image Source</a>)</figcaption></figure><h1 id="1fd0" class="iu iv hx bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">为什么要用Redux？</h1><blockquote class="kv kw kx"><p id="79b9" class="js jt ky ju b jv kz jx jy jz la kb kc lb lc kf kg ld le kj kk lf lg kn ko kp ha bi translated"><strong class="ju hy"> Redux帮助您管理“全局”状态——您的应用程序的许多部分都需要的状态。</strong></p></blockquote><p id="8be5" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">Redux提供的模式和工具使得理解应用程序中的状态更新的时间、位置、原因和方式，以及当这些变化发生时应用程序逻辑的行为变得更加容易。Redux指导您编写可预测和可测试的代码，这有助于您确信您的应用程序将按预期工作。</p><h1 id="8261" class="iu iv hx bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">什么时候该用Redux？</h1><p id="0129" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">Redux在以下情况下更有用:</p><ul class=""><li id="49f7" class="lh li hx ju b jv kz jz la kd lj kh lk kl ll kp lm ln lo lp bi translated">您有大量的应用程序状态，应用程序中的许多地方都需要它们</li><li id="0566" class="lh li hx ju b jv lq jz lr kd ls kh lt kl lu kp lm ln lo lp bi translated">应用程序状态会随着时间的推移而频繁更新</li><li id="90a8" class="lh li hx ju b jv lq jz lr kd ls kh lt kl lu kp lm ln lo lp bi translated">更新状态逻辑可能很复杂</li><li id="5fda" class="lh li hx ju b jv lq jz lr kd ls kh lt kl lu kp lm ln lo lp bi translated">该应用程序有一个中型或大型代码库，可能会有许多人在工作</li></ul><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lv"><img src="../Images/f2f107000e06422331cc8f918b7ee260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u73IY03PAq2GtDu0tIVQqQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">React-Redux application data flow looks like this (<a class="ae hu" href="https://redux.js.org/tutorials/essentials/part-1-overview-concepts" rel="noopener ugc nofollow" target="_blank">Image Source</a>)</figcaption></figure><p id="cd5b" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">开发React Redux应用程序的步骤了解过程中的常用术语</p><p id="e21a" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">最终项目的文件夹结构将如下所示</p><h2 id="befb" class="lw iv hx bd iw lx ly lz ja ma mb mc je kd md me ji kh mf mg jm kl mh mi jq mj bi translated">行动</h2><p id="2024" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">动作是一个普通的JavaScript对象，有一个<code class="du mk ml mm mn b">type</code>字段。您可以将动作视为描述应用程序中发生的事情的事件。</p><p id="a3e9" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated"><code class="du mk ml mm mn b">type</code>字段应该是一个字符串，给这个动作一个描述性的名称，例如<code class="du mk ml mm mn b">DATA_FROM_BACKEND</code>。一个动作对象可以有其他字段，这些字段包含关于发生了什么的附加信息。按照惯例，我们将这些信息放在一个名为<code class="du mk ml mm mn b">dataFromBackend</code>的字段中。典型的操作对象可能如下所示:</p><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mo"><img src="../Images/7aab41afb492c056dbbf3486cfbf49e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BZOvJlts3o0h-6wabbGQxQ.png"/></div></div></figure><h2 id="87c7" class="lw iv hx bd iw lx ly lz ja ma mb mc je kd md me ji kh mf mg jm kl mh mi jq mj bi translated">动作创建者</h2><p id="71c8" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">动作创建器是一个创建并返回动作对象的函数。我们通常使用这些方法，这样我们就不必每次都手工编写动作对象。</p><h2 id="3c30" class="lw iv hx bd iw lx ly lz ja ma mb mc je kd md me ji kh mf mg jm kl mh mi jq mj bi translated">派遣</h2><p id="cc29" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">Redux store有一个方法叫做<code class="du mk ml mm mn b">dispatch</code>。更新状态的唯一方法是调用<code class="du mk ml mm mn b">dispatch()</code>并传入一个动作对象。存储将运行其reducer函数，并将新的状态值保存在其中。这将导致UI呈现新的状态值。</p><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mp"><img src="../Images/1b1a1522285d990c17f574404b5a8274.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MPpLvKrIgnvgVHb8888c3Q.png"/></div></div></figure><h2 id="29c2" class="lw iv hx bd iw lx ly lz ja ma mb mc je kd md me ji kh mf mg jm kl mh mi jq mj bi translated">还原剂</h2><p id="e5b0" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">reducer是一个函数，它接收当前的<code class="du mk ml mm mn b">state</code>和一个<code class="du mk ml mm mn b">action</code>对象，决定如何在必要时更新状态，并返回新的状态:<code class="du mk ml mm mn b">(state, action) =&gt; newState</code>。您可以将reducer看作一个事件监听器，它根据接收到的动作(事件)类型来处理事件。</p><p id="3b93" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">减速器必须<em class="ky">始终</em>遵循一些特定规则:</p><ul class=""><li id="e9ed" class="lh li hx ju b jv kz jz la kd lj kh lk kl ll kp lm ln lo lp bi translated">他们应该只根据<code class="du mk ml mm mn b">state</code>和<code class="du mk ml mm mn b">action</code>参数计算新的状态值</li><li id="ed8a" class="lh li hx ju b jv lq jz lr kd ls kh lt kl lu kp lm ln lo lp bi translated">他们不允许修改已有的<code class="du mk ml mm mn b">state</code>。相反，他们必须通过复制现有的<code class="du mk ml mm mn b">state</code>并对复制的值进行更改，来进行<em class="ky">不可变更新</em>。</li></ul><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mq"><img src="../Images/5daa691245aabe365372b8ec6dd30629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*riy2MyeOz9GAevrw5DI6JQ.png"/></div></div></figure><h2 id="ad0c" class="lw iv hx bd iw lx ly lz ja ma mb mc je kd md me ji kh mf mg jm kl mh mi jq mj bi translated">商店</h2><p id="b805" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">当前的Redux应用程序状态存在于一个名为store的对象中。</p><p id="1a4a" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">存储是通过传入一个reducer创建的。</p><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mr"><img src="../Images/45fd45edfe1fb7e972fecc60d9b1f7e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ugv80nDCj0517oJ5dDdT1w.png"/></div></div></figure><p id="2a87" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">让我们应用上面学到的逻辑来开发基于redux的React应用程序:-</p><ol class=""><li id="eb93" class="lh li hx ju b jv kz jz la kd lj kh lk kl ll kp ms ln lo lp bi translated">创建与Node express后端并发运行的基于React的基本应用程序，如<a class="ae hu" rel="noopener" href="/walmartglobaltech/creating-react-redux-express-full-stack-application-part-i-82959d847802">前一篇博客</a>中所述</li></ol><p id="17f4" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">2.将client/package.json的内容更新如下。添加了基于Redux的依赖项。</p><pre class="kr ks kt ku fd mt mn mu mv aw mw bi"><span id="8ca7" class="lw iv hx mn b fi mx my l mz na">{<br/>"name": "react-redux-app",<br/>"version": "0.1.0",<br/>"private": true,<br/>"dependencies": {<br/>"@testing-library/jest-dom": "^4.2.4",<br/>"@testing-library/react": "^9.5.0",<br/>"@testing-library/user-event": "^7.2.1",<br/>"react": "^16.13.1",<br/>"react-dom": "^16.13.1",<br/>"react-redux": "^7.2.1",<br/>"react-scripts": "3.4.3",<br/>"redux": "^4.0.5",<br/>"redux-thunk": "^2.3.0"<br/>},<br/>"scripts": {<br/>"start": "react-scripts start",<br/>"build": "react-scripts build",<br/>"test": "react-scripts test",<br/>"eject": "react-scripts eject"<br/>},<br/>"proxy": "http://localhost:5000/",<br/>"eslintConfig": {<br/>"extends": "react-app"<br/>},<br/>"browserslist": {<br/>"production": [<br/>"&gt;0.2%",<br/>"not dead",<br/>"not op_mini all"<br/>],<br/>"development": [<br/>"last 1 chrome version",<br/>"last 1 firefox version",<br/>"last 1 safari version"<br/>]}}</span></pre><p id="0de5" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">3.更新完<strong class="ju hy"> package.json </strong>后，运行<code class="du mk ml mm mn b"><em class="ky">client</em></code>目录下的<code class="du mk ml mm mn b"><em class="ky">npm install</em></code>命令，安装所有需要的依赖项。</p><p id="d5c4" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">4.添加store.js文件(<strong class="ju hy"> client/src/store.js) </strong>为React Redux应用程序创建一个存储。</p><blockquote class="kv kw kx"><p id="c0a1" class="js jt ky ju b jv kz jx jy jz la kb kc lb lc kf kg ld le kj kk lf lg kn ko kp ha bi translated">redux<strong class="ju hy">Thunk</strong>T20】中间件允许你编写返回函数而不是动作的动作创建器。thunk可用于延迟动作的调度，或者仅在满足特定条件时才进行调度。内部函数接收存储方法<code class="du mk ml mm mn b"><em class="hx">dispatch</em></code>和<code class="du mk ml mm mn b"><em class="hx">getState</em></code>作为参数。</p></blockquote><pre class="kr ks kt ku fd mt mn mu mv aw mw bi"><span id="42d3" class="lw iv hx mn b fi mx my l mz na">import {createStore, applyMiddleware} from 'redux'<br/>import thunk from 'redux-thunk' //Middleware<br/>import appReducer from './reducers'</span><span id="75bd" class="lw iv hx mn b fi nb my l mz na">const store = <strong class="mn hy">createStore</strong>(appReducer,applyMiddleware(thunk));</span><span id="50cb" class="lw iv hx mn b fi nb my l mz na">export default store;</span></pre><p id="0714" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">5.创建存储后，创建名为reducers(<strong class="ju hy">client/src/reducers)</strong>的文件夹来保存reducer文件。在这个reducers文件夹中添加2个文件:-</p><ol class=""><li id="5330" class="lh li hx ju b jv kz jz la kd lj kh lk kl ll kp ms ln lo lp bi translated">dashboard reducer . js(<strong class="ju hy">client/src/reducers/dashboard reducer . js</strong>)</li></ol><pre class="kr ks kt ku fd mt mn mu mv aw mw bi"><span id="cfff" class="lw iv hx mn b fi mx my l mz na">export const initialState = {<br/>dataFromBackend : {},<br/>getDataFromBackend : {}<br/>}</span><span id="9b71" class="lw iv hx mn b fi nb my l mz na">export const dashboardReducer = (state = initialState, action) =&gt; {</span><span id="d378" class="lw iv hx mn b fi nb my l mz na">switch(action.type){</span><span id="5263" class="lw iv hx mn b fi nb my l mz na">case '<strong class="mn hy">DATA_FROM_BACKEND</strong>' :<br/>return {<br/>...state,<br/>dataFromBackend : action.dataFromBackend<br/>}</span><span id="6c12" class="lw iv hx mn b fi nb my l mz na">case '<strong class="mn hy">GET_DATA</strong>' :<br/>return {<br/>...state,<br/>getDataFromBackend : action.getDataFromBackend<br/>}</span><span id="8481" class="lw iv hx mn b fi nb my l mz na">default:<br/>return state<br/>}<br/>}</span></pre><p id="3611" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">2.index . js(<strong class="ju hy">client/src/reducers/index . js</strong>)—该文件用于组合多个导入的减速器(例如。/dashboardReducer)在存在多个Reducer文件的复杂应用程序的情况下。</p><pre class="kr ks kt ku fd mt mn mu mv aw mw bi"><span id="ad7f" class="lw iv hx mn b fi mx my l mz na">import {combineReducers} from 'redux'<br/>import {dashboardReducer} from './dashboardReducer'</span><span id="4a44" class="lw iv hx mn b fi nb my l mz na">const config = {<br/>dashboardReducer : dashboardReducer<br/>}</span><span id="2c04" class="lw iv hx mn b fi nb my l mz na">const appReducer  = <strong class="mn hy">combineReducers</strong>(config);<br/>export default appReducer;</span></pre><p id="c17a" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">6.为应用添加reducers后，<strong class="ju hy"> <em class="ky">创建actions文件夹(</em>client/src/actions<em class="ky">)</em></strong>保存action creator文件。在该文件夹下添加动作创建者<strong class="ju hy"> dashboardAction.js </strong>文件(<strong class="ju hy">client/src/actions/dashboard action . js</strong>)。</p><pre class="kr ks kt ku fd mt mn mu mv aw mw bi"><span id="1383" class="lw iv hx mn b fi mx my l mz na"><strong class="mn hy">//Async action creator for POST API Route</strong></span><span id="0539" class="lw iv hx mn b fi nb my l mz na">export const sendData = (url,payload) =&gt; {<br/>return dispatch =&gt; {<br/>return fetch(url,{<br/>method: '<strong class="mn hy">POST</strong>',<br/>headers: {<br/>'Content-Type': 'application/json',<br/>},<br/>body: JSON.stringify(payload),<br/>}).then(res =&gt; {<br/>return res.json();<br/>}).then(res =&gt; {</span><span id="3812" class="lw iv hx mn b fi nb my l mz na"><strong class="mn hy">dispatch({type : 'DATA_FROM_BACKEND', dataFromBackend : res })</strong></span><span id="f47b" class="lw iv hx mn b fi nb my l mz na">}).catch(err =&gt; {<br/>console.log('API failed')<br/>})}}</span><span id="7906" class="lw iv hx mn b fi nb my l mz na"><strong class="mn hy">//Async action creator for GET API Route</strong></span><span id="1f71" class="lw iv hx mn b fi nb my l mz na">export const getData = (url) =&gt; {<br/>return dispatch =&gt; {<br/>return fetch(url).then(res =&gt; {<br/>return res.json();<br/>}).then(res =&gt; {</span><span id="7365" class="lw iv hx mn b fi nb my l mz na"><strong class="mn hy">dispatch({type : 'GET_DATA', getDataFromBackend : res })</strong></span><span id="e0c8" class="lw iv hx mn b fi nb my l mz na">}).catch(err =&gt; {<br/>console.log('API failed')<br/>})}}</span></pre><p id="5c6c" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">7.一旦我们准备好store、reducer和async action creator，让我们通过更新index . js<strong class="ju hy">(client/src/index . js)</strong>文件的代码将store嵌入到React应用程序中。</p><pre class="kr ks kt ku fd mt mn mu mv aw mw bi"><span id="db8b" class="lw iv hx mn b fi mx my l mz na">import React from 'react';<br/>import ReactDOM from 'react-dom';<br/>import './index.css';<br/>import App from './App';<br/>import * as serviceWorker from './serviceWorker';</span><span id="2155" class="lw iv hx mn b fi nb my l mz na">//React-Redux<br/>import store from './store'<br/>import {<strong class="mn hy">Provider</strong>} from '<strong class="mn hy">react-redux</strong>'</span><span id="4d36" class="lw iv hx mn b fi nb my l mz na">ReactDOM.render(</span><span id="5ec0" class="lw iv hx mn b fi nb my l mz na"><strong class="mn hy">&lt;Provider store={store}&gt;</strong><br/>&lt;React.StrictMode&gt;<br/>   <strong class="mn hy">&lt;App /&gt;</strong><br/>&lt;/React.StrictMode&gt;<br/><strong class="mn hy">&lt;/Provider&gt;</strong>,<br/>document.getElementById('root')<br/>);</span><span id="783b" class="lw iv hx mn b fi nb my l mz na">// If you want your app to work offline and load faster, you can change<br/>// unregister() to register() below. Note this comes with some pitfalls.<br/>// Learn more about service workers: <a class="ae hu" href="https://bit.ly/CRA-PWA" rel="noopener ugc nofollow" target="_blank">https://bit.ly/CRA-PWA</a><br/>serviceWorker.unregister();</span></pre><p id="ccd7" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">8.更新App.js文件(<strong class="ju hy"> client/src/App.js </strong>)，以便使用连接库将React组件作为高阶组件与商店连接。</p><blockquote class="kv kw kx"><p id="9c2d" class="js jt ky ju b jv kz jx jy jz la kb kc lb lc kf kg ld le kj kk lf lg kn ko kp ha bi translated"><code class="du mk ml mm mn b"><strong class="ju hy"><em class="hx">connect()</em></strong></code>函数将一个React组件连接到一个Redux存储。<code class="du mk ml mm mn b"><strong class="ju hy"><em class="hx">mapStateToProps</em></strong></code>和<code class="du mk ml mm mn b"><strong class="ju hy"><em class="hx">mapDispatchToProps</em></strong></code>分别处理你的Redux商店的<code class="du mk ml mm mn b"><em class="hx">state</em></code>和<code class="du mk ml mm mn b"><em class="hx">dispatch</em></code>。<code class="du mk ml mm mn b"><em class="hx">state</em></code>和<code class="du mk ml mm mn b"><em class="hx">dispatch</em></code>将作为第一个参数提供给你的<code class="du mk ml mm mn b"><em class="hx">mapStateToProps</em></code>或<code class="du mk ml mm mn b"><em class="hx">mapDispatchToProps</em></code>函数。</p></blockquote><pre class="kr ks kt ku fd mt mn mu mv aw mw bi"><span id="2045" class="lw iv hx mn b fi mx my l mz na">import React, { Component } from 'react';<br/>import logo from './logo.svg';<br/>import './App.css';</span><span id="cf59" class="lw iv hx mn b fi nb my l mz na">//Redux components<br/>import {<strong class="mn hy">sendData</strong> , <strong class="mn hy">getData</strong>} from './actions/dashboardAction'<br/>import {<strong class="mn hy">connect</strong> } from 'react-redux'<br/>import {<strong class="mn hy">bindActionCreators</strong>} from 'redux'</span><span id="391f" class="lw iv hx mn b fi nb my l mz na">class App extends Component {<br/>  constructor(props){<br/>    super();<br/>    this.state = {<br/>      response: '',<br/>      post: '',<br/>      responseToPost: '',<br/>    };<br/>    this.handleSubmit = this.handleSubmit.bind(this);<br/>    this.callApi = this.callApi.bind(this);<br/>  }<br/>  <br/>  <br/>  componentDidMount() {<br/>    this.callApi();<br/>  }<br/>  <br/>  callApi = () =&gt; {    <br/>   <strong class="mn hy"> this.props.getData('/api/hello');</strong><br/>  };<br/>  <br/>  handleSubmit = () =&gt; {<br/>    <strong class="mn hy">this.props.sendData('/api/data',{ post: this.state.post });<br/></strong>  };<br/>  <br/>render() {<br/>    return (<br/>      &lt;div className="App"&gt;<br/>        &lt;header className="App-header"&gt;<br/>          &lt;img src={logo} className="App-logo" alt="logo" /&gt;<br/>          &lt;p&gt;<br/>            Edit &lt;code&gt;src/App.js&lt;/code&gt; and save to reload.<br/>          &lt;/p&gt;<br/>          &lt;a<br/>            className="App-link"<br/>            href="<a class="ae hu" href="https://reactjs.org" rel="noopener ugc nofollow" target="_blank">https://reactjs.org</a>"<br/>            target="_blank"<br/>            rel="noopener noreferrer"<br/>          &gt;<br/>            Learn React<br/>          &lt;/a&gt;<br/>        &lt;/header&gt;<br/>        &lt;p&gt;{this.props.getDataFromBackend.express}&lt;/p&gt;<br/>        &lt;div&gt;<br/>          &lt;p&gt;<br/>            &lt;strong&gt;Post to Server:&lt;/strong&gt;<br/>          &lt;/p&gt;<br/>          &lt;input<br/>            type="text"<br/>            value={this.state.post}<br/>            onChange={e =&gt; this.setState({ post: e.target.value })}<br/>          /&gt;<br/>          &lt;button onClick={this.handleSubmit}&gt;Submit&lt;/button&gt;<br/>        &lt;/div&gt;<br/>        &lt;p style={{color : 'blue'}}&gt;&lt;b&gt;{this.props.dataFromBackend.data}&lt;/b&gt;&lt;/p&gt;<br/>      &lt;/div&gt;<br/>    );<br/>  }<br/>}</span><span id="8dff" class="lw iv hx mn b fi nb my l mz na">//React Redux connecting code</span><span id="b49d" class="lw iv hx mn b fi nb my l mz na">function <strong class="mn hy">mapStateToProps</strong>(state){<br/>  return {<br/>   dataFromBackend : state.dashboardReducer.dataFromBackend,<br/>   getDataFromBackend : state.dashboardReducer.getDataFromBackend<br/>  }<br/>}</span><span id="7266" class="lw iv hx mn b fi nb my l mz na">const <strong class="mn hy">mapDispatchToProps</strong> = dispatch =&gt; bindActionCreators({<br/>  sendData,<br/>  getData<br/>},dispatch);</span><span id="2857" class="lw iv hx mn b fi nb my l mz na">export default <strong class="mn hy">connect</strong>(mapStateToProps, mapDispatchToProps)(App);</span></pre><p id="e08d" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">React-Redux-Express应用程序的最终文件夹结构将如下所示</p><figure class="kr ks kt ku fd hj er es paragraph-image"><div class="er es nc"><img src="../Images/f1726edf483ea184f71837257bad4c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*jOJV-IWM8Pp_CZ1MtOPWDA.png"/></div></figure><h1 id="0e67" class="iu iv hx bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">运行应用程序</h1><p id="fccb" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">完成上述所需的代码更改后，在项目根文件夹(<code class="du mk ml mm mn b">react-redux-express-app</code>)中运行<strong class="ju hy"> <em class="ky"> npm start </em> </strong>命令</p><pre class="kr ks kt ku fd mt mn mu mv aw mw bi"><span id="078e" class="lw iv hx mn b fi mx my l mz na">npm start</span></pre><p id="65d3" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">这将启动React应用程序并同时运行服务器。</p><p id="a8a8" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">现在导航到<code class="du mk ml mm mn b"><a class="ae hu" href="http://localhost:3000/" rel="noopener ugc nofollow" target="_blank">http://localhost:3000</a></code>，您将点击React Redux应用程序，显示来自我们的<code class="du mk ml mm mn b">GET</code>快速路线的消息。</p><figure class="kr ks kt ku fd hj er es paragraph-image"><div class="ab fe cl nd"><img src="../Images/db7638fda00d99a3348bd4fcead82fe7.png" data-original-src="https://miro.medium.com/v2/0*r42rdRGefURtiqqE"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">React Redux Application displaying data fetched from Node Express backend</figcaption></figure><p id="d53a" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated"><strong class="ju hy">在</strong> <a class="ae hu" href="https://github.com/Pushpraj153/react-redux-express-app" rel="noopener ugc nofollow" target="_blank"> <strong class="ju hy"> GitHub资源库</strong> </a>上获取完整源代码</p><h1 id="4cac" class="iu iv hx bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">结论</h1><p id="7dde" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">在这篇文章中，我们学习了如何将Redux与react应用程序集成，以保持远离React组件的全局状态。</p><p id="3f72" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">前一篇文章:<a class="ae hu" rel="noopener" href="/walmartglobaltech/creating-react-redux-express-full-stack-application-part-i-82959d847802">创建React Redux Express全栈应用程序第一部分</a></p><p id="c7d7" class="pw-post-body-paragraph js jt hx ju b jv kz jx jy jz la kb kc kd lc kf kg kh le kj kk kl lg kn ko kp ha bi translated">感谢您的阅读。编码快乐！</p></div></div>    
</body>
</html>