<html>
<head>
<title>A Cruncher Choice JPA or JDBC</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">克朗彻选择JPA或JDBC</h1>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/a-cruncher-choice-jpa-or-jdbc-85c589f584a9?source=collection_archive---------0-----------------------#2022-04-01">https://medium.com/walmartglobaltech/a-cruncher-choice-jpa-or-jdbc-85c589f584a9?source=collection_archive---------0-----------------------#2022-04-01</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><blockquote class="ie if ig"><p id="3465" class="ih ii ij ik b il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf ha bi translated">你的系统是你选择的结果。</p></blockquote><p id="d2af" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">在开发一个成功的后端时，最重要的一步是选择正确的技术。为什么？因为创造一个产品不仅仅是一个功能性的设计，也是一个安全、稳定、快捷的设计。</p><p id="9ed7" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><em class="ij">让我们深入研究一下数据库操作的框架……</em></p><h1 id="0611" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated"><strong class="ak">什么是JDBC？</strong></h1><p id="3bd5" class="pw-post-body-paragraph ih ii hh ik b il kh in io ip ki ir is jg kj iv iw jh kk iz ja ji kl jd je jf ha bi translated"><strong class="ik hi"> Java数据库连接</strong> (JDBC)是Java编程语言的应用编程接口(API)，定义了客户端如何访问数据库。</p><p id="7a72" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">1997年2月，太阳微系统公司发布了JDBC作为JDK的一部分。程序员可以使用这些标准接口和类来编写连接数据库、发送SQL查询和处理结果的应用程序。</p><p id="453f" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">我们可以说JDBC是Java世界和数据库世界之间的桥梁。毕竟，当我们想要将数据库连接到应用程序时，我们首先要寻找的是JDBC驱动程序。</p><p id="d00f" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">JDBC的优点</strong></p><ul class=""><li id="5f96" class="km kn hh ik b il im ip iq jg ko jh kp ji kq jf kr ks kt ku bi translated">简单的SQL处理</li><li id="b765" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">大型数据的良好性能</li><li id="ea6f" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">非常适合分秒必争的应用</li><li id="cd28" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">简单的语法如此容易学习</li><li id="5d0b" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">它在需要完全控制执行的应用程序中很有用。</li></ul><p id="f3bc" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">JDBC的缺点</strong></p><ul class=""><li id="5391" class="km kn hh ik b il im ip iq jg ko jh kp ji kq jf kr ks kt ku bi translated">大量编程开销</li><li id="5ee4" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">没有封装</li><li id="80c4" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">很难实现MVC概念</li><li id="6738" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">查询是特定于DBMS的</li></ul><h1 id="fd53" class="jj jk hh bd jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg bi translated"><strong class="ak">JPA是什么？</strong></h1><p id="1101" class="pw-post-body-paragraph ih ii hh ik b il kh in io ip ki ir is jg kj iv iw jh kk iz ja ji kl jd je jf ha bi translated">JPA是一个Java标准，用于将Java对象绑定到关系数据库中的记录。我们可以说这是ORM可能的解决方案之一，有了它，开发人员可以使用Java Objects(POJO)在关系数据库上执行CRUD操作。</p><p id="fd8f" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">Java持久性API的第一个版本JPA 1.0发布于2006年，是EJB 3.0规范的一部分，目的是减少对象映射的样板代码，并对开发人员隐藏SQL。</p><p id="0c1c" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">许多供应商都提供了JPA规范的实现，比如Hibernate、Toplink、iBatis、OpenJPA等。实际上，Hibernate和大多数其他JPA提供者使用JDBC来读写数据库。</p><figure class="lb lc ld le fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es la"><img src="../Images/35ae96f29398f04b69d670ad0b6ec2b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*QI-lYwgqNtFEIfqeI2TteA.jpeg"/></div></div></figure><p id="7c42" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">对于系统架构师来说，选择哪一个来与后端数据库进行通信是一个艰难的决定，因为JPA和JDBC使用非常不同的方法来处理持久层。</p><p id="5b50" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">JPA和JDBC的主要区别在于它们的抽象层次。JDBC是与数据库交互的底层标准。JPA是用于相同目的的更高级标准。有了JDBC，你将不得不写所有的SQL东西，验证，ORM，事务管理。另一方面，您可以使用JPA直接用业务逻辑编码，因为JPA将处理所有的SQL内容和ORM任务。</p><p id="15c0" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">JPA的优点</strong></p><ul class=""><li id="d8b3" class="km kn hh ik b il im ip iq jg ko jh kp ji kq jf kr ks kt ku bi translated">提供封装，让开发人员专注于业务逻辑。</li><li id="05b5" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">与java beans验证集成，简化验证</li><li id="fb43" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">提供数据库独立性</li><li id="bd37" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">单个请求管理单个事务中的所有SQL。</li></ul><p id="954b" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">JPA的缺点</strong></p><ul class=""><li id="b8ac" class="km kn hh ik b il im ip iq jg ko jh kp ji kq jf kr ks kt ku bi translated">不适合批量交易。消耗太多内存。</li><li id="62d5" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">不是线程安全的。</li><li id="aa01" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">需要更好地理解所发生的情况，以指定额外的提取并提高性能。</li><li id="ec8b" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">在大批量处理时，JPA比JDBC慢4倍。</li><li id="1121" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf kr ks kt ku bi translated">数据库表之间的映射可能有点困难。</li></ul></div><div class="ab cl lm ln go lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ha hb hc hd he"><h1 id="5026" class="jj jk hh bd jl jm lt jo jp jq lu js jt ju lv jw jx jy lw ka kb kc lx ke kf kg bi translated">Spring Data-JPA和Spring-Data-JDBC的性能比较…</h1><p id="35d6" class="pw-post-body-paragraph ih ii hh ik b il kh in io ip ki ir is jg kj iv iw jh kk iz ja ji kl jd je jf ha bi translated">我创建了演示应用程序来评估和理解由<a class="ae ly" href="https://spring.io/projects/spring-data" rel="noopener ugc nofollow" target="_blank"> Spring Data Framework提供的两个模块。</a></p><ol class=""><li id="95a5" class="km kn hh ik b il im ip iq jg ko jh kp ji kq jf lz ks kt ku bi translated">春天-数据-https://github.com/rkDeependra/Spring-JDBC-Demo【JDBC:】</li><li id="e783" class="km kn hh ik b il kv ip kw jg kx jh ky ji kz jf lz ks kt ku bi translated">春天-数据-JPA:<a class="ae ly" href="https://github.com/rkDeependra/Spring-JPA-Demo" rel="noopener ugc nofollow" target="_blank">https://github.com/rkDeependra/Spring-JPA-Demo</a></li></ol><p id="726c" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">通过Spring-Data对JPA和JDBC模块进行了性能分析，我发现在逐个插入和批量插入中，JDBC的性能明显优于JPA。</p><p id="1731" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated">考虑到JPA的产品，如果实现时注意流程的细节&amp;根据需要使用，这种差异是相当大的。</p><figure class="lb lc ld le fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es ma"><img src="../Images/147a8f5f3fda32e28915072b3865ab72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rpX8JMbJU912Wwn6XNnFMA.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">JBDC is ~20% faster than JPA</figcaption></figure><figure class="lb lc ld le fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es mf"><img src="../Images/1def39a62809bb81fc171f26470e6914.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0yqVP5vNrskW6-0xiN8IrQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">JDBC is ~4% faster than JPA</figcaption></figure><blockquote class="ie if ig"><p id="efc9" class="ih ii ij ik b il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf ha bi translated">记录被同步插入。</p><p id="d99f" class="ih ii ij ik b il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf ha bi translated">分析中使用的批量为100</p><p id="1232" class="ih ii ij ik b il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf ha bi translated">性能分析中使用的数据库是Microsoft Azure-SQL。</p><p id="5694" class="ih ii ij ik b il im in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf ha bi translated">SQL表是用自动递增的SQL生成id创建的。(身份)</p></blockquote></div><div class="ab cl lm ln go lo" role="separator"><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr ls"/><span class="lp bw bk lq lr"/></div><div class="ha hb hc hd he"><h2 id="9a8b" class="mg jk hh bd jl mh mi mj jp mk ml mm jt jg mn mo jx jh mp mq kb ji mr ms kf mt bi translated">总结</h2><p id="6faf" class="pw-post-body-paragraph ih ii hh ik b il kh in io ip ki ir is jg kj iv iw jh kk iz ja ji kl jd je jf ha bi translated"><em class="ij"> JPA的ORM映射是其相对于JDBC的主要优势，因为它将面向对象的Java代码转换到后端数据库，而不需要耗时、易错的编码。</em></p><p id="bdc9" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><em class="ij">但是JDBC允许你直接用数据库做更多的事情&amp;给予更多的控制。</em></p><p id="7007" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><em class="ij">编码时间和细粒度控制之间是有权衡的。</em></p><p id="defc" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><em class="ij">在最终确定一个框架之前，必须设计并理解应用程序和用途的未来需求。</em></p><p id="7267" class="pw-post-body-paragraph ih ii hh ik b il im in io ip iq ir is jg iu iv iw jh iy iz ja ji jc jd je jf ha bi translated"><strong class="ik hi">进一步阅读</strong></p><div class="mu mv ez fb mw mx"><a href="https://spring.io/projects/spring-data-jdbc" rel="noopener  ugc nofollow" target="_blank"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="bd hi fi z dy nc ea eb nd ed ef hg bi translated">JDBC春季数据</h2><div class="ne l"><h3 class="bd b fi z dy nc ea eb nd ed ef dx translated">Spring数据存储库的灵感来自Eric Evans所著的《领域驱动设计》一书中描述的存储库…</h3></div><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">spring.io</p></div></div></div></a></div><div class="mu mv ez fb mw mx"><a href="https://spring.io/projects/spring-data-jpa#overview" rel="noopener  ugc nofollow" target="_blank"><div class="my ab dw"><div class="mz ab na cl cj nb"><h2 class="bd hi fi z dy nc ea eb nd ed ef hg bi translated">春季数据JPA</h2><div class="ne l"><h3 class="bd b fi z dy nc ea eb nd ed ef dx translated">提高您的Java代码水平，探索Spring能为您做什么。</h3></div><div class="nf l"><p class="bd b fp z dy nc ea eb nd ed ef dx translated">spring.io</p></div></div></div></a></div></div></div>    
</body>
</html>