<html>
<head>
<title>Trusting Metrics at Pinterest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Pinterest的信任指标</h1>
<blockquote>原文：<a href="https://medium.com/pinterest-engineering/trusting-metrics-at-pinterest-ed76307e10a0?source=collection_archive---------0-----------------------#2021-06-22">https://medium.com/pinterest-engineering/trusting-metrics-at-pinterest-ed76307e10a0?source=collection_archive---------0-----------------------#2021-06-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="83ce" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Ryan Cooke |工程经理</p><p id="729e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">和许多科技公司一样，Pinterest严重依赖数据来帮助知情决策和推动机器学习。这种策略从根本上依赖于数据的准确性。多年来，我们一直致力于改善信任核心决策数据背后的流程，并确保指标保持准确。</p><h1 id="2416" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">数据是如何出错的</h1><p id="c5e2" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">对于那些没有考虑过度量标准的人来说，这似乎是一个奇怪的问题。像每日活跃用户(DAU)这样的指标可能听起来很容易衡量，但这里有一些这样简单的指标可能会出错的例子:</p><ul class=""><li id="533d" class="kf kg hh ig b ih ii il im ip kh it ki ix kj jb kk kl km kn bi translated">该应用程序的扩展版本可以决定保持身份验证令牌新鲜；他们可以每天自动登录用户，而不管用户是否实际使用了扩展。</li><li id="a786" class="kf kg hh ig b ih ko il kp ip kq it kr ix ks jb kk kl km kn bi translated">对于一个平台来说，在午夜过后仍然活跃的用户可能在这两天都被算作活跃用户，但对于另一个平台来说则不是。</li><li id="de0e" class="kf kg hh ig b ih ko il kp ip kq it kr ix ks jb kk kl km kn bi translated">使用浏览器扩展等不符合条件的活动可以算作DAU。</li></ul><p id="8cea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">尽管有这些情况，记录活跃用户往往是最简单的情况之一，所以我将继续使用它作为例子。</p><h1 id="fd3c" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">公制认证</h1><p id="c1ae" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">为了确保指标的准确性，我们创建了一个“认证”流程。这个认证过程(如图1所示)有三个关键步骤:</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es kt"><img src="../Images/2b744123e1c237f4c8edfe1c306119fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BiH20Q-sFlkhRmQm"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx">Figure 1: The three-step process</figcaption></figure><h2 id="a693" class="lj jd hh bd je lk ll lm ji ln lo lp jm ip lq lr jq it ls lt ju ix lu lv jy lw bi translated">步骤1:确定正确的行为</h2><p id="98a0" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">在开始之前，对什么是正确的行为有一个清晰的认识是很重要的。我们为每个经过认证的指标创建两份文档。给出明确定义的<strong class="ig hi">产品规格，</strong>(如活跃用户):</p><ul class=""><li id="22f5" class="kf kg hh ig b ih ii il im ip kh it ki ix kj jb kk kl km kn bi translated">访问Pinterest网站或本地移动应用程序</li><li id="401d" class="kf kg hh ig b ih ko il kp ip kq it kr ix ks jb kk kl km kn bi translated">使用非现场工具(如Web浏览器扩展、Web Pin it按钮、移动Web Facebook Messenger扩展或iOS/Android share扩展)进行Pin或repins</li></ul><p id="4bf9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个定义给出了考虑指标的驱动核心，但文档继续概述边缘情况，并描述各种情况下的正确行为(例如，“打开Pinterest，但在UI可见之前离开”不应算作活跃用户)。</p><p id="c9a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">产品规格</strong>由<strong class="ig hi">技术规格</strong>补充，后者更多是为工程师编写的。它遵循记录事件和元数据的确切方法，并准确记录每个平台如何实现一致的实现。</p><p id="f5ca" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些步骤看似显而易见，但我们审计的每个指标都有定义上的问题。<strong class="ig hi">产品规格</strong>和<strong class="ig hi">技术规格</strong>确保每个人在考虑一个指标时都有完全相同的含义。这些规范还可以为思考未来的用例提供一个框架。我建议数据的消费者创建定义，其余的规范围绕定义编写。对于工程师来说，为可以用简单的解决方案测量的内容提供反馈是合理的。日志解决方案越简单，出现问题的可能性就越小。</p><h2 id="6eb0" class="lj jd hh bd je lk ll lm ji ln lo lp jm ip lq lr jq it ls lt ju ix lu lv jy lw bi translated">步骤2:实施指标/解决现有问题</h2><p id="5e36" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">下一个主要步骤是使度量准确。客户工程师只需遵循定义并相应地实现，就可以轻松完成第一层。在实践中，会有一些不合理的边缘情况和奇怪的事情让客户工程师去预料。</p><p id="99f6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了找到边缘案例，我们创建数据检查器标准，帮助证明数据符合我们的预期。如果数据没有通过特定的“检查”，它们通常会发出警报对于DAU的例子，我们的一个更成功的检查类型寻找“无法解释的DAU”这将查找具有活动用户事件但缺少我们期望的其他活动的用户，比如看到一个pin。我们很少在这些检查上追求100%的完美，只要能发现异常就够了。通过数据发现问题和发布修复之间的反复往往决定了完成认证需要多长时间。</p><p id="324d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，我们可以通过UI测试证明一个指标是准确的。对于DAU来说，最简单的情况是打开应用程序，登录并确认用户以DAU的身份登录。与数据检查不同，这些允许我们在变更发布之前发现问题。我们通常根据我们概述的产品规格案例和用例所描述的事件数量来决定UI测试的编写。</p><h2 id="e11c" class="lj jd hh bd je lk ll lm ji ln lo lp jm ip lq lr jq it ls lt ju ix lu lv jy lw bi translated">步骤3:保持指标的准确性</h2><p id="0f03" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">完成上述步骤后，您应该有一个准确的指标。但是如果你希望这个指标继续准确，你需要做更多的工作。重复运行上一步中进行的UI测试和数据检查，以证明指标是准确的。这意味着UI测试中的失败不能被发布，数据检查器将导致调查。关键是要记住，揭示一个指标为什么在生产中变动要比在发布前发现它困难得多，而且潜在的成本也很高。</p><p id="c9ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，我们会定期(每季度或每年，具体取决于指标)对指标进行运行状况检查。这包括审查检查器，以确保它们仍然有效地运行，并与产品团队合作，以确保没有新的用例需要考虑。</p><h1 id="575f" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">最后的想法</h1><p id="991b" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">以上三个步骤概述了我们的指标认证流程。这一过程只有在每个平台(iOS、Web、Android)上的工程师、数据工程师和不知疲倦的TPMs的大量跨职能工作下才有可能实现。我们只为需要尽可能接近完美的度量推荐它。</p><p id="e6f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lx">要在Pinterest了解更多工程知识，请查看我们的</em> <a class="ae ly" href="https://medium.com/pinterest-engineering" rel="noopener"> <em class="lx">工程博客</em> </a> <em class="lx">，并访问我们的</em><a class="ae ly" href="https://labs.pinterest.com/" rel="noopener ugc nofollow" target="_blank"><em class="lx">Pinterest Labs</em></a><em class="lx">网站。要查看和申请空缺职位，请访问我们的</em> <a class="ae ly" href="https://www.pinterestcareers.com/homepage" rel="noopener ugc nofollow" target="_blank"> <em class="lx">职业</em> </a> <em class="lx">页面。</em></p></div></div>    
</body>
</html>