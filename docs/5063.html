<html>
<head>
<title>4 Reasons to switch to a multi-tenant architecture with Mendix</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Mendix转向多租户架构的4个理由</h1>
<blockquote>原文：<a href="https://medium.com/mendix/4-reasons-to-switch-to-a-multi-tenant-architecture-with-mendix-447ae10107b7?source=collection_archive---------0-----------------------#2020-10-18">https://medium.com/mendix/4-reasons-to-switch-to-a-multi-tenant-architecture-with-mendix-447ae10107b7?source=collection_archive---------0-----------------------#2020-10-18</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/6d88c72154ccbf8acf1842a29aff1c31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6IBtZXcuht-uH5CCwOtSeQ.png"/></div></div></figure><div class=""/><p id="6b3b" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">在这篇博文中，我想看看多租户应用的一些优势，并警告与这种架构相关的风险。</p><p id="9df8" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">在我们开始之前，让我们先定义一下这篇文章中要用到的术语:</p><ul class=""><li id="6843" class="jz ka if bd b je jf ji jj jm kb jq kc ju kd jy ke kf kg kh dt translated"><strong class="bd ki">租户</strong> —是一个由一组用户代表的实体，这些用户共享具有特定权限的普通访问权限，通常购买SaaS产品的许可证，也称为客户/客户端。</li><li id="6ff4" class="jz ka if bd b je kj ji kk jm kl jq km ju kn jy ke kf kg kh dt translated"><strong class="bd ki">单租户架构</strong> —每个租户都有自己独立的数据库和软件实例。本质上，租户之间没有资源或数据共享。</li><li id="676e" class="jz ka if bd b je kj ji kk jm kl jq km ju kn jy ke kf kg kh dt translated"><strong class="bd ki">多租户架构</strong>——通常只有一个数据库和软件实例来满足所有租户的需求。租户数据是孤立的，对其他租户不可见。</li></ul><figure class="kp kq kr ks fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ko"><img src="../Images/939a167f6c0b910494f66a2c07252f9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*x7TJsrIJ1mwY03t2"/></div></div><figcaption class="kt ku fg fe ff kv kw bd b be z ek">Comparison between different app architectures. Credits to <a class="ae kx" href="https://www.peoplefluent.com/blog/learning/single-tenant-lms-vs-multi-tenant-lms-security/" rel="noopener ugc nofollow" target="_blank">https://www.peoplefluent.com/blog/learning/single-tenant-lms-vs-multi-tenant-lms-security/</a></figcaption></figure><h1 id="861c" class="ky kz if bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv dt translated">每个客户端的成本更低</h1><p id="86a9" class="pw-post-body-paragraph jc jd if bd b je lw jg jh ji lx jk jl jm ly jo jp jq lz js jt ju ma jw jx jy hn dt translated">Mendix许可证并不便宜。Mendix云资源也不是。如果每个客户都需要单独的许可证和云实例，那么这些成本需要包含在您的产品价格中。与此相反，对于多租户应用，每个客户端只需要一个Mendix许可证和一个云实例。这很容易每年节省一大笔钱。</p><p id="b917" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">可惜，天下没有免费的午餐。多租户应用带来了更高的风险，因为正确配置和构建您的Mendix模型变得至关重要，尤其是访问权限和许可。想象一下，如果由于建模错误，一个租户突然看到另一个租户的所有用户数据或发票，会发生什么！幸运的是，application code reviewer在这里检查没有这样的错误被忽视，这要感谢<a class="ae kx" href="https://sdf-docs.mansystems.com/docs/acr-rules/security/accespathuser/" rel="noopener ugc nofollow" target="_blank">几个专门为多租户应用设计的规则</a>。</p><h1 id="6c85" class="ky kz if bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv dt translated">更好的资源利用</h1><p id="916b" class="pw-post-body-paragraph jc jd if bd b je lw jg jh ji lx jk jl jm ly jo jp jq lz js jt ju ma jw jx jy hn dt translated">大多数软件表现出所谓的尖峰使用模式，即负载在时间上不是平均分布的，而是倾向于在高活动期间达到尖峰。当每个客户端都有单独的运行时和数据库实例时，每个实例都需要足够大，以适应峰值。这可能意味着您需要一个大部分时间都处于空闲状态的大型云节点，以应对偶尔出现的峰值。</p><figure class="kp kq kr ks fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mb"><img src="../Images/a656484f0a232a5b79d151586674d4bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oQloxdc_oL4w6t9X"/></div></div><figcaption class="kt ku fg fe ff kv kw bd b be z ek">Example of spiky behavior.</figcaption></figure><p id="ac65" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">但是，当多个租户使用同一个节点时，负载更有可能均匀分布。此外，如果一个租户出现峰值，那么可以充分利用云节点的能力，从而更好地利用可用的计算资源。</p><p id="9fac" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">这也是一把双刃剑，存在单个租户对所有租户的性能产生负面影响的风险。因此，使用Mendix特定工具检查性能至关重要，例如<a class="ae kx" href="https://www.mansystems.com/smart-digital-factory/tooling/apd" rel="noopener ugc nofollow" target="_blank">应用性能诊断</a>。否则，由于一个行为不端的租户，您可能会收到许多关于您的产品运行缓慢的投诉。</p><h1 id="26ab" class="ky kz if bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv dt translated">添加客户变得很简单</h1><p id="1c19" class="pw-post-body-paragraph jc jd if bd b je lw jg jh ji lx jk jl jm ly jo jp jq lz js jt ju ma jw jx jy hn dt translated">对于单租户架构，添加一个新客户意味着为每个系统建立一个新的单独的实例，比如运行时和数据库。通常情况下，系统需要进行初始化，并填充正常运行所需的配置和其他数据。</p><p id="a05c" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">在多租户架构中，添加新租户变得像在数据库中添加新记录一样简单。</p><p id="fbc9" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">然而，“权力越大，责任越大”，因此必须小心，不同的租户在他们可以看到的数据中是完全分离的。为了确保这一点，<a class="ae kx" href="https://www.mansystems.com/smart-digital-factory/tooling/ams" rel="noopener ugc nofollow" target="_blank">应用模型安全</a>工具会扫描应用，并报告特定用户可以查看和编辑的数据。</p><h1 id="7412" class="ky kz if bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv dt translated">易于维护</h1><p id="0209" class="pw-post-body-paragraph jc jd if bd b je lw jg jh ji lx jk jl jm ly jo jp jq lz js jt ju ma jw jx jy hn dt translated">单租户配置的另一个常见问题是更新和错误修复。每次发布产品的新版本时，所有租户都需要更新。当客户缓慢且不情愿地采用新版本时，您通常会最终支持您工具的多个版本。这可能会带来很多令人头疼的问题，这是我亲身经历过的。</p><figure class="kp kq kr ks fq hw fe ff paragraph-image"><div class="fe ff mc"><img src="../Images/e30bc2027655fe68f1f9e1a5bacd0e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/0*0kiQtHXxIVVIWk-z"/></div><figcaption class="kt ku fg fe ff kv kw bd b be z ek">The joys of debugging. Credits to <a class="ae kx" href="http://comicstrip.com/" rel="noopener ugc nofollow" target="_blank">http://comicstrip.com/</a></figcaption></figure><p id="5ef5" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">幸运的是，有了多租户设置，这些问题就迎刃而解了，因为所有租户都可以轻松升级，而且他们都将使用相同的最新版本的产品。</p><p id="607f" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">只要用<a class="ae kx" href="https://www.mansystems.com/smart-digital-factory/tooling/acr" rel="noopener ugc nofollow" target="_blank">应用程序代码审查人员</a>扫描新发布的软件，确保它们不包含任何错误，应用程序代码审查人员会检查100多种常见的错误和代码气味。否则，一个小错误可能会影响所有的租户，破坏客户满意度。</p><h1 id="df0b" class="ky kz if bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv dt translated">结束语</h1><p id="a651" class="pw-post-body-paragraph jc jd if bd b je lw jg jh ji lx jk jl jm ly jo jp jq lz js jt ju ma jw jx jy hn dt translated">多租户架构为那些选择采用它的人提供了许多好处。然而，这些好处伴随着高风险，需要正确管理。否则，它们会严重损害你的产品和品牌。使用Mendix构建多租户应用程序时，使用<a class="ae kx" href="https://www.mansystems.com/smart-digital-factory/tooling" rel="noopener ugc nofollow" target="_blank">正确的工具</a>会带来很大的不同。</p><p id="a420" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">我希望你喜欢阅读这篇文章，并希望它能帮助你构建伟大的应用程序。</p></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hn ho hp hq hr"><p id="c000" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><em class="mk">原载于</em> <a class="ae kx" href="https://www.notion.so/gajduk/740334bec7a740938f646ed7d99270eb?v=c145b965a05e4ed48096041ba018a005" rel="noopener ugc nofollow" target="_blank"> <em class="mk">安德烈·加杜克的博客</em> </a> <em class="mk">。</em></p></div><div class="ab cl md me hb mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="hn ho hp hq hr"><p id="c276" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><em class="mk">来自发布者- </em></p><p id="aa21" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><em class="mk">如果你喜欢这篇文章，你可以在我们的</em> <a class="ae kx" href="https://medium.com/mendix" rel="noopener"> <em class="mk">媒体页面</em> </a> <em class="mk">或我们自己的</em> <a class="ae kx" href="https://developers.mendix.com/community-blog/" rel="noopener ugc nofollow" target="_blank"> <em class="mk">社区博客网站</em> </a> <em class="mk">找到更多类似的内容。</em></p><p id="a330" class="pw-post-body-paragraph jc jd if bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">有兴趣加入我们的社区吗？你可以加入我们的slack社区 <a class="ae kx" href="https://join.slack.com/t/mendixcommunity/shared_invite/zt-hwhwkcxu-~59ywyjqHlUHXmrw5heqpQ" rel="noopener ugc nofollow" target="_blank"> <em class="mk">这里</em> </a> <em class="mk">或者对于那些想要更多参与的人，看看加入我们的聚会</em> <a class="ae kx" href="https://developers.mendix.com/meetups/#meetupsNearYou" rel="noopener ugc nofollow" target="_blank"> <em class="mk">这里</em> </a></p></div></div>    
</body>
</html>