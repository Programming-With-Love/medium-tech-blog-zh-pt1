<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://medium.com/oracledevs/migrate-an-on-premise-two-node-oracle-rac-db-to-oracle-cloud-infrastructure-rac-db-using-oci-118aa358f6d8?source=collection_archive---------2-----------------------#2021-04-22">https://medium.com/oracledevs/migrate-an-on-premise-two-node-oracle-rac-db-to-oracle-cloud-infrastructure-rac-db-using-oci-118aa358f6d8?source=collection_archive---------2-----------------------#2021-04-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><p id="6042" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">使用OCI数据库迁移工具社区映像将本地双节点Oracle RAC数据库迁移到Oracle云基础架构RAC数据库</p><h1 id="d881" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">简介</strong></h1><p id="a09a" class="pw-post-body-paragraph hf hg hh hi b hj jc hl hm hn jd hp hq hr je ht hu hv jf hx hy hz jg ib ic id ha bi translated">在<a class="ae jh" rel="noopener" href="/oracledevs/deploy-oracle-database-migration-tools-image-on-oci-zdm-many-more-oracle-db-migration-utilities-f36dfc538f49">的前一篇文章</a>中，我们展示了如何从OCI社区市场部署ZDM 21c迁移工具实例作为迁移中心。在这篇博文中，我们将使用预装了ZDM 21c的OCI社区映像，将本地RAC数据库实际迁移到Oracle云基础架构(OCI)。</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="ab fe cl jn"><img src="../Images/f5ab3a345c0518e69e6791f84c023c4d.png" data-original-src="https://miro.medium.com/v2/format:webp/1*1YZayH971eAEKxpaypTMAA.png"/></div></figure><p id="d990" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq"> ZDM 21c支持4种Oracle数据库迁移:</strong></p><ol class=""><li id="b9b2" class="jr js hh hi b hj hk hn ho hr jt hv ju hz jv id jw jx jy jz bi translated">使用Dataguard进行物理联机</li></ol><p id="90f4" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">2.物理离线使用备份恢复vis对象存储</p><p id="b2c9" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">3.使用数据泵的逻辑脱机</p><p id="a1c2" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">4.使用GoldenGate的逻辑在线</p><p id="60e0" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">物理迁移本质上是使用传统工具(如RMAN和Dataguard)逐块复制数据库，但通过使用Oracle对象存储传输备份副本来增强这些工具。逻辑迁移是使用模式/表等副本的迁移。</p><p id="17f8" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">在这篇博文中，我们将进行从RAC源到RAC目标的物理离线迁移。在后续的博客文章中，我将进行物理在线、逻辑离线和逻辑在线迁移。</p><h1 id="5bc8" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">物理离线迁移—网络架构&amp;环境</strong></h1><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ka"><img src="../Images/4f928bb38986885925c924a5c7bb45f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ndfCBVUnK6NKg4Y_d9NkrQ.png"/></div></div><figcaption class="kf kg et er es kh ki bd b be z dx">OCI Network Visualiser</figcaption></figure><figure class="ji jj jk jl fd jm er es paragraph-image"><div class="ab fe cl jn"><img src="../Images/fad04d01f6e44fe43d72e40e79fea57b.png" data-original-src="https://miro.medium.com/v2/format:webp/1*u3vqmlknml6Mua6E8UUqAA.png"/></div><figcaption class="kf kg et er es kh ki bd b be z dx">Network Diagram</figcaption></figure><p id="40b6" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq">源RAC数据库参数</strong></p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es kj"><img src="../Images/cc19a8eafba0665d223a52bea5a8a099.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZU542Vu5KQYJ25bh_znZZA.png"/></div></div></figure><p id="5937" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq">目标RAC数据库参数</strong></p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es kk"><img src="../Images/b22aebfaa1b7b0d09c0d70908587f712.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Swbe2eZlCF86EdFYvDdvuw.png"/></div></div></figure><p id="65c6" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><a class="ae jh" rel="noopener" href="/oracledevs/deploy-oracle-database-migration-tools-image-on-oci-zdm-many-more-oracle-db-migration-utilities-f36dfc538f49"> <strong class="hi jq"> ZDM社区迁移图片:链接</strong> </a></p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es kl"><img src="../Images/98698730f059a22b405dd1204eb377ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zzfg0nLFmNqtR54ErtDntQ.png"/></div></div></figure><p id="28bb" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq"> OCI斗</strong></p><p id="4705" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">OCI存储区用于存放本地数据库的备份。确保内部部署可以通过端口443访问OCI对象存储</p></div><div class="ab cl km kn go ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ha hb hc hd he"><h1 id="c958" class="ie if hh bd ig ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb bi translated"><strong class="ak">重要前提</strong></h1><ol class=""><li id="c134" class="jr js hh hi b hj jc hn jd hr ky hv kz hz la id jw jx jy jz bi translated">ZDM不提供目标实例。在OCI上使用与源相同的DB_NAME创建一个占位符2节点VMDB系统。创建目标实例时，不要启用自动备份。DB_NAME也应该与Source相同。数据库唯一名称可以不同</li></ol><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es lb"><img src="../Images/41fb8fb380dfa22fe9b640dbe1495c24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zNEyv6JX73NyZ_MW_85VWA.png"/></div></div></figure><p id="60f0" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><a class="ae jh" href="https://docs.oracle.com/en-us/iaas/Content/Database/Tasks/creatingdatabases.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en-us/iaas/Content/Database/Tasks/creating databases . htm</a></p><p id="20fa" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">2.创建从您的内部网络到OCI的IPSec VPN，确保您在所有相关子网中设置了正确的路由规则，并且OCI上每个子网中的所有NSG和ACL以及OnPrem上的网络可以通过端口22和端口443访问对象存储。您应该拥有从迁移工具映像到源数据库和目标数据库的端口22访问权限。源和目标数据库实例都应该可以通过端口443访问Oracle对象存储</p><p id="179d" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><a class="ae jh" href="https://docs.oracle.com/en/solutions/connect-onprem-vpn/index.html#GUID-0FC61D33-5141-40FB-8CB4-7E45353BE486" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en/solutions/connect-on prem-VPN/index . html # GUID-0 fc 61d 33-5141-40f b-8cb 4-7e 45353 be 486</a></p><p id="d4b3" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">3.在您的租赁中创建一个Bucket“RAC database”</p><p id="7fa3" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><a class="ae jh" href="https://www.oracle.com/webfolder/technetwork/tutorials/obe/cloud/ocis/object-storage/object-storage.html" rel="noopener ugc nofollow" target="_blank">https://www . Oracle . com/web folder/tech network/tutorials/OBE/cloud/ocis/object-storage/object-storage . html</a></p><p id="7ede" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">4.在OCI上为您的联合用户创建一个身份验证令牌</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es lc"><img src="../Images/a09ea59e15701df40c8d310c8bc2c0d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3u8RrqC9CiUwd73SwfV7MA.png"/></div></div></figure><p id="9cb1" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><a class="ae jh" href="https://docs.oracle.com/en-us/iaas/Content/Registry/Tasks/registrygettingauthtoken.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en-us/iaas/Content/Registry/Tasks/registrygettingauthtoken . htm</a></p><p id="21dc" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">5.确保本地数据库中的TDE钱包处于“自动登录”状态</p><p id="166a" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">6.确保您拥有源数据库的SYS口令</p></div><div class="ab cl km kn go ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ha hb hc hd he"><h1 id="769e" class="ie if hh bd ig ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb bi translated"><strong class="ak">迁移工作流程</strong></h1><ol class=""><li id="aaae" class="jr js hh hi b hj jc hn jd hr ky hv kz hz la id jw jx jy jz bi translated"><strong class="hi jq">使用OCI社区市场映像提供数据库迁移工具实例</strong></li></ol><p id="fe9a" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">转到OCI控制台&gt;计算&gt;实例&gt;创建实例</p><p id="ddac" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">选择图像源为“社区图像”→“Oracle数据库迁移工具图像:ZDM 21c +许多其他工具”</p><p id="c5e4" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><em class="ld">注意:如果您想在其他地区使用“Oracle数据库迁移工具”社区映像，请使用此&gt;&gt;</em><a class="ae jh" href="https://github.com/shadabshaukat/OCI_DBMigrationTools_Image" rel="noopener ugc nofollow" target="_blank"><em class="ld">Github Repo</em></a>中的Zip包从OCI资源管理器部署它</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es le"><img src="../Images/0ac75b57bf816d8a71b65d73258a930a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bt4OvcHT-0g9hMVBPdXZJA.png"/></div></div></figure><p id="60c9" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq">非常重要的注意事项:</strong>确保主机名/实例名始终为“<em class="ld"> zdm-migrate-v3 </em>”，因为zdm安装与主机名相关联。如果您的主机名不同，那么ZDM将无法启动</p><p id="07a7" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq"> 2。登录</strong>实例启动ZDM堆栈</p><p id="5a3c" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ ssh I privkey . PEM OPC @ 152 . x . x . 250</p><p id="88c9" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ cd StopStartZDM_Scripts/</p><p id="cb53" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ ./Start_ZDM.sh</p><p id="228f" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq"> 3。将源数据库节点和目标数据库节点条目添加到迁移工具实例的/etc/hosts文件中</strong></p><p id="21bc" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ sudo vim /etc/hosts</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es lf"><img src="../Images/a702899893e04ceaaed99f6a4dd108a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uGIB9IZwuCxBcU50lw5lxw.png"/></div></div></figure><p id="8df7" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq"> 4。为迁移创建响应文件</strong></p><p id="7990" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ CD ~/ZDM _迁移_脚本/zdm 21 c _模板/</p><p id="171d" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ mv zdm_template.rsp</p><p id="c85b" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">/*对于离线迁移，请根据您的环境更改以下参数*/</p><p id="dd9d" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ vim zdm _物理模板. rsp</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es lg"><img src="../Images/4736bb76e9e557f561155341f17c6b32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OomnaBeJpqGnUjN-UeEejQ.png"/></div></div></figure><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es lh"><img src="../Images/4a4e6327c5cc3d9cb3c8c5b0bce94590.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5vOFi-YlaPNYnrZX5mQ84w.png"/></div></div></figure><p id="c0aa" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq"> TGT数据库唯一名称</strong> =orcl_syd1xk(目标数据库唯一名称)</p><p id="eba0" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq">MIGRATION _ METHOD</strong>= OFFLINE _ PHYSICAL(用于无Dataguard的物理迁移)</p><p id="7602" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq">平台_类型</strong> =VMDB(默认为VMDB)</p><p id="1871" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq">主机</strong>= https://swiftobjectstorage . AP-Sydney-1 . Oracle cloud . com/v1/igfdgfdgdfghgffx(对象存储的URL)</p><p id="73ae" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><a class="ae jh" href="https://swiftobjectstorage.ap-sydney-1.oraclecloud.com/v1/idmldytingzx" rel="noopener ugc nofollow" target="_blank">igfdgfdgdfghgffx</a><em class="ld">→是你的</em> <a class="ae jh" href="https://docs.oracle.com/en-us/iaas/Content/Object/Tasks/understandingnamespaces.htm" rel="noopener ugc nofollow" target="_blank"> <em class="ld">租赁名称空间</em> </a></p><p id="d77d" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq">OPC _ CONTAINER</strong>= RAC database(桶名)</p><p id="b5c7" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq"> 5。在迁移工具主机上创建ssh密钥对，并将publuc密钥添加到源和目标中的所有节点</strong></p><p id="d6f6" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ cd ~/。ssh/</p><p id="3702" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ ssh-keygen</p><p id="4e85" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$卡特彼勒id_rsa.pub</p><p id="251e" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">将此密钥添加到源和目标上所有节点上的<em class="ld"> authorized_key </em>文件中。通过从迁移工具实例ssh到所有4个节点进行测试</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es li"><img src="../Images/6008ae253daadec523d9cde07d77a145.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Amux_NXNObplmRMd7nXjJA.png"/></div></div></figure><p id="d167" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq"> 6。从映像中已提供的模板脚本创建迁移脚本；运行ZDM迁移</strong></p><p id="b160" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ CD ~/ZDM _迁移_脚本/offline/zdm197/</p><p id="bb0f" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ CP ZDM _ * ~/ZDM _迁移_脚本/zdm 21 c _模板/</p><p id="1007" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq"> 7。根据您的环境编辑迁移脚本并添加参数</strong></p><p id="2afe" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ CD ~/ZDM _迁移_脚本/zdm 21 c _模板/</p><p id="d426" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$维姆ZDM_1_Eval.sh</p><p id="74b3" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><em class="ld"> /*这将准备脚本，以便仅在评估模式下运行ZDM，即模拟运行*/ </em></p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="5b21" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><em class="ld"> /*这将准备在迁移模式下运行ZDM，即实际迁移*/ </em></p><p id="383e" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$维姆ZDM_4_Migrate.sh</p><figure class="ji jj jk jl fd jm"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="fe46" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">8。在评估模式下运行ZDM迁移</p><p id="8fb7" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ CD ~/ZDM _迁移_脚本/zdm 21 c _模板/</p><p id="fb86" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ ./ZDM _ 1 _评估. sh</p><p id="65a0" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">检查作业状态</p><p id="3a16" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ ./ZDM_2_JobStatus.sh 1</p><p id="3963" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">如果一切顺利，您应该会看到类似这样的内容</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es ll"><img src="../Images/b714c4f607a5b5623c88ed63b72f130a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cH4HucdB4XmLJvBwNO5SoA.png"/></div></div></figure><p id="cd73" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">9。运行实际的ZDM物理迁移</p><p id="d20d" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ CD ~/ZDM _迁移_脚本/zdm 21 c _模板/</p><p id="e1da" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ ./ZDM _ 4 _迁移. sh</p><p id="3ee5" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">检查作业状态。如果一切顺利，那么所有阶段都应该返回“<strong class="hi jq"> COMPLETED </strong>”，并且数据库已经在离线模式下成功迁移</p><p id="94bc" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">$ ./ZDM_2_JobStatus.sh 2</p><figure class="ji jj jk jl fd jm er es paragraph-image"><div role="button" tabindex="0" class="kb kc di kd bf ke"><div class="er es lm"><img src="../Images/cefc2a42839b0bcd73d2d4fb7e5c5ad8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TMJDh2SrOrYqhs66Y4o03A.png"/></div></div></figure></div><div class="ab cl km kn go ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ha hb hc hd he"><h1 id="6cd6" class="ie if hh bd ig ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb bi translated"><strong class="ak">迁移后和迁移前的一些要点</strong></h1><p id="2c65" class="pw-post-body-paragraph hf hg hh hi b hj jc hl hm hn jd hp hq hr je ht hu hv jf hx hy hz jg ib ic id ha bi translated"><strong class="hi jq">迁移前:</strong></p><ul class=""><li id="a218" class="jr js hh hi b hj hk hn ho hr jt hv ju hz jv id ln jx jy jz bi translated">确保源代码中的FRA有空间，在运行迁移之前做一些内务处理</li><li id="2808" class="jr js hh hi b hj lo hn lp hr lq hv lr hz ls id ln jx jy jz bi translated">根据数据文件+快速恢复区大小确定实例的大小。如果数据文件的总大小+ FRA = 2TB。然后在OCI上启动至少2TB的实例</li><li id="7c13" class="jr js hh hi b hj lo hn lp hr lq hv lr hz ls id ln jx jy jz bi translated">确保源补丁程序集版本匹配，以避免在迁移过程中出现任何意外。当源和目标补丁集版本不同步时，我看到了一些与Datapatch相关的错误。如果您想忽略补丁检查，那么在最终迁移脚本中添加参数<em class="ld">-忽略补丁检查</em></li></ul><p id="a0ee" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi jq">迁移后:</strong></p><ul class=""><li id="ef30" class="jr js hh hi b hj hk hn ho hr jt hv ju hz jv id ln jx jy jz bi translated">根据您的RTP RPO要求，在迁移后在OCI目标数据库上启用自动备份</li><li id="497c" class="jr js hh hi b hj lo hn lp hr lq hv lr hz ls id ln jx jy jz bi translated">如果您运行的是任务关键型数据库，请将OCI数据库的Dataguard创建到另一个区域</li></ul></div><div class="ab cl km kn go ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ha hb hc hd he"><h1 id="c88f" class="ie if hh bd ig ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb bi translated"><strong class="ak">参考文献:</strong></h1><p id="595c" class="pw-post-body-paragraph hf hg hh hi b hj jc hl hm hn jd hp hq hr je ht hu hv jf hx hy hz jg ib ic id ha bi translated">[1]新:Oracle零停机时间迁移21c—<a class="ae jh" href="https://blogs.oracle.com/maa/new:-oracle-zero-downtime-migration-21c" rel="noopener ugc nofollow" target="_blank">https://blogs . Oracle . com/MAA/NEW:-Oracle-Zero-down-Migration-21c</a></p><p id="11d5" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">[2]在OCI部署Oracle数据库迁移工具映像:ZDM +更多Oracle数据库迁移实用程序—<a class="ae jh" rel="noopener" href="/oracledevs/deploy-oracle-database-migration-tools-image-on-oci-zdm-many-more-oracle-db-migration-utilities-f36dfc538f49">https://medium . com/Oracle devs/Deploy-Oracle-Database-Migration-Tools-Image-on-OCI-zdm-Many-More-Oracle-d b-Migration-Utilities-f 36 DFC 538 f 49</a></p><p id="9483" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">[3] ZDM 21c入门—<a class="ae jh" href="https://docs.oracle.com/en/database/oracle/zero-downtime-migration/21.1/index.html" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en/database/Oracle/zero-down-migration/21.1/index . html</a></p><p id="edcb" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">[4]零停机时间的物理迁移迁移—<a class="ae jh" href="https://docs.oracle.com/en/database/oracle/zero-downtime-migration/21.1/zdmug/introduction-to-zero-downtime-migration.html#GUID-9959A6A5-0A1F-4011-8403-387C32F1736C" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en/database/Oracle/Zero-down-Migration/21.1/zdmug/introduction-to-Zero-down-Migration . html # GUID-9959 a6a 5-0A1F-4011-8403-387 c32 f 1736 c</a></p></div></div>    
</body>
</html>