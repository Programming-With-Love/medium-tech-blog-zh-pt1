<html>
<head>
<title>Build Helm Chart For Your Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Build Helm Chart For Your Application</h1>
<blockquote>原文：<a href="https://medium.easyread.co/build-helm-chart-for-your-application-67d74c40eeb2?source=collection_archive---------2-----------------------#2022-03-19">https://medium.easyread.co/build-helm-chart-for-your-application-67d74c40eeb2?source=collection_archive---------2-----------------------#2022-03-19</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/740c5e779908a3a5580ecd5f093155b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*w5v73em5rqd8ZhG1"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@jbcreate_?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Joseph Barrientos</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="56de" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Dalam Mendeploy sebuah Service kubernetes secara manual dalam kita butuh mendefinisikan beberapa object (Kind) yang kita perlukan seperti Service, Deployment, Ingress dan lain sebagainya.</p><p id="73ab" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Cara seperti ini akan dilakukan secara berulang untuk setiap service yang akan dideploy dikubernetes dan ini menjadi kurang efisien karna kita melakukan pekerjaan yang berulang.</p><p id="2968" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Pada Artikel ini saya akan berbagi cara mendeploy service di kubernetes menggunakan Helm Chart, Helm chart adalah package yang format chart, yang dapat mencollect dari file sumber kubernetes.</p><h1 id="ae3a" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Prerequisites</h1><ul class=""><li id="2495" class="lw lx in kc b kd ly kh lz kl ma kp mb kt mc kx md me mf mg bi translated">Helm Version 3. xx or newer</li><li id="f5b7" class="lw lx in kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">Kubectl</li><li id="b94a" class="lw lx in kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated">Docker Image</li></ul><h1 id="0a8b" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Steps</h1><p id="266c" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">Pada artikel ini akan membuat helm chart yang sederhana, kita akan deploy service node dengan menggunakan environment variable (configmap).</p><ul class=""><li id="44bd" class="lw lx in kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">Inisialiasi helm chart menggunakan perintah berikut.</li></ul><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="6259" class="nb kz in mx b gy nc nd l ne nf">helm create (chart name)</span></pre><ul class=""><li id="f6d5" class="lw lx in kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">Secara default akan membuat file seperti pada gambar berikut.</li></ul><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div class="gh gi ng"><img src="../Images/bb3d72055f18afa354bcf3ccdfc56c71.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/0*EkMc-l13KC0QSAjv"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">helm chart</figcaption></figure><ul class=""><li id="2ab7" class="lw lx in kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">Edit pada file <em class="nh"> values.yaml </em> dengan menambahkan repository image container pada bagian image</li></ul><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi ni"><img src="../Images/36c2d6111b7e1c987b4da8f93fc05c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BXWx0ILE0T9-EatQ"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">values.yaml</figcaption></figure><p id="cebc" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc io"> <em class="nh"> NOTE </em> </strong></p><ul class=""><li id="5f36" class="lw lx in kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">Jika repository nya adalah private maka tambahkan secret untuk username dan password repository dengan menggunakan perintah berikut.</li></ul><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="607e" class="nb kz in mx b gy nc nd l ne nf">kubectl create secret docker-registry regcred --docker-server=&lt;your-registry-server&gt; --docker-username=&lt;your-name&gt; --docker-password=&lt;your-pword&gt; --docker-email=&lt;your-email&gt;</span></pre><ul class=""><li id="5a79" class="lw lx in kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">Pada bagian imagePullSecret tambahkan nama secret yang telah dibuat sebelumnya.</li></ul><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div class="gh gi nj"><img src="../Images/50e4ed86c3b9ab865bb111f2197b4eb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/0*-6GNnDbNfCVF0hnB"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">values.yaml</figcaption></figure><ul class=""><li id="8d0d" class="lw lx in kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">Menambahkan Configmap, edit file templates/deployment.yaml dan tambahkan envRef seperti pada gambari dibawah ini</li></ul><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi nk"><img src="../Images/ed2a24b1e94635e04cdecab8f1e991f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*wSTGHyTaoHoTrPaa"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">deployment.yaml</figcaption></figure><ul class=""><li id="615e" class="lw lx in kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">Selanjutnya pada values.yaml tambahkan key configmap dan sesuaikan valuenya dengan configmap pada kubernetes.</li></ul><figure class="ms mt mu mv gt jo gh gi paragraph-image"><div class="gh gi nl"><img src="../Images/fa7c7fbc499c8890b3f16065383b8fab.png" data-original-src="https://miro.medium.com/v2/resize:fit:760/0*cKTRopl24Q7b03GP"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">values.yaml</figcaption></figure><ul class=""><li id="29bc" class="lw lx in kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">Bagian service pada artikel ini menggunakan type ClusterIP dengan port 80 dan destinationPort 3000 (sesuai dengan port yang di expose dari aplikasi) .</li></ul><figure class="ms mt mu mv gt jo"><div class="bz fp l di"><div class="nm nn l"/></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">values.yaml</figcaption></figure><ul class=""><li id="3d5f" class="lw lx in kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">Deploy service menggunakan helm chart dengan perintah berikut</li></ul><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="c371" class="nb kz in mx b gy nc nd l ne nf">helm install (name chart) . -n (namespace application)</span></pre><ul class=""><li id="7083" class="lw lx in kc b kd ke kh ki kl mp kp mq kt mr kx md me mf mg bi translated">Check apakah aplikasi nya sudah terdeploy di cluster dengan menggunakan perintah berikut</li></ul><pre class="ms mt mu mv gt mw mx my mz aw na bi"><span id="a10c" class="nb kz in mx b gy nc nd l ne nf">kubectl get all -n (namespace appliaction)</span></pre><h1 id="42fe" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Conclusion</h1><p id="b479" class="pw-post-body-paragraph ka kb in kc b kd ly kf kg kh lz kj kk kl mm kn ko kp mn kr ks kt mo kv kw kx ig bi translated">Ini hanya chart yang sederhana, banyak lagi yang bisa ditambahkan pada konfigurasi helm chart, seperti menambahkan ingress, horizontall pod autoscalling, livenessProbe and readinessProbe, dan masih banyak lagi</p><h1 id="659d" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Reference</h1><ul class=""><li id="35e1" class="lw lx in kc b kd ly kh lz kl ma kp mb kt mc kx md me mf mg bi translated"><a class="ae jz" href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/" rel="noopener ugc nofollow" target="_blank"> https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/ </a></li><li id="df0b" class="lw lx in kc b kd mh kh mi kl mj kp mk kt ml kx md me mf mg bi translated"><a class="ae jz" href="https://helm.sh/docs/helm/helm_create/" rel="noopener ugc nofollow" target="_blank"> https://helm.sh/docs/helm/helm_create/ </a></li></ul></div></div>    
</body>
</html>