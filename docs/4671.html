<html>
<head>
<title>Passwordless Authentication with React and Auth0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用React和Auth0的无密码身份验证</h1>
<blockquote>原文：<a href="https://medium.com/javascript-scene/passwordless-authentication-with-react-and-auth0-c4cb003c7cde?source=collection_archive---------1-----------------------#2016-07-14">https://medium.com/javascript-scene/passwordless-authentication-with-react-and-auth0-c4cb003c7cde?source=collection_archive---------1-----------------------#2016-07-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/99c09868c59d8ef941d94848edcc352a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hFWkAFgalXBR_aiKdsIF_A.png"/></div></div></figure><blockquote class="ip iq ir"><p id="70ed" class="is it iu iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">编者按:多年来，我一直告诉人们密码已经过时了。当我为“JavaScript应用程序编程”编写密码部分时，我强烈推荐多因素身份验证等密码替代方案。自那以后，发生了多起泄露数百万用户名和密码的事件。很有可能你的一些密码被盗了。</p><p id="5428" class="is it iu iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">偶尔，我们会发现我们强烈推荐的产品或服务，并邀请其背后的公司参与赞助帖子。</p><p id="22de" class="is it iu iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这就是为什么我非常兴奋地为您带来这篇由 <a class="ae jr" href="https://twitter.com/ryanchenkie" rel="noopener ugc nofollow" target="_blank"> <strong class="iv hi">瑞安·陈基</strong> </a> <strong class="iv hi">撰写的<strong class="iv hi">的Auth0赞助帖子。我强烈建议你阅读它，并在你的下一个应用程序中加入无密码认证。</strong></strong></p><p id="3567" class="is it iu iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">~埃里克·艾略特</p></blockquote><p id="ec4a" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">了解无密码如何让您的用户和组织受益。</p><p id="db38" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">在今天的文章中，我们将构建一个通过Auth0进行无密码认证的React应用程序。为简洁起见，我们将使用<a class="ae jr" href="https://github.com/auth0-samples/auth0-react-sample/tree/master/01-Login" rel="noopener ugc nofollow" target="_blank"> Auth0 React Starter </a>作为我们应用程序的基础。我们将研究无密码身份验证的优势，并了解它如何提供比传统身份验证方法更好的安全性。</p><h1 id="f504" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">什么是无密码？</h1><p id="daf3" class="pw-post-body-paragraph is it hh iv b iw kt iy iz ja ku jc jd js kv jg jh jt kw jk jl ju kx jo jp jq ha bi translated">顾名思义，无密码身份验证是一种用户无需输入密码的身份验证系统。相反，他们会提供一个标识符，如电子邮件地址或电话号码，身份验证系统会发送一个一次性密码或指向该标识符的链接，用户必须提供该密码或链接才能成功通过身份验证。密码或链接在有限的时间内有效，通常约为五分钟。每个登录请求都会生成一个新密码或链接，并使任何以前的密码或链接失效。在某种意义上，无密码身份验证也提供了开箱即用的双因素身份验证，因为用户必须能够访问他们提供的电子邮件帐户或电话号码。</p><p id="4b62" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">无密码认证对用户和开发者都有好处。用户倾向于选择弱密码，并在多个服务中重复使用同一个密码。由此，我们可以推断，用户倾向于将便利性看得比安全性更重要。许多开发人员做出了实施更严格的密码要求的合理决定，但这通常会导致用户烦恼。从开发人员的角度来看，密码必须安全地加密和存储，即使遵循了所有的最佳实践，用户在受到威胁的第三方服务上重复使用密码在您的应用程序中也是易受攻击的。</p><h1 id="17f6" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">谁在用无密码？</h1><p id="a85d" class="pw-post-body-paragraph is it hh iv b iw kt iy iz ja ku jc jd js kv jg jh jt kw jk jl ju kx jo jp jq ha bi translated">包括<a class="ae jr" rel="noopener" href="/"> Medium </a>、<a class="ae jr" href="https://slack.com/" rel="noopener ugc nofollow" target="_blank"> Slack </a>和<a class="ae jr" href="https://www.whatsapp.com/" rel="noopener ugc nofollow" target="_blank"> WhatsApp </a>在内的许多公司已经采用了无密码认证。无密码身份验证在web和移动应用程序中都可以找到，尤其适合移动应用程序，因为用户通常在他们的设备上接收一次性密码，从而形成非常直观的工作流。</p><h1 id="5a2b" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">我们将建造什么</h1><p id="2ed6" class="pw-post-body-paragraph is it hh iv b iw kt iy iz ja ku jc jd js kv jg jh jt kw jk jl ju kx jo jp jq ha bi translated">在本文中，我们将介绍无密码，并了解它如何为用户身份验证提供直观而安全的工作流程。我们将介绍无密码身份验证的工作原理，它提供的好处，为了将理论付诸实践，我们将在React应用程序中实现无密码身份验证。</p><h1 id="1cf6" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">React和Auth0无密码</h1><p id="1b34" class="pw-post-body-paragraph is it hh iv b iw kt iy iz ja ku jc jd js kv jg jh jt kw jk jl ju kx jo jp jq ha bi translated">为了演示这一切是如何工作的，我们将构建一个使用Auth0的<a class="ae jr" href="https://auth0.com/passwordless?utm_source=eelliott&amp;utm_medium=gp&amp;utm_campaign=passwordless" rel="noopener ugc nofollow" target="_blank">无密码</a> <a class="ae jr" href="https://github.com/auth0/lock-passwordless" rel="noopener ugc nofollow" target="_blank">库</a>的无密码<a class="ae jr" href="https://facebook.github.io/react/" rel="noopener ugc nofollow" target="_blank"> React </a>应用程序。首先，<a class="ae jr" href="https://auth0.com/signup?utm_source=eelliott&amp;utm_medium=gp&amp;utm_campaign=passwordless" rel="noopener ugc nofollow" target="_blank">注册一个免费的Auth0账户</a>，并查看<a class="ae jr" href="https://manage.auth0.com/?utm_source=eelliott&amp;utm_medium=gp&amp;utm_campaign=passwordless" rel="noopener ugc nofollow" target="_blank">管理面板</a>。我们将使用<a class="ae jr" href="https://github.com/auth0-samples/auth0-react-sample/tree/master/01-Login" rel="noopener ugc nofollow" target="_blank"> React种子项目</a>,这样我们可以节省一些时间。假设你对React有一些基本的了解，因为我们将跳过基本的React习惯用法。</p><p id="d804" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">seed项目为我们的应用程序提供了一个良好的起点。我们有基本的路由、几个组件、一些助手，以及最重要的构建过程来传输和服务我们的代码。运行<em class="iu"> `npm install` </em>以获取项目依赖关系。为了确保seed项目使用传统身份验证，请使用您的Auth0凭据编辑<em class="iu"> `.env` </em>文件:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="79a0" class="lh jw hh ld b fi li lj l lk ll">cp .env.example .env</span></pre><p id="a904" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">通过运行<em class="iu"> `npm start` </em>启动应用程序。接下来，导航到<em class="iu"> `localhost:3000` </em>查看应用程序的运行情况。您应该能够通过提供电子邮件和密码来登录/注册。</p><figure class="ky kz la lb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/e71adefce2e7d1e7833df6e3f13dc9f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1cFW9eAIO9uaH9TLGu1emA.png"/></div></div></figure><h1 id="ac06" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">无密码认证服务</h1><p id="601e" class="pw-post-body-paragraph is it hh iv b iw kt iy iz ja ku jc jd js kv jg jh jt kw jk jl ju kx jo jp jq ha bi translated">现在让我们实现无密码认证。停止应用程序并运行:</p><pre class="ky kz la lb fd lc ld le lf aw lg bi"><span id="ebc4" class="lh jw hh ld b fi li lj l lk ll">npm install auth0-lock-passwordless --save</span></pre><p id="22fc" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">这将下拉Auth0无密码库并将其保存在我们的<em class="iu"> `package.json` </em>文件中。接下来，打开位于utils目录下的<em class="iu"> `AuthService.js` </em>。这是我们大部分无密码实现的地方。</p><p id="3ec7" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">在这里，您可以随意删除所有现有的代码——我们将重新实现功能并逐行解释。</p><figure class="ky kz la lb fd ii"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="42ce" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">我们的无密码认证服务已经完成，但是在测试我们的代码之前，我们必须从我们的Auth0仪表板启用无密码特性。导航到https://manage.auth0.com的<a class="ae jr" href="https://manage.auth0.com/" rel="noopener ugc nofollow" target="_blank"/>，然后到<strong class="iv hi">连接</strong>，最后到<strong class="iv hi">无密码</strong>。这里有三个选项:短信、邮件、TouchID。SMS将要求您拥有一个Twilio帐户和API密钥，以便您可以发送SMS消息。电子邮件功能允许您从Auth0的默认电子邮件提供商发送电子邮件，但您也可以设置自己的电子邮件提供商。最后，TouchID功能允许你为iOS设备实现苹果的无密码解决方案。我们不会在这里实现TouchID，因为这只能在移动应用程序上实现。</p><p id="02f8" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">打开短信和电子邮件的开关。单击其中任何一个都会弹出一个模态对话框，允许您定制和编辑各种设置。其中一些是必需的，如Twilio的API密钥，而其他的如消息模板或一次性密码的到期时间是可选的。请随意编辑这些或保留推荐的默认值。</p><figure class="ky kz la lb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/f725b5e95bd2ffa9d32fbdb0d025be9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l4-tbGitIQVfh3v-YXeHXA.png"/></div></div></figure><h1 id="dc65" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">更新用户界面</h1><p id="744e" class="pw-post-body-paragraph is it hh iv b iw kt iy iz ja ku jc jd js kv jg jh jt kw jk jl ju kx jo jp jq ha bi translated">打开无密码特性后，让我们回到我们的代码。打开<em class="iu"> `views/main/login/` </em>目录下的<em class="iu"> `Login.js` </em>。这里，我们将添加一个构造函数来检查现有帐户，并为我们在身份验证服务中创建的各种登录方法添加用户界面。</p><figure class="ky kz la lb fd ii"><div class="bz dy l di"><div class="lm ln l"/></div></figure><h1 id="f35f" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">了解我们的路由是如何工作的</h1><p id="00c7" class="pw-post-body-paragraph is it hh iv b iw kt iy iz ja ku jc jd js kv jg jh jt kw jk jl ju kx jo jp jq ha bi translated">在我们开始测试我们的应用程序之前，让我们简单地看一下位于<em class="iu"> `/views` </em>目录中的<em class="iu"> `routes.js` </em>。这里我们不会对seed项目进行任何代码更改，但是我们应该注意一些重要的事情。看看下面的代码和注释。</p><figure class="ky kz la lb fd ii"><div class="bz dy l di"><div class="lm ln l"/></div></figure><h1 id="bf02" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">测试我们的无密码应用</h1><p id="9193" class="pw-post-body-paragraph is it hh iv b iw kt iy iz ja ku jc jd js kv jg jh jt kw jk jl ju kx jo jp jq ha bi translated">让我们测试我们的应用程序。webpack构建系统应该已经自动重新编译了您所做的任何更改，因此导航到<em class="iu"> `localhost:3000` </em>来查看您的应用程序的运行情况。你会看到一个登录页面，有三个登录选项。根据您选择的选项，选择一个并按照屏幕上的指示提供电子邮件或电话号码。</p><figure class="ky kz la lb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/9f318d69e0d5daf36c73ae7483a74c6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rYT3XJhj63CM9n_I-CMkkA.png"/></div></div></figure><p id="dfe9" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">如果我们选择“使用电子邮件代码登录”选项，我们可以输入一个电子邮件地址。</p><figure class="ky kz la lb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/d863210abbb8e3f69f8fce94db38c57a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UH2WHnSLhA0odTncpn0QZw.png"/></div></div></figure><p id="537a" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">一封电子邮件马上到达我们的收件箱，里面有一个我们可以用来认证的代码。</p><figure class="ky kz la lb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/8e282057ab79c21be8c055d7056be58c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2f88_Uf3OQBVeYhQwpSrYA.png"/></div></div></figure><p id="85d9" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">回到应用程序，输入电子邮件中的代码。</p><figure class="ky kz la lb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/9254651a475ff73949b9c7f08039d6fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_vHJ0PK1Go2Pt9K8ChfvVA.png"/></div></div></figure><p id="65d6" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">代码通过验证后，我们将进入显示我们电子邮件地址的主页。</p><figure class="ky kz la lb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/df103706dbf23a8fb68738ffb86bdc64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3kmdekMt5AxkUU9Qk37mzQ.png"/></div></div></figure><h1 id="135b" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">更进一步</h1><p id="6e71" class="pw-post-body-paragraph is it hh iv b iw kt iy iz ja ku jc jd js kv jg jh jt kw jk jl ju kx jo jp jq ha bi translated">使用Auth0进行无密码身份验证既简单又强大。只需几行代码，我们就能构建一个React应用程序，实现Auth0的无密码库和多种类型的无密码身份验证。</p><p id="6671" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">无密码是一个很好的选择，但Auth0更进一步，允许我们轻松混合和匹配社交认证策略。除了为用户提供无密码选项之外，我们还可以使用同一个库来添加与脸书、Twitter或谷歌等常见社交提供商的社交认证。</p><p id="4bd0" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated"><a class="ae jr" href="https://github.com/auth0/lock-passwordless" rel="noopener ugc nofollow" target="_blank">文档</a>更详细地解释了如何做到这一点，但在一个登录模式中添加社交和无密码的最简单方法是使用一个助手功能，如<em class="iu">` lock . socialormagiclink()`</em>。如果我们想将它扩展到React应用程序中，它看起来会是这样的:</p><figure class="ky kz la lb fd ii"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="73b1" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">用户界面的差异会立即反映出来:</p><figure class="ky kz la lb fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/456ea16709d0e23069e9003dc90ced08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yMaVa-Q7g339lDOiJ5AAcQ.png"/></div></div></figure><p id="b712" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">我们只需要在Auth0管理面板中添加我们的脸书和Twitter密钥，一切就都准备好了。</p><h1 id="994e" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">包扎</h1><p id="eb3d" class="pw-post-body-paragraph is it hh iv b iw kt iy iz ja ku jc jd js kv jg jh jt kw jk jl ju kx jo jp jq ha bi translated">无密码身份验证是传统用户名和密码身份验证的一个很好的替代方案，因为它使用户更容易登录，并可以提高整体安全性。从头开始构建一个无密码的身份验证流可能很棘手，但是正如我们在本文中通过构建React应用程序所看到的，Auth0使它变得很简单。Auth0还允许我们混合和匹配各种身份验证策略来满足我们的组织需求，为我们提供了很大的灵活性。</p></div><div class="ab cl lo lp go lq" role="separator"><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt lu"/><span class="lr bw bk ls lt"/></div><div class="ha hb hc hd he"><p id="0e50" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="iu"> Ryan Chenkie </em> </strong> <em class="iu">是一名来自加拿大的全栈开发人员，他为Auth0创建内容，包括深入的教程和最新框架和技术的种子项目，如Angular 2、React和Aurelia。不编码的时候，他会和他的妻子出去玩，弹吉他，或者对外太空感到厌烦。</em></p></div></div>    
</body>
</html>