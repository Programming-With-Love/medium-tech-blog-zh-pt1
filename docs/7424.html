<html>
<head>
<title>Protecting Your Serverless Solution</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">保护您的无服务器解决方案</h1>
<blockquote>原文：<a href="https://medium.com/version-1/protecting-your-serverless-solution-cd5d4247e27c?source=collection_archive---------1-----------------------#2020-07-20">https://medium.com/version-1/protecting-your-serverless-solution-cd5d4247e27c?source=collection_archive---------1-----------------------#2020-07-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/9b1129f7cf4bebedf92804ea40296fad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6s4eFlzHqTtOotho"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@brazofuerte?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Collin Armstrong</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f6af" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">近年来，无服务器的增长是巨大的。越来越多的组织意识到这项技术的好处，即不必管理底层基础设施，并且能够按需扩展。大部分增长都是偶然的，没有一个战略，这导致安全性很大程度上是一种事后想法。</p><p id="72cf" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js">本文将描述组织如何保护其无服务器解决方案。它将重点关注部署在</em> <a class="ae it" href="https://www.version1.com/it-service/digital-services/modernise-with-aws/" rel="noopener ugc nofollow" target="_blank"> <em class="js"> AWS中的解决方案及其无服务器产品</em></a><em class="js">【Lambda。然而，许多原则可以应用于所有的云平台。</em></p></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><h1 id="cbef" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">为什么无服务器解决方案不安全？</h1><p id="641d" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">无服务器技术强制使用微服务设计模式。这导致许多小型服务执行独特的功能。有了许多服务，组织可以开发<strong class="iw hi">无服务器蔓延</strong>和<strong class="iw hi"> </strong>可能导致未知、不受管理和不安全的无服务器解决方案。</p><h1 id="3b75" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">无服务器的组件</strong></h1><p id="20cc" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">所有无服务器解决方案的核心是一种编程语言或代码。任何解决方案都需要各种接触点和集成，如数据存储和编排技术。这些组件将构成整个解决方案的一部分，因此每个组件的安全性与代码本身一样重要。</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div class="er es li"><img src="../Images/9535b8ead4c00b5296735d0aade22e8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:578/format:webp/1*qs1wv-VmB-xbnTTMR-27KA.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Various components of Serverless Solutions.</figcaption></figure><h1 id="1108" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">成本效益分析</strong></h1><p id="cad7" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">保护任何解决方案的第一步是进行成本效益分析。这包括确定正在考虑的无服务器解决方案的组件。然后进行风险评估。必须使用定量和定性方法确定部分或整个解决方案损失的影响和可能性。由此产生的风险评估将决定解决方案对组织的重要性。它将有助于理解将要采取的风险处理方法；是否应该减轻、接受、避免或转移风险。实施安全控制的总成本应始终低于系统损失的成本。</p><h1 id="09b1" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">无服务器定价</strong></h1><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ln"><img src="../Images/3a838b0992e108ea4eeb72e5793b6011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ir_d6PguAa876LHf"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@blankerwahnsinn?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Fabian Blank</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="cd3e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为了确保解决方案的安全，需要考虑无服务器的定价。使用无服务器时有两种定价方式:直接和间接。</p><h2 id="6ed3" class="lo kb hh bd kc lp lq lr kg ls lt lu kk jf lv lw ko jj lx ly ks jn lz ma kw mb bi translated"><em class="mc">直接定价</em></h2><p id="0db5" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">这是适用于无服务器功能的定价；密码。</p><p id="4ed2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">有一个慷慨的免费层，一些组织利用，从来没有超过。免费层用完后，以下定价要素将影响组织必须支付的费用:</p><ul class=""><li id="bcb1" class="md me hh iw b ix iy jb jc jf mf jj mg jn mh jr mi mj mk ml bi translated"><strong class="iw hi">请求</strong> —调用无服务器功能的次数</li><li id="b850" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated"><strong class="iw hi">内存</strong> —无服务器功能消耗的内存</li><li id="c278" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated"><strong class="iw hi">持续时间</strong> —执行无服务器功能所花费的时间</li><li id="b8cc" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated"><strong class="iw hi">提供并发</strong> —函数的预期用途。这有助于减少无服务器函数调用延迟</li></ul><h2 id="1e45" class="lo kb hh bd kc lp lq lr kg ls lt lu kk jf lv lw ko jj lx ly ks jn lz ma kw mb bi translated"><em class="mc">间接定价</em></h2><p id="40ea" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">如前所述，无服务器功能本身将与许多其他组件交互，形成整体解决方案的一部分。该解决方案使用的各种组件都有相关的成本。例如，如果使用S3，则必须考虑存储量的成本和数据请求的成本。</p><p id="aee8" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">任何解决方案经常被遗忘的一个方面是数据传输成本。任何从AWS区域转移出来的数据都必须包括在内。如果最初没有在解决方案的定价中考虑到这一点，这通常会让人感到意外。</p><h1 id="4311" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated">分担责任模式</h1><p id="e321" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">使用云的好处是运行服务的底层平台由云提供商管理。云解决方案的一部分将由云提供商管理，另一部分将由云客户管理。责任级别将取决于所使用的服务。</p><p id="1094" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">通过无服务器，云提供商管理云客户代码运行的平台。平台的功能和安全性更新由云提供商执行。解决方案的配置和代码将由云客户负责。</p><p id="219d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">采用无服务器解决方案的组织需要了解他们的责任从哪里开始，到哪里结束。这将提供关于需要在何处部署安全控制的详细知识。</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div class="er es mr"><img src="../Images/a0ee5f4b2bb93a681774ca9216312c1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*C8l_X6r-yUcCqkGK8TL6TQ.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx">The AWS Shared Responsibility Model.</figcaption></figure><h1 id="ccb7" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">知道正常</strong></h1><p id="b97c" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">保护解决方案时，应询问几个问题:</p><ul class=""><li id="2bec" class="md me hh iw b ix iy jb jc jf mf jj mg jn mh jr mi mj mk ml bi translated">它试图为企业实现什么目标？</li><li id="9e96" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">解决方案在技术上是如何实现的？</li><li id="fd20" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">是如何编排的？</li><li id="13ec" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">有哪些触动点和整合点？</li><li id="de98" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">它是如何操作维护的？</li><li id="26f9" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">哪些用户和服务可以访问？</li><li id="b536" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">有哪些反复出现的问题？</li><li id="5dac" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">如何处理错误？</li><li id="1861" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">如何对其进行监控，有哪些警报？</li></ul><p id="43df" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在实施任何安全控制措施之前，掌握重要的<strong class="iw hi">指标</strong>和关键绩效指标(KPI)至关重要。要了解性能的衡量标准、使用频率、一天中不同时间的并发性和负载是最基本的。有了这些指标，组织就能知道解决方案的正常行为是什么。任何超出预期范围的指标都可能表示发生了安全事件。</p><h1 id="4adc" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">保护代码</strong></h1><p id="2aa8" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">无服务器解决方案主要由编程代码组成。GitHub或AWS CodeCommit等<strong class="iw hi">源代码管理器(SCM) </strong>通常用于存储和管理代码。SCM通过记录对代码所做的任何更改的信息来提供责任。SCM通常由SCM提供商以软件即服务(SaaS)的形式提供。对于那些喜欢将代码保留在内部而不是云中的人来说，通常可以选择在内部托管和管理它。</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ms"><img src="../Images/05616f4735cb792e69c13cf6e122844a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EcpJwY7JZWQpWKzV"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@cdr6934?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Chris Ried</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="a073" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">应该为用户或进程提供一组最低限度的特权，以便他们能够完成任务。这就是所谓的<strong class="iw hi">最小特权原则(POLP) </strong>。如果用户只需要对代码进行只读访问，那么这是应该提供的唯一权限。</p><p id="961f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">应该启用多因素认证(MFA) </strong>以在向SCM认证时提供额外的安全层。</p><p id="a419" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在处理代码时，SCMs将提供使用SSH或HTTPS来克隆存储库。这两种都是用于传输代码的安全传输方法。</p><p id="3034" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">需要保护的<strong class="iw hi"> </strong>关键分支<strong class="iw hi"> </strong>如<strong class="iw hi">主</strong>或一些<strong class="iw hi">特征</strong>分支<strong class="iw hi">。</strong>工程师应该不能直接推这些分支。他们应该创建开发分支，这些分支应该在合并到关键分支之前由拉请求<em class="js"> </em>审查。</p><p id="8a72" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">一致的命名约定</strong>应该应用于函数名和提交消息。包含任务参考号是一个好的做法。然后，这可以与项目跟踪系统联系起来，以理解代码变更的上下文和完整描述。</p><p id="f775" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">一个<strong class="iw hi">虚拟桌面环境，</strong>如AWS工作区，<strong class="iw hi"> </strong>在云中，可以为每个工程师调配。这些可以是Windows或Linux操作系统。所有的开发都可以在云端进行。因此，代码永远不会驻留在工程师的笔记本电脑或设备上。如果设备被盗或放错地方，密码不会丢失。</p><p id="dad0" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果使用移动设备在本地处理代码，那么应该在设备上验证一组基线要求，例如在驱动器<strong class="iw hi">上进行防病毒或<strong class="iw hi">加密</strong>。应考虑移动数据管理(MDM) </strong>或<strong class="iw hi">移动应用管理(MAM) </strong>解决方案，以便在设备丢失时远程擦除数据。</p><h1 id="9a0b" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">身份访问管理(IAM)和角色</strong></h1><p id="4715" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">IAM 控制对资源和AWS控制台的访问。应该使用POLP来限制对资源的访问。理想情况下，Lambda控制台应该是只读的，用于查看目的，所有功能都应该从自动化管道中更新。</p><blockquote class="mt mu mv"><p id="d4f9" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">AWS IAM Access Analyser —在使用AWS时是一项有用的服务。它提供了资源何时被访问以及被谁访问的详细信息<strong class="iw hi"> <em class="hh">。</em> </strong></p></blockquote><p id="43e9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">角色</strong>允许AWS服务能够交互。例如，附属于Lambda的角色需要能够写入CloudWatch来创建日志。在开发过程中，创建一个能够与任何服务交互的单一角色，并将该角色附加到每个功能上，这是很有诱惑力的。然而，这引起了安全问题并违反了POLP。建议的做法是创建一个只包含所需服务访问权限的角色，并将该角色与一个功能相关联。每个功能都应该有自己的角色。</p><h1 id="9b15" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">网络</strong></h1><p id="8500" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">默认情况下，Lambda可以访问互联网。允许Lambda访问VPC中的资源是可能的。该功能将无法访问互联网。要允许它访问互联网，可以实施网络地址转换(NAT)解决方案，这是专用子网中的资源需要外部访问时应遵循的模式。</p><h1 id="d3cf" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">秘密</strong></h1><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mz"><img src="../Images/e699b7891a587d6ac6dc6f7d316099e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WCQ6I0u2UjQSuIqb"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@tinaflour?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Kristina Flour</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="02c3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">永远不要在代码或环境配置中指定或硬编码凭据。它们变得可见且容易获得。机密应该集中存储在可以管理和轮换的地方。秘密管理器在运行时动态地提供秘密。AWS有两个选项可供使用:</p><ul class=""><li id="d604" class="md me hh iw b ix iy jb jc jf mf jj mg jn mh jr mi mj mk ml bi translated"><strong class="iw hi"> AWS SSM参数库</strong> —基本机密管理</li><li id="7c68" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated"><strong class="iw hi"> AWS机密管理器</strong> —功能丰富的机密管理</li></ul><p id="7a40" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">应该使用IAM将访问权限限制在secret manager控制台本身。</p><h1 id="5b87" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">功能配置</strong></h1><p id="56a4" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">Lambda的一些配置属性包括</p><ul class=""><li id="c174" class="md me hh iw b ix iy jb jc jf mf jj mg jn mh jr mi mj mk ml bi translated"><strong class="iw hi">并发性— </strong>可以同时发生的函数调用的数量</li><li id="c569" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated"><strong class="iw hi">节流— </strong>达到并发限制时产生的错误</li><li id="1d72" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated"><strong class="iw hi">超时— </strong>功能可以运行的持续时间</li></ul><p id="7fc9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这些需要根据指标和KPI设置为适当的值。上述任何问题都可能是由安全问题引起的，因此应该进行调查。</p><h1 id="f6db" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated">数据</h1><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es na"><img src="../Images/e5aff9d02f7b9aac4a682e65a063dbe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MZL7lA-_CymFYNs5"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@margotd1?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Margaret Weir</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="d969" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Lambda可以写入任何数据存储类型。<strong class="iw hi">静态数据应该加密</strong>。默认情况下，大多数数据存储都倾向于加密，或者只需勾选一个标记来启用基本加密。<strong class="iw hi">对加密密钥的访问应该受到限制</strong>并且应该轮换</p><p id="1b8b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">数据的<strong class="iw hi">居住地应符合当地法律法规。可能需要确保数据不会离开其所在的区域。这可能会对灾难恢复计划产生影响，灾难恢复计划可能涉及到迁移到另一个区域，并可能违反法律法规。</strong></p><p id="a979" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">应针对数据制定保留和归档政策</strong>，以遵守法律法规。只要法律允许或要求，组织就应该保留数据。</p><h1 id="d6f2" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak"> API网关</strong></h1><p id="5473" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">大多数解决方案需要与多个API进行交互。API网关的使用为内部和外部API提供了集中管理服务。AWS API网关有许多安全控制:</p><p id="89a0" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">网关资源策略和IAM </strong> —可用于控制API的访问和调用</p><p id="d3fb" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> API密钥</strong> —使用<strong class="iw hi"> </strong>确保消费者提供预期的密钥，以控制节流并管理API的监控</p><p id="be50" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">λ授权者和AWS认知者</strong> —提供控制API授权的机制</p><p id="e4fc" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">节流和缓存</strong> —控制API和缓存的调用次数，这在API负载较重时非常有用，例如受到DDoS攻击时。</p><h1 id="b72b" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak"> AWS组织</strong></h1><p id="234f" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">AWS鼓励创建多个帐户来隔离部门和功能。使用<strong class="iw hi"> AWS组织</strong>可以创建位于主账户下的分层账户结构。<strong class="iw hi">服务控制策略(SCPs) </strong>可用于允许或拒绝子账户使用特定服务。</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nb"><img src="../Images/577d663c0d2bb19dab2b4c51d6bb242e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lvpmC03tDYK6mv17.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">An example of AWS Organization use.</figcaption></figure><p id="063c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">合并账单</strong>允许<strong class="iw hi"> </strong>显示提供给主账户的每个个人账户的账单和费用。将这一点与资源的强制聚集结合起来，可以带来对正在使用的资源的成本有一个粒度视图的好处。</p><h1 id="9c1b" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">无服务器开发</strong></h1><p id="afea" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">可以使用几种方法开发无服务器。传统的模式是让开发人员在本地工作，并通过Lambda控制台将代码提交给AWS。</p><p id="3725" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">更现代的方法将会被使用<strong class="iw hi">容器</strong>被封闭，这样可以包含所有需要的包和库。这使得将该功能的所有需求放在一个地方变得更加容易。</p><p id="1ea2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">像AWS Cloud9这样的集成开发环境越来越受欢迎。与虚拟桌面环境<strong class="iw hi">、</strong>一样，它们允许所有开发都在云中进行。</p><p id="da8e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">应该遵循安全的开发实践，这些实践可以是所使用的编程语言所特有的。开放web安全项目(OWASP)提供了一组关于如何保护Web应用程序的有用资源和推荐实践。它们包含一个高优先级安全风险列表，参与无服务器解决方案的任何人都应该熟悉这些风险。</p><blockquote class="mt mu mv"><p id="154e" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">OWASP(2017)十大关键风险是:</p><p id="aea8" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">1.注射</p><p id="c50d" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">2.身份验证被破坏</p><p id="6505" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">3.敏感数据暴露</p><p id="a8c9" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">4.XML外部实体(XXE)</p><p id="5a87" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">5.中断的访问控制</p><p id="bf0b" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">6.安全错误配置</p><p id="a6df" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">7.跨站点脚本(XSS)</p><p id="2b42" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">8.不安全的反序列化</p><p id="7064" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">9.使用具有已知漏洞的组件</p><p id="b6c0" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">10.记录和监控不足</p></blockquote><h1 id="a244" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak"> DevOps / DevSecOps </strong></h1><p id="48a4" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">在组织中采用<strong class="iw hi">开发运营(DevOps) </strong>或<strong class="iw hi">开发安全运营(DevSecOps) </strong>文化，可以打破能力之间的壁垒，实现快速协作。它涉及到自动化工具的使用，如AWS CodeCommit、AWS CodeDeploy和AWS CodePipeline以及第三方工具。</p><p id="c43a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">代码构建、测试和部署活动的自动化提供了许多好处，尤其是能够审计变更、提供快速变更和安全问题补救。组织的安全能力可以集成到团队和自动化管道中。各个阶段的批准应包括关键审查者和安全团队。</p><h1 id="188c" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">测试</strong></h1><p id="c55a" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">各种形式的测试可以集成到部署管道中。<strong class="iw hi">静态测试</strong>是对处于非运行、未编译状态的代码进行审查。这可以通过使用代码审查、拉请求或AWS CodeGuru和SonarQube等工具进行安全和性能相关测试来手动完成。</p><p id="2c6b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">动态测试</strong>是解决方案处于运行状态时对代码的测试。AWS市场上有各种支持动态测试的解决方案，如Selenium和Apache Bench用于安全性和性能测试。</p><p id="c15d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">渗透测试</strong>涉及雇佣第三方，试图通过将他们置于恶意行为者的心态中来发现组织系统中的漏洞。这可以作为组织更广泛的安全计划的一部分，也可以作为无服务器解决方案的重点。</p><h1 id="eb4c" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">架构良好的框架——无服务器镜头</strong></h1><figure class="lj lk ll lm fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es nc"><img src="../Images/0e6ad234aaffded353f82747f58cd7f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mPwsDfkPrjeQUibl"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@steve_j?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Steve Johnson</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8b50" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">AWS提供了架构完善的框架，其中包含成本优化、卓越运营、可靠性、性能效率和安全性等支柱。它们提供了这些领域的最佳实践。</p><p id="e010" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">有一个无服务器镜头，可以用来最大限度地发挥无服务器的优势，并确保解决方案的安全。</p><h1 id="9327" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">监控、故障排除和报警</strong></h1><p id="ce7f" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">许多服务可用于监视和调查AWS中的安全事件。应该结合使用多种工具，并与安全和信息事件管理(SIEM)服务集成。这些应提供给组织的运营和安全团队。</p><ul class=""><li id="5577" class="md me hh iw b ix iy jb jc jf mf jj mg jn mh jr mi mj mk ml bi translated">AWS CloudWatch —用于捕获解决方案的日志</li><li id="1ee9" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">AWS CloudTrail —捕获AWS API调用的审计跟踪</li><li id="94ce" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">AWS配置—捕获对资源的更改，并与标记和Lambda一起实施补救</li><li id="87d5" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">AWS X射线—允许跟踪解决方案流程，了解问题所在以及任何延迟</li><li id="39d8" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">AWS SNS —用于基于配置阈值的警报</li><li id="688c" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">AWS安全中心—一种SIEM，提供反映解决方案安全状况的控制面板</li><li id="8063" class="md me hh iw b ix mm jb mn jf mo jj mp jn mq jr mi mj mk ml bi translated">AWS Detective —提供事件的直观历史记录，便于进一步调查</li></ul><p id="ae48" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">还有许多专业的第三方产品提供上述服务。Splunk是流行的监控、记录和SIEM服务的一个例子。</p><h1 id="0fe4" class="ka kb hh bd kc kd ld kf kg kh le kj kk kl lf kn ko kp lg kr ks kt lh kv kw kx bi translated"><strong class="ak">事件响应</strong></h1><p id="6209" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">任何组织的安全观点应该是<strong class="iw hi">预期</strong>会发生安全事故。应创建、审查和维护安全策略、业务连续性和灾难恢复计划。</p><p id="d1b2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">应监控应用程序指标，以了解正常行为。基线的异常可以识别正在发生的安全事件。基于应用程序的意外行为实施警报可以让运营或安全团队进行调查并做出响应。</p><p id="4a37" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">应经常进行常见事件的演练。一些排练可能需要一个<strong class="iw hi">完全中断测试</strong>，这会干扰组织。借助云的优势和即时供应基础设施的能力，<strong class="iw hi">并行测试</strong>可以通过部署临时解决方案来执行，而不会影响组织。</p></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><h1 id="141f" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">你永远不会结束</strong></h1><p id="7d8e" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">对于不想管理底层平台的组织来说，无服务器解决方案具有突出的优势。技术和当地法规的变化可能会导致无服务器解决方案的安全性发生变化。实施安全控制从来都不是一次性的工作。威胁的范围很大，而且还在不断扩大。恶意行为者不断开发新方法来破坏和渗透系统。组织努力领先于威胁并定期审查其安全态势至关重要。安全是一个永恒的过程，工作永远不会结束。</p><blockquote class="mt mu mv"><p id="9555" class="iu iv js iw b ix iy iz ja jb jc jd je mw jg jh ji mx jk jl jm my jo jp jq jr ha bi translated">阅读更多内容:<a class="ae it" href="https://www.version1.com/it-service/digital-services/modernise-with-aws/" rel="noopener ugc nofollow" target="_blank">为什么您必须用AWS更新您的应用程序</a></p></blockquote><p id="86e6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">关于作者</strong></p><p id="4fca" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js"> Sat Gainda是</em> <a class="ae it" href="https://www.version1.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hi"> <em class="js">版本1 </em> </strong> </a> <strong class="iw hi"> <em class="js">，</em> </strong> <em class="js">的云解决方案架构师，致力于利用创新云系统的企业级项目。敬请关注Medium上的版本1，了解更多来自Sat的</em> <a class="ae it" href="https://www.version1.com/introduction-to-serverless/" rel="noopener ugc nofollow" target="_blank"> <em class="js">云聚焦帖子</em> </a> <em class="js">。</em></p></div></div>    
</body>
</html>