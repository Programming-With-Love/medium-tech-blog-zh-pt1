<html>
<head>
<title>Recent Russian Routing Leak was Largely Preventable</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">最近的俄罗斯路由泄露在很大程度上是可以避免的</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/recent-russian-routing-leak-was-largely-preventable-fc0be168d867?source=collection_archive---------1-----------------------#2017-12-22">https://medium.com/oracledevs/recent-russian-routing-leak-was-largely-preventable-fc0be168d867?source=collection_archive---------1-----------------------#2017-12-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="f629" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">上周，正如BGPmon 最先报道的那样，包括谷歌、脸书和苹果在内的几家知名公司的IP地址空间被短暂公布于俄罗斯之外。</p><p id="2034" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">事件发生后，<a class="ae jc" href="https://twitter.com/JobSnijders" rel="noopener ugc nofollow" target="_blank">NTT的乔布斯Snijders </a>在一篇名为<a class="ae jc" rel="noopener" href="/@jobsnijders/what-to-do-about-bgp-hijacks-44edc6a83e97">“如何应对BGP劫持”</a>的帖子中写道。他指出，鉴于BGP固有的安全弱点，情况只会在“在没有适当保护的情况下运营互联网网络变得不可接受的那一刻”得到改善，因此客户将停止从没有适当路由过滤的提供商那里购买transit。</p><p id="45aa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由于Job已经在NANOG 上介绍了NTT使用的各种过滤方法，我决定调查一下NTT (AS2914)在这个特殊事件中表现如何。虽然80个错误路由中的一小部分最终被AS2914带到了更大的互联网，但NTT并没有促成任何主要互联网公司的泄密，如脸书、谷歌、苹果等。事实上，当一个人分析每一条泄露路线的传播时，一种模式开始出现。</p><p id="a87a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">根据AS39523 </strong>确定泄漏路线</p><p id="32cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2017年12月12日，AS39523公布了两个不同的3-4分钟间隔的80个前缀(其中只有一个是他们的)。下面是三个小时内这些前缀来源的可视化，突出显示了由AS39523产生的部分。一些前缀已经在流通，但一些更具体或不太具体，通常不进行路由，这就是为什么当我们汇总所有前缀时，图表中的空白区域会出现峰值。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/e22dea3e7828fa50e6c826643d3e943a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-rrkmVSmyhRzu_sS.png"/></div></figure><p id="001c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">无论如何，AS39523通过俄罗斯公交供应商Megafon (AS31133)宣布了所有这些路线。在Dyn的<a class="ae jc" href="https://dyn.com/ip-transit-intelligence/" rel="noopener ugc nofollow" target="_blank"> IP Transit Intelligence </a>中，我们跟踪了Megafon的七家国际公交提供商，即Cogent、Level3、德国电信、意大利电信Sparkle、NTT、飓风电气和Telia。</p><p id="408a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">被泄露的<strong class="ig hi">俄罗斯</strong>网络由<em class="jl">Megafon的所有</em>中转提供商承载，比如来自<a class="ae jc" href="https://www.rostelecom.ru/en/" rel="noopener ugc nofollow" target="_blank"> Rostelecom </a>(俄罗斯国家电信)的这个前缀。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/69e96ecd8ebac3907dc244de5627842e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Qp_G6cAjW55PaGUm.png"/></div></figure><p id="8faa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是，当涉及到属于脸书、谷歌(和YouTube)、微软、Twitch、苹果和Riotgames的前缀时，在Megafon的公交供应商中，只有飓风电气公司(Hurricane Electric)将这些路线带到了更大的互联网上。Megafon的许多免结算同行也接受了这些错误的路线，但几乎没有全球影响。</p><p id="2a71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在下面的三张图中，我们可以看到通过Megafon泄露的三个前缀(谷歌的66.249.80.0/20，苹果的17.0.0.0/8，YouTube的104.237.160.0/19)的传播概况。在将Megafon的各种同行归入“其他”类别后，Hurricane Electric是泄漏期间出现在AS31133上游的唯一运输提供商。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jn jo di jp bf jq"><div class="er es jm"><img src="../Images/4d16bd607ed86b7b74e1b92d9e42d460.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ocrc7Stiz7hCl0O9.png"/></div></div></figure><p id="7851" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">昨天我联系了Telia，他们向我证实，像NTT一样，是他们的路由过滤阻止了他们携带主要互联网公司泄露的前缀。考虑到Megafon的所有七个国际运输提供商，似乎只有Hurricane Electric未能实施路由过滤，这种过滤本来可以防止这种泄漏在更广泛的互联网上传播。</p><p id="4476" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">结论</strong></p><p id="f9a6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果我们能撇开<a class="ae jc" href="http://appleinsider.com/articles/17/12/14/intentional-event-redirects-cloud-traffic-from-apple-google-others-through-russia" rel="noopener ugc nofollow" target="_blank">“俄国攻击！”</a>围绕这个事件的说辞，有一些东西我们可以借鉴。例如，提供者在他们的AS-SET定义中需要更加节俭。正如Qrator Labs 在关于此事件的<a class="ae jc" href="https://radar.qrator.net/blog/born-to-hijack" rel="noopener ugc nofollow" target="_blank">文章</a>中所引用的，一些提供商在他们的AS-set中添加了如此多的ASN，以至于它们无法作为路由过滤的工具。</p><p id="3672" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是尽管存在这种限制，Megafon的7个中转提供商中的6个仍然能够阻止与众多主要互联网公司相关的错误BGP公告。如果第七团也这样做了，我们可能根本不会讨论这个事件。</p></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="1305" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jl">原载于2017年12月22日blogs.oracle.com</em><a class="ae jc" href="https://blogs.oracle.com/internetintelligence/recent-russian-routing-leak-was-largely-preventable" rel="noopener ugc nofollow" target="_blank"><em class="jl"/></a><em class="jl">。</em></p></div></div>    
</body>
</html>