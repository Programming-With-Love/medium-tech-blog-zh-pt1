<html>
<head>
<title>How to add a dark theme to your Mendix app in 5 minutes?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在5分钟内给你的Mendix app添加一个黑暗主题？</h1>
<blockquote>原文：<a href="https://medium.com/mendix/how-to-add-a-dark-theme-to-your-mendix-app-in-5-minutes-6c050693c78a?source=collection_archive---------5-----------------------#2021-02-02">https://medium.com/mendix/how-to-add-a-dark-theme-to-your-mendix-app-in-5-minutes-6c050693c78a?source=collection_archive---------5-----------------------#2021-02-02</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/49fd8a68e1a2b3637672fe34d0eb9aef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v60ipwspePMMu_EQWFN1dg.png"/></div></div></figure><div class=""/><h1 id="79d1" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">是的，我知道这个标题似乎有点好得令人难以置信。每个web应用程序都有许多定制样式和公司品牌，在设计深色主题时需要考虑这些。通常，这个过程需要很长时间。您必须选择正确的调色板，然后重构CSS以支持两种不同的颜色主题。因此，几乎整个CSS都必须重写，因为老实说，没有人真正提前为这样的场景做好计划。</h1><p id="056b" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">那么，这一切怎么可能在短短五分钟内完成呢？简单，按照以下步骤操作:</p><ol class=""><li id="edf4" class="kx ky if bd b kc kz kg la kk lb ko lc ks ld kw le lf lg lh dt translated">将市场上的<a class="ae li" href="https://marketplace.mendix.com/link/component/116773" rel="noopener ugc nofollow" target="_blank">黑暗主题模块</a>添加到你的Mendix应用程序中</li><li id="aa8e" class="kx ky if bd b kc lj kg lk kk ll ko lm ks ln kw le lf lg lh dt translated">向您选择的布局、导航或页面添加一个(或三个)纳米流按钮</li><li id="15d9" class="kx ky if bd b kc lj kg lk kk ll ko lm ks ln kw le lf lg lh dt translated">从nanoflow调用java脚本动作<code class="eh lo lp lq lr b">JSA_ApplyTheme</code></li><li id="8bf3" class="kx ky if bd b kc lj kg lk kk ll ko lm ks ln kw le lf lg lh dt translated">运行您的应用程序并查看结果。</li></ol><p id="73c2" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">我为市场模块<a class="ae li" href="https://marketplace.mendix.com/link/component/104730" rel="noopener ugc nofollow" target="_blank"> Atlas UI Resources </a>完成了这些步骤。你可以在<a class="ae li" href="https://darkreader-sandbox.mxapps.io/" rel="noopener ugc nofollow" target="_blank">https://darkreader-sandbox.mxapps.io/</a>找到结果。这是一个黑暗主题的很好的示例应用程序，因为它有所有的Mendix组件。你可以很容易地看到它们在黑暗主题模式下的样子。</p><p id="f6d1" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">希望你觉得这个模块有用，它可以帮助你构建更好的Mendix应用程序。</p><p id="b275" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">等等，等等…你一定是在问这个模块实际上是如何工作的。答案很简单:</p><p id="67a1" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">🧙‍♂️魔术。</p></div><div class="ab cl lv lw hb lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hn ho hp hq hr"><p id="b207" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">嗯。看起来你很想知道。好了，做好准备，这可能是技术性的。</p><h1 id="7bcc" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">魔力</h1><p id="e218" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">让我告诉你整个故事。</p><p id="a4ff" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">一个美好的冬日，我在寻找一种方法让Duolingo网站对我的眼睛更友好(我正在学习荷兰语，以防你想知道)。在过去，我尝试了几个chrome的黑暗主题扩展，我的体验并不好。但是这次我偶然发现了一个非常好用的扩展。然后我想我每天被所有像Sprintr，Market Place和the Forum这样的light Mendix网站折磨得有多痛苦。事实证明，对于没有大量动画或复杂样式的Mendix网站来说，这个扩展甚至更好。</p><figure class="md me mf mg fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mc"><img src="../Images/3f37602f163f3f8a979f7c1f6e5f3ef6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JmDhqtMDGjOMLTLX"/></div></div></figure><p id="db32" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">我的第一个想法是与每个人分享这个扩展，但我知道大多数网络用户并不喜欢安装一个可以访问他们所有网站内容的第三方依赖项。幸运的是，在仔细查看了扩展之后，发现它是完全开源的。它甚至附带了一个javascript API，因此可以在没有Chrome扩展的网站上使用。</p><p id="609b" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">所以这个模块只是这个开源库的一个包装器—<a class="ae li" href="https://darkreader.org/" rel="noopener ugc nofollow" target="_blank">https://darkreader.org/</a>。</p><p id="8e4b" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">毕竟没有魔法😢</p><p id="b3a3" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">尽管《黑暗阅读器》运行得很好，但还是有一些小部件或页面需要调整，以便看起来更好。这里有一些技巧，基于我在一个真实的、正在运行的Mendix应用程序中添加黑暗主题支持的经验。</p><h1 id="5941" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">技巧</h1><ul class=""><li id="d5ee" class="kx ky if bd b kc kd kg kh kk mh ko mi ks mj kw mk lf lg lh dt translated">首先选择主要的前景色和背景色。黑暗读者会给你一些建议，但是如果根据公司品牌选择特定的颜色，可能会看起来更好。这些可以在主题选项中调整。</li><li id="745a" class="kx ky if bd b kc lj kg lk kk ll ko lm ks ln kw mk lf lg lh dt translated">使用整体设置来调整你喜欢的主题。在我个人看来，将灰度设置为0.25会将Mendix倾向于拥有的大多数非常强烈的颜色调暗到一个可接受的水平，而不会牺牲太多。</li><li id="32ee" class="kx ky if bd b kc lj kg lk kk ll ko lm ks ln kw mk lf lg lh dt translated">反转过暗或过亮的图像。这可以通过为图像指定一个css选择器并在动态主题修复中传递它来实现。查看github的例子<a class="ae li" href="https://github.com/darkreader/darkreader" rel="noopener ugc nofollow" target="_blank">https://github.com/darkreader/darkreader</a>。或者，一些jpg和png可以用glyphicons、fontawesome或其他支持颜色变化的技术来替换。这可能是<a class="ae li" href="https://www.lambdatest.com/blog/its-2019-lets-end-the-debate-on-icon-fonts-vs-svg-icons/" rel="noopener ugc nofollow" target="_blank">更喜欢图标字体而不是png</a>的另一个原因。</li><li id="1d8b" class="kx ky if bd b kc lj kg lk kk ll ko lm ks ln kw mk lf lg lh dt translated">将用户偏好存储在<code class="eh lo lp lq lr b">Account</code>对象上是一个好主意。随意使用<code class="eh lo lp lq lr b">Enum_Theme</code>枚举作为属性类型。如果您正在寻找在加载时运行java script动作的方法，而不需要用户点击按钮，那么可以考虑微流计时器小部件。有趣的是，它还支持纳流。</li><li id="83df" class="kx ky if bd b kc lj kg lk kk ll ko lm ks ln kw mk lf lg lh dt translated">谨慎添加CSS覆盖。当一个元素在深色主题中不好看时，很容易用<code class="eh lo lp lq lr b">!important</code>抛出一个深色主题css，然后就到此为止。但是在更仔细地检查了一些令人不快的元素之后，我发现它们经常有不好的css做法，比如硬编码的内嵌背景颜色等等。事实证明这干扰了黑暗阅读器。在这种情况下，最好重构CSS，让Dark Reader完成它的工作。我想你可以在避免内联样式的一长串理由中加入黑暗主题支持。</li><li id="f0f6" class="kx ky if bd b kc lj kg lk kk ll ko lm ks ln kw mk lf lg lh dt translated">当应用CSS覆盖时，使用黑暗阅读器CSS变量。这将使将来切换背景色和前景色变得容易得多。可用CSS变量列表:<code class="eh lo lp lq lr b">darkreader-neutral-background</code>、<code class="eh lo lp lq lr b">darkreader-neutral-text</code>、<code class="eh lo lp lq lr b">darkreader-selection-background</code>、<code class="eh lo lp lq lr b">darkreader-selection-text.</code></li></ul><h1 id="82d7" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">表演</h1><p id="9708" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">黑暗阅读器的工作原理是不断扫描你的网站，并生成适当的黑暗主题的css规则。这可能会降低客户端的速度，尤其是如果有很多动态内容，如动画和图表。实际上有两种方法来指示黑暗阅读器不要扫描这样的内容:</p><ul class=""><li id="6bd1" class="kx ky if bd b kc kz kg la kk lb ko lc ks ld kw mk lf lg lh dt translated">忽略图像分析-专门针对背景图像</li><li id="10f1" class="kx ky if bd b kc lj kg lk kk ll ko lm ks ln kw mk lf lg lh dt translated">忽略内联样式—不会扫描元素的内联(硬编码)样式(这特别适用于由倾向于使用大量内联样式的图表库生成的元素)</li></ul><p id="95df" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">另一个更极端的选择是完全抛弃java script，只依赖生成的CSS。如果你确定你的网站在未来不会改变太多，也就是说，如果用户界面在相当长的一段时间内(比如几个月)相当稳定，我会推荐你这么做<strong class="bd ml">。</strong></p><p id="4e8b" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">如果您的应用程序是这种情况，那么您可以在本地运行java脚本并导出生成的CSS。</p><p id="9e5b" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated"><code class="eh lo lp lq lr b">DarkReader.exportGeneratedCSS()</code></p><p id="f954" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">然后，您可以将这个css添加到<code class="eh lo lp lq lr b">index.html</code>中，并通过<code class="eh lo lp lq lr b">disabled</code>属性用java脚本切换它。</p><pre class="md me mf mg fq mm lr mn mo aw mp dt"><span id="b7cd" class="mq jd if lr b fv mr ms l mt mu">// index.html, css is disabled by default<br/>// &lt;link id="darkreader" href="darkreader-generated.css" disabled="disabled"/&gt;</span><span id="7203" class="mq jd if lr b fv mv ms l mt mu">// javascript snippet<br/>var el = document.getElementById('darkreader');<br/>var osPreferenceIsDark = window.matchMedia &amp;&amp; window.matchMedia('(prefers-color-scheme: dark)').matches;<br/>if ( theme == "Dark" || <br/>    (theme == "System" &amp;&amp; osPreferenceIsDark ) ) {<br/>    el.removeAttribute("disabled");<br/>} else {<br/>    el.setAttribute("disabled", "disabled");<br/>}</span></pre><h1 id="3736" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">结论</h1><p id="c2d9" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">在这篇博客文章中，我们看到了如何在Mendix应用程序中添加黑暗主题支持，而不必完全重构CSS和花几天时间参加设计会议。我个人的希望是，我们会看到越来越多的Mendix应用支持黑暗主题，尤其是那些公开可用的应用。</p><p id="7c5d" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">在那之前，记住你可以一直使用分机:<a class="ae li" href="https://darkreader.org/" rel="noopener ugc nofollow" target="_blank">https://darkreader.org/</a></p><p id="a455" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">如果你觉得这个模块或者扩展很有用，可以考虑捐给<a class="ae li" href="https://darkreader.org/" rel="noopener ugc nofollow" target="_blank">https://darkreader.org/</a>他们确实做得很好，值得我们尊敬。</p><div class="ht hu fm fo hv mw"><a href="https://www.notion.so/gajduk/How-to-add-a-dark-theme-to-your-Mendix-app-in-5-minutes-27ea7559165b46e3a3aac2f19cef8836" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab ej"><div class="my ab mz cl cj na"><h2 class="bd ig fv z el nb eo ep nc er et ie dt translated">如何在5分钟内给你的Mendix app添加一个黑暗主题？</h2><div class="nd l"><h3 class="bd b fv z el nb eo ep nc er et ek translated">是的，我知道这个标题似乎有点好得令人难以置信。每个web应用程序都有许多定制样式和公司品牌…</h3></div><div class="ne l"><p class="bd b gc z el nb eo ep nc er et ek translated">www . opinion . so</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk ib mw"/></div></div></a></div></div><div class="ab cl lv lw hb lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="hn ho hp hq hr"><p id="a65a" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated"><em class="nl">来自发布者- </em></p><p id="3f0b" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated"><em class="nl">如果你喜欢这篇文章，你可以在我们的</em> <a class="ae li" href="https://medium.com/mendix" rel="noopener"> <em class="nl">媒体页面</em> </a> <em class="nl">或我们自己的</em> <a class="ae li" href="https://developers.mendix.com/community-blog/" rel="noopener ugc nofollow" target="_blank"> <em class="nl">社区博客网站</em> </a> <em class="nl">找到更多类似的内容。</em></p><p id="7a04" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated"><em class="nl">希望入门的创客，可以注册一个</em> <a class="ae li" href="https://signup.mendix.com/link/signup/?source=direct" rel="noopener ugc nofollow" target="_blank"> <em class="nl">免费账号</em> </a> <em class="nl">，通过我们的</em> <a class="ae li" href="https://academy.mendix.com/link/home" rel="noopener ugc nofollow" target="_blank"> <em class="nl">学苑</em> </a> <em class="nl">获得即时学习权限。</em></p><p id="f220" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk ls km kn ko lt kq kr ks lu ku kv kw hn dt translated">有兴趣更多地参与我们的社区吗？你可以加入我们的 <a class="ae li" href="https://join.slack.com/t/mendixcommunity/shared_invite/zt-hwhwkcxu-~59ywyjqHlUHXmrw5heqpQ" rel="noopener ugc nofollow" target="_blank"> <em class="nl">闲散社区频道</em> </a> <em class="nl">或者想更多参与的人，看看加入我们的</em> <a class="ae li" href="https://developers.mendix.com/meetups/#meetupsNearYou" rel="noopener ugc nofollow" target="_blank"> <em class="nl">遇见ups </em> </a> <em class="nl">。</em></p></div></div>    
</body>
</html>