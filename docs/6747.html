<html>
<head>
<title>React Native Reminders with Firebase integration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Firebase集成响应本机提醒</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/react-native-push-notification-with-firebase-integration-c26c434f271c?source=collection_archive---------0-----------------------#2019-11-25">https://medium.com/quick-code/react-native-push-notification-with-firebase-integration-c26c434f271c?source=collection_archive---------0-----------------------#2019-11-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/d691b197ebbfe9f269bf55cc5f186b5a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FMDGcR0Xmo8DqrH0_nrwYA.png"/></div></div></figure><h1 id="e934" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">反应原生Firebase整合:</h1><p id="cdbb" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">React Native Firebase是免费向跨平台(Android、iOS和web)的用户发送消息和通知的最佳方式。消息可以发送到单个设备、设备组或特定主题或用户群。Firebase Cloud Messaging (FCM)甚至可以扩展到最大的应用程序，每天可以发送数千亿条消息。</p><figure class="km kn ko kp fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kl"><img src="../Images/941e4572ae58038a77eddb335484330b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fWPcZ_P7FnrZM8y1dLitWA.png"/></div></div><figcaption class="kq kr et er es ks kt bd b be z dx">React native firebase Plugin</figcaption></figure><p id="972c" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">使用一个简单的命令将Firebase集成到您的应用程序中。</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="3f56" class="le iq hh la b fi lf lg l lh li">yarn add react-native-firebase</span></pre><p id="40cf" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">安装好firebase后，转至<a class="ae lj" href="https://console.firebase.google.com/u/0/" rel="noopener ugc nofollow" target="_blank">谷歌控制台</a>。</p><figure class="km kn ko kp fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lk"><img src="../Images/fffd2631c5dd33385b1887035c7999c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TEXaVpV35boxWPonp_NxCg.png"/></div></div></figure><p id="bcee" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">通过单击“添加项目”按钮，创建一个与您的项目同名的新项目。一旦您完成了整个设置。现在是集成和创建特定应用程序的时候了</p><h1 id="dabc" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">iOS安装:核心设置</h1><ol class=""><li id="e012" class="ll lm hh jp b jq jr ju jv jy ln kc lo kg lp kk lq lr ls lt bi translated">转到项目仪表板，单击顶部的添加应用程序按钮。一旦你点击了按钮，一个新的窗口将会打开，根据你的平台注册firebase凭据。选择iOS，现在，以后，我们还会使用相同的按钮来创建Android凭据。</li><li id="1789" class="ll lm hh jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">Google Service Infoplist是一个包含所有凭据的文件。输入您的应用程序的名称，如com . James . notification。其余两个值是可选的，您可以跳过它。完成后，下载该文件并将其存储在项目的XCode应用程序文件夹中。</li></ol><figure class="km kn ko kp fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lz"><img src="../Images/7db5e4c6c7080d2766eb504ddfa1d374.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WkGlotX-9fjZM4s1mEHt-w.png"/></div></div></figure><ol class=""><li id="92ed" class="ll lm hh jp b jq ku ju kv jy ma kc mb kg mc kk lq lr ls lt bi translated">更新AppDelegate.m文件:要在应用程序中初始化本机SDK，请将以下内容添加到您的<code class="du md me mf la b">ios/[YOUR APP NAME]/AppDelegate.m</code>文件中</li></ol><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="13f4" class="le iq hh la b fi lf lg l lh li">#import &lt;Firebase.h&gt;</span><span id="53ef" class="le iq hh la b fi mg lg l lh li">@implementation AppDelegate<br/>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions<br/>{</span><span id="ed90" class="le iq hh la b fi mg lg l lh li">[FIRApp configure]; // Add this line to the existing code.</span></pre><p id="5bb5" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">2.更新播客文件:你可以去你项目的iOS文件夹中寻找播客文件。在测试的目标代码之前添加以下一行。</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="0050" class="le iq hh la b fi lf lg l lh li"># Required by RNFirebase<br/>pod 'Firebase/Core', '~&gt; 6.6.0'</span><span id="e93c" class="le iq hh la b fi mg lg l lh li">Run pod install once you have updated the code.</span></pre><p id="548f" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">3.最后一步是将模块与项目链接起来。您需要运行代码一次</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="6126" class="le iq hh la b fi lf lg l lh li">// Add this code to your podfile</span><span id="cec1" class="le iq hh la b fi mg lg l lh li">pod 'RNFirebase', :path =&gt; '../node_modules/react-native-firebase/ios'</span><span id="81cf" class="le iq hh la b fi mg lg l lh li">// Once pod is updated link the plugin with the following command</span><span id="afb7" class="le iq hh la b fi mg lg l lh li">react-native link react-native-firebase</span></pre><p id="0ebf" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">一旦这样做了，我们就完成了iOS的反应本地链接。让我们更多地了解安卓。</p><h1 id="f550" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">安卓安装:核心设置</h1><ol class=""><li id="4394" class="ll lm hh jp b jq jr ju jv jy ln kc lo kg lp kk lq lr ls lt bi translated">重复iOS安装步骤1，但这次是android，注册应用程序以便以后下载。下载后，将此文件放在<code class="du md me mf la b">android/app/google-services.json</code>处的项目根目录下。</li><li id="839f" class="ll lm hh jp b jq lu ju lv jy lw kc lx kg ly kk lq lr ls lt bi translated">在android文件夹的主build.gradle文件中，您需要添加以下行。</li></ol><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="a28c" class="le iq hh la b fi lf lg l lh li">buildscript {<br/>  // ...<br/>  dependencies {<br/>    // ...<br/>    classpath 'com.google.gms:google-services:4.2.0'<br/>  }<br/>}</span><span id="43a9" class="le iq hh la b fi mg lg l lh li">// To apply the plugin to your project, add the following to the VERY BOTTOM of your app <!-- -->android/app/build.gradle<!-- --> file:</span><span id="eb41" class="le iq hh la b fi mg lg l lh li">apply plugin: 'com.google.gms.google-services'</span></pre><p id="dfe7" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">3.在<code class="du md me mf la b">android/app/build.gradle</code>文件中，添加以下内容:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="6bb2" class="le iq hh la b fi lf lg l lh li">dependencies {<br/>  // This should be here already<br/>  implementation project(':react-native-firebase')</span><span id="675c" class="le iq hh la b fi mg lg l lh li">// Firebase dependencies<br/>  implementation "com.google.android.gms:play-services-base:16.1.0"<br/>  implementation "com.google.firebase:firebase-core:16.0.9"</span><span id="f8e6" class="le iq hh la b fi mg lg l lh li">...</span></pre><p id="b516" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">您已经成功地将该库与iOS和安卓平台集成在一起。</p></div><div class="ab cl mh mi go mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ha hb hc hd he"><h1 id="5d85" class="ip iq hh bd ir is mo iu iv iw mp iy iz ja mq jc jd je mr jg jh ji ms jk jl jm bi translated">通知模块设置</h1><p id="f791" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">因为我们要添加通知。我们需要firebase的两个基本通知模块，即云消息和通知。</p><h1 id="276d" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">iOS安装:通知</h1><p id="31aa" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">将以下代码添加到您现有的podfile中。</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="7a15" class="le iq hh la b fi lf lg l lh li">pod 'Firebase/Messaging'<br/>pod update</span></pre><p id="3da5" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">将以下导入添加到您的<code class="du md me mf la b">ios/[App Name]/AppDelegate.m</code>顶部:</p><p id="e5c8" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated"><code class="du md me mf la b">#import "RNFirebaseNotifications.h"</code></p><p id="e3ac" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">将以下内容添加到方法的<code class="du md me mf la b">didFinishLaunchingWithOptions:(NSDictionary *)launchOptions</code>中，紧接在<code class="du md me mf la b">[FIRApp Configure]</code>之后:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="87b1" class="le iq hh la b fi lf lg l lh li">[RNFirebaseNotifications configure];</span></pre><p id="4923" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">添加以下方法:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="986a" class="le iq hh la b fi lf lg l lh li">- (void)application:(UIApplication *)application didReceiveLocalNotification:(UILocalNotification *)notification {<br/>  [[RNFirebaseNotifications instance] didReceiveLocalNotification:notification];<br/>}</span></pre><h2 id="cd86" class="le iq hh bd ir mt mu mv iv mw mx my iz jy mz na jd kc nb nc jh kg nd ne jl nf bi translated"><a class="ae lj" href="https://rnfirebase.io/docs/v4.0.x/notifications/ios#Remote-Notifications-(Optional)" rel="noopener ugc nofollow" target="_blank">远程通知(可选)</a></h2><p id="d5e2" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">如果您想通过FCM支持远程通知，也可以将以下导入添加到您的<code class="du md me mf la b">ios/[App Name]/AppDelegate.m</code>的顶部:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="2317" class="le iq hh la b fi lf lg l lh li">#import "RNFirebaseMessaging.h"</span></pre><p id="ae90" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">然后将以下方法添加到您的<code class="du md me mf la b">ios/[App Name]/AppDelegate.m</code>中:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="80ce" class="le iq hh la b fi lf lg l lh li">- (void)application:(UIApplication *)application didReceiveRemoteNotification:(nonnull NSDictionary *)userInfo<br/>                                                       fetchCompletionHandler:(nonnull void (^)(UIBackgroundFetchResult))completionHandler{<br/>  [[RNFirebaseNotifications instance] didReceiveRemoteNotification:userInfo fetchCompletionHandler:completionHandler];<br/>}</span><span id="e826" class="le iq hh la b fi mg lg l lh li">- (void)application:(UIApplication *)application didRegisterUserNotificationSettings:(UIUserNotificationSettings *)notificationSettings {<br/>  [[RNFirebaseMessaging instance] didRegisterUserNotificationSettings:notificationSettings];<br/>}</span></pre><h1 id="f514" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">Android安装:通知</h1><p id="ec10" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">将Firebase云消息传递依赖项和可选的快捷方式依赖项添加到<code class="du md me mf la b">android/app/build.gradle</code>:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="fafe" class="le iq hh la b fi lf lg l lh li">dependencies {<br/>  // ...<br/>  implementation "com.google.firebase:firebase-messaging:15.0.2"<br/>  implementation '<a class="ae lj" href="mailto:me.leolin:ShortcutBadger:1.1.21@aar" rel="noopener ugc nofollow" target="_blank">me.leolin:ShortcutBadger:1.1.21@aar</a>' // &lt;-- Add this line if you wish to use badge on Android<br/>}</span></pre><h2 id="bd2c" class="le iq hh bd ir mt mu mv iv mw mx my iz jy mz na jd kc nb nc jh kg nd ne jl nf bi translated"><a class="ae lj" href="https://rnfirebase.io/docs/v4.0.x/messaging/android#Install-the-RNFirebase-Messaging-package" rel="noopener ugc nofollow" target="_blank">安装RNFirebase消息传递包</a></h2><p id="205d" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">将<code class="du md me mf la b">RNFirebaseMessagingPackage</code>添加到您的<code class="du md me mf la b">android/app/src/main/java/com/[app name]/MainApplication.java</code>中:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="49ec" class="le iq hh la b fi lf lg l lh li">// ...<br/>import io.invertase.firebase.RNFirebasePackage;<br/>import io.invertase.firebase.messaging.RNFirebaseMessagingPackage; // &lt;-- Add this line</span><span id="4215" class="le iq hh la b fi mg lg l lh li">public class MainApplication extends Application implements ReactApplication {<br/>    // ...</span><span id="20f2" class="le iq hh la b fi mg lg l lh li">    @Override<br/>    protected List&lt;ReactPackage&gt; getPackages() {<br/>      return Arrays.&lt;ReactPackage&gt;asList(<br/>          new MainReactPackage(),<br/>          new RNFirebasePackage(),<br/>          new RNFirebaseMessagingPackage() // &lt;-- Add this line<br/>      );<br/>    }<br/>  };<br/>  // ...<br/>}</span></pre><h2 id="5e9d" class="le iq hh bd ir mt mu mv iv mw mx my iz jy mz na jd kc nb nc jh kg nd ne jl nf bi translated"><a class="ae lj" href="https://rnfirebase.io/docs/v4.0.x/messaging/android#Update-Android-Manifest" rel="noopener ugc nofollow" target="_blank">更新Android清单</a></h2><p id="862b" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">将以下内容添加到<code class="du md me mf la b">android/app/src/main/AndroidManifest.xml</code>:</p><p id="32df" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">在应用程序组件中，添加消息服务和实例ID服务:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="de9e" class="le iq hh la b fi lf lg l lh li">&lt;application ...&gt;<br/>  &lt;service android:name="io.invertase.firebase.messaging.RNFirebaseMessagingService"&gt;<br/>    &lt;intent-filter&gt;<br/>      &lt;action android:name="com.google.firebase.MESSAGING_EVENT" /&gt;<br/>    &lt;/intent-filter&gt;<br/>  &lt;/service&gt;<br/>  &lt;service android:name="io.invertase.firebase.messaging.RNFirebaseInstanceIdService"&gt;<br/>    &lt;intent-filter&gt;<br/>      &lt;action android:name="com.google.firebase.INSTANCE_ID_EVENT"/&gt;<br/>    &lt;/intent-filter&gt;<br/>  &lt;/service&gt;<br/>&lt;/application&gt;</span></pre><h2 id="a325" class="le iq hh bd ir mt mu mv iv mw mx my iz jy mz na jd kc nb nc jh kg nd ne jl nf bi translated"><a class="ae lj" href="https://rnfirebase.io/docs/v4.0.x/messaging/android#(Optional)-Background-Messages" rel="noopener ugc nofollow" target="_blank">(可选)背景信息</a></h2><p id="7920" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">如果您希望在应用程序处于后台时能够对纯数据消息做出反应，例如显示提醒通知，那么您需要将以下内容添加到<code class="du md me mf la b">android/app/src/main/AndroidManifest.xml</code>:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="10a6" class="le iq hh la b fi lf lg l lh li">&lt;application ...&gt;<br/>  &lt;service android:name="io.invertase.firebase.messaging.RNFirebaseBackgroundMessagingService" /&gt;<br/>&lt;/application&gt;</span></pre><h2 id="c9de" class="le iq hh bd ir mt mu mv iv mw mx my iz jy mz na jd kc nb nc jh kg nd ne jl nf bi translated"><a class="ae lj" href="https://rnfirebase.io/docs/v4.0.x/notifications/android#Install-the-RNFirebase-Notifications-package" rel="noopener ugc nofollow" target="_blank">安装RNFirebase通知包</a></h2><p id="a2c2" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">将<code class="du md me mf la b">RNFirebaseNotificationsPackage</code>添加到您的<code class="du md me mf la b">android/app/src/main/java/com/[app name]/MainApplication.java</code>中:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="167e" class="le iq hh la b fi lf lg l lh li">// ...<br/>import io.invertase.firebase.RNFirebasePackage;<br/>import io.invertase.firebase.notifications.RNFirebaseNotificationsPackage; // &lt;-- Add this line</span><span id="cd98" class="le iq hh la b fi mg lg l lh li">public class MainApplication extends Application implements ReactApplication {<br/>    // ...</span><span id="3f96" class="le iq hh la b fi mg lg l lh li">    @Override<br/>    protected List&lt;ReactPackage&gt; getPackages() {<br/>      return Arrays.&lt;ReactPackage&gt;asList(<br/>          new MainReactPackage(),<br/>          new RNFirebasePackage(),<br/>          new RNFirebaseNotificationsPackage() // &lt;-- Add this line<br/>      );<br/>    }<br/>  };<br/>  // ...<br/>}</span></pre><h1 id="299e" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated"><a class="ae lj" href="https://rnfirebase.io/docs/v4.0.x/notifications/android#Update-Android-Manifest" rel="noopener ugc nofollow" target="_blank">更新Android清单</a></h1><p id="10a8" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">将以下内容添加到<code class="du md me mf la b">android/app/src/main/AndroidManifest.xml</code>:</p><p id="eb73" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">添加权限:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="277e" class="le iq hh la b fi lf lg l lh li">&lt;manifest ...&gt;<br/>  &lt;uses-permission android:name="android.permission.INTERNET" /&gt;<br/>  &lt;uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" /&gt;<br/>  &lt;uses-permission android:name="android.permission.VIBRATE" /&gt;</span></pre><p id="29de" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">设置app <a class="ae lj" href="https://inthecheesefactory.com/blog/understand-android-activity-launchmode/en" rel="noopener ugc nofollow" target="_blank">启动模式</a>内活动道具:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="ff5a" class="le iq hh la b fi lf lg l lh li">&lt;activity ...<br/>  android:launchMode="singleTop"<br/>&gt;</span></pre><h2 id="cc12" class="le iq hh bd ir mt mu mv iv mw mx my iz jy mz na jd kc nb nc jh kg nd ne jl nf bi translated"><a class="ae lj" href="https://rnfirebase.io/docs/v4.0.x/notifications/android#Scheduled-Notifications-(Optional)" rel="noopener ugc nofollow" target="_blank">预定通知(可选)</a></h2><p id="4a13" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">如果您想安排本地通知，那么您还需要将以下内容添加到<code class="du md me mf la b">android/app/src/main/AndroidManifest.xml</code>的应用程序组件中:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="9a75" class="le iq hh la b fi lf lg l lh li">&lt;application ...&gt;<br/>  &lt;receiver android:name="io.invertase.firebase.notifications.RNFirebaseNotificationReceiver"/&gt;<br/>  &lt;receiver android:enabled="true" android:exported="true"  android:name="io.invertase.firebase.notifications.RNFirebaseNotificationsRebootReceiver"&gt;<br/>    &lt;intent-filter&gt;<br/>      &lt;action android:name="android.intent.action.BOOT_COMPLETED"/&gt;<br/>      &lt;action android:name="android.intent.action.QUICKBOOT_POWERON"/&gt;<br/>      &lt;action android:name="com.htc.intent.action.QUICKBOOT_POWERON"/&gt;<br/>      &lt;category android:name="android.intent.category.DEFAULT" /&gt;<br/>    &lt;/intent-filter&gt;<br/>  &lt;/receiver&gt;<br/>&lt;/application&gt;</span></pre><h1 id="f6f5" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">通知代码:</h1><p id="eee3" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">在集成代码之前，请安装以下依赖项:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="bb34" class="le iq hh la b fi lf lg l lh li">yarn add @react-native-community/async-storage</span></pre><p id="29b4" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">将以下代码添加到App.js文件中</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="33a8" class="le iq hh la b fi lf lg l lh li">import React from 'react';<br/>import {View, Alert} from 'react-native';<br/>import {styles} from './styles';<br/>import firebase from 'react-native-firebase';<br/>import Dash from './Dashboard';</span><span id="e725" class="le iq hh la b fi mg lg l lh li">export default class App extends React.Component {</span><span id="fdeb" class="le iq hh la b fi mg lg l lh li">componentDidMount() {<br/>// Create notification channel required for Android devices<br/>this.createNotificationChannel();<br/>// Ask notification permission and add notification listener<br/>this.checkPermission();<br/>}</span><span id="fc34" class="le iq hh la b fi mg lg l lh li">createNotificationChannel = () =&gt; {<br/>// Build a android notification channel<br/>const channel = new firebase.notifications.Android.Channel(<br/>'reminder', // channelId<br/>'Reminders Channel', // channel name<br/>firebase.notifications.Android.Importance.High, // channel importance<br/>).setDescription('Used for getting reminder notification'); // channel description<br/>// Create the android notification channel<br/>firebase.notifications().android.createChannel(channel);<br/>};</span><span id="62ed" class="le iq hh la b fi mg lg l lh li">checkPermission = async () =&gt; {<br/>const enabled = await firebase.messaging().hasPermission();<br/>if (enabled) {<br/>// We've the permission<br/>this.notificationListener = firebase<br/>.notifications()<br/>.onNotification(async notification =&gt; {<br/>// Display your notification<br/>await firebase.notifications().displayNotification(notification);<br/>console.log(notification);<br/>});<br/>} else {<br/>// user doesn't have permission<br/>try {<br/>await firebase.messaging().requestPermission();<br/>} catch (error) {<br/>Alert.alert(<br/>'Unable to access the Notification permission. Please enable the Notification Permission from the settings',<br/>);<br/>}<br/>}};<br/>render() {<br/>return (<br/>&lt;View style={styles.container}&gt;<br/> &lt;Dashboard /&gt;<br/>&lt;/View&gt;<br/>);}}</span></pre><p id="f0a2" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">前端的仪表板代码:</p><pre class="km kn ko kp fd kz la lb lc aw ld bi"><span id="d0f4" class="le iq hh la b fi lf lg l lh li">/* eslint-disable react-native/no-inline-styles */<br/>import React, {useState, useEffect} from 'react';<br/>import {SafeAreaView,Text,Platform,View,TouchableOpacity} from 'react-native';<br/>import AsyncStorage from '@react-native-community/async-storage';<br/>import DateTimePicker from 'react-native-modal-datetime-picker';<br/>import moment from 'moment';<br/>import firebase from 'react-native-firebase';<br/>import {styles} from './styles';</span><span id="490d" class="le iq hh la b fi mg lg l lh li">const Dashboard = () =&gt; {<br/>const [showTimer, setShowTimer] = useState(false);<br/>const [reminderTime, setReminderTime] = useState(moment({hour: 17}));</span><span id="8ede" class="le iq hh la b fi mg lg l lh li">useEffect(() =&gt; {<br/>async function setReminder() {<br/>await firebase.notifications().cancelAllNotifications();<br/>// schedule notification<br/>await firebase.notifications().scheduleNotification(buildNotification(), {<br/>fireDate: reminderTime.valueOf(),<br/>repeatInterval: 'day',<br/>exact: true,<br/>});<br/>}setReminder();<br/>}, [reminderTime]);</span><span id="3666" class="le iq hh la b fi mg lg l lh li">useEffect(() =&gt; {retrieveData();}, []);</span><span id="50aa" class="le iq hh la b fi mg lg l lh li">const buildNotification = () =&gt; {<br/>const title = Platform.OS === 'android' ? 'Daily reminder' : 'Trip Planner Reminder';<br/>const notification = new firebase.notifications.Notification().setNotificationId('1') // Any random ID<br/>.setTitle(title) // Title of the notification<br/>.setBody('red is blue') // body of notification<br/>.android.setPriority(firebase.notifications.Android.Priority.High) // set priority in Android<br/>.android.setChannelId('reminder') // should be the same when creating channel for Android<br/>.android.setAutoCancel(true); // To remove notification when tapped on it<br/>return notification;<br/>};</span><span id="7a26" class="le iq hh la b fi mg lg l lh li">const showDateTimePicker = () =&gt; {<br/>setShowTimer(true);<br/>};</span><span id="4782" class="le iq hh la b fi mg lg l lh li">const hideDateTimePicker = () =&gt; {<br/>setShowTimer(false);<br/>};</span><span id="b0bf" class="le iq hh la b fi mg lg l lh li">const handleDatePicked = async time =&gt; {<br/>await AsyncStorage.setItem('time', JSON.stringify(time));<br/>setReminderTime(moment(time));<br/>hideDateTimePicker();<br/>};</span><span id="e928" class="le iq hh la b fi mg lg l lh li">const retrieveData = async () =&gt; {<br/>try {<br/>const valueString = await AsyncStorage.getItem('time');<br/>const value = JSON.parse(valueString);<br/>if (value !== null) {<br/>setReminderTime(moment(value));<br/>}} catch (error) {console.log(error);}};</span><span id="42b3" class="le iq hh la b fi mg lg l lh li">return (<br/>&lt;SafeAreaView style={styles.container}&gt;<br/>&lt;View style={styles.row}&gt;<br/>&lt;Text style={styles.title}&gt;Reminder Time:&lt;/Text&gt;<br/>&lt;Text style={styles.text}&gt;{reminderTime.format('LT')}&lt;/Text&gt;<br/>&lt;/View&gt;<br/>&lt;TouchableOpacity onPress={showDateTimePicker} style={styles.btn}&gt;<br/>&lt;Text&gt;Update reminder time here&lt;/Text&gt;&lt;/TouchableOpacity&gt;&lt;/View&gt;</span><span id="877e" class="le iq hh la b fi mg lg l lh li">&lt;DateTimePicker isVisible={showTimer} onConfirm={handleDatePicked}onCancel={hideDateTimePicker} mode="time" date={new Date()} is24Hour={false} titleIOS="Select a reminder time" /&gt;</span><span id="6e45" class="le iq hh la b fi mg lg l lh li">&lt;/SafeAreaView&gt;<br/>);};</span><span id="7f50" class="le iq hh la b fi mg lg l lh li">export default Dashboard;</span></pre><div class="km kn ko kp fd ab cb"><figure class="ng ii nh ni nj nk nl paragraph-image"><img src="../Images/51733c8a98512df9535329c4af56225d.png" data-original-src="https://miro.medium.com/v2/resize:fit:596/format:webp/1*nYrUkz5t7ztPTmOYnn7r6w.png"/></figure><figure class="ng ii nm ni nj nk nl paragraph-image"><img src="../Images/0cc90bf8b87afeea7f9ab660b72a3f7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:652/format:webp/1*lwEi53Fy7BHX8E0EAXF1cw.png"/></figure></div><blockquote class="nn no np"><p id="33e5" class="jn jo nq jp b jq ku js jt ju kv jw jx nr kw ka kb ns kx ke kf nt ky ki kj kk ha bi translated">C <!-- -->结束语:上面给出的代码将为您提供一个计时器来选择时间，您只需要添加时间，然后等待通知提醒的确切时间。对于iOS，该应用程序将在前台显示提醒，而在android中，通知将只在后台可见。</p></blockquote><p id="768f" class="pw-post-body-paragraph jn jo hh jp b jq ku js jt ju kv jw jx jy kw ka kb kc kx ke kf kg ky ki kj kk ha bi translated">如果你有任何问题让我知道。如果代码中有错误。</p></div></div>    
</body>
</html>