<html>
<head>
<title>Navigation in Feature Modules</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">功能模块中的导航</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/navigation-in-feature-modules-322ac3d79334?source=collection_archive---------7-----------------------#2021-06-02">https://medium.com/androiddevelopers/navigation-in-feature-modules-322ac3d79334?source=collection_archive---------7-----------------------#2021-06-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/78243efcf455993e6100439f3f7a559a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v7S7LKg4TlrMRlneeP224Q.jpeg"/></div></div></figure><div class=""/><p id="943b" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">欢迎阅读关于导航的第二个MAD技能系列的另一篇文章！如果你更喜欢视频形式的内容，可以看看下面的内容:</p><figure class="jn jo jp jq fd hj"><div class="bz dy l di"><div class="jr js l"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">Navigation in Feature Modules video</figcaption></figure><h1 id="8da4" class="jx jy hs bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">介绍</h1><p id="9b7e" class="pw-post-body-paragraph ip iq hs ir b is kv iu iv iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm ha bi translated">在上一篇文章中，您学习了如何在多模块项目中使用导航。在本文中，我们将更进一步，将coffee模块转换为特性模块。如果你不熟悉功能模块，你可能想先看看这个视频。</p><figure class="jn jo jp jq fd hj"><div class="bz dy l di"><div class="jr js l"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">App Bundles</figcaption></figure><p id="5eb4" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">功能模块不会在安装时下载，而是仅在应用程序请求时下载。这节省了下载和安装的时间和带宽，以及设备存储。</p><p id="5f2e" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，让我们为用户节省一些字节！让我们开始编码吧！</p><h1 id="d108" class="jx jy hs bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">功能模块</h1><p id="5d52" class="pw-post-body-paragraph ip iq hs ir b is kv iu iv iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm ha bi translated">因为我在上一篇文章中已经模块化了甜甜圈跟踪器应用程序，所以我将从将现有的coffee模块转换为feature模块开始。如果你想继续下去，你可以从这个报告中查看启动代码。</p><p id="024c" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">首先，我用coffee模块的<code class="du lb lc ld le b">build.gradle</code>中的动态特性插件替换了库插件。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="20ce" class="lj jy hs le b fi lk ll l lm ln">id 'com.android.dynamic-feature'</span></pre><p id="17a6" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，我在<code class="du lb lc ld le b">androidmanifest.xml</code>中将coffee模块声明为按需模块。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="68b1" class="lj jy hs le b fi lk ll l lm ln">&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;manifest xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:dist="http://schemas.android.com/apk/distribution"<br/>    package="com.android.samples.donuttracker.coffee"&gt;<br/>    <strong class="le ht">&lt;dist:module<br/>        dist:instant="false"<br/>        dist:title="@string/title_coffee"&gt;<br/>        &lt;dist:delivery&gt;<br/>            &lt;dist:on-demand /&gt;<br/>        &lt;/dist:delivery&gt;<br/>        &lt;dist:fusing dist:include="true" /&gt;<br/>    &lt;/dist:module&gt;</strong><br/>&lt;/manifest&gt;</span></pre><p id="8ea2" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">既然coffee模块已经被转换，我将这个模块添加为一个<code class="du lb lc ld le b">dynamicFeature</code>。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="2a87" class="lj jy hs le b fi lk ll l lm ln">android {<br/>    //...<br/><br/>    packagingOptions <strong class="le ht">{<br/>        </strong>exclude 'META-INF/atomicfu.kotlin_module'<br/>    <strong class="le ht">}<br/><br/>    dynamicFeatures = [':coffee']</strong><br/><br/><strong class="le ht">}</strong></span></pre><p id="72f3" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我还从应用程序<code class="du lb lc ld le b">build.gradle</code>的依赖项列表中删除了coffee模块，并添加了导航动态特性依赖项。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="8416" class="lj jy hs le b fi lk ll l lm ln">implementation "androidx.navigation:navigation-dynamic-features-fragment:$navigationVersion"</span></pre><p id="19bf" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一旦gradle同步完成，就该更新导航图了。我将include标签改为<code class="du lb lc ld le b">include-dynamic</code>，添加一个<code class="du lb lc ld le b">id</code>、<code class="du lb lc ld le b">graphResName</code>和指向特性模块的<code class="du lb lc ld le b">moduleName</code>。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="42e7" class="lj jy hs le b fi lk ll l lm ln">&lt;include-dynamic<br/>    android:id="@+id/coffeeGraph"<br/>    app:moduleName="coffee"<br/>    app:graphResName="coffee_graph"/&gt;</span></pre><p id="0926" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此时，我可以安全地从<code class="du lb lc ld le b">coffee_graph.xml</code>中移除<code class="du lb lc ld le b">id</code>属性，因为动态导航库忽略了所包含图形的根元素中的<code class="du lb lc ld le b">id</code>属性。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="d38d" class="lj jy hs le b fi lk ll l lm ln">&lt;navigation xmlns:android="<a class="ae la" href="http://schemas.android.com/apk/res/android" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"<br/>    xmlns:app="<a class="ae la" href="http://schemas.android.com/apk/res-auto" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res-auto</a>"<br/>    xmlns:tools="<a class="ae la" href="http://schemas.android.com/tools" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/tools</a>"<br/>    app:startDestination="<a class="ae la" href="http://twitter.com/id/coffeeList" rel="noopener ugc nofollow" target="_blank">@id/coffeeList</a>"&gt;<br/>    &lt;fragment<br/>        android:id="@+id/coffeeList"<br/>        android:name="com.android.samples.donuttracker.coffee.CoffeeList"<br/>        android:label="<a class="ae la" href="http://twitter.com/string/coffee_list" rel="noopener ugc nofollow" target="_blank">@string/coffee_list</a>"&gt;<br/>        &lt;action<br/>            android:id="@+id/action_coffeeList_to_coffeeEntryDialogFragment"<br/>            app:destination="<a class="ae la" href="http://twitter.com/id/coffeeEntryDialogFragment" rel="noopener ugc nofollow" target="_blank">@id/coffeeEntryDialogFragment</a>" /&gt;<br/>    &lt;/fragment&gt;<br/>    &lt;dialog<br/>        android:id="@+id/coffeeEntryDialogFragment"<br/>        android:name="com.android.samples.donuttracker.coffee.CoffeeEntryDialogFragment"<br/>        android:label="CoffeeEntryDialogFragment"&gt;<br/>        &lt;argument<br/>            android:name="itemId"<br/>            android:defaultValue="-1L"<br/>            app:argType="long" /&gt;<br/>    &lt;/dialog&gt;<br/>&lt;/navigation&gt;</span></pre><p id="a3f9" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在<code class="du lb lc ld le b">activity_main</code>布局中，我将<code class="du lb lc ld le b">FragmentContainerView</code>的<code class="du lb lc ld le b">name</code>从<code class="du lb lc ld le b">NavHostFragment</code>改为<code class="du lb lc ld le b">DynamicNavHostFragment</code>。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="7b62" class="lj jy hs le b fi lk ll l lm ln">&lt;androidx.fragment.app.FragmentContainerView<br/>        android:id="@+id/nav_host_fragment"<br/>        android:name="<strong class="le ht">androidx.navigation.dynamicfeatures.fragment.DynamicNavHostFragment</strong>"<br/>        android:layout_width="match_parent"<br/>        android:layout_height="0dp"<br/>        android:layout_weight="1"<br/>        app:defaultNavHost="true"<br/>        app:navGraph="<a class="ae la" href="http://twitter.com/navigation/nav_graph" rel="noopener ugc nofollow" target="_blank">@navigation/nav_graph</a>" /&gt;</span></pre><p id="cc1d" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">类似于包含图，为了使动态包含工作，咖啡的菜单项<code class="du lb lc ld le b">id</code>需要匹配图名，而不是目的地<code class="du lb lc ld le b">id</code>。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="ca7c" class="lj jy hs le b fi lk ll l lm ln">&lt;menu xmlns:android="<a class="ae la" href="http://schemas.android.com/apk/res/android" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"&gt;<br/>    &lt;item<br/>        android:id="<a class="ae la" href="http://twitter.com/id/donutList" rel="noopener ugc nofollow" target="_blank">@id/donutList</a>"<br/>        android:icon="<a class="ae la" href="http://twitter.com/drawable/donut_with_sprinkles" rel="noopener ugc nofollow" target="_blank">@drawable/donut_with_sprinkles</a>"<br/>        android:title="<a class="ae la" href="http://twitter.com/string/donut_name" rel="noopener ugc nofollow" target="_blank">@string/donut_name</a>" /&gt;<br/>    &lt;item<br/>        <strong class="le ht">android:id="</strong><a class="ae la" href="http://twitter.com/id/coffeeGraph" rel="noopener ugc nofollow" target="_blank"><strong class="le ht">@id/coffeeGraph</strong></a><strong class="le ht">"</strong><br/>        android:icon="<a class="ae la" href="http://twitter.com/drawable/coffee_cup" rel="noopener ugc nofollow" target="_blank">@drawable/coffee_cup</a>"<br/>        android:title="<a class="ae la" href="http://twitter.com/string/coffee_name" rel="noopener ugc nofollow" target="_blank">@string/coffee_name</a>" /&gt;<br/>&lt;/menu&gt;</span></pre><p id="26d3" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这是我添加动态导航所需要做的一切。现在我将使用bundletool来测试特性模块。您还可以使用播放控制台来测试功能模块。如果您想了解更多关于如何使用bundletool和Play Console来测试功能模块安装的信息，您可能想看看下面的视频。</p><figure class="jn jo jp jq fd hj"><div class="bz dy l di"><div class="jr js l"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">bundletool video</figcaption></figure><p id="9f28" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我还想测试如果模块不能安装会发生什么。为此，我从运行/调试配置中要部署的模块列表中取消选择<code class="du lb lc ld le b">donuttracker.coffee </code>。现在，当我运行应用程序并导航到<code class="du lb lc ld le b">coffeeList</code>时。将显示一般错误消息。</p><figure class="jn jo jp jq fd hj er es paragraph-image"><div class="er es lo"><img src="../Images/c6d301e45d05713a9a168d380f596f0e.png" data-original-src="https://miro.medium.com/v2/resize:fit:700/format:webp/1*phN0B4ruZDWI3MCXfoanPQ.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">generic error message</figcaption></figure><p id="930a" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">既然功能模块设置已经完成，是时候改善用户体验了。在下载功能模块时给用户定制的反馈，或者显示一个更有意义的错误信息而不是一般的错误信息，这不是很好吗？</p><p id="de1d" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为此，我可以添加一个监视器来处理安装状态、进度变化或错误，同时用户保持在同一个屏幕上。或者，我可以添加一个定制的进度片段，在下载功能模块时显示进度。</p><p id="5ab3" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">导航内置了对<a class="ae la" href="https://developer.android.com/guide/navigation/navigation-dynamic" rel="noopener ugc nofollow" target="_blank">进度片段</a>的支持。我需要做的就是创建一个扩展AbstractProgressFragment的新片段。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="5255" class="lj jy hs le b fi lk ll l lm ln">class ProgressFragment : AbstractProgressFragment(R.layout.fragment_progress) {</span><span id="1f36" class="lj jy hs le b fi lp ll l lm ln">}</span></pre><p id="76b7" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我添加了一个<code class="du lb lc ld le b">ImageView</code>、一个<code class="du lb lc ld le b">TextView</code>和一个<code class="du lb lc ld le b">ProgressBar</code>来显示下载状态。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="bfb7" class="lj jy hs le b fi lk ll l lm ln">&lt;LinearLayout xmlns:android="<a class="ae la" href="http://schemas.android.com/apk/res/android" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"<br/>    xmlns:tools="<a class="ae la" href="http://schemas.android.com/tools" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/tools</a>"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="match_parent"<br/>    android:orientation="vertical"<br/>    android:paddingLeft="<a class="ae la" href="http://twitter.com/dimen/default_margin" rel="noopener ugc nofollow" target="_blank">@dimen/default_margin</a>"<br/>    android:paddingTop="<a class="ae la" href="http://twitter.com/dimen/default_margin" rel="noopener ugc nofollow" target="_blank">@dimen/default_margin</a>"<br/>    android:paddingRight="<a class="ae la" href="http://twitter.com/dimen/default_margin" rel="noopener ugc nofollow" target="_blank">@dimen/default_margin</a>"<br/>    android:paddingBottom="<a class="ae la" href="http://twitter.com/dimen/default_margin" rel="noopener ugc nofollow" target="_blank">@dimen/default_margin</a>"&gt;</span><span id="2bdb" class="lj jy hs le b fi lp ll l lm ln"><strong class="le ht">    &lt;ImageView<br/>        android:id="@+id/progressImage"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        android:src="</strong><a class="ae la" href="http://twitter.com/drawable/coffee_cup" rel="noopener ugc nofollow" target="_blank"><strong class="le ht">@drawable/coffee_cup</strong></a><strong class="le ht">"<br/>        android:layout_marginBottom="</strong><a class="ae la" href="http://twitter.com/dimen/default_margin" rel="noopener ugc nofollow" target="_blank"><strong class="le ht">@dimen/default_margin</strong></a><strong class="le ht">"<br/>        android:layout_gravity="center"/&gt;</strong></span><span id="46df" class="lj jy hs le b fi lp ll l lm ln"><strong class="le ht">    &lt;TextView<br/>        android:id="@+id/message"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="wrap_content"<br/>        tools:text="</strong><a class="ae la" href="http://twitter.com/string/installing_coffee_module" rel="noopener ugc nofollow" target="_blank"><strong class="le ht">@string/installing_coffee_module</strong></a><strong class="le ht">"/&gt;</strong></span><span id="3f48" class="lj jy hs le b fi lp ll l lm ln"><strong class="le ht">    &lt;ProgressBar<br/>        android:id="@+id/progressBar"<br/>        style="</strong><a class="ae la" href="http://twitter.com/style/Widget" rel="noopener ugc nofollow" target="_blank"><strong class="le ht">@style/Widget</strong></a><strong class="le ht">.AppCompat.ProgressBar.Horizontal"<br/>        android:layout_width="match_parent"<br/>        android:layout_height="wrap_content"<br/>        tools:progress="10" /&gt;</strong></span><span id="2391" class="lj jy hs le b fi lp ll l lm ln">&lt;/LinearLayout&gt;</span></pre><p id="a411" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，我覆盖了<code class="du lb lc ld le b">onProgress()</code>函数来更新<code class="du lb lc ld le b">progressBar</code>。我还覆盖了<code class="du lb lc ld le b">onFailed()</code>和<code class="du lb lc ld le b">onCanceled()</code>函数，并更新了<code class="du lb lc ld le b">textView</code>来给用户一些反馈。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="90a9" class="lj jy hs le b fi lk ll l lm ln">override fun onProgress(status: Int, bytesDownloaded: Long, bytesTotal: Long) {<br/>    progressBar?.<em class="lq">progress </em>= (bytesDownloaded.toDouble() * 100 / bytesTotal).toInt()<br/>}<br/><br/>override fun onFailed(errorCode: Int) {<br/>    message?.<em class="lq">text </em>= getString(R.string.<em class="lq">install_failed</em>)<br/>}<br/><br/>override fun onCancelled() {<br/>    message?.<em class="lq">text </em>= getString(R.string.<em class="lq">install_cancelled</em>)<br/>}</span></pre><p id="7188" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我需要将<code class="du lb lc ld le b">progressFragment</code>目的地添加到导航图中。最后，将<code class="du lb lc ld le b">progressFragment</code>声明为导航图的<code class="du lb lc ld le b">progressDestination</code>。</p><pre class="jn jo jp jq fd lf le lg lh aw li bi"><span id="09ca" class="lj jy hs le b fi lk ll l lm ln">&lt;navigation xmlns:android="<a class="ae la" href="http://schemas.android.com/apk/res/android" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res/android</a>"<br/>    xmlns:app="<a class="ae la" href="http://schemas.android.com/apk/res-auto" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/apk/res-auto</a>"<br/>    xmlns:tools="<a class="ae la" href="http://schemas.android.com/tools" rel="noopener ugc nofollow" target="_blank">http://schemas.android.com/tools</a>"<br/>    app:startDestination="<a class="ae la" href="http://twitter.com/id/donutList" rel="noopener ugc nofollow" target="_blank">@id/donutList</a>"<br/>    <strong class="le ht">app:progressDestination="@+id/progressFragment"</strong>&gt;</span><span id="458a" class="lj jy hs le b fi lp ll l lm ln">&lt;fragment<br/>        android:id="@+id/donutList"<br/>        android:name="com.android.samples.donuttracker.donut.DonutList"<br/>        android:label="<a class="ae la" href="http://twitter.com/string/donut_list" rel="noopener ugc nofollow" target="_blank">@string/donut_list</a>" &gt;<br/>        &lt;action<br/>            android:id="@+id/action_donutList_to_donutEntryDialogFragment"<br/>            app:destination="<a class="ae la" href="http://twitter.com/id/donutEntryDialogFragment" rel="noopener ugc nofollow" target="_blank">@id/donutEntryDialogFragment</a>" /&gt;<br/>        &lt;action<br/>            android:id="@+id/action_donutList_to_selectionFragment"<br/>            app:destination="<a class="ae la" href="http://twitter.com/id/selectionFragment" rel="noopener ugc nofollow" target="_blank">@id/selectionFragment</a>" /&gt;<br/>    &lt;/fragment&gt;<br/>    &lt;dialog<br/>        android:id="@+id/donutEntryDialogFragment"<br/>        android:name="com.android.samples.donuttracker.donut.DonutEntryDialogFragment"<br/>        android:label="DonutEntryDialogFragment"&gt;<br/>        &lt;deepLink app:uri="myapp://navdonutcreator.com/donutcreator" /&gt;<br/>        &lt;argument<br/>            android:name="itemId"<br/>            app:argType="long"<br/>            android:defaultValue="-1L" /&gt;<br/>    &lt;/dialog&gt;<br/>    &lt;fragment<br/>        android:id="@+id/selectionFragment"<br/>        android:name="com.android.samples.donuttracker.setup.SelectionFragment"<br/>        android:label="<a class="ae la" href="http://twitter.com/string/settings" rel="noopener ugc nofollow" target="_blank">@string/settings</a>"<br/>        tools:layout="<a class="ae la" href="http://twitter.com/layout/fragment_selection" rel="noopener ugc nofollow" target="_blank">@layout/fragment_selection</a>" &gt;<br/>        &lt;action<br/>            android:id="@+id/action_selectionFragment_to_donutList"<br/>            app:destination="<a class="ae la" href="http://twitter.com/id/donutList" rel="noopener ugc nofollow" target="_blank">@id/donutList</a>" /&gt;<br/>    &lt;/fragment&gt;<br/>    <strong class="le ht">&lt;fragment<br/>        android:id="@+id/progressFragment"<br/>        android:name="com.android.samples.donuttracker.ProgressFragment"<br/>        android:label="ProgressFragment" /&gt;</strong><br/>    &lt;include-dynamic<br/>        android:id="@+id/coffeeGraph"<br/>        app:moduleName="coffee"<br/>        app:graphResName="coffee_graph"/&gt;<br/>&lt;/navigation&gt;</span></pre><p id="af3e" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，我再次运行应用程序，取消选择咖啡并导航至<code class="du lb lc ld le b">coffeeList</code>。这次app显示的是定制的<code class="du lb lc ld le b">progressFragment</code>。</p><figure class="jn jo jp jq fd hj er es paragraph-image"><div class="er es lr"><img src="../Images/0db333a19b3675128808281360a0e26e.png" data-original-src="https://miro.medium.com/v2/resize:fit:692/format:webp/1*dVa2I6mi35qeh7FbieX5uQ.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">customized <code class="du lb lc ld le b">progressFragment</code></figcaption></figure><p id="70fa" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">同样，我可以用捆绑工具测试应用程序，看看进度条在下载咖啡模块时是如何工作的。你可以从<a class="ae la" href="https://github.com/google-developer-training/android-demos/tree/main/DonutTracker/FeatureModules" rel="noopener ugc nofollow" target="_blank">这个报告</a>中查看示例代码。</p><h1 id="835f" class="jx jy hs bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">摘要</h1><p id="d79f" class="pw-post-body-paragraph ip iq hs ir b is kv iu iv iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm ha bi translated">仅此而已！在这个系列中，我们重新访问了Chet的DonutTracker应用程序，并添加了咖啡跟踪功能。因为…我喜欢咖啡。</p><p id="a8b1" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">新的功能带来了新的责任。为了提供更好的用户体验，首先我添加了<code class="du lb lc ld le b">NavigationUI</code>来集成UI组件和导航。然后我实现了一次性流程和条件导航。后来，我使用嵌套图和包含标签来组织导航图，并将应用程序模块化，以节省用户的网络和存储空间。现在我们已经完成了应用程序，是时候享受一杯咖啡和一个甜甜圈了！</p></div></div>    
</body>
</html>