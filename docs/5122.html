<html>
<head>
<title>How to create Search Functionality for Native Mobile in minutes!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在几分钟内创建本地移动搜索功能！</h1>
<blockquote>原文：<a href="https://medium.com/mendix/how-to-create-a-search-functionality-in-a-mendix-native-mobile-app-f6f48b59f1be?source=collection_archive---------0-----------------------#2021-06-08">https://medium.com/mendix/how-to-create-a-search-functionality-in-a-mendix-native-mobile-app-f6f48b59f1be?source=collection_archive---------0-----------------------#2021-06-08</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/8942ad976a9d7c8511213feaed6f7b73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o3I9YYfhKJJoKLY_Qbv6Mg.png"/></div></div></figure><div class=""/><h1 id="0102" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">有可能在某个时候你的用户想要从列表中选择一个选项，但是如果这个列表真的很长呢？无休止的滚动毫无意义，因为这会提供糟糕的用户体验，可能会让你的用户远离你的应用。过滤器可以为显示较小的列表提供一个答案，但是搜索呢？</h1><p id="2e06" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">目前，<a class="ae kx" href="https://docs.mendix.com/howto/mobile/getting-started-with-native-mobile" rel="noopener ugc nofollow" target="_blank"> Mendix本地移动应用</a>中没有用于搜索列表的默认UI组件，这与Mendix浏览器应用的列表视图或数据网格中的搜索功能不同。幸运的是，只使用<strong class="bd ky">默认的Mendix组件</strong>，构建自己的定制搜索功能真的很容易。</p><p id="c550" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated">原生Android和iOS应用程序使用SQLite数据库，这是一种提供完整离线功能的关系数据库，自智能手机问世以来一直在使用。这是我们需要执行搜索的数据库，我们可以使用<a class="ae kx" href="https://docs.mendix.com/refguide/xpath" rel="noopener ugc nofollow" target="_blank"> X-Path </a>来完成。</p><p id="9686" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated">假设您有一个世界城市列表，您的用户想从中选择一个来了解更多信息。您将需要有一个搜索框，用户可以输入他正在寻找的城市名称，结果显示出来。我将向你展示一个简单而有效的方法来实现这一点。</p><figure class="lf lg lh li fq hw fe ff paragraph-image"><div class="fe ff le"><img src="../Images/dad7076f5ddd5951cfcddce5ec525198.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*pstaRhc78kcUZgTiBO5B2A.png"/></div><figcaption class="lj lk fg fe ff ll lm bd b be z ek"><a class="ae kx" href="https://bit.ly/MXW21" rel="noopener ugc nofollow" target="_blank">https://bit.ly/MXW21</a></figcaption></figure><ol class=""><li id="e476" class="ln lo if bd b kc kz kg la kk lp ko lq ks lr kw ls lt lu lv dt translated">从您的领域模型开始。当然，您将拥有一个包含城市名称的城市实体。你可以用这个来搜索。</li><li id="3c48" class="ln lo if bd b kc lw kg lx kk ly ko lz ks ma kw ls lt lu lv dt translated">添加第二个实体。它可以是持久的，也可以是非持久的，这取决于您的需要。我暂时称它为“搜索助手”。它应该包含搜索所需的属性；在这种情况下是字符串“SearchString”。</li></ol><figure class="lf lg lh li fq hw fe ff paragraph-image"><div class="fe ff mb"><img src="../Images/d9a1ceb7a9d19734ec9dc35856026115.png" data-original-src="https://miro.medium.com/v2/resize:fit:1002/format:webp/1*7OmK740ryZ24J5uXV-DsKA.png"/></div><figcaption class="lj lk fg fe ff ll lm bd b be z ek">Domain model</figcaption></figure><p id="11dd" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated">3.创建用户将进行搜索的页面。对page参数使用SearchHelper对象。如果页面是从导航菜单中调用的，请使用datasource流来创建它，如果是从nano流中调用的，您可以在那里创建对象，并将其作为显示页面操作中的参数进行传递。</p><p id="8a64" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated">4.添加一个属性为SearchString的textbox。</p><figure class="lf lg lh li fq hw fe ff paragraph-image"><div class="fe ff mc"><img src="../Images/e28927a0554d032b07f953ed91bd56d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1050/format:webp/1*YAwnWWSlT0vFSmNjKRK-0g.png"/></div><figcaption class="lj lk fg fe ff ll lm bd b be z ek">Search page with textbox</figcaption></figure><p id="95c4" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated">5.添加一个On-Change nanoflow，当用户在搜索框中输入新内容时，它会刷新页面参数。您可以提交SearchHelper对象，或者使用来自<a class="ae kx" href="https://docs.mendix.com/appstore/modules/nanoflow-commons" rel="noopener ugc nofollow" target="_blank"> nanoflow commons模块</a>的刷新对象操作。</p><figure class="lf lg lh li fq hw fe ff paragraph-image"><div class="fe ff md"><img src="../Images/6521e86bfaa0b23393f71e64757a4216.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*AvHHhniP1BAo01gfDw3e7g.png"/></div><figcaption class="lj lk fg fe ff ll lm bd b be z ek">Refresh page parameter on-change</figcaption></figure><p id="ad16" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated">6.在搜索框的“事件”选项卡中，根据您选择的事件设置新创建的纳流。在这种情况下，我选择了更改时事件，并选择了“用户输入数据时”选项。</p><figure class="lf lg lh li fq hw fe ff paragraph-image"><div class="fe ff me"><img src="../Images/0a7581fa9c296ba705a8bd6ccde6fcd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/format:webp/1*cLpHtZYpK60YVaRrSLlgcg.png"/></div></figure><p id="1d23" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated">7.现在我们已经设置了页面，我们可以开始根据用户的输入实际检索列表。将listview添加到SearchHelper的dataview，并选择“Nanoflow”作为数据源。</p><figure class="lf lg lh li fq hw fe ff paragraph-image"><div class="fe ff mf"><img src="../Images/5d5d38648777ace7a1b201598f89624a.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*an4ZNEiILEYjbqZyBWno4w.png"/></div><figcaption class="lj lk fg fe ff ll lm bd b be z ek">Listview</figcaption></figure><p id="529f" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated">8.对于数据源nanoflow，使用SearchHelper实体作为参数创建一个新的nanoflow。使用split检查SearchString是否包含输入<em class="mg">(提示:使用trim($ search helper/search string)！= ' ')，</em>并添加一个从数据库中检索的活动。如果SearchHelper不包含任何输入，则返回空值。</p><figure class="lf lg lh li fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mh"><img src="../Images/9da57cb1bb488167af2b9a0048e0ddf6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CJFuNUTRlwYnBDzmh7-yIA.png"/></div></div></figure><p id="92eb" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated">9.对于检索动作，使用基于用户输入的<a class="ae kx" href="https://docs.mendix.com/refguide/xpath-constraint-functions" rel="noopener ugc nofollow" target="_blank"> X路径查询</a>。您有几个选项，如contains()、starts-with()或equals。对于这个例子，我选择了contains()，但是如果你有太多的数据，你想使用一个<a class="ae kx" href="https://docs.mendix.com/refguide/indexes" rel="noopener ugc nofollow" target="_blank">索引</a>，你将需要选择一个不同的选项。</p><figure class="lf lg lh li fq hw fe ff paragraph-image"><div class="fe ff mi"><img src="../Images/4c8c949afbc607d2e36d6f1fc149226a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*YCVMiiTAwOVz6qO21zGfGw.png"/></div><figcaption class="lj lk fg fe ff ll lm bd b be z ek">X-path retrieve</figcaption></figure><h2 id="e0ef" class="mj jd if bd je mk ml mm ji mn mo mp jm kk mq mr jq ko ms mt ju ks mu mv jy mw dt translated">就这些，我们来测试一下</h2><p id="0953" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">终于可以尝试一下了！您刚刚创建了一个定制的搜索功能，它具有出色的性能，可以在线和离线工作，并且只使用本地Mendix功能！</p><figure class="lf lg lh li fq hw fe ff paragraph-image"><div class="fe ff mx"><img src="../Images/aa280a2a56c5a438e2720cedac7c6efa.png" data-original-src="https://miro.medium.com/v2/resize:fit:926/format:webp/1*AoI64e8VT9eQzh0HV-KAOg.png"/></div></figure></div><div class="ab cl my mz hb na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="hn ho hp hq hr"><p id="6012" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated"><em class="mg">来自发布者- </em></p><p id="093a" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated"><em class="mg">如果你喜欢这篇文章，你可以在我们的</em> <a class="ae kx" href="https://medium.com/mendix" rel="noopener"> <em class="mg">媒体页面</em> </a> <em class="mg">或我们自己的</em> <a class="ae kx" href="https://developers.mendix.com/community-blog/" rel="noopener ugc nofollow" target="_blank"> <em class="mg">社区博客网站</em> </a> <em class="mg">找到更多类似的内容。</em></p><p id="0c81" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated"><em class="mg">希望入门的创客，可以注册一个</em> <a class="ae kx" href="https://signup.mendix.com/link/signup/?source=direct" rel="noopener ugc nofollow" target="_blank"> <em class="mg">免费账号</em> </a> <em class="mg">，通过我们的</em> <a class="ae kx" href="https://academy.mendix.com/link/home" rel="noopener ugc nofollow" target="_blank"> <em class="mg">学苑</em> </a> <em class="mg">获得即时学习。</em></p><p id="8fbd" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lb km kn ko lc kq kr ks ld ku kv kw hn dt translated">有兴趣加入我们的社区吗？你可以加入我们的 <a class="ae kx" href="https://join.slack.com/t/mendixcommunity/shared_invite/zt-hwhwkcxu-~59ywyjqHlUHXmrw5heqpQ" rel="noopener ugc nofollow" target="_blank"> <em class="mg"> Slack社区频道</em> </a> <em class="mg">或者想更多参与的人，看看加入我们的</em><a class="ae kx" href="https://developers.mendix.com/meetups/#meetupsNearYou" rel="noopener ugc nofollow" target="_blank"><em class="mg">Meet ups</em></a><em class="mg">。</em></p></div></div>    
</body>
</html>