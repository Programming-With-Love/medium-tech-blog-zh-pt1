<html>
<head>
<title>Display a camera preview with PreviewView</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用预览视图显示相机预览</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/display-a-camera-preview-with-previewview-86562433d86c?source=collection_archive---------0-----------------------#2020-04-28">https://medium.com/androiddevelopers/display-a-camera-preview-with-previewview-86562433d86c?source=collection_archive---------0-----------------------#2020-04-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/c664f94a21456ad37f578a38e60da765.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aOz4V1OmmZdJY-OjJnH8lA.png"/></div></div></figure><div class=""/><div class=""><h2 id="1c3e" class="pw-subtitle-paragraph ip hr hs bd b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg dx translated">Android Jetpack CameraX:预览视图</h2></div><p id="3738" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">任何相机应用程序的一个常见用例是显示相机的预览。到目前为止，这很难做到，主要是因为camera2 API边缘案例和各种设备行为的复杂性。<code class="du kd ke kf kg b">PreviewView</code>是<a class="ae kh" href="https://developer.android.com/training/camerax" rel="noopener ugc nofollow" target="_blank"> CameraX Jetpack库</a>的一部分，通过在各种Android设备上提供开发者友好、一致和稳定的API，使开发者更容易显示相机预览。</p><h1 id="8c2e" class="ki kj hs bd kk kl km kn ko kp kq kr ks iy kt iz ku jb kv jc kw je kx jf ky kz bi translated"><strong class="ak">介绍预览视图</strong></h1><p id="1691" class="pw-post-body-paragraph jh ji hs jj b jk la it jm jn lb iw jp jq lc js jt ju ld jw jx jy le ka kb kc ha bi translated"><code class="du kd ke kf kg b">PreviewView</code>是一个自定义的<code class="du kd ke kf kg b">View</code>，可以显示一个摄像头的输入。它的建立是为了减轻设置和处理相机使用的预览表面的负担。</p><p id="e3cc" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">如果您需要在应用程序中显示基本的相机预览，推荐使用<code class="du kd ke kf kg b">PreviewView</code>方式，因为它是:</p><ul class=""><li id="9f74" class="lf lg hs jj b jk jl jn jo jq lh ju li jy lj kc lk ll lm ln bi translated"><strong class="jj ht">更容易使用</strong> : <code class="du kd ke kf kg b">PreviewView</code>是一个<code class="du kd ke kf kg b">View</code>。它通过管理<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/kotlin/androidx/camera/core/Preview.html" rel="noopener ugc nofollow" target="_blank">Preview</a></code>用例使用的<code class="du kd ke kf kg b">Surface</code>来实现所有必要的工作，以显示摄像机在你的布局中看到的内容。</li><li id="8a73" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated"><strong class="jj ht">轻量级</strong> : <code class="du kd ke kf kg b">PreviewView</code>只关注预览。它所有的内部资源都是为了在相机使用时设置相机预览和管理预览界面。这种关注点的分离允许<code class="du kd ke kf kg b">PreviewView</code>代码保持干净。</li><li id="7d85" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated"><strong class="jj ht">详尽的</strong> : <code class="du kd ke kf kg b">PreviewView</code>处理在屏幕上显示摄像机画面最困难的部分，包括宽高比、缩放和旋转。它还包含兼容性修复和解决方法，以便在多种设备、屏幕尺寸、摄像头硬件支持级别和显示配置(如分屏模式、锁定方向和自由形式多窗口)上提供无缝体验。</li></ul><h1 id="47ae" class="ki kj hs bd kk kl km kn ko kp kq kr ks iy kt iz ku jb kv jc kw je kx jf ky kz bi translated"><strong class="ak">预览视图—实现方式</strong></h1><p id="033d" class="pw-post-body-paragraph jh ji hs jj b jk la it jm jn lb iw jp jq lc js jt ju ld jw jx jy le ka kb kc ha bi translated"><code class="du kd ke kf kg b">PreviewView</code>是<code class="du kd ke kf kg b">FrameLayout</code>的子类。为了显示相机馈送，它使用一个<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/android/view/SurfaceView" rel="noopener ugc nofollow" target="_blank">SurfaceView</a></code>或<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/android/view/TextureView" rel="noopener ugc nofollow" target="_blank">TextureView</a></code>，当它准备好的时候给相机提供一个预览表面，只要相机正在使用它就试图保持它有效，当过早释放时，如果相机还在使用，提供一个新的表面。</p><p id="99fd" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">当涉及到某些关键指标，包括功率和延迟时，<code class="du kd ke kf kg b">SurfaceView</code>通常比<code class="du kd ke kf kg b">TextureView</code>好，这就是为什么默认情况下<code class="du kd ke kf kg b">PreviewView</code>试图使用<code class="du kd ke kf kg b">SurfaceView</code>。但是，一些设备(主要是<a class="ae kh" href="https://source.android.com/devices/camera/versioning#camera_api2" rel="noopener ugc nofollow" target="_blank">遗留设备</a>)在预览界面过早发布时会崩溃。不幸的是，使用<code class="du kd ke kf kg b">SurfaceView</code>无法控制何时释放表面，因为这是由<code class="du kd ke kf kg b">View</code>层级控制的。在这些设备上，<code class="du kd ke kf kg b">PreviewView</code>退回到使用<code class="du kd ke kf kg b">TextureView</code>来代替。在需要预览旋转、透明或动画的情况下，你也应该强制<code class="du kd ke kf kg b">PreviewView</code>使用<code class="du kd ke kf kg b">TextureView</code>。</p><p id="8f36" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">您可以通过调用<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/androidx/camera/view/PreviewView#setPreferredImplementationMode(androidx.camera.view.PreviewView.ImplementationMode)" rel="noopener ugc nofollow" target="_blank">PreviewView.setPreferredImplementationMode(ImplementationMode)</a></code>来显式设置您希望<code class="du kd ke kf kg b">PreviewView</code>使用的实现，其中<code class="du kd ke kf kg b">ImplementationMode</code>可以是<code class="du kd ke kf kg b">SURFACE_VIEW</code>或<code class="du kd ke kf kg b">TEXTURE_VIEW</code>。<code class="du kd ke kf kg b">PreviewView</code>当首选模式为<code class="du kd ke kf kg b">SURFACE_VIEW</code>时，尝试尊重您的选择，当首选模式为<code class="du kd ke kf kg b">TEXTURE_VIEW</code>时，确保您的选择。</p><p id="ff9b" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">⚠️在开始预览之前，通过调用<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/androidx/camera/core/Preview#setSurfaceProvider(java.util.concurrent.Executor,%20androidx.camera.core.Preview.SurfaceProvider)" rel="noopener ugc nofollow" target="_blank">Preview.setSurfaceProvider(PreviewView.createSurfaceProvider())</a></code>确保设置好你的首选实现模式。</p><p id="dc5a" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">下面显示了如何设置<code class="du kd ke kf kg b">PreviewView</code>的首选实现模式。</p><figure class="lt lu lv lw fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><h1 id="894d" class="ki kj hs bd kk kl km kn ko kp kq kr ks iy kt iz ku jb kv jc kw je kx jf ky kz bi translated"><strong class="ak">预览视图—预览</strong></h1><p id="b291" class="pw-post-body-paragraph jh ji hs jj b jk la it jm jn lb iw jp jq lc js jt ju ld jw jx jy le ka kb kc ha bi translated"><code class="du kd ke kf kg b">PreviewView</code>处理创建<code class="du kd ke kf kg b">Preview</code>用例所需的<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/androidx/camera/core/Preview.SurfaceProvider" rel="noopener ugc nofollow" target="_blank">SurfaceProvider</a></code>的细节，以启动预览流。<code class="du kd ke kf kg b">SurfaceProvider</code>准备将提供给摄像机的表面，以便显示摄像机预览流，并在必要时负责重新创建<code class="du kd ke kf kg b">Surface</code>。<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/androidx/camera/view/PreviewView#createSurfaceProvider(androidx.camera.core.CameraInfo)" rel="noopener ugc nofollow" target="_blank">PreviewView.createSurfaceProvider(CameraInfo)</a></code>接受一个可空的<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/androidx/camera/core/CameraInfo" rel="noopener ugc nofollow" target="_blank">CameraInfo</a></code>实例。<code class="du kd ke kf kg b">PreviewView</code>使用它，以及您首选的实现模式和摄像机的功能，来确定在内部使用的实现。如果你传入一个<code class="du kd ke kf kg b">null</code> <code class="du kd ke kf kg b">CameraInfo</code>，<code class="du kd ke kf kg b">PreviewView</code>使用一个<code class="du kd ke kf kg b">TextureView</code>实现，因为它不知道所选的摄像机是否能与<code class="du kd ke kf kg b">SurfaceView</code>一起工作。</p><p id="f69b" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">一旦您构建了<code class="du kd ke kf kg b">Preview</code>用例以及您需要的任何其他<a class="ae kh" href="https://developer.android.com/training/camerax#ease-of-use" rel="noopener ugc nofollow" target="_blank">用例</a>，将它们绑定到一个<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/androidx/lifecycle/LifecycleOwner" rel="noopener ugc nofollow" target="_blank">LifecycleOwner</a></code>，使用来自绑定相机的<code class="du kd ke kf kg b">CameraInfo</code>创建一个<code class="du kd ke kf kg b">SurfaceProvider</code>，然后将其附加到<code class="du kd ke kf kg b">Preview</code>用例，通过调用<code class="du kd ke kf kg b">Preview.setSurfaceProvider(SurfaceProvider)</code>来启动预览流。</p><p id="0bb5" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">下面显示了如何将<code class="du kd ke kf kg b">PreviewView</code>附加到<code class="du kd ke kf kg b">Preview</code>以启动预览流。</p><figure class="lt lu lv lw fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><h1 id="c6e7" class="ki kj hs bd kk kl km kn ko kp kq kr ks iy kt iz ku jb kv jc kw je kx jf ky kz bi translated"><strong class="ak">预览视图—刻度类型</strong></h1><p id="0cc3" class="pw-post-body-paragraph jh ji hs jj b jk la it jm jn lb iw jp jq lc js jt ju ld jw jx jy le ka kb kc ha bi translated"><code class="du kd ke kf kg b">PreviewView</code>提供了一个API，允许你控制预览的外观以及它在容器中的位置。</p><ul class=""><li id="89cd" class="lf lg hs jj b jk jl jn jo jq lh ju li jy lj kc lk ll lm ln bi translated"><em class="lz">如何</em>定义预览应该适合(<strong class="jj ht">适合</strong>)还是填充(<strong class="jj ht">填充</strong>)其容器。</li><li id="a145" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated"><em class="lz">其中</em>定义了预览应该在左上角(<strong class="jj ht">开始</strong>)、居中(<strong class="jj ht">居中</strong>)还是右下角(<strong class="jj ht">结束</strong>)或其容器。</li></ul><p id="ad9b" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">由“<em class="lz"> how </em>”和“<em class="lz"> where </em>”创建的组合代表<code class="du kd ke kf kg b">PreviewView</code>支持的可用刻度类型值:<code class="du kd ke kf kg b">FIT_START</code>、<code class="du kd ke kf kg b">FIT_CENTER</code>、<code class="du kd ke kf kg b">FIT_END</code>、<code class="du kd ke kf kg b">FILL_START</code>、<code class="du kd ke kf kg b">FILL_CENTER</code>和<code class="du kd ke kf kg b">FILL_END</code>。最常用的是<code class="du kd ke kf kg b">FIT_CENTER</code>，它翻译成一个信箱预览，以及<code class="du kd ke kf kg b">FILL_CENTER</code>，它在其容器中居中裁剪预览。</p><p id="fc6d" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">可以通过以下两种方式之一设置比例类型:</p><ul class=""><li id="0eb5" class="lf lg hs jj b jk jl jn jo jq lh ju li jy lj kc lk ll lm ln bi translated">在XML布局中使用<code class="du kd ke kf kg b">PreviewView</code>的<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/androidx/camera/view/PreviewView.ScaleType" rel="noopener ugc nofollow" target="_blank">scaleType</a></code>属性，如下例所示。</li></ul><figure class="lt lu lv lw fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><ul class=""><li id="ec07" class="lf lg hs jj b jk jl jn jo jq lh ju li jy lj kc lk ll lm ln bi translated">通过调用如下所示的<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/androidx/camera/view/PreviewView#setScaleType(androidx.camera.view.PreviewView.ScaleType)" rel="noopener ugc nofollow" target="_blank">PreviewView.setScaleType(ScaleType)</a></code>进行编程。</li></ul><figure class="lt lu lv lw fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><p id="65ef" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">要检索一个<code class="du kd ke kf kg b">PreviewView</code>正在使用的当前秤类型，调用<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/androidx/camera/view/PreviewView#getScaleType()" rel="noopener ugc nofollow" target="_blank">PreviewView.getScaleType()</a></code>。</p><h1 id="0462" class="ki kj hs bd kk kl km kn ko kp kq kr ks iy kt iz ku jb kv jc kw je kx jf ky kz bi translated"><strong class="ak">预览视图—摄像机控制</strong></h1><p id="d3b9" class="pw-post-body-paragraph jh ji hs jj b jk la it jm jn lb iw jp jq lc js jt ju ld jw jx jy le ka kb kc ha bi translated">根据相机传感器方向、设备旋转、显示模式和预览比例类型，<code class="du kd ke kf kg b">PreviewView</code>可以缩放、旋转和平移从相机接收的预览帧，以便在UI中正确显示预览流。这就是为什么能够将UI坐标转换为相机传感器坐标非常重要。在CameraX中，这种转换是由一个<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/androidx/camera/core/MeteringPointFactory" rel="noopener ugc nofollow" target="_blank">MeteringPointFactory</a></code>完成的。<code class="du kd ke kf kg b">PreviewView</code>提供了一个API来创建一个:<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/androidx/camera/view/PreviewView#createMeteringPointFactory(androidx.camera.core.CameraSelector)" rel="noopener ugc nofollow" target="_blank">PreviewView.createMeteringPointFactory(cameraSelector)</a></code>，其中<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/kotlin/androidx/camera/core/CameraSelector" rel="noopener ugc nofollow" target="_blank">CameraSelector</a></code>描绘了相机流预览。</p><p id="3cc4" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated"><code class="du kd ke kf kg b">PreviewView</code>的<code class="du kd ke kf kg b">MeteringPointFactory</code>在你需要实现点击对焦的时候就派上用场了。即使相机预览默认启用自动对焦(当相机支持时)，您也可以在点击<code class="du kd ke kf kg b">PreviewView</code>时控制对焦目标。<code class="du kd ke kf kg b">MeteringPointFactory</code>会将聚焦目标的坐标转换为摄像机传感器坐标，然后使摄像机聚焦在该区域。</p><p id="ffa7" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">以下示例显示了如何使用设置在<code class="du kd ke kf kg b">PreviewView</code>上的<a class="ae kh" href="https://developer.android.com/reference/android/view/View.OnTouchListener" rel="noopener ugc nofollow" target="_blank">触摸监听器</a>实现点击聚焦。</p><figure class="lt lu lv lw fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><p id="0f9c" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">另一个常见的相机预览功能是捏合缩放，这使得相机可以在您捏合预览时放大和缩小。为了用<code class="du kd ke kf kg b">PreviewView</code>实现它，在<code class="du kd ke kf kg b">PreviewView</code>上添加一个<a class="ae kh" href="https://developer.android.com/reference/android/view/View.OnTouchListener" rel="noopener ugc nofollow" target="_blank">触摸监听器</a>并将其连接到一个<a class="ae kh" href="https://developer.android.com/reference/android/view/ScaleGestureDetector.SimpleOnScaleGestureListener" rel="noopener ugc nofollow" target="_blank">刻度手势监听器</a>。这将拦截捏手势，并相应地更新相机的变焦比。</p><p id="1d89" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">下面的例子展示了如何用<code class="du kd ke kf kg b">PreviewView</code>实现缩放。</p><figure class="lt lu lv lw fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><h1 id="19b4" class="ki kj hs bd kk kl km kn ko kp kq kr ks iy kt iz ku jb kv jc kw je kx jf ky kz bi translated"><strong class="ak">预览视图—如何测试</strong></h1><p id="21ce" class="pw-post-body-paragraph jh ji hs jj b jk la it jm jn lb iw jp jq lc js jt ju ld jw jx jy le ka kb kc ha bi translated"><code class="du kd ke kf kg b">PreviewView</code>在各种Android设备上提供一致的相机行为。这要归功于CameraX在测试<code class="du kd ke kf kg b">PreviewView</code>和它在<a class="ae kh" href="https://developer.android.com/training/camerax/devices" rel="noopener ugc nofollow" target="_blank">自动化测试实验室</a>的其他API上的投资。这些测试分为两大类:</p><ul class=""><li id="82ec" class="lf lg hs jj b jk jl jn jo jq lh ju li jy lj kc lk ll lm ln bi translated"><strong class="jj ht">单元测试</strong>验证<code class="du kd ke kf kg b">PreviewView</code>在其实现模式、规模类型和<code class="du kd ke kf kg b">MeteringPointFactory</code>方面的行为。他们还确保<code class="du kd ke kf kg b">PreviewView</code>在应该调整预览的时候正确地调整预览，比如当它的容器大小改变时，当显示布局更新时，以及当它被附加或重新附加到<code class="du kd ke kf kg b"><a class="ae kh" href="https://developer.android.com/reference/android/view/Window" rel="noopener ugc nofollow" target="_blank">Window</a></code>时。</li><li id="f5db" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated"><strong class="jj ht">集成测试</strong>，确保<code class="du kd ke kf kg b">PreviewView</code>作为应用程序的一部分时行为正确，并相应地显示或停止预览流。这些测试包括在应用程序运行时，在应用程序关闭并重新打开多次后，在相机镜头来回切换后，以及在应用程序的生命周期被破坏并重新创建后，验证预览状态。目前，这些测试主要覆盖<code class="du kd ke kf kg b">PreviewView</code>的<code class="du kd ke kf kg b">TextureView</code>实现，因为从<code class="du kd ke kf kg b">SurfaceView</code>获得预览何时开始和停止的信号被证明是具有挑战性的。</li></ul><h1 id="6b40" class="ki kj hs bd kk kl km kn ko kp kq kr ks iy kt iz ku jb kv jc kw je kx jf ky kz bi translated"><strong class="ak">结论</strong></h1><p id="7566" class="pw-post-body-paragraph jh ji hs jj b jk la it jm jn lb iw jp jq lc js jt ju ld jw jx jy le ka kb kc ha bi translated">总而言之:</p><ul class=""><li id="6cdf" class="lf lg hs jj b jk jl jn jo jq lh ju li jy lj kc lk ll lm ln bi translated"><code class="du kd ke kf kg b">PreviewView</code>是一个自定义的<code class="du kd ke kf kg b">View</code>，它使得显示相机预览更加容易。</li><li id="6370" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated">默认情况下,<code class="du kd ke kf kg b">PreviewView</code>使用<code class="du kd ke kf kg b">SurfaceView</code>处理预览图面，但在需要或请求时可能会使用<code class="du kd ke kf kg b">TextureView</code>。</li><li id="62f6" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated">将您的其他用例，如<code class="du kd ke kf kg b">ImageCapture</code>和<code class="du kd ke kf kg b">ImageAnalysis</code>绑定到一个<code class="du kd ke kf kg b">LifecycleOwner</code>，然后通过将<code class="du kd ke kf kg b">PreviewView</code>中的<code class="du kd ke kf kg b">SurfaceProvider</code>附加到绑定的<code class="du kd ke kf kg b">Preview</code>用例来启动相机预览。</li><li id="e820" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated">通过定义<code class="du kd ke kf kg b">PreviewView</code>的缩放类型来控制预览的显示方式。</li><li id="6ba6" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated">通过从<code class="du kd ke kf kg b">PreviewView</code>获取一个<code class="du kd ke kf kg b">MeteringPointFactory</code>来实现点击对焦预览。</li><li id="08f3" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated">通过在<code class="du kd ke kf kg b">PreviewView</code>上设置手势监听器，在预览上实现缩放。</li></ul><p id="f2f7" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">想要更多相机的好处？检查:</p><ul class=""><li id="b651" class="lf lg hs jj b jk jl jn jo jq lh ju li jy lj kc lk ll lm ln bi translated"><a class="ae kh" href="https://developer.android.com/training/camerax" rel="noopener ugc nofollow" target="_blank">官方CameraX文档</a></li><li id="e6bb" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated"><a class="ae kh" href="https://codelabs.developers.google.com/codelabs/camerax-getting-started" rel="noopener ugc nofollow" target="_blank"> Guided CameraX简介codelab </a></li><li id="0f01" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated"><a class="ae kh" href="https://groups.google.com/a/android.com/g/camerax-developers" rel="noopener ugc nofollow" target="_blank"> CameraX开发者社区</a></li><li id="b37d" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated">Android的CameraX Jetpack库现在处于测试阶段！</li><li id="1789" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated"><a class="ae kh" rel="noopener" href="/androiddevelopers/whats-new-in-camerax-fb8568d6ddc">CameraX的新功能</a></li><li id="2f29" class="lf lg hs jj b jk lo jn lp jq lq ju lr jy ls kc lk ll lm ln bi translated"><a class="ae kh" href="https://github.com/android/camera-samples/tree/master/CameraXBasic" rel="noopener ugc nofollow" target="_blank">使用CameraX构建的示例相机应用</a></li></ul><p id="48ce" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">关于<code class="du kd ke kf kg b">PreviewView</code>或预览的任何问题？留下评论。感谢阅读！</p></div></div>    
</body>
</html>