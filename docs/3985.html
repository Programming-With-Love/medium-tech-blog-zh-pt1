<html>
<head>
<title>How I Made Python Interoperate with Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何让Python与Kotlin互操作</h1>
<blockquote>原文：<a href="https://medium.com/globant/how-i-made-python-interoperate-with-kotlin-a11358e48da?source=collection_archive---------2-----------------------#2022-09-20">https://medium.com/globant/how-i-made-python-interoperate-with-kotlin-a11358e48da?source=collection_archive---------2-----------------------#2022-09-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="3206" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我正在使用POC(概念验证),我们使用Ktor (Kotlin框架)作为后端DSL。在那个项目中，我们从大量文本中提取摘要。我们发现用Kotlin编写机器学习代码很有挑战性。与Python、R等相比，Kotlin是年轻的。</p><p id="3388" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们选择的任何技术都需要:</p><ul class=""><li id="ad22" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">拥有强大的库支持，使我们能够专注于业务问题</li><li id="f6a3" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">平台独立性</li><li id="1f62" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">良好的开发效率</li><li id="df8a" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">大规模可靠</li><li id="28c3" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">经得起未来考验，能够支持我们的业务增长</li></ul><p id="d20b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们带着这些需求比较了各种语言。我们制作了下面的图表来帮助我们比较和对比每个选项的优势和劣势。</p><h2 id="4198" class="jq jr hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated"><strong class="ak">语言对比</strong></h2><h2 id="2f03" class="jq jr hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated"><strong class="ak">巨蟒</strong>:</h2><blockquote class="kl km kn"><p id="8edb" class="ie if ko ig b ih ii ij ik il im in io kp iq ir is kq iu iv iw kr iy iz ja jb ha bi translated">优点:</p></blockquote><ul class=""><li id="a8aa" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">简洁明了</li><li id="b543" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">一个伟大的图书馆生态系统</li><li id="bdb8" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">灵活性</li><li id="113b" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">平台独立性</li><li id="68a0" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">社区支持</li></ul><blockquote class="kl km kn"><p id="91e0" class="ie if ko ig b ih ii ij ik il im in io kp iq ir is kq iu iv iw kr iy iz ja jb ha bi translated">缺点:</p></blockquote><ul class=""><li id="667a" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">低速</li><li id="7b30" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">运行时错误</li><li id="9c81" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">不容易测试</li></ul><h2 id="d3fb" class="jq jr hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">r:</h2><blockquote class="kl km kn"><p id="1b58" class="ie if ko ig b ih ii ij ik il im in io kp iq ir is kq iu iv iw kr iy iz ja jb ha bi translated">优点:</p></blockquote><ul class=""><li id="3089" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">开放源码</li><li id="c220" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">用于数据争论</li><li id="eae1" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">用于质量绘图和制图</li><li id="00b1" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">独立于平台</li><li id="4de2" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">变得受欢迎</li></ul><blockquote class="kl km kn"><p id="4ff7" class="ie if ko ig b ih ii ij ik il im in io kp iq ir is kq iu iv iw kr iy iz ja jb ha bi translated">缺点:</p></blockquote><ul class=""><li id="af61" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">弱起源</li><li id="54b5" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">数据处理</li><li id="7e79" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">基本安全</li><li id="b7d9" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">低速</li></ul><h2 id="f549" class="jq jr hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">科特林:</h2><blockquote class="kl km kn"><p id="b94d" class="ie if ko ig b ih ii ij ik il im in io kp iq ir is kq iu iv iw kr iy iz ja jb ha bi translated">优点:</p></blockquote><ul class=""><li id="e3fd" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">继承了Java生态系统。</li><li id="330b" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">零安全</li><li id="8c81" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">快速且可扩展</li><li id="f7fc" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">具有用于并发的本机原语</li></ul><blockquote class="kl km kn"><p id="7884" class="ie if ko ig b ih ii ij ik il im in io kp iq ir is kq iu iv iw kr iy iz ja jb ha bi translated">缺点:</p></blockquote><ul class=""><li id="1b82" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">对机器学习的支持有限</li><li id="265f" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">社区支持有限</li></ul><p id="438c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们同意使用Python进行机器学习。后端是用Kotlin语言开发的，文本摘要是用Python完成的。我们需要在Kotlin和Python之间进行互操作。这些是Kotlin-Python互操作性的一些选项。</p><h2 id="f583" class="jq jr hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">互操作选项</h2><h2 id="8ef4" class="jq jr hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">Jython:</h2><blockquote class="kl km kn"><p id="be22" class="ie if ko ig b ih ii ij ik il im in io kp iq ir is kq iu iv iw kr iy iz ja jb ha bi translated">优点:</p></blockquote><ul class=""><li id="865c" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">互动实验(Kotlin/Java &amp; Python)</li><li id="5ac5" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">快速应用开发</li><li id="370a" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">与Python相比，性能更好</li></ul><blockquote class="kl km kn"><p id="1b31" class="ie if ko ig b ih ii ij ik il im in io kp iq ir is kq iu iv iw kr iy iz ja jb ha bi translated">缺点:</p></blockquote><ul class=""><li id="f442" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">并非所有的库都支持Jython</li><li id="896a" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">需要额外的设置来运行程序</li></ul><h2 id="f44f" class="jq jr hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">与Kotlin服务器交互的独立Python服务器:</h2><blockquote class="kl km kn"><p id="347d" class="ie if ko ig b ih ii ij ik il im in io kp iq ir is kq iu iv iw kr iy iz ja jb ha bi translated">优点:</p></blockquote><ul class=""><li id="a3a2" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">灵活性</li><li id="e50e" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">关注点分离</li></ul><blockquote class="kl km kn"><p id="6fa8" class="ie if ko ig b ih ii ij ik il im in io kp iq ir is kq iu iv iw kr iy iz ja jb ha bi translated">缺点:</p></blockquote><ul class=""><li id="2c81" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">潜伏</li><li id="6514" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">额外网络呼叫</li></ul><p id="ae63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这两个选项都不符合要求，所以我们决定使用Python脚本而不是Python项目。Python脚本将在Kotlin服务器可用的同一台机器上运行。</p><h2 id="cca3" class="jq jr hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">环境设置</h2><p id="ea4f" class="pw-post-body-paragraph ie if hh ig b ih ks ij ik il kt in io ip ku ir is it kv iv iw ix kw iz ja jb ha bi translated">Python脚本需要不同的库来执行。所以我们需要为它设置一些环境。对于设置，请遵循以下步骤:</p><ol class=""><li id="d761" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb kx ji jj jk bi translated">使用命令“Python-version”检查Python是否安装在您的系统上。如果没有安装Python，请安装。</li><li id="1651" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb kx ji jj jk bi translated">使用“pip —版本”命令检查pip是否安装在您的系统上。如果没有安装pip，请安装它。</li></ol><ul class=""><li id="67c2" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">使用“Python3 get-pip.py”命令安装pip。</li><li id="6276" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">将pip更新至最新版本“pip3安装—升级pip”。</li></ul><p id="88cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.使用pip将所需的库安装到Python脚本中，如(Numpy和NLTK)。</p><p id="5a1c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.运行Python脚本。关于我们如何构建Python脚本的更多信息，请参考这篇<a class="ae ky" rel="noopener" href="/@miteshdewda783/cdbe4b27ee6">文章</a>。</p><p id="5c5d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本地机器上运行Python脚本需要上述设置。所以另一个挑战是从Kotlin代码运行Python脚本并获得输出。</p><h2 id="05fe" class="jq jr hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">最终互操作</h2><p id="f085" class="pw-post-body-paragraph ie if hh ig b ih ks ij ik il kt in io ip ku ir is it kv iv iw ix kw iz ja jb ha bi translated">这是一段我们用来从Kotlin代码运行Python脚本的代码。</p><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es kz"><img src="../Images/4eea17c0594d049570bed7ef2f1da6e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*MtVblfv2D75xWifG"/></div></div></figure><p id="c971" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这段代码负责执行脚本并从中获取输出。让我们一步一步地理解代码:</p><ol class=""><li id="a14b" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb kx ji jj jk bi translated"><strong class="ig hi">创建一个进程来运行脚本:</strong></li></ol><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es ll"><img src="../Images/9e3c5ab5ab3ee730080a22ed9689c4f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OtGuLIf5Ey4S75OH"/></div></div></figure><p id="551b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建一个将摘要脚本文件路径、摘要文本和摘要标题作为输入参数的流程。该进程负责在终端上执行命令并生成输出。</p><p id="76fd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 2。读取输出:</strong></p><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lm"><img src="../Images/d08f04a5575aa0674be38b51f669ef6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*pnbYCvSinouB8Jp0"/></div></div></figure><p id="df14" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们正在创建BufferReader，用于从终端逐行读取输出。</p><p id="f336" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 3。读取错误日志:</strong></p><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es ln"><img src="../Images/615459893b8ae73101bcd70fe3eef20d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lCsIzjBrbzKJ8PLt"/></div></div></figure><p id="a3a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果在运行脚本或生成输出时出错，那么我们需要读取脚本或流程生成的错误日志。使用BufferReader读取打印在终端上的错误日志。</p><p id="addd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 4。销毁进程:</strong>读完脚本的输出，我们需要终止进程。</p><figure class="la lb lc ld fd le er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lo"><img src="../Images/61cc5bddaf229457c6a9ff98d50727c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cg4TUCm1OUkR9Q9YBc6OHw.png"/></div></div></figure><h2 id="8a7e" class="jq jr hh bd js jt ju jv jw jx jy jz ka ip kb kc kd it ke kf kg ix kh ki kj kk bi translated">摘要</h2><p id="4044" class="pw-post-body-paragraph ie if hh ig b ih ks ij ik il kt in io ip ku ir is it kv iv iw ix kw iz ja jb ha bi translated">使用上述步骤，我们能够执行Python脚本、处理错误并将其输出作为响应提供给我们的客户端。希望它能帮助那些正在寻找Kotlin-Python互操作性的好解决方案的人。要更多地了解这一部分如何融入我们的大项目，请参考以下文章:</p><p id="a79f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae ky" rel="noopener" href="/@mahesh.jadkar/cd1b9deb5771"> <strong class="ig hi"> UI和整体架构</strong> </a></p><p id="b655" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae ky" rel="noopener" href="/@miteshdewda783/cdbe4b27ee6"> <strong class="ig hi">摘录摘要</strong> </a></p><p id="ba6b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae ky" rel="noopener" href="/@miteshdewda783/bccb4bf5851c"> <strong class="ig hi">抽象概括</strong> </a></p><p id="05b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">特别感谢<a class="ae ky" href="https://www.linkedin.com/in/mukund-sharma/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">穆昆德·夏尔马</strong></a><a class="ae ky" href="https://in.linkedin.com/in/mahesh-jadkar-456b055b" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">马赫什·贾德卡尔</strong> </a>和<a class="ae ky" href="https://www.linkedin.com/in/miteshdewda/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">米特什·杜达</strong> </a>构思和编辑本文。</p></div></div>    
</body>
</html>