<html>
<head>
<title>How to Build a Neuron: Exploring AI in JavaScript Pt 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何构建神经元:探索JavaScript Pt 2中的AI</h1>
<blockquote>原文：<a href="https://medium.com/javascript-scene/how-to-build-a-neuron-exploring-ai-in-javascript-pt-2-2f2acb9747ed?source=collection_archive---------2-----------------------#2016-07-02">https://medium.com/javascript-scene/how-to-build-a-neuron-exploring-ai-in-javascript-pt-2-2f2acb9747ed?source=collection_archive---------2-----------------------#2016-07-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/6ae66a62758dada7b50c7bf02e1d8e27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*p37KRWpihIwr1UJ0gozG9g.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Dual Neuron — Scott Ingram (CC-BY-NC-2.0)</figcaption></figure><p id="f3e5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在这个系列中，我们将讨论一个将在未来25年改变我们生活的世界的话题。我们将看到许多无人机、自动驾驶汽车、虚拟现实和增强现实设备改变我们的出行方式、运输方式以及我们看待世界和与世界互动的方式，这些都将由人工智能和神经网络提供动力。</p><p id="e5a6" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">需要叙旧吗？</p><ul class=""><li id="2d5a" class="jr js hh iv b iw ix ja jb je jt ji ju jm jv jq jw jx jy jz bi translated"><a class="ae ka" rel="noopener" href="/javascript-scene/how-to-build-a-neuron-exploring-ai-in-javascript-pt-1-c2726f1f02b2">如何构建神经元:在JavaScript Pt 1中探索AI</a></li></ul><p id="fe2b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在第1部分中，我们简单介绍了什么是神经元以及它们是如何工作的，并通过展示一个如何对突触输入求和并确定神经元是否应该触发的简单示例结束了本文，并通过提出一个问题结束了本文:<strong class="iv hi">时间呢？</strong></p><h2 id="f0ce" class="kb kc hh bd kd ke kf kg kh ki kj kk kl je km kn ko ji kp kq kr jm ks kt ku kv bi translated">获取来源</h2><p id="dafe" class="pw-post-body-paragraph it iu hh iv b iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm la jo jp jq ha bi translated">从现在开始，我将在一个名为<a class="ae ka" href="https://github.com/ericelliott/neurolib" rel="noopener ugc nofollow" target="_blank">神经库</a>的图书馆里记录这些冒险。本文中讨论的所有工具都可以通过运行:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="81a0" class="kb kc hh lg b fi lk ll l lm ln">git clone <a class="ae ka" href="mailto:git@github.com" rel="noopener ugc nofollow" target="_blank">git@github.com</a>:ericelliott/neurolib.git &amp;&amp; cd neurolib<br/>git checkout pt2</span></pre><p id="7d4f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">运行单元测试:</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="c475" class="kb kc hh lg b fi lk ll l lm ln">npm test</span></pre><h2 id="8f54" class="kb kc hh bd kd ke kf kg kh ki kj kk kl je km kn ko ji kp kq kr jm ks kt ku kv bi translated">不是你传统的人工神经网络</h2><p id="2057" class="pw-post-body-paragraph it iu hh iv b iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm la jo jp jq ha bi translated">如果你熟悉传统的神经网络，你可能会想知道我什么时候开始谈论<a class="ae ka" href="https://www.youtube.com/watch?v=bxe2T-V8XRs&amp;list=PL77aoaxdgEVDrHoFOMKTjDdsa0p9iVtsR" rel="noopener ugc nofollow" target="_blank"> <strong class="iv hi">梯度下降</strong> </a>或<a class="ae ka" href="https://www.youtube.com/watch?v=TPRoLreU9lA" rel="noopener ugc nofollow" target="_blank"> <strong class="iv hi">隐马尔可夫模型</strong> </a> <strong class="iv hi">(嗯)</strong>。答案是，也许有一天。</p><p id="9f62" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在，我想探索真正的神经元和突触在真正的大脑中是如何工作的，而不是直接跳到数学抽象中。换句话说，我们将对神经网络采取模拟方法，而不是抽象方法。我们不会试图在分子水平上模拟大脑，但我们会试图模拟连续值随着时间的推移在神经网络中流动的方式，也许这将允许我们在某种程度上模拟真实神经网络的学习行为。</p><h2 id="0532" class="kb kc hh bd kd ke kf kg kh ki kj kk kl je km kn ko ji kp kq kr jm ks kt ku kv bi translated">生物神经可塑性概述</h2><p id="9139" class="pw-post-body-paragraph it iu hh iv b iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm la jo jp jq ha bi translated">回顾一下神经传递和可塑性:突触前神经元放电，释放神经递质，与受体结合，打开离子通道，这些离子通道可能与其他树突电位相加，触发动作脉冲，这可能进一步激发细胞体中的化学物质，导致蛋白质产生，蛋白质可能与突触壁结合，植入更多的离子通道，等等，所有这些都取决于突触前神经元和突触后神经元放电的紧密程度。(如果你现在感到困惑，你可能想<a class="ae ka" rel="noopener" href="/javascript-scene/how-to-build-a-neuron-exploring-ai-in-javascript-pt-1-c2726f1f02b2">重读第一部分</a>。</p><p id="67fb" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">换句话说:</p><blockquote class="lp"><p id="4ee9" class="lq lr hh bd ls lt lu lv lw lx ly jq dx translated">一起放电的细胞连接在一起。<br/>细胞发出的火焰会把电线分开。</p></blockquote><p id="a70b" class="pw-post-body-paragraph it iu hh iv b iw lz iy iz ja ma jc jd je mb jg jh ji mc jk jl jm md jo jp jq ha bi translated">根据锋电位时序相关的可塑性(在真实神经元实验中观察到)，一个关键问题是:</p><p id="f606" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">"单元格<em class="lo"> x </em>在单元格<em class="lo"> y </em>的20毫秒内触发了吗？"电压也很重要，所以还有一个相关的问题:“电压是多少？”</p><p id="f7ad" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为了试图模拟尖峰时序相关的可塑性，我们将建立一个神经元，它将突触的连续值求和，并随着时间发出脉冲<em class="lo">，与时钟同步的</em> <strong class="iv hi"> </strong>。</p><h2 id="94b6" class="kb kc hh bd kd ke kf kg kh ki kj kk kl je km kn ko ji kp kq kr jm ks kt ku kv bi translated">虚拟时钟</h2><p id="9bbe" class="pw-post-body-paragraph it iu hh iv b iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm la jo jp jq ha bi translated">我们希望能够调整我们的时间分辨率，所以我们将使用许多游戏和音频/视频编辑器采用的策略。我们将构建一个虚拟时钟，并以滴答声来度量时间，而不是以毫秒或其他实时单位来度量时间。</p><p id="5ce0" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">虚拟时钟的另一个巨大优势是，我们可以精确地安排彼此相关的事件，而不是依靠JavaScript极其不可靠的<em class="lo"> `setTimeout()` </em>机制。仅供参考，<em class="lo"> `setTimout()` </em>排班通常会延迟<em class="lo">50毫秒。这足以完全降低随机动作电位。</em></p><p id="f3a5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们的虚拟时钟默认情况下会使用<em class="lo"> `setTimeout()` </em>，但是由于我们所有的事件都会同步到虚拟分笔成交点，所以我们不会错过重要的事件，即使<em class="lo"> `setTimeout()` </em>迟到。我们的时钟还将具有自动抖动校正功能，因此即使<em class="lo"> `setTimeout()` </em>确实出了问题(它会出问题)，我们的时间刻度仍将相对于实时相当准确地同步。</p><p id="b5b4" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">也就是说，我们的一些事件可能在这里或那里晚了几毫秒，但是如果我们每<em class="lo">20毫秒</em>有一个滴答，并且有<em class="lo"> 5 </em>个滴答，总持续时间应该仍然接近<em class="lo">100毫秒</em>。</p><p id="61d0" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">因为<em class="lo"> `setTimeout()` </em>是如此的不可靠，我希望将来能够用不同的调度程序替换它。也许我们可以同步到网络音频API或<em class="lo"> `requestAnimationFrame` </em>来优化我们未来的计时。仅供参考，网络音频API精确到<em class="lo"> 44.1 kHz </em>，并且可以触发一个<em class="lo"> `ended` </em>事件，我们可以用它来安排事件。web audio API也在一个单独的线程中工作，所以即使我们阻塞了主线程，时间也应该是准确的。从理论上讲，这将使我们的计时比使用<em class="lo"> `setTimeout()'的计时精确几百倍。</em></p><p id="c513" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这是初稿:</p><figure class="lb lc ld le fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="1d40" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为了方便起见，我们公开了时钟参数。它们以后可能会派上用场。这里的subscribe机制大致受<a class="ae ka" href="https://github.com/zenparsing/es-observable" rel="noopener ugc nofollow" target="_blank"> ES-Observables API </a>的启发，但是我们可能需要对定时机制进行更多的控制，如果我们简单地使用RxJS 5.x+来完成这项工作的话。我们甚至可以从头开始学习一些我们自己的东西。</p><h2 id="db5e" class="kb kc hh bd kd ke kf kg kh ki kj kk kl je km kn ko ji kp kq kr jm ks kt ku kv bi translated">产生动作电位</h2><p id="7fc0" class="pw-post-body-paragraph it iu hh iv b iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm la jo jp jq ha bi translated">因为我们对随时间变化的连续值感兴趣，而不是像数字电路或统计分析那样对待神经元，我们将模拟真实动作电位的行为。真实动作电位有一个被称为<strong class="iv hi">去极化</strong>相的急剧上升斜率，一个被称为<strong class="iv hi">复极</strong>相的急剧下降斜率，其持续超过静息电位<strong class="iv hi">超极化</strong>，随后是一个被称为<strong class="iv hi">不应期</strong>的缓慢上升相。</p><figure class="lb lc ld le fd ii"><div class="bz dy l di"><div class="mg mf l"/></div></figure><p id="7f79" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们将动作电位分为3部分，去极化、复极+超极化(统称为下降期)和不应期(返回静息电位)。</p><p id="6825" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为了产生电位，我们需要几个可调参数:<em class="lo">`去极化Ms` </em>、<em class="lo">`复极化Ms` </em>、<em class="lo">`折射Ms` </em>、<em class="lo"> `min` </em>、<em class="lo"> `max` </em>和<em class="lo">`静止电位`。</em>在我们的模拟中，我们将使用零作为静息电位，它代表生物静息电位，~ <em class="lo"> -60mV </em>。</p><p id="e912" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">因为我们已经生成了一个独立于实时的时钟，所以我们可以使用任何我们想要的时间分辨率来表示数据，它被表示为<em class="lo"> `ticksPerMs` </em>。</p><p id="172b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">生成曲线的第一步是创建平滑的<strong class="iv hi">插值</strong>，这样我们就可以得到圆角，就像你在真实波形中看到的一样。插值是在已知数据点的范围内填充缺失数据的过程。</p><p id="8115" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为此，我们将采用起始值、结束值和插值的当前样本帧，传统上称为`<em class="lo"> mu`。</em>我认为简单的余弦插值应该可以完成这项工作:</p><figure class="lb lc ld le fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="f737" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">接下来，我们将创建一个名为<em class="lo"> `createPhase()` </em>的函数，它接受以节拍(帧)为单位的长度、起始值和结束值，并返回该阶段中每个节拍的值数组。<em class="lo"> `cosineInterpolate()` </em>创建单个值。<em class="lo"> `createPhase()` </em>从起点到终点创建一组完整的值:</p><figure class="lb lc ld le fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="7cf0" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">有了这些效用函数，我们就可以整合完整的动作电位:</p><figure class="lb lc ld le fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="5703" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为了节省每次计算的时间，我们将记住这个函数。我们将参数转换成一个键，并将结果数组添加到memo对象中。下次函数运行时，我们在memo对象中查找这个键。如果它存在，我们返回存储的数组，而不是生成一个新的动作电位。</p><p id="1e09" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">当我将一些典型引用的时间值输入到这些参数中时，在<em class="lo"> 44.1 khz </em>(我们稍后可能会调整分辨率以提高性能)，我得到的曲线如下所示:</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mh"><img src="../Images/bb5a256f272164b1101fc773151aebdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5DGWRbt-fa5giMFxftaluA.png"/></div></div></figure><p id="c2d2" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这看起来和我一直在看的理想化动作电位图差不多。作为一个起点，这应该很好。</p><h2 id="b979" class="kb kc hh bd kd ke kf kg kh ki kj kk kl je km kn ko ji kp kq kr jm ks kt ku kv bi translated">将动作电位与时钟同步</h2><p id="d1c6" class="pw-post-body-paragraph it iu hh iv b iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm la jo jp jq ha bi translated">现在我们有了一个函数，它可以生成动作电位作为样本值的数组，我们可以将其与时钟同步，这样每个值都会在正确的时间发出。</p><p id="34b7" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">让我们创建一个数据节点，将一个可观察对象映射到另一个可观察对象。使用它，我们将能够把时钟刻度映射到我们想要的任何值:</p><figure class="lb lc ld le fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="62fb" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在我们将能够连接一串节点，所有节点都同步到同一个时钟。我们可以使用<em class="lo"> `createNode()` </em>将数组值同步到一个时钟，使用<em class="lo">` nodefromrary()`:</em></p><figure class="lb lc ld le fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="ee58" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为了沿着轴突传播我们的动作电位，我们所要做的就是调用<em class="lo">` createactionpotential()`</em>，并将其与我们的时钟信号一起传递到<em class="lo">` nodefromraray()`</em>。</p><p id="0024" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在让我们创造一个故意缓慢、低分辨率的动作电位，看看会发生什么:</p><figure class="lb lc ld le fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="8370" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在本例中，我们使用每毫秒一个节拍将每毫秒缩放到<em class="lo">500毫秒</em>。这给了我们相当四四方方的分辨率，但它让我们以一种我们可以看到相对准确的方式来观察时序。</p><p id="80eb" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">当我们绘制这些值时，它看起来像这样:</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mi"><img src="../Images/70c074abc26c6bb2c22fcd0e1e1c4870.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NwPqJwzvx9MK1qvLfFtQBQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Low-resolution action potential</figcaption></figure><p id="e0b7" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">既然我们有了时钟同步的动作电位，下一步就是让这个信号通过突触。</p><p id="5576" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi">__</p><ol class=""><li id="f672" class="jr js hh iv b iw ix ja jb je jt ji ju jm jv jq mj jx jy jz bi translated"><a class="ae ka" href="http://www.ncbi.nlm.nih.gov/pmc/articles/PMC1160040/" rel="noopener ugc nofollow" target="_blank">动作电位在大鼠新皮质锥体神经元中的起始和传播</a> J Physiol。1997年12月15日；505(第三章):617–632。</li></ol></div><div class="ab cl mk ml go mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ha hb hc hd he"><h1 id="ff6f" class="mr kc hh bd kd ms mt mu kh mv mw mx kl my mz na ko nb nc nd kr ne nf ng ku nh bi translated"><a class="ae ka" href="https://ericelliottjs.com/product/lifetime-access-pass/" rel="noopener ugc nofollow" target="_blank">跟随埃里克·埃利奥特学习JavaScript】</a></h1></div><div class="ab cl mk ml go mm" role="separator"><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp mq"/><span class="mn bw bk mo mp"/></div><div class="ha hb hc hd he"><p id="9dec" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="lo">埃里克·艾略特</em> </strong> <em class="lo">著有</em> <a class="ae ka" href="http://pjabook.com" rel="noopener ugc nofollow" target="_blank"> <em class="lo">【编程JavaScript应用】</em> </a> <em class="lo">(奥赖利)，以及</em> <a class="ae ka" href="http://ericelliottjs.com/product/lifetime-access-pass/" rel="noopener ugc nofollow" target="_blank"> <em class="lo">【跟埃里克·艾略特学JavaScript】</em></a><em class="lo">。他为Adobe Systems</em><strong class="iv hi"><em class="lo"/></strong><em class="lo"/><strong class="iv hi"><em class="lo">尊巴健身</em></strong><em class="lo"/><strong class="iv hi"><em class="lo">华尔街日报</em></strong><em class="lo"/><strong class="iv hi"><em class="lo">【ESPN</em></strong><em class="lo"/><strong class="iv hi"><em class="lo">BBC</em></strong><em class="lo">等顶级录音师贡献了软件经验</em></p><p id="61a2" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">他大部分时间都在旧金山湾区和世界上最美丽的女人在一起。</p></div></div>    
</body>
</html>