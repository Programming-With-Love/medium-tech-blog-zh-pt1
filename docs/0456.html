<html>
<head>
<title>Android styling: themes vs styles</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android风格:主题与风格</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/android-styling-themes-vs-styles-ebe05f917578?source=collection_archive---------0-----------------------#2020-02-04">https://medium.com/androiddevelopers/android-styling-themes-vs-styles-ebe05f917578?source=collection_archive---------0-----------------------#2020-02-04</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/0794f6a350f1423438d82a81e381d297.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_oRkdiiwzxsiEKUW-KSRXg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Illustration by <a class="ae hu" href="https://twitter.com/VPoltrack" rel="noopener ugc nofollow" target="_blank">Virginia Poltrack</a></figcaption></figure><div class=""/><p id="383e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Android风格系统提供了一种强大的方式来指定你的应用程序的视觉设计，但是它很容易被误用。正确使用它可以使主题和风格更容易维护，使品牌更新不那么可怕，并使其直接支持黑暗模式。这是一系列文章的第一篇，我和Chris Banes将着手揭开Android风格的神秘面纱，这样你就可以制作出时尚的应用程序，而不用担心被人发现。</p><p id="501b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在第一篇文章中，我将看看样式系统的构建模块:主题和样式。</p><h1 id="930d" class="ju jv hx bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">主题！=风格</h1><p id="c7f8" class="pw-post-body-paragraph iu iv hx iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr ha bi translated">主题和风格都使用相同的语法，但是服务于非常不同的目的。您可以将这两者视为键-值存储，其中键是属性，值是资源。让我们来看看每一个。</p><h1 id="4b95" class="ju jv hx bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">什么是时尚？</h1><p id="50a6" class="pw-post-body-paragraph iu iv hx iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr ha bi translated">样式是视图属性值的集合。你可以把一个风格想象成一个<code class="du kx ky kz la b">Map&lt;<strong class="iw hy">view</strong> attribute, resource&gt;</code>。也就是说，键都是视图属性，即小部件声明的属性，您可以在布局文件中设置。样式特定于单一类型的小部件，因为不同的小部件支持不同的属性集:</p><blockquote class="lb lc ld"><p id="5cf8" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr ha bi translated">样式是视图属性的集合；特定于单一类型的小部件</p></blockquote><figure class="li lj lk ll fd hj"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="df2e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如你所见，样式中的每个键都是你可以在布局中设置的:</p><figure class="li lj lk ll fd hj"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="919d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">将它们提取到一个样式中使得跨多个视图重用和维护变得容易。</p><h1 id="c160" class="ju jv hx bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">使用</h1><p id="7a4d" class="pw-post-body-paragraph iu iv hx iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr ha bi translated">样式由布局中的各个视图使用:</p><figure class="li lj lk ll fd hj"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="507a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">视图只能应用一种样式——这与其他样式系统形成对比，例如web上的css，其中组件可以设置多个css类。</p><h1 id="0f79" class="ju jv hx bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">范围</h1><p id="486d" class="pw-post-body-paragraph iu iv hx iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr ha bi translated">应用于视图<strong class="iw hy">的样式仅</strong>应用于那个视图的<em class="le">，而不应用于它的任何子视图。例如，如果你有一个有三个按钮的<code class="du kx ky kz la b">ViewGroup</code>，在<code class="du kx ky kz la b">ViewGroup</code>上设置<code class="du kx ky kz la b">InlineAction</code>样式将不会把那个样式应用到按钮上。样式提供的值与布局中直接设置的值相结合(使用<a class="ae hu" rel="noopener" href="/androiddevelopers/whats-your-text-s-appearance-f3a1729192d">样式优先顺序</a>解析)。</em></p><h1 id="1b83" class="ju jv hx bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">什么是主题？</h1><p id="b61a" class="pw-post-body-paragraph iu iv hx iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr ha bi translated">主题是命名资源的集合，以后可以通过样式、布局等引用。它们为Android资源提供了语义名称，因此您可以在以后引用它们，例如<code class="du kx ky kz la b">colorPrimary</code>是给定颜色的语义名称:</p><figure class="li lj lk ll fd hj"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="ba39" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这些命名的资源被称为主题属性，所以一个主题就是<code class="du kx ky kz la b">Map&lt;<strong class="iw hy">theme</strong> attribute, resource&gt;</code>。主题属性不同于视图属性，因为它们不是特定于单个视图类型的属性，而是在语义上命名为的指针，指向在应用程序中更广泛应用的值。主题为这些命名的资源提供了具体的值。在上面的例子中，<code class="du kx ky kz la b">colorPrimary</code>属性指定这个主题的主要颜色是蓝绿色。通过用一个主题来抽象资源，我们可以在不同的主题中提供不同的具体值(比如<code class="du kx ky kz la b">colorPrimary</code>=橙)。</p><blockquote class="lb lc ld"><p id="d750" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr ha bi translated">主题是命名资源的集合，在应用程序中非常有用</p></blockquote><p id="19d9" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">主题类似于界面。编程到一个接口允许你从实现中分离公共契约，允许你提供<em class="le">不同的</em>实现。主题起着类似的作用；通过根据主题属性编写布局和样式，我们可以在不同的主题下使用它们，提供不同的具体资源。</p><p id="3207" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">大致相当的伪代码:</p><figure class="li lj lk ll fd hj"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="d235" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这允许您改变<code class="du kx ky kz la b">MyView</code>的呈现方式，而不必创建它的变体:</p><figure class="li lj lk ll fd hj"><div class="bz dy l di"><div class="lm ln l"/></div></figure><h1 id="48c6" class="ju jv hx bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">使用</h1><p id="36ce" class="pw-post-body-paragraph iu iv hx iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr ha bi translated">您可以在具有<code class="du kx ky kz la b">Context</code>的组件上指定主题，例如<code class="du kx ky kz la b">Activity</code>或<code class="du kx ky kz la b">Views</code> / <code class="du kx ky kz la b">ViewGroup</code> s:</p><figure class="li lj lk ll fd hj"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="c444" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">你也可以通过用一个<code class="du kx ky kz la b"><a class="ae hu" href="https://developer.android.com/reference/android/view/ContextThemeWrapper.html#ContextThemeWrapper(android.content.Context,%20int)" rel="noopener ugc nofollow" target="_blank">ContextThemeWrapper</a></code>包装一个现有的<code class="du kx ky kz la b">Context</code>来在代码中设置一个主题，然后你可以用它来<a class="ae hu" href="https://developer.android.com/reference/android/view/LayoutInflater.html#from(android.content.Context)" rel="noopener ugc nofollow" target="_blank">膨胀</a>一个布局等等。</p><p id="4564" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">主题的力量真的来自于你如何使用它们；您可以通过引用主题属性来构建更加灵活的小部件。不同的主题在以后提供了具体的价值。例如，您可能希望在视图层次结构的某个部分设置背景颜色:</p><figure class="li lj lk ll fd hj"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="d3ad" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们可以通过使用<code class="du kx ky kz la b">?attr/themeAttributeName</code>语法委托给主题，而不是设置静态颜色(<code class="du kx ky kz la b">#ffffff</code>或<code class="du kx ky kz la b">@color</code>资源)。这个语法的意思是:在主题中查询这个语义属性的值。这种程度的间接性允许我们提供不同的行为(例如，在浅色和深色主题中提供不同的背景颜色),而不必创建多个布局或样式，这些布局或样式除了一些颜色变化之外大部分是相同的。它隔离了主题中正在变化的元素。</p><blockquote class="lb lc ld"><p id="be7d" class="iu iv le iw b ix iy iz ja jb jc jd je lf jg jh ji lg jk jl jm lh jo jp jq jr ha bi translated">使用<code class="du kx ky kz la b">?attr/themeAttributeName</code>语法在主题中查询这个语义属性的值</p></blockquote><h1 id="0d0e" class="ju jv hx bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">范围</h1><p id="07f0" class="pw-post-body-paragraph iu iv hx iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr ha bi translated">一个<code class="du kx ky kz la b"><a class="ae hu" href="https://developer.android.com/reference/android/content/res/Resources.Theme.html" rel="noopener ugc nofollow" target="_blank">Theme</a></code>作为一个<code class="du kx ky kz la b"><a class="ae hu" href="https://developer.android.com/reference/android/content/Context" rel="noopener ugc nofollow" target="_blank">Context</a></code>的属性被访问，并且可以从任何一个有<code class="du kx ky kz la b">Context</code>的对象中获得，例如<code class="du kx ky kz la b">Activity</code>、<code class="du kx ky kz la b">View</code>或<code class="du kx ky kz la b">ViewGroup</code>。这些对象存在于一棵树中，其中一个<code class="du kx ky kz la b">Activity</code>包含<code class="du kx ky kz la b">ViewGroup</code> s，后者包含<code class="du kx ky kz la b">View</code> s等等。在这个树的任何级别指定一个主题级联到后代节点，例如在一个<code class="du kx ky kz la b">ViewGroup</code>上设置一个主题适用于其中所有的<code class="du kx ky kz la b">View</code>(与只适用于单个视图的样式相反)。</p><figure class="li lj lk ll fd hj"><div class="bz dy l di"><div class="lm ln l"/></div></figure><p id="5fa1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这可能是非常有用的，比如说，如果你想要一个黑暗的主题部分，而不是一个明亮的屏幕。点击阅读更多关于这种行为的信息<a class="ae hu" rel="noopener" href="/androiddevelopers/android-styling-themes-overlay-1ffd57745207">。</a></p><p id="bd8f" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">请注意，此行为仅适用于布局膨胀时。虽然<code class="du kx ky kz la b">Context</code>提供了一种<code class="du kx ky kz la b"><a class="ae hu" href="https://developer.android.com/reference/android/content/Context#setTheme(int)" rel="noopener ugc nofollow" target="_blank">setTheme</a></code>方法，或者<code class="du kx ky kz la b">Theme</code>提供了一种<code class="du kx ky kz la b"><a class="ae hu" href="https://developer.android.com/reference/android/content/res/Resources.Theme?hl=en#applyStyle(int,%20boolean)" rel="noopener ugc nofollow" target="_blank">applyStyle</a></code>方法，但是这些都需要在膨胀之前被称为<em class="le">。膨胀后设置新主题或应用样式不会更新现有视图。</em></p><h1 id="9bc0" class="ju jv hx bd jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr bi translated">单独关注</h1><p id="427e" class="pw-post-body-paragraph iu iv hx iw b ix ks iz ja jb kt jd je jf ku jh ji jj kv jl jm jn kw jp jq jr ha bi translated">理解不同的职责以及风格和主题的相互作用，有助于使你的风格资源更易于管理。</p><p id="a596" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">例如，假设你的应用程序有一个蓝色主题，但一些专业屏幕有一个花哨的紫色外观<strong class="iw hy">和</strong>，你想提供带有调整颜色的<a class="ae hu" href="https://developer.android.com/guide/topics/ui/look-and-feel/darktheme" rel="noopener ugc nofollow" target="_blank">深色主题</a>。如果你试图只使用样式来实现这一点，你必须为专业/非专业和浅色/深色的排列创建4种样式。由于样式特定于一种视图类型(<code class="du kx ky kz la b">Button</code>、<code class="du kx ky kz la b">Switch</code>等)，你需要在你的应用程序中为每种视图类型创建这些排列。</p><figure class="li lj lk ll fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lo"><img src="../Images/c522d92c2391cd8849aa2f6d7ec8ec71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aKRwEx8Z0SCfN8hy"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Exploding permutations of widgets/styles without theming</figcaption></figure><p id="bb18" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">相反，如果我们使用样式<strong class="iw hy">和</strong>主题，我们可以将根据主题改变的部分隔离为主题属性，因此我们只需要为每个视图类型定义一个样式。对于上面的例子，我们可以定义4个主题，每个主题为<code class="du kx ky kz la b">colorPrimary</code>主题属性提供不同的值，然后这些样式引用并自动反映主题的正确值。</p><p id="95ee" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这种方法可能看起来更复杂，因为您需要考虑样式和主题的交互，但是它有隔离每个主题的变化部分的好处。因此，如果你的应用程序从蓝色更名为橙色，你只需要在一个地方进行更改，而不是分散在整个样式中。这也有助于对抗风格的扩散。理想情况下，每种视图类型只有少量的样式。如果你不利用主题化，你的<code class="du kx ky kz la b">styles.xml</code>文件很容易失去控制，爆发出相似风格的不同变体，这成为一个令人头疼的维护问题。</p><p id="163d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">加入我们的下一篇文章，我们将探索一些常见的主题属性以及如何创建自己的主题属性:</p><div class="hg hh ez fb hi lp"><a rel="noopener follow" target="_blank" href="/androiddevelopers/android-styling-common-theme-attributes-8f7c50c9eaba"><div class="lq ab dw"><div class="lr ab ls cl cj lt"><h2 class="bd hy fi z dy lu ea eb lv ed ef hw bi translated">Android样式:通用主题属性</h2><div class="lw l"><h3 class="bd b fi z dy lu ea eb lv ed ef dx translated">在本系列关于Android风格的前一篇文章中，我们讨论了主题和风格之间的区别…</h3></div><div class="lx l"><p class="bd b fp z dy lu ea eb lv ed ef dx translated">medium.com</p></div></div><div class="ly l"><div class="lz l ma mb mc ly md ho lp"/></div></div></a></div></div></div>    
</body>
</html>