<html>
<head>
<title>Apache Zeppelin: stairway to notes* haven!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">阿帕奇齐柏林飞艇:通往天堂的阶梯！</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/apache-zeppelin-stairway-to-notes-haven-28ec413a185a?source=collection_archive---------0-----------------------#2018-12-28">https://medium.com/oracledevs/apache-zeppelin-stairway-to-notes-haven-28ec413a185a?source=collection_archive---------0-----------------------#2018-12-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="0e85" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">*笔记适用于Zeppelin行话中的笔记本</p><p id="1474" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这篇文章是我的@JavaAdventCalendar文章的再博客，来自<a class="ae jc" href="https://www.javaadvent.com/2018/12/apache-zeppelin-stairway-to-notes-haven.html" rel="noopener ugc nofollow" target="_blank">https://www . javaadvent . com/2018/12/Apache-zeppelin-stairway-to-notes-haven . html</a>。</p><h1 id="e9d9" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">介绍</h1><p id="8bd2" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">继续上一篇文章，<a class="ae jc" rel="noopener" href="/@neomatrix369/two-years-in-the-life-of-ai-ml-dl-and-java-6bfe6eb8182a">关于AI、ML、DL和Java的两年生活</a>，在那里我表达了我的动机。我提到了我们的讨论，其中一个讨论是，你可以在JuPyteR笔记本上用Python，R，Julia这样的语言来写。大多数人不知道除了Python、SQL之外，你还可以写Java和Scala在<a class="ae jc" href="http://zeppelin.apache.org" rel="noopener ugc nofollow" target="_blank"> Apache Zeppelin </a>笔记本的帮助下。因此，我确实承诺分享一些这方面的东西，以扩大每个人的认识。虽然已经过了一段时间，但我还是把我的想法整合到了这篇文章中，展示了我们如何使用支持Java和Scala的<a class="ae jc" href="https://zeppelin.apache.org/" rel="noopener ugc nofollow" target="_blank"><em class="kg">Apache Zeppelin</em></a><em class="kg">来完成类似的操作。这个项目本身是用Java编写的，它的开放架构意味着Zeppelin可以支持任何东西，只要为那个东西提供了一个解释器。</em></p><h1 id="99fb" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">首先，首先…</h1><p id="789b" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">万一我已经失去了你们中的一些人，这里是我所说的JuPyteR笔记本和用不同语言写笔记本的意思，见<a class="ae jc" href="https://www.youtube.com/watch?v=Rc4JQWowG5I" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=Rc4JQWowG5I</a>并且也看看JuPyteR笔记本支持的<a class="ae jc" href="https://github.com/jupyter/jupyter/wiki/Jupyter-kernels" rel="noopener ugc nofollow" target="_blank">内核列表</a>。但是在这篇文章中，我们将讨论Apache Zeppelin，如何让它工作，以及如何在Zeppelin环境中使用一些注释。</p><h1 id="6fe7" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">有趣的是…</h1><p id="9563" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">所以让我们看看我们是如何做到的，首先下载并安装Apache Zeppelin。</p><h1 id="b6e5" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">下载和安装</h1><p id="7ba7" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated"><strong class="ig hi">下载</strong></p><p id="9bed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">转到<a class="ae jc" href="https://zeppelin.apache.org/download.html" rel="noopener ugc nofollow" target="_blank">下载页面</a>，有多个选项可供选择，推荐两个选项:</p><ul class=""><li id="a281" class="kh ki hh ig b ih ii il im ip kj it kk ix kl jb km kn ko kp bi translated">下载包含解释器的整个二进制文件</li><li id="3244" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">下载一个网络安装程序，然后下载解释器(你可以选择你需要的，或者对所有的<a class="ae jc" href="https://zeppelin.apache.org/docs/0.8.0/usage/interpreter/installation.html" rel="noopener ugc nofollow" target="_blank">解释器</a>使用<code class="du kv kw kx ky b">--all</code>标志)</li></ul><p id="4057" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我们的例子中，我从<a class="ae jc" href="https://zeppelin.apache.org/docs/0.8.0/quickstart/install.html#downloading-binary-package" rel="noopener ugc nofollow" target="_blank">下载二进制包部分</a>下载了<strong class="ig hi"> net-install解释器包</strong>。</p><p id="7dcc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">安装</strong></p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="99fd" class="lh je hh ky b fi li lj l lk ll">$ cd /opt/zeppelin-0.8.0-bin-netinst<br/>$ ./bin/install-interpreter.sh --all</span></pre><p id="f2d4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于另一种类型的存档或安装选项，请参见<a class="ae jc" href="https://zeppelin.apache.org/docs/0.8.0/quickstart/install.html" rel="noopener ugc nofollow" target="_blank">快速启动页面</a>上的说明。</p><p id="5f36" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">运行</strong> <br/>根据下载的二进制类型，按照<a class="ae jc" href="https://zeppelin.apache.org/docs/0.8.0/quickstart/install.html#starting-apache-zeppelin" rel="noopener ugc nofollow" target="_blank">快速启动页面</a>上的说明进行操作。</p><p id="1c3a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">尽管在我们的例子中，我不得不跑:</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="6936" class="lh je hh ky b fi li lj l lk ll">$ cd /opt/zeppelin-0.8.0-bin-netinst<br/>$ ./bin/zeppelin.sh</span></pre><p id="0650" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由于我很好奇在另一个JDK下运行Zeppelin是什么，而不是通常的Oracle或OpenJDK JDK或JRE，我决定尝试GraalVM JRE，所以我将<code class="du kv kw kx ky b">JAVA_HOME</code>切换到指向我机器上的<code class="du kv kw kx ky b">/path/to/GraalVM/jre</code>。GraalVM JDK与JRE捆绑在一起，可以像任何Java供应商的JRE一样独立使用。</p><p id="d906" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当Zeppelin运行时，会显示这些消息(您可以看到<code class="du kv kw kx ky b">JAVA_HOME</code>设置已被选中):</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="e426" class="lh je hh ky b fi li lj l lk ll">Pid dir doesn&amp;#039;t exist, create /opt/zeppelin-0.8.0-bin-netinst/run<br/>GraalVM 1.0.0-rc7 warning: ignoring option MaxPermSize=512m; support was removed in 8.0<br/>SLF4J: Class path contains multiple SLF4J bindings.<br/>SLF4J: Found binding in [jar:file:/opt/zeppelin-0.8.0-bin-netinst/lib/interpreter/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]<br/>SLF4J: Found binding in [jar:file:/opt/zeppelin-0.8.0-bin-netinst/lib/slf4j-log4j12-1.7.10.jar!/org/slf4j/impl/StaticLoggerBinder.class]<br/>SLF4J: See <a class="ae jc" href="http://www.slf4j.org/codes.html#multiple_bindings" rel="noopener ugc nofollow" target="_blank">http://www.slf4j.org/codes.html#multiple_bindings</a> for an explanation.<br/>SLF4J: Actual binding is of type [org.slf4j.impl.Log4jLoggerFactory]<br/>Dec 25, 2018 1:34:23 AM org.glassfish.jersey.internal.inject.Providers checkProviderRuntime<br/>WARNING: A provider org.apache.zeppelin.rest.NotebookRepoRestApi registered in SERVER runtime does not implement any provider interfaces applicable in the SERVER runtime. Due to constraint configuration problems the provider org.apache.zeppelin.rest.NotebookRepoRestApi will be ignored.<br/>Dec 25, 2018 1:34:23 AM org.glassfish.jersey.internal.inject.Providers checkProviderRuntime<br/>Dec 25, 2018 1:34:23 AM org.glassfish.jersey.internal.inject.Providers checkProviderRuntime<br/>[---- snipped ----]<br/>WARNING: The (sub)resource method getNoteList in org.apache.zeppelin.rest.NotebookRestApi contains empty path annotation.</span></pre><p id="6b9d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">运行(续)</strong> <br/>一旦完成上述所有步骤，并且Zeppelin已成功启动，执行以下操作:</p><ul class=""><li id="a10b" class="kh ki hh ig b ih ii il im ip kj it kk ix kl jb km kn ko kp bi translated">打开<a class="ae jc" href="http://localhost:8080/#/" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/#/</a></li><li id="851c" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">然后看看<a class="ae jc" href="https://zeppelin.apache.org/docs/0.8.0/quickstart/explore_ui.html" rel="noopener ugc nofollow" target="_blank">下的文档探索Zeppelin UI </a></li><li id="84bf" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">然后是<a class="ae jc" href="http://localhost:8080/#/notebook/2A94M5J1Z" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/#/notebook/2 a94m 5j 1z</a>的教程笔记本</li></ul><figure class="kz la lb lc fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lm"><img src="../Images/67f2a3cd8e19a31a809708835a848bd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*55p47cBVt-HT3sL1xky60g.png"/></div></div></figure><h1 id="5a2b" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">小实验</h1><p id="dcab" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">为了查看一些数字，我决定使用<strong class="ig hi"> Zeppelin教程/基本功能(Spark)笔记本</strong>来检查使用GraalVM JDK/JRE和另一个JDK/JRE运行时的性能差异，结果如下:</p><p id="44b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"><em class="kg">JDK</em></strong></p><ul class=""><li id="14b0" class="kh ki hh ig b ih ii il im ip kj it kk ix kl jb km kn ko kp bi translated"><code class="du kv kw kx ky b">./bin/zeppelin.sh</code>48.26秒用户25.63秒系统28% cpu 4:20.15总计(手动启动和停止脚本)</li><li id="881b" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">第一段</li><li id="b97e" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">耗时47秒。最后更新由匿名于2018年12月25日，凌晨2:18:36。</li><li id="a4a7" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">其后的每个段落(从左到右的列):</li><li id="3845" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">耗时44秒。最后更新由匿名于2018年12月25日，凌晨2:18:44。(过时)</li><li id="7693" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">花了10秒钟。最后更新由匿名于2018年12月25日，凌晨2:18:47。(过时)</li><li id="ff46" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">花了6秒钟。最后更新由匿名于2018年12月25日，凌晨2:18:50。(过时)</li></ul><p id="0429" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="kg">甲骨文JDK8 </em> </strong></p><ul class=""><li id="f4e7" class="kh ki hh ig b ih ii il im ip kj it kk ix kl jb km kn ko kp bi translated"><code class="du kv kw kx ky b">./bin/zeppelin.sh</code>37.64秒用户25.73秒系统29% cpu 3:38.49总计(手动启动和停止脚本)</li><li id="e497" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">第一段</li><li id="41b3" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">耗时54秒。最后更新由匿名于2018年12月25日，凌晨2:12:16。</li><li id="f36b" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">其后的每个段落(从左到右的列):</li><li id="0277" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">耗时43秒。最后一次由匿名更新于2018年12月25日凌晨2:12:24。(过时)</li><li id="f25b" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">花了13秒。最后一次由匿名更新于2018年12月25日凌晨2:12:29。(过时)</li><li id="8e32" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">花了6秒钟。最后更新由匿名于2018年12月25日，凌晨2:12:31。(过时)</li></ul><p id="e2f2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我的观察是，性能差异是微不足道的，尽管对于不同类型的操作，结果会在两者之间有所不同，因此需要更多的观察。除非另有说明，否则最好留在GraalVM JRE上，以便在我们进行的过程中看到更多这样的变化。</p><p id="637a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="kg">注:</em> </strong> <em class="kg">段落是齐柏林隐语中的代码块，注是一个笔记本在齐柏林世界中的简称。因此，笔记有一个或多个段落。</em></p><p id="508c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">还有许多其他教程(示例)笔记可以使用，请参见Zeppelin教程下的主页(见截图):</p><figure class="kz la lb lc fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lu"><img src="../Images/366df23ca65fc82b8116cea170c39651.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8lODqNxfzh97ubAthZxmnw.png"/></div></div></figure><h1 id="041c" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">导入便笺</h1><p id="bcbe" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">从主页(<a class="ae jc" href="http://localhost:8080/#/" rel="noopener ugc nofollow" target="_blank">http://localhost:8080/#/</a>，见下文)，我们可以选择超链接文本<a class="ae jc" href="https://www.javaadvent.com/2018/12/apache-zeppelin-stairway-to-notes-haven.html" rel="noopener ugc nofollow" target="_blank"> Import Note </a>，它允许我们从磁盘或URL导入笔记(Zeppelin行话中的笔记本)。</p><figure class="kz la lb lc fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lv"><img src="../Images/594affb4fd75ffe2ac216f7bb881d869.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kWsPE7zum1jvI-FZZOmgnw.png"/></div></div></figure><p id="342f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我们的例子中，我将来自<a class="ae jc" href="https://github.com/mmatloka/machine-learning-by-example-workshop" rel="noopener ugc nofollow" target="_blank">https://github . com/mmatloka/machine-learning-by-example-workshop</a>(确保使用了到<code class="du kv kw kx ky b">json</code>文件原始内容的链接，即<a class="ae jc" href="https://raw.githubusercontent.com/mmatloka/machine-learning-by-example-workshop/master/Workshop.json" rel="noopener ugc nofollow" target="_blank">https://raw . githubusercontent . com/mmatloka/machine-learning-by-example-workshop/master/workshop . JSON</a>)的注释添加到Zeppelin中，并尝试运行，但在尝试运行前几段时出现了各种错误。</p><p id="b024" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在寻找为什么我会得到这些错误的答案时，我偶然发现了一个论坛，然后采纳了论坛上有人的建议，那里有类似的错误消息。这是一个解决问题的方法<a class="ae jc" href="https://issues.apache.org/jira/browse/ZEPPELIN-3586" rel="noopener ugc nofollow" target="_blank">https://issues.apache.org/jira/browse/ZEPPELIN-3586</a>。</p><h1 id="1c24" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">我们上次失败了，所以让我们再试一次…</h1><p id="dfe7" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">其中一个解决方案是让<code class="du kv kw kx ky b">SPARK_HOME</code>指向Spark的一个独立实例，而不依赖Apache Zeppelin安装中的嵌入式<code class="du kv kw kx ky b">spark interpreter</code>。作为一种变通方法，在<a class="ae jc" href="https://gist.github.com/conker84/4ffc9a2f0125c808b4dfcf3b7d70b043#file-zeppelin-dockerfile" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/conker 84/4 ffc 9 a2 f 0125 c 808 B4 dfcf 3 b7d 70 b 043 # file-zeppelin-docker file</a>提供了一个指向Dockerfile gist的链接。我扩展了该脚本以包含GraalVM JRE，并添加了必要的配置以使其对Zeppelin和Spark可见:</p><p id="7080" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kg">齐柏林飞艇-码头文件</em></p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="21e4" class="lh je hh ky b fi li lj l lk ll">FROM apache/zeppelin:0.8.0<br/># Workaround to &amp;quot;fix&amp;quot; <a class="ae jc" href="https://issues.apache.org/jira/browse/ZEPPELIN-3586" rel="noopener ugc nofollow" target="_blank">https://issues.apache.org/jira/browse/ZEPPELIN-3586</a><br/>RUN echo &amp;quot;$LOG_TAG Download Spark binary&amp;quot; &amp;&amp; \<br/>wget -O /tmp/spark-2.3.1-bin-hadoop2.7.tgz <a class="ae jc" href="http://apache.panu.it/spark/spark-2.3.1/spark-2.3.1-bin-hadoop2.7.tgz" rel="noopener ugc nofollow" target="_blank">http://apache.panu.it/spark/spark-2.3.1/spark-2.3.1-bin-hadoop2.7.tgz</a> &amp;&amp; \<br/>tar -zxvf /tmp/spark-2.3.1-bin-hadoop2.7.tgz &amp;&amp; \<br/>rm -rf /tmp/spark-2.3.1-bin-hadoop2.7.tgz &amp;&amp; \<br/>mv spark-2.3.1-bin-hadoop2.7 /spark-2.3.1-bin-hadoop2.7<br/>ENV SPARK_HOME=/spark-2.3.1-bin-hadoop2.7<br/>### My modified steps here on:<br/>RUN rm -fr /usr/lib/jvm/java-1.8.0-openjdk-amd64 /usr/lib/jvm/java-8-openjdk-amd64<br/>RUN wget <a class="ae jc" href="https://github.com/oracle/graal/releases/download/vm-1.0.0-rc10/graalvm-ce-1.0.0-rc10-linux-amd64.tar.gz" rel="noopener ugc nofollow" target="_blank">https://github.com/oracle/graal/releases/download/vm-1.0.0-rc10/graalvm-ce-1.0.0-rc10-linux-amd64.tar.gz</a><br/>RUN tar xvzf graalvm-ce-1.0.0-rc10-linux-amd64.tar.gz<br/>RUN mv graalvm-ce-1.0.0-rc10/jre /usr/lib/jvm/graalvm-ce-1.0.0-rc10<br/>ENV JAVA_HOME=/usr/lib/jvm/graalvm-ce-1.0.0-rc10<br/>ENV PATH=$JAVA_HOME/bin:$PATH<br/>RUN java -version<br/>RUN rm graalvm-ce-1.0.0-rc10-linux-amd64.tar.gz<br/>RUN rm -fr graalvm-ce-1.0.0-rc10<br/>CMD ["bin/zeppelin.sh"]</span></pre><p id="4e9d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">并创建了两个小型bash脚本来帮助构建docker映像并从映像运行容器。</p><p id="7821" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kg">构建docker映像</em></p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="9eb7" class="lh je hh ky b fi li lj l lk ll">docker build -t zeppelin -f Zeppelin-Dockerfile .</span></pre><p id="2404" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kg">运行docker容器</em></p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="86db" class="lh je hh ky b fi li lj l lk ll">docker run --rm \</span><span id="60e0" class="lh je hh ky b fi lw lj l lk ll">            -it \</span><span id="9efa" class="lh je hh ky b fi lw lj l lk ll">             -p 8080:8080 zeppelin</span></pre><p id="dfe3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">注意:</strong>docker镜像名为<code class="du kv kw kx ky b">zeppelin:latest</code>，大小约为4.45GB。</p><p id="19b1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="kg">以上脚本可以在</em></strong><a class="ae jc" href="https://github.com/neomatrix369/awesome-ai-ml-dl/tree/master/examples/apache-zeppelin" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="kg">https://github . com/neo matrix 369/awesome-ai-ml-dl/tree/master/examples/Apache-zeppelin</em></strong></a><strong class="ig hi"><em class="kg">找到，请随时对其进行改进并创建拉请求返回到repo中。</em> </strong></p><p id="ade0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你不想这样做，你可以尝试使用https://github.com/dylanmei/docker-zeppelin的<a class="ae jc" href="https://github.com/dylanmei/docker-zeppelin" rel="noopener ugc nofollow" target="_blank"><em class="kg"/></a><em class="kg">。我是Apache Zeppelin，它也使用这个容器。</em></p><p id="0aeb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我对上述内容不太感兴趣，因为整个过程花费了45分钟，其中35分钟用于下载几兆字节的Spark。下载GraalVM JDK轻而易举，用我的高速DSL连接不到5分钟。</p><p id="16a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">应用上面相同的步骤加载Michal Matloka  的工作室笔记本(<code class="du kv kw kx ky b">workshop.json</code>)并运行笔记本中的段落，它工作得非常好，当然没有任何错误。感谢Michal Matloka  为我们提供了这样一个例子，让我们一起玩，一起学。</p><p id="0ae0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从一个<code class="du kv kw kx ky b">.csv</code>文件加载数据集:</p><figure class="kz la lb lc fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lx"><img src="../Images/f789fcdca4b2047da3ae6491683e3b9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wn159D_tIXLSE8yLgGUyWA.png"/></div></div></figure><p id="52e4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过参数<code class="du kv kw kx ky b">avgMetrics</code>产生最终结果——平均交叉验证指标为<code class="du kv kw kx ky b">CrossValidator.estimatorParamMaps</code>中的每个<code class="du kv kw kx ky b">paramMap</code>按各自的顺序排列。</p><figure class="kz la lb lc fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es ly"><img src="../Images/657c4b12c42a1a98c2f755a22fab7fd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KycMremCBTSwSM5-YlFi0Q.png"/></div></div></figure><p id="fee2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">得分<em class="kg">53.18%</em>——可能仍需要一点调整和微调来获得更高的得分，但这是一个不同的讨论，与我们当前关于Zeppelin notes的主题无关。</p><h1 id="e347" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">警告</h1><p id="3b55" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">不知何故，Zeppelin不喜欢带有这种缩进的代码布局:</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="35c9" class="lh je hh ky b fi li lj l lk ll">val indexToString = new IndexToString()</span><span id="367a" class="lh je hh ky b fi lw lj l lk ll">.setInputCol("prediction").setOutputCol("predictionLabel")</span><span id="a927" class="lh je hh ky b fi lw lj l lk ll">.setLabels(stringIndexer.labels)</span></pre><p id="9f29" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，当我移除缩进以将函数调用链连接在一起时:</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="61fc" class="lh je hh ky b fi li lj l lk ll">val indexToString = new IndexToString().setInputCol("prediction").setOutputCol("predictionLabel").setLabels(stringIndexer.labels)</span></pre><p id="6e61" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我能够很好地运行这些段落。我不得不对所有的段落都这样做，以防止任何来自齐柏林飞艇的错误。否则你会在所有段落中得到这样的信息:</p><pre class="kz la lb lc fd ld ky le lf aw lg bi"><span id="1eb2" class="lh je hh ky b fi li lj l lk ll">:1: error: illegal start of definition</span><span id="3b19" class="lh je hh ky b fi lw lj l lk ll">.setInputCol(&amp;quot;prediction&amp;quot;).setOutputCol("predictionLabel")</span><span id="c889" class="lh je hh ky b fi lw lj l lk ll">^</span></pre><h1 id="befd" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">摘要</h1><p id="1164" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">我喜欢齐柏林飞艇的原因是:</p><ul class=""><li id="3561" class="kh ki hh ig b ih ii il im ip kj it kk ix kl jb km kn ko kp bi translated">你有一个干净直观的界面(工作时必须有棱角)</li><li id="27b4" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">您可以编写自定义解释器，并扩展可接受的语言列表</li><li id="32fb" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">编写自己的可视化工具</li><li id="7221" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">实时显示每个段落的执行进度</li><li id="5020" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">实时计算并显示每一段的执行时间</li><li id="70e4" class="kh ki hh ig b ih kq il kr ip ks it kt ix ku jb km kn ko kp bi translated">在任何适用的地方，数据表都可以被可视化为多个视图，然后返回到数据表——所有这些都是延迟完成的(仅在被选中时执行，并保持结果不变)</li></ul><p id="1f5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">虽然，执行可能会显得比JuPyteR笔记本慢。IPython笔记本中的许多功能都没有了，这也意味着作为一个开源项目，它通过贡献留下了很多改进的空间——为拉取请求选择您最喜欢的功能。</p><p id="ddb7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">总而言之，这是一个让Java/JVM开发人员感觉宾至如归的好地方，对于熟悉Python和R以及Java和Scala的开发人员来说，可以使用Zeppelin进行原型、ML培训和实验工作。</p><p id="3d91" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kg">请关注这个空间，并分享您的评论、反馈或任何有助于我们学习和成长到</em><a class="ae jc" href="http://twitter.com/@theNeomatrix369" rel="noopener ugc nofollow" target="_blank"><em class="kg">@ theneomatrix 369</em></a>，<em class="kg">您可以通过</em> <a class="ae jc" href="http://neomatrix369.worpress.com/aboutme" rel="noopener ugc nofollow" target="_blank"> <em class="kg">关于我的页面</em> </a> <em class="kg">了解更多关于我的信息。</em></p></div></div>    
</body>
</html>