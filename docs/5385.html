<html>
<head>
<title>Enable Federation with Fusion Apps as Identity Provider</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">启用融合应用作为身份提供者的联盟</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/enable-federation-with-fusion-apps-as-identity-provider-1ca6d795659c?source=collection_archive---------4-----------------------#2018-01-16">https://medium.com/oracledevs/enable-federation-with-fusion-apps-as-identity-provider-1ca6d795659c?source=collection_archive---------4-----------------------#2018-01-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="d43b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是我撰写的系列博客中的第二篇，旨在解释Oracle融合应用程序与PaaS服务的身份集成，使用身份云服务来实现服务之间的单点登录。这是这个系列的博客列表</p><ol class=""><li id="d0f6" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><a class="ae jl" rel="noopener" href="/@amit.gokhru/understanding-the-integration-architecture-fusion-application-with-platform-services-9b8297594873">了解集成架构——融合应用与平台服务</a></li><li id="8f20" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated"><a class="ae jl" rel="noopener" href="/@amit.gokhru/enable-federation-with-fusion-apps-as-identity-provider-1ca6d795659c">启用融合应用作为身份提供商的联盟</a></li><li id="f8d6" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated"><a class="ae jl" rel="noopener" href="/@amit.gokhru/enable-federation-with-identity-cloud-service-as-identity-provider-36e80d2bc4ec">启用身份云服务作为身份提供商的联盟</a></li><li id="9d25" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated"><a class="ae jl" rel="noopener" href="/@amit.gokhru/setting-up-users-and-roles-synchronization-between-fusion-apps-and-identity-cloud-service-70dcf2144107">在融合应用和身份云服务之间设置用户和角色同步</a></li><li id="7a0a" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated"><a class="ae jl" rel="noopener" href="/@amit.gokhru/3-legged-oauth-flow-to-invoke-fusion-apps-rest-endpoints-5fc6b0b7b059">调用Fusion Apps rest端点的三脚OAuth流。</a></li></ol><p id="56fb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇博客中，我将解释我们如何配置融合应用和IDCS之间的联合，以实现融合应用和IDCS支持的PaaS服务之间的单点登录，其中融合应用的内部IDM将作为身份提供商，IDCS作为服务提供商。我们还将看到如何在融合应用程序和IDCS之间启用Oauth信任，以利用IDCS Oauth令牌进行web服务调用。在不希望利用IDCS的高级功能，并且集成的唯一动机是使用平台服务扩展现有FA环境以实施自定义扩展的情况下，您可能希望将FA配置为身份提供商。最终的拓扑看起来会像-</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es jr"><img src="../Images/87ffe504f609b01f54a23e5ee6416885.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*-hadItWybEF1hZSY_zOwnA.png"/></div></figure><p id="9727" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们从分为3个步骤的配置开始</p><ol class=""><li id="8d2d" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">IDCS配置— IDCS管理员</li><li id="c9e6" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">融合应用配置— Oracle支持</li><li id="3191" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">激活和测试— IDCS管理员</li></ol><p id="eec4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下是官方文档— <a class="ae jl" href="https://cloud.oracle.com/developer/solutions?tab=tasks&amp;solutionguid=OCPSI-GUID-53C8A800-3DC3-48F0-930E-11797185406B" rel="noopener ugc nofollow" target="_blank">通过Oracle身份云服务支持Oracle销售云、Oracle全球人力资源云、Oracle ERP云联盟和OAuth Trust】</a></p><p id="587b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">(请注意，Fusion Apps的URL和屏幕截图是第12版)</p><h1 id="09e4" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak"> IDCS配置</strong></h1><ol class=""><li id="81d9" class="jc jd hh ig b ih kx il ky ip kz it la ix lb jb jh ji jj jk bi translated">从URL下载融合应用的IdP元数据(传统云账号中的FA rel 12)——<a class="ae jl" href="https://[Id-Domain" rel="noopener ugc nofollow" target="_blank">https://【Id-Domain</a>。login.us2.oraclecloud.com/fed/idp/metadata<a class="ae jl" href="http://login.us2.oraclecloud.com/fed/idp/metadata" rel="noopener ugc nofollow" target="_blank"/></li><li id="fa13" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">在IDCS控制台中将FA配置为IdP</li></ol><ul class=""><li id="b60a" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">登录到IDCS管理控制台</li><li id="22b8" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">点击左上角的汉堡菜单，点击"安全" &gt;在左边选择"身份提供者"，点击"添加SAML IDP "将融合应用添加为IDCS的身份提供者</li><li id="a31c" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">提供名称和描述，然后单击“下一步”</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ld"><img src="../Images/852e6ce3958c54ab0d761ffa75225623.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/format:webp/1*kWZJl2cy41liZWEJ69darg.png"/></div></figure><ul class=""><li id="acf1" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">导入在步骤1中下载的融合应用程序IDP元数据</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es le"><img src="../Images/e7848ecf2c8c8f26aaeeffc58e2cb4d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*FpLEM6tjVpLeG40cR-CdcQ.png"/></div></div></figure><ul class=""><li id="9b6b" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">在身份提供者和IDCS之间映射用户属性</li></ul><p id="9460" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">身份提供者用户属性= "名称ID "</p><p id="c80d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Oracle身份云服务用户属性= "用户名"</p><p id="f636" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请求名称ID格式= "未指定"</p><p id="d9cb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击“下一步”</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lj"><img src="../Images/d9e6a2dbbc08e501764fabee77fda80c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*eE-4IybSA4N3vIv5pjQPlQ.png"/></div></figure><ul class=""><li id="0048" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">从提供的“下载”按钮下载“服务提供商元数据”文件、签名和加密证书</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lk"><img src="../Images/2e0bdfee7672df4da680dcd8e63266cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*COb1opMpSHFgikLwL7bj5w.png"/></div></figure><ul class=""><li id="aed9" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">单击“完成”。您将看到列表中新添加的身份提供者处于停用状态。</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ll"><img src="../Images/2e6c7efe82e86371996f9800fed94aa0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*TU9bMnRiltR5pdc4lHhTRw.png"/></div></figure><ul class=""><li id="c2fa" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">这就完成了IDCS管理控制台中的身份提供者配置。</li></ul><p id="4e38" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.为融合应用程序创建Oauth资源。需要将此Oauth资源作为“允许的范围”添加到Oauth客户端中，以获得给定范围的访问令牌。</p><ul class=""><li id="a1fd" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">登录IDCS管理控制台&gt;单击“应用程序”选项卡&gt;“添加”</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="lf lg di lh bf li"><div class="er es lk"><img src="../Images/4fcfbab3566233888b64e549941f38f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*4E41sun_KTHNG83unJL0iw.png"/></div></div></figure><ul class=""><li id="e0a1" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">在应用程序向导中，选择“可信应用程序”</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lm"><img src="../Images/f87cf1fab6abcec5fa532840b9011b1c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/format:webp/1*uilWR8mGUt1EKfBDFJQXsg.png"/></div></figure><ul class=""><li id="4309" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">在“应用程序详细信息”页面上，提供应用程序名称和描述，然后单击下一步</li><li id="4a8a" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">跳过客户端配置，然后单击“下一步”</li><li id="e454" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">选择单选按钮“立即将应用程序配置为资源服务器”,将融合应用程序API路径配置为OAuth资源</li></ul><p id="9a3b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">提供“主要受众”= FA端点的主机</p><p id="dc5b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">提供“辅助受众”= FA端点的辅助主机</p><p id="02b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击“允许范围”上的“添加”,添加主要和次要受众的允许范围</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es ln"><img src="../Images/d2fd649d56039f034066abe6c825caa3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*XYc5uyBDaj3CBHGZGGwuPw.png"/></div></figure><ul class=""><li id="253a" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">查看受众和允许的范围，然后单击下一步。您可以添加特定的API作为作用域，然后为那些允许的作用域请求访问令牌。当您添加“/”作为允许的范围时，请确保在请求访问令牌时使用“受众”+“/”作为范围。</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lo"><img src="../Images/8bbb85535f3fe4381c007c1551fe2a65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*tTk-SrU6HctyApWFGahRzA.png"/></div></figure><ul class=""><li id="3b13" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">取消选中“强制授权”并单击“完成”。</li></ul><p id="7eec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.为融合应用程序创建Oauth客户端</p><ul class=""><li id="4a57" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">登录IDCS管理控制台&gt;单击“应用程序”选项卡&gt;搜索在上述步骤中创建的应用程序</li><li id="8fe6" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">选择“立即将此应用程序配置为客户端”并提供以下详细信息</li></ul><p id="4850" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">允许的授权类型—“客户端凭据”和“JWT断言”</p><p id="7f2e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">安全性—保持复选框未选中</p><p id="4855" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击完成</p><p id="f6b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">记下客户端ID和客户端密码</p><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lp"><img src="../Images/b597a4740b33bb64deb7029348499d34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1160/format:webp/1*FdhBrxe7WE2v8YTqClzcrA.png"/></div></figure><p id="e5f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击激活以激活应用程序。</p><p id="6639" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.从<a class="ae jl" href="https://%3cIDCS" rel="noopener ugc nofollow" target="_blank"> https:// &lt; IDCS </a>实例主机&gt; /获取颁发者名称和令牌端点。众所周知的/IDC配置</p><ul class=""><li id="4373" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">打开上面的URL，复制“发行者”值和“令牌_端点”值</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lq"><img src="../Images/69475a10246955e85eae026b758c02f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/1*TLM2ME1OQBGejzivF-IUUQ.png"/></div></figure><p id="b4eb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">6.文件服务请求Oracle支持配置融合应用程序并提供以下信息</p><ul class=""><li id="5d42" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">联盟的方向——融合应用作为身份提供商，IDCS作为服务提供商</li><li id="076f" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">步骤2中下载的IDCS服务提供商元数据</li><li id="8f23" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">步骤2中下载的签名和加密证书</li><li id="557e" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">名称ID格式值= "未指定"，名称ID值= "uid "</li><li id="72b5" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">第5步中的发行人名称</li><li id="1e7e" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">按照步骤#5的IDCS令牌端点</li><li id="312a" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">融合Id-域和数据中心详细信息</li><li id="7745" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">创建的OAuth客户端的客户端id和证书</li></ul><h1 id="75c2" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">融合App配置</strong></h1><p id="0a61" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated">Oracle技术支持将处理服务请求，以在融合应用程序中配置联盟和Oauth信任，并以成功完成作为响应，同时为您提供一个证书文件</p><h1 id="a73c" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated"><strong class="ak">激活和测试</strong></h1><p id="f8a4" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lr ir is it ls iv iw ix lt iz ja jb ha bi translated">IDCS管理员将通过以下步骤激活并测试融合应用程序和IDCS之间的联盟-</p><ol class=""><li id="6cb6" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">IDCS管理员将登录到IDCS管理控制台</li><li id="4fb2" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb jh ji jj jk bi translated">测试并激活联盟</li></ol><ul class=""><li id="d73f" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">点击“安全”&gt;在左边选择“身份提供者”</li><li id="3468" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">从FA IdP提供商操作菜单中，单击“测试”来测试设置。这将打开融合应用程序登录页面。</li></ul><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es lu"><img src="../Images/aecb97cc46da47a540c70ead0307a559.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*13b-FYLS3cnonATCydHDJQ.png"/></div></figure><ul class=""><li id="acbb" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">要在登录页面中显示IDP，请使用新添加的身份提供者配置IDP策略</li><li id="d00b" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">如果身份提供者尚未激活，请将其激活。保持选择器登录禁用，以支持混搭用例。</li></ul><p id="9263" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.将Oauth客户端设为可信客户端</p><ul class=""><li id="1201" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lc ji jj jk bi translated">搜索前面创建的Oauth客户端，点击名称进入详细信息页面</li><li id="fa20" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">单击“配置”选项卡，“客户端配置”</li><li id="6f09" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">客户端类型—受信任</li><li id="623a" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">证书—从支持部门导入FA签名证书</li><li id="af40" class="jc jd hh ig b ih jm il jn ip jo it jp ix jq jb lc ji jj jk bi translated">单击完成</li></ul><p id="2b13" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这完成了融合应用和身份云服务之间的联合和Oauth设置，使您能够实现融合应用和支持IDCS的平台服务之间的单点登录，以及使用IDCS访问令牌的融合web服务调用。</p><p id="cc77" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下一步—在融合应用和身份云服务之间设置用户和角色同步</p><p id="ab18" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lv">本文所表达的观点是我个人的观点，不一定代表甲骨文的观点。</em></p></div></div>    
</body>
</html>