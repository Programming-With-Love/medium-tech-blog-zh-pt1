<html>
<head>
<title>Building an address parser with spaCy</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ç”¨spaCyæ„å»ºåœ°å€è§£æå™¨</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/globant/building-an-address-parser-with-spacy-e3376b7cff?source=collection_archive---------0-----------------------#2021-11-08">https://medium.com/globant/building-an-address-parser-with-spacy-e3376b7cff?source=collection_archive---------0-----------------------#2021-11-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="8a6a" class="pw-subtitle-paragraph if hg hh bd b ig ih ii ij ik il im in io ip iq ir is it iu iv iw dx translated">åº”ç”¨å‘½åå®ä½“è¯†åˆ«æ¥è¯†åˆ«åœ°å€ã€‚</h2></div><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es ix"><img src="../Images/27356adda5b44cbadec791dbea8f5385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_XppAazqcCEKncqe"/></div></div></figure><p id="ba18" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">ç»„ç»‡çš„åœ°å€æ•°æ®åœ¨æ”¶é›†å®¢æˆ·åˆ†ææˆ–æ”¯æŒä¸šåŠ¡è¿è¥(å¦‚è¥é”€ã€ç‰©æµã€äº¤ä»˜å’Œä¸šåŠ¡é€šä¿¡)æ–¹é¢é€šå¸¸è‡³å…³é‡è¦ã€‚ç»è¿‡å‡€åŒ–ã€è‰¯å¥½è§£æã€æ ‡å‡†åŒ–å’ŒéªŒè¯çš„åœ°å€æ˜¯æ•°æ®æ•´åˆå’Œåˆ†æå¼•æ“çš„åŸºç¡€ã€‚</p><p id="f10b" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">å¤§é‡çš„ä¼ä¸šåœ°å€æ•°æ®å¯ä»¥ä»¥æ‰‹åŠ¨é”®å…¥æ•°æ®åº“æˆ–å¹³é¢æ–‡ä»¶çš„åŸå§‹åœ°å€ä¸²çš„å½¢å¼æ‰¾åˆ°ã€‚ä½†æ˜¯å®ƒæ˜¯å¯æ¶ˆè€—çš„å—ï¼Ÿä»¥ä¸‹æ˜¯ä¸€ä¸ªç‹¬ç‰¹ç¾å›½åœ°å€çš„ä¸åŒå†™æ³•:</p><blockquote class="kf kg kh"><p id="3625" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke ha bi translated"><code class="du km kn ko kp b"><strong class="jl hi">111 8th Ave Ste 1509 Tulsa OK 74136 US</strong></code></p><p id="ace2" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke ha bi translated"><code class="du km kn ko kp b"><strong class="jl hi">C/o John Doe LLC, 111, 8th Ave Ste 1509, Oklahoma, 74136-1922, USA</strong></code></p><p id="8a54" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke ha bi translated"><code class="du km kn ko kp b"><strong class="jl hi">111, 8th Ave Ste 1509, Tulsa, OK, , USA</strong></code></p></blockquote><p id="aaed" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">ç›¸å½“æ··ä¹±ã€‚å¯¹å—ï¼ŸğŸ˜³</p><figure class="iy iz ja jb fd jc"><div class="bz dy l di"><div class="kq kr l"/></div><figcaption class="ks kt et er es ku kv bd b be z dx">Because the code you wrote with Python regex just canâ€™t handle human absurdities.</figcaption></figure><p id="7a36" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">å› æ­¤ï¼Œæœ‰å¿…è¦é€šè¿‡è§£æã€å»æœå¹³ã€æ ‡å‡†åŒ–(æ˜ å°„åˆ°æ ‡å‡†åç§°å¹¶å¡«å……ç¼ºå¤±éƒ¨åˆ†)ã€åœ°ç†æ ‡è®°ç­‰å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ã€‚æ‰èƒ½ç”¨äºè¿›ä¸€æ­¥çš„åˆ†æã€‚<strong class="jl hi">åœ°å€è§£æ</strong>æ˜¯è¿™å‡ ä¸ªé¢„å¤„ç†æ­¥éª¤ä¹‹ä¸€ï¼Œå®ƒæœ‰åŠ©äºè¯†åˆ«&amp;å°†åœ°å€å­—ç¬¦ä¸²åˆ†å‰²æˆä¸åŒçš„éƒ¨åˆ†ï¼Œå¦‚æ”¶ä»¶äººã€å»ºç­‘ç‰©ã€è¡—é“ã€å·ã€å¿ã€é‚®æ”¿ç¼–ç ä»¥åŠè¯¥ç‰¹å®šå›½å®¶çš„å…¶ä»–é€‚ç”¨éƒ¨åˆ†ã€‚</p><p id="a85f" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">å¾ˆæ˜æ˜¾ï¼Œè¿™ç±»é—®é¢˜æ ¹æœ¬æ— æ³•è§£å†³ğŸ˜‰)é€šè¿‡ç¼–å†™ä¼ ç»Ÿçš„åŸºäºè§„åˆ™(é€šå¸¸æ˜¯<a class="ae kw" href="https://docs.python.org/3/library/re.html" rel="noopener ugc nofollow" target="_blank">æ­£åˆ™</a>è¡¨è¾¾å¼é©±åŠ¨)çš„ç®—æ³•ã€‚æˆ‘ä»¬éœ€è¦æ›´å¤šçš„å¤æ‚æ€§ï¼Œè¿™å°±æ˜¯è‡ªç„¶è¯­è¨€å¤„ç†(NLP)ç®—æ³•çš„ç”¨æ­¦ä¹‹åœ°ã€‚</p><h1 id="2762" class="kx ky hh bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">spaCyæ˜¯ä»€ä¹ˆï¼Œæˆ‘ä¸ºä»€ä¹ˆè¦å…³å¿ƒï¼Ÿ</h1><p id="b11a" class="pw-post-body-paragraph jj jk hh jl b jm lp ij jo jp lq im jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated">å¯¹ï¼Œå°±æ˜¯<a class="ae kw" href="https://spacy.io/usage/spacy-101" rel="noopener ugc nofollow" target="_blank"> spaCy </a>(å°±æ˜¯è¿™ä¹ˆå†™çš„ï¼).æ­£å¦‚å…¶<a class="ae kw" href="https://en.wikipedia.org/wiki/SpaCy" rel="noopener ugc nofollow" target="_blank">ç»´åŸºé¡µé¢</a>ä¸Šä»‹ç»çš„é‚£æ ·ï¼Œ</p><blockquote class="kf kg kh"><p id="831c" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke ha bi translated">spaCyæ˜¯ä¸€ä¸ªç”¨äºé«˜çº§è‡ªç„¶è¯­è¨€å¤„ç†çš„å¼€æºè½¯ä»¶åº“ï¼Œç”¨ç¼–ç¨‹è¯­è¨€Pythonå’ŒCythonç¼–å†™ã€‚</p></blockquote><p id="ad6d" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">NLPåšäº†äººç±»èƒ½åšè€Œä¼ ç»Ÿç®—æ³•åšä¸åˆ°çš„äº‹æƒ…:å­¦ä¹ å’Œæé«˜ã€‚æˆ‘ä»¬<em class="ki">å»ºç«‹</em>å’Œ<em class="ki">è®­ç»ƒ</em>æˆ‘ä»¬çš„è¯­è¨€å¤„ç†æ¨¡å‹ï¼Œä»¥è¯†åˆ«å¥å­ã€æ®µè½ç”šè‡³å°è¯´ä¸­éšå«çš„ä¸Šä¸‹æ–‡æ¨¡å¼ã€‚ä»<a class="ae kw" href="https://towardsdatascience.com/python-libraries-for-natural-language-processing-be0e5a35dd64" rel="noopener" target="_blank">ä¼—å¤šå¯ç”¨çš„æœºå™¨å­¦ä¹ åº“</a>ã€<a class="ae kw" href="https://spacy.io/usage/spacy-101" rel="noopener ugc nofollow" target="_blank"> spaCy </a>å°±æ˜¯è¿™æ ·ä¸€ä¸ª<strong class="jl hi">ã€</strong>ã€<strong class="jl hi">ã€</strong>ç”¨æœ€å°‘çš„åŠªåŠ›å’Œè®¡ç®—èµ„æºå®Œæˆå·¥ä½œï¼Œå¦åˆ™ä¼šæ·¹æ²¡æ¨¡å‹æ„å»ºå’Œè®­ç»ƒè¿‡ç¨‹ã€‚</p><p id="ddea" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">spaCyçš„æ ¸å¿ƒæ˜¯ä½¿ç”¨æ·±åº¦å­¦ä¹ åº“<a class="ae kw" href="https://thinc.ai/" rel="noopener ugc nofollow" target="_blank"> Thinc </a>ï¼Œå®ƒé’ˆå¯¹CPUä½¿ç”¨è¿›è¡Œäº†ä¼˜åŒ–(é€šå¸¸æ˜¯ä¸€ç§é‡‡ç”¨é™åˆ¶)ï¼Œå¹¶å¤„ç†ä¸“é—¨çš„NLPä»»åŠ¡ï¼Œå¦‚<a class="ae kw" href="https://spacy.io/usage/spacy-101#features" rel="noopener ugc nofollow" target="_blank">æ ‡è®°åŒ–ã€è¯æ±‡åŒ–ã€è¯æ€§(POS)æ ‡è®°ã€æ–‡æœ¬åˆ†ç±»ã€å‘½åå®ä½“è¯†åˆ«ä»¥åŠè®¸å¤šå…¶ä»–ä»»åŠ¡</a>ã€‚åœ¨ä¸æ·±å…¥è¿™äº›æŠ€æœ¯çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å°†è®¨è®ºå±€é™äºä¸æˆ‘ä»¬çš„åœ°å€è§£æç”¨ä¾‹ç›¸å…³çš„<strong class="jl hi">å‘½åå®ä½“è¯†åˆ«</strong>ã€‚</p><h1 id="3e70" class="kx ky hh bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">å‘½åå®ä½“è¯†åˆ«(NER)å’Œç©ºé—´</h1><p id="a8fc" class="pw-post-body-paragraph jj jk hh jl b jm lp ij jo jp lq im jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated">å‘½åå®ä½“è¯†åˆ«(NER)è¢«<a class="ae kw" href="https://en.wikipedia.org/wiki/Named-entity_recognition" rel="noopener ugc nofollow" target="_blank">æè¿°ä¸º</a></p><blockquote class="kf kg kh"><p id="48a2" class="jj jk ki jl b jm jn ij jo jp jq im jr kj jt ju jv kk jx jy jz kl kb kc kd ke ha bi translated">ä¿¡æ¯æå–çš„ä¸€ä¸ªå­ä»»åŠ¡ï¼Œæ—¨åœ¨å®šä½éç»“æ„åŒ–æ–‡æœ¬ä¸­æåˆ°çš„<a class="ae kw" href="https://en.wikipedia.org/wiki/Named_entity" rel="noopener ugc nofollow" target="_blank">å‘½åå®ä½“</a>å¹¶å°†å…¶åˆ†ç±»ä¸ºé¢„å®šä¹‰çš„ç±»åˆ«ï¼Œå¦‚äººåã€ç»„ç»‡ã€ä½ç½®ã€åŒ»ç–—ä»£ç ã€æ—¶é—´è¡¨è¾¾å¼ã€æ•°é‡ã€è´§å¸å€¼ã€ç™¾åˆ†æ¯”ç­‰ã€‚</p></blockquote><p id="c5ad" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">ç®€å•åœ°è¯´ï¼Œæˆ‘ä»¬åœ¨æµè§ˆä¸€æ®µæ–‡å­—æˆ–å¥å­æ—¶ï¼Œè¯•å›¾å¯»æ‰¾ä¸ç‰¹å®šé¢†åŸŸç±»åˆ«ç›¸å…³çš„â€œç°å®ä¸–ç•Œçš„å¯¹è±¡â€ï¼Œå¹¶åœ¨æ‰¾åˆ°æ—¶çªå‡ºæ˜¾ç¤ºå®ƒä»¬ã€‚æ‰€æœ‰è¿™äº›ä¸»è¦æ˜¯é€šè¿‡å¯¹æ–‡æœ¬çš„ç›´è§‰å’Œä¸Šä¸‹æ–‡ç†è§£(åœ¨æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ä¸­è·å¾—)æ¥å®Œæˆçš„ï¼Œè€Œæ— éœ€ç¼–å†™ä»»ä½•ç¼–ç¨‹è§„åˆ™ã€‚ä¸‹é¢æ˜¯NERæ¨¡å¼åœ¨ä¸€æ®µæ–‡å­—ä¸Šçš„åº”ç”¨å¯ä»¥æ­ç¤ºçš„:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lu"><img src="../Images/35eaf5b9819d2a08352a75ed5699e37c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3JnZxW2byywAhptxr3MCjQ.png"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx">NER output as generated by displaCy visualizer. Courtesy: <a class="ae kw" href="https://spacy.io/usage/linguistic-features#named-entities" rel="noopener ugc nofollow" target="_blank">spaCy NER usage guide</a></figcaption></figure><p id="a9ed" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">æˆ‘ä»¬å¾—åˆ°äº†ä¸åŒå®ä½“çš„ç®€æ´è¡¨ç¤ºï¼Œå¦‚ç»„ç»‡ã€åœ°ç†ä½ç½®ã€æ—¥æœŸã€äººåç­‰ã€‚å·²ç¡®è®¤ã€‚å¾ˆå‰å®³å§ï¼Ÿ</p><p id="b907" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">spaCyæä¾›äº†å¼€ç®±å³ç”¨çš„<a class="ae kw" href="https://spacy.io/usage/linguistic-features#named-entities" rel="noopener ugc nofollow" target="_blank"> NERç‰¹æ€§</a>ä½œä¸ºå…¶é¢„è®­ç»ƒç®¡é“çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ ·æ‚¨å°±ä¸å¿…ä»å¤´å¼€å§‹ç»å†æ„å»ºæ¨¡å‹çš„æ­¥éª¤(å°½ç®¡<a class="ae kw" href="https://spacy.io/usage/layers-architectures" rel="noopener ugc nofollow" target="_blank">å®šåˆ¶æ¨¡å‹è®¾è®¡</a>å§‹ç»ˆæ˜¯ä¸€ä¸ªé€‰é¡¹):ç¡®å®šç¥ç»ç½‘ç»œæ¶æ„ã€æ·»åŠ å±‚ã€åˆå§‹åŒ–/è°ƒæ•´æƒé‡ç­‰ã€‚</p><p id="7d98" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">åœ¨spaCyä¸­åˆ›å»ºç»Ÿè®¡NERæ¨¡å‹çš„æ„å»ºå’Œè®­ç»ƒè¿‡ç¨‹éå¸¸ç®€å•ï¼Œå¹¶éµå¾ªé…ç½®é©±åŠ¨çš„æ–¹æ³•:æˆ‘ä»¬ä»é¢„è®­ç»ƒæˆ–ç©ºè¯­è¨€æ¨¡å‹å¼€å§‹ï¼Œæ·»åŠ å®ä½“è¯†åˆ«å™¨ï¼Œå¯é€‰åœ°å®šä¹‰è‡ªå®šä¹‰å®ä½“ï¼Œåœ¨æˆ‘ä»¬çš„è®­ç»ƒé›†ä¸Šå¼€å§‹è¿­ä»£è®­ç»ƒå¾ªç¯ï¼Œé€šè¿‡å¯¹è®­ç»ƒé›†å’Œé…ç½®è¿›è¡Œå°‘é‡è°ƒæ•´ï¼Œæˆ‘ä»¬è·å¾—äº†æœ€ä½³æ¨¡å‹ã€‚è®©æˆ‘ä»¬åœ¨æ¥ä¸‹æ¥çš„å°èŠ‚ä¸­å›é¡¾è¿™äº›æ­¥éª¤ï¼Œå¹¶æ„å»ºæˆ‘ä»¬çš„<strong class="jl hi">åœ°å€è§£æå™¨</strong>ã€‚</p><h1 id="ea4c" class="kx ky hh bd kz la lb lc ld le lf lg lh io li ip lj ir lk is ll iu lm iv ln lo bi translated">NERåœ¨åœ°å€è§£æä¸­çš„åº”ç”¨</h1><p id="c3f3" class="pw-post-body-paragraph jj jk hh jl b jm lp ij jo jp lq im jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated">æ‚¨ç°åœ¨å¯èƒ½å·²ç»çŸ¥é“ï¼Œæˆ‘ä»¬å°†åœ°å€å­—ç¬¦ä¸²åˆ†å‰²æˆä¸åŒéƒ¨åˆ†çš„ä»»åŠ¡å±äºå‘½åå®ä½“è¯†åˆ«çš„èŒƒç•´ã€‚æˆ‘ä»¬å¸Œæœ›çœ‹åˆ°æˆ‘ä»¬çš„NERæ¨¡å‹èƒ½å¤Ÿä»¥åˆç†çš„å‡†ç¡®åº¦è§£æä»»ä½•åœ°å€å­—ç¬¦ä¸²ï¼Œæ¯”å¦‚:</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es lv"><img src="../Images/e4af9b1ef597457ce7082a26ecfc8102.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JLZTrqZ_n0ZV63kvKvFy6A.jpeg"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx">Tagged entities in an address string</figcaption></figure><p id="5740" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">é‚£ä¹ˆï¼Œæˆ‘ä»¬å¼€å§‹å§ã€‚æˆ‘ä»¬å°†éµå¾ªè®­ç»ƒè¿‡ç¨‹ï¼Œè¯¦ç»†çš„<a class="ae kw" href="https://spacy.io/usage/training" rel="noopener ugc nofollow" target="_blank">åœ¨è¿™é‡Œ</a>ï¼Œæ¥åˆ›å»ºæˆ‘ä»¬çš„è§£æç¾å›½åœ°å€çš„æ¨¡å‹ã€‚</p><p id="9a4d" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated"><strong class="jl hi"> spaCyå®‰è£…:</strong> spaCyåŒ…å¯ä»¥ä½¿ç”¨pipè¿›è¡Œ<a class="ae kw" href="https://spacy.io/usage" rel="noopener ugc nofollow" target="_blank">å®‰è£…</a>ï¼Œå¦‚ä¸‹æ‰€ç¤º:</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="5990" class="ma ky hh kp b fi mb mc l md me">pip install -U spacy</span><span id="cb02" class="ma ky hh kp b fi mf mc l md me">&gt;&gt;&gt; import spacy<br/>&gt;&gt;&gt; spacy.__version__<br/>'3.1.2'</span></pre><p id="ed71" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated"><strong class="jl hi">è‡ªå®šä¹‰å®ä½“æ ‡ç­¾</strong>:é’ˆå¯¹ç¾å›½åœ°å€ï¼Œæˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„æ¨¡å‹ç¡®å®šäº†ä»¥ä¸‹è‡ªå®šä¹‰å®ä½“æ ‡ç­¾:</p><p id="ce20" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated"><code class="du km kn ko kp b">[â€˜STREETâ€™, â€˜RECIPIENTâ€™, â€˜BUILDING_NUMBERâ€™, â€˜BUILDING_NAMEâ€™, â€˜ZIP_CODEâ€™, â€˜CITYâ€™, â€™STATEâ€™, â€˜COUNTRYâ€™]</code></p><p id="a6d8" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated"><strong class="jl hi">è®­ç»ƒæ•°æ®é›†å‡†å¤‡:</strong>æˆ‘ä»¬ä»¥åŸå§‹CSVæ ¼å¼å‡†å¤‡æˆ‘ä»¬çš„<a class="ae kw" href="https://github.com/swapnil-saxena/address-parser/blob/main/corpus/dataset/us-train-dataset.csv" rel="noopener ugc nofollow" target="_blank">è®­ç»ƒæ•°æ®é›†</a>ï¼Œå°†å…¶é™åˆ¶ä¸ºæˆ‘ä»¬çš„æºç³»ç»Ÿä¸­åœ°å€æ•°æ®çš„è‰¯å¥½ä»£è¡¨æ€§æ ·æœ¬ã€‚é€šå¸¸å»ºè®®å°†æ•°æ®(å¯¹äºæˆ‘ä»¬çš„æ¡ˆä¾‹ç ”ç©¶ï¼Œæˆ‘ä»¬é€‰æ‹©äº†å¤§çº¦100+20ä¸ªæ•°æ®è®­ç»ƒå’ŒéªŒè¯æ•°æ®ç‚¹)éšæœº80:20åˆ†å‰²æˆè®­ç»ƒå’ŒéªŒè¯æ•°æ®é›†ã€‚</p><figure class="iy iz ja jb fd jc er es paragraph-image"><div role="button" tabindex="0" class="jd je di jf bf jg"><div class="er es mg"><img src="../Images/5594938cd9eb06c5a011e2a9cb60dbba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HdJyMJv3ZalOKDri-oySRA.jpeg"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx">Sample training dataset for US addresses</figcaption></figure><p id="8191" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">ç„¶è€Œï¼Œè¿™ä¸ªåŸå§‹æ•°æ®é›†éœ€è¦åœ¨ç”¨äºè®­ç»ƒä¹‹å‰è½¬æ¢æˆspaCyçš„<a class="ae kw" href="https://spacy.io/api/docbin" rel="noopener ugc nofollow" target="_blank"> DocBin </a>æ ¼å¼ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªåœ¨æˆ‘ä»¬çš„<a class="ae kw" href="https://github.com/swapnil-saxena/address-parser/blob/main/training_data_prep.py" rel="noopener ugc nofollow" target="_blank">ä»£ç </a>ä¸­å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹çš„å¿«é€Ÿæ¼”ç»ƒã€‚</p><p id="44f0" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">I)æˆ‘ä»¬ä»é¢„å¤„ç†åœ°å€å­—ç¬¦ä¸²å¼€å§‹ï¼Œå»æ‰å¤šä½™çš„ç©ºæ ¼å’Œæ¢è¡Œç¬¦ã€‚æ ¹æ®æºæ•°æ®ï¼Œå¯èƒ½éœ€è¦æ·»åŠ ä¸€äº›é¢å¤–çš„æ•°æ®å¤„ç†æ­¥éª¤ã€‚</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="0bfd" class="ma ky hh kp b fi mb mc l md me">def massage_data(address):                           <br/>'''Pre process address string to remove new line characters, add comma punctuations etc.'''                           </span><span id="ee97" class="ma ky hh kp b fi mf mc l md me">cleansed_address1=re.sub(r'(,)(?!\s)',', ',address)                           cleansed_address2=re.sub(r'(\\n)',', ',cleansed_address1)                           cleansed_address3=re.sub(r'(?!\s)(-)(?!\s)',' - ',cleansed_address2)                           cleansed_address=re.sub(r'\.','',cleansed_address3)                           return cleansed_address</span></pre><p id="407e" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">ii)æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä»æˆ‘ä»¬çš„è®­ç»ƒ/éªŒè¯æ•°æ®é›†ä¸­å¯¼å‡ºæ¯ä¸ªåœ°å€ä¸²çš„å®ä½“è·¨åº¦(å®ä½“çš„å¼€å§‹å’Œç»“æŸä½ç½®)ã€‚</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="3952" class="ma ky hh kp b fi mb mc l md me">get_address_span(address=None,address_component=None,label=None):</span><span id="dd24" class="ma ky hh kp b fi mf mc l md me">'''Search for specified address component and get the span. Eg: get_address_span(address="221 B, Baker Street, London",address_component="221",label="BUILDING_NO") would return (0,2,"BUILDING_NO")'''</span><span id="b27c" class="ma ky hh kp b fi mf mc l md me"> if pd.isna(address_component) or str(address_component)=='nan':<br/>   pass                           <br/> else:                               <br/>   address_component1=re.sub('\.','',address_component)                               <br/>   address_component2=re.sub(r'(?!\s)(-)(?!\s)',' - ',address_component1)                               <br/>   span=re.search('\\b(?:'+address_component2+')\\b',address)                                                              <br/>   return (span.start(),span.end(),label)</span></pre><p id="a5d5" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">ä¸‹é¢æ˜¯ä¸€äº›æ•°æ®ç‚¹çš„æƒ…å†µ:</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="438a" class="ma ky hh kp b fi mb mc l md me">(<em class="ki">19 ST ANDREW ST, BULRINGTON, VT, 05401, , United States</em>, [(0, 2, BUILDING_NO), (3, 15, STREET_NAME), (33, 38, ZIP_CODE), (17, 27, CITY), (29, 31, STATE), (42, 55, COUNTRY)]) <br/>                                       <br/>(<em class="ki">2574 EAST 23RD STREE, CHATTANOOGA, TN 37404, United States</em>, [(0, 4, BUILDING_NO), (5, 20, STREET_NAME), (38, 43, ZIP_CODE), (22, 33, CITY), (35, 37, STATE), (45, 58, COUNTRY)])<br/>                                <br/>(<em class="ki">5931 W ANGELA RD, MEMPHIS, TN 38120, United States</em>, [(0, 4, BUILDING_NO), (5, 16, STREET_NAME), (30, 35, ZIP_CODE), (18, 25, CITY), (27, 29, STATE), (37, 50, COUNTRY)])<br/>                                            <br/>(<em class="ki">3812 MYERS STREET, GREENEVILLE, TN 37743, United States</em>, [(0, 4, BUILDING_NO), (5, 17, STREET_NAME), (35, 40, ZIP_CODE), (19, 30, CITY), (32, 34, STATE), (42, 55, COUNTRY)])</span></pre><p id="c65b" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">iii)æœ€åï¼Œæˆ‘ä»¬ç”¨è¿™ä¸ªæ•°æ®åˆå§‹åŒ–ä¸€ä¸ª<a class="ae kw" href="https://spacy.io/api/docbin" rel="noopener ugc nofollow" target="_blank"> DocBin </a>å¯¹è±¡ã€‚è¿™å°†ä»¥<a class="ae kw" href="https://github.com/swapnil-saxena/address-parser/tree/main/corpus/spacy-docbins" rel="noopener ugc nofollow" target="_blank">çš„å½¢å¼æŒä¹…åŒ–ã€‚spacy corpus </a>æ–‡ä»¶â€”â€”è®­ç»ƒå’ŒéªŒè¯æ•°æ®é›†å„ä¸€ä¸ªã€‚</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="fc2a" class="ma ky hh kp b fi mb mc l md me">def get_doc_bin(training_data,nlp):</span><span id="44d1" class="ma ky hh kp b fi mf mc l md me">'''Create DocBin object for building training/test corpus'''<br/># the DocBin will store the example documents<br/> <br/>  db = DocBin()<br/>  for text, annotations in training_data:<br/>    doc = nlp(text) #Construct a Doc object<br/>    ents = []<br/>    for start, end, label in annotations:<br/>        span = doc.char_span(start, end, label=label)<br/>        ents.append(span)<br/>    doc.ents = ents<br/>    db.add(doc)<br/>  return db<br/>.<br/>.<br/>.</span><span id="8206" class="ma ky hh kp b fi mf mc l md me">###### Training dataset prep ###########                       # Read the training dataset into pandas                       df_train=pd.read_csv(filepath_or_buffer="./corpus/dataset/us-train-dataset.csv",sep=",",dtype=str)                                               # Get entity spans                       <br/>df_entity_spans= create_entity_spans(df_train.astype(str),tag_list)                       training_data= df_entity_spans.values.tolist()<br/>.<br/>.</span><span id="d80a" class="ma ky hh kp b fi mf mc l md me">.<br/># Get &amp; Persist DocBin to disk                       <br/>doc_bin_train= get_doc_bin(training_data,nlp)                       doc_bin_train.to_disk("./corpus/spacy-docbins/train.spacy")                       ######################################</span></pre><p id="ace3" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated"><strong class="jl hi">è®­ç»ƒé…ç½®:</strong>åœ¨å¼€å§‹è®­ç»ƒè¿‡ç¨‹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å‡†å¤‡ä¸€ä¸ªåŒ…å«æ‰€æœ‰åŸºæœ¬å‚æ•°çš„è®­ç»ƒé…ç½®ã€‚è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæœ€å°çš„è®­ç»ƒæ¡†æ¶é…ç½®æ–‡ä»¶<a class="ae kw" href="https://github.com/swapnil-saxena/address-parser/blob/main/config/base_config.cfg" rel="noopener ugc nofollow" target="_blank">å¦‚ä¸‹ã€‚</a></p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="104d" class="ma ky hh kp b fi mb mc l md me">[components]<br/>[components.ner]<br/>factory="ner"</span><span id="8366" class="ma ky hh kp b fi mf mc l md me">[nlp]<br/>lang = "en"<br/>pipeline = ["ner"]</span><span id="cb1a" class="ma ky hh kp b fi mf mc l md me">[training]<br/>[training.batch_size]<br/><a class="ae kw" href="http://twitter.com/schedules" rel="noopener ugc nofollow" target="_blank">@schedules</a> = "compounding.v1"<br/>start = 4<br/>stop = 32<br/>compound = 1.001</span></pre><p id="bc51" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">é€šè¿‡ä¸Šè¿°é…ç½®ï¼Œæˆ‘ä»¬ä½¿ç”¨ç©ºç™½è‹±è¯­è¯­è¨€æ¨¡å‹å®šä¹‰äº†ä¸€ä¸ªåŸ¹è®­ç®¡é“ã€‚æˆ‘ä»¬çš„ç®¡é“åŒ…å«ä¸€ä¸ªå•ä¸€çš„æ¨¡å—ï¼Œå³NERå°†è¢«åŸ¹è®­ã€‚æˆ‘ä»¬è¿˜åˆå§‹åŒ–è®­ç»ƒæ‰¹é‡å¤§å°å’Œå…¶ä»–ç›¸å…³å‚æ•°ã€‚ç‚¹å‡»é˜…è¯»æ›´å¤šå…³äºåŸ¹è®­é…ç½®è®¾ç½®<a class="ae kw" href="https://spacy.io/usage/training#config" rel="noopener ugc nofollow" target="_blank">çš„ä¿¡æ¯ã€‚</a></p><p id="80c6" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬è¿è¡Œä¸‹é¢çš„æ§åˆ¶å°å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªæœ€ç»ˆçš„è¯¦ç»†é…ç½®æ–‡ä»¶ã€‚</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="5b2d" class="ma ky hh kp b fi mb mc l md me"><strong class="kp hi">python -m spacy init fill-config config\base_config.cfg config\config.cfg</strong></span></pre><p id="cfc6" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">è®©æˆ‘ä»¬å¿«é€Ÿæµè§ˆä¸€ä¸‹<a class="ae kw" href="https://github.com/swapnil-saxena/address-parser/blob/main/config/config.cfg" rel="noopener ugc nofollow" target="_blank">ç”Ÿæˆçš„config </a>æ–‡ä»¶ï¼Œå…¶ä¸­æœ‰æˆ‘ä»¬æ¨¡å‹å’ŒåŸ¹è®­è¿‡ç¨‹çš„å®Œæ•´è“å›¾ã€‚</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="0457" class="ma ky hh kp b fi mb mc l md me">.<br/>.<br/>.<br/>.</span><span id="e914" class="ma ky hh kp b fi mf mc l md me">[components]</span><span id="2f55" class="ma ky hh kp b fi mf mc l md me">[components.ner]<br/>factory = "ner"<br/>incorrect_spans_key = null<br/>moves = null<br/>update_with_oracle_cut_size = 100</span><span id="0259" class="ma ky hh kp b fi mf mc l md me">[components.ner.model]<br/><a class="ae kw" href="http://twitter.com/architectures" rel="noopener ugc nofollow" target="_blank"><strong class="kp hi">@architectures</strong></a><strong class="kp hi"> = "spacy.TransitionBasedParser.v2"</strong><br/>state_type = "ner"<br/>extra_state_tokens = false<br/>hidden_width = 64<br/>maxout_pieces = 2<br/>use_upper = true<br/>nO = null</span><span id="a6f6" class="ma ky hh kp b fi mf mc l md me">[components.ner.model.tok2vec]<br/><a class="ae kw" href="http://twitter.com/architectures" rel="noopener ugc nofollow" target="_blank"><strong class="kp hi">@architectures</strong></a><strong class="kp hi"> = "spacy.HashEmbedCNN.v2"</strong><br/>pretrained_vectors = null<br/>width = 96<br/>depth = 4<br/>embed_size = 2000<br/>window_size = 1<br/>maxout_pieces = 3<br/>subword_features = true</span><span id="4d88" class="ma ky hh kp b fi mf mc l md me">.<br/>.<br/>.<br/>.</span><span id="2b73" class="ma ky hh kp b fi mf mc l md me">[training.optimizer]<br/><a class="ae kw" href="http://twitter.com/optimizers" rel="noopener ugc nofollow" target="_blank"><strong class="kp hi">@optimizers</strong></a><strong class="kp hi"> = "Adam.v1"</strong><br/>beta1 = 0.9<br/>beta2 = 0.999<br/>L2_is_weight_decay = true<br/>L2 = 0.01<br/>grad_clip = 1.0<br/>use_averages = false<br/>eps = 0.00000001<br/><strong class="kp hi">learn_rate = 0.001</strong></span><span id="d7c2" class="ma ky hh kp b fi mf mc l md me">[training.score_weights]<br/>ents_f = 1.0<br/>ents_p = 0.0<br/>ents_r = 0.0<br/>ents_per_type = null</span><span id="835b" class="ma ky hh kp b fi mf mc l md me">.<br/>.<br/>.<br/>.<br/>.</span></pre><p id="7339" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°ä»¥spaCyå¼ºå¤§çš„é¢„è®­ç»ƒæ¨¡å‹å½¢å¼å®šä¹‰çš„<a class="ae kw" href="https://spacy.io/api/architectures#TransitionBasedParser" rel="noopener ugc nofollow" target="_blank">è§£æå™¨</a>å’Œ<a class="ae kw" href="https://spacy.io/api/architectures#HashEmbedCNN" rel="noopener ugc nofollow" target="_blank">æ ‡è®°å™¨</a>æ¶æ„ã€‚è‡³äºè®­ç»ƒå‚æ•°ï¼Œæˆ‘ä»¬æ³¨æ„åˆ°ä¼˜åŒ–å™¨é…ç½®ï¼Œå³<a class="ae kw" href="https://towardsdatascience.com/adam-latest-trends-in-deep-learning-optimization-6be9a291375c" rel="noopener" target="_blank"> Adam optimizer </a>ï¼Œå­¦ä¹ ç‡ï¼Œè¯„ä¼°é¢‘ç‡ï¼Œä»¥åŠè¦†ç›–çš„çºªå…ƒæ•°é‡ã€‚æ­£å¦‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚ä¸­çœ‹åˆ°çš„ï¼Œå…¶ä¸­ä¸€äº›é…ç½®å¯ä»¥åœ¨è®­ç»ƒè¿è¡ŒæœŸé—´è¢«è¦†ç›–ã€‚</p><p id="7485" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated"><strong class="jl hi">è®­ç»ƒè¿‡ç¨‹:</strong>å¥½äº†ï¼Œä»£ç å’Œè®¾ç½®çš„ä¸œè¥¿å·²ç»å¤Ÿå¤šäº†ï¼è®©æˆ‘ä»¬å¼€å§‹æˆ‘ä»¬çš„åŸ¹è®­ã€‚æˆ‘ä»¬æ‹¥æœ‰æœ€å°‘çš„èµ„æº(æ²¡æœ‰GPUï¼Œä½†æœ‰ä¸€ä¸ªé€‚ä¸­çš„å››æ ¸è‹±ç‰¹å°”i7 CPU&amp;16gbå†…å­˜ï¼)ï¼Œæˆ‘ä»¬å‘å‡º<a class="ae kw" href="https://spacy.io/api/cli#train" rel="noopener ugc nofollow" target="_blank"> train </a>å‘½ä»¤ï¼Œè¿™å°†è§¦å‘è®­ç»ƒè¿‡ç¨‹ï¼Œåœ¨å¤§çº¦ä¸€åˆ†é’Ÿå†…ç”Ÿæˆæˆ‘ä»¬çš„æ¨¡å‹ï¼</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="ddb4" class="ma ky hh kp b fi mb mc l md me"><strong class="kp hi">python -m spacy train config\config.cfg --paths.train corpus\spacy-docbins\train.spacy --paths.dev corpus\spacy-docbins\test.spacy --output output\models --training.eval_frequency 10 --training.max_steps 300</strong></span><span id="7e5d" class="ma ky hh kp b fi mf mc l md me">â„¹ Saving to output directory: output\models<br/>â„¹ Using CPU</span><span id="0919" class="ma ky hh kp b fi mf mc l md me">=========================== Initializing pipeline ===========================<br/>[2021-09-11 18:30:04,925] [INFO] Set up nlp object from config<br/>[2021-09-11 18:30:04,925] [INFO] Pipeline: ['ner']<br/>[2021-09-11 18:30:04,941] [INFO] Created vocabulary<br/>[2021-09-11 18:30:04,941] [INFO] Finished initializing nlp object<br/>[2021-09-11 18:30:05,141] [INFO] Initialized pipeline components: ['ner']<br/>âœ” Initialized pipeline</span><span id="348f" class="ma ky hh kp b fi mf mc l md me">============================= Training pipeline =============================<br/>â„¹ Pipeline: [ 'ner']<br/>â„¹ Initial learn rate: 0.001<br/>E    #       LOSS NER  ENTS_F  ENTS_P  ENTS_R  SCORE<br/>---  ------  --------  ------  ------  ------  ------<br/>  0       0     62.71    6.18    4.13   12.21    0.06<br/>  0      10    808.79    0.00    0.00    0.00    0.00<br/>  0      20    468.03   23.00   33.33   17.56    0.23<br/>  1      30    286.96   44.55   58.75   35.88    0.45<br/>  1      40    348.01   75.10   75.38   74.81    0.75<br/>  2      50    254.44   76.56   78.40   74.81    0.77<br/>  2      60    244.69   82.11   87.83   77.10    0.82<br/>  3      70    115.05   91.12   92.19   90.08    0.91<br/>  3      80     61.84   94.57   96.06   93.13    0.95<br/>  4      90     99.36   98.47   98.47   98.47    0.98<br/>  4     100     29.16   98.47   98.47   98.47    0.98<br/>  5     110     34.48   98.08   98.46   97.71    0.98<br/>  5     120     27.44   98.08   98.46   97.71    0.98<br/>  6     130     16.41   98.08   98.46   97.71    0.98<br/>  6     140     15.01   98.85   99.23   98.47    0.99<br/>  7     150      5.20  100.00  100.00  100.00    1.00<br/>  7     160      9.05  100.00  100.00  100.00    1.00<br/>  8     170      2.39  100.00  100.00  100.00    1.00<br/>  9     180      0.77  100.00  100.00  100.00    1.00<br/>  9     190      3.11  100.00  100.00  100.00    1.00<br/> 10     200      3.14  100.00  100.00  100.00    1.00<br/> 10     210      1.31  100.00  100.00  100.00    1.00<br/> 11     220      3.40  100.00  100.00  100.00    1.00<br/> 11     230      0.05  100.00  100.00  100.00    1.00<br/> 12     240      1.55  100.00  100.00  100.00    1.00<br/> 13     250      1.40  100.00  100.00  100.00    1.00<br/> 13     260      0.02  100.00  100.00  100.00    1.00<br/> 14     270      0.55  100.00  100.00  100.00    1.00<br/> 14     280      0.82  100.00  100.00  100.00    1.00<br/> 15     290      3.63  100.00  100.00  100.00    1.00<br/> 16     300      0.00  100.00  100.00  100.00    1.00<br/>âœ” Saved pipeline to output directory<br/>output\models\model-last</span></pre><p id="8a24" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">è®©æˆ‘ä»¬æµè§ˆä¸€ä¸‹ä¸Šé¢çš„æ§åˆ¶å°è¾“å‡ºã€‚trainå‘½ä»¤å¯åŠ¨spaCyçš„è®­ç»ƒå¾ªç¯ï¼Œè¯¥å¾ªç¯ç”Ÿæˆç®¡é“ï¼Œåˆå§‹åŒ–æ¨¡å‹æƒé‡ï¼Œå¹¶åå¤æ‰§è¡Œè°ƒæ•´æƒé‡ã€æ£€æŸ¥æŸå¤±å’Œæ ¹æ®éªŒè¯æ•°æ®é›†è¯„ä¼°æ¨¡å‹å‡†ç¡®æ€§çš„å¾ªç¯ã€‚è¯·æ³¨æ„æ€§èƒ½æŒ‡æ ‡:<a class="ae kw" href="https://en.wikipedia.org/wiki/Precision_and_recall" rel="noopener ugc nofollow" target="_blank">ç²¾åº¦ã€å¬å›ç‡å’Œfå€¼</a>å¦‚ä½•éšç€æ¯ä¸ªå¾ªç¯å‘å®Œç¾çš„100åˆ†ç§»åŠ¨ã€‚ç„¶è€Œï¼Œå¯¹äºæ›´å¤§å’Œæ›´å¤šæ ·åŒ–çš„è®­ç»ƒ/éªŒè¯é›†ï¼Œè¿™äº›æŒ‡æ ‡é€šå¸¸ä¼šå‘æ»¡åˆ†é æ‹¢ï¼Œä½†ä¸ä¸€å®šä¼šè¾¾åˆ°æ»¡åˆ†ã€‚</p><p id="ce0a" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">åœ¨è¾¾åˆ°å¤§çº¦300æ­¥çš„é…ç½®é˜ˆå€¼ä¹‹åï¼Œè®­ç»ƒè¿‡ç¨‹åœæ­¢ï¼Œå¹¶ä¸”ä¸¤ä¸ªæ¨¡å‹å›¾åƒè¢«ä¿å­˜åˆ°ç£ç›˜:<a class="ae kw" href="https://github.com/swapnil-saxena/address-parser/tree/main/output/models/model-best" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hi">ã€æœ€ä½³ã€‘</strong> </a> <strong class="jl hi"> </strong>(å…·æœ‰é’ˆå¯¹éªŒè¯çš„æœ€å¤§åˆ†æ•°)å’Œ<a class="ae kw" href="https://github.com/swapnil-saxena/address-parser/tree/main/output/models/model-last" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hi">ã€æœ€å</strong> </a> <strong class="jl hi"> </strong>(åœ¨æœ€åä¸€ä¸ªå†å…ƒå‘¨æœŸä¸­è·å¾—)ã€‚</p><p id="d24b" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated"><strong class="jl hi">é¢„æµ‹:</strong>çœŸç›¸å¤§ç™½çš„æ—¶åˆ»åˆ°äº†ï¼è®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬çš„æ¨¡å‹å¦‚ä½•åœ¨å‡ ä¸ª<em class="ki">çœ‹ä¸è§çš„</em> <strong class="jl hi"> </strong>åœ°å€ä¸²ä¸Šæ‰§è¡Œã€‚</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="383c" class="ma ky hh kp b fi mb mc l md me">import spacy<br/><br/>nlp=spacy.load("output\models\model-best")<br/><br/>address_list=["130 W BOSE ST STE 100, PARK RIDGE, IL, 60068, USA",<br/>              "8311 MCDONALD RD, HOUSTON, TX, 77053-4821, USA",<br/>              "PO Box 317, 4100 Hwy 20 E Ste 403, NICEVILLE, FL, 32578-5037, USA",<br/>              "C/O Elon Musk Innovations Inc, 1548 E Florida Avenue, Suite 209, TAMPA, FL, 33613, USA",<br/>              "Seven Edgeway Plaza, C/O Mac Dermott Inc, OAKBROOK TERRACE, IL, 60181, USA"]<br/><br/>for address in address_list:<br/>    doc=nlp(address)<br/>    ent_list=[(ent.text, ent.label_) for ent in doc.ents]<br/>    print("Address string -&gt; "+address)<br/>    print("Parsed address -&gt; "+str(ent_list))<br/>    print("******")</span><span id="e094" class="ma ky hh kp b fi mf mc l md me">###Prediction output###</span><span id="ac2e" class="ma ky hh kp b fi mf mc l md me"><strong class="kp hi">Address string -&gt; 130 W BOSE ST STE 100, PARK RIDGE, IL, 60068, USA<br/>Parsed address -&gt; [('130', 'BUILDING_NO'), ('W BOSE ST', 'STREET_NAME'), ('PARK RIDGE', 'CITY'), ('IL', 'STATE'), ('60068', 'ZIP_CODE'), ('USA', 'COUNTRY')]</strong><br/>******<br/><strong class="kp hi">Address string -&gt; 8311 MCDONALD RD, HOUSTON, TX, 77053-4821, USA<br/>Parsed address -&gt; [('8311', 'BUILDING_NO'), ('MCDONALD RD', 'STREET_NAME'), ('HOUSTON', 'CITY'), ('TX', 'STATE'), ('77053-4821', 'ZIP_CODE'), ('USA', 'COUNTRY')]</strong><br/>******<br/><strong class="kp hi">Address string -&gt; PO Box 317, 4100 Hwy 20 E Ste 403, NICEVILLE, FL, 32578-5037, USA, US<br/>Parsed address -&gt; [('4100', 'BUILDING_NO'), ('Hwy 20 E', 'STREET_NAME'), ('NICEVILLE', 'CITY'), ('FL', 'STATE'), ('32578-5037', 'ZIP_CODE'), ('US', 'COUNTRY')]</strong><br/>******<br/><strong class="kp hi">Address string -&gt; C/O Elon Musk Innovations Inc, 1548 E Florida Avenue, Suite 209, TAMPA, FL, 33613, USA<br/>Parsed address -&gt; [('C/O Elon Musk Innovations Inc', 'RECIPIENT'), ('1548', 'BUILDING_NO'), ('E Florida Avenue', 'STREET_NAME'), ('TAMPA', 'CITY'), ('FL', 'STATE'), ('33613', 'ZIP_CODE'), ('USA', 'COUNTRY')]</strong><br/>******<br/><strong class="kp hi">Address string -&gt; Seven Edgeway Plaza, C/O Mac Dermott Inc, OAKBROOK TERRACE, IL, 60181, USA<br/>Parsed address -&gt; [('Seven Edgeway Plaza', 'STREET_NAME'), ('C/O Mac Dermott Inc', 'RECIPIENT'), ('OAKBROOK TERRACE', 'CITY'), ('IL', 'STATE'), ('60181', 'ZIP_CODE'), ('USA', 'COUNTRY')]</strong><br/>******</span></pre><p id="aca9" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">ä¸€ç‚¹éƒ½ä¸å·®ï¼ğŸ˜€é™¤äº†ä¸€äº›åœ°å€æ¨¡å¼ä¹‹å¤–ï¼Œæˆ‘ä»¬çš„æ¨¡å‹ç›¸å½“å¥½åœ°è¯†åˆ«äº†åœ°å€ä¸²ä¸­çš„å¤§å¤šæ•°å®ä½“ã€‚éšç€æˆ‘ä»¬æ·»åŠ æ›´å¤šçš„è®­ç»ƒç¤ºä¾‹æ¥æ›´æ–°æˆ‘ä»¬çš„æ¨¡å‹ï¼Œå¹¶å¼€å§‹æå–å…¶ä»–åœ°å€å®ä½“(æ¯”å¦‚å…¬å¯“å·ã€é‚®æ”¿ä¿¡ç®±ç­‰)ã€‚)ï¼Œæˆ‘ä»¬ä¼šè§‚å¯Ÿåˆ°æ›´å¥½çš„é¢„æµ‹ç»“æœã€‚</p></div><div class="ab cl mh mi go mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ha hb hc hd he"><h1 id="5779" class="kx ky hh bd kz la mo lc ld le mp lg lh io mq ip lj ir mr is ll iu ms iv ln lo bi translated"><strong class="ak">é¢å¤–çš„å¥½å¤„:å°†NERä¸æ¨¡å¼åŒ¹é…ç»“åˆèµ·æ¥</strong></h1><p id="1aa2" class="pw-post-body-paragraph jj jk hh jl b jm lp ij jo jp lq im jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated">è™½ç„¶ä¸€ä¸ªè®­ç»ƒæœ‰ç´ çš„æ¨¡å‹è‚¯å®šä¼šæé«˜æˆ‘ä»¬çš„åœ°å€æ•°æ®è§£æèƒ½åŠ›ï¼Œä½†æˆ‘ä»¬ä»ç„¶ä¼šåœ¨è¿™é‡Œæˆ–é‚£é‡Œçœ‹åˆ°ä¸€äº›å¼‚æƒ³å¤©å¼€çš„é¢„æµ‹ã€‚è™½ç„¶å¯èƒ½å¹¶ä¸æ€»æ˜¯æœ‰ä¸€ä¸ªç®€å•çš„æ–¹æ³•æ¥è§£å†³è¿™äº›é—®é¢˜ï¼Œä½†æ˜¯spaCyç¡®å®æä¾›äº†é€šè¿‡ä¸€å¥—åŸºäº<a class="ae kw" href="https://spacy.io/usage/rule-based-matching" rel="noopener ugc nofollow" target="_blank">æ¨¡å¼çš„è§„åˆ™</a>æ¥åŠ å¼ºæ¨¡å‹ï¼Œé€šè¿‡å…¶<a class="ae kw" href="https://spacy.io/api/entityruler" rel="noopener ugc nofollow" target="_blank">å®ä½“ç»Ÿæ²»è€…</a>æ¥è¦†ç›–ã€‚</p><p id="7e33" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">è®©æˆ‘ä»¬ä¸ºæˆ‘ä»¬çš„è§£æå™¨è¿è¡Œå¦ä¸€ä¸ªåœ°å€å­—ç¬¦ä¸²ã€‚</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="60c4" class="ma ky hh kp b fi mb mc l md me">address="C/o John Doe LLC, 111 8th Avenue Ste 1301, Tulsa, Oklahoma, 74136â€“1922, USA"<br/>doc=nlp(address)<br/>ent_list=[(ent.text, ent.label_) for ent in doc.ents]<br/>print("Address string -&gt; "+address)<br/>print("Parsed address -&gt; "+str(ent_list))<br/>#######################</span><span id="1770" class="ma ky hh kp b fi mf mc l md me"><strong class="kp hi">Address string -&gt; C/o John Doe LLC, 111 8th Avenue Ste 1301, Tulsa, Oklahoma, 74136â€“1922, USA<br/>Parsed address -&gt; [('C/o John Doe LLC', 'RECIPIENT'), ('111', 'BUILDING_NO'), ('8th Avenue', 'STREET_NAME'), ('Tulsa', 'CITY'), <em class="ki">('Oklahoma', 'CITY')</em>, ('74136â€“1922', 'ZIP_CODE'), ('USA', 'COUNTRY')]</strong></span></pre><p id="9d29" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">ç›¸å½“ä¸ç¨³å®šçš„æ˜¯ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¿„å…‹æ‹‰ä½•é©¬å·è¢«ç¡®å®šä¸ºä¸€ä¸ªåŸå¸‚ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå·ï¼æˆ‘ä»¬æ¨æ–­è¿™æ˜¯ä½¿ç”¨è®­ç»ƒåœ°å€æ•°æ®çš„ç»“æœï¼Œè®­ç»ƒåœ°å€æ•°æ®åªæœ‰ä¸¤ä¸ªå­—æ¯çš„å·ä»£ç ï¼Œè€Œæ²¡æœ‰æ‰©å±•çš„å·åã€‚è§£å†³è¿™ä¸ªé—®é¢˜çš„ä¸€ä¸ªæ–¹æ³•æ˜¯åœ¨è®­ç»ƒæ•°æ®ä¸­æ·»åŠ æ›´å¤šè¿™æ ·çš„æ¨¡å¼ã€‚</p><p id="513f" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">æˆ–è€…ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºåŸºäºæ¨¡å¼çš„æ­£åˆ™è¡¨è¾¾å¼è§„åˆ™æ¥å¤„ç†è¿™äº›é—®é¢˜ã€‚è®©æˆ‘ä»¬ç”¨ç¾å›½æ‰€æœ‰å·çš„åˆ—è¡¨åˆ›å»ºä¸€ä¸ª<a class="ae kw" href="https://github.com/swapnil-saxena/address-parser/blob/main/corpus/rules/entity_ruler_patterns.jsonl" rel="noopener ugc nofollow" target="_blank">æ¨¡å¼æ–‡ä»¶</a>ã€‚</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="0676" class="ma ky hh kp b fi mb mc l md me">{"label":"STATE","pattern":[{"LOWER":"alabama"}]}<br/>{"label":"STATE","pattern":[{"LOWER":"alaska"}]}<br/>{"label":"STATE","pattern":[{"LOWER":"arizona"}]}<br/>{"label":"STATE","pattern":[{"LOWER":"arkansas"}]}<br/>{"label":"STATE","pattern":[{"LOWER":"california"}]}<br/>{"label":"STATE","pattern":[{"LOWER":"colorado"}]}<br/>{"label":"STATE","pattern":[{"LOWER":"connecticut"}]}<br/>.<br/>.<br/>.</span></pre><p id="b39d" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">ä¸ºäº†åœ¨æˆ‘ä»¬çš„æ¨¡å‹ä¸­ä½¿ç”¨è¿™äº›æ¨¡å¼è§„åˆ™ï¼Œæˆ‘ä»¬å°†ä¿®æ”¹æˆ‘ä»¬çš„<a class="ae kw" href="https://github.com/swapnil-saxena/address-parser/blob/main/config/base_config_er.cfg" rel="noopener ugc nofollow" target="_blank">è®­ç»ƒé…ç½®</a>æ¥æ·»åŠ <strong class="jl hi">å®ä½“æ ‡å°º</strong>ä½œä¸ºä¸€ä¸ªé™„åŠ æ¨¡å—ä»¥åŠæ¨¡å¼æ–‡ä»¶è¯»å–å™¨è®¾ç½®ã€‚</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="2331" class="ma ky hh kp b fi mb mc l md me">.<br/>.<br/>[components.ner]<br/>factory="ner"</span><span id="ba3e" class="ma ky hh kp b fi mf mc l md me"><strong class="kp hi">[components.entity_ruler]<br/>factory="entity_ruler"</strong></span><span id="cb31" class="ma ky hh kp b fi mf mc l md me"><strong class="kp hi">[initialize]<br/>[initialize.components]<br/>[initialize.components.entity_ruler]<br/>[initialize.components.entity_ruler.patterns]<br/></strong><a class="ae kw" href="http://twitter.com/readers" rel="noopener ugc nofollow" target="_blank"><strong class="kp hi">@readers</strong></a><strong class="kp hi"> = "srsly.read_jsonl.v1"<br/>path = "corpus\rules\entity_ruler_patterns.jsonl</strong></span><span id="73bd" class="ma ky hh kp b fi mf mc l md me">[nlp]<br/>lang = "en"<br/>pipeline = ["ner",<strong class="kp hi">"entity_ruler"</strong>]<br/>.<br/>.</span></pre><p id="d83d" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">æˆ‘ä»¬éµå¾ªç›¸åŒçš„è¿‡ç¨‹ï¼Œå†æ¬¡ç”Ÿæˆå®Œæ•´çš„<a class="ae kw" href="https://github.com/swapnil-saxena/address-parser/blob/main/config/config_er.cfg" rel="noopener ugc nofollow" target="_blank">é…ç½®æ–‡ä»¶</a>ï¼Œå¹¶é€šè¿‡å®ƒè¿›è¡Œè®­ç»ƒä»¥ç”Ÿæˆè§„åˆ™å¢å¼ºé¢„æµ‹<a class="ae kw" href="https://github.com/swapnil-saxena/address-parser/tree/main/output/models_er" rel="noopener ugc nofollow" target="_blank">æ¨¡å‹</a>ã€‚</p><p id="99e8" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">è®©æˆ‘ä»¬çœ‹çœ‹ç»“æœã€‚</p><pre class="iy iz ja jb fd lw kp lx ly aw lz bi"><span id="aa71" class="ma ky hh kp b fi mb mc l md me">nlp=spacy.load("output\models_er\model-best")<br/><br/>doc=nlp(address)<br/>ent_list=[(ent.text, ent.label_) for ent in doc.ents]<br/>print("Address string -&gt; "+address)<br/>print("Parsed address -&gt; "+str(ent_list))</span><span id="78a1" class="ma ky hh kp b fi mf mc l md me">###################<br/><strong class="kp hi">Address string -&gt; C/o John Doe LLC, 111 8th Avenue Ste 1301, Tulsa, Oklahoma, 74136â€“1922, USA<br/>Parsed address -&gt; [('C/o John Doe LLC', 'RECIPIENT'), ('111', 'BUILDING_NO'), ('8th Avenue', 'STREET_NAME'), ('Tulsa', 'CITY'), <em class="ki">('Oklahoma', 'STATE')</em>, ('74136â€“1922', 'ZIP_CODE'), ('USA', 'COUNTRY')]</strong></span></pre><p id="3b28" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated"><strong class="jl hi">å®Œç¾ï¼</strong>é€šè¿‡ä»”ç»†æ·»åŠ æ›´å¤šè¿™æ ·çš„è§„åˆ™(å¿ã€å›½å®¶å‘½åæ¨¡å¼)ï¼Œæˆ‘ä»¬å¯ä»¥è¿›ä¸€æ­¥æé«˜æ¨¡å‹çš„å‡†ç¡®æ€§ã€‚</p></div><div class="ab cl mh mi go mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ha hb hc hd he"><h1 id="b185" class="kx ky hh bd kz la mo lc ld le mp lg lh io mq ip lj ir mr is ll iu ms iv ln lo bi translated"><strong class="ak">æœ€ç»ˆæƒ³æ³•</strong></h1><p id="d7ca" class="pw-post-body-paragraph jj jk hh jl b jm lp ij jo jp lq im jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated">ä½¿ç”¨spaCyå¼ºå¤§çš„NLP-NERåŠŸèƒ½ï¼ŒåŠ ä¸Šå…¶ç‹¬ç‰¹çš„è§„åˆ™å¼•æ“äº§å“ï¼Œæˆ‘ä»¬å·²ç»å±•ç¤ºäº†å‡ ä¹é›¶ä»£ç å’Œå¾ˆå¤§ç¨‹åº¦ä¸Šé…ç½®é©±åŠ¨çš„è®­ç»ƒè¿‡ç¨‹æ˜¯å¤šä¹ˆå®¹æ˜“ï¼)å’Œç»æµä¸Š(æ— GPUéœ€æ±‚)ï¼Œå¯ä»¥æ„å»ºä¸€ä¸ªæœ€å°çš„åœ°å€è§£æå®ç°ã€‚</p><p id="ee62" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">è™½ç„¶è¿™ç§å®ç°æœ¬èº«ä¸è¶³ä»¥å¤„ç†å„ç§å„æ ·çš„åœ°å€æ•°æ®è¯­ä¹‰ï¼Œä½†æ˜¯ä¸é€šè¿‡çº¯åŸºäºè§„åˆ™çš„è§£ææ–¹æ³•å·¥ä½œç›¸æ¯”ï¼Œè‰¯å¥½çš„æ•°æ®é¢„å¤„ç†ç­–ç•¥ä¸æ›´å¤§çš„ã€ä¸åŒçš„è®­ç»ƒé›†ç›¸ç»“åˆæœ‰æœ›äº§ç”Ÿæ›´å¥½çš„ç»“æœã€‚</p><p id="3d06" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated">åœ¨æœ¬æ¡ˆä¾‹ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬å°†èŒƒå›´ä»…é™äºç¾å›½åœ°å€ã€‚ç„¶è€Œï¼Œåœ°å€è§£æé—®é¢˜çš„å¦ä¸€ä¸ªæœ‰è¶£çš„æ‰©å±•æ˜¯ä»ä¸åŒåœ°ç†ä½ç½®çš„æ··åˆæ•°æ®é›†ä¸­è§£æåœ°å€çš„å›½å®¶(åœ¨è¿è¡Œç‰¹å®šäºå›½å®¶çš„è§£æå™¨ä¹‹å‰)ã€‚ä¹Ÿè®¸ï¼Œä¸€ä¸ªåˆé€‚çš„ç”¨ä¾‹å¯ä»¥ç”¨spaCyçš„tokenizerå’Œ<a class="ae kw" href="https://scikit-learn.org/stable/modules/multiclass.html" rel="noopener ugc nofollow" target="_blank"> sklearnçš„multiclass </a>ç®—æ³•æ¥æ¢ç´¢ã€‚ä½†æ˜¯ï¼Œè®©æˆ‘ä»¬æŠŠå®ƒç•™åˆ°å¦ä¸€ç¯‡åšæ–‡ä¸­å»å§ï¼</p></div><div class="ab cl mh mi go mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ha hb hc hd he"><h1 id="eba1" class="kx ky hh bd kz la mo lc ld le mp lg lh io mq ip lj ir mr is ll iu ms iv ln lo bi translated">èµ„æº</h1><p id="72b5" class="pw-post-body-paragraph jj jk hh jl b jm lp ij jo jp lq im jr js lr ju jv jw ls jy jz ka lt kc kd ke ha bi translated"><a class="ae kw" href="https://spacy.io/usage/spacy-101" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hi">ç©ºé—´101:ä½ éœ€è¦çŸ¥é“çš„ä¸€åˆ‡</strong> </a></p><p id="a69c" class="pw-post-body-paragraph jj jk hh jl b jm jn ij jo jp jq im jr js jt ju jv jw jx jy jz ka kb kc kd ke ha bi translated"><a class="ae kw" href="https://github.com/swapnil-saxena/address-parser" rel="noopener ugc nofollow" target="_blank"> <strong class="jl hi"> GitHubæ¡ˆä¾‹åº“</strong> </a></p></div></div>    
</body>
</html>