<html>
<head>
<title>Attribute-Based Access Control in a Microservices Architecture</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">微服务架构中基于属性的访问控制</h1>
<blockquote>原文：<a href="https://medium.com/globant/attribute-based-access-control-in-a-microservices-architecture-7c68f633b2d3?source=collection_archive---------0-----------------------#2022-02-08">https://medium.com/globant/attribute-based-access-control-in-a-microservices-architecture-7c68f633b2d3?source=collection_archive---------0-----------------------#2022-02-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="d119" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">访问控制是任何公司安全基础设施的基本要素。每个安全官都希望在不损害公司工作流程的情况下应用少特权、零信任、职责分离和其他最佳实践的原则。有几种组织访问管理系统的方法。在这篇博客中，我们分析了两种最流行的访问控制模型:基于角色的和基于属性的。我们将讨论基于属性的访问控制实施挑战，并通过POC实施进行演练。</p><p id="754b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">什么是基于角色的访问控制(RBAC)？</p><p id="1dcb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">基于角色的访问控制(RBAC)是一种基于定义组织内员工角色和相应权限的访问控制方法。这个模型的思想是给每个员工分配一个角色。每个角色都有一组权限和限制。只有当员工在系统中的角色具有相关权限时，员工才能访问对象和执行操作。</p><p id="9f9a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例如，公司的会计应该被允许处理财务信息，但不应该接触客户联系信息或信用卡数据。</p><p id="0b3f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一个用户可能被分配一个或多个角色。当一个新员工来到你的公司，很容易给他们分配一个角色。当有人离开公司时，你不需要改变角色参数或中心政策。</p><p id="be8f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们考虑一下基于角色的访问控制方法的主要组件:</p><p id="8f2d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">●用户有权访问系统的个人(拥有UID)</p><p id="91f1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">●角色一个指定的工作职能(表明权力级别)</p><p id="8714" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">●等同于访问权限的权限</p><p id="ce92" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">●会话在工作时间的上下文中，用户和用户被分配到的一组角色之间的映射</p><p id="6514" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">●需要访问权限的系统资源</p><p id="0765" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">●操作受保护网络中的任何动作</p><p id="e247" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">RBAC的基本规则是:</p><p id="4e20" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">●只有为主体分配了角色，用户才能执行操作。</p><p id="38fd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">●识别和认证不被认为是操作。</p><p id="e67d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">●所有的用户活动都是通过运营来进行的。</p><p id="b193" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">什么是基于属性的访问控制(ABAC) </strong>？</p><p id="f998" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">基于属性的访问控制是从RBAC发展而来的一种模型。该模型基于为系统的任何元素建立一组属性。中央策略定义了执行任何操作所需的用户和对象属性的组合。让我们考虑一下ABAC模型的主要组成部分:</p><p id="fbf8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们考虑一下ABAC车型的<strong class="ig hi">主要部件</strong>:</p><ul class=""><li id="588a" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">属性—网络中任何元素的特征。属性可以定义:</li><li id="38e0" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">用户</strong>特征——员工职位、部门、IP地址、权限等级等。</li><li id="0840" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">物体</strong>特征——类型、创建者、灵敏度、要求的间隙等级等。</li><li id="24c7" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">动作类型</strong> —读取、写入、编辑、复制、粘贴等。</li><li id="ff0c" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">环境</strong>特征——时间、星期几、地点等。</li><li id="2434" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">主体</strong> —网络中任何可以执行动作的用户或资源；一个主题被分配属性来定义它的许可级别</li><li id="b498" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">对象</strong> —网络中存储的任何数据；对象被赋予属性来描述和识别它们</li><li id="26f0" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">操作</strong> —网络中任何主体采取的任何行动</li><li id="2bce" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">策略</strong> —允许或限制您的信息检索系统中的任何操作的一组规则；规则是基于任何元素(用户、资源、环境)属性的“IF/THEN”语句</li></ul><p id="8e45" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> ABAC建筑:</strong></p><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es jq"><img src="../Images/5b2623fb16c006da51229794fa188d99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/format:webp/1*IyR282sej50VY8VBxcLxXg.png"/></div><figcaption class="jy jz et er es ka kb bd b be z dx">ABAC Architecture</figcaption></figure><p id="8358" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这幅图强调了ABAC是如何工作的:你有一个拦截器或执行点(PEP)的概念，它拦截用户和应用程序之间的流。这个执行点将检查用户是否可以访问他们想要访问的任何东西(数据、API调用、小部件……)。这个想法是，PEP是你要保护的地方，但决策是集中的，这将给予什么</p><p id="6cc9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你的<strong class="ig hi">一致</strong>授权。您可以拥有针对SPA和API的pep，他们可以一致地实施相同的授权策略。</p><p id="187c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">PDP或策略决策点是处理授权请求并根据您之前编写的一组策略对其进行评估的点。编写的语言策略通常是<a class="ae kc" href="https://stackoverflow.com/questions/tagged/alfa" rel="noopener ugc nofollow" target="_blank"> alfa </a>或<a class="ae kc" href="https://stackoverflow.com/questions/tagged/xacml" rel="noopener ugc nofollow" target="_blank"> xacml </a>。</p><p id="c87e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">PIP(策略信息点)是您的数据源和用户目录(AD、DB……)的抽象表示，您可以在其中存储有关用户和资源的附加信息。它们有助于做出正确的决定。</p><p id="593e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">基于角色的访问控制(RBAC)与基于属性的访问控制(ABAC) </strong></p><p id="f289" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们比较一下这两种流行的方法——基于角色的访问控制和基于属性的访问控制——以确定各自的优缺点。</p><h1 id="f664" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">RBAC赞成和反对</h1><p id="b834" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">RBAC是限制访问最流行的方法。这种模式的主要优势在于，公司不再需要以个人为基础授权或撤销访问，而是根据用户的角色将他们聚集在一起。在中小型公司中建立一套角色并不具有挑战性。另一方面，在大型企业中建立这样的系统并不容易。</p><p id="d9e4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">RBAC模型有几个限制。在用户开始工作之前，您不能使用系统未知的参数来设置规则。权限只能分配给用户角色，不能分配给对象和操作。此外，使用RBAC，您可以限制对系统中某些操作的访问，但不能限制对某些数据的访问。</p><h1 id="db16" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">ABAC赞成和反对</h1><p id="9baf" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">ABAC 的关键<strong class="ig hi">优势在于，它不是基于用户角色而是基于每个系统组件的属性授予访问权限。这样，您可以描述任何复杂性的业务规则。即使您需要使某些数据只能在工作时间访问，也可以通过一个简单的策略轻松实现。最重要的是，ABAC规则可以评估尚未被授权系统编目的主题和资源的属性。</strong></p><p id="f74e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">至于<strong class="ig hi"> ABAC限制</strong>，由于必须指定和维护策略的方式，这种类型的系统很难配置。很难执行事前审计并确定特定用户可用的权限。不可能确定任何给定员工职位的风险暴露。</p><p id="bec3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Gartner预测，到2020年，70%的组织将使用ABAC，包括RBAC和ABAC</p><p id="3043" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">公司通常从实施平面RBAC开始。这种模式更容易设置和维护。随着组织的发展和管理更加敏感的数据，他们意识到需要更复杂的访问控制系统。RBAC和ABAC可以一起使用，RBAC做粗略的工作，ABAC用更精细的过滤来补充。</p><p id="4003" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">三种RBAC-安方法处理角色和属性之间的关系:</p><ul class=""><li id="adc4" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi">以属性为中心</strong>。角色成为其中一个用户属性的名称。它类似于一个职位名称。在这样的模型中，“角色”属性用于标记某个职位所需的一组属性。</li><li id="557c" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">以角色为中心</strong>。添加属性是为了约束角色。在这样的模型中，属性可以减少用户可用的权限。这种方法增强了数据的安全性。</li><li id="ab79" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">动态角色</strong>。诸如一天中的时间之类的属性用于确定主体的角色。在某些情况下，用户的角色可以完全由动态属性决定。</li></ul><p id="b980" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> ABAC微传动样品应用</strong></p><p id="24f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">开发环境</strong></p><ul class=""><li id="64df" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><a class="ae kc" href="https://dotnet.microsoft.com/download" rel="noopener ugc nofollow" target="_blank">。网芯2.2 SDK </a></li><li id="8eaa" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><a class="ae kc" href="https://visualstudio.microsoft.com/downloads/" rel="noopener ugc nofollow" target="_blank"> Visual Studio。Net 2017 </a></li></ul><p id="d706" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">技术</strong></p><ul class=""><li id="780b" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">C#。网</li><li id="1f8c" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">ASP。NET WEB API核心</li><li id="46ab" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">Azure云服务</li></ul><p id="e685" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">使用的开源工具</strong></p><ul class=""><li id="6cfc" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">Ocelot(用于API网关聚合)</li><li id="6830" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">Swashbuckle(用于API文档)</li></ul><p id="b547" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> WEBAPI端点</strong></p><p id="8ef8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该应用程序在API网关中配置了四个API端点，以演示启用了基于令牌的安全选项的特性。这些路由向客户端应用程序公开，以使用后端服务。</p><p id="859a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">通过API网关配置和访问终端</strong></p><ol class=""><li id="a387" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lg ji jj jk bi translated"><strong class="ig hi">“/用户/认证”——</strong>认证用户并颁发令牌</li><li id="7ef8" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated"><strong class="ig hi"> "/Products" </strong> —检索产品信息。</li><li id="38d8" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated"><strong class="ig hi">"/客户"</strong> —检索客户信息。</li></ol><p id="9ed3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">在微服务级别实施的端点</strong></p><ol class=""><li id="8639" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lg ji jj jk bi translated"><strong class="ig hi">"/API/user/authenticate "</strong>-对用户进行身份验证并颁发令牌</li><li id="62f3" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated"><strong class="ig hi"> "/API/Products" - </strong>检索产品信息。</li><li id="aec9" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated"><strong class="ig hi">"/API/Customers "-</strong>检索客户信息。</li></ol><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="er es lh"><img src="../Images/61d46f1a5fd26616ce04d541f19cb5ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uEtIYaN_uJCipL6pZeo2Ww.png"/></div></div><figcaption class="jy jz et er es ka kb bd b be z dx">Fig: ABAC MICRO SERVICE SAMPLE APP ARCHITECTURE DIAGRAM</figcaption></figure><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="er es lm"><img src="../Images/50cf13a85af889a2ce22ea5fbeec7dce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pbd1Tt85IW8P-XKaYFHlxA.png"/></div></div><figcaption class="jy jz et er es ka kb bd b be z dx">Fig: SAMPLE APPLICATION IMPLEMENTATION UML SEQUENCES DIAGRAM</figcaption></figure><p id="a044" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">解决方案结构</strong></p><ul class=""><li id="e56d" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi"> Azure AD B2C认证</strong></li></ul><ol class=""><li id="4a38" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lg ji jj jk bi translated">使用用户名、密码作为输入参数处理身份验证部分，并发布一个包含声明身份信息的JWT不记名令牌。</li></ol><ul class=""><li id="b71b" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi">网关服务</strong></li></ul><ol class=""><li id="1832" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lg ji jj jk bi translated">通过检查传入的HTTP请求中是否有授权的JWT令牌来验证该请求。</li><li id="e4eb" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated">根据基于角色声明处理授权。</li><li id="0f42" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated">将HTTP请求重新路由到下游服务。</li><li id="0bea" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated">使用Ocelot开源NuGet包，借助配置设置处理所有网关操作。</li></ol><ul class=""><li id="57f2" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi"> MVC应用</strong></li></ul><ol class=""><li id="561a" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lg ji jj jk bi translated">一个连接到API Gateway的MVC客户端应用程序，可以使用用户名、密码登录，并显示产品和客户信息。</li></ol><ul class=""><li id="31fa" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi">产品服务</strong></li></ul><ol class=""><li id="05eb" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lg ji jj jk bi translated">支持HTTP Get方法。接收对这些方法的HTTP请求。</li><li id="6acc" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated">从包含承载令牌的授权头中读取身份信息</li><li id="1599" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated">将响应结果返回给客户端</li></ol><ul class=""><li id="8444" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi">客服</strong></li></ul><ol class=""><li id="4d89" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lg ji jj jk bi translated">支持HTTP Get方法。接收对这些方法的HTTP请求。</li><li id="2578" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated">从包含承载令牌的授权头中读取身份信息</li><li id="41d1" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated">将响应结果返回给客户端</li></ol><ul class=""><li id="b056" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi">授权类库</strong></li></ul><p id="987c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.类库用于包含所有的策略定义和验证逻辑</p><ul class=""><li id="d71b" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi">授权处理程序服务</strong></li></ul><ol class=""><li id="6897" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb lg ji jj jk bi translated">服务用于在运行时处理策略配置设置，因此无需编译解决方案或项目</li><li id="82bf" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated">提供UI来处理所有与策略配置JSON相关的CRUD操作。</li><li id="ca3b" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb lg ji jj jk bi translated">我们可以通过应用程序JSON提供一个角色列表。因此，我们可以向授权处理程序服务提供一个可配置角色列表&amp;应用一个策略，让角色访问微服务中可用的API。</li></ol><p id="b307" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">应用架构</strong></p><p id="3a27" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">示例应用程序是基于微服务架构构建的。使用微服务架构构建应用程序有几个优势，比如服务可以独立开发、部署和扩展。下图显示了后端体系结构的高级设计。</p><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es ln"><img src="../Images/a76af8c7e5595f6f79601659b6350281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*zjipIJpJvL1jp1fxcfgzmQ.png"/></div></figure><ul class=""><li id="57fc" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi"> Azure AD B2C身份验证</strong> —基于用户名和密码验证用户，并颁发包含基于声明的身份信息的JWT不记名令牌。Azure AD B2C认证支持多重身份认证，如Google、Amazon、LinkedIn等。</li><li id="85ba" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">产品微服务</strong> —进行产品相关的数据操作。</li><li id="20cc" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">客户微服务</strong> —执行客户相关数据操作。</li><li id="4d8e" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi"> API网关</strong> —充当后端应用程序的中心入口点，提供数据聚合和微服务的通信路径。此外，维护基于声明的授权。所有设置都使用配置设置JSON文件进行管理。</li></ul><figure class="jr js jt ju fd jv er es paragraph-image"><div class="er es lo"><img src="../Images/1cb1ab7bb681abc346ea3a6472bf8035.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/format:webp/1*U15KjV-p5pqJGGNotgDxIA.png"/></div><figcaption class="jy jz et er es ka kb bd b be z dx">Fig: Ocelot open-source configuration setting file</figcaption></figure><ul class=""><li id="b8c6" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi">授权类库— </strong>类库用于包含所有ABAC策略定义&amp;验证逻辑。</li><li id="eee5" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">授权策略处理程序服务</strong> —服务用于在运行时处理策略配置设置，因此无需编译解决方案或项目。使用JSON配置文件，我们可以在运行时更改策略结构，从微服务API的已定义策略列表中添加或删除策略。授权策略处理程序UI只有管理员用户可以访问，否则我们会得到一个“访问被拒绝”的错误。</li></ul><figure class="jr js jt ju fd jv er es paragraph-image"><div role="button" tabindex="0" class="li lj di lk bf ll"><div class="er es lp"><img src="../Images/5b3b3dca10fce800fa000f896727e8b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lM76rrXTtSswEDNrZ_O0og.png"/></div></div><figcaption class="jy jz et er es ka kb bd b be z dx">Fig: Customize ABAC Policy JSON configuration file</figcaption></figure><p id="3301" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">如何选择访问控制解决方案</strong></p><p id="1247" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">说到安全性，仔细规划和监控您的访问控制流程至关重要。使用强大的访问管理工具来帮助您设置访问控制，并定期检查您的设置，以确保它仍然符合您的组织需求。</p><p id="1ea8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">无论您是否投资Access Rights Manager，请确保您选择的工具可以建立一个协议和机制，以确保用户能够正确访问他们工作所需的内容，仅此而已。</p><p id="02f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">结论</strong></p><p id="3936" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用定制的ABAC POC，我们可以在运行时轻松地对不同的微服务执行授权和认证，而无需更改实际的应用代码。</p><p id="3172" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，使用各种Azure B2C身份提供者来访问不同门户中的应用程序。该解决方案将提供集中式微服务配置以及策略部署获取器。这里我们解决了微服务中各种API网关设计模式的问题，并提供了一个在运行时部署ABAC策略的解决方案。</p></div><div class="ab cl lq lr go ls" role="separator"><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv lw"/><span class="lt bw bk lu lv"/></div><div class="ha hb hc hd he"><p id="0165" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用以下链接从Github下载ABAC微服务架构示例应用:-<a class="ae kc" href="https://github.com/chetandravekar/ABACMicroserviceArchiTecturePOC.git" rel="noopener ugc nofollow" target="_blank">https://Github . com/chetandravekar/abacmicroservicearchitecture PC . git</a></p></div></div>    
</body>
</html>