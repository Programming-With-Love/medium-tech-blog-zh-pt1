<html>
<head>
<title>Using Macros in Oracle Content and Experience</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Oracle Content and Experience中使用宏</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/using-macros-in-oracle-content-and-experience-2cc3a52b280d?source=collection_archive---------1-----------------------#2019-08-21">https://medium.com/oracledevs/using-macros-in-oracle-content-and-experience-2cc3a52b280d?source=collection_archive---------1-----------------------#2019-08-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/497af1415946e8d79e1e5afd7554a80a.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*7nh9AA5Pj-WjhJXSodjyOg.png"/></div></figure><h1 id="ac09" class="il im hh bd in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji bi translated">概观</h1><p id="49ed" class="pw-post-body-paragraph jj jk hh jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">这个博客演示了如何在Oracle Content and Experience中使用宏来为组件提供动态内容。宏可以在JavaScript中定义，并在富文本组件、上下文列表查询和其他组件中使用。此用例将浏览博客列表，并在特定博客的URL上使用一个slug进行深入查看以获取详细信息；URL中定义页面内容的部分称为slug。一个宏将被用来从URL中获取用于内容列表查询的slug。</p><h1 id="6a96" class="il im hh bd in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji bi translated">博客示例设置</h1><p id="da89" class="pw-post-body-paragraph jj jk hh jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">这个用例为一个示例博客使用了内容资产和主题。Oracle Content and Experience Toolkit提供了一个名为<strong class="jl hi"> BlogTemplate.zip </strong>的模板包。</p><p id="7f44" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">去https://github.com/oracle/content-and-experience-toolkit的<a class="ae km" href="https://github.com/oracle/content-and-experience-toolkit" rel="noopener ugc nofollow" target="_blank">T3</a>点击<strong class="jl hi">克隆或者下载</strong>。选择<strong class="jl hi">下载ZIP </strong>，将会下载<strong class="jl hi">content-and-experience-toolkit-master . ZIP</strong>。将文件<strong class="jl hi">content-and-experience-toolkit-master . zip</strong>解压到用户主目录<strong class="jl hi"> ~/ </strong>。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/9cfe39c8e4c3ee5f5e6040d9a00a940a.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*3YUf1dRZybhs5gJModjacw.png"/></div></figure><p id="4038" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">输入<strong class="jl hi">CD ~/content-and-experience-toolkit-master/sites/CEC-components/data/templates</strong>进入目录。从该目录上传<strong class="jl hi"> BlogTemplate.zip </strong>到Oracle Content and Experience。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/7899047026891802db79de66f693c150.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*5EpGOdAp4zpN7AJMbnU29g.png"/></div></figure><p id="e9bd" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">在<strong class="jl hi">开发者&gt;模板</strong>部分，点击<strong class="jl hi">创建</strong>并选择<strong class="jl hi">导入模板包</strong>。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/b305b29bbdc59f2279b91e015c7394bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*tKLx8lbwgeWXTepCQQ8imA.png"/></div></figure><p id="a0b0" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">选择模板包并导入它。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/3821ad1b8b073403fff2d43d461d5e0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*nXZe0t3QNC0_OfNhHF7b1Q.png"/></div></figure><h1 id="1f0a" class="il im hh bd in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji bi translated">创建博客网站</h1><p id="2df8" class="pw-post-body-paragraph jj jk hh jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">我们现在将创建一个企业站点。在我们创建站点之前，必须创建一个存储库。在<strong class="jl hi">资产&gt;仓库</strong>中，点击<strong class="jl hi">创建</strong>。创建一个名为<strong class="jl hi"> Blog-Repository </strong>的仓库。在<strong class="jl hi">内容类型</strong>字段中，选择<strong class="jl hi">起始博客作者</strong>和<strong class="jl hi">起始博客文章</strong>。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/0a0711ea9c781df002dbd4a78bbe3652.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*qdu53namB_vrzTDTIHygmA.png"/></div></figure><p id="512b" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">保存并关闭<strong class="jl hi">创建存储库</strong>屏幕。</p><p id="9894" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">现在我们将创建本地化策略。在<strong class="jl hi">资产&gt;本地化政策</strong>中，点击<strong class="jl hi">创建</strong>。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/202f44a5b7379f454a437adc918804e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*rUna4AGpuk5AoCDb8IGEFg.png"/></div></figure><p id="6d5b" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">输入<strong class="jl hi">博客本地化政策</strong>作为名称。选择<strong class="jl hi">英语(美国)(en-US </strong>)作为所需语言，选择<strong class="jl hi">英语(美国)(en-US </strong>)作为默认语言。保存并关闭<strong class="jl hi">创建本地化政策</strong>屏幕。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/d1fe53f377b67d72eb2df99fdb6bc01b.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*UhHys4sK9mhMToye84zQ0w.png"/></div></figure><p id="1772" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">最后，使用<strong class="jl hi"> BlogTemplate </strong>创建一个站点。输入<strong class="jl hi">博客网站</strong>作为<strong class="jl hi">的名字。</strong>为<strong class="jl hi">资产库</strong>选择<strong class="jl hi">博客库</strong>，为<strong class="jl hi">本地化策略</strong>选择<strong class="jl hi">博客本地化策略</strong>。点击<strong class="jl hi">创建</strong>创建站点。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/6ec939efe3c168f11a9c6a5f8bc88b8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*Fngnpp6AkkyiwfA3xtOacA.png"/></div></figure><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/bc0956d42b15182842398667fbcaed12.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*7m74RIs_OVJLhjBs1yLRGg.png"/></div></figure><p id="8faf" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">创建站点后，选择站点并点击<strong class="jl hi">查看</strong>。该网站将呈现博客的摘要。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/ee931e783756243b8aee227e32e49b27.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*OfXNJ3FUmcDJdfx1Wr_MVw.png"/></div></figure><p id="880e" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">在浏览器中，将鼠标悬停在显示博客标题的链接上，您将看到如下URL:</p><p id="84cb" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated"><strong class="jl hi">http://&lt;host&gt;:&lt;port&gt;/sites/preview/Blog-Site/Post-detail/Starter-Blog-Post/core 234835 cb5d 594 a6 FB 39662 df 2376874 b/Blog-Site-1481786063051-developing-content-layout-for-content-and-experience-cloud</strong></p><p id="b884" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">URL以<em class="kr"> post-detail </em>页面结尾，后跟“/&lt;content type&gt;/&lt;asset GUID&gt;/&lt;SiteName&gt;-&lt;GUID&gt;-&lt;Slug&gt;”。URL中定义页面内容的部分称为slug。在示例URL中，slug将是“为内容和体验云开发内容布局”。</p><p id="7c5d" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">在这篇博客中，我们将修改内容布局生成的URL，使其更加简单，方法是将URL后缀改为:<br/><br/>"…/post-detail . html #&lt;Slug&gt;"<br/><br/>这将使URL更具可读性。我们将创建一个自定义宏，使用JavaScript来读取URL中的slug。通过显示指向详细博客的slug，我们将能够驱动获取详细博客的内容查询。</p><h1 id="5b92" class="il im hh bd in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji bi translated">修改内容布局并指定友好的URL</h1><p id="12d9" class="pw-post-body-paragraph jj jk hh jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">首先，让我们修改<strong class="jl hi">Starter-Blog-Post-Summary</strong>的内容布局，使slug通过“post-detail.html#”之后的URL传递。进入<strong class="jl hi">开发&gt;查看所有组件</strong>并选择<strong class="jl hi">开始-博客-帖子-摘要<em class="kr"> </em> </strong>内容布局。选择<strong class="jl hi">打开</strong>并导航至<strong class="jl hi">资产</strong>文件夹。下载<strong class="jl hi">layout.html</strong>并在编辑器中打开。将锚标签上的<strong class="jl hi">href = " { { scsdata . detail page link } }</strong>"更改为<strong class="jl hi">href = " post-detail . html # { { slug } } "</strong>。</p><pre class="kn ko kp kq fd ks kt ku kv aw kw bi"><span id="0936" class="kx im hh kt b fi ky kz l la lb">&lt;!--<br/>Copyright (c) 2019 Oracle and/or its affiliates. All rights reserved.<br/>Licensed under the Universal Permissive License v 1.0 as shown at <a class="ae km" href="http://oss.oracle.com/licenses/upl" rel="noopener ugc nofollow" target="_blank">http://oss.oracle.com/licenses/upl</a>.<br/>--&gt;<br/>&lt;div class="post-preview"&gt;<br/>    &lt;a <strong class="kt hi">href="post-detail.html#{{slug}}</strong>"&gt;<br/>        &lt;h2 class="post-title"&gt;<br/>            {{blogTitle}}<br/>        &lt;/h2&gt;<br/>        &lt;h3 class="post-subtitle"&gt;<br/>            {{blogSummary}}<br/>        &lt;/h3&gt;<br/>    &lt;/a&gt;<br/>    &lt;p class="post-meta"&gt;Posted by {{blogAuthor}} on {{blogFormattedDate}}&lt;/p&gt;<br/>&lt;/div&gt;<br/>&lt;hr&gt;</span></pre><p id="8f55" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">对于REST调用返回的JSON，要获得博客列表，每个博客看起来如下，带有一个slug值:</p><pre class="kn ko kp kq fd ks kt ku kv aw kw bi"><span id="68ed" class="kx im hh kt b fi ky kz l la lb">…<br/>      },<br/>      <strong class="kt hi">"slug": "blog-site-1481786063051-developing-content-layout-for-content-and-experience-cloud",</strong><br/>      "status": “draft"<br/>  }<br/>…</span></pre><p id="dde0" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">slug值由{{slug}}表达式返回。保存修改并将<strong class="jl hi">layout.html</strong>的新版本上传至Oracle Content and Experience。</p><p id="4b89" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">在同一个Oracle Content and Experience目录下选择<strong class="jl hi"> render.js </strong>，下载到本地。在编辑器中打开它。添加下面一行，<strong class="jl hi"> <em class="kr">内容= $。extend(content，this . contentitemdata)；"</em>、</strong>到<strong class="jl hi">渲染</strong>功能。在<strong class="jl hi"> render.js </strong>中需要这一行，以便<strong class="jl hi">layout.html</strong>中的“{{slug}}”表达式可以被<strong class="jl hi"> Mustache.js </strong>正确替换。</p><pre class="kn ko kp kq fd ks kt ku kv aw kw bi"><span id="ae5d" class="kx im hh kt b fi ky kz l la lb">…<br/>  ContentLayout.prototype = {<br/>    contentVersion: '&gt;=1.0.0 &lt;2.0.0',<br/>    render: function (parentObj) {<br/>      var template,<br/>          contentClient = this.contentClient,<br/>          fields = this.contentItemData.fields,<br/>          content = {<br/>            blogImageRenditionURL: contentClient.getRenditionURL({<br/>                'id': fields['starter-blog-post_header_image'].id<br/>            }),<br/>            blogSummary: fields['starter-blog-post_summary'],<br/>            blogTitle: fields['starter-blog-post_title'],<br/>            blogContent: fields['starter-blog-post_content'],<br/>            blogFormattedDate: dateToMDY(this.contentItemData.updatedDate.value)<br/>          },<br/>          contentType,<br/>          secureContent = false;</span><span id="1bd2" class="kx im hh kt b fi lc kz l la lb">    <strong class="kt hi">content = $.extend(content, this.contentItemData);</strong></span><span id="e57c" class="kx im hh kt b fi lc kz l la lb">    if (this.scsData) {<br/>      content = $.extend(content, {<br/>        'scsData': this.scsData<br/>      });<br/>      contentType = content.scsData.showPublishedContent === true ? 'published' : 'draft';<br/>      secureContent = content.scsData.secureContent;<br/>    }<br/>…</span></pre><p id="1aad" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">保存修改并将新版本的<strong class="jl hi"> render.js </strong>文件上传到Oracle Content and Experience。</p><p id="6714" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">现在，我们将告诉Oracle Content and Experience对内容类型<strong class="jl hi"> Starter-Blog-Post </strong>使用友好的URL。转到<strong class="jl hi">资产&gt;内容类型</strong>T20】。选择<strong class="jl hi"><em class="kr"/></strong>，选择<strong class="jl hi">编辑</strong>。选择<strong class="jl hi">友好网址</strong>。勾选<strong class="jl hi">启用URL </strong>和<em class="kr">的友好项目名称。</em>为其下的字段选择<strong class="jl hi">无默认前缀</strong> <em class="kr"> </em>。保存并关闭资源编辑器。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/fc9bb8c6e68351b7f5b13253d485f834.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*SvNMHed8zLksuDUwmQvUZw.png"/></div></figure><p id="d563" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">在指定友好URL被内容类型<strong class="jl hi"> Starter-Blog-Post </strong>使用之后，我们可以在assets中的内容项中指定友好URL。转到<strong class="jl hi">资产</strong>，限制<strong class="jl hi">数字资产</strong>中的<strong class="jl hi">文档</strong>和<strong class="jl hi">内容项</strong>中的<strong class="jl hi"> Starter-Blog-Post </strong>显示的资产数量。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/a2fba578f66bb9e4afa01f4b2af07c9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*yt2KmAqdbVQni92XgDP8kA.png"/></div></figure><p id="f2c5" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">对于显示的所有博客内容项目，选择并编辑内容项目。更改URL 的<strong class="jl hi">友好项目名称中的值，以删除站点名称和GUID。例如，<strong class="jl hi">blog-site-1481786063051-developing-content-layout-for-content-and-experience-cloud</strong>将更改为<strong class="jl hi">developing-content-layout-for-content-and-experience-cloud</strong>。保存并关闭资源编辑器。对所有博客文章内容项目重复上述步骤。</strong></p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/2453975f77bc37e04f776d5a692a9b68.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*zHCRIxmGMXfKbs7G7TkL4A.png"/></div></figure><p id="7546" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">最后，进入<strong class="jl hi">站点&gt;博客站点</strong>并选择<strong class="jl hi">视图</strong>来运行站点。在浏览器中，将鼠标悬停在显示博客标题的链接上。您将看到更简单、友好的URL，例如:</p><pre class="kn ko kp kq fd ks kt ku kv aw kw bi"><span id="090f" class="kx im hh kt b fi ky kz l la lb">http://&lt;host&gt;:&lt;port&gt;/sites/preview/Blog-Site/<strong class="kt hi">post-detail.html#developing-content-layout-for-content-and-experience-cloud</strong></span></pre><h1 id="bf27" class="il im hh bd in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji bi translated">定义自定义宏并在内容查询中使用它</h1><p id="3464" class="pw-post-body-paragraph jj jk hh jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">现在，内容布局正在为每个内容项呈现“post-detail . html #<em class="kr">&lt;slug&gt;</em>”，我们将定义使用JavaScript读取URL中的slug的自定义宏。通过显示指向详细博客的slug，我们将能够驱动获取详细博客的内容查询。</p><p id="4fa3" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">首先，我们来定义一下宏。宏是在主题的布局中定义的。去<strong class="jl hi">开发者&gt;查看所有主题</strong>。在<strong class="jl hi">博客开始主题&gt;布局</strong>下导航。由于<strong class="jl hi">帖子详情</strong>页面使用了<strong class="jl hi">post-detail.html</strong>页面布局，我们将选择并本地下载<strong class="jl hi">post-detail.html</strong>。在编辑器中打开下载的<strong class="jl hi">post-detail.html</strong>。</p><p id="877b" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">在header部分的末尾，添加以下代码段，它定义了{{getSlugMacro}}。它将获取URL中“#”之后的字符串，并通过表达式{{getSlugMacro}}返回它。该字符串将成为详细博客的一部分。保存修改并将新版本上传到<strong class="jl hi">post-detail.html</strong>。</p><pre class="kn ko kp kq fd ks kt ku kv aw kw bi"><span id="21a4" class="kx im hh kt b fi ky kz l la lb">&lt;!--<br/>Copyright (c) 2019 Oracle and/or its affiliates. All rights reserved.<br/>Licensed under the Universal Permissive License v 1.0 as shown at <a class="ae km" href="http://oss.oracle.com/licenses/upl" rel="noopener ugc nofollow" target="_blank">http://oss.oracle.com/licenses/upl</a>.<br/>--&gt;<br/>&lt;!DOCTYPE html&gt;<br/>&lt;html lang="en"&gt;</span><span id="7c34" class="kx im hh kt b fi lc kz l la lb">&lt;head&gt;<br/>  …<br/>  &lt;!--$SCS_RENDER_INFO--&gt;<br/>  &lt;!--$SCS_SITE_HEADER--&gt;<br/>  &lt;!--$SCS_PAGE_HEADER--&gt;</span><span id="b13f" class="kx im hh kt b fi lc kz l la lb"><strong class="kt hi">  &lt;!-- {{getSlugMacro}} --&gt;<br/>  &lt;script type="text/javascript"&gt;<br/>  window.SCSMacros = window.SCSMacros || {};<br/>  window.SCSMacros.getSlugMacro = window.location.hash.substring(1);<br/>  &lt;/script&gt;</strong></span><span id="5a74" class="kx im hh kt b fi lc kz l la lb">&lt;/head&gt;<br/>…</span></pre><p id="c0cc" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">我们将为博客添加一个内容列表组件到<strong class="jl hi">帖子详细信息</strong>页面。让我们在Site Builder中打开<strong class="jl hi">帖子详细信息</strong>页面。转到编辑模式并创建更新。编辑<strong class="jl hi">帖子详细信息</strong>页面。将植入组件<strong class="jl hi">内容列表</strong>添加到第一行<strong class="jl hi">内容占位符</strong>的上方。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/586a1ccfc84ce69983879f802fd037a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*pW1mAumBciIYYvfPZ4bLhw.png"/></div></figure><p id="44d0" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">编辑内容列表的设置。对于<strong class="jl hi">内容类型</strong>字段，选择<strong class="jl hi">开始-博客-文章</strong>。在<strong class="jl hi">附加查询字符串</strong>字段中输入文本<strong class="jl hi">slug eq " { { getslug macro } } "<em class="kr"/></strong>。为<strong class="jl hi">项目视图</strong>字段选择<strong class="jl hi">标题</strong>。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/414a6ce32c24b267aa97246768e94e05.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*iewHgfSftNMZJIKYIfe2sQ.png"/></div></figure><p id="35b6" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated"><strong class="jl hi">附加查询字符串</strong>的条件将应用于<strong class="jl hi">首发-博文内容列表</strong>的查询。REST调用返回的获取博客列表的JSON现在如下所示，每个博客都有一个slug值:</p><pre class="kn ko kp kq fd ks kt ku kv aw kw bi"><span id="b8e0" class="kx im hh kt b fi ky kz l la lb">  …<br/>      },<br/>      <strong class="kt hi">"slug": "developing-content-layout-for-content-and-experience-cloud"</strong>,<br/>      "status": “draft"<br/>  }<br/>  …</span></pre><p id="f0a0" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated"><strong class="jl hi">附加查询字符串</strong>条件将slug值与我们从<strong class="jl hi"> {{getSlugMacro}} </strong>获得的值进行匹配，并返回匹配的博客。</p><p id="1462" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">关闭<strong class="jl hi">内容列表设置</strong>。向下滚动<strong class="jl hi">文章详细信息</strong>页面，删除所有三个内容占位符。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/3caf8a8cb4082f15a125bb4ccefbc8b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*ux44nAD2Z-nxFKvXjfOWjQ.png"/></div></figure><p id="95d3" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">保存并提交站点构建器更改。关闭站点生成器。</p><p id="548d" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">选择<strong class="jl hi">网站&gt;博客网站</strong>并点击<strong class="jl hi">查看</strong>。该网站将呈现博客的摘要。将鼠标悬停在博客标题上，可以看到带有“<strong class="jl hi"> # </strong>”的URL，后面跟有slug。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/dd343bb076d132770b0e70424222902b.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*PpjiMSg9JqGJDqJ3Wf7ZZQ.png"/></div></figure><p id="7be4" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated">点击博客标题，<strong class="jl hi">帖子详细信息</strong>页面将呈现所选博客。</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/4d7d1b2b08af3381862af3c77ece98a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:936/format:webp/1*jkF4DwqzEAwJ4DoI7Jq87g.png"/></div></figure><p id="6e04" class="pw-post-body-paragraph jj jk hh jl b jm kh jo jp jq ki js jt ju kj jw jx jy kk ka kb kc kl ke kf kg ha bi translated"><strong class="jl hi">注意:</strong>这个博客向下钻取的用例在Site Builder中不起作用。它的工作包括调用渲染器，这超出了博客的范围。</p><h1 id="c4c7" class="il im hh bd in io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji bi translated">摘要</h1><p id="fa55" class="pw-post-body-paragraph jj jk hh jl b jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">这是在Oracle Content and Experience中使用宏的一个示例。它包括使用JavaScript在主题中定义自定义宏。宏在内容列表的附加查询字符串字段中用于选择详细博客。总之，您可以通过自定义宏以多种方式扩展Oracle内容和体验。</p></div></div>    
</body>
</html>