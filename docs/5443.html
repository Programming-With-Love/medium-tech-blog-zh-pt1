<html>
<head>
<title>Oracle ADF BC REST — Performance Review and Tuning</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle ADF BC REST —性能检查和调优</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/oracle-adf-bc-rest-performance-review-and-tuning-c3acadecd477?source=collection_archive---------5-----------------------#2018-05-27">https://medium.com/oracledevs/oracle-adf-bc-rest-performance-review-and-tuning-c3acadecd477?source=collection_archive---------5-----------------------#2018-05-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="30d6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我想检查ADF BC REST的伸缩性和执行速度。因此，我实现了示例ADF BC REST应用程序，并对其执行了JMeter压力负载测试。您可以在我的<a class="ae jc" href="https://github.com/abaranovskis-redsamurai/blogvisitcounter" rel="noopener ugc nofollow" target="_blank"> GitHub </a>存储库中访问应用程序和JMeter脚本的源代码。该应用程序被称为博客访客计数应用程序是有原因的——我使用同一个应用程序来计算博客访客。这意味着每次您访问博客页面时，ADF BC REST服务都会在后台触发，并记录带有时间戳的计数器值(无个人数据)。</p><p id="a32a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">应用程序结构很简单— ADF BC REST实现:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/a46aa0eda814d31faa278f2899a9bc72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZF0UBp43YuhwqGpkuhEqvQ.png"/></div></div></figure><p id="10e8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当访问REST服务(执行GET请求)时，它会在后台创建并提交新行(这就是我喜欢ADF BC REST的原因——您在后端拥有强大的功能和灵活性),然后返回记录的总行数:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/5f12494ab9f1afe73afa8d5cce8b3acd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r68pWPZTrCjeaBUqbLT2ag.png"/></div></div></figure><p id="620d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">新行被赋予来自数据库序列的计数器值以及时间戳。这两个值都是用Groovy计算的。ADF BC REST的另一个好处是，除了用Java编写逻辑之外——可以用Groovy编写脚本——这使得代码更简单:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/e8c19a4515bc94aad5992761264a0024.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dgX132KXBSqnGv71ihWgJg.png"/></div></div></figure><p id="174a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">就这样— ADF BC REST服务准备好运行了。你可能想知道，我是如何从博客页面访问它的。ADF BC REST服务和其他REST一样，可以通过HTTP请求调用。在这个特殊的例子中，我在客户端通过JavaScript中的Ajax调用来调用GET操作。该脚本上传到blogger HTML:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jr"><img src="../Images/f8d31be5e8d6890cb48ad48fd64187fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*En7ulVHI1wzpUd5HJytMJQ.png"/></div></div></figure><p id="2085" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">表演</strong></p><p id="0e8f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我使用JMeter来执行性能测试。在下面的例子中，REST GET请求在无限循环中被100个并发线程调用。这会产生恒定的负载，并允许测量ADF BC REST应用程序在这种负载下的性能:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es js"><img src="../Images/389334476bcffcccd7a09682b357d915.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iq9fY9P_I1zSLbu4LTjCOw.png"/></div></div></figure><p id="2369" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ADF BC REST的伸缩性很好，在100个并发线程中，它请求处理的时间只有0.1-0.2秒。如果我们将其与ADF UI请求处理时间进行比较，它会快10倍左右。这是意料之中的，因为在ADF BC REST请求期间不使用JSF和ADF Faces UI类。100个线程的性能测试统计信息，请参阅平均记录时间(毫秒):</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jt"><img src="../Images/235b636f927362dbe9feff9f86e71b5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oAjeQ-wKPq_-KyakTD8xVA.png"/></div></div></figure><p id="aad5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">调谐</strong></p><p id="7136" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.引用的池大小和应用模块池ADF BC REST执行请求是无状态模式，REST自然是无状态的。我想检查一下，这对应用程序模块调优参数意味着什么。据我观察，更改引用的池大小值不会影响应用程序的性能，它对0或任何其他值都同样有效。引用的池大小参数对于ADF BC REST运行时不重要:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/d31654712737e3e7f4b3b0237e5678e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*i4Kr7ma54BmbCFJMKcIrUg.png"/></div></div></figure><p id="8c93" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">应用程序在负载下运行良好，没有记录钝化/激活，即使引用的池大小设置为零。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jv"><img src="../Images/a87369f39a203670a58c429cfa8be0cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MthYsMGeBMKBj0zzLe2GlA.png"/></div></div></figure><p id="12d7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然而，我发现保持启用应用程序模块池仍然很重要。如果你关闭它，钝化将开始出现，这将消耗处理能力，是非常不可取的。因此，保持启用应用程序模块池= ON。</p><p id="c20f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.释放时断开应用模块</p><p id="193d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将Disconnect Application Module onrelease设置为on非常重要(了解更多信息— <a class="ae jc" href="http://andrejusb.blogspot.lt/2011/10/adf-bc-tuning-with-do-connection.html" rel="noopener ugc nofollow" target="_blank"> ADF BC Tuning with Do连接池和TXN断开级别</a>)。这将确保始终有接近零DB的连接保持打开:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jw"><img src="../Images/c5e39a4a1340d51a5b608811eba73385.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fvTUztYUsArpdq0JI5dLaA.png"/></div></div></figure><p id="de20" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">否则，如果我们保持释放时断开应用模块= OFF:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jx"><img src="../Images/5b276d98930aaeb2d2b3585cbaa8c63e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tZ2GVCPYS1N8oriO_HiiSA.png"/></div></div></figure><p id="2de4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">数据库连接不会立即释放:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jy"><img src="../Images/13cb7afa4109f7d4698b2d068e204b00.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rCzXNzgMW67XUrYJVNpCSQ.png"/></div></div></figure><p id="dd8a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这总结了与ADF BC REST调优相关的要点。</p></div><div class="ab cl jz ka go kb" role="separator"><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke kf"/><span class="kc bw bk kd ke"/></div><div class="ha hb hc hd he"><p id="3e2a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kg">原载于2018年5月27日</em><a class="ae jc" href="https://andrejusb.blogspot.lt/2018/05/oracle-adf-bc-rest-performance-review.html" rel="noopener ugc nofollow" target="_blank"><em class="kg">【andrejusb.blogspot.com</em></a><em class="kg">。</em></p></div></div>    
</body>
</html>