<html>
<head>
<title>DayNight — Adding a dark theme to your app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">日夜——给你的应用添加一个黑暗主题</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/appcompat-v23-2-daynight-d10f90c83e94?source=collection_archive---------0-----------------------#2016-02-25">https://medium.com/androiddevelopers/appcompat-v23-2-daynight-d10f90c83e94?source=collection_archive---------0-----------------------#2016-02-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/42cd5f1ce82445556f8f0e30f8a8a95b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*txi-T7FkaeQ2fwa_rGOB_w.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Illustration by <a class="ae it" href="https://twitter.com/VPoltrack" rel="noopener ugc nofollow" target="_blank">Virginia Poltrack</a></figcaption></figure><p id="6ac9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js">本帖自首次发布以来已更新多次。内容正确截至2019年4月26日。</em></p></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><p id="ad18" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">AppCompat中的日夜功能允许您的应用程序在深色⚫和浅色⚪主题之间轻松切换。这对您的用户有很多好处，从节省有机发光二极管显示器的电力，到增加弱视人士的可用性，等等。</p><h1 id="5065" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">我如何使用它？</h1><p id="5e6f" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">您需要更改您的主题，从一个DayNight变体扩展，然后调用一个方法来启用该特性。这里有一个主题声明的例子:</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="e815" class="lm kb hh li b fi ln lo l lp lq">&lt;style name="MyTheme" parent="<strong class="li hi">Theme.AppCompat.DayNight</strong>"&gt;</span><span id="c881" class="lm kb hh li b fi lr lo l lp lq">    &lt;!-- Blah blah --&gt;</span><span id="6089" class="lm kb hh li b fi lr lo l lp lq">&lt;/style&gt;</span></pre><p id="a4e9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果你正在使用材料设计组件(我建议你这样做)，那么你也可以使用他们1.1.0版本的<code class="du ls lt lu li b">Theme.MaterialComponents.DayNight</code>主题。这篇文章的其余部分保持不变。</p><p id="6ba3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">然后，您需要使用提供的一个API在您的应用程序中启用该功能。</p><h2 id="97e1" class="lm kb hh bd kc lv lw lx kg ly lz ma kk jf mb mc ko jj md me ks jn mf mg kw mh bi translated">setDefaultNightMode</h2><p id="ff54" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">我们为此提供的第一个API是<code class="du ls lt lu li b">AppCompatDelegate.<a class="ae it" href="https://developer.android.com/reference/androidx/appcompat/app/AppCompatDelegate#setDefaultNightMode(int)" rel="noopener ugc nofollow" target="_blank">setDefaultNightMode()</a></code>，它采用以下值之一:</p><ul class=""><li id="6ed0" class="mi mj hh iw b ix iy jb jc jf mk jj ml jn mm jr mn mo mp mq bi translated"><code class="du ls lt lu li b"><a class="ae it" href="https://developer.android.com/reference/androidx/appcompat/app/AppCompatDelegate.html#MODE_NIGHT_NO" rel="noopener ugc nofollow" target="_blank">MODE_NIGHT_NO</a></code>。总是使用白天(光)主题。</li><li id="5c94" class="mi mj hh iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated"><code class="du ls lt lu li b"><a class="ae it" href="https://developer.android.com/reference/androidx/appcompat/app/AppCompatDelegate.html#MODE_NIGHT_YES" rel="noopener ugc nofollow" target="_blank">MODE_NIGHT_YES</a></code>。总是使用夜晚(黑暗)主题。</li><li id="76b1" class="mi mj hh iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated"><code class="du ls lt lu li b"><a class="ae it" href="https://developer.android.com/reference/androidx/appcompat/app/AppCompatDelegate.html#MODE_NIGHT_FOLLOW_SYSTEM" rel="noopener ugc nofollow" target="_blank">MODE_NIGHT_FOLLOW_SYSTEM</a></code> <em class="js">(默认)</em>。这个设置遵循系统的设置，在Android Q和更高版本上是一个系统设置(下面会详细介绍)。</li><li id="aaee" class="mi mj hh iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated"><code class="du ls lt lu li b">MODE_NIGHT_AUTO_BATTERY</code>。当设备启用了“电池节电”功能时，变为暗色，否则变为亮色。<br/>✨<strong class="iw hi">t14】v 1 . 1 . 0-alpha 03中新增。 </strong></li><li id="eb7d" class="mi mj hh iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated"><code class="du ls lt lu li b">MODE_NIGHT_AUTO_TIME</code> &amp; <code class="du ls lt lu li b"><a class="ae it" href="https://developer.android.com/reference/androidx/appcompat/app/AppCompatDelegate.html#MODE_NIGHT_AUTO" rel="noopener ugc nofollow" target="_blank">MODE_NIGHT_AUTO</a></code>。基于一天中的时间在白天/夜晚之间变化。<br/> ⛔ <strong class="iw hi"> <em class="js">在v1.1.0-alpha03中已弃用。</em> </strong></li></ul><p id="9f49" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">该方法是静态的，因此您可以随时调用它。你设置的值是<strong class="iw hi">而不是</strong>持续到进程启动，因此你需要在每次你的应用程序进程启动时设置它。我建议在您的应用程序类(如果有)中设置它，如下所示:</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="7e2f" class="lm kb hh li b fi ln lo l lp lq">public class MyApplication extends Application {<br/>    <br/>    public void onCreate() {<br/>        super.onCreate();</span><span id="d5b9" class="lm kb hh li b fi lr lo l lp lq">        AppCompatDelegate.<strong class="li hi">setDefaultNightMode</strong>(<br/>            AppCompatDelegate.MODE_NIGHT_YES);<br/>    }<br/>}</span></pre><p id="be4f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">从AppCompat v1.1.0-alpha05开始，<code class="du ls lt lu li b">setDefaultNightMode()</code>将自动将任何昼夜变化应用于任何“已开始”的活动。这意味着当您调用API时，您不再需要手动重新创建任何活动。</p><h2 id="ed17" class="lm kb hh bd kc lv lw lx kg ly lz ma kk jf mb mc ko jj md me ks jn mf mg kw mh bi translated">setLocalNightMode</h2><p id="a626" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">您还可以通过调用AppCompatDelegate的<code class="du ls lt lu li b"><a class="ae it" href="https://developer.android.com/reference/androidx/appcompat/app/AppCompatDelegate#setLocalNightMode(int)" rel="noopener ugc nofollow" target="_blank">setLocalNightMode()</a></code>来覆盖每个组件中的默认值。当您知道只有一些组件应该使用日夜功能时，或者对于开发来说，这样您就不必坐着等待夜幕降临来测试您的布局，这是很方便的。</p><p id="1d3b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在每个活动中使用这个方法现在是一个<em class="js">反模式</em>，你应该转而使用<code class="du ls lt lu li b">setDefaultNightMode()</code>。请参阅下一节了解原因的技术细节。</p><h2 id="75d3" class="lm kb hh bd kc lv lw lx kg ly lz ma kk jf mb mc ko jj md me ks jn mf mg kw mh bi translated">活动娱乐</h2><p id="e0fc" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">如果需要更改<a class="ae it" href="https://developer.android.com/reference/android/content/res/Configuration.html" rel="noopener ugc nofollow" target="_blank">配置</a>，上面提到的两种方法都将重新创建您的活动，以便可以应用新的主题。这是测试您的Activity +片段是否正确保存它们的<a class="ae it" href="https://developer.android.com/reference/android/app/Activity#onSaveInstanceState(android.os.Bundle)" rel="noopener ugc nofollow" target="_blank">实例状态</a>的好机会。</p><h2 id="c47a" class="lm kb hh bd kc lv lw lx kg ly lz ma kk jf mb mc ko jj md me ks jn mf mg kw mh bi translated">如何检查我当前的配置？</h2><p id="a4b8" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">您可以通过检查您的资源配置来做到这一点:</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="a3ee" class="lm kb hh li b fi ln lo l lp lq">int currentNightMode = getResources().getConfiguration().uiMode<br/>        &amp; Configuration.UI_MODE_NIGHT_MASK</span><span id="85d6" class="lm kb hh li b fi lr lo l lp lq">switch (currentNightMode) {<br/>    case Configuration.<a class="ae it" href="https://developer.android.com/reference/android/content/res/Configuration.html#UI_MODE_NIGHT_NO" rel="noopener ugc nofollow" target="_blank">UI_MODE_NIGHT_NO</a>:<br/>        // Night mode is not active, we're in day time<br/>    case Configuration.<a class="ae it" href="https://developer.android.com/reference/android/content/res/Configuration.html#UI_MODE_NIGHT_NO" rel="noopener ugc nofollow" target="_blank">UI_MODE_NIGHT_</a>YES:<br/>        // Night mode is active, we're at night!<br/>    case Configuration.<a class="ae it" href="https://developer.android.com/reference/android/content/res/Configuration.html#UI_MODE_NIGHT_NO" rel="noopener ugc nofollow" target="_blank">UI_MODE_NIGHT_</a>UNDEFINED:<br/>        // We don't know what mode we're in, assume notnight<br/>}</span></pre><h2 id="dffa" class="lm kb hh bd kc lv lw lx kg ly lz ma kk jf mb mc ko jj md me ks jn mf mg kw mh bi translated">网络视图</h2><p id="f53a" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">目前使用这一功能有一个很大的注意事项:WebViews。因为它们不能使用主题属性，而且你很少能控制任何网页内容的样式，所以你的网页浏览量很有可能与你的动态主题应用形成强烈对比。因此，确保你在两种模式下测试你的应用程序，以确保它不会让用户感到厌烦。</p><h2 id="72b2" class="lm kb hh bd kc lv lw lx kg ly lz ma kk jf mb mc ko jj md me ks jn mf mg kw mh bi translated">系统夜间模式</h2><p id="3a2d" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">Android Q以上有一个系统夜间模式，可以在设置应用中启用。Android Pie也有一个系统夜间模式设置，但它只是在设备的“开发者选项”中浮出水面。为了方便起见，我建议像对待以前版本的Android一样对待Android Pie。</p><h1 id="4e1e" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">应用内设置</h1><p id="5de6" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">建议为用户提供一种方法来覆盖应用程序中的默认主题。推荐的选项和字符串有:</p><ul class=""><li id="a1e9" class="mi mj hh iw b ix iy jb jc jf mk jj ml jn mm jr mn mo mp mq bi translated">‘光’(<code class="du ls lt lu li b">MODE_NIGHT_NO</code>)</li><li id="2ec5" class="mi mj hh iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated">‘黑暗’(<code class="du ls lt lu li b">MODE_NIGHT_YES</code>)</li><li id="0aa2" class="mi mj hh iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated">由电池保护设置'(<code class="du ls lt lu li b">MODE_NIGHT_AUTO_BATTERY</code>)。<em class="js"> <br/>只显示在安卓派及以下。显示时，这应该是你的应用程序的默认设置。</em></li><li id="76a2" class="mi mj hh iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated">使用系统默认'(<code class="du ls lt lu li b">MODE_NIGHT_FOLLOW_SYSTEM</code>)。<br/> <em class="js">只在安卓Q及以上显示。显示时，这应该是你的应用程序的默认设置。</em></li></ul><p id="039b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">实现的一种常见方式是通过<a class="ae it" href="https://developer.android.com/guide/topics/ui/settings/components-and-attributes" rel="noopener ugc nofollow" target="_blank"> ListPreference </a>，当值改变时调用<code class="du ls lt lu li b">setDefaultNightMode()</code>。</p><h1 id="b0cf" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">更新你的主题和风格</h1><p id="650e" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">除了调用AppCompat之外，您可能还需要做一些工作来更新您的主题、样式和布局，以便它们可以无缝地跨暗主题和亮主题工作。</p><p id="8b47" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这些事情的经验法则是尽可能使用主题属性。以下是需要了解的最重要的内容:</p><ul class=""><li id="f3ac" class="mi mj hh iw b ix iy jb jc jf mk jj ml jn mm jr mn mo mp mq bi translated"><code class="du ls lt lu li b">?android:attr/textColorPrimary</code>。通用文本颜色。浅色主题接近黑色，深色主题接近白色。包含禁用状态。</li><li id="ecd0" class="mi mj hh iw b ix mr jb ms jf mt jj mu jn mv jr mn mo mp mq bi translated"><code class="du ls lt lu li b">?attr/colorControlNormal</code> <em class="js">。</em>通用图标颜色。包含禁用状态。</li></ul><p id="d52f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用材质设计组件也使这变得容易得多，因为它的属性(如<code class="du ls lt lu li b">?attr/colorSurface</code>和<code class="du ls lt lu li b">?attr/colorOnSurface</code>)为您提供了一个简单的通用主题颜色。这些属性当然可以在你的主题中定制。</p><h2 id="6eb8" class="lm kb hh bd kc lv lw lx kg ly lz ma kk jf mb mc ko jj md me ks jn mf mg kw mh bi translated">使用你自己的黑暗/光明资源</h2><p id="4fa2" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">简单地说，AppCompat只是支持使用<code class="du ls lt lu li b">night</code>和<code class="du ls lt lu li b">notnight</code>资源限定符。这些实际上从API 8开始就在平台中可用，但是以前只在非常特殊的场景中使用。</p><p id="0b9c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">引擎盖下<code class="du ls lt lu li b">Theme.AppCompat.DayNight</code>是这样实现的:</p><p id="efb2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> res/values/themes.xml </strong></p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="efdc" class="lm kb hh li b fi ln lo l lp lq">&lt;style name="Theme.AppCompat.DayNight" <br/>       parent="Theme.AppCompat.Light" /&gt;</span></pre><p id="a02a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">RES/values-night/themes . XML</strong></p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="8021" class="lm kb hh li b fi ln lo l lp lq">&lt;style name="Theme.AppCompat.DayNight" <br/>       parent="Theme.AppCompat" /&gt;</span></pre><p id="1ec6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这意味着你也可以为你的光明和黑暗用户界面提供替代资源。只需在您的资源文件夹中使用<code class="du ls lt lu li b">-<strong class="iw hi">night</strong></code>限定符:<code class="du ls lt lu li b">drawable-night</code>、<code class="du ls lt lu li b">values-night</code>等。</p></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><h2 id="665c" class="lm kb hh bd kc lv lw lx kg ly lz ma kk jf mb mc ko jj md me ks jn mf mg kw mh bi translated">为什么我应该使用setDefaultNightMode？</h2><p id="ea6a" class="pw-post-body-paragraph iu iv hh iw b ix ky iz ja jb kz jd je jf la jh ji jj lb jl jm jn lc jp jq jr ha bi translated">在AppCompat v1.1.0中，DayNight进行了大规模的重写，以修复一些bug。最大的错误是:</p><ul class=""><li id="638d" class="mi mj hh iw b ix iy jb jc jf mk jj ml jn mm jr mn mo mp mq bi translated">WebView会在活动被加载到流程中后立即重置活动配置。这可能会导致后来使用错误的主题膨胀视图。</li></ul><p id="1a16" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">AppCompat需要更改活动的资源配置以启用“夜间模式”。WebView的问题源于使用了一种现已废弃的方法:<code class="du ls lt lu li b">Resources.<a class="ae it" href="https://developer.android.com/reference/android/content/res/Resources.html#updateConfiguration(android.content.res.Configuration,%20android.util.DisplayMetrics)" rel="noopener ugc nofollow" target="_blank">updateConfiguration()</a></code>来实现这一点。不幸的是，WebView不能很好地使用这种方法(因此被弃用)。</p><p id="864d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">重写的重点是转移到更新配置的新方法:<code class="du ls lt lu li b">ContextThemeWrapper.<a class="ae it" href="https://developer.android.com/reference/android/view/ContextThemeWrapper.html#applyOverrideConfiguration(android.content.res.Configuration)" rel="noopener ugc nofollow" target="_blank">applyOverrideConfiguration()</a></code>。不幸的是，这个API使用起来要复杂得多，因为它只能在对<code class="du ls lt lu li b">getResources()</code>的任何调用之前被调用。原来<code class="du ls lt lu li b">getResources()</code>被称为<strong class="iw hi"> lot </strong>，并且在活动生命周期的早期被称为<em class="js">。事实上，我找到的唯一可以称之为安全的地方是在<code class="du ls lt lu li b">attachBaseContext()</code>，这比<code class="du ls lt lu li b">onCreate()</code>要早得多。</em></p><p id="ee48" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">好了，我刚刚给你讲了很多关于DayNight内部的技术东西，那么这和<code class="du ls lt lu li b">setDefaultNightMode()</code>有什么关系呢？因为我们只能在<code class="du ls lt lu li b">attachBaseContext()</code>中调用<code class="du ls lt lu li b">applyOverrideConfiguration()</code>，这给了我们一个很小的窗口让<code class="du ls lt lu li b">setLocalNightMode()</code>工作，而不必重新创建活动。</p><p id="d2e6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">以前，您可以非常愉快地执行以下操作，而无需AppCompat重新创建活动:</p><pre class="ld le lf lg fd lh li lj lk aw ll bi"><span id="6823" class="lm kb hh li b fi ln lo l lp lq">public class MyActivity extends Activity {<br/>    <br/>    public void onCreate(Bundle icicle) {<br/>        super.onCreate(icicle);</span><span id="5f05" class="lm kb hh li b fi lr lo l lp lq">        getDelegate().setLocalNightMode(<br/>                AppCompatDelegate.MODE_NIGHT_YES);<br/>    }<br/>}</span></pre><p id="6b29" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">由于我们上面所说的，那个<strong class="iw hi">现在将</strong>在新版本的《白日之夜》中触发一个娱乐。事实上，任何对<code class="du ls lt lu li b">setLocalNightMode</code>的调用都会触发一次重新创建(如果主题改变的话)。</p><p id="907b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这就是为什么你现在更喜欢<code class="du ls lt lu li b">setDefaultNightMode()</code>的关键，以减少不必要的娱乐。因为它是一个静态方法，所以值总是可用的，并且不受活动生命周期的约束。该方法模拟了大多数应用程序想要做的事情，即提供应用程序范围的设置或首选项。</p><p id="6605" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这并不意味着使用<code class="du ls lt lu li b">setLocalNightMode</code>是错误的，只是将它用于它的本意:在单个活动中一次性覆盖。</p></div></div>    
</body>
</html>