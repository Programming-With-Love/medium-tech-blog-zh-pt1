<html>
<head>
<title>validator | Rule Based Validation Library in Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">验证器| Android中基于规则的验证库</h1>
<blockquote>原文：<a href="https://blog.kotlin-academy.com/validator-rule-based-validation-library-in-android-2058e8d6c27?source=collection_archive---------0-----------------------#2022-06-13">https://blog.kotlin-academy.com/validator-rule-based-validation-library-in-android-2058e8d6c27?source=collection_archive---------0-----------------------#2022-06-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div class="gh gi jk"><img src="../Images/bee0307b3c5ae840b1914a4e4141575a.png" data-original-src="https://miro.medium.com/v2/resize:fit:814/format:webp/1*cn26A5oRcBN4YK1gSMr1XQ.png"/></div></figure><p id="02e2" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">最近，我为我的所有输入编写了一个基于规则的验证结构。它非常灵活且易于管理。今天我将试着解释一下<strong class="jt io">验证器</strong>库。</p><p id="df17" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">导入</strong></p><figure class="kp kq kr ks gt jo"><div class="bz fp l di"><div class="kt ku l"/></div></figure><figure class="kp kq kr ks gt jo"><div class="bz fp l di"><div class="kt ku l"/></div></figure><p id="2775" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">验证器，</strong>由4个组件组成:</p><ul class=""><li id="5816" class="kv kw in jt b ju jv jy jz kc kx kg ky kk kz ko la lb lc ld bi translated">IValidatable</li><li id="1e6f" class="kv kw in jt b ju le jy lf kc lg kg lh kk li ko la lb lc ld bi translated">可验证的</li><li id="a96e" class="kv kw in jt b ju le jy lf kc lg kg lh kk li ko la lb lc ld bi translated">NotiftyType</li><li id="e50a" class="kv kw in jt b ju le jy lf kc lg kg lh kk li ko la lb lc ld bi translated">验证器</li></ul><h2 id="efcd" class="lj lk in bd ll lm ln dn lo lp lq dp lr kc ls lt lu kg lv lw lx kk ly lz ma mb bi translated">IValidatable</h2><p id="9cc7" class="pw-post-body-paragraph jr js in jt b ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk mg km kn ko ig bi translated">这是一个验证规则的接口。它包括输入、规则和当前错误文本。</p><p id="f56e" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">还有，这里有一个函数叫做<strong class="jt io">is valid(notifytype)。</strong>它必须覆盖实现IValidatable的函数。</p><p id="dcc2" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><code class="fe mh mi mj mk b">var input: String //input field value</code></p><p id="fa00" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><code class="fe mh mi mj mk b">var currentErrorText: String //invalid rule error text</code></p><p id="5ce5" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><code class="fe mh mi mj mk b">val rules: MutableList&lt;BaseValidatableRule&gt; //input's validatable rules</code></p><h2 id="890d" class="lj lk in bd ll lm ln dn lo lp lq dp lr kc ls lt lu kg lv lw lx kk ly lz ma mb bi translated">可验证的</h2><p id="2e14" class="pw-post-body-paragraph jr js in jt b ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk mg km kn ko ig bi translated">ValidatableRule从<strong class="jt io"> BaseValidatableRule扩展而来。</strong>现在可以使用通用规则进行输入验证了。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="2847" class="lj lk in mk b gy mp mq l mr ms">open class BaseValidatableRule (<br/>    open val errorMessage: String,<br/>    open val notifyType: NotifyType,<br/>    open val rule: (input: String) -&gt; Boolean<br/>)</span></pre><p id="7af9" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">BaseValidatableRule由3个属性组成:</p><ul class=""><li id="909c" class="kv kw in jt b ju jv jy jz kc kx kg ky kk kz ko la lb lc ld bi translated">错误消息</li><li id="66f5" class="kv kw in jt b ju le jy lf kc lg kg lh kk li ko la lb lc ld bi translated">notifyType</li><li id="aeba" class="kv kw in jt b ju le jy lf kc lg kg lh kk li ko la lb lc ld bi translated">规则→要返回的操作有效</li></ul><h2 id="3c4a" class="lj lk in bd ll lm ln dn lo lp lq dp lr kc ls lt lu kg lv lw lx kk ly lz ma mb bi translated">NotifyType</h2><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="f449" class="lj lk in mk b gy mp mq l mr ms">enum class NotifyType {<br/>    ON_VALUE_CHANGE,<br/>    ON_FOCUS_CHANGE,<br/>    ON_FORM_SUBMIT<br/>}</span></pre><p id="e021" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">表示开始表单验证的一种常见方式。我们可能希望在不同的用户交互上验证输入:文本改变、焦点丢失或表单主操作点击。</p><h2 id="f17e" class="lj lk in bd ll lm ln dn lo lp lq dp lr kc ls lt lu kg lv lw lx kk ly lz ma mb bi translated">验证器</h2><p id="77bd" class="pw-post-body-paragraph jr js in jt b ju mc jw jx jy md ka kb kc me ke kf kg mf ki kj kk mg km kn ko ig bi translated">神奇之处就在这里。一切都发生在验证器类中。它实现了<strong class="jt io"> IValidatable </strong>。</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="10e7" class="lj lk in mk b gy mp mq l mr ms">class Validator(<br/>    override var onValidation(Booelan, String?, NotifyType) -&gt; Unit<br/>) : IValidatable</span></pre><p id="900b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">验证程序需要对构造函数进行操作。动作是给我们验证值。(isValid，errorText，notifyType)</p><pre class="kp kq kr ks gt ml mk mm mn aw mo bi"><span id="0ad2" class="lj lk in mk b gy mp mq l mr ms">constructor(<br/>    vararg rules: BaseValidatableRule,<br/>    onValidation: (Boolean, String?, NotifyType) -&gt; Unit<br/>) : this(onValidation) {<br/>    this.rules.addAll(rules)<br/>}</span></pre><p id="52b7" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">您可以使用另一个带有<strong class="jt io">规则列表(vararg →一个或多个规则)</strong>和<strong class="jt io"> onValidation action、</strong>的构造函数，但是我推荐使用<strong class="jt io"> Builder。</strong></p><p id="0f61" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">类似于抽象类的验证器。它隐藏了普通的<strong class="jt io">逻辑的东西</strong>。</p><p id="5db2" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> isValid </strong>函数与notifyType <strong class="jt io">一起工作。</strong>通过notifyType 过滤规则<strong class="jt io">，开始匹配的验证控制。</strong></p><p id="a84f" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">如果<strong class="jt io"> filteredRules </strong>中任何规则的操作返回false，currentErrorText </strong>将更新。</p><blockquote class="mt mu mv"><p id="a91e" class="jr js mw jt b ju jv jw jx jy jz ka kb mx kd ke kf my kh ki kj mz kl km kn ko ig bi translated">错误文本仅在经过筛选的规则下更改，但它是一个适用于所有规则的有效控件。</p></blockquote><p id="0d20" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">输入或isFocused、validate函数的每个值更改都将由相关的NotifyType触发。</p><ul class=""><li id="96d1" class="kv kw in jt b ju jv jy jz kc kx kg ky kk kz ko la lb lc ld bi translated">输入更改→ NotifyType。开值变化</li><li id="02fd" class="kv kw in jt b ju le jy lf kc lg kg lh kk li ko la lb lc ld bi translated">isFocused change → NotifyType聚焦于变化</li></ul><blockquote class="mt mu mv"><p id="477f" class="jr js mw jt b ju jv jw jx jy jz ka kb mx kd ke kf my kh ki kj mz kl km kn ko ig bi translated">如果只选中NotifyType，则必须调用submitForm()函数。表单提交规则。它返回布尔isValid值。</p></blockquote><h2 id="181c" class="lj lk in bd ll lm ln dn lo lp lq dp lr kc ls lt lu kg lv lw lx kk ly lz ma mb bi translated">建设者</h2><figure class="kp kq kr ks gt jo"><div class="bz fp l di"><div class="kt ku l"/></div></figure><p id="8936" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">构建器，</strong>用很少的步骤创建验证实例的类。</p><ul class=""><li id="f601" class="kv kw in jt b ju jv jy jz kc kx kg ky kk kz ko la lb lc ld bi translated">用<strong class="jt io">添加规则</strong>添加一个或多个规则</li><li id="37ff" class="kv kw in jt b ju le jy lf kc lg kg lh kk li ko la lb lc ld bi translated">用<strong class="jt io"> addCollector </strong>添加数据收集器(输入更新、焦点更新)</li><li id="3d64" class="kv kw in jt b ju le jy lf kc lg kg lh kk li ko la lb lc ld bi translated">管理<strong class="jt io"> onValidate </strong>块中的验证结果</li><li id="2f4a" class="kv kw in jt b ju le jy lf kc lg kg lh kk li ko la lb lc ld bi translated">用<strong class="jt io"> build() </strong>获取验证实例</li></ul><p id="004b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">这就是关于<strong class="jt io">验证器的简要信息。如果你想了解更多，你应该去看看Github库。</strong></p><p id="5220" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated">不要保留你的拉取请求或关于它的消息。如果你喜欢<strong class="jt io">验证器，</strong>请滴👏还有⭐️ ⭐️</p><p id="dd79" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io"> Github: </strong></p><div class="na nb gp gr nc nd"><a href="https://github.com/mustafayigitt/validator" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd io gy z fp ni fr fs nj fu fw im bi translated">GitHub - mustafayigitt/validator:通知输入字段的基于类型的验证。</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">通知输入字段的基于类型的验证。通过创建一个帐户为mustafayigitt/validator开发做贡献…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">github.com</p></div></div><div class="nm l"><div class="nn l no np nq nm nr jp nd"/></div></div></a></div><p id="af1b" class="pw-post-body-paragraph jr js in jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ig bi translated"><strong class="jt io">领英:</strong></p><div class="na nb gp gr nc nd"><a href="https://www.linkedin.com/in/mustafayigitt/" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab fo"><div class="nf ab ng cl cj nh"><h2 class="bd io gy z fp ni fr fs nj fu fw im bi translated">Mustafa yi it-Android开发者- Apsiyon | LinkedIn</h2><div class="nk l"><h3 class="bd b gy z fp ni fr fs nj fu fw dk translated">查看Mustafa Yiğ it在全球最大的职业社区LinkedIn上的个人资料。穆斯塔法有4份工作列在…</h3></div><div class="nl l"><p class="bd b dl z fp ni fr fs nj fu fw dk translated">www.linkedin.com</p></div></div><div class="nm l"><div class="ns l no np nq nm nr jp nd"/></div></div></a></div><figure class="kp kq kr ks gt jo gh gi paragraph-image"><div role="button" tabindex="0" class="nu nv di nw bf nx"><div class="gh gi nt"><img src="../Images/e452e4fc7b1eea8b55443068d2db3db8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*ExZwKRzrcaf2GDll17v8Lw.gif"/></div></div></figure></div></div>    
</body>
</html>