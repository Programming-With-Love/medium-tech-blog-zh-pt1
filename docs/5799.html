<html>
<head>
<title>Using Azure Web Apps with Oracle Autonomous Database</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Oracle自治数据库使用Azure Web Apps</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/using-azure-web-apps-with-oracle-autonomous-database-1d7002bdd20e?source=collection_archive---------3-----------------------#2021-07-08">https://medium.com/oracledevs/using-azure-web-apps-with-oracle-autonomous-database-1d7002bdd20e?source=collection_archive---------3-----------------------#2021-07-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/8b548d540bb341a86bb6a59eebec7723.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AjP3MXj9Lx1QXvF_snimiQ.png"/></div></div></figure><p id="c4db" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">几年前，我写了一篇关于如何使用。NET框架和托管ODP.NET。从那时起，。NET(核心)和ODP.NET核心变得越来越受欢迎，发展速度超过。NET框架和托管ODP.NET。事实上，NuGet Gallery ODP.NET核心总下载量最近已经超过了托管ODP.NET下载量，尽管后者领先了几年。我认为这个结果是不可避免的。NET框架处于维护模式，所有新的创新都发生在。网(核心)。</p><p id="147d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">随着开发人员转向。NET(核心)，我创建了一个新的视频教程，演示如何将. NET 5和ODP.NET核心应用程序部署到连接到Oracle自治数据库的Azure。</p><figure class="jo jp jq jr fd ii"><div class="bz dy l di"><div class="js jt l"/></div><figcaption class="ju jv et er es jw jx bd b be z dx">Azure ASP.NET Core 5 and ODP.NET Core 21c and Oracle Autonomous Database tutorial</figcaption></figure></div><div class="ab cl jy jz go ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ha hb hc hd he"><p id="504d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">基本的配置步骤与两年前编写的旧教程非常相似。最大的不同和明显变得更容易的是Oracle ADB管理使用了<a class="ae jn" href="https://www.oracle.com/database/technologies/developer-tools/visual-studio/" rel="noopener ugc nofollow" target="_blank">Oracle Developer Tools for Visual Studio</a>。这些工具现在有一个Oracle云基础架构节点，用于执行自治数据库管理任务。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div class="er es kf"><img src="../Images/cafc64f998f7a2b748ec81dd938113e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:676/format:webp/1*UGZ_ZLNCKP78ko_V4ljiRQ.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx">Oracle Cloud Infrastructure node showing ADB instances in Visual Studio</figcaption></figure><p id="8b05" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在“数据连接”节点上，开发人员可以管理他们所有的ADB架构对象，类似于Visual Studio中的内部数据库管理体验。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div class="er es kg"><img src="../Images/9b823f67f8eddc5278c3a62cdca2ef3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:662/format:webp/1*6210KqlaDdUteWRXYyc1HA.png"/></div><figcaption class="ju jv et er es jw jx bd b be z dx">ADB data connections in Visual Studio</figcaption></figure><p id="8141" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你想了解更多，我的甲骨文同事Christian Shay写了一篇关于<a class="ae jn" rel="noopener" href="/oracledevs/visual-studio-integration-with-oracle-autonomous-database-7c6243eca329"> Oracle自治数据库与Visual Studio </a>集成的博客，提供了更多细节。</p></div><div class="ab cl jy jz go ka" role="separator"><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd ke"/><span class="kb bw bk kc kd"/></div><div class="ha hb hc hd he"><p id="fa2f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们回到手头的主题。</p><p id="eed6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以创建自己的Azure web应用程序，通过几个简单的步骤连接到ADB。无论是<a class="ae jn" href="https://www.nuget.org/packages/Oracle.ManagedDataAccess.Core/" rel="noopener ugc nofollow" target="_blank">ODP.NET核心</a>还是<a class="ae jn" href="https://docs.oracle.com/en-us/iaas/Content/Database/Concepts/adbfreeoverview.htm" rel="noopener ugc nofollow" target="_blank">甲骨文亚行</a>都是免费的。创建ADB实例后，使用Visual Studio按照以下步骤部署ASP.NET核心应用程序:</p><ol class=""><li id="c28a" class="kh ki hh ir b is it iw ix ja kj je kk ji kl jm km kn ko kp bi translated">创建一个新的空ASP.NET核心应用程序项目。</li><li id="76ec" class="kh ki hh ir b is kq iw kr ja ks je kt ji ku jm km kn ko kp bi translated">从NuGet画廊添加ODP.NET核心。</li><li id="a18d" class="kh ki hh ir b is kq iw kr ja ks je kt ji ku jm km kn ko kp bi translated">用来自<a class="ae jn" href="https://github.com/oracle/dotnet-db-samples/blob/master/session-demos/2021/odpcore-adb-azure/Startup.cs" rel="noopener ugc nofollow" target="_blank"> Oracle的示例代码替换Startup.cs的内容。NET GitHub站点</a>。</li><li id="7628" class="kh ki hh ir b is kq iw kr ja ks je kt ji ku jm km kn ko kp bi translated">提供应用程序的名称空间、用户密码、网络服务名称、TNS管理目录和钱包目录的值。这些目录应该位于您的本地计算机上，以便对web应用程序与ADB的连接进行初始测试。如果您没有使用ADB实例的标准管理帐户，请修改用户id。</li><li id="19fb" class="kh ki hh ir b is kq iw kr ja ks je kt ji ku jm km kn ko kp bi translated">从Visual Studio中运行web应用程序。此步骤提供了一个检查点，以确保应用程序和ADB配置正确。</li><li id="2226" class="kh ki hh ir b is kq iw kr ja ks je kt ji ku jm km kn ko kp bi translated">将<strong class="ir hi"> TnsAdmin </strong>(对于tnsnames.ora和sqlnet.ora)和<strong class="ir hi"> WalletLocation </strong>(对于cwallet.sso)目录值修改为这些文件将上传到的Azure web app目录(即D:\ home \ site \ wwwroot \&lt;TNS admin和wallet子目录&gt;)。</li><li id="b9e6" class="kh ki hh ir b is kq iw kr ja ks je kt ji ku jm km kn ko kp bi translated">将应用程序部署到Azure web应用程序服务。选择天蓝色<strong class="ir hi">基本</strong>或更高的定价级别。<strong class="ir hi">共享</strong>和<strong class="ir hi">自由</strong>等级不能使用本教程使用的基于文件的钱包。</li><li id="a9c7" class="kh ki hh ir b is kq iw kr ja ks je kt ji ku jm km kn ko kp bi translated">默认情况下，tnsnames.ora、sqlnet.ora和wallet文件不会作为整个项目的一部分部署到Azure。您可以手动部署这些文件，也可以修改。NET项目文件(即。csproj文件)，以便它们将与其他项目文件一起部署。例如，如果目录“DB”是您的项目本地存储这些Oracle文件的位置，请执行以下操作。NET项目文件添加:</li></ol><pre class="jo jp jq jr fd kv kw kx ky aw kz bi"><span id="c7b6" class="la lb hh kw b fi lc ld l le lf">&lt;ItemGroup&gt;<br/>    <strong class="kw hi">&lt;None Include="DB\**" CopyToPublishDirectory="Always"&gt;</strong><br/>&lt;/ItemGroup&gt;</span></pre><p id="55f1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">9.部署完成后，转到Azure门户来管理刚刚创建的web应用程序。点击<strong class="ir hi">配置。</strong>然后，点击<strong class="ir hi">新应用设置</strong>。添加值为“1”的“网站_加载_用户_配置文件”设置。点击<strong class="ir hi">确定</strong>然后点击<strong class="ir hi">保存</strong>应用新设置。此步骤允许web服务器使用基于文件的钱包。</p><p id="2667" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">10.一旦Azure重启web服务器，点击<strong class="ir hi">浏览</strong>链接。</p><p id="2b14" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您的Azure web应用程序现在将连接到ADB并检索销售历史(SH)架构数据。SH模式对于任何连接用户的所有共享ADB实例都是只读的。如果您使用专用ADB，您将需要为实例上的表提供您自己的查询。虽然该应用程序使用ODP.NET Core 21c和ASP.NET Core 5进行了测试，但预计它可以在新旧ODP.NET和。NET(核心)版本。</p></div></div>    
</body>
</html>