<html>
<head>
<title>Manage the state of your app using StateNotifier — Flutter 💙</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用state notifier-Flutter管理应用程序的状态💙</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/manage-the-state-of-your-app-using-statenotifier-flutter-cf0ed89984b2?source=collection_archive---------3-----------------------#2021-10-05">https://medium.com/google-developer-experts/manage-the-state-of-your-app-using-statenotifier-flutter-cf0ed89984b2?source=collection_archive---------3-----------------------#2021-10-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="59cf" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">我们已经看到了Bloc、Redux和许多可能已经使用了Provider。有一种类似于Provider的东西叫做StateNotifier，但是形式更简单。你可以说StateNotifier是Provider的包装器！因此，让我们看看如何使用StateNotifier来管理应用程序的状态🎉</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/52529813d9d0a970b8ba6d1d8b6d87e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Bc1JJ0YPDMCdYBhPdCIZg.png"/></div></div></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><p id="b333" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">状态管理是颤振中最重要的概念之一。但是为什么国家管理是重要的呢？基本上，当你的应用变得越来越复杂，越来越大的时候，应用的状态就变得越来越难以维护。我们希望从一个屏幕传递到另一个屏幕的数据变得更加复杂。这就是国家管理发挥作用的地方🚀</p><p id="3ed1" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">有很多状态管理包和技术可以帮助你管理你的状态。最近，我偶然发现了<strong class="jr hi"> StateNotifier </strong>，并想检查一下。我发现它超级容易理解和实现！在工作时，它具有相同的ValueNotifier和Provider概念。</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="186f" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">StateNotifier有2个主要的小部件:</h2><p id="c6e0" class="pw-post-body-paragraph jp jq hh jr b js lg ii ju jv lh il jx jy li ka kb kc lj ke kf kg lk ki kj kk ha bi translated"><strong class="jr hi">StateNotifier provider:</strong>state notifier provider相当于<code class="du ll lm ln lo b">ChangeNotifierProvider</code>但对于state notifier来说。它的主要任务是创建StateNotifier，当小部件从树中移除时，它会自动处理它！</p><p id="418a" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">state notifierbuilder:state notifierbuilder相当于来自Flutter的<code class="du ll lm ln lo b">ValueListenableBuilder</code>。您可以基于StateNotifier中更改的值重新构建小部件！</p><p id="9346" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">然而，StateNotifier还提供了其他一些小部件。现在，让我们看看同样的代码实现。我们将使用StateNotifier实现计数器应用程序！</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="b0b6" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">第0步:在你的pubspec.yaml文件中添加<a class="ae lp" href="https://pub.dev/packages/flutter_state_notifier" rel="noopener ugc nofollow" target="_blank"> flutter_state_notifier </a>和<a class="ae lp" href="https://pub.dev/packages/state_notifier" rel="noopener ugc nofollow" target="_blank"> state_notifier </a>。</h2><p id="e489" class="pw-post-body-paragraph jp jq hh jr b js lg ii ju jv lh il jx jy li ka kb kc lj ke kf kg lk ki kj kk ha bi translated">flutter_state_notifier用于访问各种小部件，如StateNotifierProvider、StateNotifierBuilder等。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><p id="fd53" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">步骤1:创建一个名为<strong class="jr hi"> counter_service.dart </strong>的文件来创建我们的功能助手类！</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="d5e1" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">这里，我们扩展了<strong class="jr hi"> StateNotifier </strong>,因为我们的状态将只是整数，所以我们提供的类型是int。我们需要将初始值传递给超类。当我们用<strong class="jr hi"> StateNotifier、</strong>扩展我们的<strong class="jr hi"> CounterService </strong>类时，我们可以访问一个名为<code class="du ll lm ln lo b"><strong class="jr hi">state</strong></code> <strong class="jr hi"> </strong>的setter，我们可以操纵它的值。</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="7dba" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">步骤2:用StateNotifierProvider包装MaterialApp</h2><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure><p id="0436" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">这里我们用<strong class="jr hi"> StateNotifierProvider包装了我们的<strong class="jr hi"> MaterialApp </strong>。</strong>有两个必需参数:create和child。我们需要在创建参数中传递扩展StateNotifier的类。这里我们有<strong class="jr hi"> CounterService </strong>类，需要提供给整个窗口小部件树。我们将0作为状态的初始值。</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="5b5b" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">步骤3:在home.dart文件中，创建一个<strong class="ak"> CounterService </strong>类的对象。</h2><pre class="ix iy iz ja fd ls lo lt lu aw lv bi"><span id="1acf" class="kl km hh lo b fi lw lx l ly lz">final CounterService _counterService = CounterService(0);</span></pre></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="522f" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">步骤4:用StateNotifierBuilder包装将要显示计数的文本小部件</h2><pre class="ix iy iz ja fd ls lo lt lu aw lv bi"><span id="dce1" class="kl km hh lo b fi lw lx l ly lz">StateNotifierBuilder(<br/>          stateNotifier: _counterService,<br/>          builder: (BuildContext context, int value, Widget? child){<br/>            return Text(<br/>              '$value',<br/>              style: TextStyle(fontSize: 50.0),<br/>            );<br/>          },<br/>        ),</span></pre><p id="f56c" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">这里有两个参数:stateNotifier和builder。stateNotifier接受状态更改为listen的StateNotifier类。这里，它将是我们在步骤3中创建的CounterService对象。构建器接受上下文、状态和子元素。这里我们的状态是一个整数值。</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="7fb9" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">第五步:现在，点击增量图标，就可以直接调用incrementCounter()函数了！</h2><pre class="ix iy iz ja fd ls lo lt lu aw lv bi"><span id="7ccf" class="kl km hh lo b fi lw lx l ly lz">IconButton(<br/>    onPressed: () =&gt; _counterService.incrementCounter(),<br/>    icon: Icon(Icons.add),<br/>    splashRadius: 0.1,<br/>),</span></pre></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><p id="2972" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">让我们看看我们的home.dart是怎样的，它有递增、递减和重置功能！</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lq lr l"/></div></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="2793" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">输出:</h2><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es ma"><img src="../Images/f0c442c421d72a66606a8add775cc934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*fGiOAs2xgvsjG1bK.gif"/></div></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><p id="0d2e" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">这是一篇关于如何使用StateNotifier管理应用程序状态的小文章。希望你喜欢这篇文章！</p><p id="92a1" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">如果你喜欢，你可以<a class="ae lp" href="https://www.buymeacoffee.com/abhishekdoshi26" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi">给我买杯咖啡</strong> </a> <strong class="jr hi">！</strong></p><figure class="ix iy iz ja fd jb er es paragraph-image"><a href="https://www.buymeacoffee.com/abhishekdoshi26"><div class="er es mb"><img src="../Images/f909059bfd9d1114c6aa901ba11e72b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7q0G9g-efuNlyqZa.png"/></div></a></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h1 id="462d" class="mc km hh bd kn md me mf kr mg mh mi kv in mj io ky iq mk ir lb it ml iu le mm bi translated">不要忘记通过以下方式与我联系:</h1><ul class=""><li id="59f8" class="mn mo hh jr b js lg jv lh jy mp kc mq kg mr kk ms mt mu mv bi translated"><a class="ae lp" href="https://www.instagram.com/abhishekdoshi26/" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi"> Instagram </strong> </a></li><li id="0cb7" class="mn mo hh jr b js mw jv mx jy my kc mz kg na kk ms mt mu mv bi translated"><a class="ae lp" href="https://twitter.com/AbhishekDoshi26" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi">推特</strong> </a></li><li id="bd62" class="mn mo hh jr b js mw jv mx jy my kc mz kg na kk ms mt mu mv bi translated"><a class="ae lp" href="https://www.linkedin.com/in/AbhishekDoshi26" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi">领英</strong> </a></li><li id="dc82" class="mn mo hh jr b js mw jv mx jy my kc mz kg na kk ms mt mu mv bi translated"><a class="ae lp" href="https://github.com/AbhishekDoshi26" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi"> GitHub </strong> </a></li></ul></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><blockquote class="nb"><p id="58f1" class="nc nd hh bd ne nf ng nh ni nj nk kk dx translated">不要停止，直到你呼吸！💙<br/> -阿布舍克·多希</p></blockquote></div></div>    
</body>
</html>