<html>
<head>
<title>Getting Started with Cypress.io — Part 2, Creating your first project.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Cypress.io入门—第2部分，创建您的第一个项目。</h1>
<blockquote>原文：<a href="https://medium.com/globant/getting-started-with-cypress-io-part-2-creating-your-first-project-1e09f6dc38db?source=collection_archive---------0-----------------------#2021-02-04">https://medium.com/globant/getting-started-with-cypress-io-part-2-creating-your-first-project-1e09f6dc38db?source=collection_archive---------0-----------------------#2021-02-04</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/fb37ecf028a1762bc93896c36ddfa4d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pcHJJV9UekpgJBCXMbtqYw.png"/></div></div></figure><p id="7f72" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在开始阅读<strong class="ir hi">cypress . io入门—第2部分之前，</strong>请考虑看一下<a class="ae jn" rel="noopener" href="/globant/getting-started-with-cypress-io-part-1-introduction-566b7c8ce37e"><strong class="ir hi">cypress . io入门—第1部分</strong> </a> <strong class="ir hi">，</strong>在这里，我将介绍这个伟大的工具，分享我对它的特性以及缺点的想法和发现。如果Cypress.io是您项目的正确选择，这可能会帮助您做出决定。</p><p id="64d0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">开始之前，请确保您的计算机上安装了节点和npm，如果没有，请根据您的操作系统遵循以下指南:</p><ul class=""><li id="a8a6" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated"><a class="ae jn" href="https://treehouse.github.io/installation-guides/mac/node-mac.html" rel="noopener ugc nofollow" target="_blank"> Mac安装指南</a>。</li><li id="3990" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated"><a class="ae jn" href="https://treehouse.github.io/installation-guides/windows/node-windows.html" rel="noopener ugc nofollow" target="_blank"> Windows安装指南</a>。</li></ul><p id="c38d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们开始吧…</p></div><div class="ab cl kc kd go ke" role="separator"><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh ki"/><span class="kf bw bk kg kh"/></div><div class="ha hb hc hd he"><p id="2d9a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 1-创建一个项目。</strong></p><p id="78fb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">选择一个目录来创建一个新文件夹，打开一个终端并移动到项目目录，然后键入<strong class="ir hi"> <em class="kj"> npm init </em> </strong>并按照实用程序向导创建项目的package.json。</p><p id="c2fd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 2-安装依赖项。</strong></p><p id="4581" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一旦步骤1完成，package.json就创建好了。给它添加下面的依赖项，并在终端中执行<strong class="ir hi"> <em class="kj">纱安装</em> </strong>或<strong class="ir hi"> <em class="kj"> npm安装</em> </strong> <em class="kj"> </em>。请确保所有终端命令都在项目目录中执行。</p><figure class="kk kl km kn fd ii"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="fb7e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 3-打开柏树滑道</strong>。</p><p id="ff4b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">键入<strong class="ir hi"> <em class="kj">纱柏开</em> </strong>或<strong class="ir hi"> <em class="kj"> npm跑柏</em> </strong> <em class="kj">开</em>端子。<br/> Cypress runner将被打开，此时一个名为<em class="kj"> cypress </em>的新文件夹将被添加到您的项目中。在这个新文件夹中，您还会看到一个<em class="kj"> integration/examples </em>目录，其中包含几个帮助您理解cypress内置命令如何工作的文件。我真的建议花些时间看看这些文件。</p><p id="930e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请参考Cypress.io推荐的<a class="ae jn" href="https://docs.cypress.io/guides/core-concepts/writing-and-organizing-tests.html#Folder-Structure" rel="noopener ugc nofollow" target="_blank">文件夹结构</a>，所有这些文件夹也是第一次运行Cypress时默认创建的。</p><p id="1371" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 4-环境管理。</strong></p><p id="ccfc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这是通过上面package.json依赖项中已经列出的<em class="kj">配置</em>模块来管理的。</p><ul class=""><li id="07b1" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">打开cypress/plugins/index.js文件，插入如下代码:</li></ul><figure class="kk kl km kn fd ii"><div class="bz dy l di"><div class="ko kp l"/></div></figure><ul class=""><li id="9adf" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">创建以下文件，这只是一个示例假设您有生产和登台环境，您可以根据您拥有的环境随意命名这些文件:</li></ul><pre class="kk kl km kn fd kq kr ks kt aw ku bi"><span id="8be2" class="kv kw hh kr b fi kx ky l kz la">default.json</span><span id="78e3" class="kv kw hh kr b fi lb ky l kz la">production.json</span><span id="1b5d" class="kv kw hh kr b fi lb ky l kz la">stage.json</span></pre><p id="8652" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">下面只是这些文件中属性的一个示例:</p><figure class="kk kl km kn fd ii"><div class="bz dy l di"><div class="ko kp l"/></div></figure><ul class=""><li id="038f" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">要针对特定环境运行执行测试，请执行以下操作:</li></ul><pre class="kk kl km kn fd kq kr ks kt aw ku bi"><span id="f243" class="kv kw hh kr b fi kx ky l kz la">export NODE_ENV=production yarn cypress-open</span></pre><ul class=""><li id="99c6" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">要在不同的环境中执行，只需运行:</li></ul><pre class="kk kl km kn fd kq kr ks kt aw ku bi"><span id="f1d8" class="kv kw hh kr b fi kx ky l kz la">export NODE_ENV=stage yarn cypress-open</span></pre><p id="61c2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">注</strong>。如果没有值传递给NODE_ENV，default.json属性将被视为默认值。更多详情请参考<a class="ae jn" href="https://www.npmjs.com/package/config" rel="noopener ugc nofollow" target="_blank">配置</a>设置。</p><p id="5b3e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 5-创建你的第一个测试。</strong></p><p id="c96d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">测试被添加到cypress/integration目录中，您可以根据需要添加子文件夹来组织您的测试。我为这个例子创建了一个演示文件夹。</p><p id="0eb9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在集成目录下创建一个新文件，例如demo_spec.js。</p><figure class="kk kl km kn fd ii"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="8168" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要执行您的测试，您可以通过执行<em class="kj"> yarn cypress open </em>并单击您的测试来启动测试运行程序，或者在CLI中使用<strong class="ir hi"><em class="kj">yarn cypress run-spec ' cypress/integration/demo/demo _ spec . js</em></strong><em class="kj">'，</em>记住添加您的NODE_ENV。</p><p id="4541" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 6-设置mochawesome报告。</strong></p><p id="cee2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该报告所需的模块已经在上面的package.json依赖项中列出，它们是<em class="kj"> mocha </em>、<em class="kj">mochaawe</em>、<em class="kj">mochaawe-merge</em>和<em class="kj">mochaawe-report-generator</em>。</p><p id="7fe4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">注意，我使用cypress api来定义cli属性，清理以前的报告文件并生成新的报告。</p><p id="a367" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">还要注意的是，有不同的方法来设置mochawesome report，并且有许多文章描述了如何做，我在下面添加了具体的步骤和定制，我是为了这个演示而做的:</p><p id="24b6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">一、</strong>安装摩卡模块。</p><p id="ad8f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">二。将以下内容添加到cypress.json中</strong></p><figure class="kk kl km kn fd ii"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="650d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">三。</strong>一旦测试失败，直观地看到发生了什么是有帮助的，所以让我们将失败图像插入到报告中，将下面的代码添加到cypress/support/index.js文件中:</p><figure class="kk kl km kn fd ii"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="88dc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">四。在你的项目根目录下创建一个名为reports的新文件夹，git忽略它的内容。这是报告及其资产将被添加的位置，您可以更改报告位置，只需确保更新cypress.json文件上的reportDir属性。</strong></p><p id="17bf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> V. </strong>最后，在项目的根目录下创建这个文件:runner.js. <br/>这个文件使用cypress API来运行测试，同时清理以前的报告、资产，并执行mocha合并过程。这是一个可选步骤，但如果您决定不使用它，请记住，您将需要手动或在单独的脚本中清理您现有的报告文件，并执行所需的合并过程，以在单个报告中获得所有规格结果。关于合并步骤的更多细节，请参考<a class="ae jn" href="https://www.npmjs.com/package/mochawesome-merge" rel="noopener ugc nofollow" target="_blank"> mochawesome-merge </a>。</p><p id="9e87" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在runner.js中插入以下代码:</p><figure class="kk kl km kn fd ii"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="6088" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要使用runner.js执行您的规范，请在CLI中运行以下脚本:</p><pre class="kk kl km kn fd kq kr ks kt aw ku bi"><span id="6c3e" class="kv kw hh kr b fi kx ky l kz la">node runner -s ‘cypress/integration/demo/*_spec.js’</span></pre><p id="6f86" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">七。</strong>执行规范后，检查mochawesome.html报告是否创建在reports/mochawesome-report目录下。看起来是这样的:</p><figure class="kk kl km kn fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lc"><img src="../Images/58866bee42bac2edae524e56cbf7c60b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qdGzujT-kgjxd--i"/></div></div></figure><p id="649b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> 7-林挺设置。</strong></p><p id="34e1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在你的项目中有一个linter是一个很好的实践，可以确保人们遵循标准，并且在项目的贡献者之间有一致性。对于Cypress.io，我使用已经在上面的package.json依赖项中列出的eslint-plugin-cypress模块。</p><p id="db3e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">设置</strong>:</p><p id="85d8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> I. </strong>在项目目录下创建一个. eslintrc.json文件，并在下面添加代码:</p><figure class="kk kl km kn fd ii"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="d97a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">注意:我显式地添加了默认的cypress规则，只是为了你的可见性和让你决定什么对你的项目有意义，你也可以从任何其他林挺设置中扩展。</p><p id="68ff" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">二。作为一个可选步骤，我建议添加一个. eslintignore文件，并添加您希望linter忽略的文件。示例:</strong></p><figure class="kk kl km kn fd ii"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="1418" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">三。</strong>在您的IDE中安装eslint扩展。在我的例子中，我使用的是VS代码。</p><p id="3bee" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">四。最后，我在package.json上添加了以下脚本:</strong></p><pre class="kk kl km kn fd kq kr ks kt aw ku bi"><span id="e69e" class="kv kw hh kr b fi kx ky l kz la">“lint”: “eslint \”cypress/**/*.js\””,</span><span id="953a" class="kv kw hh kr b fi lb ky l kz la">“lint-fix”: “eslint — fix \”cypress/**/*.js\””,</span></pre><p id="3d60" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">第一个将分析您的代码，并在您的终端中抛出错误/警告。第二个将根据您的设置直接修复它们。</p><p id="19a7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要执行这些脚本，在你的终端中输入yarn <script name="">,然后你会看到linter的结果。&lt;/root&gt;</script></p><p id="857f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">你已经有了一个简单的基础项目，可以开始编写一些测试了。</p><p id="1d4e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">有很多事情可以用Cypress.io来完成，当然可以添加到这个项目中来改进它，例如与CI、docker设置、其他报告工具、可视化测试插件等的集成，这样做的目的只是给你一个非常简单的例子，让你开始并探索它提供的一些很棒的特性。</p><p id="efbe" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Cypress.io是一个很棒的自动化工具，它很容易设置，只需几个步骤就能让你在很短的时间内上手。它不依赖于JavaScript生态系统，基本上你可以测试任何在浏览器中运行的东西。有各种各样的插件可以让你的自动化项目更加健壮，拥有更多的特性。更不用说他们的测试运行器是创建和调试您的测试的伟大工具。</p><p id="9f4f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Cypress.io文档也非常好，你可以找到很多例子和底层细节，关于每个命令如何工作，它允许的属性和它产生的结果。此外，Cypress.io社区发展迅速，你可以很容易地找到支持。</p><p id="32da" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">另一方面，请考虑我上面列出的缺点，例如，如果您的应用程序使用选项卡或多浏览器来管理流，或者由于特定的DOM限制，必须在特定的不受支持的浏览器上进行测试，那么您可能需要评估其他工具。</p><p id="35b2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后，我鼓励你查看一下<a class="ae jn" href="https://docs.cypress.io/guides/references/configuration.html" rel="noopener ugc nofollow" target="_blank">配置文件文档</a>，这样你就可以根据你的需求定制你的项目。</p><p id="914e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如有任何问题，请随时拨打mario.gr@globant.com的<a class="ae jn" href="mailto:mario.gr@globant.com" rel="noopener ugc nofollow" target="_blank">与我联系。</a></p><p id="c392" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">谢谢！</p><p id="7deb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Mario Garcia——Globant QE技术经理。</p></div></div>    
</body>
</html>