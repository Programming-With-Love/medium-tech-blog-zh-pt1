<html>
<head>
<title>NewSQL — The Next Evolution in Databases</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">new SQL——数据库的下一次发展</h1>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/newsql-the-next-evolution-in-databases-19109973ee53?source=collection_archive---------0-----------------------#2019-10-30">https://medium.com/capital-one-tech/newsql-the-next-evolution-in-databases-19109973ee53?source=collection_archive---------0-----------------------#2019-10-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="ddb4" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">TiDB、CockroachDB、FaunaDB和Vitess之间的一些异同</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/6d23f58711502ec30660010c4c986273.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Tx77bc0YkRdqPvt-"/></div></div></figure><p id="6275" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">你可能想知道这个新的流行词是什么？为了理解它，我们必须简要回顾一下数据库的发展历史。</p><h1 id="250a" class="kf kg hh bd kh ki kj kk kl km kn ko kp in kq io kr iq ks ir kt it ku iu kv kw bi translated">SQL和RDBMS时代</h1><p id="d774" class="pw-post-body-paragraph ji jj hh jk b jl kx ii jn jo ky il jq jr kz jt ju jv la jx jy jz lb kb kc kd ha bi translated">70年代初，IBM推出了用于操作数据的<a class="ae lc" href="https://www.w3schools.com/sql/" rel="noopener ugc nofollow" target="_blank"> <strong class="jk hi"> SQL </strong> </a> ( <strong class="jk hi"> S </strong>结构化<strong class="jk hi"> Q </strong>查询<strong class="jk hi"> L </strong>语言)。这个想法开始流行，很多公司采用了SQL介绍自己实现的<a class="ae lc" href="https://en.wikipedia.org/wiki/Relational_database_management_system" rel="noopener ugc nofollow" target="_blank"><strong class="jk hi">RDBMS</strong></a>(<strong class="jk hi">R</strong>relational<strong class="jk hi">D</strong>ATA<strong class="jk hi">b</strong>ase<strong class="jk hi">M</strong>management<strong class="jk hi">S</strong>systems)。这包括Oracle公司的Oracle、IBM公司的Informix、DB2和开源的MySQL。</p><p id="e08c" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">在RDBMS中，数据是以行和列的结构化表格格式存储的，目的是满足<a class="ae lc" href="https://en.wikipedia.org/wiki/ACID_(computer_science)" rel="noopener ugc nofollow" target="_blank"><strong class="jk hi"/></a>(<strong class="jk hi">A</strong>tomi city，<strong class="jk hi">C</strong>consistency，<strong class="jk hi"> I </strong> solation，<strong class="jk hi"> D </strong> urability)属性。RDBMS/SQL能够实现ACID属性，因为数据保存在一个大型数据库服务器中，这意味着在这些情况下数据一致性不是问题。但是随着90年代互联网的爆炸式发展，产生的数据量呈指数级增长。数据的激增导致了一种新的范式— <strong class="jk hi"> NoSQL </strong></p><h1 id="42ac" class="kf kg hh bd kh ki kj kk kl km kn ko kp in kq io kr iq ks ir kt it ku iu kv kw bi translated">NoSQL时代</h1><p id="5cc8" class="pw-post-body-paragraph ji jj hh jk b jl kx ii jn jo ky il jq jr kz jt ju jv la jx jy jz lb kb kc kd ha bi translated">NoSQL数据库是围绕在分布式环境中扩展数据的概念而设计的。在NoSQL数据库中，在不同的远程机器上总是有数据的副本。这些数据库是使用<a class="ae lc" href="https://en.wikipedia.org/wiki/CAP_theorem" rel="noopener ugc nofollow" target="_blank"> CAP定理</a>作为主干设计的。这个定理表明，在<em class="ke">一致性</em>、<em class="ke">可用性</em>和<em class="ke">分区容差</em>之间，在任何给定的时间只能实现这三个方面中的两个。这些数据库利用<a class="ae lc" href="https://en.wikipedia.org/wiki/Eventual_consistency" rel="noopener ugc nofollow" target="_blank">最终一致性</a>保证读取操作接收最近的写入。</p><p id="d573" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">数据的发展和分布式系统的成熟导致NoSQL数据库慢慢渗透到RDBMS市场。<a class="ae lc" href="https://en.wikipedia.org/wiki/MongoDB" rel="noopener ugc nofollow" target="_blank"> MongoDB </a>、<a class="ae lc" href="https://en.wikipedia.org/wiki/Apache_Cassandra" rel="noopener ugc nofollow" target="_blank"> Cassandra </a>、<a class="ae lc" href="https://en.wikipedia.org/wiki/Redis" rel="noopener ugc nofollow" target="_blank"> Redis </a>都是大家可能比较熟悉的NoSQL热门数据库。</p><h1 id="7888" class="kf kg hh bd kh ki kj kk kl km kn ko kp in kq io kr iq ks ir kt it ku iu kv kw bi translated">NewSQL简介</h1><p id="e771" class="pw-post-body-paragraph ji jj hh jk b jl kx ii jn jo ky il jq jr kz jt ju jv la jx jy jz lb kb kc kd ha bi translated">尽管NoSQL数据库的各种变体仍在继续使用，但与NoSQL并行出现了另一种范式— <strong class="jk hi"> NewSQL </strong>。NewSQL承诺结合RDBMS的好处(强一致性)和NoSQL的好处(可伸缩性)；它主要通过新的架构模式和高效的SQL存储引擎来实现这一点。</p><p id="f2e3" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">大多数当前的NewSQL数据库都是基于Google的<a class="ae lc" href="https://static.googleusercontent.com/media/research.google.com/en//archive/spanner-osdi2012.pdf" rel="noopener ugc nofollow" target="_blank"> Spanner数据库</a>和耶鲁大学的<a class="ae lc" href="http://cs.yale.edu/homes/thomson/publications/calvin-sigmod12.pdf" rel="noopener ugc nofollow" target="_blank">Calvin:Fast Distributed Database Systems</a>等学术论文中的理论。Spanner是Google的可扩展、多版本、全球分布、同步复制的数据库。它是第一个在全球范围内分发数据并支持外部一致的分布式事务的系统。耶鲁大学的<em class="ke"> Calvin </em>学术论文是关于利用确定性来保证分布式事务的主动复制和完全ACID合规性，而无需两阶段提交。</p><p id="1d53" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><a class="ae lc" href="https://github.com/pingcap/tidb" rel="noopener ugc nofollow" target="_blank"> TiDB </a>，<a class="ae lc" href="https://github.com/cockroachdb/cockroach" rel="noopener ugc nofollow" target="_blank">cocroach db</a>，<a class="ae lc" href="https://fauna.com/faunadb" rel="noopener ugc nofollow" target="_blank"> FaunaDB </a>，<a class="ae lc" href="https://github.com/vitessio/vitess" rel="noopener ugc nofollow" target="_blank"> Vitess </a>是几个领先的NewSQL数据库。对于如何确保与可伸缩架构的高度一致性，每个数据库实现都有自己的看法。让我们深入了解一下。</p><p id="9d7e" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><strong class="jk hi"> TiDB </strong></p><p id="21f3" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">TiDB是一个开源数据库，支持分布式HTAP(混合事务和分析处理)，并与MySQL兼容。<a class="ae lc" href="https://pingcap.com/en/" rel="noopener ugc nofollow" target="_blank"> PingCap </a>是支持TiDB的公司。初始版本于2017年10月发布，其当前稳定版本为2.1.9。</p><p id="7b22" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">TiDBs的突出特点是:</p><ul class=""><li id="001e" class="ld le hh jk b jl jm jo jp jr lf jv lg jz lh kd li lj lk ll bi translated"><strong class="jk hi">混合</strong> — TiDB支持分析处理(OLAP)和事务处理(OLTP)工作负载。这意味着不需要进行从应用事务数据库到分析数据库的ETL。TiDB的存储层<a class="ae lc" href="https://github.com/tikv/tikv" rel="noopener ugc nofollow" target="_blank"> TiKV </a>由用于OLTP的TiDB集群访问，由用于OLAP的本机支持的<a class="ae lc" href="https://github.com/pingcap/tispark" rel="noopener ugc nofollow" target="_blank"> TiSpark </a>访问。</li><li id="d929" class="ld le hh jk b jl lm jo ln jr lo jv lp jz lq kd li lj lk ll bi translated"><strong class="jk hi"> Cloud Native </strong> — TiDB设计为在云中运行(公共、私有和混合)，其存储层<a class="ae lc" href="https://github.com/tikv/tikv" rel="noopener ugc nofollow" target="_blank"> TiKV </a>已被Cloud Native Computing Foundation接受为沙盒项目。</li><li id="0d30" class="ld le hh jk b jl lm jo ln jr lo jv lp jz lq kd li lj lk ll bi translated"><strong class="jk hi"> MySQL兼容</strong> —应用程序可以将TiDB视为MySQL服务器，并使用其现有的客户端库进行连接，而无需从应用程序端进行任何更改。</li><li id="786d" class="ld le hh jk b jl lm jo ln jr lo jv lp jz lq kd li lj lk ll bi translated"><strong class="jk hi">更少的ETL </strong> —由于TiDB同时作为OLTP和OLAP运行，因此不需要从OLTP到OLAP进行ETL。</li></ul><h1 id="8a0f" class="kf kg hh bd kh ki kj kk kl km kn ko kp in kq io kr iq ks ir kt it ku iu kv kw bi translated">CockroachDB</h1><p id="d860" class="pw-post-body-paragraph ji jj hh jk b jl kx ii jn jo ky il jq jr kz jt ju jv la jx jy jz lb kb kc kd ha bi translated"><em class="ke">“cocroach db是一个分布式SQL开源数据库，构建在事务性和强一致性的键值存储之上。它水平缩放；在磁盘、机器、机架甚至数据中心故障中幸存下来，只需最少的中断和手动干预；支持强一致性的ACID事务；并为结构化、操作和查询数据提供了熟悉的SQL API。”</em>——<a class="ae lc" href="https://github.com/cockroachdb/cockroach" rel="noopener ugc nofollow" target="_blank">来自蟑螂GitHub </a>。</p><p id="10a4" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><a class="ae lc" href="https://www.cockroachlabs.com/" rel="noopener ugc nofollow" target="_blank">蟑螂实验室</a>是支持CockroachDB的公司。初始版本于2015年9月发布，其当前稳定版本为19.1.1。</p><p id="0b0c" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">CockroachDB的显著特点是:</p><ul class=""><li id="e217" class="ld le hh jk b jl jm jo jp jr lf jv lg jz lh kd li lj lk ll bi translated"><strong class="jk hi"> SQL兼容</strong> —尽管CockroachDB拥有分布式的、强一致性的、事务性的键值存储，但它的外部API是标准的SQL兼容的。</li><li id="e777" class="ld le hh jk b jl lm jo ln jr lo jv lp jz lq kd li lj lk ll bi translated"><strong class="jk hi">多活动可用性</strong>—cocroach db的可用性模型被称为<em class="ke">“多活动可用性”</em>。多活动可用性提供了无冲突地读写群集中每个节点的好处。多个副本运行相同的服务，流量被路由到所有副本。如果任何一个副本出现故障，其他副本只需处理路由到它的流量。</li><li id="68fc" class="ld le hh jk b jl lm jo ln jr lo jv lp jz lq kd li lj lk ll bi translated"><strong class="jk hi">在线模式更改</strong>—cocroach db提供了一个内置的在线模式更改特性；一种更新表模式的简单方法，不会给应用程序带来任何负面影响。对表模式的更改在数据库运行时发生。架构更改作为后台进程运行，不锁定基础表数据。这使得应用程序查询可以正常执行，而不会对读/写产生任何影响。</li></ul><h1 id="4b53" class="kf kg hh bd kh ki kj kk kl km kn ko kp in kq io kr iq ks ir kt it ku iu kv kw bi translated">FaunaDB</h1><p id="63c7" class="pw-post-body-paragraph ji jj hh jk b jl kx ii jn jo ky il jq jr kz jt ju jv la jx jy jz lb kb kc kd ha bi translated"><em class="ke">“FaunaDB是一个现代分布式操作数据库，用于以云和容器为中心的环境。它是世界上第一个受Calvin启发的商业数据库，Calvin是一个用于多区域环境的严格可序列化的事务协议。”</em>——<a class="ae lc" href="https://docs.fauna.com/fauna/current/introduction.html" rel="noopener ugc nofollow" target="_blank">来自FaunaDB网站</a>。</p><p id="e3d8" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><a class="ae lc" href="https://fauna.com/company" rel="noopener ugc nofollow" target="_blank"> Fauna </a>是支持FaunaDB的公司，他们提供FaunaDB的本地、云和无服务器产品。</p><p id="fb06" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">FaunaDB的显著特征是:</p><ul class=""><li id="151e" class="ld le hh jk b jl jm jo jp jr lf jv lg jz lh kd li lj lk ll bi translated"><strong class="jk hi">主动-主动</strong> — FaunaDB支持无主控、多云、主动-主动架构，可帮助应用实现100%的数据库正常运行时间。</li><li id="1813" class="ld le hh jk b jl lm jo ln jr lo jv lp jz lq kd li lj lk ll bi translated"><strong class="jk hi">多模型</strong> — FaunaDB可以管理多种数据模型，如关系、图形和文档。</li><li id="675e" class="ld le hh jk b jl lm jo ln jr lo jv lp jz lq kd li lj lk ll bi translated"><strong class="jk hi">数据暂时性</strong> — FaunaDB提供基于快照的存储引擎，可在可配置的时间段内保留历史数据，并允许纠正快照中的数据错误。</li><li id="7634" class="ld le hh jk b jl lm jo ln jr lo jv lp jz lq kd li lj lk ll bi translated"><strong class="jk hi">水平可扩展性</strong> — FaunaDB支持水平可扩展性，允许您在不中断同一站点或全球数据中心内的应用服务的情况下添加和删除节点。</li></ul><h1 id="6966" class="kf kg hh bd kh ki kj kk kl km kn ko kp in kq io kr iq ks ir kt it ku iu kv kw bi translated">维特斯</h1><p id="9dad" class="pw-post-body-paragraph ji jj hh jk b jl kx ii jn jo ky il jq jr kz jt ju jv la jx jy jz lb kb kc kd ha bi translated"><em class="ke">“Vitess是一个开源的数据库集群系统，通过广义分片实现MySQL的横向扩展。”</em> — <a class="ae lc" href="https://github.com/vitessio/vitess" rel="noopener ugc nofollow" target="_blank">来自Vitess GitHub </a>。</p><p id="96c8" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">Vitess诞生于YouTube的扩展需求，目前支持其后端。T21是支持开源项目的公司。Vitess目前的稳定版本是3.0。</p><p id="1d19" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">Vitess的显著特点是:</p><ul class=""><li id="413e" class="ld le hh jk b jl jm jo jp jr lf jv lg jz lh kd li lj lk ll bi translated"><strong class="jk hi">可扩展的MySQL </strong> —它引入了SQL的所有特性(连接、索引、聚合等)和NoSQL的所有优势。</li><li id="38d5" class="ld le hh jk b jl lm jo ln jr lo jv lp jz lq kd li lj lk ll bi translated"><strong class="jk hi">轻量级连接</strong>——与MySQL连接相比，Vitess的连接非常轻量级，可以轻松扩展。</li><li id="ae19" class="ld le hh jk b jl lm jo ln jr lo jv lp jz lq kd li lj lk ll bi translated"><strong class="jk hi">拓扑服务</strong> — <a class="ae lc" href="https://vitess.io/docs/user-guides/topology-service" rel="noopener ugc nofollow" target="_blank">拓扑服务</a>是一个元数据存储(ETCD或Zookeeper ),它包含关于运行服务器、分片方案和复制图的信息。由于拓扑服务，集群视图对于不同的客户端总是最新的和一致的。</li></ul><h1 id="199a" class="kf kg hh bd kh ki kj kk kl km kn ko kp in kq io kr iq ks ir kt it ku iu kv kw bi translated">NewSQL的未来</h1><p id="4ecf" class="pw-post-body-paragraph ji jj hh jk b jl kx ii jn jo ky il jq jr kz jt ju jv la jx jy jz lb kb kc kd ha bi translated">就像NoSQL在互联网时代获得的动力一样，这篇博客中讨论的NewSQL数据库也在获得动力，并且在公共云时代有很大的潜力。希望这个博客提供了一个关于NewSQL数据库的高层次概述，以帮助你开始这个旅程！</p><p id="52ee" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi">***</p><p id="f3ba" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><em class="ke">披露声明:2019首创一号。观点是作者个人的观点。除非本帖中另有说明，否则Capital One不隶属于所提及的任何公司，也不被这些公司认可。使用或展示的所有商标和其他知识产权是其各自所有者的财产。</em></p></div></div>    
</body>
</html>