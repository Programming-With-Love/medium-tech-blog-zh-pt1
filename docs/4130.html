<html>
<head>
<title>Using Firebase as a Real Time System</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Firebase作为实时系统</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/using-firebase-as-a-real-time-system-d360265aa678?source=collection_archive---------1-----------------------#2017-04-24">https://medium.com/google-developer-experts/using-firebase-as-a-real-time-system-d360265aa678?source=collection_archive---------1-----------------------#2017-04-24</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/a80a19912bbe4fa85bd46f4fd2888279.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8dexP4Kt2Rf5WieERfMgAw.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">I was captivated by exposed pictures since I was a child. Is a unique way to capture movement in a static image.</figcaption></figure><div class=""/><p id="a6ab" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">一年多以来，我一直是Firebase的忠实用户。当Parse.com宣布它将关闭时，我正在山景城作为导师参加谷歌的发布会。如果你没有听说过<a class="ae jr" href="https://developers.google.com/startups/" rel="noopener ugc nofollow" target="_blank">谷歌发射台</a>，它们非常棒。不仅是对初创公司，他们从不同领域(UX、科技、营销、货币化和融资……)的人那里获得了大量的建议和指导，对导师本身也是如此！除了了解世界各地顶尖的创业公司在做什么并帮助他们之外，我们还可以相互交谈，直接了解其他人正在经历的事情。它重组了一个摇摆不定的聚会，知识是交换的货币。这一直是那些你早早醒来并兴奋不已的事件之一，只是想到要和你前一天遇到的所有人继续联系。</p><p id="73eb" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">没关系，我记得在Parse关闭后，有很多关于Firebase及其未来的讨论。知道Firebase能够做什么，我无法想象Parse(一个旨在占据相同空间的竞争对手)为什么不成功。在我们的小宇宙中，我们总是有偏见，作为开发人员，我们最初的想法是“如果IT执行得这么好，为什么他们会有麻烦？”。你与属于其他宇宙的人合作得越深入，你就越意识到你需要在不同的领域取得成功。我不确定Parse失败在哪里，但事实是它的失败为Firebase的成功铺平了道路。</p><p id="3ffd" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我每周一都会在我的推特账户上发布一项民意调查。他们的目的不是代表对我的追随者的科学和细致的分析，而是作为一个有趣的活动和对我大脑的锻炼(每周提出一个非无意义的问题比你想象的要难！).我最近写了关于T4的文章。无论如何，作为一个Firebase爱好者，我认为询问一下投票参与者与Firebase的关系是有意义的(我也从我参加的许多社区活动中知道Firebase并不那么出名)。我得出了这个结果:</p><figure class="js jt ju jv fd hj"><div class="bz dy l di"><div class="jw jx l"/></div></figure><p id="a97c" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">从定义上来说，Twitter民意调查不能遵循一种科学的方法，但我想知道有多少投票支持最新选项的人确实知道Firebase，并选择不使用它。在那一刻，我意识到有多少人没有意识到一种工具的潜力，这种工具肯定可以提高他们开发软件的水平。</p><h2 id="b70f" class="jy jz hw bd ka kb kc kd ke kf kg kh ki je kj kk kl ji km kn ko jm kp kq kr ks bi translated">Firebase实时数据库</h2><p id="416c" class="pw-post-body-paragraph it iu hw iv b iw kt iy iz ja ku jc jd je kv jg jh ji kw jk jl jm kx jo jp jq ha bi translated">本文的目的并不是提供Firebase所有特性的详细概述，因为已经有大量资源可以帮助您实现这一目标。我可以特别向你推荐他们的<a class="ae jr" href="https://www.youtube.com/user/Firebase/playlists" rel="noopener ugc nofollow" target="_blank"> YouTube频道</a>，看起来很酷，比其他选项更具互动性。本文将向您解释如何使用Firebase来开发使用实时数据库的实时系统。</p><p id="53f5" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">当您开始使用Firebase时，您很快就会在浏览器中看到这个图表:</p><figure class="js jt ju jv fd hj er es paragraph-image"><div class="er es ky"><img src="../Images/5de7875666f618e449206a35b6b29797.png" data-original-src="https://miro.medium.com/v2/resize:fit:1350/format:webp/1*yKuMVhzEFnB4QmleAlZpXQ.png"/></div></figure><p id="c4bd" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">Firebase有一系列产品可以在三个领域帮助你:<strong class="iv hx">成长</strong>、<strong class="iv hx">盈利</strong>和<strong class="iv hx">发展</strong>。在这个最新的小组中，有一个叫做实时数据库的工具。这个数据库存储了NoSQL的信息(为了简单起见，把它想象成一个巨大的JSON文件)，托管在Google Cloud中。实时数据库的伟大之处主要由三点构成:</p><ol class=""><li id="a857" class="kz la hw iv b iw ix ja jb je lb ji lc jm ld jq le lf lg lh bi translated">它是实时的:在发送之前，没有对数据进行批处理和分组。当信息发生变化时，会在几毫秒内立即与云同步。</li><li id="77a5" class="kz la hw iv b iw li ja lj je lk ji ll jm lm jq le lf lg lh bi translated">离线处理:如果你是一个移动开发者，在线数据同步是一件事。谷歌专家Dan Lew <a class="ae jr" href="http://blog.danlew.net/2017/02/14/airplane-mode-enabling-trello-mobile-offline/" rel="noopener ugc nofollow" target="_blank">写了他们如何在Trello </a>实现这一点，你可以想象这不是一个简单的问题。您不必担心同步或冲突解决，Firebase会为您做到这一点。</li><li id="34cb" class="kz la hw iv b iw li ja lj je lk ji ll jm lm jq le lf lg lh bi translated">Automagic同步:设备可以订阅数据库的各个部分，并在数据库被更改时自动检索所需的数据。不再需要拉动和刷新。</li></ol><p id="ae86" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">Firebase实现这一点的神奇之处还在于代码的简单性。你不需要花时间编码。这可以在几分钟内实现。</p><p id="8c79" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为了简单起见，本教程将提供Android的代码。如你所知，Firebase确实为iOS和web提供了同样简单的SDK。让我们看看(撇开应用程序的配置和设置不谈)我们如何在实时数据库中写一个值(RTD从现在开始)</p><figure class="js jt ju jv fd hj"><div class="bz dy l di"><div class="ln jx l"/></div></figure><p id="4377" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果我们在客户端执行这段代码，RTD将反映其结构的变化:</p><figure class="js jt ju jv fd hj er es paragraph-image"><div class="er es lo"><img src="../Images/76dd0b3fbc74af26d579fbe583883e4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:430/format:webp/1*QIOrhOinH9Jf_0shxwE7lQ.png"/></div></figure><p id="b335" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">借助Firebase，我们还可以将节点推入我们的RTD。这样，RTD会生成一个唯一的密钥:</p><figure class="js jt ju jv fd hj"><div class="bz dy l di"><div class="ln jx l"/></div></figure><p id="3a0f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这也在RTD创建了结果，这次使用一个惟一的键作为ID:</p><figure class="js jt ju jv fd hj er es paragraph-image"><div class="er es lp"><img src="../Images/b1f832b66ec7d8b5c7f1132429351ba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*MpLCoeHTGjYGfXs7XhSkJQ.png"/></div></figure><p id="f7e4" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我之前提到过，无论RTD中的数据发生了什么变化，应用程序都会收到通知。使用下面的代码，我们将订阅指定节点(在本例中是节点“message”)中更改的任何值:</p><figure class="js jt ju jv fd hj"><div class="bz dy l di"><div class="ln jx l"/></div></figure><p id="2133" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">正如您在以下视频中看到的，当值发生变化时，应用程序会自动收到通知:</p><figure class="js jt ju jv fd hj"><div class="bz dy l di"><div class="lq jx l"/></div></figure><p id="4b37" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们现在有一些代码片段和一些基本的基础知识。RTD的第一个方法是“酷，一个我可以存储数据并与其他设备共享的数据库”。但是还有更多事情可以做。</p><p id="c31e" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">您可能会从这里得到一些关于如何节省时间和资源的想法，以便用Firebase实现一个实时系统。我们如何创造性地利用这一点？</p><h2 id="06a5" class="jy jz hw bd ka kb kc kd ke kf kg kh ki je kj kk kl ji km kn ko jm kp kq kr ks bi translated">使用Firebase进行实时聊天</h2><p id="f483" class="pw-post-body-paragraph it iu hw iv b iw kt iy iz ja ku jc jd je kv jg jh ji kw jk jl jm kx jo jp jq ha bi translated">实施聊天可能会很困难。我记得我的第一次尝试是在大学里实现一个Jabber客户端，当时在我看来这是一个非常复杂的任务。随着时间的推移，不同的协议出现了。XMPP始终是一个可以使用的明确候选，在探索它的过程中，我一直认为它过于复杂，并且随着研究的深入，它有一些局限性。无论选择哪种方案，这都是一项需要付出巨大努力的任务。</p><p id="9ae6" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果你一直在读这篇文章，你可能已经得出了自己的结论:用Firebase实现这一点可能很容易！幸运的是，事情会变得更加容易。Firechat是一个基于Firebase的开放实现。它可能不完全是你正在寻找的，但如果你想快速原型化一些东西来检查你的商业想法的假设，它绝对是一个很好的选择。</p><figure class="js jt ju jv fd hj er es paragraph-image"><div class="er es lr"><img src="../Images/c6de364f081f663a4227d199ee053b28.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*e8UCYEoVuwC7bDjXdeAesg.png"/></div></figure><h2 id="dfa5" class="jy jz hw bd ka kb kc kd ke kf kg kh ki je kj kk kl ji km kn ko jm kp kq kr ks bi translated">带有实时位置的地图</h2><p id="1421" class="pw-post-body-paragraph it iu hw iv b iw kt iy iz ja ku jc jd je kv jg jh ji kw jk jl jm kx jo jp jq ha bi translated">在我以前的公司，我不得不面对的任务之一是实现一个实时地图来显示两个设备的位置，这两个设备不断更新对方(想想类似优步的东西)。当时的任务也很乏味。我们当时采用的解决方案是一个MQTT服务器，它接收来自两个设备的更新，做出一些服务器端的决定，然后根据需要从各自的对应伙伴更新设备的位置。尽管结果很好，但我总是想到采用的解决方案，并希望能有更有效、更简单的方法。我希望我当时能知道Firebase。</p><p id="e661" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">您也可以想象用Firebase实现这一点相对容易。几年前，Blablacar的网络工程师Matthieu Moquet写了一篇关于如何做类似于<a class="ae jr" href="https://moquet.net/blog/realtime-geolocation-tracking-firebase/" rel="noopener ugc nofollow" target="_blank">的文章。虽然Firebase可能有一些限制(显然可以实现的服务器逻辑是有限的)，但我认为这是一个非常棒的原型工具，这是软件开发最重要的阶段之一。</a></p><p id="5db9" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">此外，Firebase为此创建了一个名为<a class="ae jr" href="https://github.com/firebase/geofire" rel="noopener ugc nofollow" target="_blank">地火</a>的库！这个库也是开源的，并且简化了创建你自己的位置感知应用的过程。</p><h2 id="b898" class="jy jz hw bd ka kb kc kd ke kf kg kh ki je kj kk kl ji km kn ko jm kp kq kr ks bi translated">等级</h2><p id="1788" class="pw-post-body-paragraph it iu hw iv b iw kt iy iz ja ku jc jd je kv jg jh ji kw jk jl jm kx jo jp jq ha bi translated">用过游戏吗？我过去和现在都是这样做的，其中一个基本要素是设计一个排名，可以根据每个玩家的位置或其他特征进行过滤。</p><p id="5806" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">有了Firebase，这也很容易做到。想象一下一个RTD，其中存储了每个用户玩过的游戏和总积分排名，每次用户得分时都会更新。</p><p id="3599" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx">进一步的想法？</strong></p><p id="e103" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我相信这只是RTD在Firebase中能为您做的事情的一个小小的介绍，许多其他人也可以从它提供的实时功能中受益。如果你在这个话题上钻研得更深，我绝对推荐你查看下面这个关于<a class="ae jr" href="https://www.youtube.com/watch?v=PUBnlbjZFAI" rel="noopener ugc nofollow" target="_blank"> Firebase Security </a>的视频，它将教你如何为用户创建角色和规则，以确定他们可以访问哪些内容。</p><p id="a023" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">编码快乐！</p><p id="545d" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我在我的<a class="ae jr" href="https://twitter.com/eenriquelopez" rel="noopener ugc nofollow" target="_blank">推特账户</a>中写下我对软件工程和生活的想法。如果你喜欢这篇文章或者它确实帮助了你，请分享它，喜欢它和/或留下评论。这是给业余作家加油的货币。</p></div></div>    
</body>
</html>