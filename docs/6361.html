<html>
<head>
<title>Flexible Daily Budgeting at Pinterest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Pinterest灵活的每日预算</h1>
<blockquote>原文：<a href="https://medium.com/pinterest-engineering/flexible-daily-budgeting-at-pinterest-91fc310c2e33?source=collection_archive---------1-----------------------#2022-11-15">https://medium.com/pinterest-engineering/flexible-daily-budgeting-at-pinterest-91fc310c2e33?source=collection_archive---------1-----------------------#2022-11-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="6cee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://www.linkedin.com/in/kjiang/" rel="noopener ugc nofollow" target="_blank"> Kelvin Jiang </a>，软件工程师，Ads Intelligence |<a class="ae jc" href="https://www.linkedin.com/in/keshavasubramanya/" rel="noopener ugc nofollow" target="_blank">kesh ava subra manya</a>，工程经理，Ads Intelligence |<a class="ae jc" href="https://www.linkedin.com/in/perrye-ogunwole-8358b357/" rel="noopener ugc nofollow" target="_blank">Perrye ogun wole</a>，产品经理，Ads Intelligence</p><h1 id="6916" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">介绍</h1><p id="813c" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">Pinterest的广告智能团队开发产品，帮助广告商从广告活动中获得最大价值。作为该计划的一部分，我们最近在公开测试中向美国广告商推出了灵活的每日预算(FDB)。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kg"><img src="../Images/8e24d957771f9c34a20eb15773b415ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l_T5XLRDdH8NvzJC"/></div></div><figcaption class="ks kt et er es ku kv bd b be z dx"><em class="kw">Figure 1: Flexible daily budgets option in the campaign create flow</em></figcaption></figure><p id="cbea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">FDB是一个自动化的广告产品，通过以自动化的方式在多天内分配每个活动的广告预算，使广告商受益。该产品的目标是:</p><ul class=""><li id="e498" class="kx ky hh ig b ih ii il im ip kz it la ix lb jb lc ld le lf bi translated">让广告商能够在一天的所有时间里</li><li id="d474" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">让广告客户能够“滚动”未支出的预算，同时在一段时间内达到他们的每日目标</li><li id="2983" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">通过允许广告活动在有更多机会的日子里花费更多，帮助广告商实现最低的每结果成本<strong class="ig hi"> </strong>,反之亦然</li></ul><h1 id="1acc" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">问题陈述和动机</h1><p id="0a8e" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">广告主在Pinterest上为广告活动设定预算有两种选择:</p><ul class=""><li id="817d" class="kx ky hh ig b ih ii il im ip kz it la ix lb jb lc ld le lf bi translated"><strong class="ig hi">每日预算:</strong>“我想每天花费不超过X美元”，可以是无限期的，也可以是在指定的时间段内</li><li id="f793" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated"><strong class="ig hi">终生预算:</strong>“我想在一段特定的时间内花费不超过$Y”</li></ul><p id="e9ee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于这两种预算类型，技术上的挑战是如何在分配的时间内花费广告商指定的预算金额，同时仍然全额花费预算。这一挑战通过我们的预算、节奏和投标系统得以解决。</p><p id="420f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我们以前的每日预算方案下，广告商的每日预算在我们的系统中变成了严格的每日限额。如果广告客户使用自动竞价，我们的定速和竞价系统将致力于在一天结束前达到这一严格的每日限额，留下一些缓冲，以防我们需要更多的时间来完成金额。如果我们在某一天没有花完所有的钱，未花完的预算就没了，我们第二天重新开始，目标是再花同样的钱。</p><p id="80b2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个系统可能会给广告商带来两个不同的问题。</p><p id="dd53" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">问题1:广告主A无法接触到他们的目标受众。</strong>让我们假设广告商A为持续两天的假日活动设定了100美元的每日预算。可能会发生以下情况:</p><p id="7db8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第一天:</p><ul class=""><li id="6aa8" class="kx ky hh ig b ih ii il im ip kz it la ix lb jb lc ld le lf bi translated">我们的目标是在21:00前花掉100美元</li><li id="b62c" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">在21:00，实际花费是99.07美元</li><li id="f0a0" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">在21:22，实际花费达到100美元，活动停止当天的花费</li></ul><p id="575e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第二天:</p><ul class=""><li id="186b" class="kx ky hh ig b ih ii il im ip kz it la ix lb jb lc ld le lf bi translated">我们的目标是在21:00前花掉100美元。</li><li id="54f7" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">在21:00，实际花费是99.59美元</li><li id="752c" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">在21:04，实际支出达到100美元，活动停止当天的支出</li></ul><p id="d485" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">广告商已经花费了他们整个活动的200美元预算，但在这两天，他们的广告在目标受众时区的下午4点左右停止显示，正好是广告商A知道他们最有可能出现在Pinterest上的时间。</p><p id="d6c6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">问题2:广告商B无法完成他们的预算。让我们假设广告商B为持续两天的假日活动设定了500美元的每日预算。可能会发生以下情况:</p><p id="79af" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第一天:</p><ul class=""><li id="24a5" class="kx ky hh ig b ih ii il im ip kz it la ix lb jb lc ld le lf bi translated">我们的目标是在21:00前花掉500美元</li><li id="66b3" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">在21:00，实际花费是399.52美元</li><li id="e18f" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">在23:59，实际花费是438.52美元</li><li id="c7da" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">广告客户调整他们的活动以提高绩效(即扩大他们的目标)</li></ul><p id="13da" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第二天:</p><ul class=""><li id="8190" class="kx ky hh ig b ih ii il im ip kz it la ix lb jb lc ld le lf bi translated">我们的目标是在21点前花掉500美元。</li><li id="4021" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">在21:00，实际花费是499.73美元</li><li id="85f7" class="kx ky hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">在21:02，实际支出达到500美元，活动停止当天的支出</li></ul><p id="8108" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">广告商仅花费了他们1000美元的总活动预算中的938.52美元，即使在他们观察到第一天交付不足后对他们的活动进行了一些改进。虽然第2天的表现更好，但第1天未用预算中的61.48美元无法使用，除非他们在第2天手动增加他们的每日预算。</p><h1 id="13e1" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">我们的方法</h1><p id="9d5b" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">FDB通过改变每日预算活动的机制，使Pinterest的每日预算服务现代化。</p><p id="bf32" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，它通过允许结转每天的未用预算，取消了对广告活动支出的严格的每日上限，同时旨在将一周内的每日支出平均化为相当于广告客户的目标每日预算。</p><p id="597f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">其次，它引入了灵活性，允许每天超支，直到某个限度。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ll"><img src="../Images/0e157423b3b2b9293f258d05def57f99.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SH2Vd0ZD9fo0L0tPfzte1g.png"/></div></div></figure><p id="0c4f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，FDB引入了一种机制来微调每项活动在一天中花费的速度，以便最大化它有资格花费的时间。这是由一个预测系统(建模为回归任务)提供支持的，该系统根据历史数据预测下一天活动的交付绩效。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lm"><img src="../Images/ea158b8809a325b3a92424b32e1c2165.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*16YR0e7eZlG-H83aM6p5dg.png"/></div></div></figure><p id="26d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该系统使用每个活动的预测递送表现来定制基础定步控制器，以允许每个活动在一整天中平稳且高效地递送广告。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es ln"><img src="../Images/953d2070fb8addf9b1b7d1a6907016f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IbJz3xwOhaz23xyBX1oJ_w.png"/></div></div></figure><p id="187d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有了FDB推出的功能，广告活动“提前”完成预算的广告商可以继续花费超过日常预算的金额，这样他们就可以在一天的任何时候接触到Pinners。此外，广告客户的活动没有在当天结束时完成，可以自动将未支出的预算结转到第二天(无需在他们注意到一些支出不足后手动更新他们的日常预算)。</p><p id="279d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦营销活动获得了全天支出的能力，而不是被“限制”在一天的某个时间段内支出，随着其支出的分散，预计它将实现更低的成本。</p><h1 id="75dd" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">实验</h1><p id="940a" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">在用广告客户的直播活动测试FDB之前，我们进行了一项大规模实验来测试我们的假设，即滚动预算和支持全天支出可以提高日常预算活动的交付效率(降低每次结果的成本)，同时保持中性的总体支出。</p><p id="e392" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由于测试所需的翻转机制在本实验中并不存在，我们开发了一种新的方法，使用终身预算活动(已经有这种机制)作为试验台来模拟日常预算活动行为。这是通过将每项活动的预算分配给不同的治疗体验来实现的，同时留出足够的缓冲，以考虑到预算中可能不均衡出现的超支或支出不足。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es lo"><img src="../Images/ffcdd7499d9458baebb09e24046431d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J401USfYePb8iOULpjZDfQ.png"/></div></div></figure><p id="e0d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们测试了多种FDB候选方案，这些方案利用每日预算为活动引入了全天预算滚动，尝试了基于启发式、数据驱动和基于模型的实施相结合。我们的实验表明，所有实验处理都显著降低了活动成本，对总体支出的影响最小。</p><h1 id="0c42" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">未来的工作</h1><p id="e32e" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">FDB是我们改进Pinterest广告预算产品之旅的第一步。在未来，我们计划探索使用更复杂的预测技术来积极地为平台上的每个活动寻找机会，并使用这些预测来优化分配广告客户的预算。摆在面前的挑战是跨越时间序列分析、机器学习和优化技术的令人耳目一新的问题组合。</p><p id="859f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您有兴趣帮助构建下一代ML驱动的广告客户解决方案，并构建像<a class="ae jc" rel="noopener" href="/pinterest-engineering/advertiser-recommendation-systems-at-pinterest-ccb255fbde20">广告客户推荐系统</a>、<a class="ae jc" rel="noopener" href="/pinterest-engineering/campaign-budgets-at-pinterest-be94f15a4527">活动预算</a>和<a class="ae jc" rel="noopener" href="/pinterest-engineering/estimating-potential-audience-size-of-an-ad-at-pinterest-f881aff6580f">观众规模</a>这样的产品，请给我们写信！</p><h1 id="2b09" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated"><strong class="ak">致谢</strong></h1><p id="0160" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated"><strong class="ig hi">Ads Intelligence:</strong>Kelvin Jiang，Shi，Joey Huang，Keshava Subramanya</p><p id="ad0d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">广告质量:</strong>克里斯蒂娜·黄，罗伯特·戈丹，尼提什·拉坦·阿帕纳萨米，安德烈·库雷利亚，阿康沙·拜德</p><p id="1bb2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> Ads Infra: </strong>刘明思、Sameer Bhide、Aniket Ketkar、、Priyan Agarwal、Marc Yang、Crystiane、Vincent Phan</p><p id="314d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">广告报道:</strong> Sanchay Javeria，因苏李</p><p id="30c3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">广告商自动化:</strong>达尼·格尼布斯，贾扬特·梅图，埃里克·勒</p><p id="fdd7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">PMM:吉米·奥卡拉汉</p><p id="cb36" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">安德列亚·伯班克，坎达普·斯利瓦斯塔瓦，范·王</p><p id="9318" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">佩利·奥贡沃尔，德米特里·卢本斯基</p><p id="1707" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lp">要在Pinterest上了解更多工程知识，请查看我们的</em> <a class="ae jc" href="https://medium.com/pinterest-engineering" rel="noopener"> <em class="lp">工程博客</em> </a> <em class="lp">，并访问我们的</em><a class="ae jc" href="https://www.pinterestlabs.com/" rel="noopener ugc nofollow" target="_blank"><em class="lp">Pinterest Labs</em></a><em class="lp">网站。要探索Pinterest的生活，请访问我们的</em> <a class="ae jc" href="https://www.pinterestcareers.com/" rel="noopener ugc nofollow" target="_blank"> <em class="lp">职业</em> </a> <em class="lp">页面。</em></p></div></div>    
</body>
</html>