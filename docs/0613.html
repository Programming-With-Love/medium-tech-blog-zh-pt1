<html>
<head>
<title>Get ahead using headers in RecyclerView</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在RecyclerView中使用标题</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/get-ahead-using-headers-in-recyclerview-2909a69b19?source=collection_archive---------3-----------------------#2021-02-25">https://medium.com/androiddevelopers/get-ahead-using-headers-in-recyclerview-2909a69b19?source=collection_archive---------3-----------------------#2021-02-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/38a783b350f16546090f206941ac8454.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_xgVq18X8goX50q0wgqhFw.png"/></div></div></figure><div class=""/><p id="e77b" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这是<a class="ae jn" href="https://medium.com/androiddevelopers/tagged/recycler-view-series" rel="noopener">系列文章</a>的第四篇，涵盖了使用<code class="du jo jp jq jr b">RecyclerView</code>的基础知识。如果你已经对如何创建一个<code class="du jo jp jq jr b">RecyclerView</code>有了坚实的理解，那么继续吧。否则，考虑从<a class="ae jn" rel="noopener" href="/androiddevelopers/getting-to-know-recyclerview-ea14f8514e6">这个帖子</a>开始。</p><p id="9eca" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以通过在您的<code class="du jo jp jq jr b">RecyclerView</code>中包含一个<code class="du jo jp jq jr b">Header</code>来添加关于您的应用程序数据的信息和上下文。虽然你可以通过在<code class="du jo jp jq jr b">LinearLayout</code>中的<code class="du jo jp jq jr b">RecyclerView</code>上方放置一个<code class="du jo jp jq jr b">TextView</code>来模拟一个标题，但是即使用户向<code class="du jo jp jq jr b">RecyclerView</code>的底部滚动，这个假标题仍然会留在屏幕上。通过提供一个真正的header元素，当用户滚动通过一个<code class="du jo jp jq jr b">RecyclerView</code>时，您允许header滚动到屏幕之外。</p><p id="f439" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这篇博客文章介绍了如何给显示不同种类的花的<code class="du jo jp jq jr b">RecyclerView</code>添加一个<code class="du jo jp jq jr b">Header</code>。<code class="du jo jp jq jr b">Header</code>显示文本“花卉探测器”并显示列表中的花卉数量。</p><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es js"><img src="../Images/448d783471e0d0906a91357586472a40.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*dZxT1otcPmbeqGtc6gWGjg.png"/></div></figure><h1 id="5b89" class="jx jy hs bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">创建页眉布局</h1><p id="0662" class="pw-post-body-paragraph ip iq hs ir b is kv iu iv iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm ha bi translated">创建一个定义<code class="du jo jp jq jr b">Header</code>外观的布局文件。</p><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es la"><img src="../Images/b43be3ad3e8e4100b3df218ef93c305e.png" data-original-src="https://miro.medium.com/v2/resize:fit:772/0*tM2sg1elU08aU9Ba"/></div></figure><figure class="jt ju jv jw fd hj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><h1 id="47f4" class="jx jy hs bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">创建HeaderAdapter和HeaderViewHolder</h1><p id="57a5" class="pw-post-body-paragraph ip iq hs ir b is kv iu iv iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm ha bi translated">创建一个新文件来请求并绑定<code class="du jo jp jq jr b">Header’s</code>视图。</p><p id="06ca" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du jo jp jq jr b">Header</code>的<code class="du jo jp jq jr b">Adapter</code>继承自<code class="du jo jp jq jr b">RecyclerView.Adapter&lt;RecyclerView.ViewHolder&gt;()</code>。</p><figure class="jt ju jv jw fd hj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="79cf" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在<code class="du jo jp jq jr b">Header’s</code> <code class="du jo jp jq jr b">Adapter</code>内部，创建一个继承自<code class="du jo jp jq jr b">RecyclerView.ViewHolder</code>的<code class="du jo jp jq jr b">ViewHolder</code>。如果你有动态文本，创建一个val来表示将要更新的<code class="du jo jp jq jr b">TextView</code>。创建一个<code class="du jo jp jq jr b">bind()</code>函数，将<code class="du jo jp jq jr b">TextView</code>更新为传入的值。</p><figure class="jt ju jv jw fd hj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="b068" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在类定义中，更新<code class="du jo jp jq jr b">Adapter’s</code>参数以包含<code class="du jo jp jq jr b">HeaderViewHolder</code>。</p><figure class="jt ju jv jw fd hj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="8e73" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">由于<code class="du jo jp jq jr b">Adapter</code>继承了<code class="du jo jp jq jr b">RecyclerView.Adapter</code>，它必须实现<code class="du jo jp jq jr b">onCreateViewHolder()</code>、<code class="du jo jp jq jr b">onBindViewHolder()</code>和<code class="du jo jp jq jr b">getItemCount()</code>。</p><ul class=""><li id="3429" class="ld le hs ir b is it iw ix ja lf je lg ji lh jm li lj lk ll bi translated"><code class="du jo jp jq jr b">onCreateViewHolder()</code>放大视图并返回一个<code class="du jo jp jq jr b">HeaderViewHolder</code>。</li><li id="e0ea" class="ld le hs ir b is lm iw ln ja lo je lp ji lq jm li lj lk ll bi translated"><code class="du jo jp jq jr b">getItemCount()</code>返回1，因为只有一个<code class="du jo jp jq jr b">Header</code>项目。</li><li id="f6d7" class="ld le hs ir b is lm iw ln ja lo je lp ji lq jm li lj lk ll bi translated"><code class="du jo jp jq jr b">onBindViewHolder()</code>将信息绑定到<code class="du jo jp jq jr b">Header</code>。</li></ul><figure class="jt ju jv jw fd hj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><h1 id="3492" class="jx jy hs bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">在Activity类中使用ConcatAdapter</h1><p id="601a" class="pw-post-body-paragraph ip iq hs ir b is kv iu iv iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm ha bi translated">在<code class="du jo jp jq jr b">Activity</code>类中，创建一个<code class="du jo jp jq jr b">val</code>来将<code class="du jo jp jq jr b">HeaderAdapter()</code>保存在<code class="du jo jp jq jr b">RecyclerView’s</code>和<code class="du jo jp jq jr b">Adapter</code>之上。</p><figure class="jt ju jv jw fd hj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="a795" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然后使用<code class="du jo jp jq jr b"><a class="ae jn" href="https://developer.android.com/reference/androidx/recyclerview/widget/ConcatAdapter" rel="noopener ugc nofollow" target="_blank">ConcatAdapter</a></code>将两个适配器添加到<code class="du jo jp jq jr b">RecyclerView</code>中。<code class="du jo jp jq jr b">ConcatAdapter</code>按顺序显示多个适配器的内容。在<code class="du jo jp jq jr b">flowersAdapter</code>前增加<code class="du jo jp jq jr b">headerAdapter</code>。</p><figure class="jt ju jv jw fd hj"><div class="bz dy l di"><div class="lb lc l"/></div></figure><p id="f55a" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">运行代码，瞧！添加一个<code class="du jo jp jq jr b">Header</code>就是这么简单。</p><figure class="jt ju jv jw fd hj er es paragraph-image"><div class="er es js"><img src="../Images/448d783471e0d0906a91357586472a40.png" data-original-src="https://miro.medium.com/v2/resize:fit:688/format:webp/1*dZxT1otcPmbeqGtc6gWGjg.png"/></div></figure><h1 id="90d2" class="jx jy hs bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">后续步骤</h1><p id="228c" class="pw-post-body-paragraph ip iq hs ir b is kv iu iv iw kw iy iz ja kx jc jd je ky jg jh ji kz jk jl jm ha bi translated">包括<code class="du jo jp jq jr b">Header</code>在内的完整代码示例可以在<a class="ae jn" href="https://github.com/android/views-widgets-samples/tree/main/RecyclerViewKotlin" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="6a95" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">感谢你阅读我的<code class="du jo jp jq jr b">RecyclerView</code>系列的最后一部分，如果你错过了其他帖子，请在这里查看！</p><ul class=""><li id="2ce0" class="ld le hs ir b is it iw ix ja lf je lg ji lh jm li lj lk ll bi translated"><a class="ae jn" rel="noopener" href="/androiddevelopers/getting-to-know-recyclerview-ea14f8514e6">了解回收查看</a></li><li id="50cf" class="ld le hs ir b is lm iw ln ja lo je lp ji lq jm li lj lk ll bi translated"><a class="ae jn" rel="noopener" href="/androiddevelopers/adapting-to-listadapter-341da4218f5b">适应列表适配器</a></li><li id="4548" class="ld le hs ir b is lm iw ln ja lo je lp ji lq jm li lj lk ll bi translated"><a class="ae jn" rel="noopener" href="/androiddevelopers/for-my-next-trick-i-will-write-about-onclick-45e0a6881c8a">处理RecyclerView中的点击事件</a></li></ul><p id="402d" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">编码快乐！</p></div></div>    
</body>
</html>