<html>
<head>
<title>What is Socket Programming in Python and how to master it?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Python中的Socket编程是什么，如何掌握？</h1>
<blockquote>原文：<a href="https://medium.com/edureka/socket-programming-python-bbac2d423bf9?source=collection_archive---------0-----------------------#2019-06-28">https://medium.com/edureka/socket-programming-python-bbac2d423bf9?source=collection_archive---------0-----------------------#2019-06-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/ab8a1fc0b06f4b77b85f93327743bfb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*ztka57iJMmV4Wqsyg8ybEg.jpeg"/></div><figcaption class="il im et er es in io bd b be z dx">Socket Programming in Python — Edureka</figcaption></figure><p id="a881" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">不可否认，互联网已经成为“存在的灵魂”，它的活动以“连接”或“网络”为特征。这些网络之所以成为可能，是因为使用了<strong class="ir hi">套接字最重要的基础之一。</strong>本文涵盖了Python中套接字编程的所有领域。套接字帮助您建立这些连接，而Python无疑使这变得很容易。</p><p id="505e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们快速浏览一下本文涉及的所有主题:</p><ul class=""><li id="8fc7" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">为什么要用插座？</li><li id="d1ba" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">Python中的套接字是什么？</li><li id="741c" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">如何用Python实现Socket编程</li><li id="0ae7" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">什么是服务器？</li><li id="2363" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">什么是客户？</li><li id="0ef5" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">回显客户端-服务器</li><li id="8dc0" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">多重通信</li><li id="c17e" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">传输Python对象</li></ul><ol class=""><li id="b2ac" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm kb jt ju jv bi translated">Python pickle模块</li><li id="2f8f" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kb jt ju jv bi translated">如何使用pickle模块传输python对象</li></ol><h1 id="a17b" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">为什么要用插座？</h1><p id="1a96" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">套接字是网络的主干。它们使两个不同程序或设备之间的信息传输成为可能。例如，当您打开浏览器时，作为客户端的您正在创建一个到服务器的连接以传输信息。</p><p id="3d70" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在深入研究这种通信之前，让我们先弄清楚这些套接字到底是什么。</p><h1 id="cd4b" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是插座？</h1><p id="3207" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">一般来说，套接字是为发送和接收数据而构建的内部端点。单个网络将有两个套接字，每个套接字用于一个通信设备或程序。这些套接字是IP地址和端口的组合。根据正在使用的端口号，单个设备可以有“n”个插座。不同的端口适用于不同类型的协议。请看下图，了解一些常见端口号和相关协议的更多信息:</p><figure class="lg lh li lj fd ii er es paragraph-image"><div class="er es lf"><img src="../Images/18af8cf1c99b552e1912f25820c6be44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*Nyr9GhagfSXU4w9Qd_rpCA.png"/></div></figure><p id="8f80" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">既然您已经清楚了套接字的概念，现在让我们来看看Python的套接字模块:</p><h1 id="bae4" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">如何在Python中实现Socket编程:</h1><p id="4202" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">要用Python实现套接字编程，你需要导入<strong class="ir hi">套接字</strong>模块或框架。该模块由创建套接字并帮助它们彼此关联所需的内置方法组成。</p><p id="66f8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一些重要的方法如下:</p><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lk"><img src="../Images/4d5a74c0df67f4cb8a2ba29da64efba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-oOS3JrLYGac8kQahYLaqw.png"/></div></div></figure><p id="fa44" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">既然您已经理解了套接字模块的重要性，那么让我们继续来看看它如何为Python中的套接字编程创建服务器和客户机。</p><h1 id="9b00" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是服务器？</h1><p id="f5dd" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">服务器可以是一个程序、一台计算机或一个专门用于管理网络资源的设备。服务器可以在同一台设备或计算机上，也可以本地连接到其他设备和计算机，甚至远程连接。有各种类型的服务器，如数据库服务器、网络服务器、打印服务器等。</p><p id="9b39" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">服务器通常使用socket.socket()、socket.bind()、socket.listen()等方法来建立连接并绑定到客户端。现在让我们写一个程序来创建一个服务器。考虑下面的例子:</p><p id="2521" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">举例:</strong></p><pre class="lg lh li lj fd lp lq lr ls aw lt bi"><span id="3809" class="lu kd hh lq b fi lv lw l lx ly">import socket<br/>s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br/>s.bind((socket.gethostname(),1234))          <br/>#port number can be anything between 0-65535(we usually specify non-previleged ports which are &gt; 1023)<br/>s.listen(5)<br/> <br/>while True:<br/>    clt,adr=s.accept()<br/>    print(f"Connection to {adr}established")  <br/>   #f string is literal string prefixed with f which <br/>   #contains python expressions inside braces<br/>   #to send info to clientsocket<br/>    clt.send(bytes("Socket Programming in Python","utf-8 "))</span></pre><p id="74e1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">正如您所看到的，创建套接字的第一个必要条件是导入套接字模块。之后，socket.socket()方法用于创建服务器端套接字。</p><p id="9505" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">注:</strong></p><p id="f4d1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">AF_INET指的是来自互联网的地址，它需要一对(host，port ),其中host可以是某个特定网站的URL或其地址，端口号是整数。SOCK_STREAM用于创建TCP协议。</p><p id="139d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">bind()方法接受两个参数作为一个元组(host，port)。但是，最好使用4位数的端口号，因为较低的端口号通常被占用。listen()方法允许服务器接受连接。这里，5是同时出现的多个连接的队列。这里可以指定的最小值是0(如果给定一个较小的值，它将被更改为0)。如果没有指定参数，则采用默认的合适参数。</p><p id="0c54" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">while循环允许永远接受连接。“clt”和“adr”是客户端对象和地址。print语句只是打印出客户机套接字的地址和端口号。最后，clt.send用于以字节为单位发送数据。</p><p id="ddba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们的服务器已经设置好了，让我们继续向客户端前进。</p><h1 id="95d7" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">什么是客户？</h1><p id="c7e7" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">客户端是从服务器接收信息或服务的计算机或软件。在客户机-服务器模块中，客户机向服务器请求服务。最好的例子就是谷歌Chrome、火狐等网络浏览器。这些网络浏览器按照用户的指示向网络服务器请求所需的网页和服务。其他例子包括在线游戏、在线聊天等。</p><p id="1882" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在让我们来看看如何用Python编程语言编写客户端程序:</p><p id="6932" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">举例:</strong></p><pre class="lg lh li lj fd lp lq lr ls aw lt bi"><span id="e62b" class="lu kd hh lq b fi lv lw l lx ly">import socket<br/>s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br/>s.connect((socket.gethostname(), 2346))<br/>msg=s.recv(1024)<br/>print(msg.decode("utf-8"))</span></pre><p id="c007" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">第一步是导入套接字模块，然后创建一个套接字，就像创建服务器时一样。然后，要创建客户机-服务器之间的连接，您需要通过指定(host，port)使用connect()方法。</p><p id="a002" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">注意:</strong>当客户端和服务器在同一台计算机上时，使用gethostname。(局域网—本地ip /广域网—公共ip)</p><p id="e950" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里，客户端希望从服务器接收一些信息，为此，您需要使用recv()方法，信息存储在另一个变量msg中。请记住，传递的信息是以字节为单位的，在上述程序中，客户端在一次传输中最多可以接收1024个字节(缓冲区大小)。根据传输的信息量，它可以指定为任意数量。</p><p id="9824" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后，被传输的信息应该被解码并打印出来。</p><p id="b597" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在你已经知道了如何创建客户机-服务器程序，让我们继续看看它们需要如何执行。</p><h1 id="7592" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">回显客户端-服务器:</h1><p id="d426" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">要执行这些程序，请打开命令提示符，进入创建客户端和服务器程序的文件夹，然后键入:</p><p id="76bb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">py server.py(这里server.py是服务器的文件名，也可以用py -3.7 server.py)</p><p id="bbff" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">完成后，服务器开始运行。要执行客户端，请打开另一个cmd窗口，并键入:</p><p id="5033" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">py client.py(这里client.py是客户端的文件名)</p><p id="c05f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">输出(服务器):</strong></p><figure class="lg lh li lj fd ii er es paragraph-image"><div class="er es lf"><img src="../Images/4fc637e480340d5a3fa5bdfbf61ffd6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*soXs0O5hw7McYQHi3iFeQw.png"/></div></figure><p id="c4a7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">(客户端)</strong></p><figure class="lg lh li lj fd ii er es paragraph-image"><div class="er es lf"><img src="../Images/798e52bdbdd935214223bffd683e32be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*8Y-56NCZNT7KZ_ypcLQDBw.png"/></div></figure><p id="f311" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们通过将缓冲区大小减少到7来尝试相同的程序，看看我们得到什么输出:<br/> <br/> <strong class="ir hi">输出:</strong></p><figure class="lg lh li lj fd ii er es paragraph-image"><div class="er es lf"><img src="../Images/c0deb7d70c9dab7311a51ab9387bdf5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*RukwAnn6gQi5NKU41j-Czg.png"/></div></figure><p id="11f9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如您所见，连接在传输7个字节后终止。但是这是一个问题，因为您没有收到完整的信息，并且连接已经关闭。让我们继续解决这个问题。</p><h1 id="2013" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">多重沟通:</h1><p id="2b5f" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">为了使连接持续到客户端收到完整的信息，您可以使用while循环:</p><p id="d46e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">举例:</strong></p><pre class="lg lh li lj fd lp lq lr ls aw lt bi"><span id="03c6" class="lu kd hh lq b fi lv lw l lx ly">import socket<br/>s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br/>s.connect((socket.gethostname(), 2346))<br/>while True:<br/>msg=s.recv(7)<br/>print(msg.decode("utf-8"))</span></pre><p id="d170" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一旦你这样做了，完整的消息将在每次传输中以7个字节被接收。</p><p id="f97e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">但是这一次，如你所见，连接没有被终止，你永远不知道什么时候会发生。此外，如果您实际上不知道客户端将从服务器接收到多大的消息或信息，该怎么办呢？在这种情况下，您实际上可以在客户端使用以下代码:</p><p id="c2e7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">示例:</strong></p><pre class="lg lh li lj fd lp lq lr ls aw lt bi"><span id="c7ea" class="lu kd hh lq b fi lv lw l lx ly">complete_info=''<br/>while True:<br/>    msg = s.recv(7)  <br/>    if len(msg)&amp;amp;amp;amp;amp;amp;amp;lt;=0:<br/>        break<br/>    complete_info += msg.decode("utf-8")<br/>print(complete_info)</span></pre><p id="a4c8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在服务器端，使用close()方法，如下所示:</p><pre class="lg lh li lj fd lp lq lr ls aw lt bi"><span id="753c" class="lu kd hh lq b fi lv lw l lx ly">clt.close()</span></pre><p id="2b5b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">输出:</strong></p><figure class="lg lh li lj fd ii er es paragraph-image"><div class="er es lf"><img src="../Images/3726baf2e40cb8da81e6b7147837c180.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*VU2uPXtToU50DWlix6Y_LA.png"/></div></figure><p id="a5f9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上面的代码块所做的就是检查信息的大小，一次将它打印到两个字节的缓冲区中，并在完成后关闭<br/>连接。</p><h1 id="bf34" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">传输Python对象:</h1><p id="2992" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">到这里为止，你只是掌握了转移字符串的诀窍。但是，Python中的套接字编程也允许您传输Python对象。这些对象可以是集合、元组、字典等任何东西。要实现这一点，您需要导入Python的pickle模块。</p><h2 id="b8c9" class="lu kd hh bd ke lz ma mb ki mc md me km ja mf mg kq je mh mi ku ji mj mk ky ml bi translated">Python pickle模块:</h2><p id="fc6d" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">当你实际上在Python中序列化或反序列化对象时，Python pickle模块就会出现。我们来看一个小例子，<br/> <br/> <strong class="ir hi">例子:</strong></p><pre class="lg lh li lj fd lp lq lr ls aw lt bi"><span id="9868" class="lu kd hh lq b fi lv lw l lx ly">import pickle<br/> <br/>mylist=[1,2,'abc']<br/>mymsg = pickle.dumps(mylist) <br/>print(mymsg)</span></pre><p id="0863" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">输出:</strong>b ' x80x 03]qx00(kx 01k x02 x 03 x 00x 00 x 00 ABC qx 01 e。'</p><p id="6019" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如您所见，在上面的程序中，使用pickle模块的dumps()函数对‘my list’进行了序列化。还要注意，输出以“b”开头，这意味着它被转换为字节。在套接字编程中，可以实现这个模块在客户机和服务器之间传输python对象。</p><h2 id="b6f1" class="lu kd hh bd ke lz ma mb ki mc md me km ja mf mg kq je mh mi ku ji mj mk ky ml bi translated">如何使用pickle模块传递python对象结构？</h2><p id="ef36" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">当你把pickle和sockets一起使用时，你绝对可以通过网络传输任何东西。让我们记下服务器端和客户端的对应方，以便将列表从服务器传输到客户端:</p><h2 id="f608" class="lu kd hh bd ke lz ma mb ki mc md me km ja mf mg kq je mh mi ku ji mj mk ky ml bi translated">服务器端:</h2><pre class="lg lh li lj fd lp lq lr ls aw lt bi"><span id="f817" class="lu kd hh lq b fi lv lw l lx ly">import socket<br/>import pickle<br/> <br/>a=10<br/>s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br/>s.bind((socket.gethostname(), 2133))        #binding tuple<br/>s.listen(5)<br/>while True:<br/>    clt , adr = s.accept()<br/>    print(f"Connection to {adr}established")<br/> <br/>    m={1:"Client", 2:"Server"}<br/>    mymsg = pickle.dumps(m)  #the msg we want to print later<br/>    mymsg = {len(mymsg):{a}}"utf-8") + mymsg<br/>    clt.send(mymsg)</span></pre><p id="dc7b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里，m是一个字典，它基本上是一个需要从服务器发送到客户机的python对象。这是通过首先使用dumps()序列化对象，然后将其转换为字节来完成的。<br/>现在让我们写下客户端的对应部分:</p><h2 id="52a9" class="lu kd hh bd ke lz ma mb ki mc md me km ja mf mg kq je mh mi ku ji mj mk ky ml bi translated">客户端:</h2><pre class="lg lh li lj fd lp lq lr ls aw lt bi"><span id="76e2" class="lu kd hh lq b fi lv lw l lx ly">import socket<br/>import pickle<br/>a=10<br/>s=socket.socket(socket.AF_INET, socket.SOCK_STREAM)<br/>s.connect((socket.gethostname(), 2133))<br/> <br/>while True:<br/>    complete_info = b''<br/>    rec_msg = True<br/>    while True:<br/>        mymsg = s.recv(10)<br/>       if rec_msg:<br/>            print(f"The length of message = {mymsg[:a]}")<br/>            x = int (mymsg[:a ] )<br/>            rec_msg = False<br/>            complete_info += mymsg<br/>            if len(complete_info)-a == x:<br/>            print("Recieved the complete info")<br/>            print(complete_info[a:])<br/>            m = pickle.loads(complete_info[a:])<br/>            print(m)<br/>            rec_msg = True<br/>complete_info = b''<br/>print(complete_info)</span></pre><p id="d5ab" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">第一个while循环将帮助我们跟踪完整的消息(complete_info)以及使用缓冲区接收的消息(rec_msg)。然后，当消息被接收时，我所做的就是打印它的每一位，在一个大小为10的缓冲区中接收。这个尺寸可以是任何东西，取决于你的个人选择。</p><p id="6af9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然后，如果收到的消息等于完整的消息，我只是将消息打印为received complete info，之后我使用loads()对消息进行了反序列化。</p><p id="cc60" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上述程序的输出如下:</p><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mm"><img src="../Images/d80f04f576994777e844d6cbb89efee0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mfJEBZfkNqfvusBSMlIJZw.png"/></div></div></figure><p id="f23b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这就把我们带到了这篇关于Python中套接字编程的文章的结尾。我希望你明白所有的概念。如果你想查看更多关于人工智能、DevOps、道德黑客等市场最热门技术的文章，那么你可以参考<a class="ae mn" href="https://www.edureka.co/blog/?utm_source=medium&amp;utm_medium=content-link&amp;utm_campaign=socket-programming-python" rel="noopener ugc nofollow" target="_blank"> Edureka的官方网站。</a></p><p id="adda" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请留意本系列中的其他文章，它们将解释Python和数据科学的各个方面。</p><blockquote class="mo mp mq"><p id="3677" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">1.<a class="ae mn" rel="noopener" href="/edureka/python-tutorial-be1b3d015745"> Python教程</a></p><p id="c95b" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">2.<a class="ae mn" rel="noopener" href="/edureka/python-programming-language-fc1015de7a6f"> Python编程语言</a></p><p id="7759" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">3.<a class="ae mn" rel="noopener" href="/edureka/python-functions-f0cabca8c4a"> Python函数</a></p><p id="6202" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">4.<a class="ae mn" rel="noopener" href="/edureka/file-handling-in-python-e0a6ff96ede9">Python中的文件处理</a></p><p id="648a" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">5.<a class="ae mn" rel="noopener" href="/edureka/python-numpy-tutorial-89fb8b642c7d"> Python Numpy教程</a></p><p id="f21f" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">6.<a class="ae mn" rel="noopener" href="/edureka/scikit-learn-machine-learning-7a2d92e4dd07"> Scikit学习机器学习</a></p><p id="9d79" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">7.<a class="ae mn" rel="noopener" href="/edureka/python-pandas-tutorial-c5055c61d12e"> Python熊猫教程</a></p><p id="4c38" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">8.<a class="ae mn" rel="noopener" href="/edureka/python-matplotlib-tutorial-15d148a7bfee"> Matplotlib教程</a></p><p id="08fc" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">9.<a class="ae mn" rel="noopener" href="/edureka/tkinter-tutorial-f655d3f4c818"> Tkinter教程</a></p><p id="9647" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">10.<a class="ae mn" rel="noopener" href="/edureka/python-requests-tutorial-30edabfa6a1c">请求教程</a></p><p id="b93e" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">11.<a class="ae mn" rel="noopener" href="/edureka/pygame-tutorial-9874f7e5c0b4"> PyGame教程</a></p><p id="c1f3" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">12.<a class="ae mn" rel="noopener" href="/edureka/python-opencv-tutorial-5549bd4940e3"> OpenCV教程</a></p><p id="806e" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">13.<a class="ae mn" rel="noopener" href="/edureka/web-scraping-with-python-d9e6506007bf">用Python进行网页抓取</a></p><p id="55cd" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">14.<a class="ae mn" rel="noopener" href="/edureka/pycharm-tutorial-d0ec9ce6fb60"> PyCharm教程</a></p><p id="2468" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">15.<a class="ae mn" rel="noopener" href="/edureka/machine-learning-tutorial-f2883412fba1">机器学习教程</a></p><p id="c121" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">16.<a class="ae mn" rel="noopener" href="/edureka/linear-regression-in-python-e66f869cb6ce">Python中从头开始的线性回归算法</a></p><p id="87e9" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">17.<a class="ae mn" rel="noopener" href="/edureka/learn-python-for-data-science-1f9f407943d3">面向数据科学的Python</a></p><p id="8152" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">18.<a class="ae mn" rel="noopener" href="/edureka/loops-in-python-fc5b42e2f313">Python中的循环</a></p><p id="8825" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">19.<a class="ae mn" rel="noopener" href="/edureka/python-regex-regular-expression-tutorial-f2d17ffcf17e"> Python正则表达式</a></p><p id="4da4" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">20.<a class="ae mn" rel="noopener" href="/edureka/python-projects-1f401a555ca0"> Python项目</a></p><p id="35d7" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">21.<a class="ae mn" rel="noopener" href="/edureka/machine-learning-projects-cb0130d0606f">机器学习项目</a></p><p id="5515" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">22.<a class="ae mn" rel="noopener" href="/edureka/arrays-in-python-14aecabec16e">Python中的数组</a></p><p id="6674" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">23.<a class="ae mn" rel="noopener" href="/edureka/sets-in-python-a16b410becf4">在Python中设置</a></p><p id="1e6a" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">24.<a class="ae mn" rel="noopener" href="/edureka/what-is-mutithreading-19b6349dde0f">Python中的多线程</a></p><p id="cb78" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">25.<a class="ae mn" rel="noopener" href="/edureka/python-interview-questions-a22257bc309f"> Python面试问题</a></p><p id="11ff" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">26.<a class="ae mn" rel="noopener" href="/edureka/java-vs-python-31d7433ed9d"> Java vs Python </a></p><p id="314d" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">27.<a class="ae mn" rel="noopener" href="/edureka/how-to-become-a-python-developer-462a0093f246">如何成为一名Python开发者？</a></p><p id="b854" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">28.<a class="ae mn" rel="noopener" href="/edureka/python-lambda-b84d68d449a0"> Python Lambda函数</a></p><p id="7666" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">29.<a class="ae mn" rel="noopener" href="/edureka/how-netflix-uses-python-1e4deb2f8ca5">网飞如何使用Python？</a></p><p id="8309" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">30.<a class="ae mn" rel="noopener" href="/edureka/python-database-connection-b4f9b301947c"> Python数据库连接</a></p><p id="8e34" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">31.<a class="ae mn" rel="noopener" href="/edureka/golang-vs-python-5ac32e1ef2"> Golang vs Python </a></p><p id="bf69" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">32.<a class="ae mn" rel="noopener" href="/edureka/python-seaborn-tutorial-646fdddff322"> Python Seaborn教程</a></p><p id="9980" class="ip iq mr ir b is it iu iv iw ix iy iz ms jb jc jd mt jf jg jh mu jj jk jl jm ha bi translated">33.<a class="ae mn" rel="noopener" href="/edureka/python-career-opportunities-a2500ce158de"> Python职业机会</a></p></blockquote></div><div class="ab cl mv mw go mx" role="separator"><span class="my bw bk mz na nb"/><span class="my bw bk mz na nb"/><span class="my bw bk mz na"/></div><div class="ha hb hc hd he"><p id="3524" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="mr">原载于2019年6月28日https://www.edureka.co</em><a class="ae mn" href="https://www.edureka.co/blog/socket-programming-python/" rel="noopener ugc nofollow" target="_blank"><em class="mr"/></a><em class="mr">。</em></p></div></div>    
</body>
</html>