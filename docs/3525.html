<html>
<head>
<title>Azure Content Delivery Network (CDN) Quick Insight</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure内容交付网络(CDN)快速洞察</h1>
<blockquote>原文：<a href="https://medium.com/globant/azure-content-delivery-network-cdn-quick-insight-d231fea0b581?source=collection_archive---------1-----------------------#2020-10-20">https://medium.com/globant/azure-content-delivery-network-cdn-quick-insight-d231fea0b581?source=collection_archive---------1-----------------------#2020-10-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="7cc6" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">介绍</h1><p id="9d38" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">本帖将向您解释什么是Azure CDN(内容交付网络)。CDN是地理上位于不同区域的服务器集群，以最低的网络和交易延迟向用户提供网站内容，从而以最快的速度提供内容。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ka"><img src="../Images/16b4963a0351a819454692acd5ae0c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2yHcYABcQw_9RdnWqFxTgQ.jpeg"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx">(Image courtesy from internet) CDN global presence</figcaption></figure><h1 id="55c8" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">何时使用Azure CDN。</h1><blockquote class="kq kr ks"><p id="2f57" class="jc jd kt je b jf ku jh ji jj kv jl jm kw kx jp jq ky kz jt ju la lb jx jy jz ha bi translated">几乎每一个网站都有HTML、JS、CSS、图像、视频和字体文件，这些文件在不同用户之间变化不大。为了最大限度地减少应用程序加载时间，我们应该使用CDN。</p></blockquote><p id="5eba" class="pw-post-body-paragraph jc jd hh je b jf ku jh ji jj kv jl jm jn kx jp jq jr kz jt ju jv lb jx jy jz ha bi translated">CDN通过从它称为origin的原始服务器中提取静态资源来缓存所有静态资源一段时间。此后，用户对与CDN相关的资源的任何请求都从该缓存副本中提供。当缓存过期时，资源会随着对源的重新请求而刷新。</p><p id="76f8" class="pw-post-body-paragraph jc jd hh je b jf ku jh ji jj kv jl jm jn kx jp jq jr kz jt ju jv lb jx jy jz ha bi translated">一个只包含静态内容的网站可以很容易地通过CDN提供服务。</p></div><div class="ab cl lc ld go le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ha hb hc hd he"><h1 id="f6a9" class="ie if hh bd ig ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb bi translated">CDN的工作原理。</h1><blockquote class="kq kr ks"><p id="1906" class="jc jd kt je b jf ku jh ji jj kv jl jm kw kx jp jq ky kz jt ju la lb jx jy jz ha bi translated"><strong class="je hi"> <em class="hh"> CDN可以从Azure应用服务、Azure云服务、Azure存储帐户或任何可公开访问的web服务器等来源进行配置。</em> </strong></p></blockquote><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es lo"><img src="../Images/3d7c4d45204cde470db465e69173585c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*mBfQ7cDrn1b3yMCEafugHA.png"/></div><figcaption class="km kn et er es ko kp bd b be z dx">(Image courtesy from Microsoft) CDN delivery working model</figcaption></figure><ol class=""><li id="eec4" class="lp lq hh je b jf ku jj kv jn lr jr ls jv lt jz lu lv lw lx bi translated">用户可以通过使用URL和域名(<endpoint>)来访问网站。<a class="ae ly" href="http://azureedge.net" rel="noopener ugc nofollow" target="_blank">azureedge.net</a>)，它就变成了一个自定义域。</endpoint></li><li id="408a" class="lp lq hh je b jf lz jj ma jn mb jr mc jv md jz lu lv lw lx bi translated">当在边缘服务器存在点(POP)中找不到缓存时，POP会向原始服务器请求文件。</li><li id="a926" class="lp lq hh je b jf lz jj ma jn mb jr mc jv md jz lu lv lw lx bi translated">原始服务器将文件返回到边缘服务器的POP。</li><li id="c35a" class="lp lq hh je b jf lz jj ma jn mb jr mc jv md jz lu lv lw lx bi translated">该文件将在POP中保持缓存的生存时间(TTL ),默认TTL为七天。</li><li id="46fa" class="lp lq hh je b jf lz jj ma jn mb jr mc jv md jz lu lv lw lx bi translated">其他用户也使用相同的URL请求相同的文件，这些请求将由相同的POP发送。</li><li id="82ee" class="lp lq hh je b jf lz jj ma jn mb jr mc jv md jz lu lv lw lx bi translated">从缓存文件交付的POP edge服务器速度更快，对用户体验的响应更快。</li></ol></div><div class="ab cl lc ld go le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ha hb hc hd he"><blockquote class="kq kr ks"><p id="1d38" class="jc jd kt je b jf ku jh ji jj kv jl jm kw kx jp jq ky kz jt ju la lb jx jy jz ha bi translated"><strong class="je hi"> <em class="hh">让我们为App服务配置CDN，Azure云服务和Azure存储帐户的配置将是相同的，CDN链接可能位于</em> </strong> <a class="ae ly" href="https://portal.azure.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="je hi"> <em class="hh"> Azure门户</em> </strong> </a> <strong class="je hi"> <em class="hh">的不同菜单部分下。</em> </strong></p></blockquote><h1 id="8667" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">如何为App服务配置CDN？</h1><p id="3ae5" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated"><strong class="je hi">步骤1 </strong> —登录Azure门户并创建应用服务(如果您没有over Portal)。在应用程序服务中，导航左侧菜单并转到网络选项，如下图所示。我们可以在这个刀片中看到许多选项。我们必须选择Azure CDN，然后单击为您的应用配置Azure CDN。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es me"><img src="../Images/3d93e8d09f7916badede003eccaaa7a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-MzX3QccittCT-MAtnX4KA.jpeg"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx">Azure CDN configuration under Networking.</figcaption></figure><p id="75a9" class="pw-post-body-paragraph jc jd hh je b jf ku jh ji jj kv jl jm jn kx jp jq jr kz jt ju jv lb jx jy jz ha bi translated"><strong class="je hi">步骤2 </strong> —点击后，我们将导航至Azure CDN配置表单，如下图所示。点击创建按钮以获取Azure CDN端点。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mf"><img src="../Images/388a1df176c8280675d9979d8f1c7136.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XSCuzml-EshM9B0s_KTTDg.png"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx">Required fields for CDN configuration</figcaption></figure><p id="1f22" class="pw-post-body-paragraph jc jd hh je b jf ku jh ji jj kv jl jm jn kx jp jq jr kz jt ju jv lb jx jy jz ha bi translated"><strong class="je hi">步骤3 </strong> —我们可以在下图中看到端点已准备就绪，并配置了选定的应用服务。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mg"><img src="../Images/029b12c3914fcaa6b2bb2739fa09cd5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*thz0fRJVD8aIyN2IdpPhUA.jpeg"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx">CDN endpoint configured</figcaption></figure></div><div class="ab cl lc ld go le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ha hb hc hd he"><blockquote class="kq kr ks"><p id="4c52" class="jc jd kt je b jf ku jh ji jj kv jl jm kw kx jp jq ky kz jt ju la lb jx jy jz ha bi translated"><strong class="je hi">使用CDN的性能观察。</strong></p></blockquote><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mh"><img src="../Images/a122232cf4cf870f61ba92c9f837c078.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RjDAOfGEsUU2PXBi1x_QKQ.jpeg"/></div></div></figure><p id="3692" class="pw-post-body-paragraph jc jd hh je b jf ku jh ji jj kv jl jm jn kx jp jq jr kz jt ju jv lb jx jy jz ha bi translated">正如我们在上面看到的，在没有CDN配置的情况下，应用程序的加载时间是<strong class="je hi">149毫秒</strong>。配置CDN后，我们可以看到加载时间减少到了<strong class="je hi">76毫秒</strong>，图像和其他静态文件正在从POP edge服务器的内存缓存中读取。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mi"><img src="../Images/d8ca036d716c75ecf2ac4c733b27feda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*suOhlS93iyjA4MkQwE1I2A.jpeg"/></div></div><figcaption class="km kn et er es ko kp bd b be z dx">With CDN configuration</figcaption></figure><h1 id="b4b9" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">Azure CDN的优势</h1><ul class=""><li id="b791" class="lp lq hh je b jf jg jj jk jn mj jr mk jv ml jz mm lv lw lx bi translated">更好的性能和用户体验。</li><li id="6e93" class="lp lq hh je b jf lz jj ma jn mb jr mc jv md jz mm lv lw lx bi translated">降低原始服务器的负载，因为文件是从边缘服务器(CDN)传送的。</li><li id="154e" class="lp lq hh je b jf lz jj ma jn mb jr mc jv md jz mm lv lw lx bi translated">启用功能只需要配置。</li><li id="d9c2" class="lp lq hh je b jf lz jj ma jn mb jr mc jv md jz mm lv lw lx bi translated">强健且维护较少。</li><li id="720c" class="lp lq hh je b jf lz jj ma jn mb jr mc jv md jz mm lv lw lx bi translated">易于配置，仅来自资源。</li></ul><h1 id="2c8b" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">Azure CDN的缺点</h1><ul class=""><li id="859c" class="lp lq hh je b jf jg jj jk jn mj jr mk jv ml jz mm lv lw lx bi translated">每GB大约需要花费0.10美元。这看起来不多，但与你的常规托管计划带宽相比，这太贵了。</li><li id="9157" class="lp lq hh je b jf lz jj ma jn mb jr mc jv md jz mm lv lw lx bi translated">在CDN网络上存储一些敏感文件可能会打开潜在的安全漏洞。因为，无论你在CDN上存储什么，它都会被复制到所有分布式服务器上。</li><li id="f512" class="lp lq hh je b jf lz jj ma jn mb jr mc jv md jz mm lv lw lx bi translated">使用CDN，您正在创建额外的“故障点”。如果CDN网络出现故障，您可能会失去网站的可见性。</li></ul></div><div class="ab cl lc ld go le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ha hb hc hd he"><h1 id="36d5" class="ie if hh bd ig ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb bi translated">结束语…</h1><p id="5441" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们已经完成了Azure CDN Quick Insight，并检查了该服务和应用服务配置的优势。包括优点和缺点。Azure CDN肯定会提高应用性能，我们可以利用这种Azure PaaS服务的优势。</p><p id="4455" class="pw-post-body-paragraph jc jd hh je b jf ku jh ji jj kv jl jm jn kx jp jq jr kz jt ju jv lb jx jy jz ha bi translated">快乐学习…</p><blockquote class="kq kr ks"><p id="b245" class="jc jd kt je b jf ku jh ji jj kv jl jm kw kx jp jq ky kz jt ju la lb jx jy jz ha bi translated"><strong class="je hi"> <em class="hh">合著者:Gaurav Zambare </em> </strong></p></blockquote></div></div>    
</body>
</html>