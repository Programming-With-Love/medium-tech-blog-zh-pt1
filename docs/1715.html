<html>
<head>
<title>Dask and RAPIDS: The Next Big Things for Data Science and Machine Learning at Capital One</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Dask和RAPIDS:Capital One的数据科学和机器学习的下一件大事</h1>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/dask-and-rapids-the-next-big-things-for-data-science-and-machine-learning-at-capital-one-d4bba136cc70?source=collection_archive---------3-----------------------#2019-11-25">https://medium.com/capital-one-tech/dask-and-rapids-the-next-big-things-for-data-science-and-machine-learning-at-capital-one-d4bba136cc70?source=collection_archive---------3-----------------------#2019-11-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/7e8529afb759bb938ac081923172d8c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*MXtMfGFLYzdcPZuY9z7UcQ.gif"/></div></div></figure><h2 id="1d41" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">软件工程高级总监Ryan McEntee和软件工程总监Mike McCarty</h2><h1 id="69d1" class="jn iq hh bd ir jo jp jq iv jr js jt iz ju jv jw jd jx jy jz jh ka kb kc jl kd bi translated"><strong class="ak">设置舞台</strong></h1><p id="9409" class="pw-post-body-paragraph ke kf hh kg b kh ki kj kk kl km kn ko ja kp kq kr je ks kt ku ji kv kw kx ky ha bi translated">在过去3年多的时间里，我有机会领导Capital One的工程工作，以实现我们的企业数据科学、定量分析和数据分析平台的现代化。我们的核心目标是将我们的企业数据用户从内部部署的、主要基于SAS的平台迁移到支持各种开源技术的定制云原生平台。你可以想象，我和我的团队从这次经历中学到了很多，但令人惊讶的是，并不是所有的经验都是技术性的。</p><p id="d565" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated">我们的早期战略包括寻找顶尖的数据科学和机器学习工程人才(包括公司内部和外部)，以及我们的行业趋势研究，以了解该领域领先的开源技术和平台。我们还花了大量时间与来自整个企业的最终用户交流，涵盖了广泛的技术知识，以确定我们必须解决的当前痛点。解决这些棘手问题非常重要，因为我们的最终目标不仅是实现最新和最棒的技术，而且还要提高最终用户群的效率和效能。</p><p id="5a2b" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated">在交付了我们新的基于云的平台的第一次迭代后，我们看到了快速、广泛的采用以及巨大的反馈。任务完成了，对吧？不幸的是，情况并非如此。几乎立刻，我们注意到大量最大的AWS实例在平台内旋转，用户仅利用每个实例上128个可用核心中的1个。此外，在这些实例上运行的作业将运行数小时，因为它们使用单线程Python或r在内存中存储高达3TB的数据。我们的目标之一是提高计算利用率，对于这些工作负载来说，达不到目标是轻描淡写的。</p><p id="1fd7" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated">尽管我们非常重视了解最终用户的痛点，但我们未能考虑到最终用户群体将承受的不可避免的技能转变。</p><h1 id="5644" class="jn iq hh bd ir jo jp jq iv jr js jt iz ju jv jw jd jx jy jz jh ka kb kc jl kd bi translated"><strong class="ak">理解人的转变是成功的关键</strong></h1><p id="c0e5" class="pw-post-body-paragraph ke kf hh kg b kh ki kj kk kl km kn ko ja kp kq kr je ks kt ku ji kv kw kx ky ha bi translated">在我们所有的用户研究中，我们没有意识到SAS用户需要多少培训和支持才能使用开源技术并行化作业。他们在SAS中很容易做到这一点，但如果没有它，并行化他们的工作负载就非常困难和耗时。</p><p id="cf60" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated">例如，传统的SAS用户首先需要精通最流行的Python计算库，其中许多都不使用多个CPU内核，更不用说多个服务器了。一旦需要并行化来扩展更大的数据集，他们还需要精通Spark来重新编写他们的解决方案。重新编码可能很重要，因为许多Python计算库(即NumPy和Pandas)在Spark中不是高性能的，并且dataframe APIs是不同的。此外，当Spark中的作业崩溃时，为了有效地调试错误，最终用户需要了解Java。考虑到我们的业务不能在最终用户学习这些新技术时停止运营，完成这一转型的前景有一条非常长的尾巴。</p><p id="f950" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated">那么，工程师们呢？难道他们不能帮助减轻从Python到Spark重新编码的负担吗？简而言之，答案是否定的。Capital One数据的最终用户数量远远超过我们的工程人员，因此培养他们的技能使他们能够自助服务是我们成功的关键。</p><p id="cfdb" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated">这就是Dask和RAPIDS的切入点。</p><h1 id="2e83" class="jn iq hh bd ir jo jp jq iv jr js jt iz ju jv jw jd jx jy jz jh ka kb kc jl kd bi translated"><strong class="ak">为什么是达斯克和急流？</strong></h1><p id="95b6" class="pw-post-body-paragraph ke kf hh kg b kh ki kj kk kl km kn ko ja kp kq kr je ks kt ku ji kv kw kx ky ha bi translated">Dask为扩展Python工作负载提供了一个有前途的解决方案，最终用户可以利用熟悉的API，避免学习Spark和调整不兼容代码的需要。是的，利用Dask仍然需要学习，但是进入的门槛比使用Spark要低得多。由NVIDIA孵化的GPU加速数据科学库RAPIDS提供了相同的API兼容性，并支持来自Python的NVIDIA GPU计算。与较低的准入门槛一样引人注目的是，Dask和RAPIDS在应用于一些现有用例时也表现出了令人印象深刻的性能提升。</p><p id="1ad1" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated">在Capital One，Dask的早期实现在几个月的开发时间内将模型训练时间减少了91%。下图显示了我们在模型培训管道的一个步骤中对本地Dask集群所做的改进；在分布式Dask集群上的生产中，性能甚至更好。Dask加快了开发过程中的迭代周期，这使得开发人员可以更快地测试他们的代码。</p><figure class="lf lg lh li fd ii er es paragraph-image"><div class="er es le"><img src="../Images/92ef995f358079cebd050b6488cb5872.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*W_zv1_ih2xAxOG5UQnZI5A.png"/></div></figure><p id="7035" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated">Dask和RAPIDS可以协同使用，在GPU上水平和垂直扩展计算。下图显示了一个对XGBoost训练执行的弱伸缩性研究，该研究使用了一个不适合单个系统内存的数据集。这里，Dask用于在AWS上的单个EC2实例上跨多个GPU分布计算。每个GPU都有一个特殊的Dask工人，知道如何使用RAPIDS在上面运行计算。多核CPU系统上的原始训练时间也包括在内，以供参考。请注意，y轴是对数刻度。</p><figure class="lf lg lh li fd ii er es paragraph-image"><div class="er es le"><img src="../Images/d546cf9de0120e23441d12c3dcea748d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*cfbnRfBfDhP8QbfE4qxW3g.png"/></div></figure><p id="3e82" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated">通过这些改进，我们已经看到了大约100倍改进模型培训时间和成本下降了97%，假设您只需在培训期间支付计算费用。</p><p id="33e6" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated">现在已经演示了使用Dask和RAPIDS的潜在计算性能增益，接下来的步骤是理解模型准确性、改进部署基础设施和培训用户。随着问题的发现，团队将尽可能地为开源项目做出贡献。</p><p id="b442" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated">Dask和RAPIDS本机扩展Python，这允许Capital One数据科学家和ML工程师保持对他们代码的所有权，并专注于他们最擅长的领域。</p><h1 id="f37d" class="jn iq hh bd ir jo jp jq iv jr js jt iz ju jv jw jd jx jy jz jh ka kb kc jl kd bi translated"><strong class="ak">想了解更多？</strong></h1><p id="a307" class="pw-post-body-paragraph ke kf hh kg b kh ki kj kk kl km kn ko ja kp kq kr je ks kt ku ji kv kw kx ky ha bi translated">这是一系列博客中的第一篇介绍性文章，我们的常驻Dask和RAPIDS专家Mike McCarty将深入探讨Dask和RAPIDS的技术细节。我们也会让你们了解我们在Capital One内部大规模实施这些技术的进展。</p><h1 id="626c" class="jn iq hh bd ir jo jp jq iv jr js jt iz ju jv jw jd jx jy jz jh ka kb kc jl kd bi translated"><strong class="ak">达斯克和激流资源</strong></h1><ul class=""><li id="663b" class="lj lk hh kg b kh ki kl km ja ll je lm ji ln ky lo lp lq lr bi translated">【https://dask.org/ T4】</li><li id="0fd2" class="lj lk hh kg b kh lt kl lu ja lv je lw ji lx ky lo lp lq lr bi translated"><a class="ae ls" href="https://rapids.ai/" rel="noopener ugc nofollow" target="_blank"> https://rapids.ai </a></li></ul></div><div class="ab cl ly lz go ma" role="separator"><span class="mb bw bk mc md me"/><span class="mb bw bk mc md me"/><span class="mb bw bk mc md"/></div><div class="ha hb hc hd he"><p id="f683" class="pw-post-body-paragraph ke kf hh kg b kh kz kj kk kl la kn ko ja lb kq kr je lc kt ku ji ld kw kx ky ha bi translated"><em class="mf">披露声明:2019首创一。观点是作者个人的观点。除非本帖中另有说明，否则Capital One不隶属于所提及的任何公司，也不被这些公司认可。使用或展示的所有商标和其他知识产权是其各自所有者的财产。</em></p></div></div>    
</body>
</html>