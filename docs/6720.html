<html>
<head>
<title>GIT fixup commands: reset, revert, reflog and amend</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GIT修复命令:重置、恢复、重新登录和修改</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/useful-git-commands-a0d410c835f8?source=collection_archive---------0-----------------------#2019-10-12">https://medium.com/quick-code/useful-git-commands-a0d410c835f8?source=collection_archive---------0-----------------------#2019-10-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="c0a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">对git初学者来说，简单的修正可以提高效率</em></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/410a8e1f39efa610553beac834c8c173.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IQGYeTShyNwEVmpL"/></div></div></figure><p id="047e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文中，我们将快速了解如何重置、恢复和完全返回到以前的状态，所有这些都很简单。</p><h2 id="02a4" class="jp jq hh bd jr js jt ju jv jw jx jy jz ip ka kb kc it kd ke kf ix kg kh ki kj bi translated">放弃未声明的更改</h2><p id="1f8f" class="pw-post-body-paragraph ie if hh ig b ih kk ij ik il kl in io ip km ir is it kn iv iw ix ko iz ja jb ha bi translated">最初，如果您想查看未声明的更改，可以使用以下命令</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="4b9b" class="jp jq hh kq b fi ku kv l kw kx">git diff</span></pre><p id="ff61" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您想撤销git中未声明的更改，那么这是您的命令</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="fa5a" class="jp jq hh kq b fi ku kv l kw kx">git checkout -- &lt;file name&gt;</span></pre><blockquote class="ky kz la"><p id="ca6d" class="ie if jc ig b ih ii ij ik il im in io lb iq ir is lc iu iv iw ld iy iz ja jb ha bi translated">要放弃git中工作目录中所有文件的未声明更改，可以使用以下命令</p></blockquote><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="bd46" class="jp jq hh kq b fi ku kv l kw kx">git checkout -- .</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es le"><img src="../Images/f8b9d52d477c7abf1f27390b96c533ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Ky9pxIlfrXWBET4O"/></div></div></figure><h2 id="b5ab" class="jp jq hh bd jr js jt ju jv jw jx jy jz ip ka kb kc it kd ke kf ix kg kh ki kj bi translated">更改提交消息</h2><p id="1a13" class="pw-post-body-paragraph ie if hh ig b ih kk ij ik il kl in io ip km ir is it kn iv iw ix ko iz ja jb ha bi translated">如果出现错误的提交消息，这是一个即时修复。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="92bc" class="jp jq hh kq b fi ku kv l kw kx">git commit --amend -m "commit message"</span></pre><p id="3d3a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您希望某个文件成为您最后一次提交的一部分，这是在转移该文件之后进行的操作。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="e1aa" class="jp jq hh kq b fi ku kv l kw kx">git commit --amend</span></pre><blockquote class="ky kz la"><p id="bec6" class="ie if jc ig b ih ii ij ik il im in io lb iq ir is lc iu iv iw ld iy iz ja jb ha bi translated">请记住，只有在您还没有将更改推送到远程的情况下，才建议您使用上述两个命令，否则会弄乱其他合作者的历史。</p></blockquote><h2 id="eec8" class="jp jq hh bd jr js jt ju jv jw jx jy jz ip ka kb kc it kd ke kf ix kg kh ki kj bi translated">撤消已提交的更改</h2><p id="ff11" class="pw-post-body-paragraph ie if hh ig b ih kk ij ik il kl in io ip km ir is it kn iv iw ix ko iz ja jb ha bi translated">要撤销您的提交并重置本地到先前的提交，可以使用<code class="du lf lg lh kq b"><strong class="ig hi">revert</strong></code>命令，它在git历史结束时添加一个新的提交。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="59be" class="jp jq hh kq b fi ku kv l kw kx"> git revert &lt;commit hash&gt;</span></pre><p id="b3bd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您不想提交更改，请使用</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="ec97" class="jp jq hh kq b fi ku kv l kw kx">git revert -n &lt;commit hash&gt; </span></pre><blockquote class="ky kz la"><p id="147e" class="ie if jc ig b ih ii ij ik il im in io lb iq ir is lc iu iv iw ld iy iz ja jb ha bi translated">如果您想继续之前的提交，请复制您想返回并执行的提交的散列</p></blockquote><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="0984" class="jp jq hh kq b fi ku kv l kw kx">git reset --hard &lt;commit hash&gt;</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/f1122a855a7d001926266ce9199908ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*V6pdGNN_8Ufm9-gh"/></div></div></figure><h2 id="67e6" class="jp jq hh bd jr js jt ju jv jw jx jy jz ip ka kb kc it kd ke kf ix kg kh ki kj bi translated">将本地分支重置为原始分支</h2><p id="80c0" class="pw-post-body-paragraph ie if hh ig b ih kk ij ik il kl in io ip km ir is it kn iv iw ix ko iz ja jb ha bi translated">设置本地分支就像远程存储库中的分支一样，可以通过两个简单的步骤来完成</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="9f43" class="jp jq hh kq b fi ku kv l kw kx">git fetch origin</span><span id="a52c" class="jp jq hh kq b fi lj kv l kw kx">git reset --hard origin/&lt;branch-name&gt;</span></pre><h2 id="8191" class="jp jq hh bd jr js jt ju jv jw jx jy jz ip ka kb kc it kd ke kf ix kg kh ki kj bi translated">将原始分支重置为本地分支</h2><p id="9483" class="pw-post-body-paragraph ie if hh ig b ih kk ij ik il kl in io ip km ir is it kn iv iw ix ko iz ja jb ha bi translated">如果远程历史偏离了本地历史，则<code class="du lf lg lh kq b">--force</code>标志可用于覆盖行为，并使远程存储库的分支与您的本地分支匹配，从而删除可能发生的任何上游更改。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="1810" class="jp jq hh kq b fi ku kv l kw kx">git push --force</span></pre><h2 id="9983" class="jp jq hh bd jr js jt ju jv jw jx jy jz ip ka kb kc it kd ke kf ix kg kh ki kj bi translated">回到历史中</h2><p id="17c8" class="pw-post-body-paragraph ie if hh ig b ih kk ij ik il kl in io ip km ir is it kn iv iw ix ko iz ja jb ha bi translated">与现实世界不同，这在git中是可能的。我们不仅可以追溯历史，还可以通过使用</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="333d" class="jp jq hh kq b fi ku kv l kw kx">git reflog</span></pre><blockquote class="ky kz la"><p id="3c8b" class="ie if jc ig b ih ii ij ik il im in io lb iq ir is lc iu iv iw ld iy iz ja jb ha bi translated">git reflog按照最后一次引用它们的顺序显示提交。运行git reflog，您可以看到它准确地向我们展示了我们一直在做的事情。</p></blockquote><p id="7715" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您想返回，只需在您想保留更改之前获取哈希，您就完成了。</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="7efa" class="jp jq hh kq b fi ku kv l kw kx">git checkout &lt;hash&gt;</span></pre><p id="a736" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">同样，如果其他人已经做出了改变，不要改变历史。</p></div></div>    
</body>
</html>