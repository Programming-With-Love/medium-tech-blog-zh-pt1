<html>
<head>
<title>Custom Views no Android — Parte 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android 上的 Custom Views — 第 1 部分</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/custom-views-no-android-parte-1-c3a55117ef1b?source=collection_archive---------2-----------------------#2017-05-10">https://medium.com/google-developer-experts/custom-views-no-android-parte-1-c3a55117ef1b?source=collection_archive---------2-----------------------#2017-05-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="c84c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">开发Android应用程序只是开发一个客户端,以便用户可以访问我们在移动设备上提供的特定服务。因此,开发具有简单、直观的图形界面并为最终用户带来快乐的应用程序必须始终是我们所有工作的目标。</p><p id="2074" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作为开发人员,我们在构建具有出色UI的应用程序时所做的大部分工作都是以结构化的方式将不同的<strong class="ig hi">Views(T2)组合在一起,以便对用户有意义并允许他们实现预期的目标。</strong></p><h1 id="4ee9" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">Views 是什么?</h1><blockquote class="ka kb kc"><p id="58af" class="ie if kd ig b ih ii ij ik il im in io ke iq ir is kf iu iv iw kg iy iz ja jb ha bi translated">(View)This class 表示用户界面组件的基本构建块。视图占用屏幕上的矩形区域,并负责绘图和事件处理。— <a class="ae kh" href="https://developer.android.com/reference/android/view/View.html" rel="noopener ugc nofollow" target="_blank">Android官方文档</a></p></blockquote><p id="9490" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">根据上面的定义,视图是Android中所有图形界面组件的基础,负责在屏幕上绘制组件并监听事件。</p><p id="5f1d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Android 框架有一个视图库,我们可以将其分为两组,即 <strong class="ig hi">Widgets </strong>和<strong class="ig hi">ViewGroups。(T8 )</strong></p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es ki"><img src="../Images/06c1c8aacbb7d4976fc3f4c6747bc629.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ig1KuaH5onLzHcpa5kJ9Ag.png"/></div></div></figure><p id="2323" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">小部件(T10)都是诸如EditText,TextView,Checkbox等组件,它们直接从View类扩展,并有其特定用途的实现。</p><p id="0797" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ViewGroups  也直接从 View 类扩展,但与 widget 最大的区别在于 ViewGroups 充当 <em class="kd"> 容器,并且可以包含其他 View 或 ViewGroups。<br/>如上图所示,ViewGroups 是 Android 中不同布局的类的超类。</em></p><p id="4285" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"><em class="kd">PS </em></strong><em class="kd">:我们将在这个s</em>是<em class="kd">rie的更高级的帖子中更详细地讨论Views。(T23)</em></p><h1 id="90ce" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated"><strong class="ak">Custom Views。什么是</strong>?(T27)</h1><p id="e34b" class="pw-post-body-paragraph ie if hh ig b ih ku ij ik il kv in io ip kw ir is it kx iv iw ix ky iz ja jb ha bi translated">因为每个应用程序都是不同的,有时框架不提供任何必要的组件来帮助我们提供个性化体验,因此需要进一步开发自定义视图来解决这个问题。</p><p id="eb82" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有两种方法可以开发<strong class="ig hi"><em class="kd">自定义视图</em></strong>,其中第一种方法是创建类<strong class="ig hi">View </strong>的直接子类,并处理所有复杂问题,例如计算它们的测量值,组件的定位,如何,何时以及绘制什么等等。</p><p id="b586" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第二种也是最简单的方法是通过扩展其初始功能来实现我们预期的目标,或者扩展视图组以将组件以特定方式分组来扩展框架中的特定Widget。</p><h2 id="aa4e" class="kz jd hh bd je la lb lc ji ld le lf jm ip lg lh jq it li lj ju ix lk ll jy lm bi translated">为什么要给我这么多工作?</h2><p id="341a" class="pw-post-body-paragraph ie if hh ig b ih ku ij ik il kv in io ip kw ir is it kx iv iw ix ky iz ja jb ha bi translated">正如我上面提到的,创建自定义视图相对复杂,并且考虑到框架已经附带了多个视图,有一些优点可以证明浪费时间和做这项工作是合理的:</p><ul class=""><li id="9380" class="ln lo hh ig b ih ii il im ip lp it lq ix lr jb ls lt lu lv bi translated"><strong class="ig hi"> 可重用性<br/></strong> 创建自定义视图允许我们在应用程序的不同部分重用代码,同时创建一个自定义视图,用于用户界面的不同部分。</li><li id="4333" class="ln lo hh ig b ih lw il lx ip ly it lz ix ma jb ls lt lu lv bi translated"><strong class="ig hi">封装<br/></strong> 创建自定义视图允许我们封装其内部功能。<br/>通常,如果我们有一个特定的图形界面(布局)来表示像电影这样的对象,我们需要单独设置和设置每个属性,并将所有这些功能暴露给提供电影信息的类。<br/>使用自定义视图,我们可以将所有这些操作封装在视图中,而使用它的所有其他应用组件只需要知道要向自定义视图分配哪些信息,而自定义视图将知道如何正确地格式化和呈现这些信息。</li><li id="1ec5" class="ln lo hh ig b ih lw il lx ip ly it lz ix ma jb ls lt lu lv bi translated"><strong class="ig hi">性能<br/></strong>在开发非常复杂的图形用户界面时,最常见的场景之一是需要将组件放入其他组件中,以便它们得到适当的组织。<br/>这个过程通常在layout.xml文件中完成,当我们将Views放在其他Views中时,由于将要创建的深层次结构,我们可能会遇到很大的性能问题。(<strong class="ig hi">我将更详细地解释当视图和创建它时会发生什么,直到它出现在屏幕上</strong><br/>通过自定义视图,我们可以使这些层次结构变得不那么深入,并使用一些技术显着提高性能,我将在下一篇文章中解释。</li></ul><h1 id="7ed1" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">标籤: Custom TextView</h1><p id="5f76" class="pw-post-body-paragraph ie if hh ig b ih ku ij ik il kv in io ip kw ir is it kx iv iw ix ky iz ja jb ha bi translated">因为我无法在不编写一些代码的情况下完成帖子,所以让我们看看自定义TextView的代码,我称之为RedTextView,它只是确保文本颜色始终为红色。</p><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="b464" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">进入我们的第一个超级酷定制视图的细节 2 要考虑的主要方面是:</p><ol class=""><li id="3d1e" class="ln lo hh ig b ih ii il im ip lp it lq ix lr jb md lt lu lv bi translated">我们的类扩展了框架中可用的AppCompatTextView。由于面向对象编程中的继承概念,我们的类继承了超类的属性和行为(方法)。</li><li id="f9a1" class="ln lo hh ig b ih lw il lx ip ly it lz ix ma jb md lt lu lv bi translated">上面的例子有两个构造函数:</li></ol><ul class=""><li id="0263" class="ln lo hh ig b ih ii il im ip lp it lq ix lr jb ls lt lu lv bi translated">第一个仅接收<strong class="ig hi"> context</strong>的构造函数,用于我们想要从java代码动态实例化视图的情况。</li></ul><pre class="kj kk kl km fd me mf mg mh aw mi bi"><span id="e80d" class="kz jd hh mf b fi mj mk l ml mm">RedTextView redTextView = <strong class="mf hi">new </strong>RedTextView(<strong class="mf hi">context</strong>);<br/>redTextView.setText(<strong class="mf hi">"Super cool red Text"</strong>);</span></pre><ul class=""><li id="fd63" class="ln lo hh ig b ih ii il im ip lp it lq ix lr jb ls lt lu lv bi translated">第二个构造函数收到一个<strong class="ig hi">context </strong>和一个<strong class="ig hi">AttributeSet</strong>,用于从布局文件中生成 View 的<strong class="ig hi">inflate</strong>。</li></ul><pre class="kj kk kl km fd me mf mg mh aw mi bi"><span id="5bec" class="kz jd hh mf b fi mj mk l ml mm">&lt;<strong class="mf hi">com.app.blog.customview.RedTextView<br/>    android:id="@+id/red_textview"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content" </strong>/&gt;</span></pre><p id="fdea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">非常快速和简单,每当我们想要一个文本总是红色的TextView,我们可以随时使用我们的自定义视图RedTextView。</p><p id="0a40" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因为我们才刚刚开始,我相信今天就足够了,我们将回到下一步,在那里我们将创建更复杂的自定义视图,并详细介绍上述两个构建器之间的差异。</p><blockquote class="ka kb kc"><p id="2fa5" class="ie if kd ig b ih ii ij ik il im in io ke iq ir is kf iu iv iw kg iy iz ja jb ha bi translated">如果你很高兴能了解更多关于自定义视图的信息,并且喜欢这篇文章的第一篇,请点击下面的 <strong class="ig hi"> <em class="hh"> 推荐 </em> </strong> 并与你可能感兴趣的朋友分享!</p></blockquote><p id="6796" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">谢谢!</p><p id="fb2a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">直到下一次。</p><p id="7867" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi">=)</p></div></div>    
</body>
</html>