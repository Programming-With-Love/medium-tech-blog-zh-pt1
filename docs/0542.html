<html>
<head>
<title>Material Theming with MDC: Color</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用MDC的材质主题:颜色</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/material-theming-with-mdc-color-860dbba8ce2f?source=collection_archive---------0-----------------------#2020-08-25">https://medium.com/androiddevelopers/material-theming-with-mdc-color-860dbba8ce2f?source=collection_archive---------0-----------------------#2020-08-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/90d1d218693c7ed4e464bf6644779dc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jq9zkjx65HKizHjXSas51g.png"/></div></div></figure><div class=""/><div class=""><h2 id="998d" class="pw-subtitle-paragraph ip hr hs bd b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg dx translated">使用MDC库的Android颜色主题</h2></div><p id="243e" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated"><em class="kd">这篇文章也发布在</em> <a class="ae ke" href="https://material.io/blog/android-material-theme-color" rel="noopener ugc nofollow" target="_blank"> <em class="kd">材料设计博客</em> </a> <em class="kd">上。</em></p><p id="efdc" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated"><a class="ae ke" href="https://material.io/design/material-theming/overview.html#material-theming" rel="noopener ugc nofollow" target="_blank">材料主题化</a>是一种定制<a class="ae ke" href="https://material.io/components" rel="noopener ugc nofollow" target="_blank">材料成分</a>以符合您的品牌的方式。材质主题包括<a class="ae ke" href="https://material.io/design/color/" rel="noopener ugc nofollow" target="_blank">颜色</a>、<a class="ae ke" href="https://material.io/design/typography/" rel="noopener ugc nofollow" target="_blank">版式</a>和<a class="ae ke" href="https://material.io/design/shape/" rel="noopener ugc nofollow" target="_blank">形状</a>参数，您可以调整这些参数以获得组件的近乎无限的变化——同时保持它们的核心结构和可用性。</p><figure class="kg kh ki kj fd hj er es paragraph-image"><div class="er es kf"><img src="../Images/14d8cced579c346c1e54fe91eb031339.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*t4HLCwBzRyzmnG4B_WkbZQ.gif"/></div></figure><p id="dcf3" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">在Android上，从版本<code class="du kk kl km kn b">1.1.0</code>开始，可以使用<a class="ae ke" href="https://github.com/material-components/material-components-android" rel="noopener ugc nofollow" target="_blank">材料组件(MDC)库</a>实现材料主题化。如果您希望从设计支持库或MDC <code class="du kk kl km kn b">1.0.0</code>进行迁移，请查看我们的迁移指南。</p><div class="hg hh ez fb hi ko"><a rel="noopener follow" target="_blank" href="/androiddevelopers/migrating-to-material-components-for-android-ec6757795351"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd ht fi z dy kt ea eb ku ed ef hr bi translated">迁移到Android的材料组件</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">来自设计支持库👉MDC 1.0.0👉MDC 1.1.0及更高版本</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">medium.com</p></div></div><div class="kx l"><div class="ky l kz la lb kx lc ho ko"/></div></div></a></div><p id="f9c1" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">这篇文章将集中在颜色主题上。</p><h1 id="9f58" class="ld le hs bd lf lg lh li lj lk ll lm ln iy lo iz lp jb lq jc lr je ls jf lt lu bi translated">颜色属性</h1><p id="ae1a" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">材料设计提供了12种颜色的“插槽”,构成了应用程序的整体调色板。每一个都有一个设计术语(如“原色”)以及一个相应的颜色属性，可以在你的应用程序主题中覆盖(如<code class="du kk kl km kn b">colorPrimary</code>)。亮主题和暗主题都有默认的“基线”值。</p><figure class="kg kh ki kj fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ma"><img src="../Images/bded0b59a6cebc9193ac899bba1932a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kVYqBGyX_ZACfIxzTU1ofQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">MDC color attributes with light baseline values</figcaption></figure><figure class="kg kh ki kj fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ma"><img src="../Images/51e76ab60958e3d8b617f2a54ee940e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YnqriWliMV6nSTZ2N3-GUQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">MDC color attributes with dark baseline values</figcaption></figure><p id="1af9" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">材质组件使用这些颜色属性来给小部件的元素着色。</p><figure class="kg kh ki kj fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mf"><img src="../Images/e4fbf0fb1b70d5cdc0349f25536d1b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2BhshmF0ExQJi5d8f60i7A.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Color attributes used by a button</figcaption></figure><p id="a779" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">它们与eg一起使用。</p><pre class="kg kh ki kj fd mg kn mh mi aw mj bi"><span id="095c" class="mk le hs kn b fi ml mm l mn mo">app:backgroundTint=”?attr/colorSecondary”</span></pre><p id="7618" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">在布局和部件样式中。</p><p id="0394" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">你可能会认出<em class="kd">这些颜色属性中的一些</em>，比如<code class="du kk kl km kn b">colorPrimary</code>。这是因为其中一些是从AppCompat和平台继承的，而其余的是MDC新引入的。下表说明了每个属性的来源。</p><figure class="kg kh ki kj fd hj"><div class="bz dy l di"><div class="mp mq l"/></div></figure><h1 id="b3ba" class="ld le hs bd lf lg lh li lj lk ll lm ln iy lo iz lp jb lq jc lr je ls jf lt lu bi translated">挑选颜色</h1><p id="25cf" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">确定每个槽使用的颜色值可能是设计师的责任，或者来自于您的产品品牌。但是，了解每种颜色的作用、它们之间的关系以及如何满足可访问性要求仍然很有用:</p><ul class=""><li id="1681" class="mr ms hs jj b jk jl jn jo jq mt ju mu jy mv kc mw mx my mz bi translated"><code class="du kk kl km kn b">colorPrimary</code>和<code class="du kk kl km kn b">colorSecondary</code>代表您品牌的颜色</li><li id="bffd" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated"><code class="du kk kl km kn b">colorPrimaryVariant</code>和<code class="du kk kl km kn b">colorSecondaryVariant</code>是您品牌颜色中较浅的<em class="kd">或较深的</em></li><li id="e3b6" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated"><code class="du kk kl km kn b">colorSurface</code>用于材料的“薄片”(如卡片和底层)</li><li id="40a7" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated"><code class="du kk kl km kn b">android:colorBackground</code>是您的应用程序的窗口背景颜色</li><li id="45d7" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated"><code class="du kk kl km kn b">colorError</code>顾名思义，表示错误和警告</li><li id="c0b4" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated">各种“开”颜色(<code class="du kk kl km kn b">colorOnPrimary</code>、<code class="du kk kl km kn b">colorOnSecondary</code>、<code class="du kk kl km kn b">colorOnSurface</code>等)。)用于给显示在其他颜色之上的<em class="kd">前景内容(如文本和图标)着色。它们需要满足<a class="ae ke" href="https://material.io/design/usability/accessibility.html#color-and-contrast" rel="noopener ugc nofollow" target="_blank">的可访问性要求</a>，并且与展示它们的颜色有足够的对比度。</em></li></ul><h2 id="678e" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated">颜色工具</h2><p id="f0c0" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">材料设计为预览颜色和确定合适的变体和“开”色提供了有用的工具:</p><ul class=""><li id="6229" class="mr ms hs jj b jk jl jn jo jq mt ju mu jy mv kc mw mx my mz bi translated"><a class="ae ke" href="https://material.io/resources/color/" rel="noopener ugc nofollow" target="_blank"> <strong class="jj ht">材质颜色工具</strong> </a> <strong class="jj ht"> : </strong>获得你的原色和次原色的亮/暗变体以及合适的“开”色。预览这些在示例屏幕中的外观。</li><li id="7d24" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated"><a class="ae ke" href="https://material.io/design/color/the-color-system.html#tools-for-picking-colors" rel="noopener ugc nofollow" target="_blank"> <strong class="jj ht">材质调色板生成器</strong> </a> <strong class="jj ht"> : </strong>为一种颜色生成全色调调色板(shade 50–900)。获取互补色、类似色和三色的建议。</li></ul><figure class="kg kh ki kj fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ns"><img src="../Images/0e5c997650e154287b0801c2420d6bc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1oilSZVGUZ3uGgeidL8zjw.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Material color tool (left) and Material palette generator (right)</figcaption></figure><h2 id="5fe2" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated">需要考虑的事项</h2><ul class=""><li id="5514" class="mr ms hs jj b jk lv jn lw jq nt ju nu jy nv kc mw mx my mz bi translated">你几乎总是想覆盖<code class="du kk kl km kn b">colorPrimary</code>、<code class="du kk kl km kn b">colorSecondary</code>和它们的变体，除非你的品牌恰好使用完全相同的紫色/蓝绿色十六进制值作为基线材质主题。</li><li id="949c" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated">您不必覆盖所有颜色。有些，比如<code class="du kk kl km kn b">colorSurface</code>，使用中性色，所以依赖默认值是完全没问题的。</li><li id="8c03" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated">如果您的品牌没有定义任何类型的辅助色或强调色，那么可以对<code class="du kk kl km kn b">colorPrimary</code>和<code class="du kk kl km kn b">colorSecondary</code>使用单一颜色。变体也是如此(例如<code class="du kk kl km kn b">colorPrimary</code>和<code class="du kk kl km kn b">colorPrimaryVariant</code>可能相同)。</li><li id="2b99" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated">尽管是独立的属性，但颜色、它的变体(如果存在的话)和它的“开”色(例如<code class="du kk kl km kn b">colorPrimary</code>、<code class="du kk kl km kn b">colorPrimaryVariant</code>和<code class="du kk kl km kn b">colorOnPrimary</code>)之间有着内在的联系。覆盖一个意味着检查其他的是否有意义，是否满足可访问性需求。</li></ul><h2 id="b81c" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated">附加颜色插槽</h2><p id="8bc4" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">您的设计系统可能需要材质主题指定的12个颜色槽之外的额外颜色槽。幸运的是，在Android上通过声明一个颜色属性，这相对容易做到:</p><figure class="kg kh ki kj fd hj"><div class="bz dy l di"><div class="mp mq l"/></div></figure><h1 id="461d" class="ld le hs bd lf lg lh li lj lk ll lm ln iy lo iz lp jb lq jc lr je ls jf lt lu bi translated">色彩资源</h1><p id="5aee" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">颜色值被定义为<code class="du kk kl km kn b">&lt;color&gt;</code>资源。对于自定义颜色，我们推荐两种方法来帮助分离关注点，并为您的应用程序中的颜色主题值创建一个真实的来源:</p><ul class=""><li id="735a" class="mr ms hs jj b jk jl jn jo jq mt ju mu jy mv kc mw mx my mz bi translated">将所有的<code class="du kk kl km kn b">&lt;color&gt;</code>存储在一个单独的res/values/colors.xml文件中</li><li id="987b" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated">使用文字名称来描述值，而不是分配语义含义:</li><li id="d660" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated">这样做鼓励在使用颜色时使用<code class="du kk kl km kn b">?attr/</code>引用，这是支持深色主题的推荐方法</li><li id="690d" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated">使用像<code class="du kk kl km kn b">green_500</code>或<code class="du kk kl km kn b">brand_name_yellow</code>这样的名字</li><li id="79f2" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated">避免语义名称，如<code class="du kk kl km kn b">color_primary</code></li></ul><figure class="kg kh ki kj fd hj"><div class="bz dy l di"><div class="mp mq l"/></div></figure><h1 id="e49c" class="ld le hs bd lf lg lh li lj lk ll lm ln iy lo iz lp jb lq jc lr je ls jf lt lu bi translated">覆盖应用程序主题中的颜色</h1><p id="e0a2" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">让我们来看看如何通过覆盖相关属性将您选择的调色板添加到应用程序主题中。</p><p id="0f6f" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">首先，我们建议设置你的主题来优雅地处理浅色和深色调色板，同时减少基本主题的重复。关于这个话题的更多信息，请看一下<a class="nw nx ge" href="https://medium.com/u/9303277cb6db?source=post_page-----860dbba8ce2f--------------------------------" rel="noopener" target="_blank"> Chris Banes </a>关于黑暗主题的文章，以及<a class="ae ke" href="https://chris.banes.dev/talks/2019/developing-themes-with-style-berlin/" rel="noopener ugc nofollow" target="_blank">他和</a><a class="nw nx ge" href="https://medium.com/u/22c02a30ae04?source=post_page-----860dbba8ce2f--------------------------------" rel="noopener" target="_blank"> Nick Butcher </a>的【用风格开发主题】演讲。</p><div class="hg hh ez fb hi ko"><a rel="noopener follow" target="_blank" href="/androiddevelopers/dark-theme-with-mdc-4c6fc357d956"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd ht fi z dy kt ea eb ku ed ef hr bi translated">MDC的黑暗主题</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">使用材料设计组件实现黑暗主题</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">medium.com</p></div></div><div class="kx l"><div class="ny l kz la lb kx lc ho ko"/></div></div></a></div><p id="c6ab" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">设置好之后，覆盖你想在明暗主题中改变的颜色属性:</p><figure class="kg kh ki kj fd hj"><div class="bz dy l di"><div class="mp mq l"/></div></figure><p id="58bc" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">材质组件将响应主题级别的颜色覆盖:</p><figure class="kg kh ki kj fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nz"><img src="../Images/26c995ae336d11092e991854e661f407.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*InG47o7Sm1Ny8HLAGqmF3A.gif"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Material Design components responding to theme-level color overrides</figcaption></figure><h1 id="27ea" class="ld le hs bd lf lg lh li lj lk ll lm ln iy lo iz lp jb lq jc lr je ls jf lt lu bi translated">颜色可重用性和最佳实践</h1><p id="4cb2" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">有许多情况涉及到在布局、绘图、风格和其他地方使用颜色。我们将通过一些方法使你的代码尽可能地可重用，而不管你的应用主题中指定的颜色值。</p><h2 id="a875" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated">首选属性</h2><p id="b7b6" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">我们建议最重要的是使用<code class="du kk kl km kn b">?attr/</code>颜色参考。这是创建可重用布局和默认样式的推荐方法，这些布局和样式支持多种主题，如亮/暗。</p><figure class="kg kh ki kj fd hj"><div class="bz dy l di"><div class="mp mq l"/></div></figure><p id="b1bd" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">看看Nick Butcher 的“Android风格:偏好主题属性”文章，了解更多解释和一些例外情况。</p><div class="hg hh ez fb hi ko"><a rel="noopener follow" target="_blank" href="/androiddevelopers/android-styling-prefer-theme-attributes-412caa748774"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd ht fi z dy kt ea eb ku ed ef hr bi translated">Android风格:偏好主题属性</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">所有事物的主题属性</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">medium.com</p></div></div><div class="kx l"><div class="oa l kz la lb kx lc ho ko"/></div></div></a></div><h2 id="81a3" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated">带alpha的颜色</h2><p id="591b" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">有时候，您可能希望使用MDC主题中的一种颜色，其alpha值为60%。这方面的例子包括触摸波纹和检查状态覆盖。</p><p id="aae7" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">Android <code class="du kk kl km kn b">&lt;color&gt;</code>资源<em class="kd">是否</em>允许alpha通道:</p><pre class="kg kh ki kj fd mg kn mh mi aw mj bi"><span id="8532" class="mk le hs kn b fi ml mm l mn mo">&lt;!-- 60% alpha = 99 --&gt;<br/>&lt;color name=”navy_700_alpha_60”&gt;#9937596D&lt;/color&gt;</span></pre><p id="6a46" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">然而，使用这种方法，我们需要为每个alpha值维护单独的颜色资源。这也意味着我们不能使用这些作为<code class="du kk kl km kn b">?attr/</code>，这违背了我们上面提到的单一来源的真理方法。</p><p id="a20c" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">相反，我们建议利用存储在你的res/color目录中的<code class="du kk kl km kn b">ColorStateList</code>。一个CSL可以有一个包含颜色引用<em class="kd">和alpha值</em>的项目，这对于我们的用例来说是完美的:</p><figure class="kg kh ki kj fd hj"><div class="bz dy l di"><div class="mp mq l"/></div></figure><p id="ce62" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">使用这些可能会让你感到惊讶——它们引用了<code class="du kk kl km kn b">@color/primary_60</code>符号——但是考虑到我们正在处理一个本身使用<code class="du kk kl km kn b">?attr/</code>来引用底层主题颜色的CSL，这没有问题。</p><h2 id="32b2" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated">每个状态的颜色和主题覆盖</h2><p id="b350" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated"><code class="du kk kl km kn b">ColorStateList</code>更常用于根据视图状态在颜色(和alpha值)之间切换。MDC小部件对禁用状态、悬停状态和按下状态等大量使用了这一点。下面是MDC <a class="ae ke" href="https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/button/res/color/mtrl_btn_bg_color_selector.xml" rel="noopener ugc nofollow" target="_blank">源代码</a>中一个按钮背景色调的例子:</p><figure class="kg kh ki kj fd hj"><div class="bz dy l di"><div class="mp mq l"/></div></figure><p id="c7fd" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">以按钮为例，假设您想将主背景色从原色更改为次色:</p><figure class="kg kh ki kj fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ob"><img src="../Images/7be9cc1dad5a3384045a7e1bb00b72fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zw331fqNxvdBkiC1RlXmng.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Primary button (left) and secondary button (right)</figcaption></figure><p id="f056" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">您可以<em class="kd">将上面的源文件</em>复制到您的代码库中，并将<code class="du kk kl km kn b">colorPrimary</code>更改为<code class="du kk kl km kn b">colorSecondary</code>，但是这很繁琐，而且如果源代码发生变化，就会出现问题。</p><p id="fc19" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">更好的方法是使用主题叠加。Nick Butcher 在他的“Android风格:主题叠加”的帖子中对此进行了详细介绍。本质上，我们可以为特定的<code class="du kk kl km kn b">View</code>或<code class="du kk kl km kn b">ViewGroup</code>以及任何后代(在我们的例子中是一个按钮)替换特定主题属性的值(在我们的例子中是T0)。</p><div class="hg hh ez fb hi ko"><a rel="noopener follow" target="_blank" href="/androiddevelopers/android-styling-themes-overlay-1ffd57745207"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd ht fi z dy kt ea eb ku ed ef hr bi translated">Android风格:主题覆盖</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">在本系列关于Android风格的前几篇文章中，我们已经看到了风格和主题之间的区别…</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">medium.com</p></div></div><div class="kx l"><div class="oa l kz la lb kx lc ho ko"/></div></div></a></div><p id="14df" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">下面可以看到一个基本的主题叠加。请注意空的父对象，这确保我们只覆盖我们希望更改的属性:</p><figure class="kg kh ki kj fd hj"><div class="bz dy l di"><div class="mp mq l"/></div></figure><p id="e1a3" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">在XML中应用主题覆盖时，有两个选项需要考虑:</p><ul class=""><li id="8c29" class="mr ms hs jj b jk jl jn jo jq mt ju mu jy mv kc mw mx my mz bi translated"><code class="du kk kl km kn b">android:theme</code>:适用于所有小工具，不适用于默认样式</li><li id="d79d" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated"><code class="du kk kl km kn b">app:materialThemeOverlay</code>:仅适用于MDC窗口小部件(或在使用<a class="ae ke" href="https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/theme/overlay/MaterialThemeOverlay.java#L61" rel="noopener ugc nofollow" target="_blank">materialsthemeoverlay # wrap</a>的自定义视图中)，适用于默认样式</li></ul><figure class="kg kh ki kj fd hj"><div class="bz dy l di"><div class="mp mq l"/></div></figure><h2 id="5e3f" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated">API兼容性</h2><p id="1c10" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">csl和其他地方对<code class="du kk kl km kn b">?attr/</code>的平台支持只在API 23中添加。如果你的minSdk低于这个，不要担心:兼容性类确实存在！事实上，MDC和AppCompat小部件都利用了这些底层功能，因此在使用它们时不需要额外的工作。</p><p id="ea2d" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">对于需要以编程方式使用csl的场景，使用<code class="du kk kl km kn b"><a class="ae ke" href="https://developer.android.com/reference/androidx/appcompat/content/res/AppCompatResources" rel="noopener ugc nofollow" target="_blank">AppCompatResources</a></code>:</p><pre class="kg kh ki kj fd mg kn mh mi aw mj bi"><span id="23d0" class="mk le hs kn b fi ml mm l mn mo">val primary60 = AppCompatResources.getColorStateList(<br/>    context, R.color.primary60<br/>)</span></pre><h1 id="446c" class="ld le hs bd lf lg lh li lj lk ll lm ln iy lo iz lp jb lq jc lr je ls jf lt lu bi translated">MDC小部件中的颜色</h1><p id="0c39" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">前面我们说过，MDC小部件响应主题级别颜色属性的覆盖。但是你怎么知道，例如，一个按钮使用<code class="du kk kl km kn b">colorPrimary</code>作为它的背景色调，使用<code class="du kk kl km kn b">colorOnPrimary</code>作为它的图标和文本标签呢？让我们来看看几个选项。</p><h2 id="93a6" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated">建立一个物质主题</h2><p id="e4c1" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated"><a class="ae ke" href="https://material.io/resources/build-a-material-theme" rel="noopener ugc nofollow" target="_blank">构建一个材质主题</a>是一个交互式Android项目，让你通过定制颜色、字体和形状的值来创建自己的材质主题。它还包括所有主题化参数和组件的目录。可以通过以下方式确定哪些小部件响应主题颜色属性的变化:</p><ul class=""><li id="b996" class="mr ms hs jj b jk jl jn jo jq mt ju mu jy mv kc mw mx my mz bi translated">克隆<a class="ae ke" href="https://github.com/material-components/material-components-android-examples/tree/develop/MaterialThemeBuilder" rel="noopener ugc nofollow" target="_blank">项目</a>并在Android Studio中运行应用程序</li><li id="432d" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated">调整<a class="ae ke" href="https://github.com/material-components/material-components-android-examples/blob/develop/MaterialThemeBuilder/app/src/main/res/values/color.xml" rel="noopener ugc nofollow" target="_blank"> res/values/color.xml </a>以及<a class="ae ke" href="https://github.com/material-components/material-components-android-examples/blob/develop/MaterialThemeBuilder/app/src/main/res/values/themes.xml" rel="noopener ugc nofollow" target="_blank"> res/values/themes.xml </a>和<a class="ae ke" href="https://github.com/material-components/material-components-android-examples/blob/develop/MaterialThemeBuilder/app/src/main/res/values-night/themes.xml" rel="noopener ugc nofollow" target="_blank">RES/values-night/themes . XML</a>中的值</li><li id="c48c" class="mr ms hs jj b jk na jn nb jq nc ju nd jy ne kc mw mx my mz bi translated">通过重新运行应用程序观察视觉变化</li></ul><figure class="kg kh ki kj fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es oc"><img src="../Images/7407dd6e785522ee5efccdba20a7e4c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-MskvXpGUGR4GcETGUwirQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Changes in color values in Build a Material Theme</figcaption></figure><h2 id="d6b9" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated">MDC开发人员文档</h2><p id="7425" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">MDC开发人员文档最近已被刷新。作为其中的一部分，我们包含了属性表，其中包含了库中使用的设计术语和默认值。例如，查看更新的<a class="ae ke" href="https://github.com/material-components/material-components-android/blob/master/docs/components/Button.md" rel="noopener ugc nofollow" target="_blank">按钮文档</a>的“解剖和关键属性”部分。</p><figure class="kg kh ki kj fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es od"><img src="../Images/80949e4ac45589f3e607d6e462abcd56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*roGdp5aQcAFhLdx73VataQ.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">MDC button dev doc attribute table with default color values</figcaption></figure><h2 id="13a3" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated">源代码</h2><p id="79de" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">检查MDC源代码可以说是最可靠的方法。MDC使用默认样式来实现材质主题化，所以查看这些以及任何可样式化的属性和java文件是一个好主意。例如，检查<code class="du kk kl km kn b">MaterialButton</code>的<a class="ae ke" href="https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/button/res/values/styles.xml" rel="noopener ugc nofollow" target="_blank">样式</a>、<a class="ae ke" href="https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/button/res/values/attrs.xml" rel="noopener ugc nofollow" target="_blank">属性</a>和<a class="ae ke" href="https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/button/MaterialButton.java" rel="noopener ugc nofollow" target="_blank"> java文件</a>。</p><figure class="kg kh ki kj fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es oe"><img src="../Images/ef890672b010f6f77166eebcb149e670.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w_wXzF4N8IYbz9U1FbaUrg.png"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">MDC button default style with color values</figcaption></figure><h1 id="8c31" class="ld le hs bd lf lg lh li lj lk ll lm ln iy lo iz lp jb lq jc lr je ls jf lt lu bi translated">自定义视图中的颜色</h1><p id="1345" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">您的应用程序可能包含您构建的或从现有库中获取的自定义微件。将这些视图与标准的MDC小部件一起使用时，使这些视图响应材料主题是很有用的。让我们来看看在支持定制小部件的颜色主题化时需要记住什么。</p><h2 id="a34e" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated">在<code class="du kk kl km kn b">&lt;declare-styleable&gt;</code> s和默认样式中使用MDC属性</h2><p id="3a39" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">允许您的定制视图被样式化涉及到使用一个<code class="du kk kl km kn b">&lt;declare-styleable&gt;</code>。重用MDC中的attr名称有助于保持一致性。使用<code class="du kk kl km kn b">&lt;declare-styleable&gt;</code>的默认样式也可以引用MDC主题颜色属性的值:</p><figure class="kg kh ki kj fd hj"><div class="bz dy l di"><div class="mp mq l"/></div></figure><h2 id="614b" class="mk le hs bd lf nf ng nh lj ni nj nk ln jq nl nm lp ju nn no lr jy np nq lt nr bi translated"><code class="du kk kl km kn b">MaterialColors</code>公用事业类</h2><p id="0339" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">可以使用一个方便的新MDC类<code class="du kk kl km kn b"><a class="ae ke" href="https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/color/MaterialColors.java" rel="noopener ugc nofollow" target="_blank">MaterialColors</a></code>以编程方式解析主题颜色属性，这对于定制视图也很有用:</p><figure class="kg kh ki kj fd hj"><div class="bz dy l di"><div class="mp mq l"/></div></figure><h1 id="c30b" class="ld le hs bd lf lg lh li lj lk ll lm ln iy lo iz lp jb lq jc lr je ls jf lt lu bi translated">好的谷歌，下一步是什么？</h1><p id="81b2" class="pw-post-body-paragraph jh ji hs jj b jk lv it jm jn lw iw jp jq lx js jt ju ly jw jx jy lz ka kb kc ha bi translated">我们已经使用MDC完成了在你的Android应用中实现颜色主题的过程。一定要看看我们在这个系列中的其他帖子，为什么我们建议使用MDC，类型主题，形状主题，黑暗主题和材质的运动系统。</p><div class="hg hh ez fb hi ko"><a rel="noopener follow" target="_blank" href="/androiddevelopers/we-recommend-material-design-components-81e6d165c2dd"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd ht fi z dy kt ea eb ku ed ef hr bi translated">我们推荐材料设计组件</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">原因如下</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">medium.com</p></div></div><div class="kx l"><div class="of l kz la lb kx lc ho ko"/></div></div></a></div><div class="hg hh ez fb hi ko"><a rel="noopener follow" target="_blank" href="/androiddevelopers/material-theming-with-mdc-type-8c2013430247"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd ht fi z dy kt ea eb ku ed ef hr bi translated">使用MDC的材质主题:类型</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">使用MDC库在Android上输入主题</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">medium.com</p></div></div><div class="kx l"><div class="og l kz la lb kx lc ho ko"/></div></div></a></div><div class="hg hh ez fb hi ko"><a rel="noopener follow" target="_blank" href="/androiddevelopers/material-theming-with-mdc-shape-126c4e5cd7b4"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd ht fi z dy kt ea eb ku ed ef hr bi translated">使用MDC的材质主题:形状</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">使用MDC库在Android上设计主题</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">medium.com</p></div></div><div class="kx l"><div class="oh l kz la lb kx lc ho ko"/></div></div></a></div><div class="hg hh ez fb hi ko"><a rel="noopener follow" target="_blank" href="/androiddevelopers/dark-theme-with-mdc-4c6fc357d956"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd ht fi z dy kt ea eb ku ed ef hr bi translated">MDC的黑暗主题</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">使用材料设计组件实现黑暗主题</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">medium.com</p></div></div><div class="kx l"><div class="ny l kz la lb kx lc ho ko"/></div></div></a></div><div class="hg hh ez fb hi ko"><a rel="noopener follow" target="_blank" href="/androiddevelopers/material-motion-with-mdc-c1f09bb90bf9"><div class="kp ab dw"><div class="kq ab kr cl cj ks"><h2 class="bd ht fi z dy kt ea eb ku ed ef hr bi translated">使用MDC的材料运动</h2><div class="kv l"><h3 class="bd b fi z dy kt ea eb ku ed ef dx translated">为Android构建带有材质运动的美丽过渡</h3></div><div class="kw l"><p class="bd b fp z dy kt ea eb ku ed ef dx translated">medium.com</p></div></div><div class="kx l"><div class="oi l kz la lb kx lc ho ko"/></div></div></a></div><p id="8413" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">一如既往，我们鼓励你在GitHub上提交<a class="ae ke" href="https://github.com/material-components/material-components-android/issues/new?assignees=&amp;labels=bug&amp;template=bug_report.md&amp;title=%5BComponent+name%5D+Short+description+of+issue" rel="noopener ugc nofollow" target="_blank">错误报告</a>和<a class="ae ke" href="https://github.com/material-components/material-components-android/issues/new?assignees=&amp;labels=feature+request&amp;template=feature_request.md&amp;title=%5BComponent+name%5D+Short+description+of+request" rel="noopener ugc nofollow" target="_blank">功能请求</a>。另外，请务必查看我们的Android <a class="ae ke" href="https://github.com/material-components/material-components-android-examples" rel="noopener ugc nofollow" target="_blank">配套示例应用</a>。</p></div><div class="ab cl oj ok go ol" role="separator"><span class="om bw bk on oo op"/><span class="om bw bk on oo op"/><span class="om bw bk on oo"/></div><div class="ha hb hc hd he"><p id="dd84" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">如果你已经成功实现了颜色主题化，或者如果你在这样做时遇到了困难，请在下面留下评论，或者通过Twitter<a class="ae ke" href="https://twitter.com/materialdesign" rel="noopener ugc nofollow" target="_blank">@ material design</a>和<a class="ae ke" href="https://twitter.com/AndroidDev" rel="noopener ugc nofollow" target="_blank"> @AndroidDev </a>联系我们。</p></div></div>    
</body>
</html>