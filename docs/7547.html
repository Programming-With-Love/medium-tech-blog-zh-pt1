<html>
<head>
<title>Azure Data Lake Command-Line access — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Azure数据湖命令行访问—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/version-1/access-adls-g2-with-unix-filesystem-commands-part-1-5c7e2584a4f9?source=collection_archive---------0-----------------------#2022-05-10">https://medium.com/version-1/access-adls-g2-with-unix-filesystem-commands-part-1-5c7e2584a4f9?source=collection_archive---------0-----------------------#2022-05-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="1b79" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jc">使用PowerShell </em> </strong>在Azure Data Lake Storage G2上模拟Unix或Cmd命令— ls、md、rm、mv</p><p id="8279" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从命令行Unix风格快速浏览ADLS的数据不是很棒吗？</p><p id="e39a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章中，我将通过一个(相当)简单的PowerShell代码来让您做到这一点。</p><h2 id="fd60" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated"><strong class="ak">示例—“CD”到Azure Data Lake G2并创建一个新文件夹。</strong></h2><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es jy"><img src="../Images/0714b082d519b27890820db90dc0590d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zSlx_RtH3Ll7-DoBeeeoEg.png"/></div></div><figcaption class="kk kl et er es km kn bd b be z dx">Creating a new folder in ADLS for my cat pictures…</figcaption></figure><p id="a675" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jc"> lls </em> </strong>表示“湖ls”，而<strong class="ig hi"> <em class="jc"> lmd </em> </strong>表示“湖md”，这样我们就不会与本地ls &amp; md命令冲突。</p></div><div class="ab cl ko kp go kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ha hb hc hd he"><h2 id="12b1" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">TL；博士；医生</h2><ul class=""><li id="3284" class="kv kw hh ig b ih kx il ky ip kz it la ix lb jb lc ld le lf bi translated">您可以设置PowerShell代码和函数来使用类似Unix的命令在ADLS G2上快速移动。</li><li id="02de" class="kv kw hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">您确实需要对每个Lake实例进行一些设置，但是ls和mv这样的命令是可重用的。</li><li id="8e77" class="kv kw hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">完整的代码清单<a class="ae ll" href="https://gist.github.com/SinisterChinaPenguin/fe7a867aeb789bf03bcc219d68c7245c" rel="noopener ugc nofollow" target="_blank">在这里</a>。</li><li id="e4ac" class="kv kw hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">在这篇文章的最后有一个<strong class="ig hi">故障排除</strong>部分处理常见问题。</li></ul><p id="eb5e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这个博客系列的最后，我将展示一个带有快速设置说明的<a class="ae ll" href="https://gist.github.com/SinisterChinaPenguin/fe7a867aeb789bf03bcc219d68c7245c" rel="noopener ugc nofollow" target="_blank">完整代码清单</a>。</p></div><div class="ab cl ko kp go kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ha hb hc hd he"><h2 id="6d0b" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated"><strong class="ak">假设</strong></h2><p id="c13d" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">虽然您可以设置其他身份验证机制，但我假设您有AAD身份验证，并且您有权限访问您的存储。</p><p id="b49c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我还假设ADLS G2文件系统已经就绪，并且我们对所有ADLS实例使用同一个Azure租户。不支持ADLS·G1。</p></div><div class="ab cl ko kp go kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ha hb hc hd he"><h1 id="4e68" class="lp je hh bd jf lq lr ls jj lt lu lv jn lw lx ly jq lz ma mb jt mc md me jw mf bi translated">逐步建立</h1><p id="6265" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">在这篇第1部分的文章中，我们将设置基本的PowerShell管道，并获得一个“CD”命令来连接ADLS，以及一个“LS”函数来浏览我们的ADLS文件系统。</p></div><div class="ab cl ko kp go kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ha hb hc hd he"><h2 id="5fdb" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated"><strong class="ak">添加Azure Storage PowerShell模块</strong></h2><p id="26ac" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">这些脚本在Azure存储模块中使用PowerShell Azure存储命令，因此第一步是通过在PowerShell窗口中运行以下命令来安装该模块。</p><pre class="jz ka kb kc fd mg mh mi mj aw mk bi"><span id="3f7e" class="jd je hh mh b fi ml mm l mn mo"><strong class="mh hi"><em class="jc">Install-Module Az.Storage -Repository PSGallery -Force</em></strong></span></pre><p id="817b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将为我们提供所需的PowerShell存储命令，并且只需执行一次。</p></div><div class="ab cl ko kp go kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ha hb hc hd he"><h2 id="630a" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated"><strong class="ak">编辑您的PowerShell配置文件</strong></h2><p id="e225" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">为了使每次启动PowerShell时命令都可用，我们将这篇文章中的所有代码添加到我们的PowerShell配置文件中(这只是一个PowerShell脚本)</p><p id="bba9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要查看您的配置文件，只需在PowerShell窗口中键入<strong class="ig hi"> $profile </strong></p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es mp"><img src="../Images/5662dc41500566b8327748f77fa38a57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l5hWditQGAM2HPfEM4syiw.png"/></div></div><figcaption class="kk kl et er es km kn bd b be z dx">My profile path….</figcaption></figure><p id="8fca" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:微软。如果您以前没有设置Psh配置文件，PowerShell_profile.ps1 "文件可能不存在。</p><p id="2907" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果不存在，您可以从PowerShell运行<strong class="ig hi"> <em class="jc">记事本$profile </em> </strong>进行编辑或创建。</p><p id="3872" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">或者创建\编辑<strong class="ig hi"> <em class="jc">微软。您最喜欢的IDE中的PowerShell _ profile . PS1</em></strong>。</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div class="er es mq"><img src="../Images/cb7d266c47cca0b88c643fd1c039a7db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1190/format:webp/1*KuiHJ-zwFb3QZ_wugQ_eRQ.png"/></div><figcaption class="kk kl et er es km kn bd b be z dx">editing my PowerShell profile in VS Code</figcaption></figure></div><div class="ab cl ko kp go kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ha hb hc hd he"><p id="ba88" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">好了，先决条件已经完成，现在添加代码…</p><h2 id="2afa" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated"><strong class="ak"> Azure租户和连接功能</strong></h2><p id="c5bf" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">首先，我们需要告诉PowerShell我们正在连接的Azure租户，以便在下面代码的第一行设置<strong class="ig hi"> $tenantID </strong>变量。</p><p id="d101" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们还创建了一个<strong class="ig hi"> <em class="jc">连接</em> </strong>函数来处理检查&amp;建立Azure连接。</p><p id="b7d5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将以下代码粘贴到您的PowerShell配置文件中，用您的tenantID替换xxxxxxx-xxx…。(<a class="ae ll" href="https://docs.microsoft.com/en-us/azure/active-directory/fundamentals/active-directory-how-to-find-tenant" rel="noopener ugc nofollow" target="_blank">该微软页面</a>解释了如何获得您的tenantID)</p><pre class="jz ka kb kc fd mg mh mi mj aw mk bi"><span id="38d5" class="jd je hh mh b fi ml mm l mn mo">$tenantID="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"</span><span id="52ed" class="jd je hh mh b fi mr mm l mn mo"><strong class="mh hi">function connect</strong>{<br/> if (-Not (get-azcontext))<br/> {<br/>  Connect-AzAccount -TenantId $tenantID<br/> }<br/>}</span></pre><p id="97e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">代码使用<strong class="ig hi"><em class="jc">get-az context</em></strong>来检查我们是否连接到Azure租户&amp;仅在我们尚未连接时调用<strong class="ig hi"><em class="jc">Connect-az account</em></strong>。</p></div><div class="ab cl ko kp go kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ha hb hc hd he"><h2 id="f533" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated"><strong class="ak">“CD”命令</strong></h2><p id="30bd" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">我使用了前缀为“<strong class="ig hi"> <em class="jc"> CD </em> </strong>”的PowerShell函数在ADLS存储帐户\文件系统之间移动。</p><p id="26cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">重要提示</strong> —您需要为您想要使用的每个ADLS文件系统设置一个<strong class="ig hi">“CD”</strong>函数。</p><p id="f27e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例如，要连接到名为“<strong class="ig hi">test</strong>”&amp;的存储帐户中的ADLS G2，一个名为“<strong class="ig hi"> myfilesystem </strong>的文件系统向您的配置文件添加一个新函数，如下所示:</p><pre class="jz ka kb kc fd mg mh mi mj aw mk bi"><span id="5cdf" class="jd je hh mh b fi ml mm l mn mo">function cd_test { # set to a friendly name for the ADLS filesystem you want to connect to<br/>    connect<br/>    $storageAccount = 'test'     # Set to your Storage Account Name<br/>    $filesystem = 'myfilesystem'    # Set to your ADLS File System Name<br/> <br/>    $global:ctx = New-AzStorageContext -StorageAccountName $storageAccount -UseConnectedAccount<br/>    $global:filesystemname = $filesystem<br/> <br/>    write-host "Storage Account: $storageAccount `nFileSystem: $global:filesystemname`n"<br/>}</span></pre><p id="bb07" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> CD… </strong>函数中的代码使用<strong class="ig hi"><em class="jc">New-AzStorageContext</em></strong>命令在<strong class="ig hi"> $global:ctx </strong>变量中设置一个存储上下文。它在后续PowerShell命令中用于为命令指定正确的存储帐户。</p><p id="773b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们还设置了一个<strong class="ig hi"> $filesystemname </strong>，它以同样的方式在PowerShell命令中指定正确的文件系统。</p><p id="2121" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您需要将此功能复制到您的PowerShell配置文件中:</p><ul class=""><li id="4bbd" class="kv kw hh ig b ih ii il im ip ms it mt ix mu jb lc ld le lf bi translated">将“<strong class="ig hi"> cd_test </strong>”更改为您选择的名称。</li><li id="bb7c" class="kv kw hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">将<strong class="ig hi"><em class="jc">$ Storage Account</em></strong>更改为您的ADLS G2存储帐户的名称。</li><li id="5eed" class="kv kw hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">将<strong class="ig hi"> <em class="jc"> $filesystem </em> </strong>设置为您的ADLS G2文件系统的名称。</li></ul><p id="87f3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是我为存储帐户“pshtest”和名为“pshcontainer”的文件系统使用的cd函数…</p><figure class="jz ka kb kc fd kd"><div class="bz dy l di"><div class="mv mw l"/></div><figcaption class="kk kl et er es km kn bd b be z dx">(See code <a class="ae ll" href="https://gist.github.com/SinisterChinaPenguin/a81e3136b24eaf4ae47cd78d8bc06c62" rel="noopener ugc nofollow" target="_blank">here</a>)</figcaption></figure><h2 id="bd8a" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated"><strong class="ak">“LS”命令</strong></h2><p id="32ad" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">最后，我们将为<strong class="ig hi"> ls </strong>功能添加一个函数到我们的配置文件中。</p><p id="5773" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我称它为“湖ls”的<strong class="ig hi"> lls </strong>，因为它需要一个不同于内置ls命令的名称。</p><p id="fa5e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此处不做任何更改—只需复制并粘贴到您的PowerShell配置文件中。</p><pre class="jz ka kb kc fd mg mh mi mj aw mk bi"><span id="5716" class="jd je hh mh b fi ml mm l mn mo">function lls([string]$path)<br/>{<br/>  if($path){<br/>   Get-AzDataLakeGen2ChildItem -Context $ctx -FileSystem $filesystemname -Path $path | Format-Table -AutoSize<br/>  }<br/>  else{<br/>   Get-AzDataLakeGen2ChildItem -Context $ctx -FileSystem $filesystemname | Format-Table -AutoSize<br/>  }<br/>}</span></pre><p id="3edf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里我们用<strong class="ig hi"><em class="jc">Get-azdatalakegen 2 childitem t</em></strong>o列出ADLS的文件和文件夹，作为<strong class="ig hi"> <em class="jc"> $path传入的路径。如果没有传入路径，我们只列出文件系统根目录的内容。</em></strong></p><p id="40c0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意，我们在这里使用了我们在上面的<strong class="ig hi"> <em class="jc"> connect </em> </strong>例程中设置的<strong class="ig hi"><em class="jc">$ CTX</em></strong>和<strong class="ig hi"><em class="jc">$ file system name</em></strong>全局变量。</p><p id="8086" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jc"> Format-Table </em> </strong>只是确保输出列表的格式很好。</p><h2 id="04c4" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated"><strong class="ak">组装并测试</strong></h2><p id="9a24" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">您现在应该有一些代码非常类似于下面的配置文件。</p><figure class="jz ka kb kc fd kd"><div class="bz dy l di"><div class="mv mw l"/></div><figcaption class="kk kl et er es km kn bd b be z dx">View\copy code <a class="ae ll" href="https://gist.github.com/SinisterChinaPenguin/718fbf8c8de13d675829f023dfb4b173" rel="noopener ugc nofollow" target="_blank">here</a></figcaption></figure><p id="7fa2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要进行测试，您需要<strong class="ig hi">关闭并重新打开PowerShell窗口</strong>来加载您更新的配置文件。</p><p id="f9f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果有任何语法错误，请返回并仔细检查代码中的错误。</p><h2 id="1a28" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">运行CD命令</h2><p id="84c8" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">我们现在可以键入cd函数的名称并连接到ADLS，PowerShell将提示我们是否需要进行身份验证。</p><p id="0feb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例如，我调用了我的cd函数<strong class="ig hi"> <em class="jc"> cd_pshtest </em> </strong>:</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div class="er es mx"><img src="../Images/a1aa97918435b04378e930af1aa89043.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*kJvOFGXhqC5AOUbVUhqzuQ.png"/></div><figcaption class="kk kl et er es km kn bd b be z dx">Connected! Type the name of YOUR cd function</figcaption></figure><p id="e8ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果成功，CD命令将返回存储帐户\文件系统。</p><h2 id="0c04" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">运行LS命令</h2><p id="bb68" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">现在我们已经连接到了ADLS文件系统，让我们测试LS命令——或者“LakeLS”的LLS</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es my"><img src="../Images/ac16eec01c61f9438522abeae3866059.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r8sKEDJxuKFT9MSkEGQpUQ.png"/></div></div></figure><p id="366e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以传入一个路径来查看子文件夹，例如“mike”子文件夹:</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es mz"><img src="../Images/d5982d0eeea76419498196411d376f32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xN4IGeA2TO5dCReNRXlBgw.png"/></div></div></figure></div><div class="ab cl ko kp go kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ha hb hc hd he"><h2 id="66a2" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">解决纷争</h2><ul class=""><li id="3a06" class="kv kw hh ig b ih kx il ky ip kz it la ix lb jb lc ld le lf bi translated">您必须重新启动PowerShell窗口来加载新的配置文件。</li><li id="e411" class="kv kw hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">授权错误可能需要您管理ADLS文件系统上的ACL，以授予自己读\写\执行权限。</li><li id="782c" class="kv kw hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated">运行<strong class="ig hi"><em class="jc">Clear-az context</em></strong>会很有用，如果你在租户之间移动很多&amp;有连接问题。</li><li id="e22a" class="kv kw hh ig b ih lg il lh ip li it lj ix lk jb lc ld le lf bi translated"><strong class="ig hi"><em class="jc">Get-azdatalakegen 2 childitem:此请求未被授权使用此权限执行此操作。您将需要管理ADLS文件系统上的ACL \ RBAC，以授予自己读\写\执行权限。</em></strong></li></ul></div><div class="ab cl ko kp go kq" role="separator"><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt ku"/><span class="kr bw bk ks kt"/></div><div class="ha hb hc hd he"><h2 id="bad1" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">最后</h2><p id="fcb9" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip lm ir is it ln iv iw ix lo iz ja jb ha bi translated">注意——命令没有“当前目录”的概念，所以你必须始终使用<strong class="ig hi">完整路径</strong>到任何命令。</p><p id="a620" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">希望这一切对您有用，并且是从PowerShell命令行在ADLS四处移动的一种很好的、简单的方式。</p><p id="b4e4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章的下一部分，我将通过为md、rm和mv添加命令来扩展功能，并讨论我们可能扩展和改进这些实用程序的其他方法。</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es na"><img src="../Images/9817a232a9b5bc253d04aa4ff0b161dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5NO-FiXOLAvhMP40X6cwXg.jpeg"/></div></div></figure><p id="199a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">关于作者:</strong> <br/> Mike Knee是Azure 1.0版的数据开发人员。</p></div></div>    
</body>
</html>