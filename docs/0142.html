<html>
<head>
<title>Using Chatbots to Provide Faster COVID-19 Community Support</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用聊天机器人提供更快的新冠肺炎社区支持</h1>
<blockquote>原文：<a href="https://medium.com/airbnb-engineering/using-chatbots-to-provide-faster-covid-19-community-support-567c97c5c1c9?source=collection_archive---------0-----------------------#2020-07-15">https://medium.com/airbnb-engineering/using-chatbots-to-provide-faster-covid-19-community-support-567c97c5c1c9?source=collection_archive---------0-----------------------#2020-07-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="b86d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Helpbot是一个由机器学习支持的客户支持聊天机器人，它取代了试图向Airbnb发送支持消息的客人的联系流程。我们使用Helpbot提供关于新冠肺炎问题的智能帮助，并为我们的 <a class="ae jd" href="https://news.airbnb.com/update-about-our-extenuating-circumstances-policy/" rel="noopener ugc nofollow" target="_blank"> <em class="jc">情有可原政策</em> </a> <em class="jc">开发工作流程。超过50%的用户参与了COVID specific flow，这使得大量客户能够立即解决他们的问题。</em></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/87bae40e45425f3034c3daa2ce017724.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QLixpwerausTyo9ETv1NgA.jpeg"/></div></div></figure><p id="d464" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">客人每天都依靠Airbnb来帮助他们度过旅行的各个阶段。从找住的地方，一直到退房，平安回家。</p><p id="9aff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">与此同时，Airbnb上的用户可以有各种各样的不同问题，比如改变他们的支付方式，或者找到他们主人的电话号码。这就需要为用户建立一个灵活的界面，方便他们找到我们可用的解决方案，并在必要时从代理那里获得帮助。聊天机器人在这种情况下变得越来越流行。</p><p id="a9bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为此，我们创建了<strong class="ig hi"> Atis </strong>:一个聊天机器人开发平台，为构建聊天机器人提供了直观而强大的API。</p><p id="d95a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Atis是Airbnb的智能交互和助理平台，是Airbnb客户支持聊天机器人的“大脑”:<strong class="ig hi"> Helpbot </strong>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es jq"><img src="../Images/fcfb6ed3a1d23e9670ab588b61c7c35b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/0*SPocLzqvxyjhTbgz"/></div></figure><p id="4717" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Helpbot是联系人工客户支持代理的第二步。Helpbot的目标是快速了解用户的问题，并尝试以自动化的方式解决问题。Helpbot帮助客人解决许多不同类型的问题:取消列表、更改预订日期、更新通知设置等。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es jr"><img src="../Images/27eafdc94cf1c5c0bfc4a3999b5ed7ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ymRXF80u0tbpyE7h"/></div></div></figure><p id="cf80" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是一个帮助用户关闭通知的标准Helpbot对话的视频。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="js jt l"/></div></figure><p id="dbd8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当我们面对新冠肺炎的疫情时，提供快速、可靠的支持变得更加重要。在疫情高峰期，我们迅速在Helpbot中内置了某些功能，以便向联系我们的客人和主人提供即时帮助和支持。这之所以成为可能，是因为:</p><ol class=""><li id="19c8" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb jz ka kb kc bi translated">聊天机器人通过了解用户的背景，更好地理解用户的问题。</li><li id="a9b2" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb jz ka kb kc bi translated">改变聊天机器人的行为更容易，因为每次互动都被视为一条消息。</li></ol><h1 id="500a" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">新冠肺炎的回应</h1><p id="367e" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">根据我们的<a class="ae jd" href="https://www.airbnb.com/help/article/2701/extenuating-circumstances-policy-and-the-coronavirus-covid19" rel="noopener ugc nofollow" target="_blank">情有可原政策</a>，在新冠肺炎<strong class="ig hi"> </strong>疫情期间，Helpbot在很大程度上依赖于帮助客人取消预订，并提供澄清。这是一个案例研究，说明如何轻松地将新行为添加到聊天机器人中，从而对用户产生重大影响。下面将讨论我们对Helpbot所做的一些更改，以支持新冠肺炎的工作。</p><h2 id="b707" class="ll kj hh bd kk lm ln lo ko lp lq lr ks ip ls lt kw it lu lv la ix lw lx le ly bi translated">建议的问题</h2><p id="1422" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">当用户第一次进入帮助机器人线程时，帮助机器人利用Atis的NLU模型来预测问题。在新冠肺炎危机期间，我们重新训练了该模型，根据以下特征预测用户是否可能有新冠肺炎问题:</p><ul class=""><li id="4a39" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb lz ka kb kc bi translated">最近查看的帮助中心文章</li><li id="820d" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb lz ka kb kc bi translated">如果他们有活动预订</li><li id="b66d" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb lz ka kb kc bi translated">如果他们是平台上的客人或主人</li></ul><p id="0c0f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果我们的模型确定确实如此，我们会自动将此作为第一个提示。超过50%的客人对此提示回答“是”。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ma"><img src="../Images/5b515fbe3f849bea6bdebc2afe31717c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DbQiMlaFNGHGpca0"/></div></div></figure><p id="4d35" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果用户对这个提示说“是”，那么我们可以立即理解他们的问题，而不需要客人键入任何内容。在此之后，我们为新冠肺炎提供了一个“上下文即时答案”。</p><h2 id="06ef" class="ll kj hh bd kk lm ln lo ko lp lq lr ks ip ls lt kw it lu lv la ix lw lx le ly bi translated">上下文即时回答</h2><p id="466c" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">新冠肺炎对Airbnb用户的影响是不同的，取决于他们是客人还是主人，他们是否有预订，以及预订的时间。Helpbot根据用户帐户的状态提供不同的新冠肺炎即时答案。例如:</p><ul class=""><li id="0757" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb lz ka kb kc bi translated">如果用户的预订符合情有可原的条件，则会显示一个取消流程，帮助他们快速取消预订并获得退款。</li><li id="d530" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb lz ka kb kc bi translated">向具有不符合情有可原情况的预订的用户显示标准取消流程，退款遵循列表的取消政策。</li></ul><h2 id="72d0" class="ll kj hh bd kk lm ln lo ko lp lq lr ks ip ls lt kw it lu lv la ix lw lx le ly bi translated">影响</h2><p id="0051" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">总体而言，相对于新冠肺炎危机期间的现有联系流程，helpbot显著降低了票证创建率，并成功支持了数千名主持人和来宾。</p><h1 id="dba0" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">Atis</h1><p id="cff1" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">Atis是我们内部的聊天机器人平台，Helpbot就是用它开发的。这篇文章的大部分内容将着眼于Atis如何工作的内部。</p><p id="c395" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">开放式vs引导式聊天机器人</strong></p><p id="8d4a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">学术界的大多数聊天机器人是<a class="ae jd" href="https://arxiv.org/abs/2001.09977" rel="noopener ugc nofollow" target="_blank">开放域聊天机器人</a>，它允许用户说任何话，机器人将回复语义和语法正确的生成文本。然而，实践中部署的大多数聊天机器人通常是更封闭的领域、多回合、面向目标的聊天机器人。</p><p id="4104" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">机器人通过多个问题或对话“回合”对客户的问题进行分类。</p><h1 id="e463" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">编程接口</h1><p id="d3ad" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">Atis提供了一个编程接口，允许产品团队快速开发聊天机器人。下面是一个构建类似“hello world”的单圈聊天机器人的简单示例:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mb jt l"/></div></figure><p id="c92f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将创建一个简单的机器人，询问您的姓名，等待响应，并回答:“嗨<name>，很高兴见到您！”</name></p><p id="b9d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Atis对话管理器知道如何执行任何实现TaskHandler类的任务。在这个简单的任务中，对话管理器将:</p><ul class=""><li id="20dc" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb lz ka kb kc bi translated">执行<code class="du mc md me mf b">prompt</code></li><li id="5770" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb lz ka kb kc bi translated">将消息发回给用户(“嗨，你叫什么名字？”)</li><li id="565a" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb lz ka kb kc bi translated">响应时，用用户发回的消息执行<code class="du mc md me mf b">response</code></li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mg"><img src="../Images/a1fe25facd609559cd817d4c465ed876.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-D5xJ9jrrxjVuAZx"/></div></div></figure><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mb jt l"/></div></figure><p id="2dbc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这段代码定义了一个有3轮对话的聊天机器人，但是没有指定它们应该以什么顺序执行。为此，ATIS定义了一个“域定义”文件，它规定了回合的顺序。最终天气任务执行跳过操作。这通知对话管理器该任务不应该等待响应，因为机器人对话已经完成。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mb jt l"/></div></figure><p id="0f76" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个定义显示了需要执行的3个任务:<code class="du mc md me mf b">name_question</code>、<code class="du mc md me mf b">location_question</code>和<code class="du mc md me mf b">weather</code>。<code class="du mc md me mf b">initial_task_name</code>定义了应该首先执行哪个任务，而<code class="du mc md me mf b">next_states</code>定义了应该执行的下一个任务。Atis会根据<code class="du mc md me mf b">multi_turn_domain.json</code>文件中指定的大小写名称自动加载任务处理程序，并按照指定的顺序执行它们。</p><h1 id="db2d" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">任务处理程序生命周期</h1><p id="35e8" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">任务处理程序实现了一个生命周期，它代表了典型聊天机器人对话的请求/响应性质。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mh"><img src="../Images/a7a2e825d8787d975bc5beb1aef6ee41.png" data-original-src="https://miro.medium.com/v2/resize:fit:950/0*TTv01kjFFQz7mo8e"/></div></figure><p id="a64e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">与Android activity生命周期或React生命周期非常相似，Atis任务也支持由对话管理器执行任务的生命周期模式。Atis任务实现的生命周期方法有:</p><ul class=""><li id="ada3" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb lz ka kb kc bi translated"><code class="du mc md me mf b">activate?</code>:根据对话状态决定是否激活任务</li><li id="1aa8" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb lz ka kb kc bi translated"><code class="du mc md me mf b">prompt</code>:对用户的提示，例如:显示一条消息或一组选项</li><li id="9eee" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb lz ka kb kc bi translated"><code class="du mc md me mf b">response(dialogue_input: UserInputMessage)</code>:对提示的响应，例如:用户输入的消息，或者用户选择的选项。</li></ul><h1 id="95ba" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">分支和激活</h1><p id="2d01" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">前面的例子定义了一个线性对话结构，以姓名问题开始，以天气结束。Atis还可以用<strong class="ig hi">激活</strong>和<strong class="ig hi">边缘处理程序</strong>定义树形或图形结构的对话。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mi"><img src="../Images/bd91ffc8b5cbeebb34d07a326affb64f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*K84lpVgAP-A0F_XE"/></div></div></figure><h2 id="78cc" class="ll kj hh bd kk lm ln lo ko lp lq lr ks ip ls lt kw it lu lv la ix lw lx le ly bi translated">线性对话vs树形结构对话</h2><p id="1829" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">下面是一个使用任务激活来构建树形结构对话的示例:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mb jt l"/></div></figure><p id="3675" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">分支中的任务需要实现一个<code class="du mc md me mf b">activate? </code>方法。对话管理器将调用<code class="du mc md me mf b">TravelSuggestionAnswer#activate?</code>和<code class="du mc md me mf b">WeatherAnswer#activate?</code>来确定接下来将调用哪个任务。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mb jt l"/></div></figure><p id="7563" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">虽然上面的例子有些做作，但这是一个表达复杂行为的强大框架。</p><h2 id="3063" class="ll kj hh bd kk lm ln lo ko lp lq lr ks ip ls lt kw it lu lv la ix lw lx le ly bi translated">边缘处理器</h2><p id="be04" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">在指定的示例中，<code class="du mc md me mf b">activate?</code>方法是在<code class="du mc md me mf b">TaksHandler</code>上定义的。Atis还提供了一个接口来声明<code class="du mc md me mf b">EdgeHandler</code>，它只实现了<code class="du mc md me mf b">activate?</code>方法，当转换太复杂而不能挤进一个<code class="du mc md me mf b">activate?</code>方法时使用。例如，在上面的示例中，任务也可以用边缘处理程序编写，如下所示:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mb jt l"/></div></figure><p id="3ab9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">像任务处理程序一样，通过查找edge中任务的大小写名称，edge处理程序将被自动加载和评估。</p><h1 id="749b" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">消息和操作</h1><p id="5c70" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">Atis支持多种多样的信息，例如:</p><ul class=""><li id="58f2" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb lz ka kb kc bi translated">简单消息</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mj"><img src="../Images/e279594c05ae91a74c3fc5cc7cb50f4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xCH6YpFzscmbgtCJCo1gLA.png"/></div></div></figure><ul class=""><li id="3966" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb lz ka kb kc bi translated">选择</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mk"><img src="../Images/702b74d4fb8d9c8f4fcf784b0b8d10b0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xxBrLX5geTpb6P3X"/></div></div></figure><ul class=""><li id="51ef" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb lz ka kb kc bi translated">预订卡</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ml"><img src="../Images/0206ecdc669c2014518318bd0be983b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*6bjqFOEdHF395390"/></div></div></figure><ul class=""><li id="210c" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb lz ka kb kc bi translated">预订提货人</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mm"><img src="../Images/916020f33dc33366554afb9cb95add3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/0*UFbgnZ5dDKpGrDZD"/></div></figure><ul class=""><li id="cd6a" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb lz ka kb kc bi translated">帮助文章</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mn"><img src="../Images/a029983e8711de99d3645801a9ac57f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/0*99GVWRuW2527kQ02"/></div></figure><ul class=""><li id="e97d" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb lz ka kb kc bi translated">…以及更多</li></ul><p id="5e42" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些可以在任务处理程序中调用，然后发送回消息客户端。Atis API还支持一组“动作”,这些动作实质上充当对话管理器的控制流方向。例如:</p><ul class=""><li id="34ef" class="ju jv hh ig b ih ii il im ip jw it jx ix jy jb lz ka kb kc bi translated"><code class="du mc md me mf b">skip</code>:跳过任务的响应块。</li><li id="7ee7" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb lz ka kb kc bi translated"><code class="du mc md me mf b">goto(next_task_name: String)</code>:跳转到工作流中的一个任务。</li><li id="1850" class="ju jv hh ig b ih kd il ke ip kf it kg ix kh jb lz ka kb kc bi translated"><code class="du mc md me mf b">transfer(next_workflow_name: String)</code>:转移到不同的工作流程。</li></ul><p id="6059" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">注意:为了简洁起见，本文不涉及工作流。在高层次上，它们是将一组任务组合在一起的一种方式。例如，取消工作流将涉及两个任务(选择预订→您确定吗？</em> → <em class="jc">确认)。</em></p><h1 id="19d2" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">钩住</h1><p id="9a36" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">Atis为类似于Rails的<code class="du mc md me mf b">prompt</code>、<code class="du mc md me mf b">response</code>和<code class="du mc md me mf b">activate</code>等生命周期方法提供了前后挂钩。</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mb jt l"/></div></figure><h1 id="0e62" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">上下文开关程序</h1><p id="9f22" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">我们可以将钩子与面向对象的编程原则结合起来，构建高度智能的上下文切换功能。当客人表达带外意图时，上下文切换是必要的。例如，如果对话如下进行:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mo"><img src="../Images/917e36fe47a4f3a0cf5937ff315690d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OuIGLr7TcpTKurT3"/></div></div></figure><p id="41e7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这个例子中，客人用一个请求而不是他们的名字来响应，我们的框架能够改变它的行为，用一个预订提示来响应，而不是标准的响应<em class="jc">“你好{name}，很高兴见到你！”</em>。这被称为<strong class="ig hi">上下文切换。</strong></p><p id="09d6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这可以通过构建一个简单的抽象任务处理器来实现:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mb jt l"/></div></figure><p id="e2ce" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果在信息输入中发现术语<em class="jc">“预订”</em>，这将自动执行<code class="du mc md me mf b">GreetingTask</code>。</p><h1 id="13ad" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">对话管理器</h1><p id="74fc" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">对话机器人中的对话管理器负责遍历对话图。对话管理器将通过调用任务处理程序和边缘处理程序上的<code class="du mc md me mf b">activate?</code>方法来决定执行哪些任务。这允许我们定义极其复杂的对话，就像我们目前在Helpbot中使用的那样。使用上述API，我们能够构建复杂的流程，引导客人或主人发现问题的解决方案，或将他们带到正确的客户支持代理处。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mp"><img src="../Images/c1e09752dc516efc887dc51dd9abdbf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*BgKb9ajOpTARBxye"/></div></div></figure><h1 id="8f1e" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">了解客户意图</h1><p id="9b6c" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">ATIS默认带有一个强大的文本分类器，叫做WideText:一个低延迟的基于CNN的文本分类器。</p><p id="af3c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了激发对这种模型的需求，假设您想要构建一个聊天机器人，它能够理解用户所说的话<em class="jc">“我想取消我的预订”</em>或<em class="jc">“我的列表不是很干净”</em>，并智能地做出响应。实现这一点的一种方法是构建一个问题分类并在其中进行预测。</p><p id="dd0d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">“我想取消预订”</em> → <code class="du mc md me mf b">reservation.guest.cancellation</code></p><p id="a24b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">“我的房源不太干净”</em> → <code class="du mc md me mf b">reservation.guest.cleanliness</code></p><p id="1741" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">典型地，文本分类问题被构造为如下:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mp"><img src="../Images/c9fdd2aa6a4c66f6763e8bf22bb03a25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HyOl2MVbX5ny1_z-"/></div></div></figure><p id="9b92" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然而，你会意识到其他特征对于理解用户也很重要。例如，如果用户是客人，则<em class="jc">“这个房子不干净”</em>可以是<code class="du mc md me mf b">reservation.guest.cleanliness</code>，如果用户是主人，则可以是<code class="du mc md me mf b">reservation.host.cleanliness</code>。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mp"><img src="../Images/8bad7f81b851d73d44476393a22f195b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WviPhZEOUfb4_ZZv"/></div></div></figure><p id="88e8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">WideText是一个PyTorch库，可以轻松训练和部署多模态文本分类模型。</p><p id="30dc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个分类器的具体细节将在以后的博客文章中单独讨论。WideText是我们聊天机器人智能的支柱。</p><p id="46b6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">回到<code class="du mc md me mf b">WhatCanIHelpWith</code>任务，这里有一个如何使用WideText进行预测的例子:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="mb jt l"/></div></figure><p id="4a17" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这个例子中，我们依靠一个训练有素的WideText模型来理解用户意图。如何训练和部署这个模型的细节将单独讨论。</p><h1 id="33f4" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">帮助机器人</h1><p id="4681" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">Helpbot是建立在at is平台上的“旗舰”聊天机器人。到目前为止，它处理的消息最多。在撰写本文时，Helpbot目前每天处理超过10万条消息。</p><p id="4549" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Helpbot的核心目的是交付<strong class="ig hi"> <em class="jc">上下文自我解决内容</em> </strong>。当客人试图联系Helpbot时，我们通过向客人提出一系列问题并利用WideText预测话题来识别他们的问题。然后，我们向用户呈现可以立即解决用户问题的自我解决内容。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mq"><img src="../Images/cc1ec55408e8b521ecf38f7e01bbea86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*npIyibwGx6pRk6hQ"/></div></div></figure><p id="d00b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将用户问题映射到一组固定的票证主题使我们可以轻松地快速添加新类型的自我解决内容，如帮助文章。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mr"><img src="../Images/9c31711c6421dece70c700e28e8a7574.png" data-original-src="https://miro.medium.com/v2/resize:fit:1296/0*GT8Blc_EuBWGZwN7"/></div></figure><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mn"><img src="../Images/a029983e8711de99d3645801a9ac57f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:816/0*99GVWRuW2527kQ02"/></div></figure><h1 id="cd6f" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">结论</h1><p id="365b" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">Airbnb努力为需要帮助的客人和主人提供即时帮助，尤其是在COVID这样的活动期间。我们利用Helpbot的能力快速了解客户问题，并提供自我解决方案来帮助那些受COVID疫情影响的人。</p><h1 id="c5f5" class="ki kj hh bd kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf bi translated">贡献者</h1><p id="2206" class="pw-post-body-paragraph ie if hh ig b ih lg ij ik il lh in io ip li ir is it lj iv iw ix lk iz ja jb ha bi translated">构建Atis并将其集成到Helpbot中是一项多团队的工作。感谢所有让这一切成为可能的人:</p><p id="4011" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">卡特·阿普尔顿<br/>斯蒂芬妮·庞<br/>成龙<br/>李海涛<br/>乔希·布莱尼<br/>米歇尔·瓜里诺<br/>考特尼·木本<br/>玛丽埃尔·扬<br/>赵振宇<br/>布莱恩·王<br/>沙哈夫·阿比利亚<br/>张大大<br/>杰里米·王<br/>克里斯·朱<br/>爱丽丝·郑<br/>乔伊·张</p></div></div>    
</body>
</html>