<html>
<head>
<title>The character of Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">科特林的性格</h1>
<blockquote>原文：<a href="https://blog.kotlin-academy.com/the-character-of-kotlin-a72193b822a8?source=collection_archive---------1-----------------------#2018-02-21">https://blog.kotlin-academy.com/the-character-of-kotlin-a72193b822a8?source=collection_archive---------1-----------------------#2018-02-21</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="d2cf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我刚刚在七周内学完了七种语言的《T4》，作者是布鲁斯·泰特，我非常喜欢它！尽管我对所描述的大多数语言都有一些经验，但我真的很喜欢他呈现语言特征的方式以及它们对语言最终使用方式的影响。</p><p id="1d7c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这就是为什么我决定写另外一章。这将是一门我非常熟悉的语言，我知道它的优点和缺点:科特林语。</p><blockquote class="kj kk kl"><p id="b17a" class="jk jl km jm b jn jo jp jq jr js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kh ig bi translated">这篇文章的目的不是教语言，而是展示科特林的性格。你不需要什么都懂。相反，要集中精力思考呈现的特性会如何影响你的编程方式。</p></blockquote><p id="c8c9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Kotlin最典型的特点是，它并没有给编程语言家族带来任何新的东西。相反，它以一种非常棒的方式使用所有已经可用的东西。想起钢铁侠。托尼·斯塔克用简单的电子元件制造了钢铁侠。他没有超人或闪电侠那样的真正超能力。这看起来可能是一个弱点，但从长远来看，这是一个巨大的优势。我们以后再谈。让我们从基础开始。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi kq"><img src="../Images/ee7ee27c611352b9a3250d08c24a9815.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*kwu8aqSFrQxtT67m."/></div></div></figure><h1 id="03c1" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">基础</h1><p id="d8ab" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">我们通常在IDEA IntelliJ、Android Studio或CLion (Kotlin/Native)等IDE中进行Kotlin编程。这里我们将从命令行开始，在一个更简单的上下文中展示Kotlin。一旦你<a class="ae ki" href="https://kotlinlang.org/docs/tutorials/command-line.html" rel="noopener ugc nofollow" target="_blank">安装了kot Lin</a>，使用以下命令启动REPL(交互环境):</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mf"><img src="../Images/62d2d53a2469e2921f7a7e373acea156.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DQ3gttc4rHx9dTPqNRI0Cw.png"/></div></div></figure><p id="3b3c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">让我们试试一些数字:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="c4b6" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; 1<br/>1<br/>&gt;&gt;&gt; 1 + 2<br/>3<br/>&gt;&gt;&gt; 1.0 + 2<br/>3.0</span></pre><p id="19f7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">简单的数学工作。这是运行在Java虚拟机上的Kotlin/JVM。整数是Java中的原语。科特林呢。让我们来看看数字的类型:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="fd5c" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; 1::class<br/>class kotlin.Int<br/>&gt;&gt;&gt; 1.0::class<br/>class kotlin.Double</span></pre><p id="94bd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">他们都是对象！其实科特林的一切都是对象。Java呢？Kotlin与Java完全互操作，但我们可以看到上面的类型是Kotlin类型。原因是一些内置的Kotlin类型覆盖了Java类型。我们可以使用<code class="fe mq mr ms mh b">Class</code>的<code class="fe mq mr ms mh b">java</code>属性或每个对象的<code class="fe mq mr ms mh b">javaClass</code>属性来查看实际的Java类型:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="dae7" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; 1.0::class.java<br/>double<br/>&gt;&gt;&gt; 1.0.javaClass<br/>double</span></pre><p id="173c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">是<code class="fe mq mr ms mh b">double</code>！<code class="fe mq mr ms mh b">double</code>在Java中是原语。这怎么可能呢？当没有使用面向对象的特性时，Kotlin使用优化来使用原语而不是对象。这是在幕后发生的，根本不会影响开发者。如果我们需要把<code class="fe mq mr ms mh b">double</code>当作一个对象，那么就会用<code class="fe mq mr ms mh b">Double</code>来代替。从我们的角度来看，我们仍然可以说一切都是物体。让我们定义一些属性:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="cb26" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; val a = 1</span></pre><p id="5924" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这是只读属性。我们还可以使用var定义读写属性:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="ad70" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; var a = 1</span></pre><p id="9994" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意，没有指定类型。不要误会，Kotlin是强静态类型语言。属性的类型是从赋值的类型推断出来的:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="d94c" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; ::a.returnType<br/>kotlin.Int</span></pre><p id="ce45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">数学讲够了，让我们来看一些更高级的特性。</p><h1 id="5d1f" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">安全</h1><p id="8d58" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">钢铁侠之所以被制作出来，是因为警察和军队都无法将托尼·斯塔克从恐怖分子手中解救出来。托尼制作钢铁侠是为了提高自己的安全性，给自己更好的可能性。他也让自己更加出名和受欢迎。同样，Kotlin是由JetBrains制造的。这是一家制作最流行的编程ide的公司。他们所有的工具最初都是用Java开发的，但是他们遇到了这种语言的缺陷。他们开始尝试其他语言，如Scala或Groovy，但他们并不满意。他们最终决定开发自己的语言，这种语言应该提供最大的安全性(这样他们的产品就不会出错)和可伸缩性，这对他们来说很重要。科特林也让JetBrains更受欢迎。他们无处不在，但现在当人们可以使用他们令人敬畏的语言时，JetBrains对他们来说甚至更酷更棒。(这个故事是巨大的简化。请收听本播客以获得更准确的版本。)</p><p id="9ede" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Kotlin大大提高了Java的安全性。属性必须初始化:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="efeb" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; var a: String<br/>error: property must be initialized or be abstract</span></pre><p id="454b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">默认情况下，类型不可为空:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="4df0" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; var a: String = null<br/>error: null can not be a value of a non-null type String</span></pre><p id="47db" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们说使用<code class="fe mq mr ms mh b">?</code>类型是可空的:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="f29a" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; var a: String? = null</span></pre><p id="2ed8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">虽然不能显式使用可空类型:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="f082" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; a.length<br/>error: only safe (?.) or non-null asserted (!!.) calls are allowed on a nullable receiver of type String?</span></pre><p id="0088" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">可空类型类似于Scala等其他语言中的选项类型。我们需要在使用前打开包装。当属性不是<code class="fe mq mr ms mh b">null</code>时，我们可以使用像正常调用一样工作的安全调用。如果属性是<code class="fe mq mr ms mh b">null</code>，它不调用方法，而是返回<code class="fe mq mr ms mh b">null</code>:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="fabb" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; a = null<br/>&gt;&gt;&gt; a?.length<br/>null<br/>&gt;&gt;&gt; a = "AAA"<br/>&gt;&gt;&gt; a?.length<br/>3</span></pre><p id="982b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们也可以使用不安全的调用，当属性为空时抛出异常；</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="04ac" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; a = null<br/>&gt;&gt;&gt; a!!.length<br/>kotlin.KotlinNullPointerException</span></pre><p id="4b30" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">不安全调用是不好的做法，应该尽量少用。你很少能在Kotlin项目中找到它。这与Java有很大的不同，在Java中，每个调用都是不安全的。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><a href="https://www.kt.academy/#workshops-offer"><div class="gh gi mt"><img src="../Images/018370a2476e1ce49e6d3299428b4f2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K-f1laplrjQQAMlYKfLgHw.png"/></div></a></figure><h1 id="b897" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">聪明的</h1><p id="3d00" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">酷钢铁侠的特点是，他的西装真的很潇洒。它分析情况并通知托尼危险。它也可以自我修复。Kotlin也真的很聪明，对开发者帮助很大。</p><p id="be6c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">智能造型就是这种行为的一个例子。当我们检查属性是否不为空时，我们可以像它不为空一样使用它。我们将对文件进行操作，以展示更多高级功能。我建议使用IDEA IntelliJ ( <a class="ae ki" href="http://kotlinlang.org/docs/tutorials/getting-started.html" rel="noopener ugc nofollow" target="_blank">查看如何入门</a>)。或者，你可以在网上REPL查看所有的信息。让我们看看这个例子:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="ae9b" class="ml ld in mh b gy mm mn l mo mp"><strong class="mh io">fun </strong>smartCastingExample(str: String?) {<br/>    <strong class="mh io">if</strong>(str != <strong class="mh io">null</strong>)<br/>        <em class="km">print</em>(<strong class="mh io">"Length is " </strong>+ str.<strong class="mh io">length</strong>)<br/>}</span></pre><p id="d84b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">可以看到<code class="fe mq mr ms mh b">str</code>是显式使用的(没有不安全或安全调用)。这是因为在检查<code class="fe mq mr ms mh b"><strong class="jm io">if</strong>(str != <strong class="jm io">null</strong>)</code>的范围内，它是从<code class="fe mq mr ms mh b">String?</code>转换到<code class="fe mq mr ms mh b">String</code>的。如果我们在相反的检查中退出函数，它也是有效的:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="77ae" class="ml ld in mh b gy mm mn l mo mp"><strong class="mh io">fun </strong>smartCastingExample(str: String?) {<br/>    <strong class="mh io">if</strong>(str == <strong class="mh io">null</strong>)<br/>        <strong class="mh io">return<br/>    <br/>    </strong><em class="km">print</em>(<strong class="mh io">"Length is " </strong>+ str.<strong class="mh io">length</strong>)<br/>}</span></pre><p id="7539" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它不仅适用于可空性。我们还可以智能地转换类型:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="9491" class="ml ld in mh b gy mm mn l mo mp"><strong class="mh io">fun </strong>smartCastingExample(any: Any?) {<br/>    <strong class="mh io">if</strong>(any <strong class="mh io">is </strong>String)<br/>        <em class="km">print</em>(<strong class="mh io">"String with length " </strong>+ any.<strong class="mh io">length</strong>)<br/>}</span></pre><p id="d185" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Kotlin在IDEA IntelliJ、Android Studio或CLion中得到高度支持。在这些ide上，您有许多技巧、建议和支持。这里有一个例子，Java中典型的命令式集合处理被Kotlin中典型的声明式集合处理所取代。请注意，整个转变是由环境建议和做出的:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/d0feed9e9874855e4aa03b8011d4dd75.png" data-original-src="https://miro.medium.com/v2/resize:fit:896/0*7F_6biQPJUNaHj7T.gif"/></div></figure><h1 id="64c1" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">最小的</h1><p id="5ab6" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">托尼·斯塔克在不需要的时候不会穿全套钢铁侠套装。他通常使用汽车或只是较小的零件。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi mv"><img src="../Images/99cb491f938bea2d655f07ae595bed0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*ll4fI-CVyydIKAGn."/></div></figure><p id="2938" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">科特林哲学的一部分是简单的事情应该简单。这里是科特林的Hello World:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="9f16" class="ml ld in mh b gy mm mn l mo mp"><strong class="mh io">fun </strong>main(args: Array&lt;String&gt;) {<br/>    print(<strong class="mh io">"Hello, World"</strong>)<br/>}</span></pre><p id="c782" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它只是一个打印文本的函数。其余常见的Kotlin案例也很简单。当我们不需要整个函数体时，我们可以只用单个表达式来代替:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="12d8" class="ml ld in mh b gy mm mn l mo mp"><strong class="mh io">fun </strong>add(a: Int, b: Int) = a + b</span></pre><p id="9e78" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们将在接下来的部分中一次又一次地看到这样的简约风格。</p><h1 id="ddaf" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">灵活性</h1><p id="7f4e" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">与超人相比，钢铁侠缺少一些重要的特征。就像眼睛里的激光。超人生来就有它们，他需要的时候就用它们。托尼·斯塔克没有在《钢铁侠》中安装激光器，可能是因为他还没有看到对它们的需求已经足够迫切。重要的一点是，他仍然可以轻松地添加这个功能。事实上，每个钢铁侠用户都可以添加它们。但他们也可以添加其他功能，而不是以较低的成本提供更好的效果。这是灵活性的巨大力量。让我们在实践中看到它。大多数现代语言都提供了一些集合文字。在Python、Ruby或Haskell中，你可以这样定义列表:<code class="fe mq mr ms mh b">[1,2,3]</code>。Kotlin没有包含这样的集合文字，但它允许顶级函数(可以在任何地方使用的函数), Kotlin标准库提供了可用于创建集合的顶级函数:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="6b7e" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; listOf(1,2,3)<br/>[1, 2, 3]<br/>&gt;&gt;&gt; setOf(1,2,3)<br/>[1, 2, 3]<br/>&gt;&gt;&gt; mapOf(1 to "A", 2 to "B", 3 to "C")<br/>{1=A, 2=B, 3=C}</span></pre><p id="3a2b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为什么这很重要？当语言提供集合文字时，它定义了用户将如何使用集合。所有的收藏都有一些特点。一个大的讨论是我们应该更喜欢可变的还是不可变的列表。可变的效率更高，但是不可变的线程安全得多。关于这个话题有很多讨论和观点。考虑到这一点，你会选择list literal应该产生一个可变或不可变的列表吗？无论哪种方式，你都会影响人们使用语言的方式，因为他们更喜欢使用集合文字。科特林离开了这个自由。<code class="fe mq mr ms mh b">listOf</code>、<code class="fe mq mr ms mh b">setOf</code>和<code class="fe mq mr ms mh b">mapOf</code>产生不可变集合:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="6b6f" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; var list = listOf(1,2,3)<br/>&gt;&gt;&gt; list.add(4)<br/>error: unresolved reference: add<br/>list.add(4)<br/>     ^<br/>&gt;&gt;&gt; list + 4<br/>[1, 2, 3, 4]</span></pre><p id="bb54" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">虽然我们可以使用<code class="fe mq mr ms mh b">mutableListOf</code>、<code class="fe mq mr ms mh b">mutableSetOf</code>和<code class="fe mq mr ms mh b">mutableMapOf</code>轻松地创建可变集合:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="6255" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; mutableListOf(1,2,3)<br/>[1, 2, 3]<br/>&gt;&gt;&gt; mutableSetOf(1,2,3)<br/>[1, 2, 3]<br/>&gt;&gt;&gt; mutableMapOf(1 to "A", 2 to "B", 3 to "C")<br/>{1=A, 2=B, 3=C}</span></pre><p id="2e06" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意，每个人都可以定义自己的集合，并定义顶级函数来创建它:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="1938" class="ml ld in mh b gy mm mn l mo mp"><strong class="mh io">fun </strong>&lt;T&gt; specialListOf(<strong class="mh io">vararg </strong>a: T): SpecialList&lt;T&gt; {<br/>    <em class="km">// Code<br/></em>}</span></pre><blockquote class="kj kk kl"><p id="0f69" class="jk jl km jm b jn jo jp jq jr js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kh ig bi translated">上面你可以注意到我使用了泛型类型参数<code class="fe mq mr ms mh b">T</code>。别担心。这样，我们说我们需要传递一组相同类型的元素来创建这种类型的集合。</p></blockquote><p id="ee79" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">由于Kotlin使用基本特性而不是内置文字，外部库拥有与Kotlin标准库相同的能力。另一个极大地解放了库和开发人员的特性叫做扩展功能。基本上，我们可以将函数定义为方法:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="de6b" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; fun Int.double() = this * 2<br/>&gt;&gt;&gt; 2.double()<br/>4</span></pre><p id="aa92" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">请注意，它并没有真正向任何类添加方法。扩展函数就是以这种特定方式调用的函数。这个特性看起来很简单，但是它非常强大。例如，Kotlin像其他现代语言一样提供了集合处理的函数:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="5ce6" class="ml ld in mh b gy mm mn l mo mp"><strong class="mh io">class </strong>Person(<strong class="mh io">val name</strong>: String, <strong class="mh io">val surname</strong>: String)<br/><br/><strong class="mh io">val </strong>avengers = <em class="km">listOf</em>(<br/>        Person(<strong class="mh io">"Tony"</strong>, <strong class="mh io">"Stark"</strong>),<br/>        Person(<strong class="mh io">"Steve"</strong>, <strong class="mh io">"Rogers"</strong>),<br/>        Person(<strong class="mh io">"Bruce"</strong>, <strong class="mh io">"Banner"</strong>),<br/>        Person(<strong class="mh io">"Thor"</strong>, <strong class="mh io">""</strong>)<br/>)<br/><strong class="mh io">val </strong>list = avengers<br/>        .<em class="km">filter </em><strong class="mh io">{ it</strong>.<strong class="mh io">surname</strong>.<em class="km">isNotBlank</em>() <strong class="mh io">}<br/>        </strong>.<em class="km">sortedWith</em>(<em class="km">compareBy</em>(<strong class="mh io">{ it</strong>.<strong class="mh io">surname }</strong>, <strong class="mh io">{ it</strong>.<strong class="mh io">name }</strong>))<br/>        .<em class="km">joinToString </em><strong class="mh io">{ "${it</strong>.<strong class="mh io">name} ${it</strong>.<strong class="mh io">surname}" }<br/></strong><em class="km">print</em>(list) // Prints: Bruce Banner, Steve Rogers, Tony Stark</span></pre><p id="48df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Kotlin的巨大优势在于，这些和类似的函数都被定义为扩展函数。例如，你可以看到<code class="fe mq mr ms mh b">filter</code>的实现:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="3f91" class="ml ld in mh b gy mm mn l mo mp"><strong class="mh io">inline fun </strong>&lt;T&gt; Iterable&lt;T&gt;.filter(<br/>    predicate: (T) -&gt; Boolean<br/>): List&lt;T&gt; {<br/>    <strong class="mh io">return </strong>filterTo(ArrayList&lt;T&gt;(), predicate)<br/>}</span><span id="9031" class="ml ld in mh b gy mw mn l mo mp"><strong class="mh io">inline fun </strong>&lt;T, C : MutableCollection&lt;<strong class="mh io">in </strong>T&gt;&gt; Iterable&lt;T&gt;.filterTo(<br/>    destination: C, predicate: (T) -&gt; Boolean<br/>): C {<br/>    <strong class="mh io">for </strong>(element <strong class="mh io">in this</strong>) <strong class="mh io">if </strong>(predicate(element)) destination.add(element)<br/>    <strong class="mh io">return </strong>destination<br/>}</span></pre><p id="26fa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果不能实现，您可以自己定义这个函数。如果您需要一些额外的函数来进行集合处理，您可以很容易地定义它。开发人员经常这样做。例如，你可以找到许多定义Android扩展功能的库。它们使得Android开发更加容易。这一决定的另一个结果是，您可以使用大量的集合处理方法:</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi mx"><img src="../Images/72520167a59096720882c0a7c818f9e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pOMe24i6IQiOLEvW3gISXg.png"/></div></div></figure><p id="bebb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以注意到的另一个重要事实是<code class="fe mq mr ms mh b">filter</code>不是<code class="fe mq mr ms mh b">List</code>类型的扩展函数。它是扩展<code class="fe mq mr ms mh b">Iterable</code>接口:</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="307e" class="ml ld in mh b gy mm mn l mo mp"><strong class="mh io">public interface </strong>Iterable&lt;<strong class="mh io">out </strong>T&gt; {<em class="km"><br/>    </em><strong class="mh io">public operator fun </strong>iterator(): Iterator&lt;T&gt;<br/>}</span></pre><p id="c552" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">您可以很容易地定义自己的集合类来实现<code class="fe mq mr ms mh b">Iterable</code>，它将免费获得这些集合处理方法。甚至<code class="fe mq mr ms mh b">String</code>都实现了。这也是为什么我们可以在<code class="fe mq mr ms mh b">String</code>上使用所有收集处理方法的原因；</p><pre class="kr ks kt ku gt mg mh mi mj aw mk bi"><span id="2622" class="ml ld in mh b gy mm mn l mo mp">&gt;&gt;&gt; "I like cake!".map { it.toLowerCase() }.filter { it in 'a'..'z' }.joinToString(separator = "")<br/>ilikecake</span></pre><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div class="gh gi my"><img src="../Images/f02353c90a71117885e9ac6839af1f95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*d2YQWo32EcRC_J-F.gif"/></div></figure><h1 id="14cc" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">第一天总结</h1><p id="c8c6" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">托尼·斯塔克并非生来就有超能力，他也没有被任何放射性蜘蛛咬过。他用自己不可思议的知识和智慧创造了钢铁侠。类似地，JetBrains，一家为所有语言开发优秀编程环境的公司，已经利用他们的知识开发出了令人难以置信的编程语言。他们没有向编程世界引入任何新特性，而是一种真正设计良好的语言，它利用编程语言的整体知识优势来最大化开发人员的生产力和项目质量。</p><p id="c31f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这种聪明设计的一个很好的例子可以在元组的故事中找到。Kotlin还在Beta的时候，就支持元组。虽然当Kotlin团队分析元组的使用如何影响程序的开发时，他们发现这种影响不一定是积极的。这就是元组没有被释放的原因。Kotlin有可以替代使用的<code class="fe mq mr ms mh b">data</code>注释。它更加通用，Kotlin团队确信它对一般的语言使用有积极的影响。元组仍在讨论中，可能有一天它们会得到本机支持，但在这发生之前，Kotlin团队和社区需要确保这是一个好的决定。</p><p id="8ff8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这很能说明科特林的情况。它不是思想的汇集，相反，它是设计巧妙的语言。它有一个最小的强大功能集，提供了可怕的可能性。在我们解释Kotlin协程的第3天，这一点尤其明显。总的来说，Kotlin给予了更多的自由，并为社区创造留下了更多的空间。</p><h1 id="a74e" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">自学</h1><p id="67e7" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">如果你想学习更多的科特林语，我建议你查看<a class="ae ki" href="https://kotlinlang.org/docs/reference/" rel="noopener ugc nofollow" target="_blank">科特林文档</a>和<a class="ae ki" href="https://kotlinlang.org/docs/tutorials/koans.html" rel="noopener ugc nofollow" target="_blank">科特林考恩</a>。如果你想学习Android中的Kotlin，可以看看<a class="ae ki" href="https://www.google.co.th/search?q=android+development+with+kotlin&amp;stick=H4sIAAAAAAAAAONgecTozS3w8sc9YSmnSWtOXmO04eIKzsgvd80rySypFNLjYoOyVLgEpXj10_UNDVNSyovyKrOKNRik-LlQhXgAqNGJwlAAAAA&amp;sa=X&amp;ved=0ahUKEwjim8S5_qnZAhUBMZQKHUVCCKcQ6RMIiQEwCw&amp;biw=1920&amp;bih=965" rel="noopener ugc nofollow" target="_blank">这本书</a>。</p><h1 id="d21d" class="lc ld in bd le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz bi translated">然后</h1><p id="a793" class="pw-post-body-paragraph jk jl in jm b jn ma jp jq jr mb jt ju jv mc jx jy jz md kb kc kd me kf kg kh ig bi translated">这并不是科特林伟大特性的终结。这只是第一周。钢铁侠的设计给了他一些超越其他超级英雄的超能力。有些不容易注意到，但都很重要。我将在其他文章中描述它们。</p><div class="mz na gp gr nb nc"><a rel="noopener  ugc nofollow" target="_blank" href="/the-character-of-kotlin-conciseness-2c70bc141985"><div class="nd ab fo"><div class="ne ab nf cl cj ng"><h2 class="bd io gy z fp nh fr fs ni fu fw im bi translated">科特林的性格:简洁</h2><div class="nj l"><h3 class="bd b gy z fp nh fr fs ni fu fw dk translated">在上一篇文章中，我解释了为什么科特林像钢铁侠。现在我想继续这个比喻并展示…</h3></div><div class="nk l"><p class="bd b dl z fp nh fr fs ni fu fw dk translated">blog.kotlin-academy.com</p></div></div><div class="nl l"><div class="nm l nn no np nl nq la nc"/></div></div></a></div></div><div class="ab cl nr ns hr nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="ig ih ii ij ik"><p id="d6ce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我要感谢<a class="ae ki" href="https://twitter.com/adrien_pe" rel="noopener ugc nofollow" target="_blank">戴夫·利兹</a>、<a class="ae ki" href="https://medium.com/@apessu" rel="noopener">阿德里安·佩苏</a>和<a class="ae ki" href="https://ynet.bayern" rel="noopener ugc nofollow" target="_blank">安德烈亚斯·诺伊曼</a>审阅这篇文章。</p><p id="a3ff" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你需要Kotlin工作室吗？请访问我们的网站，看看我们能为您做些什么。</p><p id="f4b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">了解卡帕头最新的重大新闻。学院，<a class="ae ki" href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a" rel="noopener ugc nofollow" target="_blank">订阅时事通讯</a>，<a class="ae ki" href="https://twitter.com/ktdotacademy" rel="noopener ugc nofollow" target="_blank">观察Twitter </a>并在medium上关注我们。</p><p id="825b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在Twitter上引用我，用<a class="ae ki" href="https://twitter.com/marcinmoskala" rel="noopener ugc nofollow" target="_blank"> @MarcinMoskala </a>。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><a href="http://eepurl.com/diMmGv"><div class="gh gi kq"><img src="../Images/5ce68714efe3efc036e06786166954ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uDqv_d5NZnPUJA0FeZqhqQ.png"/></div></a></figure><p id="7eb3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">喜欢的话记得<strong class="jm io">拍</strong>。请注意，如果您按住鼓掌按钮，您可以留下更多的掌声。</p><figure class="kr ks kt ku gt kv gh gi paragraph-image"><div role="button" tabindex="0" class="kw kx di ky bf kz"><div class="gh gi ny"><img src="../Images/f36a792ac0eb95fc577e6f4125dba956.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*zo_H5DsF3fI8ucapgZHWWw.gif"/></div></div></figure></div></div>    
</body>
</html>