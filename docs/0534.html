<html>
<head>
<title>Developing for Android 11 with the Android Emulator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Android模拟器为Android 11开发</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/developing-for-android-11-with-the-android-emulator-a9486af2d7ef?source=collection_archive---------0-----------------------#2020-07-30">https://medium.com/androiddevelopers/developing-for-android-11-with-the-android-emulator-a9486af2d7ef?source=collection_archive---------0-----------------------#2020-07-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/0c3655bf7fef9d0f2fa3c6e61cc37d5b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ylvi827ajlD6Jcusgez4-A.png"/></div></div></figure><div class=""/><p id="4f97" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们构建了Android模拟器，让您无需维护大量物理设备就能测试您的应用。虽然这仍然是我们的主要目标，但我们并不满足于提供一个完全模仿物理设备的工具。相反，我们希望构建一个仿真器，通过提供只有虚拟设备才有可能实现的功能来补充物理设备。</p><p id="45fa" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在过去，我们已经发布了像<a class="ae jn" href="https://developer.android.com/studio/run/emulator#extended" rel="noopener ugc nofollow" target="_blank">位置和电池扩展控制</a>这样的功能，这两个功能都允许您快速测试会在物理设备上引起头痛的场景。位置控制可以让你在舒适的办公桌上测试应用对沿某一路线移动的反应，电池控制可以让你测试充电水平状态等影响，而不必等待物理设备的电池耗尽。</p><figure class="jp jq jr js fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es jo"><img src="../Images/b1036d13aec59434e4b8fed762435786.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*1NPPp4IMCxPOr6cxR5cEaQ.gif"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx"><em class="jx">The Location controls allow you to emulate movement along a route.</em></figcaption></figure><p id="bad9" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">今天，我想向你展示Android模拟器的一些新方法，这些方法使开发和测试你的应用变得更加容易，特别关注与<a class="ae jn" href="https://developer.android.com/android11" rel="noopener ugc nofollow" target="_blank"> Android 11 </a>中的新功能相一致的功能。</p><h1 id="b107" class="jy jz hs bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">可折叠和其他外形</h1><p id="43e5" class="pw-post-body-paragraph ip iq hs ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">Android模拟器版本30.0.23+使释放可折叠手机的潜力变得更加容易，可以在Android Studio Canary发布频道中找到。它具有新的3D可折叠设备渲染和扩展的可折叠控件。3D渲染可以直观地显示您的应用在可折叠设备上的外观，而扩展的控件允许您明确设置每个折叠的角度或整体设备姿态。您可以使用这些附加功能来验证您的应用在可折叠设备上看起来很棒，并构建定制体验，发挥外形的优势。</p><figure class="jp jq jr js fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lb"><img src="../Images/b4cb7ea2bb9900d8edeeda9a631a505b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*_IwpTLgixTdDfg5Tlwk6KA.gif"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx"><em class="jx">Using the Emulator to build an interface that splits into a parent child layout when the device’s state is </em><a class="ae jn" href="https://developer.android.com/reference/androidx/window/DeviceState#POSTURE_HALF_OPENED" rel="noopener ugc nofollow" target="_blank"><em class="jx">HALF_OPENED</em></a><em class="jx"> and returns to normal when the state is </em><a class="ae jn" href="https://developer.android.com/reference/androidx/window/DeviceState#POSTURE_OPENED" rel="noopener ugc nofollow" target="_blank"><em class="jx">OPENED</em></a><em class="jx">.</em></figcaption></figure><p id="9059" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这个功能利用了Android模拟器的灵活性，并直接挂钩到<a class="ae jn" href="https://developer.android.com/jetpack/androidx/releases/window" rel="noopener ugc nofollow" target="_blank"> WindowManager </a>，这是最近添加到<a class="ae jn" href="https://developer.android.com/jetpack" rel="noopener ugc nofollow" target="_blank"> Android Jetpack </a>的一个新功能，它使开发人员能够构建一致的体验，对可折叠设备的姿态做出反应。通过这些控件，你可以明确地设置窗口管理器的<a class="ae jn" href="https://developer.android.com/reference/androidx/window/DeviceState" rel="noopener ugc nofollow" target="_blank">设备状态</a>并测试你的应用程序的反应。在上面的例子中，Android <a class="ae jn" href="https://github.com/android/sunflower" rel="noopener ugc nofollow" target="_blank">向日葵示例应用</a>已经被修改为当姿态为<a class="ae jn" href="https://developer.android.com/reference/androidx/window/DeviceState#POSTURE_HALF_OPENED" rel="noopener ugc nofollow" target="_blank">半开</a>时沿着设备的铰链分裂成一个父子布局，使用硬件来支持新颖的UX。如果你想了解更多关于这个库和为可折叠内容构建的信息，请阅读<a class="ae jn" href="https://developer.android.com/guide/topics/ui/foldables" rel="noopener ugc nofollow" target="_blank">为可折叠内容构建应用</a>或<a class="ae jn" rel="noopener" href="/androiddevelopers/support-new-form-factors-with-the-new-jetpack-windowmanager-library-4be98f5450da">使用新的Jetpack WindowManager库支持新的外形。如果这还不够，请关注第九周的更多内容</a><a class="ae jn" href="https://developer.android.com/11weeksofandroid" rel="noopener ugc nofollow" target="_blank"> 11周的Android:Android Beyond Phones</a>。</p><p id="9094" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">除了可视化和扩展控件，我们还将在<a class="ae jn" href="https://developer.android.com/guide/topics/ui/foldables#emulators" rel="noopener ugc nofollow" target="_blank">两个初始可折叠硬件配置文件</a>的基础上进行扩展，并将在Android Studio 4.2的基础上发布具有水平折叠和双显示器的配置文件。在此之前或之后，如果您想要自定义虚拟设备，可以通过编辑虚拟设备的config.ini文件来添加或修改可折叠属性。这使得模拟市场上任何可折叠设备甚至尚不存在的配置成为可能。在Android Studio的Android虚拟设备(AVD)管理器中右键单击设备并选择“在磁盘上显示”,可以找到虚拟设备的config.ini文件。将以下代码添加到Pixel 3的config.ini文件中，可以让您看到水平折叠的效果！</p><figure class="jp jq jr js fd hj"><div class="bz dy l di"><div class="lc ld l"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">Additions to a virtual Pixel 3’s confing.ini that enable the foldable controls.</figcaption></figure><figure class="jp jq jr js fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es le"><img src="../Images/c43288002f7d6acbbed04fda6a61e495.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eMoNuffGwGgaFouK"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx"><em class="jx">A virtual Pixel 3 with an added horizontal fold.</em></figcaption></figure><p id="5637" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请记住，可折叠只是Android和Android Emulator支持的众多替代形式之一。我们的<a class="ae jn" href="https://developer.android.com/training/cars/testing#test-automotive-os" rel="noopener ugc nofollow" target="_blank"> Android Auto </a>、<a class="ae jn" href="https://developer.android.com/training/tv/start/start#run-on-a-virtual-device" rel="noopener ugc nofollow" target="_blank"> Android TV </a>和<a class="ae jn" href="https://developer.android.com/training/wearables/apps/creating#emulator" rel="noopener ugc nofollow" target="_blank"> WearOS </a>虚拟设备也使其有可能构建替代的外形并接触更多的用户。</p><h1 id="df4e" class="jy jz hs bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">5G</h1><p id="3eb9" class="pw-post-body-paragraph ip iq hs ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">Android模拟器现在支持5G，允许您开发利用5G的体验，而无需购买硬件或访问物理5G网络。要尝试这一点，请下载并使用Android 11 Beta 2+ (API level 30)系统映像之一创建一个虚拟设备，并使用最新版本的Android模拟器运行它，该模拟器可在Android Studio Canary发布频道中获得。</p><p id="612a" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Android模拟器<a class="ae jn" href="https://developer.android.com/preview/behavior-changes-all#emulator-5g" rel="noopener ugc nofollow" target="_blank"> 5G网络设置</a>与新的Android 11 <a class="ae jn" href="https://developer.android.com/preview/features/5g#detection" rel="noopener ugc nofollow" target="_blank"> 5G检测</a>、<a class="ae jn" href="https://developer.android.com/preview/features/5g#meteredness" rel="noopener ugc nofollow" target="_blank">计量</a>和<a class="ae jn" href="https://developer.android.com/preview/features/5g#estimator" rel="noopener ugc nofollow" target="_blank">带宽估计</a>API集成，只需点击一个按钮，就可以针对该API表面进行开发和测试。</p><figure class="jp jq jr js fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lf"><img src="../Images/df1bbd4126e437335ffc366cebc1e553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*v2OXbygnfA97UToW"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx"><em class="jx">The 5G network setting can be accessed in the Android Emulator’s Cellular controls</em></figcaption></figure><p id="d5f7" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">查看我们的<a class="ae jn" href="https://developer.android.com/preview/features/5g" rel="noopener ugc nofollow" target="_blank"> 5G文档</a>以了解更多关于向您的应用添加5G功能的信息。</p><h1 id="7acc" class="jy jz hs bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">结论与展望</h1><p id="5943" class="pw-post-body-paragraph ip iq hs ir b is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji la jk jl jm ha bi translated">Android模拟器最初是为了提供一个真实的虚拟设备而构建的，这使得在任何设备配置上测试你的应用成为可能，而无需维护一系列物理设备。我们仍然致力于这一目标，并将继续为每个Android平台版本提供各种设备外形以及高质量的符合<a class="ae jn" href="https://source.android.com/compatibility/cts" rel="noopener ugc nofollow" target="_blank"> Android兼容性测试套件(CTS)的</a>系统映像。</p><p id="b41b" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">也就是说，我们不满足于仅仅提供物理设备的基本功能集。相反，我们还专注于构建一个超越的工具，为物理设备补充只有虚拟设备才有的功能。新的Android模拟器可折叠和5G功能是Android模拟器如何补充物理设备的两个例子，我们希望它们能够帮助<a class="ae jn" href="https://android-developers.googleblog.com/2020/02/Android-11-developer-preview.html" rel="noopener ugc nofollow" target="_blank">将您的应用升级到Android 11 </a>。</p></div></div>    
</body>
</html>