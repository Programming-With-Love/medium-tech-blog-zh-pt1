<html>
<head>
<title>iOS Accessibility — Best Practices for the VoiceOver User Experience</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS辅助功能VoiceOver用户体验的最佳实践</h1>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/ios-accessibility-best-practices-for-the-voiceover-user-experience-dc08112ef16?source=collection_archive---------2-----------------------#2016-04-14">https://medium.com/capital-one-tech/ios-accessibility-best-practices-for-the-voiceover-user-experience-dc08112ef16?source=collection_archive---------2-----------------------#2016-04-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/c8d7f8ab8567f193248fc9eec8f8cfed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DgDWvPwyoV3fgF3hytqo9w.jpeg"/></div></div></figure><div class=""/><p id="7994" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在Capital One，我们正努力为所有用户(包括残障用户)编写“同类最佳”的金融服务应用程序。在过去的六个月里，我有机会开发了用于iPhone的Capital One Mobile应用程序。具体来说，我一直在大力参与我们为VoiceOver (VO)用户提供的用户体验。对于外行人来说，VO是苹果的屏幕阅读器技术，盲人和低视力用户可以使用它来充分利用他们的移动设备。虽然这对视力受损的社区有很大的好处，但所有用户都可以从VO体验中受益。例如，当我在车里无法看屏幕时，我曾亲自在Capital One Mobile for iPhone应用程序上使用我们的VO体验来支付我的信用账单。<em class="jn">要了解有关VoiceOver和辅助功能的更多信息，请查看苹果的文档</em> <a class="ae jo" href="http://www.capitalone.io/www.apple.com/accessibility/ios/voiceover/" rel="noopener ugc nofollow" target="_blank"> <em class="jn">此处</em> </a> <em class="jn">。</em></p><p id="3858" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们谈谈如何让应用程序变得可访问，以及我们在Capital One Mobile for iPhone应用程序之旅中发现的最佳实践。对于本文的范围，我将集中在两个方面:<strong class="ir ht"> <em class="jn">对可访问性和开发人员最佳实践采取整体的方法。</em>T11】</strong></p><h2 id="f327" class="jp jq hs bd jr js jt ju jv jw jx jy jz ja ka kb kc je kd ke kf ji kg kh ki kj bi translated"><strong class="ak">对无障碍环境采取整体方法</strong></h2><p id="c324" class="pw-post-body-paragraph ip iq hs ir b is kk iu iv iw kl iy iz ja km jc jd je kn jg jh ji ko jk jl jm ha bi translated">在开发过程的早期，我们发现我们需要更早地考虑VO体验，并且开发应用程序的每个人都需要知道他们在项目中的特定角色如何与实现WCAG 2.0合规性水平相关。<em class="jn">有关WCAG 2.0标准的更多信息，请点击</em> <a class="ae jo" href="http://www.capitalone.io/www.w3.org/TR/WCAG20/" rel="noopener ugc nofollow" target="_blank"> <em class="jn">此处</em> </a> <em class="jn">获取web标准，点击</em> <a class="ae jo" href="http://www.capitalone.io/www.w3.org/TR/mobile-accessibility-mapping/" rel="noopener ugc nofollow" target="_blank"> <em class="jn">此处</em> </a> <em class="jn">获取其移动草案(尚未正式发布)。</em></p><p id="b16e" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">简单地在你的接受标准上加上“让屏幕可访问”并不足以设计出我们为用户设想的那种应用程序。因此，我们深入研究了我们的方法，并决定对我们的开发过程进行一些更改。我们发现，项目中的每个人都想让我们的应用程序易于访问，但是我们并没有尽可能彻底地了解WCAG准则。为了做到这一点，我们需要“去神秘化”可访问性，考虑到这一点，我们编写了一个开发过程，在这个过程中，设计、需求编写、开发、测试和审计在使我们的应用程序更易访问方面都起着同样重要的作用。</p><p id="7ae0" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">由于团队中并不是每个人都精通《美国残疾人法案》第三章的内容，我们提出了几个设计和需求写作的重点，以帮助团队在将他们的作品提交给我们的数字无障碍团队(我们的主题专家)进行审查之前处理好无障碍问题。有关我们的更多详细信息，请参见下文。</p><p id="599f" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht">设计</strong></p><p id="0eae" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于我们设计的每个线框，都有一个包含以下信息的覆盖图(参见需求书写部分的可视化示例)。</p><ol class=""><li id="032e" class="kp kq hs ir b is it iw ix ja kr je ks ji kt jm ku kv kw kx bi translated">定义每个VO帧。</li><li id="a61e" class="kp kq hs ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">为每个表单建立滑动顺序。</li><li id="3af9" class="kp kq hs ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">在适用的情况下，将刷卡和标签结合起来。</li><li id="247f" class="kp kq hs ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">特殊考虑(每一页都有唯一的标题吗？对于小于18磅的文本，颜色对比度至少是3:1还是4.5:1？).</li></ol><p id="97fe" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht">要求写作</strong></p><p id="308d" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在每个故事中，都有一个与可访问性相关的需求部分。我们决定创建一个编号列表来对应每个部分的滑动顺序。</p><ol class=""><li id="76b7" class="kp kq hs ir b is it iw ix ja kr je ks ji kt jm ku kv kw kx bi translated"><em class="jn"> VO Text: </em>定义每个VO帧的副本，以与iOS的<em class="jn">accessibility label</em>相对应。</li><li id="927e" class="kp kq hs ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated"><em class="jn">特征:</em>定义每个框架的特征，以对应于<em class="jn">iOS的可访问性特征</em>(按钮、标题、静态文本等。).</li><li id="77f0" class="kp kq hs ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated"><em class="jn">附加上下文:</em>根据需要添加附加上下文，以与<em class="jn">accessibility hint</em>相对应(稀疏使用，仅在必要时添加，且不会对标签造成冗余。).</li><li id="a27d" class="kp kq hs ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated"><em class="jn">值/状态:</em>如果适用，定义元素值/状态(未启用、已选择等。).</li></ol><p id="73e0" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这些对我们如何构思设计和需求编写的补充，有助于为我们的每个屏幕和UI故事建立更强的可访问性接受标准。</p><p id="8aa4" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这在屏幕上看起来像什么？</p><h2 id="671c" class="jp jq hs bd jr js jt ju jv jw jx jy jz ja ka kb kc je kd ke kf ji kg kh ki kj bi translated"><strong class="ak">无障碍线框和无障碍验收标准示例</strong></h2><figure class="le lf lg lh fd hj er es paragraph-image"><div class="er es ld"><img src="../Images/c302117ee12f77321d0fecb46a519882.png" data-original-src="https://miro.medium.com/v2/resize:fit:1052/format:webp/1*YYBNK0c7a2m5eSm51-T1aw.png"/></div></figure><figure class="le lf lg lh fd hj er es paragraph-image"><div class="er es li"><img src="../Images/81d5f3a5dc7416fe4a73e2a88658ed71.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/1*Q1aazwdo9cl285a8ecDG6Q.png"/></div></figure><p id="d34c" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，我们已经创建了一个漂亮的规范来制作一个可访问且符合WCAG 2.0的屏幕！这消除了对可访问性的猜测，当然也“揭开”了过程中接下来的步骤。接下来，这个规范被传递给工程人员来实现，然后由测试人员来评审。这对于我们的移动组织的工作流是一个巨大的改进，并允许我们相对自给自足，确保我们的代码符合可访问性标准，而没有繁琐的项目管理监督。我说的“相对”是指这一开发过程将使我们的屏幕更接近无障碍，但不会绕过数字无障碍项目团队审查我们的工作并确保我们完全符合WCAG 2.0的需要。</p><h2 id="8a89" class="jp jq hs bd jr js jt ju jv jw jx jy jz ja ka kb kc je kd ke kf ji kg kh ki kj bi translated"><strong class="ak">开发最佳实践</strong></h2><p id="ecdd" class="pw-post-body-paragraph ip iq hs ir b is kk iu iv iw kl iy iz ja km jc jd je kn jg jh ji ko jk jl jm ha bi translated">是时候了解真相了！在我浏览Capital One Mobile for iPhone应用程序的过程中，我发现有许多不同的方法来编写您的iOS代码，以满足WCAG 2.0标准。下面是我们在这个项目的代码审查过程中形成的开发最佳实践列表。</p><p id="b1d1" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht"> 1。</strong>如果屏幕上的内容是静态的，使用界面构建器配置辅助功能选项。</p><figure class="le lf lg lh fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lj"><img src="../Images/6dc8bb50ada7cee7fd64bb775d37d23d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_bBUKbShCHO0L2OX6UmjDA.png"/></div></div></figure><p id="480e" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht"> 2。</strong>如果页面上的内容是动态的，使用代码来配置可访问性选项。</p><p id="1bd5" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht"> 3。</strong>属性化的字符串在VO屏幕阅读器上并不总是播放得很好。我们发现屏幕阅读器需要多次点击来阅读这种类型的字符串。有时候这是一个优势，但是在读取货币金额的情况下，这就产生了一个问题。为了解决这个问题，我们在String上创建了一个名为<em class="jn">formatcurrencyforvoice over</em>的扩展。以下是一组函数，可用于为voice over用户创建用户友好的货币字符串。以便在您的字符串上简单地使用<em class="jn">callformatcurrencyforvoice over</em>(例如:<em class="jn">myattributedcurrencystring . formatcurrencyforvoice over()</em>)。</p><pre class="le lf lg lh fd lk ll lm ln aw lo bi"><span id="9cf1" class="jp jq hs ll b fi lp lq l lr ls">func formatCurrencyForAccessibility () -&gt; String {<br/>     var unformattedCurrency = self.NSCharacterSet(charactersInString: “0123456789-”).invertedSet<br/>     unformattedCurrency = unformattedCurrency.componentsSeparatedByCharactersInSet(invertedSet).joinWithSeparator(“”)<br/>     if unformattedCurrency == “” {<br/>          return NSLocalizedString(“, unknown amount”, comment: “This is a string used for an accessibility label if the amount is unknown”)<br/>     }<br/> <br/>     var dollarStringIndex = unformattedCurrency.endIndex.advanceBy(-2)<br/>     let dollarString = unformattedCurrency.substringToIndex(dollarStringIndex)<br/>     let centString = unformattedCurrency.substringFromIndex(2)<br/> <br/>     var dollarText = NSLocalizedString(“ dollars and “, comment: “String for dollars in currency”)<br/>     if (dollarString == “1”) {<br/>          dollarText = NSLocalizedString(“ dollar and “, comment: “String for dollar in currency”)<br/>     }<br/> <br/>     var centText = NSLocalizedString(“ cents”, comment: “String for cents in currency”)<br/>     if (centString == “1”) {<br/>          centText = NSLocalizedString(“ cent”, comment: “String for cent in currency”)<br/>     }<br/> <br/>     let formattedAccessibilityTextForCurrency = String(“@%@%@%@%”, dollarString, dollarText, centString, centText)<br/> <br/>     return formattedAccessibilityTextForCurrency<br/> }</span></pre><p id="7661" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht"> 4 </strong>。每一页都必须有一个标题，许多页面可能有几个副标题。从Xcode 7.1开始，这可以在Interface Builder中应用，但如果您使用的是以前的版本，则必须在代码中应用。请注意，在撰写本文时(2015年12月)，您必须在设备上构建您的应用程序，以测试header trait是否正确应用。目前，这是iOS模拟器中辅助功能检查器的一个缺陷。</p><pre class="le lf lg lh fd lk ll lm ln aw lo bi"><span id="8edb" class="jp jq hs ll b fi lp lq l lr ls">headingLabel.accessibilityTraits |= UIAccessibilityTraitHeader</span></pre><p id="64ab" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht"> 5。</strong>如果您需要将多个元素连接到一个VO滑动中，请禁用子元素上的辅助功能，并仅启用“父”元素上的辅助功能。注意:对于静态和动态内容，请遵循这里的最佳实践1和2。下面是一段动态代码的例子。在这个示例中，VO框架将获取单元格的框架，并在一次滑动中从label1和label2读取文本，而不是两次单独的滑动。</p><pre class="le lf lg lh fd lk ll lm ln aw lo bi"><span id="e0a4" class="jp jq hs ll b fi lp lq l lr ls">cell.isAccessibilityElement = true<br/>cell.label1.isAccessibiltyElement = false<br/>cell.label2.isAccessibilityElement = false<br/>cell.accessibilityLabel = NSLocalizedString(“@%@%”, cell.label1.text, cell.label2.text, comment:”Concatenated accessibility label text for cell”);</span></pre><p id="e733" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht"> 6。</strong>如果你有一个复杂的自定义控件，实现<em class="jn"> accessibilityActivate </em>非正式协议。这允许VO用户执行双击，而不是执行实际的应用手势，这在启用VO的情况下可能无法执行。例如，如果您的项目中有一个<em class="jn"> slider.swift </em>类，并且您想要为VO用户双击而不是滑动来触发账单支付确认。在<em class="jn"> slider.swift </em>类中实现这个方法。</p><pre class="le lf lg lh fd lk ll lm ln aw lo bi"><span id="9c1c" class="jp jq hs ll b fi lp lq l lr ls">override func accessibilityActivate() -&gt; Bool {<br/>     //perform desired action<br/>     confirmBillPay()<br/>     return true<br/> }</span></pre><h2 id="dcfc" class="jp jq hs bd jr js jt ju jv jw jx jy jz ja ka kb kc je kd ke kf ji kg kh ki kj bi translated">走向一个更加无障碍的未来</h2><p id="f29c" class="pw-post-body-paragraph ip iq hs ir b is kk iu iv iw kl iy iz ja km jc jd je kn jg jh ji ko jk jl jm ha bi translated">这些是我们在Capital One Mobile for iPhone项目的学习过程中发现的一些更有意义的发现和开发模式。随着我们继续构建更好、更易访问的应用程序，我们期待在Capital One Mobile for iPhone应用程序的未来版本以及未来的Capital One项目中探索更多的可访问性控件。</p><p id="89dc" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht">如果您对这篇文章还有其他问题，或者想联系我们的无障碍团队，请在这里</strong>  <strong class="ir ht">给我们发送一条消息</strong> <a class="ae jo" href="https://www.capitalone.com/legal/contact-accessibility/?Log=1&amp;EventType=Link&amp;ComponentType=T&amp;LOB=MTS%3A%3ALCTMMQC4S&amp;PageName=Accessibility+at+Capital+One&amp;PortletLocation=4%3B16-col%3B2-2-1-1&amp;ComponentName=capital-one-accessibility-contact-form-rev%3B15&amp;ContentElement=1%3BContact+Us%3Cspan+class%3D%22icon-chevron%22%3E%3C%2Fspan%3E&amp;TargetLob=MTS%3A%3ALCTMJBE8Z&amp;TargetPageName=Contact+Capital+One+Accessibility&amp;referer=https%3A%2F%2Fwww.capitalone.com%2Fabout%2Faccessibility-commitment" rel="noopener ugc nofollow" target="_blank"> <strong class="ir ht">。</strong></a></p></div><div class="ab cl lt lu go lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ha hb hc hd he"><p id="3bcb" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">欲了解更多关于Capital One的API、开源、社区活动和开发人员文化的信息，请访问我们的一站式开发人员门户网站DevExchange。</em><a class="ae jo" href="https://developer.capitalone.com/" rel="noopener ugc nofollow" target="_blank"><em class="jn">https://developer.capitalone.com/</em></a></p></div></div>    
</body>
</html>