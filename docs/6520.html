<html>
<head>
<title>Using Composer With Drupal</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过Drupal使用Composer</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/using-composer-with-drupal-20862bd18909?source=collection_archive---------9-----------------------#2018-10-09">https://medium.com/quick-code/using-composer-with-drupal-20862bd18909?source=collection_archive---------9-----------------------#2018-10-09</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/8540ce2e466379531d3340e7a70e2a57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Os6_WMZ_YAjXxC0u.jpg"/></div></div></figure><p id="23f8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">从8.1版本开始，Drupal核心接收了一个专用的包管理器<a class="ae jn" href="https://www.drupal.org/docs/develop/using-composer" rel="noopener ugc nofollow" target="_blank">编写器</a>。它有助于管理基于PHP的项目中的依赖关系，以及快速安装和更新库，包括第三方库(以前必须由开发人员‘手动’执行)。</p><p id="bbe4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你已经有了和类似<a class="ae jn" href="https://itsfoss.com/apt-command-guide/" rel="noopener ugc nofollow" target="_blank"> Linux apt </a>、<a class="ae jn" href="http://yum.baseurl.org/" rel="noopener ugc nofollow" target="_blank"> yum </a>或者<a class="ae jn" href="https://yarnpkg.com/" rel="noopener ugc nofollow" target="_blank"> Yarn </a>这样的包管理器一起工作的经验，那么你掌握Composer并不困难(它基本上是PHP专属的常规包管理器)。</p><p id="6e20" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">重要提示:目前Drupal 8支持PHP 5.5.9+。但是，您可能仍然需要至少版本7的PHP。</strong></p><p id="17e5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">本文回顾并讨论了包管理器，并解释了如何在Drupal中使用Composer。</p><h1 id="ad1f" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">将Composer与Drupal结合使用的优势</h1><p id="7aa0" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">尽管Composer是Drupal核心中的一个额外功能，但它的集成已经成为web开发人员的普遍习惯。只有当模块的数量逐渐增加时，项目的扩展才是合理的。</p><p id="53d6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">还不确定你是否需要作曲家？让我们来看看好处:</p><ul class=""><li id="a458" class="kr ks hh ir b is it iw ix ja kt je ku ji kv jm kw kx ky kz bi translated">能够管理任何核心、贡献包甚至个人开发的模块以及JS库；</li><li id="2d10" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated">使用起来比Git子模块简单得多；</li><li id="6703" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated">可访问依赖系统，无需手动执行多次操作即可下载第三方依赖；</li><li id="aded" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated">在更新过程中不需要检测变化(Composer也会处理)；</li><li id="5192" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated">D8库越小越好；</li><li id="545c" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated">通过使用特殊的composer插件，实现了可访问和接近全自动的修补系统。补丁直接在composer.json中应用；</li><li id="fff0" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated">能够在新项目中重复使用composer.json(服务器上的配置文件nginx必须为此进行定制，但这是最容易使用的选项)。</li></ul><p id="3167" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">总而言之，Composer实际上允许对不断增长的依赖列表进行完全自动化的管理(例如，您可以自主下载和更新某些包的版本)。Composer使用起来并不完全简单，但是一旦你弄明白了它，你就会把自己从大量繁琐的日常任务中解放出来。</p><h1 id="903a" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Composer是如何工作的？</h1><p id="804e" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">Composer由两个文件组成:</p><ul class=""><li id="8b36" class="kr ks hh ir b is it iw ix ja kt je ku ji kv jm kw kx ky kz bi translated"><strong class="ir hi"> composer.json. </strong>该文件包含关于需要哪些特定包、它们应该安装在哪里以及其中必须包含哪些配置和脚本的数据。基本上，composer.json提供了关于您可以在正在安装的模块中手动定制的所有内容的建议。</li><li id="ca20" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated"><strong class="ir hi"> composer.lock. </strong>这个是自动更新的，包含项目当前状态的所有数据。它的出现也不需要任何手动输入，也不需要定制或删除它。</li></ul><h1 id="74b5" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">学习使用Composer</h1><p id="cabe" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">你已经决定开始学习在Drupal 8站点上使用Composer了吗？该工具有三个主要命令。如果你学会了和他们一起工作，你就掌握了和Composer一起工作的技巧。</p><h1 id="5893" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">作曲者需要包名</h1><p id="4bbf" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">使用<strong class="ir hi">composer require package name</strong>命令安装模块。为了在一个命令中安装一组模块，只需用空格分隔定义它们的名称(模块的名称是以vendor/name格式定义的——这允许您排除在单个项目中出现同名包的情况)。对于来自drupal.org的所有项目，格式将是drupal/PROJECT_NAME。因此，您应该输入下面的命令来安装一个商业模块——composer需要drupal/commerce。</p><h1 id="8d5b" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">composer更新-具有依赖性</h1><p id="55b2" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">更新与安装非常相似。这两个过程的区别在于，使用这个命令，包的名称是不必要的。<strong class="ir hi"> composer update </strong>命令默认更新composer.json文件中定义的所有依赖项。也就是说，通过Composer进行的更新只涉及该文件中提到的包。另一方面，如果一个模块具有composer.json中没有定义的特殊依赖关系，那么只有在命令中额外使用以下关键短语时，它们才会被更新—<strong class="ir hi">—with—dependencies</strong>。使用<strong class="ir hi">composer update-with-dependencies</strong>来更新每个软件包，包括它们的依赖项(该命令最适合在发生次要核心版本更新时使用)。您还可以定义要更新的包的名称:composer update drupal/commerce。</p><h1 id="0347" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">编写器删除包名</h1><p id="0b9e" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">使用<strong class="ir hi">composer remove package name</strong>命令删除包。也要注意从你的管理面板中删除所需的模块(这应该在命令输入之前完成)。</p><h1 id="b78e" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">…以及使用Composer的几个更重要的时刻</h1><p id="8859" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">不幸的是，并非所有初学者都能立即意识到最佳解决方案是最初通过Drupal 8 Composer开始构建项目，因为官方网站上没有这方面的提示。</p><p id="96c1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">首先，通过这种方式，您可以忘记频繁使用的<a class="ae jn" href="https://www.drupal.org/project/drush" rel="noopener ugc nofollow" target="_blank"> Drush </a>实用程序。其次，您不需要通过FTP(可能只有自定义解决方案需要)或管理面板下载所有需要的模块，从而手动安装它们。第三，Composer不仅允许下载和更新模块和主题，还允许下载和更新内核本身。如果没有Composer(这实际上是Drupal第8版的一个标准)，您将根本无法安装某些模块(这些模块可能包括Commerce、Search API、ImageMagick等)。即使您处理下载和启动它们，它们仍然不会工作，因为以包的形式存储在Composer中的不可用的依赖项。另一方面，如果您从一开始就使用这个工具，那么项目中的依赖项将会自动定义，您不必纠结于哪些需要更新，哪些不需要更新。</p><p id="6c79" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们预计未来仅通过composer安装的模块数量将会增加。这意味着如果您决定将Drupal升级到第8版，您将不得不学习以某种方式使用Composer。</p><h1 id="1055" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Drupal 8 Composer教程:结论</h1><figure class="lg lh li lj fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lf"><img src="../Images/6e7082c4f8e828afc22b22461bab6915.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*GxPofAKO24s0HCNt.png"/></div></div></figure><p id="4695" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您使用的是早于第8版的Drupal，Composer并不是您项目的唯一解决方案。然而，最新版本为开发人员提供了实现项目功能的最大机会和自动化的最大解决方案(这反过来允许专注于更不常见的任务，而不是浪费时间在模块的连接/更新上)。这就是为什么，迟早，您将不得不面对将Composer与Drupal一起使用的必要性。这就是为什么我们建议尽早了解使用该工具的细微差别(我们希望我们简短的Drupal 8 Composer教程可以帮助您做到这一点),以便使您的进一步开发过程更加顺利并以结果为导向。总而言之，这将是你未来网站开发职业生涯中一次绝佳的时间投资。</p><p id="f46d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对一个项目有想法吗？我们将提供其<a class="ae jn" href="https://anyforsoft.com/" rel="noopener ugc nofollow" target="_blank">顶级执行力</a>！</p></div><div class="ab cl lk ll go lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ha hb hc hd he"><p id="e4c2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">【anyforsoft.com】最初发表于<a class="ae jn" href="https://anyforsoft.com/blog/using-composer-drupal" rel="noopener ugc nofollow" target="_blank"><em class="lr"/></a><em class="lr">。</em></p></div></div>    
</body>
</html>