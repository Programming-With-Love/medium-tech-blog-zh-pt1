<html>
<head>
<title>Enhancing Pinner security with login emails and revoking sessions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过登录电子邮件和撤销会话增强Pinner安全性</h1>
<blockquote>原文：<a href="https://medium.com/pinterest-engineering/enhancing-pinner-security-with-login-emails-and-revoking-sessions-b5a7ec3de29d?source=collection_archive---------4-----------------------#2017-04-20">https://medium.com/pinterest-engineering/enhancing-pinner-security-with-login-emails-and-revoking-sessions-b5a7ec3de29d?source=collection_archive---------4-----------------------#2017-04-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="9fcd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Amine Kamel，Cesena &amp; Eric Zhang | Pinterest工程师，安全</p><p id="3ad9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Pinterest安全团队的任务是确保超过1.75亿人的账户安全。我们最近增加了另一层保护来保护Pinners的帐户。现在，从新设备或位置登录将触发电子邮件通知，并且可以从<a class="ae jc" href="https://www.pinterest.com/settings/" rel="noopener ugc nofollow" target="_blank">用户设置页面</a>查看和撤销所有活动会话。</p><p id="445b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这里，我们将描述支持新功能的系统架构。</p><h2 id="a713" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">新功能</h2><p id="5a5b" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">现在是上午11:30，我收到来自Pinterest的电子邮件，通知我有一个来自纽约的新登录。等等，什么！？我在旧金山的办公室工作——这次登录肯定不是我发的。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es kd"><img src="../Images/a54c3dd33dcca60780761be0e47c6b53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/0*InBjJnoKYcvSV02N."/></div></figure><p id="13fa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我访问我的<a class="ae jc" href="https://www.pinterest.com/settings/" rel="noopener ugc nofollow" target="_blank">设置</a>下的新“安全”部分，查看我的活动会话。在这里，我可以通过单击“结束活动”按钮来删除不想要的会话。由于这是一个新的登录，我选择更改我的密码，这将自动重置我的所有会话。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kl"><img src="../Images/707fbe56cec448dfbd98bfd74ee7444d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JcjINHg2g7FztU0r."/></div></div></figure><h2 id="cda8" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">它是如何工作的</h2><p id="b887" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">这里是系统架构的概述，用户设置页面在顶部，电子邮件通知系统在底部。如您所见，两者都依赖于一个名为会话管理器的后端服务。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kq"><img src="../Images/f20f71426d2cf8b51494f672faadc0af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xLkOTdfbtaWAIHIb."/></div></div></figure><h2 id="bd2e" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">会话管理器</h2><p id="fb4d" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">这两个特性的核心是会话管理器，它负责存储和验证用户会话。它是一个Java服务，由API通过一个节俭接口访问，以验证每个请求的会话(每秒150k+)。会话管理器总是能够撤销会话，但是这是我们允许Pinners使用它的第一次。</p><h2 id="cae4" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">用户设置页面</h2><p id="f4f0" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">通过直接连接到会话管理器端点的API调用，添加了检索和撤销活动会话的新功能。</p><h2 id="ec66" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">电子邮件通知</h2><p id="9008" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">在每次登录时(每天几百万次)，API会向我们的PinLater服务发送一个异步作业(这是<a class="ae jc" rel="noopener" href="/@Pinterest_Engineering/open-sourcing-pinlater-an-asynchronous-job-execution-system-d8ec4e39859a#.94oh2smlx">开源的</a>)。执行时，该作业检索所有会话的列表，并评估登录事件是否来自新设备或IP地址。如果是，作业会向帐户所有者发送一封电子邮件。</p><h2 id="ac0f" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">保护Pinterest</h2><p id="7a4e" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">随着新登录的电子邮件通知以及查看和撤销活动会话的能力，安全性首次出现在Pinterest应用程序中，我们非常兴奋。敬请关注我们团队和Pinterest Engineering的更多更新！</p><p id="51a4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在Pinterest或其他地方，你是否有撤销未知或不想要的会话的直接经历？如果是这样，我们希望收到您的来信。在下面的评论里告诉我们，或者在Twitter上找到我们 <a class="ae jc" href="https://twitter.com/0x0ece" rel="noopener ugc nofollow" target="_blank"> <em class="kr"> @0x0ece </em> </a> <em class="kr">、</em><a class="ae jc" href="https://twitter.com/ericzhang401" rel="noopener ugc nofollow" target="_blank"><em class="kr">@ ericzhang 401</em></a><em class="kr">。</em></p><p id="b27b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kr">鸣谢:这些功能是跨团队的成果。非常感谢Ali Altaf、Jean Aurambault、Steve Cohen、约翰·埃根、Kevin Grandon、Devin Lundberg、Vamsi Ponnekanti、Ryan Reid和Web &amp; API团队的所有帮助和指导。</em></p></div></div>    
</body>
</html>