<html>
<head>
<title>Why code on Python using Virtual Environments?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为什么使用虚拟环境在Python上编码？</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/why-code-on-python-using-virtual-environments-6f1bb327a84e?source=collection_archive---------0-----------------------#2020-04-25">https://medium.com/quick-code/why-code-on-python-using-virtual-environments-6f1bb327a84e?source=collection_archive---------0-----------------------#2020-04-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="f4f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Python现在已经被广泛应用于各种领域，从第一语言到向学生介绍编码世界，再到为自动驾驶汽车开发实时深度学习软件的逻辑。</p><p id="7473" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是他们中的许多人仍然不清楚如何真正开始从事Python项目。有些人在第一个项目中使用PyCharm IDE，这让许多新手程序员感到困惑，因为他们会被大量可用的高级选项和设置所淹没，从而开始一个项目。让我试着让这些人明白如何进行。</p><p id="9a5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先:请安装目前世界上使用最多的轻量级编辑器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/90f1a43b4059a769b26e4dcb26d43af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zNEYnhYt0SISfCYO"/></div></div></figure><p id="cb68" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，您可能知道每个Python项目都需要导入一些额外的库，如numpy、pytorch、scipy等。但是我们经常犯的最大错误是在我们的笔记本电脑中执行python的全局安装中的pip安装。</p><blockquote class="jp"><p id="9820" class="jq jr hh bd js jt ju jv jw jx jy jb dx translated"><em class="jz">每个python项目都应该从创建一个虚拟环境(更常见的是venv)开始，这将保持项目的需求</em></p></blockquote><p id="324a" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">接下来，我们通常做的是为我们的下一个项目“pip install”一堆库，并在项目需要扩大规模时跟踪我们需要的所有东西。那是因为项目没有在虚拟环境中初始化！</p><h1 id="6499" class="kf kg hh bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">为什么我们需要虚拟环境？</h1><p id="d280" class="pw-post-body-paragraph ie if hh ig b ih ld ij ik il le in io ip lf ir is it lg iv iw ix lh iz ja jb ha bi translated">虚拟环境的目的是有一个空间，我们可以安装特定于某个项目的软件包。比如说，假设你有很多Django网站使用Django版本1，但是现在对于新的项目，你想使用Django版本2。</p><p id="7f72" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">那么，如果你只是为所有项目使用一个单一的全局环境，那么当你更新Django包时，它可能会破坏许多旧的项目，这将变得与新版本不兼容。因此，我们不希望我们所有的Django项目都指向一个包。所以每个项目都应该有自己独立的包，这样我们就不会破坏旧的代码库。</p><p id="88a3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">另外，每个项目都有一个独立的环境，更容易管理和维护它的依赖关系。所以让我们开始吧！</p><p id="57f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，让我向您展示我在python的全球安装中拥有的模块列表:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es li"><img src="../Images/b27695372779cd417323c10787b12144.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/0*6xxDycczBT3yuNvG"/></div></figure><p id="f0b9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我将导航到我的桌面，那里有我的项目文件夹，我们将在其中创建我们的虚拟环境。</p><p id="285b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将使用以下命令创建一个虚拟环境:</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="b925" class="lo kg hh lk b fi lp lq l lr ls">python -m venv &lt;your virtual env name&gt;</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/12fc8094fcfbb718fe4b217b1e0d7838.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*A0Nh7WoW4MKGlYMv"/></div></div></figure><p id="9808" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我已经创建了文件夹名为的环境。venv”。这是开发人员常用的术语(有些人甚至简单地称之为“venv”)。</p><p id="f4c5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">记住要能执行这个命令，你需要先“光盘”到你的项目文件夹的根目录。</p><p id="7eb2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，为了激活这个新创建的环境，我们将在powershell中使用以下命令:</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="33b8" class="lo kg hh lk b fi lp lq l lr ls">.venv\Scripts\activate.bat</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lt"><img src="../Images/36afa00a1ea810b338be8614e03e4631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1158/0*Qvaotwy5bDJ1EfEN"/></div></figure><p id="d884" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以现在我们可以看到环境名(。venv)出现在开头。这意味着您已经成功激活了您的第一个虚拟环境。因此，现在当您在这里安装一些软件包(pip install)时，您将只为这个特定的环境进行安装。</p><p id="1a5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例如，我想安装两个名为numpy和scipy的python包，因为我将在这里做一个机器学习项目，所以我将简单地使用命令:</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="2c10" class="lo kg hh lk b fi lp lq l lr ls">pip install numpy pip install scipy</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lu"><img src="../Images/a8f606243d195b9fca5e20f545e16baa.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/0*KAFLWN-lU0Pxxvr0"/></div></figure><p id="2a18" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，我们只在我们的环境中安装了numpy和scipy，与我的其他项目甚至python的全局安装隔离开来。</p><p id="8dba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，如果我们想要导出项目，使用虚拟环境还有另一个功能，您可以自动生成一个<em class="lv"> requirements.txt </em>文件，其他开发人员可以在克隆您的项目时使用该文件，并安装您正在使用的所有相同的包和依赖项。为此，首先我们将使用:</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="c068" class="lo kg hh lk b fi lp lq l lr ls">pip freeze</span></pre><p id="9bdb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将生成您环境中已安装包的列表，但是使用了<em class="lv"> pip install </em>所期望的输出。一个常见的开发人员惯例是使用以下命令将输出放在一个<em class="lv"> requirements.txt </em>文件中:</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="d50e" class="lo kg hh lk b fi lp lq l lr ls">pip freeze &gt; requirements.txt</span></pre><p id="59eb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在你会看到一个新的txt文件被创建在你的项目的根目录下。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lw"><img src="../Images/1338f0f398910e377b60532d18c58460.png" data-original-src="https://miro.medium.com/v2/resize:fit:1294/0*rKaoSm_voQvGA6-y"/></div></figure><h1 id="2f6f" class="kf kg hh bd kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc bi translated">让我们看看如何在VS代码中选择这个虚拟环境</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/fa5ff0803118fa7dc9e08242a71da43b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eTdwcSW0Ecblphhu"/></div></div></figure><p id="4952" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">默认情况下，VSCode中的Python扩展会查找并使用它在系统路径中找到的第一个Python解释器。</p><p id="10b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要选择一个特定的环境，使用<strong class="ig hi">命令面板</strong>中的<strong class="ig hi"> Python: Select Interpreter </strong>命令(Ctrl+Shift+P)。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es lx"><img src="../Images/47804c2b0fdbb8cd6b2ff9d6c8874b7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/0*E5FUvlWC19wrX-Qe.png"/></div></figure><p id="875f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这里，我们可以看到Python的多个全局实例以及VSCode在项目根目录中自动找到的“env”文件夹。</p><p id="2182" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后可以将<code class="du ly lz ma lk b">requirements.txt</code>提交给版本控制，并作为应用程序的一部分发布。用户可以用<code class="du ly lz ma lk b">install -r</code>安装所有必要的软件包</p><p id="32a0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们知道了如何创建虚拟环境，如何将它导出到一个需求文本文件，让我们看看如何在克隆某人的项目时使用这个requirements.txt文件来安装所有的依赖项。</p><p id="989d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，初始步骤保持不变，即在将项目克隆到您的机器上之后，您在项目的根文件夹中创建一个虚拟环境，然后您将激活该虚拟环境。接下来，您执行以下命令:</p><pre class="je jf jg jh fd lj lk ll lm aw ln bi"><span id="226e" class="lo kg hh lk b fi lp lq l lr ls">pip install -r requirements.txt</span></pre><p id="aa3a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，我们终于学会了如何创建虚拟环境，如何将包导出到requirements.txt，以及如何安装某人的项目依赖项。</p><blockquote class="jp"><p id="6769" class="jq jr hh bd js jt ju jv jw jx jy jb dx translated"><em class="jz">最后一个提示:请喝一杯</em>。git忽略项目repo中的<em class="jz">文件，并添加虚拟环境文件夹的名称，这样您就不会无意中提交版本控制。</em></p></blockquote></div><div class="ab cl mb mc go md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ha hb hc hd he"><p id="da90" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lv">原载于2020年4月25日</em><a class="ae jc" href="http://madhureshgupta.home.blog/2020/04/25/why-code-on-python-using-virtual-environments/" rel="noopener ugc nofollow" target="_blank"><em class="lv">http://madhureshgupta . home . blog</em></a><em class="lv">。</em></p></div></div>    
</body>
</html>