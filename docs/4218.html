<html>
<head>
<title>8 Steps to Google Pay on Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android上Google Pay的8个步骤</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/8-steps-to-google-pay-on-android-9fb899bfbfcb?source=collection_archive---------0-----------------------#2019-01-04">https://medium.com/google-developer-experts/8-steps-to-google-pay-on-android-9fb899bfbfcb?source=collection_archive---------0-----------------------#2019-01-04</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/d87e8db8707c9a409857ce35f14c3f36.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CVFXgubfWK2EFhqZuJMUrg.png"/></div></div></figure><p id="3e9c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在我们的Android应用程序中，我们可以使用Google Pay API为我们的用户在我们的应用程序中结账提供一种便捷的方式，而无需他们输入任何支付信息(在初始设置后)。这为用户带来了一系列优势，例如:</p><ul class=""><li id="4b55" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">一个集中的地方来完成他们在你的应用程序中的所有支付，就像他们能够在网上或商店中做的那样</li><li id="819d" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">在您的应用内完成购物结账阶段的简化流程</li><li id="1ff3" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">由于Google pay支付信息的安全存储，支付时有一种安全感</li></ul><p id="d3c9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">android的Google Pay API允许开发人员轻松集成一种支付方式，为我们的用户提供这种简化、安全和熟悉的体验。</p><p id="b064" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们都想让事情变得更简单，对用户来说更好，所以在这篇文章中，我想告诉你，你可以通过8个步骤将Google Pay集成到你的Android应用程序中。</p><figure class="kc kd ke kf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kb"><img src="../Images/1a7f67f8c10eb997b70fabc24e06c4f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6J6_M4C4QxHqs5g7LmMqlg.png"/></div></div></figure></div><div class="ab cl kg kh go ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ha hb hc hd he"><h2 id="8999" class="kn ko hh bd kp kq kr ks kt ku kv kw kx ja ky kz la je lb lc ld ji le lf lg lh bi translated">配置付款方式</h2><p id="46a1" class="pw-post-body-paragraph ip iq hh ir b is li iu iv iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ha bi translated">在我们开始配置用于在应用程序中处理支付的类之前，我们需要声明一些在我们将要执行的请求中使用的基本数据。</p><p id="8401" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们首先定义一个接受卡的列表，这个集合目前可以包括Amex、Discover、Mastercard、JCB和Visa卡。</p><pre class="kc kd ke kf fd ln lo lp lq aw lr bi"><span id="0640" class="kn ko hh lo b fi ls lt l lu lv">private val allowedCardNetworks = JSONArray().apply {<br/>    put("AMEX")<br/>    put("MASTERCARD")<br/>    put("VISA")<br/>}</span></pre><p id="a511" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，我们需要定义可用于交易的公认认证方法。给定的选择可以包括以下选项:</p><ul class=""><li id="a5e7" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated"><strong class="ir hi"> PAN_ONLY </strong> —与当前用户的Google帐户旁边存储的卡相关联。返回的数据包括对应的账号以及到期月份和年份。</li><li id="486b" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi"> CRYPTOGRAM_3DS </strong> —与存储为Android设备令牌的卡相关联。返回的数据包括在给定设备上生成的3DS密码。</li></ul><pre class="kc kd ke kf fd ln lo lp lq aw lr bi"><span id="142b" class="kn ko hh lo b fi ls lt l lu lv">private val allowedCardAuthMethods = JSONArray().apply {<br/>    put("PAN_ONLY")<br/>    put("CRYPTOGRAM_3DS")<br/>}</span></pre><p id="507f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">既然我们已经定义了上面的细节，我们就可以继续准备这些数据用于Google Pay API了。这些需要归入以下属性:</p><ul class=""><li id="361f" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated"><strong class="ir hi"> allowedAuthMethods </strong> —采用可在提出支付请求时使用的公认认证方法</li><li id="6153" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi"> allowedCardNetworks </strong> —接受可用于支付的已声明接受的卡</li></ul><pre class="kc kd ke kf fd ln lo lp lq aw lr bi"><span id="381c" class="kn ko hh lo b fi ls lt l lu lv">private val paymentMethodParameters = JSONObject().apply {<br/>    put("allowedAuthMethods", allowedCardAuthMethods)<br/>    put("allowedCardNetworks", allowedCardNetworks)<br/>}</span></pre><p id="96e3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">除上述内容外，我们还可以选择声明:</p><ul class=""><li id="9387" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated"><strong class="ir hi">allowprepaycards</strong>—说明在提出支付请求时是否可以使用预付卡</li><li id="719b" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi">需要帐单地址</strong> —说明完成交易是否需要帐单地址</li><li id="8da1" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi">billing address parameters</strong>—以<a class="ae lw" href="https://developers.google.com/pay/api/android/reference/object#BillingAddressParameters" rel="noopener ugc nofollow" target="_blank">billing address parameters</a>类的格式获取数据</li></ul><p id="13b4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后，我们将所有这些放在一起，将接受的支付类型声明为一个<strong class="ir hi">卡</strong>，并传递我们在上面声明的支付<strong class="ir hi">参数</strong>:</p><pre class="kc kd ke kf fd ln lo lp lq aw lr bi"><span id="4aed" class="kn ko hh lo b fi ls lt l lu lv">val baseCardPaymentMethod = JSONObject().apply {<br/>    put("type", "CARD")<br/>    put("parameters", paymentMethodParameters)<br/>}</span></pre></div><div class="ab cl kg kh go ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ha hb hc hd he"><h2 id="75f9" class="kn ko hh bd kp kq kr ks kt ku kv kw kx ja ky kz la je lb lc ld ji le lf lg lh bi translated">配置钱包选项</h2><p id="1f4c" class="pw-post-body-paragraph ip iq hh ir b is li iu iv iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ha bi translated">在我们实例化我们的支付客户端来处理我们的支付请求之前，我们需要创建这个客户端使用的选项的实例——这是以<a class="ae lw" href="https://developers.google.com/android/reference/com/google/android/gms/wallet/Wallet.WalletOptions" rel="noopener ugc nofollow" target="_blank"> WalletOptions </a>类的形式。</p><pre class="kc kd ke kf fd ln lo lp lq aw lr bi"><span id="18a0" class="kn ko hh lo b fi ls lt l lu lv">val options = Wallet.WalletOptions.Builder()<br/>    .setEnvironment(WalletConstants.<em class="lx">ENVIRONMENT_TEST</em>)<br/>    .setTheme(<em class="lx">THEME_LIGHT</em>)<br/>    .build()</span></pre><p id="4cfe" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用构建器，我们可以配置支付客户端使用的两个属性:</p><ul class=""><li id="3a24" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated"><a class="ae lw" href="https://developers.google.com/android/reference/com/google/android/gms/wallet/Wallet.WalletOptions.html#environment" rel="noopener ugc nofollow" target="_blank">环境</a>—进行交易时使用的环境。这将被设置为环境_生产或<a class="ae lw" href="https://developers.google.com/android/reference/com/google/android/gms/wallet/WalletConstants#ENVIRONMENT_TEST" rel="noopener ugc nofollow" target="_blank">环境_测试</a>。</li><li id="03fc" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><a class="ae lw" href="https://developers.google.com/android/reference/com/google/android/gms/wallet/Wallet.WalletOptions.html#theme" rel="noopener ugc nofollow" target="_blank">主题</a> —用于支付小部件的主题。这将被设置为<a class="ae lw" href="https://developers.google.com/android/reference/com/google/android/gms/wallet/WalletConstants#THEME_LIGHT" rel="noopener ugc nofollow" target="_blank">主题_亮</a>或<a class="ae lw" href="https://developers.google.com/android/reference/com/google/android/gms/wallet/WalletConstants#THEME_DARK" rel="noopener ugc nofollow" target="_blank">主题_暗</a>。</li></ul></div><div class="ab cl kg kh go ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ha hb hc hd he"><h2 id="73cb" class="kn ko hh bd kp kq kr ks kt ku kv kw kx ja ky kz la je lb lc ld ji le lf lg lh bi translated">初始化支付客户端</h2><p id="b892" class="pw-post-body-paragraph ip iq hh ir b is li iu iv iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ha bi translated">现在我们已经为我们的支付客户端配置了选项，我们可以实例化一个新的客户端实例以供使用。</p><pre class="kc kd ke kf fd ln lo lp lq aw lr bi"><span id="6b9b" class="kn ko hh lo b fi ls lt l lu lv">private val paymentsClient = Wallet.getPaymentsClient(this, options)</span></pre><p id="a6f5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里，我们传入当前上下文和在上一步中构建的WalletOptions实例。此时，我们的应用程序中现在有了一个支付客户端引用，当用户请求支付时可以触发该引用。</p></div><div class="ab cl kg kh go ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ha hb hc hd he"><h2 id="ca52" class="kn ko hh bd kp kq kr ks kt ku kv kw kx ja ky kz la je lb lc ld ji le lf lg lh bi translated">声明一个Google Play按钮</h2><p id="d990" class="pw-post-body-paragraph ip iq hh ir b is li iu iv iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ha bi translated">使用Google Pay品牌指南中提供的<a class="ae lw" href="https://developers.google.com/pay/api/android/guides/brand-guidelines#payment-buttons" rel="noopener ugc nofollow" target="_blank">资产，您需要首先向您的应用程序添加一个使用所提供资产之一的按钮。这为用户提供了一种识别Google Pay支付方式的方法。选择此按钮将触发付款流程，我们将在接下来的几个部分中了解这一流程。</a></p><figure class="kc kd ke kf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ly"><img src="../Images/fdfcab9cf25e35e65a997fc1d58eba11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zakJ6RNTYiratJ2kgTQ9ww.png"/></div></div></figure></div><div class="ab cl kg kh go ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ha hb hc hd he"><h2 id="369a" class="kn ko hh bd kp kq kr ks kt ku kv kw kx ja ky kz la je lb lc ld ji le lf lg lh bi translated">检查付款是否可以使用</h2><p id="d8d2" class="pw-post-body-paragraph ip iq hh ir b is li iu iv iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ha bi translated">现在我们有了一个支付客户端，我们想检查用户是否能够使用Google Pay API进行支付——否则我们在尝试访问API时可能会遇到错误。所以这里我们要确保Google Pay的按钮<strong class="ir hi">在Google Pay API准备好使用之前</strong>是不可见的。</p><p id="6b68" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们首先构建为我们的<strong class="ir hi"> isReadyToPay </strong>调用发送的请求。我们经过这里:</p><ul class=""><li id="e4b5" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated"><strong class="ir hi"> apiVersion </strong> —要使用的主要API版本(整数)</li><li id="5f4a" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi"> apiVersionMinor </strong> —要使用的API次要版本(整数)</li><li id="29d8" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi"> allowedPaymentMethods </strong> —声明客户端支持的支付方式的<a class="ae lw" href="https://developers.google.com/pay/api/android/reference/object#PaymentMethod" rel="noopener ugc nofollow" target="_blank"> PaymentMethod </a>实例的集合。</li></ul><figure class="kc kd ke kf fd ii"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="32f6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们还可以选择提供一个<strong class="ir hi">existingpaymentmethodrequestd</strong>(boolean)属性——将该属性设置为<strong class="ir hi"> true </strong>将导致<strong class="ir hi"> isReadyToPay() </strong>返回true，如果用户准备好使用至少一种指定的支付方式进行支付。</p><p id="fbf8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们已经构建了这些属性，我们可以继续将它们传递给我们的<strong class="ir hi"> isReadyToPay() </strong>调用:</p><figure class="kc kd ke kf fd ii"><div class="bz dy l di"><div class="lz ma l"/></div></figure></div><div class="ab cl kg kh go ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ha hb hc hd he"><h2 id="e5e2" class="kn ko hh bd kp kq kr ks kt ku kv kw kx ja ky kz la je lb lc ld ji le lf lg lh bi translated">设置网关配置</h2><p id="09a1" class="pw-post-body-paragraph ip iq hh ir b is li iu iv iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ha bi translated">接下来，我们需要设置相关的网关细节——这个网关将接收加密的用户信息来处理给定的事务。</p><ul class=""><li id="52c0" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated"><strong class="ir hi">网关</strong> —识别谷歌支持的网关</li><li id="13eb" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi"> gatewayMerchantId </strong> —将商家链接到给定网关的唯一Id</li></ul><p id="5d5e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">你会注意到下面我们将所有这些捆绑在一起(用PAYMENT_GATEWAY标识符标记)作为Google Pay API使用的<strong class="ir hi">tokenization specification</strong>参数。</p><figure class="kc kd ke kf fd ii"><div class="bz dy l di"><div class="lz ma l"/></div></figure></div><div class="ab cl kg kh go ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ha hb hc hd he"><h2 id="0f5f" class="kn ko hh bd kp kq kr ks kt ku kv kw kx ja ky kz la je lb lc ld ji le lf lg lh bi translated">准备交易信息</h2><p id="d2a5" class="pw-post-body-paragraph ip iq hh ir b is li iu iv iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ha bi translated">此时，我们需要定义将由Google Pay小部件呈现的交易数据。我们从<a class="ae lw" href="https://developers.google.com/pay/api/android/reference/object#TransactionInfo" rel="noopener ugc nofollow" target="_blank">交易信息</a>开始，其中包含如下详细信息:</p><ul class=""><li id="ab8a" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated"><strong class="ir hi">货币代码</strong> —交易使用的货币</li><li id="d5c3" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi">总价状态</strong> —总价的状态。这将是<strong class="ir hi">当前未知的</strong>、<strong class="ir hi">估计的</strong>(价格可能会根据运费或税费计算而变化)或<strong class="ir hi">最终的</strong>(价格永远不会从当前显示给用户的价格发生变化)</li><li id="d019" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi">总价</strong> —交易的总价</li><li id="0b58" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi"> checkoutOption </strong> —决定google pay sheet的checkout按钮中使用的行为和显示的文本。这可以是<strong class="ir hi">默认</strong>(标准行为，用户将需要确认交易细节)或<strong class="ir hi">完成_立即_购买</strong>(当总价格状态为最终时，用户将完成购买，无需进一步操作)。</li></ul><figure class="kc kd ke kf fd ii"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="b437" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然后，我们需要使用刚刚准备好的交易信息来构建支付请求。为此，我们构建了一个<a class="ae lw" href="https://developers.google.com/pay/api/android/reference/object#PaymentDataRequest" rel="noopener ugc nofollow" target="_blank"> PaymentDataRequest </a>实例，并填充所需的数据:</p><ul class=""><li id="4f35" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated"><strong class="ir hi"> apiVersion </strong> —要使用的主要API版本(整数)</li><li id="7bc4" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi"> apiVersionMinor </strong> —要使用的API次要版本(整数)</li><li id="fa01" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi">merchantInfo</strong>——以<a class="ae lw" href="https://developers.google.com/pay/api/android/reference/object#MerchantInfo" rel="noopener ugc nofollow" target="_blank"> MerchantInfo </a>类的形式出现的关于商家的信息</li><li id="9daf" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi">allowedPaymentMethods</strong>—声明客户端支持的支付方式的<a class="ae lw" href="https://developers.google.com/pay/api/android/reference/object#PaymentMethod" rel="noopener ugc nofollow" target="_blank"> PaymentMethod </a>实例的集合。</li><li id="d800" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi">transaction info</strong>——以<a class="ae lw" href="https://developers.google.com/pay/api/android/reference/object#TransactionInfo" rel="noopener ugc nofollow" target="_blank"> TransactionInfo </a>类的形式的交易信息</li><li id="e53d" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi"> emailRequired </strong> —说明完成交易是否需要电子邮件地址</li><li id="7380" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi">shipping address required</strong>—说明完成交易是否需要送货地址</li><li id="d94a" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated"><strong class="ir hi">shipping address parameters</strong>—<a class="ae lw" href="https://developers.google.com/pay/api/android/reference/object#ShippingAddressParameters" rel="noopener ugc nofollow" target="_blank">shipping address parameters</a>类形式的关于送货地址的信息</li></ul></div><div class="ab cl kg kh go ki" role="separator"><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl km"/><span class="kj bw bk kk kl"/></div><div class="ha hb hc hd he"><h2 id="42af" class="kn ko hh bd kp kq kr ks kt ku kv kw kx ja ky kz la je lb lc ld ji le lf lg lh bi translated">收听付款回拨</h2><p id="6c12" class="pw-post-body-paragraph ip iq hh ir b is li iu iv iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ha bi translated">现在付款请求已经发出，我们需要听结果。这个请求的结果通过<strong class="ir hi"> onActivityResult </strong>方法返回给调用源，resultCode最初与请求一起传递。</p><figure class="kc kd ke kf fd ii"><div class="bz dy l di"><div class="lz ma l"/></div></figure><p id="e9aa" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一旦我们从请求中获得数据，我们就可以利用来自Google Pay API的<a class="ae lw" href="https://developers.google.com/android/reference/com/google/android/gms/wallet/PaymentData" rel="noopener ugc nofollow" target="_blank"> PaymentData </a>类来解析intent的结果——返回这个<a class="ae lw" href="https://developers.google.com/android/reference/com/google/android/gms/wallet/PaymentData" rel="noopener ugc nofollow" target="_blank"> PaymentData </a>类的一个实例，它包含交易的账单信息。</p><p id="efa7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这里，这些数据然后被转换成JSON格式，以便可以传递到我们的支付处理器。此时，我们已经执行了所有必需的步骤，我们的交易准备完成。</p><h1 id="1c3a" class="mb ko hh bd kp mc md me kt mf mg mh kx mi mj mk la ml mm mn ld mo mp mq lg mr bi translated">结论</h1><p id="d388" class="pw-post-body-paragraph ip iq hh ir b is li iu iv iw lj iy iz ja lk jc jd je ll jg jh ji lm jk jl jm ha bi translated">希望从这篇快速的帖子中，你可以看到将Google Pay集成到你的Android应用程序中只需要很少的步骤。这样做可以让我们实现安全的简化体验，并给用户一种熟悉感。为什么不立即在您自己的Android应用程序中使用Google Pay呢？</p><div class="ms mt ez fb mu mv"><a href="https://twitter.com/hitherejoe" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab dw"><div class="mx ab my cl cj mz"><h2 class="bd hi fi z dy na ea eb nb ed ef hg bi translated">乔·伯奇(@hitherejoe) |推特</h2><div class="nc l"><h3 class="bd b fi z dy na ea eb nb ed ef dx translated">乔伯奇的最新推文(@hitherejoe)。Android Lead @Buffer。谷歌开发专家为@Android，@GooglePay &amp;…</h3></div><div class="nd l"><p class="bd b fp z dy na ea eb nb ed ef dx translated">twitter.com</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj in mv"/></div></div></a></div></div></div>    
</body>
</html>