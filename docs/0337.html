<html>
<head>
<title>Android on Chrome OS — Developer Toolbox</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Chrome操作系统上的Android开发者工具箱</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/android-on-chrome-os-developer-toolbox-36234b005e38?source=collection_archive---------7-----------------------#2018-03-16">https://medium.com/androiddevelopers/android-on-chrome-os-developer-toolbox-36234b005e38?source=collection_archive---------7-----------------------#2018-03-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="91bf" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">为Chrome OS优化你的应用程序的一个方便的代码片段工具箱！</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/39e8d40e389370d5bb51f7f62424f265.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gKtFb0wMy51vKrvM5Lz31g.png"/></div></div></figure><p id="2d05" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">自推出以来，Chromebooks已经打造了一个强大的身份，即轻便、易用、安全的基于浏览器的笔记本电脑。凭借运行Android的能力，一个庞大的应用生态系统和大量新功能现在可以在<a class="ae ke" href="https://www.chromium.org/chromium-os/chrome-os-systems-supporting-android-apps" rel="noopener ugc nofollow" target="_blank">支持的chrome book</a>上使用。虽然这对开发人员来说是个好消息，但它也带来了两个重要的考虑因素:</p><ol class=""><li id="f26b" class="kf kg hh jk b jl jm jo jp jr kh jv ki jz kj kd kk kl km kn bi translated">开发者对他们的用户和他们的品牌负有<strong class="jk hi">责任</strong>，让他们的应用在Chrome操作系统上运行良好。</li><li id="da31" class="kf kg hh jk b jl ko jo kp jr kq jv kr jz ks kd kk kl km kn bi translated">开发人员有一个<strong class="jk hi">机会</strong>来利用大尺寸屏幕、键盘/鼠标输入、手写笔功能和增强的处理能力，同时接触全新的教育、企业和家庭用户群体。</li></ol><p id="9ed8" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">在大多数情况下，Chrome操作系统的优化很容易，并在可用性和功能性方面为您的用户带来巨大回报。额外的好处是，确保你的应用程序可以正确处理键盘和鼠标输入，可以大大提高你的应用程序对那些难以使用典型智能手机界面的用户的易用性。</p><p id="a125" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">在这篇文章中，我给出了一些最常见的Chrome操作系统优化的简短代码片段，以使你的应用程序在Chrome操作系统上看起来很棒。在以后的帖子中，我将更详细地讨论这些优化，比如我在<a class="ae ke" rel="noopener" href="/google-developers/android-on-chrome-os-implementing-drag-drop-2cc2bdcdc621">上发表的实现拖放</a>的帖子。关于项目设置和为Chrome OS开发Android的更多信息可以在官方<a class="ae ke" href="https://developer.android.com/chrome-os/intro.html" rel="noopener ugc nofollow" target="_blank">为Chrome OS构建应用</a>文档中找到。</p><p id="5fe5" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">这篇文章对你有用吗？Chrome操作系统是否有我在这里遗漏的优化，或者您希望我更详细地介绍？请给我写信！</p><h1 id="4f12" class="kt ku hh bd kv kw kx ky kz la lb lc ld in le io lf iq lg ir lh it li iu lj lk bi translated">入门指南</h1><ul class=""><li id="1959" class="kf kg hh jk b jl ll jo lm jr ln jv lo jz lp kd lq kl km kn bi translated">在您的应用程序中将<a class="ae ke" href="https://developer.android.com/about/versions/oreo/android-8.0-migration.html" rel="noopener ugc nofollow" target="_blank"> android:targetSdkVersion设置为26 </a></li><li id="51d7" class="kf kg hh jk b jl ko jo kp jr kq jv kr jz ks kd lq kl km kn bi translated"><a class="ae ke" href="https://developer.android.com/topic/arc/index.html#setup" rel="noopener ugc nofollow" target="_blank">启动ADB并在Chromebook上运行</a>以便于测试</li><li id="cd69" class="kf kg hh jk b jl ko jo kp jr kq jv kr jz ks kd lq kl km kn bi translated">这里找到的所有代码都是在<a class="ae ke" href="https://www.apache.org/licenses/LICENSE-2.0" rel="noopener ugc nofollow" target="_blank"> Apache 2.0许可</a>下授权的。这里没有任何谷歌官方产品的一部分。</li><li id="2f3c" class="kf kg hh jk b jl ko jo kp jr kq jv kr jz ks kd lq kl km kn bi translated">开始了。</li></ul><h1 id="191a" class="kt ku hh bd kv kw kx ky kz la lb lc ld in le io lf iq lg ir lh it li iu lj lk bi translated">键盘输入</h1><h2 id="1efc" class="lr ku hh bd kv ls lt lu kz lv lw lx ld jr ly lz lf jv ma mb lh jz mc md lj me bi translated">输入键</h2><p id="7873" class="pw-post-body-paragraph ji jj hh jk b jl ll ii jn jo lm il jq jr mf jt ju jv mg jx jy jz mh kb kc kd ha bi translated">用户希望能够按下<strong class="jk hi"> Enter </strong>键来提交表单或发送消息。参见<a class="ae ke" href="https://developer.android.com/training/keyboard-input/commands.html" rel="noopener ugc nofollow" target="_blank">处理键盘动作</a>文档。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h2 id="7304" class="lr ku hh bd kv ls lt lu kz lv lw lx ld jr ly lz lf jv ma mb lh jz mc md lj me bi translated">箭头键和Tab键导航</h2><p id="555c" class="pw-post-body-paragraph ji jj hh jk b jl ll ii jn jo lm il jq jr mf jt ju jv mg jx jy jz mh kb kc kd ha bi translated">用户希望能够使用箭头键来导航菜单和UI元素。下面的简单代码将为适当的视图增加可导航性。参见<a class="ae ke" href="https://developer.android.com/reference/android/view/View.html#FocusHandling" rel="noopener ugc nofollow" target="_blank">焦点处理</a>文档。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="7461" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">默认的箭头键导航映射通常按预期工作。如果需要手动指定，请使用:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="86fe" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">对于Tab键，请使用:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h2 id="2efa" class="lr ku hh bd kv ls lt lu kz lv lw lx ld jr ly lz lf jv ma mb lh jz mc md lj me bi translated">更改选定项目的突出显示颜色</h2><p id="22da" class="pw-post-body-paragraph ji jj hh jk b jl ll ii jn jo lm il jq jr mf jt ju jv mg jx jy jz mh kb kc kd ha bi translated">在某些情况下，选定项目的高亮颜色在键盘导航期间可能不明显。在某些界面中，这可能会使键盘导航变得困难。解决这个问题的一个简单方法是改变应用主题中的<strong class="jk hi"> colorControlHighlight </strong>值。选择具有适当<a class="ae ke" href="https://developer.android.com/guide/topics/ui/accessibility/apps.html#color-contrast" rel="noopener ugc nofollow" target="_blank">对比度</a>的高亮颜色时，考虑<a class="ae ke" href="https://developer.android.com/guide/topics/ui/accessibility/index.html" rel="noopener ugc nofollow" target="_blank">可及性</a>。</p><p id="3d9d" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">在<strong class="jk hi"> AppTheme </strong>下的<strong class="jk hi"> res/values/styles.xml </strong>中</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="33b8" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">如果您正在使用ImageViews，您可能不希望在焦点对准时选择整个图像。通过使用一个选择器，你可以创建一个只在一个项目被选中时才出现的边框。</p><p id="b541" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">创建<strong class="jk hi">RES/drawable/box _ border . XML</strong></p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="3e0c" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">然后将这个drawable设置为视图的<strong class="jk hi"> BackgroundResource </strong></p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h2 id="3b1f" class="lr ku hh bd kv ls lt lu kz lv lw lx ld jr ly lz lf jv ma mb lh jz mc md lj me bi translated">基于Ctrl的快捷键</h2><p id="9512" class="pw-post-body-paragraph ji jj hh jk b jl ll ii jn jo lm il jq jr mf jt ju jv mg jx jy jz mh kb kc kd ha bi translated">笔记本电脑用户希望像Ctrl-z 这样常见的桌面快捷方式能够工作。参见<a class="ae ke" href="https://developer.android.com/reference/android/view/Window.Callback.html#dispatchKeyShortcutEvent(android.view.KeyEvent)" rel="noopener ugc nofollow" target="_blank">dispatchKeyShortcutEvent</a>文档。</p><p id="8224" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><strong class="jk hi">dispatchKeyShortcutEvent</strong>方法将适用于<strong class="jk hi"> Ctrl- </strong>命令，并且在Android O和更高版本上，也适用于<strong class="jk hi"> Alt- </strong>和<strong class="jk hi"> Shift- </strong>命令。用你需要的键码替换下面例子中的<strong class="jk hi">键码_Z </strong>。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="1548" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">如果你想专门针对一个<strong class="jk hi"> Ctrl- </strong>命令和<strong class="jk hi"> not </strong>包含<strong class="jk hi"> Shift- </strong>和<strong class="jk hi"> Alt- </strong>命令的同一个键，添加一个额外的<strong class="jk hi">元状态</strong>检查。参见<a class="ae ke" href="https://developer.android.com/reference/android/view/KeyEvent.html#hasModifiers(int)" rel="noopener ugc nofollow" target="_blank"> hasModifiers </a>文档。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="4594" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">那么一个<strong class="jk hi">元键</strong>组合呢？下面是一个<strong class="jk hi"> Ctrl-Shift-z </strong>命令的样子。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h1 id="b440" class="kt ku hh bd kv kw kx ky kz la lb lc ld in le io lf iq lg ir lh it li iu lj lk bi translated">鼠标/触摸板输入</h1><h2 id="eecc" class="lr ku hh bd kv ls lt lu kz lv lw lx ld jr ly lz lf jv ma mb lh jz mc md lj me bi translated">右键单击</h2><p id="d7fb" class="pw-post-body-paragraph ji jj hh jk b jl ll ii jn jo lm il jq jr mf jt ju jv mg jx jy jz mh kb kc kd ha bi translated">用户假设用鼠标右键单击<strong class="jk hi">和在触控板上双击<strong class="jk hi">会显示上下文菜单或其他上下文相关信息。在大多数情况下，最简单的方法是给适当的视图添加一个<a class="ae ke" href="https://developer.android.com/reference/android/view/ContextMenu.html" rel="noopener ugc nofollow" target="_blank">上下文菜单</a>。否则，您可以创建一个特定的<a class="ae ke" href="https://developer.android.com/reference/android/view/View.OnContextClickListener.html" rel="noopener ugc nofollow" target="_blank"> ContextClickListener </a>。</strong></strong></p><p id="9acb" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><strong class="jk hi">上下文菜单:</strong>参见<a class="ae ke" href="https://developer.android.com/guide/topics/ui/menus.html#context-menu" rel="noopener ugc nofollow" target="_blank">创建上下文菜单</a>文档。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="9f29" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><strong class="jk hi">上下文点击监听器:</strong>参见<a class="ae ke" href="https://developer.android.com/topic/arc/input-compatibility.html#right-click_support" rel="noopener ugc nofollow" target="_blank">右键支持</a>文档。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h2 id="b4b0" class="lr ku hh bd kv ls lt lu kz lv lw lx ld jr ly lz lf jv ma mb lh jz mc md lj me bi translated">工具提示/悬停文本</h2><p id="4461" class="pw-post-body-paragraph ji jj hh jk b jl ll ii jn jo lm il jq jr mf jt ju jv mg jx jy jz mh kb kc kd ha bi translated">在适当的地方添加<strong class="jk hi">工具提示</strong>来帮助用户理解你的UI是如何操作的。参见<a class="ae ke" href="https://developer.android.com/reference/android/support/v7/widget/TooltipCompat.html" rel="noopener ugc nofollow" target="_blank">工具提示兼容性</a>文档。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h2 id="563e" class="lr ku hh bd kv ls lt lu kz lv lw lx ld jr ly lz lf jv ma mb lh jz mc md lj me bi translated">悬停效果</h2><p id="d729" class="pw-post-body-paragraph ji jj hh jk b jl ll ii jn jo lm il jq jr mf jt ju jv mg jx jy jz mh kb kc kd ha bi translated">当定点设备悬停在某些视图上时，向这些视图添加<strong class="jk hi">视觉反馈</strong>效果会很有用。参见<a class="ae ke" href="https://developer.android.com/reference/android/view/View.OnHoverListener.html" rel="noopener ugc nofollow" target="_blank">视图。on over listener</a>和<a class="ae ke" href="https://developer.android.com/reference/android/view/MotionEvent.html" rel="noopener ugc nofollow" target="_blank">运动事件</a>文档。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h2 id="a294" class="lr ku hh bd kv ls lt lu kz lv lw lx ld jr ly lz lf jv ma mb lh jz mc md lj me bi translated">鼠标滚轮动作</h2><p id="cf35" class="pw-post-body-paragraph ji jj hh jk b jl ll ii jn jo lm il jq jr mf jt ju jv mg jx jy jz mh kb kc kd ha bi translated">在Chrome OS上，很多视图会自动实现鼠标<strong class="jk hi">滚轮</strong>动作。对于其他视图，尤其是自定义视图，您可能需要自己处理。参见<a class="ae ke" href="https://developer.android.com/reference/android/view/MotionEvent.html" rel="noopener ugc nofollow" target="_blank">运动事件</a>文档。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h2 id="d374" class="lr ku hh bd kv ls lt lu kz lv lw lx ld jr ly lz lf jv ma mb lh jz mc md lj me bi translated">拖放</h2><p id="8948" class="pw-post-body-paragraph ji jj hh jk b jl ll ii jn jo lm il jq jr mf jt ju jv mg jx jy jz mh kb kc kd ha bi translated">在桌面环境中，<strong class="jk hi">将</strong>项拖放到你的应用程序中，尤其是从Chrome OS的文件管理器中。下面的代码片段显示了接收文件的基本拖放目标实现。注意:Chrome OS文件URIs的MIME类型是<strong class="jk hi">application/x-arc-uri-list</strong>。</p><p id="e8cf" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">有关设置和实现拖放的另一半(拖动部分)的更多详细信息，请查看我在<a class="ae ke" rel="noopener" href="/google-developers/android-on-chrome-os-implementing-drag-drop-2cc2bdcdc621">实现拖放</a>上的帖子。另请参见官方的<a class="ae ke" href="https://developer.android.com/guide/topics/ui/drag-drop.html" rel="noopener ugc nofollow" target="_blank">拖放</a>文档。</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h1 id="bcdd" class="kt ku hh bd kv kw kx ky kz la lb lc ld in le io lf iq lg ir lh it li iu lj lk bi translated">窗口/显示器</h1><h2 id="e023" class="lr ku hh bd kv ls lt lu kz lv lw lx ld jr ly lz lf jv ma mb lh jz mc md lj me bi translated">维护体系结构组件的状态</h2><p id="617c" class="pw-post-body-paragraph ji jj hh jk b jl ll ii jn jo lm il jq jr mf jt ju jv mg jx jy jz mh kb kc kd ha bi translated">Android应用应该使用<a class="ae ke" href="https://developer.android.com/topic/libraries/architecture/index.html" rel="noopener ugc nofollow" target="_blank">架构组件</a>在方向和配置改变期间处理<strong class="jk hi">状态</strong>。这在Chrome操作系统上尤其重要，因为<strong class="jk hi">自由形式的窗口大小调整</strong>以及笔记本电脑和平板电脑模式之间的轻松切换。<a class="ae ke" href="https://developer.android.com/topic/libraries/architecture/viewmodel.html" rel="noopener ugc nofollow" target="_blank"> ViewModel </a>和<a class="ae ke" href="https://developer.android.com/topic/libraries/architecture/livedata.html" rel="noopener ugc nofollow" target="_blank"> LiveData </a>是健壮状态处理所需的主要组件。查看这篇博文，使用ViewModel和onSavedInstanceState 更深入地了解<a class="ae ke" rel="noopener" href="/google-developers/viewmodels-persistence-onsaveinstancestate-restoring-ui-state-and-loaders-fc7cc4a6c090">处理状态。</a></p><p id="3a86" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">下面的代码示例演示了如何存储和自动更新一个整数(按钮被点击的次数),但是同样的设置也可以用于复杂的数据结构、媒体控制器等等。</p><p id="4c51" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">首先扩展<a class="ae ke" href="https://developer.android.com/topic/libraries/architecture/viewmodel.html" rel="noopener ugc nofollow" target="_blank">视图模型</a>:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="ba4e" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">然后在<strong class="jk hi"> onCreate </strong>的主活动中:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h1 id="4885" class="kt ku hh bd kv kw kx ky kz la lb lc ld in le io lf iq lg ir lh it li iu lj lk bi translated">编码快乐！</h1><p id="3ea5" class="pw-post-body-paragraph ji jj hh jk b jl ll ii jn jo lm il jq jr mf jt ju jv mg jx jy jz mh kb kc kd ha bi translated">感谢阅读！期待今年有更多Android在Chrome OS上的具体帖子。如果这是有帮助的，或者如果你有一个很棒的Chrome操作系统实现，我很乐意听到它！</p><blockquote class="mk ml mm"><p id="57a3" class="ji jj mn jk b jl jm ii jn jo jp il jq mo js jt ju mp jw jx jy mq ka kb kc kd ha bi translated">这里找到的所有代码都是在<a class="ae ke" href="https://www.apache.org/licenses/LICENSE-2.0" rel="noopener ugc nofollow" target="_blank"> Apache 2.0许可证</a>下授权的。这里没有任何谷歌官方产品的一部分。</p></blockquote></div></div>    
</body>
</html>