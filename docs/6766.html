<html>
<head>
<title>Compare one array to another. Make filtration in Angular.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将一个数组与另一个数组进行比较。按角度进行过滤。</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/compare-one-array-to-another-make-filtration-in-angular-21dac021cc9f?source=collection_archive---------6-----------------------#2019-12-17">https://medium.com/quick-code/compare-one-array-to-another-make-filtration-in-angular-21dac021cc9f?source=collection_archive---------6-----------------------#2019-12-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><h2 id="ebfc" class="hf hg hh bd b fp hi hj hk hl hm hn dx ho translated" aria-label="kicker paragraph">角度形式验证器</h2><div class=""/><div class=""><h2 id="6157" class="pw-subtitle-paragraph in hq hh bd b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je dx translated">使用lodash进行数据过滤</h2></div><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jf"><img src="../Images/0ab0eeaf9e2af6529fc4b475aa9b1064.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C4zKttIzz8qin_aRXXnhHg.png"/></div></div></figure><p id="1ab5" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">现在几乎每个项目都有过滤。仅通过一个属性进行筛选可能很容易，但是如果您有一个选项数组，并且需要与另一个数组进行比较，该怎么办呢？可能会很艰难。</p><p id="4111" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">让我们从创作模型开始。我们需要两个模型，一个用于过滤器，另一个用于数据。</p><p id="f560" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">用户可以听和喜欢不同类型的电影和音乐，这些属性我们会过滤。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es kn"><img src="../Images/9a608848d5f3c022f17c03e5ae42d2e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*s4WNPp8UOO44CohnRpsLqw.png"/></div><figcaption class="ko kp et er es kq kr bd b be z dx">user.model.ts</figcaption></figure><p id="0e8b" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">过滤器模型只包含几个数组。我们将使用它来显示用户过滤器选项和存储选定的过滤器。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div class="er es ks"><img src="../Images/d92d1ec51d6acd9f0af0dfa20ca338d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*CdnYX3GhnmFUGqNCj2Aa5Q.png"/></div><figcaption class="ko kp et er es kq kr bd b be z dx">filter.model.ts</figcaption></figure><p id="293f" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">我们的UI会很简单。我们有几个用于过滤的多选下拉控件。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es et"><img src="../Images/2f4dfbfd17bec6789a27b980df75e079.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H4B52dtasJNpH3eaM5XdFg.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx">UI with filters</figcaption></figure><p id="6907" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">在angular cli中，我们需要键入“NPM install ng-multiselect-drop down ”, multiselect将安装在我们的项目中。然后我们需要将它导入到我们的模块中，并在html中使用它。</p><p id="d54a" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">在这里你可以找到更多关于这个<a class="ae kt" href="https://www.npmjs.com/package/ng-multiselect-dropdown" rel="noopener ugc nofollow" target="_blank">多选</a>的信息。</p><p id="53fb" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">我们的“filtering”类存储关于过滤器的信息，即我们绑定到组件的那些属性。此外，他有一个方法，检查是否有任何过滤器选择和过滤。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es ku"><img src="../Images/79dd93440e49e7aadc05f331956afd26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4Rbg2PSA3VqizA_sS17rLg.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx">filtration.service.ts</figcaption></figure><p id="8c44" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">在过滤器组件中，我们只设置下拉设置，生成数据和过滤器。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kv"><img src="../Images/b8724fc4f826167ae523334335e5b6b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EZtO0PbsvW5cXAjo4Bd9AA.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx">filter.component.ts</figcaption></figure><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kw"><img src="../Images/59b4e63cc740893720602db063f06de5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K2KAmAi2UnmE6xG206AyMQ.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx">Creation data in filter.component.ts</figcaption></figure><p id="da8b" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">在现实生活中，模型中的数组可能有两个主要属性“id”和“text ”,因为过滤器具有这两个属性。在我们的例子中，它们包含相同的文本。</p><p id="f088" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">在html中，我们显示过滤后的数据，并将下拉菜单绑定到过滤类。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kx"><img src="../Images/59bde239c777e3e8d2b360c34de3dbd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*e00ItWKQXowPEaPG9zkHkw.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx">filter.component.html</figcaption></figure><p id="8a6b" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">过滤将如何工作？有两种类型的过滤:“与”、“或”。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es ky"><img src="../Images/893233dfd91879bc970f0cdcd1824d71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wf0PxNAbZizYHmxnJzvMoA.png"/></div></div></figure><p id="3388" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">用户想知道哪个男人喜欢“摇滚”、“爵士”和“流行”音乐，还喜欢“喜剧”电影。</p><p id="ae83" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">首先，我们需要检查用户是否选择了任何过滤器。如果没有，就返回发送给我们的相同数组。如果是，请继续。</p><p id="4ff4" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">假设我们有一个10人的列表，我们需要找到所有给我们6个人的人。如果用户选择“和”过滤类型，我们需要过滤6个人，找到喜欢“摇滚”的人— 4个人，然后我们需要过滤4个人，找到喜欢“爵士”的人— 3个人，对“流行”做同样的事情，做最后的过滤，找到也喜欢“喜剧”的人— 2个人。</p><p id="ce75" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">如果用户选择“或”过滤类型，我们需要过滤6个人(按性别过滤的结果)，找到喜欢“摇滚”的人——4个人，然后过滤6个人找到喜欢“爵士”的人，并制作喜欢“摇滚”或“爵士”的人的唯一列表，然后找到喜欢“流行”的人，并制作喜欢“摇滚”或“爵士”或“流行”的人的唯一列表。在那之后做最后的筛选，在那份名单中找到也喜欢“喜剧”的人。</p><p id="47a5" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">为了实现，我们需要“lodash”库中的一些方法。这是一个非常强大的库，如果你不熟悉这个库，请仔细看看这个库。</p><p id="ee80" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">在angular cli中，我们需要键入“npm install -save lodash-es ”,这个库的小版本将安装在我们的项目中。</p><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es kz"><img src="../Images/15dec17ce4fabaa10a6d3825090459aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rjNTUL90xYe4LYFdWx49mQ.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx">Implementation</figcaption></figure><figure class="jg jh ji jj fd jk er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es la"><img src="../Images/ed0d43ac3c8d11c77b1172b3641b44b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2zUnzR8EvNn4iMxL_bdSew.png"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx">Filter type ‘or’ , ‘and’</figcaption></figure><p id="71b0" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">在“lodash”库中，我们使用了类似于“unionBy”(获取两个数组并通过“id”返回一个唯一项的数组)、“filter”、“some”(这是一个谓词，如果项包含在数组中，则返回true)和“intersectionBy”(获取两个数组并返回一个重复项的数组)的方法。</p><p id="3ff9" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated">如果你需要仔细查看项目<a class="ae kt" href="https://github.com/8Tesla8/tree-view-angular" rel="noopener ugc nofollow" target="_blank">，这里有</a><a class="ae kt" href="https://github.com/8Tesla8/angular-pipes" rel="noopener ugc nofollow" target="_blank"/><a class="ae kt" href="https://github.com/8Tesla8/angular-filtretion-" rel="noopener ugc nofollow" target="_blank">链接</a>。</p></div><div class="ab cl lb lc go ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ha hb hc hd he"><p id="dd20" class="pw-post-body-paragraph jr js hh jt b ju jv ir jw jx jy iu jz ka kb kc kd ke kf kg kh ki kj kk kl km ha bi translated"><em class="li">原载于2019年12月17日</em><a class="ae kt" href="https://tomorrowmeannever.wordpress.com/2019/12/17/compare-one-array-to-another-make-filtration-in-angular/" rel="noopener ugc nofollow" target="_blank"><em class="li">http://tomorrowmeannever.wordpress.com</em></a><em class="li">。</em></p></div></div>    
</body>
</html>