<html>
<head>
<title>Configure AWS Security Alerts with CloudWatch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用CloudWatch配置AWS安全警报</h1>
<blockquote>原文：<a href="https://medium.com/globant/configure-aws-security-alerts-with-cloudwatch-40bf5c7f3ec4?source=collection_archive---------0-----------------------#2021-08-31">https://medium.com/globant/configure-aws-security-alerts-with-cloudwatch-40bf5c7f3ec4?source=collection_archive---------0-----------------------#2021-08-31</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/f46f90b4d9acb4331398529dbfecdfdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WqZws4yfvyMt4-cdQ2F8hQ.png"/></div></div></figure><h1 id="cc17" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">介绍</h1><p id="c57f" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">亚马逊网络服务(AWS)是世界上最广泛采用的云平台，正如在任何云平台中一样，<strong class="jp hi">安全性</strong>必须是<strong class="jp hi">的主要优先事项之一</strong>。</p><p id="e044" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在这篇文章中，我们将看到<strong class="jp hi">如何使用CloudTrail和CloudWatch </strong>设置安全警报，以监控您帐户中发生的事情，并在您感兴趣的事件发生时收到电子邮件通知。</p><p id="6f04" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">我们将关注管理事件。</p><h1 id="99c6" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">在本文中，我们将看到以下主题:</h1><ol class=""><li id="65a5" class="kq kr hh jp b jq jr ju jv jy ks kc kt kg ku kk kv kw kx ky bi translated">工作流程图</li></ol><p id="d2a7" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">2.设置闹钟:一步一步来</p><p id="2a0f" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">a)使用CloudTrail创建踪迹</p><p id="05bf" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">b)创建社交网络主题</p><p id="ee58" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">c)使用基于度量过滤器的CloudWatch创建警报</p><p id="5438" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">c.1)如何创建指标过滤器</p><p id="1631" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">c.2)如何创建警报</p><p id="2114" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">3.重要警报示例</p><p id="82ac" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">4.结论</p><h1 id="f88e" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">工作流程图</h1><p id="5eeb" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">为了让这些警报工作，我们需要使用以下3种AWS服务:</p><ul class=""><li id="29f4" class="kq kr hh jp b jq kl ju km jy kz kc la kg lb kk lc kw kx ky bi translated"><strong class="jp hi"> CloudTrail </strong>:用于记录和保留与AWS基础设施上的操作相关的账户活动。</li><li id="0542" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated"><strong class="jp hi"> CloudWatch </strong>:允许你根据CloudTrail日志配置对你账户的监控。</li><li id="f644" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated"><strong class="jp hi">简单通知服务(SNS) </strong>:是一个完全托管的消息服务，用于应用程序对应用程序(A2A)和应用程序对个人(A2P)的通信。</li></ul><p id="1a70" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">一旦一切都设置好了，CloudTrail就会将你账户中发生的事件记录到你选择的路径中。</p><p id="a36d" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">然后，一个CloudWatch日志组将被分配给该trail(这就是CludWatch从CloudTrail获取信息的方式)。此类日志组将包含CloudWatch警报使用的自定义指标过滤器。</p><p id="7a97" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">每当检测到度量过滤器中配置的事件之一时，它将发出相应的警报，将其状态修改为“In Alarm”状态。该警报将触发对相应SNS主题的SNS通知。</p><figure class="lj lk ll lm fd ii er es paragraph-image"><div class="er es li"><img src="../Images/b9843503b4cee54b4ac44438b81d9cc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:836/0*AVcDc_OxrkIhU1oP"/></div></figure><h1 id="a015" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">设置闹钟:一步一步来</h1><h1 id="c858" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">使用CloudTrail创建踪迹</h1><p id="d9ee" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">跟踪允许您归档、分析和响应AWS资源中的变化。</p><p id="c13a" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">您可以从AWS管理控制台的<strong class="jp hi"> CloudTrail服务</strong>中创建一条踪迹:</p><ol class=""><li id="5293" class="kq kr hh jp b jq kl ju km jy kz kc la kg lb kk kv kw kx ky bi translated">在CloudTrail服务主页上，在Trails部分选择<strong class="jp hi"> Create trail </strong>。</li><li id="fae8" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">在“创建踪迹”页面上，为踪迹名称键入踪迹的名称。</li><li id="bfa6" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">对于存储位置，选择<strong class="jp hi">创建新的S3桶</strong>创建一个桶。当您创建一个bucket时，CloudTrail会创建并应用所需的bucket策略。</li><li id="ff19" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">对于日志文件SSE-KMS加密，如果要使用SSE-KMS而不是SSE-S3加密日志文件，请选择“启用”。默认为启用。如果您启用了SSE-KMS加密，请选择新的或现有的AWS KMS客户主密钥。在AWS KMS别名中，以别名/MyAliasName格式指定别名。关于这种加密的更多信息<a class="ae ln" href="https://docs.aws.amazon.com/AmazonS3/latest/userguide/UsingServerSideEncryption.html" rel="noopener ugc nofollow" target="_blank">点击这里</a>。</li><li id="ef2e" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">在附加设置中，您可以执行以下操作:</li></ol><ul class=""><li id="51b5" class="kq kr hh jp b jq kl ju km jy kz kc la kg lb kk lc kw kx ky bi translated">启用日志文件验证，将日志摘要传送到您的S3时段。</li><li id="0c0c" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">您可以使用摘要文件来验证您的日志文件在CloudTrail交付之后没有发生变化。</li></ul><p id="2eb7" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">6.通过选择在CloudWatch Logs中启用的<strong class="jp hi"/>，配置CloudTrail将日志文件发送到CloudWatch Logs:</p><ul class=""><li id="8200" class="kq kr hh jp b jq kl ju km jy kz kc la kg lb kk lc kw kx ky bi translated">选择New创建新的<strong class="jp hi">日志组</strong>，或选择Existing使用现有的日志组。</li><li id="a976" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">选择“新建”,为将日志发送到CloudWatch日志的权限创建新的IAM角色。选择现有，从下拉列表中选择现有的IAM角色。当您展开策略文档时，将显示新角色或现有角色的策略声明。</li></ul><p id="3cc4" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">7.将标记部分留空，然后单击下一步。</p><p id="5ff8" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">8.在选择日志事件页面上，选择<strong class="jp hi">管理事件</strong>，然后选择<strong class="jp hi">读写</strong>事件。单击下一步。</p><p id="3c5f" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">9.在<strong class="jp hi">审查和创建</strong>页面中，一旦您验证了所有内容，点击<strong class="jp hi">创建踪迹</strong>。</p><p id="7e34" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">此时，您将拥有一个与CloudWatch日志组相关的活动<strong class="jp hi">踪迹。</strong></p><p id="e5eb" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><em class="lo">*请注意，AWS自由层中仅包含一个管理事件线索。如果您想使用多条路径，将会产生额外费用。</em></p><h1 id="be07" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">创建SNS主题以发送通知</h1><p id="3975" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">亚马逊CloudWatch使用亚马逊SNS发送邮件。首先，创建并订阅一个SNS主题。当您创建CloudWatch警报时，您可以添加此SNS主题，以便在警报改变状态时发送电子邮件通知。</p><p id="55a9" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">创建社交网络话题</strong>:</p><ol class=""><li id="5f31" class="kq kr hh jp b jq kl ju km jy kz kc la kg lb kk kv kw kx ky bi translated">在<a class="ae ln" href="https://console.aws.amazon.com/sns/v3/home" rel="noopener ugc nofollow" target="_blank">https://console.aws.amazon.com/sns/v3/home</a>打开亚马逊<strong class="jp hi"> SNS控制台</strong></li><li id="7b21" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">在Amazon SNS仪表板上的常用操作下，选择<strong class="jp hi">创建主题</strong>。</li><li id="2e4a" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">在<strong class="jp hi">创建新主题</strong>对话框中，为<strong class="jp hi">主题名称</strong>输入主题名称(例如，安全-警报)。</li><li id="3529" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">选择<strong class="jp hi">创建主题</strong>。</li><li id="5338" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">为下一个任务复制主题ARN(例如，arn:AWS:SNS:us-east-1:111122223333:Security-Alerts)。</li></ol><p id="c003" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">订阅社交网络话题</strong></p><ol class=""><li id="3fd5" class="kq kr hh jp b jq kl ju km jy kz kc la kg lb kk kv kw kx ky bi translated">在亚马逊SNS控制台的导航窗格中，选择<strong class="jp hi">订阅</strong>，<strong class="jp hi">创建订阅</strong>。</li><li id="7baf" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">在“创建订阅”对话框中，为主题“ARN”粘贴您在上一任务中创建的主题“ARN”。</li><li id="841a" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">对于协议，选择电子邮件。</li><li id="8c89" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">对于端点，输入可用于接收通知的电子邮件地址，然后选择创建订阅。</li><li id="5448" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">从您的电子邮件应用程序中，打开来自AWS通知的邮件并确认您的订阅。您的网络浏览器显示来自Amazon SNS的确认响应。</li></ol><h1 id="36d9" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">使用基于度量过滤器的CloudWatch创建警报</h1><p id="fbe8" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">您可以使用度量过滤器来搜索和匹配事件日志中的术语、短语或值。当指标过滤器找到其中一个术语、短语或值时，您可以增加CloudWatch指标的值。</p><p id="544b" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">其工作原理如下:</p><ul class=""><li id="5951" class="kq kr hh jp b jq kl ju km jy kz kc la kg lb kk lc kw kx ky bi translated">在与您的踪迹相关的日志组中配置一个度量过滤器。</li><li id="1f33" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">如果发生了任何选定的事件，这个<strong class="jp hi">度量过滤器将每5分钟</strong>控制一次。如果有，<strong class="jp hi">度量将增加其值</strong>。</li><li id="16b2" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">最后，<strong class="jp hi">基于度量过滤器</strong>创建警报。每当度量过滤器增加其值时，警报将改变其状态，这将触发通知。</li></ul><h1 id="27e4" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">如何创建度量过滤器</h1><p id="fcad" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">要为日志组创建度量过滤器，请执行以下步骤:</p><ol class=""><li id="f8c7" class="kq kr hh jp b jq kl ju km jy kz kc la kg lb kk kv kw kx ky bi translated">打开云手表控制台。</li><li id="ddf5" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">在导航窗格中，选择<strong class="jp hi">日志组</strong>。</li><li id="78c5" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">选择日志组的名称。</li><li id="d89b" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">选择操作，<strong class="jp hi">创建度量过滤器</strong>。</li><li id="54ec" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">对于<strong class="jp hi">过滤模式</strong>，输入要使用的过滤模式。您可以在这里指定要监控的事件。在本文的最后，我将为您提供一些过滤模式，以便您可以设置一些关键的警报。</li><li id="544c" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">(可选)要测试您的过滤器模式，在<strong class="jp hi">测试模式</strong>下，输入一个或多个用于测试模式的记录事件。每个事件必须在一行内，因为换行符用于分隔<strong class="jp hi">日志事件消息</strong>框中的事件。</li><li id="052e" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">选择下一个的<strong class="jp hi">，然后输入过滤器的名称。</strong></li><li id="6ea5" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">在<strong class="jp hi">指标详细信息</strong>下，为<strong class="jp hi">指标名称空间</strong>输入将发布指标的CloudWatch名称空间的名称。如果该名称空间不存在，确保选择了<strong class="jp hi">创建新的</strong>。</li><li id="888c" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">对于<strong class="jp hi">指标名称</strong>，输入新指标的名称。</li><li id="b903" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">对于<strong class="jp hi">度量值</strong>，输入1。对于包含其中一个关键字的每个日志事件，度量值都增加1。</li><li id="a4a5" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">选择<strong class="jp hi">创建度量过滤器</strong>。</li></ol><h1 id="7696" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">如何创建警报</h1><p id="8dde" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">创建度量过滤器后，将打开您的踪迹的日志组的详细信息页面。按照以下步骤创建警报。</p><ol class=""><li id="8765" class="kq kr hh jp b jq kl ju km jy kz kc la kg lb kk kv kw kx ky bi translated">在<strong class="jp hi">度量过滤器</strong>选项卡上，找到您创建的度量过滤器。填写度量过滤器的复选框。在度量过滤器栏中，选择<strong class="jp hi">创建警报</strong>。</li><li id="00e6" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk kv kw kx ky bi translated">在“创建警报”页面的“指定度量和条件”中，输入以下内容:</li></ol><ul class=""><li id="5c13" class="kq kr hh jp b jq kl ju km jy kz kc la kg lb kk lc kw kx ky bi translated">对于图形，根据您在创建提醒时所做的其他设置，线条被设置为1。</li><li id="442a" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">对于<strong class="jp hi">度量名称</strong>，保留当前度量名称。</li><li id="37d0" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">对于统计，保留默认值Sum。</li><li id="042d" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">对于Period，保留默认值5分钟。</li><li id="c9d3" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">在条件中，为阈值类型选择静态。</li><li id="58ac" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">对于无论何时度量名称为，请选择大于/等于。</li><li id="dcae" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">输入1作为“阈值”。</li><li id="43a0" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">在附加配置中，在缺失数据处理中，选择<strong class="jp hi">将缺失数据视为良好</strong>。</li><li id="696a" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">选择下一步。</li></ul><p id="051b" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">3.在<strong class="jp hi">配置动作</strong>页面上，选择<strong class="jp hi">报警</strong>，表示当<strong class="jp hi">度量过滤器处于报警状态</strong>时采取动作。</p><ul class=""><li id="9d5b" class="kq kr hh jp b jq kl ju km jy kz kc la kg lb kk lc kw kx ky bi translated">要选择SNS主题，选择<strong class="jp hi">选择现有SNS主题</strong></li><li id="c000" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">选择您为此创建的主题</li><li id="2759" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated">跳过其他动作类型，选择<strong class="jp hi">下一个</strong>。</li></ul><p id="6992" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">4.在“添加名称和描述”页面上，输入警报的友好名称和描述。选择下一步。</p><p id="85f3" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">5.在“预览和创建”页面上，检查您的选择。选择编辑进行更改，或选择<strong class="jp hi">创建报警</strong>创建报警。</p><p id="a605" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">完成所有这些操作后，将设置您的警报，并且每当检测到您选择要监控的事件之一时，您都会收到一封电子邮件通知。</p><h1 id="21b0" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">重要警报示例</h1><p id="c59d" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">作为结束语，我将与您分享一些<strong class="jp hi">过滤模式来创建一些重要的警报</strong>:</p><h2 id="6bef" class="lp iq hh bd ir lq lr ls iv lt lu lv iz jy lw lx jd kc ly lz jh kg ma mb jl mc bi translated">Root帐户登录尝试</h2><p id="3182" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">Root帐户是一个高特权帐户，在第一次帐户配置后不应该使用它。这就是为什么知道有人试图使用它是很重要的。每当有人试图使用root帐户登录时，这个警报都会让您知道。</p><p id="cb87" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">报警</strong>:AWS _ Console _ Root _ log in _ Attempts</p><p id="2872" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">度量过滤器</strong>:awsconsolerootloginatempts</p><p id="b824" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">过滤模式</strong>:{ $ . user identity . type = " Root "&amp;&amp;$ . user identity . invoked by不存在&amp; &amp; $。eventType！= "AwsServiceEvent" }</p><p id="eeb7" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">描述</strong>:如果出现AWS控制台root登录尝试，则发出警报</p><h2 id="bd6b" class="lp iq hh bd ir lq lr ls iv lt lu lv iz jy lw lx jd kc ly lz jh kg ma mb jl mc bi translated">负载平衡器警报</h2><p id="4b2a" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">负载平衡器可以公开您的服务和基础设施，因此知道何时创建或删除负载平衡器非常重要。这个闹钟会让你了解最新的信息。</p><p id="6654" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">报警</strong>:创建或删除负载平衡器_报警</p><p id="c7f3" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">度量过滤器</strong>:CreateAndDeleteLoadBalancer</p><p id="5d62" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">过滤模式</strong> : { ($。event name = CreateLoadBalancer)| |($。eventName = DeleteLoadBalancer) }</p><p id="8abf" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">描述</strong>:创建或删除负载均衡器时发出警报。</p><h2 id="cefa" class="lp iq hh bd ir lq lr ls iv lt lu lv iz jy lw lx jd kc ly lz jh kg ma mb jl mc bi translated">IAM策略更改</h2><p id="bc35" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">通过修改IAM策略，用户可以获得更多的权限，这将是攻击者获得帐户访问权限后首先尝试的事情之一。当IAM策略发生变化时，此警报会让您知道。</p><p id="073d" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">告警</strong> : IAM_Policy_Changes</p><p id="7872" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">度量过滤器</strong> : IAMPolicyChanges</p><p id="4e7c" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">过滤模式</strong> : {($。event name = deletegroupolicy)| |($。event name = DeleteRolePolicy)| |($。event name = delete user policy)| |($。eventName=PutGroupPolicy)||($。eventName=PutRolePolicy)||($。eventName=PutUserPolicy)||($。eventName=CreatePolicy)||($。eventName=DeletePolicy)||($。event name = CreatePolicyVersion)| |($。event name = DeletePolicyVersion)| |($。event name = AttachRolePolicy)| |($。event name = DetachRolePolicy)| |($。event name = attach user policy)| |($。event name = DetachUserPolicy)| |($。event name = attachgroupolicy)| |($。event name = detachgroupolicy)}</p><p id="9c4d" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">描述</strong>:如果IAM策略发生变化，则发出警报</p><h2 id="2a46" class="lp iq hh bd ir lq lr ls iv lt lu lv iz jy lw lx jd kc ly lz jh kg ma mb jl mc bi translated">S3水桶政策的变化</h2><p id="3aeb" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">为了保护您的S3存储桶免受未经授权的访问，如果允许访问存储桶的S3策略发生变化，将会发出此警报。</p><p id="fe1c" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">报警</strong>:S3 _桶_政策-变化</p><p id="5a8f" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">度量过滤器</strong> : S3BucketPolicyChanges</p><p id="a2d0" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">过滤模式</strong> : { ($。&amp;事件来源= s3.amazonaws.com)&amp;(($。eventName = PutBucketAcl) || ($。eventName = PutBucketPolicy) || ($。eventName = PutBucketCors) || ($。event name = PutBucketLifecycle)| |($。event name = putbucket replication)| |($。event name = DeleteBucketPolicy)| |($。event name = DeleteBucketCors)| |($。event name = DeleteBucketLifecycle)| |($。event name = deletebucket replication))}</p><p id="e38c" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">描述</strong>:如果S3存储桶策略发生变化，则发出警报</p><h2 id="1c50" class="lp iq hh bd ir lq lr ls iv lt lu lv iz jy lw lx jd kc ly lz jh kg ma mb jl mc bi translated">VPC配置更改</h2><p id="e2dc" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">VPC允许您控制进出AWS资源的网络访问，因此您需要知道它们的配置是否发生了任何意外的变化。</p><p id="fce9" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">报警</strong>:VPC _配置-变更</p><p id="8d38" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">度量过滤器</strong> : VPCConfigurationChanges</p><p id="c84f" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">过滤模式</strong> : { ($。eventName = CreateVpc) || ($。eventName = DeleteVpc) || ($。event name = modifyvcattribute)| |($。event name = AcceptVpcPeeringConnection)| |($。event name = CreateVpcPeeringConnection)| |($。event name = DeleteVpcPeeringConnection)| |($。event name = RejectVpcPeeringConnection)| |($。event name = attachclassilinkvpc)| |($。event name = detachclassicklinkvpc)| |($。event name = disablevpcclasslink)| |($。event name = enablevpcclasslink)}</p><p id="325a" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">描述</strong>:如果VPC配置发生变化，则发出警报</p><h1 id="de4a" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">结论</h1><p id="c575" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">如您所见，您可以只使用AWS服务来监控您的AWS帐户，无需额外费用。您可以选择想要了解的事件，并在每次事件发生时收到电子邮件通知。这意味着如果你的账户发生问题，你可以迅速采取行动。</p><h1 id="91a2" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated"><strong class="ak">参考文献</strong></h1><ul class=""><li id="bbf8" class="kq kr hh jp b jq jr ju jv jy ks kc kt kg ku kk lc kw kx ky bi translated"><a class="ae ln" href="https://www.globant.com/studio/cybersecurity" rel="noopener ugc nofollow" target="_blank">全球网络安全工作室</a></li><li id="c081" class="kq kr hh jp b jq ld ju le jy lf kc lg kg lh kk lc kw kx ky bi translated"><a class="ae ln" href="https://docs.aws.amazon.com/awscloudtrail/latest/userguide/cloudwatch-alarms-for-cloudtrail.html#cloudwatch-alarms-for-cloudtrail-iam-policy-changes" rel="noopener ugc nofollow" target="_blank">创建警报的AWS示例</a></li></ul></div></div>    
</body>
</html>