<html>
<head>
<title>Mendix: Optimize runtime language translations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Mendix:优化运行时语言翻译</h1>
<blockquote>原文：<a href="https://medium.com/mendix/mendix-optimize-runtime-translations-ae6c7ec35dee?source=collection_archive---------0-----------------------#2020-07-04">https://medium.com/mendix/mendix-optimize-runtime-translations-ae6c7ec35dee?source=collection_archive---------0-----------------------#2020-07-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/a58f496bfa2f70941e49457882266dca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jyTah1cPdw35kcgoKJaKtQ.png"/></div></div></figure><div class=""/><blockquote class="jc jd je"><p id="d3c4" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">介绍</p></blockquote><p id="6d27" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">在这篇文章中，我将讨论运行时翻译，如何在Mendix(开箱即用)中进行默认翻译，它的缺陷和提高性能的替代解决方案。</p><p id="8685" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">在我们当前的产品中，我们必须支持多种语言，以满足国际化需求。目前我们支持15种语言。整个产品可以通过现成的Mendix翻译功能轻松翻译。</p><figure class="kh ki kj kk fq hw fe ff paragraph-image"><div class="fe ff kg"><img src="../Images/2c6a57a4741a66915960ede4acd2736c.png" data-original-src="https://miro.medium.com/v2/resize:fit:544/format:webp/1*6nqku3HVGJMnzEsrDXu5nQ.png"/></div><figcaption class="kl km fg fe ff kn ko bd b be z ek">IMAGE_1: Language list in our product</figcaption></figure><p id="25d4" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">然而，在我们的产品中，我们开发了允许用户添加动态内容的功能，这些内容决定了屏幕上必须呈现的内容。例如，用户可以配置他们的实例，从预定义列表中添加复选框项目的动态列表。同样，他们也可以添加下拉菜单。我们允许用户添加每种语言的这些项目的翻译值。这些值必须按照用户的语言设置显示，这就是全部的目的。</p><blockquote class="jc jd je"><p id="cc6e" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">Mendix开箱即用解决方案</p></blockquote><p id="e899" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">我们有一个叫做翻译的实体，它现在和语言联系在一起。</p><figure class="kh ki kj kk fq hw fe ff paragraph-image"><div class="fe ff kp"><img src="../Images/7743624ab4f66f6957f3be69a692eab9.png" data-original-src="https://miro.medium.com/v2/resize:fit:828/format:webp/1*Va3yXBMGr2cCbY8V4RbE-A.png"/></div><figcaption class="kl km fg fe ff kn ko bd b be z ek">IMAGE_2: Translation entity linked to language</figcaption></figure><p id="aa7e" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">然后，我们使用计算的属性，传递用户语言来获得用户语言的翻译。这是并发用户较少的小规模应用程序的救星。下面是我们用于计算属性的微流，它检索基于用户语言显示的适当翻译。</p><figure class="kh ki kj kk fq hw fe ff paragraph-image"><div class="fe ff kq"><img src="../Images/d0280164008b132978c731f4f2561d4d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1174/format:webp/1*Yw_tMy4gbrhEgm1qLXGixQ.png"/></div><figcaption class="kl km fg fe ff kn ko bd b be z ek">IMAGE_3: Retrieval of Translation provided language or retrieve default</figcaption></figure><blockquote class="jc jd je"><p id="b63a" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">开箱即用解决方案的问题</p></blockquote><p id="cd5d" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">实际的问题是，我们必须将翻译实体与几个其他实体链接起来，以便根据实体的类型检索翻译，同时降低查询的复杂性。尽管如此，它仍然是复杂的。当一个实体与另一个实体相关联时，将会创建一个依赖关系表。因此，任何检索都必须通过连接经过3个表，这使得整个检索变得复杂。此外，计算的属性总是在每次检索期间执行。所以，如果有数据库调用，这肯定会影响性能。</p><blockquote class="jc jd je"><p id="bd0a" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">替代解决方案</p></blockquote><p id="2115" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">凭借我的Java经验，我想到了一种替代方法来实现这一点。这不仅减少了这种需求的数据库调用，而且提高了性能。在Java中，我们有一个叫做ResourceBundle的东西，用于国际化。这也是Mendix翻译公司的工作方式。在model/i18n下的部署文件夹中查看Mendix翻译。</p><figure class="kh ki kj kk fq hw fe ff paragraph-image"><div class="fe ff kr"><img src="../Images/93a8945cf35907f902381c36b1ebd262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/format:webp/1*Kg38OR0Q89u7o54g-J7ffQ.png"/></div><figcaption class="kl km fg fe ff kn ko bd b be z ek">IMAGE_4: Mendix generated ResourceBundle’s</figcaption></figure><p id="4a87" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">我的解决方案是为定制翻译工具提供ResourceBundle，以解决这个问题，并将翻译检索的数据库调用减少到零，并提高性能。</p><blockquote class="jc jd je"><p id="f02c" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">创建资源捆绑包</p></blockquote><ul class=""><li id="94b8" class="ks kt if bd b ji jj jm jn kd ku ke kv kf kw kc kx ky kz la dt translated">我写了一个微流，收集系统中每种语言的所有翻译。将翻译列表和语言一起传递给定制的Java程序</li></ul><figure class="kh ki kj kk fq hw fe ff paragraph-image"><div class="fe ff lb"><img src="../Images/31fc0767ee2ec2638971d3c83b4df551.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*6HknZOB2fvagVUmnVpE4Gw.png"/></div></figure><ul class=""><li id="829a" class="ks kt if bd b ji jj jm jn kd ku ke kv kf kw kc kx ky kz la dt translated">这个Java程序将确保为该语言创建一个包含所有可能值的ResourceBundle。ResourceBundle使用键=值对方法。于是，我决定用钥匙当<someuniqueid-for-translation>。值= <translation for="" that="" language=""/></someuniqueid-for-translation></li></ul><figure class="kh ki kj kk fq hw fe ff paragraph-image"><div class="fe ff lc"><img src="../Images/41513acbfc64769ea9947387666a3f22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*llOYWTt4BC_GOZTkUt2yBg.png"/></div><figcaption class="kl km fg fe ff kn ko bd b be z ek">Custom generated ResourceBundle’s</figcaption></figure><ul class=""><li id="ff97" class="ks kt if bd b ji jj jm jn kd ku ke kv kf kw kc kx ky kz la dt translated">根据给定的键和语言，编写另一个Java程序从Resourcebundle文件中检索翻译值。根据IMAGE_3，在开箱即用的解决方案中，我们必须专门处理默认的翻译值逻辑。但是使用ResourceBundle方法，它已经被处理了。</li></ul><figure class="kh ki kj kk fq hw fe ff paragraph-image"><div class="fe ff ld"><img src="../Images/7f3f16e2012b86a51e3b725cca3ea89c.png" data-original-src="https://miro.medium.com/v2/resize:fit:714/format:webp/1*cxE3Tvp-o_0KNZ7ROZJQJw.png"/></div></figure><ul class=""><li id="60c0" class="ks kt if bd b ji jj jm jn kd ku ke kv kf kw kc kx ky kz la dt translated">注意:除了不涉及任何数据库调用或复杂的查询之外，这个检索逻辑仍然必须用计算属性来调用</li></ul><blockquote class="jc jd je"><p id="d0ef" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">使用此解决方案的优势</p></blockquote><ul class=""><li id="644b" class="ks kt if bd b ji jj jm jn kd ku ke kv kf kw kc kx ky kz la dt translated">没有数据库调用，检索翻译几乎为零</li><li id="7952" class="ks kt if bd b ji le jm lf kd lg ke lh kf li kc kx ky kz la dt translated">提高性能</li><li id="5ef5" class="ks kt if bd b ji le jm lf kd lg ke lh kf li kc kx ky kz la dt translated">ResourceBundles被缓存。因此，每次检索都不会进入文件系统</li></ul><blockquote class="jc jd je"><p id="363a" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">结论</p></blockquote><p id="dc79" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">希望这篇文章对那些想支持运行时翻译并遇到性能问题的人有所帮助。我故意避免在这里解释ResourceBundle，因为这是一个需要一些Java专业知识的技术主题。如果你想自己尝试一下，我在ResourceBundle下面提供了一些链接。</p><blockquote class="jc jd je"><p id="2557" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">参考</p></blockquote><div class="ht hu fm fo hv lj"><a href="https://www.javatpoint.com/ResourceBundle-class" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab ej"><div class="ll ab lm cl cj ln"><h2 class="bd ig fv z el lo eo ep lp er et ie dt translated">Java资源捆绑包类-Java point</h2><div class="lq l"><h3 class="bd b fv z el lo eo ep lp er et ek translated">ResourceBundle类用于国际化消息。换句话说，我们可以说它提供了一个…</h3></div><div class="lr l"><p class="bd b gc z el lo eo ep lp er et ek translated">www.javatpoint.com</p></div></div></div></a></div><div class="ht hu fm fo hv lj"><a href="https://www.baeldung.com/java-resourcebundle" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab ej"><div class="ll ab lm cl cj ln"><h2 class="bd ig fv z el lo eo ep lp er et ie dt translated">资源包指南| Baeldung</h2><div class="lq l"><h3 class="bd b fv z el lo eo ep lp er et ek translated">许多软件开发人员，在其职业生涯中，面临着开发多语言系统或…</h3></div><div class="lr l"><p class="bd b gc z el lo eo ep lp er et ek translated">www.baeldung.com</p></div></div><div class="ls l"><div class="lt l lu lv lw ls lx ib lj"/></div></div></a></div><div class="ht hu fm fo hv lj"><a href="https://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html" rel="noopener  ugc nofollow" target="_blank"><div class="lk ab ej"><div class="ll ab lm cl cj ln"><h2 class="bd ig fv z el lo eo ep lp er et ie dt translated">资源包(Java平台SE 7)</h2><div class="lq l"><h3 class="bd b fv z el lo eo ep lp er et ek translated">resource bundle public resource bundle()唯一的构造函数。(对于子类构造函数的调用，通常是隐式的。)…</h3></div><div class="lr l"><p class="bd b gc z el lo eo ep lp er et ek translated">docs.oracle.com</p></div></div></div></a></div></div></div>    
</body>
</html>