<html>
<head>
<title>Don’t let users down, embrace making Offline First apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">不要让用户失望，拥抱制作离线第一应用</h1>
<blockquote>原文：<a href="https://medium.com/mendix/mendix-offline-first-apps-fcc1f613b337?source=collection_archive---------6-----------------------#2020-03-16">https://medium.com/mendix/mendix-offline-first-apps-fcc1f613b337?source=collection_archive---------6-----------------------#2020-03-16</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/ae2be58e8abb5d57cc888190cfc5dfee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5hMP5im99Ie9wA98DewePg.png"/></div></div></figure><p id="7bdb" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">在一个万物始终互联的世界里，我们为什么想要<a class="ae jz" href="https://bit.ly/34KUW9y" rel="noopener ugc nofollow" target="_blank">离线应用</a>？在这个世界上，当WiFi、网络或4G连接丢失时，每个人都很恐慌，不知道该怎么办——无论连接状态如何，创建始终工作的应用程序变得更加重要。离线优先的方法是在设备上本地存储和处理数据，因此应用程序总是可以顺利工作，用户可以执行他们的任务。除了同步和更新之外，不需要任何连接。因此，它使一个人能够随时随地工作。</p><p id="ea5d" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">在这篇博客文章中，我们的Mendix专家和离线优先大师Marcel Groeneweg将详细介绍如何让您的离线优先应用程序获得成功。除此之外，Marcel将讨论他预计(或知道)Mendix 8在未来几个月将发布什么，以及这将如何实现Mendix中的离线优先功能。几个主题如同步问题、<a class="ae jz" href="https://bit.ly/3bn6zGA" rel="noopener ugc nofollow" target="_blank"> JavaScript动作</a>和<a class="ae jz" href="https://bit.ly/2xFi8Kv" rel="noopener ugc nofollow" target="_blank">纳米流</a>将被解释以及如何正确使用它们。除此之外，Marcel将分享他与几个客户一起使用离线优先功能的经验，并回顾他在Mendix World 2019期间与Danny Roest(Mendix产品经理)一起做的演示。</p><h1 id="c339" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">为什么离线优先应用？</h1><h2 id="d0a5" class="ky kb hu bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">连接受限或丢失</h2><p id="edff" class="pw-post-body-paragraph jc jd hu bd b je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju lq jw jx jy hn dt translated">当一个人走进电梯或停车场，这些地方的互联网是有限的，他们希望他们的应用程序继续工作。在拥挤的区域，连接可能会受到限制，但在这里，人们也希望他的应用程序能够保持平稳工作。在线应用的问题在于，一旦失去连接，应用就会中断。离线优先应用程序将继续工作，并尽可能与后端同步。该应用程序不保持开放的网络连接。页面和数据不需要从后端检索。这不仅有利于用户在任何地方工作，还可以防止每次操作后都与服务器同步。因此，这也是一个巨大的性能改进，即使在快速的Wi-Fi网络上，应用程序的响应时间也大大提高了。</p><h2 id="f958" class="ky kb hu bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">同步</h2><p id="6b6e" class="pw-post-body-paragraph jc jd hu bd b je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju lq jw jx jy hn dt translated">为了保持服务器日期与应用程序数据同步，离线应用程序将在互联网连接可用时同步所有相关数据。目前，有两个级别的同步，下面将对每个级别进行更详细的描述。</p><h2 id="a31a" class="ky kb hu bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">自动同步</h2><p id="2fa1" class="pw-post-body-paragraph jc jd hu bd b je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju lq jw jx jy hn dt translated">这是基本级别，也是Mendix 7的唯一选项。Mendix模型查看导航配置文件，并识别通过离线导航配置文件访问的页面上使用的实体。还考虑了使用检索活动在纳流中检索的数据。当然，实体访问规则决定了用户将在设备上拥有哪些数据。</p><h2 id="d0be" class="ky kb hu bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">可配置同步</h2><p id="54ff" class="pw-post-body-paragraph jc jd hu bd b je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju lq jw jx jy hn dt translated">通常情况下，应用程序用户被允许访问比设备所需更多的数据，例如，去年的销售订单。Mendix 8中一个令人兴奋的新选项是可以从modeler中非常容易地配置自定义同步选项，允许您限制存储在设备上的数据。请注意，实体访问规则仍然适用。同步可以通过导航配置文件进行配置。</p><p id="b103" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">对于那些希望同步的内容少于用户被授权的内容的实体，可以在实体上指定一个XPath约束。在本例中，我们只需要当前用户的帐户。已经在业务流程中“转移”并标记为仅在线的数据也不应再在设备上可用。</p><h2 id="3a31" class="ky kb hu bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">更多同步功能即将推出</h2><p id="2a48" class="pw-post-body-paragraph jc jd hu bd b je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju lq jw jx jy hn dt translated">除了指定XPath约束，还会有更多的同步特性:</p><p id="240d" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">调用一个微流，它不仅可以返回一个对象列表，还可以返回整个对象结构</p><p id="ebb7" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">在应用后端甚至其他系统上调用REST服务，这些功能将允许您处理更复杂的任务，举几个例子:</p><p id="42ba" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">o通过仅同步更改，在设备上维护主数据的同步副本</p><p id="f3b7" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">o仅在请求时更新主数据，同时尽可能同步交易</p><h1 id="9161" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">JavaScript操作</h1><p id="6207" class="pw-post-body-paragraph jc jd hu bd b je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju lq jw jx jy hn dt translated">从Mendix 8开始，您可以用与我们已经在微流中使用的Java动作相同的方式创建定制的<a class="ae jz" href="https://bit.ly/3bn6zGA" rel="noopener ugc nofollow" target="_blank"> JavaScript动作</a>。这打开了设备环境，以访问设备特征或超越当前纳流功能的限制进行工作。此外，我们需要定制小部件的操作现在可以通过nanoflow来完成，比如拍照或检查我们是否有连接。Mendix已经通过提供一系列JS动作做了很好的工作。我们甚至围绕这个主题举办了MVP JS动作黑客马拉松，这很棒，并且开发了许多新的JavaScript动作。</p><p id="b039" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated"><em class="lr">请注意，如果您使用原生移动快速入门应用程序创建您的应用程序，您将已经拥有这些JS操作。然而，这些模块经常更新，所以请留意它们</em></p><h1 id="b81e" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">纳流共享</h1><p id="fd47" class="pw-post-body-paragraph jc jd hu bd b je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju lq jw jx jy hn dt translated"><a class="ae jz" href="https://bit.ly/3ewRsMo" rel="noopener ugc nofollow" target="_blank"> Nanoflow Commons </a>包含了一个很棒的函数集合，可以让你的开发者生活更轻松，一些例子:</p><p id="e77f" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">显示来自纳流的确认对话框并等待结果</p><p id="b888" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">拨打电话号码</p><p id="af42" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">在设备上打开地图</p><p id="2293" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">获取当前位置</p><h2 id="e26e" class="ky kb hu bd kc kz la lb kg lc ld le kk jm lf lg ko jq lh li ks ju lj lk kw ll dt translated">本地移动操作</h2><p id="b5de" class="pw-post-body-paragraph jc jd hu bd b je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju lq jw jx jy hn dt translated"><a class="ae jz" href="https://bit.ly/2zbH90p" rel="noopener ugc nofollow" target="_blank">原生移动</a>动作进一步扩展了列表，增加了在原生移动应用中使用的动作。一些例子:</p><p id="aa99" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">从nanoflow拍摄照片或访问图片库。再也不需要自定义小部件了</p><p id="1343" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">检查网络连接</p><p id="562b" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">访问设备信息</p><p id="2086" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">各种通知功能</p><p id="1acf" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">在你的应用图标上设置徽章号码</p><h1 id="49a8" class="ka kb hu bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx dt translated">亚纳流呼叫</h1><p id="2b63" class="pw-post-body-paragraph jc jd hu bd b je lm jg jh ji ln jk jl jm lo jo jp jq lp js jt ju lq jw jx jy hn dt translated">终于！Mendix 7的主要负担之一是你不能重用纳流功能，调用亚纳流是不可能的。很多时候，这导致了大量的复制和巨大的纳米流。在Mendix 8中，可以将它们分成易于管理的块和可重用的功能</p><p id="af76" class="pw-post-body-paragraph jc jd hu bd b je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy hn dt translated">对Offline-First很好奇，想知道如何让它成功，点击下面的链接，查看完整的博文和图片(PDF)。</p><div class="ls lt fm fo lu lv"><a href="https://www.itvisors.nl/nl/nieuws/blog-offline-first/" rel="noopener  ugc nofollow" target="_blank"><div class="lw ab ej"><div class="lx ab ly cl cj lz"><h2 class="bd hv fv z el ma eo ep mb er et ht dt translated">博客:先离线</h2><div class="mc l"><h3 class="bd b fv z el ma eo ep mb er et ek translated">在一个一切都时刻相连的世界里，我们为什么要离线应用呢？在这个世界里，每个人…</h3></div><div class="md l"><p class="bd b gc z el ma eo ep mb er et ek translated">www.itvisors.nl</p></div></div><div class="me l"><div class="mf l mg mh mi me mj ja lv"/></div></div></a></div></div></div>    
</body>
</html>