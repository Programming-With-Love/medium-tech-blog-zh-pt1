<html>
<head>
<title>Chef: New open source IT cookbooks for macOS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">厨师:新的苹果开源IT食谱</h1>
<blockquote>原文：<a href="https://medium.com/pinterest-engineering/chef-new-open-source-it-cookbooks-for-macos-2fb2a23f9f7c?source=collection_archive---------3-----------------------#2017-07-12">https://medium.com/pinterest-engineering/chef-new-open-source-it-cookbooks-for-macos-2fb2a23f9f7c?source=collection_archive---------3-----------------------#2017-07-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="7a5a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Erik Gomez | Pinterest工程师，IT客户端平台</p><p id="cc51" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在过去的一年里，Pinterest IT已经从传统的设备管理框架转向了几乎完全开源的模式。我们团队的目标是尽可能减少用户障碍，同时为员工维护一个安全的平台。虽然我们已经用传统的MDM工具这样做了很多年，但这通常是有代价的。例如，花费在编写工具扩展上的工程时间增加了，纯粹出于需要，代码经常在多个部署中重复。通过围绕<a class="ae jc" href="https://www.chef.io/chef/" rel="noopener ugc nofollow" target="_blank"> Chef </a>重新设计我们的平台，我们标准化了我们的客户端管理设计，并为我们的IT员工和Pinterest员工获得了一些灵活性。过去数百行代码现在可以变成一行Ruby代码。在这里，我们将给出我们为什么做出这一改变的背景，并分享我们今天在<a class="ae jc" href="https://github.com/pinterest/it-cpe-cookbooks" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上发布的许多烹饪书。</p><h2 id="499b" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated"><strong class="ak">为什么是厨师？</strong></h2><p id="696d" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">当我们评估用于客户端设备的各种配置管理工具时，我们发现Chef满足了我们管理它们的要求。虽然Puppet非常适合管理服务器，但对macOS的支持却不多。苹果公司每年都会对他们的操作系统进行重大更新，但是我们需要一个考虑到客户端设备而定期改进的工具。对于Puppet，我们听到了许多故事，下一个操作系统花了几个月才得到正式支持。</p><p id="1758" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">包括脸书IT公司在内的其他公司都大力支持Chef。在查看了他们的代码库之后，我们决定采用他们的几本食谱作为我们macOS技术栈的基础。</p><h2 id="1b3d" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated"><strong class="ak">屏保示例</strong></h2><p id="acb7" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">很难解释迁移到这种模式的好处，但是总有一种完美的方式可以通过“屏幕保护程序的例子”来理解这些变化有多重要</p><p id="59c0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在Pinterest，我们要求所有公司设备都有一个屏保，一个空闲时间。当屏保启用时，我们<em class="kd">立即</em>要求授权。虽然这非常安全，但有时增加这种限制是有意义的。例如，用户可能有热角，并不时意外锁定他们的机器。通过允许在需要密码前几秒钟，他们仍然可以拥有一台安全的机器，但不需要为简单的事故重新授权。</p><p id="9af8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以前，这是不可能的。我们只有一种方法在全公司范围内强制实施这种设置，并且没有办法在每个用户的基础上轻松地增加它。通过使用Chef，用户可以编写一行代码来解决这个问题。</p><figure class="kf kg kh ki fd kj er es paragraph-image"><div role="button" tabindex="0" class="kk kl di km bf kn"><div class="er es ke"><img src="../Images/43f46241b721446ac2003ec654c5ee7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*C3-zJvIQnqalk_IP."/></div></div></figure><p id="5d92" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过提交代码<code class="du kq kr ks kt b"><em class="kd">node.default[‘cpe_screensaver’][‘askForPasswordDelay’] = 5</em></code>，它通知Chef收敛这个节点对象的所有值，从而覆盖<em class="kd"> 0 </em>的原始值。当Chef在客户机设备上运行时，它会识别登录到机器的用户，并将值更改为新的所需属性。</p><h2 id="0d6f" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated"><strong class="ak">苹果电脑的新食谱</strong></h2><p id="8d3c" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">Pinterest致力于开源，所以今天我们在<a class="ae jc" href="https://github.com/pinterest/it-cpe-cookbooks" rel="noopener ugc nofollow" target="_blank"> GitHub </a>上发布了基于客户端的厨师食谱库。虽然这些食谱主要关注macOS，但我们最终会添加其他操作系统。我们欢迎任何问题、反馈和请求。</p><p id="1442" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kd">鸣谢:感谢脸书IT开源了他们的许多厨师烹饪书。这大大降低了我们最初部署Chef的门槛。</em></p></div></div>    
</body>
</html>