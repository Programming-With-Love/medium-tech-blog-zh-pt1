<html>
<head>
<title>Deploying a Kubernetes cluster with Vagrant on Virtual Box | Gerald on IT on WordPress.com</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">åœ¨WordPress.comçš„è™šæ‹Ÿæœºç®±| Geraldä¸Šéƒ¨ç½²Kubernetesé›†ç¾¤</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/oracledevs/deploying-a-kubernetes-cluster-with-vagrant-on-virtual-box-gerald-on-it-on-wordpress-com-b87c53e97c16?source=collection_archive---------0-----------------------#2018-03-26">https://medium.com/oracledevs/deploying-a-kubernetes-cluster-with-vagrant-on-virtual-box-gerald-on-it-on-wordpress-com-b87c53e97c16?source=collection_archive---------0-----------------------#2018-03-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="3ec8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Oracleå·²ç»åŒ…å«äº†Kuberneteså¯¹å…¶<a class="ae jc" href="https://github.com/oracle/vagrant-boxes" rel="noopener ugc nofollow" target="_blank"> VirtualBoxæµæµªè€…GitHubåº“</a>çš„æ”¯æŒã€‚æœ‰äº†å®ƒï¼Œç°åœ¨åœ¨è™šæ‹Ÿæœºå†…å¯åŠ¨å’Œè¿è¡ŒKubernetesé›†ç¾¤æ¯”ä»¥å¾€ä»»ä½•æ—¶å€™éƒ½æ›´å®¹æ˜“ã€‚å¦‚æœä½ è¿˜æ²¡æœ‰é‡åˆ°è¿‡<a class="ae jc" href="https://www.vagrantup.com/" rel="noopener ugc nofollow" target="_blank">vagger</a>ï¼Œè¿™æ˜¯HashiCorpçš„ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œå¯ä»¥è®©<em class="jd">å¼€å‘ç¯å¢ƒå˜å¾—ç®€å•</em>ã€‚</p><h1 id="a615" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">TLï¼›åšå£«ï¼›åŒ»ç”Ÿ</h1><ol class=""><li id="3878" class="kc kd hh ig b ih ke il kf ip kg it kh ix ki jb kj kk kl km bi translated">å®‰è£…VirtualBox</li><li id="1e0c" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb kj kk kl km bi translated">å®‰è£…æµæµªè€…</li><li id="a8ca" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb kj kk kl km bi translated">å…‹éš†GitHubåº“gitå…‹éš†<a class="ae jc" href="https://github.com/oracle/vagrant-boxes" rel="noopener ugc nofollow" target="_blank">https://github.com/oracle/vagrant-boxes</a></li><li id="8e58" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb kj kk kl km bi translated">åˆ‡æ¢åˆ°<code class="du ks kt ku kv b">vagrant-boxes/Kubernetes</code>æ–‡ä»¶å¤¹</li><li id="2d93" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb kj kk kl km bi translated">è¿è¡Œ<code class="du ks kt ku kv b">vagrant up master; vagrant ssh master</code></li><li id="f50a" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb kj kk kl km bi translated">åœ¨ä¸»å®¢æˆ·æœºä¸­ï¼Œä»¥<code class="du ks kt ku kv b"><strong class="ig hi">root</strong></code> : <code class="du ks kt ku kv b">/vagrant/scripts/kubeadm-setup-master.sh</code> <br/>çš„èº«ä»½è¿è¡Œï¼Œæ‚¨å°†è¢«è¦æ±‚ç™»å½•åˆ°Oracleå®¹å™¨æ³¨å†Œè¡¨</li><li id="6bc3" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb kj kk kl km bi translated">è·‘<code class="du ks kt ku kv b">vagrant up worker1; vagrant ssh worker1</code></li><li id="d02f" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb kj kk kl km bi translated">åœ¨worker1 guestä¸­ï¼Œä½œä¸º<code class="du ks kt ku kv b"><strong class="ig hi">root</strong></code> : <code class="du ks kt ku kv b">/vagrant/scripts/kubeadm-setup-worker.sh</code> <br/>è¿è¡Œï¼Œæ‚¨å°†è¢«è¦æ±‚ç™»å½•åˆ°Oracleå®¹å™¨æ³¨å†Œä¸­å¿ƒ</li><li id="869c" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb kj kk kl km bi translated">å¯¹worker2é‡å¤æœ€å2ä¸ªæ­¥éª¤</li></ol><p id="1162" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">æ‚¨çš„é›†ç¾¤å·²ç»å‡†å¤‡å¥½äº†ï¼<br/>ä½œä¸º<code class="du ks kt ku kv b"><strong class="ig hi">vagrant</strong></code>ç”¨æˆ·ï¼Œæ‚¨å¯ä»¥åœ¨ä¸»è®¿å®¢ä¸­æ£€æŸ¥é›†ç¾¤çš„çŠ¶æ€ï¼Œä¾‹å¦‚:</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="faf2" class="le jf hh kv b fi lf lg l lh li">kubectl cluster-info</span><span id="7267" class="le jf hh kv b fi lj lg l lh li">kubectl get nodes</span><span id="55d2" class="le jf hh kv b fi lj lg l lh li">kubectl get pods --namespace=kube-system</span></pre></div><div class="ab cl lk ll go lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ha hb hc hd he"><h1 id="ff46" class="je jf hh bd jg jh lr jj jk jl ls jn jo jp lt jr js jt lu jv jw jx lv jz ka kb bi translated">ä½ éœ€è¦ä»€ä¹ˆ</h1><p id="49d0" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip lw ir is it lx iv iw ix ly iz ja jb ha bi translated">ä¸ºäº†å¼€å§‹ï¼Œä½ åªéœ€è¦å…ˆåšå››ä»¶äº‹:</p><h1 id="6fe0" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">è®¾ç½®</h1><p id="6ff4" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip lw ir is it lx iv iw ix ly iz ja jb ha bi translated">åœ¨ä½ çš„æœºå™¨ä¸Šå®‰è£…VirtualBoxå’Œvaggerï¼Œä¸ç®¡å®ƒæ˜¯Macã€Windowsè¿˜æ˜¯Linuxï¼Œéƒ½éå¸¸ç®€å•ã€‚å°±æˆ‘åœ¨Macä¸Šçš„æƒ…å†µè€Œè¨€ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„ä¸‹è½½å’Œå‡ æ¬¡ç‚¹å‡»ï¼Œæ‰€ä»¥æˆ‘ä¸æ‰“ç®—åœ¨è¿™é‡Œæ¶µç›–å®ƒã€‚</p><h1 id="440a" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">Oracleå®¹å™¨æ³¨å†Œä¸­å¿ƒ</h1><p id="bdda" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip lw ir is it lx iv iw ix ly iz ja jb ha bi translated">ä¾›åº”è„šæœ¬å°†ä»Oracleçš„ä¸€ä¸ªå®Œå…¨å…è´¹çš„Dockeræ˜ åƒå­˜å‚¨åº“<a class="ae jc" href="https://container-registry.oracle.com/" rel="noopener ugc nofollow" target="_blank">Oracle Container Registry</a>ä¸­æå–å‡ ä¸ªKubernetes Dockeræ˜ åƒã€‚ä¸ºæ­¤ï¼Œæ‚¨å¿…é¡»æ‹¥æœ‰ä¸€ä¸ªOracleå¸æˆ·æ¥ç™»å½•å®¹å™¨æ³¨å†Œä¸­å¿ƒå¹¶æ¥å—è®¸å¯åè®®ã€‚è¿™æ˜¯ä¸€ä¸ªå¿«é€Ÿçš„ä¸€æ¬¡æ€§ä»»åŠ¡ï¼Œå› ä¸ºå®¹å™¨æ³¨å†Œä¸­å¿ƒå°†åœ¨åç»­çš„æ‹‰å–ä¸­è®°ä½æ‚¨çš„è®¸å¯æ¥å—ã€‚å› æ­¤ï¼Œå¦‚æœæ‚¨ä¹‹å‰å·²ç»è¿™æ ·åšäº†ï¼Œæ‚¨å¯ä»¥ç›´æ¥è·³åˆ°<strong class="ig hi">åœ¨VirtualBoxä¸Šåˆ›å»ºKubernetesé›†ç¾¤</strong>ã€‚</p><h1 id="d92b" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">ä¸ºcontainer-registry.oracle.comåˆ›å»ºOracleå¸æˆ·</h1><p id="7cab" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip lw ir is it lx iv iw ix ly iz ja jb ha bi translated">å®¹å™¨æ³¨å†Œæ‰€éœ€çš„ç”¨æˆ·ä¸æ‚¨å¯èƒ½å·²ç»ç”¨äºOTNæˆ–å…¶ä»–Oracleç½‘ç«™çš„ç”¨æˆ·ç›¸åŒã€‚å¦‚æœæ‚¨å·²ç»æœ‰ä¸€ä¸ªï¼Œè¯·è·³è¿‡è¿™ä¸€æ­¥ï¼Œè½¬åˆ°â€œ<strong class="ig hi">æ¥å—æœ€ç»ˆç”¨æˆ·è®¸å¯åè®®</strong>â€ã€‚å¦åˆ™ï¼Œåˆ›å»ºä¸€ä¸ªç”¨æˆ·æ˜¯å¿«é€Ÿå’Œå®¹æ˜“çš„ã€‚åªéœ€è¿›å…¥https://container-registry.oracle.comçš„<a class="ae jc" href="https://container-registry.oracle.com/" rel="noopener ugc nofollow" target="_blank"/>ï¼Œç‚¹å‡»å³ä¸Šè§’çš„<strong class="ig hi">æ³¨å†Œ</strong>ï¼Œç‚¹å‡»<strong class="ig hi">åˆ›å»ºæ–°çš„ç”²éª¨æ–‡è´¦æˆ·</strong>:</p><figure class="kw kx ky kz fd ma er es paragraph-image"><div class="er es lz"><img src="../Images/93b4389f3a6ef4a2a93ad294bbea00dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*4EnmoKdUG6hETI9C."/></div></figure><p id="2741" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">åˆ›å»ºå¸æˆ·å¹¶ç™»å½•åï¼Œå°±è¯¥æ¥å—è®¸å¯åè®®äº†ã€‚</p><h1 id="97ec" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">æ¥å—æœ€ç»ˆç”¨æˆ·è®¸å¯åè®®</h1><p id="256c" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip lw ir is it lx iv iw ix ly iz ja jb ha bi translated">åŒæ ·ï¼Œè¿™ä¸€æ­¥ä¹Ÿæ˜¯ç®€å•è€Œç›´æ¥çš„ã€‚ä»æ³¨å†Œè¡¨ä¸­å–å‡ºçš„æ‰€æœ‰ç»„ä»¶éƒ½åœ¨â€œ<strong class="ig hi">å®¹å™¨æœåŠ¡</strong>ä¸‹:</p><figure class="kw kx ky kz fd ma er es paragraph-image"><div class="er es md"><img src="../Images/5c05bf71c820768d4b9924b7c1ec94eb.png" data-original-src="https://miro.medium.com/v2/resize:fit:438/0*HA_aP01P_1LYDwC1."/></div></figure><p id="a9d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">æ‚¨åªéœ€ç‚¹å‡»â€œContainer Services â€,å®ƒä¼šå‘Šè¯‰æ‚¨åœ¨ä»Oracle Container Registryä¸‹è½½ä¹‹å‰ï¼Œæ‚¨å¿…é¡»åŒæ„å¹¶æ¥å—Oracleæ ‡å‡†æ¡æ¬¾å’Œé™åˆ¶ã€‚è¯·ä»”ç»†é˜…è¯»ä¸‹é¡µçš„è®¸å¯åè®®ã€‚ â€:</p><figure class="kw kx ky kz fd ma er es paragraph-image"><div class="er es lz"><img src="../Images/b6115a187d20a760a97fe68ba42f8c80.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/0*jUAAcgvivAY7MqvM."/></div></figure><p id="bc45" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ç‚¹å‡»â€œ<strong class="ig hi">ç»§ç»­</strong>ï¼Œé€šè¯»åè®®å¹¶ç‚¹å‡»å³ä¸‹è§’çš„â€œ<strong class="ig hi">æ¥å—</strong>â€ï¼Œå½“ç„¶å‰ææ˜¯æ‚¨åŒæ„è®¸å¯æ¡æ¬¾ğŸ™‚</p><figure class="kw kx ky kz fd ma er es paragraph-image"><div role="button" tabindex="0" class="mf mg di mh bf mi"><div class="er es me"><img src="../Images/2296b8ae5d5a51e8c405a05c4f1ae483.png" data-original-src="https://miro.medium.com/v2/resize:fit:300/0*7FK8Wo2vh7BbCHK1."/></div></div></figure><p id="57dc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">å°±è¿™æ ·ï¼Œç°åœ¨æ‚¨å·²ç»å‡†å¤‡å¥½æ„å»ºæ‚¨çš„Kubernetesé›†ç¾¤äº†ã€‚è¯·å†æ¬¡è®°ä½ï¼Œè®¸å¯æ¥å—åªæ˜¯ä¸€æ¬¡æ€§æ­¥éª¤ã€‚æ— è®ºæ‚¨æ„å»ºæˆ–é‡å»ºKubernetesé›†ç¾¤çš„é¢‘ç‡æœ‰å¤šé«˜ï¼Œä»Šåæ‚¨éƒ½ä¸å¿…å†åŒæ„å®ƒäº†ã€‚</p><h1 id="351d" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">åœ¨VirtualBoxä¸Šåˆ›å»ºKubernetesé›†ç¾¤</h1><p id="695c" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip lw ir is it lx iv iw ix ly iz ja jb ha bi translated">åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªä¸€ä¸ªä¸»èŠ‚ç‚¹ã€ä¸¤ä¸ªå·¥ä½œèŠ‚ç‚¹çš„ç¾¤é›†ã€‚</p><h1 id="e8a3" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">å…‹éš†GitHubå­˜å‚¨åº“</h1><p id="247e" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip lw ir is it lx iv iw ix ly iz ja jb ha bi translated">é¦–å…ˆï¼Œä½ å¿…é¡»åœ¨ä½ çš„æœºå™¨ä¸Šæœ‰æµæµªè€…æ–‡ä»¶ã€‚è¿™å¯ä»¥é€šè¿‡<code class="du ks kt ku kv b">git clone <a class="ae jc" href="https://github.com/oracle/vagrant-boxes" rel="noopener ugc nofollow" target="_blank">https://github.com/oracle/vagrant-boxes</a></code>å…‹éš†GitHub repoæ¥å®Œæˆï¼Œä¹Ÿå¯ä»¥é€šè¿‡æµè§ˆå™¨ä¸­çš„<a class="ae jc" href="https://github.com/oracle/vagrant-boxes" rel="noopener ugc nofollow" target="_blank">â€œä¸‹è½½â€æŒ‰é’®ä¸‹è½½repoå¹¶è§£å‹:</a></p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="6ffe" class="le jf hh kv b fi lf lg l lh li">$ git clone https://github.com/oracle/vagrant-boxes</span><span id="19e4" class="le jf hh kv b fi lj lg l lh li">Cloning into 'vagrant-boxes'...</span><span id="bc90" class="le jf hh kv b fi lj lg l lh li">remote: Counting objects: 342, <strong class="kv hi">done</strong>.</span><span id="5e97" class="le jf hh kv b fi lj lg l lh li">remote: Compressing objects: 100% (58/58), <strong class="kv hi">done</strong>.</span><span id="3879" class="le jf hh kv b fi lj lg l lh li">remote: Total 342 (delta 42), reused 71 (delta 31), pack-reused 249</span><span id="0d9b" class="le jf hh kv b fi lj lg l lh li">Receiving objects: 100% (342/342), 69.52 KiB | 4.63 MiB/s, <strong class="kv hi">done</strong>.</span><span id="db7f" class="le jf hh kv b fi lj lg l lh li">Resolving deltas: 100% (170/170), <strong class="kv hi">done</strong>.</span></pre><p id="d9c5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">å®Œæˆåï¼Œè¿›å…¥Kubernetesæ–‡ä»¶å¤¹:</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="70dc" class="le jf hh kv b fi lf lg l lh li">$ cd vagrant-boxes/Kubernetes/</span></pre><h1 id="9def" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">åˆ›é€ Kuberneteså¤§å¸ˆ</h1><p id="9a66" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip lw ir is it lx iv iw ix ly iz ja jb ha bi translated">è¦åˆ›å»ºä¸»æ–‡ä»¶ï¼Œåªéœ€è¾“å…¥<code class="du ks kt ku kv b">vagrant up master</code>ã€‚è¿™å°†ä¸ºæ‚¨æä¾›å¸¦æœ‰Kubernetesä¸»æœåŠ¡å™¨çš„è™šæ‹Ÿæœº:</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="d8fb" class="le jf hh kv b fi lf lg l lh li">$ vagrant up master</span><span id="8577" class="le jf hh kv b fi lj lg l lh li">Bringing machine 'master'<!-- --> <!-- -->up with 'virtualbox'<!-- --> <!-- -->provider...</span><span id="79df" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Box 'ol7-latest'<!-- --> <!-- -->could not be found. Attempting to find<!-- --> <!-- -->and install...</span><span id="0436" class="le jf hh kv b fi lj lg l lh li">master: Box Provider: virtualbox</span><span id="a20e" class="le jf hh kv b fi lj lg l lh li">master: Box Version: &gt;= 0</span><span id="576c" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Box file<!-- --> <!-- -->was not detected as metadata. Adding it directly...</span><span id="451a" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Adding box 'ol7-latest'<!-- --> <!-- -->(v0) <strong class="kv hi">for</strong> <!-- -->provider: virtualbox</span><span id="3e6c" class="le jf hh kv b fi lj lg l lh li">master: Downloading: https://yum.oracle.com/boxes/oraclelinux/latest/ol7-latest.box</span><span id="1a8c" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Successfully added box 'ol7-latest'<!-- --> <!-- -->(v0) <strong class="kv hi">for</strong> <!-- -->'virtualbox'!</span><span id="cef5" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Importing base box 'ol7-latest'...</span><span id="d13a" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Matching MAC address <strong class="kv hi">for</strong> <!-- -->NAT networking...</span><span id="fdde" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Setting the name of the VM: Kubernetes_master_1521841817878_31194</span><span id="65f8" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Clearing any previously set<!-- --> <!-- -->network interfaces...</span><span id="3c42" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Preparing network interfaces based on configuration...</span><span id="8c75" class="le jf hh kv b fi lj lg l lh li">master: Adapter 1: nat</span><span id="735b" class="le jf hh kv b fi lj lg l lh li">master: Adapter 2: hostonly</span><span id="177f" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Forwarding ports...</span><span id="b7ce" class="le jf hh kv b fi lj lg l lh li">master: 8001 (guest) =&gt; 8001 (host) (adapter 1)</span><span id="cfae" class="le jf hh kv b fi lj lg l lh li">master: 22 (guest) =&gt; 2222 (host) (adapter 1)</span><span id="90bd" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Running 'pre-boot'<!-- --> <!-- -->VM customizations...</span><span id="9429" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Booting VM...</span><span id="d5e3" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Waiting <strong class="kv hi">for</strong> <!-- -->machine to boot. This may take a few minutes...</span><span id="325b" class="le jf hh kv b fi lj lg l lh li">master: SSH address: 127.0.0.1:2222</span><span id="30ca" class="le jf hh kv b fi lj lg l lh li">master: SSH username: vagrant</span><span id="faef" class="le jf hh kv b fi lj lg l lh li">master: SSH auth method: private key</span><span id="2c48" class="le jf hh kv b fi lj lg l lh li">master:</span><span id="a668" class="le jf hh kv b fi lj lg l lh li">master: Vagrant insecure key detected. Vagrant will automatically replace</span><span id="4e2c" class="le jf hh kv b fi lj lg l lh li">master: this with a newly generated keypair <strong class="kv hi">for</strong> <!-- -->better security.</span><span id="16c0" class="le jf hh kv b fi lj lg l lh li">master:</span><span id="8300" class="le jf hh kv b fi lj lg l lh li">master: Inserting generated public key within guest...</span><span id="be41" class="le jf hh kv b fi lj lg l lh li">master: Removing insecure key from the guest <strong class="kv hi">if</strong> <!-- -->it's present...</span><span id="9510" class="le jf hh kv b fi lj lg l lh li">master: Key inserted! Disconnecting and reconnecting using new SSH key...</span><span id="2637" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Machine booted and ready!</span><span id="7a59" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Checking <strong class="kv hi">for</strong> <!-- -->guest additions <strong class="kv hi">in</strong> <!-- -->VM...</span><span id="ba18" class="le jf hh kv b fi lj lg l lh li">master: The guest additions on this VM <strong class="kv hi">do</strong> <!-- -->not match the installed version of</span><span id="35b5" class="le jf hh kv b fi lj lg l lh li">master: VirtualBox! In most cases this is fine, but <strong class="kv hi">in</strong> <!-- -->rare cases it can</span><span id="17f7" class="le jf hh kv b fi lj lg l lh li">master: prevent things such as shared folders from working properly. If you see</span><span id="d468" class="le jf hh kv b fi lj lg l lh li">master: shared folder errors, please make<!-- --> <!-- -->sure the guest additions within the</span><span id="5ec7" class="le jf hh kv b fi lj lg l lh li">master: virtual machine match the version of VirtualBox you have installed on</span><span id="eead" class="le jf hh kv b fi lj lg l lh li">master: your host and reload your VM.</span><span id="3c02" class="le jf hh kv b fi lj lg l lh li">master:</span><span id="9e89" class="le jf hh kv b fi lj lg l lh li">master: Guest Additions Version: 5.1.24</span><span id="96a6" class="le jf hh kv b fi lj lg l lh li">master: VirtualBox Version: 5.2</span><span id="656c" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Setting hostname...</span><span id="a2a4" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Configuring and enabling network interfaces...</span><span id="8628" class="le jf hh kv b fi lj lg l lh li">master: SSH address: 127.0.0.1:2222</span><span id="31c8" class="le jf hh kv b fi lj lg l lh li">master: SSH username: vagrant</span><span id="1507" class="le jf hh kv b fi lj lg l lh li">master: SSH auth method: private key</span><span id="34a1" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Configuring proxy environment variables...</span><span id="f8a5" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Mounting shared folders...</span><span id="71e0" class="le jf hh kv b fi lj lg l lh li">master: /vagrant<!-- --> <!-- -->=&gt; /Users/gvenzl/Downloads/vagrant-boxes/Kubernetes</span><span id="b636" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Running provisioner: shell...</span><span id="ea32" class="le jf hh kv b fi lj lg l lh li">master: Running: /var/folders/5m/xnj65v6d4dx8vbkp_7dt_pyw0000gn/T/vagrant-shell20180323-6639-15ftx0.sh</span><span id="3b01" class="le jf hh kv b fi lj lg l lh li">master: Installing and configuring Docker Engine</span><span id="f3e0" class="le jf hh kv b fi lj lg l lh li">...</span><span id="f219" class="le jf hh kv b fi lj lg l lh li">...</span><span id="3b0e" class="le jf hh kv b fi lj lg l lh li">...</span><span id="bf5a" class="le jf hh kv b fi lj lg l lh li">master: Installed:</span><span id="c5d7" class="le jf hh kv b fi lj lg l lh li">master: kubeadm.x86_64 0:1.9.1-2.0.2.el7</span><span id="8069" class="le jf hh kv b fi lj lg l lh li">master:</span><span id="b762" class="le jf hh kv b fi lj lg l lh li">master: Dependency Installed:</span><span id="f2e5" class="le jf hh kv b fi lj lg l lh li">master: kubectl.x86_64 0:1.9.1-2.0.2.el7</span><span id="5b71" class="le jf hh kv b fi lj lg l lh li">master: kubelet.x86_64 0:1.9.1-2.0.2.el7</span><span id="d519" class="le jf hh kv b fi lj lg l lh li">master: kubernetes-cni.x86_64 0:0.6.0-2.0.1.el7</span><span id="d2db" class="le jf hh kv b fi lj lg l lh li">master: kubernetes-cni-plugins.x86_64 0:0.6.0-2.0.1.el7</span><span id="1ced" class="le jf hh kv b fi lj lg l lh li">master: socat.x86_64 0:1.7.3.2-2.el7</span><span id="7dfe" class="le jf hh kv b fi lj lg l lh li">master: Complete!</span><span id="5f1c" class="le jf hh kv b fi lj lg l lh li">master: net.bridge.bridge-nf-call-ip6tables = 1</span><span id="298d" class="le jf hh kv b fi lj lg l lh li">master: net.bridge.bridge-nf-call-iptables = 1</span><span id="dcb6" class="le jf hh kv b fi lj lg l lh li">master: Your Kubernetes VM is ready to use!</span><span id="f0a4" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Configuring proxy <strong class="kv hi">for</strong> <!-- -->Docker...</span><span id="7953" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Running provisioner: shell...</span><span id="3ae7" class="le jf hh kv b fi lj lg l lh li">master: Running: inline script</span><span id="a559" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Configuring proxy <strong class="kv hi">for</strong> <!-- -->Docker...</span><span id="6028" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Running provisioner: shell...</span><span id="c7db" class="le jf hh kv b fi lj lg l lh li">master: Running: inline script</span><span id="d58f" class="le jf hh kv b fi lj lg l lh li">==&gt; master: Configuring proxy <strong class="kv hi">for</strong> <!-- -->Docker...</span><span id="ac3c" class="le jf hh kv b fi lj lg l lh li">$</span></pre><p id="35f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ä¸€æ—¦ä¸»è™šæ‹Ÿæœºå¯åŠ¨ï¼Œsshè¿›å…¥è™šæ‹Ÿæœºå¹¶ä½œä¸º<code class="du ks kt ku kv b"><strong class="ig hi">root</strong></code>ç”¨æˆ·<code class="du ks kt ku kv b">/vagrant/scripts/kubeadm-setup-master.sh</code>è¿è¡Œã€‚è¿™å°†ä¸ºæ‚¨æä¾›Kubernetesä¸»æ³¨é‡Šã€‚<strong class="ig hi">è¯·æ³¨æ„ï¼Œè„šæœ¬ä¼šè¦æ±‚æ‚¨è¾“å…¥container-registry.oracle.comçš„ç”¨æˆ·åå’Œå¯†ç </strong>:</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="c84c" class="le jf hh kv b fi lf lg l lh li">$ vagrant ssh<!-- --> <!-- -->master</span><span id="f36e" class="le jf hh kv b fi lj lg l lh li">Welcome to Oracle Linux Server release 7.4 (GNU/Linux<!-- --> <!-- -->4.1.12-112.14.13.el7uek.x86_64)</span><span id="5665" class="le jf hh kv b fi lj lg l lh li">The Oracle Linux End-User License Agreement can be viewed here:</span><span id="273f" class="le jf hh kv b fi lj lg l lh li">* /usr/share/eula/eula.en_US</span><span id="2e82" class="le jf hh kv b fi lj lg l lh li">For additional packages, updates, documentation and community help, see:</span><span id="3dcf" class="le jf hh kv b fi lj lg l lh li">* http://yum.oracle.com/</span><span id="d75d" class="le jf hh kv b fi lj lg l lh li">[vagrant@master ~]$ su<!-- --> <!-- -->-</span><span id="4ac7" class="le jf hh kv b fi lj lg l lh li">[root@master ~]# /vagrant/scripts/kubeadm-setup-master.sh</span><span id="6714" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-master.sh: Login to container registry</span><span id="ce9a" class="le jf hh kv b fi lj lg l lh li">Username: gerald[dot]venzl[at]oracle[dot]com</span><span id="0d12" class="le jf hh kv b fi lj lg l lh li">Password:</span><span id="b6f7" class="le jf hh kv b fi lj lg l lh li">Login Succeeded</span><span id="c8c7" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-master.sh: Setup Master node</span><span id="9ce5" class="le jf hh kv b fi lj lg l lh li">Starting to initialize master node ...</span><span id="ad1d" class="le jf hh kv b fi lj lg l lh li">Checking <strong class="kv hi">if</strong> <!-- -->env<!-- --> <!-- -->is ready ...</span><span id="39f5" class="le jf hh kv b fi lj lg l lh li">Checking whether docker can pull busybox image ...</span><span id="e83f" class="le jf hh kv b fi lj lg l lh li">Checking access to container-registry.oracle.com/kubernetes<!-- --> <!-- -->...</span><span id="5fb5" class="le jf hh kv b fi lj lg l lh li">v1.9.1: Pulling from kubernetes/kube-proxy-amd64</span><span id="2497" class="le jf hh kv b fi lj lg l lh li">Digest: sha256:852fbdc6be8b357356c047bd9649e1c62f572c0e61a0526cd048c0d0dc675e4d</span><span id="4a9e" class="le jf hh kv b fi lj lg l lh li">Status: Image is up to date<!-- --> <strong class="kv hi">for</strong> <!-- -->container-registry.oracle.com/kubernetes/kube-proxy-amd64:v1.9.1</span><span id="cfce" class="le jf hh kv b fi lj lg l lh li">Checking whether docker can run container ...</span><span id="d9ea" class="le jf hh kv b fi lj lg l lh li">Checking iptables default rule ...</span><span id="8330" class="le jf hh kv b fi lj lg l lh li">Checking br_netfilter module ...</span><span id="9cb6" class="le jf hh kv b fi lj lg l lh li">Checking sysctl variables ...</span><span id="508c" class="le jf hh kv b fi lj lg l lh li">Enabling kubelet ...</span><span id="3916" class="le jf hh kv b fi lj lg l lh li">Created symlink<!-- --> <!-- -->from /etc/systemd/system/multi-user.target.wants/kubelet.service to /etc/systemd/system/kubelet.service.</span><span id="77b5" class="le jf hh kv b fi lj lg l lh li">Check successful, ready to run 'up'<!-- --> <!-- -->command<!-- --> <!-- -->...</span><span id="b5e5" class="le jf hh kv b fi lj lg l lh li">Waiting <strong class="kv hi">for</strong> <!-- -->kubeadm to setup master cluster...</span><span id="4066" class="le jf hh kv b fi lj lg l lh li">Please wait ...</span><span id="7710" class="le jf hh kv b fi lj lg l lh li">- - 75% completed</span><span id="2ab8" class="le jf hh kv b fi lj lg l lh li">Waiting <strong class="kv hi">for</strong> <!-- -->the control plane to become ready ...</span><span id="4e45" class="le jf hh kv b fi lj lg l lh li">...............</span><span id="2a4a" class="le jf hh kv b fi lj lg l lh li">100% completed</span><span id="0b6f" class="le jf hh kv b fi lj lg l lh li">clusterrole "flannel"<!-- --> <!-- -->created</span><span id="7158" class="le jf hh kv b fi lj lg l lh li">clusterrolebinding "flannel"<!-- --> <!-- -->created</span><span id="937e" class="le jf hh kv b fi lj lg l lh li">serviceaccount "flannel"<!-- --> <!-- -->created</span><span id="c567" class="le jf hh kv b fi lj lg l lh li">configmap "kube-flannel-cfg"<!-- --> <!-- -->created</span><span id="822f" class="le jf hh kv b fi lj lg l lh li">daemonset "kube-flannel-ds"<!-- --> <!-- -->created</span><span id="f86f" class="le jf hh kv b fi lj lg l lh li">Installing kubernetes-dashboard ...</span><span id="ff22" class="le jf hh kv b fi lj lg l lh li">Creating self-signed certificates</span><span id="5ac1" class="le jf hh kv b fi lj lg l lh li">Generating a 2048 bit RSA private key</span><span id="7d95" class="le jf hh kv b fi lj lg l lh li">..................................................+++</span><span id="81fc" class="le jf hh kv b fi lj lg l lh li">.......................+++</span><span id="c895" class="le jf hh kv b fi lj lg l lh li">writing new private key to 'dashboard.key'</span><span id="cc77" class="le jf hh kv b fi lj lg l lh li">-----</span><span id="58d5" class="le jf hh kv b fi lj lg l lh li">No value provided <strong class="kv hi">for</strong> <!-- -->Subject Attribute C, skipped</span><span id="8445" class="le jf hh kv b fi lj lg l lh li">No value provided <strong class="kv hi">for</strong> <!-- -->Subject Attribute ST, skipped</span><span id="2e32" class="le jf hh kv b fi lj lg l lh li">No value provided <strong class="kv hi">for</strong> <!-- -->Subject Attribute L, skipped</span><span id="58fd" class="le jf hh kv b fi lj lg l lh li">No value provided <strong class="kv hi">for</strong> <!-- -->Subject Attribute O, skipped</span><span id="6ee8" class="le jf hh kv b fi lj lg l lh li">No value provided <strong class="kv hi">for</strong> <!-- -->Subject Attribute OU, skipped</span><span id="a549" class="le jf hh kv b fi lj lg l lh li">Signature ok</span><span id="1a11" class="le jf hh kv b fi lj lg l lh li">subject=/CN=kubernetes-dashboard</span><span id="3d22" class="le jf hh kv b fi lj lg l lh li">Getting Private key</span><span id="ae67" class="le jf hh kv b fi lj lg l lh li">secret "kubernetes-dashboard-certs"<!-- --> <!-- -->created</span><span id="7549" class="le jf hh kv b fi lj lg l lh li">serviceaccount "kubernetes-dashboard"<!-- --> <!-- -->created</span><span id="0528" class="le jf hh kv b fi lj lg l lh li">role "kubernetes-dashboard-minimal"<!-- --> <!-- -->created</span><span id="eed8" class="le jf hh kv b fi lj lg l lh li">rolebinding "kubernetes-dashboard-minimal"<!-- --> <!-- -->created</span><span id="19aa" class="le jf hh kv b fi lj lg l lh li">deployment "kubernetes-dashboard"<!-- --> <!-- -->created</span><span id="57eb" class="le jf hh kv b fi lj lg l lh li">service "kubernetes-dashboard"<!-- --> <!-- -->created</span><span id="b4f2" class="le jf hh kv b fi lj lg l lh li">Enabling kubectl-proxy.service ...</span><span id="0d95" class="le jf hh kv b fi lj lg l lh li">Starting kubectl-proxy.service ...</span><span id="42d8" class="le jf hh kv b fi lj lg l lh li">[===&gt; PLEASE DO THE FOLLOWING STEPS BELOW: &lt;===]</span><span id="7188" class="le jf hh kv b fi lj lg l lh li">Your Kubernetes master has initialized successfully!</span><span id="2f38" class="le jf hh kv b fi lj lg l lh li">To start using your cluster, you need to run the following as a regular user:</span><span id="7136" class="le jf hh kv b fi lj lg l lh li">mkdir<!-- --> <!-- -->-p $HOME/.kube</span><span id="5c46" class="le jf hh kv b fi lj lg l lh li">sudo<!-- --> <!-- -->cp<!-- --> <!-- -->-i /etc/kubernetes/admin.conf $HOME/.kube/config</span><span id="880d" class="le jf hh kv b fi lj lg l lh li">sudo<!-- --> <!-- -->chown<!-- --> <!-- -->$(id<!-- --> <!-- -->-u):$(id<!-- --> <!-- -->-g) $HOME/.kube/config</span><span id="9cf7" class="le jf hh kv b fi lj lg l lh li">You can now join<!-- --> <!-- -->any number of machines by running the following on each node</span><span id="acee" class="le jf hh kv b fi lj lg l lh li">as root:</span><span id="8bd7" class="le jf hh kv b fi lj lg l lh li">kubeadm-setup.sh join<!-- --> <!-- -->--token ce109c.ae7671a693f813d9 192.168.99.100:6443 --discovery-token-ca-cert-hash<!-- --> <!-- -->sha256:861b4d11c037bae9069c8a22c47391b986ea95cab299534d9d0d7f6657eae4f1</span><span id="f4af" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-master.sh: Copying admin.conf <strong class="kv hi">for</strong> <!-- -->vagrant user</span><span id="8a24" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-master.sh: Copying admin.conf into host directory</span><span id="20d2" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-master.sh: Saving token <strong class="kv hi">for</strong> <!-- -->worker nodes</span><span id="6c47" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-master.sh: Master node ready, run</span><span id="e3e5" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-worker.sh</span><span id="df0c" class="le jf hh kv b fi lj lg l lh li">on the worker nodes</span><span id="a011" class="le jf hh kv b fi lj lg l lh li">[root@master ~]# exit</span><span id="70ec" class="le jf hh kv b fi lj lg l lh li">logout</span><span id="91fd" class="le jf hh kv b fi lj lg l lh li">[vagrant@master ~]$ exit</span><span id="5887" class="le jf hh kv b fi lj lg l lh li">logout</span><span id="16a2" class="le jf hh kv b fi lj lg l lh li">Connection to 127.0.0.1 closed.</span><span id="b73e" class="le jf hh kv b fi lj lg l lh li">$</span></pre><h1 id="3d6d" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">åˆ›å»ºKuberneteså·¥ä½œèŠ‚ç‚¹</h1><p id="bccd" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip lw ir is it lx iv iw ix ly iz ja jb ha bi translated">ä¸€æ—¦ä¸»èŠ‚ç‚¹å¯åŠ¨å¹¶è¿è¡Œï¼Œç°åœ¨å°±å¯ä»¥é…ç½®å·¥ä½œèŠ‚ç‚¹äº†ã€‚è¿™åŒæ ·å®¹æ˜“ã€‚è¦æä¾›ç¬¬ä¸€ä¸ªå·¥ä½œè€…èŠ‚ç‚¹ç±»å‹<code class="du ks kt ku kv b">vagrant up worker1</code>:</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="84e5" class="le jf hh kv b fi lf lg l lh li">$ vagrant up worker1</span><span id="c0ba" class="le jf hh kv b fi lj lg l lh li">Bringing machine 'worker1'<!-- --> <!-- -->up with 'virtualbox'<!-- --> <!-- -->provider...</span><span id="c46d" class="le jf hh kv b fi lj lg l lh li">==&gt; worker1: Importing base box 'ol7-latest'...</span><span id="aa02" class="le jf hh kv b fi lj lg l lh li">==&gt; worker1: Matching MAC address <strong class="kv hi">for</strong> <!-- -->NAT networking...</span><span id="0122" class="le jf hh kv b fi lj lg l lh li">==&gt; worker1: Setting the name of the VM: Kubernetes_worker1_1521842646941_61070</span><span id="73a1" class="le jf hh kv b fi lj lg l lh li">==&gt; worker1: Fixed port collision <strong class="kv hi">for</strong> <!-- -->22 =&gt; 2222. Now on port 2200.</span><span id="97d4" class="le jf hh kv b fi lj lg l lh li">==&gt; worker1: Clearing any previously set<!-- --> <!-- -->network interfaces...</span><span id="6b46" class="le jf hh kv b fi lj lg l lh li">==&gt; worker1: Preparing network interfaces based on configuration...</span><span id="ecd2" class="le jf hh kv b fi lj lg l lh li">worker1: Adapter 1: nat</span><span id="57c5" class="le jf hh kv b fi lj lg l lh li">worker1: Adapter 2: hostonly</span><span id="9f46" class="le jf hh kv b fi lj lg l lh li">==&gt; worker1: Forwarding ports...</span><span id="12bf" class="le jf hh kv b fi lj lg l lh li">worker1: 22 (guest) =&gt; 2200 (host) (adapter 1)</span><span id="e9f0" class="le jf hh kv b fi lj lg l lh li">==&gt; worker1: Running 'pre-boot'<!-- --> <!-- -->VM customizations...</span><span id="e4e4" class="le jf hh kv b fi lj lg l lh li">==&gt; worker1: Booting VM...</span><span id="96f7" class="le jf hh kv b fi lj lg l lh li">==&gt; worker1: Waiting <strong class="kv hi">for</strong> <!-- -->machine to boot. This may take a few minutes...</span><span id="9e06" class="le jf hh kv b fi lj lg l lh li">worker1: SSH address: 127.0.0.1:2200</span><span id="846d" class="le jf hh kv b fi lj lg l lh li">...</span><span id="eb54" class="le jf hh kv b fi lj lg l lh li">...</span><span id="19a5" class="le jf hh kv b fi lj lg l lh li">...</span><span id="fd02" class="le jf hh kv b fi lj lg l lh li">worker1: Installed:</span><span id="e728" class="le jf hh kv b fi lj lg l lh li">worker1: kubeadm.x86_64 0:1.9.1-2.0.2.el7</span><span id="6dad" class="le jf hh kv b fi lj lg l lh li">worker1:</span><span id="fa12" class="le jf hh kv b fi lj lg l lh li">worker1: Dependency Installed:</span><span id="c172" class="le jf hh kv b fi lj lg l lh li">worker1: kubectl.x86_64 0:1.9.1-2.0.2.el7</span><span id="fa61" class="le jf hh kv b fi lj lg l lh li">worker1: kubelet.x86_64 0:1.9.1-2.0.2.el7</span><span id="5cda" class="le jf hh kv b fi lj lg l lh li">worker1: kubernetes-cni.x86_64 0:0.6.0-2.0.1.el7</span><span id="cee7" class="le jf hh kv b fi lj lg l lh li">worker1: kubernetes-cni-plugins.x86_64 0:0.6.0-2.0.1.el7</span><span id="1838" class="le jf hh kv b fi lj lg l lh li">worker1: socat.x86_64 0:1.7.3.2-2.el7</span><span id="0fbc" class="le jf hh kv b fi lj lg l lh li">worker1: Complete!</span><span id="d6c6" class="le jf hh kv b fi lj lg l lh li">worker1: net.bridge.bridge-nf-call-ip6tables = 1</span><span id="819d" class="le jf hh kv b fi lj lg l lh li">worker1: net.bridge.bridge-nf-call-iptables = 1</span><span id="0dfc" class="le jf hh kv b fi lj lg l lh li">worker1: Your Kubernetes VM is ready to use!</span><span id="aedc" class="le jf hh kv b fi lj lg l lh li">==&gt; worker1: Configuring proxy <strong class="kv hi">for</strong> <!-- -->Docker...</span><span id="74e3" class="le jf hh kv b fi lj lg l lh li">$</span></pre><p id="ca15" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ä¸€æ—¦<code class="du ks kt ku kv b">worker1</code>è™šæ‹Ÿæœºå¯åŠ¨å¹¶è¿è¡Œï¼Œå†æ¬¡é€šè¿‡sshè¿›å…¥è™šæ‹Ÿæœºï¼Œå¹¶ä½œä¸º<code class="du ks kt ku kv b"><strong class="ig hi">root</strong></code>ç”¨æˆ·:<code class="du ks kt ku kv b">/vagrant/scripts/kubeadm-setup-worker.sh</code>è¿è¡Œã€‚æ‚¨å°†å†æ¬¡è¢«è¦æ±‚æä¾›container-registry.oracle.comçš„ç”¨æˆ·åå’Œå¯†ç :</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="9ea9" class="le jf hh kv b fi lf lg l lh li">$ vagrant ssh<!-- --> <!-- -->worker1</span><span id="4197" class="le jf hh kv b fi lj lg l lh li">Welcome to Oracle Linux Server release 7.4 (GNU/Linux<!-- --> <!-- -->4.1.12-112.14.13.el7uek.x86_64)</span><span id="b7b3" class="le jf hh kv b fi lj lg l lh li">The Oracle Linux End-User License Agreement can be viewed here:</span><span id="a310" class="le jf hh kv b fi lj lg l lh li">* /usr/share/eula/eula.en_US</span><span id="f327" class="le jf hh kv b fi lj lg l lh li">For additional packages, updates, documentation and community help, see:</span><span id="28d5" class="le jf hh kv b fi lj lg l lh li">* http://yum.oracle.com/</span><span id="8c76" class="le jf hh kv b fi lj lg l lh li">[vagrant@worker1 ~]$ su<!-- --> <!-- -->-</span><span id="3030" class="le jf hh kv b fi lj lg l lh li">[root@worker1 ~]# /vagrant/scripts/kubeadm-setup-worker.sh</span><span id="9980" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-worker.sh: Login to container registry</span><span id="6fda" class="le jf hh kv b fi lj lg l lh li">Username: gerald[dot]venzl[at]oracle[dot]com</span><span id="f4a0" class="le jf hh kv b fi lj lg l lh li">Password:</span><span id="87a0" class="le jf hh kv b fi lj lg l lh li">Login Succeeded</span><span id="1d95" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-worker.sh: Setup Worker node</span><span id="ba0b" class="le jf hh kv b fi lj lg l lh li">Starting to initialize worker node ...</span><span id="f60f" class="le jf hh kv b fi lj lg l lh li">Checking <strong class="kv hi">if</strong> <!-- -->env<!-- --> <!-- -->is ready ...</span><span id="cc0b" class="le jf hh kv b fi lj lg l lh li">Checking whether docker can pull busybox image ...</span><span id="0a4e" class="le jf hh kv b fi lj lg l lh li">Checking access to container-registry.oracle.com/kubernetes<!-- --> <!-- -->...</span><span id="82f0" class="le jf hh kv b fi lj lg l lh li">v1.9.1: Pulling from kubernetes/kube-proxy-amd64</span><span id="4693" class="le jf hh kv b fi lj lg l lh li">Digest: sha256:852fbdc6be8b357356c047bd9649e1c62f572c0e61a0526cd048c0d0dc675e4d</span><span id="3e23" class="le jf hh kv b fi lj lg l lh li">Status: Image is up to date<!-- --> <strong class="kv hi">for</strong> <!-- -->container-registry.oracle.com/kubernetes/kube-proxy-amd64:v1.9.1</span><span id="1e53" class="le jf hh kv b fi lj lg l lh li">Checking whether docker can run container ...</span><span id="b6e1" class="le jf hh kv b fi lj lg l lh li">Checking iptables default rule ...</span><span id="57ba" class="le jf hh kv b fi lj lg l lh li">Checking br_netfilter module ...</span><span id="6cba" class="le jf hh kv b fi lj lg l lh li">Checking sysctl variables ...</span><span id="02d1" class="le jf hh kv b fi lj lg l lh li">Enabling kubelet ...</span><span id="9654" class="le jf hh kv b fi lj lg l lh li">Created symlink<!-- --> <!-- -->from /etc/systemd/system/multi-user.target.wants/kubelet.service to /etc/systemd/system/kubelet.service.</span><span id="c392" class="le jf hh kv b fi lj lg l lh li">Check successful, ready to run 'join'<!-- --> <!-- -->command<!-- --> <!-- -->...</span><span id="5253" class="le jf hh kv b fi lj lg l lh li">[preflight] Running pre-flight checks.</span><span id="32c3" class="le jf hh kv b fi lj lg l lh li">[validation] WARNING: kubeadm doesn't fully support multiple API Servers yet</span><span id="0e9f" class="le jf hh kv b fi lj lg l lh li">[discovery] Trying to connect to API Server "192.168.99.100:6443"</span><span id="dad4" class="le jf hh kv b fi lj lg l lh li">[discovery] Trying to connect to API Server "192.168.99.100:6443"</span><span id="215a" class="le jf hh kv b fi lj lg l lh li">[discovery] Created cluster-info discovery client, requesting info from "<a class="ae jc" href="https://192.168.99.100:6443/" rel="noopener ugc nofollow" target="_blank">https://192.168.99.100:6443</a>"</span><span id="9add" class="le jf hh kv b fi lj lg l lh li">[discovery] Created cluster-info discovery client, requesting info from "<a class="ae jc" href="https://192.168.99.100:6443/" rel="noopener ugc nofollow" target="_blank">https://192.168.99.100:6443</a>"</span><span id="2f15" class="le jf hh kv b fi lj lg l lh li">[discovery] Requesting info from "<a class="ae jc" href="https://192.168.99.100:6443/" rel="noopener ugc nofollow" target="_blank">https://192.168.99.100:6443</a>"<!-- --> <!-- -->again to validate TLS against the pinned public key</span><span id="0ffe" class="le jf hh kv b fi lj lg l lh li">[discovery] Cluster info signature and contents are valid and TLS certificate validates against pinned roots, will use API Server "192.168.99.100:6443"</span><span id="8b7f" class="le jf hh kv b fi lj lg l lh li">[discovery] Successfully established connection with API Server "192.168.99.100:6443"</span><span id="a723" class="le jf hh kv b fi lj lg l lh li">[discovery] Requesting info from "<a class="ae jc" href="https://192.168.99.100:6443/" rel="noopener ugc nofollow" target="_blank">https://192.168.99.100:6443</a>"<!-- --> <!-- -->again to validate TLS against the pinned public key</span><span id="7f6f" class="le jf hh kv b fi lj lg l lh li">[discovery] Cluster info signature and contents are valid and TLS certificate validates against pinned roots, will use API Server "192.168.99.100:6443"</span><span id="055a" class="le jf hh kv b fi lj lg l lh li">[discovery] Successfully established connection with API Server "192.168.99.100:6443"</span><span id="61f6" class="le jf hh kv b fi lj lg l lh li">This node has joined the cluster:</span><span id="eb71" class="le jf hh kv b fi lj lg l lh li">* Certificate signing request was sent to master and a response</span><span id="6c1f" class="le jf hh kv b fi lj lg l lh li">was received.</span><span id="f9ec" class="le jf hh kv b fi lj lg l lh li">* The Kubelet was informed of the new secure connection details.</span><span id="5c5c" class="le jf hh kv b fi lj lg l lh li">Run 'kubectl get nodes'<!-- --> <!-- -->on the master to see this node join<!-- --> <!-- -->the cluster.</span><span id="a229" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-worker.sh: Worker node ready</span><span id="8ae2" class="le jf hh kv b fi lj lg l lh li">[root@worker1 ~]# exit</span><span id="086a" class="le jf hh kv b fi lj lg l lh li">logout</span><span id="662f" class="le jf hh kv b fi lj lg l lh li">[vagrant@worker1 ~]$ exit</span><span id="d4d5" class="le jf hh kv b fi lj lg l lh li">logout</span><span id="043a" class="le jf hh kv b fi lj lg l lh li">Connection to 127.0.0.1 closed.</span><span id="3231" class="le jf hh kv b fi lj lg l lh li">$</span></pre><p id="a418" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">è®¾ç½®å®Œæˆåï¼Œé€€å‡ºè™šæ‹Ÿæœºå¹¶æ‰§è¡Œ<code class="du ks kt ku kv b">worker2</code>çš„æ­¥éª¤:</p><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="820d" class="le jf hh kv b fi lf lg l lh li">$ vagrant up worker2</span><span id="79de" class="le jf hh kv b fi lj lg l lh li">Bringing machine 'worker2'<!-- --> <!-- -->up with 'virtualbox'<!-- --> <!-- -->provider...</span><span id="2a84" class="le jf hh kv b fi lj lg l lh li">==&gt; worker2: Importing base box 'ol7-latest'...</span><span id="8299" class="le jf hh kv b fi lj lg l lh li">==&gt; worker2: Matching MAC address <strong class="kv hi">for</strong> <!-- -->NAT networking...</span><span id="d2ca" class="le jf hh kv b fi lj lg l lh li">==&gt; worker2: Setting the name of the VM: Kubernetes_worker2_1521843186488_78983</span><span id="38c1" class="le jf hh kv b fi lj lg l lh li">==&gt; worker2: Fixed port collision <strong class="kv hi">for</strong> <!-- -->22 =&gt; 2222. Now on port 2201.</span><span id="cdf8" class="le jf hh kv b fi lj lg l lh li">==&gt; worker2: Clearing any previously set<!-- --> <!-- -->network interfaces...</span><span id="a1f9" class="le jf hh kv b fi lj lg l lh li">==&gt; worker2: Preparing network interfaces based on configuration...</span><span id="f7f0" class="le jf hh kv b fi lj lg l lh li">worker2: Adapter 1: nat</span><span id="ec1c" class="le jf hh kv b fi lj lg l lh li">worker2: Adapter 2: hostonly</span><span id="844c" class="le jf hh kv b fi lj lg l lh li">==&gt; worker2: Forwarding ports...</span><span id="43ca" class="le jf hh kv b fi lj lg l lh li">worker2: 22 (guest) =&gt; 2201 (host) (adapter 1)</span><span id="76b2" class="le jf hh kv b fi lj lg l lh li">==&gt; worker2: Running 'pre-boot'<!-- --> <!-- -->VM customizations...</span><span id="b868" class="le jf hh kv b fi lj lg l lh li">==&gt; worker2: Booting VM...</span><span id="04e6" class="le jf hh kv b fi lj lg l lh li">==&gt; worker2: Waiting <strong class="kv hi">for</strong> <!-- -->machine to boot. This may take a few minutes...</span><span id="6bda" class="le jf hh kv b fi lj lg l lh li">worker2: SSH address: 127.0.0.1:2201</span><span id="125f" class="le jf hh kv b fi lj lg l lh li">...</span><span id="32ba" class="le jf hh kv b fi lj lg l lh li">...</span><span id="4d8e" class="le jf hh kv b fi lj lg l lh li">...</span><span id="1274" class="le jf hh kv b fi lj lg l lh li">worker2: Installed:</span><span id="ef5b" class="le jf hh kv b fi lj lg l lh li">worker2: kubeadm.x86_64 0:1.9.1-2.0.2.el7</span><span id="fdce" class="le jf hh kv b fi lj lg l lh li">worker2:</span><span id="1cf8" class="le jf hh kv b fi lj lg l lh li">worker2: Dependency Installed:</span><span id="e9b9" class="le jf hh kv b fi lj lg l lh li">worker2: kubectl.x86_64 0:1.9.1-2.0.2.el7</span><span id="e019" class="le jf hh kv b fi lj lg l lh li">worker2: kubelet.x86_64 0:1.9.1-2.0.2.el7</span><span id="e736" class="le jf hh kv b fi lj lg l lh li">worker2: kubernetes-cni.x86_64 0:0.6.0-2.0.1.el7</span><span id="6686" class="le jf hh kv b fi lj lg l lh li">worker2: kubernetes-cni-plugins.x86_64 0:0.6.0-2.0.1.el7</span><span id="eac0" class="le jf hh kv b fi lj lg l lh li">worker2: socat.x86_64 0:1.7.3.2-2.el7</span><span id="e6ec" class="le jf hh kv b fi lj lg l lh li">worker2: Complete!</span><span id="d3da" class="le jf hh kv b fi lj lg l lh li">worker2: net.bridge.bridge-nf-call-ip6tables = 1</span><span id="be9d" class="le jf hh kv b fi lj lg l lh li">worker2: net.bridge.bridge-nf-call-iptables = 1</span><span id="76d3" class="le jf hh kv b fi lj lg l lh li">worker2: Your Kubernetes VM is ready to use!</span><span id="28b4" class="le jf hh kv b fi lj lg l lh li">==&gt; worker2: Configuring proxy <strong class="kv hi">for</strong> <!-- -->Docker...</span><span id="7f86" class="le jf hh kv b fi lj lg l lh li">$</span><span id="60a3" class="le jf hh kv b fi lj lg l lh li">$ vagrant ssh<!-- --> <!-- -->worker2</span><span id="caf9" class="le jf hh kv b fi lj lg l lh li">Welcome to Oracle Linux Server release 7.4 (GNU/Linux<!-- --> <!-- -->4.1.12-112.14.13.el7uek.x86_64)</span><span id="003f" class="le jf hh kv b fi lj lg l lh li">The Oracle Linux End-User License Agreement can be viewed here:</span><span id="8991" class="le jf hh kv b fi lj lg l lh li">* /usr/share/eula/eula.en_US</span><span id="eb00" class="le jf hh kv b fi lj lg l lh li">For additional packages, updates, documentation and community help, see:</span><span id="bdbe" class="le jf hh kv b fi lj lg l lh li">* http://yum.oracle.com/</span><span id="b76d" class="le jf hh kv b fi lj lg l lh li">[vagrant@worker2 ~]$ su<!-- --> <!-- -->-</span><span id="d113" class="le jf hh kv b fi lj lg l lh li">[root@worker2 ~]# /vagrant/scripts/kubeadm-setup-worker.sh</span><span id="b2dd" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-worker.sh: Login to container registry</span><span id="b696" class="le jf hh kv b fi lj lg l lh li">Username: gerald[dot]venzl[at]oracle[dot]com</span><span id="757c" class="le jf hh kv b fi lj lg l lh li">Password:</span><span id="3e9a" class="le jf hh kv b fi lj lg l lh li">Login Succeeded</span><span id="ab5c" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-worker.sh: Setup Worker node</span><span id="c9fb" class="le jf hh kv b fi lj lg l lh li">Starting to initialize worker node ...</span><span id="c939" class="le jf hh kv b fi lj lg l lh li">Checking <strong class="kv hi">if</strong> <!-- -->env<!-- --> <!-- -->is ready ...</span><span id="b732" class="le jf hh kv b fi lj lg l lh li">Checking whether docker can pull busybox image ...</span><span id="1767" class="le jf hh kv b fi lj lg l lh li">Checking access to container-registry.oracle.com/kubernetes<!-- --> <!-- -->...</span><span id="d4bd" class="le jf hh kv b fi lj lg l lh li">v1.9.1: Pulling from kubernetes/kube-proxy-amd64</span><span id="793f" class="le jf hh kv b fi lj lg l lh li">Digest: sha256:852fbdc6be8b357356c047bd9649e1c62f572c0e61a0526cd048c0d0dc675e4d</span><span id="d413" class="le jf hh kv b fi lj lg l lh li">Status: Image is up to date<!-- --> <strong class="kv hi">for</strong> <!-- -->container-registry.oracle.com/kubernetes/kube-proxy-amd64:v1.9.1</span><span id="821b" class="le jf hh kv b fi lj lg l lh li">Checking whether docker can run container ...</span><span id="9a7c" class="le jf hh kv b fi lj lg l lh li">Checking iptables default rule ...</span><span id="8710" class="le jf hh kv b fi lj lg l lh li">Checking br_netfilter module ...</span><span id="4a06" class="le jf hh kv b fi lj lg l lh li">Checking sysctl variables ...</span><span id="a587" class="le jf hh kv b fi lj lg l lh li">Enabling kubelet ...</span><span id="6026" class="le jf hh kv b fi lj lg l lh li">Created symlink<!-- --> <!-- -->from /etc/systemd/system/multi-user.target.wants/kubelet.service to /etc/systemd/system/kubelet.service.</span><span id="b2b4" class="le jf hh kv b fi lj lg l lh li">Check successful, ready to run 'join'<!-- --> <!-- -->command<!-- --> <!-- -->...</span><span id="e41a" class="le jf hh kv b fi lj lg l lh li">[preflight] Running pre-flight checks.</span><span id="589a" class="le jf hh kv b fi lj lg l lh li">[validation] WARNING: kubeadm doesn't fully support multiple API Servers yet</span><span id="484f" class="le jf hh kv b fi lj lg l lh li">[discovery] Trying to connect to API Server "192.168.99.100:6443"</span><span id="08f2" class="le jf hh kv b fi lj lg l lh li">[discovery] Created cluster-info discovery client, requesting info from "<a class="ae jc" href="https://192.168.99.100:6443/" rel="noopener ugc nofollow" target="_blank">https://192.168.99.100:6443</a>"</span><span id="d5ab" class="le jf hh kv b fi lj lg l lh li">[discovery] Trying to connect to API Server "192.168.99.100:6443"</span><span id="af76" class="le jf hh kv b fi lj lg l lh li">[discovery] Created cluster-info discovery client, requesting info from "<a class="ae jc" href="https://192.168.99.100:6443/" rel="noopener ugc nofollow" target="_blank">https://192.168.99.100:6443</a>"</span><span id="ad3a" class="le jf hh kv b fi lj lg l lh li">[discovery] Requesting info from "<a class="ae jc" href="https://192.168.99.100:6443/" rel="noopener ugc nofollow" target="_blank">https://192.168.99.100:6443</a>"<!-- --> <!-- -->again to validate TLS against the pinned public key</span><span id="27b9" class="le jf hh kv b fi lj lg l lh li">[discovery] Cluster info signature and contents are valid and TLS certificate validates against pinned roots, will use API Server "192.168.99.100:6443"</span><span id="1b64" class="le jf hh kv b fi lj lg l lh li">[discovery] Successfully established connection with API Server "192.168.99.100:6443"</span><span id="4da5" class="le jf hh kv b fi lj lg l lh li">[discovery] Requesting info from "<a class="ae jc" href="https://192.168.99.100:6443/" rel="noopener ugc nofollow" target="_blank">https://192.168.99.100:6443</a>"<!-- --> <!-- -->again to validate TLS against the pinned public key</span><span id="f7b2" class="le jf hh kv b fi lj lg l lh li">[discovery] Cluster info signature and contents are valid and TLS certificate validates against pinned roots, will use API Server "192.168.99.100:6443"</span><span id="855e" class="le jf hh kv b fi lj lg l lh li">[discovery] Successfully established connection with API Server "192.168.99.100:6443"</span><span id="2dd0" class="le jf hh kv b fi lj lg l lh li">This node has joined the cluster:</span><span id="bbcd" class="le jf hh kv b fi lj lg l lh li">* Certificate signing request was sent to master and a response</span><span id="4bbb" class="le jf hh kv b fi lj lg l lh li">was received.</span><span id="8ee8" class="le jf hh kv b fi lj lg l lh li">* The Kubelet was informed of the new secure connection details.</span><span id="b9e9" class="le jf hh kv b fi lj lg l lh li">Run 'kubectl get nodes'<!-- --> <!-- -->on the master to see this node join<!-- --> <!-- -->the cluster.</span><span id="6f27" class="le jf hh kv b fi lj lg l lh li">/vagrant/scripts/kubeadm-setup-worker.sh: Worker node ready</span><span id="c0d0" class="le jf hh kv b fi lj lg l lh li">[root@worker2 ~]# exit</span><span id="9e8c" class="le jf hh kv b fi lj lg l lh li">logout</span><span id="d59d" class="le jf hh kv b fi lj lg l lh li">[vagrant@worker2 ~]$ exit</span><span id="f181" class="le jf hh kv b fi lj lg l lh li">logout</span><span id="964d" class="le jf hh kv b fi lj lg l lh li">Connection to 127.0.0.1 closed.</span><span id="1ad6" class="le jf hh kv b fi lj lg l lh li">$</span></pre><h1 id="9ac1" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">éªŒè¯Kubernetesé›†ç¾¤</h1><p id="d527" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip lw ir is it lx iv iw ix ly iz ja jb ha bi translated">ä¸€æ—¦<code class="du ks kt ku kv b">worker1</code>å’Œ<code class="du ks kt ku kv b">worker2</code>è™šæ‹Ÿæœºå¯åŠ¨å¹¶è¿è¡Œï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹å·¥ä½œäº†ï¼æ‚¨å¯ä»¥é€šè¿‡sshè¿æ¥åˆ°ä¸»èŠ‚ç‚¹å¹¶ä½¿ç”¨ä»¥ä¸‹ä¸€ä¸ªæˆ–å¤šä¸ªå‘½ä»¤æ¥éªŒè¯é›†ç¾¤ã€‚<strong class="ig hi">æ³¨æ„:</strong>è®¾ç½®å®Œæˆåï¼Œè¿™äº›å‘½ä»¤å¿…é¡»ä½œä¸º<code class="du ks kt ku kv b"><strong class="ig hi">vagrant</strong></code>ç”¨æˆ·æ‰§è¡Œï¼Œè¯¥ç”¨æˆ·æ˜¯Kubernetesè®¾å¤‡çš„æ‰€æœ‰è€…:</p><ul class=""><li id="667d" class="kc kd hh ig b ih ii il im ip mj it mk ix ml jb mm kk kl km bi translated">kubectlé›†ç¾¤ä¿¡æ¯</li><li id="a379" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb mm kk kl km bi translated">kubectlè·å–èŠ‚ç‚¹</li><li id="2de4" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb mm kk kl km bi translated">kubectl get podsâ€“namespace = kube-system</li></ul><pre class="kw kx ky kz fd la kv lb lc aw ld bi"><span id="abbc" class="le jf hh kv b fi lf lg l lh li">$ vagrant ssh<!-- --> <!-- -->master</span><span id="1dc2" class="le jf hh kv b fi lj lg l lh li">Last login: Fri Mar 23 21:53:41 2018 from 10.0.2.2</span><span id="a2a9" class="le jf hh kv b fi lj lg l lh li">Welcome to Oracle Linux Server release 7.4 (GNU/Linux<!-- --> <!-- -->4.1.12-112.14.13.el7uek.x86_64)</span><span id="4d3e" class="le jf hh kv b fi lj lg l lh li">The Oracle Linux End-User License Agreement can be viewed here:</span><span id="eebb" class="le jf hh kv b fi lj lg l lh li">* /usr/share/eula/eula.en_US</span><span id="8a85" class="le jf hh kv b fi lj lg l lh li">For additional packages, updates, documentation and community help, see:</span><span id="263a" class="le jf hh kv b fi lj lg l lh li">* http://yum.oracle.com/</span><span id="25dd" class="le jf hh kv b fi lj lg l lh li">[vagrant@master ~]$ kubectl cluster-info</span><span id="7403" class="le jf hh kv b fi lj lg l lh li">Kubernetes master is running at https://192.168.99.100:6443</span><span id="6715" class="le jf hh kv b fi lj lg l lh li">KubeDNS is running at https://192.168.99.100:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy</span><span id="0bb6" class="le jf hh kv b fi lj lg l lh li">To further debug and diagnose cluster problems, use 'kubectl cluster-info dump'.</span><span id="0711" class="le jf hh kv b fi lj lg l lh li">[vagrant@master ~]$ kubectl get nodes</span><span id="2b98" class="le jf hh kv b fi lj lg l lh li">NAME                STATUS  ROLES    AGE    VERSION</span><span id="259d" class="le jf hh kv b fi lj lg l lh li">master.vagrant.vm   Ready   master   24m    v1.9.1+2.0.2.el7</span><span id="f611" class="le jf hh kv b fi lj lg l lh li">worker1.vagrant.vm  Ready   &lt;none&gt;   13m    v1.9.1+2.0.2.el7</span><span id="b2bd" class="le jf hh kv b fi lj lg l lh li">worker2.vagrant.vm  Ready   &lt;none&gt;   5m     v1.9.1+2.0.2.el7</span><span id="ac08" class="le jf hh kv b fi lj lg l lh li">[vagrant@master ~]$ kubectl get pods --namespace=kube-system</span><span id="dcbd" class="le jf hh kv b fi lj lg l lh li">NAME                                      READY  STATUS   RESTARTS AGE</span><span id="97a4" class="le jf hh kv b fi lj lg l lh li">etcd-master.vagrant.vm                    1/1<!-- -->    <!-- -->Running  0        24m</span><span id="4f45" class="le jf hh kv b fi lj lg l lh li">kube-apiserver-master.vagrant.vm          1/1<!-- -->    <!-- -->Running  0        23m</span><span id="71b3" class="le jf hh kv b fi lj lg l lh li">kube-controller-manager-master.vagrant.vm 1/1<!-- -->    <!-- -->Running  0        24m</span><span id="5b96" class="le jf hh kv b fi lj lg l lh li">kube-dns-855949bbf-cwsgc                  3/3<!-- -->    <!-- -->Running  0        24m</span><span id="e603" class="le jf hh kv b fi lj lg l lh li">kube-flannel-ds-f56w9                     1/1<!-- -->    <!-- -->Running  0        5m</span><span id="b42f" class="le jf hh kv b fi lj lg l lh li">kube-flannel-ds-flpql                     1/1<!-- -->    <!-- -->Running  0        13m</span><span id="d2fa" class="le jf hh kv b fi lj lg l lh li">kube-flannel-ds-fxp9z                     1/1<!-- -->    <!-- -->Running  0        24m</span><span id="7748" class="le jf hh kv b fi lj lg l lh li">kube-proxy-5thk9                          1/1<!-- -->    <!-- -->Running  0        5m</span><span id="8497" class="le jf hh kv b fi lj lg l lh li">kube-proxy-jmswg                          1/1<!-- -->    <!-- -->Running  0        13m</span><span id="5296" class="le jf hh kv b fi lj lg l lh li">kube-proxy-lfg9v                          1/1<!-- -->    <!-- -->Running  0        24m</span><span id="0c3c" class="le jf hh kv b fi lj lg l lh li">kube-scheduler-master.vagrant.vm          1/1<!-- -->    <!-- -->Running  0        24m</span><span id="c748" class="le jf hh kv b fi lj lg l lh li">kubernetes-dashboard-7c966ddf6d-hp7br     1/1<!-- -->    <!-- -->Running  0        24m</span><span id="3542" class="le jf hh kv b fi lj lg l lh li">[vagrant@master ~]$ exit</span><span id="e1c7" class="le jf hh kv b fi lj lg l lh li">logout</span><span id="6915" class="le jf hh kv b fi lj lg l lh li">Connection to 127.0.0.1 closed.</span><span id="1bef" class="le jf hh kv b fi lj lg l lh li">$</span></pre><h1 id="c659" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">åœ¨VirtualBoxä¸Šå®šåˆ¶æ‚¨çš„Kubernetesé›†ç¾¤</h1><p id="9bc5" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip lw ir is it lx iv iw ix ly iz ja jb ha bi translated">æµæµªè€…æ–‡ä»¶å…è®¸ä¸€äº›å®šåˆ¶ï¼Œä¾‹å¦‚:</p><ul class=""><li id="9cd5" class="kc kd hh ig b ih ii il im ip mj it mk ix ml jb mm kk kl km bi translated"><code class="du ks kt ku kv b">NB_WORKERS</code>(é»˜è®¤:<code class="du ks kt ku kv b">2</code>):è¦ç½®å¤‡çš„å·¥ä½œèŠ‚ç‚¹æ•°ã€‚</li><li id="aba0" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb mm kk kl km bi translated"><code class="du ks kt ku kv b">USE_PREVIEW</code>(é»˜è®¤:<code class="du ks kt ku kv b">true</code>):å½“<code class="du ks kt ku kv b">true</code>æ—¶ï¼Œæµæµªæ±‰ä¾›åº”è„šæœ¬å°†å¯¹Dockerå¼•æ“å’ŒKubernetesä½¿ç”¨<em class="jd"> Oracle Linux 7é¢„è§ˆç‰ˆ</em>å’Œ<em class="jd">é™„åŠ æ¨¡å—</em>é€šé“(æœ€æ–°ç‰ˆæœ¬ç”±<code class="du ks kt ku kv b">yum</code>é€‰æ‹©)ã€‚<br/>å¦åˆ™å®ƒå°†åªä½¿ç”¨<em class="jd">é™„åŠ æ¨¡å—</em>é€šé“ã€‚</li><li id="5ea3" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb mm kk kl km bi translated"><code class="du ks kt ku kv b">MANAGE_FROM_HOST</code>(é»˜è®¤:<code class="du ks kt ku kv b">false</code>):å½“<code class="du ks kt ku kv b">true</code>æ—¶ï¼Œæµæµªè€…å°†ä»ä¸»èŠ‚ç‚¹ç»‘å®šç«¯å£<code class="du ks kt ku kv b">6443</code>åˆ°ä¸»æœºã€‚è¿™å…è®¸æ‚¨ä½¿ç”¨ç”Ÿæˆçš„<code class="du ks kt ku kv b">admin.conf</code>æ–‡ä»¶ä»ä¸»æœºæœ¬èº«ç®¡ç†é›†ç¾¤(å‡è®¾ä¸»æœºä¸Šå®‰è£…äº†<code class="du ks kt ku kv b">kubectl</code>)ã€‚</li><li id="3cda" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb mm kk kl km bi translated"><code class="du ks kt ku kv b">BIND_PROXY</code>(é»˜è®¤:<code class="du ks kt ku kv b">true</code>):å½“<code class="du ks kt ku kv b">true</code>æ—¶ï¼Œvaggerä¼šå°†Kubernetesä»£ç†ç«¯å£ä»ä¸»èŠ‚ç‚¹ç»‘å®šåˆ°ä¸»æœºã€‚æœ‰åŠ©äºä»é›†ç¾¤å¤–çš„<em class="jd">è®¿é—®ä»ªè¡¨æ¿æˆ–ä»»ä½•å…¶ä»–åº”ç”¨ç¨‹åºã€‚è¿™æ˜¯sshéš§é“çš„ä¸€ä¸ªæ›´ç®€å•çš„æ›¿ä»£æ–¹æ¡ˆã€‚</em></li><li id="69d0" class="kc kd hh ig b ih kn il ko ip kp it kq ix kr jb mm kk kl km bi translated"><code class="du ks kt ku kv b">MEMORY</code>(é»˜è®¤å€¼:2048):æ‰€æœ‰è™šæ‹Ÿæœºéƒ½é…æœ‰2GBå†…å­˜ã€‚å¦‚æœå†…å­˜æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œè¿™å¯ä»¥ç¨å¾®å‡å°‘ã€‚</li></ul><p id="e4d3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ä½ å¯ä»¥åœ¨ä½ çš„æµæµªè€…æ¡£æ¡ˆä¸­æ‰¾åˆ°å®ƒä»¬ï¼Œå¹¶æ ¹æ®ä½ çš„éœ€è¦ä¿®æ”¹å®ƒä»¬ã€‚</p><p id="d3a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">å¦è¯·æŸ¥çœ‹ä¸Kubernetesç”¨æˆ·æŒ‡å—ä¸€èµ·ä½¿ç”¨çš„<a class="ae jc" href="https://docs.oracle.com/cd/E52668_01/E88884/html/kubectl-basics.html" rel="noopener ugc nofollow" target="_blank"> Oracleå®¹å™¨æœåŠ¡ï¼Œäº†è§£æ›´å¤šä¿¡æ¯ã€‚</a></p></div><div class="ab cl lk ll go lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ha hb hc hd he"><p id="0e6e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jd">åŸè½½äº2018å¹´3æœˆ26æ—¥</em><a class="ae jc" href="https://geraldonit.com/2018/03/26/deploying-a-kubernetes-cluster-with-vagrant-on-virtual-box/" rel="noopener ugc nofollow" target="_blank"><em class="jd">geraldonit.com</em></a><em class="jd">ã€‚</em></p></div></div>    
</body>
</html>