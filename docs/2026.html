<html>
<head>
<title>Shadow DOM vs Virtual DOM — what is the difference?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">影子DOM和虚拟DOM——有什么区别？</h1>
<blockquote>原文：<a href="https://medium.com/duomly-blockchain-online-courses/shadow-dom-vs-virtual-dom-what-is-the-difference-f2611da536ab?source=collection_archive---------0-----------------------#2019-09-16">https://medium.com/duomly-blockchain-online-courses/shadow-dom-vs-virtual-dom-what-is-the-difference-f2611da536ab?source=collection_archive---------0-----------------------#2019-09-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/170a9ad46877f112597e1c67b8ae145a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YVssc6quuDdKN7tuks-Vzg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx"><a class="ae it" href="https://www.duomly.com" rel="noopener ugc nofollow" target="_blank">Duomly — programming online courses</a></figcaption></figure><p id="c040" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">本文最初发表于:<a class="ae it" href="https://www.blog.duomly.com/what-is-the-difference-between-shadow-dom-and-virtual-dom/" rel="noopener ugc nofollow" target="_blank">https://www . blog . duomly . com/what-is-the-difference-between-shadow-DOM-and-virtual-DOM/</a></p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><p id="2d11" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">DOM(文档对象模型)是前端的一个基本概念，当然，每个试图学习编程的人都不止一次听说过它。对于初学者来说，理解它到底是什么以及如何操纵它并不那么容易。DOM操作并不容易，最重要的是，它带来了很多性能问题。</p><p id="91ad" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如今，随着Angular、React.js或Vue.js等渐进式web框架的出现，DOM有两个基本概念:<strong class="iw hi">影子DOM </strong>和<strong class="iw hi">虚拟DOM </strong>。</p><p id="7d90" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在这篇文章中，我想解释一下:</p><ul class=""><li id="2d1c" class="jz ka hh iw b ix iy jb jc jf kb jj kc jn kd jr ke kf kg kh bi translated">什么是文档对象模型(DOM)，</li><li id="e01d" class="jz ka hh iw b ix ki jb kj jf kk jj kl jn km jr ke kf kg kh bi translated">什么是影子王国，</li><li id="8fd9" class="jz ka hh iw b ix ki jb kj jf kk jj kl jn km jr ke kf kg kh bi translated">什么是虚拟DOM，</li><li id="ea7a" class="jz ka hh iw b ix ki jb kj jf kk jj kl jn km jr ke kf kg kh bi translated">影子DOM和虚拟DOM有什么区别</li></ul><p id="4bf2" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我也会试着告诉你它们之间的区别，以及各自带来的优缺点。</p><p id="f43b" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们从解释什么是DOM开始。</p><figure class="kn ko kp kq fd ii"><div class="bz dy l di"><div class="kr ks l"/></div><figcaption class="ip iq et er es ir is bd b be z dx"><a class="ae it" href="https://youtu.be/l71h0IAYtck" rel="noopener ugc nofollow" target="_blank">Virtual DOM vs Shadow DOM</a></figcaption></figure></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="8e48" class="kt ku hh bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">1.什么是DOM？</h1><p id="d12e" class="pw-post-body-paragraph iu iv hh iw b ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr ha bi translated">新手经常误导DOM，把他们创建的网站或应用程序当作HTML结构。但是HTML在浏览器解析之后就变成了DOM，然后就变成了DOM。根据定义，DOM是HTML或XML文档的API，它创建了一个可以被访问和操作的逻辑结构。换句话说，Javascript可以访问文档对象模型并对其进行更改。实现文档对象模型的原因是为了提供一个标准的编程接口，它可以在不同的环境中与任何编程语言一起使用。<br/>通过DOM修改，我们可以理解添加、删除或修改网站的元素，赋予它们不同的行为等。</p><p id="9954" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">每个浏览器都有一个全局对象，叫做窗口。在窗口内部，有不同的属性和方法。window对象中的一个属性是一个文档，在这个文档中我们可以找到许多属性和方法，这些属性和方法可以用来访问DOM元素并与之交互。</p><p id="a162" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">DOM的图形表示如下例所示:</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div class="er es lw"><img src="../Images/ed97e66de1519e02c886465db0b7d92d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1172/format:webp/0*2C_5ofN2jxbHLbIO.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx"><a class="ae it" href="https://www.duomly.co" rel="noopener ugc nofollow" target="_blank">Duomly — programming online courses</a></figcaption></figure><p id="0753" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如你所见，它被创建为一棵树。它从主文档对象开始，然后创建对象，元素导致和，以此类推。<br/>每个对象将来自网站的HTML元素表示为一个对象，具有允许修改它的属性、特性和方法。</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="6a18" class="kt ku hh bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">2.阴影DOM</h1><p id="d68d" class="pw-post-body-paragraph iu iv hh iw b ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr ha bi translated">Shadow DOM是一个用来构建基于组件的应用和网站的工具。影子DOM是小块的，它并不代表整个文档对象模型。我们可以把它看作一个子树或者一个单独的DOM元素。影子DOM可以想象成创建DOM的砖块。</p><p id="1ac3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">DOM和Shadow DOM的主要区别在于它的创建方式和行为方式。通常我们创建的DOM节点被放在其他元素中，就像我们之前看到的树一样。在Shadow DOM的情况下，我们创建一个作用域树，它连接到元素，但与子元素分开。它叫做影子树，它所依附的元素叫做影子宿主。在这里，我们得到了阴影DOM的一个巨大优势，我们将添加到阴影DOM的所有东西都是本地的，甚至是样式。</p><p id="f298" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们解释一下为什么Shadow DOM如此有用，它解决了什么问题。首先，它隔离了DOM，所以组件的DOM是一个独立的元素，不会出现在全局DOM中。它有助于解决的另一个问题是CSS的作用域，这意味着在单个影子DOM元素中创建的样式是孤立的，并保持在影子DOM的作用域内。它大大简化了样式，因为我们不必太担心命名空间，我们可以使用简单的选择器和类名。此外，我们可以认为应用程序是由块构建的(它实际上是基于组件的)，而不是一个巨大的全局对象。</p><p id="9da3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">影子DOM会影响应用程序的性能。正如本文开头所说的，当我们想要操作DOM时，会有很多性能问题，因为每一次更改都会重新呈现整个对象。在阴影的情况下，DOM浏览器知道应该更新哪一部分。</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="ba4f" class="kt ku hh bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">3.虚拟DOM</h1><p id="67a0" class="pw-post-body-paragraph iu iv hh iw b ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr ha bi translated">虚拟DOM是React.js和Vue.js使用的DOM概念。在虚拟DOM概念中，DOM的副本保存在内存中，当DOM发生任何变化时，都会进行比较以找出差异。然后浏览器知道哪些元素被改变了，可以只更新应用程序的那些部分，以避免重新呈现所有的DOM。这样做是为了提高UI库的性能。正如我们所知，从DOM中的前一段开始，每个元素都被重新呈现，不管它是否被改变。</p><p id="4075" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们一步步深入检查虚拟DOM是如何工作的。因此，首先，对虚拟DOM进行更改，而不是对原始DOM进行更改，然后将虚拟DOM与文档对象模型进行比较，这个过程称为“区分”。当发现差异时，浏览器就知道应该更新原始DOM中的哪些元素并完成更新。在虚拟DOM概念中，可以一次应用多个更改，以避免每次元素更改都要重新呈现。</p><p id="f9d9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">虚拟DOM解决的最大问题是DOM操作的性能改进。</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="163c" class="kt ku hh bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">4.影子DOM和虚拟DOM的区别</h1><p id="a49f" class="pw-post-body-paragraph iu iv hh iw b ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr ha bi translated">两者唯一的共同点是它们都有助于解决性能问题。两者都创建文档对象模型的单独实例；除此之外，这两个概念是不同的。虚拟DOM创建整个DOM对象的副本，而影子DOM创建DOM对象的小部分，这些小部分对于它们所代表的元素有它们自己的、隔离的作用域。</p></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="ad6d" class="kt ku hh bd kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">结论</h1><p id="37c9" class="pw-post-body-paragraph iu iv hh iw b ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr ha bi translated">DOM概念在前端编程中非常重要，但是随着技术和新库的发展，文档对象模型也得到了改进。使用渐进式web框架，我们可以使用影子DOM和虚拟DOM来避免性能问题，并更快、更有效地修改DOM。现在，随着技术的发展，如何与DOM对象交互而不影响性能已经不再是一个需要担心的问题了。</p><p id="e788" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我希望这篇文章有助于理解什么是DOM以及虚拟和影子DOM概念是如何工作的。此外，我还解释了它们之间的主要区别以及它们所解决的问题。</p><p id="a2b9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">好好编码！</p><figure class="kn ko kp kq fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/7eca43874d384fe092418e5f9d36017d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eC485cOyhmlSybM_.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx"><a class="ae it" href="https://www.duomly.com" rel="noopener ugc nofollow" target="_blank">Duomly — programming online courses</a></figcaption></figure><p id="eb12" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">感谢您的阅读！</p><p id="f630" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">本文由我们的队友安娜提供。</p></div></div>    
</body>
</html>