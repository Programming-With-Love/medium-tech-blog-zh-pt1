<html>
<head>
<title>Kafka quick introduction and AEM Integration</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kafka快速入门和AEM集成</h1>
<blockquote>原文：<a href="https://medium.com/globant/kafka-quick-introduction-and-aem-integration-7797928d63a9?source=collection_archive---------0-----------------------#2021-02-05">https://medium.com/globant/kafka-quick-introduction-and-aem-integration-7797928d63a9?source=collection_archive---------0-----------------------#2021-02-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="f85d" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">简介</strong></h1><p id="38bf" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">Apache Kafka是一个开源的分布式事件<a class="ae ka" href="https://amzn.to/3jVCVfK" rel="noopener ugc nofollow" target="_blank">流</a>平台，被世界各地的许多公司使用，允许我们为关键任务应用程序提供高性能数据管道、流分析和数据集成。</p><p id="b6c0" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">公司过去常常开始使用简单的点对点集成，就像这样:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kg"><img src="../Images/c9e82f9a8cd2a9d0a7b940ad279bb964.png" data-original-src="https://miro.medium.com/v2/resize:fit:340/0*nt1W_so9VLk8mnOw"/></div><figcaption class="ko kp et er es kq kr bd b be z dx"><strong class="bd ig">Figure 1: Simple integration</strong></figcaption></figure><p id="b387" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">过了一段时间，需求发生了变化，然后公司需要集成更多的资源和更多的目标，这在将来会变得复杂。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ks"><img src="../Images/73078006eb8b14490b18cfbf017eaa9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1390/0*VVOelortOuhneN1G"/></div><figcaption class="ko kp et er es kq kr bd b be z dx"><strong class="bd ig">Figure 2.Spaghetti integration</strong></figcaption></figure><p id="14e9" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">上述体系结构存在以下问题:</p><ul class=""><li id="820d" class="kt ku hh je b jf kb jj kc jn kv jr kw jv kx jz ky kz la lb bi translated"><em class="lc">如果你有4个源系统和6个目标系统，你需要写24个集成</em></li><li id="c154" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">每个集成都伴随着协议(TCP、HTTP、REST、FTP、JDBC等)、数据格式(二进制、CSV、JSON等)、数据模式(数据是如何形成的以及可能发生的变化)方面的困难。</em></li><li id="c59a" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated">等等。</li></ul><p id="7c7e" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">一个解决办法是使用<strong class="je hi"> <em class="lc">阿帕奇</em>卡夫卡</strong>之类的东西:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es li"><img src="../Images/1c7b59a9d46c417b67e468e1a0994f77.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IYCRpnuajoPbC8it"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx"><strong class="bd ig">Figure 3. Kafka approach</strong></figcaption></figure><p id="aa7b" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated"><strong class="je hi">为什么用阿帕奇卡夫卡:</strong></p><ul class=""><li id="c64a" class="kt ku hh je b jf kb jj kc jn kv jr kw jv kx jz ky kz la lb bi translated"><em class="lc">分布式，弹性架构，容错。</em></li><li id="4ac5" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">横向可伸缩性:可以扩展到数百个代理，可以扩展到每秒数百万条消息。</em></li><li id="597b" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">高性能(延迟小于10毫秒)实时</em></li><li id="8d6d" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">被很多公司使用，财富500强的35%:Airbnb，网飞，Linked In，优步，沃尔玛等。</em></li></ul><p id="58eb" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated"><strong class="je hi">使用案例:</strong></p><ul class=""><li id="d8d6" class="kt ku hh je b jf kb jj kc jn kv jr kw jv kx jz ky kz la lb bi translated"><em class="lc">信息系统</em></li><li id="20e2" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">活动跟踪</em></li><li id="4e3f" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">应用程序日志</em></li><li id="0668" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">流处理</em></li><li id="2637" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">系统集成的解耦</em></li><li id="193e" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">与大数据的融合。</em></li></ul><h1 id="b3ba" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">快速启动</strong></h1><p id="c648" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated"><strong class="je hi">主题、分区和偏移量</strong></p><p id="b131" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated"><strong class="je hi">主题，</strong>特定的数据流</p><ul class=""><li id="6ff5" class="kt ku hh je b jf kb jj kc jn kv jr kw jv kx jz ky kz la lb bi translated"><em class="lc">类似于数据库中的一个表。</em></li><li id="3585" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated">根据您的需求，您可以拥有任意多的主题。</li><li id="1b45" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated">主题由其名称来标识。</li></ul><p id="e202" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated"><strong class="je hi">分区，</strong>主题被拆分成<strong class="je hi"> <em class="lc">分区</em> </strong>。</p><ul class=""><li id="2fcd" class="kt ku hh je b jf kb jj kc jn kv jr kw jv kx jz ky kz la lb bi translated">每个分区都是有序的</li><li id="12e4" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated">一个分区内的每条消息都有一个增量id，称为<strong class="je hi"> <em class="lc">偏移量</em> </strong></li></ul><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ln"><img src="../Images/942f6e721fba0ce6e1e8924eeba9cf7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/0*AkKiJO3EJotvpvM5"/></div><figcaption class="ko kp et er es kq kr bd b be z dx"><strong class="bd ig">Figure 4. Kafka Topic</strong></figcaption></figure><p id="1f68" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated"><strong class="je hi">偏移</strong>，每个分区中的特定消息</p><ul class=""><li id="7e50" class="kt ku hh je b jf kb jj kc jn kv jr kw jv kx jz ky kz la lb bi translated"><em class="lc">每个偏移量只对一个特定的分区有意义，例如，分区0中的偏移量3不代表与分区1中的偏移量3相同的数据。</em></li><li id="4440" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">只能在一个分区内保证顺序(不能跨分区)。</em></li><li id="9490" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">数据只保存一周，这是默认时间。</em></li><li id="7b97" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">数据一旦写入分区，就无法更改。</em></li></ul><h1 id="7b10" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">经纪人</strong></h1><p id="a1eb" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">Kafka集群由多个代理(服务器)组成。让我们来看看一些特点:</p><ul class=""><li id="e523" class="kt ku hh je b jf kb jj kc jn kv jr kw jv kx jz ky kz la lb bi translated">每个代理都用其ID(整数)来标识。</li><li id="c2d9" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">每个代理包含特定的主题分区。</em></li><li id="cad3" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">如果我们连接到任何代理，我们就会连接到集群。</em></li></ul><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es lo"><img src="../Images/9043e84974433b77050ad5795a89ee3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1360/0*N_jipGVS_tWa6J3L"/></div><figcaption class="ko kp et er es kq kr bd b be z dx"><strong class="bd ig">Figure 5. Brokers and topics</strong></figcaption></figure><h1 id="2635" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">制片人</strong></h1><ul class=""><li id="558d" class="kt ku hh je b jf jg jj jk jn lp jr lq jv lr jz ky kz la lb bi translated"><em class="lc">生产者将数据写入主题，记住主题是由分区组成的。</em></li><li id="5691" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">生产者自动知道要写入哪个代理和分区，我们不必指定，因此对我们来说，这消除了许多负担，我们只需连接到Kafka。</em></li><li id="44bd" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">在代理失败的情况下，生产者将自动恢复，我们不需要实现那个特性，它已经为我们完成了。</em></li></ul><h1 id="1cb2" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">消费者</strong></h1><ul class=""><li id="fdd0" class="kt ku hh je b jf jg jj jk jn lp jr lq jv lr jz ky kz la lb bi translated"><em class="lc">消费者从一个主题中读取数据，他们知道自动读取哪个经纪人，这已经为我们编程好了。</em></li><li id="c6f1" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">万一经纪人倒闭，消费者知道如何挽回，我们不用考虑这个。</em></li><li id="4182" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">数据在每个分区内被读取和排序，这意味着偏移量3在偏移量2之后被读取，而不是之前。</em></li><li id="d145" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">消费者也可以从多个分区中读取数据，但不能保证在代理、分区1和分区2之间按顺序读取数据，这是并行读取的。</em></li></ul><h2 id="6356" class="ls if hh bd ig lt lu lv ik lw lx ly io jn lz ma is jr mb mc iw jv md me ja mf bi translated"><strong class="ak">消费群体</strong></h2><ul class=""><li id="e21c" class="kt ku hh je b jf jg jj jk jn lp jr lq jv lr jz ky kz la lb bi translated"><em class="lc">消费者阅读消费群体中的数据</em></li><li id="f3a5" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated">组中的每个消费者从独占分区中读取数据。</li><li id="82d3" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">如果用户数量超过分区数量，一些用户将处于非活动状态。</em></li><li id="87e1" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><em class="lc">消费者将自动使用GroupCoordinator和ConsumerCoordinator将消费者分配到分区，这是Kafka中已经实现的机制。</em></li></ul><h1 id="2a6d" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">动物园管理员</h1><ul class=""><li id="f17e" class="kt ku hh je b jf jg jj jk jn lp jr lq jv lr jz ky kz la lb bi translated">Zookeeper管理经纪人(保存他们的列表)</li><li id="329c" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated">Zookeeper帮助我们进行分区的领导者选举。当一个代理关闭时，有一个新的分区成为领导者，zookeeper帮助我们做到了这一点。</li><li id="730f" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated">Zookeeper会在发生变化时向Kafka发送通知，例如，新主题、新经纪人、经纪人死亡、删除主题等。…</li><li id="30ea" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated">卡夫卡离不开Zookeeper，我们先启动Zookeeper，再启动卡夫卡。</li></ul><h1 id="4939" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">安装</strong></h1><h2 id="6e61" class="ls if hh bd ig lt lu lv ik lw lx ly io jn lz ma is jr mb mc iw jv md me ja mf bi translated"><strong class="ak">步骤一:下载阿帕奇卡夫卡</strong></h2><ul class=""><li id="1c9a" class="kt ku hh je b jf jg jj jk jn lp jr lq jv lr jz ky kz la lb bi translated">从下载页面<a class="ae ka" href="https://bit.ly/32aDtrO" rel="noopener ugc nofollow" target="_blank">下载最新版本阿帕奇卡夫卡</a>。</li><li id="61c4" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated">提取它</li></ul><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es mg"><img src="../Images/c72c871782efb6bed016ec7e19ea2218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1302/0*YbpteHRt8j8SmwzB"/></div><figcaption class="ko kp et er es kq kr bd b be z dx"><strong class="bd ig">Figure 6. Apache Kafka source</strong></figcaption></figure><h2 id="6add" class="ls if hh bd ig lt lu lv ik lw lx ly io jn lz ma is jr mb mc iw jv md me ja mf bi translated"><strong class="ak">第二步:与Kafka代理合作</strong></h2><p id="8820" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">Kafka针对基于Unix的平台和Windows平台有不同的脚本。在Windows平台上，使用bin\windows\而不是bin/</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es mh"><img src="../Images/80d2df0d29377e54d98a3509445edfdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O431-_8iwKNB2DHN"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx"><strong class="bd ig">Figure 7. Apache Kafka source content</strong></figcaption></figure><p id="436b" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated"><strong class="je hi">启动ZooKeeper服务器:</strong>我们需要先启动一个ZooKeeper，使用Kafka打包的便捷脚本，得到一个快脏的单节点Zookeeper实例。使用命令:</p><p id="c224" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated"><strong class="je hi">T1。/zookeeper-server-start.sh../config/zookeeper . propertiesT3】</strong></p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es mi"><img src="../Images/1c353847b8e6fd879f717daf98931f14.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*O85JGhPcx3t7RctB"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx"><strong class="bd ig">Figure 8. Start zookeeper server</strong></figcaption></figure><p id="f31d" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated"><strong class="je hi">启动Kafka服务器:</strong>随着zookeeper服务器的启动，我们可以启动Kafka服务器，使用命令:</p><p id="0e2e" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated"><strong class="je hi"> <em class="lc">。/kafka-server-start.sh../config/server . properties</em></strong></p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es mj"><img src="../Images/0d134a281684e2713f8352d85c2063ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*LkqTebDN7Y6g4Ci7"/></div></div><figcaption class="ko kp et er es kq kr bd b be z dx"><strong class="bd ig">Figura 9. Start Kafka server</strong></figcaption></figure><p id="1877" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">随着前面步骤的执行，我们有了一个Kafka服务器。在下一节中，我们将看到创建消费者并将其部署在AEM上的主要组件。</p><h1 id="5be0" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak"> AEM演示消费者</strong></h1><p id="1697" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在某些情况下，AEM成为处理数字内容(文档、图像、视频等)的工具，进入拥有在线业务的公司，但是，这些公司需要继续使用旧的系统和应用程序来管理这些内容，并与新平台实时同步，因此Apache Kafka是一个很好的选择。</p><p id="bac3" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">我们将在Kafka和AEM之间创建一个小集成，其中一个组件将成为消费者，以便从Kafka读取消息。在开始编码之前，我们需要考虑一些事情，例如Kafka配置:</p><ul class=""><li id="1eae" class="kt ku hh je b jf kb jj kc jn kv jr kw jv kx jz ky kz la lb bi translated"><strong class="je hi"> <em class="lc">代理列表，逗号分隔的Kafka集群服务器，格式为ip_hostname: port </em> </strong></li><li id="635c" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><strong class="je hi"> <em class="lc">主题列表</em> </strong></li><li id="90aa" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><strong class="je hi"> <em class="lc">启用/禁用(真/假)消费组件</em> </strong></li><li id="56aa" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><strong class="je hi"> <em class="lc">启用自动提交(真/假)，消费者偏移量将在后台定期提交。</em> </strong></li><li id="098d" class="kt ku hh je b jf ld jj le jn lf jr lg jv lh jz ky kz la lb bi translated"><strong class="je hi"> <em class="lc">等重要配置</em> </strong></li></ul><p id="7c61" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">让我们开始写一个配置类。在按照<a class="ae ka" href="https://docs.adobe.com/content/help/en/experience-manager-learn/getting-started-wknd-tutorial-develop/project-setup.html" rel="noopener ugc nofollow" target="_blank">项目设置</a>创建AEM项目之后，我们需要创建一个配置类来包含所有的Kafka配置。我们可以创建一个名为<strong class="je hi"><em class="lc">KafkaConfigProperties</em></strong>的接口</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="a2fc" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">下一步是创建一个类，它允许我们从配置类(<strong class="je hi"><em class="lc">【KafkaConfigProperties】</em></strong>)中获取属性，并可被消费者组件访问，让我们创建一个名为<strong class="je hi"> <em class="lc"> KafkaConfig的类。</em>T45】</strong></p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="17b6" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">下一步是创建一个消费者类作业，在这种情况下，我们将使用一个线程java API，我们可以创建一个名为<strong class="je hi"><em class="lc">AemKafkaConsumerJob</em></strong>的类来实现Runnable，让我们开始吧</p><p id="4aea" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">该类的第一部分初始化所有必需的属性以及来自Kafka API的de<strong class="je hi"><em class="lc">KafkaConsumer</em></strong>对象:</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="4e47" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">最后一步是创建一个客户端类来启动我们的线程，我们可以把它叫做<strong class="je hi"><em class="lc">AemKafkaConsumerImpl</em></strong>让我们来编码它</p><figure class="kh ki kj kk fd kl"><div class="bz dy l di"><div class="mk ml l"/></div></figure><p id="d554" class="pw-post-body-paragraph jc jd hh je b jf kb jh ji jj kc jl jm jn kd jp jq jr ke jt ju jv kf jx jy jz ha bi translated">通过以上步骤，我们可以在AEM上部署这个项目，ee可以使用一个工具向Kafka集群发送消息，并在<strong class="je hi"> <em class="lc"> AEM Kafka消费者</em> </strong>组件中接收消息，因此我推荐使用<a class="ae ka" href="https://www.kafkatool.com/" rel="noopener ugc nofollow" target="_blank"> Kafka工具</a></p><h1 id="7f91" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">结论</strong></h1><p id="535a" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">系统之间的集成是现代企业架构中的一个常见问题，因此我们需要考虑行业中的所有可能性，Apache Kafka是解决集成问题的一个很好的候选方案。这篇文章是Apache Kafka的概述，但是我们可以在<a class="ae ka" href="https://kafka.apache.org/" rel="noopener ugc nofollow" target="_blank">官方文档</a>中查看更多细节。</p></div></div>    
</body>
</html>