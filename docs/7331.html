<html>
<head>
<title>Announcing Okio 2: Our fast + simple I/O library, Okio, has a new release that supports Kotlin.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">宣布Okio 2:我们的fast + simple I/O库Okio有一个支持Kotlin的新版本。</h1>
<blockquote>原文：<a href="https://medium.com/square-corner-blog/okio-2-6f6c35149525?source=collection_archive---------0-----------------------#2018-08-27">https://medium.com/square-corner-blog/okio-2-6f6c35149525?source=collection_archive---------0-----------------------#2018-08-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/d2f05666ccbe4e807fafdea01e9866c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AvEHn9W_0kxlWZORHZycFg.jpeg"/></div></div></figure><blockquote class="ip iq ir"><p id="b22c" class="is it iu iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">注意，我们已经行动了！如果您想继续了解Square的最新技术内容，请访问我们的新家<a class="ae jr" href="https://developer.squareup.com/blog" rel="noopener ugc nofollow" target="_blank">https://developer.squareup.com/blog</a></p></blockquote><p id="6869" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">在广场，我们为科特林感到兴奋。它是一种能够用来构建Java库和应用程序的语言。我们喜欢写既紧凑又高效的代码。</p><p id="b4b3" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">我们也渴望采用Kotlin强大的新功能。<a class="ae jr" href="https://kotlinlang.org/docs/reference/native-overview.html" rel="noopener ugc nofollow" target="_blank"> Kotlin/Native </a>将允许我们在iOS和Android之间共享代码。协同程序使并发程序更容易创建和维护。</p><p id="b780" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated"><strong class="iv hi">今天我们发布了Okio 2.0。</strong>在这个版本中，我们将项目的源代码从<code class="du jv jw jx jy b">.java</code>转换为<code class="du jv jw jx jy b">.kt</code>。这种转换让我们可以在库中使用Kotlin，并在调用代码在Kotlin中时提供感觉良好的API。这也让我们有机会在未来支持多平台和协程。</p><h1 id="5772" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">和睦相处</h1><p id="a379" class="pw-post-body-paragraph is it hh iv b iw kx iy iz ja ky jc jd js kz jg jh jt la jk jl ju lb jo jp jq ha bi translated">新版本与Okio 1.15.0二进制兼容。你可以用新的文件替换旧的<code class="du jv jw jx jy b">.jar</code>文件，你的应用程序和库应该可以正常工作了。</p><p id="81f6" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">这次更新也是与Java源代码兼容的。当你配置你的<code class="du jv jw jx jy b">pom.xml</code>或<code class="du jv jw jx jy b">build.gradle</code>来使用新版本时，你不需要改变任何<code class="du jv jw jx jy b">.java</code>代码来获得一个干净的版本。(我们的<a class="ae jr" href="https://github.com/square/okio/blob/master/CHANGELOG.md" rel="noopener ugc nofollow" target="_blank">变更日志</a>提到了一个小例外，与科特林跃迁无关。)</p><p id="a3cf" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">但是更新<strong class="iv hi">不是Kotlin源码兼容</strong>；它在适用的地方采用了科特林的习语。例如，如果你正在使用<code class="du jv jw jx jy b">ByteString.decodeHex("f00d")</code>，你现在需要<code class="du jv jw jx jy b">"f00d".decodeHex()</code>。我们使用Kotlin的<code class="du jv jw jx jy b">@Deprecated</code>注释来实现平稳的升级过程。</p><figure class="ld le lf lg fd ii er es paragraph-image"><div class="er es lc"><img src="../Images/7af5732c78d03ebcfec5276fbfd8ea0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/1*euk0Ifg5znwtlfleGX3Xsw.gif"/></div><figcaption class="lh li et er es lj lk bd b be z dx">IntelliJ makes fixing deprecations easy</figcaption></figure><h1 id="d304" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">属国</h1><p id="5597" class="pw-post-body-paragraph is it hh iv b iw kx iy iz ja ky jc jd js kz jg jh jt la jk jl ju lb jo jp jq ha bi translated">Okio是Square许多开源项目的核心。我们在<a class="ae jr" href="https://github.com/square/okhttp" rel="noopener ugc nofollow" target="_blank"> OkHttp </a>、<a class="ae jr" href="https://github.com/square/retrofit" rel="noopener ugc nofollow" target="_blank">改装</a>、<a class="ae jr" href="https://github.com/square/moshi" rel="noopener ugc nofollow" target="_blank"> Moshi </a>和<a class="ae jr" href="https://github.com/square/wire" rel="noopener ugc nofollow" target="_blank"> Wire </a>中使用它进行快速I/O。当这些项目升级到Okio 2时，它们将获得对Kotlin标准库的可传递依赖。</p><p id="aff4" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">Kotlin是Android应用程序开发的最佳语言。我们预计许多Android团队已经在使用Kotlin了。对于他们的项目，Kotlin已经是应用程序的依赖项之一。那些不知道的人可以使用R8或ProGuard来减少对Kotlin库的依赖。当我们测量时，净增长是微不足道的:只有7 KiB。</p><p id="0ef6" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">对于服务器应用程序，我们期望依赖大小是无关紧要的。但是我们担心潜在的钻石依赖版本问题。为了将这种问题的可能性降到最低，我们将避免实验性的和不推荐的API。</p><p id="62a3" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">对于使用Okio或其兄弟库的库和SDK，我们假设最终的部署目标是Android或服务器。无论是哪种情况，我们都认为这种依赖性是可以接受的。</p><h1 id="1e0d" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">好东西</h1><p id="ce21" class="pw-post-body-paragraph is it hh iv b iw kx iy iz ja ky jc jd js kz jg jh jt la jk jl ju lb jo jp jq ha bi translated">Kotlin是一种有着广泛应用的美丽语言。我们希望Okio 2有助于进一步扩展Kotlin的功能。</p><p id="e4e4" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">获得Gradle的新Okio:</p><pre class="ld le lf lg fd ll jy lm ln aw lo bi"><span id="9926" class="lp ka hh jy b fi lq lr l ls lt">compile ‘com.squareup.okio:okio:2.0.0’</span></pre><p id="d8db" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">或者Maven:</p><pre class="ld le lf lg fd ll jy lm ln aw lo bi"><span id="99bc" class="lp ka hh jy b fi lq lr l ls lt">&lt;dependency&gt;<br/>  &lt;groupId&gt;com.squareup.okio&lt;/groupId&gt;<br/>  &lt;artifactId&gt;okio&lt;/artifactId&gt;<br/>  &lt;version&gt;2.0.0&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="6abf" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">完整的发布细节在<a class="ae jr" href="https://github.com/square/okio/blob/master/CHANGELOG.md" rel="noopener ugc nofollow" target="_blank">变更日志</a>中。<a class="ae jr" href="https://github.com/square/okio/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">自述文件</a>有一个API指南。</p></div></div>    
</body>
</html>