<html>
<head>
<title>Styling custom components in Content and Experience Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在内容和体验云中设计定制组件</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/styling-custom-components-in-content-and-experience-cloud-c418bddedaa0?source=collection_archive---------1-----------------------#2018-06-15">https://medium.com/oracledevs/styling-custom-components-in-content-and-experience-cloud-c418bddedaa0?source=collection_archive---------1-----------------------#2018-06-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="edd0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这篇文章解释了如何使用Sites Toolkit创建一个定制组件，对其进行样式化，并在本地测试工具中对其进行测试。请参考上一篇文章<a class="ae jc" rel="noopener" href="/oracledevs/developing-for-content-and-experience-cloud-cec-using-sites-toolkit-ed9e27d9a703">使用站点工具包开发内容和体验云(CEC)</a>,了解站点工具包和安装的介绍。本文假设<em class="jd">项目创建和安装</em>步骤<em class="jd"> </em>已经完成。</p><h1 id="1fdc" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">创建自定义组件</h1><p id="8f3f" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">您可以使用cec命令行实用程序来创建新组件。键入命令<code class="du kh ki kj kk b">cec create-component</code>查看可用启动器组件的列表。要创建本地组件，发出以下命令。</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="f843" class="kt jf hh kk b fi ku kv l kw kx">cec create-component <!-- -->MySampleComponent<!-- --> -f Sample-Text-With-Image</span></pre><p id="13d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">组件在<code class="du kh ki kj kk b">src/main/components/MySampleComponent</code>下创建</p><h1 id="225c" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">设计组件的样式</h1><h2 id="96d6" class="kt jf hh bd jg ky kz la jk lb lc ld jo ip le lf js it lg lh jw ix li lj ka lk bi translated">将组件的样式保留在自己的design.css中</h2><p id="af01" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">让我们从给组件的design.css添加一个样式开始，这样以后我们可以将它与给主题的design.css添加样式进行比较</p><p id="990b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">给它添加下面的样式。</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="99bb" class="kt jf hh kk b fi ku kv l kw kx">.sample-component-container .paragraph-container h1 {</span><span id="8ecc" class="kt jf hh kk b fi ll kv l kw kx"><em class="jd">    color</em>: red;</span><span id="1193" class="kt jf hh kk b fi ll kv l kw kx">}</span></pre><p id="3c41" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">使用本地测试线束测试组件:</strong></p><p id="05fe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">导航到本地测试线束中的组件<code class="du kh ki kj kk b">MySampleComponent</code>。将“主题设计”选项设为“无”。您可以看到标题“本地组件”是红色的。问题是无论使用什么样的网站或主题，标题总是红色的。</p><figure class="kl km kn ko fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lm"><img src="../Images/59936ede2286313e227fffca53c133b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CXL1ErKdlftMBGuq9iUUsw.png"/></div></div></figure><h2 id="8ab0" class="kt jf hh bd jg ky kz la jk lb lc ld jo ip le lf js it lg lh jw ix li lj ka lk bi translated">在主题的design.css中保留自定义组件的样式</h2><p id="17d1" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">大多数时候你希望标题颜色与主题相匹配。例如，当此组件用于使用蓝色主题的站点时，此标题应为蓝色，而当此组件用于使用绿色主题的站点时，此标题应为绿色。所以，最好的地方是在<code class="du kh ki kj kk b">&lt;theme_name&gt;/designs/default/design.css</code>保持主题的<code class="du kh ki kj kk b">design.css</code>风格</p><p id="4320" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个css应该包含在每个页面布局html文件的<code class="du kh ki kj kk b">&lt;theme_name&gt;/layouts</code>中，如下所示:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="51ca" class="kt jf hh kk b fi ku kv l kw kx">&lt;link rel=”stylesheet” type=”text/css” href=”/_themes/[!— $SCS_THEME_NAME—]/designs/[!—$SCS_DESIGN_NAME—]/design.css”&gt;</span></pre><p id="870a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因为css包含在页面布局中，所以它可用于页面中的所有本地组件。像远程组件一样，在iframe中呈现的组件应该以编程方式包含此css，如下所示:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="6185" class="kt jf hh kk b fi ku kv l kw kx">SitesSDK.getSiteProperty(‘themeDesign’, function (data) {</span><span id="f377" class="kt jf hh kk b fi ll kv l kw kx">// check if we got an themeDesign back<br/>  if (data.themeDesign &amp;&amp; typeof data.themeDesign === ‘string’) {</span><span id="b8a0" class="kt jf hh kk b fi ll kv l kw kx">// theme is loaded so dynamically inject theme<br/>     SitesSDK.Utils.addSiteThemeDesign(data.themeDesign);<br/>  }<br/>});</span></pre><p id="c42e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦将样式添加到主题的design.css中，就可以使用本地测试工具来选择主题并测试组件。</p><p id="d8f1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">使用本地测试线束进行测试</strong></p><p id="b99a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，让我们从组件的design.css中删除标题颜色，并将其添加到主题的design.css中。</p><ol class=""><li id="7a08" class="lu lv hh ig b ih ii il im ip lw it lx ix ly jb lz ma mb mc bi translated">编辑<code class="du kh ki kj kk b">src/main/components/MySampleComponent/assets/styles/design.css</code>和<strong class="ig hi">删除</strong>以下样式:</li></ol><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="6251" class="kt jf hh kk b fi ku kv l kw kx">.sample-component-container .paragraph-container h1 {</span><span id="3f9b" class="kt jf hh kk b fi ll kv l kw kx"><em class="jd">   color</em>: red;</span><span id="e17a" class="kt jf hh kk b fi ll kv l kw kx">}</span></pre><p id="7f45" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.创建两个模板<code class="du kh ki kj kk b">Blue</code>和<code class="du kh ki kj kk b">Green</code>，这样我们得到两个主题。运行以下命令。</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="7a8e" class="kt jf hh kk b fi ku kv l kw kx">cec create-template Blue -f StarterTemplate<br/>cec create-template Green -f StarterTemplate</span></pre><p id="2b50" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.编辑<code class="du kh ki kj kk b">src/main/themes/BlueTheme/designs/default/design.css</code>并添加以下样式:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="a33a" class="kt jf hh kk b fi ku kv l kw kx">.sample-component-container .paragraph-container h1 {</span><span id="9bba" class="kt jf hh kk b fi ll kv l kw kx"><em class="jd">    color</em>: blue;</span><span id="7532" class="kt jf hh kk b fi ll kv l kw kx">}</span></pre><p id="d393" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.编辑<code class="du kh ki kj kk b">src/main/themes/GreenTheme/designs/default/design.css</code>并添加以下样式:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="8432" class="kt jf hh kk b fi ku kv l kw kx">.sample-component-container .paragraph-container h1 {</span><span id="ae33" class="kt jf hh kk b fi ll kv l kw kx"><em class="jd">   color</em>: green;</span><span id="9a30" class="kt jf hh kk b fi ll kv l kw kx">}</span></pre><p id="5b55" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.测试蓝色主题。导航至测试线束中的组件，并选择<code class="du kh ki kj kk b">BlueTheme</code>进行“主题设计”。注意标题是蓝色的。</p><figure class="kl km kn ko fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es md"><img src="../Images/9d5312e36e55015a95e75ffd087b345b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HO1sc5trdEEdOC9ZlKrCMA.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx">Component using Blue theme</figcaption></figure><p id="c0dd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">6.测试绿色主题。现在选择<code class="du kh ki kj kk b">GreenTheme</code>进行“主题设计”。注意标题是绿色的。</p><figure class="kl km kn ko fd ln er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es md"><img src="../Images/e5fd895182d3195cc0b11dbb2e3f8c75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s_fdCesrSU6Gl_O2HfVE3Q.png"/></div></div><figcaption class="me mf et er es mg mh bd b be z dx">Component using Green theme</figcaption></figure><h2 id="16e3" class="kt jf hh bd jg ky kz la jk lb lc ld jo ip le lf js it lg lh jw ix li lj ka lk bi translated">最佳实践是在主题的designs.css中保留自定义组件样式</h2><p id="058c" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">正如我们在上一节的示例中看到的，为了实现组件的主题特定样式，样式应该进入主题的design.css。例如，当使用BlueTheme将<em class="jd"> MySampleComponent </em>添加到站点时，标题是蓝色的。如果使用GreenTheme将同一个组件添加到一个站点，标题将是绿色的，不需要对组件进行任何更改。</p><h2 id="6b0e" class="kt jf hh bd jg ky kz la jk lb lc ld jo ip le lf js it lg lh jw ix li lj ka lk bi translated">在多个主题之间共享样式</h2><p id="07d5" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">在某些情况下，一组主题可能有一些共同的样式。与其在每个主题中重复这个，如何在所有这些主题中共享它呢？</p><p id="9968" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建一个主题来托管共享的css文件。假设共享主题的名称是shared theme，将样式保存在shared theme/assets/CSS/shared . CSS中并发布主题。在依赖主题的页面布局中，包括如下shared.css:</p><pre class="kl km kn ko fd kp kk kq kr aw ks bi"><span id="cfde" class="kt jf hh kk b fi ku kv l kw kx">&lt;link rel=”stylesheet” href=”/_themes/SharedTheme/assets/css/shared.css”&gt;</span></pre><p id="ddae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">_themes在渲染过程中由CEC解析，并在路径中插入一个缓存键。此链接支持缓存破坏。这通常在缓存控制中指定最长期限为15天。每当SharedTheme更新和重新发布时，相关的主题也应该重新发布，这样缓存就失效了。</p><p id="f4ca" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">另一个选择是将这个共享css保存在CDN中，但是缓存和缓存破坏仍然需要处理。</p><h1 id="450d" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">更多阅读</h1><ul class=""><li id="b2c7" class="lu lv hh ig b ih kc il kd ip mi it mj ix mk jb ml ma mb mc bi translated">要了解内置组件的样式，请参见<a class="ae jc" href="https://igor-polyakov.com/2016/11/25/how-to-style-built-in-scs-components/" rel="noopener ugc nofollow" target="_blank"> Igor的博客</a></li><li id="00d2" class="lu lv hh ig b ih mm il mn ip mo it mp ix mq jb ml ma mb mc bi translated"><a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/content-cloud/developer/index.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">为Oracle内容和体验云开发</strong> </a></li></ul><h1 id="a2b1" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">评论家</h1><p id="2e5e" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">感谢<strong class="ig hi">邦妮·沃恩</strong>、<strong class="ig hi">伊戈尔·波利亚科夫</strong>、<strong class="ig hi">卡迈勒·卡普尔</strong>和<strong class="ig hi">史蒂夫·伯恩斯</strong>审阅本文。</p></div></div>    
</body>
</html>