<html>
<head>
<title>Delete All Git Branch Except 1 With Bash Script</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Bash脚本删除除1以外的所有Git分支</h1>
<blockquote>原文：<a href="https://medium.easyread.co/delete-all-git-branch-except-1-with-bash-script-f29087c70863?source=collection_archive---------5-----------------------#2020-07-13">https://medium.easyread.co/delete-all-git-branch-except-1-with-bash-script-f29087c70863?source=collection_archive---------5-----------------------#2020-07-13</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="2602" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">当在一个团队中为一个项目编码时，拥有Git存储库的多个分支是不可避免的，并且以后它会使我们的工作空间被我们不再使用的分支所膨胀。</p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><figure class="kq kr ks kt gt ku gh gi paragraph-image"><div role="button" tabindex="0" class="kv kw di kx bf ky"><div class="gh gi kp"><img src="../Images/665340e060a1c7ac6f666a7645a4b168.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EHUvbFQgOQ1StFvO"/></div></div><figcaption class="lb lc gj gh gi ld le bd b be z dk">Photo by <a class="ae lf" href="https://unsplash.com/@thoughtcatalog?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Thought Catalog</a> on <a class="ae lf" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="27c2" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我们的机器中删除一个本地Git分支非常简单:</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="9bc4" class="ll lm in lh b gy ln lo l lp lq"><strong class="lh io">git branch -D &lt;branch_name&gt;</strong></span></pre><p id="164d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">但是如果我们有超过10个分支(这是非常可能的),重复这个命令是一个糟糕的选择并且花费时间。然后我在网上搜索git命令如何删除除了<em class="lr"> master以外的所有分支。</em></p><p id="d48b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> <em class="lr">为什么大师分支？</em> </strong>因为Git中默认的根分支是master，而且很多程序员在部署应用之前都是用里面的代码作为基础代码。这是我的发现:</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="b0dd" class="ll lm in lh b gy ln lo l lp lq"><strong class="lh io">git branch | grep -ve " master$" | xargs git branch -D</strong></span></pre><p id="3ab6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">该命令由产生多个结果的多个命令组成，有:</p><ol class=""><li id="5c00" class="ls lt in jm b jn jo jr js jv lu jz lv kd lw kh lx ly lz ma bi translated">列出所有前缀为<code class="fe mb mc md lh b"><strong class="jm io">master</strong></code>的分支名称</li><li id="fa09" class="ls lt in jm b jn me jr mf jv mg jz mh kd mi kh lx ly lz ma bi translated">获取所有分支名称，并将其作为参数传递给<br/> <code class="fe mb mc md lh b"><strong class="jm io">git branch -D</strong></code>命令。</li></ol><p id="f26f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我尝试了这个命令，它运行得很完美，但是有一个问题。这是分支机构的名称。我认为我们作为程序员有时需要删除所有现有的分支，包括主分支，但不包括另一个名称。</p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><p id="96d3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">所以我决定创建一个简单的bash脚本来运行一个git命令，它可以删除除1分支以外的所有分支。</p><p id="b996" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这个脚本很简单，它只接受一个参数来替换git命令中的分支名称。</p><p id="c1d3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">以下是脚本:</p><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="mj mk l"/></div></figure><p id="2f5f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">要运行该脚本，您只需键入:</p><pre class="kq kr ks kt gt lg lh li lj aw lk bi"><span id="8f7e" class="ll lm in lh b gy ln lo l lp lq"><strong class="lh io">./script.sh &lt;branch_name&gt;</strong></span></pre><p id="bd49" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io">简单对吧？</strong></p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><p id="32e7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你想查看完整的脚本，有一个<code class="fe mb mc md lh b"><strong class="jm io">help</strong></code>页面，你可以从我的回购中看到它:</p><div class="ml mm gp gr mn mo"><a href="https://github.com/ridhoperdana/brove" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd io gy z fp mt fr fs mu fu fw im bi translated">ridhoperdana/brove</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">简单的Git分支移除。在GitHub上创建帐户，为ridhoperdana/brove开发做出贡献。</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">github.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc kz mo"/></div></div></a></div><p id="fe21" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">祝您愉快！🖖</p></div><div class="ab cl ki kj hr kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ig ih ii ij ik"><figure class="kq kr ks kt gt ku"><div class="bz fp l di"><div class="nd mk l"/></div></figure></div></div>    
</body>
</html>