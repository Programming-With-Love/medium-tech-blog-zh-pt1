# 项目从 Flex 迁移到 Angular / HTML5

> 原文：<https://medium.com/quick-code/project-migration-from-flex-to-angular-js-html5-ba43f54676ed?source=collection_archive---------0----------------------->

去年春天，我的团队发布了对英特尔软件公司企业开发主管 T2 的采访。在那里，我们讨论了即将停止的 Flex 支持和项目向其他技术的强制迁移。

![](img/660565ce2aeb5965ba03a1e9e4773faa.png)

事情是这样的，2017 年 7 月底，Adobe 代表在该公司的官方博客[中宣布](https://www.reuters.com/article/us-adobe-systems-flash/adobe-to-pull-plug-on-flash-ending-an-era-idUSKBN1AA22R)到 2020 年将完全停止 Flex 支持，因为许多浏览器由于安全问题已经开始放弃它。2020 年即将到来，因此我们决定再次与 Pavel 会面，更详细地讨论迁移流程本身，特别是我们的团队如何处理此类项目。

# -自上次访谈以来，灵活迁移请求的数量是否有所增加？

-请求数量大幅增加，大约增加了 4 倍。客户现在更加意识到切换到 HTML5 或 JS 的必然性。即使是那些去年有所怀疑的人也明白，Flash 的发展方向陷入了僵局，向其他技术的迁移正在进行中——对大多数人来说，这意味着 HTML5。

# -迁移过程通常是如何发生的？

-在迁移过程中，我们通常会尝试保留后端，只开发新的前端，这样可以优化成本并节省宝贵的时间。

![](img/5cd21c0292d4cf4c1b8d1241339c97a3.png)

我们从定义新 UI 的需求开始。可能会有一些选择:新的 UI 应该和旧的几乎一样，也许在设计上有最小的变化，但功能通常会保留 90%。另一种选择也是可能的——当新技术出现时，客户可能希望对 UI 和 UX 进行重大更改，直到某些功能应该以不同的方式工作，并且需要添加新的功能。这是一个更复杂的选项，在这种情况下，需要对服务器进行更改。

# -如果 UI/UX 经历了重大变化，迁移现有项目是否有利可图，或者创建一个新项目是否更容易？

-想法是从 Flash 迁移到 angular，无论如何，都涉及到重写 UI。旧代码的重用或自动生成不会发生。有时可以采用逻辑的某些方面:设计、资产、图形，但一般来说，应用程序是从头开始开发的。

# -有什么工具可以自动化迁移过程吗？

-我们用了任何不寻常的东西。根据个人经验，我可以说最好是从头开始开发，这样以后您就可以得到一个可靠的、可以支持和改进的应用程序。

在迁移到 Angular 的情况下，在它的第二个版本之后，Angular 开始使用 Typescript。这种语言本身与 Flash/Flex 中使用的 [ActionScript](https://en.wikipedia.org/wiki/ActionScript) (EcmaScript)非常相似，因此代码必须进行改编而不是完全重写——语法非常相似。略有不同的是，ActionScript 在其插件中工作，而 TypeScript 被翻译成 JS。但这只是有一点不同。

自动化很难应用，在用 ActionScript 编写的应用程序中，有些库没有 TypeScript 的类似物。此外，我们应该考虑到 Angular 框架的一些特性——可视化是相似的，例如，当与 ActionScript 比较时， [MXML](https://en.wikipedia.org/wiki/MXML) 标记也被使用。结构本身是相似的，但是有区别。

如果我们考虑一个富前端应用程序，那么业务逻辑可以部分自动化。或许可以找到一些实用类的工具。然而，为了节省时间，我们不应该不复习就离开这些课。通常，业务逻辑前端的核心类需要依赖注入。在 ActionScript 中，经常使用荷兰芹库，它允许您调度事件和注入一些类。Angular 有自己的注射剂，但它不像欧芹那样起作用。它不允许您进行循环注射。所以我们必须编写我们的[依赖注入](https://en.wikipedia.org/wiki/Dependency_injection)和[消息分派器](https://access.redhat.com/documentation/en-US/Fuse_ESB_Enterprise/7.1/html/Implementing_Enterprise_Integration_Patterns/files/MsgEnd-Dispatcher.html)。

![](img/ab4cb459af250fbd8e351788280f961d.png)

一般来说，这完全取决于您要迁移的应用程序以及其中使用的库。

我还要说，为了进一步支持和加快迁移速度，TypeScript 是最合适的选择。如果你迁移到另一个使用 JS 的框架，而不是 angular，那么这将需要更长的时间。TypeScript 非常重要，因此 Angular 最适合语言结构和相似性。我们甚至不需要寻找任何自动化工具。

在任何情况下，所有东西都必须被审查，即使代码是用工具审查的，你也必须仔细检查每一行，速度上的差异是微不足道的。因为当你重写时，你也用 TypeScript 复制 ActionScript 类，然后检查每一行并稍作修改，并寻找需要干预的代码段，这些代码段由于语言的不同而必须重写。意思是需要审查，以确保一切都是正确的。

# -我们的开发人员如何应对正在进行的迁移项目？

-我们的团队成功应对了当前的任务:我们有许多在 Flash / Flex 开发和 HTML5 方面经验丰富的专家。因此，我们的专家不仅可以开发新的用户界面，还可以分析用 Flash 编写的用户界面，并使用逆向工程，找出它以前是如何工作的。这节省了客户的时间，因为他们不需要描述它过去是如何工作的。我们的业务分析师和开发人员可以自己发现它。

# -哪些项目不值得迁移？

-不值得迁移的产品可能包括一些复杂的产品，这些产品不会再更新，而且用户数量有限。然后在适当的工作场所，你将不得不使用支持 Flash 的过时版本的浏览器。

在我看来，只有在内部使用的情况下才有可能，因为产品的消费者是公司的员工。如果产品主要用于公共用途，那么迁移是绝对必要的，并且必须尽快完成。

如果在闪存上设计的软件安装在企业的某个地方，并且没有计划进一步更新，那么，当然，您可以让它保持原样:它仍将工作一段时间。现在，在政府机构中，你可以找到用 Delphi 写的软件，它能工作，但问题是现在没有人能开发和更新这样的软件。所以，最终，它会简单地“死亡”，需要用别的东西来代替。