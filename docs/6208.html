<html>
<head>
<title>Building interactive email with AMP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AMP构建交互式电子邮件</h1>
<blockquote>原文：<a href="https://medium.com/pinterest-engineering/building-interactive-email-with-amp-2a90969c0093?source=collection_archive---------2-----------------------#2019-05-22">https://medium.com/pinterest-engineering/building-interactive-email-with-amp-2a90969c0093?source=collection_archive---------2-----------------------#2019-05-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="bf90" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">田方正|软件工程师，成长工程</p><p id="2821" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">AMP(加速移动网页)是Google为支持快速移动网页而开发的开源技术。多年来，我们一直与谷歌合作，并在我们的移动网页中采用AMP技术，以提供更快、更高效的用户体验。</p><p id="1589" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最近，我们采用了AMP 的最新版本<a class="ae jc" href="https://amp.dev/documentation/guides-and-tutorials/learn/amp-email-format" rel="noopener ugc nofollow" target="_blank">,将AMP的支持扩展到所有Gmail客户端，使我们发送给Pinners的电子邮件具有交互性。通过这些更新，AMP电子邮件的工作方式更像网页或移动应用程序，使Pinners能够在电子邮件中执行各种操作，包括保存pin。</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/ca7ae95e47411e5313ac88f4c49c386a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5C5_eGLEH0Ee8kgh"/></div></div></figure><h1 id="0364" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">阅读、保存、开始</h1><p id="f7a8" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">我们向Pinners提供个性化推荐的渠道之一是电子邮件。我们不断向Pinners提出建议，并且我们一直在寻找让这种交流更有吸引力的方法。我们将电子邮件视为我们核心产品的延伸——一种增强理解和展示我们产品价值的方式。</p><p id="5452" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通常，当Pinner收到我们的电子邮件时，他们必须点击电子邮件中的Pin，然后被定向到Pinterest.com或移动应用程序，可能会登录，并保存到留言板。这个过程越长，用户就越有可能不采取行动。借助AMP for Gmail，我们看到了通过电子邮件提高参与度的巨大机会。</p><p id="1ae7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，电子邮件不再局限于静态内容，读者可以立即使用Pinterest。非常适合Pinterest。如果Pinner从他们的电子邮件中看到一个想法，他们可以立即保存它。</p><h1 id="14d6" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">给电子邮件带来交互性</h1><p id="dc6b" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">作为一个概述，AMP技术包括AMP HTML、AMP JS和AMP Cache作为一个完整的套件，用于支持移动web开发的各种需求。但出于启用Javascript的安全考虑，目前谷歌在邮件中只支持AMP HTML。考虑到这一点，在设计电子邮件UI时，我们限制了动画的使用，并通过CSS或AMP HTML标签支持动画。为了更好地适应Pinners的习惯，我们保留了典型的引脚网格。</p><p id="1dfd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们与谷歌同时开发了更新，并在整个过程中提供反馈。</p><p id="929b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在整个开发过程中，我们也始终牢记安全性。由于电子邮件不能拥有会话或用户登录功能，我们需要为AMP电子邮件中的两个主要Pinterest操作生成自动登录URL:获取用户的公告板和将Pin保存到公告板。尽管这些URL是预编码的，但我们采取了额外的措施来防止垃圾邮件。当Gmail客户端捕捉到一个Pinterest动作时，它会向谷歌发出GET/POST请求。然后Google<a class="ae jc" href="https://developers.google.com/gmail/ampemail/authenticating-requests" rel="noopener ugc nofollow" target="_blank">为这个请求生成并附加一个安全令牌</a>,并将请求转发给Pinterest。在我们的服务收到请求后，我们在返回任何用户信息之前调用Google来验证这个令牌。这个额外的验证步骤确保了URL不会被滥用。</p><p id="ae57" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通常，Gmail的HTML大小限制是100k，所以我们对MIME也有限制。如果一封邮件超过100k，Gmail将显示限制范围内的第一部分，然后显示“显示完整邮件”按钮。但对于Gmail的AMP的最初推出，如果AMP HTML部分超过100k，将显示完整的正常静态邮件。因此，我们需要最小化我们的AMP电子邮件大小，同时最大化内容并优化交互体验。</p><h1 id="f4bd" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">AMP电子邮件的优势</h1><p id="dc0e" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">AMP电子邮件是下一代电子邮件技术，可提供更快、更具互动性的移动网络体验。这项技术也将得到微软Outlook、雅虎。和Mail.Ru。在行业领导者的支持和倡导下，我们对这一生态系统的未来增长持乐观态度。</p><p id="3493" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">AMP电子邮件也让Pinterest有机会更容易地收集用户反馈。例如，Pinners可以让我们知道他们是否不喜欢被推荐的Pin，这是最终使他们的整体Pinterest体验更相关的反馈。我们还在探索电子邮件中的Pin特写，这样Pinners就可以直接从电子邮件中获得Pin的更多细节。对于我们的主题推荐邮件，我们可以为用户启用主题选择器。用户现在甚至可以直接在电子邮件中关注他们感兴趣的话题。我们还在探索为Pinners添加使用AMP直接回复Pinterest邮件的功能。</p><p id="9267" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们目前正在向Pinners推出AMP电子邮件，同时继续努力使与Pinners的沟通尽可能跨平台、无缝和有吸引力。</p></div></div>    
</body>
</html>