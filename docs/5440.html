<html>
<head>
<title>Creating an Oracle REST Data Services Docker image</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建Oracle REST数据服务Docker映像</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/creating-an-oracle-rest-data-services-docker-image-20736ae97f0e?source=collection_archive---------7-----------------------#2018-05-14">https://medium.com/oracledevs/creating-an-oracle-rest-data-services-docker-image-20736ae97f0e?source=collection_archive---------7-----------------------#2018-05-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/337d7b9f44c5830d777adf3c0de1a93e.png" data-original-src="https://miro.medium.com/v2/resize:fit:448/format:webp/1*m_rrG4tMCMcL5L9CEF64Xw.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Oracle REST Data Services</figcaption></figure><p id="669a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">Oracle已经将Oracle REST数据服务(ORDS)添加到GitHub 上的<a class="ae jr" href="https://github.com/oracle/docker-images/tree/master/OracleRestDataServices/" rel="noopener ugc nofollow" target="_blank"> Docker构建文件家族中，这意味着您现在可以轻松地对ORDS进行dockerize。如果你还不知道ORDS是什么，它是甲骨文公司的一项免费的<strong class="iv hi"><em class="js"/></strong>技术，可以让你的甲骨文数据库实现REST-enable。更具体地说，使用ORDS，您可以直接启动常规的REST调用来修改或从一个或多个Oracle数据库中检索数据，而不必知道如何编写SQL并不是说懂SQL就是坏事！🙂在现代应用程序和微服务架构中，REST越来越普遍地用于交换信息。ORDS使您能够通过REST轻松地与Oracle数据库交换数据，而无需自己编写一行又一行的代码。更多关于ORDS是什么以及它能做什么的信息，请查看杰夫·史密斯关于ORDS的博客文章。</a></p></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><h1 id="8852" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">你需要什么</h1><ul class=""><li id="5744" class="ky kz hh iv b iw la ja lb je lc ji ld jm le jq lf lg lh li bi translated">ORDS的安装zip文件，你可以从<a class="ae jr" href="http://www.oracle.com/technetwork/developer-tools/rest-data-services/downloads/index.html" rel="noopener ugc nofollow" target="_blank">甲骨文技术网</a>下载</li><li id="e1a9" class="ky kz hh iv b iw lj ja lk je ll ji lm jm ln jq lf lg lh li bi translated">一个Java服务器JRE 8 Docker基础映像</li><li id="16bd" class="ky kz hh iv b iw lj ja lk je ll ji lm jm ln jq lf lg lh li bi translated">运行在某个地方的Oracle数据库，ORDS应该通过REST公开它</li></ul><p id="5f71" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我写这篇博客时的环境如下:</p><ul class=""><li id="7cb1" class="ky kz hh iv b iw ix ja jb je lo ji lp jm lq jq lf lg lh li bi translated">Oracle Linux 7.4(4 . 1 . 12–112 . 14 . 15 . El 7 uek . x86 _ 64)</li><li id="4add" class="ky kz hh iv b iw lj ja lk je ll ji lm jm ln jq lf lg lh li bi translated">docker 17 . 06 . 2-ol(docker-engine . x86 _ 64 17 . 06 . 2 . ol-1 . 0 . 1 . el7)</li><li id="49b9" class="ky kz hh iv b iw lj ja lk je ll ji lm jm ln jq lf lg lh li bi translated">Java服务器JRE 1.8.0_172</li><li id="d3cc" class="ky kz hh iv b iw lj ja lk je ll ji lm jm ln jq lf lg lh li bi translated">Oracle REST数据服务18.1.1</li></ul><h1 id="bdbd" class="ka kb hh bd kc kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx bi translated">构建Oracle REST数据服务Docker映像</h1><p id="f5f4" class="pw-post-body-paragraph it iu hh iv b iw la iy iz ja lb jc jd je lw jg jh ji lx jk jl jm ly jo jp jq ha bi translated">与所有来自Oracle的GitHub构建文件一样，您首先必须下载它们。有多种方法可以下载它们。例如，您可以直接克隆Git存储库。或者你可以从GitHub下载一个包含所有需要的文件的zip文件。这个选项最适合不懂Git的人。zip文件的URL是<a class="ae jr" href="https://github.com/oracle/docker-images/archive/master.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/oracle/docker-images/archive/master.zip</a>，你可以通过<code class="du lz ma mb mc b">wget</code>或你的浏览器下载，然后解压:</p><pre class="md me mf mg fd mh mc mi mj aw mk bi"><span id="b7cc" class="ml kb hh mc b fi mm mn l mo mp">$ wget <a class="ae jr" href="https://github.com/oracle/docker-images/archive/master.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/oracle/docker-images/archive/master.zip</a><br/>--2018-05-04 14:20:26-- <a class="ae jr" href="https://github.com/oracle/docker-images/archive/master.zip" rel="noopener ugc nofollow" target="_blank">https://github.com/oracle/docker-images/archive/master.zip</a><br/>Resolving github.com (github.com)... 192.30.255.113, 192.30.255.112<br/>Connecting to github.com (github.com)|192.30.255.113|:443... connected.<br/>HTTP request sent, awaiting response... 302 Found<br/>Location: <a class="ae jr" href="https://codeload.github.com/oracle/docker-images/zip/master" rel="noopener ugc nofollow" target="_blank">https://codeload.github.com/oracle/docker-images/zip/master</a> [following]<br/>--2018-05-04 14:20:26-- <a class="ae jr" href="https://codeload.github.com/oracle/docker-images/zip/master" rel="noopener ugc nofollow" target="_blank">https://codeload.github.com/oracle/docker-images/zip/master</a><br/>Connecting to codeload.github.com (codeload.github.com)|192.30.255.120|:443... connected.<br/>Proxy request sent, awaiting response... 200 OK<br/>Length: unspecified [application/zip]<br/>Saving to: ‘master.zip’<br/> <br/>[ &lt;=&gt; ] 7,601,317 5.37MB/s in 1.3s<br/> <br/>2018-05-04 14:20:28 (5.37 MB/s) - ‘master.zip’ saved [7601317]<br/> <br/>$ unzip master.zip<br/>Archive: master.zip<br/>184cded65f147766c41b2179ee31ba5551185507<br/>creating: docker-images-master/<br/>extracting: docker-images-master/.gitattributes<br/>inflating: docker-images-master/.gitignore<br/>extracting: docker-images-master/.gitmodules<br/>inflating: docker-images-master/CODEOWNERS<br/>inflating: docker-images-master/CONTRIBUTING.md<br/>...<br/>...<br/>...<br/>creating: docker-images-master/OracleRestDataServices/<br/>extracting: docker-images-master/OracleRestDataServices/.gitignore<br/>inflating: docker-images-master/OracleRestDataServices/COPYRIGHT<br/>inflating: docker-images-master/OracleRestDataServices/LICENSE<br/>inflating: docker-images-master/OracleRestDataServices/README.md<br/>creating: docker-images-master/OracleRestDataServices/dockerfiles/<br/>...<br/>...<br/>...<br/>inflating: docker-images-master/README.md<br/>$</span></pre><p id="58b8" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">接下来，你必须下载ORDS安装压缩文件。如上所述，您可以从<a class="ae jr" href="http://www.oracle.com/technetwork/developer-tools/rest-data-services/downloads/index.html" rel="noopener ugc nofollow" target="_blank">甲骨文技术网</a>获得:</p><pre class="md me mf mg fd mh mc mi mj aw mk bi"><span id="2b88" class="ml kb hh mc b fi mm mn l mo mp">$ ls -al ords.18*.zip<br/>-rw-r--r--. 1 oracle oracle 61118609 May 4 14:38 ords.18.1.1.95.1251.zip</span></pre><h1 id="af4f" class="ka kb hh bd kc kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx bi translated">构建Java服务器JRE基础映像</h1><p id="e9ac" class="pw-post-body-paragraph it iu hh iv b iw la iy iz ja lb jc jd je lw jg jh ji lx jk jl jm ly jo jp jq ha bi translated">ORDS码头形象建立在<code class="du lz ma mb mc b">oracle/serverjre:8</code>基础形象的基础上。该图像不在Docker Hub上，因此Docker不能自动提取图像。相反，您必须先构建该映像，然后才能继续构建ORDS映像。构建Java服务器JRE映像非常简单。首先，您需要从<a class="ae jr" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" rel="noopener ugc nofollow" target="_blank">甲骨文技术网</a>下载最新的<code class="du lz ma mb mc b">server-jre-8*linux-x64.tar.gz</code>文件:</p><pre class="md me mf mg fd mh mc mi mj aw mk bi"><span id="5a5b" class="ml kb hh mc b fi mm mn l mo mp">$ ls -al server-jre*.tar.gz<br/>-rw-r--r--. 1 oracle oracle 54817401 May 4 14:30 server-jre-8u172-linux-x64.tar.gz</span></pre><p id="f1fc" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">一旦有了这个文件，将它复制到<code class="du lz ma mb mc b">OracleJava/java-8</code>文件夹中，并运行Java Server JRE Docker <code class="du lz ma mb mc b">build.sh</code>脚本:</p><pre class="md me mf mg fd mh mc mi mj aw mk bi"><span id="3e55" class="ml kb hh mc b fi mm mn l mo mp">$ cd docker-images-master/OracleJava/java-8<br/>$ cp ~/server-jre-8u172-linux-x64.tar.gz .<br/>$ ./build.sh<br/>Sending build context to Docker daemon 54.82MB<br/>Step 1/5 : FROM oraclelinux:7-slim<br/>---&gt; 9870bebfb1d5<br/>Step 2/5 : MAINTAINER Bruno Borges &lt;<a class="ae jr" href="mailto:bruno.borges@oracle.com" rel="noopener ugc nofollow" target="_blank">bruno.borges@oracle.com</a>&gt;<br/>---&gt; Running in b1847c1a647e<br/>---&gt; 3bc9baedf526<br/>Removing intermediate container b1847c1a647e<br/>Step 3/5 : ENV JAVA_PKG server-jre-8u*-linux-x64.tar.gz JAVA_HOME /usr/java/default<br/>---&gt; Running in 50998175529b<br/>---&gt; 017598682688<br/>Removing intermediate container 50998175529b<br/>Step 4/5 : ADD $JAVA_PKG /usr/java/<br/>---&gt; 6704a281de8b<br/>Removing intermediate container b6b6a08d3c38<br/>Step 5/5 : RUN export JAVA_DIR=$(ls -1 -d /usr/java/*) &amp;&amp; ln -s $JAVA_DIR /usr/java/latest &amp;&amp; ln -s $JAVA_DIR /usr/java/default &amp;&amp; alternatives --install /usr/bin/java java $JAVA_DIR/bin/java 20000 &amp;&amp; alternatives --install /usr/bin/javac javac $JAVA_DIR/bin/javac 20000 &amp;&amp; alternatives --install /usr/bin/jar jar $JAVA_DIR/bin/jar 20000<br/>---&gt; Running in 281fe2343d2c<br/>---&gt; f65b2559f3a5<br/>Removing intermediate container 281fe2343d2c<br/>Successfully built f65b2559f3a5<br/>Successfully tagged or<!-- -->acle/serverjre:8<br/>$</span></pre><p id="21d8" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">就是这样！现在你有了一个全新的<code class="du lz ma mb mc b">oracle/serverjre:8</code>码头工人形象:</p><pre class="md me mf mg fd mh mc mi mj aw mk bi"><span id="81ae" class="ml kb hh mc b fi mm mn l mo mp">$ docker images<br/>REPOSITORY          TAG            IMAGE ID        CREATED           SIZE<br/>oracle/serverjre    8              f65b2559f3a5    45 seconds ago    269MB<br/>oracle/database     12.2.0.1-se2   323887b92e8f    3 weeks ago       6.38GB<br/>oracle/database     12.2.0.1-ee    08d230aa1d55    3 weeks ago       6.39GB<br/>oracle/database     12.1.0.2-se2   b4999e09453e    3 weeks ago       5.08GB<br/>oracle/database     12.1.0.2-ee    aee62bc26119    3 weeks ago       5.18GB<br/>oracle/database     11.2.0.2-xe    50712d409891    3 weeks ago       809MB<br/>oraclelinux         7-slim         9870bebfb1d5    5 months ago      118MB<br/>$</span></pre><h1 id="75ff" class="ka kb hh bd kc kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx bi translated">树立ORDS码头工人的形象</h1><p id="28c3" class="pw-post-body-paragraph it iu hh iv b iw la iy iz ja lb jc jd je lw jg jh ji lx jk jl jm ly jo jp jq ha bi translated">一旦你的机器上有了<code class="du lz ma mb mc b">oracle/serverjre:8</code> Docker映像，你现在就可以开始构建实际的ORDS Docker映像了。这也是一个相当简单的任务，只需将安装程序zip文件放入<code class="du lz ma mb mc b">OracleRestDataServices/dockerfiles/</code>文件夹并运行<code class="du lz ma mb mc b">buildDockerImage.sh</code>脚本:</p><pre class="md me mf mg fd mh mc mi mj aw mk bi"><span id="152b" class="ml kb hh mc b fi mm mn l mo mp">$ cd ../../OracleRestDataServices/dockerfiles/<br/>$ mv ~/ords.18.1.1.95.1251.zip .<br/>$ ./buildDockerImage.sh<br/>Checking if required packages are present and valid...<br/>ords.18.1.1.95.1251.zip: OK<br/>==========================<br/>DOCKER info:<br/>Containers: 2<br/>Running: 0<br/>Paused: 0<br/>Stopped: 2<br/>Images: 10<br/>Server Version: 17.06.2-ol<br/>Storage Driver: btrfs<br/>Build Version: Btrfs v4.9.1<br/>Library Version: 102<br/>Logging Driver: json-file<br/>Cgroup Driver: cgroupfs<br/>Plugins:<br/>Volume: local<br/>Network: bridge host ipvlan macvlan null overlay<br/>Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog<br/>Swarm: inactive<br/>Runtimes: runc<br/>Default Runtime: runc<br/>Init Binary: docker-init<br/>containerd version: 6e23458c129b551d5c9871e5174f6b1b7f6d1170<br/>runc version: 810190ceaa507aa2727d7ae6f4790c76ec150bd2<br/>init version: 949e6fa<br/>Security Options:<br/>seccomp<br/>Profile: default<br/>selinux<br/>Kernel Version: 4.1.12-112.14.15.el7uek.x86_64<br/>Operating System: Oracle Linux Server 7.4<br/>OSType: linux<br/>Architecture: x86_64<br/>CPUs: 2<br/>Total Memory: 7.795GiB<br/>Name: localhost.localdomain<br/>ID: GZ5A:XQWB:F5TE:56JE:GR3J:VCXJ:I7BO:EGMY:K52K:JAS3:A7ZC:BOHQ<br/>Docker Root Dir: /var/lib/docker<br/>Debug Mode (client): false<br/>Debug Mode (server): false<br/>Registry: <a class="ae jr" href="https://index.docker.io/v1/" rel="noopener ugc nofollow" target="_blank">https://index.docker.io/v1/</a><br/>Experimental: true<br/>Insecure Registries:<br/>127.0.0.0/8<br/>Live Restore Enabled: false<br/> <br/>==========================<br/>Proxy settings were found and will be used during build.<br/>Building image 'oracle/restdataservices:18.1.1' ...<br/>Sending build context to Docker daemon 61.14MB<br/>Step 1/10 : FROM oracle/serverjre:8<br/>---&gt; f65b2559f3a5<br/>Step 2/10 : LABEL maintainer "<a class="ae jr" href="mailto:gerald.venzl@oracle.com" rel="noopener ugc nofollow" target="_blank">gerald.venzl@oracle.com</a>"<br/>---&gt; Running in d90ea0da50ae<br/>---&gt; 8959f49c8b7b<br/>Removing intermediate container d90ea0da50ae<br/>Step 3/10 : ENV ORDS_HOME /opt/oracle/ords INSTALL_FILE ords*.zip CONFIG_PROPS "ords_params.properties.tmpl" STANDALONE_PROPS "standalone.properties.tmpl" RUN_FILE "runOrds.sh"<br/>---&gt; Running in 84ae509c3b08<br/>---&gt; 595f8228d224<br/>Removing intermediate container 84ae509c3b08<br/>Step 4/10 : COPY $INSTALL_FILE $CONFIG_PROPS $STANDALONE_PROPS $RUN_FILE $ORDS_HOME/<br/>---&gt; 992d15c48302<br/>Removing intermediate container 3088dd27464e<br/>Step 5/10 : RUN mkdir -p $ORDS_HOME/doc_root &amp;&amp; chmod ug+x $ORDS_HOME/*.sh &amp;&amp; groupadd dba &amp;&amp; useradd -d /home/oracle -g dba -m -s /bin/bash oracle &amp;&amp; cd $ORDS_HOME &amp;&amp; jar -xf $INSTALL_FILE &amp;&amp; rm $INSTALL_FILE &amp;&amp; mkdir -p $ORDS_HOME/config/ords &amp;&amp; java -jar $ORDS_HOME/ords.war configdir $ORDS_HOME/config &amp;&amp; chown -R oracle:dba $ORDS_HOME<br/>---&gt; Running in a84bc25b8eb3<br/>May 04, 2018 6:42:22 PM<br/>INFO: Set config.dir to /opt/oracle/ords/config in: /opt/oracle/ords/ords.war<br/>---&gt; 6ccfc92744ed<br/>Removing intermediate container a84bc25b8eb3<br/>Step 6/10 : USER oracle<br/>---&gt; Running in c41c77b49add<br/>---&gt; 2bd11f2f8008<br/>Removing intermediate container c41c77b49add<br/>Step 7/10 : WORKDIR /home/oracle<br/>---&gt; bc31d79cfb4a<br/>Removing intermediate container efef9dccf774<br/>Step 8/10 : VOLUME $ORDS_HOME/config/ords<br/>---&gt; Running in dfbc7ee6f967<br/>---&gt; 0ee4e7ed71b1<br/>Removing intermediate container dfbc7ee6f967<br/>Step 9/10 : EXPOSE 8888<br/>---&gt; Running in deaebbf2950b<br/>---&gt; 25d777caccca<br/>Removing intermediate container deaebbf2950b<br/>Step 10/10 : CMD $ORDS_HOME/$RUN_FILE<br/>---&gt; Running in 0c2270a7fac4<br/>---&gt; 4ee1ac73e1f9<br/>Removing intermediate container 0c2270a7fac4<br/>Successfully built 4ee1ac73e1f9<br/>Successfully tagged oracle/restdataservices:18.1.1<br/> <br/>Oracle Rest Data Services version 18.1.1 is ready to be extended:<br/> <br/>--&gt; oracle/restdataservices:18.1.1<br/> <br/>Build completed in 19 seconds.<br/> <br/>$</span></pre><p id="27a7" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在你有一个全新的ORDS码头形象，在我的情况下包含ORDS 18.1.1:</p><pre class="md me mf mg fd mh mc mi mj aw mk bi"><span id="0147" class="ml kb hh mc b fi mm mn l mo mp">$ docker images<br/>REPOSITORY                 TAG             IMAGE ID        CREATED           SIZE<br/>oracle/restdataservices    18.1.1          4ee1ac73e1f9    52 seconds ago    395MB<br/>oracle/serverjre           8               f65b2559f3a5    10 minutes ago    269MB<br/>oracle/database            12.2.0.1-se2    323887b92e8f    3 weeks ago       6.38GB<br/>oracle/database            12.2.0.1-ee     08d230aa1d55    3 weeks ago       6.39GB<br/>oracle/database            12.1.0.2-se2    b4999e09453e    3 weeks ago       5.08GB<br/>oracle/database            12.1.0.2-ee     aee62bc26119    3 weeks ago       5.18GB<br/>oracle/database            11.2.0.2-xe     50712d409891    3 weeks ago       809MB<br/>oraclelinux                7-slim          9870bebfb1d5    5 months ago      118MB</span></pre><p id="928e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这里还有最后一点需要补充:默认情况下，<code class="du lz ma mb mc b">buildDockerImage.sh</code>脚本会对ORDS zip文件运行<code class="du lz ma mb mc b">md5sum</code>校验和，以确保文件完好无损。您会看到这是构建脚本的第一个输出。您可以通过传递<code class="du lz ma mb mc b">-i</code>选项跳过该校验和。一般来说，没有必要跳过校验和步骤，但是，ORDS每季度发布一次，可能GitHub repo还没有更新最新的校验和文件。在这种情况下，您仍然可以通过<code class="du lz ma mb mc b">-i</code>绕过校验和来构建您最新最棒的ORDS Docker映像。</p><h1 id="8971" class="ka kb hh bd kc kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx bi translated">在Docker容器中运行ORDS</h1><p id="4413" class="pw-post-body-paragraph it iu hh iv b iw la iy iz ja lb jc jd je lw jg jh ji lx jk jl jm ly jo jp jq ha bi translated">现在您已经有了一个ORDS Docker映像，是时候运行它的实际容器了。由于ORDS是Oracle数据库前面的REST服务器，您需要一个Oracle数据库，ORDS可以为您启用REST。我已经在同一台机器上安装了Oracle数据库Docker映像，因此我将继续在Docker容器中启用REST数据库。然而，我应该指出，在Docker容器中拥有一个<strong class="iv hi"> Oracle数据库并不是在Docker中运行ORDS的必要条件！</strong>事实上，无论您的Oracle数据库在哪里运行，Docker、本地、服务器、云中等等，您都可以用ORDS管理许多Oracle数据库。</p><h1 id="207b" class="ka kb hh bd kc kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx bi translated">设置Docker网络</h1><p id="899a" class="pw-post-body-paragraph it iu hh iv b iw la iy iz ja lb jc jd je lw jg jh ji lx jk jl jm ly jo jp jq ha bi translated"><strong class="iv hi">如果您的Oracle数据库没有在Docker容器中运行，您可以跳过这一步！</strong></p><p id="8160" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">因为数据库和ORDS都运行在Docker中，所以我首先必须建立一个Docker网络，这两个容器可以用它来相互通信。创建网络很容易，只需一个简单的命令<code class="du lz ma mb mc b">docker network create</code>:</p><pre class="md me mf mg fd mh mc mi mj aw mk bi"><span id="e001" class="ml kb hh mc b fi mm mn l mo mp">$ docker network create ords-database-network<br/>b96c9fd9062f3aa0fb37db3dcd6319c6e3daefb99f52b82819e06f84b3ad38a0<br/>$ docker network ls<br/>NETWORK ID NAME DRIVER SCOPE<br/>0cad4fa350c8 bridge bridge local<br/>0e6f604bfce9 host host local<br/>26709c337f2f none null local<br/>b96c9fd9062f ords-database-network bridge local<br/>$</span></pre><h1 id="26cf" class="ka kb hh bd kc kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx bi translated">运行Oracle数据库Docker容器</h1><p id="e7a2" class="pw-post-body-paragraph it iu hh iv b iw la iy iz ja lb jc jd je lw jg jh ji lx jk jl jm ly jo jp jq ha bi translated"><strong class="iv hi">如果您的Oracle数据库没有在Docker容器中运行，您可以跳过这一步！</strong></p><p id="5cbe" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><em class="js">关于如何在Docker中运行Oracle数据库，请参见</em> <a class="ae jr" href="https://geraldonit.com/2017/08/21/creating-an-oracle-database-docker-image/" rel="noopener ugc nofollow" target="_blank"> <em class="js">创建Oracle数据库Docker映像</em> </a> <em class="js">。</em></p><p id="db25" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">一旦定义了网络，现在就可以启动一个新的Oracle数据库容器。<code class="du lz ma mb mc b">docker run</code>命令中的<code class="du lz ma mb mc b">--network</code>选项将允许您将数据库容器连接到Docker网络:</p><pre class="md me mf mg fd mh mc mi mj aw mk bi"><span id="de99" class="ml kb hh mc b fi mm mn l mo mp">$ docker run -d --name ords-db --network=ords-database-network -v /home/oracle/oradata:/opt/oracle/oradata oracle/database:12.2.0.1-ee<br/>074e2e85ccdaf00d4ae5d93f56a2532154070a8f95083a343e78a753d748505b<br/>$</span></pre><h1 id="b5c1" class="ka kb hh bd kc kd lr kf kg kh ls kj kk kl lt kn ko kp lu kr ks kt lv kv kw kx bi translated">运行Oracle REST数据服务Docker容器</h1><p id="2243" class="pw-post-body-paragraph it iu hh iv b iw la iy iz ja lb jc jd je lw jg jh ji lx jk jl jm ly jo jp jq ha bi translated">要运行ORDS码头集装箱，您必须了解以下详细信息:</p><ul class=""><li id="ed31" class="ky kz hh iv b iw ix ja jb je lo ji lp jm lq jq lf lg lh li bi translated"><code class="du lz ma mb mc b">ORACLE_HOST</code>:运行Oracle数据库的主机(默认:localhost)</li><li id="e34f" class="ky kz hh iv b iw lj ja lk je ll ji lm jm ln jq lf lg lh li bi translated"><code class="du lz ma mb mc b">ORACLE_PORT</code>:运行Oracle数据库的端口(默认为1521)</li><li id="ae19" class="ky kz hh iv b iw lj ja lk je ll ji lm jm ln jq lf lg lh li bi translated"><code class="du lz ma mb mc b">ORACLE_SERVICE</code>:ORDS应该连接的Oracle数据库服务名(默认:ORCLPDB1)</li><li id="cb9c" class="ky kz hh iv b iw lj ja lk je ll ji lm jm ln jq lf lg lh li bi translated"><code class="du lz ma mb mc b">ORACLE_PWD</code>:Oracle数据库的SYS口令</li><li id="201a" class="ky kz hh iv b iw lj ja lk je ll ji lm jm ln jq lf lg lh li bi translated"><code class="du lz ma mb mc b">ORDS_PWD</code>:您想要使用的ORDS用户密码</li><li id="9b93" class="ky kz hh iv b iw lj ja lk je ll ji lm jm ln jq lf lg lh li bi translated">存储ORDS配置文件的卷</li></ul><p id="9532" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">一旦你拥有了所有这些，你就可以通过<code class="du lz ma mb mc b">docker run</code>命令运行你的ORDS Docker容器了。</p><p id="92ad" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">注意:</strong>因为我的数据库也在Docker中运行，所以我必须指定<code class="du lz ma mb mc b">--network</code>参数，以便允许两个容器进行通信。Docker网络中我的数据库主机的主机名与我的数据库Docker容器名相同。因此我将使用<code class="du lz ma mb mc b">-e ORACLE_HOST=ords-db</code>。</p><p id="307d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">如果Docker中没有运行Oracle数据库，可以跳过</strong> <code class="du lz ma mb mc b"><strong class="iv hi">--network</strong></code> <strong class="iv hi">参数！</strong></p><pre class="md me mf mg fd mh mc mi mj aw mk bi"><span id="8ea6" class="ml kb hh mc b fi mm mn l mo mp">$ docker run --name ords \<br/>&gt; -p 8888:8888 \<br/>&gt; --network=ords-database-network \<br/>&gt; -e ORACLE_HOST=ords-db \<br/>&gt; -e ORACLE_PORT=1521 \<br/>&gt; -e ORACLE_SERVICE=ORCLPDB1 \<br/>&gt; -e ORACLE_PWD=LetsDocker \<br/>&gt; -e ORDS_PWD=LetsORDS \<br/>&gt; -v /home/oracle/ords:/opt/oracle/ords/config/ords:rw \<br/>&gt; oracle/restdataservices:18.1.1<br/>May 07, 2018 3:47:43 AM<br/>INFO: Updated configurations: defaults, apex_pu<br/>May 07, 2018 3:47:43 AM oracle.dbtools.installer.InstallerBase log<br/>INFO: Installing Oracle REST Data Services version 18.1.1.95.1251<br/>May 07, 2018 3:47:43 AM oracle.dbtools.installer.Runner log<br/>INFO: ... Log file written to /opt/oracle/ords/logs/ords_install_core_2018-05-07_034743_00762.log<br/>May 07, 2018 3:47:44 AM oracle.dbtools.installer.Runner log<br/>INFO: ... Verified database prerequisites<br/>May 07, 2018 3:47:45 AM oracle.dbtools.installer.Runner log<br/>INFO: ... Created Oracle REST Data Services schema<br/>May 07, 2018 3:47:45 AM oracle.dbtools.installer.Runner log<br/>INFO: ... Created Oracle REST Data Services proxy user<br/>May 07, 2018 3:47:45 AM oracle.dbtools.installer.Runner log<br/>INFO: ... Granted privileges to Oracle REST Data Services<br/>May 07, 2018 3:47:48 AM oracle.dbtools.installer.Runner log<br/>INFO: ... Created Oracle REST Data Services database objects<br/>May 07, 2018 3:47:56 AM oracle.dbtools.installer.Runner log<br/>INFO: ... Log file written to /opt/oracle/ords/logs/ords_install_datamodel_2018-05-07_034756_00488.log<br/>May 07, 2018 3:47:57 AM oracle.dbtools.installer.Runner log<br/>INFO: ... Log file written to /opt/oracle/ords/logs/ords_install_apex_2018-05-07_034757_00832.log<br/>May 07, 2018 3:47:59 AM oracle.dbtools.installer.InstallerBase log<br/>INFO: Completed installation for Oracle REST Data Services version 18.1.1.95.1251. Elapsed time: 00:00:15.397<br/> <br/>2018-05-07 03:48:00.688:INFO::main: Logging initialized <a class="ae jr" href="http://twitter.com/1507ms" rel="noopener ugc nofollow" target="_blank">@1507ms</a> to org.eclipse.jetty.util.log.StdErrLog<br/>May 07, 2018 3:48:00 AM<br/>INFO: HTTP and HTTP/2 cleartext listening on port: 8888<br/>May 07, 2018 3:48:00 AM<br/>INFO: The document root is serving static resources located in: /opt/oracle/ords/doc_root<br/>2018-05-07 03:48:01.505:INFO:oejs.Server:main: jetty-9.4.z-SNAPSHOT, build timestamp: 2017-11-21T21:27:37Z, git hash: 82b8fb23f757335bb3329d540ce37a2a2615f0a8<br/>2018-05-07 03:48:01.524:INFO:oejs.session:main: DefaultSessionIdManager workerName=node0<br/>2018-05-07 03:48:01.525:INFO:oejs.session:main: No SessionScavenger set, using defaults<br/>2018-05-07 03:48:01.526:INFO:oejs.session:main: Scavenging every 600000ms<br/>May 07, 2018 3:48:02 AM<br/>INFO: Creating Pool:|apex|pu|<br/>May 07, 2018 3:48:02 AM<br/>INFO: Configuration properties for: |apex|pu|<br/>cache.caching=false<br/>cache.directory=/tmp/apex/cache<br/>cache.duration=days<br/>cache.expiration=7<br/>cache.maxEntries=500<br/>cache.monitorInterval=60<br/>cache.procedureNameList=<br/>cache.type=lru<br/>db.hostname=ords-db<br/>db.password=******<br/>db.port=1521<br/>db.servicename=ORCLPDB1<br/>db.username=ORDS_PUBLIC_USER<br/>debug.debugger=false<br/>debug.printDebugToScreen=false<br/>error.keepErrorMessages=true<br/>error.maxEntries=50<br/>jdbc.DriverType=thin<br/>jdbc.InactivityTimeout=1800<br/>jdbc.InitialLimit=3<br/>jdbc.MaxConnectionReuseCount=1000<br/>jdbc.MaxLimit=10<br/>jdbc.MaxStatementsLimit=10<br/>jdbc.MinLimit=1<br/>jdbc.statementTimeout=900<br/>log.logging=false<br/>log.maxEntries=50<br/>misc.compress=<br/>misc.defaultPage=apex<br/>security.disableDefaultExclusionList=false<br/>security.maxEntries=2000<br/> <br/>May 07, 2018 3:48:02 AM<br/>WARNING: *** jdbc.MaxLimit in configuration |apex|pu| is using a value of 10, this setting may not be sized adequately for a production environment ***<br/>May 07, 2018 3:48:02 AM<br/>WARNING: *** jdbc.InitialLimit in configuration |apex|pu| is using a value of 3, this setting may not be sized adequately for a production environment ***<br/>May 07, 2018 3:48:02 AM<br/>INFO: Oracle REST Data Services initialized<br/>Oracle REST Data Services version : 18.1.1.95.1251<br/>Oracle REST Data Services server info: jetty/9.4.z-SNAPSHOT<br/> <br/>2018-05-07 03:48:02.710:INFO:oejsh.ContextHandler:main: Started o.e.j.s.ServletContextHandler@48eff760{/ords,null,AVAILABLE}<br/>2018-05-07 03:48:02.711:INFO:oejsh.ContextHandler:main: Started o.e.j.s.h.ContextHandler@402f32ff{/,null,AVAILABLE}<br/>2018-05-07 03:48:02.711:INFO:oejsh.ContextHandler:main: Started o.e.j.s.h.ContextHandler@573f2bb1{/i,null,AVAILABLE}<br/>2018-05-07 03:48:02.721:INFO:oejs.AbstractNCSARequestLog:main: Opened /tmp/ords_log/ords_2018_05_07.log<br/>2018-05-07 03:48:02.755:INFO:oejs.AbstractConnector:main: Started ServerConnector@2aece37d{HTTP/1.1,[http/1.1, h2c]}{0.0.0.0:8888}<br/>2018-05-07 03:48:02.755:INFO:oejs.Server:main: Started <a class="ae jr" href="http://twitter.com/3576ms" rel="noopener ugc nofollow" target="_blank">@3576ms</a></span></pre><p id="bfec" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在ORDS已经启动并运行了，您可以开始启用您的数据库了。注意，所有的配置文件都在一个卷中，在我的例子中是<code class="du lz ma mb mc b">-v /home/oracle/ords:/opt/oracle/ords/config/ords:rw</code>。如果您想更改任何ORDS配置，只需在卷中进行更改，然后根据需要重新启动容器。</p></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><p id="3b79" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><em class="js">原载于2018年5月14日【geraldonit.com】<a class="ae jr" href="https://geraldonit.com/2018/05/14/creating-an-oracle-rest-data-services-docker-image/" rel="noopener ugc nofollow" target="_blank"><em class="js"/></a><em class="js">。</em></em></p></div></div>    
</body>
</html>