<html>
<head>
<title>Today I Learned: Pass By Reference pada Parameter Interface di Golang</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Today I Learned: Pass By Reference pada Parameter Interface di Golang</h1>
<blockquote>原文：<a href="https://medium.easyread.co/today-i-learned-pass-by-reference-pada-parameter-interface-parameter-di-golang-c28c00f8b544?source=collection_archive---------3-----------------------#2019-03-23">https://medium.easyread.co/today-i-learned-pass-by-reference-pada-parameter-interface-parameter-di-golang-c28c00f8b544?source=collection_archive---------3-----------------------#2019-03-23</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="c8f9" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">Hati-hati Terhadap Pass by Reference dengan Interface di Golang</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/dac8a4a497be6bd4dc555be3364aa724.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*a6yBB5K1_k_aetILAqT8iw.png"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">pass by reference on interface parameter in Golang</figcaption></figure><p id="072c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Dimasa-masa kuliah, saya pernah belajar tentang 2 cara untuk membuat parameter pada sebuah fungsi, yaitu: <em class="lo"> Pass by Value </em> ( <strong class="ku io"> PBV </strong> ) dan <em class="lo"> Pass by Reference </em> ( <strong class="ku io"> PBR </strong> ). Kedua metode ini masing-masing memiliki kelebihan dan kekurangan serta penggunannya juga berbeda. Tidak sedikit orang yang sering terjebak dan bingung dengan kedua konsep metode ini.</p><p id="03ec" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Sederhananya, <strong class="ku io"> PBV </strong> ditandai dengan membuat parameter yang bukan berupa pointer (menunjuk) pada suatu alamat memori. Sedangkan <strong class="ku io"> PBR </strong> ditandai dengan membuat parameter yang menunjuk pada suatu alamat memori.</p><p id="af6f" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Dalam Golang, kedua metode ini dapat dilihat dalam bentuk berikut.</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="b76f" class="lu lv in lq b gy lw lx l ly lz">func passByValue(item <strong class="lq io">string</strong>){}<br/>func passByReference(item <strong class="lq io">*string</strong>){}</span></pre><h2 id="c340" class="lu lv in bd ma mb mc dn md me mf dp mg lb mh mi mj lf mk ml mm lj mn mo mp mq bi translated">Pass By Reference and Pass By Value in Golang</h2><p id="0f7d" class="pw-post-body-paragraph ks kt in ku b kv mr jo kx ky ms jr la lb mt ld le lf mu lh li lj mv ll lm ln ig bi translated">Bicara tentang contoh dan penjelasan lengkap tentang Pass by Reference dan Pass by Value kita dapat menemukannya di internet. Khususnya tentang Golang.</p><p id="8a07" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Namun meskipun demikian, berikut saya sertakan contoh sederhana penggunaan <strong class="ku io"> PBR </strong> dan <strong class="ku io"> PBV </strong></p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="1728" class="lu lv in lq b gy lw lx l ly lz">package main</span><span id="91af" class="lu lv in lq b gy mw lx l ly lz">import (<br/> "fmt"<br/>)</span><span id="0c34" class="lu lv in lq b gy mw lx l ly lz">func main() {<br/> item := ""<br/> passByValue(item)<br/> fmt.Println(item)<br/> passByReference(&amp;item)<br/> fmt.Println(item)<br/>}</span><span id="84fd" class="lu lv in lq b gy mw lx l ly lz">func passByValue(item string) {<br/> item = "hello"<br/>}</span><span id="b24e" class="lu lv in lq b gy mw lx l ly lz">func passByReference(item *string) {<br/> *item = "world"<br/>}</span></pre><p id="2ec8" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Di atas merupakan contoh penggunaan fungsi <strong class="ku io"> PBR </strong> dan <strong class="ku io"> PBV </strong> yang sering saya gunakan.</p><h2 id="a7df" class="lu lv in bd ma mb mc dn md me mf dp mg lb mh mi mj lf mk ml mm lj mn mo mp mq bi translated">Pass By Reference on Interface Param in Golang</h2><p id="0650" class="pw-post-body-paragraph ks kt in ku b kv mr jo kx ky ms jr la lb mt ld le lf mu lh li lj mv ll lm ln ig bi translated"><em class="lo"> Nah </em> , beberapa hari yang lalu, saya menemukan satu <em class="lo"> issue </em> sederhana, tetapi cukup memusingkan. Issue ini tentang <strong class="ku io"> PBR </strong> pada Golang yang menggunakan interface pada parameternya. Tidak seperti biasanya, fungsi ini menerima <code class="fe mx my mz lq b">interface{}</code> dan akan mengisi nilai param terebut berdasarkan <em class="lo"> logic </em> di dalamnya.</p><p id="c714" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Berikut adalah contohnya.</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="f075" class="lu lv in lq b gy lw lx l ly lz">func doSomethingWithThisParam(item interface{}){}</span></pre><p id="2371" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Fungsi ini cukup sederhana, hanya menerima sebuah parameter <em class="lo"> interface </em> dan di dalamnya parameter tersebut akan di <em class="lo"> hydrate </em> dan di isi <em class="lo"> value </em> .</p><p id="f7dc" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Untuk mencoba memahami dan menyelesaikan masalah ini, saya pun melakukan beberapa percobaan yang akan saya jelaskan dibawah.</p><h2 id="b3a8" class="lu lv in bd ma mb mc dn md me mf dp mg lb mh mi mj lf mk ml mm lj mn mo mp mq bi translated">Percobaan 1: Pointer to Interface <em class="na"> [Not Worked] </em></h2><p id="fa81" class="pw-post-body-paragraph ks kt in ku b kv mr jo kx ky ms jr la lb mt ld le lf mu lh li lj mv ll lm ln ig bi translated">Pada percobaan pertama, saya mencoba seperti layaknya parameter pointer lainnya. Saya langsung menambahkan pointer pada parameter fungsi tersebut. Namun langkah ini sepertinya tidak membuahkan hasil.</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="f02d" class="lu lv in lq b gy lw lx l ly lz">package main</span><span id="e83f" class="lu lv in lq b gy mw lx l ly lz">import (<br/> "fmt"<br/>)</span><span id="3b5b" class="lu lv in lq b gy mw lx l ly lz">func main() {<br/> var item Student<br/> doSomethinWithThisParam(&amp;item)<br/> fmt.Printf("%+v", item)<br/>}</span><span id="290c" class="lu lv in lq b gy mw lx l ly lz">type Student struct {<br/> ID   string<br/> Name string<br/>}</span><span id="1658" class="lu lv in lq b gy mw lx l ly lz">func doSomethinWithThisParam(item *interface{}) {<br/> *item = &amp;Student{<br/>  ID:   "124",<br/>  Name: "Iman Tumorang",<br/> }<br/>}</span></pre><p id="e4a5" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Jika dijalankan, code tersebut akan <em class="lo"> throw compilation error </em> . Artinya code tersebut tidak layak untuk dijalankan.</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="e06e" class="lu lv in lq b gy lw lx l ly lz">cannot use &amp;item (type *Student) as type *interface {} in argument to doSomethinWithThisParam:<br/>	*interface {} is pointer to interface, not interface</span></pre><h2 id="c599" class="lu lv in bd ma mb mc dn md me mf dp mg lb mh mi mj lf mk ml mm lj mn mo mp mq bi translated">Percobaan 2: Directly Assign Value to Interface [Not Worked]</h2><p id="3b89" class="pw-post-body-paragraph ks kt in ku b kv mr jo kx ky ms jr la lb mt ld le lf mu lh li lj mv ll lm ln ig bi translated">Pada percobaan kedua, saya pun mencoba tanpa pointer pada parameter interface fungsi tersebut. Namun didalamnya, saya langsung memberikan nilai pada parameter tersebut.</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="a340" class="lu lv in lq b gy lw lx l ly lz">func doSomethinWithThisParam(item interface{}) {<br/> item = &amp;Student{<br/>  ID:   "124",<br/>  Name: "Iman Tumorang",<br/> }<br/>}</span><span id="f3ec" class="lu lv in lq b gy mw lx l ly lz">// Print: {ID: Name:}</span></pre><p id="5e1a" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Dan sama seperti percobaan sebelumnya, percobaan ini juga gagal. Nilainya tidak berisi.</p><h2 id="0bd2" class="lu lv in bd ma mb mc dn md me mf dp mg lb mh mi mj lf mk ml mm lj mn mo mp mq bi translated">Percobaan 3: Casting to Original Type and Assign the Value [Worked but….]</h2><p id="b68d" class="pw-post-body-paragraph ks kt in ku b kv mr jo kx ky ms jr la lb mt ld le lf mu lh li lj mv ll lm ln ig bi translated">Selanjutnya, saya pun mencari alternatif lain. Sama seperti percobaan 2, saya tetap melakukan tanpa pointer pada parameter fungsi saya. Namun bedanya, kali ini saya lakukan casting interface tersebut kembali ke wujud originalnya.</p><p id="3249" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Tetapi untuk melakukan ini, saya harus benar-benar hati-hati dan teliti. Karena ada behavior yang aneh dan unik ketika melakukannya. Jelasnya perhatikan contoh berikut dibawah.</p><p id="3cc0" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io"> Not worked one <br/> </strong> Berikut contoh yang tidak bisa berjalan dengan baik. Nilainya tetap kosong.</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="b97a" class="lu lv in lq b gy lw lx l ly lz">func doSomethinWithThisParam(item interface{}) {<br/> origin := item.(*Student)<br/> origin = &amp;Student{<br/>  ID:   "124",<br/>  Name: "Iman Tumorang",<br/> }<br/>}</span><span id="0251" class="lu lv in lq b gy mw lx l ly lz">// Print: {ID: Name:}</span></pre><p id="4ce6" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io"> Worked one <br/> </strong> Lalu ini yang bisa berjalan dengan baik. Nilainya diisi oleh value yang saya isi.</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="1621" class="lu lv in lq b gy lw lx l ly lz">func doSomethinWithThisParam(item interface{}) {<br/> origin := item.(*Student)<br/> origin.Name = "Iman Tumorang"<br/> origin.ID = "124"<br/>}</span><span id="1d19" class="lu lv in lq b gy mw lx l ly lz">// Print: {ID:124 Name:Iman Tumorang}</span></pre><p id="6029" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Sedikit aneh, awalnya saya penasaran apa bedanya antara assign langsung pointer value, dari pada assign dengan langsung ke field seperti diatas.</p><p id="65e1" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Bagaimana mungkin jika saya lakukan seperti berikut dibawah tidak berjalan dengan baik?</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="b3f6" class="lu lv in lq b gy lw lx l ly lz">origin := item.(*Student)<br/>origin = &amp;Student{<br/>  ID:   "124",<br/>  Name: "Iman Tumorang",<br/> }</span></pre><p id="7360" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Namun ketika saya lakukan seperti berikut dibawah malah berjalan dengan baik?</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="2182" class="lu lv in lq b gy lw lx l ly lz">origin := item.(*Student)<br/>origin.Name = "Iman Tumorang"</span></pre><p id="99e6" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Butuh beberapa menit untuk memahami ini, meski pada akhirnya saya paham juga. Tetapi ini cukup bikin penasaran dan <em class="lo"> kzl </em> !</p><p id="536c" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io"> Another worked one <br/> </strong> Setelah mencoba beberapa hal, akhirnya saya mengerti juga. Yang pertama tidak bisa karena saya membuat alamat baru pada interface yang saya casting. Bukan malah mengisi value, tetapi saya malah mengganti address. Dan karena parameter tersebut sudah memiliki address sebelumnya, jika kita ubah maka tidak akan memberikan effect kepada <em class="lo"> function caller </em> .</p><p id="de26" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Lalu, untuk membuktikan hipotesa saya, berikut saya buat, dan berhasil.</p><pre class="kd ke kf kg gt lp lq lr ls aw lt bi"><span id="f34c" class="lu lv in lq b gy lw lx l ly lz">func doSomethinWithThisParam(item interface{}) {<br/> origin := item.(*Student)<br/> <strong class="lq io">*origin</strong> = Student{<br/>  ID:   "124",<br/>  Name: "Iman Tumorang",<br/> }<br/>}</span><span id="9eae" class="lu lv in lq b gy mw lx l ly lz">// Print: {ID:124 Name:Iman Tumorang}</span></pre><p id="6d6d" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><strong class="ku io"> Final Resolver <br/> </strong> Setelah cukup lama bereksperimen, akhirnya saya menetapkan pilihan solusi saya. Dan karena fungsi ini menerima interface, artinya bakal jadi generic. Maka saya pun menambahkan switch-case sesuai kebutuhan.</p><p id="2050" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated">Jika dilihat, simplenya, berikut contoh full-code saya.</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nb nc l"/></div></figure><h2 id="d78d" class="lu lv in bd ma mb mc dn md me mf dp mg lb mh mi mj lf mk ml mm lj mn mo mp mq bi translated">Conclusions</h2><p id="569b" class="pw-post-body-paragraph ks kt in ku b kv mr jo kx ky ms jr la lb mt ld le lf mu lh li lj mv ll lm ln ig bi translated">Issue ini cukup serius, dan bikin pusing. Kita harus benar-benar hati-hati ketika bekerja yang berhubungan dengan Pass by Reference dan <em class="lo"> interface{} </em> di Golang. Untuk menghindari bug-bug lucu, saya sangat menyarankan teman-teman untuk menambahkan unit-test pada setiap fungsi yang memiliki behavior Pass by Refference.</p><p id="f129" class="pw-post-body-paragraph ks kt in ku b kv kw jo kx ky kz jr la lb lc ld le lf lg lh li lj lk ll lm ln ig bi translated"><em class="lo"> Jujur saja, saya terjebak hampir satu jam lebih untuk issue ini. Jika menurut teman-teman hal ini adalah hal yang baik untuk diketahui, share article ini ke siapapun yang mungkin membutuhkannya, sehingga tidak perlu terjebak ke lubang yang sama hehe :D. </em></p></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nk nc l"/></div></figure></div><div class="ab cl nd ne hr nf" role="separator"><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni nj"/><span class="ng bw bk nh ni"/></div><div class="ig ih ii ij ik"><blockquote class="nl nm nn"><p id="87df" class="ks kt lo ku b kv kw jo kx ky kz jr la no lc ld le np lg lh li nq lk ll lm ln ig bi translated">Di terjemahkan dengan pengubahan dari <a class="ae nr" href="https://bxcodec.io/posts/today-i-learned-pass-by-reference-on-interface-parameter-in-golang/" rel="noopener ugc nofollow" target="_blank"> https://bxcodec.io/posts/today-i-learned-pass-by-reference-on-interface-parameter-in-golang </a></p></blockquote></div></div>    
</body>
</html>