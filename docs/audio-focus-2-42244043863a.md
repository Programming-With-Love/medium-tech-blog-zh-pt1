# 了解音频焦点(第 2 / 3 部分)

> 原文：<https://medium.com/androiddevelopers/audio-focus-2-42244043863a?source=collection_archive---------4----------------------->

![](img/0c4ab1766a0f092e461a5dbfaab4b12e.png)

## 更多音频焦点用例

这一系列文章的目标是让您深入了解什么是音频聚焦，为什么提供一个好的媒体 UX 很重要，以及如何使用它。这是该系列的第二部分，包括:

1.  [成为优秀媒体公民的重要性和最常见的音频焦点使用案例](/@nazmul/audio-focus-1-6b32689e4380)
2.  音频焦点对您的媒体应用程序的 UX 很重要的其他用例( ***本文*** )
3.  [在应用中实现音频聚焦的三个步骤](/@nazmul/audio-focus-3-cdc09da9c122)

本系列的第一篇文章介绍了您可能会遇到的两个最常见的用例，其中音频聚焦对于您的媒体应用程序的 UX 至关重要。本文将涵盖更多内容，并介绍您的应用程序可以请求的音频焦点类型的概念，以帮助微调音频应用程序的行为。

# 用例 1——一个在后台运行的导航应用程序在另一个应用程序播放音频的同时给出路线指引

## ***如果你的应用不能处理音频焦点会怎么样***

导航方向和音乐会重叠，这会分散用户的注意力。

## ***处理音频焦点的应用程序应该如何处理***

当导航应用程序说出下一个方向时，您的应用程序应该通过闪避来响应短暂的音频焦点丢失(因为这是导航应用程序所请求的)。

你的应用程序应该*闪开*(或者将音量降低到 20%左右)来应对这种暂时失去音频焦点的情况。例外情况是，如果您的应用程序正在播放有声读物、播客或朗读单词，在这种情况下，您应该暂停回放。

当说出方向后，导航应用程序将放弃音频焦点，您的应用程序将再次获得它。并且它应该将音量恢复到原始水平，作为对这种焦点获得的响应。

# 用例 2 —用户在打电话时启动游戏(播放音频)

## ***如果你的应用不能处理音频焦点会怎么样***

用户将对音乐和电话交谈重叠有不好的体验。

## ***你的 app 处理音频焦点*** 该怎么办

在 Android O 中，有一个名为*延迟音频聚焦增益*的音频聚焦功能就是为这种情况而创建的。这种情况的一个例子是用户在打电话时开始的游戏，他们想要继续玩而听不到任何音频，但是当电话结束时，他们想要听到来自游戏的音频。

如果你的应用程序支持这一点，并且它试图在用户打电话时播放音频(这已经获得了短暂的音频焦点)，那么会发生两件事。

1.  当您的应用程序请求永久音频焦点时，它将被拒绝授予焦点，因为它已被锁定。手机应用程序已经获得了短暂的音频焦点。你的应用程序不应该开始播放(它实际上会被授予音频焦点)。然而，如果你的应用是一个游戏，它可以在没有音频的情况下继续工作。
2.  当电话通话结束时，您的应用程序将获得*音频聚焦增益*。该授权在最初请求发出后延迟一段时间(当用户在打电话时)。你可以像在传递性损失后获得音频焦点一样处理这个问题。在这种情况下，它将开始音频播放。

奥利奥之前的安卓版本不支持*延迟音频聚焦增益*。在这些版本中，当你的应用程序试图在用户通话时开始音频播放时，音频聚焦请求将不会被批准，即使在他们结束通话后也不会开始播放。

# 用例 3——导航应用程序，或任何生成音频通知或提醒的应用程序

如果你正在构建一个短时间内产生突发音频的应用程序，那么音频聚焦对你来说是一件非常重要的事情，以便为你的用户提供一个好的 UX。这样做的应用程序的例子是生成通知声音或提醒声音的应用程序。或者在后台生成语音导航的应用程序。

假设您的应用程序正在后台运行，并且即将生成一些音频。当用户在听音乐或播客时，你的应用会在短时间内产生音频

在你的应用程序生成音频之前，它应该请求瞬时音频焦点(带有闪避选项)。只有当它被授予焦点时，它才应该播放音频。表现良好的音乐应用程序应该尊重其短暂的音频丢失，并回避；如果另一个应用程序是一个播客应用程序，那么它可能会考虑暂停，直到它重新获得音频焦点来继续播放。请求音频焦点失败将导致用户同时听到他们的音乐或播客以及你的应用的音频。

# 用例 4 —录音机应用程序或语音识别应用程序

如果您正在构建一个需要在一段时间内录制音频的应用程序，在此期间系统或其他应用程序不应发出任何声音(通知或其他媒体播放)，那么处理音频焦点对您提供良好的 UX 至关重要。这样做的应用程序的例子有语音备忘录记录应用程序或语音识别应用程序。

您的应用程序应该请求获得瞬时和独占的音频焦点。如果这是系统允许的，那么你可以开始录音，因为你知道系统产生的其他声音不会污染你的录音。在录制期间，如果其他应用程序请求音频聚焦，那么它们将被拒绝。当用户完成录音时，您应该放弃音频焦点，以便系统可以正常播放声音。

# 摘要

当您的应用程序需要输出音频时，它应该请求音频焦点(它可以请求不同类型的焦点)。

只有在它被授予焦点后，它才应该播放声音。但是，在您获得音频焦点后，您可能无法保持它，直到您的应用程序完成播放音频。

另一个应用程序可以请求焦点，这将抢占您对音频焦点的控制。在这种情况下，你的应用程序应该暂停播放或降低音量(闪避)，让用户更容易听到新的音频源。

在 Android O 上，如果你的应用程序在请求时无法获得音频焦点，系统可以在它可用时将其提供给应用程序(延迟焦点)。

要了解如何在应用中实现音频聚焦，请阅读本系列的最后一篇文章。

[](/@nazmul/audio-focus-3-cdc09da9c122) [## 了解音频焦点(第 3 / 3 部分)- Nazmul Idris (Naz) - Medium

### 这一系列文章的目标是让您深入了解什么是音频焦点，为什么它很重要…

medium.com](/@nazmul/audio-focus-3-cdc09da9c122) 

# Android 媒体资源

*   [示例代码— MediaBrowserService](https://github.com/googlesamples/android-MediaBrowserService)
*   [示例代码— MediaSession 控制器测试(支持音频焦点测试)](https://github.com/googlesamples/android-media-controller)
*   [了解媒体会话](/google-developers/understanding-mediasession-part-1-3-e4d2725f18e4)
*   [媒体 API 指南—媒体应用概述](https://developer.android.com/guide/topics/media-apps/media-apps-overview.html)
*   [媒体 API 指南—使用媒体会话](https://developer.android.com/guide/topics/media-apps/working-with-a-media-session.html)
*   [使用 MediaPlayer 构建简单的音频播放应用](/google-developers/building-a-simple-audio-app-in-android-part-1-3-c14d1a66e0f1)