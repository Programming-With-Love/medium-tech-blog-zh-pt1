<html>
<head>
<title>Deploying APEX on OCI with terraform</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用terraform在OCI部署APEX</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/deploying-apex-on-oracle-oci-with-terraform-213a56a25e1f?source=collection_archive---------2-----------------------#2021-06-15">https://medium.com/oracledevs/deploying-apex-on-oracle-oci-with-terraform-213a56a25e1f?source=collection_archive---------2-----------------------#2021-06-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/d77fd9309ce93e0c442c121c2848c462.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wXaomedjYrZH3wJR.png"/></div></div></figure><p id="2891" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您想在云中使用APEX，您的首选应该是使用Oracle APEX云服务或自治数据库。但是，如果您有一些依赖或约束阻止您使用其中之一，在OCI DBaaS(数据库虚拟机)上部署APEX仍然是一个选择。</p><p id="5457" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这种情况下，我强烈建议遵循APEX <a class="ae jn" href="https://docs.oracle.com/en-us/iaas/Content/Resources/Assets/whitepapers/oracle-apex-on-oci-database.pdf" rel="noopener ugc nofollow" target="_blank"> Terraform部署白皮书</a> ( <a class="ae jn" href="https://web.archive.org/web/20210604124834/https://docs.oracle.com/en-us/iaas/Content/Resources/Assets/whitepapers/oracle-apex-on-oci-database.pdf" rel="noopener ugc nofollow" target="_blank">存档版本</a>)并使用提供的<a class="ae jn" href="https://objectstorage.uk-london-1.oraclecloud.com/p/Syf5wONrf1h6j4GBcFFnWUAEtdFLdNDMWb7j0iPpIjcy838VxLfgNaqg_qcGRaPs/n/intdbaasecra/b/masito-SQLDeveloperWeb/o/ORDS-APEX_Comp.zip" rel="noopener ugc nofollow" target="_blank"> Terraform脚本</a> ( <a class="ae jn" href="https://objectstorage.uk-london-1.oraclecloud.com/p/Syf5wONrf1h6j4GBcFFnWUAEtdFLdNDMWb7j0iPpIjcy838VxLfgNaqg_qcGRaPs/n/intdbaasecra/b/masito-SQLDeveloperWeb/o/ORDS-APEX_Comp.zip" rel="noopener ugc nofollow" target="_blank">存档版本</a>)。</p><p id="7084" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">几个注意事项:</p><ul class=""><li id="2f12" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">在撰写本文时，该脚本只适用于terraform v 11(至少对我来说是这样)</li><li id="326d" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">最新APEX/ORDS版本的脚本存在一些问题</li></ul><p id="bc9d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">使用terraform 11 </strong></p><p id="c6dc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用旧版本TF最简单的方法是安装并配置<a class="ae jn" href="https://github.com/tfutils/tfenv" rel="noopener ugc nofollow" target="_blank"> tfenv </a>。如果您在mac上，<em class="kc"> brew install tfenv </em>可以工作，请参考<a class="ae jn" href="https://github.com/tfutils/tfenv/blob/master/README.md" rel="noopener ugc nofollow" target="_blank">自述文件</a>了解如何使用它。</p><p id="9ed6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">解决APEX/ORDS的TF脚本问题</strong></p><p id="7f3c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最近版本的APEX和ORDS有一点不同的反应，正如脚本所预期的，所以TF将在某个时候停止。请按照下列步骤解决问题:</p><p id="e913" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="kc">注意:这完全是我个人的解决方案，与Oracle无关，也不受Oracle支持！继续进行，后果自负！</em></p><ul class=""><li id="6525" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">解压<a class="ae jn" href="https://objectstorage.uk-london-1.oraclecloud.com/p/Syf5wONrf1h6j4GBcFFnWUAEtdFLdNDMWb7j0iPpIjcy838VxLfgNaqg_qcGRaPs/n/intdbaasecra/b/masito-SQLDeveloperWeb/o/ORDS-APEX_Comp.zip" rel="noopener ugc nofollow" target="_blank"> TF脚本</a></li><li id="b682" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">展开用户数据文件夹</li><li id="13b0" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">解压缩files_tomcat.zip</li><li id="ef0f" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated"><a class="ae jn" href="https://gist.githubusercontent.com/TheKashe/a4f98999c0a98c993a8e3fd7c20682d5/raw/a1a37235bdd4d38ab69b9611927201d549378313/gistfile1.txt" rel="noopener ugc nofollow" target="_blank">补丁</a> ords_setup_base.exp</li><li id="5b72" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated"><a class="ae jn" href="https://gist.githubusercontent.com/TheKashe/d4291f33e6e5fca9a484354627c07bd4/raw/0f78a4fbc2024346ec823f93d8d384fab7a39009/gistfile1.txt" rel="noopener ugc nofollow" target="_blank">补丁</a> ords_validate_base.exp</li><li id="959b" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">重命名文件_tomcat.zip</li><li id="28a7" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">将修补的文件压缩回files_tomcat.zip(保持结构)</li></ul><p id="9950" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在我的案例中，应用这些更改后，terraform过程成功完成。</p><p id="ff27" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="kc">现在我正在写这个故事，我注意到ords_setup_base.patch中的一个补丁只是重复了一个已经存在的expect可能不需要，但是我已经没有测试环境了，这是我用过的版本，所以我保留它。</em></p><p id="710a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="kc">这不是甲骨文的官方博客。这里的信息可能过时或不正确。观点是我自己的。</em></p></div></div>    
</body>
</html>