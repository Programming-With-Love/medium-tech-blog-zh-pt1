<html>
<head>
<title>Data Lifecycle Management: Versions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数据生命周期管理:版本</h1>
<blockquote>原文：<a href="https://medium.com/mendix/data-lifecycle-management-versions-a4b6e2c1c1a1?source=collection_archive---------2-----------------------#2021-08-24">https://medium.com/mendix/data-lifecycle-management-versions-a4b6e2c1c1a1?source=collection_archive---------2-----------------------#2021-08-24</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/2b8634e8e20b06bfcfac4d6e5adc8457.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LxTEhqMl9jDZMMXJ2nTZlg.png"/></div></div></figure><div class=""/><h1 id="92df" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">猫的版本</h1><p id="3e00" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">没有人知道，但这幅画的创作很可能是一个项目。也许他们设计了这只猫，这只猫是在一座山上的某个地方创造的，经理不满意，因为它太小了，他们在这座山上重新画了它，做了一些改变。第二只猫一准备好，第一只猫就被取消了，小山又恢复了原样。</p><p id="b77a" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">显然有两个版本的猫，每个版本都被启动和激活。其中一个版本甚至被取消，后来被删除。我们看到有两个版本:各有各的山头，各有各的规模，各有各的地位。</p><p id="1152" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">不难看出与行政系统的相似之处。在大多数系统中，一些实体有一个状态。从数据管理的角度来看，明智的做法是将一个版本分配给所有主要实体(主要实体是在现实生活中有表示的实体，您可以实际看到它)，并且不用于历史或关联目的。</p><p id="5342" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">在许多情况下，用户看不到对象上版本的必要性:这根本就不是问题。但是，如果你不使用它们，就没有办法用它们保存信息(老山)，没有办法找出为什么会有新版本(这只猫太小了)，也没有办法准确再现发生了什么。这就是为什么至少对于主实体，你应该总是使用版本控制的原因。</p><h1 id="56d8" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">版本设计</h1><p id="8e9c" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">从业务角度来看，具有状态的实体(so…:所有主要实体)看起来像这样:</p><figure class="ld le lf lg fq hw fe ff paragraph-image"><div class="fe ff lc"><img src="../Images/29589bf688793aa9c0b7d7866c4b13a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:240/format:webp/1*snpzjitOu4T4dkNp8UQE8g.png"/></div></figure><p id="c7f9" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">通常，几乎所有属性和关联都存储在实体版本中(例如，名为“合同版本”的实体)。在任何特定时刻，这些版本中只能有一个版本处于“活动”状态。如果实体是直接寻址的，则活动版本包含实体上的所有有效数据。</p><p id="4c0a" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">开始、结束和创建新版本的协议可能因公司而异。但是，建议对所有实体使用相同的协议。例如，如果新的合同版本需要预先批准才能生效，为什么新的产品版本不需要批准？这种方法的优点是，将来可以很容易地决定，对于某些新产品，必须批准新的product_versions，因为版本和状态已经存在。对于其他产品，批准可能是自动的(状态“等待批准”仅分配一小段时间)。</p><p id="78bd" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">如果你一次做对了，下一次做对并不难(复制)。</p><h1 id="2a95" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">为什么企业会在意？</h1><p id="4bd9" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">基本上，使用版本和状态会关注用户的数据生命周期:</p><p id="8f8d" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">通过检查对象的时间线，可以清楚地了解对象的生命周期，所有版本都在时间线上。</p><p id="5dbf" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">启动对象、更改对象和停用对象所需的活动可以链接到适当的版本(和状态)。</p><p id="9cda" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">适当的历史。</p><p id="6a3a" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">如前所述，通过为所有主要实体建立版本控制来增加灵活性。</p><h1 id="726c" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">使用通用版本控制功能</h1><p id="924a" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">因此，在开始构建应用程序之前，有必要为版本创建这个通用特性，并将其用于所有需要版本控制的(功能)实体。</p><p id="f743" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">使用通用状态功能有以下优点:</p><p id="1da7" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">它只需要开发和测试一次。如果它有效，可以很容易地添加到另一个实体中:因此它增加了应用程序的灵活性。</p><p id="be37" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">版本历史、时间表、协议和数据结构等功能只需开发一次，质量有保证。</p><p id="5e28" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated"><strong class="bd lh">最重要的</strong>:创建实体的完整生命周期，因此(功能)故障排除、纠错、审计能力等。都有所改善。</p><p id="8b75" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">通过停用较新版本，可以轻松恢复对象的先前版本。</p><p id="1872" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated"><strong class="bd lh">通用特性应:</strong></p><p id="2bd8" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">处理新版本的创建。</p><p id="7eb9" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">处理版本属性和关联。</p><p id="e22e" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">在创建和验证新版本之前，执行必须进行的检查。</p><p id="8bb8" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">应用协议以便对实体进行更改。</p><p id="729a" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">应用协议以撤消应用于实体的更改和/或撤消新版本。</p><p id="1573" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">负责实体时间线。</p><p id="4f20" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">跟踪历史记录中的对象状态。</p><p id="0fa6" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated"><strong class="bd lh">如何对实体应用版本控制？</strong></p><p id="95a5" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">用新属性“versionNumber”(设置为“1”)将实体从“entity”重命名为“entity_version”。</p><p id="7482" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">创建一个名为“entity”的新实体，并与“entity_version”建立1:n关联，向该新实体添加标识属性。</p><p id="64f7" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">为每个“实体_版本”创建并填充“实体”对象，并创建它们之间的关联。</p><p id="0cd3" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">仅此而已。现在开始为处理这个实体的新版本开发创建、条件和协议。</p><p id="8e13" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">我认为实体本身不应该包含状态。它的状态是所有版本状态的结果，所以它是一个动态状态。</p><p id="1d49" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">-如果只有一个状态为“待批准”的entity_version，则实体的动态状态可能为“即将到来”。</p><p id="81dd" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">-如果至少有一个entity_version的状态为“活动”，则该实体的动态状态可能为“正在运行”。</p><p id="faf8" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">-如果没有“活动”实体版本，并且当前实体版本为“非活动”，则实体的动态状态可能为“挂起”。</p><p id="3690" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">-如果没有“活动”实体版本，并且最后一个实体版本的状态为“已结束”，则实体的动态状态可能为“已结束”。</p><h1 id="aae4" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">Mendix实现</h1><p id="d083" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">可以在Mendix应用程序中轻松创建版本控制功能。</p><p id="afda" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated"><strong class="bd lh">为每个实体创建微流以:</strong></p><p id="d605" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">创建新版本；</p><p id="44eb" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">检查和批准新版本的创建；</p><p id="920d" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">撤消新版本。</p><p id="3d02" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">在我看来，每个应用程序都需要至少一个实体的状态(假设有必要至少管理一些或多或少可重复的东西)。如果这能包含在Mendix平台的未来版本中，我会很高兴，希望有一天我们能看到这一点。</p><p id="2268" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">虽然这不是一个技术问题，但它肯定是每个管理应用程序的功能数据基础的一部分。</p><p id="9022" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">如果你想知道更多关于如何处理这个功能特性，或者复制我的，请联系我们。</p><h2 id="ddd1" class="li jd if bd je lj lk ll ji lm ln lo jm kk lp lq jq ko lr ls ju ks lt lu jy lv dt translated">阅读更多</h2><div class="ht hu fm fo hv lw"><a rel="noopener follow" target="_blank" href="/mendix/data-lifecycle-management-statuses-d742770ac69d"><div class="lx ab ej"><div class="ly ab lz cl cj ma"><h2 class="bd ig fv z el mb eo ep mc er et ie dt translated">数据生命周期管理:状态</h2><div class="md l"><h3 class="bd b fv z el mb eo ep mc er et ek translated">在我的上一篇文章中，我检查了一幅山上猫的古画。没有人知道它为什么被制造出来，但是我们知道…</h3></div><div class="me l"><p class="bd b gc z el mb eo ep mc er et ek translated">medium.com</p></div></div><div class="mf l"><div class="mg l mh mi mj mf mk ib lw"/></div></div></a></div><div class="ht hu fm fo hv lw"><a rel="noopener follow" target="_blank" href="/mendix/data-lifecycle-management-ef1db9af9fce"><div class="lx ab ej"><div class="ly ab lz cl cj ma"><h2 class="bd ig fv z el mb eo ep mc er et ie dt translated">数据生命周期管理</h2><div class="md l"><h3 class="bd b fv z el mb eo ep mc er et ek translated">很久以前，纳斯卡人在秘鲁纳斯卡附近的一块岩石上画了一只猫。连同其他物品的图纸，它是…</h3></div><div class="me l"><p class="bd b gc z el mb eo ep mc er et ek translated">medium.com</p></div></div><div class="mf l"><div class="ml l mh mi mj mf mk ib lw"/></div></div></a></div></div><div class="ab cl mm mn hb mo" role="separator"><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr ms"/><span class="mp bw bk mq mr"/></div><div class="hn ho hp hq hr"><p id="604b" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated"><em class="mt">来自发布者- </em></p><p id="4492" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated"><em class="mt">如果你喜欢这篇文章，你可以在我们的</em> <a class="ae mu" href="https://medium.com/mendix" rel="noopener"> <em class="mt">媒体页面</em> </a> <em class="mt">或我们自己的</em> <a class="ae mu" href="https://developers.mendix.com/community-blog/" rel="noopener ugc nofollow" target="_blank"> <em class="mt">社区博客网站</em> </a> <em class="mt">找到更多类似的文章。</em></p><p id="a7ab" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated"><em class="mt">希望入门的创客，可以注册一个</em> <a class="ae mu" href="https://signup.mendix.com/link/signup/?source=direct" rel="noopener ugc nofollow" target="_blank"> <em class="mt">免费账号</em> </a> <em class="mt">，通过我们的</em> <a class="ae mu" href="https://academy.mendix.com/link/home" rel="noopener ugc nofollow" target="_blank"> <em class="mt">学苑</em> </a> <em class="mt">即时获取学习。</em></p><p id="6065" class="pw-post-body-paragraph ka kb if bd b kc kx ke kf kg ky ki kj kk kz km kn ko la kq kr ks lb ku kv kw hn dt translated">有兴趣更多地参与我们的社区吗？你可以加入我们的 <a class="ae mu" href="https://join.slack.com/t/mendixcommunity/shared_invite/zt-hwhwkcxu-~59ywyjqHlUHXmrw5heqpQ" rel="noopener ugc nofollow" target="_blank"> <em class="mt"> Slack社区频道</em> </a> <em class="mt">或者想更多参与的人，看看加入我们的</em> <a class="ae mu" href="https://developers.mendix.com/meetups/#meetupsNearYou" rel="noopener ugc nofollow" target="_blank"> <em class="mt">遇见ups </em> </a> <em class="mt">。</em></p></div></div>    
</body>
</html>