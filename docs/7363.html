<html>
<head>
<title>Announcing SQLDelight 1.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">发布SQLDelight 1.0</h1>
<blockquote>原文：<a href="https://medium.com/square-corner-blog/announcing-sqldelight-1-0-d482aa408f64?source=collection_archive---------0-----------------------#2019-01-08">https://medium.com/square-corner-blog/announcing-sqldelight-1-0-d482aa408f64?source=collection_archive---------0-----------------------#2019-01-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/dc11d69aa8e31892d9702d6bd1c41415.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lC0GRWhuF9Mo5Kd4Y-LpNg.png"/></div></div></figure><blockquote class="ip iq ir"><p id="ef0f" class="is it iu iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">注意，我们已经行动了！如果您想继续了解Square的最新技术内容，请访问我们的新家<a class="ae jr" href="https://developer.squareup.com/blog" rel="noopener ugc nofollow" target="_blank">https://developer.squareup.com/blog</a></p></blockquote><p id="b336" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">SQLDelight在4年前作为一个项目开始于Android的ContentValues和SQLiteOpenHelper APIs，目标是使编写SQL变得简单和安全。该库在内部是Kotlin的早期采用者，但从一开始就一直在生成Java。我们热爱Kotlin，并且对我们知道可以在Kotlin中做得更好的Java API不满意，所以一年前我们开始了完全专注于Kotlin的全面重写。</p><p id="eed4" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">与此同时，Kotlin multiplatform刚刚宣布，并承诺在Android和iOS之间轻松安全地共享代码。对于Cash App来说，这是共享有意义的代码的完美的第一步，一旦模式被共享，上面的一切都可以实现:创建视图模型，与服务器同步，运行测试。因此，经过一年多的重新编写SQLDelight，我们很兴奋地开始谈论新版本以及它为Android和多平台开发带来的变化。</p><p id="72e8" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">SQLDelight的前提是不变的:编写SQLite，让Gradle插件生成API来为你运行你的查询。SQLDelight文件使用<code class="du jv jw jx jy b">.sq</code>扩展名，并且包含在Gradle模块的<code class="du jv jw jx jy b">src/main/sqldelight</code>文件夹中。</p><p id="7200" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">一个包含一些<code class="du jv jw jx jy b">CREATE TABLE</code>、<code class="du jv jw jx jy b">INSERT</code>和<code class="du jv jw jx jy b">SELECT</code>语句的简单文件就是您开始的全部所需:</p><pre class="jz ka kb kc fd kd jy ke kf aw kg bi"><span id="15cf" class="kh ki hh jy b fi kj kk l kl km">-- src/main/sqldelight/com/sample/TennisPlayer.sq</span><span id="f37d" class="kh ki hh jy b fi kn kk l kl km">CREATE TABLE TennisPlayer(<br/>  name TEXT,<br/>  points INTEGER,<br/>  plays TEXT AS Handedness<br/>);</span><span id="e867" class="kh ki hh jy b fi kn kk l kl km">insert:<br/>INSERT INTO TennisPlayer<br/>VALUES (?, ?, ?);</span><span id="917c" class="kh ki hh jy b fi kn kk l kl km">top10:<br/>SELECT *<br/>FROM TennisPlayer<br/>ORDER BY points DESC<br/>LIMIT 10;</span></pre><p id="61a9" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">SQLDelight将生成一个可以运行这些查询的<code class="du jv jw jx jy b">TennisPlayerQueries</code>类。</p><pre class="jz ka kb kc fd kd jy ke kf aw kg bi"><span id="d11c" class="kh ki hh jy b fi kj kk l kl km">val tennisPlayers: TennisPlayerQueries</span><span id="b90f" class="kh ki hh jy b fi kn kk l kl km">tennisPlayers.insert("Naomi Osaka", 5270, Handedness.RIGHT)<br/>tennisPlayers.insert("Aryna Sabalenka", 3365, Handedness.RIGHT)<br/>tennisPlayers.insert("Simona Halep", 6641, Handedness.RIGHT)</span><span id="a93c" class="kh ki hh jy b fi kn kk l kl km">val top10: List&lt;TennisPlayer&gt; = tennisPlayers.top10()<br/>  .executeAsList()</span><span id="67ac" class="kh ki hh jy b fi kn kk l kl km">println(top10[0].name) // prints "Simona Halep"</span></pre><p id="ae0d" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">获取<code class="du jv jw jx jy b">TennisPlayerQueries</code>对象需要平台驱动程序。SQLDelight包括在Android、JVM和iOS平台上使用SQLite的驱动程序。更多详细信息，请参考<a class="ae jr" href="https://github.com/square/sqldelight" rel="noopener ugc nofollow" target="_blank">自述文件</a>。</p><p id="bf88" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">对于Square SQLite库的早期用户来说，代码生成已经使用Kotlin进行了彻底检查，这意味着为Kotlin用户生成了一个基于SQL的新API。为了从SQLDelight的早期版本中迁移您的代码，我们发布了一些工件并有一个<a class="ae jr" href="https://github.com/square/sqldelight/blob/master/UPGRADING.md" rel="noopener ugc nofollow" target="_blank">简短指南</a>。</p><p id="ad44" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">编译后的代码还会跟踪活动的查询，并在结果发生变化时通知下游。有一个扩展可以将这种行为公开为RxJava Observable，这意味着这个版本也反对<a class="ae jr" href="https://github.com/square/sqlbrite" rel="noopener ugc nofollow" target="_blank">SQL write</a>。我们还添加了一个<a class="ae jr" href="https://developer.android.com/topic/libraries/architecture/paging/" rel="noopener ugc nofollow" target="_blank"> Android分页</a>扩展，允许通过<code class="du jv jw jx jy b">DataSource</code>暴露查询。</p><p id="d280" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">还有许多其他功能，如迁移验证、自定义类型和设置参数，这些都记录在自述文件中。试一试，如果遇到任何问题，请联系我们！</p></div></div>    
</body>
</html>