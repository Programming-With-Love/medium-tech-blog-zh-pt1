<html>
<head>
<title>An Introduction to REST API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">REST API简介</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/an-introduction-to-rest-api-931380178619?source=collection_archive---------5-----------------------#2019-12-17">https://medium.com/quick-code/an-introduction-to-rest-api-931380178619?source=collection_archive---------5-----------------------#2019-12-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="d07d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您是前端开发人员或web开发初学者，并且希望了解REST API，那么这篇文章就是为您准备的。我将使用NodeJS和Express来演示如何使用REST API。我在这里有一个关于如何设置NodeJS Express服务器的教程。以防你不知道如何设置NodeJS服务器；首先按照这个步骤设置您的服务器，然后再回来。</p><p id="eeaa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了澄清一些事情，您可以使用REST API与任何外部第三方API进行通信，并构建一些很酷的前端项目。一天结束时，它们就像你每天在浏览器的URL栏上发送的任何其他http请求一样，无论是脸书、Twitter还是任何其他连接到数据库的网站。</p><p id="90ff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">流程是这样的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d8da5e39ec094989b043133cd7339532.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ifg1GkkpaiILx6C0pv3Akg.png"/></div></div></figure><p id="d916" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，REST API有四个常见的操作可以用来与另一个应用程序进行交互。他们是</p><ul class=""><li id="93eb" class="jp jq hh ig b ih ii il im ip jr it js ix jt jb ju jv jw jx bi translated"><strong class="ig hi">发布</strong>请求</li><li id="d0c7" class="jp jq hh ig b ih jy il jz ip ka it kb ix kc jb ju jv jw jx bi translated"><strong class="ig hi">得到</strong>的请求</li><li id="e28d" class="jp jq hh ig b ih jy il jz ip ka it kb ix kc jb ju jv jw jx bi translated"><strong class="ig hi">放</strong>请求</li><li id="d912" class="jp jq hh ig b ih jy il jz ip ka it kb ix kc jb ju jv jw jx bi translated"><strong class="ig hi">删除</strong>请求</li></ul><p id="a377" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">也称为CRUD操作。创建、读取、更新和删除。</p><h1 id="4ffb" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">发布请求</h1><p id="2a46" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">用最简单的术语来说，<strong class="ig hi"> POST </strong>请求是指某人发送一个向数据库添加新数据的请求，或者为了得到某样东西而需要对数据进行验证。比如注册或登录网站。</p><p id="d65a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看看如何使用NodeJS和Express实现这一点。现在，您应该有一个节点服务器在运行。出于演示的目的，我将使用一些模拟数据来模拟数据库。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="ddf5" class="ll ke hh lh b fi lm ln l lo lp">const express = require('express')<br/>​<br/>const app = express()<br/>​<br/>app.listen(5000, () =&gt; {<br/>    console.log('Server started on PORT 5000')<br/>})<br/>​<br/>const mockData = [<br/>    {<br/>        id: '1',<br/>        name: 'Chelsea',<br/>        country: 'England',<br/>        league: 'EPL'<br/>    },<br/>    {<br/>        id: '2',<br/>        name : 'Real Madrid',<br/>        country: 'Spain',<br/>        league: 'La Liga'<br/>    }<br/>​<br/>] <br/>app.post('/add_team', (req, res) =&gt; {<br/>    // Our Request<br/>    mockData.push({<br/>        id: '3',             // equivalent to (req.body.id)<br/>        name : 'Barcelona',  // equivalent to (req.body.name)<br/>        country: 'Spain',    // equivalent to (req.body.country)<br/>        league: 'La Liga'    // equivalent to (req.body.league)<br/>    })<br/>    // this is the response from our request<br/>    res.send(mockData) <br/>    <br/>})</span></pre><p id="f32f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Express附带了方便的实用方法，如post、get、put、delete等等。您可以查看他们的<a class="ae jc" href="https://expressjs.com/" rel="noopener ugc nofollow" target="_blank">文档</a>以获得支持方法的完整列表。在app.post()中，第一个参数是我们必须包含在URL末尾的路由路径，在本例中是<a class="ae jc" href="http://localhost:5000/add_team" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/add _ team</a>，第二个参数是一个回调函数，它接受两个参数request和response。缩短版(请求，请求)。这个回调函数是我们编写所有逻辑的地方。比如在请求中发送什么，以及当我们得到响应时做什么。如何处理错误。我不打算在这篇文章中讨论错误处理，因为我试图在这里保持介绍性的东西，但请记住这一点。</p><p id="b6a0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在回调函数有了自己的方法，并附带了req，res。正如我前面说过的，您可以向请求体添加数据。这里我向我的mockData数组添加了一个新对象。在real app中，这个<strong class="ig hi"> POST </strong>请求会将这些数据添加到包含这些字段(id、姓名、国家、联赛)的数据库中。</p><p id="ad49" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以通过发送POST请求来测试上面的代码。现在，您无法在浏览器URL中发送<strong class="ig hi"> POST </strong>请求。但是你可以使用像postman或者RESTED这样的API测试扩展。我没有解释如何使用这些扩展，它们是不言自明的。安装其中一个并从扩展的请求标签中选择POST，在URL标签中粘贴这个<a class="ae jc" href="http://localhost:5000/add_team" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/add _ team</a>并点击发送，你会看到它返回一个包含3个条目的新数组。最后一个是我们放在<strong class="ig hi"> POST </strong>请求中的对象。</p><p id="0bbd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在上面代码的最后一行，“res.send(mockData)”负责返回3个数组。这也是我们期待从这一请求中得到的回应。</p><p id="01c5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所有这些http方法基本上都是这样工作的。我们用(app.name_of_the_request)调用http方法，给它我们的路由路径，用(req，res)设置我们的回调函数，并在其中编写我们的逻辑。最后，在“res.send()”中，我们放入了预期的结果。</p><p id="0d1d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看看这些方法的其余部分。</p><h1 id="3292" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">获取请求</h1><p id="5e39" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">HTTP <strong class="ig hi"> GET </strong>请求就像它从数据库中获取数据一样。您不能使用<strong class="ig hi"> GET </strong>请求添加新数据。您可以根据您的特定查询获取数据。让我们从上面的mockData中获取id为2的团队的信息。这是该请求的外观。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="4e5e" class="ll ke hh lh b fi lm ln l lo lp">app.get('/:id', (req, res) =&gt; {<br/>    mockData.map(team =&gt; {<br/>        if (team.id === req.params.id) { // confused??<br/>            res.send(team)<br/>        }<br/>    })<br/>})</span></pre><p id="4a1f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所有这些请求都带有“req.params”。有三种常见的请求方法，你可能会经常用到。我们在<strong class="ig hi">POST</strong>req中看到的“req.body”，另外两个“req.params”和“req.query”。</p><p id="37ea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果我们想要使用req.params，我们必须在我们的路由路径的末尾添加参数，我们是通过用冒号作为前缀来添加的，然后访问我们使用的参数(req.params.name_of_parameter)。在下一个例子中，我们将看到“req.query”的用法。除此之外，其他一切都与您在<strong class="ig hi"> POST </strong>请求示例中看到的一样。现在，您可以像以前一样进行测试，或者这次您可以实际使用您的浏览器URL。因为浏览器URL接受<strong class="ig hi"> GET </strong>请求，所以不会有任何问题。</p><p id="d1ba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">到目前为止，您已经注意到除了请求参数之外，我们的路由路径有所不同。这一次我们只是放了一个“/”而不是描述性的东西。/'这表示您的根路径，因此如果您只输入<a class="ae jc" href="http://localhost:5000/1" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/1</a>，我们将在浏览器中看到预期的结果。试试看。</p><p id="cf26" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在任何时候，如果您遇到任何错误，请确保您的节点服务器正在运行。</p><h1 id="75d8" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">上传请求</h1><p id="c32a" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">每当我们想要更新数据库中的现有数据时，我们发送HTTP <strong class="ig hi"> PUT </strong>请求。现在这也可以通过<strong class="ig hi"> POST </strong>请求来完成。但这是更新现有数据的首选方法。让我们看看这一次用“req.query”在代码中是什么样子。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="87ef" class="ll ke hh lh b fi lm ln l lo lp">app.put('/update_team', (req, res) =&gt; {<br/>    mockData.map(team =&gt; {<br/>        if (team.id === req.query.id) { // req.query<br/>            team.name = 'Liverpool'<br/>        }<br/>    })<br/>    res.send(mockData)<br/>})</span></pre><p id="9219" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">几乎一切都是相似的。我们只需更改路由路径，并使用“req.query”来更新团队名称。我们如何使用“req.query”呢？在“req.params”中，我们在路由路径中传递参数。这里我们做了一些几乎类似的事情，但这次是在我们的主URL<a class="ae jc" href="http://localhost:5000/update_team?id=1" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/update _ team？id=1 </a>在查询(id)前面加上问号，然后在等号后面加上值。</p><p id="52d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">到目前为止，您应该已经看到这是一种模式。对于<strong class="ig hi"> POST </strong>请求我们的方法是app.post()，对于<strong class="ig hi"> GET </strong>请求app.get()等等。</p><p id="43be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我们结束之前，让我们也使用<strong class="ig hi"> Delete </strong>请求从数组中删除一个项目。</p><h1 id="78f4" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">删除请求</h1><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="0844" class="ll ke hh lh b fi lm ln l lo lp">app.delete('/delete_team/:id', (req, res) =&gt; {<br/>    var teamIndex = mockData.findIndex(team =&gt; team.id === req.params.id)<br/>    mockData.splice(teamIndex, 1)<br/>    res.send(mockData)<br/>})</span></pre><p id="c035" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如你所见，没有太大的区别。我们只是使用app.delete()和“req.params”来选择要删除的项目。以及从数组中删除一项的几行JavaScript代码。运行这个URL<a class="ae jc" href="http://localhost:5000/delete_team/1" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/delete _ team/1</a>，在API测试扩展上将您的请求选项卡设置为delete，您应该看到它在删除后只返回一个项目，这是预期的。</p><p id="da95" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">仅此而已。在此之后，您应该对REST API有一个基本的了解。这是完整的代码。</p><pre class="je jf jg jh fd lg lh li lj aw lk bi"><span id="cbac" class="ll ke hh lh b fi lm ln l lo lp">const express = require('express')<br/>​<br/>const app = express()<br/>​<br/>app.listen(5000, () =&gt; {<br/>    console.log('Server started on PORT 5000')<br/>})<br/>​<br/>const mockData = [<br/>    {<br/>        id: '1',<br/>        name: 'Chelsea',<br/>        country: 'England',<br/>        league: 'EPL'<br/>    },<br/>    {<br/>        id: '2',<br/>        name : 'Real Madrid',<br/>        country: 'Spain',<br/>        league: 'La Liga'<br/>    }<br/>] <br/>app.get('/:id', (req, res) =&gt; {<br/>    <br/>    mockData.map(team =&gt; {<br/>        if (team.id === req.params.id) {<br/>            res.send(team)<br/>        }<br/>    })<br/>})<br/>​<br/>app.post('/add_team', (req, res) =&gt; {<br/>    <br/>    mockData.push({<br/>        id: '3',<br/>        name : 'Barcelona',<br/>        country: 'Spain',<br/>        league: 'La Liga'<br/>    })<br/>    res.send(mockData)<br/>})<br/>​<br/>app.put('/update_team', (req, res) =&gt; {<br/>    mockData.map(team =&gt; {<br/>        if (team.id === req.query.id) {<br/>            team.name = 'Liverpool'<br/>        }<br/>    })<br/>    res.send(mockData)<br/>})<br/>​<br/>app.delete('/delete_team/:id', (req, res) =&gt; {<br/>    var teamIndex = mockData.findIndex(team =&gt; team.id === req.params.id)<br/>    mockData.splice(teamIndex, 1)<br/>    res.send(mockData)<br/>})</span></pre></div></div>    
</body>
</html>