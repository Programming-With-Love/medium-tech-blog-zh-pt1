<html>
<head>
<title>JetPack Compose 🏹 — State Management</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JetPack撰写🏹—国家管理</h1>
<blockquote>原文：<a href="https://blog.kotlin-academy.com/jetpack-compose-state-management-73ec3f6c74a5?source=collection_archive---------0-----------------------#2020-08-28">https://blog.kotlin-academy.com/jetpack-compose-state-management-73ec3f6c74a5?source=collection_archive---------0-----------------------#2020-08-28</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="453a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它指的是在与文本字段、按钮、单选按钮等小部件交互时管理用户界面的状态。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/80b1bb3a6e39e6fd500183cb3bc3b141.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kKMa1r5rmxOk8KilBL6-Rw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Jetpack compose <a class="ae ky" href="https://developer.android.com/jetpack/compose" rel="noopener ugc nofollow" target="_blank">official</a></figcaption></figure></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><blockquote class="lg lh li"><p id="e2a0" class="jk jl lj jm b jn jo jp jq jr js jt ju lk jw jx jy ll ka kb kc lm ke kf kg kh ig bi translated">社区参与</p></blockquote><div class="ln lo gp gr lp lq"><a href="https://dormoshe.io/newsletters/ag/android/20?utm_source=twitter&amp;utm_campaign=twitter" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab fo"><div class="ls ab lt cl cj lu"><h2 class="bd io gy z fp lv fr fs lw fu fw im bi translated">Android趋势# 20-2020年9月8日- Dor Moshe的博客</h2><div class="lx l"><h3 class="bd b gy z fp lv fr fs lw fu fw dk translated">订阅时事通讯，享受每周学习新知识的最新动态。</h3></div><div class="ly l"><p class="bd b dl z fp lv fr fs lw fu fw dk translated">dormoshe.io</p></div></div><div class="lz l"><div class="ma l mb mc md lz me ks lq"/></div></div></a></div><div class="ln lo gp gr lp lq"><a href="https://us12.campaign-archive.com/?u=f39692e245b94f7fb693b6d82&amp;id=2ed61dc1a3" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab fo"><div class="ls ab lt cl cj lu"><h2 class="bd io gy z fp lv fr fs lw fu fw im bi translated">科特林周刊#213</h2><div class="lx l"><h3 class="bd b gy z fp lv fr fs lw fu fw dk translated">你好Kotliners。我们希望你有时间玩Kotlin 1.4，我们已经在我们的项目中做了一些，它…</h3></div><div class="ly l"><p class="bd b dl z fp lv fr fs lw fu fw dk translated">us12.campaign-archive.com</p></div></div><div class="lz l"><div class="mf l mb mc md lz me ks lq"/></div></div></a></div></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="7866" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi mg translated">Android中的状态管理是一个复杂的概念，要知道原因，你必须首先理解Android的架构设计，并了解为什么它是管理状态的关键要求。<a class="mp mq ep" href="https://medium.com/u/989153264392?source=post_page-----73ec3f6c74a5--------------------------------" rel="noopener" target="_blank">马塞尼特斯</a>条<a class="ae ky" href="https://medium.com/@marcelorbenites/managing-state-in-android-f4d042646521" rel="noopener">条<strong class="jm io">条<em class="lj">条</em>条</strong>条</a>条<strong class="jm io">条<em class="lj">条</em>条</strong>条定义了这种状态的最佳描述:</p><blockquote class="mr"><p id="191c" class="ms mt in bd mu mv mw mx my mz na kh dk translated">状态是连接/订阅一个或多个小部件的对象，包含数据，并渴望根据该数据更新小部件。如果数据发生任何变化，它会通知它所连接的所有小部件。状态的值在运行时被改变。</p></blockquote><p id="da16" class="pw-post-body-paragraph jk jl in jm b jn nb jp jq jr nc jt ju jv nd jx jy jz ne kb kc kd nf kf kg kh ig bi translated">在jetpack compose中，状态管理的概念与<strong class="jm io"> Observable </strong>模式相同，即如果订阅的对象发生任何变化，它会自动触发其所有依赖对象。</p><p id="609c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">除了上述概念之外，jetpack compose还有一些功能上的变化，即当状态/对象值更新时，订阅的<strong class="jm io"> @ composable function(s)用新数据重新组合</strong>本身，并且不影响或更新整个UI。</p><p id="41c5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">根据状态管理文档，jetpack使用两种方式组成支持状态:</p><ul class=""><li id="e677" class="ng nh in jm b jn jo jr js jv ni jz nj kd nk kh nl nm nn no bi translated">记住{ mutableStateOf(…) }</li><li id="fcc8" class="ng nh in jm b jn np jr nq jv nr jz ns kd nt kh nl nm nn no bi translated">易变状态</li></ul><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi nu"><img src="../Images/1d5d9d7ca16aab67bbc2e19aa299faa5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bwBqM4hOx77eo95cUqnMxw.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk"><strong class="bd nv">Current working environment</strong></figcaption></figure><blockquote class="lg lh li"><p id="30f0" class="jk jl lj jm b jn jo jp jq jr js jt ju lk jw jx jy ll ka kb kc lm ke kf kg kh ig bi translated">过去，我们使用<code class="fe nw nx ny nz b"><strong class="jm io"><em class="in">@Model</em></strong></code>注释，但是在 <code class="fe nw nx ny nz b"><a class="ae ky" href="https://developer.android.com/jetpack/androidx/releases/compose#0.1.0-dev12" rel="noopener ugc nofollow" target="_blank"><em class="in">0.1.0-dev12</em></a><em class="in">.</em></code>中<a class="ae ky" href="https://developer.android.com/jetpack/androidx/releases/compose#0.1.0-dev12" rel="noopener ugc nofollow" target="_blank">被弃用，然后在</a> <code class="fe nw nx ny nz b"><a class="ae ky" href="https://android-review.googlesource.com/c/platform/frameworks/support/+/1375120" rel="noopener ugc nofollow" target="_blank"><em class="in">0.1.0-dev16</em></a><em class="in">.</em></code>中<code class="fe nw nx ny nz b"><em class="in">state{}</em></code>注释<a class="ae ky" href="https://android-review.googlesource.com/c/platform/frameworks/support/+/1375120" rel="noopener ugc nofollow" target="_blank">被弃用</a></p></blockquote><p id="3bdf" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我们来详细讨论一下:</p><h1 id="e620" class="oa ob in bd nv oc od oe of og oh oi oj ok ol om on oo op oq or os ot ou ov ow bi translated">记住{ mutableStateOf(…) }</h1><blockquote class="lg lh li"><p id="9369" class="jk jl lj jm b jn jo jp jq jr js jt ju lk jw jx jy ll ka kb kc lm ke kf kg kh ig bi translated"><strong class="jm io">是</strong>的延伸版<code class="fe nw nx ny nz b"><strong class="jm io"><em class="in">State&lt;OriginalClass&gt;</em></strong></code></p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ox"><img src="../Images/792c4c23444d43695ea4baf98eb8990a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8PBtKMoOkYJCnlx-BDkqwA.png"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">state approach</figcaption></figure><p id="045e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">这种方法与我们在<code class="fe nw nx ny nz b">state</code>中所做的一样，我们看到的唯一变化是<code class="fe nw nx ny nz b">calling.</code>让我们看看可组合团队是怎么说的:</p><blockquote class="lg lh li"><p id="45b0" class="jk jl lj jm b jn jo jp jq jr js jt ju lk jw jx jy ll ka kb kc lm ke kf kg kh ig bi translated">将状态composable标记为deprecated，并提倡直接使用remember { mutableStateOf(…) }，以便更清楚地理解Compose状态管理API表面。这减少了整个API表面和状态管理的概念数量，并匹配了类属性委托的“by mutableStateOf()”模式。</p></blockquote><p id="ba74" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在这个概念中，对象在实现变异的同一个范围内被初始化。最好的初始化可能是在<code class="fe nw nx ny nz b">@compose function</code>内部。它也遵循相同的Kotlin对象分层模式，像传递对另一个函数的引用一样。现在，你有一个场景，你想要改变在作用域之外初始化的对象，那么下一个方法<code class="fe nw nx ny nz b"><strong class="jm io">mutableStateOf</strong></code> <strong class="jm io"> </strong>是有用的。</p><p id="1fb5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如何使用remember { mutableStateOf(…) }方法</p><h1 id="8482" class="oa ob in bd nv oc od oe of og oh oi oj ok ol om on oo op oq or os ot ou ov ow bi translated">易变状态</h1><blockquote class="lg lh li"><p id="2cab" class="jk jl lj jm b jn jo jp jq jr js jt ju lk jw jx jy ll ka kb kc lm ke kf kg kh ig bi translated"><code class="fe nw nx ny nz b"><strong class="jm io"><em class="in">mutableStateOf</em></strong></code> <strong class="jm io">和财产委托人</strong></p></blockquote><figure class="kj kk kl km gt kn gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/1571c833dbdca14861c8e35544c77d28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1396/format:webp/1*4zf5_5TxIHL_JEO_GyruJQ.png"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">mutableStateOf approach</figcaption></figure><p id="fd54" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> mutableStateOf </strong> API允许我们在类外创建MutableState实例。在这种方法中，<strong class="jm io">每个属性都是单独观察的，所以您在重构后看到的重组可能会更窄</strong>。🤔</p><p id="94fe" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">简而言之，它表示每个属性上的读写操作都由compose监视，如果有任何属性更改，compose就会触发观察到该属性的所有组合索引。它还给出了<code class="fe nw nx ny nz b">execution</code>的value属性。</p><p id="3fcc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">参见下面定义的例子中的<code class="fe nw nx ny nz b">mutableStateOf</code>的整体概念:</p><figure class="kj kk kl km gt kn"><div class="bz fp l di"><div class="oz pa l"/></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Use of mutableStateOf example</figcaption></figure></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="0d45" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果你想得到更多的澄清，那么请到我的<code class="fe nw nx ny nz b">Scaffold</code>教程:</p><div class="ln lo gp gr lp lq"><a href="https://github.com/AliAzaz/PracticeComposeExamples/tree/ScaffoldItemsViewTemplate" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab fo"><div class="ls ab lt cl cj lu"><h2 class="bd io gy z fp lv fr fs lw fu fw im bi translated">AliAzaz/实践复合示例</h2><div class="lx l"><h3 class="bd b gy z fp lv fr fs lw fu fw dk translated">在本教程中，我们将详细学习Scaffold的根项目。本教程可能会稍微长一点，所以请继续…</h3></div><div class="ly l"><p class="bd b dl z fp lv fr fs lw fu fw dk translated">github.com</p></div></div><div class="lz l"><div class="pb l mb mc md lz me ks lq"/></div></div></a></div><h2 id="fb2c" class="pc ob in bd nv pd pe dn of pf pg dp oj jv ph pi on jz pj pk or kd pl pm ov pn bi translated">脚手架的输出是:</h2><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi po"><img src="../Images/6b601d22ac537046c2d9ee296a76da6b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1El9vkFsqM-OEKdlpV-ujg.jpeg"/></div></div><figcaption class="ku kv gj gh gi kw kx bd b be z dk">Scaffold output</figcaption></figure></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><p id="82bc" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我希望这篇文章有助于回答关于Jetpack Compose状态管理的基本问题，并探索其背后的好处。在Twitter上关注我，了解更多更新:</p><div class="ln lo gp gr lp lq"><a href="https://twitter.com/AliAzazAlam1" rel="noopener  ugc nofollow" target="_blank"><div class="lr ab fo"><div class="ls ab lt cl cj lu"><h2 class="bd io gy z fp lv fr fs lw fu fw im bi translated">阿里·阿扎兹·阿拉姆</h2><div class="lx l"><h3 class="bd b gy z fp lv fr fs lw fu fw dk translated">阿里·阿扎兹·阿拉姆的最新推文(@AliAzazAlam1)。阿库·🇵🇰.企业家👱🏻‍♂️安卓应用开发者📱开源…</h3></div><div class="ly l"><p class="bd b dl z fp lv fr fs lw fu fw dk translated">twitter.com</p></div></div><div class="lz l"><div class="pp l mb mc md lz me ks lq"/></div></div></a></div><p id="09a0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">感谢您花时间阅读这篇文章。如果你喜欢它，请分享！</p><p id="5633" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在我的社交网站上与我联系，在<a class="ae ky" href="https://medium.com/@ali.azaz.alam" rel="noopener"> <strong class="jm io"> <em class="lj">中</em> </strong> </a>，<a class="ae ky" href="https://github.com/aliazaz" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lj">Github</em></strong></a><strong class="jm io"><em class="lj">，</em> </strong>和<a class="ae ky" href="https://linkedin.com/in/aliazazalam" rel="noopener ugc nofollow" target="_blank"><strong class="jm io"><em class="lj">LinkedIn</em></strong></a>上成为我的朋友。</p></div><div class="ab cl kz la hr lb" role="separator"><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le lf"/><span class="lc bw bk ld le"/></div><div class="ig ih ii ij ik"><h1 id="e975" class="oa ob in bd nv oc pq oe of og pr oi oj ok ps om on oo pt oq or os pu ou ov ow bi translated">点击👏说“谢谢！”并帮助他人找到这篇文章。</h1><p id="d9b9" class="pw-post-body-paragraph jk jl in jm b jn pv jp jq jr pw jt ju jv px jx jy jz py kb kc kd pz kf kg kh ig bi translated">了解卡帕头最新的重大新闻。书院，<a class="ae ky" href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a" rel="noopener ugc nofollow" target="_blank">订阅时事通讯</a>，<a class="ae ky" href="https://twitter.com/ktdotacademy" rel="noopener ugc nofollow" target="_blank">观察推特</a>，关注我们中媒。</p><p id="d08f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">如果您需要Kotlin工作室，请查看我们如何帮助您:<a class="ae ky" href="https://kt.academy/" rel="noopener ugc nofollow" target="_blank"> kt.academy </a>。</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a"><div class="gh gi qa"><img src="../Images/3146970f03e44cb07afe660b0d43e045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*54OqlYA4etu7wfpmMP5TKQ.png"/></div></a></figure></div></div>    
</body>
</html>