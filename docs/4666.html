<html>
<head>
<title>Live Reloading Browser Previews: Shotgun Episode 4</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">直播重装浏览器预告:猎枪第4集</h1>
<blockquote>原文：<a href="https://medium.com/javascript-scene/live-reloading-browser-previews-shotgun-episode-4-bab7a0508d71?source=collection_archive---------4-----------------------#2016-06-04">https://medium.com/javascript-scene/live-reloading-browser-previews-shotgun-episode-4-bab7a0508d71?source=collection_archive---------4-----------------------#2016-06-04</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/991d0b9dbb03bab579fb88c41f2f5453.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lo8cD5m7VqUXPlKF3lgfNQ.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Midnight Cowboy — Brandon Bailey (CC-BY-2.0)</figcaption></figure><blockquote class="it iu iv"><p id="e72b" class="iw ix iy iz b ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju ha bi translated">Shotgun是一个新的视频截屏节目，当我为真正的应用程序和库解决真正的编程挑战时，你可以和我一起乘坐shotgun。这个节目只对EricElliottJS.com的成员开放，但是我在这里记录了这次冒险。</p></blockquote><h2 id="e1eb" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">赶上:</h2><ul class=""><li id="5662" class="ku kv hh iz b ja kw je kx kh ky kl kz kp la ju lb lc ld le bi translated"><a class="ae jv" rel="noopener" href="/javascript-scene/shotgun-javascript-video-experience-c8b6a7771d49">第一集</a></li><li id="062e" class="ku kv hh iz b ja lf je lg kh lh kl li kp lj ju lb lc ld le bi translated"><a class="ae jv" rel="noopener" href="/javascript-scene/shotgun-episode-2-writing-tests-that-don-t-break-6fbce334c0c8">第二集</a></li><li id="6f3a" class="ku kv hh iz b ja lf je lg kh lh kl li kp lj ju lb lc ld le bi translated"><a class="ae jv" rel="noopener" href="/javascript-scene/looping-over-child-components-in-react-shotgun-episode-3-396de16289cc">第三集</a></li></ul><p id="febb" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">在这一集里，是时候看看我们的组件如何在真实的浏览器中呈现了。</p><h2 id="57bb" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">为什么选择Browsersync？</h2><p id="ec77" class="pw-post-body-paragraph iw ix hh iz b ja kw jc jd je kx jg jh kh lk jk jl kl ll jo jp kp lm js jt ju ha bi translated">有一段时间，由于Dan Abramov的出色工作，我很喜欢React的热模块更换，但当纯组件在工作中抛出扳手时，这种情况就土崩瓦解了。</p><p id="31b7" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">丹和他的朋友们正在努力寻找解决方案，他们已经一起破解了React Hot Loader 3.0 (RHL)的一个alpha版和一个beta版，但在撰写本文时，仍有<a class="ae jv" href="https://github.com/gaearon/react-hot-boilerplate/pull/61" rel="noopener ugc nofollow" target="_blank">个问题需要解决</a>。当它有一段时间变得稳定时，我想把这个工具和Browsersync一起重新组合起来。</p><p id="5af5" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">在此期间，<a class="ae jv" href="https://www.browsersync.io/" rel="noopener ugc nofollow" target="_blank"> Browsersync </a>只是工作。它不会在您重新加载时保留您的应用程序状态，但会在您保存文件时重新加载。Browsersync还有一些RHL没有提供的好处:</p><ol class=""><li id="2adc" class="ku kv hh iz b ja jb je jf kh lp kl lq kp lr ju ls lc ld le bi translated">它不是React特定的——不管您选择什么样的框架，它都能工作。</li><li id="85f5" class="ku kv hh iz b ja lf je lg kh lh kl li kp lj ju ls lc ld le bi translated">它可以同时将预览状态同步到多个浏览器，包括外部设备。</li></ol><p id="01a1" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">让我们更深入地讨论第二点:它提供了一个外部URL，允许您使用其他设备(如手机和平板电脑)浏览预览。您在任何设备上执行的每个操作都会反映在所有设备上。键入文本，点击按钮，在任何设备上滚动，你将能够同时看到它在每个设备上的外观。</p><h2 id="5ee2" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">今天的目标</h2><p id="fb1f" class="pw-post-body-paragraph iw ix hh iz b ja kw jc jd je kx jg jh kh lk jk jl kl ll jo jp kp lm js jt ju ha bi translated">在浏览器中查看预览的目的是捕捉我们在单元测试中可能错过的可视化内容。当你只进行单元测试时，很容易忽略视觉上的小问题。在浏览器中查看您的作品也非常重要。</p><p id="25a1" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">当我们识别出实际组件代码的问题时，我们将在做出更改之前添加单元测试。</p><p id="e634" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">值得注意的是，我没有对CSS进行单元测试。视觉设计的变化与代码的其他部分完全不同。产品团队可能会不断地运行A/B测试，微调用户界面的视觉外观，我们不希望单元测试阻碍这一进程。对视觉设计进行单元测试也有点棘手。我们的单元测试将关注技术细节，而不是担心输出的精确像素尺寸和颜色。</p><p id="9f32" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">给定一些数据，正确的数据会被渲染吗？按钮有正确的类吗？组件是否呈现了正确的文本？你明白了。让设计和QA团队去担心视觉回归测试。</p><p id="b089" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">您的团队可能决定您也想要自动化那些，并且那可能成为您的责任的一部分，但是您可能会用一种与单元测试完全不同的工具来做这件事(有基于图像的可视化回归测试工具)。</p><p id="80ac" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">在我们开始之前，让我们先列出一个待办事项清单:</p><ol class=""><li id="f04b" class="ku kv hh iz b ja jb je jf kh lp kl lq kp lr ju ls lc ld le bi translated">安装Browsersync。</li><li id="9347" class="ku kv hh iz b ja lf je lg kh lh kl li kp lj ju ls lc ld le bi translated">在<em class="iy"> `package.json`. </em>中新建一个<em class="iy"> `sync` </em>脚本</li><li id="1f55" class="ku kv hh iz b ja lf je lg kh lh kl li kp lj ju ls lc ld le bi translated">确保所有东西的样式都是正确的。</li></ol><p id="305d" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">我很确定我们没有彻底测试所有的按钮状态，我们可能也想修改现有的样式。在静态模型中，您一次只能看到一个状态。Browsersync将让我们轻松地探索和检查所有的状态。</p><h2 id="47ee" class="jw jx hh bd jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt bi translated">入门指南</h2><p id="7cab" class="pw-post-body-paragraph iw ix hh iz b ja kw jc jd je kx jg jh kh lk jk jl kl ll jo jp kp lm js jt ju ha bi translated">如果您还没有克隆应用程序，请先克隆:</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="3ab6" class="jw jx hh ly b fi mc md l me mf">git clone <a class="ae jv" href="mailto:git@github.com" rel="noopener ugc nofollow" target="_blank">git@github.com</a>:jshomes/course-player.git</span></pre><p id="135b" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">确保您的本地副本是最新的，然后查看这一集的起点:</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="dfc7" class="jw jx hh ly b fi mc md l me mf">git fetch — all &amp;&amp; git merge origin/master<br/>git checkout ep4-start</span></pre><p id="1802" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">我喜欢在本地安装浏览器同步，这样它就可以和<em class="iy">【NPM安装】:</em>一起安装</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="69dc" class="jw jx hh ly b fi mc md l me mf">npm install --save-dev browser-sync</span></pre><p id="3685" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">接下来，将上面的<em class="iy"> `sync` </em>脚本添加到您的<em class="iy"> `package.json` </em>文件的<em class="iy"> `scripts` </em>部分:</p><figure class="lt lu lv lw fd ii"><div class="bz dy l di"><div class="mg mh l"/></div></figure><p id="507f" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">您需要同时运行<em class="iy"> `watch` </em>脚本和<em class="iy"> `sync` </em>脚本。我在两个独立的终端选项卡中运行它们。如果您的终端不支持标签，您可以在单独的终端窗口中运行它们。</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="d958" class="jw jx hh ly b fi mc md l me mf">npm run sync</span></pre><p id="ff9e" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">记下外部URL，这样您就可以在移动设备上浏览它，体验Browsersync到底有多酷。我强烈建议你这么做。在另一个终端中:</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="f300" class="jw jx hh ly b fi mc md l me mf">npm run watch</span></pre><p id="9f29" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">我们的监视脚本监视更改并自动重建，这将触发Browsersync刷新。</p><p id="9cd0" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">您现在应该已经做好了一切准备，可以了解这些变化如何同时影响浏览器和单元测试。通常，我会在不同的屏幕上运行浏览器和开发控制台，这样在我编码的时候，我可以很容易地一次看到所有的东西。在您的工作流程中尝试一下。</p><p id="0c64" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">如果想在剧集结束后浏览代码，可以查看<em class="iy"> `ep4-finished` </em>标签。</p></div><div class="ab cl mi mj go mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ha hb hc hd he"><p id="0dcb" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">猎枪视频系列是会员的专属福利。立即加入并赶上前几集:</p><h1 id="f71f" class="mp jx hh bd jy mq mr ms kc mt mu mv kg mw mx my kk mz na nb ko nc nd ne ks nf bi translated"><a class="ae jv" href="https://ericelliottjs.com/product/lifetime-access-pass/" rel="noopener ugc nofollow" target="_blank">跟随Eric Elliott学习JavaScript】</a></h1></div><div class="ab cl mi mj go mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ha hb hc hd he"><p id="addd" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated"><strong class="iz hi"> <em class="iy">埃里克艾略特</em> </strong> <em class="iy">著有</em> <a class="ae jv" href="http://pjabook.com" rel="noopener ugc nofollow" target="_blank"> <em class="iy">【编程JavaScript应用】</em> </a> <em class="iy">(奥赖利)，以及</em> <a class="ae jv" href="http://ericelliottjs.com/product/lifetime-access-pass/" rel="noopener ugc nofollow" target="_blank"> <em class="iy">【跟埃里克艾略特学JavaScript】</em></a><em class="iy">。他曾为</em><strong class="iz hi"><em class="iy">Adobe Systems</em></strong><em class="iy"/><strong class="iz hi"><em class="iy">Zumba Fitness</em></strong><em class="iy"/><strong class="iz hi"><em class="iy">【华尔街日报】</em></strong><em class="iy"/><strong class="iz hi"><em class="iy">BBC</em></strong><em class="iy">等顶级录音师</em></p><p id="61a2" class="pw-post-body-paragraph iw ix hh iz b ja jb jc jd je jf jg jh kh jj jk jl kl jn jo jp kp jr js jt ju ha bi translated">他大部分时间都在旧金山湾区和世界上最美丽的女人在一起。</p></div></div>    
</body>
</html>