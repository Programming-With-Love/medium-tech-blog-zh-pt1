<html>
<head>
<title>isDate and isNumber in the Popular Javascript Utility Library</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">流行的Javascript实用程序库中的isDate和isNumber</h1>
<blockquote>原文：<a href="https://medium.easyread.co/isdate-and-isnumber-in-the-popular-javascript-utility-library-35ad2f6b8937?source=collection_archive---------3-----------------------#2020-01-14">https://medium.easyread.co/isdate-and-isnumber-in-the-popular-javascript-utility-library-35ad2f6b8937?source=collection_archive---------3-----------------------#2020-01-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="3165" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">如果不知道它是什么，很容易误用它</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/e9ac4150fd928e0c3b5fc2a269268bf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DO66KDajnwyMONySqWvxKw.jpeg"/></div></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk">Photo by <a class="ae ks" href="https://unsplash.com/@austris_a?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Austris Augusts</a> on <a class="ae ks" href="https://unsplash.com/s/photos/number?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1b68" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">您可能经常为您的应用程序使用javascript实用程序库。或者是为了加快你的开发过程，或者只是想要一些已经被证明有效并经过测试的实用功能。我们知道的一些流行的实用程序库是<a class="ae ks" href="https://lodash.com/" rel="noopener ugc nofollow" target="_blank"> lodash </a>和<a class="ae ks" href="https://underscorejs.org/" rel="noopener ugc nofollow" target="_blank">下划线</a>。</p><p id="76b1" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你曾经使用过工具库来验证一个变量是否是一个有效的数字吗？Valid表示该值不会导致错误或者不会返回意外的结果，比如<code class="fe lp lq lr ls b"><strong class="kv io">NaN</strong></code>。如果您有lodash或下划线依赖项，您可能会尝试使用<code class="fe lp lq lr ls b"><strong class="kv io">isNumber</strong></code>函数。它似乎就是这么做的，对吗？</p><p id="95ca" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">让我们看看<code class="fe lp lq lr ls b"><strong class="kv io">isNumber</strong></code>函数的lodash和下划线实现。</p><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lt lu l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><a class="ae ks" href="https://github.com/jashkenas/underscore/blob/e51aa7251f3e010fe003fbb9d969a74b9dcda103/underscore.js#L1325-L1330" rel="noopener ugc nofollow" target="_blank">https://github.com/jashkenas/underscore/blob/e51aa7251f3e010fe003fbb9d969a74b9dcda103/underscore.js#L1325-L1330</a></figcaption></figure><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="lt lu l"/></div><figcaption class="ko kp gj gh gi kq kr bd b be z dk"><a class="ae ks" href="https://github.com/lodash/lodash/blob/04ebca6c86deba0ff733847f6c11fd5265e1ce03/isNumber.js#L29-L32" rel="noopener ugc nofollow" target="_blank">https://github.com/lodash/lodash/blob/04ebca6c86deba0ff733847f6c11fd5265e1ce03/isNumber.js#L29-L32</a></figcaption></figure><p id="26b7" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">这两个流行的库都有相似的实现。他们将变量Javascript类名类型与<code class="fe lp lq lr ls b"><strong class="kv io">[object Number]</strong></code>字符串进行比较。这不仅适用于数字类型，也适用于其他类型，如日期、函数等。</p><p id="4834" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">你可能认为这没什么，但是你知道<code class="fe lp lq lr ls b"><strong class="kv io">NaN</strong></code>在Javascript中也是一个数字吗？<a class="ae ks" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN" rel="noopener ugc nofollow" target="_blank">JavaScript中的NaN </a>是表示值的数字:<code class="fe lp lq lr ls b"><strong class="kv io">Not-A-Number</strong></code>。有点困惑，对吧？您可以在javascript控制台中亲自查看。</p><pre class="kd ke kf kg gt lv ls lw lx aw ly bi"><span id="908f" class="lz ma in ls b gy mb mc l md me">toString.call(NaN)<br/>// -&gt; [object Number]</span></pre><p id="33d2" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">因此，对于上述用例来说，使用<code class="fe lp lq lr ls b"><strong class="kv io">isNumber</strong></code>方法并不是正确的方式。我们需要另一个验证，即检查数字是否不是<code class="fe lp lq lr ls b"><strong class="kv io">NaN</strong></code>。我们最终会得到这样的结果。</p><pre class="kd ke kf kg gt lv ls lw lx aw ly bi"><span id="5608" class="lz ma in ls b gy mb mc l md me">const isValidNumber = _.isNumber(obj) &amp;&amp; !isNaN(obj)</span></pre><p id="50bf" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated"><em class="mf">那么</em> <code class="fe lp lq lr ls b"><strong class="kv io"><em class="mf">isDate</em></strong></code> <em class="mf">功能怎么样呢？什么可能导致问题？</em></p><p id="22f8" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">尝试初始化无效的日期对象，如<code class="fe lp lq lr ls b"><strong class="kv io">new Date("31/1/2019")</strong></code>或<code class="fe lp lq lr ls b"><strong class="kv io">new Date("test123")</strong></code>。结果值仍将是一个日期对象，但它将是一个无效的日期对象。这将很可能导致你的日期相关的逻辑有缺陷。因此，我们应该添加另一个步骤来验证日期对象，这可能就足够了:</p><pre class="kd ke kf kg gt lv ls lw lx aw ly bi"><span id="2e60" class="lz ma in ls b gy mb mc l md me">const isValidDate = _.isDate(obj) &amp;&amp; !isNaN(obj.getTime()) </span></pre><p id="634c" class="pw-post-body-paragraph kt ku in kv b kw kx jo ky kz la jr lb lc ld le lf lg lh li lj lk ll lm ln lo ig bi translated">概述:</p><ul class=""><li id="71b7" class="mg mh in kv b kw kx kz la lc mi lg mj lk mk lo ml mm mn mo bi translated">lodash和下划线中的类型检查函数只检查类型是否是正确的Javascript类型，但不验证值(请阅读相应的文档)</li><li id="0cba" class="mg mh in kv b kw mp kz mq lc mr lg ms lk mt lo ml mm mn mo bi translated"><code class="fe lp lq lr ls b"><strong class="kv io">NaN</strong></code>是Javascript中的一个数字</li><li id="7826" class="mg mh in kv b kw mp kz mq lc mr lg ms lk mt lo ml mm mn mo bi translated">用无效字符串初始化新的日期对象仍然会返回一个日期对象</li></ul></div><div class="ab cl mu mv hr mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ig ih ii ij ik"><figure class="kd ke kf kg gt kh"><div class="bz fp l di"><div class="nb lu l"/></div></figure></div></div>    
</body>
</html>