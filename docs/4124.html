<html>
<head>
<title>Angular — Advanced Styling Guide (v4+)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度—高级样式指南(v4+)</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/angular-advanced-styling-guide-v4-f0765616e635?source=collection_archive---------0-----------------------#2017-02-20">https://medium.com/google-developer-experts/angular-advanced-styling-guide-v4-f0765616e635?source=collection_archive---------0-----------------------#2017-02-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="6ef8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">了解如何像专业人士一样使用阴影DOM选择器、光线DOM、@HostBinding、ElementRef、Renderer、Sanitizer等等</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/a3742e6d6bf257af1edc813073b169c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gZbmYGcpC7kJPChArG6IHg.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx"><a class="ae js" href="http://sasj.tumblr.com/post/144104787865/geometric-shapes-160509" rel="noopener ugc nofollow" target="_blank">Geometric Shapes</a> by Sasj</figcaption></figure><p id="f89e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本指南中，我们希望涵盖在设计角度组件和指令时可用的不同选项。我们将涵盖:</p><ul class=""><li id="51dd" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb jy jz ka kb bi translated"><strong class="ig hi">角度封装模式</strong> : <a class="ae js" href="#64dd" rel="noopener ugc nofollow">仿真</a>，<a class="ae js" href="#aaa3" rel="noopener ugc nofollow">原生</a>禁用。</li><li id="1455" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated"><a class="ae js" href="#4264" rel="noopener ugc nofollow"> <strong class="ig hi">浏览器支持</strong> </a>、<a class="ae js" href="#f981" rel="noopener ugc nofollow"> <strong class="ig hi">阴影DOM </strong> vs <strong class="ig hi">光线DOM </strong> </a>。</li><li id="a465" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated"><strong class="ig hi">@组件样式</strong> <strong class="ig hi">元数据</strong> : <a class="ae js" href="#2ecd" rel="noopener ugc nofollow">内联</a>，<a class="ae js" href="#7476" rel="noopener ugc nofollow">模板内联</a>和<a class="ae js" href="#29c5" rel="noopener ugc nofollow">外部样式</a>。</li><li id="a582" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated"><a class="ae js" href="#9b4f" rel="noopener ugc nofollow">使用<strong class="ig hi"> ngClass </strong>和<strong class="ig hi"> ngStyle </strong>指令</a>。</li><li id="b552" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated"><a class="ae js" href="#98ad" rel="noopener ugc nofollow"> <strong class="ig hi">阴影DOM选择器</strong></a>::. host()，:host-context()，:host /deep/ selector，:host &gt; &gt; &gt;选择器</li><li id="c1ee" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated">使用<a class="ae js" href="#9f89" rel="noopener ugc nofollow"><strong class="ig hi">@ component . host</strong></a><strong class="ig hi"/>和<strong class="ig hi"/><a class="ae js" href="#49c6" rel="noopener ugc nofollow"><strong class="ig hi">@ host binding</strong></a><strong class="ig hi">。</strong> <a class="ae js" href="#ae9d" rel="noopener ugc nofollow"> <strong class="ig hi">不安全款式</strong> </a> <strong class="ig hi">。</strong></li><li id="ccab" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated">使用<a class="ae js" href="#8d15" rel="noopener ugc nofollow"> <strong class="ig hi"> ElementRef </strong> </a>和<a class="ae js" href="#8d15" rel="noopener ugc nofollow"><strong class="ig hi">native element</strong></a>API(Web)。</li><li id="9a37" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated">使用<a class="ae js" href="#2e5f" rel="noopener ugc nofollow"> <strong class="ig hi">渲染器</strong> </a>和<a class="ae js" href="#2e5f" rel="noopener ugc nofollow"><strong class="ig hi">setElementClass</strong>/</a><a class="ae js" href="#2e5f" rel="noopener ugc nofollow"><strong class="ig hi">setElementStyle</strong></a>API(Web、Server、WebWorker)。</li><li id="2056" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated"><a class="ae js" href="#0cd4" rel="noopener ugc nofollow"> CSS样式特异性和执行顺序</a>。</li></ul><p id="ac60" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以使用这个<a class="ae js" href="https://plnkr.co/edit/WUjoC897CXuybWvL9qt1?p=preview" rel="noopener ugc nofollow" target="_blank"> Plunker </a>来探索最终的代码。</p><p id="d9ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在<a class="ae js" href="https://twitter.com/intent/user?screen_name=gerardsans" rel="noopener ugc nofollow" target="_blank"> @gerardsans </a>找到我订阅的最新Angular内容。</p><h1 id="2bd1" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">介绍</h1><p id="03e1" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">造型角度应用从未如此灵活。角度组件架构提供了一种新的样式模型，通过使用<a class="ae js" href="https://www.w3.org/TR/shadow-dom/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> Shadow DOM </strong> </a>(仿真或本地)技术将组件样式与<a class="ae js" href="https://www.w3.org/standards/techs/components#w3c_all" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> Web组件</strong> </a> <strong class="ig hi"> </strong>规范隔离开来。样式是为每个组件定义的，所以它们不会影响用户界面的其他区域。</p><p id="88e7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章中，我们将使用一个组件来渲染<strong class="ig hi">歌曲曲目</strong>，展示一些不同的样式选项。该组件将呈现歌曲的封面、标题和艺术家。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="acce" class="lp ki hh ll b fi lq lr l ls lt"><a class="ae js" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'song-track',   // &lt;song-track&gt;&lt;/song-track&gt;<br/>})<br/>export class SongTrack { }</span></pre><p id="6961" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">见下文的最终结果。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lu"><img src="../Images/e190137850bf04388f9666a953b7fb31.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/1*sUp_6FD88KxI2fgFUDFXqQ.gif"/></div></figure><h1 id="0546" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">角度封装模式</h1><p id="55e3" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">在进一步探索不同的样式方法之前，让我们快速查看所有可用的封装模式。</p><h2 id="64dd" class="lp ki hh bd kj lv lw lx kn ly lz ma kr ip mb mc kv it md me kz ix mf mg ld mh bi translated">模拟(默认)</h2><p id="9839" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">在使用该模式时，Angular将使用两个唯一的属性来识别每个组件:<strong class="ig hi"> _nghost-* </strong>和<strong class="ig hi"> _ngcontent-* </strong>。任何组件样式都将使用这些属性添加到头部，以隔离样式，如下例所示。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="7110" class="lp ki hh ll b fi lq lr l ls lt">&lt;head&gt;<br/>  &lt;style&gt;<br/>    .container<strong class="ll hi">[_ngcontent-ikt-1]</strong> { ... } <br/>  &lt;/style&gt;<br/>&lt;/head&gt;</span><span id="547e" class="lp ki hh ll b fi mi lr l ls lt">&lt;body&gt;<br/>  &lt;my-app&gt;<br/>    &lt;song-track <strong class="ll hi">_nghost-ikt-1</strong>&gt;<br/>      &lt;div <strong class="ll hi">_ngcontent-ikt-1</strong> class="container"&gt;&lt;/div&gt;<br/>    &lt;/song-track&gt;<br/>  &lt;/my-app&gt;<br/>&lt;/body&gt;</span></pre><p id="b5bc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请注意以粗体字添加到我们组件的<strong class="ig hi">根</strong>和<strong class="ig hi">内容</strong>中的属性。您可以使用下面的代码显式激活此模式</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="4aca" class="lp ki hh ll b fi lq lr l ls lt"><a class="ae js" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'song-track',<br/>  <strong class="ll hi">encapsulation: ViewEncapsulation.Emulated<br/></strong>})</span></pre><blockquote class="mj mk ml"><p id="20c6" class="ie if mm ig b ih ii ij ik il im in io mn iq ir is mo iu iv iw mp iy iz ja jb ha bi translated">仿真封装实现了跨浏览器的最佳支持。</p></blockquote><h2 id="aaa3" class="lp ki hh bd kj lv lw lx kn ly lz ma kr ip mb mc kv it md me kz ix mf mg ld mh bi translated">本机封装</h2><p id="eb8c" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">该<strong class="ig hi"> </strong>封装将设置Angular，以对特定组件使用<strong class="ig hi">原生阴影DOM </strong>。根据浏览器的不同，这将是规格的<a class="ae js" href="https://developers.google.com/web/fundamentals/getting-started/primers/shadowdom" rel="noopener ugc nofollow" target="_blank">v1</a>(Chrome)。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="fa6a" class="lp ki hh ll b fi lq lr l ls lt"><a class="ae js" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'song-track',<br/>  <strong class="ll hi">encapsulation: ViewEncapsulation.Native<br/></strong>})</span></pre><p id="3b7d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将呈现以下内容。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="408d" class="lp ki hh ll b fi lq lr l ls lt">&lt;body&gt;<br/>  &lt;my-app&gt;<br/>    &lt;song-track&gt;    <br/>      <strong class="ll hi">▾ #shadow-root (open)</strong>    <br/>        &lt;style&gt;.container { ... }&lt;/style&gt;   <br/>        &lt;div class="container"&gt;&lt;/div&gt;<br/>    &lt;/song-track&gt;<br/>  &lt;/my-app&gt;<br/>&lt;/body&gt;</span></pre><p id="8cb6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意样式现在是如何封装在<strong class="ig hi">#阴影根</strong>下的。我们将在稍后介绍具体的造型选择。</p><blockquote class="mj mk ml"><p id="98a3" class="ie if mm ig b ih ii ij ik il im in io mn iq ir is mo iu iv iw mp iy iz ja jb ha bi translated">某些浏览器不支持本机封装。在此检查电流支持<a class="ae js" href="http://caniuse.com/#feat=shadowdomv1" rel="noopener ugc nofollow" target="_blank">。</a></p></blockquote><h2 id="5ef7" class="lp ki hh bd kj lv lw lx kn ly lz ma kr ip mb mc kv it md me kz ix mf mg ld mh bi translated">禁用封装</h2><p id="91bd" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">我们也可以完全禁用特定组件的封装。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="1776" class="lp ki hh ll b fi lq lr l ls lt"><a class="ae js" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'song-track',<br/>  <strong class="ll hi">encapsulation: ViewEncapsulation.None<br/></strong>})</span></pre><p id="4257" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过使用此模式，Angular将向头部添加任何已定义的样式，以便使用此封装在组件之间共享样式。</p><h1 id="4264" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">本机阴影DOM浏览器支持</h1><p id="c5bb" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">目前，原生影子DOM 仍未得到广泛支持。参见下面的仿真和本地<strong class="ig hi">浏览器支持对比</strong>。</p><div class="jd je jf jg fd ab cb"><figure class="mq jh mr ms mt mu mv paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><img src="../Images/aee7ecdb74566ea10da8fe90d9c418da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*C5-g6Ez1PubW6MiDFwIXhQ.png"/></div></figure><figure class="mq jh mr ms mt mu mv paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><img src="../Images/675bfa963c89feb71f6558ca9b450ada.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/1*ZX5kXrCU1_jF6DErqS01ew.png"/></div></figure></div><blockquote class="mj mk ml"><p id="ebfc" class="ie if mm ig b ih ii ij ik il im in io mn iq ir is mo iu iv iw mp iy iz ja jb ha bi translated">查看当前支持检查<a class="ae js" href="http://caniuse.com/#feat=shadowdomv1" rel="noopener ugc nofollow" target="_blank">can use</a>。</p></blockquote><blockquote class="mw"><p id="04c0" class="mx my hh bd mz na nb nc nd ne nf jb dx translated">在激活本机封装之前，请考虑浏览器支持。</p></blockquote><h1 id="f981" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks ng ku kv kw nh ky kz la ni lc ld le bi translated">阴影世界vs光明世界</h1><p id="844e" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">当设计我们的组件时，它可以帮助区分<strong class="ig hi">阴影区域</strong>和<strong class="ig hi">光线区域</strong>。</p><ul class=""><li id="5899" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb jy jz ka kb bi translated"><strong class="ig hi"> Shadow DOM </strong>:组件创建或管理的任何本地DOM元素。这也包括任何子组件。</li></ul><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="2332" class="lp ki hh ll b fi lq lr l ls lt"><strong class="ll hi">&lt;song-track title="No Lie" artist="Sean Paul..."&gt;&lt;/song-track&gt;</strong></span><span id="7431" class="lp ki hh ll b fi mi lr l ls lt"><a class="ae js" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'song-track',<br/>  template: `        <br/>     &lt;track-title&gt;{{track}}&lt;/track-title&gt;<br/>     &lt;track-artist&gt;{{artist}}&lt;/track-artist&gt;`<br/>})<br/>export class SongTrack { }</span></pre><ul class=""><li id="03e5" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb jy jz ka kb bi translated"><strong class="ig hi"> Light DOM </strong>:组件的任何子DOM元素。也称为投影内容(ng-content)。</li></ul><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="4550" class="lp ki hh ll b fi lq lr l ls lt">&lt;song-track&gt;<br/><strong class="ll hi">  &lt;track-title&gt;No Lie&lt;/track-title&gt;<br/>  &lt;track-artist&gt;Sean Paul, Dua Lipa&lt;/track-artist&gt;</strong><br/>&lt;/song-track&gt;</span><span id="986d" class="lp ki hh ll b fi mi lr l ls lt"><a class="ae js" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'song-track',<br/>  template: `&lt;ng-content&gt;&lt;/ng-content&gt;`<br/>})<br/>export class SongTrack { }</span></pre><h1 id="163c" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">@组件样式元数据</h1><p id="d7c1" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">为了设计我们的组件，我们可以使用组件元数据。</p><blockquote class="mj mk ml"><p id="0d0c" class="ie if mm ig b ih ii ij ik il im in io mn iq ir is mo iu iv iw mp iy iz ja jb ha bi translated">Angular将按照下面使用的相同顺序在页眉中添加样式。</p></blockquote><h2 id="2ecd" class="lp ki hh bd kj lv lw lx kn ly lz ma kr ip mb mc kv it md me kz ix mf mg ld mh bi translated">使用内嵌样式</h2><p id="3901" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">这是我们将样式添加到组件所在的文件中的时候。按照数组顺序添加到标题的第一个位置。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="20b9" class="lp ki hh ll b fi lq lr l ls lt"><a class="ae js" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'song-track',<br/>  <strong class="ll hi">styles: [`.container { color: white; }`]</strong><br/>})<br/>export class SongTrack { }</span></pre><h2 id="7476" class="lp ki hh bd kj lv lw lx kn ly lz ma kr ip mb mc kv it md me kz ix mf mg ld mh bi translated">使用模板内嵌样式</h2><p id="6639" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">我们也可以使用这个特性将我们的样式嵌入到模板中。添加在页眉的第二个位置。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="c3c9" class="lp ki hh ll b fi lq lr l ls lt">@Component({<br/> template: `<br/>   <strong class="ll hi">&lt;style&gt;<br/>   .container { color: deepskyblue; }<br/>   &lt;/style&gt;</strong>   <br/>   &lt;div class="container"&gt;...&lt;/div&gt;<br/> `<br/>})<br/>export class SongTrack { }</span></pre><h2 id="29c5" class="lp ki hh bd kj lv lw lx kn ly lz ma kr ip mb mc kv it md me kz ix mf mg ld mh bi translated">使用外部文件</h2><p id="af34" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">当我们的组件需要更复杂的样式时，我们可以使用外部文件。按照数组顺序添加到标题的第三个位置。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="ea7c" class="lp ki hh ll b fi lq lr l ls lt">//song-track.component.css<br/>.container { ... }</span><span id="c733" class="lp ki hh ll b fi mi lr l ls lt">//song-track.component.ts<br/>@Component({<br/>  <strong class="ll hi">styleUrls</strong>: ['./song-track.component.css'],<br/>})<br/>export class SongTrack { }</span></pre><p id="c93b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作为CSS规范的一部分，我们也可以使用<strong class="ig hi"> @import </strong>从其他样式表中导入样式。这些必须在样式表中的任何样式规则之前。参见<a class="ae js" href="https://developer.mozilla.org/en/docs/Web/CSS/@import" rel="noopener ugc nofollow" target="_blank">@导入</a>。导入将被添加到样式表之后的标题中。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="3754" class="lp ki hh ll b fi lq lr l ls lt"><strong class="ll hi">@import 'common.css';</strong><br/>.container { ... }</span></pre><h1 id="9b4f" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">使用ngClass和ngStyle指令</h1><p id="51bc" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">我们可以使用<strong class="ig hi"> ngClass </strong>和<strong class="ig hi"> ngStyle </strong>指令来动态设计我们的组件。让我们来看看一些常见的用法</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="1de5" class="lp ki hh ll b fi lq lr l ls lt">&lt;song-track ngClass="selected" class="disabled"&gt;&lt;/song-track&gt;<br/>&lt;song-track [ngClass]="'selected'"&gt;&lt;/song-track&gt;   <br/>&lt;song-track [ngClass]="['selected']"&gt;&lt;/song-track&gt; <br/>&lt;song-track [ngClass]="{'selected': true}"&gt;&lt;/song-track&gt;</span></pre><p id="f341" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意<strong class="ig hi"> ngClass </strong>可以与现有的类属性组合，而不需要使用任何绑定。为了定位多个类，我们可以使用一些有趣的变化的扩展语法</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="c46e" class="lp ki hh ll b fi lq lr l ls lt">&lt;<!-- -->song-track<!-- --> ngClass="<!-- -->selected<!-- --> disabled"&gt;             <br/>&lt;<!-- -->song-track<!-- --> [ngClass]="'<!-- -->selected<!-- --> disabled'"&gt;      <br/>&lt;<!-- -->song-track<!-- --> [ngClass]="['<!-- -->selected<!-- -->', 'disabled']"&gt;   <br/>&lt;<!-- -->song-track<!-- --> [ngClass]="{'<!-- -->selected<!-- -->': true, 'disabled': true}"&gt;<br/>&lt;<!-- -->song-track<!-- --> [ngClass]="{'<!-- -->selected<!-- --> disabled': true}"&gt;</span></pre><p id="273e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于ngStyle，我们可以做同样的事情，但是因为我们需要成对的属性和值，所以选项较少</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="eab7" class="lp ki hh ll b fi lq lr l ls lt">&lt;song-track [ngStyle]="{'color': 'white'}" style="margin: 5px;"&gt;&lt;song-track [ngStyle]="{'<strong class="ll hi">font-size.px</strong>': '12'}"&gt;<br/>&lt;song-track [ngStyle]="{'font-size': '12px'}"&gt;</span><span id="5be1" class="lp ki hh ll b fi mi lr l ls lt">&lt;song-track [ngStyle]="{'color': 'white', 'font-size': '12px'}"&gt;</span></pre><p id="4bfc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意扩展单位语法匹配现有的<a class="ae js" href="https://www.w3.org/Style/Examples/007/units.en.html" rel="noopener ugc nofollow" target="_blank"> CSS测量单位</a>。要应用多种样式，您可以添加更多属性。</p><h1 id="98ad" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">使用阴影DOM选择器</h1><p id="ff60" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">当使用模拟或本地封装时，我们可以访问一些有趣的CSS选择器，这些选择器只有影子DOM才有。</p><h2 id="39da" class="lp ki hh bd kj lv lw lx kn ly lz ma kr ip mb mc kv it md me kz ix mf mg ld mh bi translated">设计我们的容器(又名主机)</h2><p id="d464" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">如果我们需要访问我们的容器或者与其他选择器一起使用，我们可以使用<strong class="ig hi"> :host </strong>伪类选择器</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="def0" class="lp ki hh ll b fi lq lr l ls lt">:host { color: black; }          // &lt;song-track&gt;<br/>:host(.selected) { color: red; } // &lt;song-track class="selected"&gt;</span></pre><p id="83af" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第一个例子将匹配<strong class="ig hi">歌曲音轨</strong>元素，并为其样式添加颜色。第二个例子将使用<strong class="ig hi">选择的</strong>类匹配<strong class="ig hi">歌曲音轨</strong>元素。</p><h2 id="774b" class="lp ki hh bd kj lv lw lx kn ly lz ma kr ip mb mc kv it md me kz ix mf mg ld mh bi translated">依赖祖先的风格</h2><p id="39dd" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">我们还可以根据祖先到文档根的匹配来添加样式。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="3e13" class="lp ki hh ll b fi lq lr l ls lt">:host-context(.theme) { color: red; }   <br/>:host-context(#player1) { color: red; }</span></pre><p id="d587" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">只有当<strong class="ig hi">主题</strong>类应用于我们组件的任何祖先时，上面的例子才会改变<strong class="ig hi">颜色</strong>。第二个例子将使用<strong class="ig hi"> id="player1" </strong>匹配一个祖先。</p><h2 id="dbb4" class="lp ki hh bd kj lv lw lx kn ly lz ma kr ip mb mc kv it md me kz ix mf mg ld mh bi translated">设置宿主和后代的样式(跨越边界)</h2><p id="351e" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">此选项将覆盖任何封装设置，包括主机子级。该选择器将同时适用于<strong class="ig hi">阴影</strong>和<strong class="ig hi">光域</strong>。</p><blockquote class="mw"><p id="7991" class="mx my hh bd mz na nj nk nl nm nn jb dx translated">我们可以使用/deep/覆盖影子DOM边界</p></blockquote><pre class="no np nq nr ns lk ll lm ln aw lo bi"><span id="ce00" class="lp ki hh ll b fi lq lr l ls lt">:host  /deep/ .<!-- -->selected<!-- --> { color: red; }<br/>:host   &gt;&gt;&gt;   .<!-- -->selected<!-- --> { color: red; }</span></pre><blockquote class="mj mk ml"><p id="235d" class="ie if mm ig b ih ii ij ik il im in io mn iq ir is mo iu iv iw mp iy iz ja jb ha bi translated">注意:在Angular-CLI中使用/deep/而不是&gt; &gt; &gt;。</p></blockquote><h1 id="9f89" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">使用@Component.host</h1><p id="5425" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">通过使用这个属性，我们可以绑定<strong class="ig hi"> DOM属性</strong>、<strong class="ig hi"> DOM属性</strong>和<strong class="ig hi">事件</strong>。请参见下面不同选项的概述。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="1f80" class="lp ki hh ll b fi lq lr l ls lt">@Component({<br/> host: {<br/>  'value': 'default',                    //'DOM-prop': 'value'  <br/>  '[value]': "'default'",                //'[DOM-prop]': 'expr'   <br/>  <br/>  'class': 'selected',                   //'DOM-attr': 'value'<br/>  '[class]': "'selected'",               //'[DOM-attr]': 'expr'<br/> <br/>  <!-- -->'(change)': 'onChange($event)',        // (event) : ...   <br/>  '(window:resize)': 'onResize($event)', // (target:event) : ...<br/> <!-- -->} <br/>})</span></pre><p id="d54f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看一些使用<strong class="ig hi">类</strong>和<strong class="ig hi">样式</strong> DOM <strong class="ig hi"> </strong>属性的例子。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="1d1e" class="lp ki hh ll b fi lq lr l ls lt">@Component({<br/>  host: {<br/>    //setting multiple values<br/>    'class': 'selected disabled',<br/>    'style': 'color: purple; margin: 5px;',<br/>    <br/>    //setting single values (using binding)<br/>    '[class.selected]': 'true',    <br/>    '[class.selected]': '!!selected', //add class if selected = true<br/>    '[style.color]': '"purple"'   //expression must be a string<br/>  } <br/>})<br/>export class SongTrack { }</span></pre><p id="6476" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请注意方括号在创建绑定时的用法。这就是为什么<strong class="ig hi">‘真’</strong>变成了<strong class="ig hi">布尔真</strong>。对于CSS属性<strong class="ig hi">颜色</strong>我们需要传递一个字符串。</p><h2 id="ae9d" class="lp ki hh bd kj lv lw lx kn ly lz ma kr ip mb mc kv it md me kz ix mf mg ld mh bi translated">绑定不安全的表达式</h2><p id="57bc" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">为了避免滥用，Angular可能会将一些样式表达式标记为不安全。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="be98" class="lp ki hh ll b fi lq lr l ls lt">@Component({<br/>  host: {<br/>    '[style]': '_hostStyle' //unsafe<br/>  } <br/>})<br/>export class SongTrack { }</span></pre><p id="5688" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你面临这个特殊的问题，你可以通过使用<strong class="ig hi">杀毒软件</strong>上的<strong class="ig hi">bypassSecurityTrustStyle</strong>API来将表达式标记为安全。这将避免任何滥用或安全漏洞。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="d2c5" class="lp ki hh ll b fi lq lr l ls lt">export class SongTrack {<br/>  constructor(<strong class="ll hi">private sanitizer: Sanitizer</strong>){<br/>    this._hostStyle = this.sanitizer<br/>      .bypassSecurityTrustStyle('color: black;');<br/>  }<br/>}</span></pre><h1 id="49c6" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">使用@HostBinding</h1><p id="3a4e" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">我们也可以使用<strong class="ig hi"> @HostBinding </strong>装饰器来设置我们的样式。请看下面的一些例子。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="3e98" class="lp ki hh ll b fi lq lr l ls lt">export class SongTrack {   <br/>  //&lt;host class="selected"&gt;&lt;/host&gt;   <br/>  <strong class="ll hi">@HostBinding('class.selected')</strong> selected = true;</span><span id="e57e" class="lp ki hh ll b fi mi lr l ls lt">  //&lt;host style="color: red;"&gt;&lt;/host&gt;     <br/>  <strong class="ll hi">@HostBinding('style.color')</strong> color = 'red';<br/>}</span></pre><blockquote class="mj mk ml"><p id="47f0" class="ie if mm ig b ih ii ij ik il im in io mn iq ir is mo iu iv iw mp iy iz ja jb ha bi translated"><strong class="ig hi">@ host binding</strong>decorator被翻译成<strong class="ig hi"> @Component.host </strong>元数据。</p></blockquote><h1 id="8d15" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">使用ElementRef和nativeElement APIs(浏览器)</h1><p id="33bb" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">有时我们可能想要访问底层DOM元素来操作它的样式。为此，我们需要注入<strong class="ig hi"> ElementRef </strong>并访问<strong class="ig hi"> nativeElement </strong>属性。这将使我们能够访问DOM APIs。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="67c4" class="lp ki hh ll b fi lq lr l ls lt">export class SongTrack {<br/>  constructor(<strong class="ll hi">private element: ElementRef</strong>){<br/>    let elem = <strong class="ll hi">this.element.nativeElement</strong>;<br/>    elem.style.color = "blue";<br/>    elem.style.cssText = "color: blue; ..."; // multiple styles<br/>    elem.setAttribute("style", "color: blue;"); <br/>  }<br/>}</span></pre><blockquote class="mj mk ml"><p id="8f3a" class="ie if mm ig b ih ii ij ik il im in io mn iq ir is mo iu iv iw mp iy iz ja jb ha bi translated">请注意，此选项适用于浏览器平台，但不适用于桌面或移动设备。</p></blockquote><h1 id="2e5f" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">使用渲染器和setElementClass/setElementStyle API(Web、服务器、WebWorker)</h1><p id="f237" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">一个更安全的替代ElementRef来设置我们的样式的方法是使用<strong class="ig hi">渲染器</strong>和<strong class="ig hi"> setElementClass </strong>和<strong class="ig hi"> setElementStyle </strong>。它们的实现将抽象出正在使用的底层平台，克服ElementRef的兼容性限制。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="5b83" class="lp ki hh ll b fi lq lr l ls lt">export class SongTrack {<br/>  constructor(<br/>     <strong class="ll hi">private element: ElementRef,<br/></strong>     <strong class="ll hi">private renderer: Renderer<br/>  </strong>){<br/>    let elem = <strong class="ll hi">this.element.nativeElement</strong>;<br/>    renderer.setElementStyle(elem, "color", "blue");<br/>    renderer.setElementClass(elem, "selected", true);<br/>  }<br/>}</span></pre><h1 id="0cd4" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">CSS样式特异性和执行顺序</h1><p id="c8e7" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">所有样式都遵循以下特性和顺序规则。</p><ul class=""><li id="9ccb" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb jy jz ka kb bi translated">样式规则越具体，优先级越高</li><li id="93ce" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated">同样，最后应用的样式规则优先于任何先前的样式规则</li></ul><p id="40d7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是样式的应用顺序及其自下而上的优先级。</p><pre class="jd je jf jg fd lk ll lm ln aw lo bi"><span id="ab3f" class="lp ki hh ll b fi lq lr l ls lt">Component implementation<br/>- Styles defined at @Component.styles (following array order)<br/>- Template Inline Styles<br/>- External styles @Component.styleUrls (following array order)</span><span id="f888" class="lp ki hh ll b fi mi lr l ls lt">Container<br/>- Inline style. Eg: &lt;... style=""&gt;<br/>- ngClass and ngStyle</span></pre><p id="f017" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，如果我们使用<strong class="ig hi"> ngStyle </strong>，这将覆盖元素上定义的任何内联样式和任何以前的样式。</p><blockquote class="mw"><p id="afa5" class="mx my hh bd mz na nj nk nl nm nn jb dx translated">样式是作为角度渲染执行和组件生命周期的一部分静态和动态应用的。</p></blockquote><p id="2df7" class="pw-post-body-paragraph ie if hh ig b ih nt ij ik il nu in io ip nv ir is it nw iv iw ix nx iz ja jb ha bi translated">注意，根据执行的顺序，我们可能会得到一个被另一个覆盖的样式。比如先应用<strong class="ig hi"> @Component.host </strong>，再应用<strong class="ig hi"> @Hostbinding </strong>。</p><p id="67ee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">那都是乡亲们！有什么问题吗？感谢阅读！在<a class="ae js" href="https://twitter.com/intent/user?screen_name=gerardsans" rel="noopener ugc nofollow" target="_blank"> @gerardsans </a>给我发短信</p><h2 id="0f11" class="lp ki hh bd kj lv lw lx kn ly lz ma kr ip mb mc kv it md me kz ix mf mg ld mh bi translated">想要更多吗？</h2><p id="e872" class="pw-post-body-paragraph ie if hh ig b ih lf ij ik il lg in io ip lh ir is it li iv iw ix lj iz ja jb ha bi translated">如果您需要更多示例，请随时通过<em class="mm">Gerard _ dot _ sans _ at _ Gmail _ dot _ com</em>联系我！</p><div class="ny nz ez fb oa ob"><a href="http://www.meetup.com/AngularZone/" rel="noopener  ugc nofollow" target="_blank"><div class="oc ab dw"><div class="od ab oe cl cj of"><h2 class="bd hi fi z dy og ea eb oh ed ef hg bi translated">安古拉宗社区</h2><div class="oi l"><h3 class="bd b fi z dy og ea eb oh ed ef dx translated">欢迎来到我们的社区。我们的激情是有棱角的。加入我们吧！🚀</h3></div></div><div class="oj l"><div class="ok l ol om on oj oo jm ob"/></div></div></a></div><h1 id="bf96" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">进一步阅读</h1><ul class=""><li id="be2e" class="jt ju hh ig b ih lf il lg ip op it oq ix or jb jy jz ka kb bi translated"><a class="ae js" href="https://www.w3.org/TR/shadow-dom" rel="noopener ugc nofollow" target="_blank">阴影DOM规范</a></li><li id="7def" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated"><a class="ae js" href="https://www.w3.org/TR/css-scoping-1" rel="noopener ugc nofollow" target="_blank">阴影DOM选择器</a></li><li id="1025" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated">埃里克·比德尔曼的《T21》</li></ul><figure class="jd je jf jg fd jh er es paragraph-image"><a href="https://twitter.com/intent/user?screen_name=gerardsans"><div class="er es os"><img src="../Images/abefda0aa7864742686ec7f7fdffe2b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1tQhWBuVOdzR7OAGvyd8Q.png"/></div></a></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ot"><img src="../Images/9fd286dfbf7cdb6af31ec992fc7af013.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4RTkddn-LfJnNa-vAmY_ag.png"/></div></div></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ou"><img src="../Images/67b37e5d672384f0953563450fca0029.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uNeEFxYiwJq8RfiDCsI-Xg.gif"/></div></div></figure></div></div>    
</body>
</html>