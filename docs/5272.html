<html>
<head>
<title>Build &amp; Deploy a Jetty based app using Oracle Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Oracle云构建和部署基于Jetty的应用程序</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/build-deploy-a-jetty-based-app-using-oracle-application-container-cloud-oracle-developer-cloud-c756f7a04a3b?source=collection_archive---------2-----------------------#2017-08-01">https://medium.com/oracledevs/build-deploy-a-jetty-based-app-using-oracle-application-container-cloud-oracle-developer-cloud-c756f7a04a3b?source=collection_archive---------2-----------------------#2017-08-01</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="b2d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这篇博客展示了以下内容</p><ul class=""><li id="53a2" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">开发一个Java应用程序，在<strong class="ig hi"> Jetty之上公开REST和Websocket服务(在<strong class="ig hi">嵌入式</strong>模式下</strong></li><li id="da1b" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">在<a class="ae jq" href="https://cloud.oracle.com/en_US/application-container-cloud" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">应用容器云</strong> </a>上运行它</li><li id="f935" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">使用<a class="ae jq" href="https://cloud.oracle.com/en_US/developer-service" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">开发人员云</strong> </a>进行持续集成和交付</li></ul><h1 id="c1db" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">突堤？</h1><p id="9ba1" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">对于不熟悉<a class="ae jq" href="http://www.eclipse.org/jetty/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">突堤</strong> </a>的人来说，从根本上来说，</p><ul class=""><li id="ed27" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">网络(HTTP)服务器，以及</li><li id="41b2" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">符合Servlet的容器</li></ul><p id="936e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，您可以使用它来创建一个定制容器，因为它的模块化特性允许您为大多数Java EE Web Profile规范(例如Websocket、CDI、JPA等)插入实现。).<a class="ae jq" href="http://www.eclipse.org/jetty/documentation/current/jetty-javaee.html" rel="noopener ugc nofollow" target="_blank">文档中的详细信息</a></p></div><div class="ab cl ku kv go kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ha hb hc hd he"><h1 id="8bf1" class="jr js hh bd jt ju lb jw jx jy lc ka kb kc ld ke kf kg le ki kj kk lf km kn ko bi translated">关于示例应用程序</h1><p id="f102" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">该应用程序类似于我在以前的博客中使用的<a class="ae jq" rel="noopener" href="/oracledevs/java-ee-based-microservice-on-oracle-cloud-with-payara-micro-32f8f823103f">——跟踪纽约证券交易所的股票价格，并使用REST &amp; Websocket端点公开它们</a></p><p id="8065" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">重要的区别在于，在这个例子中，没有使用<code class="du lg lh li lj b">EJB + CDI events</code>组合来跟踪和广播股票价格——而是使用了(基于普通Java SE的)<code class="du lg lh li lj b">ScheduledExecutorService</code>,它</p><ul class=""><li id="e5d3" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">使用后台任务线程(Runnable)定期获取价格，并且</li><li id="0ce4" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">将它们发送到每个连接的Websocket客户端</li></ul><p id="73a5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该应用程序在处<a class="ae jq" href="https://github.com/abhirockzz/accs-jetty-embedded" rel="noopener ugc nofollow" target="_blank">可用。让我们探索它的一些特定领域</a></p><h2 id="bf65" class="lk js hh bd jt ll lm ln jx lo lp lq kb ip lr ls kf it lt lu kj ix lv lw kn lx bi translated">设置所需的容器/运行时</h2><p id="62f2" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">让我们看看如何使用Jetty来提供REST以及基于Websocket的功能</p><ul class=""><li id="a65d" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi"> JAX-RS容器</strong>:该应用利用了Jersey的可插拔Jetty (Servlet)模块，即Jetty Servlet容器作为Jersey (JAX-RS)实现的运行时</li><li id="0602" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi"> Websocket容器</strong> : Jetty为<a class="ae jq" href="http://jcp.org/en/jsr/detail?id=356" rel="noopener ugc nofollow" target="_blank">Java web socket API(JSR 356)</a>提供了一个第一类的实现——因此，它可能不需要插入任何其他的实现(例如Tyrus)</li></ul><p id="77b2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是来自<strong class="ig hi"> pom.xml </strong>的一个片段，显示了所需的依赖关系</p><figure class="lz ma mb mc fd md er es paragraph-image"><div class="er es ly"><img src="../Images/b4b24ab22b0f63d1a233402c8f437675.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/0*l6BQ9NpdQsQMFExO.png"/></div><figcaption class="mg mh et er es mi mj bd b be z dx">Excerpt from the pom.xml</figcaption></figure><h2 id="2161" class="lk js hh bd jt ll lm ln jx lo lp lq kb ip lr ls kf it lt lu kj ix lv lw kn lx bi translated"><strong class="ak"> <em class="mk">自举各自的容器</em> </strong></h2><figure class="lz ma mb mc fd md er es paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="er es ml"><img src="../Images/43729262d57d86433eca32641a76406d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*3gVS62n_zEEeBqXK.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx">Bootstrap JAX-RS and Websocket runtimes</figcaption></figure><h2 id="37f2" class="lk js hh bd jt ll lm ln jx lo lp lq kb ip lr ls kf it lt lu kj ix lv lw kn lx bi translated">基于Websocket的广播</h2><p id="df56" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">它是以异步方式实现的</p><figure class="lz ma mb mc fd md er es paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="er es mq"><img src="../Images/f877345ffd8947af305b92012ddab5b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*L2co162DYsE8DYbI.png"/></div></div><figcaption class="mg mh et er es mi mj bd b be z dx">JSR-356 RemoteEndpoint.Async in action</figcaption></figure></div><div class="ab cl ku kv go kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ha hb hc hd he"><h1 id="6f33" class="jr js hh bd jt ju lb jw jx jy lc ka kb kc ld ke kf kg le ki kj kk lf km kn ko bi translated">设置和部署</h1><p id="5f8a" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">您需要为<em class="mr">持续构建</em>以及<em class="mr">部署</em>流程配置Oracle开发人员云。您可以参考以前的博客(这里将重点介绍这个例子的一些细节)</p><h2 id="b649" class="lk js hh bd jt ll lm ln jx lo lp lq kb ip lr ls kf it lt lu kj ix lv lw kn lx bi translated">参考</h2><ul class=""><li id="4133" class="jc jd hh ig b ih kp il kq ip ms it mt ix mu jb jh ji jj jk bi translated">在Oracle开发人员云中引导应用程序— <a class="ae jq" href="https://community.oracle.com/community/cloud_computing/oracle-cloud-developer-solutions/blog/2017/05/25/getting-started-with-kafka-based-microservices-using-oracle-event-hub-cloud-application-container-cloud-developer-cloud#jive_content_id_Project__code_repository_creation" rel="noopener ugc nofollow" target="_blank">项目&amp;代码库创建</a></li><li id="7aad" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">持续集成设置— <a class="ae jq" href="https://community.oracle.com/community/cloud_computing/oracle-cloud-developer-solutions/blog/2017/05/25/getting-started-with-kafka-based-microservices-using-oracle-event-hub-cloud-application-container-cloud-developer-cloud#jive_content_id_Configure_build_job" rel="noopener ugc nofollow" target="_blank">配置构建作业</a></li><li id="b22e" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">部署设置— <a class="ae jq" href="https://community.oracle.com/community/cloud_computing/oracle-cloud-developer-solutions/blog/2017/05/25/getting-started-with-kafka-based-microservices-using-oracle-event-hub-cloud-application-container-cloud-developer-cloud#jive_content_id_Continuous_Deployment_CD_to_Application_Container_Cloud" rel="noopener ugc nofollow" target="_blank">持续部署(CD)到Oracle应用容器云</a></li></ul><h2 id="c3f4" class="lk js hh bd jt ll lm ln jx lo lp lq kb ip lr ls kf it lt lu kj ix lv lw kn lx bi translated">提供Oracle应用程序容器云(配置)描述符</h2><figure class="lz ma mb mc fd md er es paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="er es mv"><img src="../Images/fe9d360da3be6481659bbecead7bea76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hRuInDPyNcUsQXtL.png"/></div></div></figure><h2 id="7eb1" class="lk js hh bd jt ll lm ln jx lo lp lq kb ip lr ls kf it lt lu kj ix lv lw kn lx bi translated">Oracle开发人员云中的部署确认</h2><figure class="lz ma mb mc fd md er es paragraph-image"><div class="er es mw"><img src="../Images/83ccd3af56bcd3f14f3435a00b941d60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1238/format:webp/0*Ww71b7qbVqcsJ__n.png"/></div></figure><h2 id="558e" class="lk js hh bd jt ll lm ln jx lo lp lq kb ip lr ls kf it lt lu kj ix lv lw kn lx bi translated">Oracle应用程序容器云中的部署后状态</h2><figure class="lz ma mb mc fd md er es paragraph-image"><div role="button" tabindex="0" class="mm mn di mo bf mp"><div class="er es mx"><img src="../Images/b01dbc876abea5e0aad8c90d945429e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ic62LNVKmbTzdJKr.png"/></div></div></figure></div><div class="ab cl ku kv go kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ha hb hc hd he"><h1 id="6adc" class="jr js hh bd jt ju lb jw jx jy lc ka kb kc ld ke kf kg le ki kj kk lf km kn ko bi translated">测试应用程序</h1><p id="604c" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">您可以使用REST端点来查询脚本(按需)的价格，或者通过连接到Websocket端点来查询stream ORCL的价格——这两个选项总结如下</p><ul class=""><li id="8dce" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><strong class="ig hi">具体股票价格</strong>:只需在指定的URL上发出GET请求，例如<code class="du lg lh li lj b"><a class="ae jq" href="https://acc-payara-mydomain.apaas.em1.oraclecloud.com/ticker-tracker/api/stocks?ticker=AAPL" rel="noopener ugc nofollow" target="_blank">https://&lt;ACCS_APP_URL&gt;/mystocks/api/stocks?ticker=AAPL</a></code></li><li id="2261" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">订阅实时提要</strong>:使用WebSocket客户端并访问指定的端点URL，例如<code class="du lg lh li lj b">ws<a class="ae jq" href="https://acc-payara-mydomain.apaas.em1.oraclecloud.com/ticker-tracker/api/stocks?ticker=AAPL" rel="noopener ugc nofollow" target="_blank">s://&lt;ACCS_APP_URL&gt;/mystocks/rt/stocks</a></code></li></ul><blockquote class="my mz na"><p id="cd27" class="ie if mr ig b ih ii ij ik il im in io nb iq ir is nc iu iv iw nd iy iz ja jb ha bi translated">我推荐使用简单的WebSocket客户端，它可以作为插件安装到Chrome浏览器中</p></blockquote><h1 id="54bf" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">测试CI/CD流</h1><p id="717c" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">做一些代码修改，推送到Oracle开发者云服务Git repo。这应该</p><ul class=""><li id="b7e8" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">自动触发构建，一旦成功将</li><li id="b1ab" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">启动部署流程，以及</li><li id="3e3f" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">将新的应用程序版本重新部署到Oracle应用程序容器云</li></ul></div><div class="ab cl ku kv go kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ha hb hc hd he"><h1 id="c06a" class="jr js hh bd jt ju lb jw jx jy lc ka kb kc ld ke kf kg le ki kj kk lf km kn ko bi translated">不要忘记…</h1><ul class=""><li id="61c5" class="jc jd hh ig b ih kp il kq ip ms it mt ix mu jb jh ji jj jk bi translated">查看Oracle应用容器云的<a class="ae jq" href="https://docs.oracle.com/en/cloud/paas/app-container-cloud/create-first-applications.html" rel="noopener ugc nofollow" target="_blank">教程</a>——每个运行时都有一些东西！</li><li id="e9c3" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><a class="ae jq" href="http://bit.ly/2gR3nrV" rel="noopener ugc nofollow" target="_blank">其他关于应用容器云的博客</a></li></ul><blockquote class="my mz na"><p id="a3be" class="ie if mr ig b ih ii ij ik il im in io nb iq ir is nc iu iv iw nd iy iz ja jb ha bi translated">本文表达的观点是我个人的观点，不一定代表甲骨文的观点。</p></blockquote></div></div>    
</body>
</html>