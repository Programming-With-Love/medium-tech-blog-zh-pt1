<html>
<head>
<title>Try out JSON-B 1.0, JPA 2.2 using Java EE 8 on Glassfish 5 &amp; Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Glassfish 5 &amp; Docker上使用Java EE 8尝试JSON-B 1.0、JPA 2.2</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/try-out-json-b-1-0-jpa-2-2-using-java-ee-8-on-glassfish-5-docker-fe7ca45a6e7?source=collection_archive---------0-----------------------#2017-07-13">https://medium.com/oracledevs/try-out-json-b-1-0-jpa-2-2-using-java-ee-8-on-glassfish-5-docker-fe7ca45a6e7?source=collection_archive---------0-----------------------#2017-07-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="cb7d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">最新的Glassfish 5升级版</strong>现已推出<a class="ae jc" href="http://download.oracle.com/glassfish/5.0/promoted/index.html" rel="noopener ugc nofollow" target="_blank"/>——支持许多<strong class="ig hi"> Java EE 8 </strong>规范，例如JAX RS 2.1、JPA 2.2、JSON-B 1.0等。更多细节请查看水族馆空间。本博客涵盖</p><ul class=""><li id="2ff1" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">在这个版本中测试了几个新的插件——JSON-B 1.0和JPA 2.2</li><li id="fc8b" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">由于有了Glassfish 5 nightly Docker映像，我们在<a class="ae jc" href="https://cloud.oracle.com/container" rel="noopener ugc nofollow" target="_blank"> Oracle容器云</a>上运行了这个</li></ul><h1 id="d8df" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">应用</h1><p id="42b3" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">很简单——这里有<a class="ae jc" href="https://github.com/abhirockzz/javaee8-jsonb-jpa" rel="noopener ugc nofollow" target="_blank">这里有</a></p><ul class=""><li id="a3b6" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">有一个REST端点(也是一个<em class="ku">@无状态</em> bean)</li><li id="b5e7" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">使用JPA与嵌入式(Derby)数据库交互——我们使用Glassfish中的<em class="ku"> jdbc/__TimerPool </em>来简化事情</li><li id="7769" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">使用标准JPA特性在<em class="ku"> persistence.xml </em>中引导测试数据(drop + create DB和SQL source)</li></ul><h1 id="3dc2" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">JSON-B 1.0的实际应用</h1><p id="b25f" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">主要利用<a class="ae jc" href="https://static.javadoc.io/javax.json.bind/javax.json.bind-api/1.0/javax/json/bind/annotation/package-summary.html" rel="noopener ugc nofollow" target="_blank"> JSON-B注释</a>来定制行为</p><ul class=""><li id="8c14" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated"><code class="du kv kw kx ky b">@JsonbProperty</code>修改JSON属性的名称，即与POJO字段/变量名不同</li><li id="4fe9" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated"><code class="du kv kw kx ky b">@JsonbPropertyOrder</code>指定JSON属性的字典顺序反转(Z到A)</li></ul><p id="cfa1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">更多信息，请查看参考实现Yasson  </p><h1 id="aab4" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">JPA 2.2在运行</h1><p id="34c5" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">示例应用程序使用添加到<code class="du kv kw kx ky b"><strong class="ig hi">Query </strong></code>和<code class="du kv kw kx ky b"><strong class="ig hi">TypedQuery </strong></code>接口的流结果特性，通过该特性，可以使用JDK 8流API来导航JPA (JPQL、native等)的结果集。)查询。对于JPA 2.2中的其他添加内容，<a class="ae jc" href="https://jcp.org/aboutJava/communityprocess/maintenance/jsr338/ChangeLog-JPA-2.2-MR.txt" rel="noopener ugc nofollow" target="_blank">请检查此</a></p><h1 id="3fa7" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">建立Docker形象</h1><ul class=""><li id="fdfe" class="jd je hh ig b ih kp il kq ip kz it la ix lb jb ji jj jk jl bi translated"><strong class="ig hi"> git克隆</strong><a class="ae jc" href="https://github.com/abhirockzz/javaee8-jsonb-jpa.git" rel="noopener ugc nofollow" target="_blank">T3】https://github.com/abhirockzz/javaee8-jsonb-jpa.gitT5】</a></li><li id="906b" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated"><strong class="ig hi"> mvn全新安装</strong> —这将在<em class="ku">目标</em>目录中产生<em class="ku"> javaee8-jsonb-jpa.war </em></li><li id="69d3" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated"><strong class="ig hi">docker build-t&lt;image _ name&gt;。</strong> —这将创建一个Docker图像</li><li id="350f" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated"><strong class="ig hi"> docker推送&lt;image _ name&gt;T15】</strong></li></ul><blockquote class="lc ld le"><p id="3ed4" class="ie if ku ig b ih ii ij ik il im in io lf iq ir is lg iu iv iw lh iy iz ja jb ha bi translated">捷径</p><p id="1741" class="ie if ku ig b ih ii ij ik il im in io lf iq ir is lg iu iv iw lh iy iz ja jb ha bi translated">使用Docker Hub中的现有图像—<strong class="ig hi">Docker pull abhirockzz/javaee-jsonb-JPA</strong></p></blockquote><h1 id="9786" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">在Oracle容器云上运行</h1><p id="3248" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">您可以使用我以前的博客中的<a class="ae jc" href="https://community.oracle.com/community/cloud_computing/oracle-cloud-developer-solutions/blog/2017/06/16/test-drive-java-ee-8-using-glassfish-5-on-oracle-container-cloud#jive_content_id_Run_in_Oracle_Container_Cloud" rel="noopener ugc nofollow" target="_blank">部分或文档(</a><a class="ae jc" href="http://docs.oracle.com/en/cloud/iaas/container-cloud/contu/creating-service-oracle-container-cloud-service.html" rel="noopener ugc nofollow" target="_blank">创建服务</a>、<a class="ae jc" href="http://docs.oracle.com/en/cloud/iaas/container-cloud/contu/deploying-service-oracle-container-cloud-service.html" rel="noopener ugc nofollow" target="_blank">部署</a>)来在Oracle Container Cloud上启动并运行它。超级简单</p><h2 id="f90d" class="li js hh bd jt lj lk ll jx lm ln lo kb ip lp lq kf it lr ls kj ix lt lu kn lv bi translated"><strong class="ak">创建一个引用Docker图像的服务</strong></h2><figure class="lx ly lz ma fd mb er es paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="er es lw"><img src="../Images/43329295db2fcc2835e41059798ee9a2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*zgWw9IkdJF2ipQjR.png"/></div></div></figure><h2 id="5a0b" class="li js hh bd jt lj lk ll jx lm ln lo kb ip lp lq kf it lr ls kj ix lt lu kn lv bi translated"><strong class="ak">岗位服务创建</strong></h2><figure class="lx ly lz ma fd mb er es paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="er es mi"><img src="../Images/788fec65ef0578290988645284b72ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1212/format:webp/0*eW2uMDz9s1TZakrH.png"/></div></div></figure><h2 id="f945" class="li js hh bd jt lj lk ll jx lm ln lo kb ip lp lq kf it lr ls kj ix lt lu kn lv bi translated"><strong class="ak">启动部署</strong>..</h2><p id="fdfc" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">就是这样！你会看到类似这样的东西</p><figure class="lx ly lz ma fd mb er es paragraph-image"><div role="button" tabindex="0" class="mc md di me bf mf"><div class="er es mj"><img src="../Images/d0dcbfe50a6d8c1fcfcab5da229250f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HA_ilaUtQLSnpEvG.png"/></div></div></figure><h1 id="c1f3" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">测试事物</h1><p id="861d" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">请记下您的Oracle Container Cloud worker节点(基本上是一个计算虚拟机)的主机IP</p><h2 id="be78" class="li js hh bd jt lj lk ll jx lm ln lo kb ip lp lq kf it lr ls kj ix lt lu kn lv bi translated">获取所有员工</h2><pre class="lx ly lz ma fd mk ky ml mm aw mn bi"><span id="8d1d" class="li js hh ky b fi mo mp l mq mr"><a class="ae jc" href="http://community.oracle.com/" rel="noopener ugc nofollow" target="_blank">http://</a>&lt;OCCS_HOST_IP&gt;:8080/javaee8-jsonb-jpa/</span></pre><p id="bfb5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所有员工都将获得一个JSON有效负载</p><pre class="lx ly lz ma fd mk ky ml mm aw mn bi"><span id="47d6" class="li js hh ky b fi mo mp l mq mr">[<br/> {<br/> “salary”: 100,<br/> “name”: “abhi”,<br/> “emp_email”: “<a class="ae jc" href="mailto:abhirockzz@gmail.com" rel="noopener ugc nofollow" target="_blank">abhirockzz@gmail.com</a>”<br/> },<br/> {<br/> “salary”: 99,<br/> “name”: “rockzz”,<br/> “emp_email”: “<a class="ae jc" href="mailto:kehsihba@hotmail.com" rel="noopener ugc nofollow" target="_blank">kehsihba@hotmail.com</a>”<br/> }<br/>]</span></pre><h2 id="6b59" class="li js hh bd jt lj lk ll jx lm ln lo kb ip lp lq kf it lr ls kj ix lt lu kn lv bi translated">找一个雇员</h2><pre class="lx ly lz ma fd mk ky ml mm aw mn bi"><span id="15a1" class="li js hh ky b fi mo mp l mq mr"><a class="ae jc" href="http://community.oracle.com/" rel="noopener ugc nofollow" target="_blank">http://</a>&lt;OCCS_HOST_IP&gt;:8080<a class="ae jc" href="mailto:/javaee8-jsonb-jpa/abhirockzz@gmail.com" rel="noopener ugc nofollow" target="_blank">/javaee8-jsonb-jpa/abhirockzz@gmail.com</a></span></pre><p id="82dd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您将在中看到一个JSON有效负载作为响应</p><pre class="lx ly lz ma fd mk ky ml mm aw mn bi"><span id="0150" class="li js hh ky b fi mo mp l mq mr">{<br/> “salary”: 100,<br/> “name”: “abhi”,<br/> “emp_email”: “<a class="ae jc" href="mailto:abhirockzz@gmail.com" rel="noopener ugc nofollow" target="_blank">abhirockzz@gmail.com</a>”<br/>}</span></pre><p id="42db" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">享受Java EE 8和Glassfish！</p><blockquote class="lc ld le"><p id="fed5" class="ie if ku ig b ih ii ij ik il im in io lf iq ir is lg iu iv iw lh iy iz ja jb ha bi translated">本文表达的观点是我个人的观点，不一定代表甲骨文的观点</p></blockquote></div></div>    
</body>
</html>