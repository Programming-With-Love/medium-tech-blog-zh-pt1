<html>
<head>
<title>Developing Maintainable Software: A Checklist for Developers</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开发可维护的软件:开发者的清单</h1>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/developing-maintainable-software-a-checklist-for-developers-capital-one-6f160a6ceaae?source=collection_archive---------4-----------------------#2020-10-14">https://medium.com/capital-one-tech/developing-maintainable-software-a-checklist-for-developers-capital-one-6f160a6ceaae?source=collection_archive---------4-----------------------#2020-10-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="f44d" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">从应用程序开发的第一天起建立可维护性的7条建议</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/d6bdedb9421cc5b83d2755f8a0936e96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*7dBiQ8kncKhlcK2o.png"/></div></div></figure><p id="7732" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">作为Capital One的工程经理，我努力让我的团队记住以下标准，以确保我们交付可维护的软件解决方案。</p><h1 id="9b27" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">1.平衡模块化和可重用性</h1><p id="f056" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">设计一个可维护的解决方案，需要一个具有可重用组件的模块化解决方案。瞄准高度可重用的组件和每个功能的模块化将需要专业开发人员，从而增加成本。但是，从长远来看，这些方面将是有益的，因为维护成本降低了，并且可以灵活地进行更改。一个好的设计应该努力平衡这些方面和产品的需求。虽然这些方面中的大部分可以由利用良好框架的产品来处理，但是每个开发人员在编写代码时仍然必须考虑这些方面。</p><h1 id="a93c" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">2.整合自动化测试</h1><p id="abef" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">每个模块都必须包括有意义的单元、功能和回归测试。</p><ul class=""><li id="a9b7" class="lb lc hh jk b jl jm jo jp jr ld jv le jz lf kd lg lh li lj bi translated">单元测试(Unit Tests)—单元测试可能不被人喜欢，因为它增加了很多开发时间，但是当试图对代码进行修改时，它是第一道防线，不管你是否提前编写了代码。好的单元测试提供了一种无懈可击的方法来证明代码是有效的，因此消除了当你试图进行修改时破坏某些东西的担心。在Jon Bodner的文章<a class="ae lk" rel="noopener" href="/capital-one-tech/improve-java-code-with-unit-tests-and-jacoco-b342643736ed">用单元测试和JaCoCo </a>提高Java代码覆盖率和质量中，他谈到了如何利用单元测试来确保代码得到正确测试。</li><li id="ca19" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated"><strong class="jk hi">功能测试</strong>——自动化功能测试将有助于快速准确地验证需求。这些也将有助于验证软件的任何新变化没有破坏现有的功能。</li><li id="cb73" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated"><strong class="jk hi">回归测试</strong>——不是每个功能都需要在每个部署中进行测试，尤其是当软件非常庞大并且有大量需要测试的特性时。在这种情况下，最好有一组更慢、更全面的测试来运行“冒烟测试”并验证新构建是否有效。这将节省测试时间，同时验证更改没有破坏应用程序不同部分的现有功能。</li></ul><h1 id="3b94" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">3.记录有意义的事件</h1><p id="16ec" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">所有好的软件系统都必须有一个好的日志记录方案，并且这个日志记录必须是有目的的。每个日志事件必须全面，包含有意义的信息。Emil Stenqvist在他的文章<a class="ae lk" rel="noopener" href="/unomaly/logging-wisdom-how-to-log-5a19145e35ec"> Logging Wisdom: How to Log </a>中指出，软件程序必须写日志，就好像它是其执行的日志一样:主要的分支点、进程启动等。、错误和其他异常事件。日志必须包含描述正在发生的事情的消息，以及作为键值对的相关上下文。它们必须包括相关的标识符，如请求ID、PID、用户ID等。</p><p id="568a" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">必须编写日志，以便它们捕获对其编写目的有意义的数据。必须在功能整理时确定日志记录需求。伐木动机的几个例子是:</p><ul class=""><li id="2236" class="lb lc hh jk b jl jm jo jp jr ld jv le jz lf kd lg lh li lj bi translated">获取业务指标</li><li id="89f7" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">捕获用户导航以对问题进行分类</li><li id="4479" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">捕获应用程序事件以监控应用程序性能和运行状况</li></ul><p id="eb2c" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">在我的职业生涯中，我见过类似‘我在这里’这样的日志。这很好，但是关于以下内容的信息在哪里:</p><ul class=""><li id="1f63" class="lb lc hh jk b jl jm jo jp jr ld jv le jz lf kd lg lh li lj bi translated">你是谁</li><li id="0e1c" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">你到底在哪里</li><li id="b0d1" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">你为什么在那里</li></ul><p id="5d5a" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">如果没有这些，这个日志只是浪费驱动器空间。</p><p id="0a78" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">伐木的<em class="lq">动机</em>必须推动进入伐木的<em class="lq">细节</em>。例如，如果在用户看到错误消息时写入日志事件，则记录错误的用户ID、日期和时间，以及导致用户看到该错误消息的系统状态或数据的详细信息非常重要。务必注意不要将敏感信息存储在日志中，或者在需要时对它们进行加密。</p><h1 id="9f97" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">4.显示有意义的用户消息</h1><p id="fb40" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">向用户显示的错误消息必须帮助用户理解他们为什么会收到错误，以及他们可以采取什么步骤来解决错误。此外，如果这些错误是由系统问题引起的，则必须在应用程序日志中记录所有相关数据，以了解导致错误的原因。这将有助于支持团队快速确定错误发生的原因。</p><p id="7e69" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">必须努力使消息独一无二，以便当用户有问题时，支持团队可以快速提供答案，而不是试图确定是众多原因中的哪一个导致了问题。</p><h1 id="ef12" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">5.实施应用程序和基础架构监控</h1><p id="add2" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">确保基础设施和应用程序监控是在应用程序开发时设计和实现的，这是制作良好的可维护软件的关键标准。而基础设施监控可以通过监控诸如内存、CPU利用率、实例数量等方面来处理。，应用程序监控需要对应用程序领域和应用程序工具有更深入的理解。在他的博客文章<a class="ae lk" href="https://peter.bourgon.org/blog/2016/02/07/logging-v-instrumentation.html" rel="noopener ugc nofollow" target="_blank"> Logging V. Instrumentation </a>中，Peter Bourgon讨论了何时使用Logging，何时使用Instrumentation，以最终提高系统的可观测性。</p><p id="ca81" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">应用程序监控必须侧重于主动识别应用程序可用性和性能的下降。必须观察监控参数的下降或上升。一个高度可扩展的应用程序可能会遭受DDOS攻击，而这种攻击在基础设施监控中可能会被忽略。然而，如果正在监控应用程序的用户流量，那么DDOS攻击将呈现为用户攻击平台的峰值，这可以用来提醒支持团队注意可能的异常情况。</p><p id="e723" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">除了跟踪真实的用户事务之外，一个良好的监控设置还会尝试使用合成事务主动跟踪可用性和性能。合成事务由监控工具执行，即使在没有用户使用系统的情况下，也有助于了解系统的退化情况。</p><p id="6d11" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">总而言之，一个完善的应用程序和基础设施监控设计将包含:</p><ul class=""><li id="6820" class="lb lc hh jk b jl jm jo jp jr ld jv le jz lf kd lg lh li lj bi translated">用于读取日志和执行实时用户监控的监控工具，以及对交易的主动综合监控。</li><li id="5e9a" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">仪表板显示:</li><li id="b791" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">系统和单个组件的应用程序性能和可用性的趋势和阈值。</li><li id="0d92" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">不同错误信息的频率和数量。示例:向用户显示错误或多次尝试API时出现错误，表明API性能下降。</li><li id="a329" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">超过阈值时发出警报。</li></ul><h1 id="f61f" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">6.维护文档</h1><p id="7a88" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">开发和维护一个好的可维护的软件解决方案需要好的文档。从一开始就准备好的一些文档包括:</p><ul class=""><li id="d8a5" class="lb lc hh jk b jl jm jo jp jr ld jv le jz lf kd lg lh li lj bi translated"><strong class="jk hi">编码标准</strong>——包括命名约定、风格、单元测试需求、功能测试、代码注释级别等标准。编程语言开始采用这方面的标准，其他语言也有大公司定义的标准。所以，采用这些标准，而不是重新发明轮子。</li><li id="4692" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated"><strong class="jk hi">贡献指南</strong>——如果项目代码由多个团队更新，或者甚至在团队内部更新，这变得非常重要，因为不是所有的贡献者都可能是项目的提交者。</li><li id="6319" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">项目治理(Project Governance)——包括提交代码需要多少次审查、版本控制、谁将是提交者还是贡献者、设计冲突时的决策等。</li><li id="aa3c" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated"><strong class="jk hi">功能描述</strong> —这是隐藏在设计图和JIRA故事中的关键细节之一，让人很难知道一个模块的确切用途，尤其是当开发人员和产品经理发生变化时。维护关于特性的高级文档是有益的，记录下设计和开发中的一些关键决策和讨论。这包括:</li><li id="b667" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">基础设施和架构文档</li><li id="fd72" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">部署程序</li><li id="c785" class="lb lc hh jk b jl ll jo lm jr ln jv lo jz lp kd lg lh li lj bi translated">支持常见问题</li></ul><h1 id="870a" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">7.消除技术债务的需求开发时间</h1><p id="b585" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">像这个世界上的任何事情一样，即使是解决可维护性的最好意图也不能保证您不会有技术债务，您将不得不追溯性地解决这些债务。要求产品团队支持重构工作是很难说服的，重构工作并不提供任何新的功能，只是为了让开发人员的生活更好，并减少未来代码更改的错误。</p><p id="cc95" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">高事故单计数、为了客户的利益而改变错误消息的需要、或者增强功能的需要都是开发团队可以容易地解决他们的技术债务项目以增加可维护性的时候。除了这些机会，我建议每个开发团队必须努力要求10-20%的分配来处理技术债务项目。</p></div><div class="ab cl lr ls go lt" role="separator"><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw lx"/><span class="lu bw bk lv lw"/></div><div class="ha hb hc hd he"><p id="d75e" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">【https://www.capitalone.com】最初发表于<a class="ae lk" href="https://www.capitalone.com/tech/software-engineering/developer-checklist-for-maintainable-software/?linkId=101562285" rel="noopener ugc nofollow" target="_blank"><em class="lq"/></a><em class="lq">。</em></p><p id="2cbc" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><em class="lq">披露声明:2020资本一。观点是作者个人的观点。除非本帖中另有说明，否则Capital One不隶属于所提及的任何公司，也不被这些公司认可。使用或展示的所有商标和其他知识产权是其各自所有者的财产。</em></p></div></div>    
</body>
</html>