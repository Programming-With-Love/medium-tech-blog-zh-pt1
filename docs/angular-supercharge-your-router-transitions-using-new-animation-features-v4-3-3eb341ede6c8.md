# è§’åº¦-ä½¿ç”¨åŠ¨ç”»å¢å¼ºè·¯ç”±å™¨è¿‡æ¸¡

> åŸæ–‡ï¼š<https://medium.com/google-developer-experts/angular-supercharge-your-router-transitions-using-new-animation-features-v4-3-3eb341ede6c8?source=collection_archive---------0----------------------->

å¦‚ä½•ä½¿ç”¨ Angular ä¸­çš„æ–°åŠ¨ç”»åŠŸèƒ½åˆ¶ä½œåº”ç”¨è·¯ç”±å™¨è¿‡æ¸¡åŠ¨ç”»

![](img/d71a5cba9987c915ee181a175977b86d.png)

[thedotisblack](https://twitter.com/DavidMrugala)

å‡ ä¸ªæœˆå‰ï¼Œæˆ‘ä¸ä½ åˆ†äº«äº†ä¸€ä¸ªå®éªŒæŠ€æœ¯æ¥åˆ¶ä½œ**è·¯ç”±å™¨è½¬æ¢**çš„åŠ¨ç”»ã€‚ä»é‚£ä»¥åï¼Œå¾ˆå°‘æœ‰ç‰ˆæœ¬å¼•å…¥æ–°çš„ç‰¹æ€§ã€‚ä»Šå¤©ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ›´å°‘çš„ä»£ç æ›´ä¼˜é›…åœ°å®ç°åŒæ ·çš„ç»“æœã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥åˆ›å»ºå‰æ‰€æœªæœ‰çš„è¿‡æ¸¡ï¼

ä½¿ç”¨ä»¥ä¸‹é“¾æ¥è¿è¡Œæ¼”ç¤º:

[åŸºæœ¬](https://stackblitz.com/edit/angular-motion-v6-a?file=app%2Frouter.animations.ts) | [å˜å¼‚](https://stackblitz.com/edit/angular-motion-v6-b?file=app/router.animations.ts) | [é”™å¼€](https://stackblitz.com/edit/angular-motion-v6-c?file=app/router.animations.ts) | [æœ€ç»ˆ](https://stackblitz.com/edit/angular-motion-v6-final?file=app%2Fhome.component.ts)

åœ¨ [@gerardsans](https://twitter.com/intent/user?screen_name=gerardsans) æ‰¾åˆ°æˆ‘çš„æœ€æ–°è§‚ç‚¹ã€‚

# æ¼”ç¤ºåº”ç”¨ç¨‹åº

ä¸ºäº†è§£é‡Šè¿™ç§æ–°æ–¹æ³•ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªåªæœ‰ä¸¤éƒ¨åˆ†çš„ç®€å•åº”ç”¨ç¨‹åº:Home å’Œ Aboutã€‚æˆ‘ä»¬å°†å®ç°ä¸€ä¸ªå¾ˆé…·çš„**è·¯ç”±å™¨è¿‡æ¸¡**ï¼Œå°†å†…å®¹å‘å·¦æ»‘åŠ¨ï¼Œå¹¶ä½¿ç”¨**äº¤é”™**ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚

![](img/59985e86f66e941b04e3b3894d1a3c03.png)

Awesome Router transitions

# åŠ¨ç”»è®¾ç½®

ä» **Angular v4** åŠ¨ç”»å¼€å§‹ï¼Œå®ƒä»¬å­˜åœ¨äºä¸€ä¸ªå•ç‹¬çš„åŒ…ä¸­ï¼Œæ‰€ä»¥å¦‚æœä½ ä¸éœ€è¦å®ƒä»¬ï¼Œä½ å¯ä»¥è®©ä½ çš„åº”ç”¨ç¨‹åºå˜å°ã€‚

é¦–å…ˆï¼Œä½ éœ€è¦ç»™ä½ çš„é¡¹ç›®æ·»åŠ ä»¥ä¸‹ä¾èµ–:`@angular/animations`å’Œ`@angular/platform-browser/animations`ã€‚æ¥ä¸‹æ¥ï¼Œå°†`BrowserAnimationsModule`åŒ…å«åˆ°æ‚¨çš„æ ¹æ¨¡å—ä¸­(ç¬¬ 3 è¡Œå’Œç¬¬ 6 è¡Œ)ã€‚

> å¦‚æœéœ€è¦ä½¿ç”¨[åŸç”Ÿä¸æ”¯æŒç½‘é¡µåŠ¨ç”» API](http://caniuse.com/#feat=web-animation) çš„æµè§ˆå™¨:IE/Edgeã€Safari ç­‰ï¼›æ‚¨å¿…é¡»åŒ…æ‹¬[ç½‘ç»œåŠ¨ç”»èšåˆå¡«å……](https://github.com/web-animations/web-animations-js)ã€‚

æ­£å¦‚æˆ‘ä»¬å·²ç»çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬çš„æ¼”ç¤ºåº”ç”¨ç¨‹åºå°†ç”±ä¸€ä¸ªé¡¶éƒ¨å¯¼èˆªå’Œä¸»è¦å†…å®¹ç»„æˆã€‚é¡¶éƒ¨å¯¼èˆªå°†åœ¨å„éƒ¨åˆ†ä¹‹é—´å…±äº«(ç¬¬ 4-7 è¡Œ)ã€‚æˆ‘ä»¬ä½¿ç”¨`router-outlet` å…ƒç´ å‘Šè¯‰è·¯ç”±å™¨ï¼Œå½“ä¸è·¯ç”±åŒ¹é…æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨å“ªé‡Œå‘ˆç°ç»„ä»¶(ç¬¬ 9 è¡Œ)ã€‚

æˆ‘ä»¬ä½¿ç”¨**é™æ€è·¯çº¿**æ¥åˆ›å»ºä¸åŒçš„**å¯¼èˆªé“¾æ¥**(ç¬¬ 5-6 è¡Œ)ã€‚ä¸ºäº†è®¾è®¡å½“å‰éƒ¨åˆ†çš„æ ·å¼ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†`routerLinkActive`æŒ‡ä»¤ã€‚ä¾‹å¦‚ï¼Œå½“æˆ‘ä»¬å¯¼èˆªåˆ° **Home** æ—¶ï¼Œå®ƒä¼šæ·»åŠ `active`ç±»å¹¶ç›¸åº”åœ°æ”¹å˜æ¸²æŸ“ã€‚

```
<a href="#/home" **class="active"**>Home</a>
```

# æ·»åŠ è·¯ç”±å™¨è½¬æ¢

è®©æˆ‘ä»¬æ›´æ”¹é»˜è®¤è®¾ç½®ï¼Œå¼•å…¥**è·¯ç”±å™¨è½¬æ¢**ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†åŠ¨ç”»è§¦å‘å™¨`routerTransition`æ·»åŠ åˆ°ç»„ä»¶å…ƒæ•°æ®ä¸­(ç¬¬ 3 è¡Œ)ã€‚ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å°†`@routerTransition`ç»‘å®šåˆ°**ä¸»**å…ƒç´ ä¸­ï¼Œè¿™æ ·ç¨åï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è·¯ç”±å™¨å®ä¾‹åŒ–çš„å†…éƒ¨**è·¯ç”±ç»„ä»¶**è¿›è¡Œæ ·å¼åŒ–(ç¬¬ 5 è¡Œ)ã€‚

> åªè¦æ˜¯ router-outlet çš„çˆ¶çº§ï¼Œå°±å¯ä»¥ä½¿ç”¨ div æˆ–ä»»ä½•å…¶ä»–å…ƒç´ æ¥ä»£æ›¿ mainã€‚

æˆ‘ä»¬ä½¿ç”¨`getState`ä¼ é€’å‡ºå£å¼•ç”¨(ç¬¬ 6 è¡Œ)æ¥è®¾ç½®æ­£ç¡®çš„çŠ¶æ€ã€‚è¯¥å‡½æ•°å°†è¿”å›è·¯çº¿å®šä¹‰ä¸­è®¾ç½®çš„`state`å±æ€§ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹ä¸€èŠ‚çœ‹åˆ°è¿™ä¸€ç‚¹ã€‚è¿™ç§é…ç½®å°†å…è®¸æˆ‘ä»¬æ§åˆ¶ä¸ºæ¯æ¡è·¯çº¿æ‰§è¡Œå“ªä¸ªè½¬æ¢ã€‚

> æ³¨æ„:æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨`#o=â€outletâ€`æ¥è·å¾—æ’åº§å‚è€ƒã€‚ç”±äºåœ¨[è·¯ç”±å™¨-å‡ºå£å®šä¹‰](https://github.com/angular/angular/blob/4.3.1/packages/router/src/directives/router_outlet.ts#L39)ä¸­ä½¿ç”¨äº†**å‡ºå£**ï¼Œè¿™æ˜¯å¯èƒ½çš„ã€‚è¿™ç§ç»„åˆè®©æˆ‘ä»¬å¯ä»¥å¿«é€Ÿè®¿é—®åº•å±‚çš„**route outlet**ç±»ã€‚

# è®¾ç½®è·¯çº¿

åœ¨ Angular ä¸­ï¼Œè·¯ç”±å™¨ä¼šæŒ‰ç…§è®¾ç½®æœŸé—´ä½¿ç”¨çš„ç›¸åŒé¡ºåºï¼Œå°è¯•å°†è·¯ç”±å®šä¹‰ä¸å½“å‰ url è¿›è¡ŒåŒ¹é…ã€‚

ä¸»è·¯ç”±(ç¬¬ 3â€“4 è¡Œ)å‘Šè¯‰è·¯ç”±å™¨ï¼Œå½“å¯¼èˆªä¸å®ƒä»¬å„è‡ªçš„è·¯å¾„åŒ¹é…æ—¶ï¼Œå®ä¾‹åŒ– **Home** å’Œ **About** ç»„ä»¶ã€‚æ³¨æ„`data`å±æ€§å°†æ¯ä¸ª**çŠ¶æ€**è®¾ç½®ä¸ºç›¸åº”çš„è·¯çº¿ã€‚è¿™äº›çŠ¶æ€å¿…é¡»ä¸æˆ‘ä»¬çš„`routerTransition`è§¦å‘å™¨ä¸­å®šä¹‰çš„è½¬æ¢ç›¸åŒ¹é…ã€‚

æˆ‘ä»¬è¿˜ä½¿ç”¨äº†ä¸¤ä¸ª**ç‰¹æ®Šè·¯çº¿**ç”¨äºå¸¸è§è¡Œä¸ºã€‚å¸¦æœ‰**ç©ºè·¯å¾„**çš„è·¯çº¿(ç¬¬ 2 è¡Œ)è¦†ç›–äº†**é»˜è®¤è·¯çº¿**ï¼Œè¯¥è·¯çº¿å°†ä¸ºç©ºï¼Œé™¤éæˆ‘ä»¬å¯¼èˆªåˆ°ç‰¹å®šçš„ urlã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æŒ‡ç¤ºä½¿ç”¨å½’é€”è¿›è¡Œé‡å®šå‘ã€‚**å¦åˆ™è·¯ç”±**(ç¬¬ 5 è¡Œ)ï¼Œå®ƒå°†æ•æ‰ä»»ä½•æ‰“å­—é”™è¯¯æˆ–æœªå®šä¹‰çš„è·¯ç”±ï¼Œæ˜¾ç¤ºç”¨æˆ·å‹å¥½çš„ 404 é¡µé¢ã€‚

å¯¹äºè¿™ä¸ªæ¼”ç¤ºï¼Œç”±äº Plunkerï¼Œæˆ‘ä»¬ä½¿ç”¨äº†**æ•£åˆ—ä½ç½®ç­–ç•¥**(ç¬¬ 9 è¡Œ)ã€‚å¦‚æœæˆ‘ä»¬å¯ä»¥è®¿é—®åç«¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨**è·¯å¾„å®šä½ç­–ç•¥**ã€‚è¿™éœ€è¦å°†æœªå®šä¹‰çš„è·¯ç”±é‡å®šå‘åˆ°**index.html**ä»¥é¿å…æ¥è‡ªæœåŠ¡å™¨çš„ 404 é”™è¯¯ã€‚

# è§’åº¦åŠ¨ç”»

ä¸‹é¢ç®€å•ä»‹ç»ä¸€ä¸‹è§’åº¦åŠ¨ç”»ã€‚Angular åŸºäº [Web Animations API](https://w3c.github.io/web-animations/) ï¼Œæˆ‘ä»¬ä½¿ç”¨**åŠ¨ç”»è§¦å‘å™¨**æ¥å®šä¹‰ä¸€ç³»åˆ—**çŠ¶æ€**å’ŒçŠ¶æ€ä¹‹é—´çš„**è½¬æ¢**ã€‚æˆ‘ä»¬ä½¿ç”¨**æ ·å¼**æ¥å¸®åŠ©æˆ‘ä»¬ä½¿ç”¨ **CSS å±æ€§**æ„å»ºæƒ³è¦çš„æ•ˆæœã€‚

åŠ¨ç”»èƒŒåçš„**ä¸»è¦åŸç†**æ˜¯ï¼Œä¸€æ—¦æˆ‘ä»¬ä½¿ç”¨æ ·å¼è®¾ç½®äº†**åˆå§‹çŠ¶æ€**å’Œ**æœ€ç»ˆçŠ¶æ€**ï¼Œä¸­é—´çŠ¶æ€å°±ä¼šè¢«è®¡ç®—å‡ºæ¥ã€‚

![](img/a1c64796a972afca59026db928d38b4e.png)

Who else to explain animations better than the party parrot!? ğŸ˜ƒ

æˆ‘ä»¬å¯ä»¥ç”¨ç§’æˆ–æ¯«ç§’æ¥è®¾ç½®åŠ¨ç”»çš„æŒç»­æ—¶é—´ã€‚ä¾‹å¦‚:1 ç§’ï¼Œ1.2 ç§’ï¼Œ200 æ¯«ç§’ã€‚æœ‰æ—¶æˆ‘ä»¬å¯èƒ½è¿˜æƒ³æ§åˆ¶**è®¡æ—¶åŠŸèƒ½**ï¼Œå®ƒè®¾ç½®è®¡ç®—ä¸­é—´æ­¥é•¿**è¡¥é—´**çš„é€Ÿåº¦ã€‚é»˜è®¤å®šæ—¶ä¸º`ease`ï¼›å…¶ä»–å¸¸è§çš„å€¼æœ‰`linear`æˆ–`ease-in-out`ã€‚ä½ å¯ä»¥ç”¨è¿™ä¸ªç”± [Lea Verou](https://twitter.com/leaverou) åˆ›é€ çš„[å·¥å…·](http://cubic-bezier.com/)ç©ä¸€äº›å…¶ä»–çš„é€‰é¡¹ã€‚

ç”±äº **Angular v4.2+** æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨**åºåˆ—**å’Œ**ç»„**ä¸€ä¸ªæ¥ä¸€ä¸ªæˆ–å¹¶è¡Œè¿è¡ŒåŠ¨ç”»ï¼›å¹¶ä¸”**æŸ¥è¯¢**ä»¥è®¿é—®å­å…ƒç´ ï¼Œè€Œ**äº¤é”™**ä»¥åˆ›å»ºè‰¯å¥½é“¾æ¥çš„ç¼–æ’ã€‚

è¿™äº›äº‹ä»¶å°†è§¦å‘åŠ¨ç”»:

*   å°†å…ƒç´ é™„ç€åˆ°è§†å›¾æˆ–ä»è§†å›¾ä¸­åˆ†ç¦»å…ƒç´ 
*   æ”¹å˜ç»‘å®šåˆ°è§¦å‘å™¨çš„**çŠ¶æ€**ã€‚ä¾‹:`[@routerTransition]=â€homeâ€`ã€‚

åœ¨**è·¯ç”±å™¨è½¬æ¢**çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¯·æ³¨æ„ï¼Œä½œä¸ºå¯¼èˆªçš„ä¸€éƒ¨åˆ†ï¼Œç»„ä»¶è¢«ç§»é™¤å¹¶æ·»åŠ åˆ°è§†å›¾ä¸­ã€‚

# åŠ¨ç”»å®šä¹‰

é¦–å…ˆè®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨**è§’åº¦åŠ¨ç”»**å°†å†…å®¹å‘å·¦æ»‘åŠ¨ã€‚

![](img/50061050caabbad0186a661267857c66.png)

Basic Router transition

æœ€åˆï¼Œæˆ‘ä»¬å°†è§¦å‘å™¨å®šä¹‰ä¸º`routerTransition`(ç¬¬ 3 è¡Œ)ã€‚åœ¨è¿™ä¸ªå®ç°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªè¦†ç›–æ‰€æœ‰å¯èƒ½çŠ¶æ€çš„é€šç”¨è½¬æ¢(ç¬¬ 4-17 è¡Œ)ã€‚è¿™æ˜¯å¯¹ä½¿ç”¨ä¸¤ä¸ªç‹¬ç«‹è½¬æ¢çš„é‡æ„:`â€˜* => homeâ€™`å’Œ`â€˜* => aboutâ€™`ã€‚

> æˆ‘ä»¬å¯ä»¥åœ¨æˆ‘ä»¬çš„è½¬æ¢ä¸­ä½¿ç”¨ä¸¤ä¸ªç‰¹æ®Šçš„çŠ¶æ€`void`å’Œ`*`(æ˜Ÿå·)ï¼Œå®ƒä»¬ä»£è¡¨:ä¸€ä¸ªè¿˜æ²¡æœ‰é™„åŠ åˆ°è§†å›¾çš„å…ƒç´ å’Œä»»ä½•å¯èƒ½çš„çŠ¶æ€ã€‚

æˆ‘ä»¬ä¸ºé€šç”¨è½¬æ¢å®šä¹‰äº†å‡ ä¸ªé¡¹ç›®ï¼Œå®ƒä»¬å°†æŒ‰ç…§ç”¨ä½œç¬¬äºŒä¸ªå‚æ•°çš„æ•°ç»„ä¸­çš„å®šä¹‰é¡ºåºæ‰§è¡Œ(ç¬¬ 4 è¡Œ)ã€‚

ç¬¬ä¸€ä¸ª(ç¬¬ 6-7 è¡Œ)ä½¿ç”¨æ–°çš„**æŸ¥è¯¢**å‘½ä»¤æ¥é€‰æ‹©æ–°çš„è·¯ç”±ç»„ä»¶å’Œç¦»å¼€çš„è·¯ç”±ç»„ä»¶ï¼›**æŸ¥è¯¢**æœŸæœ› CSS é€‰æ‹©å™¨ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒåŒ…æ‹¬ä¸€äº›ç‰¹æ®Šçš„å…³é”®å­—ï¼Œå¦‚`:enter`ã€`:leave`ã€**ã€**å’Œ`*`ã€‚

åœ¨ç¬¬ä¸€ä¸ªæŸ¥è¯¢ä¸­ï¼Œ`:enter` å’Œ`:leave` å°†åŒ¹é…**è¢«é™„åŠ åˆ°è§†å›¾æˆ–ä»è§†å›¾ä¸­ç§»é™¤çš„è·¯çº¿ç»„ä»¶**ã€‚æ³¨æ„æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨å¤šä¸ªé€‰æ‹©å™¨å¹¶ç”¨é€—å·åˆ†éš”å®ƒä»¬(ç¬¬ 6 è¡Œ)ã€‚ä¸€æ—¦æˆ‘ä»¬æœ‰äº†è¿™äº›**è·¯çº¿ç»„ä»¶**ï¼Œæˆ‘ä»¬å°±è®¾ç½®å®ƒä»¬çš„æ ·å¼æ¥å®ç°æ»‘åŠ¨æ•ˆæœ(ç¬¬ 6 è¡Œ)ã€‚é€šè¿‡ä½¿ç”¨`{ position: fixed }`ï¼Œç»„ä»¶å°†è¢«æ”¾ç½®åœ¨è§†çª—ä¸­ï¼Œå¹¶åœ¨é¡µé¢ä¸­æ»‘åŠ¨ã€‚

æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ª**ç»„**ï¼Œå®ƒå°†ä½¿å†…éƒ¨åŠ¨ç”»å¹¶è¡Œè¿è¡Œã€‚

å‡è®¾æˆ‘ä»¬æ­£ä»**å®¶**å¯¼èˆªåˆ°**å…³äº**ã€‚ç¬¬ä¸€ä¸ªæŸ¥è¯¢å°†åŒ¹é…æ­£åœ¨æ·»åŠ çš„ç»„ä»¶(`:enter`)ï¼Œä¹Ÿå°±æ˜¯å…³äºç»„ä»¶çš„**ã€‚æˆ‘ä»¬é¦–å…ˆè®¾ç½®ä¸€ä¸ªåˆå§‹æ ·å¼ï¼Œå°†ç»„ä»¶æ”¾åœ¨æœ€å³è¾¹(ç¬¬ 10 è¡Œ)ã€‚ç„¶åï¼Œæˆ‘ä»¬è®¾ç½®åŠ¨ç”»ï¼Œç”¨ä¸€ä¸ªç¼“åŠ¨åŠŸèƒ½å’ŒæŒç»­æ—¶é—´å°†å®ƒæ»‘åŠ¨åˆ°æœ€ç»ˆä½ç½®(ç¬¬ 11 è¡Œ)ã€‚ç»“æœå°†æ˜¯å…³äºç»„ä»¶**çš„**ä»å³å‘å·¦æ»‘åŠ¨ã€‚å¯¹äºç¬¬äºŒä¸ªæŸ¥è¯¢ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ç±»ä¼¼çš„æ–¹æ³•ï¼Œä½¿ç”¨(`:leave`)åŒ¹é…åŒæ ·å‘å·¦æ»‘åŠ¨çš„ **Home ç»„ä»¶**ã€‚**

> CSS æç¤º:ä¸ºäº†æ›´å¥½çš„è¡¨ç°ï¼Œæˆ‘ä»¬ä½¿ç”¨**å˜æ¢**è€Œä¸æ˜¯**ä¸Š**ã€**ä¸‹**ã€**å·¦**ã€**å³**ã€‚

è¯·æ³¨æ„ï¼Œ**è·¯ç”±å™¨è½¬æ¢**çš„å®ç°ä¸åŒäºåŠ¨ç”»ä¸­çš„ç”¨ä¾‹ï¼Œåœ¨åŠ¨ç”»ä¸­ï¼Œæˆ‘ä»¬å°†è§¦å‘å™¨ç»‘å®šåˆ°æƒ³è¦åˆ¶ä½œåŠ¨ç”»çš„å…ƒç´ ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½ä½¿ç”¨çŠ¶æ€æ¥è®¾ç½®**è·¯ç”±ç»„ä»¶**çš„æ ·å¼ï¼Œå› ä¸ºé‚£æ ·ä¼šå°†æ ·å¼åº”ç”¨åˆ°çˆ¶å…ƒç´ (æˆ‘ä»¬ç¤ºä¾‹ä¸­çš„ä¸»å…ƒç´ )è€Œä¸æ˜¯**è·¯ç”±ç»„ä»¶**ã€‚

> åœ¨è·¯ç”±å™¨åˆå§‹åŒ–æœŸé—´ï¼Œä¸€äº›æŸ¥è¯¢è¿”å›ç©ºç»“æœï¼Œä¸ºäº†é¿å…æŠ›å‡ºé”™è¯¯ï¼Œæˆ‘ä»¬åœ¨æ‰€æœ‰æŸ¥è¯¢ä¸­è®¾ç½®äº†å¯é€‰çš„å‚æ•°ã€‚

# æ·»åŠ äº¤é”™

ä¸€æ—¦æˆ‘ä»¬æœ‰äº†åŸºæœ¬çš„è®¾ç½®å·¥ä½œï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°æ·»åŠ æ–°çš„æ•ˆæœç»“åˆ**æŸ¥è¯¢**å’Œ**äº¤é”™**ã€‚

![](img/e1f3de7a0b4c7b915f276b68cd7d9b9d.png)

```
export const routerTransition = trigger('routerTransition', [
  transition('* <=> *', [
    /* order */
    /* 1 */ query(':enter, :leave', ...),
    /* 2 */ query('.block', style({ **opacity: 0** })),
    /* 3 */ **group**([  // block executes in parallel
      query(':enter', [...]),
      query(':leave', [...]),
    ]),
    /* 4 */ query(':enter .block', **stagger**(**400**, [
      style({ transform: 'translateY(100px)' }),
      animate('1s ease-in-out', 
        style({ transform: 'translateY(0px)', **opacity: 1** })),
    ])),
  ])
])
```

æœ€åï¼Œæˆ‘ä»¬ç»“åˆ**å˜æ¢**å’Œ**ä¸é€æ˜åº¦**æ¥å‚ç›´å‘ä¸Šæ»‘åŠ¨ä¸€äº›å…ƒç´ å¹¶æ·¡å…¥å®ƒä»¬ã€‚é€šè¿‡ä½¿ç”¨**äº¤é”™**ï¼Œæˆ‘ä»¬ç»™æ¯ä¸ªåŠ¨ç”»å¼•å…¥äº†ä¸€ä¸ªå°çš„å»¶è¿Ÿ(ä»¥æ¯«ç§’è®¡),åˆ›é€ äº†ä¸€ä¸ªæ¼‚äº®çš„å¹•å¸˜æ•ˆæœã€‚æœ€åè¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬å¿…é¡»å¼•å…¥ä¸€ä¸ªæ–°çš„æŸ¥è¯¢æ¥ç”¨(`opacity: 0`)åˆå§‹åŒ–`.block`å…ƒç´ ï¼Œè¿™æ ·å½“ç»„ä»¶æ»‘å…¥æ—¶å®ƒä»¬å°±ä¸ä¼šæ˜¾ç¤ºå‡ºæ¥ã€‚

# æœ€åä¸€æ­¥

æœ€åï¼Œæˆ‘æ·»åŠ äº†ä¸€äº›ä»£ç æ¥æ‰­è½¬ç¦»å¼€ **Home ç»„ä»¶**æ—¶çš„äº¤é”™ï¼Œè¿˜æ·»åŠ äº†ä¸€äº›**ä¸‰æ¬¡è´å¡å°”å‡½æ•°**æ¥è·å¾—é¢å¤–çš„é—ªå…‰ã€‚è§ä¸‹æ–‡

![](img/59985e86f66e941b04e3b3894d1a3c03.png)

Final Solution!

# ç‰¹åˆ«æåŠ

è¿™ç¯‡æ–‡ç« ä¸­å±•ç¤ºçš„å®ç°ä¸é©¬è’‚äºšæ–¯Â·æ¶…æ¢…å°”åœ¨è¿™ç¯‡åšå®¢æ–‡ç« å’Œä»–åœ¨æ—¥æœ¬çš„å¹»ç¯ç‰‡ä¸­æ‰€è§£é‡Šçš„æ˜¯ä¸€æ ·çš„ã€‚

[](http://slides.yearofmoo.com/ng-japan-2017-slides/) [## è§’åº¦åŠ¨ç”»

### ä»â€œ@angular/coreâ€å¯¼å…¥{ Component }ï¼›ä»â€œ@angular/animationsâ€å¯¼å…¥{styleï¼Œanimateï¼Œtransitionï¼Œtrigger }ï¼›â€¦

slides.yearofmoo.com](http://slides.yearofmoo.com/ng-japan-2017-slides/) ![](img/ecb080efc3605e23d1df96d94abcde80.png)![](img/92d2cc193eb9c8e4e1bbb4113b10ab6d.png)![](img/6d66e81d4c24c169b38997614b364641.png)

Pictures from last ngJapan

ä»…æ­¤è€Œå·²ï¼è§‰å¾—æˆ‘é”™è¿‡äº†ä»€ä¹ˆå—ï¼Ÿè¯·é€šè¿‡ [@gerardsans](https://twitter.com/intent/user?screen_name=gerardsans) æˆ– gerard.sans_at_gmail.com è”ç³»æˆ‘ã€‚æ„Ÿè°¢é˜…è¯»ï¼

[](http://www.meetup.com/AngularZone/) [## å®‰å¤æ‹‰å®—ç¤¾åŒº

### æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„ç¤¾åŒºã€‚æˆ‘ä»¬çš„æ¿€æƒ…æ˜¯æœ‰æ£±è§’çš„ã€‚åŠ å…¥æˆ‘ä»¬å§ï¼ğŸš€](http://www.meetup.com/AngularZone/) [![](img/abefda0aa7864742686ec7f7fdffe2b5.png)](https://twitter.com/intent/user?screen_name=gerardsans)![](img/b3631265f82dc8afc367216a08769e68.png)![](img/67b37e5d672384f0953563450fca0029.png)