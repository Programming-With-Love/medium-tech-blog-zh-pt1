# [空格命令]:控制目标-空格

> 原文：<https://medium.com/square-corner-blog/space-commader-take-command-of-objective-c-whitespace-d1b69213097d?source=collection_archive---------5----------------------->

## 一组用于团队设置、定制和实施 Objective-C 格式的工具。

*作者* [*艾伦·芬伯格*](https://medium.com/u/6710389d9d0?source=post_page-----d1b69213097d--------------------------------) *。*

> 注意，我们已经行动了！如果您想继续了解 Square 的最新技术内容，请访问我们的新家[https://developer.squareup.com/blog](https://developer.squareup.com/blog)

![](img/3e3cd3388c80f4eab12104f30bb8532e.png)

Square 在 [GitHub](http://github.com/square/spacecommander) 上释放**【空间指挥官】**。**【Space Commander】**是一套工具，我们使用这套工具在注册 iOS 团队中设置、定制和实施 Objective-C 格式，并回收手动格式化代码所花费的时间。

# 不再吹毛求疵

手动修复代码格式问题会耗费大量开发周期，这些周期用在其他地方会更好——但另一种情况是“窗口破碎”,因为不一致性增加，可读性降低。输入自动代码格式！

到目前为止，我们已经自动化了 3500 多个不同的 Objective-C 文件的格式，并且消除了对 1200 多个拉取请求和计数的格式进行注释的需要，估计节省了(至少)200 个开发人员小时的时间。

# 太空指挥官已经着陆

由 [LLVM](https://corner.squareup.com/2015/06/llvm.org) 提供的 clang-format ，是一个让我们在 Square 感到兴奋的工具，因为它可以自动修复代码格式。它做了很多工作，但是我们需要额外的工具来满足我们的需求，将 Objective-C 代码格式化为我们特定的规范，并且轻松地协调开发团队。这就是**【太空司令】**的用武之地。

**【太空指挥官】**提供:

*   一个脚本，使用 clang-format 自动格式化已经改变的文件(根据 git)。
*   钩子来添加 clang-format 目前没有提供的定制格式规则，并提供了示例，包括:
*   在类定义之间添加一个额外的换行符(所以有 2 个换行符)。
*   文件末尾的换行符。
*   预格式化 Objective-C 代码，这样 clang-format 将产生最佳结果。
*   添加提交前检查的脚本，这对于未格式化的代码将会失败，并提供如何用单个命令修复代码的有用说明。
*   简化了整个团队的格式化规则的协调，这些规则可以随着时间的推移而改变，而没有任何持续的开销。
*   …以及测试脚本和装置，以防止随着规则的发展而出现倒退。
*   在存储库上运行初始设置脚本后，将在每次提交时检查格式。
*   部署的格式更新将自动应用，无需任何额外的步骤(在前面提到的设置脚本运行之后)。
*   我们还提供了一个示例脚本，它可以作为构建过程的一部分运行，以便在发出拉请求时强制格式化。

# 发射

**【太空司令】**把我们 iOS 团队带入了自动格式化代码文件的未来。我们很乐意交出空格、制表符、大括号等的“指挥权”。进入我们的 Objective-C 文件，这样我们可以更快地发布原始代码。

你可以[克隆](http://github.com/square/spacecommander) **【太空司令】**以便使用 Square 的代码风格，或者分叉它定制自己喜欢的格式规则。

我们希望**【空间指挥官】**带给你原始的代码并节省你的时间，当然我们也欢迎改进的贡献！

*本帖是 Square 的“* [*周 iOS*](https://corner.squareup.com/2015/06/a-week-of-ios.html) *”系列的一部分。*

[](/@dunbar151) [## 艾伦·芬伯格-简介

### 债务:最初的 5000 年给我留下了深刻的印象，所以我急切地阅读了大卫·格雷伯的《规则的乌托邦》。它…

medium.com](/@dunbar151)