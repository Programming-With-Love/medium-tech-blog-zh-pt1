# 协程是一个新线程

> 原文：<https://medium.com/globant/coroutine-is-a-new-thread-934d9956ce2e?source=collection_archive---------0----------------------->

我们将在这个故事中讲述协程的基础知识。

让我们仔细看看它😎

# 什么是协程？

Kotlin 引入了 coroutine 作为异步或非阻塞编程的推荐解决方案。

"**协程是一个轻量级线程**"

在不阻塞应用 UI 线程的情况下，可以平稳地将**操作**如向/从数据库写入/读取数据、从服务器& **获取数据、长时间运行的操作**执行******。******

****在这种情况下，协程是救世主。****

****让我们看看同样的实际用途。****

> ****Coroutine 是在 Kotlin 中引入的，但它不是 Kotlin 标准库的一部分。它包含在库 **kotlinx.coroutines** 中。****

****![](img/e8fbbec4d4548d62d08363aedb77ed16.png)****

****这是一个由 JetBrains 开发的丰富的协程库。它包含许多高级协同程序使能的原语。****

****为了使用协程，请在您的项目 build.gradle 中添加依赖项****

****Add **dependency** to project **build.gradle (app module)******

# ******协同工作创造******

****协程作业是用下列协程生成器创建的。****

*   ****发动****
*   ****异步ˌ非同步(asynchronous)****

****它是在某个协同作用域的上下文中创建的。在下面的例子中，我们使用 GlobalScope 上下文来创建协程。****

# ****使用 GlobalScope.launch****

******Coroutine job** created using **launch******

# ****使用 GlobalScope.async****

******Coroutine job** created using **async******

****我们已经使用 launch 和 async 协程生成器成功地创建了协程。****

******默认情况下，协程被立即调度执行**。可以通过参数指定其他选项，如开始、阻止等。****

******从概念上讲，异步就像启动**。它启动一个独立的协程，这是一个轻量级线程，与所有其他协程并行工作。不同之处在于，launch 返回一个作业，并且不携带任何结果值，而 async 返回一个 Deferred——一个轻量级的非阻塞未来，表示以后提供结果的承诺。你可以用。await()来获得它的最终结果，但是 deferred 也是一项工作，所以如果需要的话可以取消它。****

****有一些作业的属性和方法可以用来控制作业。****

# ****作业属性****

*   ****isActive :当该作业处于活动状态时返回 true 它已经开始，尚未完成，也未被取消。如果等待其子作业完成的作业未被取消或失败，则该作业仍被视为活动的。****
*   ******isCancelled** :如果该作业由于某种原因被取消，则返回 true，无论是通过显式调用 cancel，还是由于该作业失败或其子作业或父作业被取消。在一般情况下，这并不意味着作业已经完成，因为它可能仍在完成它正在做的任何事情，并等待其子作业完成。****
*   ******isCompleted** :当该作业因某种原因完成时，返回 true。被取消或失败并已完成执行的作业也被视为已完成。只有在其所有子作业完成后，作业才变得完整。****

# ****工作职能****

*   ******取消**:取消该作业，取消原因可选。原因可用于指定错误消息或提供有关取消原因的其他详细信息，以便进行调试。有关取消机制的完整说明，请参见作业文档。****
*   ******invokeOnCompletion** :注册该作业完成时同步调用一次的处理程序。当作业已经完成时，将立即调用处理程序，并显示作业的异常或取消原因或 null。否则，该处理程序将在该作业完成时被调用一次。****
*   ******join** :挂起协程，直到这个任务完成。当作业由于任何原因完成，并且调用协程的作业仍处于活动状态时，该调用会正常恢复(无例外)。如果作业仍处于新状态，该函数也启动相应的协程。****
*   ******start** :启动与该作业相关的协程(如果有)，如果它还没有启动的话。如果该调用实际上启动了协程，则结果为 true 如果它已经启动或完成，则结果为 false。****

****现在我们知道了如何创建协程并控制它。****

****借助协程，享受长时间运行操作的完美执行😎****