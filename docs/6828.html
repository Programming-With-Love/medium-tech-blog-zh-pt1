<html>
<head>
<title>Porting Python 2.7 Code to Python 3.X</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Python 2.7代码移植到Python 3。X</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/porting-python-2-7-to-python-3-x-b1506966e5a3?source=collection_archive---------8-----------------------#2020-03-17">https://medium.com/quick-code/porting-python-2-7-to-python-3-x-b1506966e5a3?source=collection_archive---------8-----------------------#2020-03-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="5d6c" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated"><strong class="ak">Python开发者从Python 2.7到Python 3.x的轻松迁移指南</strong></h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/a72da1afc58dc3028c6d9987e3871045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jIggqonU7pQKjdSe.jpg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Porting from Python 2.7 to Python 3.x</figcaption></figure><p id="679b" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">2008年12月，Python软件基金会发布了3.0版，引入了重大变化来改进Python。由于发布后许多人不想升级他们的项目，开发人员已经支持这两个版本一段时间了，以免伤害用户的感情。</p><p id="3c72" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">尽管在代码移植上花了很多时间，但许多人还没有这样做。同时，支持两个版本耗费了大量的时间和精力，阻碍了开发人员对Python 3.0的进一步改进。</p><p id="ff73" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">这就是为什么<a class="ae ki" href="https://www.python.org/psf/press-release/pr20191220/" rel="noopener ugc nofollow" target="_blank"> Python基金会决定宣布</a>:</p><blockquote class="kj"><p id="18b1" class="kk kl hh bd km kn ko kp kq kr ks kh dx translated"><strong class="ak"> <em class="kt">敦促用户迁移到受支持的Python 3版本，以便从其众多改进中受益，并避免2020年4月后Python 2.x中的潜在安全漏洞。</em> </strong></p></blockquote><p id="8889" class="pw-post-body-paragraph jm jn hh jo b jp ku ii jr js kv il ju jv kw jx jy jz kx kb kc kd ky kf kg kh ha bi translated"><em class="kz">这就是需要专业Python开发人员&amp;软件架构师帮助的地方。</em></p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es la"><img src="../Images/746fb68d3a4ec3218f5909d2030d2b95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F0lewUK27E3iJgm9HebMTg.png"/></div></div></figure><h2 id="2d77" class="lb lc hh bd ld le lf lg lh li lj lk ll jv lm ln lo jz lp lq lr kd ls lt lu lv bi translated">代码移植的原因</h2><p id="3bb7" class="pw-post-body-paragraph jm jn hh jo b jp lw ii jr js lx il ju jv ly jx jy jz lz kb kc kd ma kf kg kh ha bi translated">Python 3。x为开发人员和商业人士提供了许多好的选择:</p><ul class=""><li id="e1b7" class="mb mc hh jo b jp jq js jt jv md jz me kd mf kh mg mh mi mj bi translated">大型社区支持。</li><li id="ee74" class="mb mc hh jo b jp mk js ml jv mm jz mn kd mo kh mg mh mi mj bi translated">默认情况下，标准库改进是可用的。</li><li id="295d" class="mb mc hh jo b jp mk js ml jv mm jz mn kd mo kh mg mh mi mj bi translated">检测和修复错误的简化过程。</li><li id="2836" class="mb mc hh jo b jp mk js ml jv mm jz mn kd mo kh mg mh mi mj bi translated">现代技术的支持:人工智能，大数据，机器学习。</li></ul><h2 id="4c8d" class="lb lc hh bd ld le lf lg lh li lj lk ll jv lm ln lo jz lp lq lr kd ls lt lu lv bi translated">如果我不移植代码会发生什么？</h2><p id="52f4" class="pw-post-body-paragraph jm jn hh jo b jp lw ii jr js lx il ju jv ly jx jy jz lz kb kc kd ma kf kg kh ha bi translated">如果您或您的供应商在Python 2中发现安全问题，志愿者中没有人会帮助修复它，因为这个版本不再受支持。除了安全问题，您将无法使用:</p><ol class=""><li id="1112" class="mb mc hh jo b jp jq js jt jv md jz me kd mf kh mp mh mi mj bi translated">对异步I/O (asyncio)的本机支持；</li><li id="9e54" class="mb mc hh jo b jp mk js ml jv mm jz mn kd mo kh mp mh mi mj bi translated">新MRO；</li><li id="8727" class="mb mc hh jo b jp mk js ml jv mm jz mn kd mo kh mp mh mi mj bi translated">f字符串语法；</li><li id="c70b" class="mb mc hh jo b jp mk js ml jv mm jz mn kd mo kh mp mh mi mj bi translated">@ dataclasses</li><li id="ed4e" class="mb mc hh jo b jp mk js ml jv mm jz mn kd mo kh mp mh mi mj bi translated">新包装；</li><li id="c50d" class="mb mc hh jo b jp mk js ml jv mm jz mn kd mo kh mp mh mi mj bi translated">赋值表达式；</li><li id="efdd" class="mb mc hh jo b jp mk js ml jv mm jz mn kd mo kh mp mh mi mj bi translated">键入批注；</li></ol><p id="376f" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">以及其他<a class="ae ki" href="https://docs.python.org/3.9/whatsnew/3.9.html" rel="noopener ugc nofollow" target="_blank">好的Python 3特性</a>！</p><h2 id="17b9" class="lb lc hh bd ld le lf lg lh li lj lk ll jv lm ln lo jz lp lq lr kd ls lt lu lv bi translated">如何将Python 2移植到Python 3</h2><p id="5cab" class="pw-post-body-paragraph jm jn hh jo b jp lw ii jr js lx il ju jv ly jx jy jz lz kb kc kd ma kf kg kh ha bi translated">阻碍轻松迁移到Python 3.0的最大挑战是与版本2.0的向后不兼容。这意味着代码Python 2.x在Python 3.0上运行时总是会返回错误。动态Python标准化使得从Python 2到Python 3的机械迁移变得困难。</p><p id="2e71" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hi">升级Python版本需要做什么:</strong></p><p id="6f7b" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hi"> 1。选择策略。</strong>根据您的目标，您的供应商可以帮助您选择适合您项目的定制策略。其中最常见的可能是代码重写，以Python 2.0版本支持结束，转而支持Python 3.0，或者将项目移植到Python 3.0，而不添加新的Python 2.0特性。</p><p id="25a2" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hi"> 2。理解Python 2和3的主要区别。</strong></p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mq"><img src="../Images/2d368e21937a74d500cdeafece602ce8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ISkIOJHrmzhJG1DwzHKLeQ.png"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">source: <a class="ae ki" href="https://jellyfish.tech/updating-python-2-to-python-3/?utm_source=medium&amp;utm_medium=publication&amp;utm_campaign=python-migration" rel="noopener ugc nofollow" target="_blank">Updating Python 2 to Python 3 | Painless Migration Guide</a></figcaption></figure><p id="a6cf" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hi"> 3。审核代码。</strong>没有代码审计，任何升级、现代化或改进都是不可能的，因为它帮助开发人员定义可能的问题、瓶颈，并在需要时重建系统架构以提高性能。</p><p id="5e5b" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hi"> 4。确保良好的测试覆盖率。</strong>在一个完美的世界中，代码移植的每一个主要步骤都应该伴随着单元测试，以确保代码符合它的所有功能。良好的测试覆盖允许在开发阶段直接检测问题，这使得修复bug更加容易。</p><p id="b25c" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hi"> 5。使用CI/CD概念。</strong>由<a class="ae ki" href="https://www.atlassian.com/continuous-delivery/principles/continuous-integration-vs-delivery-vs-deployment" rel="noopener ugc nofollow" target="_blank">持续集成&amp;交付</a>概念保证的迭代发布有助于交付更好的代码，使整个应用程序更好地工作。</p><p id="ad46" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hi"> 6。开始在生产中使用Python 3。</strong></p><p id="b081" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><strong class="jo hi"> 7。删除Python 2兼容性代码。</strong></p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es la"><img src="../Images/746fb68d3a4ec3218f5909d2030d2b95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F0lewUK27E3iJgm9HebMTg.png"/></div></div></figure><h2 id="7c71" class="lb lc hh bd ld le lf lg lh li lj lk ll jv lm ln lo jz lp lq lr kd ls lt lu lv bi translated">结果</h2><p id="27d7" class="pw-post-body-paragraph jm jn hh jo b jp lw ii jr js lx il ju jv ly jx jy jz lz kb kc kd ma kf kg kh ha bi translated">将Python代码从2.0移植到3.0的一系列操作类似于传统现代化的<a class="ae ki" href="https://jellyfish.tech/software-modernization-case-study/?utm_source=medium&amp;utm_medium=publication&amp;utm_campaign=python-migration" rel="noopener ugc nofollow" target="_blank">过程</a>。开发团队应该根据全面的计划谨慎行事，并正确估计风险。</p><p id="216e" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated">如果没有专门的开发团队，移植Python代码仍然是一个挑战，但在大多数情况下，结果是值得的。</p><p id="9088" class="pw-post-body-paragraph jm jn hh jo b jp jq ii jr js jt il ju jv jw jx jy jz ka kb kc kd ke kf kg kh ha bi translated"><em class="kz">考虑Python迁移？最好与有类似案例的</em> <a class="ae ki" href="https://jellyfish.tech/?utm_source=medium&amp;utm_medium=guest_post&amp;utm_campaign=python_migration" rel="noopener ugc nofollow" target="_blank"> <em class="kz">技术合作伙伴</em> </a> <em class="kz">核实一下，以确定它给你的业务带来(或没有带来)的价值，然后再采取措施更新你的Python版本。</em></p></div></div>    
</body>
</html>