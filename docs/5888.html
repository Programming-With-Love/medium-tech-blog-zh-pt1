<html>
<head>
<title>Oracle Container Engine for Kubernetes (OKE) Supports Capacity Reservations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用于Kubernetes的Oracle容器引擎(OKE)支持容量预留</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/oracle-container-engine-for-kubernetes-oke-supports-capacity-reservations-418123207fde?source=collection_archive---------0-----------------------#2022-03-10">https://medium.com/oracledevs/oracle-container-engine-for-kubernetes-oke-supports-capacity-reservations-418123207fde?source=collection_archive---------0-----------------------#2022-03-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/74645910ef0e8f89ae6982b01e06ac5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Y2hHrf-cM3Prk_k7uY-LYA.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Plan in advance to ensure worker node capacity is available for critical workloads</figcaption></figure><div class=""/><p id="fa3f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">保留的<a class="ae jr" href="https://www.oracle.com/cloud/compute" rel="noopener ugc nofollow" target="_blank"> Oracle云基础设施(OCI)计算</a>容量<a class="ae jr" href="https://docs.oracle.com/en-us/iaas/releasenotes/changes/e80a6d99-b782-46d8-906e-d04cac798a3f/" rel="noopener ugc nofollow" target="_blank">现在可以用于</a>为Kubernetes (OKE) 工作节点创建<a class="ae jr" href="https://docs.oracle.com/en-us/iaas/Content/ContEng/home.htm#top" rel="noopener ugc nofollow" target="_blank"> Oracle容器引擎。预留容量让用户确信，计算资源将在最需要的时候可用，例如从灾难或意外工作负载高峰中恢复。</a></p><h1 id="4a63" class="js jt hw bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">什么是容量预留？</h1><p id="6d3b" class="pw-post-body-paragraph it iu hw iv b iw kq iy iz ja kr jc jd je ks jg jh ji kt jk jl jm ku jo jp jq ha bi translated"><a class="ae jr" href="https://docs.oracle.com/iaas/Content/Compute/Tasks/reserve-capacity.htm#default" rel="noopener ugc nofollow" target="_blank">容量预留</a>使用户能够提前预留虚拟机和裸机计算实例容量，以确保资源可供租户在需要时使用。没有预留容量的用户可能会发现自己处于这样一种情况:某个区域内的特定<a class="ae jr" href="https://docs.oracle.com/en-us/iaas/Content/General/Concepts/regions.htm#fault" rel="noopener ugc nofollow" target="_blank">故障域</a>或<a class="ae jr" href="https://docs.oracle.com/en-us/iaas/Content/General/Concepts/regions.htm" rel="noopener ugc nofollow" target="_blank">可用性域</a>不再具有给定<a class="ae jr" href="https://docs.oracle.com/en-us/iaas/Content/Compute/References/computeshapes.htm" rel="noopener ugc nofollow" target="_blank">计算形状</a>的可用容量。在这种情况下，用户需要等到容量恢复到池中，才能调配额外的计算实例来支持他们的工作负载。很多时候，等待根本不是一个选项:例如，在故障转移到辅助位置时确保容量可用，或者为意外的工作负载高峰提供缓冲容量。</p><p id="73a2" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">通过向OKE添加对容量预留的支持，具有容器化工作负载的用户现在可以高枕无忧，因为容量将在关键事件期间可用。</p><p id="e6ed" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">容量预留在成本优化中也发挥着有益的作用。由于容量预留的成本低于运行实例的成本，因此使用它们来维护上述用例的备份或缓冲容量，比使用始终在线热备盘或额外工作节点更具成本效益。可以随时修改、删除或创建容量预留，以满足不断变化的业务需求。没有最短时间承诺。</p><h1 id="6a74" class="js jt hw bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">使用容量预留</h1><p id="eb11" class="pw-post-body-paragraph it iu hw iv b iw kq iy iz ja kr jc jd je ks jg jh ji kt jk jl jm ku jo jp jq ha bi translated">用户可以选择使用现有的容量预留或<a class="ae jr" href="https://docs.oracle.com/en-us/iaas/Content/Compute/Tasks/reserve-capacity.htm#reservecapacity_managing_capacity_reservations" rel="noopener ugc nofollow" target="_blank">在计算服务</a>中创建新的容量预留。这样做之后，用户将匹配的容量预留ID作为放置配置中的参数传递到OKE节点池中，这也用于控制可用性域和<a class="ae jr" href="https://docs.oracle.com/en-us/iaas/Content/Network/Tasks/managingVCNs_topic-Overview_of_VCNs_and_Subnets.htm" rel="noopener ugc nofollow" target="_blank"> OCI虚拟云网络子网</a>中的节点放置。务必确保节点池放置配置中的节点形状和可用性域分别与容量预留的实例类型和可用性域匹配，以确保实例按预期启动。指定容量预留后，将使用关联预留中的计算实例创建添加到节点池的节点。只要有足够的容量，这种情况就会持续下去。</p><p id="cf65" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为了创建具有容量预留的节点池，我在节点池的放置配置中包含了容量预留ID:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="4fa1" class="le jt hw la b fi lf lg l lh li">oci ce node-pool create \<br/>--cluster-id ocid1.cluster.oc1.iad.aaaaaaaaaf______jrd \<br/>--name capacity-reservation-example \<br/>--node-image-id ocid1.image.oc1.iad.aaaaaaaa6______nha \<br/>--compartment-id ocid1.compartment.oc1..aaaaaaaay______t6q \<br/>--kubernetes-version v1.21.5 \<br/>--node-shape VM.Standard2.1 \<br/>--placement-configs "[{\"availabilityDomain\":<br/>\"IqDk:US-ASHBURN-AD-1\", \"capacityReservationId\":<br/>\"ocid1.capacityreservation.oc1.iad.anuwcljt2ah______yeq\", \"subnetId\":<br/>\"ocid1.subnet.oc1.iad.aaaaaaaa2xpk______zva\"}]" \<br/>--size 1 \<br/>--region=us-ashburn-1</span></pre><h1 id="dd2a" class="js jt hw bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">默认预订</h1><p id="f589" class="pw-post-body-paragraph it iu hw iv b iw kq iy iz ja kr jc jd je ks jg jh ji kt jk jl jm ku jo jp jq ha bi translated">Kubernetes的容器引擎还支持在启动worker节点时使用<a class="ae jr" href="https://docs.oracle.com/en-us/iaas/Content/Compute/Tasks/reserve-capacity.htm#default" rel="noopener ugc nofollow" target="_blank">默认容量预留</a>。默认预留是容量预留，适用于在与预留相关联的租用和可用性域中创建的所有实例。创建默认容量预留后，在该可用性域和租户中启动的所有计算实例(包括Kubernetes工作节点)将使用默认容量预留中的容量。</p><p id="3d5b" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">有时，用户可能不想从默认容量预留中调配工作节点。在这些情况下，用户可以在其节点池的放置配置参数中指定一个替代的容量预留，或者选择退出默认预留，并在使用<a class="ae jr" href="https://docs.oracle.com/en-us/iaas/Content/Compute/Concepts/computeoverview.htm#capacity_types" rel="noopener ugc nofollow" target="_blank">按需计算容量</a>的节点上启动。</p><h1 id="a9fb" class="js jt hw bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">结论</h1><p id="4117" class="pw-post-body-paragraph it iu hw iv b iw kq iy iz ja kr jc jd je ks jg jh ji kt jk jl jm ku jo jp jq ha bi translated">从预留容量中调配工作节点的能力可确保计算用户和在Kubernetes上运行容器化工作负载的用户在最需要的时候拥有足够的资源。不再需要等待其他用户释放按需容量或过度调配热备用工作节点主机来保证容量的可用性。现在，用户有了一种经济高效的方法来确保其集装箱化环境及其支持的业务的连续性。</p><p id="c113" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">使用以下资源了解更多信息:</p><ul class=""><li id="c494" class="lj lk hw iv b iw ix ja jb je ll ji lm jm ln jq lo lp lq lr bi translated">访问<a class="ae jr" href="https://www.oracle.com/cloud-native/container-engine-kubernetes/" rel="noopener ugc nofollow" target="_blank"> OKE资源中心</a>了解产品详情和评价。</li><li id="04d7" class="lj lk hw iv b iw ls ja lt je lu ji lv jm lw jq lo lp lq lr bi translated">从我们的<a class="ae jr" href="https://docs.oracle.com/en-us/iaas/Content/ContEng/Concepts/contengoverview.htm" rel="noopener ugc nofollow" target="_blank">文档</a>中了解更多关于OKE的信息。</li><li id="a585" class="lj lk hw iv b iw ls ja lt je lu ji lv jm lw jq lo lp lq lr bi translated"><a class="ae jr" href="https://docs.oracle.com/en-us/iaas/Content/ContEng/Tasks/contengmakingcapacityreservations.htm" rel="noopener ugc nofollow" target="_blank">自己尝试使用容量预留</a>。</li><li id="8da4" class="lj lk hw iv b iw ls ja lt je lu ji lv jm lw jq lo lp lq lr bi translated">从我们的<a class="ae jr" href="https://signup.cloud.oracle.com/?language=en&amp;sourceType=:ex:tb:::::RC_WWMK220209P00057:Medium_okeCapacityReservations&amp;SC=:ex:tb:::::RC_WWMK220209P00057:Medium_okeCapacityReservations&amp;pcode=WWMK220209P00057" rel="noopener ugc nofollow" target="_blank"> Oracle云免费层</a>开始使用Oracle云基础架构。</li></ul><h1 id="1444" class="js jt hw bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">加入对话！</h1><p id="768e" class="pw-post-body-paragraph it iu hw iv b iw kq iy iz ja kr jc jd je ks jg jh ji kt jk jl jm ku jo jp jq ha bi translated">如果你对甲骨文开发人员在他们的自然栖息地发生的事情感到好奇，请加入我们的<a class="ae jr" href="https://join.slack.com/t/oracledevrel/shared_invite/zt-uffjmwh3-ksmv2ii9YxSkc6IpbokL1g?customTrackingParam=:ex:tb:::::Medium_okeCapacityReservations" rel="noopener ugc nofollow" target="_blank">公共休闲频道</a>！我们不介意成为你的鱼缸🐠</p></div></div>    
</body>
</html>