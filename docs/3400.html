<html>
<head>
<title>ConcatAdapter: Merge or combine multiple adapters into single ConcatAdapter</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ConcatAdapter:将多个适配器合并或组合成一个ConcatAdapter</h1>
<blockquote>原文：<a href="https://medium.com/globant/merge-multiple-adapters-into-single-mergeadapter-c778b15a6020?source=collection_archive---------7-----------------------#2020-04-12">https://medium.com/globant/merge-multiple-adapters-into-single-mergeadapter-c778b15a6020?source=collection_archive---------7-----------------------#2020-04-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/02ce8fb338264bad51fe0b765eac2654.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s4qAuSnezFCn_FQZ"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@max_duz?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Max Duzij</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="c062" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">当在RecyclerView中处理复杂的UI或多视图类型场景时，我们通常将许多数据源合并到一个适配器中，然后根据业务逻辑在适配器中区分它们，并相应地设置UI。很多时候，即使对于一个简单的页眉页脚逻辑，我们也需要将它合并到一个源代码中，然后编写另一个逻辑来分离它。编写分离逻辑是一项重复的工作，我想几乎所有的开发人员都做过。</p><p id="ba12" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在<a class="ae it" href="https://developer.android.com/" rel="noopener ugc nofollow" target="_blank">d.android.com</a>已经引入了<code class="du js jt ju jv b"><a class="ae it" href="https://developer.android.com/reference/androidx/recyclerview/widget/ConcatAdapter" rel="noopener ugc nofollow" target="_blank">ConcatAdapter</a></code>，在这种情况下，我们可以将多视图类型ui分离到不同的适配器中，这些适配器随后可以顺序合并到单个适配器中(称为ConcatAdapter)。实现这一点将有助于将适配器逻辑拆分成它自己的适配器，这将使代码<strong class="iw hi">更具可重用性</strong>和<strong class="iw hi">更少的错误。</strong></p><p id="5213" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">下面是带有多个适配器的列表的结构</p><figure class="jx jy jz ka fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jw"><img src="../Images/32a0904b5cc29ab727ce3f33e95f2c85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*UZJxxtgOCleuNNbA"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">RecyclerView and Adapter data</figcaption></figure><p id="8636" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><code class="du js jt ju jv b"><a class="ae it" href="https://developer.android.com/reference/androidx/recyclerview/widget/ConcatAdapter" rel="noopener ugc nofollow" target="_blank">ConcatAdapter</a></code>是<code class="du js jt ju jv b"><a class="ae it" href="https://developer.android.com/jetpack/androidx/releases/recyclerview" rel="noopener ugc nofollow" target="_blank">recyclerview:1.2.0-alpha02</a></code>中新增的一个类，可以让你将多个<code class="du js jt ju jv b"><a class="ae it" href="https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.Adapter" rel="noopener ugc nofollow" target="_blank">adapters</a></code>依次组合在一个<code class="du js jt ju jv b"><a class="ae it" href="https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView" rel="noopener ugc nofollow" target="_blank">RecyclerView</a></code>中显示。实现这一点非常简单。我们将采取一个例子，我们将有一个带有页眉和页脚的列表。</p><p id="ce02" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果我们以现有的方式实现上面的例子，那么我们将把页眉和页脚逻辑添加到一个适配器中，然后在适配器内部，我们将借助<strong class="iw hi"> getItemViewType </strong>来区分它。</p></div><div class="ab cl kb kc go kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="ha hb hc hd he"><p id="2a75" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">上述内容不需要在新的ConcatAdapter中完成。下面是它的例子。</p><h2 id="3fdd" class="ki kj hh bd kk kl km kn ko kp kq kr ks jf kt ku kv jj kw kx ky jn kz la lb lc bi translated">标题适配器</h2><figure class="jx jy jz ka fd ii"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="ip iq et er es ir is bd b be z dx">HeaderAdapter</figcaption></figure><p id="1ac9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">标题适配器仅包含标题的业务逻辑。以现有的方式，这个逻辑应该在具有处理列表项的逻辑的适配器中。下面是适配器，除了页眉和页脚之外还有列表项。</p></div><div class="ab cl kb kc go kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="ha hb hc hd he"><h2 id="ea72" class="ki kj hh bd kk kl km kn ko kp kq kr ks jf kt ku kv jj kw kx ky jn kz la lb lc bi translated">列表适配器</h2><figure class="jx jy jz ka fd ii"><div class="bz dy l di"><div class="ld le l"/></div><figcaption class="ip iq et er es ir is bd b be z dx">ListAdapter</figcaption></figure><p id="7fef" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">上面的列表适配器非常简洁，只包含处理列表数据的逻辑。现在继续看页脚适配器。</p></div><div class="ab cl kb kc go kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="ha hb hc hd he"><h2 id="78a6" class="ki kj hh bd kk kl km kn ko kp kq kr ks jf kt ku kv jj kw kx ky jn kz la lb lc bi translated">页脚适配器</h2><p id="1a9f" class="pw-post-body-paragraph iu iv hh iw b ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn lj jp jq jr ha bi translated">在这个例子中，我使用了相同的页眉适配器，所以页脚没有不同的适配器。唯一的事情是我正在为页脚创建页眉适配器的另一个实例。现在转到活动，我们将把适配器设置到<strong class="iw hi">回收视图</strong></p></div><div class="ab cl kb kc go kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="ha hb hc hd he"><h2 id="b040" class="ki kj hh bd kk kl km kn ko kp kq kr ks jf kt ku kv jj kw kx ky jn kz la lb lc bi translated">活动</h2><figure class="jx jy jz ka fd ii"><div class="bz dy l di"><div class="ld le l"/></div></figure><p id="e258" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这是编译和执行时的演示。</p><figure class="jx jy jz ka fd ii er es paragraph-image"><div class="er es lk"><img src="../Images/d99c3a1aac60d9380b6519b501fca8b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:776/1*08PWUrY6Sf88YsRKIkBPVg.gif"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Demo</figcaption></figure><p id="38c9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">谢谢，下面是上面用Concat Adapter实现的例子的代码。</p><div class="ll lm ez fb ln lo"><a href="https://github.com/ajinkyasaswade09/ExampleMergeAdapter.git" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab dw"><div class="lq ab lr cl cj ls"><h2 class="bd hi fi z dy lt ea eb lu ed ef hg bi translated">ajinkyasaswade 09/ExampleMergeAdapter</h2><div class="lv l"><h3 class="bd b fi z dy lt ea eb lu ed ef dx translated">一个MergeAdapter的演示程序，由弗洛里纳·蒙特内斯库描述，MergeAdapter是一个新的类，在…</h3></div><div class="lw l"><p class="bd b fp z dy lt ea eb lu ed ef dx translated">github.com</p></div></div><div class="lx l"><div class="ly l lz ma mb lx mc in lo"/></div></div></a></div></div><div class="ab cl kb kc go kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="ha hb hc hd he"><h2 id="d6ea" class="ki kj hh bd kk kl km kn ko kp kq kr ks jf kt ku kv jj kw kx ky jn kz la lb lc bi translated">关于ConcatAdapter的更多信息</h2><p id="e12f" class="pw-post-body-paragraph iu iv hh iw b ix lf iz ja jb lg jd je jf lh jh ji jj li jl jm jn lj jp jq jr ha bi translated">关于这个话题的更多信息，你可以访问下面的链接</p><div class="ll lm ez fb ln lo"><a rel="noopener follow" target="_blank" href="/androiddevelopers/merge-adapters-sequentially-with-mergeadapter-294d2942127a"><div class="lp ab dw"><div class="lq ab lr cl cj ls"><h2 class="bd hi fi z dy lt ea eb lu ed ef hg bi translated">用MergeAdapter按顺序合并适配器</h2><div class="lv l"><h3 class="bd b fi z dy lt ea eb lu ed ef dx translated">用例示例:显示列表页眉和页脚</h3></div><div class="lw l"><p class="bd b fp z dy lt ea eb lu ed ef dx translated">medium.com</p></div></div><div class="lx l"><div class="md l lz ma mb lx mc in lo"/></div></div></a></div><p id="d6e3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我要感谢<a class="me mf ge" href="https://medium.com/u/d5885adb1ddf?source=post_page-----c778b15a6020--------------------------------" rel="noopener" target="_blank">弗洛里纳·蒙特纳斯库</a>🙏为我们提供了关于<strong class="iw hi"> ConcatAdapter </strong>主题的更新。我希望上面的例子有助于您理解ConcatAdapter。如果上面有任何需要改正的地方，请让我知道，以便我可以改正。</p><p id="52e1" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">另外如果你在这篇文章中发现了一些有用的东西，别忘了给个<em class="mg">👏🏼如果你想联系，请通过下面的任何社交链接打招呼。</em></p><div class="ll lm ez fb ln lo"><a href="https://twitter.com/ajusaswade" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab dw"><div class="lq ab lr cl cj ls"><h2 class="bd hi fi z dy lt ea eb lu ed ef hg bi translated">阿金克亚·萨斯韦德</h2><div class="lv l"><h3 class="bd b fi z dy lt ea eb lu ed ef dx translated">Ajinkya Saswade的最新推文(@ajusaswade)。# Android | # kot Lin | # Flutter | # Dart | # Java |移动开发者…</h3></div><div class="lw l"><p class="bd b fp z dy lt ea eb lu ed ef dx translated">twitter.com</p></div></div><div class="lx l"><div class="mh l lz ma mb lx mc in lo"/></div></div></a></div><div class="ll lm ez fb ln lo"><a href="https://www.linkedin.com/in/ajinkya-saswade" rel="noopener  ugc nofollow" target="_blank"><div class="lp ab dw"><div class="lq ab lr cl cj ls"><h2 class="bd hi fi z dy lt ea eb lu ed ef hg bi translated">Ajinkya Saswade -软件工程师- Globant | LinkedIn</h2><div class="lv l"><h3 class="bd b fi z dy lt ea eb lu ed ef dx translated">查看Ajinkya Saswade在全球最大的职业社区LinkedIn上的个人资料。阿金克亚有一个工作列在…</h3></div><div class="lw l"><p class="bd b fp z dy lt ea eb lu ed ef dx translated">www.linkedin.com</p></div></div><div class="lx l"><div class="mi l lz ma mb lx mc in lo"/></div></div></a></div></div></div>    
</body>
</html>