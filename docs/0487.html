<html>
<head>
<title>Migrating to Material Components for Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">迁移到Android的材料组件</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/migrating-to-material-components-for-android-ec6757795351?source=collection_archive---------0-----------------------#2020-04-16">https://medium.com/androiddevelopers/migrating-to-material-components-for-android-ec6757795351?source=collection_archive---------0-----------------------#2020-04-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/29b887ab8979b811847747c73fd6d019.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w2X7ExLGBzb-iznRW1rAVw.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Illustration by <a class="ae hu" href="https://twitter.com/molly_hensley" rel="noopener ugc nofollow" target="_blank">Molly Hensley</a></figcaption></figure><div class=""/><div class=""><h2 id="93eb" class="pw-subtitle-paragraph iu hw hx bd b iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl dx translated">来自设计支持库👉MDC <code class="du jm jn jo jp b">1.0.0</code>👉MDC <code class="du jm jn jo jp b">1.1.0</code>及以后</h2></div><p id="53ba" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated"><em class="km">这篇文章也发布在</em> <a class="ae hu" href="https://material.io/blog/migrate-android-material-components" rel="noopener ugc nofollow" target="_blank"> <em class="km">材质设计博客</em> </a> <em class="km">。</em></p><p id="3139" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我们最近<a class="ae hu" rel="noopener" href="/google-design/material-design-components-for-android-1-1-0-are-now-available-45e1d576037c">宣布了</a> <a class="ae hu" href="https://github.com/material-components/material-components-android" rel="noopener ugc nofollow" target="_blank">材质设计组件</a>(MDC)<code class="du jm jn jo jp b">1.1.0</code>——这是一个库更新，为你的Android应用程序带来了<a class="ae hu" href="https://material.io/design/material-theming/overview.html" rel="noopener ugc nofollow" target="_blank">材质主题</a>，新的小部件，黑暗主题支持和其他令人兴奋的功能。</p><p id="c849" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">MDC取代了设计支持库。本指南将向您展示如何迁移您的代码库，以便您可以利用新的属性、样式和小部件。如果你在MDC <code class="du jm jn jo jp b">1.0.0</code>上，这也提供了必要的迁移到<code class="du jm jn jo jp b">1.1.0</code>的步骤。请务必查看我们相应的视频指南！</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="kr ks l"/></div></figure><h1 id="200e" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">一个简化的主题示例</h1><p id="174e" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">本指南使用一个简化的应用程序来演示迁移过程。它使用一个AppCompat主题、来自设计支持库的小部件(包括一个带有自定义背景的按钮)以及其他各种需要迁移的元素。我们将从使用传统AppCompat模板的应用程序主题开始:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/3ab3270b3831a18588436dc0d4a33000.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vynontoFg7F8Bp_9BdVnvQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Example app using AppCompat and the Design Support Library</figcaption></figure><h1 id="3529" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">从支持库迁移到Jetpack</h1><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/898bb2632a884b67b13f5465a6372f74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2NrHkCs83W44nFbETw9vGQ.png"/></div></div></figure><p id="c5c6" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">在使用MDC之前，您需要从支持库迁移到<a class="ae hu" href="https://developer.android.com/jetpack/" rel="noopener ugc nofollow" target="_blank"> Android Jetpack </a>。Jetpack使用新的<code class="du jm jn jo jp b">androidx.*</code>名称空间，并将以前的支持库包拆分为单独维护的、语义版本化的库，提供了功能对等性和新的库。MDC是用AndroidX库构建的，所以迁移是强制性的。</p><p id="902f" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">要迁移到AndroidX，我们建议遵循<a class="ae hu" href="https://developer.android.com/jetpack/androidx/migrate" rel="noopener ugc nofollow" target="_blank">官方开发者文档</a>或观看来自Android Dev Summit’19的<a class="ae hu" href="https://www.youtube.com/watch?v=Hyt7LR5mXLc" rel="noopener ugc nofollow" target="_blank">“迁移到AndroidX:时机成熟”演讲</a>。Android Studio中的<strong class="js hy">Refactor&gt;Migrate to AndroidX’</strong>工具会将您的设计支持库依赖项重构到MDC。</p><p id="6c2a" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated"><strong class="js hy"> <em class="km">注意:</em> </strong> <em class="km">版本为</em> <code class="du jm jn jo jp b"><em class="km">1.0.0</em></code> <em class="km">的Jetpack和MDC构件都是二进制兼容的支持库</em> <code class="du jm jn jo jp b"><em class="km">28.0.0</em></code> <em class="km">构件。如果您不是28版，我们建议您先升级到28版，然后再进行迁移。</em></p><h1 id="4435" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">更新到MDC <code class="du jm jn jo jp b">1.0.0</code></h1><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/abf7cfefb80606d1abf658dc2cd94357.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NNtrz7q0syzxsbV9ninHhg.png"/></div></div></figure><p id="eaf5" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">如果您在Jetpack迁移期间使用了Android Studio<strong class="js hy">‘重构&gt;迁移到Android x’</strong>工具，那么您的设计支持库依赖项应该已经映射到MDC <code class="du jm jn jo jp b">1.0.0</code>，您可以跳过这一部分。</p><p id="e737" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">否则，您将需要手动更新您的依赖关系:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="ed1d" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">您还需要将设计支持库类的任何用法的包名称空间(在XML布局和代码中)从<code class="du jm jn jo jp b">android.support.design.*</code>更改为<code class="du jm jn jo jp b">com.google.android.material.*</code>。为此，请看一下<a class="ae hu" href="https://developer.android.com/jetpack/androidx/migrate/class-mappings#androidsupportdesign" rel="noopener ugc nofollow" target="_blank">类映射表</a>。</p><h1 id="8c7a" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">改变你的主题</h1><p id="c224" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">您需要确保您的应用程序主题继承自材料组件主题。这同样适用于您项目中可能有的任何附加主题和<a class="ae hu" rel="noopener" href="/androiddevelopers/android-styling-themes-overlay-1ffd57745207">主题覆盖图</a>。</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="8889" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">如果您以前使用的是AppCompat主题变体，那么MDC-Android主题变体将与它们一一对应。在大多数情况下，只需用<code class="du jm jn jo jp b">MaterialComponents</code>替换掉父节点的<code class="du jm jn jo jp b">AppCompat</code>部分。</p><p id="2737" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">请参见下面的完整主题和主题叠加映射表:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><h2 id="9b21" class="ls ku hx bd kv lt lu lv kz lw lx ly ld jz lz ma lf kd mb mc lh kh md me lj mf bi translated">示例更新</h2><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mg"><img src="../Images/b141c62b39680a2bcdc763a870372dde.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*hMzOWVgy9lPvBwrQlxxsqw.gif"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Example app using MDC 1.0.0 and Theme.MaterialComponents.* theme</figcaption></figure><h1 id="031e" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">按钮变化</h1><p id="9963" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">在将我们的依赖项更改为MDC <code class="du jm jn jo jp b">1.0.0</code>并将我们的应用程序主题从<code class="du jm jn jo jp b">Theme.MaterialComponents.*</code>继承之后，我们可以观察到示例应用程序中按钮的一些意外变化。我们已经失去了我们的客户背景！他们现在大多使用绿色强调颜色，并在文本标签中使用更宽的字母间距。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mh"><img src="../Images/7193b8b93f7ab72f99c7a79f87c58515.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u80vUcd_TUAHw4ar1uTfsw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Buttons in MDC 1.0.0</figcaption></figure><p id="bec2" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">为了理解为什么会发生这种情况，我们需要先来看看我们是如何在布局中添加这些按钮的(作为框架<code class="du jm jn jo jp b">&lt;Button&gt;</code> s):</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="a294" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">这是怎么回事？🤔</p><h2 id="fa8c" class="ls ku hx bd kv lt lu lv kz lw lx ly ld jz lz ma lf kd mb mc lh kh md me lj mf bi translated">MDC小部件和自动膨胀</h2><p id="ef2a" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">像AppCompat一样，MDC将在膨胀期用MDC等价物替换<em class="km">一些</em>框架部件。这使得发布新的特性和错误修复成为可能，而不必将所有的声明换成新的类型。这是通过<code class="du jm jn jo jp b"><a class="ae hu" href="https://developer.android.com/reference/androidx/appcompat/app/AppCompatViewInflater" rel="noopener ugc nofollow" target="_blank">AppCompatViewInflater</a></code>的扩展<code class="du jm jn jo jp b"><a class="ae hu" href="https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/theme/MaterialComponentsViewInflater.java" rel="noopener ugc nofollow" target="_blank">MaterialComponentsViewInflater</a></code>完成的。</p><p id="b3c1" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">请参见下面的完整小部件自动膨胀映射表:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="1824" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated"><strong class="js hy"> <em class="km">注:</em></strong><em class="km">MDC中的</em> <code class="du jm jn jo jp b"><em class="km">1.0.0</em></code> <em class="km">只有</em> <code class="du jm jn jo jp b"><em class="km">Button</em></code> <em class="km">被替换了。上面的其他小部件是在库的后续版本中添加的。</em></p><p id="e584" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我们的示例应用之前用<code class="du jm jn jo jp b">&lt;AppCompatButton&gt;</code>替换了框架<code class="du jm jn jo jp b">&lt;Button&gt;</code>，因为我们有一个<code class="du jm jn jo jp b">Theme.AppCompat.*</code>主题。迁移到<code class="du jm jn jo jp b">Theme.MaterialComponents.*</code>主题后，它变成了<code class="du jm jn jo jp b">&lt;MaterialButton&gt;</code>，拥有更新的默认风格。</p><p id="f52c" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">与<code class="du jm jn jo jp b">AppCompatButton</code>不同，<code class="du jm jn jo jp b">MaterialButton</code>直到MDC-Android 的<a class="ae hu" href="https://github.com/material-components/material-components-android/releases/tag/1.2.0-alpha06" rel="noopener ugc nofollow" target="_blank">发布</a> <code class="du jm jn jo jp b"><a class="ae hu" href="https://github.com/material-components/material-components-android/releases/tag/1.2.0-alpha06" rel="noopener ugc nofollow" target="_blank">1.2.0-alpha06</a></code> <a class="ae hu" href="https://github.com/material-components/material-components-android/releases/tag/1.2.0-alpha06" rel="noopener ugc nofollow" target="_blank">才支持自定义背景。这将在下面的<strong class="js hy">“形状”</strong>一节中详细介绍，并提供了解决方法。</a></p><p id="51fb" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我们将暂时保持原样。</p><h1 id="91e7" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">更新到MDC <code class="du jm jn jo jp b">1.1.0</code></h1><p id="cb1e" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">一个<em class="km">批次</em>在<code class="du jm jn jo jp b">1.0.0 </code>和<code class="du jm jn jo jp b">1.1.0</code>之间的MDC中<a class="ae hu" href="https://github.com/material-components/material-components-android/releases/tag/1.1.0" rel="noopener ugc nofollow" target="_blank">发生了变化</a>！新功能包括:</p><ul class=""><li id="b85d" class="mi mj hx js b jt ju jw jx jz mk kd ml kh mm kl mn mo mp mq bi translated">完全的<a class="ae hu" href="https://material.io/design/material-theming/overview.html#material-theming" rel="noopener ugc nofollow" target="_blank">材质主题</a>支持颜色、字体和形状</li><li id="deed" class="mi mj hx js b jt mr jw ms jz mt kd mu kh mv kl mn mo mp mq bi translated"><a class="ae hu" href="https://developer.android.com/guide/topics/ui/look-and-feel/darktheme" rel="noopener ugc nofollow" target="_blank">黑暗主题</a>支持</li><li id="8731" class="mi mj hx js b jt mr jw ms jz mt kd mu kh mv kl mn mo mp mq bi translated">Android 10 <a class="ae hu" href="https://developer.android.com/guide/navigation/gesturenav" rel="noopener ugc nofollow" target="_blank">手势导航</a>插件</li><li id="4ff0" class="mi mj hx js b jt mr jw ms jz mt kd mu kh mv kl mn mo mp mq bi translated">像<a class="ae hu" href="https://material.io/develop/android/components/extended-floating-action-button/" rel="noopener ugc nofollow" target="_blank">扩展FAB </a>、<a class="ae hu" href="https://material.io/develop/android/components/picker/" rel="noopener ugc nofollow" target="_blank">日期选择器</a>、<a class="ae hu" href="https://material.io/develop/android/components/badging/" rel="noopener ugc nofollow" target="_blank">徽章</a>和<a class="ae hu" href="https://material.io/develop/android/components/buttons/#toggle-button" rel="noopener ugc nofollow" target="_blank">切换按钮</a>这样的新部件</li><li id="1ae4" class="mi mj hx js b jt mr jw ms jz mt kd mu kh mv kl mn mo mp mq bi translated">可访问性改进、错误修复等等</li></ul><p id="ffd4" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我们现在准备将我们的MDC依赖版本提升到<code class="du jm jn jo jp b">1.1.0</code>:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="dcdd" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated"><strong class="js hy"> <em class="km">注意:</em> </strong> <em class="km">有些AndroidX的依赖项，比如AppCompat，此时可能也需要更新。虽然没有严格要求，但如果可能，我们建议更新到最新的</em> <a class="ae hu" href="https://developer.android.com/jetpack/androidx/versions/stable-channel" rel="noopener ugc nofollow" target="_blank"> <em class="km">稳定版本</em> </a> <em class="km">。</em></p><h1 id="76bd" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">一些意想不到的变化和常见问题</h1><p id="e198" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">MDC <code class="du jm jn jo jp b">1.1.0</code>更改了一些默认的小部件样式，以更好地符合材料设计指南。但是，升级后，您可能会注意到某些小部件颜色和其他属性发生了一些意想不到的变化。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mg"><img src="../Images/ebe493c2a3b1401e2b211f94b7560f11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*eV3kqckSSt_b5DNyb96mKA.gif"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Example app using MDC 1.1.0</figcaption></figure><p id="a1f1" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">在我们上面的例子中，按钮又一次改变了，文本和图标的颜色也改变了，晶圆厂现在是蓝绿色，文本字段看起来完全不同。哦亲爱的！不要担心，您的主题可能缺少一些重要的MDC属性，同时也有一些您不再需要的AppCompat或framework属性。让我们通过一些常见的迁移场景来理解这些问题。</p><h1 id="39bf" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">文本字段更改</h1><p id="ae89" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">在MDC中，文本字段的默认样式已经更改为一个新的改进版本，该版本得到了用户研究的支持。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mw"><img src="../Images/ad2c960f5d469fb8c48f9b1752afa781.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cuMLW8_CZNFehdU9vsSrRA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Text fields in MDC 1.1.0+</figcaption></figure><p id="42e5" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我们建议坚持使用这个版本，以提高可用性和可配置性。然而，我们意识到这可能不会立即适合您的品牌和设计系统。</p><p id="626f" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">要恢复到传统文本字段，请调整布局中的样式以使用设计支持库版本:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="315c" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">或者，您可以将它设为主题中所有文本字段的默认样式:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mx"><img src="../Images/03dfead05c97468aaaebcfc6768f6eaf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QPtmKjn6l_4bXg5RLkUqGg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Legacy Design Support Library text field</figcaption></figure><h1 id="f98f" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">偏好MDC样式和小部件</h1><p id="f6ca" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">正如我们在上面看到的，以前在设计支持库中的小部件已经成为MDC的一部分。在大多数情况下，会有新的<code class="du jm jn jo jp b">Widget.MaterialComponents.*</code>样式取代<code class="du jm jn jo jp b">Widget.Design.*</code>样式，以及支持附加功能的新属性。虽然选择退出是可能的，但我们建议采用新的MDC风格。</p><p id="a833" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">对于<em class="km">不是</em>设计支持库的一部分的组件，在某些情况下，现在有一个类的材料版本。我们在上面用<code class="du jm jn jo jp b">AppCompatButton</code>和<code class="du jm jn jo jp b">MaterialButton</code>看到了这一点。如果可能的话，我们建议使用MDC类而不是AppCompat或框架等效类。默认情况下，这些小部件使用更新的材质设计指南，并支持全套MDC属性，这些属性支持材质主题化和其他功能。</p><p id="0942" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">您应该考虑以下几种情况:</p><ul class=""><li id="6f5d" class="mi mj hx js b jt ju jw jx jz mk kd ml kh mm kl mn mo mp mq bi translated">布局中直接使用的小部件应该改为MDC版本(参见上面的<strong class="js hy">“MDC小部件和自动膨胀”</strong>部分，了解哪些小部件可以作为框架标签保留)</li><li id="fbe8" class="mi mj hx js b jt mr jw ms jz mt kd mu kh mv kl mn mo mp mq bi translated">任何样式、默认样式和默认样式属性都应该更改为MDC版本</li><li id="8e56" class="mi mj hx js b jt mr jw ms jz mt kd mu kh mv kl mn mo mp mq bi translated">任何以编程方式使用或作为定制类的父类的小部件都应该更改为MDC版本</li></ul><p id="f7ba" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">请参见下面完整的小部件和样式映射表:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="fe0f" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">请务必查看MDC新增部件的完整列表<a class="ae hu" href="https://material.io/develop/android/components" rel="noopener ugc nofollow" target="_blank"> Android组件</a>以及使用文档。</p><h2 id="f7df" class="ls ku hx bd kv lt lu lv kz lw lx ly ld jz lz ma lf kd mb mc lh kh md me lj mf bi translated">示例更新</h2><p id="9bc5" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated"><strong class="js hy"> <em class="km">用MDC版本替换小部件</em> </strong></p><p id="a383" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">在我们的示例中，我们需要更改布局中的一些小部件，以使用MDC版本:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><h1 id="23ec" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">颜色</h1><h2 id="6dd5" class="ls ku hx bd kv lt lu lv kz lw lx ly ld jz lz ma lf kd mb mc lh kh md me lj mf bi translated">新属性</h2><p id="4fb9" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">MDC调色板直接从<a class="ae hu" href="https://material.io/design/color/" rel="noopener ugc nofollow" target="_blank">材料设计颜色系统</a>中提取。</p><p id="88fe" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">作为MDC-Android、AppCompat和框架之间共享历史的结果，颜色属性的结果集包括以下内容:</p><ul class=""><li id="b792" class="mi mj hx js b jt ju jw jx jz mk kd ml kh mm kl mn mo mp mq bi translated">适当命名的框架中的现有属性(例如<code class="du jm jn jo jp b">android:colorBackground</code>)</li><li id="b213" class="mi mj hx js b jt mr jw ms jz mt kd mu kh mv kl mn mo mp mq bi translated">来自AppCompat的已有属性被适当命名(例如<code class="du jm jn jo jp b">colorPrimary</code>和<code class="du jm jn jo jp b">colorError</code>)</li><li id="c95c" class="mi mj hx js b jt mr jw ms jz mt kd mu kh mv kl mn mo mp mq bi translated">MDC引入的新属性(例如<code class="du jm jn jo jp b">colorSurface</code>、<code class="du jm jn jo jp b">colorOnPrimary</code>等)。)</li></ul><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/bded0b59a6cebc9193ac899bba1932a3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kVYqBGyX_ZACfIxzTU1ofQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">MDC color attributes with baseline light theme values</figcaption></figure><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/51e76ab60958e3d8b617f2a54ee940e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YnqriWliMV6nSTZ2N3-GUQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">MDC color attributes with baseline dark theme values</figcaption></figure><p id="adde" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">MDC小部件使用这些属性来给它们的背景、文本、图标等着色。了解哪些小部件使用哪些颜色需要检查<a class="ae hu" href="https://github.com/material-components/material-components-android" rel="noopener ugc nofollow" target="_blank">源代码</a>中的默认小部件样式。</p><p id="0903" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">还有一些来自AppCompat和框架的颜色仍然存在，但不再适用于这个新系统。主题尽最大努力为仍然依赖它们的小部件移植这些旧属性，例如。</p><pre class="kn ko kp kq fd my jp mz na aw nb bi"><span id="da0a" class="ls ku hx jp b fi nc nd l ne nf">&lt;item name="colorAccent"&gt;?attr/colorSecondary&lt;/item&gt;</span></pre><p id="3df2" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">但是，您应该考虑不推荐使用这些属性；要么使用更合适的MDC属性，要么逐步淘汰它们。</p><p id="06bb" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">请参见下面的全色属性映射表:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><h2 id="e35e" class="ls ku hx bd kv lt lu lv kz lw lx ly ld jz lz ma lf kd mb mc lh kh md me lj mf bi translated">示例更新</h2><p id="492e" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated"><strong class="js hy"> <em class="km">更新为新的颜色属性</em> </strong></p><p id="223b" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">在我们的示例中，我们需要更新应用程序主题来覆盖首选颜色属性:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="6e97" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated"><strong class="js hy"> <em class="km">注意:</em> </strong> <em class="km">我们并没有覆盖所有的颜色属性，而是依靠默认的</em><code class="du jm jn jo jp b"><em class="km">colorSurface</em></code><em class="km"/><code class="du jm jn jo jp b"><em class="km">colorError</em></code><em class="km">等，这是完全可以接受的。我们也没有指定一个黑暗的主题调色板。</em></p><p id="d8a3" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated"><strong class="js hy"> <em class="km">在适当的地方使用</em> </strong>颜色属性</p><p id="e95f" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我们还应该从使用<code class="du jm jn jo jp b">@color</code>切换到我们包含的按钮文本颜色的一个新的“on”颜色属性:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mg"><img src="../Images/5c0e4f7d609c8f631f92c0a7869f7a9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*fpeweFxGuDXJY7fpsDJpPw.gif"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Example app with updated MDC color attributes (fixed FAB color)</figcaption></figure><h1 id="a42f" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">排印</h1><h2 id="af7c" class="ls ku hx bd kv lt lu lv kz lw lx ly ld jz lz ma lf kd mb mc lh kh md me lj mf bi translated">新的<code class="du jm jn jo jp b">TextAppearance</code>风格/属性</h2><p id="ea9a" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">MDC类型标尺直接从<a class="ae hu" href="https://material.io/design/typography/" rel="noopener ugc nofollow" target="_blank">材料设计类型系统</a>中提取。</p><p id="ab9e" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">引入了一组新的<code class="du jm jn jo jp b">TextAppearance.MaterialComponents.*</code>样式和相应的<code class="du jm jn jo jp b">textAppearance*</code>主题属性，它们取代了现有的AppCompat / framework样式。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/aa8cd0c2faeb1da59d75ab4bfe97c11f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N0ZxFB7on0YqmHo6WW0RhQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">MDC type attributes</figcaption></figure><p id="fd61" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">MDC小部件使用这些属性来样式化文本。要知道哪些部件使用哪种类型的标尺，需要检查<a class="ae hu" href="https://github.com/material-components/material-components-android" rel="noopener ugc nofollow" target="_blank">源代码</a>中的默认部件样式。</p><p id="5935" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">请参见下面的完整类型样式和属性映射表:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><h2 id="cb95" class="ls ku hx bd kv lt lu lv kz lw lx ly ld jz lz ma lf kd mb mc lh kh md me lj mf bi translated">示例更新</h2><p id="06c7" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated"><strong class="js hy"> <em class="km">更新为新类型属性</em> </strong></p><p id="e0da" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">在我们的示例中，我们需要更新布局中卡片内的<code class="du jm jn jo jp b">TextView</code> s，以使用首选类型属性:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="14d0" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated"><strong class="js hy"> <em class="km">用字体系列</em> </strong>自定义字体刻度</p><p id="bb18" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我们还可以选择覆盖应用主题中的字体比例，使用自定义字体系列，通过Android Studio下载<a class="ae hu" href="https://developer.android.com/guide/topics/ui/look-and-feel/fonts-in-xml" rel="noopener ugc nofollow" target="_blank"> XML </a>或<a class="ae hu" href="https://developer.android.com/guide/topics/ui/look-and-feel/downloadable-fonts" rel="noopener ugc nofollow" target="_blank">可下载的</a>字体:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="082e" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated"><strong class="js hy"> <em class="km">注意:</em> </strong> <em class="km">对于这个例子，我们只覆盖了一些类型刻度。如果您正在使用自定义字体，我们建议您覆盖</em> <a class="ae hu" href="https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/typography/res/values/attrs.xml" rel="noopener ugc nofollow" target="_blank"> <em class="km">所有字体比例</em> </a> <em class="km">以保持品牌一致性。</em></p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mg"><img src="../Images/307578f2e08d5be0d26f758d52f29cc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*LjcjpgroEFwnjcMLsldHMQ.gif"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Example app with updated MDC type attributes (updated font family)</figcaption></figure><h1 id="3188" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">形状</h1><h2 id="969c" class="ls ku hx bd kv lt lu lv kz lw lx ly ld jz lz ma lf kd mb mc lh kh md me lj mf bi translated"><code class="du jm jn jo jp b">ShapeAppearance</code>风格/属性</h2><p id="4805" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated"><a class="ae hu" href="https://material.io/design/shape/" rel="noopener ugc nofollow" target="_blank">材料设计形状系统</a>是一种对MDC部件的边角进行处理的方法，分为小型、中型和大型组件类别。</p><p id="3ef4" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">这采用了Android <code class="du jm jn jo jp b">ShapeAppearance.*</code>风格的形式，带有相应的主题属性。它们包括一个<code class="du jm jn jo jp b">cornerFamily</code> — <code class="du jm jn jo jp b">rounded</code>或<code class="du jm jn jo jp b">cut</code> —和<code class="du jm jn jo jp b">cornerSize*</code>作为尺寸。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/f2550eba16f41830b203bc0a61600ea5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FA0gpxLSPvZygFTeJd_JMQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">MDC shape attributes</figcaption></figure><p id="1ce3" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">MDC小部件使用这些属性来设计它们的背景。要知道哪些小部件适用于哪些形状类别，需要检查<a class="ae hu" href="https://github.com/material-components/material-components-android" rel="noopener ugc nofollow" target="_blank">源代码</a>中的默认小部件样式。</p><h2 id="8b92" class="ls ku hx bd kv lt lu lv kz lw lx ly ld jz lz ma lf kd mb mc lh kh md me lj mf bi translated">小部件背景</h2><p id="5b22" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">实现这个功能的类是<code class="du jm jn jo jp b"><a class="ae hu" href="https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/shape/MaterialShapeDrawable.java" rel="noopener ugc nofollow" target="_blank">MaterialShapeDrawable</a></code>。默认情况下，所有MDC小部件都使用这个drawable作为背景，您也可以考虑将它用于自定义视图。它处理形状主题，背面阴影渲染，黑暗主题海拔覆盖和更多。</p><p id="553e" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">因此，我们建议不要在MDC小部件上使用带有定制XML drawables的<code class="du jm jn jo jp b">android:background</code>，因为这将覆盖<code class="du jm jn jo jp b">MaterialShapeDrawable</code>。您可能会注意到，大多数MDC小部件的默认样式指定</p><pre class="kn ko kp kq fd my jp mz na aw nb bi"><span id="0ac7" class="ls ku hx jp b fi nc nd l ne nf">&lt;item name="android:background"&gt;@null&lt;/item&gt;</span></pre><p id="8ff2" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">为了避免这种情况。相反，更喜欢使用<code class="du jm jn jo jp b">shapeAppearance</code> / <code class="du jm jn jo jp b">shapeAppearanceOverlay</code>和<code class="du jm jn jo jp b">backgroundTint</code>属性来调整背景形状和颜色。</p><p id="5420" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">然而，也有例外:</p><ul class=""><li id="1848" class="mi mj hx js b jt ju jw jx jz mk kd ml kh mm kl mn mo mp mq bi translated">如上所述，<code class="du jm jn jo jp b">MaterialButton</code> <a class="ae hu" href="https://issuetracker.google.com/issues/127420890" rel="noopener ugc nofollow" target="_blank">忽略了</a> <code class="du jm jn jo jp b"><a class="ae hu" href="https://issuetracker.google.com/issues/127420890" rel="noopener ugc nofollow" target="_blank">android:background</a></code>直到<a class="ae hu" href="https://github.com/material-components/material-components-android/releases/tag/1.2.0-alpha06" rel="noopener ugc nofollow" target="_blank">发布MDC-Android </a>的 <code class="du jm jn jo jp b"><a class="ae hu" href="https://github.com/material-components/material-components-android/releases/tag/1.2.0-alpha06" rel="noopener ugc nofollow" target="_blank">1.2.0-alpha06</a></code> <a class="ae hu" href="https://github.com/material-components/material-components-android/releases/tag/1.2.0-alpha06" rel="noopener ugc nofollow" target="_blank">。如果您在使用早期版本的库时需要此功能，我们建议您在布局中明确使用<code class="du jm jn jo jp b">AppCompatButton</code>。</a></li><li id="d620" class="mi mj hx js b jt mr jw ms jz mt kd mu kh mv kl mn mo mp mq bi translated"><code class="du jm jn jo jp b">MaterialShapeDrawable</code> <a class="ae hu" href="https://issuetracker.google.com/issues/134526677" rel="noopener ugc nofollow" target="_blank">不支持渐变</a>。如果你的品牌要求这样，使用<code class="du jm jn jo jp b">android:background</code>和<code class="du jm jn jo jp b">GradientDrawable</code>是你最好的选择。</li></ul><h2 id="ebac" class="ls ku hx bd kv lt lu lv kz lw lx ly ld jz lz ma lf kd mb mc lh kh md me lj mf bi translated">示例更新</h2><p id="0b2d" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated"><strong class="js hy"> <em class="km">删除不支持形状主题化的背景属性</em> </strong></p><p id="c119" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">在我们的示例中，我们可以删除一些现在由形状主题化处理的小部件属性:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="56dd" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated"><strong class="js hy"> <em class="km">用角族和尺寸</em> </strong>自定义形状</p><p id="b3c7" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我们还可以选择在应用主题中覆盖形状样式，以表达我们的品牌:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mg"><img src="../Images/6c3d1f8c0fb0c358d85f148e3723b722.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*mZLoSGkcmu-g2NEJO3LYvg.gif"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Example app with updated MDC shape attributes (updated corner radii)</figcaption></figure><p id="eb8a" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated"><strong class="js hy"> <em class="km">恢复按钮自定义渐变背景</em> </strong></p><p id="b648" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">最后，下面是如何通过显式使用<code class="du jm jn jo jp b">AppCompatButton</code>(以及新的MDC按钮类型主题化属性)来恢复我们的按钮的自定义渐变背景:</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><p id="116d" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">如果你使用的是MDC-Android <code class="du jm jn jo jp b">1.2.0-alpha-06</code>(或更高版本)，那么你可以依靠<code class="du jm jn jo jp b">MaterialButton</code>尊重<code class="du jm jn jo jp b">android:background</code>。请记住，您可能需要清除<code class="du jm jn jo jp b">backgroundTint</code>(在<code class="du jm jn jo jp b">Widget.MaterialComponents.Button</code>默认样式中设置为<code class="du jm jn jo jp b">colorPrimary</code>):</p><figure class="kn ko kp kq fd hj"><div class="bz dy l di"><div class="lq ks l"/></div></figure><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mh"><img src="../Images/4a067eec990f20a0cce29a3e0ccc4e32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5Ze7U46nbXTjx4NVFkKlPA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Button with restored custom gradient background</figcaption></figure><h1 id="54aa" class="kt ku hx bd kv kw kx ky kz la lb lc ld jd le je lf jg lg jh lh jj li jk lj lk bi translated">下一步是什么？</h1><p id="e716" class="pw-post-body-paragraph jq jr hx js b jt ll iy jv jw lm jb jy jz ln kb kc kd lo kf kg kh lp kj kk kl ha bi translated">我们已经成功地完成了从设计支持库到MDC <code class="du jm jn jo jp b">1.0.0</code>并最终到MDC <code class="du jm jn jo jp b">1.1.0</code>的迁移过程。我们已经移植了AppCompat的用法，并且使用了材料主题。</p><p id="d78d" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我们鼓励您尝试MDC中不属于设计支持库的新部件和特性。</p><p id="8032" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">MDC的下一个特性版本——<code class="du jm jn jo jp b">1.2.0</code>——正在进行中，在撰写本文时已经发布了多个alpha版本。令人兴奋的新更新包括<code class="du jm jn jo jp b"><a class="ae hu" href="https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/slider/Slider.java" rel="noopener ugc nofollow" target="_blank">Slider</a></code>和<code class="du jm jn jo jp b"><a class="ae hu" href="https://github.com/material-components/material-components-android/blob/master/lib/java/com/google/android/material/imageview/ShapeableImageView.java" rel="noopener ugc nofollow" target="_blank">ShapeableImageView</a></code>组件，以及第一个Android版本的<a class="ae hu" href="https://material.io/design/motion/the-motion-system.html" rel="noopener ugc nofollow" target="_blank">材料运动系统</a>！</p><p id="2e17" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">一如既往，我们鼓励您在GitHub上提交<a class="ae hu" href="https://github.com/material-components/material-components-android/issues/new?assignees=&amp;labels=bug&amp;template=bug_report.md&amp;title=%5BComponent+name%5D+Short+description+of+issue" rel="noopener ugc nofollow" target="_blank">错误报告</a>和<a class="ae hu" href="https://github.com/material-components/material-components-android/issues/new?assignees=&amp;labels=feature+request&amp;template=feature_request.md&amp;title=%5BComponent+name%5D+Short+description+of+request" rel="noopener ugc nofollow" target="_blank">特性请求</a>。另外，请务必查看我们的Android <a class="ae hu" href="https://github.com/material-components/material-components-android-examples" rel="noopener ugc nofollow" target="_blank">配套示例应用</a>和<a class="ae hu" href="https://github.com/material-components/material-components-android-examples/tree/develop/MaterialThemeBuilder" rel="noopener ugc nofollow" target="_blank">构建材料主题</a>。</p></div><div class="ab cl ng nh go ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ha hb hc hd he"><p id="5f16" class="pw-post-body-paragraph jq jr hx js b jt ju iy jv jw jx jb jy jz ka kb kc kd ke kf kg kh ki kj kk kl ha bi translated">我们非常鼓励迁移到MDC <code class="du jm jn jo jp b">1.1.0</code>(或更高版本)。如果你已经成功完成了迁移，或者在迁移过程中遇到了困难，请在下面留下评论，或者通过Twitter<a class="ae hu" href="https://twitter.com/materialdesign" rel="noopener ugc nofollow" target="_blank">@ material design</a>和<a class="ae hu" href="https://twitter.com/AndroidDev" rel="noopener ugc nofollow" target="_blank"> @AndroidDev </a>联系我们。</p></div></div>    
</body>
</html>