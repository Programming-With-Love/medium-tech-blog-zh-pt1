# 云上的传统 SFTP

> 原文：<https://medium.com/walmartglobaltech/traditional-sftp-on-cloud-88290d24e11a?source=collection_archive---------6----------------------->

## 不得其所的人

![](img/828c30a0f786ab7f1666a6e6dd11f4e6.png)

在当今的技术世界，云计算无处不在。谷歌和微软等供应商正在发布产品，这些产品具有使企业变得更加精简、高效和灵活的特性和功能。有了这些好处，几乎所有的企业都打算迁移到云，以提高竞争力。

然而，从传统技术栈向云的迁移伴随着它自己的包袱，我们需要放下它。本白皮书详细介绍了一种传统技术—文件传输协议(FTP)和安全文件传输协议(SFTP)。

**FTP & SFTP**

起源于 70 年代早期的 FTP 是一种标准的网络协议，用于在客户机和服务器之间传输文件。这后来被 SSL 保护，从而创建了 SFTP。对于本文的其余部分，将仅参考 SFTP，因为考虑到安全方面，FTP 不是一个选项。

从架构上讲，SFTP 要求服务器始终可用，存储空间预先分配&在会话期间保持有状态连接。它在灾难恢复情况和备份方面的能力也有限。当谈到云计算时，这些基础知识本身就不合适。

**云**

**韧性**

众所周知，由于技术故障、物理中断或自然灾害，系统必定会发生故障。云计算为我们提供了不同级别的容错能力——区域、可用性区域、可用性集合等，具体取决于提供商。

在云机器上安装传统的 SFTP 会迫使用户只能在一台虚拟机上运行，从而排除了灾难恢复的可能性。由于数据比金钱更重要，数据丢失对企业来说可能是灾难性的。

**无服务器计算**

云计算为我们提供了‘按执行付费’的便利。这指的是一种支付模式，只有当一段代码(或功能)执行时，客户才需要付费。这是通过在运行时提供必要的计算和资源来完成的，之后资源被返回到池中。

对传统 SFTP 服务器的资源使用图的分析将显示，资源偶尔被使用(在文件传输期间)，在剩余的时间内处于空闲状态，因此理论上符合无服务器的概念，但实际上不符合。这是因为，按照设计，SFTP 服务器(如前所述)需要始终保持运行状态。因此增加了操作成本。

**弹性**

在处理云环境中增加的负载时，弹性是一个关键特性，尤其是在特定的(通常)短期内。这使得应用程序即使在负载出现峰值时也能正常运行。

对于云上的传统 SFTP 服务器，这样的弹性扩展是不可能的。虽然这种情况并不常见，但是当出现负载高峰时，服务器的性能将完全取决于可用的资源。

**成本**

成本是企业采用云计算的最大驱动因素之一，存储空间是成本的直接来源。对于传统的 SFTP，需要专用的存储空间。最小存储空间的大约成本是 150 美元/月(大约),相比之下，blob 存储成本大约是 22 美元/月(大约),因此，大约多 10 倍。【https://azure.microsoft.com/en-in/pricing/calculator/[的费用](https://azure.microsoft.com/en-in/pricing/calculator/)

此外，应用程序团队需要将备份逻辑与备份存储结合在一起。与 Azure storage 以象征性成本提供的各种备份选项相比，这将进一步提高成本。

因此，很明显，当使用云进行文件存储和访问时，使用存储帐户比传统的磁盘存储要经济得多。尽管如此，每次访问文件存储时都会收取费用。

**维修**

云计算给企业带来的一个重要好处是，他们的应用程序团队可以专注于核心逻辑，而不是基础设施、运行时等。这些“托管”产品不仅提高了 TTM，还抽象了风险。

传统的云机器上的 SFTP 将迫使我们重新投入到 SFTP 服务器、SSH 密钥、连接等的维护中。维护访问控制、解决问题等也是应用程序团队的职责之一。

**结论**

到目前为止，这些章节强调了传统的 SFTP 并不是云的理想选择。事实上，云计算环境提供的大部分优势和附加值都被传统的 SFTP 抵消了。

由于仍然存在需要在客户端-服务器环境中传输文件的需求，云供应商已经推出了 Azure SFTP 网关等托管产品。这些产品抓住了 FTP 的精髓，同时利用了云计算提供的优势。

如前所述，文件传输只需要偶尔使用资源。因此，它成为基于容器的 SFTP 服务器(基于 ACI 的解决方案)的主要用例，可以根据需要进行调试和销毁。

截至本文发布之日，Strati 不支持任何云上的 SFTP 选项，并建议将应用程序重新设计为云原生的。从长远来看，经济和运营收益以及降低的风险将超过改造遗留解决方案的成本。