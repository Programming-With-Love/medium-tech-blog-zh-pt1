<html>
<head>
<title>3 Lessons Learned From Implementing Chaos Engineering at Enterprise</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在企业中实施混沌工程的3个经验教训</h1>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/3-lessons-learned-from-implementing-chaos-engineering-at-enterprise-28eb3ffecc57?source=collection_archive---------2-----------------------#2020-01-16">https://medium.com/capital-one-tech/3-lessons-learned-from-implementing-chaos-engineering-at-enterprise-28eb3ffecc57?source=collection_archive---------2-----------------------#2020-01-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/66e80bbd9bc3a69ce9c3ed84123c92e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eu7639hY3T1AZ2gi"/></div></div></figure><p id="6790" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">自从网飞在2012年通过他们的<a class="ae jn" href="https://github.com/Netflix/SimianArmy" rel="noopener ugc nofollow" target="_blank">猿军</a>工具集引入混沌工程以来，诱导故障作为一种预防手段的想法已经成为云原生分布式系统的首选弹性技术之一。单独使用性能和压力测试是遗留的技术，不足以发现全面的弱点；混沌工程通过进行一系列旨在破坏稳定状态的科学实验，发展并补充了这一观点。结果，暴露了脆弱的假设，识别了弱点，并且通过解决这些弱点获得了对系统可靠性的信心。</p><p id="a4ff" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">作为一名企业弹性架构师，我提倡使用混沌工程作为一种技术来提高我们高度分布式云原生系统的可靠性。通过与众多交付团队合作，并支持我们的混沌工程能力的发展，我学到了几个教训，详述如下。</p><h1 id="0ec6" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">#1:工作需要正确的心态</h1><p id="4bd6" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">如果做得好的话，混沌工程可以让人们对系统的行为有更深刻的理解。可预测的结果使自动化和流程改进直接有助于系统的可靠性。假设已经过测试，并通过确凿的证据进行了验证，失败的根本原因已经确定并得到解决，以防止将来出现问题。</p><p id="084c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此外，在复杂的云本地分布式系统中，它有助于突出依赖性链中的弱点，并克服或解决它们，以向最终用户提供更好的体验。根据我的经验，通常会对下游或上游依赖关系的可靠性做出假设，包括应用程序内部和外部的依赖关系。混沌工程允许证明他们的真实性。难怪像第一资本和网飞这样的公司会实施混沌工程！</p><p id="aebf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">有了所有这些好处，有时很容易陷入这样的思维定势，即通过识别和修正所有结果，目标是100%的可靠性。然而，这是一个误导性的目标，真正的目标应该是在执行这些测试所需的时间和人力投入与实现适当的服务水平目标(SLO)之间取得平衡。规划和执行混沌工程需要时间、人力和工具的投入。这项投资需要与系统的输出和关键程度进行权衡。</p><h1 id="d1bd" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">#2:失败的原因需要广泛的报道</h1><p id="d891" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">做好混沌工程需要设计良好的实验，涵盖广泛的故障模式。这些实验应该基于系统的故障模式分析。工具倾向于关注的一组常见故障模式包括:</p><ul class=""><li id="8f8c" class="kr ks hh ir b is it iw ix ja kt je ku ji kv jm kw kx ky kz bi translated"><strong class="ir hi">资源— </strong>最大限度地利用CPU、内存等。</li><li id="5762" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated"><strong class="ir hi">网络</strong> —带宽、节流、延迟等。</li><li id="b1cb" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated"><strong class="ir hi">依赖关系</strong> —关键应用程序和基础架构依赖关系。</li><li id="ba56" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated"><strong class="ir hi">应用/进程</strong> —代码、设备、进程、容器/服务器、数据库等故障。</li></ul><p id="444b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然而，尽管在这些领域进行实验是有价值的，但这还不够。故障场景还应解决以下问题，因为任何相关事件也会破坏稳定状态:</p><ul class=""><li id="25df" class="kr ks hh ir b is it iw ix ja kt je ku ji kv jm kw kx ky kz bi translated"><strong class="ir hi">环境</strong> —诸如IP使用、故障排除所需的访问向量、环境过程等条件。例如，需要测试自我修复自动化，以确保它所依赖的任何组件在需要时都是可用的。</li><li id="1a03" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated"><strong class="ir hi">安全</strong> —合规性变量、安全违规等。例如，更新证书的信任链这一看似良性的变化可能会产生意想不到的后果。</li><li id="1890" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated"><strong class="ir hi">人物</strong> —主题专家、角色转换等。例如，依靠人工知识来排除故障和响应事件，而不是通过自助服务共享知识，可能会导致瓶颈并增加平均修复时间(MTTR)。</li><li id="df2c" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated"><strong class="ir hi">流程</strong> —事件响应、建立管道、可用性假设等。例如，依赖很少使用的恢复过程需要定期测试以确保该过程是有效的。</li></ul><p id="80c1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此外，虽然一个故障条件可能会导致故障，但在现实生活中，可能会同时出现多种故障。<em class="lf">一次测试一个失败事件是好的，测试多个失败事件更好。</em>这种类型的测试可以让我们更好地理解交互和级联故障，从而确定如何应对它们。此外，确保有回滚功能，以防在执行实验时出现问题(不仅仅是失败本身)。考虑到设计和执行这些测试需要时间和精力，值得注意的是从小规模开始并随着时间的推移而发展是一个好的策略。</p><h1 id="dc7b" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">#3:先决条件是支持可观察性</h1><p id="4bf8" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">理解混沌工程实验的影响首先需要理解稳态行为，这意味着需要一个监控基线。对于高度分布式的云原生系统，监控可能非常困难和复杂。随着时间的推移，实现可观察性并建立行为基线不是一件容易的事。混沌工程的输出应该是监视器、日志、跟踪和警报的调整。然而，在基线建立之前，很难理解测试的影响，从而知道采取什么行动。</p><p id="ffe2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">应根据应用程序版本建立基准，并要求在一段规定的时间内保持稳定而不发生变化。这允许对特定代码发布或变更进行更有效的影响分析，从而有助于混沌工程实验的结果。</p><h1 id="f065" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">结论</h1><p id="ace6" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">将混沌工程作为应用程序交付的正常部分有很多好处。它允许在负面影响之前对潜在问题进行主动补救，并增加对系统可靠性的信心。为了有效地运用混沌工程，需要对故障模式和级联故障有广泛的理解，以及对系统行为有明确的监控基线。对混沌工程的投资不是微不足道的，因此应该用于最有影响力的结果。</p></div><div class="ab cl lg lh go li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ha hb hc hd he"><h2 id="4f23" class="ln jp hh bd jq lo lp lq ju lr ls lt jy ja lu lv kc je lw lx kg ji ly lz kk ma bi translated">相关文章</h2><ul class=""><li id="fe25" class="kr ks hh ir b is km iw kn ja mb je mc ji md jm kw kx ky kz bi translated"><a class="ae jn" rel="noopener" href="/capital-one-tech/5-steps-to-getting-your-app-chaos-ready-capital-one-a5b7b3cb8e09">让你的应用混沌就绪的5个步骤</a></li><li id="1748" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated"><a class="ae jn" rel="noopener" href="/capital-one-tech/continuous-chaos-introducing-chaos-engineering-into-devops-practices-75757e1cca6d">持续混沌——将混沌工程引入DevOps实践</a></li><li id="8430" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated"><a class="ae jn" rel="noopener" href="/capital-one-tech/embrace-the-chaos-engineering-203fd6fc6ff7">拥抱混沌……工程——混沌工程简介</a></li><li id="ee9c" class="kr ks hh ir b is la iw lb ja lc je ld ji le jm kw kx ky kz bi translated"><a class="ae jn" rel="noopener" href="/capital-one-tech/4-real-world-scenarios-that-read-like-chaos-engineering-experiments-8dbf40c5f247"> 4个真实世界的场景，读起来像混沌工程实验</a></li></ul></div><div class="ab cl lg lh go li" role="separator"><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll lm"/><span class="lj bw bk lk ll"/></div><div class="ha hb hc hd he"><p id="b57c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="lf">披露声明:2020资本一。观点是作者个人的观点。除非本帖中另有说明，否则Capital One不隶属于所提及的任何公司，也不被这些公司认可。使用或展示的所有商标和其他知识产权是其各自所有者的财产。</em></p></div></div>    
</body>
</html>