<html>
<head>
<title>Show Modal Dialog in Javascript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Javascript中显示模式对话框</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/show-modal-dialog-in-javascript-216ad291fd5?source=collection_archive---------1-----------------------#2018-02-01">https://medium.com/quick-code/show-modal-dialog-in-javascript-216ad291fd5?source=collection_archive---------1-----------------------#2018-02-01</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="710c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">看来Javascript世界发展的越来越快了。有改进语言的新功能，新标准，如ES6 …但也有一些不再存在的功能。这就是<strong class="ig hi"> window.showModalDialog </strong>函数的情况。</p><p id="fc67" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我在一个旧项目中工作，主要的网络浏览器是Internet Explorer 8(我知道，我在史前工作！！！)现在，客户希望将整个项目迁移到新版本的浏览器(主要是Mozilla和Chrome)</p><p id="4092" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如我之前所说，在新版本的浏览器中，<strong class="ig hi"> window.showModalDialog </strong>功能已经消失，因此，我不得不寻找其他替代功能。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><p id="0c01" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">根据<a class="ae jj" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/showModalDialog" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jk">MDN</em></strong></a><strong class="ig hi"><em class="jk">，</em></strong><em class="jk"/><strong class="ig hi"><em class="jk">window . showmodaldialog</em></strong><em class="jk">创建并显示一个包含指定HTML文件</em>的模态对话框。Sintax非常简单:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/c32caf26cfa17aa09cc29978170b605c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Jq4m9ZUp0HWmqu884ek85Q.png"/></div></div></figure><p id="1b71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如你所见，函数需要一个URL(显然！！！)<strong class="ig hi">但是，</strong>如果你愿意(是可选的)，它也可以带一些参数(和选项，但在这种情况下，这无关紧要)，你可以在新窗口(模态对话框)中得到</p><p id="8c88" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看一个例子:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jx"><img src="../Images/2295af43a7300dff6524f2ff8a0b78ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*11-dJ1ennwbDFMacjQtTLg.png"/></div></div><figcaption class="jy jz et er es ka kb bd b be z dx">In the main window, the function <strong class="bd kc">window.showModalDialog </strong>is called, with some parameters (“parameter1”)</figcaption></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kd"><img src="../Images/86d3da2912c1ec1f5a2e5ec3a242f06d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SF54Oezdr9TgFDX1vKo3vQ.png"/></div></div><figcaption class="jy jz et er es ka kb bd b be z dx">In the modal dialog box opened, you can get the arguments (in this case “parameter1”) and return a value</figcaption></figure><figure class="jm jn jo jp fd jq er es paragraph-image"><div class="er es ke"><img src="../Images/23c27edc36f10ec91d8e7b9c02aa4150.png" data-original-src="https://miro.medium.com/v2/resize:fit:1206/format:webp/1*z-5ayu6pq5ZLzuPlvN88Yg.png"/></div><figcaption class="jy jz et er es ka kb bd b be z dx">So, you get something like this</figcaption></figure><p id="2793" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦你知道它是如何工作的，让我们把注意力集中在真正的问题上(记住这个特性已经过时了，在新版本的浏览器中已经被删除了，比如Chrome或者Firefox)</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><p id="b5f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你在Firefox中研究“<strong class="ig hi"> window.showModalDialog </strong>或者在Chrome中研究“<strong class="ig hi"> window.showModalDialog </strong>”(我的项目不支持Safari。由于这个原因，Safari没有出现在我的研究中)，你会发现“<a class="ae jj" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/showModalDialog" rel="noopener ugc nofollow" target="_blank"> <em class="jk">这个方法在Chrome 43中被移除，而Firefox 56</em></a><em class="jk">”</em></p><p id="aa73" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">寻找不同选择的第一步是知道你需要什么。例如，如果你在许多HTML或JS文件中使用这个函数，你将需要完全相同的函数，具有相同的名称和相同的参数(你不必寻找所有的调用并改变它们。你可以变得疯狂！！！)</p><p id="3300" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这种情况下，您需要一个聚合填充。<a class="ae jj" href="https://en.wikipedia.org/wiki/Polyfill_(programming)" rel="noopener ugc nofollow" target="_blank"><em class="jk">" A</em><strong class="ig hi"><em class="jk">poly fill</em></strong><em class="jk">是在不支持特性</em> </a> <em class="jk">的web浏览器上实现特性的代码。听起来很完美，不是吗？但是……我们怎样才能做到呢？答案很简单……然而，实现起来有点棘手。</em></p><p id="5dfe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最好的方法是使用<a class="ae jj" href="https://www.w3schools.com/tags/tag_dialog.asp" rel="noopener ugc nofollow" target="_blank"> &lt;对话框&gt; HTML5元素</a>。像往常一样，这个元素的主要问题是与web浏览器的兼容性。如今，Chrome是唯一支持它的浏览器。<a class="ae jj" href="https://developer.microsoft.com/en-us/microsoft-edge/platform/status/dialogelementformodals/" rel="noopener ugc nofollow" target="_blank">微软Edge </a>已经在考虑这个元素，而<a class="ae jj" href="https://caniuse.com/#feat=dialog" rel="noopener ugc nofollow" target="_blank"> Firefox </a>已经在新版本中发布了这个元素(从版本57开始)，但是要使用这个元素，你必须在about:config中启用“dom.dialog_element.enabled”。</p><p id="3342" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要解决这个问题，您可以重写函数:</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es kf"><img src="../Images/0daacd4eefac04bcce1cdc6eba22dfcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tDtGjEDmQ7V8s-dW4EWCVg.png"/></div></div></figure><p id="af1f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过这种方式，如果你使用Internet Explorer 8、Firefox或Chrome，你将执行真正的功能或新的实现(这种替代方案的真正问题是Microsoft Edge。在我的例子中，客户认为没什么大不了的)</p><p id="6e9f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你认为这种选择是有趣的，你必须检查<a class="ae jj" href="https://github.com/niutech/showModalDialog" rel="noopener ugc nofollow" target="_blank"> niutech实现</a>。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><p id="a69b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你不在乎函数的名字和参数，你可以找到更多的选择。强烈推荐2021年<a class="ae jj" href="https://blog.coursesity.com/best-ecmascript-courses/" rel="noopener ugc nofollow" target="_blank">学Javascript </a>编程。</p><p id="11cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你寻找“窗口模态”，你会发现Bootstrap是最著名的显示模态对话框的框架。主要问题是与旧的web浏览器(例如，Internet Explorer 8)的兼容性，但是如果您使用1.9.1版本的JQuery，它也可以工作。</p><p id="c4ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除了Bootstrap，您还可以寻找其他库或其他实现。我没有找到足够好的。有一些很好的实现，如JQueryUI Dialog，但它没有提供与showModalDialog相同的功能(您必须考虑到您可以使用iframe导航到URL，并显示带有Boostrap的模态窗口)</p><p id="2ace" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如你所看到的，除了window.showModalDialog之外，没有任何好的替代品。它<strong class="ig hi"> </strong>停止代码执行，直到对话关闭，对话结果返回给调用者。出于这个原因，我们必须重构代码，使用回调函数(或者可能是承诺)来代替。</p></div></div>    
</body>
</html>