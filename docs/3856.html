<html>
<head>
<title>Karate API Testing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">空手道API测试</h1>
<blockquote>原文：<a href="https://medium.com/globant/karate-api-testing-9843bbe8abe?source=collection_archive---------2-----------------------#2022-04-11">https://medium.com/globant/karate-api-testing-9843bbe8abe?source=collection_archive---------2-----------------------#2022-04-11</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="ff6b" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">概观</h1><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/cfcc3787f91f0dda64c8bd8cdecbce05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*iugdJRDaksdSTfyI"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Photo by <a class="ae js" href="https://unsplash.com/@les_elizabethj?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Leslie Jones</a> on <a class="ae js" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="347a" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">API测试可能是所有测试人员都应该具备的最常见的技能之一；这个想法是为了测试我们的后端系统，特别是当“现代”架构正在微服务中设计和开发，并且遗留系统正在迁移到微服务和微前端系统时。</p><p id="6d53" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">通常，当我们谈到后端测试，特别是API测试时，我们可以找到许多方法来实现这个测试过程，并且几乎所有的选项都包含手动方法。API可以有不同的开发方法(get、post、delete等。)这一点我们必须核实。例如，我们测试我们向后端生成的请求，测试响应，并比较信息是否正确。</p><p id="90a7" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">本文旨在通过使用空手道找到另一个测试后端的选项，并在我们想要实现API自动化测试方法时从该工具中获得最佳收益。</p><p id="1db3" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">也许，你会问自己，为什么我们要用空手道？当然，答案取决于应用程序的上下文、技术、架构等。然而，假设您对自动化您每天都在做的相同测试感兴趣；在这种情况下，您首先需要验证所有API的测试环境(冒烟测试)，或者如果您有需要验证环境并首先检查每个API响应的连续发布，建议您应该自动测试那些场景；空手道可以是处理它的一个很好的选择，我可以提到很多很多我们可以使用空手道的情况，但是要注意的最重要的方面是空手道真的很容易配置并且使用起来非常友好，特别是如果作为一个测试人员我们没有很多编程技能的话。</p><p id="182f" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">API测试用例非常具体，它们通常被实现来与请求和响应进行交互；开发人员和QA只在必要的地方和时候测试它们，但是几乎没有人有好的实践来实现自动化的连续测试来覆盖这种必要性；正如我们所知，一个API可能会因为不同的原因而频繁更改，有时我们并没有意识到这些更改，因为我们没有及时得到有关这些更改的通知，如果我们不得不在API发生更改时手动检查每个API，这将非常耗时。空手道为我们提供了一个简单的方法来解决它，如果你有可能将其与管道集成，那将会好得多。</p><p id="4ed4" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">所以，欢迎阅读这篇文章；<strong class="jv hi">我们开始吧！</strong></p><p id="5dca" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated"><a class="ae js" href="https://github.com/karatelabs/karate" rel="noopener ugc nofollow" target="_blank">空手道</a>是Peter Thomas在2017年创建的开源框架。这个工具有许多测试功能；它们都有不同的目的，可以根据你想自动化的东西来使用，但是根据我的经验，我认为，空手道可能对API测试更有益(HTTP / WebSocket Client)。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es kr"><img src="../Images/dfa2af050e35eaba4c29d625507089e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*l0ROwvMKZ9lwUde6"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx"><strong class="bd ig"><em class="ks">Image</em></strong><em class="ks">: </em><a class="ae js" href="https://github.com/karatelabs/karate" rel="noopener ugc nofollow" target="_blank"><em class="ks">https://github.com/karatelabs/karate</em></a></figcaption></figure><p id="6474" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">空手道API测试有可能与Gherkin和cucumber集成，这两个框架通常用于自动化测试。尽管空手道提供了许多测试功能，但本文的重点将是API测试(HTTP / WebSocket Client)。</p><p id="0a6e" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">在使用空手道开始API后端测试之前，我们需要配置我们的环境、工具和依赖项。为了实现这一目标，我们需要遵循以下步骤:</p><ol class=""><li id="e247" class="kt ku hh jv b jw jx ka kb ke kv ki kw km kx kq ky kz la lb bi translated">配置本地环境变量及其路径(JDK(推荐<a class="ae js" href="https://www.oracle.com/co/java/technologies/javase/javase8-archive-downloads.html" rel="noopener ugc nofollow" target="_blank"> Java 8 </a>)和Maven或Gradle(这取决于您的偏好)</li><li id="16aa" class="kt ku hh jv b jw lc ka ld ke le ki lf km lg kq ky kz la lb bi translated">创建一个带有一些管理依赖项的Java项目(在1中提到过)</li><li id="88ff" class="kt ku hh jv b jw lc ka ld ke le ki lf km lg kq ky kz la lb bi translated">在我的例子中，我使用maven，所以我需要配置pom.xml</li><li id="f7ef" class="kt ku hh jv b jw lc ka ld ke le ki lf km lg kq ky kz la lb bi translated">从https://mvnrepository.com/<a class="ae js" href="https://mvnrepository.com/" rel="noopener ugc nofollow" target="_blank">下载以下依赖关系</a></li></ol><p id="e6a0" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">* <em class="lh"> </em>空手道-核心— <em class="lh">还是用稳定版吧，不用RC(发布候选)</em>；下面的例子:</p><p id="56d3" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">&lt;<strong class="jv hi">依赖</strong>依赖&gt;</p><p id="b93c" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated"><em class="lh">T61】！—</em><a class="ae js" href="https://mvnrepository.com/artifact/com.intuit.karate/karate-core" rel="noopener ugc nofollow" target="_blank"><em class="lh">https://mvn repository . com/artifact/com . intuit .空手道/空手道-core </em> </a> <em class="lh"> → </em></p><p id="1bbb" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">&lt;<strong class="jv hi">依赖</strong>依赖&gt;</p><p id="2de3" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">&lt;<strong class="jv hi">groupId</strong>&gt;com . intuit .空手道&lt; / <strong class="jv hi"> groupId </strong> &gt;</p><p id="196f" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">&lt;<strong class="jv hi"> artifactId </strong> &gt;空手道-核心&lt; / <strong class="jv hi"> artifactId </strong> &gt;</p><p id="bb3c" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">&lt;<strong class="jv hi">版本</strong>版本&gt; 1.1.0 &lt; / <strong class="jv hi">版本</strong>版本&gt;</p><p id="dbc4" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated"><strong class="jv hi">依赖</strong>依赖&gt;</p><p id="2654" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated"><em class="lh">T73！—</em><a class="ae js" href="https://mvnrepository.com/artifact/com.intuit.karate/karate-junit5" rel="noopener ugc nofollow" target="_blank"><em class="lh">https://mvn repository . com/神器/com.intuit .空手道/空手道-junit5 </em> </a> <em class="lh"> → </em></p><p id="933d" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">&lt;<strong class="jv hi">依赖</strong>依赖&gt;</p><p id="c17f" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">&lt;<strong class="jv hi">groupId</strong>&gt;com . intuit .空手道&lt; / <strong class="jv hi"> groupId </strong> &gt;</p><p id="551e" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">&lt;<strong class="jv hi"> artifactId </strong> &gt;空手道-JUnit 5&lt;/<strong class="jv hi">artifactId</strong>&gt;</p><p id="e853" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">&lt;<strong class="jv hi">版本</strong> &gt; 1.1.0 &lt; / <strong class="jv hi">版本</strong> &gt;</p><p id="a8c8" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated"><strong class="jv hi">依赖性</strong>依赖性&gt;</p><p id="47f2" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated"><strong class="jv hi">依赖</strong>依赖&gt;</p><p id="687d" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">5.根据您的测试范围，在项目src/test/features中创建您将要测试的每个文件</p><p id="37eb" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">6.开始创建测试脚本:</p><p id="2742" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">API测试与测试为每个API开发的不同方法(GET、POST、DELETE等)相关联。)、请求、响应、代码等。因此，通过整合<a class="ae js" href="https://github.com/cucumber/cucumber/tree/master/gherkin" rel="noopener ugc nofollow" target="_blank">小黄瓜</a> + <a class="ae js" href="https://cucumber.io/" rel="noopener ugc nofollow" target="_blank">黄瓜</a>，我们可以开始测试它们中的每一个。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es li"><img src="../Images/e79af2fa66b33b8ffcc158b052f34f42.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/0*0sK_mfk-4IGiR3V5"/></div><figcaption class="jo jp et er es jq jr bd b be z dx"><strong class="bd ig"><em class="ks">Image</em></strong><em class="ks">: Taken from my local environment, directly from </em><a class="ae js" href="https://www.jetbrains.com/idea/" rel="noopener ugc nofollow" target="_blank"><em class="ks">Intellij IDE</em></a></figcaption></figure><p id="9eb3" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">a.得到</p><p id="0968" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">在这种情况下，我们使用方法GET并通过它们进行断言；如果状态不是200，测试用例将失败。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lj"><img src="../Images/8b75c9cc58d8fc3f18be733608af27c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1242/0*W9ya-h_nXgD3A0_9"/></div><figcaption class="jo jp et er es jq jr bd b be z dx"><strong class="bd ig"><em class="ks">Image</em></strong><em class="ks">: Taken from my local environment, directly from </em><a class="ae js" href="https://www.jetbrains.com/idea/" rel="noopener ugc nofollow" target="_blank"><em class="ks">Intellij IDE</em></a></figcaption></figure><p id="8d47" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">在这幅图中，您可以看到我正在进行多个断言(状态、响应、响应数据长度、id、姓氏)。这将是一个很好的选择，尤其是当我们的API有几个业务测试用例的时候。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lk"><img src="../Images/16059fc6e18aeeaa25a1c6b55b6e06d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xl31iuVZfJvX0ARx"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx"><strong class="bd ig"><em class="ks">Image</em></strong><em class="ks">: Taken from my local environment, directly from </em><a class="ae js" href="https://www.jetbrains.com/idea/" rel="noopener ugc nofollow" target="_blank"><em class="ks">Intellij IDE</em></a></figcaption></figure><p id="fd3c" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">b.邮政</p><p id="736e" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">在这个测试用例中，我添加了一个将在不同场景中使用的背景。首先，我设置了URL(API所在的位置)，头部需要发送数据和预期的输出。标题和响应位于项目中另一个名为“data”的文件夹中</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ll"><img src="../Images/e426bfa5bad4b2c1a52fcceef8b159e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FeTr1SUqBneOceoY"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx"><strong class="bd ig"><em class="ks">Image</em></strong><em class="ks">: Taken from my local environment, directly from </em><a class="ae js" href="https://www.jetbrains.com/idea/" rel="noopener ugc nofollow" target="_blank"><em class="ks">Intellij IDE</em></a></figcaption></figure><p id="0d32" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">如果我们想要实现其他方法，只需改变方法名和与业务案例相关的断言就足够了。</p><p id="6798" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">7.生成报告</p><p id="4130" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">来结束这篇文章；我将谈论报告。这是我最喜欢空手道的一个方面，因为它迅速，直观，并提供详细的信息。例如，当我运行大约15个测试用例时，执行时间不到7秒；当然，这个时间取决于API、数据和环境，但是如果您认为花费的时间太多，您可以通过使用并行测试来实现它</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lm"><img src="../Images/7b6b07f4d42dc7c35c238bdf2d2c13e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*s32C-dk8RLuGxNMA"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx"><strong class="bd ig"><em class="ks">Image</em></strong><em class="ks">: Taken from my local environment, directly from </em><a class="ae js" href="https://www.jetbrains.com/idea/" rel="noopener ugc nofollow" target="_blank"><em class="ks">Intellij IDE</em></a></figcaption></figure><p id="d9dc" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">您可以单击GET Method，并逐步找到每个特性的更多详细信息，获取响应信息，检查断言等:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lm"><img src="../Images/5ee98bc30ced0bb501acc61ca8dd493e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DQhRUCm6NUrUP4N3"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx"><strong class="bd ig"><em class="ks">Image</em></strong><em class="ks">: Taken from my local environment, directly from </em><a class="ae js" href="https://www.jetbrains.com/idea/" rel="noopener ugc nofollow" target="_blank"><em class="ks">Intellij IDE</em></a></figcaption></figure><p id="7c4c" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">总之，空手道可能是自动化后端API测试的一个有趣的选择，特别是在需要重复执行几个测试用例的项目中。此外，空手道可以帮助解决或改进上市时间、及时性、质量、技术熟练程度，并使用自动化方法实现连续的端到端测试。</p><p id="e867" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated"><strong class="jv hi">享受空手道！</strong></p><p id="2535" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">参考资料:</p><p id="7452" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">https://github.com/karatelabs/karate</p><p id="7781" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">https://cucumber.io/</p><p id="1fac" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">https://github.com/cucumber/cucumber/tree/master/gherkin</p><p id="1b09" class="pw-post-body-paragraph jt ju hh jv b jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq ha bi translated">https://automationstepbystep.com/—<em class="lh">特别感谢这门课程的所有者/创建者:Raghav Pal </em></p></div></div>    
</body>
</html>