<html>
<head>
<title>Angular — Introduction to Redux</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">angular—Redux简介</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/angular-2-introduction-to-redux-1cf18af27e6e?source=collection_archive---------0-----------------------#2015-12-30">https://medium.com/google-developer-experts/angular-2-introduction-to-redux-1cf18af27e6e?source=collection_archive---------0-----------------------#2015-12-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="c51e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如何在角度应用中使用Redux</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/f650f859933440d9ac111de54748c98f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Eqao1KXK76RQEAuQzaIrqg.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">FluidScapes by Reza Ali</figcaption></figure><p id="5bf2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Redux ，现在是第三版，问世不到一年，但事实证明它非常成功。受<a class="ae js" href="https://facebook.github.io/flux/" rel="noopener ugc nofollow" target="_blank"> Flux </a>和<a class="ae js" href="http://elm-lang.org" rel="noopener ugc nofollow" target="_blank"> Elm </a>的启发，用于处理应用程序状态，并以一种非常有效的方式将其绑定到用户界面。Redux还可以轻松实现像<em class="jt">热重装或时间旅行</em>这样的酷功能<em class="jt">。Redux通常与React一起使用，但也可以单独使用。</em></p><blockquote class="ju"><p id="ffef" class="jv jw hh bd jx jy jz ka kb kc kd jb dx translated">Redux建立在通量概念之上，尽管以前的经验不是强制性的。</p></blockquote><p id="f13d" class="pw-post-body-paragraph ie if hh ig b ih ke ij ik il kf in io ip kg ir is it kh iv iw ix ki iz ja jb ha bi translated">在本文中，我们将探讨一个从React移植来的<strong class="ig hi">待办事项列表示例</strong>，它来自于<a class="kj kk ge" href="https://medium.com/u/a3a8af6addc1?source=post_page-----1cf18af27e6e--------------------------------" rel="noopener" target="_blank"> Dan Abramov </a>最近的Redux视频课程。使用以下链接破解最终解决方案:</p><p id="df69" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae js" href="https://embed.plnkr.co/6UJUYh7nbyU3TMS2Xd6l/" rel="noopener ugc nofollow" target="_blank">演示</a> | <a class="ae js" href="https://plnkr.co/edit/6UJUYh7nbyU3TMS2Xd6l?p=preview" rel="noopener ugc nofollow" target="_blank">来源</a></p><p id="9d12" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在<a class="ae js" href="https://twitter.com/intent/user?screen_name=gerardsans" rel="noopener ugc nofollow" target="_blank"> @gerardsans </a>找到我的最新观点。</p><h1 id="c83f" class="kl km hh bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">Redux简介</h1><p id="fef0" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">Redux遵循三个基本原则:</p><ul class=""><li id="b334" class="lo lp hh ig b ih ii il im ip lq it lr ix ls jb lt lu lv lw bi translated">单一不可变状态树</li><li id="fdf2" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated">单向数据流</li><li id="fb66" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated">使用纯函数(减速器)进行更改</li></ul><p id="d6bd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过遵循这些原则，我们可以实现可预测和可再现的应用程序行为。</p><p id="7761" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们回顾一下下图中每个组件的职责。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mc"><img src="../Images/c0b530a115cd0b187ee6d79aa3bb377b.png" data-original-src="https://miro.medium.com/v2/resize:fit:704/format:webp/1*CBfav7WP_SuV_UV87N1_Og.png"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">Redux unidirectional flow</figcaption></figure><h2 id="f863" class="md km hh bd kn me mf mg kr mh mi mj kv ip mk ml kz it mm mn ld ix mo mp lh mq bi translated">行动</h2><p id="92b9" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">这些是我们应用程序中的<strong class="ig hi">T21动作</strong>。它们可以由用户或服务器端发起。他们是<strong class="ig hi"> <em class="jt">商店</em> </strong>的唯一信息来源。动作是普通的JavaScript对象，描述一个变更，并使用一个<strong class="ig hi"> <em class="jt">类型</em> </strong>属性作为标识符。请参见下面的示例:</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="310b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jt">动作创建者</em> </strong>是包含帮助器方法的组件，这些帮助器方法创建具体的<strong class="ig hi"> <em class="jt">动作</em> </strong>，由<strong class="ig hi"> <em class="jt">还原者</em> </strong>调度运行。</p><h2 id="ce2d" class="md km hh bd kn me mf mg kr mh mi mj kv ip mk ml kz it mm mn ld ix mo mp lh mq bi translated">还原剂</h2><p id="a8a4" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated"><strong class="ig hi"> <em class="jt">减速器</em> </strong>指定状态如何变化以响应<strong class="ig hi"> <em class="jt">动作</em> </strong>。所有<em class="jt">减速器</em>必须是<a class="ae js" href="https://en.wikipedia.org/wiki/Pure_function" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> <em class="jt">纯功能</em></strong></a><strong class="ig hi"><em class="jt"/></strong>含义:</p><ul class=""><li id="41ab" class="lo lp hh ig b ih ii il im ip lq it lr ix ls jb lt lu lv lw bi translated">给定相同的输入，它们产生相同的输出</li><li id="369d" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated">它们不会产生<strong class="ig hi"> <em class="jt">副作用</em> </strong>(例如:变异状态，调用后端)</li></ul><blockquote class="mt mu mv"><p id="2d91" class="ie if jt ig b ih ii ij ik il im in io mw iq ir is mx iu iv iw my iy iz ja jb ha bi translated">还原剂总是创造一种新的状态来避免副作用；更高级的选择是使用像<a class="ae js" href="https://facebook.github.io/immutable-js/" rel="noopener ugc nofollow" target="_blank"> immutable.js </a>这样的库。</p></blockquote><p id="f0d3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jt">减速器</em>也可根据需要与其他减速器<a class="ae js" href="https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/combineReducers.md" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> <em class="jt">组合成减速器</em> </strong> </a>。见下面一个基本的<strong class="ig hi"> <em class="jt"> rootReducer </em> </strong>。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="04c5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通常的做法是将<strong class="ig hi"> <em class="jt"> initialState </em> </strong>定义为默认参数(第1行)并用<a class="ae js" href="https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/switch" rel="noopener ugc nofollow" target="_blank">开关</a>语句处理每个动作。</p><h2 id="6fcc" class="md km hh bd kn me mf mg kr mh mi mj kv ip mk ml kz it mm mn ld ix mo mp lh mq bi translated">应用商店</h2><p id="08bf" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">Redux使用包含应用程序状态<em class="jt">的单一存储作为普通的JavaScript对象。</em></p><p id="65e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jt">应用商店</em> </strong>是Redux的核心，它提供一个API来:</p><ul class=""><li id="a13a" class="lo lp hh ig b ih ii il im ip lq it lr ix ls jb lt lu lv lw bi translated">调度动作由<a class="ae js" href="https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#dispatch" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jt">app store . dispatch</em></strong></a><strong class="ig hi"><em class="jt">(动作)</em> </strong></li><li id="26c3" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated">注册变更通知监听器:<a class="ae js" href="https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#subscribe" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jt">app store . subscribe</em></strong></a><strong class="ig hi"><em class="jt">(回调)</em> </strong></li><li id="6253" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated">读取应用状态:<a class="ae js" href="https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#getState" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jt">app store . getstate</em></strong></a><strong class="ig hi"><em class="jt">()</em></strong></li></ul><h1 id="34d2" class="kl km hh bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">待办事项列表示例</h1><p id="6505" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">我们将探索一个<strong class="ig hi"> Todo List </strong>应用程序，以了解如何将Redux与Angular集成在一起。这是一个基本的实现，我们可以添加新的待办事项，将它们标记为已完成并过滤它们。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mz"><img src="../Images/9799abb7df8a11e7f640ab92c54d61a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:424/1*xDjlENt1Yl8iiMwRLQalCw.gif"/></div></figure><h1 id="0989" class="kl km hh bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">应用设计</h1><p id="4e6f" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">在Angular中，我们使用一个<strong class="ig hi"> <em class="jt">组件树</em> </strong>开始设计我们的应用程序，并从<strong class="ig hi"> <em class="jt">根</em> </strong>组件开始。在下面找到一个包含所有UI组件的示意性伪HTML:add-todo，todo-list(子组件:todo)，filters(子组件:filter-link)。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><h2 id="6172" class="md km hh bd kn me mf mg kr mh mi mj kv ip mk ml kz it mm mn ld ix mo mp lh mq bi translated">自举设置</h2><p id="ebf0" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">请参见下面的代码来设置Redux:</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="45f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">角度应用在<strong class="ig hi"> <em class="jt">应用模块</em> </strong>中自举传递。<strong class="ig hi"> <em class="jt">应用模块</em> </strong>声明所有需要的组件、指令和管道。这包括根组件<strong class="ig hi"> <em class="jt"> App </em> </strong>，其余全部归入<strong class="ig hi"><em class="jt">App _ DECLARATIONS</em></strong>。全局依赖在<strong class="ig hi"> <em class="jt">提供者</em> </strong>中定义，因此它们对我们的<em class="jt"> Redux组件可用。参见</em><strong class="ig hi"><em class="jt">app store</em></strong>和<strong class="ig hi"> <em class="jt"> TodoActions </em> </strong>(第15–16行)。<strong class="ig hi"> TodoActions </strong>(类)将充当一个<em class="jt">动作创建者</em>，为每个动作提供一个公共方法。我们导入了所有的依赖项(第2–5行)，然后使用<a class="ae js" href="https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/createStore.md" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jt">createStore</em></strong></a><strong class="ig hi"><em class="jt"/></strong>和<strong class="ig hi"> <em class="jt"> </em> </strong>实例化<strong class="ig hi"><em class="jt"/></strong>(第7行)传递<strong class="ig hi"> <em class="jt"> rootReducer </em> </strong>(函数)。最后我们使用<strong class="ig hi"> <em class="jt"> bootstrap </em> </strong>和我们的根模块<strong class="ig hi"> <em class="jt"> AppModule </em> </strong>(第21行)。</p><blockquote class="mt mu mv"><p id="2d11" class="ie if jt ig b ih ii ij ik il im in io mw iq ir is mx iu iv iw my iy iz ja jb ha bi translated">你可以在<a class="ae js" href="https://angular.io/docs/ts/latest/guide/ngmodule.html" rel="noopener ugc nofollow" target="_blank">角度模块</a> (angular.io)阅读更多关于<strong class="ig hi">ng模块</strong>如何工作的信息</p><p id="a05d" class="ie if jt ig b ih ii ij ik il im in io mw iq ir is mx iu iv iw my iy iz ja jb ha bi translated">请注意，当使用字符串令牌时，我们必须在组件前面加上<em class="hh"> @Inject('AppStore') </em>。</p></blockquote><h2 id="33be" class="md km hh bd kn me mf mg kr mh mi mj kv ip mk ml kz it mm mn ld ix mo mp lh mq bi translated">应用状态</h2><p id="679d" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated"><em class="jt">应用商店</em>(<strong class="ig hi"><em class="jt">app Store)</em></strong>将保存应用状态。这是:todos数组和当前过滤器。我们将初始状态定义如下:</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="04f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在下一节中，我们将定义todo项的结构。这个核心结构将在应用程序的生命周期中保持不变。</p><h1 id="4b17" class="kl km hh bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">添加新的待办事项</h1><p id="7908" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">让我们来看一个简化版的<strong class="ig hi"> <em class="jt"> AddTodo </em> </strong>组件，它将允许我们添加一个新的Todo并处理用户输入。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="ab85" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在模板中(第4–8行)，我们使用了一个<a class="ae js" href="https://angular.io/docs/ts/latest/guide/template-syntax.html#!#local-vars" rel="noopener ugc nofollow" target="_blank">本地模板变量</a><strong class="ig hi"><em class="jt">【todo</em></strong>(输入HTML元素，第6行)，并在按钮点击事件(第7行)上传递它的引用。在构造函数上，我们将<strong class="ig hi"> <em class="jt"> appStore </em> </strong>和<strong class="ig hi"> <em class="jt"> todoActions </em> </strong>作为私有属性注入到组件中(第11–17行)。当用户输入一个描述并点击'<strong class="ig hi"> <em class="jt">添加待办事项</em>【T21]时，将会调度一个如下所示的动作(第20行)并清除输入内容。</strong></p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="0399" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了避免在组件中手动创建动作对象，我们创建了<strong class="ig hi"> <em class="jt"> TodoActions </em> </strong>类作为<em class="jt"> ActionCreator </em>。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="866a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将<em class="jt"> ADD_TODO </em>标记作为动作标识符公开(第2行)。请注意我们是如何扩展action对象来包含我们需要的信息，以识别todos并将其标记为完成或未完成(第12–15行)。</p><p id="9829" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在分派动作之后，rootReducer  将被store调用，传递<em class="jt">current state</em>(<em class="jt">initial state</em>如果未定义)和用户动作。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="abe8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了创建新的状态，我们使用<strong class="ig hi"> <em class="jt"> concat </em> </strong>(创建一个新的数组)并保持当前的过滤器，最初它显示所有的待办事项。</p><h1 id="2034" class="kl km hh bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">切换待办事项</h1><p id="6e9c" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">对于每个待办事项，用户可以点击其描述将其切换为已完成。下面您可以看到一个活动待办事项的简化标记:</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="c58f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">类似于我们对add todo所做的，每个点击事件将向下传递todo <strong class="ig hi"> <em class="jt"> id </em> </strong>(输入属性，第6行)并分派相应的动作(第17行)。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><blockquote class="mt mu mv"><p id="4b64" class="ie if jt ig b ih ii ij ik il im in io mw iq ir is mx iu iv iw my iy iz ja jb ha bi translated">TypeScript提示:在构造函数参数中使用私有或公共修饰符是声明私有或公共属性的捷径(第12–13行)。参见<a class="ae js" href="http://www.typescriptlang.org/Handbook#classes-privatepublic-modifiers" rel="noopener ugc nofollow" target="_blank">私有/公共修改器</a>。</p></blockquote><p id="cd60" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">切换初始示例todo将产生以下操作:</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="f025" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">和以前一样，分派动作将执行reducer并创建一个新状态。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="9fe4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">助手函数<strong class="ig hi"> <em class="jt"> toggleTodo </em> </strong>创建一个新数组，切换Todo匹配被调度的<strong class="ig hi"> <em class="jt"> action.id </em> </strong>并保持其余的。</p><h1 id="ad0c" class="kl km hh bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">过滤待办事项</h1><p id="e3ab" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated"><strong class="ig hi"> <em class="jt">过滤器</em> </strong>组件允许用户过滤:全部、仅活动或仅完成待办事项。我们使用<strong class="ig hi"> <em class="jt"> FilterLink </em> </strong>组件封装每个过滤器，通过属性<strong class="ig hi"> <em class="jt"> filter </em> </strong>传递一个标识符。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="15da" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在<strong class="ig hi"> <em class="jt"> FilterLink </em> </strong>内，每个点击事件向下传递<strong class="ig hi"> <em class="jt">过滤器</em> </strong>(输入属性，第6行)并分派相应的过滤器动作。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="0f4c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过<strong class="ig hi">过滤<em class="jt">完成后</em>过滤</strong>会生成以下动作</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="814d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">和以前一样，分派动作将执行reducer并创建一个新状态。在这种情况下，我们保持相同的todos，并使用调度的过滤器(第5行)更改当前过滤器。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><h1 id="4397" class="kl km hh bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">显示待办事项列表</h1><p id="29f4" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">我们将使用子组件<strong class="ig hi"> <em class="jt"> todo </em> </strong>来封装单个todo，将一些属性作为属性(id，completed)传递，将描述(文本)作为内容传递。这种模式被称为<a class="ae js" rel="noopener" href="/@learnreact/container-components-c0e67432e005"> <strong class="ig hi"> <em class="jt">容器组件</em> </strong> </a>。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="19e9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们使用<strong class="ig hi"><em class="jt">*</em></strong><a class="ae js" href="https://angular.io/docs/ts/latest/api/common/NgFor-directive.html" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jt">ngFor</em></strong></a>来迭代<strong class="ig hi"> <em class="jt"> todos </em> </strong>数组(第3行)。对于每个待办事项，我们使用一个<a class="ae js" href="https://angular.io/docs/ts/latest/guide/template-syntax.html#!#local-vars" rel="noopener ugc nofollow" target="_blank">本地模板变量</a> <strong class="ig hi"> <em class="jt">待办事项</em> </strong>传递待办事项信息。</p><p id="7da2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下参见<strong class="ig hi"> <em class="jt"> TodoList </em> </strong>组件的摘录。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="mr ms l"/></div></figure><p id="0dd0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">上面，我们使用<a class="ae js" href="https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#subscribe" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jt">app store . subscribe</em></strong></a><strong class="ig hi"><em class="jt"/></strong>(第7行)<strong class="ig hi"> <em class="jt">注册了一个监听器。</em> </strong>一旦在我们的监听器内，<strong class="ig hi"> <em class="jt"> </em> </strong>我们可以很容易地使用<a class="ae js" href="https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#getState" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jt">appstore . getstate</em></strong></a><strong class="ig hi"><em class="jt"/></strong>(第8行)读取当前状态。Subscribe返回一个函数，我们可以用它来取消订阅。在Angular中，我们使用<a class="ae js" href="https://angular.io/docs/ts/latest/api/core/OnDestroy-interface.html" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jt">on destroy</em></strong></a>事件处理程序进行清理(第2行，第13–16行)。</p><blockquote class="mt mu mv"><p id="b27a" class="ie if jt ig b ih ii ij ik il im in io mw iq ir is mx iu iv iw my iy iz ja jb ha bi translated">请注意，我们是如何将所有组件属性和助手方法保持为私有的。我们不希望其他组件访问它们。</p></blockquote><h1 id="b09a" class="kl km hh bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">Redux生命周期审查</h1><p id="22ec" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">让我们回顾一下Redux应用程序在不同阶段的行为。</p><ul class=""><li id="1c57" class="lo lp hh ig b ih ii il im ip lq it lr ix ls jb lt lu lv lw bi translated"><strong class="ig hi">在应用引导</strong>:我们通过<strong class="ig hi"> <em class="jt"> rootReducer </em> </strong>初始化<strong class="ig hi"> <em class="jt"> appStore </em> </strong>。这将触发<strong class="ig hi"> <em class="jt"> appStore </em> </strong>内部初始化。通常这设置了<strong class="ig hi"> <em class="jt">初始状态</em> </strong>。</li><li id="b9b9" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated"><strong class="ig hi">关于组件创建</strong>:我们根据需要在构造器上注入<strong class="ig hi"> <em class="jt"> appStore </em> </strong>和<strong class="ig hi"><em class="jt">to actions</em></strong>。显示数据的组件订阅<strong class="ig hi"> <em class="jt"> appStore </em> </strong>并通过调用<a class="ae js" href="https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#getState" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jt">app store . getstate</em></strong></a><strong class="ig hi"><em class="jt">()</em></strong>读取。改变状态的组件为相应的动作准备调度代码，传递任何所需的数据。</li><li id="b636" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated"><strong class="ig hi">关于组件销毁</strong>:组件显示数据<strong class="ig hi"> <em class="jt">退订</em> </strong>到<strong class="ig hi"> <em class="jt"> appStore </em> </strong>清理资源。</li><li id="c030" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated"><strong class="ig hi">关于用户交互</strong>:每个用户交互都会触发一个底层调度动作。这将执行<strong class="ig hi"> <em class="jt"> rootReducer </em> </strong>产生一个新的状态。然后，<strong class="ig hi"> <em class="jt"> appStore </em> </strong>将通知所有订阅的侦听器，这些侦听器将相应地更新。</li><li id="1a74" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated"><strong class="ig hi">在服务器端发起的动作上</strong>:一些应用程序可以调度动作来响应服务器端发起的事件。例如:网络套接字。这些动作一旦正确设置，就会遵循与用户交互相同的流程。</li></ul><p id="8ddb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们介绍了如何使用Redux构建一个基本的Angular应用程序。希望你现在对Redux很好奇，也许会在你的下一个项目中用到它。感谢阅读！</p><div class="na nb ez fb nc nd"><a href="http://www.meetup.com/AngularZone/" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab dw"><div class="nf ab ng cl cj nh"><h2 class="bd hi fi z dy ni ea eb nj ed ef hg bi translated">安古拉宗社区</h2><div class="nk l"><h3 class="bd b fi z dy ni ea eb nj ed ef dx translated">欢迎来到我们的社区。我们的激情是有棱角的。加入我们吧！🚀</h3></div></div><div class="nl l"><div class="nm l nn no np nl nq jm nd"/></div></div></a></div><h1 id="0b97" class="kl km hh bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">特别提及</h1><p id="30ee" class="pw-post-body-paragraph ie if hh ig b ih lj ij ik il lk in io ip ll ir is it lm iv iw ix ln iz ja jb ha bi translated">特别感谢<a class="ae js" href="https://twitter.com/robinboehm" rel="noopener ugc nofollow" target="_blank">Robin bhm</a>将本文翻译成德语并出版成<a class="ae js" href="https://angularjs.de" rel="noopener ugc nofollow" target="_blank"> AngularJS。德</a>博客。下面来看看吧！🇩🇪💖</p><div class="na nb ez fb nc nd"><a href="https://angularjs.de/artikel/angular-redux-einfuehrung/" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab dw"><div class="nf ab ng cl cj nh"><h2 class="bd hi fi z dy ni ea eb nj ed ef hg bi translated">一个角坐标和一个角坐标。特拉华州</h2><div class="nk l"><h3 class="bd b fi z dy ni ea eb nj ed ef dx translated">在公共安全领域，国家可以解决一个问题。Autonome und wiederverwendbare…</h3></div><div class="nr l"><p class="bd b fp z dy ni ea eb nj ed ef dx translated">安古拉吉斯德</p></div></div><div class="nl l"><div class="ns l nn no np nl nq jm nd"/></div></div></a></div><h1 id="80a7" class="kl km hh bd kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh li bi translated">进一步阅读</h1><ul class=""><li id="a39b" class="lo lp hh ig b ih lj il lk ip nt it nu ix nv jb lt lu lv lw bi translated">观看Dan Abramov @Dan_Abramov制作的<a class="ae js" href="https://egghead.io/series/getting-started-with-redux" rel="noopener ugc nofollow" target="_blank">Redux</a>视频课程入门</li><li id="af8c" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated"><a class="ae js" rel="noopener" href="/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0">智能和非智能组件</a>，作者丹·阿布拉莫夫</li><li id="c08a" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated"><a class="ae js" href="http://blog.jhades.org/angular-2-application-architecture-building-flux-like-apps-using-redux-and-immutable-js-js/" rel="noopener ugc nofollow" target="_blank">用Redux和Immutable.js </a>构建Flux应用，作者<a class="ae js" href="https://twitter.com/JhadesDev" rel="noopener ugc nofollow" target="_blank"> @JhadesDev </a></li><li id="6639" class="lo lp hh ig b ih lx il ly ip lz it ma ix mb jb lt lu lv lw bi translated"><a class="ae js" href="https://angularclass.com/react-developer-survey-results" rel="noopener ugc nofollow" target="_blank"> React开发者调查结果</a>，作者PatrickJS，<a class="ae js" href="https://twitter.com/AngularClass" rel="noopener ugc nofollow" target="_blank"> @AngularClass </a></li></ul><figure class="jd je jf jg fd jh er es paragraph-image"><a href="https://twitter.com/intent/user?screen_name=gerardsans"><div class="er es nw"><img src="../Images/abefda0aa7864742686ec7f7fdffe2b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1tQhWBuVOdzR7OAGvyd8Q.png"/></div></a></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es nx"><img src="../Images/bff17231f703cc479d986766d8b3cad6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qMckTIaQ0pYi44fCynML2Q.png"/></div></div></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ny"><img src="../Images/67b37e5d672384f0953563450fca0029.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uNeEFxYiwJq8RfiDCsI-Xg.gif"/></div></div></figure></div></div>    
</body>
</html>