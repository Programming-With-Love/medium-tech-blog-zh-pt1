<html>
<head>
<title>The Outrageous Cost of Skipping TDD &amp; Code Reviews</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">跳过TDD和代码评审的惊人成本</h1>
<blockquote>原文：<a href="https://medium.com/javascript-scene/the-outrageous-cost-of-skipping-tdd-code-reviews-57887064c412?source=collection_archive---------2-----------------------#2016-12-14">https://medium.com/javascript-scene/the-outrageous-cost-of-skipping-tdd-code-reviews-57887064c412?source=collection_archive---------2-----------------------#2016-12-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/390cbe0e08f97b269720be61e6b48471.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4peRVdh776Q650sL8kFInQ.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">The Color of Money — Chris Potter (CC BY 2.0)</figcaption></figure><p id="19b5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="jr">更新2019年1月26日:</em> </strong> <em class="jr">我注意到“修复一个生产bug可能比在设计时修复一个bug多花费</em><strong class="iv hi"><em class="jr">100倍</em> </strong> <em class="jr">”的说法是不真实的。我仍然认为TDD具有积极的投资回报和节省时间的能力，但是你应该把这看作是一种主观意见，而不是科学事实。我们的行业非常需要关于TDD和其他质量控制措施的影响的更好的数据收集。对于大学和大型软件组织之间的研究合作来说，这将是一个很好的主题。</em></p><p id="b043" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">近年来，越来越多的公司邀请我谈论测试驱动开发(TDD)的好处，并分享如何实现更高效的质量过程的建议。</p><p id="dc20" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">TDD是编写自动化测试的过程，以确保在编写实现之前代码能够工作。您编写一个测试，看着它失败(红色)，编写实现，看着测试通过(绿色)，如果需要的话进行重构。当你构建系统时，重复这个循环。</p><p id="4305" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这个过程已经得到了深入的研究，并且已经证明它对于提高软件质量非常有用。但是，您是否知道它也为组织节省了大量时间和金钱？</p><p id="1f33" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">经理们列举的等待这么久才实施TDD的主要原因之一是成本。使用TDD 时，最初的<a class="ae js" href="https://www.computer.org/csdl/mags/so/2007/03/s3024.pdf" rel="noopener ugc nofollow" target="_blank">项目构建通常会多花30%的时间。</a></p><p id="cc62" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">那些管理人员需要知道的是<a class="ae js" href="https://www.computer.org/csdl/mags/so/2007/03/s3024.pdf" rel="noopener ugc nofollow" target="_blank"> TDD减少了40% — 80%的生产bug密度</a>，这是非常重要的。生产中更多的错误导致维护成本急剧上升。</p><p id="19f2" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">由于返工、元工作(关于工作的工作)、责任移交、中断以及最终的客户支持、bug分类和维护的成本呈指数级上升，修复一个生产bug的成本可能比在设计时修复一个bug多100倍，比在实现时修复一个bug多15倍。</p><p id="bbd2" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="jr">注:</em> </strong> <em class="jr">这种说法受到了质疑，但毫无疑问，软件质量提高了开发人员的生产力。参见</em> <a class="ae js" href="https://www.amazon.com/Economics-Software-Quality-Capers-Jones/dp/0132582201" rel="noopener ugc nofollow" target="_blank"> <em class="jr">“软件质量的经济学”</em> </a> <em class="jr">深入了解软件质量的可用数据，以及软件质量对您的组织可能产生的影响。我们需要对软件质量度量进行更多的研究，这样我们就可以对如何管理开发团队做出更明智的决策。</em></p><figure class="ju jv jw jx fd ii er es paragraph-image"><div class="er es jt"><img src="../Images/526b118353c3fb5f433455b8a08b490e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*jOS7CZX-gWfOoKGPUU29kg.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Relative costs of fixing bugs</figcaption></figure><p id="a99e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">使用这些数字，让我们看看一个虚构的项目在有和没有TDD的情况下的相对成本。该项目将需要1000小时的前期实施，不包括TDD，也不包括维护:</p><figure class="ju jv jw jx fd ii er es paragraph-image"><div class="er es jy"><img src="../Images/31f3c16110429a6f91fb7902f297e414.png" data-original-src="https://miro.medium.com/v2/resize:fit:1232/format:webp/1*4KJ9RSNP4_JsnGYjVxwnlw.png"/></div></figure><p id="a5de" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在我们虚构的例子中，我们节省了623个工时，或者对于一个4人的团队来说，节省了大约一个月的开发时间。如果我们向每个开发人员支付美国全国平均水平(9.5万美元)，并在工资之外扣除平均30%的福利，我们将节省近37，000美元。</p><p id="4005" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">当然，这是一个虚构的例子，做了很多假设。您的收获将基于许多因素而变化，包括您的团队在TDD方面的经验，是否存在其他质量度量(例如代码审查)等等…</p><p id="46d6" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">以下是所做的假设:</p><ul class=""><li id="d8f2" class="jz ka hh iv b iw ix ja jb je kb ji kc jm kd jq ke kf kg kh bi translated">没有TDD的生产错误:100</li><li id="594d" class="jz ka hh iv b iw ki ja kj je kk ji kl jm km jq ke kf kg kh bi translated">使用TDD的生产bugs(减少60%，介于40% — 80%之间)</li><li id="d371" class="jz ka hh iv b iw ki ja kj je kk ji kl jm km jq ke kf kg kh bi translated">在实施(TDD)阶段修复bug的平均时间:1小时(该数字仅用于计算产品bug修复成本)</li><li id="6c59" class="jz ka hh iv b iw ki ja kj je kk ji kl jm km jq ke kf kg kh bi translated">修复一个产品缺陷的平均时间:大约15小时</li></ul><p id="4458" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">玩弄这些变量中的任何一个显然都会改变结果。非常确定的是，TDD节省了时间和金钱，因为维护成本被考虑在内——大量的时间和金钱。</p><p id="e648" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">根据我在实际生产项目中的经验，这个虚构例子的相对结果对我来说是真实的，无论有没有TDD。</p><h2 id="7c17" class="kn ko hh bd kp kq kr ks kt ku kv kw kx je ky kz la ji lb lc ld jm le lf lg lh bi translated">代码审查也有类似的效果</h2><p id="9594" class="pw-post-body-paragraph it iu hh iv b iw li iy iz ja lj jc jd je lk jg jh ji ll jk jl jm lm jo jp jq ha bi translated">代码审查也有类似的效果。事实上，一些研究发现代码审查比TDD更有效。根据1988年的一项研究，<a class="ae js" href="http://www.ifsq.org/finding-ia-2.html" rel="noopener ugc nofollow" target="_blank"> <strong class="iv hi">花在代码审查上的每一个小时可以节省33个小时的维护时间</strong> </a>。</p><p id="d299" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这非常不寻常，但是代码审查的bug捕获好处与我的个人经验并不一致。我发现自动化测试在捕捉bug方面更有用——那么我们如何解释代码审查的非凡有效性呢？</p><p id="14ae" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">知识分享。</strong>当您使用代码评审时，您的团队会在开发人员使用反模式和其他不良实践时进行自我纠正。与此同时，他们分享有效的模式，互相教授更好的做事方法，并互相教授如何编写更可读的代码。</p><p id="da6a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">最终的结果是，你的初级开发人员很快上升到团队中最聪明的开发人员的水平，并且你的整个团队的速度提高了。在你的团队中，很难过分强调导师文化的价值。</p><h1 id="2f5f" class="ln ko hh bd kp lo lp lq kt lr ls lt kx lu lv lw la lx ly lz ld ma mb mc lg md bi translated">中断的代价</h1><p id="7815" class="pw-post-body-paragraph it iu hh iv b iw li iy iz ja lj jc jd je lk jg jh ji ll jk jl jm lm jo jp jq ha bi translated">为什么修复生产bug要多花这么多钱？因为一旦一个bug到了生产阶段，成本远不止是简单的修复bug的成本。</p><p id="0255" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在生产中修复一个bug比在开发过程中修复一个bug要昂贵得多。要了解这种差异的大小，首先必须了解打断一个开发人员的成本。</p><p id="f98e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">产品bug修复通常意味着功能开发的上下文和节奏的中断。换句话说，开发人员从他们当前工作的环境中被拉出来，转到bug的环境中，在那里需要时间来吸收相关的代码和流程，诊断根本原因，修复bug，然后重新吸收他们之前工作的环境。</p><p id="9059" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><a class="ae js" href="http://blog.ninlabs.com/2013/01/programmer-interrupted/" rel="noopener ugc nofollow" target="_blank">每一次上下文切换都会耗费开发人员20分钟的生产力</a>，但是流血不止。打断开发人员来修复一个bug很可能会导致他们在被打断之前正在处理的代码中出现更多的bug。根据微软的研究，<a class="ae js" href="http://dl.acm.org/citation.cfm?doid=985692.985715" rel="noopener ugc nofollow" target="_blank">一个被中断的任务需要两倍的时间来完成，并且包含两倍于未被中断的任务的错误</a>。</p><p id="4852" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">换句话说，修复生产中发布的bug的成本不仅仅是修复生产bug的成本。中断会增加当前开发工作的成本，并引入更多最终需要修复的错误。</p><p id="98ee" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">另一方面，多任务处理是一个非常糟糕的主意。为了提高效率，开发人员需要一次专注于一件事。</p><h1 id="d427" class="ln ko hh bd kp lo lp lq kt lr ls lt kx lu lv lw la lx ly lz ld ma mb mc lg md bi translated">结论</h1><p id="4d3a" class="pw-post-body-paragraph it iu hh iv b iw li iy iz ja lj jc jd je lk jg jh ji ll jk jl jm lm jo jp jq ha bi translated">下一次有人告诉你他们没有时间或预算进行TDD或代码评审时，自信地告诉他们，“在这种情况下，你真的没有时间或预算跳过TDD”。</p><h1 id="0cad" class="ln ko hh bd kp lo lp lq kt lr ls lt kx lu lv lw la lx ly lz ld ma mb mc lg md bi translated"><strong class="ak">接下来的步骤</strong></h1><p id="9778" class="pw-post-body-paragraph it iu hh iv b iw li iy iz ja lj jc jd je lk jg jh ji ll jk jl jm lm jo jp jq ha bi translated">更好地理解TDD及其在软件开发过程中的作用:</p><ul class=""><li id="5d56" class="jz ka hh iv b iw ix ja jb je kb ji kc jm kd jq ke kf kg kh bi translated"><a class="ae js" rel="noopener" href="/javascript-scene/5-common-misconceptions-about-tdd-unit-tests-863d5beb3ce9">“关于TDD和单元测试的5个常见误解”</a></li><li id="8282" class="jz ka hh iv b iw ki ja kj je kk ji kl jm km jq ke kf kg kh bi translated"><a class="ae js" href="https://www.sitepoint.com/javascript-testing-unit-functional-integration/" rel="noopener ugc nofollow" target="_blank">“单元测试vs功能测试vs集成测试”</a></li><li id="b042" class="jz ka hh iv b iw ki ja kj je kk ji kl jm km jq ke kf kg kh bi translated"><a class="ae js" rel="noopener" href="/javascript-scene/what-every-unit-test-needs-f6cd34d9836d">“每个单元考试必答的5个问题”</a></li><li id="2c0c" class="jz ka hh iv b iw ki ja kj je kk ji kl jm km jq ke kf kg kh bi translated"><a class="ae js" href="https://ericelliottjs.com/product/tdd-es6-react/" rel="noopener ugc nofollow" target="_blank">“ES6中的TDD&amp;React网络广播”</a></li><li id="31d0" class="jz ka hh iv b iw ki ja kj je kk ji kl jm km jq ke kf kg kh bi translated">通过导师提升你的团队:如何编写更多可测试的代码，TDD，CI/CD过程，等等</li></ul><h1 id="d656" class="ln ko hh bd kp lo lp lq kt lr ls lt kx lu lv lw la lx ly lz ld ma mb mc lg md bi translated">通过实时1:1辅导提升您的技能</h1><p id="2db8" class="pw-post-body-paragraph it iu hh iv b iw li iy iz ja lj jc jd je lk jg jh ji ll jk jl jm lm jo jp jq ha bi translated">DevAnywhere是达到高级JavaScript技能的最快方法:</p><ul class=""><li id="5aa2" class="jz ka hh iv b iw ix ja jb je kb ji kc jm kd jq ke kf kg kh bi translated">现场课程</li><li id="58c2" class="jz ka hh iv b iw ki ja kj je kk ji kl jm km jq ke kf kg kh bi translated">弹性工时</li><li id="b984" class="jz ka hh iv b iw ki ja kj je kk ji kl jm km jq ke kf kg kh bi translated">一对一指导</li><li id="cdc0" class="jz ka hh iv b iw ki ja kj je kk ji kl jm km jq ke kf kg kh bi translated">构建真正的生产应用</li></ul><figure class="ju jv jw jx fd ii er es paragraph-image"><a href="https://devanywhere.io/"><div class="er es me"><img src="../Images/03504ae5b049cdb99861a7b575be3a08.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pskrI-ZjRX_Y0I0zZqVTcQ.png"/></div></a><figcaption class="ip iq et er es ir is bd b be z dx"><a class="ae js" href="https://devanywhere.io/" rel="noopener ugc nofollow" target="_blank">https://devanywhere.io/</a></figcaption></figure></div><div class="ab cl mf mg go mh" role="separator"><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk ml"/><span class="mi bw bk mj mk"/></div><div class="ha hb hc hd he"><p id="0ff9" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="jr">埃里克·艾略特</em> </strong> <em class="jr">是</em> <a class="ae js" href="http://pjabook.com" rel="noopener ugc nofollow" target="_blank"> <em class="jr">【编程JavaScript应用】</em> </a> <em class="jr"> (O'Reilly)的作者，也是</em><a class="ae js" href="https://devanywhere.io/" rel="noopener ugc nofollow" target="_blank"><em class="jr">devanywhere . io</em></a><em class="jr">的联合创始人。他为Adobe Systems</em><strong class="iv hi"><em class="jr"/></strong><em class="jr"/><strong class="iv hi"><em class="jr">Zumba Fitness</em></strong><em class="jr"/><strong class="iv hi"><em class="jr">华尔街日报</em></strong><em class="jr"/><strong class="iv hi"><em class="jr">ESPN</em></strong><em class="jr"/><strong class="iv hi">T51】BBC</strong><em class="jr">等顶级录音师贡献了软件经验</em></p><p id="98ef" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">他和世界上最美丽的女人一起在任何他想去的地方工作。</p></div></div>    
</body>
</html>