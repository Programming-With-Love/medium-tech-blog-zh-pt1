<html>
<head>
<title>Enzyme: JavaScript Testing utilities for React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">酶:React的JavaScript测试工具</h1>
<blockquote>原文：<a href="https://medium.com/airbnb-engineering/enzyme-javascript-testing-utilities-for-react-a417e5e5090f?source=collection_archive---------0-----------------------#2016-03-01">https://medium.com/airbnb-engineering/enzyme-javascript-testing-utilities-for-react-a417e5e5090f?source=collection_archive---------0-----------------------#2016-03-01</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="ada3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作者:利兰·理查森</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/5a571a6d6821101cd65598c92edb6715.png" data-original-src="https://miro.medium.com/v2/resize:fit:404/format:webp/1*pu9U8EYL3KGrgvapyp1pSg.png"/></div></figure><p id="d92d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">测试代码对于复杂代码库的可维护性至关重要，但是测试易于编写、维护和理解也同样重要。前端代码也不例外，你的UI中的行为也应该被测试。</p><p id="b91c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">大约三个月前，Airbnb开源了用于测试React组件的JavaScript库<a class="ae jm" href="https://github.com/airbnb/enzyme/" rel="noopener ugc nofollow" target="_blank">酵素</a>。自那以后，反响非常积极，目前有超过3000名明星和超过50名投稿人，其中45人不在Airbnb。</p><p id="a9f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从历史上看，由于各种原因，测试UI一直很难完成，但是使用React消除了许多障碍。我们希望酶能很好地去除剩余的细菌！</p><h1 id="514c" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">声明性ui是可测试的ui</h1><p id="a329" class="pw-post-body-paragraph ie if hh ig b ih kl ij ik il km in io ip kn ir is it ko iv iw ix kp iz ja jb ha bi translated">Airbnb.com的所有新UI特性现在都是使用<a class="ae jm" href="https://facebook.github.io/react/" rel="noopener ugc nofollow" target="_blank"> React </a>实现的，它将应用程序的UI构建成一组可重用的“组件”。组件是一种方式，它通过一个幂等的<strong class="ig hi"> <em class="kq"> render </em> </strong>函数来声明UI的呈现方式，这个函数是应用程序状态的一个纯函数。</p><p id="4aaf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">纯函数(以及React组件)更容易测试，因为在给定一些应用程序状态的情况下，它们只是返回一个关于组件的UI应该是什么样子的<em class="kq">描述</em>，而不是实际改变UI并产生副作用。这种“描述”被称为“虚拟DOM ”,是一种树状数据结构。</p><p id="9447" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对React渲染树的状态做出断言会包含大量样板代码，很难阅读，这降低了测试的价值。此外，在结果树上直接断言会将您的测试与实现细节强耦合，最终使您的测试变得极其脆弱。</p><p id="c253" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Enzyme通过围绕渲染React组件提供流畅的界面，使询问有关React组件渲染输出的问题变得简单而直观。</p><h1 id="d9c8" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">React Conf 2016</h1><p id="b4a3" class="pw-post-body-paragraph ie if hh ig b ih kl ij ik il km in io ip kn ir is it ko iv iw ix kp iz ja jb ha bi translated">上周在react大会上，我做了一个关于酶和测试React成分的简短发言。如果你还没看过，那就去看看吧！</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kr ks l"/></div></figure><h1 id="b87c" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">例子</h1><p id="9601" class="pw-post-body-paragraph ie if hh ig b ih kl ij ik il km in io ip kn ir is it ko iv iw ix kp iz ja jb ha bi translated">为了了解酶是如何工作的，我们来看一个例子:待办事项列表。</p><p id="c029" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">假设我们有这两个组件:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kt ks l"/></div></figure><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kt ks l"/></div></figure><p id="17d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是一个相对简单的例子，但是让我们看看我们能做出什么样的断言。</p><p id="5d69" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">酶导出三种不同的“模式”来渲染和测试组件，<a class="ae jm" href="http://airbnb.io/enzyme/docs/api/shallow.html" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="kq"/></strong></a><a class="ae jm" href="http://airbnb.io/enzyme/docs/api/mount.html" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="kq">挂载</em> </strong> </a>，以及<a class="ae jm" href="http://airbnb.io/enzyme/docs/api/render.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> <em class="kq">渲染</em> </strong> </a>。<strong class="ig hi"><em class="kq">S</em></strong><a class="ae jm" href="http://airbnb.io/enzyme/docs/api/shallow.html" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="kq">hallow</em></strong></a>是推荐的开始模式，因为它可以更好地将测试隔离到单个组件。如果<a class="ae jm" href="http://airbnb.io/enzyme/docs/api/shallow.html" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="kq"/></strong></a>对你的用例不起作用(例如，如果你是依靠真实DOM的存在)，<a class="ae jm" href="http://airbnb.io/enzyme/docs/api/mount.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> <em class="kq">挂载</em> </strong> </a>或<a class="ae jm" href="http://airbnb.io/enzyme/docs/api/render.html" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> <em class="kq">渲染</em> </strong> </a>很可能会。</p><p id="5541" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"><em class="kq">*注:</em> </strong> <em class="kq">本例将使用</em> <a class="ae jm" href="https://mochajs.org/" rel="noopener ugc nofollow" target="_blank"> <em class="kq">摩卡</em> </a> <em class="kq">和</em> <a class="ae jm" href="http://chaijs.com/" rel="noopener ugc nofollow" target="_blank"> <em class="kq">柴期待</em> </a> <em class="kq">的组合，但两者都不需要使用酶。</em></p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kt ks l"/></div></figure><p id="d59f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们还可以测试一下<strong class="ig hi"> <em class="kq"> ToDoList </em> </strong>组件:</p><figure class="jf jg jh ji fd jj"><div class="bz dy l di"><div class="kt ks l"/></div></figure><p id="e05c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后我们就完事了！</p><h1 id="4fa2" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">这与React的TestUtils相比如何？</h1><p id="138f" class="pw-post-body-paragraph ie if hh ig b ih kl ij ik il km in io ip kn ir is it ko iv iw ix kp iz ja jb ha bi translated">如果您以前尝试过测试React组件，您可能会意识到React提供了<a class="ae jm" href="https://facebook.github.io/react/docs/test-utils.html" rel="noopener ugc nofollow" target="_blank">测试实用程序</a>来实现一些相同的目标。</p><p id="4ba4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Enzyme使用React提供的几个实用程序来构建它的API，但是提供了一个非常不同的接口和几个方法来减少样板文件和减少测试与实现之间的耦合。</p><h1 id="76be" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">走向</h1><p id="6eec" class="pw-post-body-paragraph ie if hh ig b ih kl ij ik il km in io ip kn ir is it ko iv iw ix kp iz ja jb ha bi translated">Enzyme解决的问题绝不是Airbnb特有的。有希望的是，通过开源酶，许多其他人会发现测试反应成分更容易和更容易。我们为未来的发展计划了许多功能，欢迎来自社区的贡献。你可以在<a class="ae jm" href="https://github.com/airbnb/enzyme" rel="noopener ugc nofollow" target="_blank"> Github库</a>中派生Enzyme或者打开特性请求。</p></div><div class="ab cl ku kv go kw" role="separator"><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz la"/><span class="kx bw bk ky kz"/></div><div class="ha hb hc hd he"><h2 id="112b" class="lb jo hh bd jp lc ld le jt lf lg lh jx ip li lj kb it lk ll kf ix lm ln kj lo bi translated">在<a class="ae jm" href="http://airbnb.io" rel="noopener ugc nofollow" target="_blank"> airbnb.io </a>查看我们所有的开源项目，并在Twitter上关注我们:<a class="ae jm" href="https://twitter.com/AirbnbEng" rel="noopener ugc nofollow" target="_blank">@ Airbnb eng</a>+<a class="ae jm" href="https://twitter.com/AirbnbData" rel="noopener ugc nofollow" target="_blank">@ Airbnb data</a></h2></div></div>    
</body>
</html>