<html>
<head>
<title>Write Mobile SDK Like a Pro</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专业人士一样编写移动SDK</h1>
<blockquote>原文：<a href="https://blog.kotlin-academy.com/write-mobile-sdk-like-a-pro-43b14989508c?source=collection_archive---------1-----------------------#2021-11-26">https://blog.kotlin-academy.com/write-mobile-sdk-like-a-pro-43b14989508c?source=collection_archive---------1-----------------------#2021-11-26</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="5434" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">开发移动SDK的提示和指南</p><figure class="kj kk kl km gt kn gh gi paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="gh gi ki"><img src="../Images/107dd89c1c82e01f8d4acdbe76a3848c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_a8OglrNDBqwoaaLDZEp0Q.jpeg"/></div></div></figure><p id="f3f3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">假设你有一个为客户编写移动SDK的项目，它可以服务数百万用户。听起来很棒，对吗？但是…你从哪里开始呢？你是怎么设计的？编写SDK的正确方法是什么？这和写手机app一样吗？因此，在本文中，我将向您展示一些来自我个人经验的技巧和指导方针，它们可以帮助您以更好的方式编写SDK！</p><p id="e6b6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">首先，我们来谈谈SDK和App的一些主要区别:</p><ul class=""><li id="daeb" class="ku kv in jm b jn jo jr js jv kw jz kx kd ky kh kz la lb lc bi translated"><strong class="jm io">受众:</strong>移动应用的主要用户是终端用户或公司，而SDK的主要用户是开发者。</li><li id="4d84" class="ku kv in jm b jn ld jr le jv lf jz lg kd lh kh kz la lb lc bi translated"><strong class="jm io">可扩展性:</strong>由于SDK可以被许多不同的应用和公司使用，它可以一次安装在数百万台设备上。因此，它必须处理多个操作系统、多个设备和大量用户。</li><li id="6828" class="ku kv in jm b jn ld jr le jv lf jz lg kd lh kh kz la lb lc bi translated"><strong class="jm io">集成:</strong> SDK需要与使用它的应用程序集成</li></ul><p id="e96b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在回顾了一些主要差异之后，让我们来看看一些提示和指导原则:</p><h1 id="976c" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">整合</strong></h1><p id="2d63" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">编写SDK时，集成是最重要的。<br/>集成包括通过从Maven获取、初始化和在应用程序代码中使用SDK，将SDK插入应用程序。</p><p id="47b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以做几件事让它变得尽可能简单:</p><ul class=""><li id="e809" class="ku kv in jm b jn jo jr js jv kw jz kx kd ky kh kz la lb lc bi translated">支持最新的操作系统并使用最新的库，以避免与应用程序库冲突</li><li id="80b7" class="ku kv in jm b jn ld jr le jv lf jz lg kd lh kh kz la lb lc bi translated">如果你想改变你的API，为了向后兼容，你可以放弃旧的方法并编写新的方法</li><li id="5e9e" class="ku kv in jm b jn ld jr le jv lf jz lg kd lh kh kz la lb lc bi translated">理想情况下，整个集成过程应该只需要几分钟，所以让您团队或组织中的其他开发人员与您的SDK集成，并检查需要多长时间。</li></ul><h1 id="d546" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">可量测性</h1><p id="fc22" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">为了确保您的SDK支持大量用户和设备，请采取以下步骤:</p><ul class=""><li id="394f" class="ku kv in jm b jn jo jr js jv kw jz kx kd ky kh kz la lb lc bi translated">尝试在后台线程上完成所有繁重的提升和计算，因为它可以在低端设备上运行，因此它需要尽可能快，并在所有设备上正常工作。</li><li id="0fd2" class="ku kv in jm b jn ld jr le jv lf jz lg kd lh kh kz la lb lc bi translated">监控内存和电池使用情况，因为它们会影响运行SDK的应用程序。</li></ul><p id="d927" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">我知道我可能没有说什么新东西，但我的主要观点是，当你编写SDK时，你对运行它的设备的控制要少得多，你不知道它将用于什么目的，所以它也需要准备好并针对性能关键型应用进行优化。</p><h1 id="8d53" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">安全性</h1><p id="8571" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">编写SDK时，安全性是最重要的事情之一:</p><ul class=""><li id="5154" class="ku kv in jm b jn jo jr js jv kw jz kx kd ky kh kz la lb lc bi translated">不要将敏感数据保存在设备上，如果必须加密的话</li><li id="f6c4" class="ku kv in jm b jn ld jr le jv lf jz lg kd lh kh kz la lb lc bi translated">确保与服务器的所有通信都是SSL加密的，并使用SSL固定</li><li id="4610" class="ku kv in jm b jn ld jr le jv lf jz lg kd lh kh kz la lb lc bi translated">删除生产中的所有日志，以避免意外暴露敏感数据</li></ul><p id="0dce" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">例如，这里有一篇非常深入的文章，讲述了如何让您的应用/SDK更加安全，并为您提供了许多关于安全问题以及如何避免这些问题的见解:</p><div class="ml mm gp gr mn mo"><a rel="noopener  ugc nofollow" target="_blank" href="/how-to-secure-secrets-in-android-android-security-01-a345e97c82be"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd io gy z fp mt fr fs mu fu fw im bi translated">如何保护机密🔑在Android中— Android Security-01</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">在构建处理API、从服务器接收的令牌的应用程序时，安全性是一个关键要求…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">blog.kotlin-academy.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc ks mo"/></div></div></a></div><div class="ml mm gp gr mn mo"><a rel="noopener  ugc nofollow" target="_blank" href="/secure-secrets-in-android-using-jetpack-security-in-depth-android-security-02-4026b8e012f4"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd io gy z fp mt fr fs mu fu fw im bi translated">如何保护机密🔑在Android中(深入)— Android安全-02</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">在google I/O 2019中，Android团队发布了名为Jetpack Security的安全加密库，以方便开发人员…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">blog.kotlin-academy.com</p></div></div><div class="mx l"><div class="nd l mz na nb mx nc ks mo"/></div></div></a></div><h1 id="c169" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated"><strong class="ak">灵活性</strong></h1><p id="22ed" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">不同的开发人员有不同的技术偏好，因此SDK应该非常通用和灵活。<br/>例如，使用JSON或Google Protocol Buffers这样的数据类型作为API的输入和输出，因为这给开发者带来了更多的灵活性，也更容易使用。</p><h1 id="4289" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">测试</h1><p id="3826" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">开发SDK时，测试是必不可少的一部分，因为它增加了另一层可靠性，使代码不容易出现错误和崩溃。有许多很棒的框架可以帮助你进行测试，比如Mockito。<br/> Mockito是一个非常流行的框架，用于在测试过程中模仿依赖关系，它适用于Java和Kotlin:</p><div class="ml mm gp gr mn mo"><a href="https://site.mockito.org/" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd io gy z fp mt fr fs mu fu fw im bi translated">Mockito框架站点</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">Szczepan Faber and friends为您提供摩奇托。第一批在生产中使用Mockito的工程师是…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">site.mockito.org</p></div></div><div class="mx l"><div class="ne l mz na nb mx nc ks mo"/></div></div></a></div><h1 id="0a51" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">证明文件</h1><p id="ef80" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">作为开发人员，我们经常倾向于忽略文档部分，但是在SDK中，这是至关重要的。由于不同公司的其他人会阅读你的文档，你需要确保文档清晰易懂。<br/>良好的文档意味着:</p><ul class=""><li id="3ddc" class="ku kv in jm b jn jo jr js jv kw jz kx kd ky kh kz la lb lc bi translated">确切地写API方法做什么。</li><li id="21f2" class="ku kv in jm b jn ld jr le jv lf jz lg kd lh kh kz la lb lc bi translated">编写方法期望的参数和返回的内容。</li><li id="5ff1" class="ku kv in jm b jn ld jr le jv lf jz lg kd lh kh kz la lb lc bi translated">万一方法可能抛出异常，写下所有的异常以及触发异常的原因。</li><li id="ee59" class="ku kv in jm b jn ld jr le jv lf jz lg kd lh kh kz la lb lc bi translated">如果方法是同步/异步，则写入。</li><li id="c5f4" class="ku kv in jm b jn ld jr le jv lf jz lg kd lh kh kz la lb lc bi translated">写下方法是否有开发人员应该知道的边缘情况。</li></ul><p id="1060" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">例如，Dokka是一个很好的工具，可以帮助您处理文档，它可以根据文档自动生成网页:</p><div class="ml mm gp gr mn mo"><a href="https://github.com/Kotlin/dokka" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab fo"><div class="mq ab mr cl cj ms"><h2 class="bd io gy z fp mt fr fs mu fu fw im bi translated">GitHub—kot Lin/do kka:kot Lin的文档引擎</h2><div class="mv l"><h3 class="bd b gy z fp mt fr fs mu fu fw dk translated">Dokka是Kotlin的文档引擎，执行与javadoc for Java相同的功能。就像科特林本身一样…</h3></div><div class="mw l"><p class="bd b dl z fp mt fr fs mu fu fw dk translated">github.com</p></div></div><div class="mx l"><div class="nf l mz na nb mx nc ks mo"/></div></div></a></div><p id="e1b0" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它适用于Java和Kotlin文件。</p><p id="5526" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你可以做的第二件事是将你的文档发送给你公司内部其他团队的开发人员，以确保他们也能清楚地理解。</p><h1 id="c911" class="li lj in bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">摘要</h1><p id="b5a3" class="pw-post-body-paragraph jk jl in jm b jn mg jp jq jr mh jt ju jv mi jx jy jz mj kb kc kd mk kf kg kh ig bi translated">第一次开发SDK可能是一项非常具有挑战性的任务，所以我希望这些技巧和指南能够帮助您理解从哪里开始，如何设计它，以及如何以更好的方式开发它。感谢你阅读我的文章，希望你喜欢🙂</p></div><div class="ab cl ng nh hr ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ig ih ii ij ik"><figure class="kj kk kl km gt kn gh gi paragraph-image"><a href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a"><div class="gh gi nn"><img src="../Images/8769f75c3f2097afdaf2f4c1917f0a47.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wO8mm8yUyW3LgPDHBomGPg.png"/></div></a></figure></div></div>    
</body>
</html>