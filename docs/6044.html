<html>
<head>
<title>Making Pinterest HTTPS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">制作Pinterest HTTPS</h1>
<blockquote>原文：<a href="https://medium.com/pinterest-engineering/making-pinterest-https-637ec925a8ad?source=collection_archive---------4-----------------------#2015-03-13">https://medium.com/pinterest-engineering/making-pinterest-https-637ec925a8ad?source=collection_archive---------4-----------------------#2015-03-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="85eb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Paul Moreno | Pinterest安全工程负责人，云计算</p><p id="cf8e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Pinner <a class="ae jc" href="https://engineering.pinterest.com/post/111577153239/fighting-spam-at-pinterest" rel="noopener ugc nofollow" target="_blank">安全</a>对我们来说是重中之重，所以今年早些时候，我们加入了越来越多的完全HTTPS网站的行列。随着我们与Pinners建立信任，它一下子就显著提高了安全性。从寻找合适的CDN提供商合作伙伴开始，迁移到HTTPS带来了许多意料之中和意料之外的工程挑战。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/dcdf139b2c4253a3dc7d0802c5fa5344.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/format:webp/0*nP4vMS3SYzi4PcTZ.png"/></div></figure><h2 id="f1ab" class="jl jm hh bd jn jo jp jq jr js jt ju jv ip jw jx jy it jz ka kb ix kc kd ke kf bi translated">预期挑战</h2><p id="f08c" class="pw-post-body-paragraph ie if hh ig b ih kg ij ik il kh in io ip ki ir is it kj iv iw ix kk iz ja jb ha bi translated">我们发现并缓解了迁移发现过程中的许多技术挑战。最大的挑战之一是与我们的CDN提供商合作，他们支持HTTPS和我们的证书。我们还知道在HTTPS分发CDN图像的成本可能会高得多。其他技术挑战包括:</p><ul class=""><li id="e6a4" class="kl km hh ig b ih ii il im ip kn it ko ix kp jb kq kr ks kt bi translated">在源文件中显示硬编码的HTTP URLs和函数</li><li id="34a5" class="kl km hh ig b ih ku il kv ip kw it kx ix ky jb kq kr ks kt bi translated">性能影响</li><li id="fc5a" class="kl km hh ig b ih ku il kv ip kw it kx ix ky jb kq kr ks kt bi translated">旧浏览器支持</li><li id="1927" class="kl km hh ig b ih ku il kv ip kw it kx ix ky jb kq kr ks kt bi translated">从HTTPS到HTTP站点的引用标头删除</li><li id="be2f" class="kl km hh ig b ih ku il kv ip kw it kx ix ky jb kq kr ks kt bi translated">混合内容警告(浏览器栏中的锁被破坏)</li></ul><h2 id="991d" class="jl jm hh bd jn jo jp jq jr js jt ju jv ip jw jx jy it jz ka kb ix kc kd ke kf bi translated">意想不到的挑战</h2><p id="ecc8" class="pw-post-body-paragraph ie if hh ig b ih kg ij ik il kh in io ip ki ir is it kj iv iw ix kk iz ja jb ha bi translated">一旦我们觉得可以开始测试了，我们就在英国启动了一项测试，在那里我们有一个活跃的Pinner社区。我们的测试显示对SEO的影响很小，对任何一个浏览器的影响都很小。直到我们将更大的网撒向全球观众，我们才看到以下其他挑战:</p><ul class=""><li id="980e" class="kl km hh ig b ih ii il im ip kn it ko ix kp jb kq kr ks kt bi translated">错过的CDN内容使“锁定”按钮坏了几个小时</li><li id="b195" class="kl km hh ig b ih ku il kv ip kw it kx ix ky jb kq kr ks kt bi translated">并非所有的站点地图文件都被更新为指向HTTPS域名</li><li id="7c49" class="kl km hh ig b ih ku il kv ip kw it kx ix ky jb kq kr ks kt bi translated">未知的Safari问题</li></ul><h2 id="8e39" class="jl jm hh bd jn jo jp jq jr js jt ju jv ip jw jx jy it jz ka kb ix kc kd ke kf bi translated">应对挑战</h2><p id="d4af" class="pw-post-body-paragraph ie if hh ig b ih kg ij ik il kh in io ip ki ir is it kj iv iw ix kk iz ja jb ha bi translated">尽管我们预料到了一些挑战，但我们能够用一支精干而快速的团队来应对这些意想不到的挑战。我们是这样做的:</p><ul class=""><li id="6452" class="kl km hh ig b ih ii il im ip kn it ko ix kp jb kq kr ks kt bi translated"><em class="kz">坏了的“别住它”按钮。</em>我们能够通过将DNS快速更换为新的CDN提供商来快速缓解这一问题。</li><li id="c1be" class="kl km hh ig b ih ku il kv ip kw it kx ix ky jb kq kr ks kt bi translated"><em class="kz">推荐割台拆除器问题。</em>我们使用了一个<a class="ae jc" href="https://wiki.whatwg.org/wiki/Meta_referrer" rel="noopener ugc nofollow" target="_blank"> meta referrer头</a>来支持对HTTP站点的HTTPS跟踪。</li><li id="95ab" class="kl km hh ig b ih ku il kv ip kw it kx ix ky jb kq kr ks kt bi translated"><em class="kz">未知的Safari问题。</em>我们在英国的实验提供的数据显示，一小部分用户在迁移后出现登录问题。我们向Safari用户指出了这一点，这使我们能够开始调查根本原因。</li></ul><p id="46c7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，拥有多家支持HTTPS的CDN提供商为我们提供了性能选择和商业杠杆。</p><p id="fcaf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，我们通过启用加密增强了Pinners的隐私，同时也阻止了中间人攻击、会话劫持、内容注入等方式的利用。这也为未来可能需要HTTPS推出的产品铺平了道路。最后，迁移到HTTPS导致注册量一天增加了10 %(最大值),因为我们能够消除从HTTP到HTTPS注册页面的重定向流。</p><p id="80aa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将继续我们的HTTPS之旅，进一步增强包括HTTP严格传输安全(HSTS)，这将防止SSL剥离。我们还计划与Chromium合作预加载我们的域名，以防止用户第一次访问Pinterest时SSL被剥离。</p><h2 id="0a91" class="jl jm hh bd jn jo jp jq jr js jt ju jv ip jw jx jy it jz ka kb ix kc kd ke kf bi translated">介绍我们的付费昆虫赏金计划</h2><p id="0d46" class="pw-post-body-paragraph ie if hh ig b ih kg ij ik il kh in io ip ki ir is it kj iv iw ix kk iz ja jb ha bi translated">在HTTPS迁移之前，我们犹豫要不要开放一个<a class="ae jc" href="https://bugcrowd.com/pinterest" rel="noopener ugc nofollow" target="_blank">付费的bug奖励计划</a>，因为只有HTTP存在一些已知的漏洞。现在，由于迁移，许多差距已经消除，我们很高兴地宣布，我们已经升级了具有支付结果的<a class="ae jc" href="https://engineering.pinterest.com/post/87023541604/introducing-our-bug-bounty-program" rel="noopener ugc nofollow" target="_blank">计划</a>，自推出付费计划以来，报告数量增加了10倍。我们高度鼓励whitehat黑客社区使用我们的程序并报告错误，这有助于我们保持Pinners的安全并提高我们的安全态势。</p><p id="dafc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你对这样的安全工程挑战感兴趣，<a class="ae jc" href="https://about.pinterest.com/en/careers/engineering" rel="noopener ugc nofollow" target="_blank">加入我们的团队</a>！</p><p id="03ee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kz"> Paul Moreno是云团队的安全工程主管。</em></p><p id="0083" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">移居HTTPS并不是一帆风顺的。这需要不同团队的几个成员来完成，并且有许多活动部件。特别感谢工程师Amine Kamel、Chris Danford、Danilo斯蒂法诺维奇和Anna Majkowska，他们努力工作，让Pinterest成为一个更安全的地方。</p><p id="0b60" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kz">获取Pinterest工程新闻和更新，关注我们的工程</em><a class="ae jc" href="https://www.pinterest.com/malorie/pinterest-engineering-news/" rel="noopener ugc nofollow" target="_blank"><em class="kz">Pinterest</em></a><em class="kz">，</em> <a class="ae jc" href="https://www.facebook.com/pinterestengineering" rel="noopener ugc nofollow" target="_blank"> <em class="kz">脸书</em> </a> <em class="kz">和</em> <a class="ae jc" href="https://twitter.com/PinterestEng" rel="noopener ugc nofollow" target="_blank"> <em class="kz">推特</em> </a> <em class="kz">。有兴趣加入团队吗？查看我们的</em> <a class="ae jc" href="https://about.pinterest.com/en/careers/engineering-product" rel="noopener ugc nofollow" target="_blank"> <em class="kz">招聘网站</em> </a> <em class="kz">。</em></p></div></div>    
</body>
</html>