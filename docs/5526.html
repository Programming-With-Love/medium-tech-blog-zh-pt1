<html>
<head>
<title>Understanding indexing for Search in Oracle Commerce Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解Oracle商务云中的搜索索引</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/understanding-indexing-for-search-in-oracle-cloud-commerce-e4829109c03a?source=collection_archive---------0-----------------------#2018-11-15">https://medium.com/oracledevs/understanding-indexing-for-search-in-oracle-cloud-commerce-e4829109c03a?source=collection_archive---------0-----------------------#2018-11-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="7f40" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当搜索您的Oracle Commerce Cloud catalog时，有许多端点和选项可能很难跟踪。在本文中，我将讨论索引发生的各种方式，以及何时调用各种端点。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><p id="d808" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您的产品和SKU的记录系统是Oracle云商务目录。在发布期间的某些时候，数据会从目录导出到搜索索引中。有几种类型的导出和索引过程可以发生(按持续时间从长到短的顺序排列):</p><ol class=""><li id="bdd5" class="jj jk hh ig b ih ii il im ip jl it jm ix jn jb jo jp jq jr bi translated"><strong class="ig hi">基线完全导出</strong> —这将目录完全重新导出到搜索索引。这通常需要在进行大的“模式”更改时发生。这可能包括配置新的站点、语言和二级目录。在这样的导出之后，搜索索引被完全重建。对于以前使用Oracle Commerce进行内部部署的客户来说，这是传统的基准行为。基线完全出口应该是最罕见的类型。</li><li id="2183" class="jj jk hh ig b ih js il jt ip ju it jv ix jw jb jo jp jq jr bi translated"><strong class="ig hi">基线导出</strong> —这与上面的类似，除了一个重要的变化:只有已经改变的产品记录从目录中导出。接下来，搜索索引被完全重建。对于不需要导出目录的某些类型的搜索索引架构更改，通常会发生这种情况。例如，这可以包括添加新产品类型、价格列表组、重命名集合等。对于来自Oracle Commerce内部的客户来说，这是一项改善索引时间的改变。此功能有时被称为“智能导出”，因为目录只智能地导出实际更改的数据。</li><li id="d6b7" class="jj jk hh ig b ih js il jt ip ju it jv ix jw jb jo jp jq jr bi translated"><strong class="ig hi">部分导出</strong> —最常见的场景，只导出已更改的产品，并且只更新搜索索引中的已更改产品。这包括增加新产品、改变产品、媒体、价格等。</li></ol><p id="c48f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在OCC管理中，当您在对产品和目录进行更改后调用发布时，它将根据一组更改选择基线、基线完整或部分索引。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="ee49" class="jx jy hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><strong class="ak">配置变更和索引</strong></h1><p id="c676" class="pw-post-body-paragraph ie if hh ig b ih kv ij ik il kw in io ip kx ir is it ky iv iw ix kz iz ja jb ha bi translated">您可以对搜索进行许多配置更改，理解索引如何促进这些更改非常重要。</p><p id="18e7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，您所做的许多更改都是可预览的:这意味着您可以进行更改，然后立即在预览店面中查看这些更改(通过在OCC管理中单击预览)。</p><p id="5e17" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">其中包括:</p><ul class=""><li id="cc6f" class="jj jk hh ig b ih ii il im ip jl it jm ix jn jb la jp jq jr bi translated">宝库</li><li id="8580" class="jj jk hh ig b ih js il jt ip ju it jv ix jw jb la jp jq jr bi translated">关键词重定向</li><li id="6020" class="jj jk hh ig b ih js il jt ip ju it jv ix jw jb la jp jq jr bi translated">相关性排名策略的变化，或动态监管工具的使用(<a class="ae lb" rel="noopener" href="/oracledevs/dynamic-curation-of-product-listings-with-oracle-commerce-cloud-3a6de6f01450">https://medium . com/Oracle devs/Dynamic-Curation-of-product-listings-with-Oracle-commerce-cloud-3a6de 6f 01450</a>)</li><li id="681c" class="jj jk hh ig b ih js il jt ip ju it jv ix jw jb la jp jq jr bi translated">刻面排序</li><li id="df7e" class="jj jk hh ig b ih js il jt ip ju it jv ix jw jb la jp jq jr bi translated">使用可搜索字段排名工具更新您的搜索界面</li></ul><p id="170e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在上面的场景中，只需进行更改，就可以在预览店面中进行测试。然而，我们如何对我们的现场店面进行这些改变呢？</p><p id="5f45" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">答:</strong>当建立索引时，流程的最后一步是将这些内容推广到实时店面。因此，为了促进这些变化，我们开始索引。(端点调用将在下一节讨论)</p><p id="1c6e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一个很常见的伎俩是这样的:对一个产品做一个无意义的改动(比如在产品描述字段加一个空格)。请转到“发布”并发布该更改，索引将会出现，这将促进我们的内容更改。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="2841" class="jx jy hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><strong class="ak">模式改变和索引</strong></h1><p id="6f42" class="pw-post-body-paragraph ie if hh ig b ih kv ij ik il kw in io ip kx ir is it ky iv iw ix kz iz ja jb ha bi translated">对模式的更改是不可预见的，需要基线或基线完全导出。这意味着当索引完成时，您将同时看到预览和实时店面中反映的更改。</p><p id="56cd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">模式更改的一些示例如下:</p><ul class=""><li id="ad7c" class="jj jk hh ig b ih ii il im ip jl it jm ix jn jb la jp jq jr bi translated">使用/gsadmin/v1/cloud/attributes端点定义新的属性或维度</li><li id="9513" class="jj jk hh ig b ih js il jt ip ju it jv ix jw jb la jp jq jr bi translated">使用/gsadmin/v1/cloud/attributes端点定义数据操作</li><li id="069d" class="jj jk hh ig b ih js il jt ip ju it jv ix jw jb la jp jq jr bi translated">定义优先规则</li><li id="7248" class="jj jk hh ig b ih js il jt ip ju it jv ix jw jb la jp jq jr bi translated">首次使用/gsdata终结点索引非目录内容</li></ul><p id="d887" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这种情况下，您需要开始基线更新:这个过程将重建搜索索引。但是，您不一定需要开始基线完全导出。请记住，这将重新导出整个目录。因为我们在搜索端有了目录数据，所以我们只需要开始基线更新来重建索引。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="25a8" class="jx jy hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><strong class="ak">/cc admin/v1/search/index端点</strong></h1><p id="8e22" class="pw-post-body-paragraph ie if hh ig b ih kv ij ik il kw in io ip kx ir is it ky iv iw ix kz iz ja jb ha bi translated">要启动发布之外的索引，我们可以使用/ccadmin/v1/search/index端点，正式文档如下:</p><p id="ffad" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae lb" href="https://docs.oracle.com/en/cloud/saas/commerce-cloud/cxocc/op-ccadmin-v1-search-index-post.html" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en/cloud/SaaS/commerce-cloud/cxocc/op-cc admin-v1-search-index-post . html</a></p><p id="b522" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">POST /ccadmin/v1/search/index</p><p id="cb93" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作为有效负载，您应该指定:</p><p id="9597" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">完整基线:{ "op ":"完整基线-导出" }</p><p id="4f19" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">基线:{ "op" : "baseline" }</p><p id="fcf4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">部分:{ "op" : "partial" }</p><p id="2b8f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">执行GET /ccadmin/v1/search/index将返回关于索引历史的详细JSON。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="dd41" class="jx jy hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated"><strong class="ak">出现问题时执行基线完全导出</strong></h1><p id="d58f" class="pw-post-body-paragraph ie if hh ig b ih kv ij ik il kw in io ip kx ir is it ky iv iw ix kz iz ja jb ha bi translated">如果目录和搜索索引不同步，运行基线导出有时可以解决问题。过去，曾出现过某些目录更改(如添加新的价格列表组)未被正确跟踪的问题，只有通过执行基线完全导出才能完全解决问题。</p><p id="2801" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您发现这种情况，请联系支持部门。但是，一般来说，您不必定期手动调用基准完全导出。这些是最耗时的索引场景。</p></div><div class="ab cl jc jd go je" role="separator"><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh ji"/><span class="jf bw bk jg jh"/></div><div class="ha hb hc hd he"><h1 id="9148" class="jx jy hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">结论</h1><p id="613b" class="pw-post-body-paragraph ie if hh ig b ih kv ij ik il kw in io ip kx ir is it ky iv iw ix kz iz ja jb ha bi translated">希望本文能帮助您理解搜索索引是如何工作的，以及如何(以及何时)调用各种索引过程。</p><blockquote class="lc ld le"><p id="10ef" class="ie if lf ig b ih ii ij ik il im in io lg iq ir is lh iu iv iw li iy iz ja jb ha bi translated">本文表达的观点是我个人的，不代表我的雇主的观点。针对Oracle产品描述的任何特性或功能的开发、发布和时间安排仍由Oracle全权决定。</p></blockquote></div></div>    
</body>
</html>