<html>
<head>
<title>Implementing Handle Patch Method in JET Offline Toolkit</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在JET离线工具包中实现句柄补丁方法</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/implementing-handle-patch-method-in-jet-offline-toolkit-f6d8e418f4b0?source=collection_archive---------0-----------------------#2018-09-12">https://medium.com/oracledevs/implementing-handle-patch-method-in-jet-offline-toolkit-f6d8e418f4b0?source=collection_archive---------0-----------------------#2018-09-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="68ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当离线执行补丁请求时，JET Offline Persistence Toolkit将记录该请求，并在在线时将其同步到后端。但它不会更新存储在缓存中的数据，这是设计的。由于缓存的数据不会更新，针对脱机缓存的搜索查询不会产生基于最新更改的结果。为了解决这个问题，我们需要通过提供句柄补丁方法来自己实现缓存更新。</p><p id="cdf5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注册持久性管理器时，通过requestHandlerOverride属性配置句柄修补程序:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/06ae7e4c5564ccb27821ec4f4a8fbd80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-EeVr4s4mUzZp1eELnd27w.png"/></div></div></figure><p id="aa96" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">处理补丁的示例实现。仅在脱机状态下执行修补程序时，才会调用此方法。我们必须从请求中读取信息，并将其传递给缓存存储。基于关键字在缓存中搜索条目，更新记录并将信息更新回存储:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jo"><img src="../Images/0c70057561f95eea9fee5501ab4b9b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ljmq_IPkOukpXiyvW9R6Pg.png"/></div></div></figure><p id="0019" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们进行离线测试——将浏览器选项卡切换到离线状态(可以使用Chrome浏览器开发工具)。从JET Offline Persistence Toolkit中搜索并检查日志—它会根据缓存存储自动执行搜索:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jp"><img src="../Images/56ce2c2f21bbee49e35955864af5f769.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ek1Jx37s1swFvMu3-arRbg.png"/></div></div></figure><p id="8bd6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">离线时更新相同的记录—将记录补丁请求以供以后同步。我们的handle patch方法将被调用，以将更改写入缓存存储:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jq"><img src="../Images/ec9f6c604d9564bce0b2b5394fb21a13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U-xdrEwdIbPGzRSn3vx-Iw.png"/></div></div></figure><p id="b95a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您将在日志中注意到，从handle patch方法执行的操作。它在缓存中按键查找记录并更新它:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jr"><img src="../Images/305c733150c6b8f94cc3696f1651e171.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WCsJl_f9wGYipMqf-G2RKA.png"/></div></div></figure><p id="48d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">按更新值搜索-找到更新值并从缓存存储中返回:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es js"><img src="../Images/2be109eb59c6ccd9d6f2e11f9ce1ea35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rxZKkhP44h33v-nd3Lch8w.png"/></div></div></figure><p id="e286" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">代码可以在<a class="ae jt" href="https://github.com/abaranovskis-redsamurai/persistencejetapp" rel="noopener ugc nofollow" target="_blank"> GitHub </a>库中找到。</p></div><div class="ab cl ju jv go jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="ha hb hc hd he"><p id="d762" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kb">原载于2018年9月12日</em><a class="ae jt" href="https://andrejusb.blogspot.com/2018/09/implementing-handle-patch-method-for.html" rel="noopener ugc nofollow" target="_blank"><em class="kb">【andrejusb.blogspot.com</em></a><em class="kb">。</em></p></div></div>    
</body>
</html>