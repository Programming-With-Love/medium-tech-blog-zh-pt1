<html>
<head>
<title>From Zero to Deployed with React, TravisCI and Surge</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">从零到部署React、TravisCI和Surge</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/from-zero-to-deployed-with-react-travisci-and-surge-9be99350cf8b?source=collection_archive---------0-----------------------#2018-01-27">https://medium.com/quick-code/from-zero-to-deployed-with-react-travisci-and-surge-9be99350cf8b?source=collection_archive---------0-----------------------#2018-01-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="499a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">更新</strong>:这篇文章是不久前写的，虽然一些概念仍然是可靠的，但从头到尾需要得到的确切代码已经改变，我近期没有时间更新它。我仍然希望它能够帮助一些读者看到这个过程一步一步地走过，尽管这些天像<a class="ae jc" href="https://www.netlify.com" rel="noopener ugc nofollow" target="_blank"> Netlify </a>和<a class="ae jc" href="https://zeit.co/home" rel="noopener ugc nofollow" target="_blank"> Now </a>这样的服务使这个过程更加容易。</p><p id="024b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你在过去的几年里做过网站开发，你就会知道建立网站是多么的耗时。不仅仅是内容的设计、编码和测试，还包括内容的实际部署和管理。通常，对于大多数静态内容网站，你最终会得到一个或多个HTML文档、一些CSS、图片、字体和JS代码，需要通过FTP上传到某个地方的某个服务器上，整个过程可能有点痛苦。你可能知道也可能不知道，有一种方法可以用一些现代工具更简单地做到这一切。今天，我将向您展示如何利用<code class="du jd je jf jg b"><a class="ae jc" href="https://github.com/facebook/create-react-app" rel="noopener ugc nofollow" target="_blank">create-react-app</a></code>、<a class="ae jc" href="https://travis-ci.org/" rel="noopener ugc nofollow" target="_blank"> TravisCI </a>和<a class="ae jc" href="https://surge.sh" rel="noopener ugc nofollow" target="_blank"> Surge </a>通过几个简单的步骤快速启动、测试和部署一个自举项目到互联网。</p><p id="a370" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这篇文章假设你至少听说过React，你已经在你的机器上安装了NodeJS，并且最近做了一些web开发。而且强烈推荐2021年<a class="ae jc" href="https://blog.coursesity.com/popular-javascript-frameworks/" rel="noopener ugc nofollow" target="_blank">学Javascript </a>编程。</p></div><div class="ab cl jh ji go jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="ha hb hc hd he"><h1 id="b6f6" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">入门指南</h1><p id="eca2" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">首先，您需要从命令行运行<code class="du jd je jf jg b">npm install --global create-react-app</code>来获取<code class="du jd je jf jg b">create-react-app</code>。之后，您可以通过导航到您想要创建应用程序的目录并键入<code class="du jd je jf jg b">create-react-app myHelloWorld</code>来轻松启动项目。更新:看来<code class="du jd je jf jg b">create-react-app</code>不再支持骆驼案了。对于这篇博客的剩余部分，假设无论你在哪里看到<code class="du jd je jf jg b">myHelloWorld</code>都用<code class="du jd je jf jg b">my-hello-world</code>代替。我会尝试更新所有参考资料，但我可能会错过一个或有一个过时的截图或一些分散的…</p><p id="e4b3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">整个过程看起来有点像这样:</p><pre class="kr ks kt ku fd kv jg kw kx aw ky bi"><span id="e8fc" class="kz jp hh jg b fi la lb l lc ld">$ npm install --global create-react-app<br/>$ cd /path/to/folder<br/>$ create-react-app my-hello-world</span></pre><p id="450e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在您已经有了一个可以在文本编辑器中打开的React应用程序——我使用的是<a class="ae jc" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> Visual Studio代码</a>。</p><p id="7c13" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jd je jf jg b">create-react-app my-hello-world</code>的输出会给你一些后续步骤，比如<code class="du jd je jf jg b">cd my-hello-world</code>和<code class="du jd je jf jg b">npm start</code>。当您在VSCode中打开这个项目时，您将会看到类似如下的内容:</p><figure class="kr ks kt ku fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es le"><img src="../Images/775f87a0b396b3b421f1beb68b7cd210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s89O6hucL-P3sBueV302lQ.png"/></div></div><figcaption class="lm ln et er es lo lp bd b be z dx">The main App.js file in a bootstrapped create-react-app project</figcaption></figure><p id="513a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以看到，这个文件包含了我们应用程序的所有布局和内容。接下来，删除App.js中的所有内容，并添加以下内容:</p><pre class="kr ks kt ku fd kv jg kw kx aw ky bi"><span id="7653" class="kz jp hh jg b fi la lb l lc ld">import React from 'react';<br/>import './App.css';</span><span id="445e" class="kz jp hh jg b fi lq lb l lc ld">export default () =&gt; (<br/>  &lt;div <em class="lr">className</em>="App"&gt;<br/>    &lt;header <em class="lr">className</em>="App-header"&gt;<br/>      &lt;h1 <em class="lr">className</em>="App-title"&gt;Welcome To My Hello World!&lt;/h1&gt;<br/>    &lt;/header&gt;<br/>    &lt;p <em class="lr">className</em>="App-intro"&gt;<br/>      My name is type_your_name_here. Welcome, and hello!<br/>    &lt;/p&gt;<br/>  &lt;/div&gt;<br/>);</span></pre><p id="1744" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">确保将<code class="du jd je jf jg b">type_your_name_here</code>部分替换成你的名字，或者任何你想要的东西。这个例子是特意简化的，以便您可以继续下一步。因为这并不意味着是React的入门，我将跳过解释这一点，但足以说，如果你一直在用老方法做web开发，你会喜欢它，并想在React中做任何事情，因为它简化了很多。如果你需要这方面的速成课程，<a class="ae jc" href="https://code.tutsplus.com/series/react-crash-course-for-beginners--cms-1204" rel="noopener ugc nofollow" target="_blank">这个</a>似乎是一个很好的资源。</p></div><div class="ab cl jh ji go jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="ha hb hc hd he"><h1 id="2ca2" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">继续前进</h1><p id="cef5" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">在您可以设置一些奇特的自动化构建和部署之前，只需再多几个步骤。通过运行<code class="du jd je jf jg b">npm install --global surge</code>安装浪涌。在等待安装的过程中，您可以观看此视频，快速了解什么是Surge，以及它能做什么:</p><figure class="kr ks kt ku fd lf"><div class="bz dy l di"><div class="ls lt l"/></div><figcaption class="lm ln et er es lo lp bd b be z dx">Surge introduction from <a class="ae jc" href="https://surge.sh" rel="noopener ugc nofollow" target="_blank">https://surge.sh</a> on how to deploy using Surge</figcaption></figure><p id="2133" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">安装完成后，你就知道Surge有多棒了，你可以运行以下命令来构建应用程序并设置你的Surge帐户:</p><pre class="kr ks kt ku fd kv jg kw kx aw ky bi"><span id="c9d5" class="kz jp hh jg b fi la lb l lc ld">$ npm run build &amp;&amp; surge</span></pre><p id="e142" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在应用程序建立后，Surge会要求你输入电子邮件和密码来建立你的账户。当到达<code class="du jd je jf jg b">project path:</code>时，一定要把<code class="du jd je jf jg b">/build</code>附加到末尾，因为那是<code class="du jd je jf jg b">create-react-app</code>放代码的地方。下一个提示是<code class="du jd je jf jg b">domain:</code>，输入<code class="du jd je jf jg b">&lt;your_name_here&gt;.surge.sh</code>。</p><p id="f4b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果到目前为止您一直在学习，那么您将已经引导了一个React应用程序，构建了它，并且在运行上面的<code class="du jd je jf jg b">surge</code>命令之后，实际上在<code class="du jd je jf jg b">&lt;your_name_here&gt;.surge.sh</code>将它部署到了互联网上。请随意查看部署在<a class="ae jc" href="http://shawnpetros.surge.sh" rel="noopener ugc nofollow" target="_blank"> shawnpetros.surge.sh </a>的mine。对于静态网页内容的自动化部署来说，这是一个很好的开始，但是让我们更进一步，通过GitHub和TravisCI来实现它！</p><h1 id="5e74" class="jo jp hh bd jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl bi translated">GitHub和TravisCI</h1><p id="104c" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">如果你从未使用过TravisCI或任何构建工具，那么你会喜欢这个。Travis是一个很棒的工具，它简化了很多你以前不得不自己做的事情，或者为其编写脚本，比如将文件FTP到你的主机提供商。确保你进入GitHub并为<code class="du jd je jf jg b">my-hello-world</code>创建新的回购协议，然后前往<a class="ae jc" href="https://travis-ci.org" rel="noopener ugc nofollow" target="_blank"> TravisCI </a>并使用你的GitHub账户登录，这样你就可以很容易地整合这两者。Travis应该有一个存储库列表，并允许您通过单击想要构建的存储库的开关来打开自动化。现在就为你的<code class="du jd je jf jg b">my-hello-world</code>回购做吧。</p><p id="52bd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在回到代码中，在项目的根目录下创建一个名为<code class="du jd je jf jg b">.travis.yml</code>的文件，并添加以下内容:</p><pre class="kr ks kt ku fd kv jg kw kx aw ky bi"><span id="7661" class="kz jp hh jg b fi la lb l lc ld">language: node_js<br/>node_js:<br/>  - "stable"<br/>cache:<br/>  directories:<br/>    - node_modules<br/>script:<br/>  - npm test<br/>  - npm run build<br/>deploy:<br/>  provider: surge<br/>  skip_cleanup: true<br/>  domain: &lt;my_name_here&gt;.surge.sh<br/>  project: ./build/<br/>on:<br/>  branch: master</span></pre><p id="7635" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">确保将<code class="du jd je jf jg b">deploy</code>下的<code class="du jd je jf jg b">domain</code>行更改为您在运行Surge时使用的域，这样自动化将在每次运行时将代码部署到相同的域。</p><p id="df30" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">文件的其余部分基本上告诉Travis使用最新的稳定节点包，缓存<code class="du jd je jf jg b">node_modules</code>目录，运行内置于<code class="du jd je jf jg b">create-react-app</code>中的测试和构建脚本，然后当对存储库上的主分支进行推送时，使用Surge部署提供程序将<code class="du jd je jf jg b">build</code>文件夹推送到位于由Surge托管的<code class="du jd je jf jg b">&lt;my_name_here&gt;.surge.sh</code>的互联网上。这基本上是魔术。</p><p id="77bf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们需要回到特拉维斯和设置一些事情。Surge将需要您的电子邮件地址和令牌，以便您从TravisCI构建工具登录。要获得这个令牌，在命令行中运行<code class="du jd je jf jg b">surge token</code>,复制第二个令牌行的输出，显然我屏蔽了我的，但它看起来应该是这样的:</p><pre class="kr ks kt ku fd kv jg kw kx aw ky bi"><span id="f8e7" class="kz jp hh jg b fi la lb l lc ld">Surge - surge.sh</span><span id="a1cf" class="kz jp hh jg b fi lq lb l lc ld">              email: <a class="ae jc" href="mailto:shawn.petros@gmail.com" rel="noopener ugc nofollow" target="_blank">shawn.petros@gmail.com</a><br/>              token: *****************<br/>              token: &lt;masked&gt;                 &lt;-- copy this</span></pre><p id="eeac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">打开开关后，转到Travis并点击您的<code class="du jd je jf jg b">my-hello-world</code>库的齿轮图标。如果您已经在之前的步骤中打开了它，那么您可以通过单击左侧面板中的repo，然后单击右侧菜单中的“更多选项”&gt;“设置”来找到设置。向下滚动页面到环境变量，并设置以下变量:</p><figure class="kr ks kt ku fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lz"><img src="../Images/91ba26161b34f01234b9ea4aad9d544e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0v7yJJq4g_yTaVTypYy90w.png"/></div></div><figcaption class="lm ln et er es lo lp bd b be z dx">Environment variables for Surge deployments</figcaption></figure><p id="7cb6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">其中<code class="du jd je jf jg b">SURGE_LOGIN</code>是你设置Surge up时使用的邮箱，<code class="du jd je jf jg b">SURGE_TOKEN</code>是你从<code class="du jd je jf jg b">surge token</code>的输出中复制的令牌。</p><p id="3993" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦你设置好了，现在你可以回到你的项目，设置你的git repo，提交你的修改，然后把它们上传到GitHub。</p><pre class="kr ks kt ku fd kv jg kw kx aw ky bi"><span id="4ac9" class="kz jp hh jg b fi la lb l lc ld">$ git init<br/>$ git add .<br/>$ git commit -m "first commit"<br/>$ git remote add origin https://github.com/&lt;username&gt;/&lt;reponame&gt;.git<br/>$ git push -u origin master</span></pre><p id="d366" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">完成代码后，您应该会看到Travis CI正在构建您的应用程序:</p><figure class="kr ks kt ku fd lf er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es ma"><img src="../Images/954c3cc77412e719e985138ced1b69b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z828mMFrBrmzLXN1etU76g.png"/></div></div><figcaption class="lm ln et er es lo lp bd b be z dx">Travis CI building your app</figcaption></figure><p id="efd6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果一切设置正确，您的构建应该通过，Travis应该已经将您的应用程序部署到<code class="du jd je jf jg b">&lt;your_name_here&gt;.surge.sh</code>。继续对您的<code class="du jd je jf jg b">App.js</code>进行更多的更改，并将它们上传到GitHub，以查看它们快速自动重新部署到您的网页。</p><h1 id="06d3" class="jo jp hh bd jq jr lu jt ju jv lv jx jy jz lw kb kc kd lx kf kg kh ly kj kk kl bi translated">后续步骤</h1><p id="53d8" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">使用这些工具还可以做更多的事情，比如使用Surge部署到一个自定义域——我的网站就是这样部署的。我希望这是对当前一些web开发工具的一个信息性的介绍，并且我能够向您展示如何利用这些工具来轻松快速地部署web应用程序和其他静态内容。</p></div><div class="ab cl jh ji go jj" role="separator"><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm jn"/><span class="jk bw bk jl jm"/></div><div class="ha hb hc hd he"><figure class="kr ks kt ku fd lf"><div class="bz dy l di"><div class="mb lt l"/></div></figure><p id="1872" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请点击👏按钮下面几下，以示支持！⬇⬇</p><p id="589c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">谢谢！别忘了<strong class="ig hi">关注下面的</strong>快速码。</p><blockquote class="mc"><p id="de07" class="md me hh bd mf mg mh mi mj mk ml jb dx translated">找到关于各种编程语言的<a class="ae jc" href="http://www.quickcode.co/" rel="noopener ugc nofollow" target="_blank">快速代码</a>的免费课程。获取<a class="ae jc" href="https://www.messenger.com/t/1493528657352302" rel="noopener ugc nofollow" target="_blank"> Messenger </a>的新更新。</p></blockquote></div></div>    
</body>
</html>