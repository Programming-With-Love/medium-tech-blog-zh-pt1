<html>
<head>
<title>SuperDelegate: The Better App Delegate</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">超级代表:更好的应用程序代表</h1>
<blockquote>原文：<a href="https://medium.com/square-corner-blog/superdelegate-the-better-app-delegate-93a5b704b231?source=collection_archive---------4-----------------------#2016-06-15">https://medium.com/square-corner-blog/superdelegate-the-better-app-delegate-93a5b704b231?source=collection_archive---------4-----------------------#2016-06-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="2567" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一个Swift框架，为所有iOS SDKs提供一致且无错误的应用程序委托API。</p><blockquote class="jc"><p id="41e1" class="jd je hh bd jf jg jh ji jj jk jl jb dx translated">注意，我们已经行动了！如果您想继续了解Square的最新技术内容，请访问我们的新家<a class="ae jm" href="https://developer.squareup.com/blog" rel="noopener ugc nofollow" target="_blank">https://developer.squareup.com/blog</a></p></blockquote><p id="b48a" class="pw-post-body-paragraph ie if hh ig b ih jn ij ik il jo in io ip jp ir is it jq iv iw ix jr iz ja jb ha bi translated"><em class="js">写的</em> <a class="jt ju ge" href="https://medium.com/u/5755ab427632?source=post_page-----93a5b704b231--------------------------------" rel="noopener" target="_blank">写的<em class="js">丹费德曼</em> </a> <em class="js">。</em></p><h1 id="3acf" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">我们值得更好的</h1><p id="b106" class="pw-post-body-paragraph ie if hh ig b ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb ha bi translated">如果您编写了一个iOS应用程序，那么您已经实现了一个UIApplicationDelegate。UIApplicationDelegate是我们的应用程序如何与iOS交互的核心，但API非常特殊。当由于通过3D Touch的快速动作而启动应用程序时，iOS将通知应用程序在<em class="js">应用程序(_:*FinishLaunching:) </em>方法和<em class="js">应用程序(_:performActionForShortcutItem:completion handler:)</em>中，除非应用程序通过返回<em class="js"> false </em>向iOS发出信号，表明它处理了<em class="js">应用程序(_:willFinishLaunching:) </em>中的快捷方式。处理URL(以及推送通知和用户活动项)甚至更糟。当一个应用程序用NSURL启动时，它将在<em class="js">应用程序(_:*FinishLaunching:) </em>方法和<em class="js">应用程序(_:openURL:options:) </em>方法中被通知，并且没有办法阻止<em class="js">应用程序(_:openURL:options:) </em>被调用，即使URL在<em class="js">应用程序(_:*FinishLaunching:) </em>期间被处理。</p><p id="0c98" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，UIApplicationDelegate协议没有回答一些关键问题。想知道客户是否点击了推送通知，或者通知是否由于内容可用标志而被发送？或者调用<em class="js">registerUserNotificationSettings(_:)</em>是否会在不提示客户访问的情况下静默工作？每个应用程序都需要为这些问题设计自己的解决方案。</p><h1 id="e571" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">打破生命周期变化</h1><p id="f9ba" class="pw-post-body-paragraph ie if hh ig b ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb ha bi translated">更糟糕的是，每个iOS版本和SDK都可能将未记录的重大更改引入应用程序生命周期。在iOS 8.4上，<em class="js">应用(_:handleWatchKitExtensionRequest:reply:)</em>在<em class="js">应用(_:didFinishLaunching:) </em>之前被调用，但在iOS 8.0–8.3上不是这样！如果一个应用程序试图在后台加载UI，iOS 8.0–8.2将会崩溃，除非该应用程序强制在<em class="js">应用程序(_:didFinishLaunching:) </em>内创建一个<em class="js">sharedicontext</em>。这样的例子不胜枚举。</p><p id="ec96" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">每次苹果在应用程序委托合同中引入一个新的怪癖，app store中的每个应用程序都必须找到这个怪癖并解决它，以确保他们的客户不会受到负面影响。</p><h1 id="402b" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">让我们一起努力吧</h1><p id="dff2" class="pw-post-body-paragraph ie if hh ig b ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb ha bi translated">让我们创建一个UIApplicationDelegate部落知识的中央存储库，而不是让每个开发人员都辛苦地学习这些怪癖。输入<a class="ae jm" href="https://github.com/square/SuperDelegate/" rel="noopener ugc nofollow" target="_blank">超级代表</a>。SuperDelegate采用了我们在Square学到的关于UIApplicationDelegate的所有东西，并把它变成了一个干净的应用程序委托API。SuperDelegate在iOS 8和9的所有版本中都是稳定的，并为您处理样板应用程序委托代码。它完全是用Swift编写的，我们今天对它进行开源。</p><p id="78ce" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">SuperDelegate确保唯一的通知、URL、用户活动项目和快捷方式只被发送到一个应用程序一次。当一个应用第一次注册用户通知后，SuperDelegate会自动在<em class="js">应用(_:willetenter foreground:)</em>上注册用户通知，这样一个应用总是知道推送通知权限的当前状态。当应用程序收到推送通知时，SuperDelegate会告诉应用程序客户是否点击了它。SuperDelegate保证它将在转发任何其他app delegate API调用之前调用<em class="js"> setupApplication() </em>和<em class="js">load interface(launch item:)</em>。采用这种干净、没有意外的API使得实现新的iOS功能变得更加容易和快速，并且将修复您现有实现中您甚至不知道的错误。</p><p id="6114" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们正在积极努力采用Swift 3.0和iOS 10 SDK，而且我们是公开进行的。随着我们在iOS 10 API中发现新的古怪之处，我们将提出问题并更新我们的<a class="ae jm" href="https://github.com/square/SuperDelegate/pull/2" rel="noopener ugc nofollow" target="_blank"> develop/v0.9 </a>分支。我们欢迎您继续关注，并鼓励您让我们知道您在API中发现了什么！</p></div><div class="ab cl ky kz go la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ha hb hc hd he"><div class="lf lg lh li fd lj"><a rel="noopener follow" target="_blank" href="/@dfed"><div class="lk ab dw"><div class="ll ab lm cl cj ln"><h2 class="bd hi fi z dy lo ea eb lp ed ef hg bi translated">丹·费德曼</h2><div class="lq l"><h3 class="bd b fi z dy lo ea eb lp ed ef dx translated">请关注丹·费德曼在Medium上的最新活动。57个人在关注丹·费德曼，看看他们的故事…</h3></div><div class="lr l"><p class="bd b fp z dy lo ea eb lp ed ef dx translated">medium.com</p></div></div><div class="ls l"><div class="lt l lu lv lw ls lx ly lj"/></div></div></a></div></div></div>    
</body>
</html>