<html>
<head>
<title>Multi-tenancy in Mendix - Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">门迪克斯的多租户----第一部分</h1>
<blockquote>原文：<a href="https://medium.com/mendix/multi-tenancy-in-mendix-platform-part-i-463b8b892364?source=collection_archive---------2-----------------------#2021-05-27">https://medium.com/mendix/multi-tenancy-in-mendix-platform-part-i-463b8b892364?source=collection_archive---------2-----------------------#2021-05-27</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/7969b507d2d0713b7bc47610fe2c53a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*--Zu6krRX1HYClQZzP7xTg.png"/></div></div></figure><div class=""/><h1 id="c882" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">大家好。我希望每个人在这个艰难的时刻都过得很好。在这篇博客中，我将谈论一个重要的话题——云计算和SaaS(软件即服务)，也称为多租户。</h1><blockquote class="ka kb kc"><p id="886b" class="kd ke kf bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hn dt translated">多租户不仅仅是一个SaaS实现:许多<strong class="bd lb">企业希望根据他们的业务部门和垂直领域隔离他们的数据。</strong></p></blockquote><p id="3d38" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">首先，对于那些不熟悉多租户的人，我想花点时间解释一下什么是多租户。</p><p id="888a" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">术语“多租户”指的是<strong class="bd lb"> <em class="kf">一种软件架构，其中一个软件实例运行在一台服务器上，为多个租户</em>服务</strong>。为了更清楚起见，我建议每个人阅读下面的维基百科条目<a class="ae lf" href="https://en.wikipedia.org/wiki/Multitenancy" rel="noopener ugc nofollow" target="_blank">多租户——维基百科</a></p><figure class="lh li lj lk fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff lg"><img src="../Images/b64b08bcd7167328181b578fe863cffc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1gJoOjs-meGUk8btzxtsSw.png"/></div></div></figure><p id="c527" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">一般来说，在任何平台上实现多租户有两种选择。</p><ol class=""><li id="6a69" class="ll lm if bd b kg kh kk kl lc ln ld lo le lp la lq lr ls lt dt translated"><strong class="bd lb">所有租户的共享数据库</strong>。</li><li id="b817" class="ll lm if bd b kg lu kk lv lc lw ld lx le ly la lq lr ls lt dt translated"><strong class="bd lb">为每个租户提供单独的数据库或模式</strong>。</li></ol><p id="70ee" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">我们将讨论选项2 - <strong class="bd lb">为每个租户提供单独的数据库或模式</strong>。</p><blockquote class="ka kb kc"><p id="edde" class="kd ke kf bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hn dt translated">术语“模式”指的是数据的组织，它是如何构建数据库的蓝图</p></blockquote><h2 id="9c6d" class="lz jd if bd je ma mb mc ji md me mf jm lc mg mh jq ld mi mj ju le mk ml jy mm dt translated">操作数据库</h2><p id="5ccf" class="pw-post-body-paragraph kd ke if bd b kg mn ki kj kk mo km kn lc mp kq kr ld mq ku kv le mr ky kz la hn dt translated">我们将使用<a class="ae lf" href="https://www.postgresql.org/" rel="noopener ugc nofollow" target="_blank"> PostgreSQL </a>作为后端，以便进行数据库操作。</p><p id="cf7f" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">必须有一个管理员动态创建租户的界面。通过这个界面，管理员可以命名租户，并在运行时启动数据库创建。</p><p id="90e0" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">我们将通过四个步骤实现这一点，一个微流将调用Java操作，Java操作又调用批处理文件，批处理文件又调用sql脚本文件。</p><ul class=""><li id="ed02" class="ll lm if bd b kg kh kk kl lc ln ld lo le lp la ms lr ls lt dt translated">第一步-门迪克斯</li><li id="3828" class="ll lm if bd b kg lu kk lv lc lw ld lx le ly la ms lr ls lt dt translated">步骤2 - Java操作</li><li id="6733" class="ll lm if bd b kg lu kk lv lc lw ld lx le ly la ms lr ls lt dt translated">步骤3 -批处理文件(Windows)</li><li id="8ebf" class="ll lm if bd b kg lu kk lv lc lw ld lx le ly la ms lr ls lt dt translated">步骤4 - SQL脚本文件。</li></ul><figure class="lh li lj lk fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mt"><img src="../Images/e8899626604412312fde5f824093f3fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YROtTw-cYl3qIv6njdw0FA.png"/></div></div><figcaption class="mu mv fg fe ff mw mx bd b be z ek"><a class="ae lf" href="https://bit.ly/MXW21" rel="noopener ugc nofollow" target="_blank">https://bit.ly/MXW21</a></figcaption></figure><p id="db88" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">我们需要一个市场模块的帮助来支持这个实现，<a class="ae lf" href="https://marketplace.mendix.com/link/component/2888" rel="noopener ugc nofollow" target="_blank">数据库连接器</a>。这将有助于从所有外部数据源中检索数据。</p><p id="2148" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">创建一个微流并调用一个java动作</p><figure class="lh li lj lk fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff my"><img src="../Images/54238aac44c6f89f131d9fa4e5805847.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G7FVyfzI5fUTl_rlifUF0g.png"/></div></div></figure><figure class="lh li lj lk fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mz"><img src="../Images/deb257c19d9fb696399926f5ca677a0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MA03rLBjjlBzh2IZYFZTCg.png"/></div></div></figure><p id="58d6" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">假设NewSchema对象将被创建并作为输入参数传递给这个微流，随后是java动作中的一段java代码，指定文件路径和批处理文件名。</p><figure class="lh li lj lk fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff na"><img src="../Images/dfba37594d0bb02198de46c99c60f63c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QZbFQi96ESLB9aR7Z7UYGg.png"/></div></div></figure><p id="7730" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">executeAction()方法下的这段代码调用批处理文件，批处理文件脚本应该如下所示。</p><figure class="lh li lj lk fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nb"><img src="../Images/eb5e967041751b39ca947dfe69802d09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L_azwMi_5K_r05IyrvB_Mg.png"/></div></div></figure><p id="bcfb" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">sql脚本文件将包含如下脚本。</p><figure class="lh li lj lk fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nc"><img src="../Images/bda4748e198c486bcafca01281ee29d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qf9Hj5xi_IDNhTtD_rLymQ.png"/></div></div><figcaption class="mu mv fg fe ff mw mx bd b be z ek">SQL Script</figcaption></figure><p id="41e3" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">因此，通过这些机制，您将能够为每个租户创建单独的数据库或模式。</p><p id="2440" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">在下一部分中，我们将看到用户如何从创建的数据库或模式中提交和检索数据。</p><p id="cbc7" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">在那之前。保持安全，保持快乐，保持愚蠢。</p><h2 id="d40e" class="lz jd if bd je ma mb mc ji md me mf jm lc mg mh jq ld mi mj ju le mk ml jy mm dt translated">阅读更多</h2><div class="ht hu fm fo hv nd"><a href="https://bit.ly/MXW21" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab ej"><div class="nf ab ng cl cj nh"><h2 class="bd ig fv z el ni eo ep nj er et ie dt translated">Mendix World 2021 |召集您的应用开发团队2021年9月7日至9日</h2><div class="nk l"><h3 class="bd b fv z el ni eo ep nj er et ek translated">好像你需要说服…在一个全球制造商社区，他们想通过探索什么来相互学习…</h3></div><div class="nl l"><p class="bd b gc z el ni eo ep nj er et ek translated">bit.ly</p></div></div><div class="nm l"><div class="nn l no np nq nm nr ib nd"/></div></div></a></div><div class="ht hu fm fo hv nd"><a href="https://www.mendix.com/mendix-world/tracks/" rel="noopener  ugc nofollow" target="_blank"><div class="ne ab ej"><div class="nf ab ng cl cj nh"><h2 class="bd ig fv z el ni eo ep nj er et ie dt translated">曲目|门迪克斯世界2021</h2><div class="nk l"><h3 class="bd b fv z el ni eo ep nj er et ek translated">在今年Mendix World开幕之前，手工制作您的议程。浏览专为您量身定制的8个专题讲座中的85个以上专题讲座…</h3></div><div class="nl l"><p class="bd b gc z el ni eo ep nj er et ek translated">www.mendix.com</p></div></div><div class="nm l"><div class="ns l no np nq nm nr ib nd"/></div></div></a></div><ul class=""><li id="72a3" class="ll lm if bd b kg kh kk kl lc ln ld lo le lp la ms lr ls lt dt translated"><a class="ae lf" href="https://docs.mendix.com/appstore/connectors/database-connector" rel="noopener ugc nofollow" target="_blank">https://docs . mendix . com/app store/connectors/database-connector</a></li><li id="d55e" class="ll lm if bd b kg lu kk lv lc lw ld lx le ly la ms lr ls lt dt translated"><a class="ae lf" rel="noopener" href="/mendix/4-reasons-to-switch-to-a-multi-tenant-architecture-with-mendix-447ae10107b7">https://medium . com/mendix/4-reasons-switch-to-a-multi-tenant-architecture-with-mendix-447 AE 10107 b 7</a></li><li id="c4ea" class="ll lm if bd b kg lu kk lv lc lw ld lx le ly la ms lr ls lt dt translated"><a class="ae lf" href="https://www.lucidchart.com/pages/database-diagram/database-schema" rel="noopener ugc nofollow" target="_blank">https://www . lucid chart . com/pages/database-diagram/database-schema</a></li><li id="e5c9" class="ll lm if bd b kg lu kk lv lc lw ld lx le ly la ms lr ls lt dt translated"><a class="ae lf" href="https://docs.mendix.com/howto/security/best-practices-security" rel="noopener ugc nofollow" target="_blank">https://docs . mendix . com/how to/security/best-practices-security</a></li></ul></div><div class="ab cl nt nu hb nv" role="separator"><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny nz"/><span class="nw bw bk nx ny"/></div><div class="hn ho hp hq hr"><p id="2ff1" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated"><em class="kf">来自发布者- </em></p><p id="aaef" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated"><em class="kf">如果你喜欢这篇文章，你可以在我们的</em> <a class="ae lf" href="https://medium.com/mendix" rel="noopener"> <em class="kf">媒体页面</em> </a> <em class="kf">或我们自己的</em> <a class="ae lf" href="https://developers.mendix.com/community-blog/" rel="noopener ugc nofollow" target="_blank"> <em class="kf">社区博客网站</em> </a> <em class="kf">找到更多类似的内容。</em></p><p id="8a51" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated"><em class="kf">希望入门的创客，可以注册一个</em> <a class="ae lf" href="https://signup.mendix.com/link/signup/?source=direct" rel="noopener ugc nofollow" target="_blank"> <em class="kf">免费账号</em> </a> <em class="kf">，通过我们的</em> <a class="ae lf" href="https://academy.mendix.com/link/home" rel="noopener ugc nofollow" target="_blank"> <em class="kf">学苑</em> </a> <em class="kf">获得即时学习权限。</em></p><p id="5a5a" class="pw-post-body-paragraph kd ke if bd b kg kh ki kj kk kl km kn lc kp kq kr ld kt ku kv le kx ky kz la hn dt translated">有兴趣加入我们的社区吗？你可以加入我们的 <a class="ae lf" href="https://join.slack.com/t/mendixcommunity/shared_invite/zt-hwhwkcxu-~59ywyjqHlUHXmrw5heqpQ" rel="noopener ugc nofollow" target="_blank"> <em class="kf"> Slack社区频道</em> </a> <em class="kf">或者想更多参与的人，看看加入我们的</em><a class="ae lf" href="https://developers.mendix.com/meetups/#meetupsNearYou" rel="noopener ugc nofollow" target="_blank"><em class="kf">Meet ups</em></a><em class="kf">。</em></p></div></div>    
</body>
</html>