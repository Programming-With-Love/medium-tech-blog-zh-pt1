<html>
<head>
<title>Our Swift Style Guide Is Now Open Source</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我们的Swift风格指南现已开源</h1>
<blockquote>原文：<a href="https://medium.com/airbnb-engineering/our-swift-style-guide-is-now-open-source-d5cb99d2f626?source=collection_archive---------1-----------------------#2019-02-05">https://medium.com/airbnb-engineering/our-swift-style-guide-is-now-open-source-d5cb99d2f626?source=collection_archive---------1-----------------------#2019-02-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="8c8d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们在Airbnb使用Swift已经四年了。语言变了，我们的做法也变了。今天，我们分享如何编写Swift。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/aa257f8771316988917eb7a3d112cb1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IQF8jQNO0zTTG-k1OkBHTQ.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Some of Airbnb’s native engineers talking in our Native Product Development tech talk last August</figcaption></figure><h1 id="2a8d" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">Airbnb的Swift简史</h1><p id="b547" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">在2014年WWDC上，苹果用一种新语言让我们大吃一惊:Swift。在Airbnb，我们很快就抢先一步，在2014年8月写下了我们的第一行Swift——甚至在Swift达到1.0 之前<a class="ae kw" href="https://developer.apple.com/swift/blog/?id=14" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="c1a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当年晚些时候，苹果发布了Apple Watch和WatchKit。鉴于社区对传闻已久的Apple Watch的兴奋，2015年4月，我们打了一个赌，开始完全在Swift 1.1中编写第一个版本的<a class="ae kw" rel="noopener" href="/airbnb-engineering/how-it-ticks-building-the-airbnb-apple-watch-app-663288dc52e8"> Airbnb的Apple Watch应用程序</a>。</p><p id="8477" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在2015年WWDC上，苹果正式发布了Swift 2.0。因此，当需要构建我们的<a class="ae kw" rel="noopener" href="/airbnb-engineering/mastering-the-tvos-focus-engine-f8a13b371083">苹果电视应用</a>时，我们尝试了一下，并使用Swift 2.0编写了它。</p><p id="98d6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这两次成功的试点之后，2016年1月，我们决定在Swift 2.0中编写我们所有的新功能。一切都进行得很顺利，直到<a class="ae kw" href="https://github.com/apple/swift-evolution/blob/master/proposals/0005-objective-c-name-translation.md" rel="noopener ugc nofollow" target="_blank">大迅捷更名</a>落地。为了升级到Swift 3，我们指派了一个两人小组在5周的时间内迁移我们的代码库<a class="ae kw" rel="noopener" href="/airbnb-engineering/getting-to-swift-3-at-airbnb-79a257d2b656">。谢天谢地，升级到Swift 4简单多了；自2017年10月以来，我们的整个代码库都在Swift 4中。</a></p><h1 id="fc9f" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">为什么是风格指南？</h1><p id="eb47" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">Swift是一门年轻的语言。当我们在2014年开始使用它时，我们没有标准化的Swift风格指南。我们让15名工程师在我们的代码库中自由活动，他们每个人都以自己的风格写作。很快就清楚了，如果我们不同意一个标准化的风格，我们要么在我们的PRs中花太多时间讨论风格，要么我们的代码库就会像一幅<a class="ae kw" href="https://github.com/airbnb/javascript/issues/102" rel="noopener ugc nofollow" target="_blank">杰森·布拉克的画</a>。</p><p id="36fc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当我们在开发苹果电视应用程序时，我们开始了一个非正式的风格指南。在【2016年1月这与其他特别的努力相结合，成为官方的<a class="ae kw" href="https://github.com/airbnb/swift" rel="noopener ugc nofollow" target="_blank"> Airbnb Swift风格指南</a>，在那里我们开始合作定义在Airbnb写Swift的首选方式。</p><p id="e01a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">苹果公司和Swift社区为如何编写Swift提供了宝贵的指导。尽管他们绝对影响了我们在Airbnb编写Swift的方式，但我们仍然认为保持我们自己的风格指南是有价值的，因为这是一种重复我们认为正确的方式，同时与社区保持一致。这就是为什么我们将苹果的建议加入到我们的<a class="ae kw" href="https://github.com/airbnb/swift#guiding-tenets" rel="noopener ugc nofollow" target="_blank">指导原则</a>中。</p><p id="a0b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们不想手动识别和纠正违反样式指南的情况，所以我们采用了Swift社区中最流行的linter和formatter，分别是<a class="ae kw" href="https://github.com/realm/SwiftLint" rel="noopener ugc nofollow" target="_blank"> SwiftLint </a>和<a class="ae kw" href="https://github.com/nicklockwood/SwiftFormat" rel="noopener ugc nofollow" target="_blank"> SwiftFormat </a>。在我们的<a class="ae kw" href="https://github.com/airbnb/swift" rel="noopener ugc nofollow" target="_blank">风格指南</a>中，您会找到我们的<a class="ae kw" href="https://github.com/airbnb/swift/blob/master/resources/swiftlint.yml" rel="noopener ugc nofollow" target="_blank"> SwiftLint </a>和<a class="ae kw" href="https://github.com/airbnb/swift/blob/master/resources/airbnb.swiftformat" rel="noopener ugc nofollow" target="_blank"> SwiftFormat配置</a>。如果你想使用和我们一样的规则，只要抓住它们并开始在你的项目中使用它！</p><h1 id="b350" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">为什么我们要开源它？</h1><p id="bcba" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">自从我们第一次开始编写Swift以来，几年过去了，社区已经对一些模式进行了标准化。Swift的语言和社区对我们很有帮助，所以我们想分享一些我们在Airbnb编写Swift的模式。</p><p id="026c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们明白，不是每个人都会同意我们在Airbnb的做事方式。我们相信尊重他人的不同意见，我们很乐意听到您的反馈，我们很乐意分享我们的想法。如果你不同意或者认为我们遗漏了什么，我们欢迎你的贡献！</p><h1 id="3f18" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">拥抱Swift</h1><p id="0269" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">在Airbnb，我们认为Swift是iOS开发的未来，我们将继续推动前沿原生技术的发展。鉴于我们正在<a class="ae kw" rel="noopener" href="/airbnb-engineering/sunsetting-react-native-1868ba28e30a">淘汰React Native </a>，我们将在内部Swift和Kotlin库上投入更多资源。</p><p id="c735" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae kw" href="https://twitter.com/michaelbachand/status/1027267287210815489" rel="noopener ugc nofollow" target="_blank">我们70%的新原生Android代码是用Kotlin编写的，90%的iOS是用Swift </a>编写的。*我们不断迁移到最新的语言功能。</p><p id="d3f4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">*不包括遗留React本机代码。</em></p></div><div class="ab cl kx ky go kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ha hb hc hd he"><p id="56db" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">如果你对Swift和iOS开发充满热情，我们鼓励你申请我们已经开放的</em>  <em class="jc">的</em> <a class="ae kw" href="https://grnh.se/1cb1ce351" rel="noopener ugc nofollow" target="_blank"> <em class="jc">不同职位！我们希望你能加入我们的团队！</em></a></p></div></div>    
</body>
</html>