<html>
<head>
<title>Running Node.js Applications on Oracle Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Oracle云上运行Node.js应用程序</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/running-any-node-application-on-oracle-container-cloud-service-108c98659b60?source=collection_archive---------0-----------------------#2017-07-16">https://medium.com/oracledevs/running-any-node-application-on-oracle-container-cloud-service-108c98659b60?source=collection_archive---------0-----------------------#2017-07-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="dbc4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在<a class="ae jc" href="https://technology.amis.nl/2017/05/21/running-node-js-applications-from-github-in-generic-docker-container/" rel="noopener ugc nofollow" target="_blank">的一篇早期文章</a>中，我讨论了运行任何节点(Node)的通用Docker容器映像的创建。JS)应用程序，基于GitHub上该应用程序的源代码。当容器启动时，GitHub URL作为参数传入，容器将下载源代码并运行应用程序。使用这个通用映像，您可以在任何可以运行Docker容器的地方运行您的节点应用程序。</p><p id="4590" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">可以运行Docker容器的地方之一是Oracle Container Cloud Service(OCCS)，这是一种为管理容器环境提供平台的服务。在本文中，我将展示如何使用OCCS来运行我的通用Docker映像以运行节点应用程序，以及如何配置服务以运行GitHub中的特定节点应用程序。</p><p id="4602" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我的同事Luc Gorissen在AMIS技术博客上的一篇文章中非常好地描述了OCCS入门:<a class="ae jc" href="https://technology.amis.nl/2017/05/24/docker-weblogic-image-oracle-container-cloud-service/" rel="noopener ugc nofollow" target="_blank"> Docker，Oracle Container Cloud Service上的WebLogic Image</a>。我自己也是用他的文章入门的。</p><p id="6335" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些步骤是:</p><ul class=""><li id="a6b7" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">创建OCCS服务实例</li><li id="9c10" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">配置OCCS实例(带有Docker容器映像注册表)</li><li id="8b45" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">为所需的容器映像创建服务(通用节点应用程序运行程序)——这包括配置Docker容器参数，如端口映射和环境变量</li><li id="0c8c" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">部署服务(运行容器实例)</li><li id="d129" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">检查部署(状态、日志、分配的公共IP)</li><li id="ea96" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">测试部署—检查节点应用程序是否确实可用</li></ul><h1 id="0e73" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">创建OCCS服务实例</h1><p id="5d3b" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">假设您有一个订购了OCCS的Oracle公共云帐户。转到OCCS的仪表板。点击创建服务</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es ku"><img src="../Images/df2584c72c9531aac221a3c7fbf2741d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/0*FUi-qlOFjvO44ywk."/></div></figure><p id="286e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">配置服务实例:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/f8a114f3ffbf6ae156830a797d5f5ac3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NWvNSYljq8W6lhCq."/></div></div></figure><p id="d5cc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是，不要把它做得太小。)(Oracle云不是小份的):</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/0dcece89168006bc822d51a1b37ca1db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-ckALZ0dJ9Un4tAR."/></div></div></figure><p id="222e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以现在有了允许的最小数据卷大小(对于无状态容器！)</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/d59d33e6317124371de84267365e72ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*nTX9PymsV-5naIx2."/></div></div></figure><p id="ab55" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这一次我通过了验证:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/f5767c4589d33211ac782776fb0d3ea1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*VUlekWJHP2Xh_ssl."/></div></div></figure><p id="ea73" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">并且容器云服务实例被创建:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/e87045f9643d11724c71d466ff918f48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*EBAHqqOvXl-7F2Lc."/></div></div></figure><h1 id="c5f7" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">配置OCCS实例(带有Docker容器映像注册表)</h1><p id="f498" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">一段时间后，当实例准备好了，我就可以访问它了:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lh"><img src="../Images/9d177350959428847f6d62cb0293c9ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/0*iqlqmlrV-HdFODjL."/></div></figure><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es li"><img src="../Images/c201aec544f5021703563c0777764c90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1216/0*jjp1y3yY27gYpTX9."/></div></figure><p id="a356" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如你所见，它相当大。</p><p id="4b09" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们访问容器控制台。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lj"><img src="../Images/3fdbf45c8bc99ffae56c2a6878c0e65d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1228/0*QdTJv39oNnq_Wu80."/></div></figure><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lk"><img src="../Images/ed9726178cfa0c0c16d6f7bc6e483d48.png" data-original-src="https://miro.medium.com/v2/resize:fit:610/0*QGAdPx4B2PFMegTa."/></div></figure><p id="fda3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该控制面板提供了当前状态、实际部署(尚未部署)以及对服务、堆栈、容器、图像等的访问的概述。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/845c70609555125316b26750c3ff17c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*PqJmh1-o9veNmN1v."/></div></div></figure><p id="2d73" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先要做的事情之一是配置一个(容器映像)注册中心，例如一个本地注册中心或Docker Hub上的一个帐户——我的帐户，其中保存了我需要在Oracle容器云中创建容器的容器映像:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es ll"><img src="../Images/8c1e80e0b18f4e5b5358f4e3d0cde2d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:868/0*fYsO7Buf7PEw8bRp."/></div></figure><p id="cf97" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我的详细信息已验证:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lm"><img src="../Images/dd5c6f6401640cd18cee09e5359fad47.png" data-original-src="https://miro.medium.com/v2/resize:fit:866/0*GAyCMfMyIOKvzkox."/></div></figure><p id="c205" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注册表已添加:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/c057a9fe7e5c923187ff853bafd52f62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*fNEjbaDtq2Fu5n4T."/></div></div></figure><h1 id="7b10" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">为所需的容器映像创建服务</h1><p id="b7db" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">服务是容器映像以及用于运行容器的配置。Oracle Container Cloud附带了许多已经配置为服务的流行容器映像。我想为我自己的映像添加另一个服务:通用节点应用程序运行器)。为此，我从我的Docker Hub帐户中选择映像，然后配置Docker容器参数，如端口映射和环境变量</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/56179f078853191a374d274ca53a2821.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uJAEPkkEoB97udWS."/></div></div></figure><p id="8fa1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">服务编辑器——定义映像(来自一个已配置的注册表)的表单，服务的名称(表示映像与一组配置设置的组合，以使其成为特定的<em class="ln">服务</em>)以及那些配置设置——端口映射、环境变量、卷等。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lo"><img src="../Images/8e43008387fea32d7042da3766a0e9e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/0*yOcLKKJjWKibtNuu."/></div></figure><p id="ad84" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:我正在为映像创建一个服务，该服务可以运行GitHub中可用的任何节点应用程序(如下所述:<a class="ae jc" href="https://technology.amis.nl/2017/05/21/running-node-js-applications-from-github-in-generic-docker-container/" rel="noopener ugc nofollow" target="_blank">https://technology . amis . nl/2017/05/21/running-Node-js-applications-from-GitHub-in-generic-docker-container/</a>)</p><h1 id="25ab" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">部署服务(运行容器实例)</h1><p id="385e" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">创建服务后，它现在可以作为运行新容器的蓝图。这是通过部署来完成的—这将服务与一些关于扩展、负载平衡等的运行时设置联系在一起:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/955d12c81d656f5acb0e54d8d9ba4af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*X1_8-UI7ce3Qao7B."/></div></div></figure><p id="f6be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为此服务的新部署设置部署详细信息:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lp"><img src="../Images/fad6a3b992adb78daab5bc53e553eb2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1010/0*49KQDyYLQY9uk7pV."/></div></figure><p id="602f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">完成这些详细信息后，按deploy继续运行新的部署。在这种情况下，它由单个实例组成(boring…)但是本来可以更投入的。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lq"><img src="../Images/8e577d131e6ea38de1bcf59bf6962269.png" data-original-src="https://miro.medium.com/v2/resize:fit:1186/0*xYukOCuzjpDhabSz."/></div></figure><p id="d394" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">部署仍在开始。</p><p id="d33e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">稍后(几秒钟)容器开始运行:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/06b757e4e08a5477ac8967573c7bfc35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7MHa8anJ7hWKyZAO."/></div></div></figure><p id="3a07" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">查看一些细节:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lr"><img src="../Images/7939655fd48fac0f370b1861fa4d3038.png" data-original-src="https://miro.medium.com/v2/resize:fit:1168/0*Eo1EC3odAN1Vg3gt."/></div></figure><p id="5771" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要检查部署(状态、日志、分配的IP)，请单击容器名称:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lc"><img src="../Images/1a45697ee07b941b863765069576e1c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*lKRvHhPTMZeEMmyA."/></div></div></figure><p id="d762" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">写入容器内部控制台的任何内容都可以从日志中访问:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es ls"><img src="../Images/2d9d99302cf7e02b55b91006b0231100.png" data-original-src="https://miro.medium.com/v2/resize:fit:1082/0*hUVh8PGCxwfg2Awd."/></div></figure><p id="26a6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要了解公开应用程序的公共IP地址，我们需要转到Hosts选项卡。</p><h1 id="e566" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">监控主机</h1><p id="c01e" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">深入查看一台特定主机:</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lt"><img src="../Images/e86f78080082d81d860abdd96aff4d7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1118/0*hi8icns3pWs4VL3D."/></div></figure><p id="bbd7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">并了解它的公共IP地址，在那里我们可以访问运行在已部署容器中的应用程序。</p><h1 id="23cd" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">测试部署—检查节点应用程序是否确实可用</h1><p id="fbbf" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">有了主机的公共IP地址，并且知道容器内部的端口8080(还记得定义为8080的环境变量APP_PORT，以传递给运行的通用节点应用程序)从外部映射到端口8005，我们现在可以从本地浏览器调用部署在容器云服务上的容器内部运行的应用程序。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lu"><img src="../Images/8f10f4d4f4cb08add086878858ad21ec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1210/0*cF5JS7lPy6SAcE3O."/></div></figure><p id="663f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">还有应用程序的输出(我从没说过它会很壮观……)</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lv"><img src="../Images/20d5c94245c9637ba20549dc2d1c507d.png" data-original-src="https://miro.medium.com/v2/resize:fit:674/0*aDnzvU3kq9UyEOH-."/></div></figure><h1 id="97aa" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">结论</h1><p id="dd27" class="pw-post-body-paragraph ie if hh ig b ih kp ij ik il kq in io ip kr ir is it ks iv iw ix kt iz ja jb ha bi translated">在习惯了动作的顺序后:</p><ul class=""><li id="5d98" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">配置注册表(可能仅一次)</li><li id="873a" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">配置服务(针对每个容器映像以及特定的配置参数设置，包括典型的Docker容器设置，如端口映射、卷、环境变量)</li><li id="7ab8" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">使用比例因子和其他部署详细信息定义和运行部署(从服务)</li><li id="92d0" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">获取主机公共IP地址以访问容器中的应用程序</li></ul><p id="601b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Oracle Container Cloud Service提供了非常流畅的体验，与我见过的其他容器云服务和管理环境相比毫不逊色。至少从开发者的角度来看，OCCS做得很好。现在谈论OCCS的行动还为时过早。</p><p id="0e39" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://technology.amis.nl/tag/container/" rel="noopener ugc nofollow" target="_blank">容器</a> <a class="ae jc" href="https://technology.amis.nl/tag/container-cloud/" rel="noopener ugc nofollow" target="_blank">容器云</a><a class="ae jc" href="https://technology.amis.nl/tag/devops/" rel="noopener ugc nofollow" target="_blank">devo PS</a><a class="ae jc" href="https://technology.amis.nl/tag/docker/" rel="noopener ugc nofollow" target="_blank">docker</a><a class="ae jc" href="https://technology.amis.nl/tag/image/" rel="noopener ugc nofollow" target="_blank">image</a><a class="ae jc" href="https://technology.amis.nl/tag/occs/" rel="noopener ugc nofollow" target="_blank">occs</a><a class="ae jc" href="https://technology.amis.nl/tag/oracle-cloud/" rel="noopener ugc nofollow" target="_blank">Oracle云</a> <a class="ae jc" href="https://technology.amis.nl/tag/registry/" rel="noopener ugc nofollow" target="_blank">注册表</a></p></div><div class="ab cl lw lx go ly" role="separator"><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb mc"/><span class="lz bw bk ma mb"/></div><div class="ha hb hc hd he"><p id="d3d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="ln">原载于2017年7月16日</em><a class="ae jc" href="https://technology.amis.nl/2017/07/16/running-any-node-application-on-oracle-container-cloud-servicer/" rel="noopener ugc nofollow" target="_blank"><em class="ln">technology . amis . nl</em></a><em class="ln">。</em></p></div></div>    
</body>
</html>