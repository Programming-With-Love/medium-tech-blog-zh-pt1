<html>
<head>
<title>[Part 7] — Laravel Migrations (Lanjutan) &amp; Seeding</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">[Part 7] — Laravel Migrations (Lanjutan) &amp; Seeding</h1>
<blockquote>原文：<a href="https://medium.easyread.co/part-7-laravel-migrations-lanjutan-seeding-556120a825aa?source=collection_archive---------5-----------------------#2021-04-03">https://medium.easyread.co/part-7-laravel-migrations-lanjutan-seeding-556120a825aa?source=collection_archive---------5-----------------------#2021-04-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/0ed449a6d87bf2c90d1af2d6459f7f92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*mXZ976sOo8Dyji-D"/></div></div><figcaption class="iw ix gj gh gi iy iz bd b be z dk">Photo by <a class="ae ja" href="https://unsplash.com/@walkytalky?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Younghyun Kim</a> on <a class="ae ja" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="f83f" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Halo teman-teman, selamat datang di blog saya. Kali ini kamu ada dalam pembahasan mengenai lanjutan Laravel Migrations <a class="ae ja" href="https://pandhuwibowo.medium.com/part-6-laravel-migrations-2b6acf7e4b53" rel="noopener"> part sebelumnya </a> dan akan ada tambahan mengenai Seeding pada Laravel.</p><h1 id="af54" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Laravel Migrations (Lanjutan)</h1><p id="1924" class="pw-post-body-paragraph ka kb jd kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Jika kita print perintah <code class="fe mb mc md me b">artisan</code> di command line atau terminal kamu. Maka akan muncul baris command artisan seperti ini.</p><figure class="mg mh mi mj gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mf"><img src="../Images/628199419b161452b41881590fc13744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6DqUhp8EfGDAYaDM1tB4PQ.png"/></div></div></figure><p id="b9d6" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Nah dari gambar tersebut mungkin bisa fokus ke beberapa command yang pada migrate.</p><pre class="mg mh mi mj gt mk me ml mm aw mn bi"><span id="bff1" class="mo kz jd me b gy mp mq l mr ms">migrate<br/>  migrate:fresh        Drop all tables and re-run all migrations<br/>  migrate:install      Create the migration repository<br/>  migrate:refresh      Reset and re-run all migrations<br/>  migrate:reset        Rollback all database migrations<br/>  migrate:rollback     Rollback the last database migration<br/>  migrate:status       Show the status of each migration</span></pre><p id="5b2b" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Kamu bisa coba satu-satu mulai dari <code class="fe mb mc md me b">migrate:fresh</code> .</p><h2 id="bf21" class="mo kz jd bd la mt mu dn le mv mw dp li kl mx my lm kp mz na lq kt nb nc lu nd bi translated">migrate:fresh</h2><p id="29a8" class="pw-post-body-paragraph ka kb jd kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Perintah ini akan drop semua tabel di database. Perlu diingat itu tidak menggunakan metode down () dari migrasi kamu.</p><pre class="mg mh mi mj gt mk me ml mm aw mn bi"><span id="ed5f" class="mo kz jd me b gy mp mq l mr ms">$ php artisan migrate:fresh</span><span id="f2d8" class="mo kz jd me b gy ne mq l mr ms">Dropped all tables successfully.<br/>Migration table created successfully.<br/>Migrating: 2014_10_12_000000_create_users_table<br/>Migrated:  2014_10_12_000000_create_users_table (15.67ms)<br/>Migrating: 2014_10_12_100000_create_password_resets_table<br/>Migrated:  2014_10_12_100000_create_password_resets_table (10.73ms)<br/>Migrating: 2019_08_19_000000_create_failed_jobs_table<br/>Migrated:  2019_08_19_000000_create_failed_jobs_table (10.16ms)<br/>Migrating: 2021_04_03_015003_create_roles_table<br/>Migrated:  2021_04_03_015003_create_roles_table (12.25ms)<br/>Migrating: 2021_04_03_020022_create_categories_table<br/>Migrated:  2021_04_03_020022_create_categories_table (4.10ms)</span></pre><p id="cec8" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Keterangan : Table yang saya buat yaitu, <code class="fe mb mc md me b">users</code> , <code class="fe mb mc md me b">password_resets</code> , <code class="fe mb mc md me b">failed_jobs</code> , <code class="fe mb mc md me b">roles</code> , <code class="fe mb mc md me b">categories</code> .</p><h2 id="4632" class="mo kz jd bd la mt mu dn le mv mw dp li kl mx my lm kp mz na lq kt nb nc lu nd bi translated">migrate:refresh</h2><p id="0634" class="pw-post-body-paragraph ka kb jd kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Perintah ini hanya akan mengembalikan migrasi sebenarnya dengan benar-benar menjalankan metode down () pada semua migrasi kamu, dan kemudian menjalankan migrasi dari awal.</p><pre class="mg mh mi mj gt mk me ml mm aw mn bi"><span id="6edc" class="mo kz jd me b gy mp mq l mr ms">$ php artisan migrate:refresh</span><span id="cbdb" class="mo kz jd me b gy ne mq l mr ms">Rolling back: 2021_04_03_020022_create_categories_table<br/>Rolled back:  2021_04_03_020022_create_categories_table (11.13ms)<br/>Rolling back: 2021_04_03_015003_create_roles_table<br/>Rolled back:  2021_04_03_015003_create_roles_table (2.91ms)<br/>Rolling back: 2019_08_19_000000_create_failed_jobs_table<br/>Rolled back:  2019_08_19_000000_create_failed_jobs_table (3.72ms)<br/>Rolling back: 2014_10_12_100000_create_password_resets_table<br/>Rolled back:  2014_10_12_100000_create_password_resets_table (3.22ms)<br/>Rolling back: 2014_10_12_000000_create_users_table<br/>Rolled back:  2014_10_12_000000_create_users_table (3.87ms)<br/>Migrating: 2014_10_12_000000_create_users_table<br/>Migrated:  2014_10_12_000000_create_users_table (14.49ms)<br/>Migrating: 2014_10_12_100000_create_password_resets_table<br/>Migrated:  2014_10_12_100000_create_password_resets_table (8.62ms)<br/>Migrating: 2019_08_19_000000_create_failed_jobs_table<br/>Migrated:  2019_08_19_000000_create_failed_jobs_table (11.11ms)<br/>Migrating: 2021_04_03_015003_create_roles_table<br/>Migrated:  2021_04_03_015003_create_roles_table (12.07ms)<br/>Migrating: 2021_04_03_020022_create_categories_table<br/>Migrated:  2021_04_03_020022_create_categories_table (6.09ms)</span></pre><h2 id="fc6f" class="mo kz jd bd la mt mu dn le mv mw dp li kl mx my lm kp mz na lq kt nb nc lu nd bi translated">migrate:rollback</h2><p id="1745" class="pw-post-body-paragraph ka kb jd kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Perintah ini akan menjalankan pengembalian migrasi terakhir yang telah dibuat. Migrasi terakhir akan dihapus dari database migration. Namun file pada project Laravel-nya akan tetap ada. Perintah ini tidak mengeksekusi semua table-nya melainkan hanya 1 atau beberapa juga bisa dilakukan.</p><pre class="mg mh mi mj gt mk me ml mm aw mn bi"><span id="96a1" class="mo kz jd me b gy mp mq l mr ms">$ php artisan migrate:rollback</span><span id="1a0f" class="mo kz jd me b gy ne mq l mr ms">Rolling back: 2021_04_03_020022_create_categories_table<br/>Rolled back:  2021_04_03_020022_create_categories_table (11.99ms)<br/>Rolling back: 2021_04_03_015003_create_roles_table<br/>Rolled back:  2021_04_03_015003_create_roles_table (3.06ms)<br/>Rolling back: 2019_08_19_000000_create_failed_jobs_table<br/>Rolled back:  2019_08_19_000000_create_failed_jobs_table (3.50ms)<br/>Rolling back: 2014_10_12_100000_create_password_resets_table<br/>Rolled back:  2014_10_12_100000_create_password_resets_table (2.93ms)<br/>Rolling back: 2014_10_12_000000_create_users_table<br/>Rolled back:  2014_10_12_000000_create_users_table (2.85ms)</span></pre><h2 id="69cb" class="mo kz jd bd la mt mu dn le mv mw dp li kl mx my lm kp mz na lq kt nb nc lu nd bi translated">migrate:reset</h2><p id="a9fb" class="pw-post-body-paragraph ka kb jd kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Perintah ini akan menghapus <strong class="kc je"> semua </strong> table yang ada di database migration.</p><pre class="mg mh mi mj gt mk me ml mm aw mn bi"><span id="0c74" class="mo kz jd me b gy mp mq l mr ms">$ php artisan migrate:reset</span><span id="6e2b" class="mo kz jd me b gy ne mq l mr ms">Rolling back: 2021_04_03_020022_create_categories_table<br/>Rolled back:  2021_04_03_020022_create_categories_table (4.54ms)<br/>Rolling back: 2021_04_03_015003_create_roles_table<br/>Rolled back:  2021_04_03_015003_create_roles_table (4.10ms)<br/>Rolling back: 2019_08_19_000000_create_failed_jobs_table<br/>Rolled back:  2019_08_19_000000_create_failed_jobs_table (3.04ms)<br/>Rolling back: 2014_10_12_100000_create_password_resets_table<br/>Rolled back:  2014_10_12_100000_create_password_resets_table (2.75ms)<br/>Rolling back: 2014_10_12_000000_create_users_table<br/>Rolled back:  2014_10_12_000000_create_users_table (3.39ms)</span></pre><h2 id="0d91" class="mo kz jd bd la mt mu dn le mv mw dp li kl mx my lm kp mz na lq kt nb nc lu nd bi translated">migrate:status</h2><p id="b101" class="pw-post-body-paragraph ka kb jd kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Perintah ini akan menampilkan status dari setiap migration yang sudah dibuat atau dijalankan.</p><pre class="mg mh mi mj gt mk me ml mm aw mn bi"><span id="cef5" class="mo kz jd me b gy mp mq l mr ms">$ php artisan migrate:status</span><span id="a697" class="mo kz jd me b gy ne mq l mr ms">+------+------------------------------------------------+-------+<br/>| Ran? | Migration                                      | Batch |<br/>+------+------------------------------------------------+-------+<br/>| Yes  | 2014_10_12_000000_create_users_table           | 1     |<br/>| Yes  | 2014_10_12_100000_create_password_resets_table | 1     |<br/>| Yes  | 2019_08_19_000000_create_failed_jobs_table     | 1     |<br/>| Yes  | 2021_04_03_015003_create_roles_table           | 1     |<br/>| Yes  | 2021_04_03_020022_create_categories_table      | 1     |<br/>+------+------------------------------------------------+-------+</span></pre><p id="0c25" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="kc je"> Perintah-perintah diatas sangat beresiko jika kamu menggunakannya di production </strong> .</p><p id="28b5" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Itu mengenai Laravel Migrations, saya tidak akan menulis semuanya. Kalian bisa main-main dalam dokumentasinya langsung ke website resminya.</p><h1 id="fffb" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Seeding</h1><p id="7777" class="pw-post-body-paragraph ka kb jd kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Laravel menyertakan kemampuan untuk memasukkan database kamu dengan data test menggunakan seed classes. Semua seed classes disimpan dalam direktori <code class="fe mb mc md me b">database/seeders</code> . Secara default, kelas <code class="fe mb mc md me b">DatabaseSeeder</code> ditentukan untuk kamu. Dari kelas ini, kamu dapat menggunakan metode <code class="fe mb mc md me b">call</code> untuk menjalankan seed class lain, memungkinkan kamu untuk mengontrol urutan seeding.</p><p id="1a0c" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Untuk generate seeder-nya, jalankan perintah <code class="fe mb mc md me b">make:seeder</code> .</p><p id="074b" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Sekarang coba salah satu tablenya untuk diisi. Saya akan mengisi data table untuk table <code class="fe mb mc md me b">categories</code> . Untuk buat seeder-nya silakan ketikan perintah di bawah ini.</p><pre class="mg mh mi mj gt mk me ml mm aw mn bi"><span id="8e18" class="mo kz jd me b gy mp mq l mr ms">$ php artisan make:seeder CategorySeeder</span></pre><figure class="mg mh mi mj gt ip gh gi paragraph-image"><div class="gh gi nf"><img src="../Images/2ede631b8598863c8cda20b29bb94050.png" data-original-src="https://miro.medium.com/v2/resize:fit:610/format:webp/1*sVbcOW0GQDcHeiFlBEo8Zg.png"/></div></figure><p id="5307" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Maka akan terbuat filenya seperti gambar di atas. Dan di dalam filenya akan berisi seperti ini.</p><figure class="mg mh mi mj gt ip"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="2916" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Di dalam kelas <code class="fe mb mc md me b">CategorySeeder</code> berisi method <code class="fe mb mc md me b">run()</code> which is itu akan di execute kalau kamu run command <code class="fe mb mc md me b">php artisan db:seed</code> bersamaan dengan dipanggilnya method call di file <code class="fe mb mc md me b">DatabaseSeeder.php</code> . Di dalam method <code class="fe mb mc md me b">run()</code> kamu bisa mengisi data untuk table <code class="fe mb mc md me b">categories</code> tersebut, bisa menggunakan <strong class="kc je"> query builder </strong> atau <strong class="kc je"> eloquent </strong> .</p><p id="451d" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Saya akan tambahkan ke dalam method <code class="fe mb mc md me b">run()</code> tersebut.</p><figure class="mg mh mi mj gt ip"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="49b5" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Dan buka file <code class="fe mb mc md me b">DatabaseSeeder.php</code> . Lalu tambahkan code seperti ini.</p><figure class="mg mh mi mj gt ip"><div class="bz fp l di"><div class="ng nh l"/></div></figure><p id="fe09" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Lalu jalankan command berikut ini.</p><pre class="mg mh mi mj gt mk me ml mm aw mn bi"><span id="346a" class="mo kz jd me b gy mp mq l mr ms">$ php artisan db:seed</span></pre><p id="97a4" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Hasil responsenya akan seperti ini.</p><pre class="mg mh mi mj gt mk me ml mm aw mn bi"><span id="dd19" class="mo kz jd me b gy mp mq l mr ms">Seeding: Database\Seeders\CategorySeeder<br/>Seeded:  Database\Seeders\CategorySeeder (21.70ms)<br/>Database seeding completed successfully.</span></pre><p id="6e40" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Yap, kamu sudah berhasil menambahkan data melalui Seeding Laravel.</p><p id="9356" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Seeding dilakukan misalnya untuk menambahkan data user pertama kali / user pertama.</p><h1 id="8588" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Konklusi</h1><p id="aa4a" class="pw-post-body-paragraph ka kb jd kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">Kamu sudah mengetahui tentang Seeding dan Migration. Sekarang giliran kamu mempraktekkannya sendiri. Untuk lebih detailnya lagi kamu bisa berkunjung ke website resminya. Selamat mencoba dan semoga bermanfaat.</p><h1 id="a820" class="ky kz jd bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">Referensi</h1><div class="im in gp gr io ni"><a href="https://laravel.com/docs/8.x/migrations" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd je gy z fp nn fr fs no fu fw jc bi translated">Database: Migrations</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">Migrations are like version control for your database, allowing your team to define and share the application's…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">laravel.com</p></div></div></div></a></div><div class="im in gp gr io ni"><a href="https://laravel.com/docs/8.x/seeding" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab fo"><div class="nk ab nl cl cj nm"><h2 class="bd je gy z fp nn fr fs no fu fw jc bi translated">Database: Seeding</h2><div class="np l"><h3 class="bd b gy z fp nn fr fs no fu fw dk translated">Laravel includes the ability to seed your database with test data using seed classes. All seed classes are stored in…</h3></div><div class="nq l"><p class="bd b dl z fp nn fr fs no fu fw dk translated">laravel.com</p></div></div></div></a></div><p id="8cde" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">[Call Friends]</p><p id="aa1d" class="pw-post-body-paragraph ka kb jd kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Halo teman teman, untuk mendukung agar saya tetap bisa membuat tulisan-tulisan menarik lainnya. Kamu bisa support saya dengan membeli produk-produk asli produksi sendiri, homemade, dan yang pastinya brand lokal hanya di <a class="ae ja" href="https://www.instagram.com/beneteen/" rel="noopener ugc nofollow" target="_blank"> @beneteen </a> atau ke <a class="ae ja" href="https://beneteen.com/" rel="noopener ugc nofollow" target="_blank"> beneteen.com </a></p></div></div>    
</body>
</html>