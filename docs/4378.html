<html>
<head>
<title>Exploring the Material Navigation Rail</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索材料导航轨道</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/exploring-the-material-navigation-rail-fe0c82dadc98?source=collection_archive---------0-----------------------#2021-08-19">https://medium.com/google-developer-experts/exploring-the-material-navigation-rail-fe0c82dadc98?source=collection_archive---------0-----------------------#2021-08-19</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/dbf49291b3dfe5172a82f1fb2aaf8226.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BR_PvFzHBqqaWEEa.png"/></div></div></figure><p id="d93d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在本周的谷歌I/O大会上宣布了许多令人兴奋的消息——我一直期待的事情之一就是听到关于<a class="ae jn" href="https://www.youtube.com/watch?v=Qkiz3QIPJzk" rel="noopener ugc nofollow" target="_blank">大屏幕体验</a>的消息。虽然这些设备和设计原则已经并存了一段时间，但总感觉对开发人员的支持从来没有完全实现过。然而，随着本周I/O上的一些公告，在更大的设备上支持这些体验开始获得更多的开箱即用支持。</p><p id="4caf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在围绕这个话题的谈话中，我看到几次提到<a class="ae jn" href="https://material.io/components/navigation-rail" rel="noopener ugc nofollow" target="_blank">导航条</a>，这是一个垂直导航条，是材料设计的一部分。在看到提到这一点后，我对能够在应用程序中使用这一点感到非常兴奋，所以我直接潜入Android Material Components库进行尝试。在这篇文章中，我将与你分享这些经验，这样你就能明白如何在你自己的应用中使用它们！</p></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><p id="71eb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这个故事最初发表在joebirch.co的<a class="ae jn" href="https://joebirch.co/android/exploring-the-material-navigation-rail/" rel="noopener ugc nofollow" target="_blank">上</a></p></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="06d6" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">什么是导航轨？</h1><p id="a105" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">如上所述，<a class="ae jn" href="https://material.io/components/navigation-rail" rel="noopener ugc nofollow" target="_blank">导航条</a>本质上是一个垂直导航条。在应用程序中，你可能已经使用和/或看到过<a class="ae jn" href="https://material.io/components/bottom-navigation" rel="noopener ugc nofollow" target="_blank">底部导航条</a>，它位于屏幕底部，用于显示包含在水平条中的导航目的地。该栏用于显示3到5个导航项目，允许用户在应用程序的不同高级区域之间移动。</p><p id="9893" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当谈到底部导航栏时，这在大多数情况下非常有用。然而，当你开始在风景模式或更大的设备上使用应用程序时，我觉得事情似乎不太顺利。例如，底部导航跨越整个屏幕宽度，因此当您开始在具有更宽视窗(如横向)的设备上使用应用程序时，底部屏幕的一小块被该导航条保留——占用了可以用作可消费内容的空间。因为底部的导航栏经常在它的上方有一个浮动的动作按钮，所以我们最终在屏幕底部的这个区域总是被这两个组件占据。与顶部应用程序栏配对，我们最终得到一个受限的内容区域，包含在顶部和底部导航元素之间。</p><p id="8cba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">有了导航条，屏幕开始感觉更开阔了。我们的内容不再夹在这些导航组件之间，而是位于内容区域内显示的目的地控制器旁边。除了支持3到7个导航项目之外，导航轨道还支持一个标题组件。这意味着我们可以在这个<em class="ky">中包含浮动操作按钮，而不是将它锚定到视图的</em>——这简化了我们屏幕的内容区域，并为可消费的内容保留了空间。</p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kz"><img src="../Images/8091fb2a6ab7a0f855bd776ec9348730.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dQrJA4eXa9gTWaGH"/></div></div></figure></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="1ec1" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">添加依赖关系</h1><p id="1c1a" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">在我们开始之前，您需要为Android Material Components库添加依赖项。导航滑轨目前仅在1.4.0的最新测试版中可用。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="0b5c" class="lj jw hh lf b fi lk ll l lm ln">implementation 'com.google.android.material:material:1.4.0'</span></pre></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="031c" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">铺设导航轨道</h1><p id="0d19" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">导航条采用<strong class="ir hi"> NavigationRailView </strong>的形式，可以直接添加到您的XML布局中:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="1fff" class="lj jw hh lf b fi lk ll l lm ln">&lt;com.google.android.material.navigationrail.NavigationRailView<br/>    android:id="@+id/navigation_rail"<br/>    android:layout_width="wrap_content"<br/>    android:layout_height="match_parent"<br/>    app:headerLayout="@layout/layout_header"<br/>    app:menu="@menu/menu_rail" /&gt;</span></pre><p id="f9ea" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">将此视图添加到布局中时，应该遵循一些典型的指导原则。这些很可能取决于您的视图层次结构由什么组成，但作为一般指南:</p><ul class=""><li id="218f" class="lo lp hh ir b is it iw ix ja lq je lr ji ls jm lt lu lv lw bi translated">导航栏应该位于当前屏幕的顶栏下方。这个横杆应该<strong class="ir hi">不要</strong>与顶栏重叠或者显示在顶栏下面。它的高度应该填充顶部应用程序栏底部和屏幕底部之间的空间</li><li id="3c8b" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">导航条应该显示在当前屏幕主要内容区域的一侧。它不应该显示在这个内容的上面，相反，内容区域应该显示在导航条的<strong class="ir hi">旁边。</strong></li></ul><p id="6d7f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了举例，让我们看一个例子，看看导航条是如何位于布局内部的:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="8100" class="lj jw hh lf b fi lk ll l lm ln">&lt;androidx.constraintlayout.widget.ConstraintLayout <br/>    ...<br/>&gt;<br/><br/>    &lt;com.google.android.material.appbar.AppBarLayout<br/>        android:id="@+id/appbar"<br/>        ...&gt;<br/><br/>        &lt;androidx.appcompat.widget.Toolbar<br/>            android:id="@+id/toolbar"<br/>            ... /&gt;<br/><br/>    &lt;/com.google.android.material.appbar.AppBarLayout&gt;<br/><br/>    &lt;include<br/>        layout="@layout/content_main"<br/>        app:layout_constraintBottom_toBottomOf="parent"<br/>        app:layout_constraintEnd_toEndOf="parent"<br/>        app:layout_constraintStart_toEndOf="@id/navigation_rail"<br/>        app:layout_constraintTop_toBottomOf="@id/appbar" /&gt;<br/><br/>    &lt;com.google.android.material.navigationrail.NavigationRailView<br/>        style="@style/Widget.MaterialComponents.NavigationRailView.Colored.Compact"<br/>        android:id="@+id/navigation_rail"<br/>        android:layout_width="wrap_content"<br/>        android:layout_height="0dp"<br/>        app:headerLayout="@layout/layout_rail"<br/>        app:layout_constraintBottom_toBottomOf="parent"<br/>        app:layout_constraintStart_toStartOf="parent"<br/>        app:layout_constraintTop_toBottomOf="@id/appbar"<br/>        app:menu="@menu/menu_rail" /&gt;<br/><br/>&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;</span></pre><p id="d028" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这将给我们带来类似以下的结果:</p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/78940bdf71ffad1b63dc9b7a7376cf74.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*X5CgJDrXsjRIaUNf.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Navigation Rail displayed underneath the top bar and at the start of the content area</figcaption></figure></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="a26d" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">显示菜单</h1><p id="ddf4" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">为了显示导航轨道内部的项目，我们需要使用NavigationRailView的<strong class="ir hi"> menu </strong>属性分配一个菜单引用。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="1172" class="lj jw hh lf b fi lk ll l lm ln">&lt;com.google.android.material.navigationrail.NavigationRailView<br/>    android:id="@+id/navigation_rail"<br/>    app:menu="@menu/menu_rail" /&gt;</span></pre><p id="b26a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这个菜单看起来与你在应用程序中见过或创建的其他菜单非常相似。菜单中的每一项都成为我们导航轨道中的一个目的地，标题作为目的地的标签，图标作为目的地的视觉表示。本文示例截图中使用的菜单如下所示:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="8996" class="lj jw hh lf b fi lk ll l lm ln">&lt;menu xmlns:android="http://schemas.android.com/apk/res/android"&gt;<br/>    &lt;item<br/>        android:id="@+id/home"<br/>        android:icon="@drawable/ic_baseline_home_24"<br/>        android:title="@string/label_home"/&gt;<br/>    &lt;item<br/>        android:id="@+id/email"<br/>        android:icon="@drawable/ic_baseline_email_24"<br/>        android:title="@string/label_email"/&gt;<br/>    &lt;item<br/>        android:id="@+id/music"<br/>        android:icon="@drawable/ic_baseline_music_note_24"<br/>        android:title="@string/label_music"/&gt;<br/>    &lt;item<br/>        android:id="@+id/gallery"<br/>        android:icon="@drawable/ic_baseline_image_24"<br/>        android:title="@string/label_gallery"/&gt;<br/>&lt;/menu&gt;</span></pre></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="ee58" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">添加标题</h1><p id="2ae3" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">除了在我们的导航栏中显示一个菜单，我们还可以为视图的<strong class="ir hi"> headerLayout </strong>属性提供一个布局参考。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="9097" class="lj jw hh lf b fi lk ll l lm ln">&lt;com.google.android.material.navigationrail.NavigationRailView<br/>    android:id="@+id/navigation_rail"<br/>    app:headerLayout="@layout/layout_rail"<br/>    ... /&gt;</span></pre><p id="21d6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于这个<strong class="ir hi"> layout_rail </strong>文件，我们可以简单地以浮动操作按钮的形式提供一个视图组件:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="f44e" class="lj jw hh lf b fi lk ll l lm ln">&lt;com.google.android.material.floatingactionbutton.FloatingActionButton <br/>    xmlns:android="http://schemas.android.com/apk/res/android"<br/>    xmlns:app="http://schemas.android.com/apk/res-auto"<br/>    android:layout_width="wrap_content"<br/>    android:layout_height="wrap_content"<br/>    android:contentDescription="@string/cd_create_item"<br/>    app:fabSize="mini"<br/>    app:srcCompat="@drawable/ic_baseline_add_24" /&gt;</span></pre><p id="c07d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">有了这个，导航条就会在它的容器顶部显示这个浮动的动作按钮:</p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/dc84222cad5fbc2ae2eaa8025ecbad12.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*awJXyqqG8JHNP7h2.png"/></div></div></figure><p id="d46e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，需要注意的一件重要事情是，导航栏对于可以为这个标题布局提供的视图类型没有任何限制。例如，您可以提供某种形式的自定义按钮，希望在导航栏中使用，或者提供一个代表应用程序徽标的图像组件。虽然这两种情况都有可能，但是一定要提供一个能够给用户带来价值的标题，而不是在rail中添加任何混乱或者浪费空间。</p></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="9367" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">设计导航轨道的样式</h1><p id="4b37" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">谈到导航条的外观，有几种捆绑样式可以用来控制导航条在屏幕上的显示方式。</p><p id="9d95" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们将从默认样式开始——如果您没有声明要应用到导航栏的样式，默认情况下将使用默认样式。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="2b46" class="lj jw hh lf b fi lk ll l lm ln">style="@style/Widget.MaterialComponents.NavigationRailView"</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/1fa4135211450bdf8f6e6543cb09dbcd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pgzgzmvxNHQheBWd.png"/></div></div></figure><p id="a5c6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">应用此默认样式后，导航轨道的不同部分会应用以下属性:</p><ul class=""><li id="1bb6" class="lo lp hh ir b is it iw ix ja lq je lr ji ls jm lt lu lv lw bi translated">轨宽:<strong class="ir hi"> 72dp </strong></li><li id="7eba" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">铁轨背景:<strong class="ir hi">彩色表面</strong></li><li id="e988" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">选中图标颜色:<strong class="ir hi">原色</strong></li><li id="5ebb" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">未选中的图标颜色:<strong class="ir hi">colorOnSurface</strong>(60%)</li></ul><p id="9c9d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">下一个样式稍微混合了一下，使用我们主题的原色作为栏杆的表面颜色。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="44d9" class="lj jw hh lf b fi lk ll l lm ln">style="@style/Widget.MaterialComponents.NavigationRailView.PrimarySurface"</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/52f22ba6888c4ab83dc0648ec223fc1b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*TwftPBghIgYWExY3.png"/></div></div></figure><p id="cba5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里我们看到导航栏的宽度保持不变，但是包含的组件的外观通过使用我们的主题颜色发生了巨大的变化。</p><ul class=""><li id="5c94" class="lo lp hh ir b is it iw ix ja lq je lr ji ls jm lt lu lv lw bi translated">轨宽:<strong class="ir hi"> 72dp </strong></li><li id="5129" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">轨道背景:<strong class="ir hi"> colorPrimary </strong></li><li id="fcb1" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">所选图标颜色:<strong class="ir hi"> colorOnPrimary </strong></li><li id="3467" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">未选中的图标颜色:<strong class="ir hi">colorOnPrimary</strong>(60%)</li></ul><p id="6694" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种风格无疑让我们的Rail感觉更大胆，与屏幕上使用的顶部应用程序栏的主题相匹配。</p><p id="5259" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在某些情况下，我们可能希望导航条在屏幕上占据更少的宽度。如果默认宽度占用的空间比需要的多，可以使用以下样式来减少宽度:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="b456" class="lj jw hh lf b fi lk ll l lm ln">style="@style/Widget.MaterialComponents.NavigationRailView.Compact"</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/1b915ff4062621c77f0602d357b42bad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*RQE09zGF8SWni6sm.png"/></div></div></figure><p id="3556" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">与我们看到的初始(默认)样式类似，轨道具有以下属性，主要区别在于应用于视图的宽度:</p><ul class=""><li id="b24a" class="lo lp hh ir b is it iw ix ja lq je lr ji ls jm lt lu lv lw bi translated">轨宽:<strong class="ir hi"> 52dp </strong></li><li id="d759" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">铁轨背景:<strong class="ir hi">彩色表面</strong></li><li id="79f2" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">选中图标颜色:<strong class="ir hi"> colorPrimary </strong></li><li id="c26a" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">未选中的图标颜色:<strong class="ir hi">colorOnSurface</strong>(60%)</li></ul><p id="97e5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最终支持的样式提供了对这种紧凑外观的支持，但使用了我们之前看到的主题中的更大胆的颜色:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="5764" class="lj jw hh lf b fi lk ll l lm ln">style="@style/Widget.MaterialComponents.NavigationRailView.Colored.Compact"</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/534e2c703f9df71c93f3db1e484fabbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NM77lgL9bftFDhgz.png"/></div></div></figure><p id="5fb9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">类似于我们之前提到的<strong class="ir hi">主面</strong>样式，<strong class="ir hi">是彩色的。紧凑型</strong>风格在此使用相同的属性，宽度略有变化:</p><ul class=""><li id="c479" class="lo lp hh ir b is it iw ix ja lq je lr ji ls jm lt lu lv lw bi translated">轨宽:<strong class="ir hi"> 52dp </strong></li><li id="7620" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">铁轨背景:<strong class="ir hi">原色</strong></li><li id="a285" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">所选图标颜色:<strong class="ir hi"> colorOnPrimary </strong></li><li id="0f16" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated">未选中的图标颜色:<strong class="ir hi">colorOnPrimary</strong>(60%)</li></ul></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="6264" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">控制标高</h1><p id="5c5e" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">默认情况下，导航条将显示高度，这样它看起来是分层的，并与我们屏幕的内容区域分开。但是，如果您希望手动调整该值，您可以使用<strong class="ir hi">海拔</strong>属性。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="e313" class="lj jw hh lf b fi lk ll l lm ln">&lt;com.google.android.material.navigationrail.NavigationRailView<br/>    ...<br/>    app:elevation="4dp" /&gt;</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/bf28fd4e8ba3dae55efe600a8dbfb850.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*M9JN8l_9356Ggo2W.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Navigation Rail showing a customised elevation value</figcaption></figure></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="c919" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">菜单重心</h1><p id="8450" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">当指定一个菜单在轨道中显示时，我们可能希望控制它在容器中的位置。为此，我们可以使用<strong class="ir hi">菜单重力</strong>属性来控制菜单项的重力。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="19c4" class="lj jw hh lf b fi lk ll l lm ln">&lt;com.google.android.material.navigationrail.NavigationRailView<br/>    ...<br/>    app:menuGravity="center" /&gt;</span></pre><p id="b19a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这可以设置为<strong class="ir hi">顶部</strong>、<strong class="ir hi">中心</strong>或<strong class="ir hi">底部</strong> —应用时，导航项目将使用导航轨道内部的可用空间进行定位。</p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/23ebe765efcb42fd06fd907f2f3e0e0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*lpQznJZD7GttcYq2.png"/></div></div></figure></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="e43a" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">标签可见性</h1><p id="f739" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">在上面的所有例子中，我们已经看到标签只显示在轨道中当前选中的项目上。这是标签可见性的默认行为，我们可以使用<strong class="ir hi"> labelVisibilityMode </strong>属性来控制。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="2e68" class="lj jw hh lf b fi lk ll l lm ln">&lt;com.google.android.material.navigationrail.NavigationRailView<br/>    ...<br/>    app:labelVisibilityMode="selected" /&gt;</span></pre><p id="2536" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该属性有四个不同的选项可以应用:</p><ul class=""><li id="a70d" class="lo lp hh ir b is it iw ix ja lq je lr ji ls jm lt lu lv lw bi translated"><strong class="ir hi">标签化</strong> —所有菜单项都将显示其标签，无论选择的状态如何</li><li id="e49f" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated"><strong class="ir hi">未标记的</strong> —无论选择的状态如何，没有菜单项会显示它们的标签</li><li id="c8c5" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated"><strong class="ir hi">选中的</strong> —只有当前选中的菜单项才会显示其标签</li><li id="16e1" class="lo lp hh ir b is lx iw ly ja lz je ma ji mb jm lt lu lv lw bi translated"><strong class="ir hi">自动</strong>——当超过3个项目时，轨道将使用<strong class="ir hi">选择的</strong>选项，否则将应用标有的<strong class="ir hi">选项。</strong></li></ul><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/af3b144160ed7dca0c6ed18f5e3d8185.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*l5hh0X40mEax97Hk.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Example showing the different labelling options for the Navigation Rail</figcaption></figure><p id="5c77" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">注意:</strong>如果在这里使用未标记的选项，为了可访问性的目的，仍然要在菜单文件中证明title属性，这一点很重要。</p></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="cfe2" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">展示徽章</h1><p id="076f" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">导航条的一个有趣特性是能够在导航项目上显示徽章——如果您需要向用户显示某种形式的通知(如果该区域的内容有未决通知),这很有帮助。</p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/241078eb31b6dce119d5df91bac771e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*em_1V7Lc6b7zQjOc.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Navigation Rail showing a badge</figcaption></figure><p id="e27b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此徽章可以按导航项目单独显示。要应用徽章，我们需要在我们的导航栏上使用<strong class="ir hi"> getOrCreateBadge </strong>函数，为我们想要应用徽章的导航项目提供ID——该函数将返回一个BadgeDrawable实例。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="8da6" class="lj jw hh lf b fi lk ll l lm ln">var badge = navigationRail.getOrCreateBadge(R.id.home)</span></pre><p id="490f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">还有一个<strong class="ir hi"> getBadge </strong>函数，它返回一个对BadgeDrawable的可空引用，但是，<strong class="ir hi"> getOrCreateBadge </strong>帮助我们处理给定菜单ID的标记可能尚不存在的情况。一旦我们有了对这个BadgeDrawable的引用，我们就可以控制它的可见性，并分配一个要在其中显示的值:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="1e93" class="lj jw hh lf b fi lk ll l lm ln">badge.isVisible = true<br/>badge.number = 5</span></pre><p id="a3be" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用完徽章后，我们可以使用removeBadge功能将其从我们的导轨上移除:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="2407" class="lj jw hh lf b fi lk ll l lm ln">navigationRail.removeBadge(menuItemId)</span></pre><h2 id="19a8" class="lj jw hh bd jx mg mh mi kb mj mk ml kf ja mm mn kj je mo mp kn ji mq mr kr ms bi translated">徽章重力</h2><p id="6ba4" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">如果您想要控制徽章相对于导航项目的位置，那么您可以使用BadgeDrawable的<strong class="ir hi"> badgeGravity </strong>属性来实现。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="caf7" class="lj jw hh lf b fi lk ll l lm ln">badge.badgeGravity = BadgeDrawable.BOTTOM_START</span></pre><p id="6762" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这可以设置为四个不同值之一(<strong class="ir hi"> TOP_END </strong>、<strong class="ir hi"> TOP_START </strong>、<strong class="ir hi"> BOTTOM_END </strong>、<strong class="ir hi"> BOTTOM_START </strong>)，每个值用于在导航项目区域内定位徽章。</p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/cd9ac79b25c43c12863417a8368603fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*HjII2X6yTsdTFdh9.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">The different gravity options for a navigation item badge</figcaption></figure><h2 id="c845" class="lj jw hh bd jx mg mh mi kb mj mk ml kf ja mm mn kj je mo mp kn ji mq mr kr ms bi translated">徽章颜色</h2><p id="0e3a" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">在前面的示例中，我们可以看到工卡在显示时使用默认颜色——这些颜色实际上是我们的应用程序主题中的<strong class="ir hi"> colorError </strong>和<strong class="ir hi"> colorOnError </strong>值。如果您希望覆盖这些，或者为每个工卡单独设置颜色，那么您可以通过在任何BadgeDrawable引用上使用<strong class="ir hi"> backgroundColor </strong>和<strong class="ir hi"> badgeTextColor </strong>来实现:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="0a67" class="lj jw hh lf b fi lk ll l lm ln">badge.backgroundColor = Color.BLACK<br/>badge.badgeTextColor = Color.WHITE</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/1db55652ff5f4eb12f6c660cedb95aa6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ygJOrdmaMG9F8vyv.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Navigation Rail showing a styled badge</figcaption></figure><h2 id="a6c6" class="lj jw hh bd jx mg mh mi kb mj mk ml kf ja mm mn kj je mo mp kn ji mq mr kr ms bi translated">徽章溢出</h2><p id="fcea" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">默认情况下，徽章最多显示4个字符，这样做时，它会自动处理任何溢出。这意味着显示诸如“999999”的徽章值将导致使用“999+”。正如我们所看到的，在某些情况下，这在我们的Rail中可能看起来不太好:</p><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/600192651f2e7b4398252d648ecaf7f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LqCOS5EjLvzEmYcN.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Navigation Rail showing a badge that exceeds the end of the container</figcaption></figure><p id="90b1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果我们想要手动调整工卡中显示的最大字符数，我们可以使用<strong class="ir hi"> maxCharacterCount </strong>属性。这将仍然允许徽章为我们处理溢出，但更允许我们控制溢出处理应该起作用的点。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="38dd" class="lj jw hh lf b fi lk ll l lm ln">badge.maxCharacterCount = 3</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/ee0a3fe3dd40e2475e74b7911fcc694b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nd1oSW4B9xK8YzSZ.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Navigation Rail showing a badge with overflowing data</figcaption></figure><h2 id="c889" class="lj jw hh bd jx mg mh mi kb mj mk ml kf ja mm mn kj je mo mp kn ji mq mr kr ms bi translated">徽章偏移量</h2><p id="1981" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">从上面显示的示例来看，导航徽章显示在图标区域之外，有足够的空间不会造成任何重叠。在某些情况下，我们可能希望定位我们的徽章稍有不同——在这些情况下，<strong class="ir hi">垂直偏移</strong>和<strong class="ir hi">水平偏移</strong>属性都可以用来为我们的导航徽章提供像素值偏移。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="3c92" class="lj jw hh lf b fi lk ll l lm ln">badge.verticalOffset = verticalOffset<br/>badge.horizontalOffset = horizontalOffset</span></pre><figure class="la lb lc ld fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/4fc1d1cc802e4262196ac463c7a35a97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QrYUKlO1n3mUJTmA.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Navigation Rail showing an offset badge</figcaption></figure></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="6c08" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">处理项目选择</h1><p id="7ef8" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">现在，我们已经在应用程序中显示并样式化了导航条，我们将想要处理与它的任何交互。与Android应用程序中其他组件的其他菜单项处理类似，我们可以在导航栏上设置一个项目选择监听器，并使用它来响应与菜单项的任何交互——使用菜单项的id来处理相应的菜单项。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="8019" class="lj jw hh lf b fi lk ll l lm ln">navigationRail.setOnItemSelectedListener {  menuItem -&gt;<br/>    when (menuItem.itemId) {<br/>        R.id.home -&gt; {<br/>            ...<br/>            true<br/>        }<br/>        else -&gt; false<br/>    }<br/>}</span></pre><p id="053b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">需要注意的是，只有当一个项目最初被选中时，才会触发这个项目选定侦听器，也就是说，当一个项目从未选中状态变为选中状态时。如果用户已经选择并重新选择了一个项目，则不会触发该侦听器。在用户重新选择一个项目的情况下(就像在中一样，当单击该项目的时候它已经被选中了)，可以使用第二个侦听器来注册这些事件。</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="d743" class="lj jw hh lf b fi lk ll l lm ln">navigationRail.setOnItemReselectedListener {  menuItem -&gt;<br/>    when (menuItem.itemId) {<br/>        R.id.home -&gt; {<br/><br/>        }<br/>    }<br/>}</span></pre><p id="c2a2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在有了这个辅助侦听器，我们就能够侦听已经处于选中状态的项目的任何交互并对其做出反应。</p></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="5099" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">处理导航</h1><p id="e593" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">当利用某种形式的导航栏时，我们希望允许用户在当前屏幕的不同视图之间导航。这是来自材料组件库的BottomNavigationView的一个常见用例——虽然从视觉上看，这与导航条略有不同，但在行为上它们非常相似。</p><p id="6a8b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种相似性让我思考导航组件如何支持设置带有NavController引用的BottomNavigationView。这基本上允许你使用一个BottomNavigationView在导航图上导航，我希望在导航栏上也有类似的支持。我很高兴看到导航组件库最近增加了对此的支持。有了这些，您就可以使用下面的代码来设置一个带有NavController的导航轨道参考:</p><pre class="la lb lc ld fd le lf lg lh aw li bi"><span id="5307" class="lj jw hh lf b fi lk ll l lm ln">NavigationUI.setupWithNavController(<br/>    navigationRailView,<br/>    navController<br/>)</span></pre></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="dc2f" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">包扎</h1><p id="d985" class="pw-post-body-paragraph ip iq hh ir b is kt iu iv iw ku iy iz ja kv jc jd je kw jg jh ji kx jk jl jm ha bi translated">唷，那可真让人受不了！我希望通过这篇文章，你已经获得了足够的关于导航条的知识，能够将它添加到你的应用程序中，根据用户使用的设备/屏幕来改善他们的体验！就我个人而言，我真的很兴奋能够将它应用到我的应用程序中，并开始在我的设备上安装的应用程序中亲自体验它！</p><p id="c112" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">更多Android开发者相关内容，请在twitter上关注我！<a class="ae jn" href="https://twitter.com/hitherejoe" rel="noopener ugc nofollow" target="_blank">https://twitter.com/hitherejoe</a></p></div></div>    
</body>
</html>