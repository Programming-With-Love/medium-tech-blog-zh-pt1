<html>
<head>
<title>Uploading large files to Oracle Object Storage using a Command Line Interface (CLI)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用命令行界面(CLI)将大文件上载到Oracle对象存储</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/uploading-large-files-to-oracle-object-storage-using-a-command-line-interface-cli-56a6d96f43d8?source=collection_archive---------0-----------------------#2019-02-25">https://medium.com/oracledevs/uploading-large-files-to-oracle-object-storage-using-a-command-line-interface-cli-56a6d96f43d8?source=collection_archive---------0-----------------------#2019-02-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/204465bfca25dd54cb8c1285cfdd0573.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RcEaPO4H9wg0I_iQir8cKg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Object Storage common Use Cases</figcaption></figure><p id="6dec" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在这篇博文中，我将列出并解释在Linux或MacOS上使用命令行界面(CLI)将大文件上传到Oracle对象存储所需的步骤。</p><h1 id="d8f8" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">介绍</h1><p id="e11e" class="pw-post-body-paragraph it iu hh iv b iw kp iy iz ja kq jc jd je kr jg jh ji ks jk jl jm kt jo jp jq ha bi translated">Oracle云基础设施提供了一种<a class="ae ku" href="https://cloud.oracle.com/storage/object-storage/features" rel="noopener ugc nofollow" target="_blank">对象存储服务</a>，允许以高度安全、可扩展和持久的方式将文件存储为对象。</p><p id="f622" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">对象存储可以支持多种用例，包括日志分析、数据湖的创建、数据迁移、备份和灾难恢复。</p><p id="9e83" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">Oracle Cloud提供了一个Web控制台来将文件上传到对象存储，但是，它只能上传最大2 GB的文件。对于较大的文件，用户可以使用API、Java SDK或<a class="ae ku" href="https://docs.cloud.oracle.com/iaas/Content/API/Concepts/cliconcepts.htm" rel="noopener ugc nofollow" target="_blank">命令行界面(CLI) </a>执行多部分上传。</p><p id="b448" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">上传对象的最大大小为10 TiB。目标零件不得大于50 GiB。</p><figure class="kw kx ky kz fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kv"><img src="../Images/447545a1a21deb535e8cd8b18495f7ca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gbI8Tvcz1jQQVvjMimaiBg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Files up to 2 GiB can be uploaded using the Web Console</figcaption></figure><h1 id="80cb" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">安装和配置CLI</h1><p id="5f1d" class="pw-post-body-paragraph it iu hh iv b iw kp iy iz ja kq jc jd je kr jg jh ji ks jk jl jm kt jo jp jq ha bi translated">使用CLI将大型对象上传到对象存储的第一步是<a class="ae ku" href="https://docs.cloud.oracle.com/iaas/Content/API/SDKDocs/cliinstall.htm" rel="noopener ugc nofollow" target="_blank">安装和配置CLI本身</a>。</p><p id="5803" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">CLI基于Python(2 . 7 . 5或3.5或更高版本)构建，因此我们需要确保上传文件的机器上安装了这两个Python版本。</p><p id="15fe" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">打开终端后，我们可以运行以下命令来运行安装程序并响应一些提示(默认值是可以的):</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="e8e3" class="lf js hh lb b fi lg lh l li lj">bash -c "$(curl -L <a class="ae ku" href="https://raw.githubusercontent.com/oracle/oci-cli/master/scripts/install/install.sh" rel="noopener ugc nofollow" target="_blank">https://raw.githubusercontent.com/oracle/oci-cli/master/scripts/install/install.sh</a>)"</span></pre><p id="a41b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">成功完成安装后，我们需要运行一个一次性配置过程，该过程将在<code class="du lk ll lm lb b">~/.oci</code>目录下存储一个配置文件。CLI请求使用API密钥进行身份验证，因此如果您需要生成密钥对，可以先运行<code class="du lk ll lm lb b">oci setup keys</code>并提供一个路径来存储生成的私有和公共密钥(在这种情况下，不要忘记将生成的公共密钥上传到用户控制台，以便身份验证机制正常工作)。</p><p id="9b3d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">要开始配置过程，我们需要运行<code class="du lk ll lm lb b">oci setup config</code>命令并按照提示进行操作。将需要三个参数:</p><ol class=""><li id="4db6" class="ln lo hh iv b iw ix ja jb je lp ji lq jm lr jq ls lt lu lv bi translated"><a class="ae ku" href="https://docs.cloud.oracle.com/iaas/Content/API/Concepts/apisigningkey.htm#Other" rel="noopener ugc nofollow" target="_blank">租赁OCID </a>，可以在OCI控制台<em class="lw">管理&gt;租赁详情</em>下找到</li><li id="3f05" class="ln lo hh iv b iw lx ja ly je lz ji ma jm mb jq ls lt lu lv bi translated"><a class="ae ku" href="https://docs.cloud.oracle.com/iaas/Content/API/Concepts/apisigningkey.htm#Other" rel="noopener ugc nofollow" target="_blank">用户OCID </a>，可以在OCI控制台下找到身份&gt;用户&gt;用户&gt;用户A</li><li id="a728" class="ln lo hh iv b iw lx ja ly je lz ji ma jm mb jq ls lt lu lv bi translated"><a class="ae ku" href="https://docs.cloud.oracle.com/iaas/Content/General/Concepts/regions.htm" rel="noopener ugc nofollow" target="_blank">地区名称</a>，例如<code class="du lk ll lm lb b">eu-frankfurt-1</code>，如果您使用的是法兰克福数据中心</li></ol><p id="c07c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">生成的配置文件将类似于下面的屏幕截图(出于安全目的，我将一些部分像素化):</p><figure class="kw kx ky kz fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mc"><img src="../Images/ff1e0174f92c43248468ac5dfa38fea5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UHvqjkED46KoDc9bZhR-xQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">The CLI generated configuration file</figcaption></figure><h1 id="42dc" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">生成一个随机的大文件</h1><p id="ee9f" class="pw-post-body-paragraph it iu hh iv b iw kp iy iz ja kq jc jd je kr jg jh ji ks jk jl jm kt jo jp jq ha bi translated">如果您没有用于测试目的的大文件要上传，您可以利用下面的Unix命令生成一个大约10 GB的随机文本文件:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="7a89" class="lf js hh lb b fi lg lh l li lj"># Generate a ~10 GB random file<br/>dd if=/dev/urandom of=random_file.txt bs=1048576 count=10000</span></pre><h1 id="6164" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">上传大文件</h1><p id="2334" class="pw-post-body-paragraph it iu hh iv b iw kp iy iz ja kq jc jd je kr jg jh ji ks jk jl jm kt jo jp jq ha bi translated">现在可以使用<code class="du lk ll lm lb b">oci os object put</code>命令上传上一步生成的随机文本文件:</p><pre class="kw kx ky kz fd la lb lc ld aw le bi"><span id="31f1" class="lf js hh lb b fi lg lh l li lj">oci os object put \<br/>-ns &lt;object_storage_namespace&gt; \<br/>-bn &lt;bucket_name&gt; \<br/>--file &lt;file_location&gt; \<br/>--name &lt;object_name&gt; \<br/>--part-size &lt;upload_part_size_in_MB&gt; \<br/>--parallel-upload-count &lt;maximum_number_parallel_uploads&gt;</span></pre><p id="453f" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">让我们快速回顾一下该命令使用的参数:</p><ul class=""><li id="3d54" class="ln lo hh iv b iw ix ja jb je lp ji lq jm lr jq md lt lu lv bi translated"><strong class="iv hi"> <em class="lw"> ns </em> </strong>(可选)<strong class="iv hi"> <em class="lw"> </em> </strong> <a class="ae ku" href="https://docs.cloud.oracle.com/iaas/Content/Object/Tasks/understandingnamespaces.htm" rel="noopener ugc nofollow" target="_blank">对应OCI租赁名称</a> —如果没有提供，则使用<code class="du lk ll lm lb b">oci os ns get</code>进行检索</li><li id="a252" class="ln lo hh iv b iw lx ja ly je lz ji ma jm mb jq md lt lu lv bi translated"><strong class="iv hi"> <em class="lw"> bn </em> </strong>是我们上传文件的存储桶名称，如果不存在，需要先创建<a class="ae ku" href="https://docs.cloud.oracle.com/iaas/Content/Object/Tasks/managingbuckets.htm" rel="noopener ugc nofollow" target="_blank"/></li><li id="f2ff" class="ln lo hh iv b iw lx ja ly je lz ji ma jm mb jq md lt lu lv bi translated"><strong class="iv hi"> <em class="lw">文件</em> </strong>是要上传的本地文件的路径，例如<code class="du lk ll lm lb b">/path/to/random_file.txt</code></li><li id="6085" class="ln lo hh iv b iw lx ja ly je lz ji ma jm mb jq md lt lu lv bi translated"><strong class="iv hi"> <em class="lw">名称</em> </strong>(可选)为上传的对象指定一个不同的名称</li><li id="4293" class="ln lo hh iv b iw lx ja ly je lz ji ma jm mb jq md lt lu lv bi translated"><strong class="iv hi"> <em class="lw">部分大小</em> </strong>(可选)是通过多部分上传操作上传时使用的部分大小(以MiB为单位)</li><li id="bd3b" class="ln lo hh iv b iw lx ja ly je lz ji ma jm mb jq md lt lu lv bi translated"><strong class="iv hi"> <em class="lw">并行上传计数</em> </strong>(可选)表示可以并行上传的最大零件数(默认为3)</li></ul><figure class="kw kx ky kz fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es me"><img src="../Images/ceea4147996223467d501c3893d8c18e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DQtT-EbFkoPAO_4Mu2om5Q.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">An example of CLI upload</figcaption></figure><p id="06ef" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">也可以指定其他参数。可以在<a class="ae ku" href="https://docs.cloud.oracle.com/iaas/tools/oci-cli/latest/oci_cli_docs/cmdref/os/multipart.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到对象存储对象PUT的完整CLI命令参考。</p><p id="0536" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">上传操作完成后，您可以在存储桶中看到上传的文件:</p><figure class="kw kx ky kz fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mf"><img src="../Images/06d19d71670fbd56fc36352969a5ef06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LBVqgaKW07lgu6ku_Btrpg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Files can be viewed and downloaded from the Web Console</figcaption></figure><h1 id="bf9a" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">在Oracle云上免费试用</h1><p id="7e50" class="pw-post-body-paragraph it iu hh iv b iw kp iy iz ja kq jc jd je kr jg jh ji ks jk jl jm kt jo jp jq ha bi translated">对象存储只是Oracle云提供的众多服务之一。还有许多其他方法可以用来增强您的云应用程序。</p><p id="6dd2" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">你可以通过<a class="ae ku" href="http://bit.ly/LucaMediumBlogOCI" rel="noopener ugc nofollow" target="_blank">在这里</a>注册一个免费试用账户来尝试我在本教程中描述的步骤，并借此机会发现OCI提供的许多其他服务。</p><p id="cea5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><a class="ae ku" href="http://bit.ly/LucaMediumBlogOCI" rel="noopener ugc nofollow" target="_blank">试用甲骨文云30天！</a></p></div></div>    
</body>
</html>