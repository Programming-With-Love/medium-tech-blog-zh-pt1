<html>
<head>
<title>Use Express.JS as a Web Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用快递。作为Web服务器的JS</h1>
<blockquote>原文：<a href="https://medium.easyread.co/introduction-to-express-js-246191ec05f2?source=collection_archive---------0-----------------------#2020-04-25">https://medium.easyread.co/introduction-to-express-js-246191ec05f2?source=collection_archive---------0-----------------------#2020-04-25</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/60fa27f48594d6c0774b6634110cd325.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xd-gsjSx4KjNLn6LNojQqQ.jpeg"/></div></div></figure><div class=""/><blockquote class="jv jw jx"><p id="e4a2" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">在本文中，我们将了解Express。JS用于处理POST和GET请求，以及为什么它比节点的<code class="fe kx ky kz la b"><strong class="kb iz">http</strong></code>核心模块更合适。JS引擎。</p></blockquote></div><div class="ab cl lb lc hr ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ig ih ii ij ik"><h1 id="8389" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">Express是什么，是什么让它如此伟大？</h1><p id="8bb5" class="pw-post-body-paragraph jy jz iy kb b kc mg ke kf kg mh ki kj mi mj km kn mk ml kq kr mm mn ku kv kw ig bi translated">快车是最受欢迎的节点。JS框架来处理特定URL上的多个不同的HTTP请求。此外，它是最小的、开源的、灵活的，这有助于开发者投入更少的精力和时间来开发更好的网站和应用。</p><p id="88ef" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">像优步和推特这样的科技巨头都在使用它，这肯定是一个令人惊奇的工具。它增加了非常简单的路由，并从本质上缩短了处理web请求所需的代码行。</p><h2 id="96fc" class="mp lj iy bd lk mq mr dn lo ms mt dp ls mi mu mv lw mk mw mx ma mm my mz me na bi translated">让我举一个例子:</h2><p id="998e" class="pw-post-body-paragraph jy jz iy kb b kc mg ke kf kg mh ki kj mi mj km kn mk ml kq kr mm mn ku kv kw ig bi translated">重用我上一篇文章中的代码:<a class="ae mo" href="https://medium.com/easyread/http-server-with-node-js-5e0d8df901b4" rel="noopener">使用Node。JS作为Web服务器</a>，这里有一个在NodeJS中使用<code class="fe kx ky kz la b"><strong class="kb iz">http</strong></code>模块的例子</p><figure class="nb nc nd ne gt ip"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="7da6" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">现在，让我们使用Express API重写这段代码:</p><figure class="nb nc nd ne gt ip"><div class="bz fp l di"><div class="nf ng l"/></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk">Code for ‘Hello world’ in Express. Explained in the next part</figcaption></figure></div><div class="ab cl lb lc hr ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ig ih ii ij ik"><h1 id="57bf" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">入门指南</h1><p id="7c74" class="pw-post-body-paragraph jy jz iy kb b kc mg ke kf kg mh ki kj mi mj km kn mk ml kq kr mm mn ku kv kw ig bi translated">通过NPM安装。这是一个简单的步骤。为了获得更多关于NPM的帮助，我在这里写了一个<a class="ae mo" href="https://medium.com/@hussainarifkl/the-basics-of-npm-a32ee1d79901" rel="noopener">指南</a></p><pre class="nb nc nd ne gt nl la nm nn aw no bi"><span id="2523" class="mp lj iy la b gy np nq l nr ns"><strong class="la iz">npm i express</strong></span></pre><p id="fcf2" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">你现在可以走了！</p></div><div class="ab cl lb lc hr ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ig ih ii ij ik"><h1 id="7cd8" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">简单的例子</h1><p id="7ba1" class="pw-post-body-paragraph jy jz iy kb b kc mg ke kf kg mh ki kj mi mj km kn mk ml kq kr mm mn ku kv kw ig bi translated">让我们在Express中编写一个GET方法来显示单词“<code class="fe kx ky kz la b"><strong class="kb iz">Hello World</strong></code>”。重用上面示例中的代码:</p><figure class="nb nc nd ne gt ip"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="0926" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">通过命令行<code class="fe kx ky kz la b"><strong class="kb iz">node express-basic-hello-world</strong></code>运行代码，然后在另一个命令行上键入:</p><pre class="nb nc nd ne gt nl la nm nn aw no bi"><span id="1ee4" class="mp lj iy la b gy np nq l nr ns"><strong class="la iz">curl localhost:3000</strong></span></pre><p id="377c" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated"><code class="fe kx ky kz la b"><strong class="kb iz">app.get()</strong></code>的第一个参数是<em class="ka">路线。</em> <br/>第二个参数是回调，正如前面标题<br/> <code class="fe kx ky kz la b"><strong class="kb iz">app.listen</strong></code>中解释的，告诉我们它将响应的端口号。</p><blockquote class="jv jw jx"><p id="49e9" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">路由是什么？<strong class="kb iz"> <em class="iy">路由</em> </strong>指的是应用程序的端点(URIs)如何响应客户端请求</p></blockquote><p id="e33a" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated"><strong class="kb iz">如果</strong>客户端位于URL或路径<code class="fe kx ky kz la b"><strong class="kb iz">‘/’</strong></code>(换句话说，根主页)，<strong class="kb iz">然后</strong>执行回调中的代码块。相当容易！</p><h1 id="697d" class="li lj iy bd lk ll nt ln lo lp nu lr ls lt nv lv lw lx nw lz ma mb nx md me mf bi translated">处理其他路线</h1><p id="e151" class="pw-post-body-paragraph jy jz iy kb b kc mg ke kf kg mh ki kj mi mj km kn mk ml kq kr mm mn ku kv kw ig bi translated">你甚至可以这样处理其他路线:</p><figure class="nb nc nd ne gt ip"><div class="bz fp l di"><div class="nf ng l"/></div></figure><p id="7692" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">假设客户端在根主页(<code class="fe kx ky kz la b"><strong class="kb iz">/</strong></code>)，那么单词<code class="fe kx ky kz la b"><strong class="kb iz">`at root`</strong></code>将被打印出来。否则，如果客户端位于名为<code class="fe kx ky kz la b"><strong class="kb iz">hussain</strong></code>的URL，那么文字<code class="fe kx ky kz la b"><strong class="kb iz">at URL named: Hussain</strong></code>将被打印出来。</p><p id="f53c" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">用命令<code class="fe kx ky kz la b"><strong class="kb iz">node express-routing-example</strong></code>运行代码</p><p id="eb94" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">然后在另一个命令行上写下:<br/> <code class="fe kx ky kz la b"><strong class="kb iz">curl localhost:3000</strong></code>这里，文字<code class="fe kx ky kz la b"><strong class="kb iz">`at root`</strong></code>将被打印<br/> <code class="fe kx ky kz la b"><strong class="kb iz">curl localhost:3000/hussain</strong></code>这里，文字‘at URL named:Hussain’将被打印。<code class="fe kx ky kz la b"><strong class="kb iz">‘/’</strong></code>后的文字是自变量</p></div><div class="ab cl lb lc hr ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ig ih ii ij ik"><h1 id="ffb7" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">发布请求</h1><p id="4fd2" class="pw-post-body-paragraph jy jz iy kb b kc mg ke kf kg mh ki kj mi mj km kn mk ml kq kr mm mn ku kv kw ig bi translated">您还可以处理其他请求，如POST、PUT等。为此，只需用参数完全相同的<code class="fe kx ky kz la b"><strong class="kb iz">app.post</strong></code>或<code class="fe kx ky kz la b"><strong class="kb iz">app.put</strong></code>替换<code class="fe kx ky kz la b"><strong class="kb iz">app.get</strong></code></p><p id="546f" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">要处理发布请求:</p><figure class="nb nc nd ne gt ip"><div class="bz fp l di"><div class="nf ng l"/></div></figure><blockquote class="jv jw jx"><p id="bde4" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">注意:<code class="fe kx ky kz la b"><strong class="kb iz">app.use()</strong></code>是一个中间件函数，将在下一篇文章中讨论。</p></blockquote><p id="7efe" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">通过命令行执行代码，然后，通过cURL发送数据，打开另一个终端窗口写入:</p><p id="5a31" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated"><code class="fe kx ky kz la b"><strong class="kb iz">curl -d 'Hello World' localhost:3000/ -H 'Content-Type: text/plain'</strong></code></p><pre class="nb nc nd ne gt nl la nm nn aw no bi"><span id="a61e" class="mp lj iy la b gy np nq l nr ns">curl -d <strong class="la iz">'Hello World at hussain'</strong> localhost:3000/<strong class="la iz">hussain</strong> -H 'Content-Type:text/plain'<!-- --> </span></pre><p id="97ba" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">回到您的服务器终端(之前没有使用cURL函数的终端),注意您发送的数据已经打印在窗口中。</p><blockquote class="jv jw jx"><p id="42ca" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">注意:<code class="fe kx ky kz la b"><strong class="kb iz">-H</strong></code>用于指定头部，告诉Express我们发送的数据将是纯文本。Express对格式非常挑剔，这就是为什么我们必须在发送数据之前指定报头</p></blockquote></div><div class="ab cl lb lc hr ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ig ih ii ij ik"><h1 id="f5f4" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">配置快速</h1><p id="2f6b" class="pw-post-body-paragraph jy jz iy kb b kc mg ke kf kg mh ki kj mi mj km kn mk ml kq kr mm mn ku kv kw ig bi translated">您可以随时更改Express中的设置。有很多配置。其中一些是</p><pre class="nb nc nd ne gt nl la nm nn aw no bi"><span id="3357" class="mp lj iy la b gy np nq l nr ns"><strong class="la iz">app.set(‘port’, process.env.PORT || 3000) </strong>//change default port<br/><strong class="la iz">app.set(‘views’, ‘templates’)</strong> // The directory the templates<br/><strong class="la iz">app.set(‘view engine’, ‘jade’)</strong> //set view engine to JADE</span></pre></div><div class="ab cl lb lc hr ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ig ih ii ij ik"><h1 id="e24f" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">快速应用生成器</h1><p id="905c" class="pw-post-body-paragraph jy jz iy kb b kc mg ke kf kg mh ki kj mi mj km kn mk ml kq kr mm mn ku kv kw ig bi translated"><code class="fe kx ky kz la b"><strong class="kb iz">express-generator</strong></code>模块用于为您的网站获取模板。这样做是为了让你——开发者——可以花更少的时间来开发应用程序的设计，因为你已经有了网站的“框架”。<br/>您可以开始快速开发，因为生成器将为不同的模板引擎和库创建文件和文件夹。</p><p id="d151" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">这样，您可以花更多的时间来适当地开发后端逻辑。</p><h2 id="12c6" class="mp lj iy bd lk mq mr dn lo ms mt dp ls mi mu mv lw mk mw mx ma mm my mz me na bi translated">入门指南</h2><p id="2a1c" class="pw-post-body-paragraph jy jz iy kb b kc mg ke kf kg mh ki kj mi mj km kn mk ml kq kr mm mn ku kv kw ig bi translated">运行命令安装模块:</p><pre class="nb nc nd ne gt nl la nm nn aw no bi"><span id="2d2d" class="mp lj iy la b gy np nq l nr ns"><strong class="la iz">npx express-generator</strong></span></pre><h2 id="a5c6" class="mp lj iy bd lk mq mr dn lo ms mt dp ls mi mu mv lw mk mw mx ma mm my mz me na bi translated">创建项目</h2><p id="c3fc" class="pw-post-body-paragraph jy jz iy kb b kc mg ke kf kg mh ki kj mi mj km kn mk ml kq kr mm mn ku kv kw ig bi translated">既然我们已经安装了模块</p><p id="57df" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">运行命令:</p><pre class="nb nc nd ne gt nl la nm nn aw no bi"><span id="1297" class="mp lj iy la b gy np nq l nr ns"><strong class="la iz">express myProject</strong> #create a project with name of myProject<br/><strong class="la iz">cd myProject</strong> #change working directory to myProject<br/><strong class="la iz">npm install</strong> #install all required dependencies<br/><strong class="la iz">npm start</strong></span></pre><p id="45e5" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">我们完了！</p><p id="2eac" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">在您的Express项目目录中工作，您可能已经注意到了更多的子目录和文件。这里有一个解释</p><ul class=""><li id="3e7f" class="ny nz iy kb b kc kd kg kh mi oa mk ob mm oc kw od oe of og bi translated">主文件，包含嵌入式服务器和应用程序逻辑</li><li id="1e36" class="ny nz iy kb b kc oh kg oi mi oj mk ok mm ol kw od oe of og bi translated"><code class="fe kx ky kz la b"><strong class="kb iz">/public</strong></code>:包含由嵌入式服务器提供服务的静态文件</li><li id="8799" class="ny nz iy kb b kc oh kg oi mi oj mk ok mm ol kw od oe of og bi translated"><code class="fe kx ky kz la b"><strong class="kb iz">/routes</strong></code>:为REST API服务器提供定制路由(web应用程序不需要)</li><li id="8cb2" class="ny nz iy kb b kc oh kg oi mi oj mk ok mm ol kw od oe of og bi translated"><code class="fe kx ky kz la b"><strong class="kb iz">/routes/users.js</strong></code>:用户等资源的端点/路由</li><li id="2538" class="ny nz iy kb b kc oh kg oi mi oj mk ok mm ol kw od oe of og bi translated"><code class="fe kx ky kz la b"><strong class="kb iz">/views</strong></code>:包含模板引擎可以处理的模板(REST APIs不需要)</li><li id="95ae" class="ny nz iy kb b kc oh kg oi mi oj mk ok mm ol kw od oe of og bi translated"><code class="fe kx ky kz la b"><strong class="kb iz">/package.json</strong></code>:项目清单</li><li id="349d" class="ny nz iy kb b kc oh kg oi mi oj mk ok mm ol kw od oe of og bi translated"><code class="fe kx ky kz la b"><strong class="kb iz">/www</strong></code>:启动脚本文件夹</li></ul><blockquote class="jv jw jx"><p id="ebe7" class="jy jz ka kb b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw ig bi translated">注意:web应用程序是一个传统的web应用程序(胖服务器),具有100%的服务器端渲染，而REST API是一个纯数据服务器(渲染发生在客户端，UI托管在客户端)</p></blockquote></div><div class="ab cl lb lc hr ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ig ih ii ij ik"><h1 id="578d" class="li lj iy bd lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md me mf bi translated">摘要</h1><h2 id="05e1" class="mp lj iy bd lk mq mr dn lo ms mt dp ls mi mu mv lw mk mw mx ma mm my mz me na bi translated">要安装express</h2><pre class="nb nc nd ne gt nl la nm nn aw no bi"><span id="8dbe" class="mp lj iy la b gy np nq l nr ns">npm i express</span></pre><h2 id="e934" class="mp lj iy bd lk mq mr dn lo ms mt dp ls mi mu mv lw mk mw mx ma mm my mz me na bi translated">要处理请求:</h2><pre class="nb nc nd ne gt nl la nm nn aw no bi"><span id="e5f2" class="mp lj iy la b gy np nq l nr ns">app.METHOD(route, handler)</span></pre><p id="7e13" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">在哪里</p><ul class=""><li id="35cf" class="ny nz iy kb b kc kd kg kh mi oa mk ob mm oc kw od oe of og bi translated"><code class="fe kx ky kz la b">METHOD</code>可以是<code class="fe kx ky kz la b">put</code>、<code class="fe kx ky kz la b">get</code>、<code class="fe kx ky kz la b">post</code>或<code class="fe kx ky kz la b">delete</code></li><li id="3d04" class="ny nz iy kb b kc oh kg oi mi oj mk ok mm ol kw od oe of og bi translated"><code class="fe kx ky kz la b">route</code>将是你的道路</li><li id="d204" class="ny nz iy kb b kc oh kg oi mi oj mk ok mm ol kw od oe of og bi translated"><code class="fe kx ky kz la b">handler</code>将是处理该路由时执行的回调函数。</li></ul><h2 id="825c" class="mp lj iy bd lk mq mr dn lo ms mt dp ls mi mu mv lw mk mw mx ma mm my mz me na bi translated">要配置:</h2><pre class="nb nc nd ne gt nl la nm nn aw no bi"><span id="65ec" class="mp lj iy la b gy np nq l nr ns">app.set(key,itsValueToChange)</span></pre><h1 id="dfa6" class="li lj iy bd lk ll nt ln lo lp nu lr ls lt nv lv lw lx nw lz ma mb nx md me mf bi translated">外部资源</h1><ul class=""><li id="68e4" class="ny nz iy kb b kc mg kg mh mi om mk on mm oo kw od oe of og bi translated"><a class="ae mo" href="https://developer.mozilla.org/en-US/docs/Learn/Server-side/Express_Nodejs/skeleton_website" rel="noopener ugc nofollow" target="_blank">创建一个框架网站——Mozilla</a></li><li id="f7f2" class="ny nz iy kb b kc oh kg oi mi oj mk ok mm ol kw od oe of og bi translated"><a class="ae mo" href="https://expressjs.com/en/starter/basic-routing.html" rel="noopener ugc nofollow" target="_blank">快递基本路线</a></li><li id="17fe" class="ny nz iy kb b kc oh kg oi mi oj mk ok mm ol kw od oe of og bi translated"><a class="ae mo" href="https://www.creativebloq.com/how-to/get-started-with-expressjs" rel="noopener ugc nofollow" target="_blank">快速入门。JS </a></li></ul><p id="8c3c" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">在接下来的文章中，我们将更深入地去表达和它的工作方式。今天到此为止。非常感谢您的阅读！</p><p id="d73b" class="pw-post-body-paragraph jy jz iy kb b kc kd ke kf kg kh ki kj mi kl km kn mk kp kq kr mm kt ku kv kw ig bi translated">呆在家里，注意安全！</p></div><div class="ab cl lb lc hr ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ig ih ii ij ik"><figure class="nb nc nd ne gt ip"><div class="bz fp l di"><div class="op ng l"/></div></figure></div></div>    
</body>
</html>