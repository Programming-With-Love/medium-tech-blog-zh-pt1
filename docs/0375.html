<html>
<head>
<title>The Android Dev Summit 2018 app (instant app takeaways + open source)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android Dev Summit 2018应用(即时应用外卖+开源)</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/the-android-dev-summit-2018-app-instant-app-takeaways-open-source-e5b590f78f38?source=collection_archive---------6-----------------------#2018-12-07">https://medium.com/androiddevelopers/the-android-dev-summit-2018-app-instant-app-takeaways-open-source-e5b590f78f38?source=collection_archive---------6-----------------------#2018-12-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="2ba6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">创建Android Dev Summit应用和发布即时体验应用捆绑包的心得。</em></p><p id="07ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">11月7日和8日在加州山景城举行的<a class="ae jd" href="https://developer.android.com/dev-summit/" rel="noopener ugc nofollow" target="_blank"> Android开发峰会</a>应用面向与会者和远程观众发布。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es je"><img src="../Images/25996f10529c84e0d26edf6a042efcfd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F12l55pOjn7vPiXBrbklCg.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx"><em class="ju">Android Dev Summit app</em></figcaption></figure><h1 id="4ddf" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">IO-Sched -&gt; ADS-Sched</h1><p id="d8a8" class="pw-post-body-paragraph ie if hh ig b ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb ha bi translated">Android Dev Summit应用(<a class="ae jd" href="https://github.com/google/iosched/tree/adssched" rel="noopener ugc nofollow" target="_blank"> adssched </a>)基于Google I/O应用(iosched)，这是一个开源项目<a class="ae jd" href="https://github.com/google/iosched/" rel="noopener ugc nofollow" target="_blank">，可在Github </a>上获得。删除了一些不需要的功能，例如:</p><ul class=""><li id="f373" class="ky kz hh ig b ih ii il im ip la it lb ix lc jb ld le lf lg bi translated"><strong class="ig hi">保留</strong><a class="ae jd" href="https://github.com/google/iosched/commit/65a5eb2d61bdd7507148db4d3b32a34f85a9e422" rel="noopener ugc nofollow" target="_blank">主提交</a>。这个特性与应用程序的每一层都有很深的耦合，给数据存储库带来了很多复杂性。在I/O应用程序中，我们使用了一个端点来指示用户是否是注册的参与者。非与会者有不同的用户体验。在addsched中，所有用户都是相同的，这使得业务逻辑简单得多。</li><li id="db79" class="ky kz hh ig b ih lh il li ip lj it lk ix ll jb ld le lf lg bi translated"><strong class="ig hi">映射</strong>屏幕<a class="ae jd" href="https://github.com/google/iosched/commit/36c1e942379fcfac9181dcac58db434ebcdbb532" rel="noopener ugc nofollow" target="_blank">提交</a>。会议只有两条跑道，所以不需要地图。这在底部导航中释放了一个位置，允许我们将议程提升到顶级目的地。</li></ul><p id="9c1d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们还增加了一些新功能:</p><ul class=""><li id="1cfc" class="ky kz hh ig b ih ii il im ip la it lb ix lc jb ld le lf lg bi translated"><strong class="ig hi">通知</strong> [ <a class="ae jd" href="https://github.com/google/iosched/commit/a13dcdae7e2bee6c287549ef4674a84b78f2218c" rel="noopener ugc nofollow" target="_blank">提交</a>。使用AlarmManager在带星号的项目开始时间前5分钟设置提醒。</li><li id="5865" class="ky kz hh ig b ih lh il li ip lj it lk ix ll jb ld le lf lg bi translated"><strong class="ig hi">即时app</strong><a class="ae jd" href="https://github.com/google/iosched/commit/07092236185425bb5e10c5b5629377ed9dcc6e10" rel="noopener ugc nofollow" target="_blank">提交</a>。现在，从Android Studio项目构建即时应用程序非常容易。我们使用flavors生成了两个不同的包(installed/instant)。现在这是一个要求，但是将来你可以上传一个单独的包。</li></ul><h1 id="64fe" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">即时应用统计</h1><p id="e38b" class="pw-post-body-paragraph ie if hh ig b ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb ha bi translated">这是我们第一次将会议应用作为即时应用发布，我们很好奇有多少人会使用这种模式。</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es lm"><img src="../Images/4776a35ee67256306c05cd28e43c3796.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*neTrUNi4qRnDiTPMmEEfeQ.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx"><em class="ju">Installed app usage vs Instant experience usage [Oct 30th — Nov 15th]</em></figcaption></figure><p id="ecb1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">大约25%的即时用户(占总用户的15%)<strong class="ig hi">跳转到已安装的应用</strong>:</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es ln"><img src="../Images/adc811db55881d4518aef929021192fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KomG5B1oxInVkNwXPZkc4w.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx"><em class="ju">Instant experience usage + Installed app usage</em></figcaption></figure><h2 id="386e" class="lo jw hh bd jx lp lq lr kb ls lt lu kf ip lv lw kj it lx ly kn ix lz ma kr mb bi translated">收养:</h2><ul class=""><li id="d4ab" class="ky kz hh ig b ih kt il ku ip mc it md ix me jb ld le lf lg bi translated">当这款应用在发布会前一周<a class="ae jd" href="https://android-developers.googleblog.com/2018/10/the-android-dev-summit-app-is-live-get.html" rel="noopener ugc nofollow" target="_blank">宣布</a>时，我们通过即时体验看到了大约<strong class="ig hi"> 40%的用户。它可以从搜索结果和游戏中的<em class="jc">立即尝试</em>按钮进入。</strong></li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mf"><img src="../Images/2519529b1fe44b81862a9b5f38d6e9fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*MLOghqlxxrXtgc38JTcW6A.png"/></div><figcaption class="jq jr et er es js jt bd b be z dx"><a class="ae jd" href="https://play.google.com/store/apps/details?id=com.google.samples.apps.adssched" rel="noopener ugc nofollow" target="_blank">The “try now” button</a> opens the instant experience</figcaption></figure><ul class=""><li id="43c5" class="ky kz hh ig b ih ii il im ip la it lb ix lc jb ld le lf lg bi translated">在会议期间，这个数字<strong class="ig hi">下降到30% </strong>，可能是由于通知的可用性。</li><li id="9b2d" class="ky kz hh ig b ih lh il li ip lj it lk ix ll jb ld le lf lg bi translated">还有一点很有意思的是，发布会结束后安装少了，即时app用户多了。用户似乎明白通知是两者之间的唯一区别。</li></ul><p id="c7c0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在发布即时应用程序之前，请遵循<a class="ae jd" href="https://developer.android.com/topic/google-play-instant/guides/analytics" rel="noopener ugc nofollow" target="_blank">指南来设置分析</a>并为即时安装流添加事件(遗憾的是我们没有这样做！).</p><h1 id="3140" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">增加即时体验的好处</h1><p id="742e" class="pw-post-body-paragraph ie if hh ig b ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb ha bi translated">运作良好的事情:</p><ul class=""><li id="5e99" class="ky kz hh ig b ih ii il im ip la it lb ix lc jb ld le lf lg bi translated"><strong class="ig hi">认证</strong>机制不需要修改。<a class="ae jd" href="https://firebase.google.com/docs/auth/" rel="noopener ugc nofollow" target="_blank"> Firebase Auth </a>和Google Smart Lock for Passwords处理了一切，因此登录即时体验非常顺利。</li><li id="d1fe" class="ky kz hh ig b ih lh il li ip lj it lk ix ll jb ld le lf lg bi translated">在安卓手机上搜索峰会的用户找到了即时应用。</li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div role="button" tabindex="0" class="jk jl di jm bf jn"><div class="er es mg"><img src="../Images/1c13e72cbfe0d9c23dfde8af49b0dadf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YbmaVwK6kxnXdyf8dJ8C2g.png"/></div></div><figcaption class="jq jr et er es js jt bd b be z dx"><em class="ju">Google Search results for the summit showing the instant app</em></figcaption></figure><ul class=""><li id="c846" class="ky kz hh ig b ih ii il im ip la it lb ix lc jb ld le lf lg bi translated">从即时应用程序安装应用程序的<strong class="ig hi">流程由Google Play无缝处理。</strong></li></ul><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es mh"><img src="../Images/d7bf1190fb1861165d5af13561510e4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/1*79wg9dJRlV4ulAaTkp4f1Q.gif"/></div><figcaption class="jq jr et er es js jt bd b be z dx"><em class="ju">Google Play’s instant-&gt;installed flow</em></figcaption></figure><p id="fa98" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本来可以做得更好的事情:</p><ul class=""><li id="7cc0" class="ky kz hh ig b ih ii il im ip la it lb ix lc jb ld le lf lg bi translated">活动别名发现的<strong class="ig hi">问题</strong>阻止了应用在即时启动后出现在启动器上。它出现在<em class="jc">最近的</em>屏幕上，但是离理想的还差<a class="ae jd" href="https://twitter.com/lehtimaeki/status/1058077669076729857" rel="noopener ugc nofollow" target="_blank">。由于时间限制，我们无法及时发布缺陷修复程序。</a></li><li id="7312" class="ky kz hh ig b ih lh il li ip lj it lk ix ll jb ld le lf lg bi translated"><strong class="ig hi">通知</strong>不能直接从即时应用程序获得。但是，你可以通过Play服务发送推送通知(目前在<a class="ae jd" href="https://docs.google.com/forms/d/e/1FAIpQLSeu5yabEoJNXfTIugoqqhAqI6HMu2ebpLhyHuWZ2D85s4rRLw/viewform" rel="noopener ugc nofollow" target="_blank"> beta </a>)。由于这需要后端代码，我们决定使用通知展示instant- &gt; installed流。这是两种口味的唯一区别。</li></ul><h1 id="c2b8" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">开源广告计划</h1><p id="b5af" class="pw-post-body-paragraph ie if hh ig b ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb ha bi translated">IOSched一直被认为是一个学习的样本(因此有了这个包的名字),并被用作其他会议应用的基础。然而，I/O有一些特定的要求，使得对常规会议应用程序的适应变得复杂，比如预订系统。</p><p id="f16c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Android Dev峰会在规模和要求上与其他会议相似，这使得它更适合被分支和重用。新版本只需要一个Firebase项目(我们建议使用第二个staging项目，链接到Debug构建类型)和一个存放<a class="ae jd" href="https://github.com/google/iosched/blob/adssched/shared/src/main/resources/conference_data_2018.json" rel="noopener ugc nofollow" target="_blank">会议数据JSON文件</a>的地方，该文件的格式很简单。</p><p id="86c5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">https://github.com/google/iosched/tree/adssched<a class="ae jd" href="https://github.com/google/iosched/tree/adssched" rel="noopener ugc nofollow" target="_blank">➡</a></p><p id="df44" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你需要帮助为你的会议创建一个分支，请随意在<a class="ae jd" href="https://github.com/google/iosched" rel="noopener ugc nofollow" target="_blank"> Github项目</a>上打开一个问题。</p></div><div class="ab cl mi mj go mk" role="separator"><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn mo"/><span class="ml bw bk mm mn"/></div><div class="ha hb hc hd he"><p id="fba0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个即时实验是成功的，并且<strong class="ig hi">产生了非常有趣的数据</strong>，但是我们的用例非常简单，因为整个应用足够小，我们只有一个单一的即时入口点，并且用户群有限。我们迫不及待地想看看开发者把即时应用带到哪里，以及社区用adssched构建了什么！</p><p id="5258" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">演职员表:</em> <a class="ae jd" rel="noopener" href="/@keyboardsurfer"> <em class="jc">本维斯</em></a><em class="jc">(ad sched的即时app功能拥有者)</em> <a class="ae jd" rel="noopener" href="/@crafty"> <em class="jc">尼克屠夫</em> </a> <em class="jc">(神奇gif的创造者)</em></p></div></div>    
</body>
</html>