<html>
<head>
<title>RxJava to Kotlin coroutines</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">RxJavaåˆ°KotlinååŒç¨‹åº</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/androiddevelopers/rxjava-to-kotlin-coroutines-1204c896a700?source=collection_archive---------0-----------------------#2018-05-02">https://medium.com/androiddevelopers/rxjava-to-kotlin-coroutines-1204c896a700?source=collection_archive---------0-----------------------#2018-05-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="e30c" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">è§‚å¯ŸåŠå¸¦</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/9b70afbd676d30efd44663d704c596f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M0lCKiqsFBjlWOLYdQSUfw.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx"><a class="ae jm" href="https://flic.kr/p/7TkwCt" rel="noopener ugc nofollow" target="_blank">Threads</a> by <a class="ae jm" href="https://www.flickr.com/photos/46435106@N06/" rel="noopener ugc nofollow" target="_blank">Eric LaMontagne</a></figcaption></figure><p id="5822" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">å¥½å§ï¼Œæˆ‘çŸ¥é“è¿™æ˜¯ä¸€ä¸ªæœ‰ç‚¹æ‰£äººå¿ƒå¼¦çš„æ ‡é¢˜ï¼Œä½†è¿™æ˜¯æˆ‘èƒ½æƒ³åˆ°çš„æœ€å¥½çš„äº†ã€‚è¿™ç¯‡æ–‡ç« æ€»ç»“äº†æˆ‘å¦‚ä½•å°†ä¸€ä¸ªå¤§é‡ä½¿ç”¨<a class="ae jm" href="https://github.com/ReactiveX/RxJava" rel="noopener ugc nofollow" target="_blank"> RxJava </a>çš„åº”ç”¨é‡æ„ä¸ºä¸€ä¸ªä¹Ÿä½¿ç”¨Kotlin <a class="ae jm" href="https://kotlinlang.org/docs/reference/coroutines.html" rel="noopener ugc nofollow" target="_blank">åç¨‹</a>çš„åº”ç”¨ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘å°†è®¨è®ºå°†<a class="ae jm" href="http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Single.html" rel="noopener ugc nofollow" target="_blank">å•ä¸ª</a> / <a class="ae jm" href="http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Maybe.html" rel="noopener ugc nofollow" target="_blank">å¯èƒ½æ˜¯</a> / <a class="ae jm" href="http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Completable.html" rel="noopener ugc nofollow" target="_blank">å¯å®Œæˆçš„</a>æºä»£ç åˆ‡æ¢åˆ°åç¨‹ã€‚</p><h2 id="2ea2" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">è¯¥åº”ç”¨ç¨‹åº</h2><p id="a0fc" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">é¦–å…ˆï¼Œç®€å•ä»‹ç»ä¸€ä¸‹<a class="ae jm" href="https://github.com/chrisbanes/tivi" rel="noopener ugc nofollow" target="_blank">åº”ç”¨</a>çš„æ¶æ„ã€‚æˆ‘çš„å¤§éƒ¨åˆ†ä¸šåŠ¡é€»è¾‘éƒ½å»ºç«‹åœ¨æ‰€è°“çš„'<a class="ae jm" href="https://github.com/chrisbanes/tivi/blob/master/calls/src/main/java/me/banes/chris/tivi/calls/Call.kt" rel="noopener ugc nofollow" target="_blank">è°ƒç”¨</a>'ä¸­:</p><pre class="ix iy iz ja fd lj lk ll lm aw ln bi"><span id="d792" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">interface </strong>Call&lt;<strong class="lk hi">in </strong>Param, Output&gt; {<br/>    <strong class="lk hi">fun </strong>data(param: Param): Flowable&lt;Output&gt;<br/>    <strong class="lk hi">fun </strong>refresh(param: Param): Completable<br/>}</span></pre><p id="58b4" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">å¦‚æ‚¨æ‰€è§ï¼Œæ¯ä¸ªç”µè¯æœ‰ä¸¤ä¸ªä¸»è¦èŒè´£:</p><ol class=""><li id="3c82" class="ls lt hh jp b jq jr jt ju jw lu ka lv ke lw ki lx ly lz ma bi translated">å®ƒçš„<code class="du mb mc md lk b">data()</code>æ–¹æ³•å…¬å¼€äº†ä¸è°ƒç”¨ç›¸å…³çš„æ•°æ®æµã€‚è¿™å°±è¿”å›äº†ä¸€ä¸ª<a class="ae jm" href="http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Flowable.html" rel="noopener ugc nofollow" target="_blank">æ˜“æµ</a>ï¼Œè€Œå¤§éƒ¨åˆ†æ—¶å€™åªæ˜¯ä¸€ä¸ªæ˜“æµä»<a class="ae jm" href="https://developer.android.com/reference/android/arch/persistence/room/Dao.html" rel="noopener ugc nofollow" target="_blank">å®¤æ£</a>ã€‚ç„¶åä¸€ä¸ªè§†å›¾æ¨¡å‹è®¢é˜…å®ƒå¹¶å°†æ•°æ®ä¼ é€’ç»™UIï¼Œç­‰ç­‰ã€‚</li><li id="db38" class="ls lt hh jp b jq me jt mf jw mg ka mh ke mi ki lx ly lz ma bi translated">å…¶<code class="du mb mc md lk b">refresh()</code>æ³•ã€‚å¸Œæœ›è¿™æ˜¯ä¸è¨€è‡ªæ˜çš„ï¼Œå®ƒè§¦å‘äº†æ•°æ®çš„åˆ·æ–°ã€‚å¤§å¤šæ•°å®ç°å°†ä»ç½‘ç»œè·å–ã€æ˜ å°„å®ä½“ï¼Œç„¶åæ›´æ–°<a class="ae jm" href="https://developer.android.com/topic/libraries/architecture/room.html" rel="noopener ugc nofollow" target="_blank">æˆ¿é—´</a>æ•°æ®åº“ã€‚è¿™æ˜¯å½“å‰è¿”å›çš„ä¸€ä¸ª<a class="ae jm" href="http://reactivex.io/RxJava/2.x/javadoc/io/reactivex/Completable.html" rel="noopener ugc nofollow" target="_blank">Completable </a>,<a class="ae jm" href="https://developer.android.com/reference/android/arch/lifecycle/ViewModel.html" rel="noopener ugc nofollow" target="_blank">ViewModel</a>å°†è®¢é˜…è¯¥Completableä»¥å¯åŠ¨â€œåŠ¨ä½œâ€ã€‚</li></ol><h2 id="ddc1" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">é‚£ä¹ˆæˆ‘æ‰“ç®—åœ¨å“ªé‡Œå®‰è£…åç¨‹å‘¢ï¼Ÿ</h2><p id="a0b0" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">æˆ‘çš„ç›®æ ‡æ˜¯è®©<code class="du mb mc md lk b">refresh()</code>æˆä¸ºä¸€ä¸ªæš‚åœå‡½æ•°:</p><pre class="ix iy iz ja fd lj lk ll lm aw ln bi"><span id="ce62" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">interface </strong>Call&lt;<strong class="lk hi">in </strong>Param, Output&gt; {<br/>    <strong class="lk hi">fun </strong>data(param: Param): Flowable&lt;Output&gt;<br/>    <strong class="lk hi">suspend fun </strong>refresh(param: Param)<br/>}</span></pre><p id="096f" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">ä¸€æ—¦æˆ‘åšäº†é‚£ä¸ªæ”¹å˜ï¼Œæ‰€æœ‰çš„è°ƒç”¨å®ç°éƒ½å¼€å§‹æŠ±æ€¨ï¼Œå› ä¸ºå‡½æ•°ç­¾åæ”¹å˜äº†ã€‚å¹¸è¿çš„æ˜¯ï¼Œ<a class="ae jm" href="https://github.com/Kotlin/kotlinx.coroutines/tree/master/reactive/kotlinx-coroutines-rx2" rel="noopener ugc nofollow" target="_blank"><strong class="jp hi">kot linx-coroutines-rx2</strong></a>æ‰©å±•åº“ä¸ºRxJavaç±»singleç±»å‹æä¾›äº†æ‰©å±•æ–¹æ³•ï¼Œå…è®¸æˆ‘ä»¬<code class="du mb mc md lk b">await()</code>å®ƒä»¬çš„å®Œæˆã€‚å› æ­¤ï¼Œåœ¨æ¯ä¸ªå®ç°çš„Rxé“¾æœ«ç«¯å¿«é€Ÿç²˜è´´<code class="du mb mc md lk b">.await()</code>å°±å¯ä»¥ä¿®å¤æ„å»ºã€‚</p><p id="2511" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">æˆ‘ä»¬ç°åœ¨å¯¹åç¨‹çš„ä½¿ç”¨éå¸¸ç²—ç³™å’Œæ„šè ¢ï¼ä½†æ˜¯ï¼Œå˜¿ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€å§‹ï¼Œä¸€åˆ‡ä»ç„¶å·¥ä½œã€‚</p><p id="0656" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">ä¸‹ä¸€æ­¥æ˜¯å¼€å§‹è½¬æ¢<code class="du mb mc md lk b">refresh()</code>åç¨‹æ„ŸçŸ¥ä¸‹çš„æ‰€æœ‰ä»£ç ï¼Œå¹¶ç§»é™¤ä¸éœ€è¦çš„RxJavaã€‚åœ¨è¿™ä¸€ç‚¹ä¸Šï¼Œä½ å¯èƒ½æƒ³çŸ¥é“æˆ‘è¯´çš„â€œåç¨‹æ„ŸçŸ¥â€æ˜¯ä»€ä¹ˆæ„æ€ï¼Œè¿™éƒ½ä¸çº¿ç¨‹æœ‰å…³ã€‚</p><h2 id="8deb" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">ç©¿çº¿</h2><p id="0cfe" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">ä½¿ç”¨RxJavaï¼Œæˆ‘æœ‰ä¸åŒçš„<a class="ae jm" href="https://github.com/ReactiveX/RxJava/wiki/Scheduler" rel="noopener ugc nofollow" target="_blank">è°ƒåº¦å™¨</a>ç”¨äºä¸åŒç±»å‹çš„ä»»åŠ¡ã€‚è¿™æ˜¯ç”¨ä¸€ä¸ªæ•°æ®ç±»å®ç°çš„ï¼Œè¿™ä¸ªæ•°æ®ç±»è¢«æ³¨å…¥åˆ°å°†Rxæ“ä½œç¬¦é“¾æ¥åœ¨ä¸€èµ·çš„ä»»ä½•åœ°æ–¹ã€‚</p><pre class="ix iy iz ja fd lj lk ll lm aw ln bi"><span id="c162" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">data class </strong>AppRxSchedulers(<br/>    <strong class="lk hi">val database</strong>: Scheduler,<br/>    <strong class="lk hi">val disk</strong>: Scheduler,<br/>    <strong class="lk hi">val network</strong>: Scheduler,<br/>    <strong class="lk hi">val main</strong>: Scheduler<br/>)</span><span id="3d28" class="kj kk hh lk b fi mj lp l lq lr">@Singleton<br/>@Provides<br/><strong class="lk hi">fun </strong>provideRxSchedulers() = AppRxSchedulers(<br/>        <em class="mk">database</em> = Schedulers.single(),<br/>        <em class="mk">disk</em> = Schedulers.io(),<br/>        <em class="mk">network</em> = Schedulers.io(),<br/>        <em class="mk">main</em> = AndroidSchedulers.mainThread()<br/>)</span></pre><p id="6a55" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">æˆ‘è®¤ä¸ºæœ€é‡è¦çš„æ˜¯æ•°æ®åº“è°ƒåº¦ç¨‹åºã€‚è¿™æ˜¯å› ä¸ºæˆ‘æƒ³å¼ºåˆ¶å•çº¿ç¨‹è¯»å–ï¼Œç¡®ä¿æ•°æ®å®Œæ•´æ€§ï¼Œä¸é”å®šSQLiteã€‚</p><p id="2c22" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">å¯¹äºåç¨‹ï¼Œæˆ‘æƒ³åšåŒæ ·çš„äº‹æƒ…ï¼Œç¡®ä¿RxJavaå’Œåç¨‹éƒ½ä½¿ç”¨ç›¸åŒçš„çº¿ç¨‹æ± ã€‚äº‹å®è¯æ˜ï¼Œä½¿ç”¨<a class="ae jm" href="https://github.com/Kotlin/kotlinx.coroutines/tree/master/reactive/kotlinx-coroutines-rx2" rel="noopener ugc nofollow" target="_blank"><strong class="jp hi">kot linx-coroutines-rx2</strong></a>æ‰©å±•åº“ç›¸å¯¹å®¹æ˜“ã€‚å®ƒåœ¨Schedulerä¸Šæ·»åŠ äº†ä¸€ä¸ªæ‰©å±•æ–¹æ³•ï¼Œå°†å®ƒåŒ…è£…åˆ°ä¸€ä¸ªååŒè°ƒåº¦å™¨ä¸­ã€‚ä½¿ç”¨å®ƒï¼Œæˆ‘å°†æˆ‘çš„è°ƒåº¦ç¨‹åºè½¬æ¢æˆè°ƒåº¦ç¨‹åºï¼Œå¹¶æ³¨å…¥å®ƒä»¬ã€‚</p><pre class="ix iy iz ja fd lj lk ll lm aw ln bi"><span id="5e8e" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">data class </strong>AppCoroutineDispatchers(<br/>    <strong class="lk hi">val database</strong>: CoroutineDispatcher,<br/>    <strong class="lk hi">val disk</strong>: CoroutineDispatcher,<br/>    <strong class="lk hi">val network</strong>: CoroutineDispatcher,<br/>    <strong class="lk hi">val main</strong>: CoroutineDispatcher<br/>)</span><span id="4706" class="kj kk hh lk b fi mj lp l lq lr">@Singleton<br/>@Provides<br/><strong class="lk hi">fun </strong>provideDispatchers(schedulers: AppRxSchedulers) = <br/>    AppCoroutineDispatchers(<br/>        <em class="mk">database</em> = schedulers.<strong class="lk hi">database</strong>.<em class="mk">asCoroutineDispatcher</em>(),<br/>        <em class="mk">disk</em> = schedulers.<strong class="lk hi">disk</strong>.<em class="mk">asCoroutineDispatcher</em>(),<br/>        <em class="mk">network</em> = schedulers.<strong class="lk hi">network</strong>.<em class="mk">asCoroutineDispatcher</em>(),<br/>        <em class="mk">main</em> = <em class="mk">UI<br/>    </em>)</span></pre><p id="f65d" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">å¦‚æ‚¨æ‰€è§ï¼Œæˆ‘ç›®å‰ä½¿ç”¨RxJavaè°ƒåº¦ç¨‹åºä½œä¸ºæºä»£ç ã€‚å°†æ¥ï¼Œæˆ‘å¯èƒ½ä¼šæŠŠå®ƒè°ƒæ¢ä¸€ä¸‹ï¼Œè®©è°ƒåº¦ç¨‹åºä»è°ƒåº¦ç¨‹åºä¸­æ´¾ç”Ÿå‡ºæ¥ã€‚</p><h2 id="3241" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">æ›´æ¢çº¿ç¨‹</h2><p id="e0c1" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">æ‰€ä»¥æˆ‘è®©æˆ‘çš„è°ƒåº¦ç¨‹åºå’Œè°ƒåº¦ç¨‹åºå…±äº«ç›¸åŒçš„çº¿ç¨‹ï¼Œä½†æ˜¯åœ¨æˆ‘ä»¬çš„æ“ä½œä¸­ä½¿ç”¨å®ƒä»¬æ€ä¹ˆæ ·å‘¢ï¼Ÿ</p><p id="b0db" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">RxJavaé€šè¿‡å®ƒçš„<code class="du mb mc md lk b">subscribeOn()</code>å’Œ<code class="du mb mc md lk b">observeOn()</code>æ–¹æ³•ä½¿å¾—å°†ä¸åŒçš„çº¿ç¨‹è§‚å¯Ÿå™¨é“¾æ¥åœ¨ä¸€èµ·å˜å¾—éå¸¸å®¹æ˜“ã€‚è¿™é‡Œæœ‰ä¸€ä¸ª<code class="du mb mc md lk b">refresh()</code>æ–¹æ³•çš„ä¾‹å­ï¼Œå…¶ä¸­æˆ‘ä½¿ç”¨æˆ‘çš„<code class="du mb mc md lk b">network</code>è°ƒåº¦ç¨‹åºè·å–ç½‘ç»œå“åº”å¹¶å°†å…¶æ˜ å°„åˆ°å†…éƒ¨å®ä½“ï¼Œç„¶åä½¿ç”¨<code class="du mb mc md lk b">database</code>è°ƒåº¦ç¨‹åºå­˜å‚¨ç»“æœã€‚</p><pre class="ix iy iz ja fd lj lk ll lm aw ln bi"><span id="c4ea" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">override fun </strong>refresh(): Completable {<br/>    <strong class="lk hi">return </strong>trakt.users().profile(UserSlug.ME).toRxSingle()<br/>            .subscribeOn(schedulers.network)<br/>            .map <strong class="lk hi">{<br/>                </strong>TraktUser(username = <strong class="lk hi">it</strong>.<strong class="lk hi">username</strong>, name = <strong class="lk hi">it</strong>.<strong class="lk hi">name</strong>)<br/>            <strong class="lk hi">}</strong><br/>            .observeOn(schedulers.database)<br/>            .doOnSuccess <strong class="lk hi">{<br/>                dao</strong>.insert(it)<br/>            <strong class="lk hi">}</strong><br/>            .toCompletable()<br/>}<br/><br/><strong class="lk hi">override fun </strong>data(): Flowable&lt;TraktUser&gt; {<br/>    <strong class="lk hi">return </strong>dao.getTraktUser()<br/>            .subscribeOn(schedulers.database)<br/>}</span></pre><p id="d64f" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">å¸Œæœ›ä½ èƒ½çœ‹åˆ°è¿™æ˜¯éå¸¸æ ‡å‡†çš„RxJavaä»£ç ã€‚ç°åœ¨æˆ‘éœ€è¦å°†å®ƒè½¬æ¢æˆåç¨‹ã€‚</p><h2 id="b36e" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">ç¬¬ä¸€æ¬¡å°è¯•</h2><p id="9be4" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">åœ¨æ‚¨é˜…è¯»å®Œ<a class="ae jm" href="https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md" rel="noopener ugc nofollow" target="_blank">åç¨‹æŒ‡å—</a>ä¹‹åï¼Œæ‚¨å¯èƒ½ä¼šæƒ³åˆ°ä¸¤ä¸ªå‡½æ•°:<code class="du mb mc md lk b"><a class="ae jm" href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/launch.html" rel="noopener ugc nofollow" target="_blank">launch()</a></code>å’Œ<code class="du mb mc md lk b"><a class="ae jm" href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/async.html" rel="noopener ugc nofollow" target="_blank">async()</a></code>ã€‚æ­£å¦‚ä½ å¯èƒ½çŒœåˆ°çš„ï¼Œæˆ‘çš„ç¬¬ä¸€æ¬¡å°è¯•é›†ä¸­åœ¨ä½¿ç”¨è¿™äº›é“¾æ¥åœ¨ä¸€èµ·:</p><pre class="ix iy iz ja fd lj lk ll lm aw ln bi"><span id="04e4" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">override suspend fun </strong>refresh(param: Unit) {<br/>    <em class="mk">// Fetch network response on network dispatcher<br/>    </em><strong class="lk hi">val </strong>networkResponse = <em class="mk">async</em>(<strong class="lk hi">dispatchers</strong>.<strong class="lk hi">network</strong>) <strong class="lk hi">{<br/>        trakt</strong>.users().profile(UserSlug.<em class="mk">ME</em>).execute().body()<br/>    <strong class="lk hi">}</strong>.await() <em class="mk">// await the result</em></span><span id="f33a" class="kj kk hh lk b fi mj lp l lq lr"><em class="mk">    // Map to our entity</em><strong class="lk hi"><br/>    val </strong>entity = TraktUser(<br/>        username = networkResponse.<strong class="lk hi">username</strong>,<br/>        name = networkResponse.<strong class="lk hi">name<br/>    </strong>)<br/><br/>    <em class="mk">// Save to the database on the database dispatcher<br/>    async</em>(<strong class="lk hi">dispatchers</strong>.<strong class="lk hi">database</strong>) <strong class="lk hi">{<br/>        dao</strong>.insert(entity)<br/>    <strong class="lk hi">}</strong>.await()  <em class="mk">// Wait for the insert to finish</em><br/>}</span></pre><p id="5e16" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">è¿™å®é™…ä¸Šæ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯æœ‰ç‚¹æµªè´¹ã€‚è¿™é‡Œæˆ‘ä»¬å®é™…ä¸Šå¯åŠ¨äº†ä¸‰ä¸ªåç¨‹:1)ç½‘ç»œè°ƒç”¨ï¼Œ2)æ•°æ®åº“è°ƒç”¨ï¼Œ3)ä¸»æœºåç¨‹è°ƒç”¨<code class="du mb mc md lk b">data()</code>(åœ¨è§†å›¾æ¨¡å‹ä¸­)ã€‚</p><p id="eddb" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">æˆ‘ç›¸ä¿¡ä½ å¯ä»¥æƒ³è±¡å‡ºä¸€ä¸ªæ›´å¤æ‚çš„Rxé“¾ï¼Œå®ƒä¼šåšåƒ<code class="du mb mc md lk b">flatMap</code>ing<code class="du mb mc md lk b">Iterable</code>æˆ–å…¶ä»–ç–¯ç‹‚çš„äº‹æƒ…ã€‚å½“ä¸æ€»æ˜¯éœ€è¦æ—¶ï¼Œæ‚¨å°†è¦åˆ›å»ºçš„åç¨‹çš„æ•°é‡ä¼šæ˜¾è‘—å¢åŠ ï¼Œå°±åƒä¸Šé¢çš„ä¾‹å­ä¸€æ ·ã€‚æˆ‘ä»¬åœ¨è¿™é‡Œåšçš„ä¸€åˆ‡éƒ½æ˜¯é¡ºåºçš„ï¼Œæ‰€ä»¥æ²¡æœ‰å¿…è¦å¯åŠ¨ä¸€ä¸ªæ–°çš„åç¨‹ã€‚æˆ‘ä»¬éœ€è¦çš„æ˜¯æ”¹å˜dispatcherçš„æ–¹æ³•ï¼Œå¹¸è¿çš„æ˜¯ï¼Œcoroutineså›¢é˜Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ–¹æ³•:<code class="du mb mc md lk b"><a class="ae jm" href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/with-context.html" rel="noopener ugc nofollow" target="_blank">withContext()</a></code>ã€‚</p><h2 id="14e2" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">ç¬¬äºŒæ¬¡å°è¯•</h2><p id="2404" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">æˆ‘åœ¨<a class="ae jm" href="https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#thread-confinement-fine-grained" rel="noopener ugc nofollow" target="_blank">åç¨‹æŒ‡å—</a>çš„ä¸€ä¸ªå°ä»£ç ç¤ºä¾‹ä¸­å¶ç„¶å‘ç°äº†<code class="du mb mc md lk b"><a class="ae jm" href="https://kotlin.github.io/kotlinx.coroutines/kotlinx-coroutines-core/kotlinx.coroutines.experimental/with-context.html" rel="noopener ugc nofollow" target="_blank">withContext()</a></code>ã€‚æˆ‘çš„ç¬¬äºŒä¸ª(ä¹Ÿæ˜¯å½“å‰çš„)å°è¯•é›†ä¸­åœ¨ç”¨<code class="du mb mc md lk b">withContext()</code>ä»£æ›¿<code class="du mb mc md lk b">subscribeOn()</code>å’Œ<code class="du mb mc md lk b">observeOn()</code>ï¼Œå› ä¸ºå®ƒç¡®å®åšäº†æˆ‘ä»¬æƒ³è¦çš„:</p><blockquote class="ml mm mn"><p id="4b22" class="jn jo mk jp b jq jr ii js jt ju il jv mo jx jy jz mp kb kc kd mq kf kg kh ki ha bi translated">è¿™ä¸ªå‡½æ•°ç«‹å³ä»æ–°çš„ä¸Šä¸‹æ–‡åº”ç”¨dispatcherï¼Œå°†å—çš„æ‰§è¡Œè½¬ç§»åˆ°å—å†…çš„ä¸åŒçº¿ç¨‹ä¸­ï¼Œå¹¶åœ¨å®Œæˆæ—¶è¿”å›ã€‚</p></blockquote><p id="0138" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ï¼Œç¤ºä¾‹å˜æˆäº†:</p><pre class="ix iy iz ja fd lj lk ll lm aw ln bi"><span id="9f88" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">override suspend fun </strong>refresh(param: Unit) {<br/>    <em class="mk">// Fetch network response on network dispatcher<br/>    </em><strong class="lk hi">val </strong>networkResponse = <em class="mk">withContext</em>(<strong class="lk hi">dispatchers</strong>.<strong class="lk hi">network</strong>) <strong class="lk hi">{<br/>        trakt</strong>.users().profile(UserSlug.<em class="mk">ME</em>).execute().body()<br/>    <strong class="lk hi">}</strong></span><span id="a690" class="kj kk hh lk b fi mj lp l lq lr"><em class="mk">    // Map to our entity</em><strong class="lk hi"><br/>    val </strong>entity = TraktUser(<br/>        username = networkResponse.<strong class="lk hi">username</strong>,<br/>        name = networkResponse.<strong class="lk hi">name<br/>    </strong>)<br/><br/>    <em class="mk">// Save to the database on the database dispatcher<br/>    withContext</em>(<strong class="lk hi">dispatchers</strong>.<strong class="lk hi">database</strong>) <strong class="lk hi">{<br/>        dao</strong>.insert(entity)<br/>    <strong class="lk hi">}<br/></strong>}</span></pre><p id="c8c2" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">ä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬ç°åœ¨å·²ç»ç§»é™¤äº†<code class="du mb mc md lk b">async</code>è°ƒç”¨ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬ä¸å†åˆ›å»ºä»»ä½•æ–°çš„åç¨‹ã€‚æˆ‘ä»¬åªæ˜¯ç§»åŠ¨ä¸»æœºåç¨‹æ¥ä½¿ç”¨æˆ‘ä»¬ç‰¹å®šçš„è°ƒåº¦ç¨‹åº(å’Œçº¿ç¨‹)ã€‚</p><h2 id="a91e" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">ä½†æ˜¯åŒ»ç”Ÿè¯´åç¨‹æ˜¯éå¸¸è½»é‡çº§çš„ã€‚ä¸ºä»€ä¹ˆæˆ‘ä¸èƒ½å¼‚æ­¥/å¯åŠ¨ï¼Ÿ</h2><p id="3546" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">åç¨‹æ˜¯éå¸¸è½»é‡çº§çš„ï¼Œä½†æ˜¯åˆ›å»ºå®ƒä»¬ä»ç„¶æ˜¯æœ‰æˆæœ¬çš„ã€‚ä½ åº”è¯¥è®°å¾—åœ¨Androidä¸Šæˆ‘ä»¬è¿è¡Œåœ¨ä¸€ä¸ªèµ„æºå—é™çš„ç³»ç»Ÿä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°½ä¸€åˆ‡å¯èƒ½å‡å°‘æˆ‘ä»¬çš„è¶³è¿¹ã€‚ä¸ä½¿ç”¨<code class="du mb mc md lk b">async</code>æˆ–<code class="du mb mc md lk b">launch</code>åˆ›å»ºä¸€ä¸ªæ–°çš„åç¨‹ç›¸æ¯”ï¼Œä½¿ç”¨<code class="du mb mc md lk b">withContext</code>åªéœ€ä¸€æ¬¡å‡½æ•°è°ƒç”¨å’Œæœ€å°‘çš„å¯¹è±¡åˆ†é…å°±èƒ½æ»¡è¶³æˆ‘ä»¬çš„éœ€æ±‚ã€‚</p><p id="4cfc" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">è¿˜æœ‰ä¸€ä¸ªäº‹å®æ˜¯ï¼Œ<code class="du mb mc md lk b">async</code>å’Œ<code class="du mb mc md lk b">launch</code>æ˜¯é’ˆå¯¹å¼‚æ­¥ä»»åŠ¡çš„ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ‚¨ä¼šæœ‰ä¸€ä¸ªå¼‚æ­¥çš„ä¸»ä»»åŠ¡ï¼Œä½†æ˜¯åœ¨å…¶ä¸­æ‚¨ä¼šè°ƒç”¨åŒæ­¥çš„å­ä»»åŠ¡ã€‚é€šè¿‡ä½¿ç”¨<code class="du mb mc md lk b">async</code>å’Œ<code class="du mb mc md lk b">launch</code>ï¼Œä½ è¢«è¿«åšé¢å¤–çš„<code class="du mb mc md lk b">await()</code>æˆ–<code class="du mb mc md lk b">join()</code>ï¼Œè¿™æ˜¯ä¸å¿…è¦çš„å¤æ‚é˜…è¯»ã€‚</p><p id="521b" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">å¦ä¸€æ–¹é¢ï¼Œå¦‚æœæ‚¨çš„å­ä»»åŠ¡æ˜¯ä¸ç›¸å…³çš„ï¼Œé‚£ä¹ˆè®©å®ƒä»¬ç”¨â€œasyncâ€å¹¶å‘è¿è¡Œæ˜¯ä¸€ç§æœ‰æ•ˆçš„æ–¹æ³•ã€‚</p><h2 id="eae8" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">æ›´å¤æ‚çš„Rxé“¾å‘¢ï¼Ÿ</h2><p id="8a00" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">è¿™é‡Œæœ‰ä¸€ä¸ªä¾‹å­ï¼Œæ¯å½“æˆ‘çœ‹åˆ°å®ƒæ—¶ï¼Œæˆ‘éƒ½ä¼šæ„Ÿåˆ°å›°æƒ‘:</p><pre class="ix iy iz ja fd lj lk ll lm aw ln bi"><span id="f8e9" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">override fun </strong>refresh(param: Unit): Completable {<br/>    <strong class="lk hi">trakt</strong>.users().watchedShows(UserSlug.<em class="mk">ME</em>).<em class="mk">toRxSingle</em>()<br/>            .subscribeOn(<strong class="lk hi">schedulers</strong>.<strong class="lk hi">network</strong>)<br/>            .toFlowable()<br/>            .flatMapIterable <strong class="lk hi">{ it }<br/>            </strong>.flatMapSingle <strong class="lk hi">{<br/>                showFetcher</strong>.load(<strong class="lk hi">it</strong>)<strong class="lk hi"><br/>            }<br/>            </strong>.toList()<br/>            .observeOn(<strong class="lk hi">schedulers</strong>.<strong class="lk hi">database</strong>)<br/>            .doOnSuccess <strong class="lk hi">{<br/>                databaseTransactionRunner</strong>.runInTransaction <strong class="lk hi">{<br/>                    dao</strong>.deleteAll()<br/>                    <strong class="lk hi">it</strong>.<em class="mk">forEach </em><strong class="lk hi">{ dao</strong>.insert(<strong class="lk hi">it</strong>) <strong class="lk hi">}<br/>                }<br/>            }<br/>            </strong>.<em class="mk">toCompletable</em>()<br/>}</span></pre><p id="b6a6" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">å½“ä½ åˆ†è§£å®ƒæ—¶ï¼Œå®ƒå®é™…ä¸Šå¹¶ä¸æ¯”æˆ‘ä»¬ä¸Šé¢ä½¿ç”¨çš„ä¾‹å­å¤æ‚å¤šå°‘ã€‚æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œå®ƒå¤„ç†çš„æ˜¯å®ä½“çš„é›†åˆï¼Œè€Œä¸æ˜¯å•ä¸€çš„å®ä½“ã€‚ä¸ºæ­¤ï¼Œå®ƒä½¿ç”¨Flowableçš„<code class="du mb mc md lk b"><a class="ae jm" href="http://reactivex.io/documentation/operators/flatmap.html" rel="noopener ugc nofollow" target="_blank">flatMapIterable()</a></code>ä¸ºæ¯ä¸ªé¡¹ç›®å±•å¼€åœ°å›¾ï¼Œç„¶åä½¿ç”¨<code class="du mb mc md lk b"><a class="ae jm" href="http://reactivex.io/documentation/operators/to.html" rel="noopener ugc nofollow" target="_blank">toList()</a></code>å°†æ‰€æœ‰ç»“æœå†æ¬¡ç»„åˆåˆ°ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œç„¶åä¿å­˜åˆ°æ•°æ®åº“ä¸­ã€‚</p><p id="74d4" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated"><em class="mk">æˆ‘å®é™…ä¸Šä½¿ç”¨äº†ä¸€ä¸ªä¸åŒçš„ç±»(</em> <code class="du mb mc md lk b"><em class="mk">showFetcher</em></code> <em class="mk">)æ¥ä¸ºæ‰‡å‡ºæä¾›æ“ä½œç¬¦ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒè¿”å›ä¸€ä¸ªSingleã€‚æš‚æ—¶å¿½ç•¥è¿™ä¸€ç‚¹ã€‚</em></p><p id="6331" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">æˆ‘ä»¬åœ¨è¿™é‡Œå®é™…æè¿°çš„æ˜¯ä¸€ä¸ªå¹¶è¡Œå›¾ï¼Œå…¶ä¸­æ¯ä¸ª<code class="du mb mc md lk b">map()</code>éƒ½æ˜¯å¹¶å‘è¿è¡Œçš„ã€‚JDK 8æä¾›äº†ä¸<code class="du mb mc md lk b">list.parallel().map(<em class="mk">/* map function */</em>).collect(toList())</code>ç±»ä¼¼çš„ä¸œè¥¿ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é‚£ä¸ªåŠŸèƒ½ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸ä¼šä½¿ç”¨åç¨‹ï¼</p><p id="7a70" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">Kotlinä¸­æ²¡æœ‰ä½¿ç”¨åç¨‹çš„å†…ç½®ç‰ˆæœ¬(æˆ‘èƒ½æ‰¾åˆ°)ï¼Œä½†å¹¸è¿çš„æ˜¯å®ƒå¾ˆå®¹æ˜“å®ç°:</p><pre class="ix iy iz ja fd lj lk ll lm aw ln bi"><span id="4ef8" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">suspend fun </strong>&lt;A, B&gt; Collection&lt;A&gt;.parallelMap(<br/>    context: CoroutineContext = DefaultDispatcher,<br/>    block: <strong class="lk hi">suspend </strong>(A) -&gt; B<br/>): Collection&lt;B&gt; {<br/>    <strong class="lk hi">return </strong>map <strong class="lk hi">{<br/>        // Use async to start a coroutine for each item<br/>        </strong>async(context) <strong class="lk hi">{<br/>            </strong>block(it)<br/>        <strong class="lk hi">}<br/>    }</strong>.map <strong class="lk hi">{<br/>        // We now have a map of Deferred&lt;T&gt; so we await() each            <br/>        </strong>it.await()<br/>    <strong class="lk hi">}<br/></strong>}</span></pre><p id="9509" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated"><em class="mk">æ³¨æ„:è¿™å¯èƒ½ä¸æ˜¯ä¸€ä¸ªå®Œç¾çš„å®ç°ã€‚ä¸è¿‡ï¼Œå¯¹æˆ‘æ¥è¯´å¾ˆæœ‰æ•ˆã€‚</em></p><p id="9749" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">é€šè¿‡ä½¿ç”¨<code class="du mb mc md lk b">parallelMap()</code>ï¼Œæˆ‘ä»¬å¤æ‚çš„RxJavaé“¾å˜æˆå¦‚ä¸‹:</p><pre class="ix iy iz ja fd lj lk ll lm aw ln bi"><span id="de8b" class="kj kk hh lk b fi lo lp l lq lr"><strong class="lk hi">override suspend fun </strong>refresh(param: Unit) {<br/>    <strong class="lk hi">val </strong>networkResponse = <em class="mk">withContext</em>(<strong class="lk hi">dispatchers</strong>.<strong class="lk hi">network</strong>) <strong class="lk hi">{<br/>        trakt</strong>.users().watchedShows(UserSlug.<em class="mk">ME</em>).execute().body()<br/>    <strong class="lk hi">}<br/><br/>    val </strong>shows = networkResponse.<em class="mk">parallelMap </em><strong class="lk hi">{<br/>        showFetcher</strong>.load(<strong class="lk hi">it</strong>)<br/>    <strong class="lk hi">}<br/><br/>    </strong><em class="mk">// Now save the list to the database<br/>    withContext</em>(<strong class="lk hi">dispatchers</strong>.<strong class="lk hi">database</strong>) <strong class="lk hi">{<br/>        databaseTransactionRunner</strong>.runInTransaction <strong class="lk hi">{<br/>            dao</strong>.deleteAll()<br/>            shows.<em class="mk">forEach </em><strong class="lk hi">{ dao</strong>.insert(<strong class="lk hi">it</strong>) <strong class="lk hi">}<br/>        }<br/>    }<br/></strong>}</span></pre><p id="1ce6" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">å¸Œæœ›ä½ å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ˜¯ä¸€ä¸ªæ›´æ¸…æ™°çš„é˜…è¯»ã€‚è¿™ä¸ª<code class="du mb mc md lk b">showFetcher</code>èŒä¸šä»ç„¶éœ€è¦è¢«è½¬æ¢ï¼Œä½†æ˜¯ç°åœ¨å®ƒå¯ä»¥<em class="mk"> a </em>ç­‰å¾…ã€‚ğŸ¤¦</p></div><div class="ab cl mr ms go mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ha hb hc hd he"><p id="6ce0" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">å¦‚æœä½ æ„Ÿå…´è¶£ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°å°†åº”ç”¨ç¨‹åºè½¬æ¢æˆåç¨‹çš„PR:</p><div class="my mz ez fb na nb"><a href="https://github.com/chrisbanes/tivi/pull/135/" rel="noopener  ugc nofollow" target="_blank"><div class="nc ab dw"><div class="nd ab ne cl cj nf"><h2 class="bd hi fi z dy ng ea eb nh ed ef hg bi translated">é€šè¿‡chrisbanes Pullè¯·æ±‚#135 chrisbanes/tiviä»RxJavaè¿ç§»åˆ°åç¨‹</h2><div class="ni l"><h3 class="bd b fi z dy ng ea eb nh ed ef dx translated">GitHubæ˜¯2000å¤šä¸‡å¼€å‘äººå‘˜çš„å®¶å›­ï¼Œä»–ä»¬ä¸€èµ·å·¥ä½œæ¥æ‰˜ç®¡å’Œå®¡æŸ¥ä»£ç ã€ç®¡ç†é¡¹ç›®å’Œæ„å»ºâ€¦</h3></div><div class="nj l"><p class="bd b fp z dy ng ea eb nh ed ef dx translated">github.com</p></div></div><div class="nk l"><div class="nl l nm nn no nk np jg nb"/></div></div></a></div><h2 id="d369" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">åç»­æ­¥éª¤</h2><p id="ccbb" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">å¸Œæœ›æ‚¨å¯ä»¥çœ‹åˆ°ï¼Œä»RxJavaçš„Single/Maybe/Completableåˆ‡æ¢åˆ°åç¨‹å®é™…ä¸Šæ˜¯ç›¸å¯¹å®¹æ˜“çš„ã€‚</p><p id="2fe2" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">ç›®å‰ï¼Œæˆ‘ä»åœ¨ä½¿ç”¨RxJavaè¿›è¡Œæµåª’ä½“è§‚çœ‹ï¼Œä½†æˆ‘å¯èƒ½ä¼šè½¬å‘å•ç‹¬ä½¿ç”¨<a class="ae jm" href="https://developer.android.com/reference/android/arch/lifecycle/LiveData.html" rel="noopener ugc nofollow" target="_blank"> LiveData </a>æˆ–<a class="ae jm" href="https://github.com/Kotlin/kotlinx.coroutines/blob/master/coroutines-guide.md#channels" rel="noopener ugc nofollow" target="_blank">åç¨‹é¢‘é“</a>ã€‚ä¸è¿‡è¿™æ˜¯ä¸‹ä¸€æ¬¡çš„ä»»åŠ¡ã€‚</p></div></div>    
</body>
</html>