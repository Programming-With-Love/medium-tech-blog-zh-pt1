<html>
<head>
<title>Navigating to Dialog Destinations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">导航到对话目标</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/navigation-component-dialog-destinations-bfeb8b022759?source=collection_archive---------0-----------------------#2020-10-14">https://medium.com/androiddevelopers/navigation-component-dialog-destinations-bfeb8b022759?source=collection_archive---------0-----------------------#2020-10-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/725899f2133defe3ea6337a0224df549.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jVPeVFox5xRshqJ0"/></div></div></figure><div class=""/><div class=""><h2 id="f790" class="pw-subtitle-paragraph ip hr hs bd b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg dx translated">导航组件不限于<code class="du jh ji jj jk b">NavHostFragment</code>内的目的地</h2></div><p id="93d8" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">这是关于导航组件的<a class="ae kh" href="https://www.youtube.com/playlist?list=PLWz5rJ2EKKc91i2QT8qfrfKgLNlJiG1z7" rel="noopener ugc nofollow" target="_blank">疯狂技能</a>系列文章的第二篇。这些文章是基于视频形式解释的内容，作为<a class="ae kh" href="https://www.youtube.com/playlist?list=PLWz5rJ2EKKc91i2QT8qfrfKgLNlJiG1z7" rel="noopener ugc nofollow" target="_blank"> MAD Skills </a>系列的一部分，所以请随意以您喜欢的任何方式使用这些材料(尽管从文本中复制代码比从视频中复制代码更容易，这也是我们提供这个版本的原因)。</p><p id="ec58" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">如果你更喜欢视频形式的内容，可以看看下面的内容:</p><figure class="ki kj kk kl fd hj"><div class="bz dy l di"><div class="km kn l"/></div></figure><h1 id="a91a" class="ko kp hs bd kq kr ks kt ku kv kw kx ky iy kz iz la jb lb jc lc je ld jf le lf bi translated">介绍</h1><p id="3536" class="pw-post-body-paragraph jl jm hs jn b jo lg it jq jr lh iw jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">在<a class="ae kh" rel="noopener" href="/androiddevelopers/navigation-component-an-overview-4697a208c2b5">上一集</a>中，我简要介绍了导航组件，包括导航图的使用。</p><p id="1b79" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">在这一集里，我将探索如何使用API来导航到对话目的地。大多数导航发生在不同的片段目的地之间，这些目的地在UI中的<code class="du jh ji jj jk b">NavHostFragment</code>对象内部交换。但是也可以导航到容器之外的目的地，包括对话框。我们可以使用导航图工具来完成这项工作，就像我们对普通目的地所做的那样。</p><h1 id="06ae" class="ko kp hs bd kq kr ks kt ku kv kw kx ky iy kz iz la jb lb jc lc je ld jf le lf bi translated">环形跟踪</h1><p id="3345" class="pw-post-body-paragraph jl jm hs jn b jo lg it jq jr lh iw jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">我有一个问题:我喜欢油炸圈饼。很多。</p><p id="d097" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">我想知道哪些甜甜圈是我喜欢的，这样我就可以再吃到它们，哪些是我不喜欢的，这样我就可以避免吃到它们。但是我记性不好。那么我该如何跟踪这些重要的数据呢？</p><p id="418f" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">我知道了:我就用个app！</p><p id="748c" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">不幸的是，我在Play Store上找不到甜甜圈追踪应用程序(你能相信吗？！？！).所以我需要自己写。该应用程序将有一个我吃过的甜甜圈列表，以及我记录的每一个甜甜圈的信息，如它们的名称，描述，可能是一张图片，肯定是一个评级。</p><p id="222b" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">这将是一个非常简单的应用程序，由两个屏幕组成:</p><ul class=""><li id="4fc1" class="ll lm hs jn b jo jp jr js ju ln jy lo kc lp kg lq lr ls lt bi translated">油炸圈饼的清单</li><li id="60fd" class="ll lm hs jn b jo lu jr lv ju lw jy lx kc ly kg lq lr ls lt bi translated">一个窗体，我可以在其中输入一个甜甜圈的信息，可以是我正在添加到列表中的一个新甜甜圈，也可以是我正在编辑的列表中的一个现有甜甜圈的信息</li></ul><p id="a5b7" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">对于信息编辑屏幕，我想使用一个对话框。我想要一些轻量级的东西，在不替换整个UI的情况下，在活动的顶部弹出。我知道导航组件处理目的地，但是那些只是在单个<code class="du jh ji jj jk b">NavHostFragment</code>中交换出来的片段，对吗？</p><p id="4ed9" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">是…也不是。导航组件的默认行为是交换出<code class="du jh ji jj jk b">NavHostFragment</code>中的片段。但是导航组件也处理对话目的地，它位于<code class="du jh ji jj jk b">NavHostFragment</code>的之外的<em class="lz">。</em></p><h1 id="63bc" class="ko kp hs bd kq kr ks kt ku kv kw kx ky iy kz iz la jb lb jc lc je ld jf le lf bi translated">从模板开始</h1><p id="df0a" class="pw-post-body-paragraph jl jm hs jn b jo lg it jq jr lh iw jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">首先，我将展示如何在一个新的应用程序中设置导航的基础。然后，我将展示我编写的甜甜圈跟踪应用程序，这样您就可以看到它的发展方向。(<em class="lz">我把这个叫做</em> <a class="ae kh" href="https://en.wikipedia.org/wiki/Julia_Child" rel="noopener ugc nofollow" target="_blank"> <em class="lz">茱莉亚·切尔德</em> </a> <em class="lz">的把戏。在她多年前的</em> <a class="ae kh" href="https://en.wikipedia.org/wiki/The_French_Chef" rel="noopener ugc nofollow" target="_blank"> <em class="lz">烹饪秀</em> </a> <em class="lz">中，蔡尔德女士会开始烹饪食谱，然后迅速拿出完成的菜肴，跳过中间那段乏味的部分，她在那里编写了准备和烹饪食物的所有代码</em>。</p><p id="140c" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">在Android Studio 3.6和更高版本中，您可以选择一个新的项目模板，让自己开始使用导航组件。我发现这很有帮助，即使我最终的UI不会与我在template应用程序中开始时的UI相似，因为模板处理拉入适当的依赖项和创建基础架构代码和资源的工作。</p><p id="6294" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">现在让我们在Android Studio中创建一个基本活动。我在<a class="ae kh" rel="noopener" href="/androiddevelopers/navigation-component-an-overview-4697a208c2b5">以前的文章</a>或<a class="ae kh" href="https://youtu.be/xITkfPIaStU" rel="noopener ugc nofollow" target="_blank">视频</a>中浏览了一些，所以如果你愿意，可以查看更多细节和视觉效果。同时，我将跳到下一步。</p><h1 id="481b" class="ko kp hs bd kq kr ks kt ku kv kw kx ky iy kz iz la jb lb jc lc je ld jf le lf bi translated">对话目标</h1><p id="0e5a" class="pw-post-body-paragraph jl jm hs jn b jo lg it jq jr lh iw jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">当您查看我们基本活动的导航图时，您可以看到该应用程序有2个目的地，以及将我们带到这些目的地之间的操作。这些目的地是片段，它们将在模板为我们创建的<code class="du jh ji jj jk b">NavHostFragment</code>中交换进出。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ma"><img src="../Images/9b42bb86dd16fc86f307a1536f4932a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ddeashPZyHPG_Rzt"/></div></div><figcaption class="mb mc et er es md me bd b be z dx">Basic Activity comes with two fragment destinations along with actions to navigate between them</figcaption></figure><p id="af7f" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">这几乎是我们所需要的…除了我们真正想要的目的地是一个对话框，我们将在其中输入关于我们的甜甜圈的细节。为了创建那个目的地，让我们首先创建我们需要的对话框类。</p><p id="1fc6" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">首先，我们将在UI中创建一个只有占位符项的布局。在布局资源目录中创建一个名为<code class="du jh ji jj jk b">my_dialog.xml</code>的文件。在该布局中，添加一个<code class="du jh ji jj jk b">TextView</code>，并将其约束到所有四个边，使其在容器中居中。结果应该是这样的:</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div class="er es mf"><img src="../Images/a68924c89a6f3e1ef051e12874412d4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:502/format:webp/1*4bioWGly9N7m3qFqe1Nj7Q.png"/></div><figcaption class="mb mc et er es md me bd b be z dx">Our simple dialog, with Placeholder text in the center</figcaption></figure><p id="f36d" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">接下来，创建<code class="du jh ji jj jk b">Fragment</code>，它将膨胀布局。在主包中，创建一个名为<code class="du jh ji jj jk b">MyDialog.kt</code>的新Kotlin文件。在该文件中，创建<code class="du jh ji jj jk b">MyDialog</code>作为<code class="du jh ji jj jk b">BottomSheetDialogFragment</code>的子类，并让它覆盖<code class="du jh ji jj jk b">onCreateView() </code>以返回从我们之前创建的布局资源中展开的视图:</p><pre class="ki kj kk kl fd mg jk mh mi aw mj bi"><span id="ae6f" class="mk kp hs jk b fi ml mm l mn mo">class MyDialog : BottomSheetDialogFragment() {<br/>    override fun onCreateView(<br/>        inflater: LayoutInflater,<br/>        container: ViewGroup?,<br/>        savedInstanceState: Bundle?<br/>    ): View? {<br/>        return inflater.inflate(R.layout.<em class="lz">my_dialog</em>, <br/>            container, false)<br/>    }<br/>}</span></pre><p id="2ad8" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">现在我们有了对话框片段，我们可以创建一个导航到它的目的地。返回导航图并添加一个目的地。在弹出菜单中，你可以看到它知道<code class="du jh ji jj jk b">MyDialog</code>。选择那个。</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div class="er es mp"><img src="../Images/cfd283f015f3c48752a0e31905ead7f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:800/format:webp/1*B3o1tNSLpT4La3i2vdLHCA.png"/></div><figcaption class="mb mc et er es md me bd b be z dx">Select MyDialog from the list as the new destination… and make sure it’s coming in as a “Dialog” and not a “Fragment”</figcaption></figure><p id="1172" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">细心的读者可能会注意到上面截图中的一个IDE小bug。即使<code class="du jh ji jj jk b">MyDialog</code>实际上是一个<code class="du jh ji jj jk b">Dialog</code>对象，导航工具有时也不会检测到它，而是将其添加为<code class="du jh ji jj jk b">Fragment</code>目的地。这绝对不是我们想要的。它并不总是发生(耶，不可预测的结果！)，但是在这个项目中它经常发生，所以我想在这里强调一下，以防它发生在你身上。因为…这很令人困惑。幸运的是，解决方法很简单，所以知道它可能发生真的是最重要的事情。</p><p id="949b" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">要解决这个问题，如果您看到了，只需进入导航图的XML代码，将<code class="du jh ji jj jk b">fragment</code>标记改为<code class="du jh ji jj jk b">dialog</code>。下面是我修复代码后的样子:</p><pre class="ki kj kk kl fd mg jk mh mi aw mj bi"><span id="2a9c" class="mk kp hs jk b fi ml mm l mn mo">&lt;<strong class="jk ht">dialog</strong><br/>    android:id=”@+id/myDialog”<br/>    android:name=”com.android.samples.navdialogsample.MyDialog”<br/>    android:label=”MyDialog” /&gt;</span></pre><p id="ad64" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated"><em class="lz">【旁白:这个问题我问过安卓工作室团队。这显然与内部搜索依赖项的顺序有关。他们正在解决问题。】</em></p><p id="8977" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">现在我们有了对话框的目的地，我们可以创建一个动作，将我们从主目的地带到对话框:</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div class="er es mq"><img src="../Images/0f3ddc93a7f177d3117286e93dce9c0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:586/format:webp/1*ljSRZqJlK3apGfWcIRIgPw.png"/></div><figcaption class="mb mc et er es md me bd b be z dx">Create a new action to navigate from FirstFragment to the dialog</figcaption></figure><p id="7b3a" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">还需要一个步骤才能导航到这个对话框。为此，我们需要研究FirstFragment的代码。在该类中，有代码(由基本活动模板创建)通过导航到<code class="du jh ji jj jk b">SecondFragment</code>目的地来处理按钮点击:</p><pre class="ki kj kk kl fd mg jk mh mi aw mj bi"><span id="be54" class="mk kp hs jk b fi ml mm l mn mo">view.findViewById&lt;Button&gt;(R.id.<em class="lz">button_first</em>).setOnClickListener {<br/>    <em class="lz">findNavController</em>().navigate(<br/>        R.id.<em class="lz">action_FirstFragment_to_SecondFragment</em>)<br/>}</span></pre><p id="835c" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">我们只需将它改为导航到对话框，使用适当的id，这是我们在导航图中创建目的地时为我们创建的:</p><pre class="ki kj kk kl fd mg jk mh mi aw mj bi"><span id="14ce" class="mk kp hs jk b fi ml mm l mn mo">view.findViewById&lt;Button&gt;(R.id.<em class="lz">button_first</em>).setOnClickListener <strong class="jk ht">{<br/>    </strong><em class="lz">findNavController</em>().navigate(<br/>        R.id.<strong class="jk ht"><em class="lz">action_FirstFragment_to_myDialog</em></strong>)<br/>}</span></pre><p id="73f4" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">就是这样！现在我们可以运行我们的应用程序并查看结果。当我们点击按钮时，它会把我们带到对话目的地，正如广告所说:</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div class="er es mr"><img src="../Images/8f0026885e0b309aed6054b088543512.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*jnu0lMIjXpl3fDqtucgbqw.png"/></div><figcaption class="mb mc et er es md me bd b be z dx">Clicking on the button brings up the [very tiny] dialog with its Placeholder text item</figcaption></figure><p id="2a08" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">请注意，对话框比在设计工具中显示的要小得多——这是因为只有那么一点点<code class="du jh ji jj jk b">TextView</code>“占位符”内容需要包含和环绕。但是相信我——那是我们的对话。</p><p id="4dbd" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">到目前为止，我们已经为我的甜甜圈跟踪应用程序创建了一个非常简化的版本，只是为了展示如何创建和使用对话框目的地的基础知识。现在让我们来看看甜甜圈应用程序中的实际代码，看看它在实践中是什么样子的。</p><h1 id="0154" class="ko kp hs bd kq kr ks kt ku kv kw kx ky iy kz iz la jb lb jc lc je ld jf le lf bi translated">DonutTracker:应用程序</h1><p id="d13d" class="pw-post-body-paragraph jl jm hs jn b jo lg it jq jr lh iw jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">剧透提示:我已经写了<a class="ae kh" href="https://github.com/android/architecture-components-samples/tree/main/MADSkillsNavigationSample" rel="noopener ugc nofollow" target="_blank">DonutTracker应用</a>。我将带您浏览展示我如何使用对话框目标导航的重要部分。</p><p id="7da3" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">首先，这是应用程序的导航图:</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div class="er es ms"><img src="../Images/74248f9461fa5a783a2b11c4a1634325.png" data-original-src="https://miro.medium.com/v2/resize:fit:730/format:webp/1*JKRSAboLp86Gv9p9wSj0nA.png"/></div><figcaption class="mb mc et er es md me bd b be z dx">DonutTracker has two destinations in its navigation graph</figcaption></figure><p id="b303" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">你可以看到像以前一样有家的目的地，叫做<code class="du jh ji jj jk b">donutList</code>。这是包含甜甜圈列表的片段(在一个<code class="du jh ji jj jk b">RecyclerView</code>中)。我还创建了第二个目的地，<code class="du jh ji jj jk b">donutEntryDialogFragment</code>，这是用户编辑甜甜圈信息的地方。</p><p id="1f25" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">如果我们查看<code class="du jh ji jj jk b">DonutList</code>中的代码，它是包含数据列表的<code class="du jh ji jj jk b">RecyclerView</code>的片段，我们可以看到导航是如何处理的。点击<code class="du jh ji jj jk b">FloatingActionButton</code> (FAB)可导航至对话框</p><pre class="ki kj kk kl fd mg jk mh mi aw mj bi"><span id="d033" class="mk kp hs jk b fi ml mm l mn mo">binding.fab.setOnClickListener { fabView -&gt;<br/>    fabView.<em class="lz">findNavController</em>().navigate(DonutListDirections<br/>        .actionDonutListToDonutEntryDialogFragment())<br/>}</span></pre><p id="5ecf" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">注意，我在这里使用视图绑定来获取对<code class="du jh ji jj jk b">FloatingActionButton</code>的引用，也就是对<code class="du jh ji jj jk b">binding.fab</code>的引用。</p><p id="2e42" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">在该文件的其他地方，我们还可以看到如何点击<code class="du jh ji jj jk b">RecyclerView</code>中的一个项目，将我们导航到编辑该项目的信息的对话框:</p><pre class="ki kj kk kl fd mg jk mh mi aw mj bi"><span id="138f" class="mk kp hs jk b fi ml mm l mn mo">donut -&gt;<br/>    <em class="lz">findNavController</em>().navigate(DonutListDirections<br/>        .actionDonutListToDonutEntryDialogFragment(donut.id))</span></pre><p id="4386" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">在上面的代码片段中有一些需要注意的地方。</p><p id="590b" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">首先，这里使用<code class="du jh ji jj jk b">navigate()</code>函数的语法(使用<code class="du jh ji jj jk b">Directions</code>对象导航)与我们之前创建的基本活动(导航到由<code class="du jh ji jj jk b">R.id.action_FirstFragment_to_myDialog</code>指定的动作)略有不同。这是因为我们正在查看DonutTracker应用程序最终版本的代码，它使用了<code class="du jh ji jj jk b">SafeArgs</code>。SafeArgs生成了<code class="du jh ji jj jk b">Directions</code>代码，使得在带有参数的目的地之间导航变得更加容易。</p><p id="c2f9" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">第二，当我们从FAB导航时(这里我们没有传递参数给<code class="du jh ji jj jk b">Directions</code>对象)和当我们从列表中的一个甜甜圈项目导航时(这里我们用<code class="du jh ji jj jk b">donut.id</code>调用它)，对<code class="du jh ji jj jk b">navigate()</code>的调用是不同的。这种差异允许我们创建一个新的甜甜圈项目(当不传递参数时)或者编辑一个现有的项目(当传递<code class="du jh ji jj jk b">donut.id</code>时)。(<em class="lz">剧透:我会在下一集讲述这个话题。你也可以在此期间看看</em> <a class="ae kh" href="https://github.com/android/architecture-components-samples/tree/main/MADSkillsNavigationSample" rel="noopener ugc nofollow" target="_blank"> <em class="lz">完整代码</em> </a> <em class="lz">。</em>)</p><p id="81af" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">运行该应用程序显示它是如何工作的。我已经在应用中预装了重要的甜甜圈数据，如你所见:</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div class="er es mt"><img src="../Images/6d8eaadf96acbd3924feba48f44121f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*TwYuBcjnWf0lfJVf9Upi-A.png"/></div><figcaption class="mb mc et er es md me bd b be z dx">The DonutTracker app, showing a tantalizing list of items</figcaption></figure><p id="2a8e" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">单击FAB会将我们带到一个对话框，我们可以在其中输入有关新甜甜圈的信息:</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div class="er es mu"><img src="../Images/f100529ab611f6217af31193d45a3fbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:620/format:webp/1*NqJVplH8GoNntsQTvMjFrA.png"/></div><figcaption class="mb mc et er es md me bd b be z dx">Clicking on the FAB navigates to the dialog destination to enter information about a new donut item</figcaption></figure><p id="d1f1" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">但是，如果我们单击一个现有的项目(这里我单击了“fundonut ”,因为我显然需要一个更好的描述)，这将把我们带到同一个对话框目的地，在那里我们可以编辑被单击项目的数据:</p><figure class="ki kj kk kl fd hj er es paragraph-image"><div class="er es mt"><img src="../Images/31e91362f40b0f17462ce9bcf78cef26.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*vPNegOw_Of9FNo_Dy-DV2Q.png"/></div><figcaption class="mb mc et er es md me bd b be z dx">Clicking on one of the items navigates to the dialog to edit that item’s information</figcaption></figure><p id="08b0" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">单击DONE按钮保存对数据库的更改并返回列表，而CANCEL放弃编辑并返回。请注意，单击Back按钮也会将我们带回到甜甜圈列表，因为导航组件会自动为我们设置back stack来做正确的事情。</p><h1 id="7853" class="ko kp hs bd kq kr ks kt ku kv kw kx ky iy kz iz la jb lb jc lc je ld jf le lf bi translated">摘要</h1><p id="41d7" class="pw-post-body-paragraph jl jm hs jn b jo lg it jq jr lh iw jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">这次到此为止。我们看到了如何快速创建一个内置导航组件的新应用程序，以及如何导航到一个对话目的地。在未来的几集中，我们将继续使用这个真正重要的应用程序来展示导航组件的其他功能…当然，还要构建一个更强大的甜甜圈跟踪应用程序。</p><h1 id="23f5" class="ko kp hs bd kq kr ks kt ku kv kw kx ky iy kz iz la jb lb jc lc je ld jf le lf bi translated">了解更多信息</h1><p id="799a" class="pw-post-body-paragraph jl jm hs jn b jo lg it jq jr lh iw jt ju li jw jx jy lj ka kb kc lk ke kf kg ha bi translated">有关导航组件的更多详细信息，请查看developer.android.com上的指南<a class="ae kh" href="https://developer.android.com/guide/navigation/navigation-getting-started" rel="noopener ugc nofollow" target="_blank">导航组件</a>入门。</p><p id="8828" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">要查看完成的DonutTracker应用程序(它包含上面概述的代码，但也包含未来剧集中涉及的代码)，请查看<a class="ae kh" href="https://github.com/android/architecture-components-samples/tree/main/MADSkillsNavigationSample" rel="noopener ugc nofollow" target="_blank"> GitHub示例</a>。</p><p id="3ce8" class="pw-post-body-paragraph jl jm hs jn b jo jp it jq jr js iw jt ju jv jw jx jy jz ka kb kc kd ke kf kg ha bi translated">最后，要查看MAD Skills系列的其他内容，请查看YouTube上Android开发者频道中的<a class="ae kh" href="https://www.youtube.com/playlist?list=PLWz5rJ2EKKc91i2QT8qfrfKgLNlJiG1z7" rel="noopener ugc nofollow" target="_blank">视频播放列表</a>。</p></div></div>    
</body>
</html>