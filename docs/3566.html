<html>
<head>
<title>Switching between EUS &amp; non-EUS Azure RHEL VM Repositories</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在EUS和非EUS Azure RHEL虚拟机仓库之间切换</h1>
<blockquote>原文：<a href="https://medium.com/globant/switching-between-eus-non-eus-azure-rhel-vm-repositories-964ce90b41b8?source=collection_archive---------0-----------------------#2020-12-03">https://medium.com/globant/switching-between-eus-non-eus-azure-rhel-vm-repositories-964ce90b41b8?source=collection_archive---------0-----------------------#2020-12-03</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="8c8b" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">关于文章</h1><p id="a81e" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在这篇文章中，你将了解Azure RHEL VM——更新行为、关联存储库和切换存储库(EUS和非EUS)。</p><p id="f603" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">阅读本文后，您将学会:</p><ul class=""><li id="e901" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">确定RHEL虚拟机映像的关联存储库</li><li id="b2a5" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">通过锁定-解锁功能修复RHEL虚拟机映像版本问题，并更新服务器</li><li id="7276" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">根据需要在存储库之间切换</li></ul><p id="a995" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在使用Linux服务器时，需要使用<em class="kt"> sudo </em> <em class="kt"> yum update </em>命令多次更新服务器。无论您需要安装任何新的软件包还是更新现有的软件包，都建议您在安装前或安装后更新服务器。以下是与RHEL更新流程相关的两个场景:</p><ul class=""><li id="cda0" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">使用<strong class="je hi"><em class="kt">yum update</em></strong><em class="kt"/>命令更新服务器，同时也更新了最终用户不希望的RHEL镜像版本。</li><li id="7ab7" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">安装/更新任何软件包/应用程序时，它会停止并显示以下消息:</li></ul><p id="a43c" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><strong class="je hi">此服务器未连接到Red Hat Subscription manager或卫星服务器</strong></p><p id="10f0" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这篇文章主要倾向于给出一瞥，以了解上述问题和解决方案来修复它。</p><p id="b6b7" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这将涵盖以下主题:</p><ul class=""><li id="06cc" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">Azure Red Hat更新基础架构(RHUI)简介</li><li id="972d" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">选择RHEL图像类型前请三思</li><li id="5753" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">RHEL图像更新行为</li><li id="45c7" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">存储库类型和标识<br/> —非EUS回购<br/> — EUS回购</li><li id="d2ff" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">RHEL EUS — RHEL虚拟机版本锁</li><li id="39d6" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">为什么我们需要版本锁定和解锁？</li><li id="a6cc" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">切换<br/> —将RHEL虚拟机切换到EUS回购<br/> —将RHEL虚拟机切换回非EUS回购</li></ul><h1 id="4848" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">Azure RHUI简介</h1><p id="e5ec" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">red Hat Update infra structure(<strong class="je hi">RHUI</strong>)在Azure cloud中预配置了预付费(<strong class="je hi"> PAYG </strong>)映像。这意味着，使用Azure PAYG映像不需要任何额外的配置就可以从RHUI仓库获得最新的更新。</p><p id="0097" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">对于其他自定义和黄金图像(称为<strong class="je hi">BYOS</strong>——自带订阅)，它需要连接到红帽订阅管理器(<strong class="je hi"> RHSM </strong>)或卫星服务器来接收更新。</p><p id="5fd3" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">RHUI支持在Azure中创建的RHEL PAYG虚拟机，以镜像Red-Hat托管的存储库内容，从而创建具有Azure特定内容的自定义存储库。</p><p id="0991" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">如果您在Azure cloud中提供RHEL PAYG映像，它会预配置为访问azure RHUI。它也不需要任何额外的配置。一旦您的RHEL虚拟机实例被提供，只需运行<strong class="je hi"><em class="kt">sudo yum update</em></strong>命令就可以获得最新的更新。使用本服务的费用包含在RHEL PAYG软件费用中。</p><p id="16e7" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">Azure基于功能、存储、性能和工作负载提供了广泛的RHEL PAYG虚拟机系列。虚拟机的定价和可用性可能因所选地区和操作系统/软件而异。</p><p id="c99f" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">请参考以下链接了解定价详情:</p><p id="e7b7" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><a class="ae ku" href="https://azure.microsoft.com/en-us/pricing/details/virtual-machines/red-hat/" rel="noopener ugc nofollow" target="_blank">https://azure . Microsoft . com/en-us/pricing/details/virtual-machines/red-hat/</a></p><h1 id="7e35" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">选择RHEL图像类型前请三思</h1><p id="4d55" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">Azure中调配的RHEL PAYG虚拟机已预配置为访问RHUI。但是，这并不限制您向Subscription Manager (RHSM)或卫星或任何其他来源注册此虚拟机。但是，如果你注册PAYG虚拟机与其他来源的更新，这将导致间接重复计费。</p><p id="65d8" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">让我们通过以下细节来理解这一点:</p><p id="7909" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">访问Azure托管的RHUI的费用包含在RHEL PAYG图像价格中。向另一个更新源注册同一个虚拟机可能会产生双重费用。首先，您将被收取Azure RHEL软件费用，第二次为红帽订阅。</p><p id="7fb1" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">如果您从Azure hosted RHUI注销RHEL PAYG虚拟机，它不会将您的虚拟机转换为BYOL(自带许可证)类型的虚拟机。相反，您需要调配另一个BYOL类型的虚拟机。</p><p id="24da" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">如果您的要求是始终使用其他来源获取更新，请为虚拟机配置RHEL BYOS映像。</p><h1 id="78b0" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">RHEL图像更新行为</h1><p id="b4e8" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">当您运行<strong class="je hi"> <em class="kt"> sudo yum update </em> </strong>来获取最新的RHEL映像更新时，它的行为会根据您提供的RHEL映像而有所不同。这是因为不同的图像由不同的存储库处理。</p><p id="76a2" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">Azure提供了两种类型的RHEL图像，这些图像与以下任一项相关联:</p><ul class=""><li id="856b" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">扩展更新支持(EUS)</li><li id="e939" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">常规非EUS存储库</li></ul><p id="d106" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在Azure中，可以使用下面的Azure CLI命令列出可用的RHEL映像:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="fb0e" class="le if hh la b fi lf lg l lh li"><strong class="la hi"><em class="kt">az vm image list –publisher redhat -all</em></strong></span></pre><p id="a4d4" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">输出:</p><figure class="kv kw kx ky fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lj"><img src="../Images/dab50f39304cfc4ead33493df9e78e3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*i1b5ZYP6MM8G0YtP"/></div></div></figure><p id="388d" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">或者，使用PowerShell cmdlets</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="31fd" class="le if hh la b fi lf lg l lh li"># e.g. Below cmdlets let you get the info on RedHat offerings for the given RHEL sku available in the given region</span><span id="2dfd" class="le if hh la b fi lr lg l lh li"><em class="kt">$locName=”West US”</em></span><span id="5037" class="le if hh la b fi lr lg l lh li">#To get the list of publishers, use-</span><span id="bf19" class="le if hh la b fi lr lg l lh li">#Get-AzVMImagePublisher -Location $locName | Select PublisherName</span><span id="d947" class="le if hh la b fi lr lg l lh li"><em class="kt">$pubName=”RedHat”</em></span><span id="82c9" class="le if hh la b fi lr lg l lh li">#To get the list of available Offers for RedHat, use-</span><span id="5b6b" class="le if hh la b fi lr lg l lh li">#Get-AzVMImageOffer -Location $locName -PublisherName $pubName | Select Offer</span><span id="5464" class="le if hh la b fi lr lg l lh li"><em class="kt">$offerName=”RHEL”</em></span><span id="d2bb" class="le if hh la b fi lr lg l lh li">#To get the list of available SKUs, use-</span><span id="b21e" class="le if hh la b fi lr lg l lh li">#Get-AzVMImageSku -Location $locName -PublisherName $pubName -Offer $offerName | Select Skus</span><span id="0533" class="le if hh la b fi lr lg l lh li"><em class="kt">$skuName=”7.8"</em></span><span id="b156" class="le if hh la b fi lr lg l lh li"><em class="kt">Get-AzVMImage -Location $locName -PublisherName $pubName -Offer $offerName -Sku $skuName</em></span></pre><p id="6f3c" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">输出:</p><figure class="kv kw kx ky fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ls"><img src="../Images/d9846650a76b733e1aa1188bc34c5795.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*swNdzxarHyq2Iwy0"/></div></div></figure><h1 id="8c6e" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">存储库类型和标识</h1><p id="43e0" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在根据更新基础架构的要求选择要调配的RHEL映像时，确定存储库类型非常重要。</p><p id="7327" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">RHEL图像全名(URN)由四个部分组成(<strong class="je hi">发行商:报价:SKU:版本</strong>)，它描述了关于图像的所有细节。</p><p id="58bb" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">例如:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="1379" class="le if hh la b fi lf lg l lh li">RedHat:RHEL:7-LVM:7.6.2019062414</span></pre><p id="ebc8" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这个骨灰盒指的是2019年6月24日建立的RHEL 7.6 LVM分区映像。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="6784" class="le if hh la b fi lf lg l lh li">RedHat:RHEL:7.6:7.6.2019062116</span></pre><p id="7f77" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">图片发布于2019年6月21日，连接到EUS</p><p id="f307" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">让我们详细了解EUS和非EUS连接的RHEL图像。</p><h2 id="9a49" class="le if hh bd ig lt lu lv ik lw lx ly io jn lz ma is jr mb mc iw jv md me ja mf bi translated">非EUS存储库</h2><p id="9496" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">如果您在从连接到非EUS存储库的RHEL映像供应的RHEL虚拟机上运行<strong class="je hi"> <em class="kt"> sudo yum update </em> </strong>，它会将虚拟机更新到最新的RHEL次版本。</p><p id="3149" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">为了理解这一点，我们举个例子。</p><p id="3b13" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">如果您在Azure上提供RHEL虚拟机7.5 PAYG映像并运行<strong class="je hi"><em class="kt">sudo yum update</em></strong><em class="kt">，</em>这将升级到RHEL 7.7虚拟机并更新其他包。RHEL 7.7是RHEL 7家族的最新次要版本。</p><p id="4799" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">下图是连接到非EUS的RHEL图像的示例:</p><p id="75f1" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在下图中，SKU ( <strong class="je hi">第三个元素，见粗体- <em class="kt">斜体</em> </strong>)不包含次要版本。映像版本(URN的第4个元素)表示次要版本。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="8674" class="le if hh la b fi lf lg l lh li">RedHat:RHEL:<strong class="la hi"><em class="kt">7-LVM</em></strong>:7.4.2018010506</span><span id="444f" class="le if hh la b fi lr lg l lh li">RedHat:RHEL:<strong class="la hi"><em class="kt">7-RAW</em></strong>:7.4.2018010506</span></pre><h2 id="7b9a" class="le if hh bd ig lt lu lv ik lw lx ly io jn lz ma is jr mb mc iw jv md me ja mf bi translated">EUS知识库</h2><p id="687b" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">如果您在连接到EUS存储库的RHEL虚拟机上运行<strong class="je hi"> <em class="kt"> sudo yum更新</em> </strong> <em class="kt"> </em>，它将不会升级到最新的RHEL次要版本。这是因为连接到EUS资料库的RHEL图像被版本锁定了。</p><p id="ce80" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">连接到EUS存储库的RHEL图像示例:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="ae31" class="le if hh la b fi lf lg l lh li">RedHat:RHEL:<strong class="la hi"><em class="kt">7.4</em></strong>:7.4.2019062107</span><span id="fb47" class="le if hh la b fi lr lg l lh li">RedHat:RHEL:<strong class="la hi"><em class="kt">7.5</em></strong>:7.5.2019062018</span><span id="81cd" class="le if hh la b fi lr lg l lh li">RedHat:RHEL:<strong class="la hi"><em class="kt">7.6</em></strong>:7.6.2019062116</span></pre><p id="67a0" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在上面的图像中，SKU(第三元素)包含一个次要版本。</p><h1 id="ad52" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">RHEL EUS — RHEL虚拟机版本锁定</h1><p id="3d97" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">每当你在Azure上提供RHEL虚拟机时，客户可能会要求将该虚拟机锁定到任何特定的RHEL次要版本。这意味着客户不希望在已调配的RHEL虚拟机上运行<em class="kt"> sudo yum update </em>命令时升级。</p><p id="d12f" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">EUS存储库提供一种服务，在供应之后将RHEL虚拟机锁定到某个RHEL次要版本。也可以通过这种版本锁定操作来反转。</p><p id="5cff" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">EUS对RHEL &lt;= 7.5 from April 30,2020.</p><p id="3915" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">EUS will support RHEL 7.6 till May 31,2021</p><p id="35a8" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">EUS will support RHEL 7.7 till Aug 30,2021</p><h1 id="de2d" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">Why do we need version-lock-unlock?</h1><p id="cf3c" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">If you have provisioned a RHEL VM connected to EUS repositories and you want to install a package which is available from RHEL extras, you won’t be able to do so. Because EUS does not support the RHEL extras channel.</p><p id="da09" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">To achieve this, you would need to switch this VM to non-EUS.</p><h1 id="e873" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">Switching</h1><h2 id="66ba" class="le if hh bd ig lt lu lv ik lw lx ly io jn lz ma is jr mb mc iw jv md me ja mf bi translated">Switch a RHEL VM to EUS (Apply version-lock)</h2><p id="7f09" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">Please follow the below steps to lock your RHEL VM to current minor release or to a particular minor release version. All commands should be executed as <em class="kt">根</em>的支持已经结束。</p><p id="e490" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">禁用非EUS回购:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="45cd" class="le if hh la b fi lf lg l lh li"><em class="kt">yum –disablerepo=’*’ remove ‘rhui-azure-rhel7’</em></span></pre><p id="dde8" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">添加EUS回购:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="9d13" class="le if hh la b fi lf lg l lh li"><em class="kt">yum –config=’https://rhelimage.blob.core.windows.net/repositories/rhui-microsoft-azure-rhel7-eus.config’ install ‘rhui-azure-rhel7-eus’</em></span></pre><p id="080a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">将releasever变量锁定到当前次要版本</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="0c29" class="le if hh la b fi lf lg l lh li"><em class="kt">echo $(. /etc/os-release &amp;&amp; echo $VERSION_ID) &gt; /etc/yum/vars/releasever</em></span></pre><p id="f7e5" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">更新RHEL虚拟机</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="05c6" class="le if hh la b fi lf lg l lh li"><em class="kt">sudo yum update</em></span></pre><p id="e6ee" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这些步骤会将RHEL次要版本锁定到当前次要版本。意味着张贴这些步骤运行<strong class="je hi"> <em class="kt">须藤百胜更新</em> </strong> <em class="kt"> </em>不会升级到RHEL最新的次要版本。</p><p id="653d" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">如果您希望将RHEL虚拟机升级并锁定到特定的次要发布版本。</p><p id="8e4e" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">例如，您的RHEL虚拟机当前的次要版本是7.2，您希望将其升级到7.5并锁定。</p><p id="228a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">执行:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="0941" class="le if hh la b fi lf lg l lh li"><em class="kt">echo 7.5 &gt; /etc/yum/vars/releasever</em></span></pre><p id="f9e7" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">并运行:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="aff5" class="le if hh la b fi lf lg l lh li"><em class="kt">sudo yum update</em></span></pre><p id="63e1" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这将首先将当前次要版本升级到7.5，并锁定该版本以防进一步升级。</p><h2 id="67af" class="le if hh bd ig lt lu lv ik lw lx ly io jn lz ma is jr mb mc iw jv md me ja mf bi translated">将RHEL虚拟机切换回非EUS模式(移除版本锁定)</h2><p id="a38e" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">如果您需要将RHEL虚拟机连接到非EUS存储库来执行某些操作。例如，如果你想从Red Hat extras安装一个软件包。</p><p id="d0dd" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">首先，您需要移除RHEL虚拟机上的版本锁定。</p><p id="74e1" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">遵循以下步骤(以root用户身份运行):</p><p id="9159" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">删除releasever文件以删除版本锁定:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="c8b5" class="le if hh la b fi lf lg l lh li"><em class="kt">rm /etc/yum/vars/releasever</em></span></pre><p id="4b7d" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">禁用EUS回购:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="cdb8" class="le if hh la b fi lf lg l lh li"><em class="kt">yum –disablerepo=’*’ remove ‘rhui-azure-rhel7-eus’</em></span></pre><p id="96d7" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">添加非EUS回购(配置RHEL虚拟机):</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="d92d" class="le if hh la b fi lf lg l lh li"><em class="kt">yum –config=’https://rhelimage.blob.core.windows.net/repositories/rhui-microsoft-azure-rhel7.config’ install ‘rhui-azure-rhel7’</em></span></pre><p id="5689" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">正在更新RHEL虚拟机:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="7925" class="le if hh la b fi lf lg l lh li"><em class="kt">sudo yum update</em></span></pre><p id="ebe5" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">按照上述步骤，您可以根据需要在EUS和非EUS之间切换。</p><h1 id="434b" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">结论</h1><p id="8e0b" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">本文旨在说服您关于RHEL映像更新行为，并向您展示识别和选择与正确存储库相关联的正确RHEL映像的正确方法。它还包括在存储库之间切换的正确方法。</p><p id="3c2a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">希望这篇文章对你有帮助。</p><p id="6d74" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">感谢阅读。干杯😊</p></div></div>    
</body>
</html>