<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/apache-kafka-for-item-setup-3fe8f4ba5967?source=collection_archive---------3-----------------------#2016-10-16">https://medium.com/walmartglobaltech/apache-kafka-for-item-setup-3fe8f4ba5967?source=collection_archive---------3-----------------------#2016-10-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><p id="a66b" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated"><strong class="hi ie">用于物品设置的阿帕奇卡夫卡</strong></p><p id="9e91" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">在美国的<a class="ae if" href="https://www.walmart.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="hi ie">、Walmart.com</strong></a><strong class="hi ie"/>以及沃尔玛在全球的其他11个网站<strong class="hi ie"> </strong>上，我们提供无缝购物体验，在这些网站上，产品由以下商家销售:</p><ol class=""><li id="2fbb" class="ig ih hh hi b hj hk hn ho hr ii hv ij hz ik id il im in io bi translated">Walmart.com和沃尔玛商店的自有商户</li><li id="5d16" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id il im in io bi translated">网上商店的供应商</li><li id="8292" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id il im in io bi translated">沃尔玛市场上的卖家</li></ol><figure class="iv iw ix iy fd iz er es paragraph-image"><div role="button" tabindex="0" class="ja jb di jc bf jd"><div class="er es iu"><img src="../Images/42b0e92dcac3d06edf809ed512698230.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eVcIAqgl0Bvr38dzs0Ew-A.png"/></div></div><figcaption class="jg jh et er es ji jj bd b be z dx"><strong class="bd jk">Product sold on walmart.com - Online, Stores by Walmart &amp; by 3 marketplace sellers</strong></figcaption></figure><p id="114c" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">这个过程内部称为“<strong class="hi ie">商品设置</strong>”，网站访问者看到的是<strong class="hi ie">商品</strong>、<strong class="hi ie">报价</strong>、<strong class="hi ie">价格</strong>、<strong class="hi ie">库存</strong>、&amp;、<strong class="hi ie">物流</strong>经过数据处理后的商品列表。这些实体由来自不同格式&amp;模式的多个来源的数据组成。它们在数据处理方面有不同的特点:</p><ol class=""><li id="4d4a" class="ig ih hh hi b hj hk hn ho hr ii hv ij hz ik id il im in io bi translated"><strong class="hi ie">产品</strong>需要围绕以下方面做更多的数据准备:</li></ol><ul class=""><li id="a499" class="ig ih hh hi b hj hk hn ho hr ii hv ij hz ik id jl im in io bi translated"><strong class="hi ie">规范化</strong> —这是属性&amp;值的标准化，有助于搜索和发现</li><li id="42a9" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">匹配</strong> —这是一个稍微复杂的问题，要匹配有缺陷数据的副本</li><li id="ed14" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">分类</strong> —这涉及根据类别&amp;分类法进行分类</li><li id="62f7" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">内容</strong> —这包括对标题、描述、规格等属性的数据质量进行评分。，发现&amp;通过实体提取技术填补“空白”</li><li id="e806" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">图像</strong> —这包括选择最佳分辨率、导出属性、检测水印</li><li id="ecc4" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">分组</strong> —这涉及到根据变化对产品进行匹配和分组，就像鞋子的颜色和尺码不同&amp;</li><li id="1eb2" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">合并</strong> —这包括选择最佳来源和从多个来源收集数据</li><li id="7cb0" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">重新处理</strong> —目录需要重新处理，以适应日常变化</li></ul><p id="aa94" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">2.<strong class="hi ie">报价</strong>由多个卖家对相同产品做出&amp;需要在以下日期检查正确性:</p><ul class=""><li id="3371" class="ig ih hh hi b hj hk hn ho hr ii hv ij hz ik id jl im in io bi translated"><strong class="hi ie">标识符</strong></li><li id="608e" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">价格差异</strong></li><li id="e267" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">发货</strong></li><li id="9746" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">数量</strong></li><li id="187b" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">条件</strong></li><li id="55aa" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id jl im in io bi translated"><strong class="hi ie">开始&amp;结束日期</strong></li></ul><p id="5c34" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">3.<strong class="hi ie">定价&amp;库存</strong> <strong class="hi ie">一天中多次调整</strong>需要以极低的延迟进行处理&amp;严格的时间限制</p><p id="a56d" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">4.<strong class="hi ie">物流</strong>对<strong class="hi ie">数据正确性</strong>有很强的要求，以优化成本&amp;交付</p><figure class="iv iw ix iy fd iz er es paragraph-image"><div role="button" tabindex="0" class="ja jb di jc bf jd"><div class="er es jm"><img src="../Images/5dbc6da1b65f7925dcf4406cfdb31dae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8tk4o7FvffYY8fH5vXfp5w.png"/></div></div><figcaption class="jg jh et er es ji jj bd b be z dx"><strong class="bd jk">Modified </strong><a class="ae if" href="http://www.confluent.io/blog/event-sourcing-cqrs-stream-processing-apache-kafka-whats-connection/" rel="noopener ugc nofollow" target="_blank"><strong class="bd jk">Original</strong></a><strong class="bd jk"> with permission from </strong><a class="ae if" href="http://www.confluent.io/blog/author/neha-narkhede/" rel="noopener ugc nofollow" target="_blank"><strong class="bd jk">Neha Narkhede</strong></a></figcaption></figure><p id="e59e" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">这在架构上产生了许多分散的自治服务、系统和团队，它们处理在网站上列出的“T1”之后的“T12”之前的“T0”数据。作为2014年左右重新设计的一部分，我们开始考虑构建可扩展的数据处理系统。我个人受到了这篇著名博客文章的影响"<a class="ae if" href="https://engineering.linkedin.com/distributed-systems/log-what-every-software-engineer-should-know-about-real-time-datas-unifying" rel="noopener ugc nofollow" target="_blank"> <strong class="hi ie">《日志:每个软件工程师都应该知道的实时数据的统一抽象</strong> </a> <strong class="hi ie"> " </strong>，Kafka可以提供良好的抽象来连接数百个微服务、团队，并发展成为公司范围的多租户数据中心。在处理之前，我们开始将变更建模为Kafka中记录的事件流。使用各种技术进行数据处理，例如:</p><ol class=""><li id="1802" class="ig ih hh hi b hj hk hn ho hr ii hv ij hz ik id il im in io bi translated">流处理使用<a class="ae if" href="http://storm.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Storm </a>，<a class="ae if" href="http://spark.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Spark </a></li><li id="70c7" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id il im in io bi translated">普通Java程序</li><li id="d6cf" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id il im in io bi translated">反应式微服务</li><li id="eafc" class="ig ih hh hi b hj ip hn iq hr ir hv is hz it id il im in io bi translated">阿卡溪流</li></ol><p id="9751" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">自2015年以来分阶段推出的新数据管道实现了业务增长，我们可以更快地登上卖家，更快地设置产品列表。Kafka也是我们新的近实时(NRT)搜索索引的支柱，其中的变化在几秒钟内就反映在网站上。</p><figure class="iv iw ix iy fd iz er es paragraph-image"><div role="button" tabindex="0" class="ja jb di jc bf jd"><div class="er es jn"><img src="../Images/9edd2bfb4cd39337e8a96c6349bbd18b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7m3pHdfTiLiLh_CBRR3R_Q.png"/></div></div><figcaption class="jg jh et er es ji jj bd b be z dx"><strong class="bd jk">Message Rate filtered for a Day, split Hourly</strong></figcaption></figure><p id="28d0" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">Kafka的使用持续增长，每天都有新的主题加入，我们有许多包含数百个主题的小集群，每天处理数十亿次更新，主要是由价格和库存调整驱动的。我们构建了操作工具来跟踪流程、SLA指标、生产者和消费者的消息发送/接收延迟、积压警报、延迟和吞吐量。在Kafka中捕获所有更新的好处是，我们可以处理相同的数据来重新处理目录，在环境、A/B测试、分析和数据仓库之间共享数据。</p><p id="6886" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">向Kafka的转移实现了快速处理，但也带来了新的挑战，如管理许多服务拓扑&amp;它们的数据依赖性、数千个属性的模式管理、多DC数据平衡，以及保护消费者站点免受可能影响业务的变化的影响。</p><p id="136b" class="pw-post-body-paragraph hf hg hh hi b hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id ha bi translated">推动Kafka采用的核心租户(不同地理位置的"<strong class="hi ie"> Item Setup </strong>"团队可以自主操作)无疑实现了敏捷开发。自我介绍以来的几年里，我亲眼目睹了这一点。接下来的步骤是在内部提高Kafka对构建现有数据处理应用程序的<strong class="hi ie">新</strong> &amp; ( <strong class="hi ie"> Re </strong>)的认识，并评估令人兴奋的新流媒体技术，如Kafka Streams和Apache Flink。我们还将与Kafka开源社区和周围的生态系统一起做出贡献。</p></div></div>    
</body>
</html>