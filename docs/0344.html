<html>
<head>
<title>Introducing Constraint Layout 1.1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">引入约束布局1.1</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/introducing-constraint-layout-1-1-d07fc02406bc?source=collection_archive---------1-----------------------#2018-04-23">https://medium.com/androiddevelopers/introducing-constraint-layout-1-1-d07fc02406bc?source=collection_archive---------1-----------------------#2018-04-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="a168" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Constraint Layout简化了在Android中创建复杂布局的过程，它使得使用Android Studio中的可视化编辑器来构建大部分UI成为可能。它经常被描述为更强大的<code class="du jc jd je jf b">RelativeLayout</code>。使用约束布局，您可以定义复杂的布局，而无需构建复杂的视图层次结构。</p><p id="9929" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Constraint Layout 1.1最近作为稳定版发布，有很多值得喜欢的地方。优化的全面检查使大多数布局运行得比以前更快，并且像障碍和组这样的新功能使现实世界的设计变得简单！</p><h2 id="02bf" class="jg jh hh bd ji jj jk jl jm jn jo jp jq ip jr js jt it ju jv jw ix jx jy jz ka bi translated">Android Gradle</h2><pre class="kb kc kd ke fd kf jf kg kh aw ki bi"><span id="2567" class="jg jh hh jf b fi kj kk l kl km">dependencies {<br/>    compile 'com.android.support.constraint:constraint-layout:1.1.0'<br/>}</span></pre><p id="50a4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要在项目中使用新功能，请添加约束布局1.1作为依赖项。</p><h1 id="1571" class="kn jh hh bd ji ko kp kq jm kr ks kt jq ku kv kw jt kx ky kz jw la lb lc jz ld bi translated">1.1中的新功能</h1><h2 id="5958" class="jg jh hh bd ji jj jk jl jm jn jo jp jq ip jr js jt it ju jv jw ix jx jy jz ka bi translated">百分比</h2><p id="7e90" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">在约束布局1.0中，使一个视图占据屏幕的一个百分比需要制定两条准则。在约束布局1.1中，我们通过允许您轻松地将任何视图约束到某个百分比宽度或高度，使它变得更简单。</p><figure class="kb kc kd ke fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lj"><img src="../Images/d5a376f387b6528c33d932d5a010b993.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uqU2HbwRZeik-P2Ny-leIg.jpeg"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Specify the width of button using percents so it fits in the available space while maintaining your design.</figcaption></figure><p id="58eb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所有视图都支持<code class="du jc jd je jf b">layout_constraintWidth_percent</code>和<code class="du jc jd je jf b">layout_constraintHeight_percent</code>属性。这将导致约束固定在可用空间的某个百分比。所以用几行XML就可以让一个<code class="du jc jd je jf b">Button</code>或一个<code class="du jc jd je jf b">TextView</code>扩展到屏幕的某个百分比。</p><pre class="kb kc kd ke fd kf jf kg kh aw ki bi"><span id="dbb1" class="jg jh hh jf b fi kj kk l kl km">&lt;Button<br/>    android:layout_width="0dp"<br/>    android:layout_height="wrap_content"<br/>    <strong class="jf hi">app:layout_constraintWidth_percent="0.7"</strong> /&gt;</span></pre><h2 id="5415" class="jg jh hh bd ji jj jk jl jm jn jo jp jq ip jr js jt it ju jv jw ix jx jy jz ka bi translated">链子</h2><p id="e893" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">用<strong class="ig hi">链</strong>定位多个元素可让您配置它们如何填充可用空间。在1.1中，我们修复了几个关于链的错误，并使它们可以在更多的视图上工作。通过在两个方向上添加约束来制作链。例如，在这个动画中，每个视图之间都有一个约束。</p><figure class="kb kc kd ke fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lv"><img src="../Images/a5a694d7461830e13768feefa8463645.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*3wFzyPS9Fpc-b52roKVSCQ.gif"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Chains let you configure how to layout multiple related views with <strong class="bd ji">spread</strong>, <strong class="bd ji">spread_inside</strong>, and <strong class="bd ji">packed</strong>.</figcaption></figure><p id="bdbd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在链中的任何视图上都可以使用<code class="du jc jd je jf b">app:layout_constraintVertical_chainStyle</code>属性。您可以将其设置为<code class="du jc jd je jf b">spread</code>、<code class="du jc jd je jf b">spread_inside</code>或<code class="du jc jd je jf b">packed</code>。</p><ul class=""><li id="3de4" class="lw lx hh ig b ih ii il im ip ly it lz ix ma jb mb mc md me bi translated"><strong class="ig hi">传播</strong>在链中平均分布所有视图</li><li id="a1dc" class="lw lx hh ig b ih mf il mg ip mh it mi ix mj jb mb mc md me bi translated"><strong class="ig hi"> spread_inside </strong>将第一个和最后一个元素定位在边缘上，并平均分布其余的元素</li><li id="aa47" class="lw lx hh ig b ih mf il mg ip mh it mi ix mj jb mb mc md me bi translated"><strong class="ig hi">打包</strong>在链条中心将元素打包在一起</li></ul><h2 id="3536" class="jg jh hh bd ji jj jk jl jm jn jo jp jq ip jr js jt it ju jv jw ix jx jy jz ka bi translated">障碍</h2><p id="eca5" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">当你有几个可能在运行时改变大小的视图时，你可以使用一个<strong class="ig hi">屏障</strong>来约束元素。一个屏障位于几个元件的<code class="du jc jd je jf b">start</code>、<code class="du jc jd je jf b">top</code>、<code class="du jc jd je jf b">end</code>或<code class="du jc jd je jf b">bottom</code>处。您可以将它视为创建虚拟组的一种方式，因为它不会将该组添加到视图层次结构中。</p><p id="339e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当你布局国际化的字符串或者显示用户生成的内容，而这些内容的大小你无法预测的时候，栅栏是非常有用的。</p><figure class="kb kc kd ke fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lj"><img src="../Images/bf5c03721b3043b8790234b267c5c2e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*6Moj_NLX9iIzfen3aUh6WA.gif"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Barriers allow you to create a constraint from several views.</figcaption></figure><p id="3c70" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">屏障将始终将其自身定位在虚拟组之外，您可以使用它来约束其他视图。在此示例中，右视图被约束为始终位于最大文本视图的末尾。</p><h2 id="c1e4" class="jg jh hh bd ji jj jk jl jm jn jo jp jq ip jr js jt it ju jv jw ix jx jy jz ka bi translated">组</h2><p id="40e4" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">有时你需要同时显示或隐藏几个元素。为了支持这一点，约束布局增加了<strong class="ig hi">组</strong>。</p><p id="fced" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">组并没有给视图层次结构增加一个级别——它实际上只是一种标记视图的方式。在下面的例子中，我们标记了id <code class="du jc jd je jf b">profile</code>引用的<code class="du jc jd je jf b">profile_name</code>和<code class="du jc jd je jf b">profile_image</code>。</p><p id="566c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当有几个元素一起显示时，这很有用。</p><pre class="kb kc kd ke fd kf jf kg kh aw ki bi"><span id="c44a" class="jg jh hh jf b fi kj kk l kl km">&lt;android.support.constraint.Group<br/>    android:id="@+id/profile"<br/>    <strong class="jf hi">app:constraint_referenced_ids="profile_name,profile_image" </strong>/&gt;</span></pre><p id="42af" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦你定义了群组<code class="du jc jd je jf b">profile</code>，你就可以对群组应用可见性，它将同时应用于<code class="du jc jd je jf b">profile_name</code>和<code class="du jc jd je jf b">profile_image</code>。</p><pre class="kb kc kd ke fd kf jf kg kh aw ki bi"><span id="3a99" class="jg jh hh jf b fi kj kk l kl km">profile.visibility = GONE</span><span id="7a35" class="jg jh hh jf b fi mk kk l kl km">profile.visibility = VISIBLE</span></pre><h2 id="0213" class="jg jh hh bd ji jj jk jl jm jn jo jp jq ip jr js jt it ju jv jw ix jx jy jz ka bi translated">循环约束</h2><p id="152a" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">在约束布局中，大多数约束是由屏幕尺寸(水平和垂直)指定的。在约束布局1.1中，有一种新的约束类型，<code class="du jc jd je jf b">constraintCircle</code>，允许你沿着一个圆指定约束。您可以指定圆的角度和半径，而不是提供水平和垂直边距。这对于像放射式菜单那样有角度偏移的视图很有用！</p><figure class="kb kc kd ke fd lk er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lj"><img src="../Images/9da0024de7675eafb101f7a9a0106571.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dkCMb35o4HN7SVX8S1N3ig.gif"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">You can create radial menus by specifying a <strong class="bd ji">radius</strong> and <strong class="bd ji">angle</strong> to offset.</figcaption></figure><p id="9f5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建圆形约束时，请注意，角度从顶部开始，顺时针前进。在本例中，您将如何指定中间fab:</p><pre class="kb kc kd ke fd kf jf kg kh aw ki bi"><span id="204e" class="jg jh hh jf b fi kj kk l kl km">&lt;android.support.design.widget.FloatingActionButton<br/>    android:id="@+id/middle_expanded_fab"<br/><strong class="jf hi">    app:layout_constraintCircle="@+id/fab"<br/>    app:layout_constraintCircleRadius="50dp"<br/>    app:layout_constraintCircleAngle="315" </strong>/&gt;</span></pre><h2 id="a98a" class="jg jh hh bd ji jj jk jl jm jn jo jp jq ip jr js jt it ju jv jw ix jx jy jz ka bi translated">带约束集的动画</h2><p id="928a" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">你可以使用约束布局和<code class="du jc jd je jf b"><a class="ae ml" href="https://developer.android.com/reference/android/support/constraint/ConstraintSet.html" rel="noopener ugc nofollow" target="_blank">ConstraintSet</a></code>一次激活几个元素。</p><p id="d21b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一个<code class="du jc jd je jf b">ConstraintSet</code>只包含一个<code class="du jc jd je jf b">ConstraintLayout</code>的约束。您可以在代码中创建一个<code class="du jc jd je jf b">ConstraintSet</code>，或者从布局文件中加载它。然后您可以将一个<code class="du jc jd je jf b">ConstraintSet</code>应用到一个<code class="du jc jd je jf b">ConstraintLayout</code>，更新所有约束以匹配<code class="du jc jd je jf b">ConstraintSet</code>中的内容。</p><p id="7313" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要制作动画，使用支持库中的<code class="du jc jd je jf b"><a class="ae ml" href="https://developer.android.com/reference/android/transition/TransitionManager.html#beginDelayedTransition(android.view.ViewGroup)" rel="noopener ugc nofollow" target="_blank">TransitionManager.beginDelayedTransition()</a></code>。此功能将使您的<code class="du jc jd je jf b">ConstraintSet</code>中的所有布局更改变为动画。</p><p id="f746" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里有一段视频更深入地讲述了这个话题:</p><figure class="kb kc kd ke fd lk"><div class="bz dy l di"><div class="mm mn l"/></div></figure><h2 id="d5d8" class="jg jh hh bd ji jj jk jl jm jn jo jp jq ip jr js jt it ju jv jw ix jx jy jz ka bi translated">新的优化</h2><p id="e0be" class="pw-post-body-paragraph ie if hh ig b ih le ij ik il lf in io ip lg ir is it lh iv iw ix li iz ja jb ha bi translated">约束布局1.1增加了几个新的优化来加快你的布局。优化作为一个单独的过程运行，并试图减少布局视图所需的约束数量。</p><p id="407b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一般来说，它们的工作原理是在你的布局中找到常数并简化它们。</p><p id="6b02" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有一个新标签，叫做<code class="du jc jd je jf b">layout_optimizationLevel</code>，它配置优化级别。它可以设置为以下内容:</p><ul class=""><li id="708c" class="lw lx hh ig b ih ii il im ip ly it lz ix ma jb mb mc md me bi translated"><strong class="ig hi">障碍</strong>找出障碍所在，并用更简单的约束代替它们</li><li id="2859" class="lw lx hh ig b ih mf il mg ip mh it mi ix mj jb mb mc md me bi translated"><strong class="ig hi"> direct </strong>优化直接连接到固定元素的元素，例如屏幕或指引线的侧面，并继续优化直接连接到它们的任何元素</li><li id="307e" class="lw lx hh ig b ih mf il mg ip mh it mi ix mj jb mb mc md me bi translated"><strong class="ig hi">标准</strong>是默认优化级别，包括<strong class="ig hi">障碍</strong>和<strong class="ig hi">直接</strong></li><li id="3be0" class="lw lx hh ig b ih mf il mg ip mh it mi ix mj jb mb mc md me bi translated"><strong class="ig hi">尺寸</strong>目前处于试验阶段，可能会导致某些布局出现问题——它通过计算尺寸来优化布局路径</li><li id="4843" class="lw lx hh ig b ih mf il mg ip mh it mi ix mj jb mb mc md me bi translated"><strong class="ig hi">链</strong>目前是实验性的，并且弄清楚如何以固定的大小来布置元素链</li></ul><p id="d37e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您想尝试实验性优化<strong class="ig hi">尺寸</strong>和<strong class="ig hi">链</strong>，您可以在ConstraintLayout上启用它们</p><pre class="kb kc kd ke fd kf jf kg kh aw ki bi"><span id="8b20" class="jg jh hh jf b fi kj kk l kl km">&lt;android.support.constraint.ConstraintLayout <br/>    <strong class="jf hi">app:layout_optimizationLevel="standard|dimensions|chains"</strong></span></pre><h1 id="b410" class="kn jh hh bd ji ko kp kq jm kr ks kt jq ku kv kw jt kx ky kz jw la lb lc jz ld bi translated">了解更多信息</h1><div class="mo mp ez fb mq mr"><a href="https://developer.android.com/training/constraint-layout/index.html" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab dw"><div class="mt ab mu cl cj mv"><h2 class="bd hi fi z dy mw ea eb mx ed ef hg bi translated">使用ConstraintLayout | Android开发人员构建响应式用户界面</h2><div class="my l"><h3 class="bd b fi z dy mw ea eb mx ed ef dx translated">ConstraintLayout在与Android 2.3 (API level 9)及更高版本兼容的API库中可用。这一页…</h3></div><div class="mz l"><p class="bd b fp z dy mw ea eb mx ed ef dx translated">developer.android.com</p></div></div><div class="na l"><div class="nb l nc nd ne na nf lp mr"/></div></div></a></div><div class="mo mp ez fb mq mr"><a href="https://developer.android.com/reference/android/support/constraint/ConstraintLayout.html" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab dw"><div class="mt ab mu cl cj mv"><h2 class="bd hi fi z dy mw ea eb mx ed ef hg bi translated">ConstraintLayout | Android开发者</h2><div class="my l"><h3 class="bd b fi z dy mw ea eb mx ed ef dx translated">相对定位是在ConstraintLayout中创建布局的基本构件之一。那些限制…</h3></div><div class="mz l"><p class="bd b fp z dy mw ea eb mx ed ef dx translated">developer.android.com</p></div></div><div class="na l"><div class="ng l nc nd ne na nf lp mr"/></div></div></a></div><div class="mo mp ez fb mq mr"><a href="https://codelabs.developers.google.com/codelabs/constraint-layout/" rel="noopener  ugc nofollow" target="_blank"><div class="ms ab dw"><div class="mt ab mu cl cj mv"><h2 class="bd hi fi z dy mw ea eb mx ed ef hg bi translated">使用ConstraintLayout设计您的Android视图</h2><div class="my l"><h3 class="bd b fi z dy mw ea eb mx ed ef dx translated">在这个代码实验室中，你将学习如何使用Android Studio布局编辑器和constraint Layout——一种新的布局类型…</h3></div><div class="mz l"><p class="bd b fp z dy mw ea eb mx ed ef dx translated">codelabs.developers.google.com</p></div></div><div class="na l"><div class="nh l nc nd ne na nf lp mr"/></div></div></a></div><p id="0b6e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要了解更多关于约束布局1.1的内容，请查看文档和代码实验室！</p></div></div>    
</body>
</html>