<html>
<head>
<title>Ansible Tutorial — Learn How To Write Playbooks With Hands-On</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Ansible教程—学习如何动手编写行动手册</h1>
<blockquote>原文：<a href="https://medium.com/edureka/ansible-tutorial-9a6794a49b23?source=collection_archive---------0-----------------------#2016-12-12">https://medium.com/edureka/ansible-tutorial-9a6794a49b23?source=collection_archive---------0-----------------------#2016-12-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/e42adb717f452c8694b7539458a5d29f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*XChU2ySBpCEUpuCZw7bXeQ.png"/></div><figcaption class="il im et er es in io bd b be z dx">Ansible Tutorial — Edureka</figcaption></figure><p id="32de" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Ansible是一个开源的IT配置管理、部署和编排工具。该工具旨在为各种自动化挑战提供巨大的生产力增益。在这篇关于Ansible教程的博客中，你将学到以下内容:</p><ul class=""><li id="e543" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">你将学会写剧本</li><li id="b356" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">您将了解Ansible中的不同模块</li><li id="40fe" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">您将学习编写临时命令</li><li id="ec49" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">Ansible实践</li></ul><p id="10a1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了更好的理解Ansible，你可以看看这个视频。</p><h1 id="863f" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">编写可翻译的剧本</h1><p id="9b3d" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">Ansible中的剧本是以YAML格式编写的。它是一种人类可读的数据序列化语言。它通常用于配置文件。它还可以用于存储数据的许多应用中。</p><p id="a24b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于Ansible来说，几乎每个YAML文件都是以列表开始的。列表中的每一项都是一个键/值对列表，通常称为“哈希”或“字典”。所以，我们需要知道如何在YAML写列表和字典。</p><p id="8c68" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">列表的所有成员都是以“-”(破折号和空格)开始的相同缩进级别的行。更复杂的数据结构是可能的，例如字典列表或混合字典，其值是列表或两者的混合。</p><p id="b9d4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">例如，有关edureka省的列表:</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="0bc8" class="ln kc hh lj b fi lo lp l lq lr">departments: - marketing - sales - solutions - content writing - support - product</span></pre><p id="faad" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在让我给你举一个字典的例子:</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="abe9" class="ln kc hh lj b fi lo lp l lq lr">-USA -continent: North America -capital: Washington DC -population: 319 million</span></pre><h1 id="1b2a" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">主机和用户:</h1><p id="21e9" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">对于行动手册中的每个行动，您可以选择将基础架构中的哪些机器作为目标，以及由哪个远程用户来完成任务。为了将主机包括在可分析的清单中，我们将使用主机的IP地址。</p><p id="67cd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">通常，主机是由冒号分隔的一个或多个组或主机模式的列表。远程用户只是用户帐户的名称。</p><h1 id="d1b4" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">变量:</h1><p id="6b43" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">Ansible使用之前定义的变量，以便在剧本和角色中实现更大的灵活性。它们可用于遍历一组给定值，访问各种信息，如系统的主机名，以及用特定值替换模板中的某些字符串。</p><p id="a144" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Ansible已经为每个系统定义了丰富的变量。每当Ansible在一个系统上运行时，所有关于该系统的事实和信息都会被收集起来并设置为变量。</p><p id="4cf9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">但是命名变量有一个<em class="ls">规则</em>。<strong class="ir hi"> <em class="ls">变量名应该是字母、数字和下划线。变量应该总是以字母</em> </strong> <em class="ls">开头。</em>例如wamp_21，port5是有效的变量名，而01_port，_server是无效的。</p><h1 id="6e5a" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">任务:</h1><p id="30a0" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">任务允许您将配置策略分解成更小的文件。该任务包括从其他文件中提取。Ansible中的任务和它的英文意思差不多。</p><p id="f25f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">例如:</strong>安装&lt;包名&gt;，更新&lt;软件名&gt;等。</p><h1 id="5e15" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">经手人:</h1><p id="c7c3" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">处理程序就像Ansible playbook中的常规任务一样，但是只有当任务包含notify指令并指示它更改了某些内容时才会运行。例如，如果配置文件被改变，那么引用该配置文件的任务可以通知服务重启处理程序。</p><p id="4535" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我给你一个剧本的例子，它将启动Apache httpd服务器程序:</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="ae4b" class="ln kc hh lj b fi lo lp l lq lr">---<br/>- hosts: webservers<br/>  vars:<br/>    http_port: 80<br/>    max_clients: 200<br/>  remote_user: root<br/>  tasks:<br/>  - name: ensure apache is at the latest version<br/>    yum: name=httpd state=latest<br/>  - name: write the apache config file<br/>    template: src=/srv/httpd.j2 dest=/etc/httpd.conf<br/>    notify:<br/>    - restart apache<br/>  - name: ensure apache is running (and enable it at boot)<br/>    service: name=httpd state=started enabled=yes<br/>  handlers:<br/>    - name: restart apache<br/>      service: name=httpd state=restarted</span></pre><p id="e5a2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我希望这个例子能够让您理解我上面提到的剧本组件的所有描述。如果你仍然不清楚，不要担心，你所有的疑问都会在本博客的后面部分得到解答。</p><p id="5863" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这都是关于剧本的。你将要写的剧本。但是Ansible也为您提供了大量的模块，您可以使用这些模块。</p><h1 id="3eea" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">模块</h1><p id="7c17" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">Ansible中的模是幂等的。从RESTful服务的角度来看，为了使操作(或服务调用)是等幂的，客户端可以重复进行相同的调用，同时产生相同的结果。换句话说，发出多个相同的请求与发出一个请求具有相同的效果。</p><p id="4152" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Ansible中有不同类型的模块</p><ul class=""><li id="6074" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">核心模块</li><li id="c729" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">附加模块</li></ul><h1 id="33a6" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">核心模块</h1><p id="695e" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">这些都是Ansible核心团队维护的模块，并且将一直与Ansible一起发布。与“额外”回购中的请求相比，他们在所有请求中也会获得稍高的优先级。</p><p id="84cb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这些模块的源代码由Ansible托管在Ansible-modules-core中的GitHub上。</p><h1 id="c8f6" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">附加模块</h1><p id="59f9" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">这些模块目前随Ansible一起提供，但将来可能会单独提供。它们也主要由Ansible社区维护。非核心模块仍然完全可用，但对于问题和拉取请求的响应率可能会稍低。</p><p id="89bf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">随着时间的推移，受欢迎的“额外”模块可能会提升为核心模块。</p><p id="27b8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这些模块的源代码由Ansible托管在GitHub上的Ansible-modules-extras中。</p><p id="fb4a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">例如:远程管理模块中的一个额外模块是ipmi_power模块，它是远程机器的电源管理器。它需要python 2.6或更高版本和pyghmi才能运行。</p><p id="40b0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以通过编写一个类似下面这样的特别命令来使用这个模块:</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="beb3" class="ln kc hh lj b fi lo lp l lq lr">ipmi_power : name ="test.domain.com" user="localhost" password="xyz" state="on"</span></pre><h1 id="0fd4" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">返回值</h1><p id="2aab" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">Ansible模块通常返回一个可以注册到变量中的数据结构，或者当Ansible程序输出时可以直接看到。每个模块可以有选择地记录自己唯一的返回值。</p><p id="0ddb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">返回值的一些例子是:</p><ul class=""><li id="dfd6" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">changed:每当任务发生任何更改时，返回一个布尔值。</li><li id="c55a" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">失败:如果任务失败，则返回一个布尔值</li><li id="77cc" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">msg:它返回一个字符串，其中包含传递给用户的一般消息。</li></ul><h1 id="309e" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">即席命令</h1><p id="4666" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">即席命令是执行某些操作的简单的单行命令。使用Ansible命令运行模块是临时命令。</p><p id="7ff9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">例如:</p><pre class="le lf lg lh fd li lj lk ll aw lm bi"><span id="6cf4" class="ln kc hh lj b fi lo lp l lq lr">ansible host -m netscaler -a "nsc_host=nsc.example.com user=apiuser password=apipass"</span></pre><p id="04b2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上面的即席命令使用netscaler模块来禁用服务器。Ansible提供了数百个模块，您可以从中引用和编写即席命令。</p><p id="255d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">好了，理论解释的够多了，让我用实际行动来解释一下。</p><h1 id="0351" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">把手放在某物或者某人身上</h1><p id="83d5" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">我将编写一个剧本，在我的节点/主机上安装Nginx。</p><p id="711b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们开始吧:)</p><p id="c03a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">步骤1: </strong>使用SSH连接到您的主机。为此，您需要生成一个公共SSH密钥。</p><p id="1746" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用下面的命令:</p><p id="dfe8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">宋承宪-基根</strong></p><figure class="le lf lg lh fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es lt"><img src="../Images/fe338a6edb36b9830022c551158bac06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TGsqhH2xIM0gD-ty9Z7KKg.png"/></div></div></figure><p id="c3ad" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">正如您在上面的快照中看到的，命令<strong class="ir hi"> ssh-keygen </strong>生成了一个公共ssh密钥。</p><p id="bff2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">步骤2: 您的下一个任务是在您的主机上复制公共SSH密钥。为此，请使用下面的命令:</p><p id="b3e8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> ssh-copy-id -i root@ &lt;您的主机的IP地址&gt; </strong></p><figure class="le lf lg lh fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ly"><img src="../Images/02b430dbf36e420190d32f12977b484f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xiTmbrYWycdiHxTEDdMJzQ.png"/></div></div></figure><p id="88b4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上面的快照显示了被拷贝到主机的SSH密钥。</p><p id="5dab" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">步骤3: </strong>在清单中列出主机/节点的IP地址。</p><p id="e2cc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用以下命令:</p><p id="65be" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> vi /etc/ansible/hosts </strong></p><figure class="le lf lg lh fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es lz"><img src="../Images/55b2a3c6cb012446907c3248204893bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G_p8yKCvymj3T3rlsgT5jw.png"/></div></div></figure><p id="4725" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这将打开一个vi编辑器，您可以在其中列出主机的IP地址。这是现在你的库存。</p><p id="4239" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">步骤4: </strong>让我们ping一下，确保已经建立了连接。</p><figure class="le lf lg lh fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ly"><img src="../Images/ec0ff07f35a171ab8ce81ea3da4a6706.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BXloS8R6YWgMH9TNm4LX1w.png"/></div></div></figure><p id="cf0a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上面的快照确认了您的控制机器和主机之间已经建立了连接。</p><p id="7419" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">步骤5: </strong>现在让我们写一个剧本，在主机上安装Nginx。您可以在vi编辑器中编写您的剧本。为此，只需使用以下命令创建您的行动手册:</p><p id="acc9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> vi &lt;您的文件名&gt;。yml </strong></p><p id="b70b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">下面的快照显示了我用YAML格式写的安装Nginx的剧本。</p><figure class="le lf lg lh fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ly"><img src="../Images/ba3906e23939b29b6798aa1c6b36d072.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wBlJFTtr0QhxSW97gwIQmQ.png"/></div></div></figure><p id="8df2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在YAML，剧本的任务被定义为一系列字典，从上到下执行。如果我们有几台主机，那么在转移到下一台主机之前，每个任务都要在每台主机上尝试。每个任务都被定义为一个字典，可以有几个键，比如“name”或“sudo ”,它们表示任务的名称以及它是否需要sudo特权。</p><p id="e8e7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">设置一个变量<strong class="ir hi"> <em class="ls"> server_port </em> </strong>监听TCP端口<strong class="ir hi"> 8080 </strong>上的传入请求。</p><p id="2670" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里，第一个任务是获得安装Nginx所必需的包，然后安装它。在内部，Ansible将检查目录是否存在，如果不存在就创建它，否则什么也不做。</p><p id="97db" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">下一个任务是配置Nginx。在Nginx中，上下文包含配置细节。</p><p id="a0f3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里，模板是一个可以在主机上部署的文件。然而，模板文件也包括一些参考变量，这些变量是从定义为可翻译剧本的一部分的变量或从主机收集的事实中提取的。包含配置细节的事实被从源目录中取出，并被复制到目标目录中。</p><p id="ee85" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里的处理程序定义了只有在任务或状态改变时才执行的操作。在本行动手册中，我们定义了notify: restart Nginx处理程序，它将在文件和模板复制到主机后重启Nginx。</p><p id="6db3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，保存文件并退出。</p><p id="5fca" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">第6步:</strong>现在让我们使用下面的命令运行这个行动手册:</p><p id="6183" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> ansible-playbook &lt;你的文件名&gt;。yml </strong></p><figure class="le lf lg lh fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ly"><img src="../Images/1a87e65fd4a6e3672c458067cda0a5fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dbmEZvaTIoqzb7fNGXi_jg.png"/></div></div></figure><p id="033d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们可以在上面的截图中看到，我们的任务正在执行；正在安装Nginx。</p><p id="93a0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">第七步:</strong>让我们检查一下我的主机上是否安装了Nginx。使用下面的命令:</p><p id="a596" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> ps waux | grep nginx </strong></p><figure class="le lf lg lh fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ma"><img src="../Images/a7b1bdafa50d49c1679085fe91dbdc4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z7e-8lfRew07jWpjccTsHw.png"/></div></div></figure><p id="d5a3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以在上面的截图中看到，不同的进程ids 3555和103316正在运行，这确保了Nginx在您的主机上运行。</p><p id="f380" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">恭喜你！</strong>您已经使用Ansible行动手册在您的主机上成功部署了Nginx。我希望你喜欢阅读这个Ansible教程博客。</p><p id="b7a3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你想查看更多关于人工智能、Python、道德黑客等市场最热门技术的文章，那么你可以参考<a class="ae mb" href="https://www.edureka.co/blog/?utm_source=medium&amp;utm_medium=content-link&amp;utm_campaign=ansible-tutorial" rel="noopener ugc nofollow" target="_blank"> Edureka的官方网站。</a></p><p id="27e8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请留意本系列中的其他文章，它们将解释DevOps的各个方面。</p><blockquote class="mc md me"><p id="12a1" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 1。</em> <a class="ae mb" rel="noopener" href="/edureka/devops-tutorial-89363dac9d3f"> <em class="hh"> DevOps教程</em> </a></p><p id="afba" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 2。</em> <a class="ae mb" rel="noopener" href="/edureka/git-tutorial-da652b566ece"> <em class="hh">饭桶教程</em> </a></p><p id="d36b" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 3。</em> <a class="ae mb" rel="noopener" href="/edureka/jenkins-tutorial-68110a2b4bb3"> <em class="hh">詹金斯教程</em> </a></p><p id="e500" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 4。</em> <a class="ae mb" rel="noopener" href="/edureka/docker-tutorial-9a6a6140d917"> <em class="hh"> Docker教程</em> </a></p><p id="bdbb" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 5。</em> <a class="ae mb" rel="noopener" href="/edureka/puppet-tutorial-848861e45cc2"> <em class="hh">木偶教程</em> </a></p><p id="8d48" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 6。</em> <a class="ae mb" rel="noopener" href="/edureka/chef-tutorial-8205607f4564"> <em class="hh">厨师教程</em> </a></p><p id="b6bb" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 7。</em> <a class="ae mb" rel="noopener" href="/edureka/nagios-tutorial-e63e2a744cc8"> <em class="hh"> Nagios教程</em> </a></p><p id="fb1f" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 8。</em> <a class="ae mb" rel="noopener" href="/edureka/devops-tools-56e7d68994af"> <em class="hh">如何编排DevOps工具？</em>T59】</a></p><p id="60db" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 9。</em> <a class="ae mb" rel="noopener" href="/edureka/continuous-delivery-5ca2358aedd8"> <em class="hh">连续交货</em> </a></p><p id="b6c6" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 10。</em> <a class="ae mb" rel="noopener" href="/edureka/continuous-integration-615325cfeeac"> <em class="hh">持续集成</em> </a></p><p id="db01" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 11。</em> <a class="ae mb" rel="noopener" href="/edureka/continuous-deployment-b03df3e3c44c"> <em class="hh">连续部署</em> </a></p><p id="8961" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 12。</em> <a class="ae mb" rel="noopener" href="/edureka/continuous-delivery-vs-continuous-deployment-5375642865a"> <em class="hh">持续交付vs持续部署</em> </a></p><p id="5fd0" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">13。 <a class="ae mb" rel="noopener" href="/edureka/ci-cd-pipeline-5508227b19ca"> <em class="hh"> CI CD管道</em> </a></p><p id="3bbf" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">14。 <a class="ae mb" rel="noopener" href="/edureka/docker-compose-containerizing-mean-stack-application-e4516a3c8c89"> <em class="hh"> Docker撰写</em> </a></p><p id="10aa" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 15。</em> <a class="ae mb" rel="noopener" href="/edureka/docker-swarm-cluster-of-docker-engines-for-high-availability-40d9662a8df1"> <em class="hh">码头工人群</em> </a></p><p id="f059" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 16。</em> <a class="ae mb" rel="noopener" href="/edureka/docker-networking-1a7d65e89013"> <em class="hh">码头工人联网</em> </a></p><p id="9c63" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">17。 <a class="ae mb" rel="noopener" href="/edureka/ansible-roles-78d48578aca1"> <em class="hh">可变角色</em> </a></p><p id="cc40" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">18。<a class="ae mb" rel="noopener" href="/edureka/ansible-vault-secure-secrets-f5c322779c77"><em class="hh"/></a></p><p id="d961" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">19。 <a class="ae mb" rel="noopener" href="/edureka/ansible-for-aws-provision-ec2-instance-9308b49daed9"> <em class="hh">适用于AWS </em> </a></p><p id="5acb" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 20。</em> <a class="ae mb" rel="noopener" href="/edureka/jenkins-pipeline-tutorial-continuous-delivery-75a86936bc92"> <em class="hh">詹金斯管道</em> </a></p><p id="79d0" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 21。</em> <a class="ae mb" rel="noopener" href="/edureka/git-commands-with-example-7c5a555d14c"> <em class="hh">顶级Git命令</em> </a></p><p id="3b83" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 22。</em> <a class="ae mb" rel="noopener" href="/edureka/docker-commands-29f7551498a8"> <em class="hh">顶级Docker命令</em> </a></p><p id="49ea" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 23。</em><a class="ae mb" rel="noopener" href="/edureka/git-vs-github-67c511d09d3e"><em class="hh">Git vs GitHub</em></a></p><p id="8337" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 24。</em> <a class="ae mb" rel="noopener" href="/edureka/devops-interview-questions-e91a4e6ecbf3"> <em class="hh"> DevOps面试问题</em> </a></p><p id="d8a1" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 25。</em> <a class="ae mb" rel="noopener" href="/edureka/devops-engineer-role-481567822e06"> <em class="hh">谁是DevOps工程师？</em>T77】</a></p><p id="f809" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 26。</em> <a class="ae mb" rel="noopener" href="/edureka/devops-lifecycle-8412a213a654"> <em class="hh"> DevOps生命周期</em> </a></p><p id="46f4" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 27。</em><a class="ae mb" rel="noopener" href="/edureka/git-reflog-dc05158c1217"><em class="hh">Git Reflog</em></a></p><p id="8d7c" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 28。</em><a class="ae mb" rel="noopener" href="/edureka/ansible-provisioning-setting-up-lamp-stack-d8549b38dc59"><em class="hh"/></a></p><p id="b9b8" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 29。</em> <a class="ae mb" rel="noopener" href="/edureka/devops-skills-f6a7614ac1c7"> <em class="hh">组织寻找的顶尖DevOps技能</em> </a></p><p id="e47d" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh">三十。</em> <a class="ae mb" rel="noopener" href="/edureka/waterfall-vs-agile-991b14509fe8"> <em class="hh">瀑布vs敏捷</em> </a></p><p id="006e" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 31。</em> <a class="ae mb" rel="noopener" href="/edureka/maven-tutorial-2e87a4669faf"> <em class="hh"> Maven用于构建Java应用</em> </a></p><p id="9b32" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">32。 <a class="ae mb" rel="noopener" href="/edureka/jenkins-cheat-sheet-e0f7e25558a3"> <em class="hh">詹金斯</em> </a></p><p id="86bc" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">33。<a class="ae mb" rel="noopener" href="/edureka/ansible-cheat-sheet-guide-5fe615ad65c0"><em class="hh"/></a></p><p id="a28f" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">34。 <a class="ae mb" rel="noopener" href="/edureka/ansible-interview-questions-adf8750be54"> <em class="hh">可答面试问答</em> </a></p><p id="c40f" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 35。</em> <a class="ae mb" rel="noopener" href="/edureka/docker-interview-questions-da0010bedb75"> <em class="hh"> 50码头工人面试问题</em> </a></p><p id="0d78" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">36。 <a class="ae mb" rel="noopener" href="/edureka/what-is-agile-methodology-fe8ad9f0da2f"> <em class="hh">敏捷方法论</em> </a></p><p id="b83a" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">37。 <a class="ae mb" rel="noopener" href="/edureka/jenkins-interview-questions-7bb54bc8c679"> <em class="hh">詹金斯面试问题</em> </a></p><p id="0949" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">38。 <a class="ae mb" rel="noopener" href="/edureka/git-interview-questions-32fb0f618565"> <em class="hh"> Git面试问题</em> </a></p><p id="62a6" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 30。</em> <a class="ae mb" rel="noopener" href="/edureka/docker-architecture-be79628e076e"> <em class="hh"> Docker架构</em> </a></p><p id="057a" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">40。<a class="ae mb" rel="noopener" href="/edureka/linux-commands-in-devops-73b5a2bcd007"><em class="hh">devo PS中使用的Linux命令</em> </a></p><p id="ad1e" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated">41。 <a class="ae mb" rel="noopener" href="/edureka/jenkins-vs-bamboo-782c6b775cd5"> <em class="hh">詹金斯vs竹子</em> </a></p><p id="a0e1" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 42。</em> <a class="ae mb" rel="noopener" href="/edureka/nagios-interview-questions-f3719926cc67"> <em class="hh"> Nagios面试问题</em> </a></p><p id="6c2e" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 43。</em> <a class="ae mb" rel="noopener" href="/edureka/jenkins-x-d87c0271af57"> <em class="hh"> DevOps实时场景</em> </a></p><p id="03f9" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 44。</em> <a class="ae mb" rel="noopener" href="/edureka/jenkins-vs-bamboo-782c6b775cd5"> <em class="hh">詹金斯和詹金斯X的区别</em> </a></p><p id="65a7" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 45。</em><a class="ae mb" rel="noopener" href="/edureka/docker-for-windows-ed971362c1ec"><em class="hh">Windows Docker</em></a></p><p id="fb1b" class="ip iq ls ir b is it iu iv iw ix iy iz mf jb jc jd mg jf jg jh mh jj jk jl jm ha bi translated"><em class="hh"> 46。</em><a class="ae mb" href="http://Git vs Github" rel="noopener ugc nofollow" target="_blank"><em class="hh">Git vs Github</em></a></p></blockquote></div></div>    
</body>
</html>