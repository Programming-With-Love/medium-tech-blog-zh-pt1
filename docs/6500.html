<html>
<head>
<title>How to Handling Bounced And Complaint Notification in AWS within 15 minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在15分钟内处理AWS中的退回和投诉通知</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/how-to-handling-bounced-and-complaint-notification-in-aws-within-15-minutes-827972207484?source=collection_archive---------0-----------------------#2018-08-14">https://medium.com/quick-code/how-to-handling-bounced-and-complaint-notification-in-aws-within-15-minutes-827972207484?source=collection_archive---------0-----------------------#2018-08-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/a6ae20bebdfa5535b4564d7354767f31.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uReszJlk3EqzLHNOAkxdFA.png"/></div></div></figure><h1 id="5137" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">介绍</h1><p id="1510" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated"><strong class="jp hi">电子邮件营销</strong>对于与客户建立关系非常重要。我一直在做一个邀请项目，用户和我们的营销部门可以跟踪退回的电子邮件。</p><p id="d91b" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">让我们开始基于AWS构建一个生产就绪的<strong class="jp hi">电子邮件退回跟踪</strong>系统。</p><h1 id="94a0" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">在本文中，您将了解以下内容:</h1><ul class=""><li id="6d8f" class="kq kr hh jp b jq jr ju jv jy ks kc kt kg ku kk kv kw kx ky bi translated">在AWS上使用简单通知服务(SNS)设置简单电子邮件服务(SES)</li><li id="7928" class="kq kr hh jp b jq kz ju la jy lb kc lc kg ld kk kv kw kx ky bi translated">AWS电子邮件发送流程</li><li id="9636" class="kq kr hh jp b jq kz ju la jy lb kc lc kg ld kk kv kw kx ky bi translated">…或者超出您的预期？</li></ul><h1 id="007d" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">发送过程概述</h1><p id="c776" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">下图描述了当你用<a class="ae le" href="https://docs.aws.amazon.com/ses/latest/DeveloperGuide/sending-email-with-ses.html" rel="noopener ugc nofollow" target="_blank">亚马逊SES </a>发邮件时会发生什么。</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/e3807a1e1f86ff6fa35daace4a374f29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_bsE6eQXWAN0GCcUlgZOXg.png"/></div></div></figure><p id="800f" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">如果发件人对SES的请求成功，则SES会发送电子邮件，并出现以下结果之一:</p><ul class=""><li id="c276" class="kq kr hh jp b jq kl ju km jy lj kc lk kg ll kk kv kw kx ky bi translated"><strong class="jp hi">弹跳</strong></li><li id="899e" class="kq kr hh jp b jq kz ju la jy lb kc lc kg ld kk kv kw kx ky bi translated"><strong class="jp hi">投诉</strong></li><li id="a061" class="kq kr hh jp b jq kz ju la jy lb kc lc kg ld kk kv kw kx ky bi translated"><strong class="jp hi">成功</strong></li></ul><h2 id="804b" class="lm iq hh bd ir ln lo lp iv lq lr ls iz jy lt lu jd kc lv lw jh kg lx ly jl lz bi translated"><strong class="ak"> <em class="ma"> SNS提供了一种</em> </strong>处理退信和投诉通知的方式</h2><p id="4829" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">要接收发布到主题的通知，您必须为该主题订阅一个端点。端点是一个<strong class="jp hi">移动应用程序、网络服务器、电子邮件</strong>或<strong class="jp hi">亚马逊SQS队列</strong>，可以接收来自亚马逊社交网络的通知消息。</p><p id="0a1b" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">一旦您为端点订阅了某个主题并确认了订阅，端点将会收到发布到该主题的所有消息。通过<a class="ae le" href="https://blog.coursesity.com/best-aws-certifications/" rel="noopener ugc nofollow" target="_blank">最佳AWS课程&amp;认证</a>学习AWS。</p><h2 id="ddcf" class="lm iq hh bd ir ln lo lp iv lq lr ls iz jy lt lu jd kc lv lw jh kg lx ly jl lz bi translated">配置退回通知</h2><ol class=""><li id="85d1" class="kq kr hh jp b jq jr ju jv jy ks kc kt kg ku kk mb kw kx ky bi translated"><a class="ae le" href="https://docs.aws.amazon.com/ses/latest/DeveloperGuide/dashboardcreateSNStopic.html" rel="noopener ugc nofollow" target="_blank">创建一个名为<em class="mc">ses-bounds-topic</em></a>的亚马逊SNS话题。</li></ol><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es md"><img src="../Images/0c2915ca6001d2bdfc779a29f1ae94d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2YJe_67_FQGGDev6vx-GvQ.png"/></div></div></figure><p id="2114" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">然后你得到一个名为<strong class="jp hi"> ARN的身份id，</strong>你以后会需要它。</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es me"><img src="../Images/0e550b9ca2683e3b1f88b9caa54e6625.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AFoBu0miJjjkYhQSQPiO3Q.png"/></div></div></figure><p id="9fad" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">2.<a class="ae le" href="http://To subscribe to an SNS topic" rel="noopener ugc nofollow" target="_blank">配置亚马逊SNS主题发布到端点。</a></p><p id="ca07" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">2.1:使用刚刚创建的ARN创建订阅</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mf"><img src="../Images/ead679a036032cbcca7d4aa45fc3faca.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GC5qSaoGXUI2ebELBx0MaQ.png"/></div></div></figure><p id="fd73" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">当然，还没有完成…你必须<strong class="jp hi">从AWS SNS </strong>确认该端点。</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mg"><img src="../Images/6fe72d20c9e355d1e3ef4531bff034c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ovUUquJxG3g2KO1ohowKiQ.png"/></div></div></figure><p id="7b7a" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi"> AWS SNS </strong>会向您的端点发送一个<strong class="jp hi">订阅确认URL </strong>，然后您必须验证它。</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mh"><img src="../Images/d5528a0d8be47d4b051914c4c3d54341.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-OX7_Wtql6V5Gh15-Jy0TQ.png"/></div></div></figure><p id="edcd" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">3.<a class="ae le" href="https://docs.aws.amazon.com/ses/latest/DeveloperGuide/dashboardconfigureSESnotifications.html" rel="noopener ugc nofollow" target="_blank">使用<em class="mc">SES-bouncies-topic</em>配置Amazon SES发布退回通知。</a></p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mi"><img src="../Images/921e9f1ae5af013bf451b3b8f8588ad0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DELripLWhZAJ3jb4ALdWpA.png"/></div></div></figure><h1 id="1697" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">使用邮箱模拟器进行测试</h1><p id="eee7" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated"><a class="ae le" href="https://medium.com/p/827972207484/edit" rel="noopener">使用电子邮件模拟器<strong class="jp hi">:【bounce@simulator.amazonses.com T2】</strong></a></p><p id="2694" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">发送退回邮件后，您会收到以下消息</p><pre class="lf lg lh li fd mj mk ml mm aw mn bi"><span id="b82c" class="lm iq hh mk b fi mo mp l mq mr">{<br/>   "notificationType":"Bounce",<br/>   "bounce":{<br/>      "bounceType":"Permanent",<br/>      "bounceSubType":"General",<br/>      "bouncedRecipients":[<br/>         {<br/>            "emailAddress":"<a class="ae le" href="mailto:bounce@simulator.amazonses.com" rel="noopener ugc nofollow" target="_blank">bounce@simulator.amazonses.com</a>",<br/>            "action":"failed",<br/>            "status":"5.1.1",<br/>            "diagnosticCode":"smtp; 550 5.1.1 user unknown"<br/>         }<br/>      ],<br/>      "timestamp":"2017-09-05T02:30:25.645Z",<br/>      "feedbackId":"0101015e4fdfe031-818e3e45-3db7-4546-8bbf-6da232afc8e9-000000",<br/>      "remoteMtaIp":"207.171.163.188",<br/>      "reportingMTA":"dsn; a27-24.smtp-out.us-west-2.amazonses.com"<br/>   },<br/>   "mail":{<br/>      "timestamp":"2017-09-05T02:30:24.000Z",<br/>      "source":"<a class="ae le" href="mailto:bounce111@bookmarc.com.au" rel="noopener ugc nofollow" target="_blank">bounce111@eder.com.au</a>",<br/>      "sourceArn":"arn:aws:ses:us-west-2:154131996403:identity/eder.com",<br/>      "sourceIp":"54.240.230.242",<br/>      "sendingAccountId":"154131996403",<br/>      "messageId":"0101015e4fdfdb7f-a3dcaf07-8fb3-459f-9343-7859c0398c3f-000000",<br/>      "destination":[<br/>         "<a class="ae le" href="mailto:bounce@simulator.amazonses.com" rel="noopener ugc nofollow" target="_blank">bounce@simulator.amazonses.com</a>"<br/>      ],<br/>      "headersTruncated":false,<br/>      "headers":[<br/>         {<br/>            "name":"From",<br/>            "value":"<a class="ae le" href="mailto:bounce111@bookmarc.com.au" rel="noopener ugc nofollow" target="_blank">bounce111@eder.com.au</a>"<br/>         },<br/>         {<br/>            "name":"To",<br/>            "value":"<a class="ae le" href="mailto:bounce@simulator.amazonses.com" rel="noopener ugc nofollow" target="_blank">bounce@simulator.amazonses.com</a>"<br/>         },<br/>         {<br/>            "name":"Subject",<br/>            "value":"<a class="ae le" href="mailto:bounce@simulator.amazonses.com" rel="noopener ugc nofollow" target="_blank">bounce@simulator.amazonses.com</a>"<br/>         },<br/>         {<br/>            "name":"MIME-Version",<br/>            "value":"1.0"<br/>         },<br/>         {<br/>            "name":"Content-Type",<br/>            "value":"text/plain; charset=UTF-8"<br/>         },<br/>         {<br/>            "name":"Content-Transfer-Encoding",<br/>            "value":"7bit"<br/>         }<br/>      ],<br/>      "commonHeaders":{<br/>         "from":[<br/>            "<a class="ae le" href="mailto:bounce111@bookmarc.com.au" rel="noopener ugc nofollow" target="_blank">bounce111@eder.com.au</a>"<br/>         ],<br/>         "to":[<br/>            "<a class="ae le" href="mailto:bounce@simulator.amazonses.com" rel="noopener ugc nofollow" target="_blank">bounce@simulator.amazonses.com</a>"<br/>         ],<br/>         "subject":"<a class="ae le" href="mailto:bounce@simulator.amazonses.com" rel="noopener ugc nofollow" target="_blank">bounce@simulator.amazonses.com</a>"<br/>      }<br/>   }<br/>}</span></pre><h1 id="458c" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">收场白</h1><p id="10ad" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">仅此而已！很简单，对吧？</p><p id="0930" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">我已经研究了一段时间，以了解如何实现它们。</p><p id="55e5" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">我想和你分享我从真实项目中学到的东西。希望可以节省你的时间。</p><p id="db7b" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">感谢您的阅读:)</p><p id="67e7" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated"><strong class="jp hi">未完待续下一篇:</strong> <a class="ae le" rel="noopener" href="/@fanedercode/how-to-track-bounced-email-messages-after-user-sending-a-mail-4c79e96e8bf0"> <strong class="jp hi">用户使用Laravel </strong> </a>发送邮件后如何跟踪被退回的邮件</p></div></div>    
</body>
</html>