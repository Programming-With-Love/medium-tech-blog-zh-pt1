<html>
<head>
<title>Android Testing- Parte 1 (Arquitectura)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android 测试 - 第 1 部分 (架构)</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/android-testing-parte-1-arquitectura-8f062e8e5be?source=collection_archive---------0-----------------------#2016-09-20">https://medium.com/google-developer-experts/android-testing-parte-1-arquitectura-8f062e8e5be?source=collection_archive---------0-----------------------#2016-09-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="696f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在上一篇文章中,我谈到了如何使用Firebase崩溃报告,以便我们可以报告用户在应用程序发布到playstore后经常遇到的错误/异常。</p><p id="bcd3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">尽管这个工具提供了强大的功能,但如果我们的应用程序有多个错误和反复出现,用户将继续拥有糟糕的体验,而崩溃报告只会向我们展示我们是多么糟糕的程序员。</p><h1 id="8bef" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">如何确保应用程序的错误尽可能少?</h1><p id="08c8" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">确保应用程序的高质量和最少的错误只需要对其进行适当的测试。</p><p id="d8b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Android 具有 Android 测试支持库 (T3),它提供了在 Android 应用程序中执行单元测试和仪器测试所需的工具。</p><h2 id="41f3" class="kg je hh bd jf kh ki kj jj kk kl km jn ip kn ko jr it kp kq jv ix kr ks jz kt bi translated">单元测试 UnitTests</h2><p id="9239" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">单元测试(从现在开始的<em class="ku">单元测试(T5))是我们只关心测试代码的一小部分功能的测试,独立于其他现有函数。</em></p><p id="e05b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以我们设备中的计算器为例,我们可以使用T6单元测试来测试它可以独立执行的不同操作(相加,乘法,减法等)的功能。</p><h2 id="845d" class="kg je hh bd jf kh ki kj jj kk kl km jn ip kn ko jr it kp kq jv ix kr ks jz kt bi translated">T8 仪器测试(T9)</h2><p id="b93a" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">仪器测试(现在称为 <em class="ku"> 仪器测试 </em>) 允许我们测试图形界面组件在接收特定的用户交互时是否表现出预期。<strong class="ig hi">示例</strong>:我们可以编写测试来检查每次点击按钮时会发生什么,或者文本是否在其他类型的交互中正确传递给TextView,而不是运行应用程序并手动执行。</p><p id="f435" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">编写测试对于确保应用程序的良好质量非常重要,但更重要的是知道如何编写好的测试。因此,开发一个应用程序必须从编写测试开始,而不是仅仅因为有人(比如我)说它很好而在项目中做出决定。</p><p id="030e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您需要确保应用程序在编写任何代码行之前具有适当的坚实基础。</p><h2 id="848e" class="kg je hh bd jf kh ki kj jj kk kl km jn ip kn ko jr it kp kq jv ix kr ks jz kt bi translated">Android App的架构</h2><p id="f077" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">几年前,当我开始为Android开发应用程序时,我记得我一直在做的事情是打开eclipse,使用wizzard并创建一个新的项目,在这个项目中,由于我对Activities和Fragments的知识有限,我冒险编写饼和右边的代码,以便在UI中显示一些内容,并在与它交互时执行一些操作。<br/>如此天真,导致一些项目不是很糟糕,但有很多代码,复杂且极难维护,更不用说测试了。</p><p id="32f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了防止过去的许多“他们”被复制,并使开发人员的世界变得更好,已经创建了各种软件架构标准,以确保:</p><ul class=""><li id="e1ff" class="kv kw hh ig b ih ii il im ip kx it ky ix kz jb la lb lc ld bi translated">我们可以对软件的不同组件进行适当的责任分离。</li><li id="85f4" class="kv kw hh ig b ih le il lf ip lg it lh ix li jb la lb lc ld bi translated">我们有一个干净,易于维护的代码。</li><li id="3645" class="kv kw hh ig b ih le il lf ip lg it lh ix li jb la lb lc ld bi translated">我们有一个易于测试的代码。</li></ul><p id="2af5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有许多软件架构标准,如分层架构,Model-View-Controller(MVC),Model-View-Presenter(MVP),Model View View Model(MVVM)等。</p><p id="b121" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了撰写这些模式中的每一个,都需要专门的帖子,因此,在本文中,我们将只关注MVP。<br/><a class="ae jc" href="http://www.oreilly.com/programming/free/files/software-architecture-patterns.pdf" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">(链接到我发现有趣的电子书) </strong></a></p><h1 id="2abe" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">模型视图呈现器(MVP)</h1><p id="85cc" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">Model-View-Presenter(以下简称 MVP)是一种软件开发架构标准,它假设给定的软件具有三个不同的组件,包括:</p><h2 id="fd52" class="kg je hh bd jf kh ki kj jj kk kl km jn ip kn ko jr it kp kq jv ix kr ks jz kt bi translated">模型</h2><p id="5c50" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">模型负责数据的表示以及数据的读写机制。以一个简单的<em class="ku">电子商务应用程序</em>为例,我们将模型化为表示项目的类和写入或读取项目的数据存储库。(仓库=API,内部存储,文件等)。</p><h2 id="09e0" class="kg je hh bd jf kh ki kj jj kk kl km jn ip kn ko jr it kp kq jv ix kr ks jz kt bi translated">视图</h2><p id="8c55" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">顾名思义,视图是负责处理从图形界面向用户呈现信息的组件(绘制组件,在其他操作之间更新值)。</p><h2 id="4092" class="kg je hh bd jf kh ki kj jj kk kl km jn ip kn ko jr it kp kq jv ix kr ks jz kt bi translated"><strong class="ak">介绍(T12)</strong></h2><p id="965a" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">Presenter 是 View 和 Model 之间的中间组件。T13 其主要作用是确保从模型接收的信息在呈现给用户之前得到适当的处理,以及在用户输入信息存储在模型中之前的反向处理过程。</p><p id="7640" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过将 MVP 引入 Android,该标准使我们能够非常明确地分离 Fragment 和 Activities 等组件的行为限制,确保这些组件仅充当负责执行图形界面操作以向用户呈现信息的视图。</p><figure class="lk ll lm ln fd lo er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lj"><img src="../Images/b5cb12bc9411a32c34b9d9a6af4a6ea3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dcM2mP9uTUtIX4i5I1NUYw.png"/></div></div></figure><p id="cbf7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如上图所示,组件之间的通信是通过接口实现来实现的,该接口允许每个组件独立于其他组件实现,即 View 不知道 Presenter 是如何实现的,并且只要任何 Presenter 实现定义了与其通信合约的接口,它将继续按预期工作。</p><p id="4746" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有了这种非常清晰的角色分离,我们现在可以轻松地编写测试图形界面交互的仪器测试,这些测试与测试presenter功能的单元测试分离。</p><p id="f86d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过对Android测试和MVP的简短介绍,我们完成了另一篇文章,希望我能更详细地介绍并在下一篇文章中展示MVP架构的应用程序是什么样的!</p><p id="78e0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下次吃吧:)</p><p id="873f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">DM</p></div></div>    
</body>
</html>