<html>
<head>
<title>Rocking User Defined Reporting With Oracle SQL Developer</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Oracle SQL Developer摇摆用户定义的报表</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/rocking-user-defined-reporting-with-oracle-sql-developer-b941e67d716f?source=collection_archive---------1-----------------------#2020-01-24">https://medium.com/oracledevs/rocking-user-defined-reporting-with-oracle-sql-developer-b941e67d716f?source=collection_archive---------1-----------------------#2020-01-24</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/6155633e8e6c8a73cc6ecf447f974441.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*rkKbbRnk6dlYu_VPE_RufQ.jpeg"/></div></div></figure><p id="3ee7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">SQL Developer最好的特性之一是报告。内置报告只是查询字典和动态视图。此外，还有一个用户定义的报告功能。因此，现在任何人都可以使用定制的查询创建报告。</p><p id="55b5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">用户定义的报告使最好的SQL Developer特性变得更好。然而，关于如何设置用户定义的报告和正确构建查询的官方文档却很少。</p><p id="8dfe" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，在本文中，我将展示一些更有趣的报告，以及所需的查询结构，因为这很重要。如果没有结构正确的查询，报告将会失败。</p><p id="06da" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要创建用户定义的报告，只需选择“新建报告”:</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div class="er es jn"><img src="../Images/6d9a92658cb7c6aee6e6caac4f20ce63.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*ZvR7Dt2GLDjrZ3h6CK6QWg.jpeg"/></div></figure><p id="89db" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在那里，您可以选择“仪表”或“图表”:</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/fbdd4743186fe0ad5659d7d1afb09f71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XIceccUsjocEyax3pZws7Q.jpeg"/></div></div></figure><p id="8c11" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您选择“仪表”，那么您可以在“拨号”或“状态”之间进行选择:</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jt"><img src="../Images/5ca7fe8e149de0e0cc6bd54ab31a1afb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c60BimCp0R80Dwhj_gN45Q.jpeg"/></div></div></figure><p id="1ecb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">或者，如果您选择“图表”，那么您可以选择图表的类型:</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ju"><img src="../Images/d2f4e9eaab6db249f3d809e0515ab55f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OX5t35NRj06f1rKu1o7kJQ.jpeg"/></div></div></figure><p id="5cad" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">大多数图表要求定制的查询返回至少3列，分别代表:</p><ul class=""><li id="cbc5" class="jv jw hh ir b is it iw ix ja jx je jy ji jz jm ka kb kc kd bi translated">组列</li><li id="94cb" class="jv jw hh ir b is ke iw kf ja kg je kh ji ki jm ka kb kc kd bi translated">系列列</li><li id="ae9c" class="jv jw hh ir b is ke iw kf ja kg je kh ji ki jm ka kb kc kd bi translated">值列</li></ul><p id="6a5e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">不需要将列命名为group、series和value，因为用户定义的报表将假设这3列按照结果集中的特定顺序出现。</p></div><div class="ab cl kj kk go kl" role="separator"><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko kp"/><span class="km bw bk kn ko"/></div><div class="ha hb hc hd he"><p id="e49a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">首先，我们需要设置一个沙坑环境并安装示例模式。下面详细介绍了如何安装示例模式:</p><blockquote class="kq kr ks"><p id="05ad" class="ip iq kt ir b is it iu iv iw ix iy iz ku jb jc jd kv jf jg jh kw jj jk jl jm ha bi translated"><a class="ae kx" href="https://docs.oracle.com/en/database/oracle/oracle-database/19/comsc/installing-sample-schemas.html#GUID-1E645D09-F91F-4BA6-A286-57C5EC66321D" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en/database/Oracle/Oracle-database/19/comsc/installing-sample-schemas . html # GUID-1e 645d 09-F91F-4ba 6-A286-57 C5 EC 66321d</a></p></blockquote><p id="5332" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">示例模式中的一些表数据已经存在很多年了。无论如何，模式非常有用，查询仍然可以工作。</p><p id="3c08" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，让我们检查一些仪表状态仪表、刻度盘和图表。我还将展示驱动报告的查询。</p><h1 id="9d9a" class="ky kz hh bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">仪表状态指示器</h1><p id="d025" class="pw-post-body-paragraph ip iq hh ir b is lw iu iv iw lx iy iz ja ly jc jd je lz jg jh ji ma jk jl jm ha bi translated">对于结果集的每一行，这是一个简单的指示器。仪表的范围是从0到100，所以该值最好表示一个百分比。如果该值不是一个自然的百分比，那么将其标准化。例如乘以10。</p><pre class="jo jp jq jr fd mb mc md me aw mf bi"><span id="e698" class="mg kz hh mc b fi mh mi l mj mk">-- example query for demonstration purposes<br/>select<br/>  median ( rating )*10 product_median_rating_pct<br/>from   co.products, json_table (<br/>    product_details, '$.reviews[*]'<br/>    columns (<br/>      rating int path '$.rating'<br/>    )<br/>)<br/>where product_name like 'Women''s Skirt%'<br/>group by product_name<br/>order by product_name</span></pre><p id="7dea" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该查询返回一个单独的列，仪表状态表将假定该列代表该值。</p><p id="3eb4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">输出将为结果集的每一行显示一个计数器。对于所使用的查询，结果集中有2行，因此每行有一个计数器。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ml"><img src="../Images/9d8b8d8d4c72a3f7598aea4338fbb16e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cSXT1kmTGc89WHknH11pCw.jpeg"/></div></div><figcaption class="mm mn et er es mo mp bd b be z dx">Gauge Status</figcaption></figure><h1 id="e4ab" class="ky kz hh bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">仪表刻度盘</h1><p id="3c79" class="pw-post-body-paragraph ip iq hh ir b is lw iu iv iw lx iy iz ja ly jc jd je lz jg jh ji ma jk jl jm ha bi translated">与仪表状态指示器一样，仪表刻度盘是结果集每一行的简单指示器。</p><pre class="jo jp jq jr fd mb mc md me aw mf bi"><span id="3136" class="mg kz hh mc b fi mh mi l mj mk">-- example query for demonstration purposes<br/>select<br/>  product_median_rating,<br/>  0 minimum,<br/>  10 maximum,<br/>  product_lowest_rating,<br/>  product_highest_rating<br/>from<br/>(<br/>  select product_name, <br/>         median ( rating ) product_median_rating,<br/>         min ( rating ) product_lowest_rating,<br/>         max ( rating ) product_highest_rating<br/>  from   co.products, json_table (<br/>    product_details, '$.reviews[*]'<br/>    columns (<br/>      rating int path '$.rating'<br/>    )<br/>  )<br/>  where product_name like 'Women''s Skirt%'<br/>  group by product_name<br/>  order by product_name<br/>)</span></pre><p id="546d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">但是，我们现在有机会指出表盘的其他4个属性，这些属性也将显示出来。刻度盘的属性将是:</p><ul class=""><li id="6e81" class="jv jw hh ir b is it iw ix ja jx je jy ji jz jm ka kb kc kd bi translated">最低限度</li><li id="017e" class="jv jw hh ir b is ke iw kf ja kg je kh ji ki jm ka kb kc kd bi translated">最高的</li><li id="4ca7" class="jv jw hh ir b is ke iw kf ja kg je kh ji ki jm ka kb kc kd bi translated">低的</li><li id="9808" class="jv jw hh ir b is ke iw kf ja kg je kh ji ki jm ka kb kc kd bi translated">高的</li></ul><p id="eb83" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，查询总共必须返回5列，值为第1列。值列之后是4个属性列。</p><p id="1d6a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">结果集的每一行都有一个dial。因此2行的结果集将显示为2个刻度盘。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div class="er es mq"><img src="../Images/1dd6718133bff57759036af8c0798824.png" data-original-src="https://miro.medium.com/v2/resize:fit:612/format:webp/1*2rHCx7hwsObzSOOB6WM8CQ.jpeg"/></div><figcaption class="mm mn et er es mo mp bd b be z dx">Gauge Dial</figcaption></figure><h1 id="26fa" class="ky kz hh bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">折线图</h1><p id="eac6" class="pw-post-body-paragraph ip iq hh ir b is lw iu iv iw lx iy iz ja ly jc jd je lz jg jh ji ma jk jl jm ha bi translated">线状报告与您预期的一样，但是通过正确的查询，将在同一个图表上绘制多条线。</p><pre class="jo jp jq jr fd mb mc md me aw mf bi"><span id="b48e" class="mg kz hh mc b fi mh mi l mj mk">-- example query for demonstration purposes<br/>select TO_CHAR(TRUNC(o.order_datetime,'MM'), 'MON') month,  -- group<br/>       TO_CHAR(TRUNC(o.order_datetime,'YY'), 'YYYY') yr,  -- series<br/>       sum ( oi.quantity * oi.unit_price ) value_of_orders  -- value<br/>from   co.orders o<br/>join   co.order_items oi<br/>on     o.order_id = oi.order_id<br/>group by TRUNC(o.order_datetime,'YY'), TRUNC(o.order_datetime,'MM')<br/>order by TRUNC(o.order_datetime,'YY') DESC, TRUNC(o.order_datetime,'MM')</span></pre><p id="d44a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在查询中，第一列是组(即月)，第二列是系列(即年)，第三列是要绘制的值。</p><p id="8042" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，每年的值绘制如下。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mr"><img src="../Images/bb2d07c89c6a177d6f131f3b127d7c3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pOkSiUlRPc86MSHWPeAofw.jpeg"/></div></div><figcaption class="mm mn et er es mo mp bd b be z dx">Line</figcaption></figure><h1 id="ee88" class="ky kz hh bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">饼图</h1><p id="be69" class="pw-post-body-paragraph ip iq hh ir b is lw iu iv iw lx iy iz ja ly jc jd je lz jg jh ji ma jk jl jm ha bi translated">饼图报表非常简单，在演示中，将使用hr.employees表。</p><pre class="jo jp jq jr fd mb mc md me aw mf bi"><span id="9658" class="mg kz hh mc b fi mh mi l mj mk">-- example query for demonstration purposes<br/>select<br/>  null "employees",  -- group<br/>  DEPARTMENT_NAME,  -- series<br/>  count(*)      -- value<br/>from hr.employees e <br/>inner join hr.departments d <br/>on (e.department_id=d.department_id) <br/>group by department_name<br/>order by count(*)</span></pre><p id="25e0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">图表将遵循结果集的值列的顺序。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div class="er es ms"><img src="../Images/64699ef1ba6b14ce476ab974dede7bd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/1*e7D0Ckl6AvD710-kddzSoQ.jpeg"/></div><figcaption class="mm mn et er es mo mp bd b be z dx">Pie</figcaption></figure><h1 id="ac22" class="ky kz hh bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">带条形图的饼图</h1><p id="542a" class="pw-post-body-paragraph ip iq hh ir b is lw iu iv iw lx iy iz ja ly jc jd je lz jg jh ji ma jk jl jm ha bi translated">这个特殊的饼图报告将添加一个条形图，将饼图的最右边部分拆分成一个条形图。所以对于直饼图报告，结果集的顺序很重要。</p><p id="6049" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了列出最大的部分，查询需要对行进行排序，以确保饼图中最大的部分位于结果集的顶部。</p><pre class="jo jp jq jr fd mb mc md me aw mf bi"><span id="3dbe" class="mg kz hh mc b fi mh mi l mj mk">-- example query for demonstration purposes<br/>select<br/>  job_id,<br/>  department_name,<br/>  c,<br/>  SUM(c) OVER (PARTITION BY department_name) ct<br/>from<br/>(<br/>  select JOB_ID,      -- group<br/>    DEPARTMENT_NAME,  -- series<br/>    count(*) c        -- value<br/>  from hr.employees e <br/>  inner join hr.departments d <br/>  on (e.department_id=d.department_id) <br/>  group by department_name, job_id<br/>  order by count(*)<br/>)<br/>order by ct desc, department_name, c desc</span></pre><p id="5a81" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在查询中，将针对饼图报告的最大部分对组进行分类。</p><p id="dc8d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">下面的报告显示了shipping department拆分为条形，因为shipping department位于结果集的顶部。</p><p id="4cae" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">查询的前3行是装运部门，因为这是最大的部门。因此，装运部门的3行被分解为条的3个组成部分。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div class="er es mt"><img src="../Images/7cb38c572a23ef89d30abd489622c169.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*b1I4VJaJcPGDReNMHT5jDQ.jpeg"/></div><figcaption class="mm mn et er es mo mp bd b be z dx">Pie With Bar</figcaption></figure><h1 id="7149" class="ky kz hh bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">带横条的环形图</h1><p id="7b9a" class="pw-post-body-paragraph ip iq hh ir b is lw iu iv iw lx iy iz ja ly jc jd je lz jg jh ji ma jk jl jm ha bi translated">使用与带棒线的饼图相同的查询，我们可以尝试带棒线的环。</p><p id="fea6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">不同之处在于，值的总数(即106)由报告自动计算，并放在环的中心。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mu"><img src="../Images/049274a47244d87832c699f8a17ef2ef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*YPbM4laQyiB8a4Bl5O63oA.jpeg"/></div></div><figcaption class="mm mn et er es mo mp bd b be z dx">Ring With Bar</figcaption></figure><h1 id="b3e2" class="ky kz hh bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">垂直堆叠分割图</h1><p id="5721" class="pw-post-body-paragraph ip iq hh ir b is lw iu iv iw lx iy iz ja ly jc jd je lz jg jh ji ma jk jl jm ha bi translated">在这里，我们将按月演示垂直堆栈拆分报告。</p><pre class="jo jp jq jr fd mb mc md me aw mf bi"><span id="82db" class="mg kz hh mc b fi mh mi l mj mk">-- example query for demonstration purposes<br/>SELECT<br/>   TO_CHAR(TRUNC(time_id,'MM'), 'MON') month,  -- group<br/>   TO_CHAR(TRUNC(time_id,'YY'), 'YYYY') yr,  -- series<br/>   SUM(sales.amount_sold)  sold    -- value<br/>FROM sh.sales, sh.products, sh.customers, sh.countries<br/>WHERE sales.prod_id=products.prod_id<br/>   AND customers.country_id = countries.country_id <br/>   AND sales.cust_id=customers.cust_id <br/>GROUP BY TRUNC(time_id,'MM'), TRUNC(time_id,'YY')<br/>order by TRUNC(time_id,'MM'), TRUNC(time_id,'YY')</span></pre><p id="e81c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">查询的第一列是组，接下来是系列，然后是值。</p><p id="b82f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，该图是按月份划分的值的图表，这将使比较月份更容易，因为它们是并排的。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mv"><img src="../Images/16a737d4cd3c0886962a0807312f1b13.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bIUCAweJONCgGzUBUVPSRw.jpeg"/></div></div><figcaption class="mm mn et er es mo mp bd b be z dx">Vertical Stack Split (by month)</figcaption></figure><p id="5594" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">另一个图表是按年而不是按月来划分。按年拆分是修改查询的一个简单例子，因此年是组，月是系列。</p><pre class="jo jp jq jr fd mb mc md me aw mf bi"><span id="7618" class="mg kz hh mc b fi mh mi l mj mk">-- example query for demonstration purposes<br/>SELECT<br/>   TO_CHAR(TRUNC(time_id,'YY'), 'YYYY') yr,  -- group<br/>   TO_CHAR(TRUNC(time_id,'MM'), 'MON') month,  -- series<br/>   SUM(sales.amount_sold)  sold    -- value<br/>FROM <br/>..</span></pre><p id="fba1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该图现在按年份拆分，这使得比较每年的月份变得更加容易。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mw"><img src="../Images/b6c4835a655760bcd5842c04147c596c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*27-MroeQCVSMQMSKrYMoYA.jpeg"/></div></div><figcaption class="mm mn et er es mo mp bd b be z dx">Vertical Stack Split (by year)</figcaption></figure><h1 id="8131" class="ky kz hh bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">三维条形图</h1><p id="2c72" class="pw-post-body-paragraph ip iq hh ir b is lw iu iv iw lx iy iz ja ly jc jd je lz jg jh ji ma jk jl jm ha bi translated">重复使用与垂直堆栈拆分相同的查询，我们可以一起显示所有月份。</p><pre class="jo jp jq jr fd mb mc md me aw mf bi"><span id="57ac" class="mg kz hh mc b fi mh mi l mj mk">-- example query for demonstration purposes<br/>SELECT<br/>   TO_CHAR(TRUNC(time_id,'YY'), 'YYYY') yr,  -- group<br/>   TO_CHAR(TRUNC(time_id,'MM'), 'MON') month,  -- series<br/>   SUM(sales.amount_sold)  sold    -- value<br/>FROM sh.sales, sh.products, sh.customers, sh.countries<br/>WHERE sales.prod_id=products.prod_id<br/>   AND customers.country_id = countries.country_id <br/>   AND sales.cust_id=customers.cust_id <br/>GROUP BY TRUNC(time_id,'YY'), TRUNC(time_id,'MM')<br/>order by TRUNC(time_id,'YY'), TRUNC(time_id,'MM')</span></pre><p id="3e13" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">图表现在变成三维，如下所示。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mx"><img src="../Images/485b155c3b8dd859e209bd6c7f19c254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YJUUy3x4Jyy2MHaZ5gr5AQ.jpeg"/></div></div><figcaption class="mm mn et er es mo mp bd b be z dx">3D Bar</figcaption></figure><h1 id="5cb1" class="ky kz hh bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">漏斗图</h1><p id="239e" class="pw-post-body-paragraph ip iq hh ir b is lw iu iv iw lx iy iz ja ly jc jd je lz jg jh ji ma jk jl jm ha bi translated">当您需要将一系列组作为一个比率进行比较时，漏斗是理想的选择。</p><pre class="jo jp jq jr fd mb mc md me aw mf bi"><span id="6a95" class="mg kz hh mc b fi mh mi l mj mk">-- example query for demonstration purposes<br/>WITH base AS (<br/>  select   product_name, <br/>         median ( rating ) product_median_rating<br/>  from   co.products, json_table (<br/>    product_details, '$.reviews[*]'<br/>    columns (<br/>      rating int path '$.rating'<br/>    )<br/>  )<br/>  where product_name like 'Women%'<br/>  group by product_name<br/>)<br/>select<br/>  product_name,     -- group<br/>  1 series,<br/>  product_median_rating rate    --value<br/>from base<br/>UNION ALL<br/>select<br/>  product_name,     -- group<br/>  2 series,<br/>  10 rate           --value<br/>from base</span></pre><p id="a662" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上述查询的结果集前半部分由系列#1组成，后半部分由系列#2组成。</p><p id="d8af" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">漏斗将显示第一个系列相对于第二个系列的百分比。</p><figure class="jo jp jq jr fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es my"><img src="../Images/7a7cf23e281f0f096a670961f44401bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6L4tWRHsaOZ0EDWUo1bX2g.jpeg"/></div></div><figcaption class="mm mn et er es mo mp bd b be z dx">Funnel</figcaption></figure><p id="9688" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当然，有了Oracle SQL Developer，每个人都会有所收获。有关Oracle SQL Developer用户定义报表的更多信息，请访问:</p><blockquote class="kq kr ks"><p id="d106" class="ip iq kt ir b is it iu iv iw ix iy iz ku jb jc jd kv jf jg jh kw jj jk jl jm ha bi translated"><a class="ae kx" href="https://docs.oracle.com/en/database/oracle/sql-developer/19.4/rptug/sql-developer-concepts-usage.html#GUID-6B7E132D-779B-4EB7-8439-DBC4B5BEA837" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en/database/Oracle/SQL-developer/19.4/RP tug/SQL-developer-concepts-usage . html # GUID-6b7e 132d-779 b-4eb 7-8439-dbc4 b5 bea 837</a></p></blockquote><p id="7e81" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="kt"> Paul Guerin是一名专注于Oracle数据库的国际顾问。Paul在东南亚的全球交付中心工作，但他的客户来自澳大利亚、欧洲、亚洲和北美。此外，他还出席了一些世界领先的甲骨文会议，包括甲骨文2013年世界开放大会。自2015年以来，他的工作一直是IOUG最佳实践技巧小册子以及AUSOUG、Oracle Technology Network和Oracle Developers (Medium)出版物的主题。2019年，他被授予My Oracle支持社区最有价值贡献者。他是一名DBA OCP，并将继续参与Oracle ACE计划。</em></p></div></div>    
</body>
</html>