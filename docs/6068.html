<html>
<head>
<title>Building a new localized search experience</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建新的本地化搜索体验</h1>
<blockquote>原文：<a href="https://medium.com/pinterest-engineering/building-a-new-localized-search-experience-ca68c0c9c937?source=collection_archive---------3-----------------------#2015-10-08">https://medium.com/pinterest-engineering/building-a-new-localized-search-experience-ca68c0c9c937?source=collection_archive---------3-----------------------#2015-10-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="de76" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">尹| Pinterest产品工程工程师</p><p id="5e65" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">随着美国以外的Pinners用户数量增长到1亿月活跃用户的近一半，我们能够向世界各地的人们展示更多的本地内容。例如，如果一个日本和法国的Pinner都搜索“<em class="jc">海报设计</em>”，结果应该与他们的兴趣相关，并以他们的语言本地化。为了帮助世界各地的Pinners发现他们国家保存的最好的pin，今天我们推出了搜索改进，包括更多的本地化结果，国际自动完成和国际拼写检查。</p><h2 id="429b" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">了解品客的内容偏好</h2><p id="1a92" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">从用户研究中，我们知道Pinners通常希望搜索和保存文化上相关的和他们自己语言的pin。例如，寻找“pao de queijo”(一种美味的奶酪面包)的巴西Pinner可能正在寻找葡萄牙语的食谱。</p><p id="690f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了使搜索更加本地化，我们需要了解Pinner的语言偏好，以便我们可以显示更容易理解和相关的pin。为此，我们使用Pinner的<em class="jc">账户语言设置</em>，这是我们为每个Pinner提供的一个简单而重要的信号。帐户语言设置定义了用户界面、电子邮件、通知以及现在的搜索中的语言，创造了一致的体验。</p><p id="45c1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除了语言设置，我们还参考<em class="jc">搜索查询语言</em>来帮助识别Pinner的语言偏好。搜索查询通常很短(少于三个单词)，因此很难检测语言。为了解决这个问题，我们在内部建立了一个概率语言检测模型，它帮助我们对许多语言实现了90%以上的准确率。图1显示了我们的查询语言检测模型的简化管道。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div class="er es kd"><img src="../Images/b6c127719e53a2357ff0af7a0d6f74c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/0*f1p-O_BooHSva4sQ.png"/></div></figure><h2 id="c6b6" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">选择最佳本地化引脚</h2><p id="62ae" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">为了用Pinner的首选语言显示更多的本地化管脚，我们引入了最佳本地化管脚选择算法。对于Pinterest上的每一张不同的图片，都可能有数千个与之相关联的图钉。具有相同图像的大头针可能保存自不同的源链接，并且具有多种语言的不同描述。为了避免在搜索中显示重复的图像，我们根据每个Pin描述的语言、源链接和创建Pin的Pinner来选择Pin。上菜时，我们会显示最符合品酒师偏好语言的Pin。例如，图2显示，对于同一个图像，可以找到同时包含日语和英语内容的高质量大头针。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es kl"><img src="../Images/d83977b68c7e652ac74e5257c9d38208.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6p-HaQj2Y4oykqN4.png"/></div></div></figure><h2 id="b2d8" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">堆焊局部销</h2><p id="f668" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">除了为每张图片找到最相关的本地化pin，我们还需要修改我们的搜索算法，以帮助将本地内容呈现给国际Pinners。我们尝试的第一种方法是只显示本地语言的pin。这种方法效果不好，因为查询覆盖率很低，并且很难用较小的本地pin语料库来保证良好的搜索相关性。最终，我们认为这对Pinners来说是错误的体验——我们不想用人为的、相同的语言限制来限制我们平台上全球发现的潜力。我们希望帮助Pinners更容易地发现本地内容，但仍然保留我们内容的完整范围。</p><p id="c851" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，我们决定尝试另一种方法——一种动态的语言降级和国家推广模式，帮助我们将Pinners与本地内容联系起来，并智能地用全球内容替代他们的搜索结果作为备份。有了这个模型，我们可以更灵活地配置每种语言的降级程度。例如，模型中的一些规则可能是:</p><ul class=""><li id="7c98" class="kq kr hh ig b ih ii il im ip ks it kt ix ku jb kv kw kx ky bi translated">对于日本大头针，将英文大头针降级a%，将中文大头针降级b%。</li><li id="506c" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated"><em class="jc">对于法国大头针，降级英国大头针c%，降级日本大头针d%。</em></li><li id="38af" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated"><em class="jc">对于日本别针，将日本别针促销e%。</em></li></ul><p id="4b52" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用该模型的一个好处是，我们能够显示更多的本地化pin，同时，如果给定查询没有足够的本地化pin，仍然可以显示高质量的非本地化pin。该模型的另一个好处是，它允许我们配置每个&lt;<em class="jc">用户语言、内容语言</em> &gt;对的降级因子。为了确定降级因素，我们根据参与度数据(如重复次数和点击率)查看每种Pin语言在每种Pinner语言中的表现。例如，我们比较日语Pinner对日语Pin和英语Pin采取行动的可能性，以决定对英语内容降级多少。引脚根据引脚所在地区的普通人群对其语言的接受程度进行降级。例如，如果搜索者的首选语言是日语而不是法语，则英语Pin可能会得到更重的降级，因为英语比日语更接近法语，并且我们的数据显示法语Pin比日语Pin更关注英语Pin。类似地，我们也考虑与其他国家相比，Pinner对其源链接来自他们国家的Pin采取行动的可能性，并将其用作排名信号。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="km kn di ko bf kp"><div class="er es le"><img src="../Images/b6ececd46016fc2e61a3e8be6432f77c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qtpRlk8ByP4Oi-Tu.png"/></div></div></figure><h2 id="37d0" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">影响</h2><p id="1707" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">通过我们针对本地化搜索运行的A/B实验，我们观察到在将国际Pinners与本地相关的内容联系起来方面取得了显著的收益，同时仍然保留了我们的发现体验的完整全球范围。本地化的重复内容和本地化的点击量几乎翻了一番，美国以外的用户在点击后会花更多的时间在一个页面的链接上。我们还发现，新注册的Pinners更多地参与本地化搜索和pin，而不是全球内容。</p><p id="de5d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">到目前为止，我们已经向法国、日本、德国和巴西的Pinners推出了这种搜索体验，我们将继续在更多国家推出这种体验。</p><p id="004b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了继续帮助美国以外的Pinner轻松找到他们喜欢的东西，我们将不断进行改进，以更好地反映Pinner基于参与度数据的搜索意图和内容偏好。与此同时，我们已经开始尝试许多其他匹配信号，以提高英语以外的语言查询的搜索相关性。为了使搜索体验更具相关性，我们还推出了几个本地化功能，如国际自动完成，它以Pinner的首选语言提供查询建议，以及国际拼写检查。其他正在进行的工作包括改进国际搜索指南、趋势查询等。敬请关注这些即将到来的改进！</p><p id="df67" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您对构建和改进Pinners本地化发现体验感兴趣，<a class="ae lf" href="https://careers.pinterest.com/careers/engineering" rel="noopener ugc nofollow" target="_blank">加入我们的</a>！</p><p id="2856" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">鸣谢:本作品由、尹、、马凯文、Julia Oh、Keita Fujii、江睿和Mike Repass(我们的产品经理)以及其他搜索团队成员共同完成。我们要感谢探索科学团队、国际团队、商业分析团队以及公司的其他许多人，他们提供了大量的帮助和宝贵的反馈。</em></p></div></div>    
</body>
</html>