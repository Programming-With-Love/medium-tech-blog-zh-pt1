<html>
<head>
<title>Working with Visual Builder's Business Object REST API — Part 2: Create, Update, and Delete</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Visual Builder的业务对象REST API —第2部分:创建、更新和删除</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/working-with-visual-builder-business-object-rest-apis-part-2-create-update-and-delete-84e16e3ee60b?source=collection_archive---------0-----------------------#2017-09-08">https://medium.com/oracledevs/working-with-visual-builder-business-object-rest-apis-part-2-create-update-and-delete-84e16e3ee60b?source=collection_archive---------0-----------------------#2017-09-08</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="3c8f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在<a class="ae jc" rel="noopener" href="/oracledevs/working-with-visual-builder-business-object-rest-apis-b0be6aad52f3">第1部分</a>中，我们讨论了访问Visual Builder业务对象REST APIs。我们主要关注如何启用访问、在哪里找到端点和资源描述，以及使用GET请求读取业务对象。在下一部分中，我们将研究创建、修补(更新)和删除，这需要一些额外的设置。</p><p id="dbca" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由于GET (read)是一个良性操作(意味着不创建或破坏数据)，基本身份验证足以提供访问。不过，一般来说，对于业务对象访问，基本身份验证是一种合理的方法(与OAuth相比)，因为这些类型的操作通常用于服务到服务的交互，而不是特定用户通过个人浏览器客户端上的用户界面与业务对象进行交互。这意味着用户名/密码通常也存储在后端，而不是客户端。</p><p id="2037" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是，由于创建、修补和删除会接触数据并具有潜在的破坏性，因此需要一个额外的要求来确保正确的服务(而不是来自跨站点脚本的劫持)发出请求。为了允许服务器使用这些函数，Visual Builder需要知道请求的来源。首先，它必须被列入Visual Builder管理页面的白名单中，其次，每个请求都必须包含一个带有匹配URL或IP地址的源头。</p><p id="f1a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如上所述，首先我们需要将希望进行创建、修补和删除调用的服务列入白名单。这可以在Visual Builder管理页面中找到，可以通过服务页面右上角的汉堡包图标访问该页面。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/f7dde58fa8a93462aa49f9a07c2af14f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*TagTUregd7pFuzqhp8LLfw.png"/></div></figure><p id="3f96" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在该管理页面中，您会发现一个允许的源设置窗格，您可以在其中添加新的IP或URL。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jl"><img src="../Images/a89b31401b02310b1ee9e112b6d60a59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cYVxdVcByprQhPf_evzXAQ.png"/></div></div></figure><p id="b0c3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击“新来源”按钮添加您的服务器IP或基本地址。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jm jn di jo bf jp"><div class="er es jq"><img src="../Images/9d30635bb5b3bf082b2313f5ed5e0404.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jVk1VCdnvhAVJxxO1xHjjA.png"/></div></div></figure><p id="fcc4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，您可以通过向提供匹配IP或基址的call添加Origin头来发出POST、PATCH或DELETE请求。下面的CREATE调用示例cURL显示了源IP。它还显示了将与POST和PATCH一起发送的JSON有效负载的一个新参数。出于安全目的，身份验证令牌用“-”隐藏。</p><pre class="je jf jg jh fd jr js jt ju aw jv bi"><span id="62fd" class="jw jx hh js b fi jy jz l ka kb">curl -i -H "Authorization : Basic anQ-------------------1AQnIw" <br/>-H "Content-Type: application/vnd.oracle.adf.resourceitem+json" <br/>-H "Origin:http://my.server.com" <br/>-d @new_cust.json <br/>-X POST <a class="ae jc" href="https://abcsdev-fsma.builder.us.oraclecloud.com/design/TestAppJT/1.0/resources/data/Customer" rel="noopener ugc nofollow" target="_blank">https://instance-iddomain.builder.us.oraclecloud.com/design/BOsAtREST/1.0/resources/data/Customer</a></span></pre><p id="94cf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你可能会注意到这个旋度中的一个新论点。-d用于指定数据文件。new_cust.json位于我发出cURL请求的本地目录中。json有效负载包含新客户条目的名称:值对。下面是这个业务对象的JSON主体示例。</p><pre class="je jf jg jh fd jr js jt ju aw jv bi"><span id="6923" class="jw jx hh js b fi jy jz l ka kb">{</span><span id="5a1d" class="jw jx hh js b fi kc jz l ka kb">     "name": "New Company"<br/>     "state": "NY</span><span id="26d3" class="jw jx hh js b fi kc jz l ka kb">}</span></pre><p id="0bda" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于更新，cURL看起来几乎相同，除了它使用PATCH命令而不是POST，并且只有将要更新的字段应该在JSON有效负载中。最后，您必须使用URL中的ID(表示主键)来指定哪个客户。</p><pre class="je jf jg jh fd jr js jt ju aw jv bi"><span id="4d63" class="jw jx hh js b fi jy jz l ka kb">curl -i -H "Authorization : Basic anQ-------------------1AQnIw" <br/>-H "Content-Type: application/vnd.oracle.adf.resourceitem+json" <br/>-H "Origin:http://my.server.com" <br/>-d @new_cust.json <br/>-X PATCH <a class="ae jc" href="https://abcsdev-fsma.builder.us.oraclecloud.com/design/TestAppJT/1.0/resources/data/Customer" rel="noopener ugc nofollow" target="_blank">https://instance-iddomain.builder.us.oraclecloud.com/design/BOsAtREST/1.0/resources/data/Customer</a>/1</span></pre><p id="3442" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于DELETE，不需要有效负载，但是您必须通过在资源端点中包含主键来再次指定将删除哪一行。</p><pre class="je jf jg jh fd jr js jt ju aw jv bi"><span id="2ff8" class="jw jx hh js b fi jy jz l ka kb">curl -i -H "Authorization : Basic anQ-------------------1AQnIw" <br/>-H "Content-Type: application/vnd.oracle.adf.resourceitem+json" <br/>-H "Origin:http://my.server.com" <br/>-X DELETE <a class="ae jc" href="https://abcsdev-fsma.builder.us.oraclecloud.com/design/TestAppJT/1.0/resources/data/Customer" rel="noopener ugc nofollow" target="_blank">https://instance-iddomain.builder.us.oraclecloud.com/design/BOsAtREST/1.0/resources/data/Customer</a>/1</span></pre></div></div>    
</body>
</html>