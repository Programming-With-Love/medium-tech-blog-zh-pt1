<html>
<head>
<title>Lite your app with SQFLite — Flutter💙</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用sqf lite-Flutter简化您的应用程序💙</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/sqflite-flutter-1d0c0737ca4b?source=collection_archive---------2-----------------------#2021-11-11">https://medium.com/google-developer-experts/sqflite-flutter-1d0c0737ca4b?source=collection_archive---------2-----------------------#2021-11-11</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="4fcd" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">不能上网？想要将您的数据存储在本地存储中吗？别担心！SQFLite将会拯救你！</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/4e9af4ef1dc01a9a00082644acd5f94f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AlxFMokBf2KwKP2GkmskAg.png"/></div></div></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><p id="f214" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">互联网是世界上发生的最好的事情之一！但是，您的用户可能并不总是连接到互联网。或者您可能需要在本地存储一些东西。这就是我们可以使用SQFLite的地方，它在用户的设备中创建一个基于SQL的本地数据库！</p><p id="4cc2" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">让我们看看如何使用SQFLite执行CRUD函数！</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="kl km l"/></div></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><p id="f1d2" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">首先在pubspec.yaml文件中包含<a class="ae kn" href="https://pub.dev/packages/sqflite" rel="noopener ugc nofollow" target="_blank"> sqflite </a>和<a class="ae kn" href="https://pub.dev/packages/path_provider" rel="noopener ugc nofollow" target="_blank"> path_provider </a>包！需要path_provier来获取存储DB文件的路径。您也可以执行所有原始SQL查询！</p><h1 id="991d" class="ko kp hh bd kq kr ks kt ku kv kw kx ky in kz io la iq lb ir lc it ld iu le lf bi translated">创建一个数据库并打开它…</h1><p id="75c2" class="pw-post-body-paragraph jp jq hh jr b js lg ii ju jv lh il jx jy li ka kb kc lj ke kf kg lk ki kj kk ha bi translated">一旦添加了这两个包，就需要创建一个包含所有表的数据库。您可以使用以下代码片段来实现这一点:</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="8d47" class="lq kp hh lm b fi lr ls l lt lu">static late Database database;<br/>  static Future&lt;void&gt; createDB() async {<br/>    Directory documentsDirectory = await getApplicationDocumentsDirectory();<br/>    String path = documentsDirectory.path + "sqflite.db";<br/>    database = await openDatabase(path);<br/>    await createTable();<br/>  }</span></pre><p id="bf72" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">这里，我们创建了一个函数，其中我们首先获取路径，然后在该路径中创建一个数据库！创建并打开数据库后，我们调用了createTable()函数，这是一个用户定义的函数。</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h1 id="dd84" class="ko kp hh bd kq kr lv kt ku kv lw kx ky in lx io la iq ly ir lc it lz iu le lf bi translated">创建表格…</h1><p id="1188" class="pw-post-body-paragraph jp jq hh jr b js lg ii ju jv lh il jx jy li ka kb kc lj ke kf kg lk ki kj kk ha bi translated">您可以使用以下代码片段在数据库中创建一个表:</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="34c4" class="lq kp hh lm b fi lr ls l lt lu">static Future&lt;void&gt; createTable() async {<br/>    await database.execute('CREATE TABLE SQFLITE (first_name TEXT, last_name TEXT)');<br/>  }</span></pre><p id="6293" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">这里，我们创建了一个名为SQFLITE的表，它有两列:first_name和last_name，它们的数据类型是TEXT！</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h1 id="6351" class="ko kp hh bd kq kr lv kt ku kv lw kx ky in lx io la iq ly ir lc it lz iu le lf bi translated">将数据插入表格…</h1><p id="2160" class="pw-post-body-paragraph jp jq hh jr b js lg ii ju jv lh il jx jy li ka kb kc lj ke kf kg lk ki kj kk ha bi translated">一旦创建了表，就可以使用下面的代码片段将数据插入到该表中:</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="3ba9" class="lq kp hh lm b fi lr ls l lt lu">static Future&lt;void&gt; insertData({required User user}) async {<br/>    await database<br/>        .rawInsert('INSERT INTO SQFLITE(first_name, last_name) VALUES("${user.firstName}", "${user.lastName}")');<br/>  }</span></pre><p id="8a1f" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">在这里，我们将名字和姓氏插入到SQFLITE表中！</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h1 id="b547" class="ko kp hh bd kq kr lv kt ku kv lw kx ky in lx io la iq ly ir lc it lz iu le lf bi translated">从表中获取数据…</h1><p id="940b" class="pw-post-body-paragraph jp jq hh jr b js lg ii ju jv lh il jx jy li ka kb kc lj ke kf kg lk ki kj kk ha bi translated">您可以使用以下代码片段从表中检索数据:</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="75b5" class="lq kp hh lm b fi lr ls l lt lu">static Future&lt;User&gt; getData({required String firstName}) async {<br/>    List&lt;Map&gt; list = await database.rawQuery('SELECT * FROM SQFLITE WHERE first_name = "$firstName"');</span><span id="3a0c" class="lq kp hh lm b fi ma ls l lt lu">return User(<br/>        firstName: list.length &gt; 0 ? list[0]['first_name'] : "", lastName: list.length &gt; 0 ? list[0]['last_name'] : "");<br/>  }</span></pre><p id="6562" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">在这里，rawQuery函数返回列表<map>，其中包含满足给定查询的所有条目。如果你愿意，你可以使用一个循环或者返回整个列表。或者你可以像上面的例子一样返回第0个索引数据。</map></p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h1 id="c67f" class="ko kp hh bd kq kr lv kt ku kv lw kx ky in lx io la iq ly ir lc it lz iu le lf bi translated">更新特定行的数据…</h1><p id="1aa6" class="pw-post-body-paragraph jp jq hh jr b js lg ii ju jv lh il jx jy li ka kb kc lj ke kf kg lk ki kj kk ha bi translated">您可以使用我们的原始SQL查询来更新特定行的数据，如下所示:</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="f10d" class="lq kp hh lm b fi lr ls l lt lu">static Future&lt;void&gt; updateData({required User user}) async {<br/>    await database<br/>        .rawUpdate('UPDATE SQFLITE SET last_name = "${user.lastName}" WHERE first_name = "${user.firstName}"');<br/>  }</span></pre><p id="a0c8" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">这里，我们更新了名与用户提供的名相匹配的特定行的姓。</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h1 id="ebf1" class="ko kp hh bd kq kr lv kt ku kv lw kx ky in lx io la iq ly ir lc it lz iu le lf bi translated">从表中删除数据…</h1><p id="4ab4" class="pw-post-body-paragraph jp jq hh jr b js lg ii ju jv lh il jx jy li ka kb kc lj ke kf kg lk ki kj kk ha bi translated">您可以从表格中删除一行，如下所示:</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="b34d" class="lq kp hh lm b fi lr ls l lt lu">static Future&lt;void&gt; deleteData({required String firstName}) async {<br/>    await database.rawDelete('DELETE FROM SQFLITE WHERE first_name = "$firstName"');<br/>  }</span></pre><p id="3a01" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">这里，我们删除了名字与用户提供的名字相同的行。</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h1 id="bd29" class="ko kp hh bd kq kr lv kt ku kv lw kx ky in lx io la iq ly ir lc it lz iu le lf bi translated">关闭数据库…</h1><p id="cc4e" class="pw-post-body-paragraph jp jq hh jr b js lg ii ju jv lh il jx jy li ka kb kc lj ke kf kg lk ki kj kk ha bi translated">最后，在所有任务完成后，您需要关闭数据库，这样就不会有内存泄漏或未使用的资源。您可以通过下面的函数简单地做到这一点:</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="3842" class="lq kp hh lm b fi lr ls l lt lu">static Future&lt;void&gt; closeDB() async {<br/>    await database.close();<br/>  }</span></pre></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><p id="4bca" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">你也可以从<a class="ae kn" href="https://github.com/AbhishekDoshi26/sqflite_example" rel="noopener ugc nofollow" target="_blank"> GitHub </a>中得到同样的小例子！</p><p id="2ca4" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">希望你喜欢这篇文章！</p><p id="b1d9" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">如果你喜欢，你可以<a class="ae kn" href="https://www.buymeacoffee.com/abhishekdoshi26" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi">给我买杯咖啡</strong> </a> <strong class="jr hi">！</strong></p><figure class="ix iy iz ja fd jb er es paragraph-image"><a href="https://www.buymeacoffee.com/abhishekdoshi26"><div class="er es mb"><img src="../Images/fa704f2ad01834f36e82857a82497eff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ydmbdgJNwzMMwB3J.png"/></div></a><figcaption class="mc md et er es me mf bd b be z dx"><a class="ae kn" href="https://www.buymeacoffee.com/abhishekdoshi26" rel="noopener ugc nofollow" target="_blank">https://www.buymeacoffee.com/abhishekdoshi26</a></figcaption></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h1 id="185f" class="ko kp hh bd kq kr lv kt ku kv lw kx ky in lx io la iq ly ir lc it lz iu le lf bi translated">不要忘记通过以下方式与我联系:</h1><ul class=""><li id="79c5" class="mg mh hh jr b js lg jv lh jy mi kc mj kg mk kk ml mm mn mo bi translated"><a class="ae kn" href="https://www.instagram.com/abhishekdoshi26/" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi"> Instagram </strong> </a></li><li id="81fe" class="mg mh hh jr b js mp jv mq jy mr kc ms kg mt kk ml mm mn mo bi translated"><a class="ae kn" href="https://twitter.com/AbhishekDoshi26" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi">推特</strong> </a></li><li id="8132" class="mg mh hh jr b js mp jv mq jy mr kc ms kg mt kk ml mm mn mo bi translated"><a class="ae kn" href="https://www.linkedin.com/in/AbhishekDoshi26" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi"> LinkedIn </strong> </a></li><li id="0892" class="mg mh hh jr b js mp jv mq jy mr kc ms kg mt kk ml mm mn mo bi translated"><a class="ae kn" href="https://github.com/AbhishekDoshi26" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi"> GitHub </strong> </a></li></ul></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><blockquote class="mu"><p id="026b" class="mv mw hh bd mx my mz na nb nc nd kk dx translated">不要停止，直到你在呼吸！💙<br/> -阿布舍克·多希</p></blockquote></div></div>    
</body>
</html>