# 用 Javascript 克隆一个对象:浅层拷贝与深层拷贝

> 原文：<https://medium.com/version-1/cloning-an-object-in-javascript-shallow-copy-vs-deep-copy-fa8acd6681e9?source=collection_archive---------0----------------------->

![](img/3a57a2ca9ad2a64fed3f7f475a2db251.png)

Photo by [Phil Shaw](https://unsplash.com/@phillshaw?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

有多少次你试图用 Javascript 克隆一个对象，结果却不是你期望的那样？在本文中，我们将解释克隆背后的基本概念，以确保您始终使用正确的选项。

# 浅层拷贝与深层拷贝

Javascript 中有两种克隆对象的方法:

*   **浅复制:**表示**只复制对象的第一级**。引用更深层次的内容。
*   **深度复制:**表示**对象的所有级别都被复制**。这是该对象的真实副本。

# 浅拷贝

使用**扩展操作符(…)** 或使用**对象可以实现浅拷贝。**

正如您在这段代码中看到的:

*   在更新克隆对象的第一层中的属性后，**原始属性不会被更新**。
*   在更新更深层次的属性后，**原始属性也被更新**。发生这种情况是因为，在这种情况下，更深的级别被引用，而不是被复制。

# 深层拷贝

使用**JSON . parse+JSON . stringify**可以实现深度复制:

正如您在这段代码中看到的:

*   在更新克隆对象的第一层中的属性后，**原来的属性不更新**。
*   更新更深层次的属性后，**原始属性不再更新**。发生这种情况是因为，在这种情况下，更深的层次也被复制。

# 表演

由于显而易见的原因，浅层拷贝比深层拷贝快得多。但这并不意味着您应该总是使用浅层副本，因为有时您也需要嵌套对象的副本。那么，我应该使用哪个选项呢？

*   如果对象的深度等于 1，使用浅拷贝。
*   如果对象的深度大于 1，使用深度副本。

编码快乐！

**关于作者:**

米格尔·穆尼奥斯是版本 1 的首席软件工程师。关注我们的媒体账户了解更多内容。