<html>
<head>
<title>Use class methods to generate objects generically in python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用类方法在python中生成通用对象</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/support-your-class-users-by-providing-an-alternate-way-of-creating-class-instances-using-class-e2da42241913?source=collection_archive---------0-----------------------#2020-04-07">https://medium.com/quick-code/support-your-class-users-by-providing-an-alternate-way-of-creating-class-instances-using-class-e2da42241913?source=collection_archive---------0-----------------------#2020-04-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="c109" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">当__init__方法不支持您希望类用户能够创建类实例的所有方式时</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/26d2839ef12a108747cd50730c5aecf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1kVCB810YFcQFCPWP5lZzQ.jpeg"/></div></div><figcaption class="ji jj et er es jk jl bd b be z dx">Photo by E<a class="ae jm" href="https://unsplash.com/@5tep5?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">v</a>erton Vila on <a class="ae jm" href="https://unsplash.com/s/photos/traffic-light?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2314" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">类方法是很好的替代构造函数，可以用作工厂方法，通过支持不同的实例化参数来创建类的实例。</p><h2 id="996e" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">让我们来看一个例子</h2><p id="9605" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">假设您有一个非常简单的日期类，如下所示，可以通过提供三个参数进行实例化:年、月和日</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="3edc" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">用户将如下实例化该类</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="6a41" class="kj kk hh lm b fi lq lr l ls lt">date = Date(2020, 04, 05)<br/>print(date)</span></pre><p id="e963" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">这很好</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="d94b" class="kj kk hh lm b fi lq lr l ls lt">&gt; Date(2020, 04, 05)</span></pre><p id="5364" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">但是，假设您想为您的类的用户提供创建日期实例的替代方法。例如，用户应该能够从“YYYY-MM-DD”格式的单个字符串参数创建日期实例。也许像下面这样</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="680d" class="kj kk hh lm b fi lq lr l ls lt">date = Date(‘2020–04–05’)</span></pre><h2 id="262b" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated"><strong class="ak">在不破坏默认的__init__方法的情况下，如何在Date类中支持这个实例化方法？</strong></h2><p id="129e" class="pw-post-body-paragraph jn jo hh jp b jq le ii js jt lf il jv jw lg jy jz ka lh kc kd ke li kg kh ki ha bi translated">解决的办法是使用一个<strong class="jp hi">的<em class="lu">类方法！</em> </strong></p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lj lk l"/></div></figure><p id="1961" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">python中的类方法必须使用<strong class="jp hi"><em class="lu">@ class method</em></strong>decorator进行修饰</p><p id="a0b1" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们所做的是创建一个名为<strong class="jp hi"> <em class="lu"> from_str </em> </strong>的新方法，该方法使用单个字符串参数接受新的期望的实例化方式。第一个参数总是类对象本身，在本例中是Date。这个方法中没有任何魔法，因为它只是将字符串参数分解成一个年、月和日的元组，然后使用该结果依次调用__init__方法</p><p id="7428" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">现在我们可以使用这个类方法来实例化</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="db75" class="kj kk hh lm b fi lq lr l ls lt">date = Date.from_str(‘2020–04–05’)<br/>print(date)</span></pre><p id="1d34" class="pw-post-body-paragraph jn jo hh jp b jq jr ii js jt ju il jv jw jx jy jz ka kb kc kd ke kf kg kh ki ha bi translated">我们得到了同样的结果</p><pre class="ix iy iz ja fd ll lm ln lo aw lp bi"><span id="b4a0" class="kj kk hh lm b fi lq lr l ls lt">&gt; Date(2020, 04, 05)</span></pre></div><div class="ab cl lv lw go lx" role="separator"><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma mb"/><span class="ly bw bk lz ma"/></div><div class="ha hb hc hd he"><h2 id="128e" class="kj kk hh bd kl km kn ko kp kq kr ks kt jw ku kv kw ka kx ky kz ke la lb lc ld bi translated">资源</h2><blockquote class="mc md me"><p id="ead7" class="jn jo lu jp b jq jr ii js jt ju il jv mf jx jy jz mg kb kc kd mh kf kg kh ki ha bi translated">* <a class="ae jm" href="https://gist.github.com/i4ali/c92b0e1018edbe5e54c82f590871c350" rel="noopener ugc nofollow" target="_blank"> Github </a></p></blockquote></div></div>    
</body>
</html>