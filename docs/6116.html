<html>
<head>
<title>Engineering Shop the Look on Pinterest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">工程商店Pinterest上的外观</h1>
<blockquote>原文：<a href="https://medium.com/pinterest-engineering/engineering-shop-the-look-on-pinterest-45bdfa7a8d03?source=collection_archive---------4-----------------------#2017-02-10">https://medium.com/pinterest-engineering/engineering-shop-the-look-on-pinterest-45bdfa7a8d03?source=collection_archive---------4-----------------------#2017-02-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="ea62" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作者Wonjun Jeong | Pinterest产品工程师</p><p id="a286" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本周我们宣布了<a class="ae jc" href="https://engineering.pinterest.com/blog/introducing-future-visual-discovery-pinterest" rel="noopener ugc nofollow" target="_blank"> Shop the Look </a>，这是一种购买家居产品和时尚胸针的新方式。随着超过1.5亿人每月在Pinterest上发现数十亿个想法，并且<a class="ae jc" href="http://www.slideshare.net/kleinerperkins/2016-internet-trends-report?ref=http://www.recode.net/2016/6/1/11826256/mary-meeker-2016-internet-trends-report" rel="noopener ugc nofollow" target="_blank">55%的人</a>使用该应用程序购物和计划购买，我们希望让灵感和行动变得比以往任何时候都更容易。Shop the Look将我们的计算机视觉技术与人类策展相结合，向您推荐各种相关产品和风格，只需轻轻一点，您就可以为其注入活力。在本帖中，我们将分享我们是如何设计店铺外观的。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/3b7c3a6762e26ce20fb3c16bc40302af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1000/0*TXes15dsvt2rYUty.gif"/></div></figure><h2 id="11d4" class="jl jm hh bd jn jo jp jq jr js jt ju jv ip jw jx jy it jz ka kb ix kc kd ke kf bi translated">概观</h2><p id="c659" class="pw-post-body-paragraph ie if hh ig b ih kg ij ik il kh in io ip ki ir is it kj iv iw ix kk iz ja jb ha bi translated">我们建立了两种不同的技术来使pin内的产品可购买。首先，我们将解释我们如何将计算机视觉技术与人类监管结合起来，以帮助人们在Pinterest上购物。第二种方法是从内容网络中获取内容，并自动使pin中的产品可购买。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kl"><img src="../Images/4ced32972ff4d2113405e2dc8e684dd1.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/0*5Vj_1Gbft2bD7eU0.png"/></div></figure><h2 id="6a77" class="jl jm hh bd jn jo jp jq jr js jt ju jv ip jw jx jy it jz ka kb ix kc kd ke kf bi translated">方法1:将计算机视觉与人类监管相结合</h2><p id="722a" class="pw-post-body-paragraph ie if hh ig b ih kg ij ik il kh in io ip ki ir is it kj iv iw ix kk iz ja jb ha bi translated">利用我们的对象检测技术，我们建立了新的机器辅助策展工具，帮助将人类的品味与计算机视觉结合起来。给定一个时尚别针，我们使用对象检测来推断图像中包含产品的区域，并应用我们的视觉搜索技术来快速查找和解析数百万个产品，以便生成一组候选产品。</p><p id="a756" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">具有时尚专业知识的人类策展人确认候选产品中最相关的产品。然后我们可以在商店里推荐这些产品。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es km"><img src="../Images/cf7fcf92d78c88830c423080918c2fb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/0*j70fV1A495EPm6nj.png"/></div></figure><h2 id="c991" class="jl jm hh bd jn jo jp jq jr js jt ju jv ip jw jx jy it jz ka kb ix kc kd ke kf bi translated">方法2:获取第三方数据</h2><p id="685f" class="pw-post-body-paragraph ie if hh ig b ih kg ij ik il kh in io ip ki ir is it kj iv iw ix kk iz ja jb ha bi translated">为了让商店看起来更具可扩展性，我们为内容网络构建了一个feed摄取系统。现在，我们可以轻松获取包含图像链接、产品链接和XY坐标的外部信息。</p><p id="c3d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们的日常工作流程上传饲料文件到S3分析和验证饲料。我们将任何错误保存回S3，以通知品牌和网络。通过处理后的feed，系统代表内容网络创建pin，并将他们的产品与人们可以在Pinterest上购买的pin进行匹配。之后，使用进给中的XY坐标在针内标记产品。我们的作业是幂等的，可以在任何时候重新运行，而不会导致重复的内容或特性中断。</p><p id="5386" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有时品牌或网络不提供XY坐标。这是一个挑战，我们解决了使用我们的对象检测技术。首先，我们检测源图像中的对象和坐标。然后，我们将注释与在产品上执行的相同对象检测进行交叉匹配，并在源图像上为产品分配一个XY坐标。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kn"><img src="../Images/8999f9bdc340790fa0cdda406ee46302.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bT87-5RAfFwmxKQG.jpg"/></div></div></figure><h2 id="7d40" class="jl jm hh bd jn jo jp jq jr js jt ju jv ip jw jx jy it jz ka kb ix kc kd ke kf bi translated">数据模型</h2><p id="859f" class="pw-post-body-paragraph ie if hh ig b ih kg ij ik il kh in io ip ki ir is it kj iv iw ix kk iz ja jb ha bi translated">我们使用基于图形的模型构建商店外观。为了表示标签关系，我们创建了一个名为PinTag的节点，它包含XY坐标和一条带有给定时尚或家庭大头针的边。我们还创建了从PinTag到类似产品的不同引脚的边。这里有一个例子:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ks"><img src="../Images/11cc907f5b3d640308023e56398e2d59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/0*1WaGpm1tYR4qZbWW.png"/></div></figure><p id="7845" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">基于图形的解决方案允许我们构建更多有用的功能:</p><ul class=""><li id="8d83" class="kt ku hh ig b ih ii il im ip kv it kw ix kx jb ky kz la lb bi translated"><strong class="ig hi">如何佩戴:</strong>不同的励志别针往往共用共同的产品。对于任何可购买的Pin，我们可以很容易地查询反向来找到包含相同产品的灵感图像。这有助于品酒者找到更多的方法来设计围巾，穿最新的牛仔裤，或者让他们已经拥有的产品以新的方式为他们服务。</li></ul><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kn"><img src="../Images/0c34c8fcab2e0b336ad3012942c9ceeb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*fNCg_Ea51cd1QEw3.jpg"/></div></div></figure><ul class=""><li id="7e2e" class="kt ku hh ig b ih ii il im ip kv it kw ix kx jb ky kz la lb bi translated"><strong class="ig hi">别针共现:</strong>商店外观和如何穿它都遍历图的宽度一次。如果我们遍历该图几次，我们就开始绘制产品之间的关系，以利用人工管理提供的准确数据。在未来，我们将能够推断出相似或互补的产品。这意味着我们可以推荐由搭配良好的单品组成的造型。</li></ul><h2 id="00f7" class="jl jm hh bd jn jo jp jq jr js jt ju jv ip jw jx jy it jz ka kb ix kc kd ke kf bi translated">基础设施</h2><p id="16d9" class="pw-post-body-paragraph ie if hh ig b ih kg ij ik il kh in io ip ki ir is it kj iv iw ix kk iz ja jb ha bi translated">我们在一个称为Zen Canonical Pin的专门Zen集群上构建了这个。Zen是我们内部基于图形的存储系统，规范Pin是一种数据模型，表示共享相同链接和图像哈希的Pin(就像上面的Pin)。Zen Canonical Pin给了我们两个主要好处。</p><ul class=""><li id="2782" class="kt ku hh ig b ih ii il im ip kv it kw ix kx jb ky kz la lb bi translated"><strong class="ig hi">性能:</strong>集群经过专门设计，通过高缓存可用性实现低读取延迟。该集群上的请求超过400K QPS，同时提供大约20毫秒的p99读取延迟。这是至关重要的，因为商店的外观内容往往存在于我们最受欢迎的别针上。</li><li id="8c25" class="kt ku hh ig b ih lc il ld ip le it lf ix lg jb ky kz la lb bi translated"><strong class="ig hi">覆盖范围:</strong>将这些数据存储在标准Pin表示中，可以放大我们整个产品的商店外观。每当一个大头针共享相同的图像签名和链接时，我们将使用购物外观内容点亮该大头针。这使得更多的针可购买，因此更容易发现一个商店的外观针。</li></ul><p id="60c5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦数据存储完毕，就可以开始服务了。我们为我们所有的平台——iOS、Android和web——建立了商店外观。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ko kp di kq bf kr"><div class="er es kn"><img src="../Images/4613d74381cccf4a1ec6b6eb5ef1c424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*T0JLKIAu9Rw1j_4q.jpg"/></div></div></figure><h2 id="cfb2" class="jl jm hh bd jn jo jp jq jr js jt ju jv ip jw jx jy it jz ka kb ix kc kd ke kf bi translated">下一步是什么</h2><p id="47af" class="pw-post-body-paragraph ie if hh ig b ih kg ij ik il kh in io ip ki ir is it kj iv iw ix kk iz ja jb ha bi translated">早期的测试表明，与不逛商店的人相比，逛商店的人逛商店的次数多3-4次，逛商店的次数多5次，访问品牌网站的次数多2-3次。现在，我们正在向所有人推广这一体验，我们有几项即将推出的计划:</p><ul class=""><li id="e056" class="kt ku hh ig b ih ii il im ip kv it kw ix kx jb ky kz la lb bi translated"><strong class="ig hi">用视觉搜索统一购物外观:</strong>随着我们的计算机视觉精度的提高，我们可以指数级地扩大购物外观。我们希望将我们的视觉搜索体验与Shop The Look中的内容统一起来。</li><li id="fcab" class="kt ku hh ig b ih lc il ld ip le it lf ix lg jb ky kz la lb bi translated"><strong class="ig hi">增加价值:</strong>我们希望将更多的内容网络和品牌带到平台上，帮助Pinners发现更多他们甚至不需要知道名字就能找到并购买的产品。</li></ul><p id="d79e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在美国的Pinners也可以购买这种造型了。我们希望你<a class="ae jc" href="https://www.pinterest.com/discover/topics/4862118442542574756/" rel="noopener ugc nofollow" target="_blank">尝试一下</a>！</p><p id="65d5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lh">鸣谢:本项目是与Rocir Santiago、Joyce Zha、Rahul Pandey、Casey Aylward、科拉莉·萨宾、Cheryl Chepusova、Cherie Yagi、Kim O'Rourke、Anne Purves、Tiffany Chao、Aimee Bidlack、Aya Nakanishi、Tim Weingarten、Adam Barton和田园合作的跨职能项目。全公司的人通过他们的见解和反馈帮助推出了这一功能。</em></p></div></div>    
</body>
</html>