<html>
<head>
<title>Getting Back to Where We All Started</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">回到我们开始的地方</h1>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/getting-back-to-where-we-all-started-11d3994b26f4?source=collection_archive---------6-----------------------#2017-06-22">https://medium.com/capital-one-tech/getting-back-to-where-we-all-started-11d3994b26f4?source=collection_archive---------6-----------------------#2017-06-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="3d0f" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">今天使用ES模块+ JavaScript</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/7d4583e48a9db348c1070573fb59d51b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WOaZ_heTsyxI6GH5xm_J8Q.png"/></div></div></figure><p id="4195" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">几年前，当我开发Java J2EE应用程序时，我很羡慕前端开发人员可以保存一个HTML文件并刷新浏览器来查看他们的更改。有了J2EE，我们编写了必须编译的JSP文件，然后必须启动一个服务器来提供我们的内容。更简单的开发周期是我开始喜欢做前端开发的一个原因。</p><p id="4570" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">但是随着时间的推移，JavaScript开始变得更加强大和复杂。我们添加了Babel来编译我们的JavaScript，WebPack或Browserify来捆绑我们的应用程序，等等。这使得设置、开发和构建过程稍微复杂了一些。今天，我们用WebPack解决的一个主要问题是把我们所有的JavaScript文件打包成一个JavaScript文件。</p><p id="7f0c" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">前端开发曾经很容易，后来变得越来越难——让我们努力让它变得更容易。</p><h1 id="79b9" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">紧急救援模块</h1><p id="6f6b" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">在Capital One，我们已经开始将我们的前端开发转移到使用web组件来构建我们的应用程序。一种方法是使用Webpack将多个JavaScript文件捆绑成一个JavaScript文件。但是Webpack能做的不止这些。Webpack的树抖动使用静态结构的es模块导入/导出来缩小JavaScript的文件大小。ES模块是高度解耦的，不同的功能块存储在模块中。正如您可能知道的，松散耦合通过尽可能地移除依赖性来简化应用程序的可维护性。自定义元素非常适合这种结构，因为自定义元素必须使用类语法。ES模块有自己的作用域，这有助于我们避免污染模块代码的全局命名空间和命名空间。我们现在可以只从JavaScript库中导入我们需要的代码。ES模块标准化了在浏览器中加载模块的方式，还有许多其他的好处。让我们看看今天我们是如何做到这一点的。</p><h1 id="4714" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated"><strong class="ak">今日结构</strong></h1><p id="a9f9" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">下面是一个示例应用程序，它具有我们用于web组件的结构。我正在显示一个人员列表，如果您单击该人员，它将显示该人员的详细信息。</p><p id="3e9e" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">我们有一个包含JavaScript文件的src目录。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lb"><img src="../Images/15cbfbd79117ca669e33fd7faed4298a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MU7hVNZ5xR-ortPVlixhZA.png"/></div></div></figure><p id="40f0" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">我们的构建文件只有一行，build . js .<strong class="jk hi">T3要求('../dist/people-list ')；</strong>web pack将使用这个文件作为入口文件，并构建data.js作为其输出。信息、列表和数据文件是我们的web组件。</p><p id="d522" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">person-list . js</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ld"><img src="../Images/f5f88fa2f393a4ec8fa237f108076b35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*M_CVXD_vIrgxPRCx44_xng.png"/></div></div></figure><p id="64eb" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">人民信息网</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es le"><img src="../Images/cf7b1d124b200bcf5016567df564f3bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OtHQM9mlah4qGuih3C1Hyg.png"/></div></div></figure><p id="563d" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">这是我们的示例应用程序，在WebPack将JavaScript绑定到people-data.js之后，我们用index.html调用它</p><p id="441a" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">index.html</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lb"><img src="../Images/9a01a1a829e6c815e10f5eb682a821a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R9let9HtnMaAFCEzTCgWtQ.png"/></div></div></figure><p id="b334" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">我们现在可以打开这个页面，看到一个字符列表。以这种方式构造我们的代码将允许我们快速转移到ES模块。ES模块开始登陆浏览器。他们目前在:</p><ul class=""><li id="51b5" class="lf lg hh jk b jl jm jo jp jr lh jv li jz lj kd lk ll lm ln bi translated">Safari 10.1</li><li id="7aa1" class="lf lg hh jk b jl lo jo lp jr lq jv lr jz ls kd lk ll lm ln bi translated">chrome Canary 60——在chrome:flags Firefox 54中的实验性Web平台标志后面——在about:config中的dom.moduleScripts.enabled设置后面</li><li id="5020" class="lf lg hh jk b jl lo jo lp jr lq jv lr jz ls kd lk ll lm ln bi translated">edge 15——about:flags中实验性JavaScript特性设置的背后</li></ul><p id="6210" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">为了改变我们的代码来使用ES模块，我们所要做的就是更新我们的index.html。要使用模块，我们需要做的就是添加<strong class="jk hi"> <em class="lc">类型+模块</em> </strong>这个脚本作为ECMAScript模块。这将告诉浏览器将该脚本视为ECMAScript模块。</p><p id="6054" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">所以我们的index.html变成了这样:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lt"><img src="../Images/e0d18465f2c7e302069fac98811d49e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*l0BcdzKBo02IS-3M4M7Uvg.png"/></div></div></figure><p id="b8af" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">现在我们不必将JavaScript捆绑在一起，浏览器会加载JavaScript文件</p><p id="81a5" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">需要。我们还可以使用脚本标签上的属性<strong class="jk hi"> <em class="lc"> nomodule </em> </strong>来添加一个回退，如果浏览器不这样做的话</p><p id="6a27" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">支持ES模块。</p><p id="6f35" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">我们最终的index.html看起来像这样:</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lb"><img src="../Images/9f485f3de26f9d1a834d8eabec22a2fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zbrrreIT4ZkZcEHxTYi7Sw.png"/></div></div></figure><p id="4fe7" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">我们现在可以在不使用WebPack的情况下利用模块化代码。还有一些其他的优势，比如利用导入只使用我们想要使用的代码部分。我们也可以回到使用单独的文件，这使得开发和调试更加容易。对于单个文件，我们还可以利用HTTP2，在一个管道中加载代码，从而加快下载速度。</p><h1 id="2b74" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">结论</h1><p id="c22b" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">ES模块允许我们在模块中编写代码，创建局部作用域，避免函数污染全局作用域。我们可以使用像WebPack这样的捆绑应用程序中的树抖动来缩小代码的大小。我们还可以享受对我们的模块代码进行更简单的单元测试。</p><p id="3cdd" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">在不久的将来，我们将能够在浏览器中使用ES模块。这将给我们带来额外的好处，比如http2支持、模块只执行一次、异步加载等等！</p></div><div class="ab cl lu lv go lw" role="separator"><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz ma"/><span class="lx bw bk ly lz"/></div><div class="ha hb hc hd he"><p id="4cb3" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><strong class="jk hi"> <em class="lc">披露声明:以上观点为作者个人观点。除非本帖中另有说明，否则Capital One不属于所提及的任何公司，也不被其认可。使用或展示的所有商标和其他知识产权都是其各自所有者的所有权。本文为2017首都一。</em>T11】</strong></p><h1 id="672c" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">相关链接</h1><ul class=""><li id="5fee" class="lf lg hh jk b jl kw jo kx jr mb jv mc jz md kd lk ll lm ln bi translated"><a class="ae me" rel="noopener" href="/capital-one-developers/creating-custom-html-elements-for-enterprise-5fd17bb6a355">为企业创建自定义HTML元素</a></li></ul></div></div>    
</body>
</html>