# 将 DevOps 团队淹没在敏捷环境中

> 原文：<https://medium.com/version-1/submerging-a-devops-team-into-an-agile-landscape-e70201508d02?source=collection_archive---------2----------------------->

![](img/6118ec1b4bb936be8646301320d68631.png)

[Image from Pixabay](https://pixabay.com/photos/ocean-tree-fantasy-orca-1752432/)

我不打算讨论 DevOps 的含义或深入讨论 DevOps 不应该是一个角色或团队，而是一个嵌入到组织中的概念，我只是放弃我在将敏捷方法引入到“DevOps”团队中的经验:什么有效，我们克服了什么障碍，以及一些附带的观察。

你们中的许多人可能认为 DevOps 不应该是一个团队，而是一个组织应该接受的模型:

> DevOps 是文化哲学、实践和工具的结合……
> -摘自 [AWS 对 DevOps](https://aws.amazon.com/devops/what-is-devops/) 的解释

然而，许多组织都有这些所谓的 DevOps 团队。这些可能是注入了新工具的支持团队，或者可能是采用新品牌的平台团队。不管怎样，它们都存在并服务于一个至关重要的目的。我的团队在很大程度上是一个集平台、运营和工具团队于一身的团队。任何不是纯粹发展的东西都扔给了我们。随着组织的其余部分变得更加敏捷，任何不适合的东西都被“DevOps”团队吸收了。甚至[DBA](https://en.wikipedia.org/wiki/Database_administrator)也设法进入了我们的团队！是的，我们有所有闪亮的工具，但本质上，我们是一个非常普通的开发和应用程序支持团队。要了解我们面临的挑战和障碍，您首先需要了解团队的一些职责和任务…

# “DevOps”团队的职责

如果你有一个 DevOps 团队，我假设它类似于我所经历的，由 4 个主要方面组成:平台、操作、工具和可能的构建管理。工作的来源也是多种多样的:从服务台提出的问题到新应用程序上线时的大量工作。我将快速回顾一下我们面临的任务类型。

## 平台

平台团队负责组织或应用的基础设施。他们可能会使用 Terraform 和 Ansible 等现代配置代码工具来管理资产，还可能会管理各种应用程序，如 VPN、Bastions、cdn 和负载平衡器。他们的任务是维护、升级和配置新的基础架构。

## 操作

运营团队将负责监控解决方案，以确保一切顺利运行，并发出相关警报。他们可能会使用和配置 ELK、Grafana、Prometheus 等工具或 Cloudwatch 等云解决方案。他们的任务是维护和配置这些解决方案。

## 工具作业

这包括照看软件开发生命周期所需的各种工具，如源代码库、构建、部署、wiki 和问题跟踪工具。对于所有工具，他们的任务是用户管理、升级和持续维护。

## 构建管理

在我们的团队中，我们也在一定程度上关注应用程序。确保它们的构建和部署适用于所有环境。在现代开发世界中，您已经有了合适的构建工具，因此整个过程是自动化的，开发人员可以轻松管理。然而，由于主要的历史原因，并且由于一些陈旧的应用程序具有过于复杂和过时的构建过程，我们的团队还处理了大量的应用程序版本和构建过程。

![](img/2030e04aaf3b5b846d12f450e421934b.png)

[Image from Pixabay](https://pixabay.com/photos/fish-aquarium-sea-fish-tank-288988/)

正如您所看到的，在“DevOps”团队中的工作是非常多样的，并且有很多。每个人都有一打事情要做(包括一些只在他们的雷达上的关键任务)，人们不断地 ping 它们，还有一个服务台要么没人看，要么马上被一半的团队看。感觉我们像是一个 Brents 团队(对于那些读过 Phoenix 项目的人来说),是我们参与的大多数过程的瓶颈。这并不是说它很糟糕。我仍然喜欢我的工作，我们仍然交付工作并保持运转。事实上，我怀疑许多人根本没有看到任何问题。

# 组织变革

新项目的引入和管理经历了许多变化。并不是所有的变革都是敏捷的，有些仅仅是组织上的变革，有些比其他的更受欢迎，但最终大多数都是有益的。

![](img/a2959c13fd86427a5ecdb7d818d62465.png)

Photo by [Leon](https://unsplash.com/@myleon?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

第一个变化是围绕工作可见性、流程和规划。我们从建立看板开始，首先是实物看板，然后在[吉拉](https://www.atlassian.com/software/jira)虚拟看板。这有助于揭示堆积在人们身上的所有任务。仅仅是可见性就足以产生影响:每个人都试图把所有的任务完成，如果这个人已经有太多的工作要做，工作就会被推后或交给其他人。最终，这降低到了除非你有票否则什么都不做的水平，并记录在这些票上花费的每一分钟。这有助于我们看到我们所有的努力都在哪里，我们可以改进哪些流程，并创建了一个更加透明的团队。Joe Bloggs 每隔一天进行的、没有人知道的关键任务流程？这一点现已记录在案，并纳入规划和工作量考虑因素。

下一个大的变化是被指派一个项目经理。最初的烦恼是必须向更多的人解释你的工作和更新，这种烦恼很快被有人成为你和新工作冲击之间的障碍的好处所取代。事实上，与首相的每一次对话都节省了三次对话。要么是项目直接给你工作，要么是必须给项目更新你的状态。项目经理会知道谁在做什么，他们可能什么时候完成，以及项目在等待什么积压任务。他们也经历了决定项目本身要做什么的内部斗争，这样团队就可以专注于交付。

有了额外的能见度，工作的广度成为了关注的焦点。我已经进入了我们管理的许多区域，但第一次清楚地看到了人们的担忧。我们有一个 10 多人的团队，有很多任务只有一两个人能完成。由于要学的东西太多，没人知道应该把技能提升的重点放在什么地方。技能矩阵看起来总是令人生畏和光秃秃的。但是有些决定是为了缓解这些问题。首先，凡是我们阻挠的、人们可以自己做的工作，我们都外包出去了。这涉及到围绕客户的各种技能提升，但使许多流程更顺畅、更快速。然后，团队被分成两部分:一个团队管理应用程序的操作和平台需求，另一个团队管理其他一切。实质上，将开发运营一分为二，一半负责实时运营，另一半负责开发资产。这种划分并不完美，但这意味着每个团队只需要学习 10 个左右的领域，而不是必须学习 20 个不同的领域。就在那时，我成为了其中一个团队的领导，并决定通过引入一种更具 scrum 风格的敏捷方法来更进一步…

# 敏捷之路

所有操作上的改变对于工作的可见性和外部团队对工作何时完成的透明性都很重要。然而，这项工作仍然没有太多的结构。我们周围的开发团队在两周一次的冲刺中完成他们的工作，而我们的工作似乎在无休止地延伸。有人可能在某件事情上工作了 6 个月而看不到尽头。尽管项目工作现在更有组织性，服务台的票据仍然是一团乱麻。当情绪爆发时，人们会在其中进进出出，这意味着一些非常琐碎的任务会在那里停留数周，而其他任务可能会被多人查看。为了解决这些问题，我们向敏捷世界更进了一步。

![](img/adab0497476f82ef115e33e48a662450.png)

Photo by [Pascal Habermann](https://unsplash.com/@pascal_habermann?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

两周一次的 sprints 的引入有助于进一步构建事物，并防止那些失控的问题。我们已经有了每日站立(通常；每个人都在做什么，他们的障碍是什么，等等)，但是很难在更高的层次上跟踪事情，sprint cycle 帮助了我们。在每次冲刺的开始，每个人都被分配了要完成的任务。然后在每个冲刺阶段结束时，会有更多的责任。不是为了培养一种指责文化，而是为了更好地理解:如果有人应该完成一项任务，但没有完成，是因为其他工作淹没了他们，还是他们需要在某个领域接受更多培训，或者他们需要团队中其他人的帮助？对于日常的单口相声，这种东西很容易被忽略，因为人们只会自己慢慢进步。这意味着，如果有人正在努力完成一项任务，那么分配给他们一些时间来提高技能或与其他人一起完成这项任务会更容易。

我们做的另一个改变是有一个指定的服务台资源。事实证明，我们通常筹集到足够多的门票，让一些人整天忙个不停。我们在每个冲刺阶段都这样做，即使是那些不喜欢服务台和值班时间的人也仍然欣赏这个过程，以及他们在剩下的工作中获得的额外的不间断的专注。除了能更好地控制门票，他们还能更及时地查看门票，没有一张门票被错过。这也是一个很好的培训资产的副作用。以前，如果有人不知道如何解决问题，他们会忽略它。现在，由于完成所有这些是某人的工作，他们寻求帮助并完成所有这些，学习并能够在下一次做它们。

最后，我们进行了全面的回顾、冲刺计划会议和积压管理。ScrumMaster 的角色由团队领导和项目经理分担，但我们还是应付过去了。通过我们所做的所有时间跟踪，我们更好地了解了一些任务需要多长时间，以及在接下来的 2 周内我们可以完成多少工作，这给了我们时间来计划内部改进。

这不是一个无缝的过程，但最后，我想每个人都同意情况有所好转。即使是那些一开始就对变革持怀疑态度的人。这并不是说我们没有引入一系列全新的问题…

# 新问题

一个更加敏捷的结构所带来的新的严格性和流程是幸福的。每个人都知道他们在做什么，项目被 PM 搁置，对 WIP 的控制给人一种不那么混乱的感觉。然而，现在出现了新的问题，因为我们的团队没有完全融入敏捷世界。

![](img/4fd8abeef6e1f3982483d096ca2dba9b.png)

[Image from Pixabay](https://pixabay.com/photos/water-sea-ocean-leisure-float-3149783/)

我们遇到的一个主要问题是在我们的 sprint 计划会议中的任务评估。正如每个敏捷团队所做的那样，我们开始[计划扑克](https://en.wikipedia.org/wiki/Planning_poker)来决定每个任务需要多长时间，并以此为基础来决定我们可以在下一次冲刺中完成多少任务。我们的第一个问题是，我们开始使用小时，而不是点。从管理的角度来看，这非常有效，因为很容易看到事情需要多长时间，而且当我们在吉拉记录时间时，很容易看到我们离完成还有多远，以及我们高估/低估了多少。然而，一项任务可能需要一个经验丰富的资源 1 个小时，但可能需要一个初级资源一整天甚至更长时间。所以我们必须先决定谁来做这项工作，然后再决定要花多长时间。

第二，即使我们已经将团队分开，工作仍然是非常广泛的，数量也是未知的。大多数时候，计划会议似乎是徒劳的，因为只有一个人曾经做过这项任务，或者更糟的是，这项任务完全是未知的。比如:“调查为什么服务器 X 每周至少死一次”。如果问题仅仅是缺少[交换空间](https://www.geeksforgeeks.org/swap-space-in-operating-system/)，那么像这样的任务可以在几个小时内完成，但最终确定需要一个内核补丁也可能需要几个星期。我们尽了最大努力，对于不常见的任务，如果时间允许，我们会有人解释所有步骤，而对于完全未知的任务，我们会投入一些调查时间，并在最初工作的基础上提出新的问题。这似乎很有效，我们的计划工作和实际工作通常是一致的(一旦我们也考虑到每个人需要 20%的时间做与任务无关的事情，比如管理电子邮件)。

我们遇到的另一个问题是任务的大小。在我们转向敏捷之前，我们有一个任务，比如“升级工具 Y”。如果这样的任务很复杂并且涉及很多领域，那么它可能需要一个月的时间。像这样的任务在敏捷的世界里并不好用，因为我们最终完成了接近 50%的计划任务。我们最终需要将较大的任务分解成较小的块，并分别对它们进行评估。这花费了更多的时间，但最终再次导致了团队和管理层都满意的更清晰的工作流。

# 我的外卖

![](img/7fb401759535ba89592bc0204a026dd3.png)

Photo by [Samuel Tresch](https://unsplash.com/@samuel_tresch?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

*   “开发运维是未定义的，因此可能是一个垃圾场”
    我发现，由于开发运维的定义非常模糊，并且任何开发运维团队都已经拥有非常广泛的职责，因此它很容易成为所有没有定义团队的工作结束的地方。显然，工作必须完成，如果你不能创建一个新的团队或找到一个更好的团队，只要确保记录工作，并确保支付账单的人意识到额外的责任。如果任何“DevOps”团队足够大的话，尝试划分它们也是值得的。
*   “敏捷可以很好地为部分服务台团队工作”
    如果你发现自己在一个也有服务台的团队中，我发现 scrum 可以很好地与轮流值班的服务台人员一起工作。如果你的团队没有任何非服务台的工作，那么它可能不会工作得很好，但是如果你有一些更大的工作，你仍然可以使用看板。
*   “就像 DevOps 这个术语一样，DevOps 任务可能非常模糊”
    它可能与我所在的项目有关，而不是我所在的团队，但通常当任务提出时，没有人知道如何解决它们，直到它们陷入困境。这可能与团队的经验有关，但即使在专家团队中，仍然会有需要大量调查的任务，并且很容易在时间和复杂性方面搞砸。不要试图隐藏或回避这个问题，而是在计划会议时将它考虑在内，并在能够对所需的工作量做出更具体的估计之前留出调查时间。
*   “DevOps 团队中任务的广度使敏捷变得更加困难”
    我也是 scrum 开发团队的一员，我发现在“DevOps”团队中，由于任务的广度和所需的知识，scrum 变得更加困难。这并不是说成为一名优秀的开发人员比成为一名优秀的 DevOps 工程师更容易，只是更加专业化。然而，我确实认为做一名初级开发人员比做一名初级 DevOps 工程师更容易，仅仅是因为所需知识的广度。因此，只要你能，试着减少这个宽度，同时仍然确保你有至少两个人可以做任何给定的任务。

总而言之，无论是开发团队、平台团队、工具团队还是某种开发支持团队，我发现我们转向敏捷是非常有益的。我认为如果没有最初的团队分裂，允许团队更少的人和责任，事情会变得更加困难。因此，如果你在一个类似的团队中，并且在工作的控制流程中挣扎，试试敏捷吧！

**关于作者** Kuba Jasko 是 AWS DevOps 版本 1 的工程师。