# JShell -快速浏览

> 原文：<https://medium.com/oracledevs/jshell-a-quick-look-d26f7e91a864?source=collection_archive---------1----------------------->

`[jshell](https://docs.oracle.com/javase/9/tools/jshell.htm)` [是一个新的 Java-9 工具](https://docs.oracle.com/javase/9/tools/jshell.htm)——一个 Java 的 REPL！！一开始我不确定它会有多有用，但是自从我开始玩它，我发现它的用途越来越多，而且它很酷。尽管有一些令人惊讶的事情。让我们看一看。

# 快速浏览

我们在 REPL 提示。我们可以做一些完全不令人惊讶的事情(但是很简洁！)事情:

还有一些元命令，试着从`/help`开始

`$n`是对结果的引用:

等等。我们可以动态地创建、修改和替换类:

当改变时，等级是`created`然后是`modified`或`replaced`。如果这个变化改变了方法签名或者添加/删除了一个字段，那么这个类就是`replaced`，否则就是`modified`。当你这样做时，实例会发生什么？

# 修改类

修改类会改变现有实例:

# 替换类

替换类会使实例引用无效:

# 分号插入

老实说，我内心深处的道格拉斯-克罗克福德对此有些恼火。**分号可选**。您可能会注意到，我在上面的代码中没有使用任何代码。规则似乎是，如果一个表达式*可以被*求值，那么它*将会被*求值。因此，键入代码时要小心，比如:

因为你会得到这个:

我用三种方法来处理这个问题:

*   所有东西都在一条线上。排长队不好看。

*   使用反向引用。通常只在我*忘记*关于分号插入的时候使用，并且伴随着我踢自己。

*   移动你的点。看起来有点令人惊讶，但工作正常。最小最坏的选择。

注意这里有一个[公开的 bug 来防止多行粘贴时的这种行为](https://bugs.openjdk.java.net/browse/JDK-8190294)

# 粘贴内容

似乎有一个 bug 阻止粘贴 2 行以上的代码。这里报道的是。这个 bug 被标记为`RESOLVED`，但是这个 bug 在最新的 JDK 9.0.1 中仍然存在(至少在 Linux 上)。解决方法是:

这将启动您的`$EDITOR`，您可以将任意多的行粘贴到其中，然后保存&退出，`jshell`对其进行评估。

# 结论

jshell 是一种处理 Java 代码的好方法。比用`main()`方法创建虚拟类好得多。Trisha Gee 向我们展示了如何使用 IntelliJ 的 jshell 的一个很好的演示——看起来很棒，我想其他 ide 也有类似的支持。试试吧:)

*最初发布于*[*mjg 123 . github . io*](http://mjg123.github.io)*。*