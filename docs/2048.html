<html>
<head>
<title>Learn SQL Injection by hacking a bank app</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过黑银行app学习SQL注入</h1>
<blockquote>原文：<a href="https://medium.com/duomly-blockchain-online-courses/learn-sql-injection-by-hacking-a-bank-app-dd52807ad934?source=collection_archive---------4-----------------------#2020-05-19">https://medium.com/duomly-blockchain-online-courses/learn-sql-injection-by-hacking-a-bank-app-dd52807ad934?source=collection_archive---------4-----------------------#2020-05-19</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/f4af2e2d434b4a0351fd6391750d683c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wfYuR4WIg4-9pzu4LmRiYw.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx"><a class="ae it" href="https://www.duomly.com" rel="noopener ugc nofollow" target="_blank">Programming courses online</a></figcaption></figure><h1 id="6373" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">介绍</h1><p id="363c" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">今天我们将学习如何进行SQL注入攻击，以及如何防止它。</p><p id="201b" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">你知道黑客每年窃取数十亿美元吗？</p><p id="aa5c" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">你知道几乎每30秒钟就有一次新的黑客攻击吗？</p><p id="817f" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">如果我们是开发人员，我们应该始终关心我们代码的安全性(至少有一点)。不管我们做前端还是后端，两者都是脆弱的。</p><p id="22e9" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">今天，我想向您介绍一下SQL注入攻击，它是什么，如何进行，为什么它是危险的，以及如何保护您的应用程序免受攻击。</p><p id="d794" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">开始吧！</p><p id="9788" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">如果你喜欢视频，这里是youtube版本:</p><figure class="kv kw kx ky fd ii"><div class="bz dy l di"><div class="kz la l"/></div><figcaption class="ip iq et er es ir is bd b be z dx">What is SQL Injection tutorial</figcaption></figure><h1 id="62d3" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">什么是SQL注入</h1><p id="8026" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">SQL注入是最流行的OWASP漏洞之一，它非常容易实现，但也可能造成可怕的破坏。</p><p id="0dbd" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这有点像我们可以将一些自定义的和不需要的命令推送到SQL数据库的情况。</p><p id="7334" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">例如，当我们有用户名输入时，我们可以输入自定义命令。</p><p id="eeb3" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">像我们可以使用删除整个表，从其他数据库表或自动解锁管理员帐户的数据。</p><h1 id="e43d" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">为什么SQL注入是危险的</h1><p id="673c" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated"><strong class="ju hi">数据泄露</strong></p><p id="88fb" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">通过SQL注入，攻击者可以快速访问普通用户永远无法访问的数据。</p><p id="c6bb" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">例如，这可能是你的私人信息，银行交易，敏感的个人数据，如你的身份证，或你住在哪里。</p><p id="2e60" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">更糟糕的是，如果数据库易受攻击，攻击者可以在一瞬间公开访问数百万条记录。</p><p id="8c81" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">可能的损坏</strong></p><p id="d3b5" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这种类型的攻击可能引发任何SQL命令，而不仅仅是获取数据。</p><p id="b673" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">例如，攻击者可以从您的帐户向他自己的帐户汇款，更改您的帐户余额，或者删除所有记录。</p><p id="12db" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">那会非常痛苦，尤其是没有后援的时候。</p><p id="1aef" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">未授权访问</strong></p><p id="8272" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">当我们构建一个应用程序时，通常，我们对x角色有一些权限。</p><p id="dd18" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">像只有管理员可以删除或编辑记录，对朋友的请求需要被邀请的人接受，等等。</p><p id="ac9e" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">如果攻击者可以进入数据库，从您的帐户发送消息，将他的帐户添加为经过验证的朋友，或者编辑您的社交档案中的帖子，会怎么样？</p><h1 id="8f64" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">让我们执行一次SQL注入攻击</h1><p id="c634" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">现在，我们将进行一次简单的攻击来获取某人的帐户访问权限。</p><p id="0e57" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">我们建立了一个银行应用程序，你可以测试攻击，检查代码和响应，以了解它是如何完全工作的。</p><p id="7c8e" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">进行SQL注入攻击的要求:</strong></p><p id="f56d" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">下载我们的后端代码:</strong></p><p id="79aa" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">以下是Golang银行应用后端代码的链接:</p><p id="c05c" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><a class="ae it" href="https://github.com/Duomly/go-bank-backend" rel="noopener ugc nofollow" target="_blank">https://github.com/Duomly/go-bank-backend</a></p><p id="9078" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">克隆它并进入这个文件夹。</p><p id="7d68" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">设置您的PostgreSQL数据库:</strong></p><p id="b3a3" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">您需要创建一个新的Postgres数据库。</p><p id="21a5" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">将其命名为bankapp并使用用户Postgres，或者您可以使用任何您想要的用户。</p><p id="a804" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">在这种情况下，您需要更改连接字符串。</p><p id="5084" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">在后端代码中设置连接:</strong></p><p id="c80f" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">您需要在两个文件中设置连接字符串，vulnerable-db.go和migrations.go</p><p id="6c95" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">开始迁移:</strong></p><p id="08b6" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">现在您需要转到main.go，注释API代码，并取消对迁移代码的注释。</p><p id="b66d" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">主函数的代码应该是这样的。</p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="4619" class="lg iv hh lc b fi lh li l lj lk">func main<strong class="lc hi">()</strong> <strong class="lc hi">{</strong></span><span id="cce5" class="lg iv hh lc b fi ll li l lj lk">migrations.Migrate<strong class="lc hi">()</strong></span><span id="a14a" class="lg iv hh lc b fi ll li l lj lk">// api.StartApi()</span><span id="aa78" class="lg iv hh lc b fi ll li l lj lk"><strong class="lc hi">}</strong></span></pre><p id="2a7e" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">从</strong>下载我们的前端代码</p><p id="45c2" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">在这一步，我们应该转到URL:</p><p id="ef44" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><a class="ae it" href="https://github.com/Duomly/angular9-tailwind-bank-frontend" rel="noopener ugc nofollow" target="_blank">https://github.com/Duomly/angular9-tailwind-bank-frontend</a></p><p id="36ce" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">克隆应用程序并转到文件夹。</p><p id="1274" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">接下来，我们应该通过npm install安装我们的依赖项，并通过npm start启动应用程序。</p><p id="a836" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">让我们开始乐趣:</strong></p><p id="3832" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">在配置的最后一步，我们应该取消之前所做的更改的注释，并启动API。</p><p id="8ab9" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">main.go中主函数的代码应该如下所示:</p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="20fc" class="lg iv hh lc b fi lh li l lj lk">func main<strong class="lc hi">()</strong> <strong class="lc hi">{</strong></span><span id="8374" class="lg iv hh lc b fi ll li l lj lk">// migrations.Migrate()</span><span id="e0cf" class="lg iv hh lc b fi ll li l lj lk">api.StartApi<strong class="lc hi">()</strong></span><span id="139d" class="lg iv hh lc b fi ll li l lj lk"><strong class="lc hi">}</strong></span></pre><p id="acd4" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">最后一步是运行main.go，在终端中键入:</p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="10b7" class="lg iv hh lc b fi lh li l lj lk">go run main.go</span></pre><p id="dffd" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">恭喜你，你已经准备好开始黑客了！</p><p id="6758" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">标准凭证:</strong></p><p id="e816" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">我们创建了两个不同的用户，他们的标准凭据是:</p><p id="2f9f" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">用户1: </strong></p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="8388" class="lg iv hh lc b fi lh li l lj lk">user: Martin</span><span id="2ca5" class="lg iv hh lc b fi ll li l lj lk">password: Martin</span></pre><p id="fc05" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">用户2: </strong></p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="ce66" class="lg iv hh lc b fi lh li l lj lk">user: Michael</span><span id="baa0" class="lg iv hh lc b fi ll li l lj lk">password: Michael</span></pre><p id="92cb" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">我们将做什么:</strong></p><p id="c79b" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">正如你所注意到的，我们有一个简单的哈希算法，寻找一个已经哈希过的密码。</p><p id="40c1" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">因此，我们将放入密码输入字段的所有技巧都将被转换为散列(即使我们将在那里添加一些SQL命令)，这意味着SQL不会将它们视为SQL命令。</p><p id="ebda" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">在这种情况下，我们需要关注用户名输入。</p><p id="4b03" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这是可行的，因为它是作为一个纯字符串进入SQL的。</p><p id="a547" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">我特别创造了一个脆弱的地方。</p><p id="b3c2" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">不应该这样在自己的app里做。</p><p id="8ddc" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">在文章的下一部分，我会告诉你应该如何正确地做。</p><p id="59ef" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">通过用户名查找用户</strong></p><p id="3aef" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">要通过用户名获取用户，我们可以在用户名输入中使用这些字符串之一。</p><p id="828b" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">当然，你可以使用更多的方法。</p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="52a9" class="lg iv hh lc b fi lh li l lj lk">Martin’ or username=’Martin’ AND 1 = 1 --</span></pre><p id="5011" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">或者</p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="f4a7" class="lg iv hh lc b fi lh li l lj lk">xx’ or username=’Martin’ AND 1 = 1 --</span></pre><p id="a21e" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这有点像通过名字Martin或名字Martin获得用户，如果我们将第一个Martin改为Michael，我们将获得两个配置文件。</p><p id="1e91" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">第二种方法的工作原理类似于获取用户名为xx或Martin且为true的用户。</p><p id="fdec" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">获取所有用户</strong></p><p id="b6c0" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">通过在用户名输入中使用这个字符串，我们将能够从名为users的表中获得所有记录。</p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="c63d" class="lg iv hh lc b fi lh li l lj lk">Martin’ or 1 = 1 --</span></pre><p id="70a1" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这种方法的工作原理类似于获取用户名为Martin或true的用户。</p><p id="5cb6" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这意味着“或真”将获得所有其他用户，因为条件已通过。</p><p id="bd65" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">通过ID获取用户</strong></p><p id="dac9" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">当我们在用户名输入字段中使用这一组合时，我们可以通过用户的id来获取用户。</p><p id="f973" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">当我们寻找admin(通常默认情况下admins有ID 1)时，这尤其有用。</p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="8b9a" class="lg iv hh lc b fi lh li l lj lk">xx’ or id=2 AND 1 = 1 --</span></pre><p id="511f" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这种方法的工作原理类似于获取一个用户名为xx或id 2的用户。</p><p id="0b1b" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">这些符号的含义:</strong></p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="a9c3" class="lg iv hh lc b fi lh li l lj lk">OR 1=1</span></pre><p id="5d00" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这个意思是1等于1，这是真的。就像通过了条件。</p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="e594" class="lg iv hh lc b fi lh li l lj lk">'</span></pre><p id="533a" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这一个记号就像是从弦上逃脱。</p><p id="51c4" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这使我们有可能对SQL中的字符串进行转义，并开始调用适当的SQL命令。</p><pre class="kv kw kx ky fd lb lc ld le aw lf bi"><span id="d9a9" class="lg iv hh lc b fi lh li l lj lk">--</span></pre><p id="21ae" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这有点像一个注释，让SQL忽略这两个破折号后的语句的其余部分。</p><p id="c33d" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这非常有用，例如，当我们需要发送更多字段时，比如密码。</p><p id="d2e8" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">当我们使用这个标记时，我们的SQL将忽略密码也应该被验证的信息。</p><h1 id="540a" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">如何保护应用免受SQL注入</h1><p id="f273" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated"><strong class="ju hi">前端表单验证</strong></p><p id="d6c8" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">当然，一个聪明的攻击者不应该有那么多问题来逃避前端验证。</p><p id="62b4" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">然而，这将是第一个障碍。</p><p id="b5e5" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">您可以在表单中添加特殊验证。</p><p id="5aa8" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这可以检查你的电子邮件是否等于电子邮件，如果你的用户名有任何特殊字符或长度不太大。</p><p id="9b54" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">如果您检测到可疑的组合，您可以阻止该表单。</p><p id="53e4" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">您可以向后端发送关于使用该IP/凭证的用户试图进行某种攻击的红色标志。</p><p id="8ab2" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">你可以，比如，暂时屏蔽他的IP，或者永久封杀他。</p><p id="75cd" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">同样，攻击者会知道如何避开你的禁令。</p><p id="fe0f" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">尽管如此，这是一个新的障碍，一些人可以放弃在你的应用上花更多的时间。</p><p id="ff83" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">后端变量验证</strong></p><p id="9cda" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">下一个想法是如何保护后端，它将验证所有的字符串和数据是否被正确发送，并通过所有的regexp验证。</p><p id="3ca6" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这非常有帮助，因为通过后端验证比通过前端验证要困难得多。</p><p id="d923" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这很有帮助，尤其是如果你对用户可以立即拨打的电话数量进行了限制。</p><p id="3aaf" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">附加通道比较，如CompareHashAndPassword </strong></p><p id="7ef0" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这种方法可以帮助您停止向攻击者发回数据。</p><p id="68eb" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">当然，如果您让攻击者执行SQL注入，他可能会删除某些东西或更改记录。</p><p id="2343" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">例如，您仍然可以在DB中找到x用户记录。</p><p id="2d59" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">接下来，使用bcrypt.CompareHashAndPassword对凭证进行身份验证。</p><p id="6b8e" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">应用程序不会将请求的数据返回给客户端，应该会抛出一个非验证错误。</p><p id="4db9" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">使用SQL库/框架</strong></p><p id="a1ab" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">使用一些框架，如golang的gorm或node.js的sequelize，可以在安全性方面给你很大帮助。</p><p id="a77c" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">在大多数情况下，有一个额外的安全层。</p><p id="2e95" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这将检查参数是否正确，并从用户发送到后端的数据中构建适当的查询。</p><p id="a512" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><strong class="ju hi">声明类型</strong></p><p id="bfc4" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">这一条非常关键。通过声明紧类型，你将避免很多问题，不仅仅是安全问题。</p><p id="41d5" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">如果你将设置所有的接口和类型，几乎不可能发送回错误的数据。</p><p id="6375" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">所有的数据将以100%的格式发送，您希望返回给最终的客户端(用户)。</p><h1 id="d5fa" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">结论</h1><p id="acb3" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">恭喜你！</p><p id="68f1" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">现在，您知道了如何执行SQL注入攻击，以及如何保护您的应用程序免受这种攻击。</p><p id="a36a" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">希望对你在构建自己的软件的时候很有帮助。</p><p id="4b27" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">你需要记住，用它来对付你没有得到所有者许可的应用是非法的。</p><p id="7b85" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">无论如何，你可以下载我们的代码，构建你自己的应用程序，或者找到虚拟实验室，在那里你可以做和测试。</p><p id="9da8" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">关注我们以获得更多关于编码的教程。</p><p id="4c01" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">以下是我的SQL连接教程:</p><p id="eb04" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated"><a class="ae it" href="https://www.blog.duomly.com/sql-join-with-examples-tutorial/" rel="noopener ugc nofollow" target="_blank"> SQL连接示例教程</a></p><figure class="kv kw kx ky fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lm"><img src="../Images/da0dbcf44b16aceb7cca413a6d9a5ef7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LJmZtnXM9S7lwHQJTEQngg.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx"><a class="ae it" href="https://www.duomly.com" rel="noopener ugc nofollow" target="_blank">Programming courses online</a></figcaption></figure><p id="8a15" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">感谢阅读，</p><p id="45fa" class="pw-post-body-paragraph js jt hh ju b jv kq jx jy jz kr kb kc kd ks kf kg kh kt kj kk kl ku kn ko kp ha bi translated">Duomly的Radek</p></div></div>    
</body>
</html>