<html>
<head>
<title>Tensor Flow lite: First custom model</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">张量流精简版:第一个定制模型</h1>
<blockquote>原文：<a href="https://medium.com/globant/tensor-flow-lite-first-custom-model-44ff9fe98c3a?source=collection_archive---------0-----------------------#2021-06-19">https://medium.com/globant/tensor-flow-lite-first-custom-model-44ff9fe98c3a?source=collection_archive---------0-----------------------#2021-06-19</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/8045ae6fd0c0207a7090dc86be447608.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tb63gsDiFnY9wcTFgyt7ug.png"/></div></div></figure><div class=""/><p id="e675" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最终，您将拥有一个工作的Android应用程序来使用您的定制模型。它将从存储在可绘制文件夹中的静态图像中预测项目。</p><figure class="jo jp jq jr fd hj er es paragraph-image"><div class="er es jn"><img src="../Images/970583948949932c67a065d8119f83d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1220/format:webp/1*ECK_W2LyZvQAgcnmFj1lqQ.png"/></div></figure></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="b669" class="jz ka hs bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">小介绍</h1><h2 id="c9ff" class="kx ka hs bd kb ky kz la kf lb lc ld kj ja le lf kn je lg lh kr ji li lj kv lk bi translated">什么是张量流精简版？</h2><p id="4c6b" class="pw-post-body-paragraph ip iq hs ir b is ll iu iv iw lm iy iz ja ln jc jd je lo jg jh ji lp jk jl jm ha bi translated">它是一套支持设备上机器学习的工具。这是一个针对移动设备和嵌入式设备的轻量级解决方案。它允许你在移动设备上运行ML模型。</p><p id="ccd5" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">它的一个主要特点是<strong class="ir ht">多平台支持。</strong>它涵盖了Android和iOS设备、嵌入式Linux和微控制器。</p><h2 id="f357" class="kx ka hs bd kb ky kz la kf lb lc ld kj ja le lf kn je lg lh kr ji li lj kv lk bi translated">模型制作者是什么？</h2><p id="e99d" class="pw-post-body-paragraph ip iq hs ir b is ll iu iv iw lm iy iz ja ln jc jd je lo jg jh ji lp jk jl jm ha bi translated">在为设备上的ML应用部署TensorFlow神经网络模型时，TFLite Model Maker库简化了将该模型调整和转换为特定的<strong class="ir ht">输入数据(您的训练图像)</strong>的过程。</p><h2 id="7f88" class="kx ka hs bd kb ky kz la kf lb lc ld kj ja le lf kn je lg lh kr ji li lj kv lk bi translated">为什么要用这个模型制作机？</h2><p id="616f" class="pw-post-body-paragraph ip iq hs ir b is ll iu iv iw lm iy iz ja ln jc jd je lo jg jh ji lp jk jl jm ha bi translated">Model Maker笔记本显示了一个端到端的示例，为您创建一个示例模型。您不需要去任何其他地方或安装任何其他工具或进行任何复杂的配置。</p><p id="5e30" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以将图像更新到驱动器目录中。我们可以用这个模型制作工具得到一个模型(。tflite)文件。</p><h1 id="0393" class="jz ka hs bd kb kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw bi translated">我们开始吧</h1><p id="239a" class="pw-post-body-paragraph ip iq hs ir b is ll iu iv iw lm iy iz ja ln jc jd je lo jg jh ji lp jk jl jm ha bi translated">有3个步骤:</p><ol class=""><li id="2d57" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm ma mb mc md bi translated">收集图片并上传到google drive。</li><li id="629c" class="lv lw hs ir b is me iw mf ja mg je mh ji mi jm ma mb mc md bi translated">使用Model Maker创建模型。</li><li id="af22" class="lv lw hs ir b is me iw mf ja mg je mh ji mi jm ma mb mc md bi translated">在Android应用程序中使用您的模型。</li></ol></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="2b8f" class="jz ka hs bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">1.收集图片并上传到google drive</h1><p id="4485" class="pw-post-body-paragraph ip iq hs ir b is ll iu iv iw lm iy iz ja ln jc jd je lo jg jh ji lp jk jl jm ha bi translated">在我们必须做的事情上，图像本身应该是自足的。建议每个类别至少有100张图片。</p><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mj"><img src="../Images/bf088504de1fa3e6f3f15b5b59492c86.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VMQvjY1oGjovW41e-WUyDA.png"/></div></div></figure></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="10b6" class="jz ka hs bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">2.使用模型制作工具创建您的模型</h1><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mk"><img src="../Images/139f0039dd9cff9db5bf9b60cb98e149.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b1fg5SfFn3dl91yaI4BP3g.png"/></div></div></figure><p id="0306" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">转到模型制作人:<a class="ae ml" href="https://colab.research.google.com/github/tensorflow/tensorflow/blob/master/tensorflow/lite/g3doc/tutorials/model_maker_image_classification.ipynb" rel="noopener ugc nofollow" target="_blank">https://colab . research . Google . com/github/tensor flow/tensor flow/blob/master/tensor flow/lite/g3doc/tutorials/model _ maker _ image _ class ification . ipynb</a></p><figure class="jo jp jq jr fd hj er es paragraph-image"><div class="er es mm"><img src="../Images/ef20220abe56fdc474533ab967f704f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:236/format:webp/1*-C6ltg20LPhDUrEqe0-L5A.png"/></div></figure><p id="02e4" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">你不需要做什么，只需要一个接一个地运行python脚本。从...开始，</p><ul class=""><li id="9983" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">安装Model Maker包。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mo"><img src="../Images/701f10830808916312c9c4bee1e54cdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Pe5zWWzlgkL9HSW_g0doOA.png"/></div></div></figure><ul class=""><li id="76a5" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">导入所需的包。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mp"><img src="../Images/dcaa7d6e8f7b1b9e92dfebb9291aa62f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dEUgM8BkYJadF6H1K6WJDA.png"/></div></div></figure><ul class=""><li id="8618" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">单击左侧栏中的“文件”图标。</li><li id="dff8" class="lv lw hs ir b is me iw mf ja mg je mh ji mi jm mn mb mc md bi translated">单击顶栏上的“安装驱动器”图标。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mq"><img src="../Images/8c57dfe536191e5f5f9a9b5cfedda25f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2_nwxGB3BvX_XRDqZWsUeQ.png"/></div></div></figure><ul class=""><li id="973e" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">脚本中包含了一个新代码，用于装载驱动器。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mr"><img src="../Images/12c4c06835658ab5b252dac3c37b26a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ptz87uKMXliqLvf16PnWIg.png"/></div></div></figure><ul class=""><li id="3a58" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">转到给定的URL并授权使用google drive。</li><li id="2de4" class="lv lw hs ir b is me iw mf ja mg je mh ji mi jm mn mb mc md bi translated">复制粘贴最后给出的授权码，然后按<strong class="ir ht">回车。</strong></li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ms"><img src="../Images/3cc990eeee327b61013a8fdc631333b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Sbac7elOOvEpV4PncpJ25g.png"/></div></div></figure><ul class=""><li id="4e41" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">现在驱动器已安装，您可以从步骤1访问映像。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mt"><img src="../Images/4d191f613ca1c4c5f62237e5d50a4c32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*j5wZVEhCpwCQIn2IOgSIZQ.png"/></div></div></figure><ul class=""><li id="4546" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">打开驱动器并转到您的文件夹(汽车)。</li><li id="538b" class="lv lw hs ir b is me iw mf ja mg je mh ji mi jm mn mb mc md bi translated">右键单击并点击“复制路径”。</li><li id="7669" class="lv lw hs ir b is me iw mf ja mg je mh ji mi jm mn mb mc md bi translated"><strong class="ir ht">现在你有了图片的路径。</strong></li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mu"><img src="../Images/bd72eb6d76d32900af68fa09fdc71529.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I6KfhfGfWd_iZVe4oNfwjg.png"/></div></div></figure><ul class=""><li id="cf9c" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">注释下一个代码，并添加如图所示的代码。</li><li id="134f" class="lv lw hs ir b is me iw mf ja mg je mh ji mi jm mn mb mc md bi translated">这里将使用图像路径。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mv"><img src="../Images/3c9bd74dc3d6ee2062afa2e77ca3be71.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cxdG4WoahhyOmBaSlNULMA.png"/></div></div></figure><ul class=""><li id="0b26" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">加载特定于设备上ML应用程序的输入数据。将其拆分为训练数据和测试数据。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mw"><img src="../Images/b63d196d3d56b4316f75537b1bfb5368.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XjP2QMjamL06MTdo-Qkpvg.png"/></div></div></figure><ul class=""><li id="7d02" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">自定义张量流模型。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mx"><img src="../Images/0399723544d52a1b59252ea33ac49612.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TEdGUk-a065ZW_wKus9jrQ.png"/></div></div></figure><ul class=""><li id="de7a" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">评估模型。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es my"><img src="../Images/536f57b7f008cdb6299cc9c9dc701557.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xJjTe7p3OxCqJw3cTxuWjA.png"/></div></div></figure><ul class=""><li id="15e7" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">导出到TensorFlow Lite模型。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mz"><img src="../Images/15c8f0982121a75506875f576253e6a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EH0TrZ4ngwIyInmsq99gEA.png"/></div></div></figure><ul class=""><li id="5f3b" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">下载<strong class="ir ht"> model.tflite </strong>。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es na"><img src="../Images/ca7f331bd5076b4c7c373f6542b660be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mg1mzHCNbwH9FFYqwNXngA.png"/></div></div></figure><h1 id="ee1d" class="jz ka hs bd kb kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw bi translated">搞定了。！！</h1></div><div class="ab cl js jt go ju" role="separator"><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx jy"/><span class="jv bw bk jw jx"/></div><div class="ha hb hc hd he"><h1 id="2d8a" class="jz ka hs bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">3.在Android应用程序中使用您的模型。</h1><blockquote class="nb nc nd"><p id="45d5" class="ip iq ne ir b is it iu iv iw ix iy iz nf jb jc jd ng jf jg jh nh jj jk jl jm ha bi translated">资产</p></blockquote><ul class=""><li id="d2f8" class="lv lw hs ir b is it iw ix ja lx je ly ji lz jm mn mb mc md bi translated">将<strong class="ir ht"> model.tflite </strong>放到<strong class="ir ht">资产</strong>目录下。</li></ul><figure class="jo jp jq jr fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ni"><img src="../Images/1f815c7cd28513849a6539744fc1c0f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3l5h0P1wcK7MBH5CsRV_1w.png"/></div></div></figure><blockquote class="nb nc nd"><p id="ee6e" class="ip iq ne ir b is it iu iv iw ix iy iz nf jb jc jd ng jf jg jh nh jj jk jl jm ha bi translated">build.gradle</p></blockquote><figure class="jo jp jq jr fd hj"><div class="bz dy l di"><div class="nj nk l"/></div></figure><blockquote class="nb nc nd"><p id="3412" class="ip iq ne ir b is it iu iv iw ix iy iz nf jb jc jd ng jf jg jh nh jj jk jl jm ha bi translated">activity_home.xml</p></blockquote><figure class="jo jp jq jr fd hj"><div class="bz dy l di"><div class="nj nk l"/></div></figure><blockquote class="nb nc nd"><p id="f4f4" class="ip iq ne ir b is it iu iv iw ix iy iz nf jb jc jd ng jf jg jh nh jj jk jl jm ha bi translated">HomeActivity.java</p></blockquote><figure class="jo jp jq jr fd hj"><div class="bz dy l di"><div class="nj nk l"/></div></figure><h1 id="3f95" class="jz ka hs bd kb kc lq ke kf kg lr ki kj kk ls km kn ko lt kq kr ks lu ku kv kw bi translated">尽情享受吧！！！</h1></div></div>    
</body>
</html>