<html>
<head>
<title>Use Node.JS as a Web Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用节点。作为Web服务器的JS</h1>
<blockquote>原文：<a href="https://medium.easyread.co/http-server-with-node-js-5e0d8df901b4?source=collection_archive---------0-----------------------#2020-04-23">https://medium.easyread.co/http-server-with-node-js-5e0d8df901b4?source=collection_archive---------0-----------------------#2020-04-23</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><figure class="ip iq gp gr ir is gh gi paragraph-image"><div role="button" tabindex="0" class="it iu di iv bf iw"><div class="gh gi io"><img src="../Images/9d5f8a85ff31ed641e36301e0adeee66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*IxcokSFCWJg_-bWi"/></div></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk">Photo by <a class="ae jd" href="https://unsplash.com/@casparrubin?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Caspar Camille Rubin</a> on <a class="ae jd" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><div class=""><h2 id="8db8" class="pw-subtitle-paragraph kd jf jg bd b ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku dk translated">节点中带有核心HTTP的HTTP服务器。射流研究…</h2></div><blockquote class="kv kw kx"><p id="e78e" class="ky kz la lb b lc ld kh le lf lg kk lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">在本文中，我们将讨论如何使用节点。JS API来处理基本的服务器功能，比如GET和POST。编写服务器代码的一个更简单的方法是通过一个叫做<strong class="lb jh"> express </strong>的框架(更新:我在这里使用了<a class="ae jd" href="https://medium.com/easyread/introduction-to-express-js-246191ec05f2" rel="noopener">express framework<em class="jg">)。当我们掌握了处理基本web服务器功能的核心思想后，我将在接下来的文章中写相关的教程</em></a></p></blockquote><p id="b7ad" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">要在Node JS引擎中创建一个带有HTTP模块的web服务器，我们需要使用下面的方法:</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="202d" class="mh mi jg md b gy mj mk l ml mm"><strong class="md jh">http.createServer(callback)</strong></span></pre><blockquote class="kv kw kx"><p id="290b" class="ky kz la lb b lc ld kh le lf lg kk lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated">这里，<em class="jg">回调</em>将接受两个参数；一个<strong class="lb jh">请求</strong>和一个<strong class="lb jh">响应。</strong><strong class="lb jh">请求</strong>参数将数据从客户端发送到服务器，以便数据可以被处理，之后<strong class="lb jh">响应</strong>从服务器发送到客户端。</p></blockquote><p id="d265" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">最基本的例子可以是:</p><figure class="ly lz ma mb gt is"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk"><a class="ae jd" href="https://gist.github.com/HussainArif12/14abf0cf1b31fb8edb214b6e3c3a531b" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="bfd6" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">代码甚至可以进一步缩短。可以将<em class="la"> res.write()和res.end() </em>替换为:</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="9696" class="mh mi jg md b gy mj mk l ml mm"><strong class="md jh">res.end('Hello World')</strong> //Write response AND then end it </span></pre><p id="3af4" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">通过命令行运行代码。如果你没有在终端上打印任何字，那是正常的。您应该可以在浏览器中输入:<code class="fe mp mq mr md b"><strong class="lb jh">localhost:3000</strong></code>来得到结果</p><p id="dd06" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">屏幕上会打印出“你好，世界”字样</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="2b96" class="mz mi jg bd na nb nc nd ne nf ng nh ni km nj kn nk kp nl kq nm ks nn kt no np bi translated">指定标题</h1><p id="8371" class="pw-post-body-paragraph ky kz jg lb b lc nq kh le lf nr kk lh lv ns lk ll lw nt lo lp lx nu ls lt lu ij bi translated">response.writeHead()向请求发送头响应。或者用于设置状态代码和创建HTTP头。</p><p id="4f20" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">如果您想指定要在HTML中显示的服务器响应。你需要告诉头部<strong class="lb jh">内容类型应该是HTML </strong></p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="d0bf" class="mh mi jg md b gy mj mk l ml mm">http.createServer((req,res)=&gt; {<br/><strong class="md jh">res.writeHead(200,{'Content-Type':'text/html',<br/>'Content-Length':body.length})</strong><br/>..</span></pre><p id="4364" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><em class="la"> res.writeHead() </em>的第一个参数是<strong class="lb jh">响应码</strong>。可以是<strong class="lb jh"> 2xx </strong>、<strong class="lb jh"> 3xx </strong>、<strong class="lb jh"> 4xx、</strong>或<strong class="lb jh"> 5xx。</strong></p><p id="7e56" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">第二个参数是<strong class="lb jh">选项。</strong>在这里，我们指定内容类型为HTML，即我们的响应将以HTML格式显示，并且内容的长度将等于您的正文长度。</p><p id="6124" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">您甚至可以使用<em class="la">响应参数</em>属性来更改标题:</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="0417" class="mh mi jg md b gy mj mk l ml mm"><strong class="md jh">response.writeHead = 400</strong></span></pre></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="7968" class="mz mi jg bd na nb nc nd ne nf ng nh ni km nj kn nk kp nl kq nm ks nn kt no np bi translated">HTTP服务器请求</h1><blockquote class="kv kw kx"><p id="6988" class="ky kz la lb b lc ld kh le lf lg kk lh li lj lk ll lm ln lo lp lq lr ls lt lu ij bi translated"><em class="jg"> http.createServer </em>方法的<em class="jg"> req </em>参数具有关于传入请求的所有信息，例如请求有效负载、头、URL等。</p></blockquote><p id="d56b" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated"><code class="fe mp mq mr md b"><strong class="lb jh"><em class="la">req</em></strong></code>参数具有以下属性</p><ul class=""><li id="9a36" class="nv nw jg lb b lc ld lf lg lv nx lw ny lx nz lu oa ob oc od bi translated"><code class="fe mp mq mr md b"><strong class="lb jh"><em class="la">request.headers</em></strong></code>:关于请求头的信息，如连接、主机、授权等。</li><li id="0577" class="nv nw jg lb b lc oe lf of lv og lw oh lx oi lu oa ob oc od bi translated"><code class="fe mp mq mr md b"><strong class="lb jh"><em class="la">request.method</em></strong></code>:关于传入请求方法的信息，如GET、POST、PUT、DELETE、OPTIONS、HEAD等。</li><li id="0381" class="nv nw jg lb b lc oe lf of lv og lw oh lx oi lu oa ob oc od bi translated"><code class="fe mp mq mr md b"><strong class="lb jh"><em class="la">request.url</em></strong></code>:传入请求URL的信息，如<code class="fe mp mq mr md b"><strong class="lb jh">/accounts, /users, /messages</strong></code>等</li></ul><h2 id="6469" class="mh mi jg bd na oj ok dn ne ol om dp ni lv on oo nk lw op oq nm lx or os no ot bi translated">例子</h2><figure class="ly lz ma mb gt is"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk"><a class="ae jd" href="https://gist.github.com/HussainArif12/0906ff8ef80dd77d0018833590595326" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><h1 id="489a" class="mz mi jg bd na nb ou nd ne nf ov nh ni km ow kn nk kp ox kq nm ks oy kt no np bi translated">在服务器中处理传入的请求正文</h1><p id="f1b8" class="pw-post-body-paragraph ky kz jg lb b lc nq kh le lf nr kk lh lv ns lk ll lw nt lo lp lx nu ls lt lu ij bi translated">假设客户端发送了数据，我们如何处理它？</p><h2 id="f8a0" class="mh mi jg bd na oj ok dn ne ol om dp ni lv on oo nk lw op oq nm lx or os no ot bi translated">例子</h2><figure class="ly lz ma mb gt is"><div class="bz fp l di"><div class="mn mo l"/></div><figcaption class="iz ja gj gh gi jb jc bd b be z dk"><a class="ae jd" href="https://gist.github.com/HussainArif12/1c8664cb262d0e3569aa00cf98aa7b89" rel="noopener ugc nofollow" target="_blank">Source</a></figcaption></figure><p id="5553" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">执行这段代码需要一种稍微不同的方式:</p><p id="9b9a" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">如果你使用的是Windows，首先你需要安装一个名为<a class="ae jd" href="https://curl.haxx.se/windows/" rel="noopener ugc nofollow" target="_blank"> cURL </a>的工具，然后通过命令行运行代码。</p><p id="2a45" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">要发送数据，请打开另一个命令行窗口，并写入:</p><pre class="ly lz ma mb gt mc md me mf aw mg bi"><span id="347b" class="mh mi jg md b gy mj mk l ml mm"><strong class="md jh">curl -x POST -d “key-value” localhost:3000</strong></span></pre><p id="cbeb" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">cURL的另一个替代品是<a class="ae jd" href="https://www.postman.com/product/api-client" rel="noopener ugc nofollow" target="_blank"> Postman </a></p><p id="9bdc" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">在之前的命令行窗口中，您会发现通过cURL发送的数据。在这种情况下，是<code class="fe mp mq mr md b"><strong class="lb jh">key-value</strong></code></p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><h1 id="0978" class="mz mi jg bd na nb nc nd ne nf ng nh ni km nj kn nk kp nl kq nm ks nn kt no np bi translated">更多资源</h1><ul class=""><li id="737c" class="nv nw jg lb b lc nq lf nr lv oz lw pa lx pb lu oa ob oc od bi translated"><a class="ae jd" href="https://stackabuse.com/how-to-start-a-node-server-examples-with-the-most-popular-frameworks/" rel="noopener ugc nofollow" target="_blank">如何启动节点服务器</a></li><li id="3130" class="nv nw jg lb b lc oe lf of lv og lw oh lx oi lu oa ob oc od bi translated"><a class="ae jd" href="https://www.tutorialsteacher.com/nodejs/create-nodejs-web-server" rel="noopener ugc nofollow" target="_blank">创建Node.js Web服务器</a></li></ul><p id="cda5" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">在下一篇文章中，我们将使用Express来使我们的请求处理变得更加容易，并且在这个过程中有更短的代码行。</p><p id="a18c" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">今天到此为止。谢谢你坚持到最后！</p><p id="cb34" class="pw-post-body-paragraph ky kz jg lb b lc ld kh le lf lg kk lh lv lj lk ll lw ln lo lp lx lr ls lt lu ij bi translated">呆在家里，注意安全！</p></div><div class="ab cl ms mt hu mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ij ik il im in"><figure class="ly lz ma mb gt is"><div class="bz fp l di"><div class="pc mo l"/></div></figure></div></div>    
</body>
</html>