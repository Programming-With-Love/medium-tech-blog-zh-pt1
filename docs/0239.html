<html>
<head>
<title>Theming with AppCompat</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用AppCompat进行主题化</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/theming-with-appcompat-1a292b754b35?source=collection_archive---------2-----------------------#2016-01-21">https://medium.com/androiddevelopers/theming-with-appcompat-1a292b754b35?source=collection_archive---------2-----------------------#2016-01-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="d47d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我喜欢标准组件——处理通用功能和可访问性的基本构件。我更喜欢设计一致的标准组件——这是<a class="ae jc" href="https://www.youtube.com/watch?v=5Be2mJzP-Uw?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank"> AppCompat </a>提供的现成组件。但我最喜欢的是什么？标准组件看起来很棒，并为我的应用程序带来个性。这就是当你使用AppCompat提供的主题时所得到的结果。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="2b73" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在你可以添加一些颜色到你的主题中，比如<em class="jk"> colorPrimary </em>、<em class="jk"> colorPrimaryDark </em>和<em class="jk"> colorAccent </em>，你可以影响你的应用程序的大部分，而无需单独定制组件。</p><h1 id="252a" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">物质(设计)世界中的主题化</h1><p id="3992" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">说到主题化，棒棒糖随着材料设计的引入有了很大的改变。人们不再期望每个按钮都完全相同或完全定制。用于生成<a class="ae jc" href="http://android-holo-colors.com?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank">彩色组件</a>或<a class="ae jc" href="http://jgilfelt.github.io/android-actionbarstylegenerator?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank">定制彩色动作条</a>的工具从必要的变成了超出实际需要的。相反，你可以定制你的主题的<a class="ae jc" href="http://developer.android.com/training/material/theme.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog#ColorPalette" rel="noopener ugc nofollow" target="_blank">调色板</a>来自动给你的大部分应用着色。强大的东西。</p><p id="f31c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但不应该只有棒棒糖和更高的东西才是酷的东西，对吗？因此<a class="ae jc" href="http://android-developers.blogspot.com/2014/10/appcompat-v21-material-design-for-pre.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank"> AppCompat v21 </a>的一大重点是将这一新主题向后移植到所有API 7+设备，并且从那时起支持才开始增长(随着色调感知小部件在<a class="ae jc" href="http://android-developers.blogspot.com/2015/04/android-support-library-221.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank"> AppCompat 22.1 </a>中公开以及更多功能在<a class="ae jc" href="http://android-developers.blogspot.com/2015/10/android-support-library-231.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank"> AppCompat 23.1 </a>中添加)。这意味着一个简单的主题可能看起来像:</p><pre class="jd je jf jg fd ko kp kq kr aw ks bi"><span id="a3ac" class="kt jm hh kp b fi ku kv l kw kx">&lt;resources&gt;<br/> &lt;!-- inherit from the AppCompat theme --&gt;<br/> &lt;style name="AppTheme" parent="Theme.AppCompat"&gt;</span><span id="0536" class="kt jm hh kp b fi ky kv l kw kx">  &lt;!-- your app branding color for the app bar --&gt;<br/>  &lt;item name="<strong class="kp hi">colorPrimary"</strong>&gt;@color/primary&lt;/item&gt;</span><span id="d2b1" class="kt jm hh kp b fi ky kv l kw kx">  &lt;!-- darker variant for the status bar and contextual app bars --&gt;<br/>  &lt;item name="<strong class="kp hi">colorPrimaryDark"</strong>&gt;@color/primary_dark&lt;/item&gt;</span><span id="8e6a" class="kt jm hh kp b fi ky kv l kw kx">  &lt;!-- theme UI controls like checkboxes and text fields --&gt;<br/>  &lt;item name="<strong class="kp hi">colorAccent"</strong>&gt;@color/accent&lt;/item&gt;</span><span id="33d7" class="kt jm hh kp b fi ky kv l kw kx"> &lt;/style&gt;<br/>&lt;/resources&gt;</span></pre><p id="0b60" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">与棒棒糖之前你可能看到的非常不同(谢天谢地！).</p><h1 id="1c85" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">原色</h1><p id="a246" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">你要添加的第一个颜色是<strong class="ig hi"> <em class="jk"> colorPrimary </em> </strong>。这种颜色应该代表您的主要品牌颜色，用户应该将它与您的应用程序相关联(因此它是“主要”名称)。显然，首先要用colorPrimary着色的应该是你的<a class="ae jc" href="http://www.google.com/design/spec/layout/structure.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog#structure-app-bar" rel="noopener ugc nofollow" target="_blank">应用栏</a>。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es kz"><img src="../Images/93605de47599f0fcd6536efd61a6f357.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wIZxUuDiYeRXI_SWVRceFw.png"/></div></div></figure><p id="23aa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用<em class="jk">主题的基本主题时。AppCompat </em>和AppCompat提供的应用程序栏，你会发现应用程序栏的背景自动使用你的<em class="jk"> colorPrimary </em>。然而，如果你使用一个<a class="ae jc" href="http://developer.android.com/reference/android/support/v7/widget/Toolbar.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank"> <em class="jk">工具栏</em> </a>(以及一个<em class="jk">主题。AppCompat.NoActionBar </em>主题，很有可能)，你需要手动设置背景颜色。</p><pre class="jd je jf jg fd ko kp kq kr aw ks bi"><span id="4137" class="kt jm hh kp b fi ku kv l kw kx">&lt;android.support.v7.widget.Toolbar<br/>  android:layout_width="match_parent"<br/>  android:layout_height="wrap_content"<br/>  <strong class="kp hi">android:background="?attr/colorPrimary</strong>" /&gt;</span></pre><p id="4e34" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如我们在<a class="ae jc" href="https://plus.google.com/+AndroidDevelopers/posts/AV2ooBWY1iy?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank">之前关于应用程序栏</a>着色的提示中提到的，<em class="jk">？attr/ </em>格式是你告诉Android这个值应该从你的主题中解析，而不是直接从一个资源中解析。通常当选择<em class="jk">原色</em>时，考虑500值左右的<a class="ae jc" href="https://www.google.com/design/spec/style/color.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog#color-color-palette" rel="noopener ugc nofollow" target="_blank">材料调色板</a>中的颜色。</p><h1 id="9dfa" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">彩色原色深色</h1><p id="5d53" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">正如您可能从名称中所料，<strong class="ig hi"><em class="jk">colorPrimaryDark</em></strong>是您的原色的一种更暗的变体，它被用作修饰屏幕顶部的状态栏的背景色。这种颜色的差异让用户在系统控制的状态栏和你的应用程序之间有一个清晰的区分。与<em class="jk"> colorPrimary </em>相比，这应该是同一色调的<a class="ae jc" href="https://www.google.com/design/spec/style/color.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog#color-color-palette" rel="noopener ugc nofollow" target="_blank">调色板</a>中的700色。</p><p id="74ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">虽然AppCompat可以反向移植很多东西，但正确地给状态栏着色依赖于Lollipop中引入的新API(即<a class="ae jc" href="http://developer.android.com/reference/android/R.attr.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog#windowDrawsSystemBarBackgrounds" rel="noopener ugc nofollow" target="_blank"><em class="jk">windowdrawsystembarbackgrounds</em></a>)，所以不要指望在旧平台版本上看到<em class="jk"> colorPrimaryDark </em>状态栏。</p><h1 id="4e66" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">色彩强调</h1><p id="b3ff" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">当<em class="jk"> colorPrimary </em>和<em class="jk"> colorPrimaryDark </em>更适合作为用户界面部分的背景色时，大多数时候你会看到<strong class="ig hi"> <em class="jk"> colorAccent </em> </strong>是少量的，它们提供了一种对比色来引起对某些组件的注意。</p><p id="948f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">事实上，许多内置组件已经使用了<em class="jk"> colorAccent </em>:</p><ul class=""><li id="fa36" class="lg lh hh ig b ih ii il im ip li it lj ix lk jb ll lm ln lo bi translated">选中的复选框</li><li id="1991" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated">单选按钮</li><li id="727b" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated"><a class="ae jc" href="http://developer.android.com/reference/android/support/v7/widget/SwitchCompat.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank">T33】switch compatT35】</a></li><li id="4de2" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated"><em class="jk">编辑文本</em>的聚焦下划线和光标</li><li id="9337" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated"><a class="ae jc" href="http://developer.android.com/reference/android/support/design/widget/TextInputLayout.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank"> <em class="jk"> TextInputLayout </em> </a>的浮动标签</li><li id="68d2" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated"><a class="ae jc" href="http://developer.android.com/reference/android/support/design/widget/TabLayout.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank"><em class="jk">talayout</em></a>的当前页签指示器</li><li id="9c43" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated">选中<a class="ae jc" href="http://developer.android.com/reference/android/support/design/widget/NavigationView.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank"> <em class="jk">导航视图</em> </a>项</li><li id="7a2d" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated"><a class="ae jc" href="http://developer.android.com/reference/android/support/design/widget/FloatingActionButton.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank"> <em class="jk">浮动操作按钮</em> </a>的背景</li></ul><p id="c2b0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">虽然你可能会注意到相当多的应用程序专注于<em class="jk"> colorPrimary </em>和<em class="jk"> colorPrimaryDark </em>(他们毕竟是初级的)，但<em class="jk"> colorAccent </em>可以是一种引导用户注意力、提供背景和激发信心的简单方法(如果你关注用户研究，所有这些都很重要！).</p><h1 id="0c47" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">更多颜色</h1><p id="e612" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">如果这三种主色还不够，你还不需要为特定的组件着色:调色板中还有一些颜色可以帮助你微调某些东西:</p><ul class=""><li id="cb1c" class="lg lh hh ig b ih ii il im ip li it lj ix lk jb ll lm ln lo bi translated"><strong class="ig hi"><em class="jk">colorControlNormal</em></strong>控制组件的“正常”状态，如未选中的编辑文本、未选中的复选框和单选按钮</li><li id="d432" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated"><strong class="ig hi"><em class="jk">colorControlActivated</em></strong>覆盖<em class="jk"> colorAccent </em>作为复选框和单选按钮的激活或选中状态</li><li id="1596" class="lg lh hh ig b ih lp il lq ip lr it ls ix lt jb ll lm ln lo bi translated"><strong class="ig hi"> <em class="jk">颜色控制高亮</em> </strong>控制波纹着色</li></ul><h1 id="35d7" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">在主题叠加的帮助下对视图进行主题化</h1><p id="128f" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">上面的示例主题有一个父主题<em class="jk">主题。AppCompat </em>。如果你曾经看过<a class="ae jc" href="https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v7/appcompat/res/values/themes_base.xml?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank">基本主题的源代码</a>，你会看到主题设置了几乎所有可能的东西，就像你对活动主题的期望一样。然而，从<a class="ae jc" href="http://android-developers.blogspot.com/2015/04/android-support-library-221.html?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank">版本22.1 </a>开始，Lollipop和AppCompat使得<strong class="ig hi">将主题应用到单个视图</strong>成为可能。</p><p id="7232" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如我们在<a class="ae jc" href="https://plus.google.com/+AndroidDevelopers/posts/JXHKyhsWHAH?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank">之前的提示</a>中提到的，<strong class="ig hi"> ThemeOverlay </strong>是一种独立类型的父主题，<strong class="ig hi">只改变需要的内容</strong>——例如，<em class="jk"> ThemeOverlay。AppCompat.Light </em>改变背景颜色、文本颜色和高亮颜色，就好像它是一个灯光主题和<em class="jk">主题覆盖图。AppCompat.Dark </em>同样可以切换到黑暗主题。</p><p id="cb1e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这在工具栏中尤为普遍，以至于有单独的<em class="jk">主题覆盖。AppCompat.ActionBar </em>和<em class="jk"> ThemeOverlay。AppCompat.Dark.ActionBar，</em>也将<em class="jk"> colorControlNormal </em>更改为<em class="jk">Android:textColorPrimary</em>并按照这些组件的预期设置正确的<em class="jk"> SearchView </em>样式:</p><pre class="jd je jf jg fd ko kp kq kr aw ks bi"><span id="8211" class="kt jm hh kp b fi ku kv l kw kx">&lt;!-- Ensure text is readable on a dark background by using a <br/>     Dark ThemeOverlay --&gt;<br/>&lt;android.support.v7.widget.Toolbar<br/>  android:layout_width="match_parent"<br/>  android:layout_height="wrap_content"<br/>  android:background="?attr/colorPrimary"<br/>  android:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar" /&gt;</span></pre><p id="2155" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当然，这里真正的强大之处在于构建你自己的自定义主题叠加，就像任何其他主题一样——只要确保你使用的是<em class="jk">主题叠加的变体。AppCompat </em>作为父主题:</p><pre class="jd je jf jg fd ko kp kq kr aw ks bi"><span id="0840" class="kt jm hh kp b fi ku kv l kw kx">&lt;style name="ThemeOverlay.AccentSecondary"<br/>       parent="ThemeOverlay.AppCompat"&gt;<br/>  &lt;item name=”colorAccent”&gt;@color/accent_secondary&lt;/item&gt;<br/>&lt;/style&gt;</span></pre><p id="101a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因为是那些<em class="jk"> ThemeOverlay。AppCompat </em>父主题自动将AppCompat <em class="jk"> colorPrimary </em>转换为Lollipop+framework<em class="jk">Android:color primary</em>属性——如果您忽略父主题，您会发现事情并不完全如您所愿！</p><h1 id="ec1d" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">主题:对每个应用都有用</h1><p id="66e3" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">因此，无论你有一个设计团队，一个设计师，还是自己设计你的应用程序，使用你可用的主题颜色是重要的第一步，并确保你最大限度地利用标准组件，而不是求助于几乎不同灰度的应用程序。</p><p id="7ce0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"># BuildBetterApps</p><p id="1e71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">加入关于<a class="ae jc" href="https://plus.google.com/u/0/+AndroidDevelopers/posts/dait7RcbFaM?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank"> Google+帖子</a>的讨论，关注<a class="ae jc" href="https://plus.google.com/collection/sLR0p?utm_campaign=android_series_themingappcompat_012116&amp;utm_source=medium&amp;utm_medium=blog" rel="noopener ugc nofollow" target="_blank"> Android开发模式集</a>了解更多！</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="la lb di lc bf ld"><div class="er es lu"><img src="../Images/ede78edee0069962aa0daa7cc8c85f02.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S6K7IYkWhCzkS6YAgxLfXw.png"/></div></div></figure></div></div>    
</body>
</html>