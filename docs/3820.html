<html>
<head>
<title>ANSIBLE PLAYBOOK FOR CREATING HAPROXY LOAD BALANCER ON AWS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在AWS上创建HAPROXY负载平衡器的可行行动手册</h1>
<blockquote>原文：<a href="https://medium.com/globant/ansible-playbook-for-creating-haproxy-load-balancer-on-aws-4e959ab60d36?source=collection_archive---------0-----------------------#2022-01-27">https://medium.com/globant/ansible-playbook-for-creating-haproxy-load-balancer-on-aws-4e959ab60d36?source=collection_archive---------0-----------------------#2022-01-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="d91a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文中，我们将配置一个名为“HAProxy”的反向代理，并在每次新的受管节点(使用Apache web服务器配置)加入Ansible清单时自动更新其配置文件。</p><h1 id="1677" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated"><strong class="ak">简介</strong></h1><p id="5000" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">HAProxy(高可用性代理)是<strong class="ig hi">开源代理和负载均衡服务器软件</strong>。它在网络层(TCP)和应用层(HTTP/S)提供高可用性，通过在多台服务器之间分配工作负载来提高速度和性能。HAProxy运行在Linux、FreeBSD和Solaris操作系统上。</p><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es kf"><img src="../Images/761b015e65b618131017d862d0ac5c52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2Kfxl2Rhl0BKtjX9qrIGUA.png"/></div></div></figure><p id="eb0a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">上面的架构图说明了我们在任务中将要执行的内容。</p><p id="ed82" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">I)请求将被发送到用作负载平衡器的HAProxy服务器，并且进一步的请求可以通过循环算法被平均分配。</p><p id="d653" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ii)如果假设web1关闭，那么负载平衡器将把流量路由到web2和web3，即剩余的在线web服务器，因此将通过负载平衡器服务器响应客户端/用户。</p><h1 id="c45b" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated"><strong class="ak">先决条件:</strong></h1><ul class=""><li id="09b9" class="kr ks hh ig b ih ka il kb ip kt it ku ix kv jb kw kx ky kz bi translated"><strong class="ig hi">需要具备AWS的基础知识。</strong>以适当的权限访问AWS帐户。我们需要了解如何创建EC2实例，将安全组规则分配给负载均衡器，以便可以“在端口8080”上访问它，并确保在创建实例时，所有实例都应该在同一个可用性区域中。</li><li id="24bd" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb kw kx ky kz bi translated">需要具备<em class="lf"> Ansible </em>的基础知识。</li></ul><h1 id="069d" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated"><strong class="ak">实施:</strong></h1><p id="1920" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">在这里，我创建了5个EC2实例，而您至少可以有2个后端服务器，以便负载平衡器能够在这两个服务器之间路由流量。这里我使用了t2.micro和t3.micro类型的EC2实例的组合。您可以选择任何实例类型Ansible控制器安装至少需要t3.micro。</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="7ff9" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">1 Server for — — Ansible Node (Controller Node) — t3.micro<br/>1 Server for — — LoadBalancer — t2.micro<br/>3 Servers for — — Web Server — t2.micro</em></span></pre><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es lq"><img src="../Images/da251a1447752b5760ac94182b75c2a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*_38exusIBy2D8Ass"/></div></div></figure><p id="1339" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">该实施将包括16个步骤:</strong></p><p id="51c4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤1 </strong>登录到控制器节点</p><p id="f8df" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lf">需要在控制器节点上安装Ansible，遵循以下步骤:</em></p><p id="619c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">如果你在RedHat/CentOS 8上:</strong></p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="1221" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">1) yum install </em><a class="ae lr" href="https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm" rel="noopener ugc nofollow" target="_blank"><em class="lf">https://dl.fedoraproject.org/pub/epel/epel-release-latest-8.noarch.rpm</em></a><em class="lf"> -y<br/>2) yum install ansible -y<br/>3) ansible --version</em></span></pre><p id="7cb1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第二步<em class="lf"> ) </em> </strong>创建<em class="lf">用户</em>，我们可以按照以下步骤操作:</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="f278" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">sudo su -</em></span></pre><p id="599e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在所有实例/服务器上通过useradd命令创建用户</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="d0f6" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">useradd user</em></span></pre><p id="2151" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤3 </strong> ) <em class="lf">现在</em>在所有实例web1、web2、web3和负载平衡器上的sudoers文件中添加“<em class="lf">用户</em></p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="03f3" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">echo “user ALL=(ALL) NOPASSWD: ALL” &gt; /etc/sudoers.d/user</em><br/><em class="lf">exec bash</em></span></pre><p id="de75" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">确保<em class="lf"> SSH </em>应该允许控制器节点、负载平衡器和web服务器之间的连接。为此，编辑文件“<em class="lf"> /etc/ssh/sshd_config </em>”，并更新所有实例(web服务器、负载平衡器和控制器节点)的线下内容，并在更新线下内容后重新启动<em class="lf"> ssh </em>服务。</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="3734" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">PasswordAuthentication yes</em></span></pre><p id="2381" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下是在控制器节点服务器上设置控制器节点、负载平衡器和web服务器之间的无密码连接时要逐一执行的命令，同时确保您必须以普通“用户”身份登录才能执行以下命令。</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="1267" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf"><br/>1) ssh-keygen<br/>2) ssh-copy-id user@web1<br/>3) ssh-copy-id user@web2<br/>4) ssh-copy-id user@web3<br/>5) ssh-copy-id user@loadbalancer</em></span></pre><p id="e68e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤4) </strong>从<em class="lf">普通</em>“用户”运行ansible剧本，编辑ansible的以下配置文件。</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="edbc" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">sudo vim /etc/ansible/ansible.cfg</em></span></pre><p id="4329" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="lf">取消注释下面的行</em> </strong></p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="a308" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">[defaults]<br/>ask_pass = False<br/>remote_user = user</em></span><span id="07dd" class="ll jd hh lh b fi ls ln l lo lp"><em class="lf">[privilege_escalation]<br/>become=True<br/>become_method=sudo<br/>become_user=root<br/>become_ask_pass=False</em></span></pre><p id="d8c8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤5) </strong>通过/etc/ansible/hosts文件在ansible hosts内部设置<em class="lf"> web服务器</em> <strong class="ig hi"> </strong>和<em class="lf">负载均衡器</em> <strong class="ig hi"> </strong>如下图所示</p><figure class="kg kh ki kj fd kk"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="lv lw et er es lx ly bd b be z dx">cat /etc/ansible/hosts</figcaption></figure><p id="bbf9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里[web]是组名，其中web1、web2和web3是节点。类似地，[loadserver]是groupname，其中loadbalancer是一个节点。</p><p id="e980" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤6) </strong>使用<em class="lf"> mkdir、</em> <strong class="ig hi"> </strong>创建一个角色文件夹<em class="lf"> /etc/ansible/roles </em>目录结构可以使用以下命令从Ansible Galaxy下载:</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="5af2" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">sudo ansible-galaxy init webserver — -&gt; creates role for web server<br/>sudo ansible-galaxy init lbserver — -&gt; creates role for load balancer</em></span></pre><p id="2e10" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤7 </strong>)使用<em class="lf"> mkdir </em>命令创建一个名为<em class="lf"> projects </em>的目录来管理<em class="lf"> hosts </em> <strong class="ig hi"> </strong>文件。</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="106f" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">sudo mkdir -p /etc/ansible/roles/projects</em></span></pre><p id="5ad1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lf">这是一幅完整的解释图。</em></p><figure class="kg kh ki kj fd kk er es paragraph-image"><div class="er es lz"><img src="../Images/280489eef3e5ae021c3a6a98c428bf7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1046/0*5FEo0t43Y_5vtrLK"/></div><figcaption class="lv lw et er es lx ly bd b be z dx">/etc/ansible/roles</figcaption></figure><p id="fc65" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤8) </strong> <em class="lf"> </em>在一个ansible配置文件<em class="lf"> (ansible.cfg)中设置角色的路径。</em>只需取消下面一行的注释</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="99dd" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">roles_path = /etc/ansible/roles</em></span></pre><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es ma"><img src="../Images/ee069fa45d57b4c10455cc37a2275a91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vNWOlWRNMbK9D1F-"/></div></div></figure><p id="e5ab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤9) </strong>在名为“<em class="lf">项目”</em>的目录下开始编写行动手册。<em class="lf">在“项目”目录下创建</em><strong class="ig hi"><em class="lf"/></strong><em class="lf">setup . yml</em>playbook，代码可以写如下</p><figure class="kg kh ki kj fd kk"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="lv lw et er es lx ly bd b be z dx">/etc/ansible/roles/projects/setup.yml</figcaption></figure><p id="379c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤10) </strong>现在我们要配置<em class="lf"> lbserver角色</em>。为此，我们必须在各自的文件夹中编写任务和处理程序。</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="7e16" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">cd /etc/ansible/roles/lbserver/handlers<br/>sudo vim main.yml</em></span></pre><figure class="kg kh ki kj fd kk"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="lv lw et er es lx ly bd b be z dx"><em class="mb">/etc/ansible/roles/lbserver/handlers/main.yml</em></figcaption></figure><p id="0e89" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤11) </strong>从<em class="lf"> </em>中调用<em class="lf"> lbserver </em>的角色，将目录更改为“<em class="lf"> tasks </em>并编辑<em class="lf"> main.ym </em> l文件，以定义<em class="lf"> haproxy </em>包要安装在负载均衡服务器上的任务。因此，代码可以编写如下</p><figure class="kg kh ki kj fd kk"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="lv lw et er es lx ly bd b be z dx">/etc/ansible/roles/lbserver/tasks/main.yml</figcaption></figure><p id="70f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤12) </strong>为了管理web服务器<em class="lf">，</em>我们要在Web服务器的<em class="lf"> tasks </em>目录下写剧本<em class="lf"> (main.yml) </em>，代码可以写如下</p><figure class="kg kh ki kj fd kk"><div class="bz dy l di"><div class="lt lu l"/></div><figcaption class="lv lw et er es lx ly bd b be z dx">/etc/ansible/roles/webserver/tasks/main.yml</figcaption></figure><p id="63f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里我们已经完成了web <strong class="ig hi"> </strong>服务器的配置。您也可以使用处理程序<strong class="ig hi"> </strong>来重启apache服务器。</p><p id="bd9d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤13) </strong> <em class="lf">为了配置&amp; </em> <em class="lf">通过Ansible管理</em>HAProxy负载均衡器，<em class="lf">我们</em>必须在<em class="lf">控制器</em>实例上安装ha proxy包。</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="fd07" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">sudo yum install haproxy -y  → it will install haproxy on controller node</em></span></pre><p id="e9c2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤14) </strong>编辑文件“/etc/haproxy/haproxy.cfg”和c <em class="lf"> hange </em>绑定端口号，可以使用任意端口例如<strong class="ig hi"> 1234 </strong>。<em class="lf">这里</em>我已经用了<strong class="ig hi"> 8080 </strong>和<strong class="ig hi">T33】你还需要为所有端口号为<strong class="ig hi"> 80的web服务器定义私有ip。</strong></strong></p><p id="4d0b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lf">编辑了“/etc/haproxy/haproxy.cfg”配置文件，如下图</em></p><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es lq"><img src="../Images/6d5dbf5b5aa4e580f40b4b7f883c1bd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*90Y2Uwtrf0BHylni"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx"><em class="mb">/etc/happroxy/haprroxy.cfg</em></figcaption></figure><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es mc"><img src="../Images/055a8dbaf3cef8f1c09abe97814c42a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5bwqdwLexopldY_x"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx"><em class="mb">/etc/haproxy/haproxy.cfg</em></figcaption></figure><p id="3f98" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里主机名等于web服务器。主机名定义为web1、web2和web3，如上面的屏幕截图所示。</p><p id="32dc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤15) </strong> <em class="lf">复制</em>ha proxy配置文件并粘贴到<strong class="ig hi">/</strong>etc/ansi ble/roles/lbserver/templates中</p><p id="90d6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">步骤16) </strong> <em class="lf">最后</em> <strong class="ig hi"> </strong>我们准备好运行并执行我们的ansible-playbook。将目录更改为/<em class="lf">etc/ansi ble/roles/projects。</em>从<em class="lf">这里</em>我们可以运行剧本。</p><pre class="kg kh ki kj fd lg lh li lj aw lk bi"><span id="38e4" class="ll jd hh lh b fi lm ln l lo lp"><em class="lf">ansible-playbook setup.yml</em></span></pre><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es lq"><img src="../Images/e5ae0d0131f37567c708f6f3f33e099f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9NrgbK1iCYWuNQ3E"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">/etc/ansible/roles/projects/</figcaption></figure><h1 id="e75d" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated"><strong class="ak">测试我们的实现<em class="mb"> : </em> </strong></h1><ul class=""><li id="7ba4" class="kr ks hh ig b ih ka il kb ip kt it ku ix kv jb kw kx ky kz bi translated">现在我们可以检查我们的负载平衡器是否在工作。以端口为8080(绑定端口)的负载平衡器的公共IP为例，它显示我们连接到web1服务器。</li></ul><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es lq"><img src="../Images/9771fea53a556997aeda8adab02a3afc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2YqYZKbdkZ64DH8f"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">Connected to web1</figcaption></figure><ul class=""><li id="be4d" class="kr ks hh ig b ih ii il im ip md it me ix mf jb kw kx ky kz bi translated"><em class="lf">刷新</em> <a class="ae lr" href="http://loadbalancerIP:8080." rel="noopener ugc nofollow" target="_blank"> <em class="lf">页面http://loadbalancerIP:8080。</em> </a> <em class="lf">你将连接到Web2服务器。</em></li></ul><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es lq"><img src="../Images/85a864523a373af6205b24ed1da78b45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jdwxrZ94Yyp_gnh-"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">Connected to web2</figcaption></figure><ul class=""><li id="f0d1" class="kr ks hh ig b ih ii il im ip md it me ix mf jb kw kx ky kz bi translated"><em class="lf">再次刷新</em> <a class="ae lr" href="http://loadbalancerIP:8080." rel="noopener ugc nofollow" target="_blank"> <em class="lf">的页面http://loadbalancerIP:8080。</em> </a> <em class="lf">你将连接到Web3。</em></li></ul><figure class="kg kh ki kj fd kk er es paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="er es lq"><img src="../Images/b9fad223b7dbd34ba8838712781e2e7a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2EsrHVtSNWfJNgJp"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">Connected to web3</figcaption></figure><h1 id="3d07" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated"><strong class="ak">概要<em class="mb"> : </em> </strong></h1><ul class=""><li id="6242" class="kr ks hh ig b ih ka il kb ip kt it ku ix kv jb kw kx ky kz bi translated"><em class="lf">安装在控制器节点上的Ansible软件。</em></li><li id="2df9" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb kw kx ky kz bi translated"><em class="lf">定义了可行的剧本角色，用于管理和配置lbserver(HAProxy)和web服务器。</em></li><li id="392d" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb kw kx ky kz bi translated"><em class="lf">运行</em> <em class="lf">项目目录下的主剧本(setup.yml)，将配置web服务器和负载均衡服务器。</em></li><li id="5a4b" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb kw kx ky kz bi translated"><em class="lf">负载平衡器</em>公共IP <em class="lf">通过HAProxy软件点击</em> 3个不同的<em class="lf">网络服务器。</em></li></ul><h1 id="921e" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated"><strong class="ak"> GITHUB链接:</strong></h1><p id="45ec" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated"><a class="ae lr" href="https://github.com/mustafa2898/HAPROXYLOADBALNCER_GLOBANT.git" rel="noopener ugc nofollow" target="_blank"><em class="lf">https://github . com/Mustafa 2898/haproxyloadbalencer _ globant . git</em></a></p><p id="5359" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">参考文献:</strong></p><ul class=""><li id="68a3" class="kr ks hh ig b ih ii il im ip md it me ix mf jb kw kx ky kz bi translated"><a class="ae lr" href="https://docs.ansible.com/ansible/latest/user_guide/playbooks_reuse_roles.html" rel="noopener ugc nofollow" target="_blank"><em class="lf">https://docs . ansi ble . com/ansi ble/latest/user _ guide/playbooks _ reuse _ roles . html</em></a></li><li id="ddc0" class="kr ks hh ig b ih la il lb ip lc it ld ix le jb kw kx ky kz bi translated"><a class="ae lr" href="https://galaxy.ansible.com/docs/?extIdCarryOver=true&amp;sc_cid=701f2000001OH7YAAW" rel="noopener ugc nofollow" target="_blank">T19】https://galaxy.ansible.com/docs/?extIdCarryOver=true&amp;sc _ cid = 701 f 2000001 H7 yaawT21】</a></li></ul></div></div>    
</body>
</html>