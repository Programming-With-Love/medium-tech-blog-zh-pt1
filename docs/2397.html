<html>
<head>
<title>Memahami Middleware NodeJS Secara Singkat dan Mudah</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Memahami Middleware NodeJS Secara Singkat dan Mudah</h1>
<blockquote>åŽŸæ–‡ï¼š<a href="https://medium.easyread.co/memahami-middleware-nodejs-secara-singkat-dan-mudah-di-pahami-c34e4e087e88?source=collection_archive---------1-----------------------#2019-07-20">https://medium.easyread.co/memahami-middleware-nodejs-secara-singkat-dan-mudah-di-pahami-c34e4e087e88?source=collection_archive---------1-----------------------#2019-07-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="1cac" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">Apa sih sebenarnya middleware?</h2></div><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi kc"><img src="../Images/82b57f43578640f35dfd454c9762a4bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sJj5GKzsJ9Kaqkzq-Np3vw.png"/></div></div></figure><h2 id="87a0" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated">M <em class="lk"> iddleware </em></h2><p id="074d" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt kx lu lv lw lb lx ly lz lf ma mb mc md ig bi translated"><em class="me"> Middleware </em> pada dasarnya adalah â€˜penengahâ€™. Kalau dalam aplikasi <em class="me"> middleware </em> adalah sebuah aturan yang harus dilewati terlebih dahulu sebelum masuk kedalam sebuah sistem atau keluar dari sebuah sistem.</p><p id="2fa0" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Analoginya seperti ini, misalnya teman-teman ingin mendaftar di sebuah pekerjaan yaitu menjadi seorang <em class="me"> programmer </em> , maka sebelum teman-teman masuk menjadi karyawan, harus melewati prosedur terlebih dahulu. Misalnya, teman-teman akan dicek apakah usianya sudah layak untuk bekerja, atau teman-teman akan di interview terlebih dahulu, atau mengerjakan test untuk mengetahui skillnya terlebih dahulu. <em class="me"> Nah, </em> semua tahapan-tahapan tersebut disebut dengan <em class="me"> middleware </em> .</p><p id="e1f1" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated"><em class="me"> Middleware </em> sendiri sebenarnya konsep umum yang banyak dipakai pada <em class="me"> library </em> maupun <em class="me"> framework </em> , contohnya Laravel. Jika teman-teman belajar Laravel maka akan ketemu istilah <em class="me"> middleware </em> <em class="me"> before </em> dan <em class="me"> after </em> .</p><p id="cbf4" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Berikut ini contohnya</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mk"><img src="../Images/f6e96108eb98c228084ef7d60074767c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WilTQiKbjHb11tu1.png"/></div></div></figure><p id="d0be" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Potongan fungsi diatas merupakan contoh <em class="me"> middleware </em> yang ada pada Laravel yang berfungsi untuk memvalidasi <em class="me"> request </em> dari <em class="me"> client </em> , dimana ketika user yang sesuai dengan role yang ada, maka sistem akan menjalankan proses selanjutnya dengan mereturn <code class="fe ml mm mn mo b"><strong class="ln io">next($request)</strong></code> . Artinya ketika <em class="me"> middleware </em> diletakkan diantara <em class="me"> route </em> dan <em class="me"> controller </em> , maka sistem akan menjalankan <em class="me"> middleware </em> dan ketika <em class="me"> request </em> sesuai aturan <em class="me"> middleware </em> maka sistem akan mengarahkan atau melanjutkan ke <em class="me"> controller </em> dengan menjalankan fungsi <code class="fe ml mm mn mo b"><strong class="ln io">next($request)</strong></code> .</p><h2 id="9761" class="ko kp in bd kq kr ks dn kt ku kv dp kw kx ky kz la lb lc ld le lf lg lh li lj bi translated"><strong class="ak"> Memulai Project Pada Nodejs </strong></h2><p id="f55f" class="pw-post-body-paragraph ll lm in ln b lo lp jo lq lr ls jr lt kx lu lv lw lb lx ly lz lf ma mb mc md ig bi translated">Sebelum memulai project, kita persiapkan terlebih kebutuhan <em class="me"> library </em> pada aplikasi kita, install <strong class="ln io"> <em class="me"> ExpressJS </em> </strong> (framework populer web untuk nodejs), <strong class="ln io"> <em class="me"> Template Engine Ejs </em> </strong> (untuk membuat tampilan), <strong class="ln io"> <em class="me"> bodyParser </em> </strong> ( untuk memparsing/mengambil nilai dari form-html), dan <strong class="ln io"> <em class="me"> Joi </em> </strong> (library untuk keperluan validasi). Buka command promt dan jalankan perintah berikut :</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mp"><img src="../Images/538f6ef75043e5d2776ccf0a68d4dec8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/0*t2K9xUWD9vWBhNx5.png"/></div></figure><p id="defb" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">jika proses install selesai, selanjutnya siapkan folder project seperti dibawah ini :</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mq"><img src="../Images/89fb92c5c2a68a950e21efc1d346a398.png" data-original-src="https://miro.medium.com/v2/resize:fit:486/format:webp/0*Vj2fecVMZt88-XXr.png"/></div></figure><p id="8ac1" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Kemudian siapkan configurasi penggunaan library yang telah kita install. Saya membuat file bernama <strong class="ln io"> <em class="me"> app.js </em> </strong> , berikut codingannya :</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mr"><img src="../Images/6c3d627210e678b4b3d222355dd71824.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/0*cFxpYcjxkDJsWPqe.png"/></div></div></figure><p id="864f" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Kemudian isi file <strong class="ln io"> <em class="me"> login.ejs </em> </strong> dengan codingan berikut :</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi ms"><img src="../Images/0576edc9c42e83aea4ab05522cbcdd0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/0*0tYK4ALUGvgIoNo2.png"/></div></figure><p id="b3e0" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Selanjut kita akan isi file <strong class="ln io"> <em class="me"> middleware.js </em> </strong> dengan codingan berikut :</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mt"><img src="../Images/8feb3564d9af1744818ed0126f367f59.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/0*mF11P-FoWZ8hi9AY.png"/></div></figure><p id="b58f" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated"><strong class="ln io"> Penjelasan <br/> </strong> Pada file <em class="me"> middleware.js </em> diatas kita memanggil <em class="me"> library </em> Joi yang telah kita install sebelumnya, <em class="me"> library </em> ini nantinya kita gunakan untuk memvalidasi data yang masuk saat kita submit dari form html.</p><p id="f389" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Pada fungsi <code class="fe ml mm mn mo b"><strong class="ln io">cekUsia</strong></code> kita mengambil nilai dari param url dengan cara <code class="fe ml mm mn mo b"><strong class="ln io">req.params.usia</strong></code> , lalu kita melakukan pengecekan apakah usia tidak lebih besar dari 18. Jika usia tidak lebih besar maka munculkan tulisan â€˜kamu belum cukup umurâ€™ dan sebaliknya jika lebih besar maka jalankan fungsi <code class="fe ml mm mn mo b"><strong class="ln io">next()</strong> </code> untuk menjalankan proses selanjutnya.</p><p id="5d28" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Pada fungsi <code class="fe ml mm mn mo b"><strong class="ln io">carbon</strong></code> kita membuat fungsi yang bertugas untuk mengonkonversi tulisan menjadi tulisan kapital. Kita mengambil nilai <code class="fe ml mm mn mo b"><strong class="ln io">req.params.title</strong></code> lalu kemudian kita konversi dengan fungsi bawan javascript <code class="fe ml mm mn mo b"><strong class="ln io">toUpperCase()</strong></code> , setelah itu kita mengubah nilai <code class="fe ml mm mn mo b"><strong class="ln io">req.params.title</strong></code> secara global dengan yang baru, selanjutnya nilai yang baru inilah nantinya yang dikirim ke fungsi tahap selanjutnya.</p><p id="e7d3" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Pada fungsi <code class="fe ml mm mn mo b"><strong class="ln io">validasi_user</strong></code> , kita memanfaatkan library Joi untuk membuat validasi. Kita membuat aturan properti didalam object schema, dimana username harus bersifat string dengan panjang maximal 4 dan tipe password harus bersifat string dengan panjang minimal 7.</p><p id="71d5" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Ambil nilai data yang kita post melalui <code class="fe ml mm mn mo b"><strong class="ln io">req.body</strong></code> <strong class="ln io"> <em class="me"> </em> </strong> lalu lakukan validasi dengan dengan menjalankan <code class="fe ml mm mn mo b"><strong class="ln io">Joi.validasi(req.body,schema)</strong></code> . Jika nilai <strong class="ln io"> <em class="me"> </em> </strong> <code class="fe ml mm mn mo b"><strong class="ln io">req.body</strong></code> sesuai aturan schema yang kita buat maka kita menjalankan fungsi <code class="fe ml mm mn mo b"><strong class="ln io">next() </strong></code> untuk menjalankan fungsi selanjutnya.</p><p id="7b9e" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Kemudian selanjutnya buat isi file <strong class="ln io"> <em class="me"> AdminController.js </em> </strong> dengan code berikut :</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mu"><img src="../Images/58012d4d78b803ff86a1160b69303008.png" data-original-src="https://miro.medium.com/v2/resize:fit:1290/format:webp/0*UFrMVxfa6H2JKLUH.png"/></div></figure><p id="9b1b" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">dan yang terakhir file <strong class="ln io"> <em class="me"> router.js </em> </strong> berisi codingan berikut :</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi mv"><img src="../Images/baa37e15ee88394a61f8d7451a424a4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*JbDLvkI80Vqy_rEx.png"/></div></div></figure><p id="4d7d" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">pada baris pertama dan kedua kita meng include/import file <strong class="ln io"> <em class="me"> AdminController </em> </strong> dan <strong class="ln io"> <em class="me"> middleware </em> </strong> dengan module require.</p><p id="7a07" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Selanjutnya untuk uji coba, jalankan server dengan cara berikut :</p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mw"><img src="../Images/b6190f92d9d3fba6904ead12a5e70e69.png" data-original-src="https://miro.medium.com/v2/resize:fit:1042/format:webp/0*EPzvUSFdkmrMTW0e.png"/></div></figure><p id="1a97" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Buka browser dan jalankan perintah <strong class="ln io"> localhost:1337/lamaran/12 </strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div class="gh gi mx"><img src="../Images/5dff1600fb2b8e3c68df55f459d0dd4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/0*F3Lr5p1HABDQAJ5v.png"/></div></figure><p id="8408" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Jalankan juga perintah <strong class="ln io"> localhost:1337/title/game of throne </strong></p><figure class="kd ke kf kg gt kh gh gi paragraph-image"><div role="button" tabindex="0" class="ki kj di kk bf kl"><div class="gh gi my"><img src="../Images/b1e10325bbc062833683a6361a2e09f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/0*AFIisrFHKzxZvpFu.png"/></div></div></figure><p id="3b54" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Sekarang nilai <code class="fe ml mm mn mo b"><strong class="ln io">req.params.title</strong> </code> berubah jadi kapital, karena telah di konversi difungsi sebelumnya di <em class="me"> middleware </em> .</p><p id="e4ce" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Terakhir jalankan <strong class="ln io"> localhost:1337/login </strong> , masukkan username dan password kemudian klik tombol submit. Lihat hasilnya.</p><blockquote class="mz na nb"><p id="0fd2" class="ll lm me ln b lo mf jo lq lr mg jr lt nc mh lv lw nd mi ly lz ne mj mb mc md ig bi translated"><strong class="ln io"> Note </strong> : <em class="in"> coba kamu hapus code </em> <code class="fe ml mm mn mo b"><strong class="ln io"><em class="in">next()</em></strong></code> <em class="in"> pada </em> middleware <em class="in"> , maka sistem tidak akan menjalankan fungsi controller selanjutnya. </em></p></blockquote><p id="3e55" class="pw-post-body-paragraph ll lm in ln b lo mf jo lq lr mg jr lt kx mh lv lw lb mi ly lz lf mj mb mc md ig bi translated">Sekitan tulisan kali ini. Semoga bermanfaat. Jangan lupa <em class="me"> claps </em> yah!! Terima kasih. Happy coding! ðŸ˜„</p></div></div>    
</body>
</html>