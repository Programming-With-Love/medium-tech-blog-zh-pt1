<html>
<head>
<title>Control the theme of your app like a pro — Flutter💙</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">像专业人士一样控制应用程序的主题💙</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/control-theme-flutter-578e4aaf2ccf?source=collection_archive---------2-----------------------#2021-10-29">https://medium.com/google-developer-experts/control-theme-flutter-578e4aaf2ccf?source=collection_archive---------2-----------------------#2021-10-29</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="7304" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">我们可以使用包或状态管理技术轻松地将主题从亮变暗，反之亦然。但是让我们看看如何不使用一个软件包就能做到这一点！</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/f7c31606859b77d6780e559183fc20c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*teGawNhZXSE3eQbP46LLCw.png"/></div></div></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><p id="6ba8" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">不同的用户喜欢不同的主题。有些人喜欢浅色主题，而有些人喜欢深色主题。现在，在应用程序中提供这两种主题就成了开发者的责任！</p><p id="ae28" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">您可以使用不同的包以编程方式更改应用程序的主题。更改主题背后的主要概念是在应用程序中的任何位置访问MaterialApp，然后更改主题并重新构建MaterialApp。这可以使用不同的状态管理包来完成，就像Provider一样。然而，对于一个简单的任务，使用包从来都不是一个好的选择！因此，让我们看看如何在不使用单一软件包的情况下，通过编程来更改应用程序的主题！</p><h2 id="7c51" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">厌倦了阅读？请随意从<a class="ae lg" href="https://github.com/AbhishekDoshi26/theme_example" rel="noopener ugc nofollow" target="_blank"> GitHub </a>克隆这个库！</h2></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="037e" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">步骤1:将MyApp更改为有状态小部件</h2><p id="3598" class="pw-post-body-paragraph jp jq hh jr b js lh ii ju jv li il jx jy lj ka kb kc lk ke kf kg ll ki kj kk ha bi translated">第一步是将MyApp类改为有状态小部件，而不是无状态小部件。这将允许我们使用继承的小部件概念来访问state类，并且我们将能够重新构建MaterialApp。</p><pre class="ix iy iz ja fd lm ln lo lp aw lq bi"><span id="a696" class="kl km hh ln b fi lr ls l lt lu">import 'package:flutter/material.dart';</span><span id="77e0" class="kl km hh ln b fi lv ls l lt lu">void main() =&gt; runApp(MyApp());</span><span id="1d08" class="kl km hh ln b fi lv ls l lt lu">class MyApp extends StatefulWidget {<br/>  <a class="ae lg" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  _MyAppState createState() =&gt; _MyAppState();<br/>}</span><span id="2b09" class="kl km hh ln b fi lv ls l lt lu">class _MyAppState extends State&lt;MyApp&gt; {<br/>  <a class="ae lg" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return MaterialApp(<br/>      title: 'Material App',<br/>      home: Home(),<br/>    );<br/>  }<br/>}</span></pre><p id="3b1c" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">这里，Home()类将是我们的主页，我们将在本文中进一步看到。</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="a9ba" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">第二步:在_MyAppState里面创建一个ThemeMode变量，并提供初始主题！</h2><p id="f4fa" class="pw-post-body-paragraph jp jq hh jr b js lh ii ju jv li il jx jy lj ka kb kc lk ke kf kg ll ki kj kk ha bi translated">现在，创建一个变量，将主题设置为亮或暗，并设置初始主题。还要向MaterialApp提供themeData和darkTheme值！</p><pre class="ix iy iz ja fd lm ln lo lp aw lq bi"><span id="2a8f" class="kl km hh ln b fi lr ls l lt lu">class _MyAppState extends State&lt;MyApp&gt; {<br/>  ThemeMode _themeMode = ThemeMode.light;</span><span id="1a7b" class="kl km hh ln b fi lv ls l lt lu"><a class="ae lg" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return MaterialApp(<br/>      title: 'Material App',<br/>      themeMode: _themeMode,<br/>      theme: ThemeData(),<br/>      darkTheme: ThemeData.dark(),<br/>      home: Home(),<br/>    );<br/>  }<br/>}</span></pre></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="1202" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">步骤3:在MyApp中创建一个静态函数。</h2><p id="9aaa" class="pw-post-body-paragraph jp jq hh jr b js lh ii ju jv li il jx jy lj ka kb kc lk ke kf kg ll ki kj kk ha bi translated">下一步是创建一个名为的<strong class="jr hi">的静态函数，它将BuildContext作为参数并返回_MyAppState类。可以按如下方式完成:</strong></p><pre class="ix iy iz ja fd lm ln lo lp aw lq bi"><span id="6e5a" class="kl km hh ln b fi lr ls l lt lu">class MyApp extends StatefulWidget {<br/>  <a class="ae lg" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  _MyAppState createState() =&gt; _MyAppState();</span><span id="1ba6" class="kl km hh ln b fi lv ls l lt lu">static _MyAppState? of(BuildContext context) =&gt; context.findAncestorStateOfType&lt;_MyAppState&gt;();<br/>}</span></pre></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="04b5" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">步骤4:创建一个函数来更改_MyAppState中的主题</h2><p id="8bdb" class="pw-post-body-paragraph jp jq hh jr b js lh ii ju jv li il jx jy lj ka kb kc lk ke kf kg ll ki kj kk ha bi translated">让我们创建一个将改变应用程序主题的函数。这将是一个简单的函数，它采用新的ThemeMode作为其参数，并将其赋给我们的local _themeMode变量。</p><pre class="ix iy iz ja fd lm ln lo lp aw lq bi"><span id="9e54" class="kl km hh ln b fi lr ls l lt lu">void changeTheme(ThemeMode themeMode) {<br/>    setState(() {<br/>      _themeMode = themeMode;<br/>    });<br/>  }</span></pre></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><p id="fe3b" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">大体上就是这样。dart文件，让我们看看它是什么样子的:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lw lx l"/></div></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="70c6" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">步骤5:让我们创建我们的home.dart，它的中间有一个开关！</h2><pre class="ix iy iz ja fd lm ln lo lp aw lq bi"><span id="c5d5" class="kl km hh ln b fi lr ls l lt lu">import 'package:flutter/material.dart';<br/>import 'package:theme_example/main.dart';</span><span id="685c" class="kl km hh ln b fi lv ls l lt lu">class Home extends StatefulWidget {<br/>  const Home({Key? key}) : super(key: key);</span><span id="c6fa" class="kl km hh ln b fi lv ls l lt lu"><a class="ae lg" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  _HomeState createState() =&gt; _HomeState();<br/>}</span><span id="83c1" class="kl km hh ln b fi lv ls l lt lu">class _HomeState extends State&lt;Home&gt; {<br/>  bool _value = false;</span><span id="3d72" class="kl km hh ln b fi lv ls l lt lu"><a class="ae lg" href="http://twitter.com/override" rel="noopener ugc nofollow" target="_blank">@override</a><br/>  Widget build(BuildContext context) {<br/>    return Scaffold(<br/>      body: Center(<br/>        child: Switch(<br/>          value: _value,<br/>          onChanged: (value) {},<br/>        ),<br/>      ),<br/>    );<br/>  }<br/>}</span></pre><p id="9a43" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">代码看起来很简单，我们只是在屏幕中央有一个小开关，它会改变我们的应用程序的主题。现在让我们为它添加功能吧！</p></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h2 id="6c8b" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">步骤6:使用静态函数(在MyApp中创建)调用changeTheme函数(在_MyAppState中创建)</h2><pre class="ix iy iz ja fd lm ln lo lp aw lq bi"><span id="4b0c" class="kl km hh ln b fi lr ls l lt lu">setState(() {<br/>              _value = value;<br/>              if (_value)<br/>                MyApp.of(context)!.changeTheme(ThemeMode.dark);<br/>              else<br/>                MyApp.of(context)!.changeTheme(ThemeMode.light);<br/>            });</span></pre><p id="21f0" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">让我们看看home.dart是什么样子的:</p><figure class="ix iy iz ja fd jb"><div class="bz dy l di"><div class="lw lx l"/></div></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><p id="a772" class="pw-post-body-paragraph jp jq hh jr b js jt ii ju jv jw il jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">就是这样！你已经成功地实现了没有任何包的主题改变！</p><h2 id="6dad" class="kl km hh bd kn ko kp kq kr ks kt ku kv jy kw kx ky kc kz la lb kg lc ld le lf bi translated">输出:</h2><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es ly"><img src="../Images/cf66edf47524d963951d8c6af542d054.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rG9cGzgLtVng7x63gDZzAQ.gif"/></div></div></figure></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h1 id="5781" class="lz km hh bd kn ma mb mc kr md me mf kv in mg io ky iq mh ir lb it mi iu le mj bi translated">希望你喜欢这篇文章！</h1></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><h1 id="94e1" class="lz km hh bd kn ma mb mc kr md me mf kv in mg io ky iq mh ir lb it mi iu le mj bi translated">不要忘记通过以下方式与我联系:</h1><ul class=""><li id="dbc2" class="mk ml hh jr b js lh jv li jy mm kc mn kg mo kk mp mq mr ms bi translated"><a class="ae lg" href="https://www.instagram.com/abhishekdoshi26/" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi"> Instagram </strong> </a></li><li id="0588" class="mk ml hh jr b js mt jv mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><a class="ae lg" href="https://twitter.com/AbhishekDoshi26" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi">推特</strong> </a></li><li id="f548" class="mk ml hh jr b js mt jv mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><a class="ae lg" href="https://www.linkedin.com/in/AbhishekDoshi26" rel="noopener ugc nofollow" target="_blank">T5】领英T7】</a></li><li id="5b16" class="mk ml hh jr b js mt jv mu jy mv kc mw kg mx kk mp mq mr ms bi translated"><a class="ae lg" href="https://github.com/AbhishekDoshi26" rel="noopener ugc nofollow" target="_blank"> <strong class="jr hi"> GitHub </strong> </a></li></ul></div><div class="ab cl ji jj go jk" role="separator"><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn jo"/><span class="jl bw bk jm jn"/></div><div class="ha hb hc hd he"><blockquote class="my"><p id="ba10" class="mz na hh bd nb nc nd ne nf ng nh kk dx translated">不要停止，直到你呼吸！💙<br/> -阿布舍克·多希</p></blockquote></div></div>    
</body>
</html>