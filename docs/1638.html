<html>
<head>
<title>Ruby, RVM, and Bundler Demystified</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">鲁比，RVM和邦德勒揭秘</h1>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/ruby-rvm-and-bundler-demystified-9f3f946230f1?source=collection_archive---------4-----------------------#2018-12-20">https://medium.com/capital-one-tech/ruby-rvm-and-bundler-demystified-9f3f946230f1?source=collection_archive---------4-----------------------#2018-12-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="3ab3" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">RVM和邦德勒如何改进Ruby工程</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/dac98aa7fe92ab0806200d4870eeb251.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0QAfSslKCpfv_i90RoUqcA.jpeg"/></div></div></figure><p id="e1a5" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">开发Ruby应用程序可能很简单，但是当您开始处理需要多种语言版本/不同依赖项的多个项目时，这很快就会变得非常复杂。作为一名Ruby工程师，一次只开发一个应用程序，或者完全独立完成一个项目是不现实的。确保在跨机器和开发人员的一致环境中开发应用程序成为成功的必要条件。此外，这里描述的环境一致性、语言版本和依赖性管理模式也适用于其他语言，只是使用了不同的工具。</p><p id="2bd5" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">无论您是在本地、在云中还是在容器中工作，在实现一致性之前，都需要理解Ruby开发环境的活动部分。这篇文章介绍了一些使一致、灵活的Ruby开发成为可能的概念。</p><h1 id="d6d1" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">与鲁比、RVM和邦德勒一起步入正轨</h1><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es kw"><img src="../Images/c910305ae95aae71186927c82ae2edc2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GkVnyhQHq3ld5GQuA9Zqrw.jpeg"/></div></div></figure><p id="213e" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">为了更好地理解Ruby开发环境，可以把Ruby应用程序想象成一辆火车机车。像任何火车机车一样，它需要可以行驶的轨道(Ruby运行时)，某种形式的能量位(Ruby gems，应用程序依赖)，当然，还有一个工程师(你)！</p><p id="b476" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">一切都很容易开始。火车可以在预先铺设的轨道上运行(默认系统Ruby运行时),这些轨道可以从类似第三轨道的东西向火车提供能量位(通过在遇到任何应用依赖时安装它们，例如“sudo gem install foo”)。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es kx"><img src="../Images/f2afab2e0e1e0dce28617d84230eb0b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*zPnJfd8d2ckljKwwLRBtYA.png"/></div></figure><p id="317a" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">现在，让我们向系统添加一个额外的列车。这似乎很容易，我们可以让它沿着和我们第一辆火车相同的轨道运行，从而使用相同的能源。但是，当这列新火车需要在比第一列火车更新或更旧的轨道(不同的Ruby版本)上运行时，会发生什么呢？</p><p id="1b02" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">如果您试图改造一辆旧火车以适应新的轨道，或者如果最新的轨道比旧轨道工作得更好或具有更好的功能，就会发生这种情况。有时一个新的能量位甚至可能需要新的轨道！此外，能量位也被绑定到这些不同的轨道上。</p><p id="d1f9" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">进入<a class="ae ky" href="http://rvm.io" rel="noopener ugc nofollow" target="_blank"> RVM </a>，ruby版本管理器。这个漂亮的命令行实用程序允许工程师在设计每列火车时通过简单地切换轨道来使用多条轨道。现在火车可以安全地行驶在合适的轨道上。但是能源呢？如果这种新列车需要不同的能量位，或者更糟糕的是，类似但不完全相同的位(不同的应用依赖版本)，会发生什么？RVM提供了一个<a class="ae ky" href="http://rvm.io/gemsets" rel="noopener ugc nofollow" target="_blank">【宝石组】</a>的概念，允许工程师切换或共享第三根铁轨。RVM使得移除轨道变得容易，并且可以保持所有轨道彼此之间或者与预先安装的系统轨道之间的安全。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es kz"><img src="../Images/2abd13e144c664036df35753d3164270.png" data-original-src="https://miro.medium.com/v2/resize:fit:994/format:webp/1*2jE_2RuUO8w2JtMZM2UgJA.png"/></div></figure><p id="f6a6" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">所以这太棒了！工程师(您)现在可以使用每个轨道的第三轨道(默认gemset)或备用第三轨道(gemset)提供的能源，在不同的轨道(Ruby版本)上驱动两个或多个列车(应用程序)。所有这些都没有火车相撞或污染彼此的能源(例如“rvm使用2.4.1@newtracks”)。</p><p id="0bf2" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">然而，能量位已经通过“宝石安装”一次一个地添加到每个第三轨道，因为每个列车都需要它。当遇到依赖项时，手动安装依赖项会使试验新的能源位、测试不同的轨道或招募额外的工程师变得繁琐和困难。机车还可能无意中损坏共享轨道或第三轨，导致其他机车无法运行！那么，如何才能让列车在异地可靠运行呢？我们如何确保能源需求易于沟通？要是有一种方法可以宣布每列火车需要多少能量比特就好了…</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div class="er es la"><img src="../Images/ea64f7da4d6761928e2228d221ba5222.png" data-original-src="https://miro.medium.com/v2/resize:fit:966/format:webp/1*UJXfOfTnULvlqwfAlsBjRw.png"/></div></figure><p id="595b" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">进入<a class="ae ky" href="https://bundler.io" rel="noopener ugc nofollow" target="_blank">捆扎机</a>，为列车的机车储能。Bundler安装并跟踪应用程序所需的确切应用程序依赖项和版本。通过Bundler，列车本身使用清单文件(Gemfile)声明其特定的能量要求。工程师可以使用清单文件来确保火车在任何轨道上平稳运行，并且能量位是从火车本身而不是从轨道传递的。这种能源车还确保只有<em class="lb">这列</em>的能源位可供<em class="lb">这列</em>使用。</p><p id="eca4" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">现在我们已经安全到达车站了。火车在正确的轨道上运行，使用隔离和正确声明的能量位，使升级、废弃、创新和与其他工程师交流变得更简单！一旦完成了跟踪，只需一个命令就可以完全删除它们。这里介绍的工具有一些替代方案和额外的优势，请在后面的附录中找到这些详细信息。</p><p id="5827" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">有希望的是，Ruby环境的活动部分现在已经被理解了，允许以灵活和一致的方式进行应用程序开发。将这里描述的环境一致性、语言版本和依赖性管理模式也应用到任何新语言的开发中！</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es lc"><img src="../Images/10746b62bf842c41794df4f434e9dd2e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hCHGyy87SEB7j5TbaeM6VA.jpeg"/></div></div></figure><h2 id="917c" class="ld kf hh bd kg le lf lg kk lh li lj ko jr lk ll kq jv lm ln ks jz lo lp ku lq bi translated">附录A: Ruby管理工具备选方案</h2><p id="95f7" class="pw-post-body-paragraph ji jj hh jk b jl lr ii jn jo ls il jq jr lt jt ju jv lu jx jy jz lv kb kc kd ha bi translated">除了RVM，还有其他的选择(例如,<a class="ae ky" href="https://github.com/rbenv/rbenv" rel="noopener ugc nofollow" target="_blank"> rbenv </a>和<a class="ae ky" href="https://github.com/postmodern/chruby" rel="noopener ugc nofollow" target="_blank"> chruby </a>)，这取决于个人开发者或团队。每种方法都有优点和缺点，但它们都试图解决同一个基本挑战。</p><h2 id="9cdd" class="ld kf hh bd kg le lf lg kk lh li lj ko jr lk ll kq jv lm ln ks jz lo lp ku lq bi translated">附录B:额外的Ruby管理工具优势</h2><p id="26f6" class="pw-post-body-paragraph ji jj hh jk b jl lr ii jn jo ls il jq jr lt jt ju jv lu jx jy jz lv kb kc kd ha bi translated">Ruby管理器还提供了其他一些优势:</p><ul class=""><li id="425f" class="lw lx hh jk b jl jm jo jp jr ly jv lz jz ma kd mb mc md me bi translated">Ruby运行时和gems安装在“用户空间”中，不需要“sudo”来安装gems。</li><li id="4630" class="lw lx hh jk b jl mf jo mg jr mh jv mi jz mj kd mb mc md me bi translated">让系统Ruby处于原始状态(当与规程一起使用时)。</li><li id="68c0" class="lw lx hh jk b jl mf jo mg jr mh jv mi jz mj kd mb mc md me bi translated">一些可以被配置成基本上不可见和自动的(附录E)。</li></ul><h2 id="b31c" class="ld kf hh bd kg le lf lg kk lh li lj ko jr lk ll kq jv lm ln ks jz lo lp ku lq bi translated">附录C:附加捆绑优势</h2><p id="0f72" class="pw-post-body-paragraph ji jj hh jk b jl lr ii jn jo ls il jq jr lt jt ju jv lu jx jy jz lv kb kc kd ha bi translated">Bundler还提供了一些额外的意外收获。</p><ul class=""><li id="d1c5" class="lw lx hh jk b jl jm jo jp jr ly jv lz jz ma kd mb mc md me bi translated">更好的运行时性能。Bundler只向您的应用程序公开指定的gem，而不管安装了多少gem，从而允许更快的文件系统扫描和gem加载。</li><li id="f18f" class="lw lx hh jk b jl mf jo mg jr mh jv mi jz mj kd mb mc md me bi translated">Gemfile.lock文件确保您测试的内容与使用“捆绑安装”的其他系统的内容一致。这需要一个有意识的“捆绑包更新”,并致力于寻找和使用所需gem的新版本。</li><li id="12cd" class="lw lx hh jk b jl mf jo mg jr mh jv mi jz mj kd mb mc md me bi translated">您可以使用Bundler在您的机车内输送能量，或使用它来加强外部提供的能源的管理。</li></ul><h2 id="6d04" class="ld kf hh bd kg le lf lg kk lh li lj ko jr lk ll kq jv lm ln ks jz lo lp ku lq bi translated">附录D:关于RVM &amp;邦德勒的更多信息</h2><ul class=""><li id="c8b4" class="lw lx hh jk b jl lr jo ls jr mk jv ml jz mm kd mb mc md me bi translated">安装http://rvm.io/rvm/install<a class="ae ky" href="http://rvm.io/rvm/install" rel="noopener ugc nofollow" target="_blank">RVM</a></li><li id="1e5b" class="lw lx hh jk b jl mf jo mg jr mh jv mi jz mj kd mb mc md me bi translated">捆绑器安装为宝石`宝石安装捆绑器';或者使用RVM配置使其自动发生。</li><li id="ba05" class="lw lx hh jk b jl mf jo mg jr mh jv mi jz mj kd mb mc md me bi translated"><a class="ae ky" href="http://engineering.appfolio.com/appfolio-engineering/2017/2/27/ruby-rubygems-and-bundler" rel="noopener ugc nofollow" target="_blank">更多细节</a></li></ul><h2 id="c5fb" class="ld kf hh bd kg le lf lg kk lh li lj ko jr lk ll kq jv lm ln ks jz lo lp ku lq bi translated">附录E:配置RVM的不可见性</h2><ul class=""><li id="7481" class="lw lx hh jk b jl lr jo ls jr mk jv ml jz mm kd mb mc md me bi translated">将<a class="ae ky" href="http://rvm.io/workflow/projects" rel="noopener ugc nofollow" target="_blank"> rvm指令添加到您的项目</a>——使用Gemfile注释方法将所有东西放在一起。</li><li id="7770" class="lw lx hh jk b jl mf jo mg jr mh jv mi jz mj kd mb mc md me bi translated">创建一个。用户主目录中的rvmrc配置文件:</li></ul><pre class="ix iy iz ja fd mn mo mp mq aw mr bi"><span id="efb9" class="ld kf hh mo b fi ms mt l mu mv">rvm_install_on_use_flag=1 # Install a missing Ruby version when accessed </span><span id="cb4c" class="ld kf hh mo b fi mw mt l mu mv">rvm_project_rvmrc_default=1 # Use files in the project to determine ruby version and gemset</span><span id="358f" class="ld kf hh mo b fi mw mt l mu mv">rvm_autoinstall_bundler_flag=1 # Install bundler automatically in each ruby/gemset</span><span id="00fe" class="ld kf hh mo b fi mw mt l mu mv">rvm_gemset_create_on_use_flag=1 # Create missing gemsets when accessed</span></pre></div><div class="ab cl mx my go mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ha hb hc hd he"><p id="c6ac" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><em class="lb">声明:以上观点仅代表作者个人观点。除非本帖中另有说明，否则Capital One不属于所提及的任何公司，也不被其认可。使用或展示的所有商标和其他知识产权都是其各自所有者的所有权。本文为2018首都一。</em></p></div></div>    
</body>
</html>