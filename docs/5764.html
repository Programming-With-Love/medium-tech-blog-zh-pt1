<html>
<head>
<title>Migrate Your Existing Domain’s DNS Management from Amazon Route 53 to Oracle Cloud Infrastructure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将您现有域的DNS管理从Amazon Route 53迁移到Oracle云基础架构</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/migrate-your-existing-domains-dns-management-from-amazon-route-53-to-oracle-cloud-infrastructure-8788177d584a?source=collection_archive---------0-----------------------#2021-04-07">https://medium.com/oracledevs/migrate-your-existing-domains-dns-management-from-amazon-route-53-to-oracle-cloud-infrastructure-8788177d584a?source=collection_archive---------0-----------------------#2021-04-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="f303" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在过去的几年里，我一直使用Amazon Route53作为我管理自定义域名的主要DNS服务。我使用那个自定义域运行我的大多数开发实例和API服务器，并使用Route 53管理DNS。</p><p id="314b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">去年，我得到了我的<a class="ae jc" href="https://www.oracle.com/au/cloud/free/" rel="noopener ugc nofollow" target="_blank"> OCI永久免费</a>资源，并将我的大部分实例和数据库迁移到永久免费层，但我继续使用AWS DNS进行域名管理。我没有足够的勇气去碰它的DNS部分，破坏我的应用程序。虽然我运行的服务不是一个生产应用程序，但重新配置所有的A记录会很不方便。最重要的是，我一个月只能进行10，000-12，000次DNS查询，并向AWS支付0.55美元，这在OCI是免费的(前提是你保持在每月100万次查询的限制之下)。</p><p id="e1a6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以我决定是时候把我的托管区域从AWS Route 53迁移到OCI公共DNS了。我认为这将是一个重大的任务，但它被证明是超级简单，只需要几个小时。该域名被频繁使用，并拥有我的Oracle Apex应用程序开发环境的虚拟URL但是短暂的停机并不是什么大问题。通过正确的TTL设置，切换可以是无缝的。</p><p id="a78e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我正在记录我的旅程，以便让其他人更容易地将他们的DNS从AWS Route53迁移到OCI。如果您在OCI上运行您的企业应用/数据库堆栈，那么最好从同一个地方管理您的DNS，而不是另一个云提供商。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/d7b1d59b38d97d8ee8bdc74e4dc94081.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H02xB8CFYg29oN_4Acp7LA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">AWS Route53 to OCI DNS</figcaption></figure></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><p id="2305" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">设置:</strong></p><ul class=""><li id="02a4" class="ka kb hh ig b ih ii il im ip kc it kd ix ke jb kf kg kh ki bi translated">要迁移的<strong class="ig hi">域名:</strong><a class="ae jc" href="http://awscloudserver.com" rel="noopener ugc nofollow" target="_blank">awscloudserver.com</a></li><li id="0566" class="ka kb hh ig b ih kj il kk ip kl it km ix kn jb kf kg kh ki bi translated"><strong class="ig hi">现有注册服务商&amp;域名的DNS服务:</strong>亚马逊网络服务路由53</li><li id="9853" class="ka kb hh ig b ih kj il kk ip kl it km ix kn jb kf kg kh ki bi translated"><strong class="ig hi">新的DNS服务提供商:</strong> Oracle云基础设施</li></ul><p id="2607" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">开始前的一些要点:</strong></p><ul class=""><li id="cef3" class="ka kb hh ig b ih ii il im ip kc it kd ix ke jb kf kg kh ki bi translated">这不是域名注册的转让，而是域名的Route 53托管区域从AWS到Oracle的转让。该域仍在AWS上注册。即使你的域名是在Crazydomains、GoDaddy或其他域名提供商那里注册的，这个过程还是一样的。只要您可以更新那里的NS记录，您就可以将域名迁移到OCI。</li><li id="76bb" class="ka kb hh ig b ih kj il kk ip kl it km ix kn jb kf kg kh ki bi translated">这是一个公共DNS的简单迁移，带有一些A记录作为POC。但是对于生产域迁移，建议让您的网络团队参与进来。</li><li id="4d3a" class="ka kb hh ig b ih kj il kk ip kl it km ix kn jb kf kg kh ki bi translated">在我的情况下，TTL(生存时间)设置已经很低，但如果你的TTL设置很高，请确保降低现有DNS服务提供商的NS记录上的TTL设置。也降低OCI NS唱片的TTL设置。记录的TTL设置确定您希望DNS解析程序缓存记录并保持使用缓存信息的时间。当TTL过期时，解析器将向特定域的DNS提供商发送另一个查询，以获取最新的名称解析。</li><li id="5ab0" class="ka kb hh ig b ih kj il kk ip kl it km ix kn jb kf kg kh ki bi translated">自2021年4月7日起，OCI不支持域名系统安全扩展(<strong class="ig hi"> DNSSEC </strong>)。</li></ul></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><p id="d5e9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">通过6个简单步骤将DNS迁移到OCI的工作流程</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es ko"><img src="../Images/7012291a7daaeeab6b4053418d6a6ea4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*bv3bNhnTqOEjst6YzaGAMQ.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx">DNS Migration Workflow</figcaption></figure><p id="4066" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以按照以下步骤将AWS Route 53上的公共托管区域迁移到OCI。这将适用于任何域名注册商，只要你的注册商允许你更新你的域名的NS服务器。</p><p id="d069" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第一步。在AWS中获取您的托管区域中所有记录的列表。</strong></p><p id="2624" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">53号公路上的记录必须在OCI上重新创建/导入。AWS允许您使用AWS命令行工具导出区域文件。</p><p id="d172" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例:<code class="du kp kq kr ks b">aws route53 list-resource-record-sets --hosted-zone-id hosted-zone-id &gt; path-to-output-file</code></p><p id="f4f7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ref:<a class="ae jc" href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/hosted-zones-migrating.html#hosted-zones-migrating-create-file" rel="noopener ugc nofollow" target="_blank">https://docs . AWS . Amazon . com/route 53/latest/developer guide/hosted-zones-migrating . html # hosted-zones-migrating-create-file</a></p><p id="551d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由于我只有一些记录在我的托管区，我会手动将它们添加到OCI。转到AWS控制台&gt;托管区域&gt;域名，获取记录列表。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/9a6ca6f782a776cac0cc5af498461051.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sFpgSDyvTQb_7HmuM-3LNA.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/d2a6a389c6f688d8b1e49cd4f6089c97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*25TyUfV-ydzdkQciimRtFQ.png"/></div></div></figure><p id="7e31" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第二步。在OCI上创建一个区域名为“awscloudserver.com”的公共区域</strong></p><p id="6d01" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">登录到您的OCI租赁，并从“DNS管理”创建一个公共区域。您的用户应该拥有DNS所需的策略和权限。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kv"><img src="../Images/591dab2ba31d1fae2ff955031c49a595.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SzugVey8G5DO5OjTLgiK8A.png"/></div></div></figure><p id="6b2c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将为DNS创建4个NS记录和1个授权起始(SOA)记录。将4个NS记录复制到一个记事本文件中，因为我们稍后将使用它们来更改AWS中的NS服务器。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/ca34a0505286025e76c0baa796a5383f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RENLzibE3iOOZOvestw-cQ.png"/></div></div></figure><p id="0ed0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第三步。更改AWS上的NS服务器</strong></p><p id="9f6d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">转到AWS控制台&gt;注册域&gt;域名</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kw"><img src="../Images/e2bffddd683c9fe9791e5f9a01c26a06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NLGMuQO5PJazlQtnoDPuvg.png"/></div></div></figure><p id="da1f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">添加或编辑名称服务器</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kx"><img src="../Images/78342fbc39214b2ed4f3304c26a185da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*I3eB_-W-q0fDzOkkv1EorQ.png"/></div></div></figure><p id="5c3a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将您之前在记事本中复制的OCI NS服务器添加到此处的名称服务器列表中，然后单击更新</p><p id="6693" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ns2.p68.dns.oraclecloud.net<br/>ns4.p68.dns.oraclecloud.net。<br/>ns1.p68.dns.oraclecloud.net。<br/>ns3.p68.dns.oraclecloud.net。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ky"><img src="../Images/d138881dd0abe2c0884e30fa3d5a04d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GnxMAhNj1s4T5msUynofng.png"/></div></div></figure><p id="9827" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦您更新名称服务器的请求完成。完成后，您会收到一封电子邮件。</p><p id="a204" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第四步。</strong> <strong class="ig hi">将您的53号公路记录添加到OCI公共DNS区域记录中</strong></p><p id="d885" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">要迁移的记录:</strong> <br/>记录名称记录类型值TTL(秒)<br/>oracleapex.awscloudserver.com A 168.138.109.140 30<br/>ordsprimordial.awscloudserver.com A 140.238.196.118 300<br/>ordssecondary.awscloudserver.com A 152.67.98.41 300</p><div class="je jf jg jh fd ab cb"><figure class="kz ji la lb lc ld le paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/1410a406f3baddffcf77bab82ba9fb62.png" data-original-src="https://miro.medium.com/v2/resize:fit:664/format:webp/1*k7b00XOp6omvu_Ryt3axHw.png"/></div></figure><figure class="kz ji lf lb lc ld le paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/ac4a73727725f85db7f0daee3c1a1af0.png" data-original-src="https://miro.medium.com/v2/resize:fit:666/format:webp/1*jQL7xXWNyvIQP7f2MS8Idw.png"/></div></figure><figure class="kz ji lg lb lc ld le paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><img src="../Images/53507165f01826e43df17371fa3a21c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*C1Ztdd53jS8hO9fik6d07Q.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx lh di li lj">Add records to OCI Public Zone</figcaption></figure></div><p id="90c5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lk">确保添加所有记录后发布更改</em></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kt"><img src="../Images/bde9b27a64b3284b50ebb2585f2bc7b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HNH2VSoyZSsShO6VfQNPYQ.png"/></div></div></figure><p id="1074" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">第五步。通过对该域的NS记录进行摘要，验证该域的DNS服务器是否已更改。</strong></p><p id="f41c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">更新Route53域NS服务器前的NS记录</strong></p><p id="0d10" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$挖oracleapex.awscloudserver.com</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ll"><img src="../Images/3c9f1f3033088ec25e2619fe40e11e73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5z8CLYDXM4MpxwmzaArLMQ.png"/></div></div></figure><p id="8de4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">将Route53域NS服务器更新到OCI后的NS记录</strong></p><p id="e894" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ dig<a class="ae jc" href="http://twitter.com/8" rel="noopener ugc nofollow" target="_blank">@ 8</a>. 8 . 8 . 8+短NS awscloudserver.com</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lm"><img src="../Images/9381f6d6592fb12c67fab19ae65e69aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fFVhcpYIpJhyHpXKSy7QpA.png"/></div></div></figure><p id="82c3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lk">重要提示:根据您的域注册商的不同，NS服务器的更新和传播可能需要几个小时到几天的时间。在AWS的情况下，它非常快，不超过几个小时。</em></p><p id="1eba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦域被解析为Oracle DNS服务器，您就可以从Route 53中删除托管区域。(确保在删除AWS托管区域之前删除所有记录)</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ln"><img src="../Images/1b481f95bbdc08becb434c5f1b553ddb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3pjVW32nTZjoLUN2cQxUjw.png"/></div></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lo"><img src="../Images/a02f94e151d385132a98deded0428d6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xwlx7JjDTqcFfKcByRtHdA.png"/></div></div></figure><p id="196a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">总结</strong></p><p id="230f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我可以轻松地将我的DNS服务从AWS Route53转移到OCI公共DNS，而且非常无缝。与亚马逊Route53相比，OCI更具成本效益，因为你不必为公共区域的每次托管付费。</p><p id="fa71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">参考文献</strong></p><ol class=""><li id="fde6" class="ka kb hh ig b ih ii il im ip kc it kd ix ke jb lp kg kh ki bi translated">甲骨文DNS—<a class="ae jc" href="https://www.oracle.com/au/cloud/networking/dns/" rel="noopener ugc nofollow" target="_blank">https://www.oracle.com/au/cloud/networking/dns/</a></li><li id="9254" class="ka kb hh ig b ih kj il kk ip kl it km ix kn jb lp kg kh ki bi translated">Oracle云基础设施DNS定价—<a class="ae jc" href="https://www.oracle.com/cloud/networking/edge-services-pricing.html" rel="noopener ugc nofollow" target="_blank">https://www . Oracle . com/Cloud/networking/edge-services-Pricing . html</a></li></ol></div></div>    
</body>
</html>