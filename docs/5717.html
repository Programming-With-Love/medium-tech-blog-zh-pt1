<html>
<head>
<title>ODP.NET Tracing — The Basics</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">ODP.NET追踪—基础知识</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/odp-net-tracing-the-basics-5b110c266bce?source=collection_archive---------1-----------------------#2020-05-26">https://medium.com/oracledevs/odp-net-tracing-the-basics-5b110c266bce?source=collection_archive---------1-----------------------#2020-05-26</a></blockquote><div><div class="es gk gl gm gn go"/><div class="gp gq gr gs gt"><div class=""/><figure class="ec ee hu hv hw hx dy dz paragraph-image"><div class="dy dz ht"><img src="../Images/34dda90376e0b0293f4126a47dc7d218.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*79Cskvv4KyH0zarpXcsKtg.png"/></div></figure><p id="e1f8" class="pw-post-body-paragraph ia ib gw ic b id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix gp bi translated">我之前写过一些关于ODP.NET追踪的新特性。然后，我意识到并不是每个人都知道如何启用和配置ODP.NET跟踪。在这篇博文中，我将教授一些基础知识，并分享一些代码和配置，您可以将它们剪切并粘贴到您的。NET应用程序，以便在需要时轻松生成ODP.NET跟踪。</p><h1 id="6a62" class="iz ja gw bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">基础知识</h1><p id="4a15" class="pw-post-body-paragraph ia ib gw ic b id jx if ig ih jy ij ik il jz in io ip ka ir is it kb iv iw ix gp bi translated">ODP。网络跟踪有两个您将始终使用的通用设置:</p><ul class=""><li id="6e26" class="kc kd gw ic b id ie ih ii il ke ip kf it kg ix kh ki kj kk bi translated"><code class="eu kl km kn ko b">TraceFileLocation</code> —跟踪文件目录位置</li><li id="500b" class="kc kd gw ic b id kp ih kq il kr ip ks it kt ix kh ki kj kk bi translated"><code class="eu kl km kn ko b">TraceLevel</code> —跟踪级别</li></ul><p id="6646" class="pw-post-body-paragraph ia ib gw ic b id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix gp bi translated"><code class="eu kl km kn ko b">TraceFileLocation</code>不需要设置，因为它将使用默认的操作系统临时目录位置。但是，大多数人设置一个值来使跟踪文件更容易找到。</p><p id="bfb9" class="pw-post-body-paragraph ia ib gw ic b id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix gp bi translated">默认情况下，<code class="eu kl km kn ko b">TraceLevel</code>的值为零，表示禁用跟踪。这是你大多数时候想要的，因为跟踪会增加你的应用程序的开销，并且会降低性能。当您遇到希望了解更多信息或需要Oracle诊断和修复的问题时，可以通过将值设置为<code class="eu kl km kn ko b">TraceLevel</code>来启用跟踪。ODP.NET有许多跟踪级别来跟踪提供者在外部和内部执行的不同类型的操作。</p><p id="11f0" class="pw-post-body-paragraph ia ib gw ic b id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix gp bi translated">通常，您可以设置跟踪级别来跟踪所有ODP.NET操作。这是最有可能为调试获取足够信息的方法。对于托管的ODP.NET和ODP.NET核心，该级别为7。对于非托管ODP.NET，该级别为127。</p><h1 id="706d" class="iz ja gw bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">给我一些配置或配置(剪切和粘贴)</h1><p id="8ece" class="pw-post-body-paragraph ia ib gw ic b id jx if ig ih jy ij ik il jz in io ip ka ir is it kb iv iw ix gp bi translated">您可以在许多位置设置这些值。最容易的地方是在。NET配置文件或代码中。不想重建就用前者。如果不使用. NET配置文件，请使用后者。下面是托管ODP的一个配置示例。网络:</p><pre class="ku kv kw kx ek ky ko kz la aw lb bi"><span id="a6e2" class="lc ja gw ko b ev ld le l lf lg">&lt;oracle.manageddataaccess.client&gt;<br/>    &lt;version number="*"&gt;     <br/>        &lt;settings&gt;              <br/>             &lt;setting name=”TraceLevel” value=”7" /&gt;<br/>             &lt;setting name=”TraceFileLocation” value=”D:\traces\”/&gt;<br/>        &lt;/settings&gt; <br/>    &lt;/version&gt;<br/>&lt;/oracle.manageddataaccess.client&gt;</span></pre><p id="ab33" class="pw-post-body-paragraph ia ib gw ic b id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix gp bi translated">确保将此样本添加到的<code class="eu kl km kn ko b">&lt;configuration&gt;</code>部分。NET配置文件。根据需要设置跟踪文件位置目录位置。</p><p id="0d96" class="pw-post-body-paragraph ia ib gw ic b id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix gp bi translated">非托管ODP.NET使用相同的设置，但位于不同的子部分<code class="eu kl km kn ko b">&lt;oracle.unmanageddataaccess.client&gt;</code>。举个例子，</p><pre class="ku kv kw kx ek ky ko kz la aw lb bi"><span id="b093" class="lc ja gw ko b ev ld le l lf lg">&lt;oracle.unmanageddataaccess.client&gt;<br/>    &lt;version number="*"&gt;     <br/>        &lt;settings&gt;              <br/>             &lt;setting name=”TraceLevel” value=”127" /&gt;<br/>             &lt;setting name=”TraceFileLocation” value=”D:\traces\”/&gt;<br/>        &lt;/settings&gt; <br/>    &lt;/version&gt;<br/>&lt;/oracle.unmanageddataaccess.client&gt;</span></pre><p id="791b" class="pw-post-body-paragraph ia ib gw ic b id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix gp bi translated">保存这些修改后，重启应用程序。调用ODP.NET API后，将创建并填充跟踪文件。</p><p id="d403" class="pw-post-body-paragraph ia ib gw ic b id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix gp bi translated">ODP。网芯不用。NET配置文件。未来的版本将提供跟踪设置的配置文件。</p><p id="acad" class="pw-post-body-paragraph ia ib gw ic b id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix gp bi translated">ODP。NET Core主要使用代码进行配置。ODP.NET<code class="eu kl km kn ko b">OracleConfiguration</code>类包含跟踪级别和跟踪文件位置设置，可以使用以下示例在C#中进行设置:</p><pre class="ku kv kw kx ek ky ko kz la aw lb bi"><span id="e53f" class="lc ja gw ko b ev ld le l lf lg">OracleConfiguration.TraceFileLocation = @"D:\traces";<br/>OracleConfiguration.TraceLevel = 7;</span></pre><p id="31a9" class="pw-post-body-paragraph ia ib gw ic b id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix gp bi translated">如果您想跟踪所有ODP.NET调用，请确保在您的应用程序调用任何其他ODP.NET API之前添加此代码片段。如果您的ODP.NET版本支持动态跟踪，请将这些调用放在有问题的代码区域之前。</p><p id="730c" class="pw-post-body-paragraph ia ib gw ic b id ie if ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix gp bi translated">在ODAC 19c和更高版本中，这些<code class="eu kl km kn ko b">OracleConfiguration</code>跟踪设置在托管和非托管ODP.NET中也可用。</p><h1 id="cb55" class="iz ja gw bd jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw bi translated">结论</h1><p id="d0ba" class="pw-post-body-paragraph ia ib gw ic b id jx if ig ih jy ij ik il jz in io ip ka ir is it kb iv iw ix gp bi translated">我希望你已经了解了一点ODP.NET跟踪是如何工作的。当您需要启用ODP.NET追踪时，可以将这些代码和配置片段复制并粘贴到您自己的应用程序中。</p></div></div>    
</body>
</html>