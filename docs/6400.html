<html>
<head>
<title>Building a MarkDown Reader in Electron</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">建立一个电子阅读器</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/building-a-markdown-reader-in-electron-5d7fb6c0eae9?source=collection_archive---------5-----------------------#2018-01-30">https://medium.com/quick-code/building-a-markdown-reader-in-electron-5d7fb6c0eae9?source=collection_archive---------5-----------------------#2018-01-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/8b1a8bdf051ff144d6ce7eee73b30961.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wrkCeup7s3iYPyGFHUySyg.jpeg"/></div></div></figure><p id="2739" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">自从它问世以来，我一直对Electron感兴趣，因为它允许你用JavaScript编写桌面应用程序。这允许您使用所有您习惯使用的JavaScript包！另外，我花了这么多时间使用VS代码，我可能应该学习它背后的技术，对吗？</p><h1 id="e962" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">入门指南</h1><p id="47e0" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">我开始使用<code class="du kq kr ks kt b">npm</code>全球安装电子。然后，我浏览了电子网站上的“Hello World”示例。它主要展示了如何启动一个电子应用程序的实例，以及如何处理关闭窗口。我最终在我的最终项目中使用了大部分代码。</p><p id="e96c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然后我做了一些谷歌搜索，看看人们是如何分离出他们的代码的。我最初并不完全理解，应该有单独的代码来创建桌面应用程序，然后“查看”代码供用户查看和交互。不过，为了包含npm包，您仍然可以在视图端使用<code class="du kq kr ks kt b">require</code>语句，这不同于普通的“客户端”JavaScript。我确实看了几个样本项目，但是在我的最终项目中，除了文件结构之外，我没有使用任何东西。</p><h1 id="f5a5" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">最终项目</h1><p id="8d52" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">我做了很多演讲，我通常会为这些演讲写笔记。我通常使用VS代码中的Markdown预览来在我说话的时候查看那些笔记。当我有另一个包含代码的VS代码实例时，这可能会变得复杂——我的缩放级别和定制在每个窗口中都有变化！我决定我应该制作自己的Markdown浏览器，它是为演讲量身定制的。</p><p id="c967" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我从处理大部分窗口创建代码的<code class="du kq kr ks kt b">main.js</code>开始。我的代码与电子网站上的<a class="ae ku" href="https://electronjs.org/docs/tutorial/quick-start" rel="noopener ugc nofollow" target="_blank">快速入门</a>代码基本相同。我的一个改变是我用用户显示器的大小来决定窗口的大小。</p><pre class="kv kw kx ky fd kz kt la lb aw lc bi"><span id="8162" class="ld jo hh kt b fi le lf l lg lh">const { width, height } = electron.screen.getPrimaryDisplay().workAreaSize<br/>win = new BrowserWindow({ width, height, frame: false })</span></pre><p id="1d0a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此外，在开发中，我使用了<a class="ae ku" href="https://www.google.com/search?q=electron+hot+reload&amp;oq=electron+hot+relo&amp;aqs=chrome.0.0j69i57j0.4754j1j1&amp;sourceid=chrome&amp;ie=UTF-8" rel="noopener ugc nofollow" target="_blank">电子重装</a>，这真的很有帮助。默认情况下，每次进行更改时，您都必须重新启动电子实例，这很快就会变得非常烦人！这个npm包为代码的视图端引入了热重载。</p><p id="5f18" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后，我创建了一个包含以视图为中心的html、css和js的<code class="du kq kr ks kt b">view</code>文件夹。这个html看起来和其他html文件非常相似！</p><pre class="kv kw kx ky fd kz kt la lb aw lc bi"><span id="47a2" class="ld jo hh kt b fi le lf l lg lh">&lt;!DOCTYPE html&gt;<br/>&lt;html&gt;</span><span id="48ed" class="ld jo hh kt b fi li lf l lg lh">&lt;head&gt;<br/>  &lt;meta charset="UTF-8"&gt;<br/>  &lt;title&gt;Markdown Reader!&lt;/title&gt;<br/>  &lt;link rel="stylesheet" href="style.css"&gt;<br/>  &lt;link <br/>    rel="stylesheet" <br/>  href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"<br/>  &gt;<br/>&lt;/head&gt;</span><span id="e4bc" class="ld jo hh kt b fi li lf l lg lh">&lt;body&gt;<br/>  &lt;div class="container"&gt;<br/>    &lt;input type="button" value="+" class="select-file"/&gt;<br/>    &lt;button class="close"&gt;x&lt;/button&gt;<br/>    &lt;div class="md"&gt;&lt;/div&gt;    <br/>  &lt;/div&gt;<br/>  &lt;script src="./script.js"&gt;&lt;/script&gt;<br/>&lt;/body&gt;</span><span id="2c72" class="ld jo hh kt b fi li lf l lg lh">&lt;/html&gt;</span></pre><p id="ca48" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然而，JavaScript文件看起来确实与普通的客户端文件有点不同。</p><pre class="kv kw kx ky fd kz kt la lb aw lc bi"><span id="65e2" class="ld jo hh kt b fi le lf l lg lh">const fs = require('fs')<br/>const marked = require('marked')<br/>const hljs = require('highlight.js')</span><span id="fa60" class="ld jo hh kt b fi li lf l lg lh">const { getCurrentWindow, dialog } = require('electron').remote</span><span id="a2a1" class="ld jo hh kt b fi li lf l lg lh">const readFile = (file) =&gt; {<br/>  fs.readFile(file, (err, data) =&gt; {<br/>    document.querySelector('.md').innerHTML = marked(data.toString())<br/>    Array.from(document.querySelectorAll('pre code')).forEach(<br/>      block =&gt; hljs.highlightBlock(block))<br/>  })<br/>}</span><span id="49d4" class="ld jo hh kt b fi li lf l lg lh">const filters = { filters: [{ name: 'Markdown', extensions: ['md', 'markdown'] }] }</span><span id="24a2" class="ld jo hh kt b fi li lf l lg lh">const openFilePicker = () =&gt; {<br/>  dialog.showOpenDialog(filters, fileNames =&gt; {<br/>    if (fileNames) {<br/>      readFile(fileNames[0])<br/>    }<br/>  })<br/>}</span><span id="f506" class="ld jo hh kt b fi li lf l lg lh">const close = e =&gt; {<br/>  const window = getCurrentWindow()<br/>  window.close()<br/>}</span><span id="961c" class="ld jo hh kt b fi li lf l lg lh">document.querySelector('.close').addEventListener('click', close)<br/>document.querySelector('.select-file').addEventListener('click', openFilePicker)</span></pre><p id="9ced" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">首先，我在<code class="du kq kr ks kt b">index.html</code>中使用了require语句，而不是脚本标签。其次，Electron有一些不会在浏览器中使用的动作，比如关闭窗口或打开用户的文件对话框。搞清楚这些动作很容易。<code class="du kq kr ks kt b">dialog.showOpenDialog</code>打开一个文件选择器，然后我使用Node的<code class="du kq kr ks kt b">fs</code>打开那个文件。我还删除了电子邮件的灰色默认标题，所以我需要自己的关闭按钮。我用上面代码中的<code class="du kq kr ks kt b">close</code>函数做到了这一点。</p><p id="940e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">除此之外，我可以使用普通的JavaScript方法与dom交互并添加事件监听器。</p><p id="e54b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我<strong class="ir hi">真的</strong>喜欢这个应用程序的结果，而且我实际上几乎每天都会使用这个应用程序。顶部看起来如下:</p><figure class="kv kw kx ky fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lj"><img src="../Images/10c70c7ec90072fb6fdaeed731aea10b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*jcwpeFp5ulJw6wrp.png"/></div></div></figure><p id="5c43" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">代码片段使用GitHub的文本编辑器主题:</p><figure class="kv kw kx ky fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lj"><img src="../Images/a3fd223f00016f1fe17cb53e9c158b97.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BwSbG830szXicK82.png"/></div></div></figure><p id="03f6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我使用了自定义的间距、填充和字体，以使我在演示时可读性更好！</p><p id="cff4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我确实尝试过捆绑这个应用，让它成为一个真正的桌面应用，但我没有太大的成功。我可能会进一步研究它，但我尝试了两个库，两个库似乎都不像我希望的那样。相反，我在我的<code class="du kq kr ks kt b">.zshrc</code>中使用了一个别名，在我电脑的任何地方打开它。老实说，对我来说，这是一个更好的选择，因为当我的电脑启动时，除了iTerm，我不使用finder或Launchpad打开任何东西！</p><h1 id="a830" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">后续步骤</h1><p id="6187" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">如果我要再开发一个桌面应用程序，我肯定会使用electronic。它易于使用，有很好的文档记录，并且与我的正常开发过程相似。我不一定认为我会有很多其他我想构建的桌面应用程序，但我喜欢构建这个应用程序的过程，并会向那些想轻松构建桌面应用程序的人推荐Electron！</p><p id="b6ea" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><a class="ae ku" href="https://github.com/aspittel/markdown-viewer" rel="noopener ugc nofollow" target="_blank">代码</a></p><p id="0bcd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">安装说明:</p><pre class="kv kw kx ky fd kz kt la lb aw lc bi"><span id="494d" class="ld jo hh kt b fi le lf l lg lh">$ git clone <a class="ae ku" href="https://github.com/aspittel/markdown-viewer" rel="noopener ugc nofollow" target="_blank">https://github.com/aspittel/markdown-viewer</a><br/>$ cd markdown-viewer<br/>$ npm install -g electron<br/>$ npm install<br/>$ electron .</span></pre><p id="165d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">我的</strong> <a class="ae ku" rel="noopener" href="/on-learning-new-things/learning-new-things-f4db7f16724"> <strong class="ir hi">关于学习新事物的一部分</strong> </a> <strong class="ir hi">系列</strong></p></div><div class="ab cl lk ll go lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ha hb hc hd he"><figure class="kv kw kx ky fd ii"><div class="bz dy l di"><div class="lr ls l"/></div></figure><p id="50ba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请点击👏按钮下面几下，以示支持！⬇⬇谢谢！不要忘记<strong class="ir hi">遵循下面的</strong>快速代码。</p><blockquote class="lt"><p id="d0e0" class="lu lv hh bd lw lx ly lz ma mb mc jm dx translated"><em class="md">在</em> <a class="ae ku" href="http://www.quickcode.co/" rel="noopener ugc nofollow" target="_blank"> <em class="md">上查找各种编程语言的免费课程</em> </a> <em class="md">。在</em> <a class="ae ku" href="https://www.messenger.com/t/1493528657352302" rel="noopener ugc nofollow" target="_blank"> Messenger </a> <em class="md">上获取新的更新。</em></p></blockquote></div></div>    
</body>
</html>