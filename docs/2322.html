<html>
<head>
<title>Today I Learned: Mengenal Context pada Golang — WithValue</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Today I Learned: Mengenal Context pada Golang — WithValue</h1>
<blockquote>原文：<a href="https://medium.easyread.co/today-i-learned-mengenal-context-pada-golang-withvalue-907618ceae3?source=collection_archive---------3-----------------------#2018-08-01">https://medium.easyread.co/today-i-learned-mengenal-context-pada-golang-withvalue-907618ceae3?source=collection_archive---------3-----------------------#2018-08-01</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><div class=""><h2 id="9c6c" class="pw-subtitle-paragraph jk im in bd b jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb dk translated">Penggunaan context menurut yang sering saya gunakan</h2></div><p id="10dc" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Di Golang tepatnya setelah versi 1.7, terdapat satu fitur <em class="ky"> package </em> yang kini ditambahkan menjadi salah satu <em class="ky"> built in </em> yaitu <strong class="ke io"> <em class="ky"> context </em> </strong> . Sejauh yang saya pahami, <em class="ky"> context </em> sangat berguna untuk proses <em class="ky"> cancellation </em> dan <em class="ky"> passing value </em> . <em class="ky"> Nah </em> , pada artikel kali ini saya akan menjelaskan penggunaan <em class="ky"> context </em> yang sering saya gunakan.</p><h1 id="9e64" class="kz la in bd lb lc ld le lf lg lh li lj jt lk ju ll jw lm jx ln jz lo ka lp lq bi translated">Context sebagai Passing Value</h1><p id="1536" class="pw-post-body-paragraph kc kd in ke b kf lr jo kh ki ls jr kk kl lt kn ko kp lu kr ks kt lv kv kw kx ig bi translated">Hal paling sederhana dari <em class="ky"> context </em> ialah kita dapat mengirim nilai atau data ( <em class="ky"> object, string, </em> dsb) melalui <em class="ky"> context </em> dan nilai tersebut akan dapat diakses di seluruh turunan <em class="ky"> context </em> yang terhubung. Misalnya,</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="54b9" class="mf la in mb b gy mg mh l mi mj">ctx := context.WithValue(parentContext, key, value)</span></pre><ul class=""><li id="ae34" class="mk ml in ke b kf kg ki kj kl mm kp mn kt mo kx mp mq mr ms bi translated"><strong class="ke io"> parentContext </strong> : merupakan <em class="ky"> parent </em> (induk) dari <em class="ky"> context </em> tersebut,</li><li id="b511" class="mk ml in ke b kf mt ki mu kl mv kp mw kt mx kx mp mq mr ms bi translated"><strong class="ke io"> key </strong> : merupakan <em class="ky"> key </em> yang akan digunakan untuk mengambil data pada <em class="ky"> context </em> , dan</li><li id="e64b" class="mk ml in ke b kf mt ki mu kl mv kp mw kt mx kx mp mq mr ms bi translated"><strong class="ke io"> value </strong> : merupakan nilai yang akan dikirim <em class="ky"> context </em> dan semua turunannya.</li></ul><p id="ad25" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Konsep <em class="ky"> context </em> seperti pohon ( <em class="ky"> tree </em> ) yang bercabang-cabang.</p><pre class="lw lx ly lz gt ma mb mc md aw me bi"><span id="035b" class="mf la in mb b gy mg mh l mi mj">package main</span><span id="25d7" class="mf la in mb b gy my mh l mi mj">import (<br/> "context"<br/> "fmt"<br/>)</span><span id="a039" class="mf la in mb b gy my mh l mi mj">func main() {<br/> contextParent := context.Background()<br/> ctx1 := context.WithValue(<strong class="mb io">contextParent</strong>, "key1", "hello world")<br/> ctx2 := context.WithValue(<strong class="mb io">ctx1</strong>, "key2", "hello girls")<br/> ctx3 := context.WithValue(<strong class="mb io">ctx2</strong>, "key3", "hello Boys")<br/> ctx4 := context.WithValue(<strong class="mb io">contextParent</strong>, "key4", "hello children")<br/> ctx5 := context.WithValue(<strong class="mb io">ctx1</strong>, "key5", "hello Later")</span><span id="1cbe" class="mf la in mb b gy my mh l mi mj">fmt.Println(ctx5.Value("key5"))<br/> fmt.Println(ctx5.Value("key4"))<br/> fmt.Println(ctx5.Value("key3"))<br/> fmt.Println(ctx5.Value("key2"))<br/> fmt.Println(ctx5.Value("key1"))<br/> fmt.Println("========")<br/> fmt.Println(ctx4.Value("key5"))<br/> fmt.Println(ctx4.Value("key4"))<br/> fmt.Println(ctx4.Value("key3"))<br/> fmt.Println(ctx4.Value("key2"))<br/> fmt.Println(ctx4.Value("key1"))<br/> fmt.Println("========")<br/> fmt.Println(ctx3.Value("key5"))<br/> fmt.Println(ctx3.Value("key4"))<br/> fmt.Println(ctx3.Value("key3"))<br/> fmt.Println(ctx3.Value("key2"))<br/> fmt.Println(ctx3.Value("key1"))<br/> fmt.Println("========")<br/> fmt.Println(ctx2.Value("key5"))<br/> fmt.Println(ctx2.Value("key4"))<br/> fmt.Println(ctx2.Value("key3"))<br/> fmt.Println(ctx2.Value("key2"))<br/> fmt.Println(ctx2.Value("key1"))<br/> fmt.Println("========")<br/> fmt.Println(ctx1.Value("key5"))<br/> fmt.Println(ctx1.Value("key4"))<br/> fmt.Println(ctx1.Value("key3"))<br/> fmt.Println(ctx1.Value("key2"))<br/> fmt.Println(ctx1.Value("key1"))<br/>}</span></pre><p id="a693" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Jika dilihat dari potongan kode diatas, kita dapat melihat bagaimana cara <em class="ky"> context </em> itu bekerja. Setiap <em class="ky"> value </em> yang <em class="ky"> dipass </em> dari <em class="ky"> parent </em> , maka akan dapat diakses oleh semua <em class="ky"> childnya </em> . Namun <em class="ky"> value </em> yang <em class="ky"> dipass </em> pada <em class="ky"> child </em> tidak dapat diakses oleh <em class="ky"> parent </em> . Sifatnya dari atas ke bawah. Selain itu, <em class="ky"> value </em> yang <em class="ky"> dipass </em> sesama saudara ( <em class="ky"> context </em> yang memiliki satu <em class="ky"> parent </em> , namun masing-masing memiliki value tersendiri) juga tidak dapat saling mengakses.</p><p id="897b" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Jika digambarkan dalam bagan, kode diatas akan terlihat seperti dibawah ini untuk distribusi nilai( <em class="ky"> value </em> ) di <em class="ky"> context </em> masing-masing level.</p><figure class="lw lx ly lz gt na gh gi paragraph-image"><div role="button" tabindex="0" class="nb nc di nd bf ne"><div class="gh gi mz"><img src="../Images/1e4edce4c437aa87b246f90500979e2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4SJrE2ibbAdYbXiJxN3ixQ.png"/></div></div><figcaption class="nh ni gj gh gi nj nk bd b be z dk">context value distribution</figcaption></figure><ul class=""><li id="b84c" class="mk ml in ke b kf kg ki kj kl mm kp mn kt mo kx mp mq mr ms bi translated"><strong class="ke io"> contextParent </strong> : terbuat dari <code class="fe nl nm nn mb b"><strong class="ke io">context.Background()</strong></code> , dia tidak memiliki nilai, karena konsepnya hanya akan berjalan di <em class="ky"> background </em> .</li><li id="e208" class="mk ml in ke b kf mt ki mu kl mv kp mw kt mx kx mp mq mr ms bi translated"><strong class="ke io"> ctx1 </strong> : merupakan turunan pertama dari <code class="fe nl nm nn mb b">contextParent</code> , di <code class="fe nl nm nn mb b">ctx1</code> di isi nilai <code class="fe nl nm nn mb b">hello world</code></li><li id="7dee" class="mk ml in ke b kf mt ki mu kl mv kp mw kt mx kx mp mq mr ms bi translated"><strong class="ke io"> ctx4 </strong> : merupakan turunan dari <code class="fe nl nm nn mb b">contextParent</code> , merupakan <code class="fe nl nm nn mb b">sibling</code> dari <code class="fe nl nm nn mb b">ctx1</code> . <code class="fe nl nm nn mb b">ctx1</code> dan <code class="fe nl nm nn mb b">ctx4</code> tidak bisa saling mengakses nilai.</li><li id="1f83" class="mk ml in ke b kf mt ki mu kl mv kp mw kt mx kx mp mq mr ms bi translated"><strong class="ke io"> ctx2 </strong> dan <strong class="ke io"> ctx5 </strong> : merupakan turuan dari <code class="fe nl nm nn mb b">ctx1</code> . Masing masing memiliki nilai tersendiri. Dan mereka dapat mengakses nilai dari <code class="fe nl nm nn mb b">parent</code> mereka yakni <code class="fe nl nm nn mb b">ctx1</code></li><li id="1863" class="mk ml in ke b kf mt ki mu kl mv kp mw kt mx kx mp mq mr ms bi translated"><strong class="ke io"> ctx3 </strong> : turunan paling kecil dari <code class="fe nl nm nn mb b">contextParent</code> . Dia memiliki nilai tersendiri juga dan dia dapat mengakses nilai dari <code class="fe nl nm nn mb b">ctx1</code> ,dan <code class="fe nl nm nn mb b">ctx2</code> . Namun tidak bisa mengakses nilai dari <code class="fe nl nm nn mb b">ctx5</code> ataupun <code class="fe nl nm nn mb b">ctx4</code> .</li></ul><p id="583f" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">Untuk pengalaman saya, <code class="fe nl nm nn mb b">context.WithValue()</code> saya gunakan untuk mengirim <em class="ky"> value </em> atau data yang bersifat sensitif. Seperti kode akses token atau malah terkadang data user. Saya biasanya mengisi <code class="fe nl nm nn mb b">context.WithValue()</code> di <em class="ky"> middleware </em> dan membuatnya menjadi sebuah <em class="ky"> object </em> <em class="ky"> context </em> . Selanjutnya <em class="ky"> context </em> tersebut saya <em class="ky"> passing </em> ke semua <em class="ky"> function </em> yang membutuhkannya.</p><p id="7d79" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><em class="ky"> Baca juga lanjutan artikel ini (sengaja di pisah, karena jika satu artikel terlalu panjang. Sehingga di pisah jadi 2 artikel agar konsepnya jelas) </em></p><div class="no np gp gr nq nr"><a href="https://medium.com/easyread/today-i-learned-mengenal-context-pada-golang-2-withtimeout-15a3b3bf009b" rel="noopener follow" target="_blank"><div class="ns ab fo"><div class="nt ab nu cl cj nv"><h2 class="bd io gy z fp nw fr fs nx fu fw im bi translated">Today I Learned: Mengenal Context pada Golang(2) — WithTimeout</h2><div class="ny l"><h3 class="bd b gy z fp nw fr fs nx fu fw dk translated">Penggunaan context menurut yang sering saya gunakan</h3></div><div class="nz l"><p class="bd b dl z fp nw fr fs nx fu fw dk translated">medium.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of nf nr"/></div></div></a></div><p id="382c" class="pw-post-body-paragraph kc kd in ke b kf kg jo kh ki kj jr kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated"><strong class="ke io"> Referensi </strong> :</p><ul class=""><li id="def1" class="mk ml in ke b kf kg ki kj kl mm kp mn kt mo kx mp mq mr ms bi translated"><a class="ae og" href="https://golang.org/pkg/context/" rel="noopener ugc nofollow" target="_blank"> https://golang.org/pkg/context/ </a></li></ul></div><div class="ab cl oh oi hr oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="ig ih ii ij ik"><figure class="lw lx ly lz gt na"><div class="bz fp l di"><div class="oo op l"/></div></figure></div></div>    
</body>
</html>