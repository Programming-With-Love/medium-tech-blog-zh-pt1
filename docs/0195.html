<html>
<head>
<title>How Airbnb Supports Co-Hosting</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Airbnb如何支持联合托管</h1>
<blockquote>原文：<a href="https://medium.com/airbnb-engineering/how-airbnb-supports-co-hosting-edfb11d88575?source=collection_archive---------1-----------------------#2021-12-09">https://medium.com/airbnb-engineering/how-airbnb-supports-co-hosting-edfb11d88575?source=collection_archive---------1-----------------------#2021-12-09</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="30e1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">深入探究Airbnb的协作托管基础设施</p><p id="0cd8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作者:<a class="ae jc" href="https://www.linkedin.com/in/angelinerao/" rel="noopener ugc nofollow" target="_blank">安吉丽娜·拉奥</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/84372d8c841afaa59d6ef9f736a27863.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k8WLBeLdPKkv-MrppJi8kQ.jpeg"/></div></div></figure><h1 id="8d9e" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">介绍</h1><p id="f5de" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">Airbnb的使命是让主人能够提供独一无二的住宿，让客人能够以更真实、更互联的方式体验世界。有时主机由一个人处理，但在许多情况下，主机是一个团队的努力。主人通常会与另一个信任的人分担责任，比如家庭成员或邻居。这些受信任的合作伙伴是Airbnb平台上的共同主持人，他们被授权访问主持人的列表、预订和与客人的消息传递。</p><p id="d82c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">共同主持只是主持人协作的一种形式。随着托管成为主流，托管的规模也在增长；事实上，现在很多人把Airbnb上的主机作为他们的首要职业。从经营自己企业的东道主企业家，到老牌酒店公司的东道主，这些类型的东道主通过Airbnb上的团队进行合作。在团队中，托管团队成员被授予与其真实世界托管职责相对应的角色(例如，访客经理)，并具有一组相应的权限(例如，被允许向访客发送消息)。</p><p id="5bc6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">随着协作主机数量的增长和新协作形式的引入，支持它们的工程工作变得越来越复杂。考虑到这一挑战，Airbnb开发了一个单一的公共基础设施，可以支持所有当前和未来的Airbnb协作产品。该解决方案现在适用于所有内部团队。</p><p id="4a6b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇博文中，我们将介绍Airbnb协作托管的统一架构，以及我们如何使用这种共享基础设施来简化为主机构建产品的过程。在下一节中，我们将说明为什么在没有共享基础设施的情况下支持协作主机很快变得难以处理。然后，我们将浏览Airbnb的协作托管架构。最后，我们将讨论这个基础设施如何支持产品工程师的需求。</p><h1 id="6618" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">背景和动机</h1><p id="a9b9" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">在我们进入协作主机之前，让我们考虑一下单主机模型。因为只有一个人与每个列表相关联，所以这些数据可以很容易地存储在我们的列表数据库中的一个<code class="du ks kt ku kv b">host_id</code>列中。然后，我们可以执行一次检查，判断用户是否有权限对列表执行操作。这可能如下所示:</p><pre class="je jf jg jh fd kw kv kx ky aw kz bi"><span id="0031" class="la jq hh kv b fi lb lc l ld le">if (isListingHost) {<br/>     // Take action on listing<br/>}</span></pre><p id="b01d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当Airbnb推出其第一款合作托管产品Co-Hosting时，我们使用了这些类型的比较，就像我们对单主机模型所做的那样。</p><p id="4454" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我们的业务逻辑中，我们需要经常回答三种类型的关于人与资源(例如，列表、预订、审核)关系的问题:</p><ol class=""><li id="268e" class="lf lg hh ig b ih ii il im ip lh it li ix lj jb lk ll lm ln bi translated"><strong class="ig hi">权限</strong>:给定一个人和一个资源，这个人可以对这个资源采取行动<code class="du ks kt ku kv b">X</code>吗？这个问题的答案有助于我们确保人们只在Airbnb上采取明确允许他们采取的行动。例如，我们不能允许某人编辑无关主机列表上的价格。</li><li id="0f9b" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lk ll lm ln bi translated"><strong class="ig hi">集合查询</strong>:给定一个人，他可以访问哪些资源？例如，这个问题的答案有助于我们确定在一个人的Airbnb收件箱中显示哪些消息线索。</li><li id="2e93" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lk ll lm ln bi translated"><strong class="ig hi">要显示和通知的主机</strong>:给定一个资源，应该向来宾显示谁，以及应该向谁通知该资源的更新？例如，这个问题的答案有助于我们确定谁应该显示为这个列表的主机。</li></ol><p id="43d7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在联合托管之后，我们很快发现，执行我们为单主机模型所做的比较类型，并不能很好地扩展到协作和更复杂的用例。</p><ul class=""><li id="8f62" class="lf lg hh ig b ih ii il im ip lh it li ix lj jb lt ll lm ln bi translated">不断添加特定于单一类型协作主机的逻辑会导致代码难以处理。例如，权限检查可能如下所示:</li></ul><pre class="je jf jg jh fd kw kv kx ky aw kz bi"><span id="8304" class="la jq hh kv b fi lb lc l ld le">if (isListingHost || <br/>    isListingCoHost || <br/>    isListingTeamMember ||  <br/>    isListingCollabHost1 || <br/>    isListingCollabHost2 || <br/>    ...) {<br/>     // Take action on listing<br/>}</span></pre><ul class=""><li id="3e77" class="lf lg hh ig b ih ii il im ip lh it li ix lj jb lt ll lm ln bi translated">构建新功能的工程师需要了解所有现有类型的协作主机，并决定协作主机应该如何与该功能交互(例如，哪些类型的团队成员应该可以访问该功能？).如果工程师没有包括每个用例，该功能将不会对所有主机可用。</li></ul><p id="90c1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果没有任何一种统一的框架，主机产品开发很快就会变成一个费力的过程。</p><p id="b4d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">今天，由于我们的协作主机基础设施，产品工程师不需要担心特定类型的协作主机。他们只需要知道三件事，我们将在本帖中一一介绍:</p><ol class=""><li id="32bb" class="lf lg hh ig b ih ii il im ip lh it li ix lj jb lk ll lm ln bi translated">权限，查询姬路。</li><li id="7d94" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lk ll lm ln bi translated">对于集合查询，请使用资源的专用服务。</li><li id="2349" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lk ll lm ln bi translated">对于要显示或通知的主机，请使用协作主机API。</li></ol><h1 id="4686" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">协作托管核心架构</h1><p id="2377" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">我们使用用户组作为数据模型来表示任何一组人。用户组由id、组类型(如<code class="du ks kt ku kv b">COHOSTING</code>、<code class="du ks kt ku kv b">TEAM</code>)和用户组成员列表定义。</p><p id="d458" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用户组中的每个成员都由他们的Airbnb用户id和用户组角色定义，这使我们能够区分用户组中不同类型的成员。例如，如果一个主机(列表所有者)有一个联合主机，那么相应的用户组将是一个类型为<code class="du ks kt ku kv b">COHOSTING</code>的用户组，它有两个成员:主机，角色为<code class="du ks kt ku kv b">LISTING_OWNER</code>，联合主机，角色为<code class="du ks kt ku kv b">LISTING_COHOST</code>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lu"><img src="../Images/8b41402987105b709dd1fb7b1fff7dd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6JfNAQlj8Ml9LUHRxlh8AA.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx"><em class="lz">A Host and their Co-Host represented in the user group data model</em></figcaption></figure><p id="35a4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个模型也可以扩展到托管团队。我们支持几个特定于团队的角色，这些角色基于托管团队通常如何划分团队成员之间的职责，例如<code class="du ks kt ku kv b">LISTING_MANAGER</code>角色、<code class="du ks kt ku kv b">FINANCE_MANAGER</code>角色和<code class="du ks kt ku kv b">GUEST_MANAGER</code>角色。</p><p id="e4e8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在联合主持人或团队的创建和删除流程中，相应的用户组会相应地更新。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ma"><img src="../Images/1c94e96dc4abf81529ec05832be4b198.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*DV48R3dUKBjEryHK"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">Updates in product will trigger changes in both the source of truth (Co-Hosting or Teams) and the corresponding user groups</figcaption></figure><h2 id="d3f6" class="la jq hh bd jr mb mc md jv me mf mg jz ip mh mi kd it mj mk kh ix ml mm kl mn bi translated"><strong class="ak">资源&lt; &gt;用户组关联</strong></h2><p id="8f9d" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">既然我们有了任何协作主机组的模型，我们希望将每个组与组的相应资源相关联。这样，当我们试图回答一个人是否与给定资源有关系的问题时，无论具体的合作关系如何，都有一个单一的来源可以给我们答案。我们通过存储Airbnb资源id、用户组id和创建关联时的时间戳来跟踪这些资源&lt;&gt;用户组关联。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mo"><img src="../Images/a97db6317ff3e3b36b7fdce1a4c1b069.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*QH1mAPP9qNiJy0sM"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx"><em class="lz">Example ListingUserGroupAssociations table showing that listing A has been associated with user group C and listing B has been associated with user group D</em></figcaption></figure><p id="c948" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有两种情况需要更新资源&lt;&gt;用户组关联:</p><ol class=""><li id="67a4" class="lf lg hh ig b ih ii il im ip lh it li ix lj jb lk ll lm ln bi translated">当协作托管关系更新时。例如，当创建一个托管团队时，团队创建者的所有资源都与团队对应的用户组相关联</li><li id="b574" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lk ll lm ln bi translated">当协作主机资源被更新时。例如，当一个客人在一个联合托管的列表上预订一个预订时，我们需要将联合托管用户组与新的预订相关联，以便列表的联合托管可以帮助列表所有者进行托管。</li></ol><p id="46f7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果响应这些事件的更新没有及时发生，产品体验可能会过时。例如，如果一个主机将一个联合主机添加到一个列表中，但是底层关联没有被更新，则该联合主机将不能访问该列表及其预订。</p><p id="2d3d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在Airbnb这种规模的企业中，保持资源&lt;&gt;用户组关联的更新是一项挑战。事态在不断变化，有时变化很快；主机可能会创建一个托管团队，然后改变主意，立即删除它。因此，确实会出现竞态条件。</p><p id="f370" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本节的其余部分，我们将介绍Airbnb的可扩展系统，以保持资源&lt;&gt;用户组关联在竞争条件下保持最新。在接下来的部分，我们将详细介绍Airbnb如何在产品开发期间利用这些资源&lt;&gt;用户组关联。</p><p id="7514" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">一种实现精准资源&lt;用户组关联&gt;的系统</strong></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mo"><img src="../Images/c058efe095916f4aae4af11543650162.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*21elv_AMVnSJojew"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx"><em class="lz">The system that keeps resource &lt;&gt; user group associations updated</em></figcaption></figure><p id="0610" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当任何资源发生变化时，我们的系统会立即采取行动，获取受影响的资源来执行关联更新。因为可能有成千上万的资源需要获取，我们使用内部作业队列和调度系统将工作分解成作业，以避免超时和并行处理。对于所有受影响的资源，我们会将其用户组关联与Airbnb的当前状态进行比较，并在需要时更新关联。</p><p id="be80" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">并行处理更新的副作用是，可能会有竞争条件，导致真实来源和相应用户组关联之间的不一致。例如，如果主机创建了一个团队，然后立即删除了该团队，则生成的作业将并行执行，下游的“创建”作业可能会在“删除”作业之后执行。</p><p id="ed10" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了解决引入的任何不一致，系统接下来将获取现在更新的资源&lt;&gt;用户组关联，并将它们与事实的来源进行比较。如果有任何不匹配，它会使用保证最终一致性的弹性排队系统来修复它们。</p><p id="095e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该系统的设计有两个显著的好处:</p><ul class=""><li id="4864" class="lf lg hh ig b ih ii il im ip lh it li ix lj jb lt ll lm ln bi translated"><strong class="ig hi">优化性能</strong>:首先执行预期的更新，然后追溯性地修复不一致，这使得绝大多数处理可以分批并行进行。这导致了比立即逐个处理资源更便宜的操作，尽管后一种方法将消除修复不一致的步骤的需要。</li><li id="1232" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lt ll lm ln bi translated"><strong class="ig hi">幂等</strong>:每个资源更新事件都会触发关联的重新计算，这与更新的具体类型无关。因此，我们不需要担心以错误的顺序接收两个相反的事件，如创建和删除。因此，我们可以保证我们的系统更新是幂等的。</li></ul><h1 id="0bd5" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">产品开发中的协作托管基础设施</h1><p id="c62a" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">现在我们已经有了一个系统来实现准确的用户组&lt;&gt;资源关联，让我们重新讨论工程师在开发过程中需要回答的三种类型的人与资源关系问题。</p><h2 id="b949" class="la jq hh bd jr mb mc md jv me mf mg jz ip mh mi kd it mj mk kh ix ml mm kl mn bi translated"><strong class="ak"> 1。权限</strong></h2><p id="5f20" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">例如，当检查用户是否可以编辑某个列表的定价时，我们现在将通过检查用户用户组的列表关联，知道该人员是否与该列表存在任何协作关系。例如，我们可以发现该用户是与此列表关联的用户组中的<code class="du ks kt ku kv b">LISTING_MANAGER</code>团队成员。</p><p id="5569" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，最后一部分是定义角色如何映射到动作——例如，我们可能决定拥有<code class="du ks kt ku kv b">LISTING_COHOST</code>或<code class="du ks kt ku kv b">LISTING_MANAGER</code>角色的用户可以对与他们的用户组相关联的列表执行<code class="du ks kt ku kv b">EDIT_PRICING</code>动作。在Airbnb，这种映射发生在姬路所定义的配置中，我们的中央授权框架在之前的博文中描述过。给定一个用户、一个资源和一个动作，姬路会计算该用户是否被允许对该资源采取动作。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mp"><img src="../Images/a1f8796379c737ec235f6794dd616730.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Vr2q-tgY6hqsd6xM"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">Architecture diagram for Himeji</figcaption></figure><h2 id="f0ea" class="la jq hh bd jr mb mc md jv me mf mg jz ip mh mi kd it mj mk kh ix ml mm kl mn bi translated"><strong class="ak"> 2。集合查询</strong></h2><p id="ff6f" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">要获取一个人可以访问的资源，我们只需通过该人的Airbnb用户id和用户组id(该人拥有允许的用户组角色)进行一次查询。我们使用ElasticSearch通过将资源数据源与资源&lt;&gt;用户组关联表连接起来，使资源可以通过用户组id进行搜索。这样，每个资源的ElasticSearch文档都有与之相关的用户组id列表。</p><p id="5ef4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，每个资源的指定数据服务服务于一个端点(例如，<code class="du ks kt ku kv b">getListingsByFilters</code>)，该端点允许产品工程师传递一个参数(例如，<code class="du ks kt ku kv b">includeCollaborativeHosting=true</code>)来指示资源应该由该人的用户id和用户组id来获取。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mq"><img src="../Images/c9f6b3bfeef4d39f7f429ea2c7dd921a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W-kl0OYyPkZviH4ySDmsDQ.png"/></div></div><figcaption class="lv lw et er es lx ly bd b be z dx">Architecture diagram for collection queries</figcaption></figure><p id="a282" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意，与上面类似，我们不需要知道任何关于联合主持或团队的知识来回答这类问题。</p><h2 id="bd75" class="la jq hh bd jr mb mc md jv me mf mg jz ip mh mi kd it mj mk kh ix ml mm kl mn bi translated"><strong class="ak"> 3。确定显示和通知哪些主机</strong></h2><p id="ebc9" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">向来宾显示或通知更新的用户不一定与拥有相应权限的用户相同。例如，有共同主持人的主持人可能不希望接收关于客人消息的通知，但是他们仍然希望访问他们的Airbnb收件箱。</p><p id="4073" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如我们之前看到的，对产品团队来说，跟踪每种类型的协作的定制逻辑会变得很费力。为了解决这个问题，我们构建了一个协作托管API，它考虑了所有协作用例，具有端点，如<code class="du ks kt ku kv b">getManagersToNotifyForReservation</code>和<code class="du ks kt ku kv b">getManagersToDisplay</code>。在引擎盖下，我们查询每个协作主机用例的真实来源，并汇总结果。这个API抽象了协作主机的细节，同时仍然为产品工程师提供他们需要的信息。</p><p id="08eb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在命名API端点时，我们旨在明确地陈述端点的目标，以减少工程师可能误用API响应的机会。例如，返回预订通知的用户的端点被命名为<code class="du ks kt ku kv b">getManagersToNotifyForReservation</code>，而不是<code class="du ks kt ku kv b">getReservationManagers</code>，这可能会被误认为是获取可以修改预订的用户列表的权限端点。</p><h2 id="352f" class="la jq hh bd jr mb mc md jv me mf mg jz ip mh mi kd it mj mk kh ix ml mm kl mn bi translated"><strong class="ak">合作主持剧本</strong></h2><p id="43e5" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">有了关于协作主机如何跨用例工作的清晰结构，我们可以在现有框架内为新产品开发建立简明的步骤。</p><p id="bdb5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">推出新型协作主机</strong></p><p id="ae7b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当引入一个新的协作托管用例时，将它集成到Airbnb只需要几个关键的更改就可以实现:</p><ul class=""><li id="a2d6" class="lf lg hh ig b ih ii il im ip lh it li ix lj jb lt ll lm ln bi translated">将您的用例更新/添加到姬路配置以获得权限</li><li id="87c2" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lt ll lm ln bi translated">更新资源&lt;&gt;用户组关联系统以包含您的用例</li><li id="7e22" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lt ll lm ln bi translated">在考虑通知或显示时，更新协作托管API端点，以结合新用例中的逻辑</li></ul><p id="5d5b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">推出Airbnb新功能</strong></p><p id="8f47" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当Airbnb推出新功能时，只需几个步骤就能将其发布到所有主机。假设Airbnb正在开发新产品。新产品将引入一种新的资源类型，belos。我们需要:</p><ul class=""><li id="add7" class="lf lg hh ig b ih ii il im ip lh it li ix lj jb lt ll lm ln bi translated">通过将belo添加到用户组&lt;&gt;资源关联系统来设置belo &lt;&gt;用户组关联</li><li id="bda8" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lt ll lm ln bi translated">使用这些belo &lt;&gt;用户组关联为belo创建搜索索引，以便我们可以通过用户组id获取belo</li><li id="cd20" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lt ll lm ln bi translated">如果需要，添加一个新端点来通知和显示belos的用户</li></ul><h1 id="81f9" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">结论</h1><p id="68b7" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">Airbnb开发了一个协作托管基础设施，支持所有类型的主机。这使得构建产品更加容易，因为工程师只需要知道一个涵盖所有主机用例的中心框架。合作托管是Airbnb上许多主机成功的关键。在为所有主机构建时，无缝的开发人员体验使我们能够让主机为客人提供良好的住宿。</p><p id="ebb7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你对这类工作感兴趣，可以看看我们的相关职位:</p><ul class=""><li id="84f6" class="lf lg hh ig b ih ii il im ip lh it li ix lj jb lt ll lm ln bi translated"><a class="ae jc" href="https://careers.airbnb.com/positions/2921989/" rel="noopener ugc nofollow" target="_blank">资深安卓软件工程师，主持</a></li><li id="7a94" class="lf lg hh ig b ih lo il lp ip lq it lr ix ls jb lt ll lm ln bi translated"><a class="ae jc" href="https://careers.airbnb.com/positions/2809890/" rel="noopener ugc nofollow" target="_blank">高级iOS软件工程师，主持</a></li></ul><p id="4f76" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">…以及Airbnb 职业生涯中的更多内容！</p><h1 id="9e86" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">感谢</h1><p id="f415" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">只有多年来许多不可思议的、有使命感的人的努力，协作主机才有可能实现。特别鸣谢莫以朗、、沈伊芙林、、亚伦.荷尔松格、关、苏士伟、姚、江俊杰、梅森、郑佩琪、、张、罗、倪静怡、菲格罗亚、江查理、张素淑、高肯、马考斯卡、泰等。</p><p id="3b2f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所有产品名称、标识和品牌都是其各自所有者的财产。本网站中使用的所有公司、产品和服务名称仅用于识别目的。使用这些名称、标志和品牌并不意味着认可。</p></div></div>    
</body>
</html>