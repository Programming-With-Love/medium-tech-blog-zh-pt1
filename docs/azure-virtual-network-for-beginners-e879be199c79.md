# 面向初学者的 Azure 虚拟网络——使用 VPC 保护您的应用

> 原文：<https://medium.com/edureka/azure-virtual-network-for-beginners-e879be199c79?source=collection_archive---------5----------------------->

![](img/86610c951b6afee248d7b87889672b4f.png)

欢迎来到 Azure 虚拟网络的这个博客。在这篇博客中，你将学习如何使用 Azure 虚拟网络来保护你的应用程序。在继续之前，让我们先了解一下，为什么我们首先需要虚拟网络。

# 为什么是虚拟网络？

虚拟网络充当云中启动的资源之间的通信渠道。为什么虚拟？因为云中没有实际的路由器或交换机。例如，如果你在云中启动一个数据库服务器和一个网站服务器，它们需要一个媒介来交互。这种交互媒介被称为虚拟网络。

**带虚拟网络:**

![](img/73981f73a2fe162d025f293b2e6a84b9.png)

# 什么是 Azure 虚拟网络？

**Azure 虚拟网络** ( **VNet** )是你自己的网络在云端的一种表示。它是专用于您的订阅的 **Azure** 云的逻辑隔离。

![](img/73870b2d8a4199caaddfb781c9c21b72.png)

你在定义中看到了一些沉重的词汇，比如，“逻辑隔离”和“你自己网络的表现”。暂时忘记这个定义，只要记住这个:

如果两台计算机必须相互交互，它们需要获得许可。您可以在虚拟网络设置中添加/删除这些权限。一旦添加了这些权限，只需将这些计算机包含在虚拟网络中，瞧！你准备好了。这三行总结了我们今天要完成的内容。

接下来，虚拟网络被进一步划分为组件。

# 虚拟网络组件

以下是虚拟网络组件:

*   子网
*   网络安全组

## 什么是子网？

![](img/c763396b15abbe432cb3165180119c56.png)

每个虚拟网络都可以分成子部分，这些子部分称为子网。

子网可以进一步划分为:

*   **私有子网** —没有互联网接入的网络。
*   **公共子网** —可以访问互联网的网络。

让我们看一个例子，了解虚拟网络的实际使用情况:

![](img/5ad3c843bd625ff8ecec2d86bc446962.png)

在上图中，一个虚拟网络被划分为多个子网，每个子网包含一台服务器。

*   **子网 A** 是一个网络服务器，因此它是一个公共子网，因为您的网站可以通过互联网访问。
*   **子网 B** 是一个数据库服务器，因为数据库应该能够连接到 web 服务器，所以不需要互联网连接，因此它是一个私有子网。

您可能想知道，在哪里进行所有这些设置，允许哪些连接，不允许哪些连接，对吗？这就是第二个组件出现的地方，即网络安全组。

## 网络安全组

这是您进行所有连接设置的地方，例如打开哪些端口，默认情况下所有端口都是关闭的。不要害怕，这个博客会指导你完成所有的设置，而且所有的设置都非常容易。

但首先，让我向您展示虚拟网络的最终架构是什么样的:

![](img/2c0345dfb650530f783d1f0d3d6897a6.png)

虚拟网络是这样工作的:

*   首先，你创建一个虚拟网络。
*   然后，在这个虚拟网络中，创建子网。
*   您将每个子网与各自的虚拟机或云实例相关联。
*   将相关的网络安全组连接到每个子网。
*   在 NSG 中配置属性，一切就绪！

现在让我们用一个演示来尝试一下。

## 演示

我们将在虚拟网络中部署两台服务器，一台数据库服务器和一台网站服务器，它们将相互交互。让我们看看如何构建这个网络。

**第一步:**首先，我们将创建一个网络安全组。转到您的 Azure 仪表盘，并按照下图中的步骤操作。

![](img/da43fc281abc89fae5fed8f45af84db7.png)

**第二步:**接下来，你将到达这个屏幕，在这里你将填写你的 NSG 中的所有细节，最后点击“创建”。请注意，在第二步的图像中，您正在创建一个资源组。试着把你所有的资源放在同一个组里，这样更容易管理。

![](img/9435023ec293812646d93aab304f1a5f.png)

**步骤 3:** 我们现在将创建一个虚拟网络，按照下图中的说明创建一个。请记住，在资源组中选择“使用现有的”，然后选择您之前创建的同一资源组。

![](img/744805b214bc8b001781e95a832e583b.png)

**步骤 4:** 接下来，我们将创建 2 个子网，一个用于我们的网站，一个用于我们的数据库。按照下图中的步骤操作:

![](img/c08aa07f7d9fb476c3ccca3eed8f8c5e.png)

**步骤 5:** 在下一个屏幕上，创建两个子网。按照相同的步骤，一个用于数据库，一个用于 web 服务器。此外，附加相应的网络安全组。

![](img/0b2c83e8cef0fa0ec0f43859c04f0bff.png)

**步骤 6:** 好了，我们的网络已经设置好了，我们现在要做的就是配置网络安全组，并在这个虚拟网络中创建我们的服务器。让我们首先创建 web 服务器。

![](img/aae67713d77388e8b447a4fc91db676a.png)

**第 7 步:**在下一个屏幕上，选择您喜欢的操作系统。对于我们的演示，我们将选择一个 Ubuntu 操作系统。最后，单击创建。

![](img/a585667580155213717e8f59f6648ddb.png)

**第 8 步:**在首页输入所有相关信息:

![](img/889bd7d7ebfe4417a0a5aef7c60ce82e.png)

接下来，选择相关的配置。我们选择最基本的配置，因为这是一个演示:

![](img/93491e9ae6d4e443dc724df12098ba7c.png)

**步骤 9:** 在下一页中，您将选择要在其中部署虚拟机的虚拟网络。

![](img/cda44d34598be978aca833784e587548.png)

接下来，选择子网:

![](img/164d221514bc9ffde029a5d0aeafcdd3.png)

打开“network security group”窗格，选择“None”选项，因为我们已经将网络安全组连接到虚拟网络。最后，单击 Ok，您的虚拟机将开始部署。对您的数据库服务器也做同样的事情。

![](img/5bf450d49e99f347c4fe37af0f50037a.png)

**步骤 10:** 你可以浏览博客开头所附的视频，了解如何配置 web 服务器和 DB 服务器，它们将指导你如何做同样的事情。让我向您展示我的 webserver 网络安全组目前的情况:

![](img/c8d1924c1b7fcd64e0d3c20ac68c0a89.png)

由于到目前为止入站安全规则中没有添加任何内容，如果我尝试使用 IP 地址连接到我的服务器，我会得到以下错误:

![](img/695b81e47437faea40613dc8c3afb92f.png)

**步骤 11:** 按照下图添加任何连接属性:

![](img/abea511062d7aca2fe4014c869825879.png)

我添加了以下连接:

![](img/2174ccac4d41efaf731085f5d6a5b7e6.png)

要访问您的网站，您需要添加 HTTP 和 HTTPS。最后，您需要 SSH 来配置您的服务器。如果我现在尝试连接我的 web 服务器，会出现以下屏幕:

![](img/dd8cb8e422bdb6d190f5e4753d2536a9.png)

这是 SSH 窗口:

![](img/077c7368ae3f90fe6b63faca121b5411.png)

**步骤 12:** 这是我的数据库网络安全组的样子:

![](img/6b1c3e7ed0a53e1d74d87e94af683238.png)

详细的演示，可以参考博客开头的视频。请放心，这是您配置虚拟网络的方式。

此外，这个 Azure 虚拟网络博客系列将随着我们关于 Azure 服务的博客部分的扩展而频繁更新，敬请关注！如果你想查看更多关于 Python、DevOps、Ethical Hacking 等市场最热门技术的文章，那么你可以参考 [Edureka 的官方网站。](https://www.edureka.co/blog/?utm_source=medium&utm_medium=content-link&utm_campaign=azure-virtual-network-tutorial)

请留意本系列中解释 Azure 其他方面的其他文章。

> *1。* [*蔚蓝教程*](/edureka/azure-tutorial-5a97e30ee9a7)
> 
> *2。* [*Azure 门户*](/edureka/azure-portal-all-you-need-to-know-about-the-azure-console-8ade1effa474)
> 
> *3。* [*蔚蓝收纳教程*](/edureka/azure-storage-tutorial-an-introduction-to-azure-storage-dae8fd8f555c)
> 
> *4。* [*天青板*](/edureka/azure-boards-ce093b2688bb)
> 
> *5。* [*Azure DevOps 教程*](/edureka/azure-devops-cf755fb334ae)
> 
> *6。* [*天蓝色管道*](/edureka/azure-pipelines-1faa653e4cff)

接下来，选择子网:

打开“network security group”窗格，选择“None”选项，因为我们已经将网络安全组连接到虚拟网络。最后，单击 Ok，您的虚拟机将开始部署。对您的数据库服务器也做同样的事情。

**第十步:**你可以浏览博客开头所附的视频，了解如何配置 webserver 和 DB server，它们会指导你如何做同样的事情。让我向您展示我的 webserver 网络安全组目前的情况:

由于到目前为止入站安全规则中没有添加任何内容，如果我尝试使用 IP 地址连接到我的服务器，我会得到以下错误:

**步骤 11:** 按照下图添加任何连接属性:

我添加了以下连接:

要访问您的网站，您需要添加 HTTP 和 HTTPS。最后，您需要 SSH 来配置您的服务器。如果我现在尝试连接我的 web 服务器，会出现以下屏幕:

这是 SSH 窗口:

**步骤 12:** 这是我的数据库网络安全组的样子:

详细的演示，可以参考博客开头的视频。请放心，这是您配置虚拟网络的方式。

想了解更多？我们在 edureka！*我已经想出了一套课程，涵盖了你通过微软考试所需要的全部内容！你可以在这里看看* [***微软 Azure 认证***](https://www.edureka.co/microsoft-certified-azure-solution-architect-certification-training) *培训的课程详情。*

此外，这个 Azure 虚拟网络博客系列将随着我们关于 Azure 服务的博客部分的扩展而频繁更新，敬请关注！

*有问题要问我们吗？请在这个 Azure 虚拟网络博客的评论部分提到它，我们将会回复您。*

*原载于 2017 年 8 月 22 日*[*https://www.edureka.co*](https://www.edureka.co/blog/azure-virtual-network-tutorial/)*。*