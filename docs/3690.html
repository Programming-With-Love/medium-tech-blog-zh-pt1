<html>
<head>
<title>Optimize the page render of a large-scale Drupal site with several images</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用多幅图像优化大型Drupal站点的页面呈现</h1>
<blockquote>原文：<a href="https://medium.com/globant/optimize-the-page-render-of-a-large-scale-drupal-site-with-several-images-8fb8f810b7bd?source=collection_archive---------0-----------------------#2021-06-16">https://medium.com/globant/optimize-the-page-render-of-a-large-scale-drupal-site-with-several-images-8fb8f810b7bd?source=collection_archive---------0-----------------------#2021-06-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/d2d712e6da73a81295ebbbd94efc61fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VlGm3J1cgQMbETYBJIZlRw.png"/></div></div></figure><p id="102e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">图片可以让网站看起来很漂亮，或者在某些情况下破坏用户体验，尤其是当涉及到大量图片的时候。</p><p id="d248" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Drupal CMS有几个工具，加上加载前的优化，将提高图像的质量和大小比例，而不会影响用户体验的变量。</p><p id="3539" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">下面是在有很多图像的Drupal站点上管理图像压缩的最常见的方法，并且不会影响图像的质量。</p><h1 id="e69d" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">使用PNG优化器来减小图像大小</h1><p id="ce53" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">假设我们在你的Drupal网站上有很多PNG图片。减小图像文件大小的最简单的方法是使用TinyPNG或类似的工具来压缩它们。</p><p id="5526" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用上面提到的工具，您可以预期减少大约60%(保持图像质量无损)。</p><h1 id="4584" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">使用JPEG压缩器在服务器端压缩您的图像</h1><p id="375b" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">使用压缩器来减少你的JPG和JPEG文件的图像大小，我们将使它们在我们的Drupal站点上加载得更快。以下是一些非常有用的工具来优化JPG和JPEG图像。</p><ul class=""><li id="5ae2" class="kq kr hh ir b is it iw ix ja ks je kt ji ku jm kv kw kx ky bi translated">TinyJPG</li><li id="23f2" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">压缩JPEG</li><li id="7c32" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">立即压缩</li><li id="8c76" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">JPEGOptim</li></ul><p id="b2d6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这种图像格式的情况下，我们可以说不同的JPG文件意味着不同的设置，所以强烈建议您“玩”变量，直到您在大小和质量之间取得平衡。</p><h1 id="24da" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">使用Drupal图像样式</h1><p id="9fbc" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">图像样式是我们从Drupal获得的现成的最好的工具之一。有了这个工具，我们可以更好地控制网站上图像的大小、长宽比和其他特征。</p><p id="6b2d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">设置不同大小的多种图像样式，放置在页面的不同区域，Drupal将接受所有这些设置，并控制图像在我们网站上的存储和显示方式。</p><p id="c11b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如何使用图像样式:</p><ul class=""><li id="b708" class="kq kr hh ir b is it iw ix ja ks je kt ji ku jm kv kw kx ky bi translated">转到“内容类型设置”部分的“管理显示”。</li><li id="888f" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">点按图像栏旁边的齿轮图标以打开“设置”标签并选取图片样式。</li><li id="7611" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">在那里，您可以选择一个先前配置的图片样式，或者…通过从下拉菜单中选择“设置图片样式”选项来创建一个新的图片样式。</li></ul><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es le"><img src="../Images/d571f2194883908c3a307968c0437d1d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*rp3cLglWcTJA9lgh.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx"><strong class="bd jp">Source:</strong> <a class="ae ln" href="https://www.drupal.org/docs/8/modules/ubercart/howtos/how-to-change-the-size-of-product-images" rel="noopener ugc nofollow" target="_blank">Drupal.org</a></figcaption></figure><h1 id="3a3a" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">使用Drupal图像工具包来调整它们的质量</h1><p id="208e" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">这是在Drupal中调整图像大小的最佳方式，也是最简单的工具之一:</p><ul class=""><li id="01d3" class="kq kr hh ir b is it iw ix ja ks je kt ji ku jm kv kw kx ky bi translated">进入映像工具包(进入管理/配置/媒体)。</li><li id="d4fd" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">选取允许您压缩图像的设置(“JPEG质量”栏)。</li><li id="3531" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">摆弄这个工具，直到你在尺寸和质量之间达到完美的平衡。</li><li id="2f2d" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">保存新配置。</li></ul><p id="d61d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请注意，这个工具会将新的设置应用到您的所有图像，我们没有办法逐个调整每个图像的质量。</p><p id="668c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">给初学者的一个好建议，在设置图像质量时，将配置限制在60%到80%之间。</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lo"><img src="../Images/8b0d1df2e36ff262c89c02bfe1a6af34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mZ0U0SC7h0Gus-ME.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx">Source: <a class="ae ln" href="https://www.drupal.org/project/imagick" rel="noopener ugc nofollow" target="_blank">Drupal.org</a></figcaption></figure><h1 id="f689" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">使用响应式图像模块来调整图像的大小</h1><p id="72d7" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">使用响应图像意味着加载根据断点专门为用户屏幕调整大小的图像。这种做法使得网站在移动设备上加载速度更快，因为图像大小针对移动设备进行了优化。这与使用CSS缩小大图像时的流体图像不同。</p><p id="221e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">以下是如何在Drupal网站上设置响应图像:</p><ul class=""><li id="63a6" class="kq kr hh ir b is it iw ix ja ks je kt ji ku jm kv kw kx ky bi translated">转到扩展并启用该模块(因为，即使它是核心模块，默认情况下也不会启用)。</li><li id="9293" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">转到您的编辑器(如果是您正在使用的自定义主题)。</li><li id="c301" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">在主题目录(/themes/custom/yourthemename)中创建一个名为yourthemename.breakpoints.yml的文件。</li></ul><p id="750d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后，让我们将我们在yourthemename.breakpoints.yml中配置的每个断点与一个图像样式配对，我们只需创建它的响应图像样式。</p><h1 id="6220" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">使用ImageMagick模块缩小图像尺寸</h1><p id="c016" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">使用ImageMagick或GraphicsMagick作为Drupal中图像API的图像工具包。这种集成基于通过shell访问调用convert binary来处理映像。</p><p id="795d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Imagick模块是一个替代的工具包模块，它使用Imagick PHP扩展。</p><p id="6ea6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要安装这个模块，只需转到根目录并运行composer require命令来获得drupal/imagemagick。</p><p id="6d09" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">以下是如何使用它来缩小图像大小:</p><ul class=""><li id="a947" class="kq kr hh ir b is it iw ix ja ks je kt ji ku jm kv kw kx ky bi translated">启用模块。</li><li id="678c" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">在ImageMagick图像工具包中将图像质量设置为100%。</li><li id="83d4" class="kq kr hh ir b is kz iw la ja lb je lc ji ld jm kv kw kx ky bi translated">在某些情况下，你已经将图片尺寸缩小了20-40%。</li></ul><h1 id="38f1" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">延迟加载您的图像</h1><p id="c7db" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">使用Lazy Loader，这是一个强烈推荐的用于图像优化的Drupal模块。</p><p id="ad4a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Lazy Load是一个简单的Drupal模块，它让我们能够延迟加载图像和iframes。</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lp"><img src="../Images/6b8d21ac88191e0f5ab43026cd91154e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ra5QqAYQv3NxHSPC.png"/></div></div><figcaption class="lj lk et er es ll lm bd b be z dx">Source: <a class="ae ln" href="https://www.drupal.org/project/lazy" rel="noopener ugc nofollow" target="_blank">Drupal.org</a></figcaption></figure><h1 id="7c65" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">摘要</h1><p id="3318" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">Drupal有许多工具，有些是现成的，有些是我们必须安装和/或激活的。也许这里最大的挑战是正确识别列表中的最佳工具，以加快我们的图像密集型Drupal网站的速度。</p></div></div>    
</body>
</html>