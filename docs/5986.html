<html>
<head>
<title>A Guide to Embedding Oracle Analytics into Oracle Application Express (APEX)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Oracle分析嵌入Oracle Application Express (APEX)的指南</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/a-guide-to-embedding-oracle-analytics-into-oracle-application-express-apex-1799f6ba4626?source=collection_archive---------0-----------------------#2022-10-28">https://medium.com/oracledevs/a-guide-to-embedding-oracle-analytics-into-oracle-application-express-apex-1799f6ba4626?source=collection_archive---------0-----------------------#2022-10-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/0301395084431e70e94306590ae2a57a.png" data-original-src="https://miro.medium.com/v2/resize:fit:888/format:webp/1*sX_1IgQ7sajVMMQ4GnfsVg.png"/></div><figcaption class="il im et er es in io bd b be z dx">Oracle Application Express (APEX)</figcaption></figure><p id="b636" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Oracle Application Express，即<a class="ae jn" href="https://apex.oracle.com/en/" rel="noopener ugc nofollow" target="_blank"> APEX </a>，是一个低代码开发环境，可以轻松创建自己的应用程序。在最近的甲骨文云世界活动(' 22)上，APEX被用于快速创建应用以帮助全球疫情，并在一个<a class="ae jn" href="https://youtu.be/MDGyUe7UVeQ?t=1552" rel="noopener ugc nofollow" target="_blank">主题演讲</a>中得到强调。</p><p id="5dce" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你已经登陆这个页面，你可能已经知道APEX，你可能想知道为什么你想要嵌入<a class="ae jn" href="https://www.oracle.com/business-analytics/" rel="noopener ugc nofollow" target="_blank">甲骨文分析</a>云(OAC)到APEX。事实上，在2019年的一次会议上，我被问及了这个问题，因为APEX已经拥有一套丰富的报告和<a class="ae jn" href="https://apex.oracle.com/pls/apex/r/apex_pm/a10800/home" rel="noopener ugc nofollow" target="_blank">可视化</a>功能，其中许多都基于<a class="ae jn" href="https://www.oracle.com/application-development/technologies/jet/oracle-jet.html" rel="noopener ugc nofollow" target="_blank"> Oracle JET </a>(在两款产品中)。</p><p id="cf87" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我的回应？APEX和OAC是互补产品，在可用的可视化类型方面有一些重叠，但也为其他产品提供了额外的功能，从而为数据工程师和企业最终用户带来更全面的用户体验。</p><p id="2bd3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">以下是我稍后将详细描述的一些例子:</p><ul class=""><li id="d3fc" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">将OAC自然语言生成或标签云添加到APEX应用程序中。</li><li id="e43e" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">能够使用APEX刻面搜索来定义嵌入式OAC画布的过滤器。</li><li id="8fd8" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">OAC的自助式<a class="ae jn" href="https://www.oracle.com/explore/analytics-platform-capabilities/capabilities-explorer-prepare-and-enrich?topic=scenario%20Planning&amp;lb-mode=overlay&amp;source=:ow:o:h:mt::RC_WWMK210902P00063:ICOcom&amp;intcmp=:ow:o:h:mt::RC_WWMK210902P00063:ICOcom" rel="noopener ugc nofollow" target="_blank">数据准备</a>、丰富和ML集成可以增强APEX内置应用的分析能力。</li></ul><p id="01a2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我可以列出更多，但总的来说，我认为这两种产品的结合使用是值得你考虑的，本博客将提供如何从这种结合中获得最佳效果的详细信息。</p><h1 id="0dca" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">为什么产品版本很重要</h1><p id="b0f4" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">我在这篇博客的介绍中提到了Oracle JET。这是整合APEX和OAC的一个重要方面。以下是如何找出每个产品使用的JET版本。</p><p id="9e7c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于APEX，这通常在产品文档中描述。我用来创建这个博客的版本有<a class="ae jn" href="https://docs.oracle.com/en/database/oracle/application-express/21.2/htmrn/index.html#HTMRN-GUID-175489FB-CC24-40F6-89EF-A4A7AAFD7770" rel="noopener ugc nofollow" target="_blank"> 21.2 </a> (JET 11)和<a class="ae jn" href="https://docs.oracle.com/en/database/oracle/apex/22.1/htmrn/index.html#HTMRN-GUID-175489FB-CC24-40F6-89EF-A4A7AAFD7770" rel="noopener ugc nofollow" target="_blank"> 22.1 </a> (JET 12)。APEX <a class="ae jn" href="https://docs.oracle.com/en/database/oracle/apex/22.1/htmdb/Understanding-Oracle-JET-Integration-with-Oracle-Application-Express.html#GUID-FD5B3839-EBB2-4C5C-984F-4C90BE46684B" rel="noopener ugc nofollow" target="_blank">文档</a>也描述了如何使用JET，22.1版列出了“图表”区域类型以及“带自动完成功能的文本字段”项目类型。这将影响用于将OAC内容嵌入APEX的方法，因为在同一应用程序页面上混合不同版本的JET可能会导致不可预测的结果。</p><p id="d026" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了找出Oracle Analytics正在使用的JET版本，在登录到Analytics时，打开browser developer tools控制台并执行以下操作:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="8da3" class="lo kd hh lk b fi lp lq l lr ls">requirejs('ojs/ojcore').version</span></pre><p id="5063" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">写这篇博客时，我一直在使用9月22日和11月22日版本的Oracle分析云，而使用的JET版本是11.1.0。</p><h1 id="d38f" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">Oracle分析嵌入脚本</h1><p id="2ad0" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">在OAC启用“开发人员”选项后(在配置文件|高级菜单选项中设置)，您可以在OAC查看包含“嵌入”部分的开发人员区域。</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es lt"><img src="../Images/a70f7d17e1a81c75b2d30b559d72babe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yp2Pvl9sYisQp_Dkb55IRg.png"/></div></div><figcaption class="il im et er es in io bd b be z dx">Oracle Analytics Developer Embed Section</figcaption></figure><p id="24b7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">embedding.js的链接提供了两个选项,/standalone/用于嵌入到不使用Oracle JET的应用程序中，或者/jet/正如我们从APEX文档中看到的，APEX的某些方面使用JET，而有些方面不使用。稍后，我们将了解在开发APEX应用程序时如何考虑这一点，以及如何选择嵌入OAC画布。</p><h1 id="f84c" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">证明</h1><p id="04b7" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">APEX使用身份验证方案来保护应用程序，默认使用<a class="ae jn" href="https://docs.oracle.com/en/database/oracle/apex/22.1/htmdb/apex-accounts.html" rel="noopener ugc nofollow" target="_blank"> Oracle APEX帐户</a>。Oracle分析云使用Oracle身份云服务(IDCS)身份认证。</p><p id="8cfc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这一阶段，您可以选择让您的最终用户登录APEX应用程序，然后要求他们也登录嵌入式分析内容(如果您希望在APEX应用程序中限制对嵌入式分析的访问，则可能需要<em class="ly">或</em>),或者，您更有可能想要无缝的身份验证体验，即登录APEX应用程序的用户也将通过身份验证访问分析内容。这是通过在APEX内创建“Web凭据”和“身份验证方案”来实现的，它们使用相同的Oracle IDCS作为分析工具。这里有一些链接(<a class="ae jn" href="https://www.youtube.com/watch?v=25BhU1QQ5Jk&amp;t=4s" rel="noopener ugc nofollow" target="_blank"> 1 </a> )( <a class="ae jn" href="https://www.vastedge.com/oracle-apex-oac-integration/" rel="noopener ugc nofollow" target="_blank"> 2 </a> )( <a class="ae jn" href="https://www.ateam-oracle.com/post/integrating-sso-between-apex-cloud-and-identity-cloud-service-the-easy-way" rel="noopener ugc nofollow" target="_blank"> 3 </a>)指向描述如何为IDCS认证配置APEX的文章。</p><p id="16e9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您仍然在嵌入了分析的区域看到登录提示，并且您正在使用<oracle-dv> HTML嵌入方法，那么您可能需要<a class="ae jn" href="https://docs.oracle.com/en/cloud/paas/analytics-cloud/acubi/embed-javascript.html#GUID-1AD7A912-690E-48C8-B245-EA77C23EEEA7" rel="noopener ugc nofollow" target="_blank">将以下</a>添加到embedding.js的链接中:</oracle-dv></p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="93cb" class="lo kd hh lk b fi lp lq l lr ls">&lt;script src=""https://&lt;instance&gt;.analytics.ocp.oraclecloud.com/public/dv/v1/embedding/standalone/embedding.js?IDCS_OAUTH3LEGGED=true" type="application/javascript"&gt;<br/>&lt;/script&gt;</span></pre><h1 id="9e4d" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">嵌入指向Oracle Analytics工作簿的URL链接</h1><p id="55a4" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">将Oracle Analytics内容添加到APEX应用程序的最简单方法是引用工作簿URL，如下所示:</p><ul class=""><li id="616e" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">在OAC时，打开您想要嵌入的画布，复制URL。</li><li id="9697" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">在APEX中，创建新的静态内容区域，选择URL作为类型，单击“属性”,然后选择“iFrame”作为“包含模式”。</li><li id="d48d" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">将您从OAC复制的URL粘贴到“URL”字段中，并可选地设置任何iFrame属性，例如宽度和高度。</li></ul><p id="f0b9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您在APEX中看到的画布视图将取决于许多可根据您的需求定制的因素。</p><ul class=""><li id="de5e" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">如果您已将APEX配置为使用IDCS身份验证，然后以具有OAC作者应用程序角色的用户身份登录APEX应用程序，您可能会看到嵌入APEX的完整创作UI。可以通过在嵌入式OAC URL中添加以下内容来改变这一点:</li></ul><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="f49a" class="lo kd hh lk b fi lp lq l lr ls">&amp;viewermode=true</span></pre><ul class=""><li id="7861" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">如果您以拥有OAC查看器应用程序角色的用户身份登录APEX，您将看到查看器体验。</li></ul><p id="2d73" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在9月22日和11月22日发行的《OAC》中引入了一些设置，可以进一步定制这种体验:</p><ul class=""><li id="a9ed" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">在OAC配置文件设置的“高级”菜单选项中，“以查看者身份打开工作簿”切换。默认情况下，这是启用的，因此如果您有DV作者角色，那么您将在APEX中看到“查看者”模式的内容。这为嵌入式内容提供了更好的用户体验。</li><li id="60f7" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">您是否在OAC用户界面的“当前”部分定义了任何故事页面。</li><li id="33ed" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">如果您有故事页面，那么您可以更改交互性设置、上下文菜单操作以及是否显示标题栏。</li></ul><p id="38dc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">不显示标题栏而显示查看器用户视图提供了最无缝的嵌入体验。</p><h1 id="1453" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">使用Oracle Analytics JavaScript嵌入</h1><p id="1b17" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">使用Oracle Analytics JavaScript <a class="ae jn" href="https://docs.oracle.com/en/cloud/paas/analytics-cloud/acubi/embed-javascript.html" rel="noopener ugc nofollow" target="_blank">嵌入框架</a>可以为APEX应用程序中的分析内容提供更加集成的用户体验。这就是APEX和OAC使用的Oracle JET版本的重要性，此外，您是否有任何APEX组件在应用程序页面上使用JET(例如APEX图表)可能会导致意外行为(例如，一些OAC可视化可能无法完全呈现或可能存在CSS冲突，尤其是在使用/standalone/ path时)。</p><h1 id="ed4c" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">OAC和APEX采用同一款喷气式飞机</h1><p id="769a" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">在这种情况下，在APEX页面级别的“JavaScript”字段中设置以下内容，注意除了使用到embedding.js的<strong class="ir hi"> /jet/ </strong>路径之外的<strong class="ir hi">【要求jet】</strong>:</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es lz"><img src="../Images/421ec4c2a2d902e808f41972e2bd09b4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GFCcAOxQfK5KHaMP9-XVjA.png"/></div></div></figure><p id="faf7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请注意，要查看嵌入的分析，可能不需要通常的requirejs依赖关系和knockout apply绑定。</p><p id="9f8e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然后，您将在APEX静态内容区域的“源”字段中添加<oracle-dv>标记:</oracle-dv></p><figure class="lf lg lh li fd ii er es paragraph-image"><div class="er es ma"><img src="../Images/bf9a2dd053748176b2bd4d75aea2e058.png" data-original-src="https://miro.medium.com/v2/resize:fit:1384/format:webp/1*NAkJoAzxv2he54qyAjj61w.png"/></div></figure><p id="abe8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果使用embedding.js的/standalone/路径，那么就不需要在JavaScript部分使用[require jet]。</p><h1 id="3fdf" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">不同喷气版本的OAC和APEX</h1><p id="f96f" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">如果存在不同的JET版本，则取决于与您希望嵌入OAC内容的项目在同一应用程序页面上的其他APEX项目。如果应用程序页面上的APEX项目不使用JET，那么您可以使用/jet/ path，但是仍然可能不是所有的OAC可视化类型都会呈现。</p><p id="c33d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一般来说，考虑到存在不同JET版本的可能性，嵌入分析的最可靠方法是使用iFrame。我在这个博客中写过这个方法，包括如何从APEX UI控件(如选择器和分面搜索)使用windows消息传递将参数传递到iFrame，这是一起使用OAC和APEX的真正好处可以实现的地方。</p><h1 id="4c76" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">数据源</h1><p id="042b" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">理想情况下，OAC和APEX应该使用相同的数据源。将数据导入OAC和APEX很容易，要么使用上传到DB表的XLS文件，在APEX的情况下，要么通过从上传的XLS在OAC创建数据源，要么通过创建到DB的连接，然后创建合适的数据源。</p><p id="51ef" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用相同的数据源很可能需要从OAC连接到APEX用来存储应用程序数据的模式。对于我的示例，我将使用APEX应用程序，该应用程序使用来自这个<a class="ae jn" href="https://apexapps.oracle.com/pls/apex/r/dbpm/livelabs/run-workshop?p210_wid=631&amp;p210_wec=&amp;session=6827204128045" rel="noopener ugc nofollow" target="_blank"> live lab </a>的纽约市学校的数据构建。</p><p id="5978" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我将假设数据已经根据实时实验上传，并且APEX应用程序已经创建。您还需要在OAC创建一个连接和数据源，连接到APEX为应用程序使用的模式。您将能够使用APEX中的SQL Workshop来发现这一点。如果您无法获得APEX使用的数据库的连接钱包，那么您可以将纽约市学校数据直接上传到OAC。</p><p id="eac5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">关键要求是OAC和APEX都能够访问相同的数据集，无论该数据集是否存储在相同的位置。</p></div><div class="ab cl mb mc go md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ha hb hc hd he"><h1 id="7540" class="kc kd hh bd ke kf mi kh ki kj mj kl km kn mk kp kq kr ml kt ku kv mm kx ky kz bi translated">创造增值的用户体验</h1><p id="db1e" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">在这一部分，我将描述OAC和APEX的结合如何增加用户体验的价值。我将“价值”定义为OAC做一些APEX可能无法现成可用的事情(例如，添加自然语言叙述)，反之亦然(例如，使用带有嵌入式分析的APEX分面搜索)。</p><h1 id="20df" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">将OAC标签云和NLG添加到APEX应用程序</h1><p id="e287" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">这个动画展示了我们将要构建的用户体验，包括使用iFrame和不使用iFrame的情况。</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es mn"><img src="../Images/71ad1747b06c640d1d88cffc0839bac0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qis6lBE0VqNvn0qd0j1HLw.gif"/></div></div></figure><p id="573d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">作为先决条件，我将假设您已经在OAC创建了一个数据源，它使用与APEX应用程序相同的数据，并且您已经在OAC创建了一个工作簿，其中显示了标签云和自然语言生成(NLG)可视化。我已经从live lab APEX应用程序复制了应用程序页面“NYC Highschools Report ”,我们将向该页面添加OAC标签云和NLG可视化。</p><h1 id="0b9b" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">不使用iFrame嵌入</h1><p id="0296" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">将选择列表项添加到应用程序页面。<strong class="ir hi"> </strong>这将从一个SQL语句中获取一个值列表，选择将存储在P7_SELECT_BOROUGH中(您可能有一个不同的项目名称) :</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="8210" class="lo kd hh lk b fi lp lq l lr ls">select distinct BOROUGH d, BOROUGH r<br/>from NYC_HIGHSCHOOLS<br/>order by 1</span></pre><ul class=""><li id="67cf" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">在选择列表的设置中，为“选择时的页面操作”选择“提交页面”。</li><li id="c016" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">向应用程序页面添加一个静态区域来承载嵌入的OAC内容:</li></ul><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es mo"><img src="../Images/52863eff8943be8c35b2578749a241c2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uj2VJRKtrDJzWjQ0Cr4G3g.png"/></div></div></figure><p id="b0cc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这个静态区域中使用下面的HTML代码，注意active-tab-id号是从我的工作簿中用于嵌入的OAC开发者|嵌入菜单中获得的。{{ }}中的项目称为可观察项，将使用在应用程序页面级别定义的代码来填充:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="df35" class="lo kd hh lk b fi lp lq l lr ls">&lt;div style='width:1024px; height:800px' &gt;</span><span id="e076" class="lo kd hh lk b fi mp lq l lr ls">&lt;oracle-dv id='Filter'<br/>             project-path='{{projectPath}}'<br/>             active-page='canvas'<br/>             active-tab-id='2'<br/>             project-options='{"bDisableMobileLayout":true, "bShowFilterBar":false}'<br/>             filters='{{filters}}'&gt;<br/>          &lt;/oracle-dv&gt;</span></pre><p id="df5d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在应用程序页面级别，添加类似以下内容的代码(适用于您的实例和拥有数据集的OAC用户(在“sColFormula”的路径中)):</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es mq"><img src="../Images/4566ecdf01d01b1b94ae52672c3a5d4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pBQkOrHYcWKD1GIvOmrPdQ.png"/></div></div></figure><p id="c257" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在文件URL中，是指向OAC实例的embedding.js的链接(/jet/),以及参数[require jet]。此示例使用三脚身份验证参数，但请参考本博客前面关于配置APEX实例以使用IDCS身份验证的内容:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="8df3" class="lo kd hh lk b fi lp lq l lr ls">[require jet]<br/><a class="ae jn" href="https://mikedoac60v1-analyticsdev-ia.analytics.ocp.oraclecloud.com/public/dv/v1/embedding/jet/embedding.js?IDCS_OAUTH3LEGGED=true" rel="noopener ugc nofollow" target="_blank">https://&lt;OAC-instance&gt;-ia.analytics.ocp.oraclecloud.com/public/dv/v1/embedding/jet/embedding.js?IDCS_OAUTH3LEGGED=true</a></span></pre><p id="d757" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在“函数和全局变量声明”部分，有代码将前面定义的P7_SELECT_BOROUGH的值赋给一个JavaScript变量:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="b634" class="lo kd hh lk b fi lp lq l lr ls">let vBoroughName = apex.item("P7_SELECT_BOROUGH").getValue();</span></pre><p id="dd77" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在“页面加载时执行”部分，为<oracle-dv>标签以及嵌入式OAC画布使用的过滤器JSON定义了观察值。“sColFormula”可从OAC工作簿开发人员| JSON菜单选项中获得:</oracle-dv></p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="1732" class="lo kd hh lk b fi lp lq l lr ls">requirejs(['jquery', 'knockout', 'obitech-application/application', 'ojs/ojcore', 'ojs/ojknockout', 'ojs/ojcomposite',  'jet-composites/oracle-dv/loader'],<br/>function($, ko, application) {</span><span id="f81e" class="lo kd hh lk b fi mp lq l lr ls">function model() {<br/>                        var self = this;<br/>                        self.projectPath = ko.observable('/@Catalog/shared/Embed/APEX/APEX NYC Schools');<br/>                        self.filters = ko.observableArray([{<br/>                          'sColFormula': "XSA('<a class="ae jn" href="mailto:mike.durran@oracle.com" rel="noopener ugc nofollow" target="_blank">&lt;</a>data-set-owner&gt;'.'APEX NYC HIGHSCHOOLS').\"NYC_HIGHSCHOOLS\".\"BOROUGH\"",<br/>                          'sColName': 'BOROUGH',<br/>                          'sOperator': 'in',<br/>                          'isNumericCol': false,<br/>                          'isDateCol': false,<br/>                          'bIsDoubleColumn': false,<br/>                          'aCodeValues': [],<br/>                          'aDisplayValues': [vBoroughName]}]);<br/>                     }<br/> application.setSecurityConfig("oauth_3legged");<br/> ko.applyBindings(new model());</span><span id="adab" class="lo kd hh lk b fi mp lq l lr ls">});</span></pre><p id="a296" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这是在使用P7_SELECT_BOROUGH的选择器时执行的(由于“页面提交”选项)，将值获取到变量vBoroughName中，然后将其传递到过滤器JSON以用于嵌入的OAC画布。“aDisplayValues”需要一个数组，因此传递的值(vBoroughName)需要用[ ]括号括起来。</p><p id="8ebd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此时，运行应用程序并测试更改选择器值是否会更改APEX表报告和嵌入式OAC内容中显示的区。</p><h1 id="07f9" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">使用iFrame嵌入</h1><p id="a1b0" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">如果您正在使用不同版本的JET(如前所述)，那么您很可能需要使用iFrame将OAC画布嵌入到APEX应用程序中。下面说明了这种类型的应用程序页面部署:</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es mr"><img src="../Images/8cd7955ada538025db033b264fc91fdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J4sES6dPc2Gc1Gg1h3UI8w.png"/></div></div></figure><p id="4df4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用iFrame的关键区别在于，所有OAC嵌入代码，即link /standalone/ to embedding.js、<oracle-dv>标记、requirejs依赖项和knockout applybindings都包含在iFrame中。然后，iFrame充当一个可重用的块，可以嵌入到多个应用程序页面中，如果需要的话，只需进行微小的更改，如本博客后面所述。将过滤器值传递到iFrame的<a class="ae jn" rel="noopener" href="/oracledevs/how-to-embed-oracle-analytics-anywhere-43233e9f7830">机制</a>是<a class="ae jn" href="https://developer.mozilla.org/en-US/docs/Web/API/Window/postMessage" rel="noopener ugc nofollow" target="_blank">content window . postmessage</a>。</oracle-dv></p><p id="95b2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">包含OAC嵌入内容的APEX静态区域包含使用<a class="ae jn" href="https://www.w3schools.com/tags/att_iframe_srcdoc.asp" rel="noopener ugc nofollow" target="_blank"> srcdoc </a>参数定义iFrame的HTML代码:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="88b1" class="lo kd hh lk b fi lp lq l lr ls">&lt;iframe  id='OACiFrameEmbed' width="1024" height="800" srcdoc="</span><span id="53a0" class="lo kd hh lk b fi mp lq l lr ls">&lt;!DOCTYPE HTML&gt;</span><span id="5cae" class="lo kd hh lk b fi mp lq l lr ls">&lt;html dir='ltr'&gt;</span><span id="afa4" class="lo kd hh lk b fi mp lq l lr ls">&lt;head&gt;</span><span id="8452" class="lo kd hh lk b fi mp lq l lr ls">&lt;meta http-equiv='Content-Type' content='text/html; charset=utf-8'&gt;</span><span id="5b9f" class="lo kd hh lk b fi mp lq l lr ls">&lt;script src='https://&lt;OAC-INSTANCE&gt;-ia.analytics.ocp.oraclecloud.com/public/dv/v1/embedding/standalone/embedding.js' type='application/javascript'&gt;</span><span id="c15e" class="lo kd hh lk b fi mp lq l lr ls">&lt;/script&gt;</span><span id="7758" class="lo kd hh lk b fi mp lq l lr ls">&lt;/head&gt;</span><span id="cf52" class="lo kd hh lk b fi mp lq l lr ls">&lt;body&gt;</span><span id="57cf" class="lo kd hh lk b fi mp lq l lr ls">&lt;div style='width:1024px; height:800px' &gt;</span><span id="1fc0" class="lo kd hh lk b fi mp lq l lr ls">&lt;oracle-dv id='Filter'</span><span id="22f4" class="lo kd hh lk b fi mp lq l lr ls">project-path='&lt;PATH-TO-EMBEDDED-WORKBOOK'</span><span id="a376" class="lo kd hh lk b fi mp lq l lr ls">active-page='canvas'</span><span id="0a0b" class="lo kd hh lk b fi mp lq l lr ls">active-tab-id='1'</span><span id="baa1" class="lo kd hh lk b fi mp lq l lr ls">project-options='{&amp;quot;bDisableMobileLayout&amp;quot;:true, &amp;quot;bShowFilterBar&amp;quot;:false}'</span><span id="e611" class="lo kd hh lk b fi mp lq l lr ls">filters='{{filters}}'&gt;</span><span id="2d40" class="lo kd hh lk b fi mp lq l lr ls">&lt;/oracle-dv&gt;</span><span id="45c1" class="lo kd hh lk b fi mp lq l lr ls">&lt;/div&gt;</span><span id="2edc" class="lo kd hh lk b fi mp lq l lr ls">&lt;script&gt;</span><span id="40de" class="lo kd hh lk b fi mp lq l lr ls">requirejs(['jquery','knockout','ojs/ojcore', 'ojs/ojknockout', 'ojs/ojcomposite', 'obitech-application/application', 'jet-composites/oracle-dv/loader'],</span><span id="948f" class="lo kd hh lk b fi mp lq l lr ls">function($, ko, application) {</span><span id="c93e" class="lo kd hh lk b fi mp lq l lr ls">function model() {</span><span id="00c1" class="lo kd hh lk b fi mp lq l lr ls">var self = this;</span><span id="c568" class="lo kd hh lk b fi mp lq l lr ls">self.filters = ko.observableArray([{</span><span id="022a" class="lo kd hh lk b fi mp lq l lr ls">'sColFormula': &amp;quot;XSA('&lt;OAC-USER-ID&gt;'.'APEX NYC HIGHSCHOOLS').\&amp;quot;NYC_HIGHSCHOOLS\&amp;quot;.\&amp;quot;BOROUGH\&amp;quot;&amp;quot;,</span><span id="c62b" class="lo kd hh lk b fi mp lq l lr ls">'sColName': 'BOROUGH',</span><span id="b11e" class="lo kd hh lk b fi mp lq l lr ls">'sOperator': 'in',</span><span id="9a5c" class="lo kd hh lk b fi mp lq l lr ls">'isNumericCol': false,</span><span id="0cde" class="lo kd hh lk b fi mp lq l lr ls">'isDateCol': false,</span><span id="2635" class="lo kd hh lk b fi mp lq l lr ls">'bIsDoubleColumn': false,</span><span id="39dd" class="lo kd hh lk b fi mp lq l lr ls">'aCodeValues': [],</span><span id="0712" class="lo kd hh lk b fi mp lq l lr ls">'aDisplayValues': ['Select Borough']</span><span id="a964" class="lo kd hh lk b fi mp lq l lr ls">}]);</span><span id="0629" class="lo kd hh lk b fi mp lq l lr ls">window.addEventListener('message', (event) =&gt; {</span><span id="5f5f" class="lo kd hh lk b fi mp lq l lr ls">if ((typeof event.data === 'string' || event.data instanceof String) &amp;&amp; event.origin == 'https://&lt;APEX-DOMAIN&gt;') {</span><span id="4645" class="lo kd hh lk b fi mp lq l lr ls">self.filters([{'sColFormula': &amp;quot;XSA('&lt;OAC-USER-ID&gt;'.'APEX NYC HIGHSCHOOLS').\&amp;quot;NYC_HIGHSCHOOLS\&amp;quot;.\&amp;quot;BOROUGH\&amp;quot;&amp;quot;,</span><span id="d852" class="lo kd hh lk b fi mp lq l lr ls">'sColName': 'BOROUGH',</span><span id="14bc" class="lo kd hh lk b fi mp lq l lr ls">'sOperator': 'in',</span><span id="1358" class="lo kd hh lk b fi mp lq l lr ls">'isNumericCol': false,</span><span id="740b" class="lo kd hh lk b fi mp lq l lr ls">'isDateCol': false,</span><span id="6615" class="lo kd hh lk b fi mp lq l lr ls">'bIsDoubleColumn': false,</span><span id="1ec9" class="lo kd hh lk b fi mp lq l lr ls">'aCodeValues': [],</span><span id="1c0c" class="lo kd hh lk b fi mp lq l lr ls">'aDisplayValues': [event.data]}</span><span id="1099" class="lo kd hh lk b fi mp lq l lr ls">]);</span><span id="8b44" class="lo kd hh lk b fi mp lq l lr ls">}</span><span id="af4a" class="lo kd hh lk b fi mp lq l lr ls">}, false);</span><span id="35ad" class="lo kd hh lk b fi mp lq l lr ls">}</span><span id="6ae6" class="lo kd hh lk b fi mp lq l lr ls">ko.applyBindings(new model);</span><span id="ad67" class="lo kd hh lk b fi mp lq l lr ls">});</span><span id="50ab" class="lo kd hh lk b fi mp lq l lr ls">&lt;/script&gt;</span><span id="be24" class="lo kd hh lk b fi mp lq l lr ls">&lt;/body&gt;</span><span id="8612" class="lo kd hh lk b fi mp lq l lr ls">&lt;/html&gt;"&gt;</span><span id="daa4" class="lo kd hh lk b fi mp lq l lr ls">&lt;/iframe&gt;</span></pre><p id="e781" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">由于srcdoc参数值包含在双引号中，因此在srcdoc代码中使用的任何双引号都需要转义为&amp;quot；</p><p id="38ba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这是<strong class="ir hi">项目选项</strong>和<strong class="ir hi">公式</strong>所必需的。此外，除了iFrame中的侦听器之外，还需要在传递消息时指定将消息传递到iFrame中的域。对于这些示例，该域是APEX实例。</p><p id="e0ab" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">APEX选择器将“提交页面”作为“选择时的页面操作”。为了将选定的值传递到iFrame中，请为“页面加载时执行”页面级别属性设置如下代码。设置超时是为了避免可能发生的任何竞争情况:</p><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="67db" class="lo kd hh lk b fi lp lq l lr ls">vBoroughName = apex.item("P9_SELECT_BOROUGH").getValue();<br/>setTimeout(() =&gt; { document.getElementById(‘OACiFrameEmbed’).contentWindow.postMessage(vBoroughName, ‘<a class="ae jn" href="https://o8z08rvxuv4ut3a-apexpmidcsdb.adb.us-ashburn-1.oraclecloudapps.com'" rel="noopener ugc nofollow" target="_blank">https://&lt;APEX-INSTANCE&gt;.adb.us-ashburn-1.oracl</a>ecloudapps.com’); }, 2500);</span></pre><h1 id="8f24" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">启用多选所需的更改</h1><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es ms"><img src="../Images/ccf2a0c4a4d374eaf6fcaefce522bf39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*TAFD24i4mqZ4cQhzJHqgGQ.gif"/></div></div></figure><p id="ffd9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您想让用户能够选择多个区，下面是您需要进行的更改。</p><p id="d289" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">修改选择器P9 _选择_自治市，使“选择页面操作”为“无”。</p><p id="e4a8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在页面上添加一个按钮，我已经把它放在了我的应用程序页面上的选择器项本身的下面。</p><ul class=""><li id="5b81" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">将此按钮命名为“应用”。</li><li id="6de1" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">将“行为”设置为“提交页面”。</li></ul><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es mt"><img src="../Images/ae57e8b525501fd409b2b93d616f7c6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g_qhSDVjqJEc6B_D_0wMwg.png"/></div></div></figure><p id="dda8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">处理多重选择的一个关键区别是，现在它是一个数组对象，被传递到嵌入式Oracle Analytics画布。因此，与单一选择用例相比，iFrame中的代码需要做一些更改。</p><ul class=""><li id="d265" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">因为现在传递给iFrame的是选定值的数组，而不是单个值。这导致对“if”语句的更改，以检查event.data是否为数组。</li><li id="c885" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">因为event.data是一个数组，所以传递给' aDisplayValues '的值(与single select相比)不再需要[ ]了。</li></ul><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="5fdb" class="lo kd hh lk b fi lp lq l lr ls">if ((Array.isArray(event.data)) &amp;&amp; event.origin == 'https://&lt;APEX-INSTANCE&gt;.adb.us-ashburn-1.oraclecloudapps.com') {</span><span id="b988" class="lo kd hh lk b fi mp lq l lr ls">self.filters([{'sColFormula': &amp;quot;XSA('&lt;USER&gt;'.'APEX NYC HIGHSCHOOLS').\&amp;quot;NYC_HIGHSCHOOLS\&amp;quot;.\&amp;quot;BOROUGH\&amp;quot;&amp;quot;,</span><span id="6222" class="lo kd hh lk b fi mp lq l lr ls">'sColName': 'BOROUGH',</span><span id="c5c3" class="lo kd hh lk b fi mp lq l lr ls">'sOperator': 'in',</span><span id="18d0" class="lo kd hh lk b fi mp lq l lr ls">'isNumericCol': false,</span><span id="1786" class="lo kd hh lk b fi mp lq l lr ls">'isDateCol': false,</span><span id="5fed" class="lo kd hh lk b fi mp lq l lr ls">'bIsDoubleColumn': false,</span><span id="9cdd" class="lo kd hh lk b fi mp lq l lr ls">'aCodeValues': [],</span><span id="4c84" class="lo kd hh lk b fi mp lq l lr ls">'aDisplayValues': event.data}</span><span id="5536" class="lo kd hh lk b fi mp lq l lr ls">]);</span><span id="2ef4" class="lo kd hh lk b fi mp lq l lr ls">}</span><span id="0b02" class="lo kd hh lk b fi mp lq l lr ls">}, false);</span></pre><h1 id="51b2" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">使用APEX分面搜索过滤嵌入式分析</h1><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lu lv di lw bf lx"><div class="er es mu"><img src="../Images/b5184b222547286fdeb3631dd326f6e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*JBXFJcgbckRCuuW-EoGglw.gif"/></div></div></figure><p id="52fd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">向包含分面搜索的APEX页面添加嵌入式分析(在iFrame中)与前面的嵌入场景非常相似。</p><ul class=""><li id="ebd1" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">向应用程序页面添加一个静态区域。</li><li id="4070" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">用于静态区域的iFrame代码与用于多选用例的相同，因为分面搜索也将传递一个数组。</li><li id="1943" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">将搜索项的“属性”从“批量刻面更改”更改为“开”。这将为用户提供一个“应用”按钮。</li><li id="d58e" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">将“动态操作”添加到APEX页面上的“搜索”项目，并将事件设置为“分面更改[分面搜索]”。</li><li id="b683" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">对于“True”情况，将“Action”设置为“Execute JavaScript Code ”,并使用此示例，根据您自己的用例进行修改。在这个示例中，P8_BOROUGH是从分面搜索中获得的，因为输出的形式为<item> : <item> : <item>等。，有一行代码将输出拆分成一个数组。然后使用“postMessage”将该数组传递给iFrame。</item></item></item></li></ul><pre class="lf lg lh li fd lj lk ll lm aw ln bi"><span id="dcac" class="lo kd hh lk b fi lp lq l lr ls">vBoroughName = apex.item("P8_BOROUGH").getValue();</span><span id="581f" class="lo kd hh lk b fi mp lq l lr ls">aBoroughArray = vBoroughName.split(":");</span><span id="fc16" class="lo kd hh lk b fi mp lq l lr ls">setTimeout(() =&gt; { document.getElementById('OACiFrameEmbed').contentWindow.postMessage(aBoroughArray, 'https://&lt;APEX-INSTANCE&gt;.adb.us-ashburn-1.oraclecloudapps.com'); }, 2000);</span></pre><h1 id="2b0b" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">摘要</h1><p id="19f0" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">将Oracle Analytics (OAC)与APEX结合使用可以为您的应用程序增加价值。在这篇博客中，我描述了JET版本的重要性，并提供了一些链接，介绍如何配置APEX以使用与OAC相同的Oracle身份云服务来提供无缝体验。</p><p id="ba7a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用iFrames(特别是“srcdoc”参数)来嵌入分析内容，通过沙盒化分析内容，提供了一种处理存在不同JET版本的可能性的方法。</p><p id="9406" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">仍然可以使用“postMessage”方法将参数传递给嵌入的iFrame。一般的方法是iFrame包含自含式分析嵌入代码——嵌入框架的链接、<oracle-dv>嵌入标签的HTML、requirejs依赖管理和可观察定义。</oracle-dv></p><p id="6588" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">应用于嵌入内容的过滤器的定义被定义为可观察的数组，并且根据用例是单选(在event.data周围添加[ ]括号)还是多选/分面搜索(不需要[ ]括号，因为event.data是数组)，需要有所不同。</p><p id="2ecc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种类型的嵌入的另一个关键方面是，当最终用户选择参数值时，需要有一种方法将这些值发送到iFrame，方法是使用APEX页面级别的“页面加载时执行”参数，或者使用在分面搜索值改变时调用的动态操作。</p><h1 id="a9de" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">承认</h1><p id="0df9" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">感谢您的阅读，我希望这篇博客对您有所帮助，并为您如何在自己的项目中嵌入Oracle Analytics提供一些思路。我要感谢Arun、Matt、Lior、Jackie和Roel对APEX的帮助和支持。</p><p id="e597" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你对甲骨文开发人员在他们的自然栖息地发生的事情感到好奇，来<a class="ae jn" href="https://bit.ly/odevrel_slack" rel="noopener ugc nofollow" target="_blank">加入我们的公共休闲频道</a>！我们不介意成为你的鱼缸🐠</p></div></div>    
</body>
</html>