<html>
<head>
<title>How to make a Circular Progress Bar Pluggable widget</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何制作一个循环进度条插件</h1>
<blockquote>原文：<a href="https://medium.com/mendix/how-to-make-a-circular-progress-bar-pluggable-widget-f5f0ae71108d?source=collection_archive---------2-----------------------#2021-09-21">https://medium.com/mendix/how-to-make-a-circular-progress-bar-pluggable-widget-f5f0ae71108d?source=collection_archive---------2-----------------------#2021-09-21</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/4af865eb49d55a4b8c2cfe8d7b70f831.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*B0YUyMQm30_QeAo7uI7lMQ.png"/></div></div></figure><div class=""/><h1 id="c980" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">在我的日常生活中，我并不经常有机会创建可插拔的小部件，所以为了保持我的技能新鲜，我喜欢通过尝试重新创建一个我经常使用的小部件来挑战自己。我已经有一段时间没有这样做了，所以本周我决定测试一下我的技能，尝试重新创建圆形进度条小部件，它在原生移动资源模块中提供。因此，请系好安全带，让我们在React和Mendix的世界中开始一次探索之旅。</h1><h1 id="8f23" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">开始之前</h1><p id="c405" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">请在继续之前花一点时间，确保在我们开始之前您已经做好了一切准备。您将需要:</p><ul class=""><li id="9ced" class="kx ky if bd b kc kz kg la kk lb ko lc ks ld kw le lf lg lh dt translated">Mendix Studio Pro(我在这个例子中用的是(9.1.1)。</li><li id="b276" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">在您的机器上安装并配置了节点js。</li><li id="46c7" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">你选择的IDE，我用了VS代码。</li><li id="1646" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">建议您完成文档中关于可插拔部件的教程，或者完成T2学院的课程。</li><li id="532c" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">安装在测试设备上的<a class="ae ln" href="https://docs.mendix.com/refguide/getting-the-make-it-native-app" rel="noopener ugc nofollow" target="_blank"> Make it Native 9 </a>应用程序</li></ul><h1 id="adf8" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">选择要使用的github库</h1><p id="a48e" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">对于开发人员来说，知道从哪里开始这样的项目有时会令人望而生畏，这就是为什么我发现在一些研究之后知道要做什么会容易得多。所以我去了github，看看那里已经有什么了。我从<a class="ae ln" href="https://github.com/msadura/epicode-academy" rel="noopener ugc nofollow" target="_blank"> <strong class="bd lo"> epicode-academy </strong> </a>看到了这个回购，并决定将它作为我的组件的基础。在这个回购中还有一些其他项目，所以如果你正在寻找确切的联系，这里是<a class="ae ln" href="https://github.com/msadura/epicode-academy/tree/master/ep06" rel="noopener ugc nofollow" target="_blank"/>。</p><h1 id="5acb" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">分析代码</h1><p id="b164" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">在开始编码之前，重要的是实际检查所提供的代码，并确保您理解发生了什么。看一下这个例子，我已经看到它使用了功能组件，我知道这需要一些修改才能在一个可插拔的小部件中实现，因为主组件通常是一个类组件。</p><blockquote class="lp lq lr"><p id="d89c" class="ka kb ls bd b kc kz ke kf kg la ki kj lt lu km kn lv lw kq kr lx ly ku kv kw hn dt translated">组件有两种类型，类组件和函数组件。功能组件只是一个普通的JavaScript函数，它接受props作为参数并返回一个React元素。一个类组件需要你从React扩展。</p></blockquote><h1 id="c0d0" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">创建小部件支架</h1><p id="30ff" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">看够了，我们来编码吧！首先，打开您的终端并导航到您的项目目录。一个快速的方法是点击Studio Pro顶部菜单中“应用程序”下的“在浏览器中显示应用程序目录”。这将打开一个文件浏览器，其中包含您的应用程序文件。复制导航栏中的文件路径，然后返回到您打开的终端。键入“cd”并粘贴到您的文件路径中，如下所示:</p><p id="6e81" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated"><code class="eh lz ma mb mc b">cd yourFilePath</code></p><p id="81ed" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated">接下来，我们必须创建一个文件夹来存储定制的小部件。在您的终端中键入:</p><p id="31e7" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated"><code class="eh lz ma mb mc b">mkdir CustomWidgets</code></p><p id="11de" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated">然后使用cd进入刚刚创建的文件夹:</p><p id="87c9" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated"><code class="eh lz ma mb mc b">cd CustomWidgets</code></p><p id="1cf9" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated">现在，您可以使用小部件构建器来创建小部件支架。再次在终端中，使用该命令调用Mendix小部件生成器:</p><p id="20dd" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated"><code class="eh lz ma mb mc b">@mendix/widget CircularProgressBar</code></p><p id="85f0" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated">然后，小部件生成器将通过询问一些问题来指导您创建小部件，以下是我使用的方法:</p><ul class=""><li id="6af1" class="kx ky if bd b kc kz kg la kk lb ko lc ks ld kw le lf lg lh dt translated">小工具名称:<em class="ls">{您的小工具名称} </em></li><li id="9659" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">小工具描述:<em class="ls">{您的小工具描述} </em></li><li id="afe1" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">组织名称:<em class="ls">{您的组织名称} </em></li><li id="ef7f" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">版权:<em class="ls">{您的版权日期} </em></li><li id="cd1f" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">许可证:<em class="ls">{您的许可证} </em></li><li id="717c" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">初始版本:<em class="ls">{您的初始版本号} </em></li><li id="3dda" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">作者:<em class="ls">{您的作者姓名} </em></li><li id="9fc7" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">Mendix项目路径:<em class="ls">../../ </em></li><li id="f14b" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">编程语言:<strong class="bd lo"> Javascript ES6 </strong></li><li id="c51b" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">Widget类型:<strong class="bd lo">原生手机</strong></li><li id="83fd" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">Widget模板:<strong class="bd lo">空widget(推荐有经验的开发者使用)</strong></li><li id="2be3" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">单元测试:<strong class="bd lo">否</strong></li><li id="3215" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated">端到端测试:<strong class="bd lo">否</strong></li></ul><h1 id="0c03" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">设置小部件XML</h1><p id="0a4d" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">我们需要做的第一件事是改变小部件XML，以便我们能够以属性的形式从上下文实体接收数据。为此，我们需要创建一个可以接受整数值的属性，为该属性定义键值也很重要。你可以在下面看到我的小部件XML。</p><pre class="md me mf mg fq mh mc mi mj aw mk dt"><span id="a786" class="ml jd if mc b fv mm mn l mo mp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span><span id="181f" class="ml jd if mc b fv mq mn l mo mp">&lt;widget id="mendix.circularprogressbar.CircularProgressBar" needsEntityContext="true" offlineCapable="true" pluginWidget="true"</span><span id="a289" class="ml jd if mc b fv mq mn l mo mp">supportedPlatform="Native" </span><span id="3907" class="ml jd if mc b fv mq mn l mo mp">xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"</span><span id="ef6a" class="ml jd if mc b fv mq mn l mo mp">xsi:schemaLocation="http://www.mendix.com/widget/1.0/ ../node_modules/mendix/custom_widget.xsd"&gt;</span><span id="bac7" class="ml jd if mc b fv mq mn l mo mp">&lt;name&gt;Circular Progress Bar&lt;/name&gt;</span><span id="9e80" class="ml jd if mc b fv mq mn l mo mp">&lt;description&gt;Animated Circle Progress widget&lt;/description&gt;</span><span id="ce6a" class="ml jd if mc b fv mq mn l mo mp">&lt;icon&gt;</span><span id="6130" class="ml jd if mc b fv mq mn l mo mp">iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAABp1BMVEUAAABV//9mzP9LtP9Ms/9Jtv9NsvdJsfpLtPpJsfdJsfhJsvhJsvdKsvdJsPhKsPhJsfdJsPhJsfdIsfhJsfdIsPdJsfhJsfhJsPhJsPhIsfhIsPdJsPdKsPdKsfdNsvdOsvdPs/dQs/dRtPdStPdTtPdUtfdWtvdXtvdauPdcuPdeufdeufhguvhiu/hju/hkvPhmvfhnvfhpvvhrv/huwPhvwfhxwfhywvhzwvh4xfl5xfl6xfl8xvl9xvl9x/mByPmCyfmFyvmGyvmJzPmKzPmLzfmNzvqPzvqQz/qT0PqU0PqU0fqX0vqY0vqa0/qe1fqg1vqj1/uk1/un2fup2vut2/uv3Puw3Puw3fuz3vu13/u23/u34Pu44Pu64fu64fy84vy94vy+4/y/4/zD5fzE5fzG5vzH5vzI5/zK6PzL6PzR6/zT7P3U7P3V7f3W7f3Y7v3Z7v3c8P3e8f3f8f3g8f3i8v3l8/3l9P3n9P3r9v7t9/7u9/7v+P7w+P7x+f7y+f70+v71+v74/P75/P76/f77/f78/f78/v79/v7+/v7////6dMsRAAAAG3RSTlMAAwURGxwhMTNic3SEh4iVp7XBzejt7vH5/f6PsMNWAAABsklEQVR4AWIYfGAUjIJRMAqYuYREJKWJAqLCPGwY+jnFpEkBEryMqPr5pEkFgkwo9kuTDviR/S9GhgFSHAgDuKXJAQIIA4TIMkAcEY4i0mQBVrgBkuQZwA43QJo8wIFhQEhEOIBQOutHJozDOP5Crp4e1RhkJ0tKGJFd6oNEdtmJyEIzpaZl5nrRZgaHM/2Pf5/vwXXfyagXgG93bwSAlEolowLMm9w83gibhXH2gKKVdD67gTnWjwCk+VVjMQS4suSnnjMLRVFc9sAHvAX2A9fySaXNBMbEZVUWscaHIMRuqwBgD8hDEbnsRmfjUKJkAQZGCTlO/xWBwIADQLIZBlY441MvfoF1xlFS/4fy+bzXKh4dgNJE7L3eh3tmtuWa+AMcMIY3dgUvZQpGEYmMw2kD7HC+R29UqyoXLaBd0QZxzgXgikLLDSqJTKU5HOcS0MsbA9jPqtwCRvXm2eorBbNIJBw3KJ9O4Yl+AAXdnyaLt7PWN3jRWLvzmAVp94zO5+n41/onfo/UpExxZqI0O7NQr0DhIq9Io7hQpbRYp7hiobRqo6ByFcNWuY6CUTAKRgEAo8X0lBD3V30AAAAASUVORK5CYII=</span><span id="9769" class="ml jd if mc b fv mq mn l mo mp">&lt;/icon&gt;</span><span id="2c4e" class="ml jd if mc b fv mq mn l mo mp">&lt;properties&gt;</span><span id="719a" class="ml jd if mc b fv mq mn l mo mp">&lt;propertyGroup caption="General"&gt;</span><span id="124a" class="ml jd if mc b fv mq mn l mo mp">&lt;property key="progress" type="attribute" required="true"&gt;</span><span id="c9ad" class="ml jd if mc b fv mq mn l mo mp">&lt;caption&gt;Progress Indicator&lt;/caption&gt;</span><span id="9afa" class="ml jd if mc b fv mq mn l mo mp">&lt;description&gt;The attribute that contains the circularprogressbar value, should be an integer between 0 and 100&lt;/description&gt;</span><span id="9b29" class="ml jd if mc b fv mq mn l mo mp">&lt;attributeTypes&gt;</span><span id="29c3" class="ml jd if mc b fv mq mn l mo mp">&lt;attributeType name="Integer"/&gt;</span><span id="51cf" class="ml jd if mc b fv mq mn l mo mp">&lt;/attributeTypes&gt;</span><span id="5bce" class="ml jd if mc b fv mq mn l mo mp">&lt;/property&gt;</span><span id="e567" class="ml jd if mc b fv mq mn l mo mp">&lt;/propertyGroup&gt;</span><span id="ec5d" class="ml jd if mc b fv mq mn l mo mp">&lt;/properties&gt;</span><span id="8068" class="ml jd if mc b fv mq mn l mo mp">&lt;/widget&gt;</span></pre><h1 id="f07b" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">主要成分</h1><p id="b442" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">既然我们已经定义了数据输入，我们就可以处理主要组件了。在这种情况下，主组件只是用来呈现子组件，并向它传递使用其props提供的数据。</p><blockquote class="lp lq lr"><p id="a5e3" class="ka kb ls bd b kc kz ke kf kg la ki kj lt lu km kn lv lw kq kr lx ly ku kv kw hn dt translated">“Props”是React中的一个特殊关键字，代表属性，用于将数据从一个组件传递到另一个组件。但是这里重要的部分是数据属性只在单向流中传递。</p></blockquote><p id="9aba" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated">这里需要注意的是，如前所述，主组件是作为类组件在脚手架中创建的。这意味着我们需要稍微修改Github代码。</p><p id="1ffb" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated">这是我的主要组件CircularProgressBar的代码。</p><pre class="md me mf mg fq mh mc mi mj aw mk dt"><span id="8155" class="ml jd if mc b fv mm mn l mo mp">import { React,Component ,createElement} from "react";</span><span id="4d29" class="ml jd if mc b fv mq mn l mo mp">import CircularProgress from "./components/CircleComponent";</span><span id="5265" class="ml jd if mc b fv mq mn l mo mp">export class CircularProgressBar extends Component {</span><span id="ad72" class="ml jd if mc b fv mq mn l mo mp">constructor(props){</span><span id="5425" class="ml jd if mc b fv mq mn l mo mp">super(props);</span><span id="862d" class="ml jd if mc b fv mq mn l mo mp">this.handleChange =this.handleChange.bind(this);</span><span id="8c68" class="ml jd if mc b fv mq mn l mo mp">const {progress} = this.props;</span><span id="9315" class="ml jd if mc b fv mq mn l mo mp">console.log('constuctor triggered');</span><span id="fa6e" class="ml jd if mc b fv mq mn l mo mp">}</span><span id="8076" class="ml jd if mc b fv mq mn l mo mp">render() {</span><span id="f2a9" class="ml jd if mc b fv mq mn l mo mp">const {progress} = this.props;</span><span id="ec5b" class="ml jd if mc b fv mq mn l mo mp">console.log('render triggered');</span><span id="21aa" class="ml jd if mc b fv mq mn l mo mp">return (</span><span id="61a1" class="ml jd if mc b fv mq mn l mo mp">&lt;CircularProgress</span><span id="5418" class="ml jd if mc b fv mq mn l mo mp">progress={progress.value}</span><span id="b4d3" class="ml jd if mc b fv mq mn l mo mp">size={200}</span><span id="7733" class="ml jd if mc b fv mq mn l mo mp">/&gt;</span><span id="3187" class="ml jd if mc b fv mq mn l mo mp">)</span><span id="0235" class="ml jd if mc b fv mq mn l mo mp">}</span><span id="a956" class="ml jd if mc b fv mq mn l mo mp">}</span></pre><h1 id="935a" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">子组件</h1><p id="786a" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">子组件是我们大部分逻辑发生的地方。这里我们再次使用props接受来自父组件的数据，一点逻辑和来自“styled-components/native”的样式库来样式化组成进度条的各个部分。最后，我们以一个应该呈现组件的return语句结束。检查下面的子组件“CircleComponent”代码。</p><pre class="md me mf mg fq mh mc mi mj aw mk dt"><span id="30f3" class="ml jd if mc b fv mm mn l mo mp">import React, { useRef, useEffect, createElement } from "react";</span><span id="7e77" class="ml jd if mc b fv mq mn l mo mp">import styled from 'styled-components/native';</span><span id="0a21" class="ml jd if mc b fv mq mn l mo mp">import {Animated} from 'react-native';</span><span id="1193" class="ml jd if mc b fv mq mn l mo mp">const EmptyColour = '#a0a0a1';</span><span id="e2c9" class="ml jd if mc b fv mq mn l mo mp">const ProgressColour = '#0085ff';</span><span id="3a4e" class="ml jd if mc b fv mq mn l mo mp">const CircleBase = styled(Animated.View)`</span><span id="840a" class="ml jd if mc b fv mq mn l mo mp">width: ${props =&gt; props.size}px;</span><span id="f7c5" class="ml jd if mc b fv mq mn l mo mp">height: ${props =&gt; props.size}px;</span><span id="c0ef" class="ml jd if mc b fv mq mn l mo mp">border-radius: ${props =&gt; props.size / 2}px;</span><span id="f839" class="ml jd if mc b fv mq mn l mo mp">border-width: ${props =&gt; props.size / 10}px;</span><span id="ad04" class="ml jd if mc b fv mq mn l mo mp">`;</span><span id="2e53" class="ml jd if mc b fv mq mn l mo mp">const EmptyCircle = styled(CircleBase)`</span><span id="da2d" class="ml jd if mc b fv mq mn l mo mp">border-color: ${EmptyColour};</span><span id="6f97" class="ml jd if mc b fv mq mn l mo mp">justify-content:center;</span><span id="ff53" class="ml jd if mc b fv mq mn l mo mp">align-items: center;</span><span id="48b3" class="ml jd if mc b fv mq mn l mo mp">transform: rotate(-45deg);</span><span id="88b2" class="ml jd if mc b fv mq mn l mo mp">`;</span><span id="78cc" class="ml jd if mc b fv mq mn l mo mp">const Indicator = styled(CircleBase)`</span><span id="ab8b" class="ml jd if mc b fv mq mn l mo mp">position: absolute;</span><span id="52ff" class="ml jd if mc b fv mq mn l mo mp">border-left-color:${ProgressColour};</span><span id="0f61" class="ml jd if mc b fv mq mn l mo mp">border-top-color:${ProgressColour};</span><span id="6ec8" class="ml jd if mc b fv mq mn l mo mp">border-bottom-color:transparent;</span><span id="8fa1" class="ml jd if mc b fv mq mn l mo mp">border-right-color:transparent;</span><span id="c740" class="ml jd if mc b fv mq mn l mo mp">`;</span><span id="1c45" class="ml jd if mc b fv mq mn l mo mp">const CoverIndicator = styled(CircleBase)`</span><span id="da5c" class="ml jd if mc b fv mq mn l mo mp">position: absolute;</span><span id="b35c" class="ml jd if mc b fv mq mn l mo mp">border-left-color:${EmptyColour};</span><span id="c85f" class="ml jd if mc b fv mq mn l mo mp">border-top-color:${EmptyColour};</span><span id="5db7" class="ml jd if mc b fv mq mn l mo mp">border-bottom-color:transparent;</span><span id="d71d" class="ml jd if mc b fv mq mn l mo mp">border-right-color:transparent;</span><span id="249e" class="ml jd if mc b fv mq mn l mo mp">`;</span><span id="ad06" class="ml jd if mc b fv mq mn l mo mp">export default function CircularProgress(props) { //added input props</span><span id="270c" class="ml jd if mc b fv mq mn l mo mp">const {progress, size} = this.props //destructured the props</span><span id="8a01" class="ml jd if mc b fv mq mn l mo mp">console.log (styled)</span><span id="006f" class="ml jd if mc b fv mq mn l mo mp">const animatedProgress = useRef(new Animated.Value(0)).current;</span><span id="cd55" class="ml jd if mc b fv mq mn l mo mp">const animateProgress = useRef(toValue =&gt; {</span><span id="664f" class="ml jd if mc b fv mq mn l mo mp">Animated.spring(animatedProgress, {</span><span id="fbd5" class="ml jd if mc b fv mq mn l mo mp">toValue,</span><span id="f78a" class="ml jd if mc b fv mq mn l mo mp">useNativeDriver: true,</span><span id="49f8" class="ml jd if mc b fv mq mn l mo mp">}).start();</span><span id="1194" class="ml jd if mc b fv mq mn l mo mp">}).current;</span><span id="f95b" class="ml jd if mc b fv mq mn l mo mp">useEffect(() =&gt; {</span><span id="70d5" class="ml jd if mc b fv mq mn l mo mp">animateProgress(progress);</span><span id="75aa" class="ml jd if mc b fv mq mn l mo mp">}, [animateProgress,progress]);</span><span id="fc28" class="ml jd if mc b fv mq mn l mo mp">const firstIndicatorRotate = animatedProgress.interpolate({</span><span id="8122" class="ml jd if mc b fv mq mn l mo mp">inputRange: [0, 50],</span><span id="3a19" class="ml jd if mc b fv mq mn l mo mp">outputRange: ['0deg', '180deg'],</span><span id="cf1e" class="ml jd if mc b fv mq mn l mo mp">extrapolate: 'clamp',</span><span id="7aa8" class="ml jd if mc b fv mq mn l mo mp">});</span><span id="8cf1" class="ml jd if mc b fv mq mn l mo mp">const secondIndicatorRotate = animatedProgress.interpolate({</span><span id="c30a" class="ml jd if mc b fv mq mn l mo mp">inputRange: [0, 100],</span><span id="9f3b" class="ml jd if mc b fv mq mn l mo mp">outputRange: ['0deg', '360deg'],</span><span id="09c2" class="ml jd if mc b fv mq mn l mo mp">extrapolate: 'clamp',</span><span id="0f73" class="ml jd if mc b fv mq mn l mo mp">});</span><span id="a194" class="ml jd if mc b fv mq mn l mo mp">const secondIndictorVisibility = animatedProgress.interpolate({</span><span id="3103" class="ml jd if mc b fv mq mn l mo mp">inputRange: [0, 49, 50, 100],</span><span id="5f6e" class="ml jd if mc b fv mq mn l mo mp">outputRange: [0, 0, 1, 1],</span><span id="3677" class="ml jd if mc b fv mq mn l mo mp">extrapolate: 'clamp',</span><span id="2f35" class="ml jd if mc b fv mq mn l mo mp">});</span><span id="bf65" class="ml jd if mc b fv mq mn l mo mp">return (</span><span id="7dcc" class="ml jd if mc b fv mq mn l mo mp">&lt;EmptyCircle size={size}&gt;</span><span id="514e" class="ml jd if mc b fv mq mn l mo mp">&lt;Indicator</span><span id="1759" class="ml jd if mc b fv mq mn l mo mp">style={{transform: [{rotate: firstIndicatorRotate}]}}</span><span id="5c69" class="ml jd if mc b fv mq mn l mo mp">size={size}</span><span id="a6b0" class="ml jd if mc b fv mq mn l mo mp">/&gt;</span><span id="3410" class="ml jd if mc b fv mq mn l mo mp">&lt;CoverIndicator size={size} /&gt;</span><span id="ce99" class="ml jd if mc b fv mq mn l mo mp">&lt;Indicator</span><span id="4b1d" class="ml jd if mc b fv mq mn l mo mp">size={size}</span><span id="2135" class="ml jd if mc b fv mq mn l mo mp">style={{</span><span id="17a4" class="ml jd if mc b fv mq mn l mo mp">transform: [{rotate: secondIndicatorRotate}],</span><span id="9da8" class="ml jd if mc b fv mq mn l mo mp">opacity: secondIndictorVisibility,</span><span id="3faa" class="ml jd if mc b fv mq mn l mo mp">}}</span><span id="30c0" class="ml jd if mc b fv mq mn l mo mp">/&gt;</span><span id="d63d" class="ml jd if mc b fv mq mn l mo mp">&lt;/EmptyCircle&gt;</span><span id="4b0d" class="ml jd if mc b fv mq mn l mo mp">);</span><span id="0688" class="ml jd if mc b fv mq mn l mo mp">}</span></pre><h1 id="3325" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">安装依赖项</h1><p id="30cb" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">差不多到了测试您的小部件的时候了，但是在此之前我们还有一些事情要处理。我们必须确保我们使用的任何库都被正确地导入到我们的widget文件夹中。再次打开您的终端并键入命令。</p><p id="9fef" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated"><code class="eh lz ma mb mc b">npm install --save</code></p><p id="41f6" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated">等待它下载并安装您的代码可能需要的任何依赖项。</p><p id="89c3" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated">如果出现任何问题，或者您需要重新安装，您也可以执行全新安装，删除所有节点模块，并使用这个命令<strong class="bd lo">重新安装它们(但是只有在100%需要时才这样做！)</strong></p><p id="00fa" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated"><code class="eh lz ma mb mc b">npm ci --save</code></p><h1 id="7bfe" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">创建小部件。mpk文件。</h1><p id="47ef" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">捆绑您的小部件并创建一个。mpk可以在您的Mendix项目中使用，在您的终端中运行以下命令:</p><p id="2100" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated"><code class="eh lz ma mb mc b">npm run build</code></p><p id="761a" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated">此操作将构建您的小部件代码，然后将小部件复制到您的小部件文件夹中。最后一步是在studio pro中同步您的应用程序目录，方法是按F4，或者转到Studio Pro顶部菜单中的“应用程序”→“同步应用程序目录”。</p><p id="c6f2" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated">现在，您可以在Studio Pro中开发时访问您的小部件。该小部件需要放置在上下文的数据视图中，并期望一个整数属性连接到它，但一旦你设置好了，你就可以使用Make it Native 9应用程序运行并测试你的新小部件。</p><h1 id="0e05" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">阅读更多</h1><ul class=""><li id="0d1f" class="kx ky if bd b kc kd kg kh kk mr ko ms ks mt kw le lf lg lh dt translated"><a class="ae ln" href="https://docs.mendix.com/refguide/getting-the-make-it-native-app" rel="noopener ugc nofollow" target="_blank">https://docs . mendix . com/ref guide/get-the-make-it-native-app</a></li><li id="2f78" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated"><a class="ae ln" href="https://docs.mendix.com/howto/extensibility/create-a-pluggable-widget-one" rel="noopener ugc nofollow" target="_blank">https://docs . mendix . com/how to/extensibility/create-a-pluggable-widget-one</a></li><li id="4f65" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated"><a class="ae ln" href="https://docs.mendix.com/howto/extensibility/create-a-pluggable-widget-two" rel="noopener ugc nofollow" target="_blank">https://docs . mendix . com/how to/extensibility/create-a-pluggable-widget-two</a></li><li id="0d3d" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated"><a class="ae ln" href="https://academy.mendix.com/link/path/108/Build-a-Pluggable-Widget" rel="noopener ugc nofollow" target="_blank">https://academy . mendix . com/link/path/108/Build-a-Pluggable-Widget</a></li><li id="55ad" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated"><a class="ae ln" href="https://docs.mendix.com/apidocs-mxsdk/apidocs/pluggable-widgets" rel="noopener ugc nofollow" target="_blank">https://docs . mendix . com/API docs-mxsdk/API docs/pluggable-widgets</a></li><li id="36e4" class="kx ky if bd b kc li kg lj kk lk ko ll ks lm kw le lf lg lh dt translated"><a class="ae ln" href="https://docs.mendix.com/apidocs-mxsdk/apidocs/client-apis-for-pluggable-widgets" rel="noopener ugc nofollow" target="_blank">https://docs . mendix . com/API docs-mxsdk/API docs/client-API-for-pluggable-widgets</a></li></ul></div><div class="ab cl mu mv hb mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="hn ho hp hq hr"><p id="fb55" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated"><em class="ls">来自发布者- </em></p><p id="08b2" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated"><em class="ls">如果你喜欢这篇文章，你可以在我们的</em> <a class="ae ln" href="https://medium.com/mendix" rel="noopener"> <em class="ls">媒体页面</em> </a> <em class="ls">或我们自己的</em> <a class="ae ln" href="https://developers.mendix.com/community-blog/" rel="noopener ugc nofollow" target="_blank"> <em class="ls">社区博客网站</em> </a> <em class="ls">找到更多类似的文章。</em></p><p id="b14c" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated"><em class="ls">希望入门的创客，可以注册一个</em> <a class="ae ln" href="https://signup.mendix.com/link/signup/?source=direct" rel="noopener ugc nofollow" target="_blank"> <em class="ls">免费账号</em> </a> <em class="ls">，通过我们的</em> <a class="ae ln" href="https://academy.mendix.com/link/home" rel="noopener ugc nofollow" target="_blank"> <em class="ls">学苑</em> </a> <em class="ls">即时获取学习。</em></p><p id="16cd" class="pw-post-body-paragraph ka kb if bd b kc kz ke kf kg la ki kj kk lu km kn ko lw kq kr ks ly ku kv kw hn dt translated">有兴趣更多地参与我们的社区吗？你可以加入我们的 <a class="ae ln" href="https://join.slack.com/t/mendixcommunity/shared_invite/zt-hwhwkcxu-~59ywyjqHlUHXmrw5heqpQ" rel="noopener ugc nofollow" target="_blank"> <em class="ls"> Slack社区频道</em> </a> <em class="ls">或者想更多参与的人，看看加入我们的</em> <a class="ae ln" href="https://developers.mendix.com/meetups/#meetupsNearYou" rel="noopener ugc nofollow" target="_blank"> <em class="ls">遇见ups </em> </a> <em class="ls">。</em></p></div></div>    
</body>
</html>