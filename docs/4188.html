<html>
<head>
<title>Kaggle Competition: Digit Recognizer -MNIST with tf.Keras</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kaggle竞赛:数字识别器-MNIST与tf。克拉斯</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/kaggle-competition-digit-recognizer-mnist-with-tf-keras-86981edadded?source=collection_archive---------6-----------------------#2018-09-01">https://medium.com/google-developer-experts/kaggle-competition-digit-recognizer-mnist-with-tf-keras-86981edadded?source=collection_archive---------6-----------------------#2018-09-01</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="fb16" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是一个关于如何加入“入门”Kaggle竞赛的教程— <strong class="ig hi">数字识别器</strong> —使用tf.Keras对数字进行分类。在本教程中，我们将使用Kaggle内核创建一个带有tf的CNN。Keras对MNIST的手写数字进行分类。然后我们从内核创建一个输出文件提交给竞争对手。涵盖了以下主题:</p><ul class=""><li id="b0e6" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">如何参加比赛</li><li id="8b0e" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">如何派生或创建新的内核</li><li id="ae1e" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">如何生成输出文件</li><li id="1af2" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">如何提交预测</li></ul><p id="0baa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我包含了一个链接到我的内核(<a class="ae jq" href="https://www.kaggle.com/margaretmz/mnist-with-tf-keras" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">)MNIST与tf。Keras </strong> </a> <strong class="ig hi"> ) </strong>附示例代码。注意:本教程的主要目标是复习<strong class="ig hi">参加比赛</strong>的过程，而不是如何赢得比赛。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jr"><img src="../Images/c729807a78e38051787eb44d556d9327.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P8YYr9zsEECebk_u7Dy0mg.png"/></div></div></figure><h1 id="cba7" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">加入竞争</strong></h1><p id="059f" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">首先进入<a class="ae jq" href="https://www.kaggle.com/competitions" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> Kaggle比赛</strong> </a>，滚动比赛列表，你会看到比赛<a class="ae jq" href="https://www.kaggle.com/c/digit-recognizer" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">数字识别器</strong> </a>。选择比赛并通读描述、评估、教程和规则，以更好地满足要求。因为这个比赛只是为了学习，所以它是一个没有截止日期的持续比赛。</p><p id="e49d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击<strong class="ig hi">加入比赛</strong>。注意:您必须登录Kaggle才能看到“加入竞赛”按钮。</p><h1 id="13a5" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">创建内核</h1><p id="7b09" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">Kaggle内核是一个浏览器内计算环境，与Kaggle上的大多数竞争数据集完全集成。它预装了大多数数据科学包和库。它支持脚本，R和Python中的Jupyter笔记本，以及RMarkdown报告。</p><p id="099f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以使用内核<strong class="ig hi">创建提交文件</strong>或<strong class="ig hi">探索竞赛数据</strong>。虽然您不必使用Kaggle内核来编写代码，但它是一个很好的选择，可以与数据集、免费GPU无缝集成，并且易于提交给竞赛。</p><p id="0237" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要创建一个内核，你既可以<strong class="ig hi">派生</strong>一个别人发布的现有内核，也可以<strong class="ig hi">自己创建一个新内核。</strong></p><h2 id="a3d5" class="lg ke hh bd kf lh li lj kj lk ll lm kn ip ln lo kr it lp lq kv ix lr ls kz lt bi translated"><strong class="ak">派生现有笔记本</strong></h2><p id="ba3c" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">在数字识别器竞赛<a class="ae jq" href="https://www.kaggle.com/c/digit-recognizer#tutorial" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">教程</strong> </a> <strong class="ig hi"> </strong>栏目<strong class="ig hi">，</strong>下，你会看到一个推荐给你试用的内核列表。点击“<strong class="ig hi"> Fork Notebook </strong>”将创建您自己的内核副本，以探索他人编写的代码。</p><h2 id="0805" class="lg ke hh bd kf lh li lj kj lk ll lm kn ip ln lo kr it lp lq kv ix lr ls kz lt bi translated">创建一个新内核</h2><p id="7d1c" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">下面是创建新内核的方法:</p><ul class=""><li id="abfd" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">在<strong class="ig hi">数字识别器</strong>竞赛中，点击<strong class="ig hi">内核</strong>标签，</li><li id="9fd5" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">点击<strong class="ig hi">新内核</strong>，选择<strong class="ig hi">笔记本</strong>选项。将为您创建一个新笔记本，默认为Python语言。</li><li id="461b" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">新的笔记本将有一些存根代码，如进口numpy，熊猫和os。注意所有的输入文件都在"../input/"目录和输出位置"../working/"目录</li></ul><pre class="js jt ju jv fd lu lv lw lx aw ly bi"><span id="9540" class="lg ke hh lv b fi lz ma l mb mc">import os</span><span id="5b65" class="lg ke hh lv b fi md ma l mb mc"># list files from input directory<br/>print(os.listdir("../input"))</span></pre><p id="ccea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您将看到这3个文件列在输入目录下:</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es me"><img src="../Images/6965c33a875bf76709daa549c20bef4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oeLtEmw8v5eLbTlv4NpWgw.png"/></div></div></figure><p id="2af4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">sample_submission.cvs文件包含您需要提交的数据格式。</p><p id="8d1c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">看看<a class="ae jq" href="https://www.kaggle.com/margaretmz/mnist-with-tf-keras" rel="noopener ugc nofollow" target="_blank">我创建的内核</a>——点击<strong class="ig hi"> Fork Notebook </strong>执行笔记本中的单元格。注意我用的是tf。Keras创建了一个CNN对数字进行分类。</p><blockquote class="mf mg mh"><p id="e7ad" class="ie if mi ig b ih ii ij ik il im in io mj iq ir is mk iu iv iw ml iy iz ja jb ha bi translated"><strong class="ig hi"> Protip: </strong> <em class="hh">您可以通过进入</em> <strong class="ig hi"> <em class="hh">设置</em> </strong> <em class="hh">并从GPU关闭切换到</em> <strong class="ig hi"> <em class="hh"> GPU打开</em> </strong> <em class="hh">，为您的内核打开GPU </em>  <em class="hh">。对于像MNIST这样的简单数据集，您不一定需要打开GPU，但知道它在您需要时可用是很好的。</em></p></blockquote><h2 id="0027" class="lg ke hh bd kf lh li lj kj lk ll lm kn ip ln lo kr it lp lq kv ix lr ls kz lt bi translated">公开内核</h2><p id="faa9" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">为了生成输出文件，您需要确保您的内核是公共的。公开你的内核也允许其他人从你的代码中学习。</p><p id="3809" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有两种方法可以让你的内核公开:</p><ol class=""><li id="856f" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb mm ji jj jk bi translated">在内核概述页面上，单击“公开”来切换公开/私有设置。</li><li id="ac0f" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb mm ji jj jk bi translated">在你的笔记本中，进入<strong class="ig hi">设置</strong>，点击<strong class="ig hi">分享</strong>切换到公开。</li></ol><figure class="js jt ju jv fd jw er es paragraph-image"><div class="er es mn"><img src="../Images/e7bc7ce0ecc0c163b2638e3a65df10ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*EoTSwwyXF7gKe2uJrjB1dQ.png"/></div></figure><p id="7cbd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">无论哪种方式，你都会被提示并点击“<strong class="ig hi"> Ok，public </strong>”，这将使你的内核对其他人公开。</p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es mo"><img src="../Images/00923a801cdede28d168bff287b0add8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*43oBr9ns_RjdZAQoTRhlXg.png"/></div></div></figure><h1 id="5325" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">生成输出文件</h1><p id="2ba1" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">笔记本末尾的这几行代码将生成一个输出文件:</p><pre class="js jt ju jv fd lu lv lw lx aw ly bi"><span id="9113" class="lg ke hh lv b fi lz ma l mb mc">predictions = model.predict_classes(x_test, verbose=0)<br/>submissions=pd.DataFrame({"ImageId": list(range(1,len(predictions)+1)), "Label": predictions})</span><span id="0b7b" class="lg ke hh lv b fi md ma l mb mc"># Generate csv file<br/>submissions.to_csv("submission.csv", index=False, header=True)</span></pre><p id="fa05" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦你点击“<strong class="ig hi">提交</strong>”，它将保存你的代码版本，并从上到下运行你的代码。每个版本都有一个URL，人们可以用它来查看你的内核。默认情况下，一旦您的内核公开，其他人就可以看到最新版本。</p><h1 id="33f3" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">提交预测</h1><p id="f45e" class="pw-post-body-paragraph ie if hh ig b ih lb ij ik il lc in io ip ld ir is it le iv iw ix lf iz ja jb ha bi translated">要查看笔记本生成的输出文件，请单击&lt;&lt; icon (back to kernel page) on the top left corner of your notebook. Click on the “<strong class="ig hi">输出</strong>选项卡，您将在那里看到输出文件。点击按钮“<strong class="ig hi">提交竞赛</strong>，我们的输出文件将被提交。然后，您将进入排行榜，查看自己的排名。</p></div><div class="ab cl mp mq go mr" role="separator"><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu mv"/><span class="ms bw bk mt mu"/></div><div class="ha hb hc hd he"><p id="b0cc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">参考文献:</strong></p><ul class=""><li id="6744" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><a class="ae jq" href="https://www.kaggle.com/dansbecker/submitting-from-a-kernel" rel="noopener ugc nofollow" target="_blank">从内核提交</a></li></ul></div></div>    
</body>
</html>