# 产品管理在 API 设计中的作用

> 原文：<https://medium.com/capital-one-tech/the-role-of-product-management-in-api-design-988f295b989?source=collection_archive---------0----------------------->

![](img/3a18029c57438fa65d1fee23425cc961.png)

成功的 API，无论是外品还是内胶，都需要强大的产品管理。然而，考虑到 API 短暂的本质，产品经理可能很难继续下去。如果做得不好，糟糕的 API 产品管理会导致产品不能满足用户的需求。收养将受到限制。整合一旦发生，将会非常困难。并且在开发之后纠正错误将仍然是一个令人沮丧和昂贵的提议。

Martin Erikson 在[定义产品经理角色](https://www.mindtheproduct.com/2011/10/what-exactly-is-a-product-manager/)中，将产品管理定义为位于技术、业务和 UX 交汇处的专业技能。马丁引用了《T2 启发了 T3》这本书，书中说产品经理应该*“发现有价值的、有用的和可行的产品。”*对于一个原料药来说，什么是“有价值的”、“可用的”和“可行的”？

# 有价值的

在最基本的层面上，API 必须提供有用的功能。决定什么是有用的，什么是无用的，是 API 产品经理的首要工作。

## *为正确的受众构建*

产品经理应该了解使用 API 的受众，以及他们独特的关注点。正如 [Brad Fults 提到的](https://bradfults.com/the-best-api-documentation-b9e46400379a)，这些受众可能包括但不限于:

*   决策者评估竞争对手的 API 产品。
*   寻求入门的开发人员。
*   集成商试图调试现有客户端中的特定问题。

每个观众都有不同的需求。对于决策者来说，API 提供的功能是否与其他竞争产品相同——如果不是更好的话？开发人员可以很容易地开始使用 API 吗，也许只需要一个 CURL 语句？当出现问题时，API 是否会返回某种类型的错误消息，使得集成者可以很容易地解决问题？

找到这些受众并满足他们的需求不是一件小事。产品管理工作的很大一部分是研究和测试。黑客马拉松是验证假设和发现 API 设计问题的好地方。

![](img/c511081f963f5633a12b607e58c73b70.png)

*Capital One DevExchange Hackathon — Denver, 2017*

# “由外而内”的 API 设计，而不是内部实现的反映

API 设计应该符合集成者的理解。创建一个受限于内部系统实现的接口通常不是一个好主意。这些系统，尤其是那些存在于遗留环境中的系统，是不断变化的业务优先级、技术进步、团队经验等的复杂集合。一次揭露几年(如果不是几十年)的“脏衣服”会大大增加理解和接受的障碍。

## 清晰的所有权

产品管理包括一定程度的所有权。集成商关心的所有权部分是所有权的数量和表现形式。对 API 的信任是很难获得的，也很容易失去。

API 的所有权转化为以下交流点:

*   正常运行时间仪表板/SLA
*   变更日志/发行说明
*   路线图
*   已知和沟通的支持和反馈渠道

个别实例可能有所不同，但每一个都试图传达稳定性和持久性——这是吸引开发人员远离其他 API 选项时的两个关键因素。一个有未来和团队支持的产品比部署在某人桌子下的计算机上的无人维护的代码更令人向往。产品经理应该确保沟通的是前者，而不是后者。

# 可用的

基于 web 的 API 有多种不同的方法。无论是使用 RPC、REST 还是后续版本，一个团队开发的 API 设计可能在使用和功能上与另一个团队的产品有很大不同——即使两个团队都为同一家公司工作！设计选择的数量，以及它们随后如何在设计中体现，需要额外的工作来确保可用性。

## 证明文件

这些差异意味着文档非常重要。事实上，在 John Musser 的演讲中， [*开发者讨厌你的 API 的十大理由*](https://www.slideshare.net/jmusser/ten-reasons-developershateyourapi) ，“糟糕”的文档被列为头号 API 问题。

文档可能“糟糕”的原因包括但不限于:

*   不准确/过时/不完整。
*   缺乏入门知识。
*   不专业和/或缺乏清晰度。

以结构化方式捕捉 API 意图的各种格式的兴起，如 [OpenAPI 规范](https://github.com/OAI/OpenAPI-Specification)，是一个开始。这些集成契约可以用来以类似于 Java 代码库中的注释呈现 Javadoc 的方式呈现文档。

然而，像 Javadocs 一样，这种“文档”通常是实现有效沟通和理解的最低要求。API 产品经理应该与技术作者密切合作，在[创建 API 文档](/capital-one-developers/developing-a-great-api-requires-great-technical-writing-2abab7f6b72e)。他们应该确保他们的产品的商业价值被目标受众清楚地捕捉到。

## 标准

一个常见的设计考虑是*[](https://en.wikipedia.org/wiki/Principle_of_least_astonishment)**的最小惊喜原则当设计重用熟悉的界面概念时，效果最好。通过用户界面(UI)，这允许最终用户做出成功的有根据的猜测，从而带来更好的用户体验(UX)。虽然 API 没有 UI，但是开发者仍然依赖于积累的经验来简化集成者必须的学习。这种开发者体验，或者“DX”应该是创建 API 设计时考虑的一部分。***

**应该使用通用的行业模式，并且在可能的情况下，数据应该符合标准，并且应该在文档中明确引用这些标准。例如，为什么要强迫消费者为您定制的日期和时间格式创建自己的解析呢？请改用 ISO8601，在文档中引用它，然后使用它。如果 API 设计利用了[schema.org](http://schema.org/)上的工作并正确使用了媒体类型，则加分。**

# **可能的**

**不同的整合会有不同的消费需求。有些可能能够按照设计消耗整个有效载荷。其他人，由于计算或带宽的限制，可能希望对可用资源有一个精确的了解。与潜在消费者合作，从一开始就建立利率控制是很重要的。**

## **可锻性**

**对返回集合的排序和分页的支持非常重要。应在文档中明确说明默认的退货金额，而不是整个集合的默认值，并且可以修改(在合理范围内—还应明确指出页面大小限制)。根据集合的大小，过滤可能很重要。根据需要，更高级的选项是允许选择性的参数检索。**

## **可缓存性**

**API 应该利用适当端点上可用的幂等性和安全性。服务通过设置响应头来增强缓存能力。这些标题至少应包括:**

*   **日期**
*   **缓存控制**
*   **期满**
*   **杂注**
*   **最后修改的**

**还可以使用 ETag 头来验证缓存表示的新鲜度，以及帮助有条件的读取和更新操作。它的值是表示版本的任意字符串，有时是底层对象的简单散列。**

**产品经理可能不理解这些标题如何工作背后的确切技术机制。但是，他们应该渴望尽可能好的客户体验。对许多人来说，这意味着敏捷的反应。一个很好的入门资源是 [Irakli Nadareishvili 的](https://twitter.com/inadarei)http 缓存介绍—How-to:RESTful 和超媒体 API 的 HTTP 缓存。**

# **包扎**

**如果这听起来很难管理，那是因为确实如此。作为一个 API 的产品经理，伴随着对一个普通产品的所有研究和测试，但是需要额外的技术敏锐度和开发人员的悟性。但是回报——更容易的集成、更高的开发人员满意度和更好的商业价值表达——是值得的。**

## **相关链接**

*   **[开发一个优秀的 API 需要优秀的技术写作](/capital-one-developers/developing-a-great-api-requires-great-technical-writing-2abab7f6b72e)**
*   **[API 产品所有权是 API 采用的关键](/capital-one-developers/api-product-ownership-is-key-for-api-adoption-6a12c64b2c83)**
*   **[为什么你的 API 需要编写器](/capital-one-developers/why-your-apis-need-writers-24081d8f59b)**
*   **[视频—与 API 布道者 Kin Lane 的对话](/capital-one-developers/video-a-conversation-with-api-evangelist-kin-lane-311726984c8f)**

**[![](img/c6c5bb1f3967049ba012aebf5757e08d.png)](https://medium.com/capital-one-tech/api/home)**

***披露声明:这些观点是作者的观点。除非本帖中另有说明，否则 Capital One 不属于所提及的任何公司，也不被其认可。使用或展示的所有商标和其他知识产权都是其各自所有者的所有权。本文是 2018 年。***