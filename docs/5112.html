<html>
<head>
<title>Customizing Java Actions | Mendix</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">定制Java操作| Mendix</h1>
<blockquote>原文：<a href="https://medium.com/mendix/customizing-java-actions-mendix-25ec5cc14f24?source=collection_archive---------1-----------------------#2021-05-04">https://medium.com/mendix/customizing-java-actions-mendix-25ec5cc14f24?source=collection_archive---------1-----------------------#2021-05-04</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/577da60400afccea7c85264a919fb672.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*05M_yaHHr-SxjRm-rvzO4Q.png"/></div></div></figure><div class=""/><h1 id="2799" class="jc jd if bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz dt translated">对于Java爱好者来说，在Mendix现有功能的基础上添加Java的能力就像蛋糕上的樱桃。另一方面，能够定制现有代码对于初学者或者像我这样不太熟悉Java的人来说确实是一件幸事！</h1><p id="c3a9" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated"><a class="ae kx" href="https://marketplace.mendix.com/link/component/170" rel="noopener ugc nofollow" target="_blank"> Community Commons函数库</a>模块为我们的应用程序提供了许多可重用的Java方法，可以从微流或其他自定义Java动作中调用这些方法。大多数是通用的，少数是特定的，但是我们可以根据自己的需要调整它们。从这里开始都是Java，但是不要担心，我们已经得到它了！</p><h2 id="171d" class="ky jd if bd je kz la lb ji lc ld le jm kk lf lg jq ko lh li ju ks lj lk jy ll dt translated"><strong class="ak">用例</strong></h2><p id="5cfa" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">我将通过我遇到的一个例子来引导您定制java动作。</p><p id="a591" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">当时的情况是根据另一个对象返回的“字符串”类型属性来设置“枚举”类型的PrevStatus属性的值。</p><div class="lr ls lt lu fq ab cb"><figure class="lv hw lw lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><img src="../Images/87b018200ab9bf91cc11c5688f53e1ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:942/format:webp/1*vEBZpTAqtU323enbeijHDw.png"/></div></figure><figure class="lv hw mb lx ly lz ma paragraph-image"><img src="../Images/8176babf481380aeb663f9b40a340b90.png" data-original-src="https://miro.medium.com/v2/resize:fit:878/format:webp/1*ciOI_6Sp_xwo4C2yMzVb0w.jpeg"/><figcaption class="mc md fg fe ff me mf bd b be z ek mg di mh mi">Case File Entity and Enum used for PrevStatus</figcaption></figure></div><h2 id="b310" class="ky jd if bd je kz la lb ji lc ld le jm kk lf lg jq ko lh li ju ks lj lk jy ll dt translated"><strong class="ak">接近</strong></h2><ol class=""><li id="fdb9" class="mj mk if bd b kc kd kg kh kk ml ko mm ks mn kw mo mp mq mr dt translated">其中一种方法是通过多个决策活动使用“If-Else ”,根据匹配的字符串分配枚举值。然而，有许多状态需要检查，这个解决方案并不令人满意，不足以继续完成所有困难的工作。</li></ol><div class="lr ls lt lu fq ab cb"><figure class="lv hw ms lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><img src="../Images/c12038f9a5d637192a79f3f7721fa710.png" data-original-src="https://miro.medium.com/v2/resize:fit:916/format:webp/1*h4_jbnv8X_BUq1HVni600g.png"/></div></figure><figure class="lv hw mt lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><img src="../Images/51972b22abe8238ddfb3dbfef988f3ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1086/format:webp/1*jRRmV-wPy8aVcmYDZYw29Q.png"/></div><figcaption class="mc md fg fe ff me mf bd b be z ek mu di mv mi">Left : Main microflow used to set Case to PrevStatus, Right : Submicroflow showing ‘If-Else’ approach to decide Prevstatus</figcaption></figure></div><p id="403f" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">2.因此，第二个想法出现了:更聪明地工作，寻找一个我们可以重用或改编的java动作。在Community commons(从Marketplace下载)中有一个名为“EnumerationFromString”的动作。尽管我们使用此操作时遇到了问题，因为默认情况下，它被预先配置为返回/检查LogLevel的枚举(community commons模块中的现有枚举)。虽然使用action感觉是正确的方法，但是我们决定根据我们想要的枚举类型调整java代码中的值。</p><figure class="lr ls lt lu fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mw"><img src="../Images/6dce5a2e86ec59d3ed0aa6627062ee68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KEVX4H5BL_VBX3sHpw_smw.png"/></div></div><figcaption class="mc md fg fe ff me mf bd b be z ek"><a class="ae kx" href="https://bit.ly/MXW21" rel="noopener ugc nofollow" target="_blank">https://bit.ly/MXW21</a></figcaption></figure><h2 id="fc54" class="ky jd if bd je kz la lb ji lc ld le jm kk lf lg jq ko lh li ju ks lj lk jy ll dt translated"><strong class="ak">那么，让我们开始摆弄Java吧</strong></h2><p id="b144" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">这里看一下为设置CaseFile对象的PrevStatus而创建的微流。第一个活动返回用于PrevStatus的字符串值，接下来是名为“EnumerationFromString”的Java操作，其中从第一个活动返回的值作为参数传递，最后是设置CaseFile属性的change对象活动，其中PrevStatus的值被设置为从Java操作返回的枚举值。</p><figure class="lr ls lt lu fq hw fe ff paragraph-image"><div class="fe ff mx"><img src="../Images/87618bf521c6ba9302b2d2ac5434154c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1378/format:webp/1*QpmvKt3d5h8U9FTFG3skRg.png"/></div><figcaption class="mc md fg fe ff me mf bd b be z ek">The Java action takes a string as Parameter and returns Enum of type LogLevel</figcaption></figure><p id="43f7" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated"><strong class="bd my">第一步:</strong>在Mendix中打开“EnumerationFromString”Java动作，将返回类型改为你想要的枚举类型。</p><div class="lr ls lt lu fq ab cb"><figure class="lv hw mz lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><img src="../Images/97f860779405c30d7bfb31ff58e13aad.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/format:webp/1*lvqYECTNTkpoVQ1iNqQBwA.png"/></div></figure><figure class="lv hw na lx ly lz ma paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><img src="../Images/2038778e097a81d03bc991e6c3b75056.png" data-original-src="https://miro.medium.com/v2/resize:fit:1006/format:webp/1*JnNddT1qBXufiPKkChzbLg.png"/></div><figcaption class="mc md fg fe ff me mf bd b be z ek nb di nc mi">Adjusting return value from LogLevel to CaseStatus Enumeration</figcaption></figure></div><p id="1d00" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated"><strong class="bd my">步骤2: </strong>导航到项目目录中该操作的Java文件。</p><figure class="lr ls lt lu fq hw fe ff paragraph-image"><div class="fe ff nd"><img src="../Images/a93334454b94833bd9b22f37d977b288.png" data-original-src="https://miro.medium.com/v2/resize:fit:840/format:webp/1*2ysgM3cn1Pi0BxSplc2a6w.png"/></div><figcaption class="mc md fg fe ff me mf bd b be z ek">Java action Path</figcaption></figure><p id="c252" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated"><strong class="bd my">第三步:</strong>打开java文件:大部分java文件都是在<a class="ae kx" href="https://www.eclipse.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Eclipse </a>中编辑、编译和调试的，但是如果你作为初学者不习惯，你可以在任何你习惯的文件编辑器中打开这个文件，如果有错误，它们会在运行应用程序时显示出来。(在本例中，文件是在<a class="ae kx" href="https://notepad-plus-plus.org/" rel="noopener ugc nofollow" target="_blank">记事本++中打开的</a>)</p><p id="44f4" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">下面是Java操作背后的代码:</p><figure class="lr ls lt lu fq hw fe ff paragraph-image"><div class="fe ff ne"><img src="../Images/b10f9c317ba27455300717b74e2a4ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/format:webp/1*DVCJI_9zw_wb-WgsMuN95Q.png"/></div><figcaption class="mc md fg fe ff me mf bd b be z ek">Java File of “EnumerationFromString” Java action</figcaption></figure><p id="2575" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">在java文件中，只有写在<strong class="bd my">开始-结束代码块</strong>和<strong class="bd my">导入</strong>之间的代码可以被定制，因此将被执行，其他所有代码将在运行时被覆盖。</p><p id="ca0e" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated"><strong class="bd my">步骤4 </strong>:正如上图中Begin Code下的注释所提到的，我们可以用我们想要的枚举替换默认的LogLevel。很酷，对吧？</p><p id="dc20" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">要为我们的枚举配置它，我们只需要做一些调整:</p><p id="882b" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">a)在顶部的导入部分中，将"<strong class="bd my">community commons . proxy . log level</strong>替换为"<strong class="bd my">main . proxy . enum _ case status</strong>"(module folder . proxy . enum name)</p><p id="2ae0" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">通过导航到javasource文件夹中模块的文件夹路径，可以找到您的枚举，如下所示:</p><figure class="lr ls lt lu fq hw fe ff paragraph-image"><div class="fe ff nf"><img src="../Images/e66bcfd39df0f2601fe5118ec0696856.png" data-original-src="https://miro.medium.com/v2/resize:fit:1266/format:webp/1*FlVaqtyHehlDE19pE_zK1w.png"/></div><figcaption class="mc md fg fe ff me mf bd b be z ek">Path to Enumeration</figcaption></figure><p id="bf42" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">b)下一步也是最后一步是用我们刚刚在上面添加的枚举名替换开始和结束代码之间所有出现的'<strong class="bd my"> LogLevel </strong></p><figure class="lr ls lt lu fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff ng"><img src="../Images/20ad5a7db97a74d6fb4a2bd7f76c4f3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ysId_2Mj3uH-O9Y7WfFJcw.png"/></div></div><figcaption class="mc md fg fe ff me mf bd b be z ek">Customized Java File of EnumerationFromString action</figcaption></figure><p id="c3c7" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">瞧啊。我们完了</p><p id="2651" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">保存文件并在Studio Pro中启动/运行应用程序，以确保代码编译并检查所需的结果。</p><h2 id="cc88" class="ky jd if bd je kz la lb ji lc ld le jm kk lf lg jq ko lh li ju ks lj lk jy ll dt translated"><strong class="ak">洞察代码</strong></h2><p id="1b22" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">a)添加导入是为了让Java操作可以访问我们的枚举。</p><p id="2ab0" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">b)存在于开始和结束代码之间的结果变量存储从接受2个参数的函数“enumFromString”返回的结果:</p><ul class=""><li id="cba4" class="mj mk if bd b kc lm kg ln kk nh ko ni ks nj kw nk mp mq mr dt translated">枚举类(因为Enum是一个类，所以传递EnumName.class)</li><li id="11da" class="mj mk if bd b kc nl kg nm kk nn ko no ks np kw nk mp mq mr dt translated">以及需要转换的字符串。</li></ul><p id="e79c" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">该函数是在一个名为‘Misc’的现有community commons java文件中预定义的(这就是community commons。杂项在顶部导入)。最后，枚举值的名称作为结果返回。</p><h2 id="6580" class="ky jd if bd je kz la lb ji lc ld le jm kk lf lg jq ko lh li ju ks lj lk jy ll dt translated"><strong class="ak">结论</strong></h2><p id="6c02" class="pw-post-body-paragraph ka kb if bd b kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw hn dt translated">如果我们能试着更好地理解Java，它会成为我们的朋友。玩笑归玩笑，我希望这能让你对如何在Mendix中定制Java动作有所了解。记住一些事情也有助于您在可行的情况下修改其他java动作，或者甚至通过从现有队列中提取一些队列来创建自己的动作。</p><p id="43af" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">一小步最终会让我们爬上高山，如果一个人和爪哇成为朋友，谁知道旅程会把我们带到哪里。</p><p id="ae16" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated"><em class="nq">注意:</em> <strong class="bd my"> <em class="nq"> </em> </strong> <em class="nq">这是我如何处理特定场景的一个例子，可能有多种其他方式来实现这一点，但消费和定制Java动作对我来说是一种学习。</em></p></div><div class="ab cl nr ns hb nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="hn ho hp hq hr"><h2 id="f925" class="ky jd if bd je kz la lb ji lc ld le jm kk lf lg jq ko lh li ju ks lj lk jy ll dt translated">阅读更多</h2><div class="ht hu fm fo hv ny"><a href="https://bit.ly/MXW21" rel="noopener  ugc nofollow" target="_blank"><div class="nz ab ej"><div class="oa ab ob cl cj oc"><h2 class="bd ig fv z el od eo ep oe er et ie dt translated">Mendix World 2021 |召集您的应用开发团队2021年9月7日至9日</h2><div class="of l"><h3 class="bd b fv z el od eo ep oe er et ek translated">好像你需要说服…在一个全球制造商社区，他们想通过探索什么来相互学习…</h3></div><div class="og l"><p class="bd b gc z el od eo ep oe er et ek translated">bit.ly</p></div></div><div class="oh l"><div class="oi l oj ok ol oh om ib ny"/></div></div></a></div><ul class=""><li id="f235" class="mj mk if bd b kc lm kg ln kk nh ko ni ks nj kw nk mp mq mr dt translated"><a class="ae kx" href="https://docs.mendix.com/appstore/modules/community-commons-function-library" rel="noopener ugc nofollow" target="_blank">https://docs . mendix . com/app store/modules/community-commons-function-library</a></li><li id="dd73" class="mj mk if bd b kc nl kg nm kk nn ko no ks np kw nk mp mq mr dt translated"><a class="ae kx" href="https://docs.mendix.com/refguide/java-actions" rel="noopener ugc nofollow" target="_blank">https://docs.mendix.com/refguide/java-actions</a></li><li id="f942" class="mj mk if bd b kc nl kg nm kk nn ko no ks np kw nk mp mq mr dt translated"><a class="ae kx" href="https://docs.mendix.com/howto/logic-business-rules/extending-your-application-with-custom-java" rel="noopener ugc nofollow" target="_blank">https://docs.mendix.com/refguide/java-programming</a></li></ul></div><div class="ab cl nr ns hb nt" role="separator"><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw nx"/><span class="nu bw bk nv nw"/></div><div class="hn ho hp hq hr"><p id="961e" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated"><em class="nq">来自发布者- </em></p><p id="db7c" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated"><em class="nq">如果你喜欢这篇文章，你可以在我们的</em> <a class="ae kx" href="https://medium.com/mendix" rel="noopener"> <em class="nq">媒体页面</em> </a> <em class="nq">或者我们自己的</em> <a class="ae kx" href="https://developers.mendix.com/community-blog/" rel="noopener ugc nofollow" target="_blank"> <em class="nq">社区博客网站</em> </a> <em class="nq">找到更多喜欢的。</em></p><p id="159e" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated"><em class="nq">希望入门的创客，可以注册一个</em> <a class="ae kx" href="https://signup.mendix.com/link/signup/?source=direct" rel="noopener ugc nofollow" target="_blank"> <em class="nq">免费账号</em> </a> <em class="nq">，通过我们的</em> <a class="ae kx" href="https://academy.mendix.com/link/home" rel="noopener ugc nofollow" target="_blank"> <em class="nq">学苑</em> </a> <em class="nq">获得即时学习。</em></p><p id="f045" class="pw-post-body-paragraph ka kb if bd b kc lm ke kf kg ln ki kj kk lo km kn ko lp kq kr ks lq ku kv kw hn dt translated">有兴趣更多地参与我们的社区吗？你可以加入我们的 <a class="ae kx" href="https://join.slack.com/t/mendixcommunity/shared_invite/zt-hwhwkcxu-~59ywyjqHlUHXmrw5heqpQ" rel="noopener ugc nofollow" target="_blank"> <em class="nq"> Slack社区频道</em> </a> <em class="nq">或者想更多参与的人，看看加入我们的</em> <a class="ae kx" href="https://developers.mendix.com/meetups/#meetupsNearYou" rel="noopener ugc nofollow" target="_blank"> <em class="nq">遇见ups </em> </a> <em class="nq">。</em></p></div></div>    
</body>
</html>