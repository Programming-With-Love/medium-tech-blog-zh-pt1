<html>
<head>
<title>How to Automate Medium with NodeJS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">å¦‚ä½•ç”¨NodeJSè‡ªåŠ¨åŒ–åª’ä½“</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://medium.com/quick-code/how-to-automate-medium-with-nodejs-73c7ceed74bc?source=collection_archive---------1-----------------------#2020-12-21">https://medium.com/quick-code/how-to-automate-medium-with-nodejs-73c7ceed74bc?source=collection_archive---------1-----------------------#2020-12-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="eed6" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated"><a class="ae iw" href="https://avendesta.medium.com/puppeteer-is-awesome-96fe4266534f" rel="noopener">è¿™ä¸ª</a>æ•…äº‹æ¯5åˆ†é’Ÿè‡ªåŠ¨æ›´æ–°ä¸€æ¬¡</h2></div><p id="6ffa" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated"><a class="ae iw" href="https://avendesta.medium.com/puppeteer-is-awesome-96fe4266534f" rel="noopener">è¯¥</a>é¡µé¢æ˜¾ç¤ºçº½çº¦å¸‚çš„å½“å‰æ—¥æœŸå’Œæ—¶é—´ã€‚é¡µé¢ä¼šæ¯äº”åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡ï¼Œæ°¸è¿œæ›´æ–°(å½“ç„¶ï¼Œé™¤éMediumå‡ºäº†é—®é¢˜ï¼ğŸ˜‚).æˆ‘è®¾æ³•ç”¨<strong class="iz hi">æœ¨å¶å¸ˆ</strong>åšåˆ°äº†ã€‚</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es jt"><img src="../Images/322c0012df6ccafe4a2f31760a340204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-gIJRwHceESotpMqvIDncQ.jpeg"/></div></div></figure><p id="674a" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">P <a class="ae iw" href="https://www.npmjs.com/package/puppeteer" rel="noopener ugc nofollow" target="_blank"> uppeteer </a>æ˜¯Googleå¼€å‘çš„ä¸€ä¸ªå¼€æºåº“ï¼Œæ—¨åœ¨è‡ªåŠ¨åŒ–å’Œç®€åŒ–å‰ç«¯æµ‹è¯•å’Œå¼€å‘ã€‚åŸºæœ¬ä¸Šï¼Œä¸€ä¸ªäººå¯ä»¥åœ¨æµè§ˆå™¨ä¸Šåšçš„ä»»ä½•äº‹æƒ…éƒ½å¯ä»¥ç”¨æœ¨å¶å¸ˆè‡ªåŠ¨åŒ–ã€‚</p><p id="5e7e" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">æœ¨å¶å¸ˆå¯ä»¥è‡ªåŠ¨æ‰§è¡Œçš„ä¸€äº›æ“ä½œæœ‰:</p><ul class=""><li id="11b5" class="kf kg hh iz b ja jb jd je jg kh jk ki jo kj js kk kl km kn bi translated">ç”Ÿæˆé¡µé¢çš„æˆªå›¾å’Œpdfã€‚</li><li id="cda1" class="kf kg hh iz b ja ko jd kp jg kq jk kr jo ks js kk kl km kn bi translated">è‡ªåŠ¨åŒ–è¡¨å•æäº¤ã€UIæµ‹è¯•ã€é”®ç›˜è¾“å…¥</li><li id="acb1" class="kf kg hh iz b ja ko jd kp jg kq jk kr jo ks js kk kl km kn bi translated">æ›´æ”¹é¡µé¢ä¸­çš„HTMLå…ƒç´ </li><li id="dff7" class="kf kg hh iz b ja ko jd kp jg kq jk kr jo ks js kk kl km kn bi translated">åˆ›å»ºä¸€ä¸ªæœ€æ–°çš„è‡ªåŠ¨åŒ–æµ‹è¯•ç¯å¢ƒã€‚ä½¿ç”¨æœ€æ–°çš„JavaScriptå’Œæµè§ˆå™¨åŠŸèƒ½ï¼Œåœ¨æœ€æ–°ç‰ˆæœ¬çš„Chromeä¸­ç›´æ¥è¿è¡Œæµ‹è¯•ã€‚</li></ul><p id="1997" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated"><em class="kt">è¿˜æœ‰æ›´å¤š</em>ã€‚</p><p id="0ac1" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">å¸Œæœ›ï¼Œè¿™æ˜¯è¶³å¤Ÿçš„ä»‹ç»ã€‚ç°åœ¨è®©æˆ‘ä»¬æ·±å…¥æŠ€æœ¯å±‚é¢ã€‚</p><h1 id="24c9" class="ku kv hh bd kw kx ky kz la lb lc ld le in lf io lg iq lh ir li it lj iu lk ll bi translated">1.åˆå§‹è®¾ç½®</h1><p id="de10" class="pw-post-body-paragraph ix iy hh iz b ja lm ii jc jd ln il jf jg lo ji jj jk lp jm jn jo lq jq jr js ha bi translated">ä¸ä»»ä½•å…¶ä»–èŠ‚ç‚¹åŒ…ä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦ç¡®ä¿å·²ç»å®‰è£…äº†<a class="ae iw" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> nodejs </a>å’Œ<a class="ae iw" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> npm </a>ã€‚å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯Linuxæˆ–macOSï¼Œä½¿ç”¨è¿™ä¸¤ä¸ªç®€å•çš„å‘½ä»¤æ¥æ£€æŸ¥æ˜¯å¦ä¸€åˆ‡å°±ç»ªã€‚</p><pre class="ju jv jw jx fd lr ls lt lu aw lv bi"><span id="13ed" class="lw kv hh ls b fi lx ly l lz ma">&gt; node --version<br/>&gt; npm --version</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mb"><img src="../Images/782ece2f4cf242ef2b7c471b2fcfa1a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nJi6tbjlJZ3WGOfCvYwWPQ.png"/></div></div></figure><p id="d862" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">æ¥ä¸‹æ¥ï¼Œåˆ›å»ºä¸€ä¸ªé¡¹ç›®æ–‡ä»¶å¤¹/ç›®å½•ï¼Œå¹¶åˆå§‹åŒ–èŠ‚ç‚¹ç¯å¢ƒã€‚ç„¶åç”¨npmå®‰è£…<a class="ae iw" href="https://www.npmjs.com/package/puppeteer" rel="noopener ugc nofollow" target="_blank">æ“çºµå™¨</a>ã€‚</p><pre class="ju jv jw jx fd lr ls lt lu aw lv bi"><span id="d8df" class="lw kv hh ls b fi lx ly l lz ma">&gt; mkdir medium-automate-proj &amp;&amp; cd medium-automate-proj<br/>&gt; npm init --yes<br/>&gt; npm install puppeteer</span></pre><p id="8ef8" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">æœ€åï¼Œç¡®ä¿ä¸€åˆ‡éƒ½æ­£å¸¸è¿è¡Œã€‚è®©æˆ‘ä»¬è¯•ç€è¿è¡Œä¸€ä¸ªæ¥è‡ªæœ¨å¶å¸ˆæ–‡æ¡£çš„æ ·æœ¬è„šæœ¬ã€‚è„šæœ¬è½¬åˆ°<code class="du mc md me ls b"><a class="ae iw" href="http://www.example.com%60/" rel="noopener ugc nofollow" target="_blank">www.medium.com</a></code>ï¼Œç„¶åå¯¹é¡µé¢è¿›è¡Œæˆªå›¾å¹¶ä¿å­˜ä¸º<code class="du mc md me ls b">medium.png</code>ã€‚</p><p id="7c8d" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated"><em class="kt">æ–‡ä»¶:index.js </em></p><pre class="ju jv jw jx fd lr ls lt lu aw lv bi"><span id="6857" class="lw kv hh ls b fi lx ly l lz ma">const puppeteer <strong class="ls hi">=</strong> require('puppeteer');</span><span id="80b2" class="lw kv hh ls b fi mf ly l lz ma">(async () =&gt; {<br/>const browser <strong class="ls hi">=</strong> <strong class="ls hi">await </strong>puppeteer.launch({headless:false});<br/>const page <strong class="ls hi">=</strong> <strong class="ls hi">await</strong> browser.newPage();<br/><strong class="ls hi">await</strong> page.goto('https://medium.com');<br/><strong class="ls hi">await</strong> page.screenshot({path<strong class="ls hi">:</strong> 'medium.png'});<br/><strong class="ls hi">await</strong> browser.close();<br/>})();</span></pre><p id="60e1" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated"><em class="kt">è¾“å‡º:medium.png</em></p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mg"><img src="../Images/e1dd0d5b06d01468ca92e51deecb7f33.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gbEDDkgc8dv41tjgOu_aIA.png"/></div></div></figure><h1 id="764f" class="ku kv hh bd kw kx ky kz la lb lc ld le in lf io lg iq lh ir li it lj iu lk ll bi translated">2.è‡ªåŠ¨ç™»å½•åˆ°ä»‹è´¨</h1><p id="1c1d" class="pw-post-body-paragraph ix iy hh iz b ja lm ii jc jd ln il jf jg lo ji jj jk lp jm jn jo lq jq jr js ha bi translated">ä¸ç™»å½•æ‚¨çš„åª’ä½“å¸æˆ·ï¼Œæ‚¨æ— æ³•ç¼–è¾‘å·²å‘å¸ƒçš„æ–‡ç« ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è‡ªåŠ¨åŒ–ç™»å½•è¿‡ç¨‹å‘¢ï¼Ÿ</p><p id="d201" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">ä¸­æä¾›äº†ä¸åŒçš„ç™»å½•æ–¹å¼ã€‚å‡ºäºæˆ‘ä»¬çš„ç›®çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨â€œ<em class="kt">é€šè¿‡ç”µå­é‚®ä»¶</em>ç™»å½•ã€‚</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div class="er es mh"><img src="../Images/09b409e08d16fff1df477d0e66ad1868.png" data-original-src="https://miro.medium.com/v2/resize:fit:1356/format:webp/1*b4ymY1JV3FsqnmYRihUReQ.png"/></div></figure><p id="b7e7" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">è¾“å…¥æ‚¨çš„ç”µå­é‚®ä»¶åœ°å€åï¼ŒMediumä¼šç»™æ‚¨å‘é€ä¸€ä¸ªæŒ‡å‘æ‚¨çš„ç”µå­é‚®ä»¶çš„ç‰¹æ®Šé“¾æ¥ã€‚ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨æ­¤é“¾æ¥ç™»å½•æ‚¨çš„å¸æˆ·ã€‚è¯·æ³¨æ„ï¼Œæ­¤é“¾æ¥åªèƒ½ä½¿ç”¨<strong class="iz hi">ä¸€æ¬¡</strong>ï¼Œå¦‚æœ2å°æ—¶æœªä½¿ç”¨ï¼Œå°†ä¼šè¿‡æœŸã€‚</p><p id="2a1c" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">æ‚¨çš„ä»¤ç‰Œçœ‹èµ·æ¥åƒè¿™æ ·</p><pre class="ju jv jw jx fd lr ls lt lu aw lv bi"><span id="ecb8" class="lw kv hh ls b fi lx ly l lz ma"><em class="kt">https://medium.com/m/callback/email?token=1a2b3c4d5678&amp;operation=login&amp;state=medium</em></span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mi"><img src="../Images/a8ffa88d0527b6e903767c408d875aff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2tJYyN8l-HckJKsPhdFxzQ.png"/></div></div></figure><p id="3ec2" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">åœ¨è¿™ä¸ªé˜¶æ®µï¼Œç†è§£ä¸‹é¢çš„ä»£ç åº”è¯¥ä¸éš¾</p><pre class="ju jv jw jx fd lr ls lt lu aw lv bi"><span id="9a72" class="lw kv hh ls b fi lx ly l lz ma">const puppeteer = require('puppeteer');</span><span id="d594" class="lw kv hh ls b fi mf ly l lz ma">(async () =&gt; {<br/>const browser = await puppeteer.launch({headless:false});<br/>const page = await browser.newPage();</span><span id="1ce4" class="lw kv hh ls b fi mf ly l lz ma">// login_link is the link from email<br/>const login_link = "YOUR LOGIN LINK";<br/>await page.goto(login_link);<br/>await page.screenshot({path: 'medium.png'});<br/>await browser.close();<br/>})();</span></pre><p id="42da" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">ä¸Šé¢çš„ä»£ç åªæ˜¯è½¬åˆ°<code class="du mc md me ls b">www.medium.com</code>å¹¶æˆªå›¾ä¿å­˜ä¸º<code class="du mc md me ls b">medium.png</code></p><h1 id="fdf3" class="ku kv hh bd kw kx ky kz la lb lc ld le in lf io lg iq lh ir li it lj iu lk ll bi translated">3.ç¼–è¾‘å·²å‘å¸ƒçš„æ–‡ç« </h1><p id="832a" class="pw-post-body-paragraph ix iy hh iz b ja lm ii jc jd ln il jf jg lo ji jj jk lp jm jn jo lq jq jr js ha bi translated">ä¸æˆªå›¾äº†ï¼Œæ¥åšç®€å•çš„è‡ªåŠ¨åŒ–ç¼–è¾‘å§ã€‚ä¸ºäº†åšåˆ°è¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬é¦–å…ˆé€‰æ‹©ä¸€ä¸ªå·²å‡ºç‰ˆçš„æ•…äº‹ã€‚ç„¶åå°è¯•æ‰‹åŠ¨ç¼–è¾‘ã€‚</p><p id="eaff" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">å½“æ‚¨å°è¯•ç¼–è¾‘ä¸€ä¸ªæ•…äº‹æ—¶ï¼ŒMediumä¼šå°†æ‚¨é‡å®šå‘åˆ°ç±»ä¼¼â€œhttps://Medium . com/p/96fe 4266534 f/editâ€çš„URLã€‚è¿™ä¸ªURLå®é™…ä¸Šæ˜¯æˆ‘ä¸ºé‚£ä¸ªæ•…äº‹ç¼–è¾‘é¡µé¢ã€‚</p><p id="9f79" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">ç™»å½•åˆ°æˆ‘ä»¬çš„åª’ä½“å¸æˆ·åï¼Œæˆ‘ä»¬å¸Œæœ›ä»£ç å°†æˆ‘ä»¬é‡å®šå‘åˆ°ç¼–è¾‘é¡µé¢ã€‚æ‰€ä»¥è®©æˆ‘ä»¬æŠŠè¿™ä¸¤è¡Œä»£ç æ·»åŠ åˆ°æˆ‘ä»¬çš„ä»£ç ä¸­</p><pre class="ju jv jw jx fd lr ls lt lu aw lv bi"><span id="34a2" class="lw kv hh ls b fi lx ly l lz ma">const edit_page = "https://medium.com/p/96fe4266534f/edit";<br/>await page.goto(edit_page);</span></pre><p id="1a74" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">åœ¨æ‚¨çš„ç¼–è¾‘é¡µé¢ä¸Šï¼Œå‡è®¾æ‚¨æƒ³è¦ç¼–è¾‘æ•…äº‹ä¸­çš„ä¸€è¡Œã€‚ä½ æ˜¯æ€ä¹ˆåšåˆ°çš„ï¼Ÿ</p><p id="479c" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">æœ¨å¶å¸ˆä¸ºæˆ‘ä»¬æä¾›äº†<code class="du mc md me ls b">$eval()</code>åŠŸèƒ½æ¥ç¼–è¾‘é¡µé¢ä¸Šçš„å…ƒç´ ã€‚è¯¥å‡½æ•°æ¥å—ä¸¤ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªæ˜¯æˆ‘ä»¬HTMLé¡µé¢ä¸Šçš„ä¸€ä¸ªå…ƒç´ ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªå‘Šè¯‰Puppeteerå¦‚ä½•å¤„ç†è¯¥å…ƒç´ çš„å‡½æ•°ã€‚</p><p id="1a42" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">ä¾‹å¦‚:</p><pre class="ju jv jw jx fd lr ls lt lu aw lv bi"><span id="3c2a" class="lw kv hh ls b fi lx ly l lz ma">await page.waitForSelector("p[name='a46a']");<br/>await page.$eval("p[name='a46a']", e =&gt; e.innerHTML = "WOW");</span></pre><p id="756e" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">è¿™æ®µä»£ç å°†æœç´¢ä¸€ä¸ª<code class="du mc md me ls b">&lt;p name='a46a' ...&gt;</code>(å¹¶ç­‰å¾…æ ‡ç­¾è¢«åŠ è½½)ï¼Œç„¶åå°†æ ‡ç­¾ä¸­çš„æ–‡æœ¬æ”¹ä¸ºâ€œWOWâ€ã€‚</p><p id="482f" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">å³<code class="du mc md me ls b">&lt;p name='a46a'...&gt;WOW&lt;/p&gt;</code></p><p id="8ab2" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">æ³¨æ„<code class="du mc md me ls b">name='a46a'</code>å¯¹ä½ æ¥è¯´ä¸ä¸€æ ·ã€‚ä½ å¿…é¡»æ£€æŸ¥ä½ çš„æ•…äº‹ï¼Œæ‰¾å‡ºä½ æ ‡ç­¾çš„åå­—ã€‚</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mj"><img src="../Images/01b2f6124aefb689d76bcabd2af3c3d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6hqiu7zY2AezervWQM88Ug.png"/></div></div></figure><p id="08c8" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">ç°åœ¨æˆ‘ä»¬çš„ä»£ç æ˜¯:</p><pre class="ju jv jw jx fd lr ls lt lu aw lv bi"><span id="b398" class="lw kv hh ls b fi lx ly l lz ma">const puppeteer = require('puppeteer');</span><span id="3956" class="lw kv hh ls b fi mf ly l lz ma">(async () =&gt; {<br/>const browser = await puppeteer.launch({headless:true});<br/>const page = await browser.newPage();</span><span id="57fb" class="lw kv hh ls b fi mf ly l lz ma">// login_link is the link from email<br/>const login_link = "YOUR_LOGIN_LINK_FROM_EMAIL";<br/>await page.goto(login_link);<br/>const edit_page = "https://medium.com/p/96fe4266534f/edit";<br/>await page.goto(edit_page);</span><span id="dd0b" class="lw kv hh ls b fi mf ly l lz ma">await page.waitForSelector(p[name="a46a"]);<br/>await page.$eval("p[name='a46a']", e =&gt;{<br/>   e.innerHTML = "WOW";<br/>})</span><span id="4537" class="lw kv hh ls b fi mf ly l lz ma">//await page.screenshot({path: 'medium.png'});<br/>await browser.close();<br/>})();</span></pre><p id="5bb9" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">ä½†æ˜¯æˆ‘ä»¬æƒ³è¦çš„ä¸ä»…ä»…æ˜¯æŠŠæ–‡æœ¬æ”¹æˆ'<em class="kt"> WOW </em>'ã€‚ä¹Ÿè®¸æˆ‘ä»¬æƒ³æ˜¾ç¤ºå½“å‰çš„æ—¶é—´å’Œæ—¥æœŸã€‚å¥½äº†ï¼Œä¸è¦å†è¯´äº†ã€‚è®©æˆ‘ä»¬ä½¿ç”¨<code class="du mc md me ls b">new Date</code>å¯¹è±¡ã€‚</p><pre class="ju jv jw jx fd lr ls lt lu aw lv bi"><span id="9681" class="lw kv hh ls b fi lx ly l lz ma">const puppeteer = require('puppeteer');</span><span id="5f1c" class="lw kv hh ls b fi mf ly l lz ma">(async () =&gt; {<br/>const browser = await puppeteer.launch({headless:true});<br/>const page = await browser.newPage();</span><span id="e9ee" class="lw kv hh ls b fi mf ly l lz ma">// login_link is the link from email<br/>const login_link = "YOUR_LOGIN_LINK_FROM_EMAIL";<br/>await page.goto(login_link);<br/>const edit_page = "https://medium.com/p/YOUR_STORY_ID/edit";<br/>await page.goto(edit_page);</span><span id="defd" class="lw kv hh ls b fi mf ly l lz ma">await page.waitForSelector(p[name="a46a"]);<br/>await page.$eval("p[name='a46a']", e =&gt;{<br/>   e.innerHTML = (new Date()).toLocaleString('en-US');<br/>})</span><span id="cf7a" class="lw kv hh ls b fi mf ly l lz ma">//await page.screenshot({path: 'medium.png'});<br/>await browser.close();<br/>})();</span></pre><h1 id="8d69" class="ku kv hh bd kw kx ky kz la lb lc ld le in lf io lg iq lh ir li it lj iu lk ll bi translated">4.å‘å¸ƒç¼–è¾‘è¿‡çš„æ•…äº‹</h1><p id="fd26" class="pw-post-body-paragraph ix iy hh iz b ja lm ii jc jd ln il jf jg lo ji jj jk lp jm jn jo lq jq jr js ha bi translated">ç¼–è¾‘å®Œæ•…äº‹åï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°å‘å¸ƒæˆ‘ä»¬çš„æ•…äº‹ï¼Œä»¥ä½¿æ•ˆæœç”Ÿæ•ˆã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„<code class="du mc md me ls b">save and publish</code>æŒ‰é’®ã€‚æœ¨å¶å¸ˆä¸ºæˆ‘ä»¬æä¾›äº†<code class="du mc md me ls b">click</code>åŠŸèƒ½æ¥å®Œæˆä»»åŠ¡ã€‚è¯¥å‡½æ•°æ¥å—ä¸€ä¸ªå‚æ•°â€”è¦å•å‡»çš„HTMLå…ƒç´ (æŒ‰é’®)ã€‚</p><pre class="ju jv jw jx fd lr ls lt lu aw lv bi"><span id="e59d" class="lw kv hh ls b fi lx ly l lz ma">await page.click("button[data-action='republish']");</span></pre><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es mk"><img src="../Images/6d09a89f5d3160ec89df4c55dff3224f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mFKclI3rP33CB3WoFlsQkQ.png"/></div></div></figure><p id="b579" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">ä½†æ˜¯è¿™é‡Œæœ‰ä¸€ä¸ªè­¦å‘Šã€‚ç”¨æˆ·éœ€è¦ç­‰å¾…å‡ ç§’é’Ÿæ‰èƒ½ç‚¹å‡»<code class="du mc md me ls b">Save and publish</code>æŒ‰é’®ã€‚è¿™æ˜¯æˆ‘ä»¬ä»£ç çš„ç¼–è¾‘ã€‚</p><pre class="ju jv jw jx fd lr ls lt lu aw lv bi"><span id="3f79" class="lw kv hh ls b fi lx ly l lz ma">// wait 6000 miliseconds then click<br/>await page.waitFor(6000);<br/>await page.click('button[data-action="republish"]');</span></pre><h1 id="5641" class="ku kv hh bd kw kx ky kz la lb lc ld le in lf io lg iq lh ir li it lj iu lk ll bi translated">5.å‰è¿›çš„é“è·¯</h1><p id="c138" class="pw-post-body-paragraph ix iy hh iz b ja lm ii jc jd ln il jf jg lo ji jj jk lp jm jn jo lq jq jr js ha bi translated">æˆ‘ä»¬ç›®å‰çš„ä»£ç æ˜¯</p><figure class="ju jv jw jx fd jy er es paragraph-image"><div role="button" tabindex="0" class="jz ka di kb bf kc"><div class="er es ml"><img src="../Images/24004b6d3d90e225e3871ad6fc547877.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9fW80A2Vp3tOrvFd_y_8ug.png"/></div></div></figure><p id="e22b" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ã€‚</p><ul class=""><li id="766a" class="kf kg hh iz b ja jb jd je jg kh jk ki jo kj js kk kl km kn bi translated">é¦–å…ˆï¼Œ<code class="du mc md me ls b">login_link</code>åº”è¯¥åœ¨æ¯æ¬¡è¿è¡Œä»£ç æ—¶æ›´æ–°ã€‚</li><li id="20a2" class="kf kg hh iz b ja ko jd kp jg kq jk kr jo ks js kk kl km kn bi translated">å¦‚æœä¸å¸Œæœ›æ¯æ¬¡è¿è¡Œä»£ç æ—¶éƒ½å¯åŠ¨GUIæµè§ˆå™¨ï¼Œå¯ä»¥ç¼–è¾‘<code class="du mc md me ls b">headless</code>å±æ€§ã€‚<code class="du mc md me ls b">{headless:true}</code>å°†é¿å…å¯åŠ¨GUI (Chromium-browser ),ä¸€åˆ‡éƒ½å°†åœ¨å¹•åå®Œæˆã€‚</li><li id="0217" class="kf kg hh iz b ja ko jd kp jg kq jk kr jo ks js kk kl km kn bi translated">æ‚¨çš„ä»£ç åªæ›´æ–°ä¸€æ¬¡æ•…äº‹ã€‚ä½†æ˜¯ä½ å¯ä»¥ç”¨<code class="du mc md me ls b">setInterval.</code>æ¯åˆ†é’Ÿæˆ–æ¯å°æ—¶æ›´æ–°ä¸€æ¬¡</li></ul><p id="4e6f" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi mm translated"><span class="l mn mo mp bm mq mr ms mt mu di">åˆ°</span>æ€»ç»“ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä½¿ç”¨Puppeteerè‡ªåŠ¨ç¼–è¾‘ä¸€ç¯‡ä¸­å‹æ–‡ç« ï¼Œå¹¶ä¸”åªéœ€è¦ä¸è¶…è¿‡20è¡Œä»£ç ã€‚ä¸Šé¢çš„ä»£ç åªæ˜¯å°†æˆ‘ä»¬æ•…äº‹çš„ä¸€ä¸ªæ®µè½æ›´æ”¹ä¸ºæ—¥æœŸæ—¶é—´ï¼Œä¸€æ¬¡ã€‚ä½†æ˜¯é‚£æ ·åšä¸€ç‚¹ä¹Ÿä¸å¥½ç©ã€‚æˆ‘æƒ³çœ‹çœ‹ä½ èƒ½åšä»€ä¹ˆæœ‰åˆ›æ„çš„äº‹æƒ…ï¼ï¼</p><p id="5328" class="pw-post-body-paragraph ix iy hh iz b ja jb ii jc jd je il jf jg jh ji jj jk jl jm jn jo jp jq jr js ha bi translated">å¦å¤–ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æˆ‘çš„ä»£ç <a class="ae iw" href="https://gist.github.com/avendesta/a88286c1fa7d77e177d98384988c0b9d" rel="noopener ugc nofollow" target="_blank"/>ã€‚</p></div></div>    
</body>
</html>