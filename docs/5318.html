<html>
<head>
<title>Google Analytics integration into Oracle JET using autotrack.js</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用autotrack.js将Google Analytics集成到Oracle JET中</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/google-analytics-integration-into-oracle-jet-using-autotrack-js-ac5024e8df28?source=collection_archive---------0-----------------------#2017-10-05">https://medium.com/oracledevs/google-analytics-integration-into-oracle-jet-using-autotrack-js-ac5024e8df28?source=collection_archive---------0-----------------------#2017-10-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="348d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ADF应用程序的行为更像SPA(单页应用程序)，因此与传统网站不同，浏览量不会被正确跟踪。特别是在任务流中导航时。</p><p id="ff19" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了克服这一点，您必须发送一个“假”页面视图，并手动设置页面上下文(我计划写一篇关于如何在ADF中做到这一点的博文)。</p><p id="f315" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">同样的问题也适用于Oracle JET应用程序(可能更严重)。幸运的是，<a class="ae jc" href="https://developers.google.com/analytics/devguides/collection/analyticsjs/single-page-applications" rel="noopener ugc nofollow" target="_blank"> Google已经承认了</a>这个问题，甚至有一个图书馆可以为我们处理这些繁重的工作。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/169456efd58ba4ddf051862c579cdcb7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eOsAYkhJ4AsN6RnriWt2nA.png"/></div></div></figure></div><div class="ab cl jp jq go jr" role="separator"><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju jv"/><span class="js bw bk jt ju"/></div><div class="ha hb hc hd he"><p id="de1d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">进入autotrack.js，其中包含一个名为<em class="jw">‘urlChangeTracker’的插件。</em>该插件通过历史API监听URL的变化，并发送额外的浏览量。</p><h2 id="7309" class="jx jy hh bd jz ka kb kc kd ke kf kg kh ip ki kj kk it kl km kn ix ko kp kq kr bi translated">autotrack.js</h2><p id="c9e2" class="pw-post-body-paragraph ie if hh ig b ih ks ij ik il kt in io ip ku ir is it kv iv iw ix kw iz ja jb ha bi translated">要安装autotrack，请运行以下npm命令:</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="b1c9" class="jx jy hh ky b fi lc ld l le lf">npm install autotrack --save</span></pre><p id="8a9a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后修改您的<strong class="ig hi"> oraclejet-build.js </strong>文件，在构建时将您的新库移动到您的登台目录中:</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="4d09" class="jx jy hh ky b fi lc ld l le lf">copyCustomLibsToStaging: {<br/>     fileList: [<br/>       {<br/>            cwd: 'node_modules/autotrack/',<br/>            src: ['*.js'],<br/>            dest: 'web/js/libs/autotrack'<br/>        },<br/>            {<br/>            cwd: 'node_modules/autotrack/lib/plugins/',<br/>            src: ['*.js'],<br/>            dest:'web/js/libs/autotrack/plugins'<br/>        }<br/>     ]<br/>},</span></pre><p id="551e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在您的<strong class="ig hi"> main.js </strong>文件中需要您的新依赖项:</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="36de" class="jx jy hh ky b fi lc ld l le lf">require(['ojs/ojcore', 'knockout', 'appController', 'ojs/ojknockout', 'ojs/ojmodule', 'ojs/ojrouter', 'ojs/ojnavigationlist', 'ojs/ojbutton', 'ojs/ojtoolbar', <strong class="ky hi">'autotrack'</strong>],</span></pre><p id="48d3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将以下代码片段添加到您的<strong class="ig hi">index.html</strong>文件的头部分，用您的Google Analytics跟踪代码替换<strong class="ig hi"> <em class="jw">【此处跟踪代码】</em> </strong>。</p><pre class="je jf jg jh fd kx ky kz la aw lb bi"><span id="372e" class="jx jy hh ky b fi lc ld l le lf">&lt;script&gt;<br/>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;<br/>ga('create', '<strong class="ky hi"><em class="jw">[tracking code here]</em></strong>', 'auto');<br/>ga('require', 'urlChangeTracker');</span><span id="0a5c" class="jx jy hh ky b fi lg ld l le lf">ga('send', 'pageview');<br/>&lt;/script&gt;<br/>&lt;script async src="<a class="ae jc" href="https://www.google-analytics.com/analytics.js" rel="noopener ugc nofollow" target="_blank">https://www.google-analytics.com/analytics.js</a>"&gt;&lt;/script&gt;</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lh"><img src="../Images/cfaf019af0fde05fb46ce00014639e6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*9OSDYdBKP4qgvZnX7G6FZw.gif"/></div></div><figcaption class="li lj et er es lk ll bd b be z dx">Google Analytics working in a JET SPA with autotrack.js</figcaption></figure><p id="e27d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你可以在这里找到更多关于autotrack.js的信息，它是一个出色的工具，让你不仅仅是跟踪SPA浏览量。当您开始跟踪更多的用户与事件的交互时，它会很有用。</p><p id="35a4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">— DC</p></div></div>    
</body>
</html>