<html>
<head>
<title>Fixing Font Padding in Compose Text</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">修复撰写文本中的字体填充</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/fixing-font-padding-in-compose-text-768cd232425b?source=collection_archive---------2-----------------------#2022-06-15">https://medium.com/androiddevelopers/fixing-font-padding-in-compose-text-768cd232425b?source=collection_archive---------2-----------------------#2022-06-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/b688306bd07049e1aab2833fe6eed78d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iqTadhfQ6PIa-4hIb2-vJg.png"/></div></div></figure><div class=""/><p id="ebe6" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht"><em class="jn">TL；</em>博士</strong></p><ul class=""><li id="f3d0" class="jo jp hs ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated"><em class="jn">使用</em> <code class="du jx jy jz ka b"><a class="ae kb" href="https://android-developers.googleblog.com/2022/05/whats-new-in-jetpack-compose.html" rel="noopener ugc nofollow" target="_blank"><em class="jn">Compose 1.2.0</em></a></code> <em class="jn">中的</em> <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/PlatformTextStyle" rel="noopener ugc nofollow" target="_blank"><em class="jn">PlatformTextStyle</em></a></code> <em class="jn"> API来配置</em> <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/PlatformParagraphStyle#includeFontPadding()" rel="noopener ugc nofollow" target="_blank"><em class="jn">includeFontPadding</em></a></code> <em class="jn">它是</em> <strong class="ir ht"> <em class="jn">弃用</em> </strong> <em class="jn">故意表示它是一个</em> <strong class="ir ht"> <em class="jn">兼容</em> </strong> <em class="jn"> API。</em></li><li id="dbd7" class="jo jp hs ir b is kc iw kd ja ke je kf ji kg jm jt ju jv jw bi translated"><em class="jn">目前来看，</em> <code class="du jx jy jz ka b"><em class="jn">includeFontPadding</em></code> <em class="jn">在Compose </em> <strong class="ir ht"> <em class="jn">中默认为true，但在Compose </em> </strong> <em class="jn">的下一个版本中会改为false，最终会移除兼容API。</em></li><li id="1d08" class="jo jp hs ir b is kc iw kd ja ke je kf ji kg jm jt ju jv jw bi translated"><em class="jn">使用</em> <code class="du jx jy jz ka b"><em class="jn">includeFontPadding</em></code> <em class="jn">设置为</em> <code class="du jx jy jz ka b"><em class="jn">false</em></code> <em class="jn">来测试你的UI，并做任何必要的调整。</em></li><li id="5c2f" class="jo jp hs ir b is kc iw kd ja ke je kf ji kg jm jt ju jv jw bi translated"><em class="jn">使用</em> <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle" rel="noopener ugc nofollow" target="_blank"><em class="jn">LineHeightStyle</em></a></code> <em class="jn"> API更容易匹配您的设计。</em></li></ul><p id="265c" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">从头开始创建Jetpack Compose，我们的新UI工具包，让我们有机会重新评估过去所做的选择。在这篇博文中，我们将深入探讨视图系统和Compose中文本对齐的细节。您将了解我们对字体填充所做的更多更改，这些更改将使文本呈现更加防错，并帮助您更轻松地从Figma或Sketch等常用设计工具中实现设计。</p><p id="4f0c" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">虽然迁移到新的API有很多好处，但这也可能意味着轻微的设计不一致，和/或自动截图测试中的破坏性变化。但是不用担心！我们将向您展示如何开始使用这些API，并从今天开始测试您的文本，以最适合您的应用的速度进行迁移。</p><h1 id="638f" class="kh ki hs bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">视图系统中的字体填充</h1><p id="f64b" class="pw-post-body-paragraph ip iq hs ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated"><code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/widget/TextView#attr_android:includeFontPadding" rel="noopener ugc nofollow" target="_blank">includeFontPadding</a></code>是一个<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/widget/TextView" rel="noopener ugc nofollow" target="_blank">TextView</a></code>参数，有效控制文本中第一行和最后一行的行高。通常，打开它会通过添加垂直填充使第一行和最后一行变高。</p><p id="b4e3" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">默认值为<code class="du jx jy jz ka b">true</code>，您可以按如下方式覆盖它:</p><figure class="lk ll lm ln fd hj"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="c115" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果我们看一下下面的例子:</p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lq"><img src="../Images/9e077a9dade8278030e1eb557a60cc88.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*T1Kwb7HaIXbhYCpG"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx"><em class="lv">Line height with includeFontPadding as false on the left and true on the right.</em></figcaption></figure><p id="81a0" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当<code class="du jx jy jz ka b">includeFontPadding</code>为<strong class="ir ht"> <em class="jn">假</em> </strong>时，首末行的行高等于(<strong class="ir ht"> <em class="jn"> descent — ascent)。</em>T15】</strong></p><p id="8f4b" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当<code class="du jx jy jz ka b">includeFontPadding</code>为<strong class="ir ht">时<em class="jn">为真</em>时</strong>就变得有趣了:</p><ul class=""><li id="ef32" class="jo jp hs ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">第一行的行高等于(<strong class="ir ht"> <em class="jn">下降—顶部</em> </strong>)。</li><li id="00d8" class="jo jp hs ir b is kc iw kd ja ke je kf ji kg jm jt ju jv jw bi translated">最后一行的行高等于(<strong class="ir ht"> <em class="jn">底部—上升</em> </strong>)。</li><li id="d103" class="jo jp hs ir b is kc iw kd ja ke je kf ji kg jm jt ju jv jw bi translated">如果只有1行，则行高等于(<strong class="ir ht"> <em class="jn">底—顶</em> </strong>)。</li><li id="a695" class="jo jp hs ir b is kc iw kd ja ke je kf ji kg jm jt ju jv jw bi translated">对于内部线条，其线条高度始终等于(<strong class="ir ht"> <em class="jn">下降—上升</em> </strong>)。</li></ul><p id="f913" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">顶端、上升和下降是<em class="jn">字体度量</em>的例子。这些度量提供了关于字体的信息，使得系统能够均匀地间隔和均匀地对齐文本行。它们对于每种字体都是不变的，你可以通过使用<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/graphics/Paint.FontMetrics" rel="noopener ugc nofollow" target="_blank">FontMetrics</a></code> API或者类似<a class="ae kb" href="https://fonttools.readthedocs.io/en/latest/ttx.html" rel="noopener ugc nofollow" target="_blank"> ttx </a>的工具来检索它们。</p><p id="cec2" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">将<code class="du jx jy jz ka b">includeFontPadding</code>设置为true或false会影响文本在其父容器中的对齐方式，并导致对齐方式的细微差异。</p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lw"><img src="../Images/0bcf5b4458f1f9b83eae9d40250d7624.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*5kTAlRcDSZ2MO6gS"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx"><em class="lv">2 TextViews side by side baseline aligned (by default) in a LinearLayout in Android API 30. includeFontPadding is false to the left and true to the right.</em></figcaption></figure><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lx"><img src="../Images/d05a3e276dad538a95286dde7cc005a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q3iUSjfqqqfXeDyt7IW7pw.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">2 TextViews side by side with layout_gravity=”center_vertical” in a LinearLayout in Android API 30. They’re aligned by view height instead of text baseline. The one on the left has room to float up to be centered.<br/>includeFontPadding is false to the left and true to the right.</figcaption></figure><p id="d8bb" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">听起来，默认将<code class="du jx jy jz ka b">includeFontPadding</code>配置为true可能与您想要的正好相反。如果您需要遵循特定的设计准则，在文本中使用额外的填充会使这一点更难实现。默认情况下包含这种填充背后的原因是历史的。</p><h1 id="2a60" class="kh ki hs bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">背景</h1><p id="cd26" class="pw-post-body-paragraph ip iq hs ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated"><a class="ae kb" href="https://fonts.google.com/specimen/Roboto" rel="noopener ugc nofollow" target="_blank"> Roboto </a>是Android平台上的标准字体和默认字体(或系统字体后备中的第一种字体)。</p><p id="d686" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在Android 27之前，为了计算绘制字体的最大可用空间，系统使用Roboto的字体度量进行这些计算。它决定了可用空间的大小，并认为这个空间是“绘制文本的安全空间”。</p><p id="8864" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种解决方案并不适用于所有字体，因为通常比拉丁文高的设计字体或“脚本”会被“剪裁”。剪裁意味着部分字形(或字符)在可用绘图空间上不完全可见。贯穿本文，我们将使用缅甸语作为一个高大的脚本的例子。缅甸语的一个示例文本是၇ဤဩဦနိ.</p><p id="d99a" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir ht">这是</strong> <code class="du jx jy jz ka b"><strong class="ir ht">includeFontPadding</strong></code> <strong class="ir ht">被引入</strong>的地方，防止高字体被剪切，允许你给文本添加顶部和底部填充。</p><p id="e309" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们可以看到这个例子中的行为:</p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lw"><img src="../Images/c424158cab822437bdf7a75e2063a718.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tNfqh4QKa4BBOr9m"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx"><code class="du jx jy jz ka b"><em class="lv">includeFontPadding</em></code><em class="lv"> is false to the left (notice Burmese font clipping, and the white background color due to no added padding) — includeFontPadding is true to the right (Android API 25)</em></figcaption></figure><p id="e32f" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，如果你曾经将<code class="du jx jy jz ka b">includeFontPadding</code>设置为false，并且你的应用程序支持缅甸语，它可能会面临字体裁剪问题，这取决于你的Android版本。</p><h1 id="2726" class="kh ki hs bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">将includeFontPadding设置为false</h1><p id="366e" class="pw-post-body-paragraph ip iq hs ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">有一些将<code class="du jx jy jz ka b">includeFontPadding</code>设置为false的有效用例，例如，解决垂直对齐问题或符合特定的设计规范。</p><p id="761d" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们看两个例子:</p><p id="260c" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当文本在父窗口小部件(例如按钮)中居中时，文本应该垂直居中。</p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lw"><img src="../Images/8e326dd1bc06dc8aabc49f84b214b809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ftN3t_GiIPyhaXd_"/></div></div></figure><p id="12ab" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">H中的水平条应该垂直居中。然而，当<code class="du jx jy jz ka b">includeFontPadding</code>为真时，这种对齐将取决于字体及其字体度量。让我们看看顶部填充比底部多的<a class="ae kb" href="https://fonts.google.com/specimen/Oswald" rel="noopener ugc nofollow" target="_blank">字体会发生什么:</a></p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ly"><img src="../Images/0dd59ddd3ad3cd04ddc14b6cfdc0f31a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9JPLwpwjX34eiBMT"/></div></div></figure><p id="1a8a" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这个例子中，<code class="du jx jy jz ka b">includeFontPadding</code>左边为假，右边为真。请注意，由于不均匀的字体填充，垂直对齐稍微偏右。根据所使用的字体和文本(例如小写拉丁文本自然更靠近绘图空间的下部)，这种差异可能会更明显。</p><p id="09c1" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">另一个例子是文本必须与另一个视图(例如图像)的顶部或底部对齐。由于<code class="du jx jy jz ka b">includeFontPadding</code>添加的额外填充，文本和图像没有对齐。让我们来看看想要的设计:</p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lz"><img src="../Images/437c746499cb9fcfaad763f91f5bab64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GgHb2Cdn09_vnlhCZFbg1g.png"/></div></div></figure><p id="5eb5" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">通常，为了达到上述效果，你可以将<code class="du jx jy jz ka b">includeFontPadding</code> <strong class="ir ht"> <em class="jn"> </em> </strong>设置为false，再加上一些硬编码填充。</p><h1 id="a7ae" class="kh ki hs bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">视图系统的修复</h1><p id="d729" class="pw-post-body-paragraph ip iq hs ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated"><code class="du jx jy jz ka b">TextView</code>小部件构建在两个基本Java类<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/text/StaticLayout" rel="noopener ugc nofollow" target="_blank">StaticLayout</a></code>和<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/text/BoringLayout#BoringLayout" rel="noopener ugc nofollow" target="_blank">BoringLayout</a></code>之上，并根据屏幕上显示的文本的性质委托给其中一个。</p><p id="9ad5" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">从运行Android 28和更高版本的设备开始，我们为<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/text/StaticLayout" rel="noopener ugc nofollow" target="_blank">StaticLayout</a></code>添加了<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/text/StaticLayout.Builder#setUseLineSpacingFromFallbacks(boolean)" rel="noopener ugc nofollow" target="_blank">useLineSpacingFromFallbacks</a></code>功能，因此文本的上升/下降将根据使用的字体而不是Roboto的字体度量进行调整。当设置为真时，即使<code class="du jx jy jz ka b">includeFontPadding</code>为假，该配置也会修复字体剪切问题。它还能防止<code class="du jx jy jz ka b">includeFontPadding</code>没有解决的连续线条相互碰撞。<br/>然而这个特性当时并没有添加到<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/text/BoringLayout#BoringLayout" rel="noopener ugc nofollow" target="_blank">BoringLayout</a></code>(单行文字，从左到右字符)中。在这种情况下，仍然可能存在削波。<a class="ae kb" href="https://developer.android.com/reference/android/text/BoringLayout#BoringLayout(java.lang.CharSequence,%20android.text.TextPaint,%20int,%20android.text.Layout.Alignment,%20float,%20float,%20android.text.BoringLayout.Metrics,%20boolean,%20android.text.TextUtils.TruncateAt,%20int,%20boolean)" rel="noopener ugc nofollow" target="_blank">最近增加了对此的支持</a>，并将推出<a class="ae kb" href="https://developer.android.com/partners/google-apps/android-13/changes?hl=en#line-height-textview" rel="noopener ugc nofollow" target="_blank"> Android T </a>。</p><blockquote class="ma mb mc"><p id="1361" class="ip iq jn ir b is it iu iv iw ix iy iz md jb jc jd me jf jg jh mf jj jk jl jm ha bi translated">从API 33开始，<code class="du jx jy jz ka b">includeFontPadding</code>对于最初设计目的的<code class="du jx jy jz ka b">TextView</code>来说变得多余，因为裁剪问题将被自动处理。<strong class="ir ht">直到你的minSdk为33，你还需要在视图系统中设置</strong> <code class="du jx jy jz ka b"><strong class="ir ht">includeFontPadding</strong></code> <strong class="ir ht">为真，以防止字体剪裁为高字体。</strong></p></blockquote><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mg"><img src="../Images/c69944083dea4e28ab7cfdde037a217d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4QmHdF5cayyGXiW4"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx"><em class="lv">includeFontPadding is false to the left (notice Burmese font clipping is fixed) and includeFontPadding and true to the right (Android API 33)</em></figcaption></figure><p id="f6c6" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du jx jy jz ka b">includeFontPadding</code>与<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/widget/TextView#attr_android:fallbackLineSpacing" rel="noopener ugc nofollow" target="_blank">fallbackLineSpacing</a></code>结合使用，也可与<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/widget/TextView#attr_android:elegantTextHeight" rel="noopener ugc nofollow" target="_blank">elegantTextHeight</a></code>结合使用。这两个参数的组合导致了复杂的行为。</p><p id="2b44" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了增加灵活性(但也增加了混乱)，<code class="du jx jy jz ka b">TextView</code>还允许您配置<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/widget/TextView#attr_android:firstBaselineToTopHeight" rel="noopener ugc nofollow" target="_blank">firstBaselineToTopHeight</a></code>和<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/widget/TextView#attr_android:lastBaselineToBottomHeight" rel="noopener ugc nofollow" target="_blank">lastBaselineToBottomHeight</a></code>，这有助于分别定义顶部和底部文本行的额外填充。这些属性仅适用于API级别28及更高级别。</p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mh"><img src="../Images/51dfa434b563be3092ddc0dcc17e11d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WhMmEHyvGXnS3bXKwwQX7g.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">firstBaselineToTopHeight and lastBaselineToBottomHeight in a TextView</figcaption></figure><blockquote class="ma mb mc"><p id="b93c" class="ip iq jn ir b is it iu iv iw ix iy iz md jb jc jd me jf jg jh mf jj jk jl jm ha bi translated">多个参数允许你在一个<code class="du jx jy jz ka b">TextView</code>中修改字体填充，它们可以以复杂的方式交互，并且<strong class="ir ht">的行为可能在不同的API级别</strong>之间有所不同。请务必根据各种API级别测试基于视图的UI。</p></blockquote><h1 id="0ef6" class="kh ki hs bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">在Compose中实现</h1><p id="2ce6" class="pw-post-body-paragraph ip iq hs ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">当在Compose中构建初始的<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/material/package-summary#Text(kotlin.String,androidx.compose.ui.Modifier,androidx.compose.ui.graphics.Color,androidx.compose.ui.unit.TextUnit,androidx.compose.ui.text.font.FontStyle,androidx.compose.ui.text.font.FontWeight,androidx.compose.ui.text.font.FontFamily,androidx.compose.ui.unit.TextUnit,androidx.compose.ui.text.style.TextDecoration,androidx.compose.ui.text.style.TextAlign,androidx.compose.ui.unit.TextUnit,androidx.compose.ui.text.style.TextOverflow,kotlin.Boolean,kotlin.Int,kotlin.Function1,androidx.compose.ui.text.TextStyle)" rel="noopener ugc nofollow" target="_blank">Text</a></code>实现时，行为与<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/android/widget/TextView" rel="noopener ugc nofollow" target="_blank">TextView</a></code>的行为一致，在Compose的<code class="du jx jy jz ka b"><a class="ae kb" href="https://source.corp.google.com/androidx-platform-dev/text/text/src/main/java/androidx/compose/ui/text/android/TextLayout.kt?q=DEFAULT_INCLUDE_PADDING" rel="noopener ugc nofollow" target="_blank">TextLayout</a></code>中默认添加字体填充。<br/> <strong class="ir ht">但是，它并没有公开一个参数来打开和关闭这个填充。社区很快指出了这一点，创建了一个与视图奇偶校验相关的bug，引起了很多关注。这个请求是允许在使用<code class="du jx jy jz ka b">Text</code>可组合函数时打开和关闭<code class="du jx jy jz ka b">includeFontPadding</code>，就像在视图系统中一样。</strong></p><p id="cff3" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在考虑如何在Compose中实现这个切换特性时，我们分析了如何使用<code class="du jx jy jz ka b">includeFontPadding</code>以及它解决的主要用例。我们知道文本应该像预期的那样呈现，并且<code class="du jx jy jz ka b">includeFontPadding</code>是一个非常特定于Android的配置，不应该出现在通用API上。总的来说，这是一个令人困惑的参数，并且非常容易出错(它公开了一个难以理解、难以解释的API，并且只适用于特定情况的子集)。</p><p id="f7bb" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们有以下目标:</p><ul class=""><li id="0847" class="jo jp hs ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">删除不必要的填充，将控制权交还给你来实现你真正需要的填充。</li><li id="315f" class="jo jp hs ir b is kc iw kd ja ke je kf ji kg jm jt ju jv jw bi translated">自动防止高字体、斜体等的剪裁问题。</li></ul><p id="f52c" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，我们发布了包括以下内容的变更:</p><ul class=""><li id="45a5" class="jo jp hs ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">创建一个新的API <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/PlatformTextStyle" rel="noopener ugc nofollow" target="_blank">PlatformTextStyle</a></code>来允许打开和关闭<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/PlatformParagraphStyle#includeFontPadding()" rel="noopener ugc nofollow" target="_blank">includeFontPadding</a></code>(默认值为true)。</li><li id="1368" class="jo jp hs ir b is kc iw kd ja ke je kf ji kg jm jt ju jv jw bi translated">为了修复在撰写中关闭<code class="du jx jy jz ka b">includeFontPadding</code>时可能发生的所有高字体剪裁问题，我们仅在第一行和最后一行需要时应用额外的填充，并且根据给定行中包含的所有文本所使用的字体(而不是字体后备中第一种字体的<code class="du jx jy jz ka b">FontMetrics</code>)来计算最大行高。</li><li id="3075" class="jo jp hs ir b is kc iw kd ja ke je kf ji kg jm jt ju jv jw bi translated">我们已经应用了一个适用于所有Android版本的解决方案，直到API 21(使用<a class="ae kb" href="https://developer.android.com/jetpack/compose" rel="noopener ugc nofollow" target="_blank"> Jetpack Compose </a>库所需的最小SDK级别)。</li></ul><blockquote class="ma mb mc"><p id="a40c" class="ip iq jn ir b is it iu iv iw ix iy iz md jb jc jd me jf jg jh mf jj jk jl jm ha bi translated">如果您有兴趣仔细查看我们的解决方案的实现，请查看下面的更改列表:<br/> <a class="ae kb" href="https://android-review.googlesource.com/c/platform/frameworks/support/+/1992050/" rel="noopener ugc nofollow" target="_blank">第一个更改</a>，自动添加额外的填充<br/> <a class="ae kb" href="https://android-review.googlesource.com/c/platform/frameworks/support/+/2028663/" rel="noopener ugc nofollow" target="_blank">随着这个更改</a>我们在text style/paragraph style<br/><a class="ae kb" href="https://android-review.googlesource.com/c/platform/frameworks/support/+/2059410/" rel="noopener ugc nofollow" target="_blank">后续更改</a>中为<code class="du jx jy jz ka b">includeFontPadding</code>添加了临时兼容性配置，在Compose中默认保持<code class="du jx jy jz ka b">includeFontPadding</code>为真</p></blockquote><h1 id="4bd0" class="kh ki hs bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">PlatformTextStyle API</h1><p id="e86e" class="pw-post-body-paragraph ip iq hs ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">作为<a class="ae kb" href="https://developer.android.com/jetpack/androidx/releases/compose-foundation#1.2.0-alpha07" rel="noopener ugc nofollow" target="_blank"> Compose 1.2.0-alpha07 </a>的一部分，我们在<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/TextStyle" rel="noopener ugc nofollow" target="_blank">TextStyle</a></code> / <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/PlatformTextStyle" rel="noopener ugc nofollow" target="_blank">PlatformTextStyle</a></code>中公开了一个API，允许你打开和关闭<code class="du jx jy jz ka b">includeFontPadding</code>。默认值为true，表示添加了字体填充。</p><p id="b5e3" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该API被标记为实验性/不推荐使用，这只是为了兼容。当您将<code class="du jx jy jz ka b">includeFontPadding</code>设置为false并根据需要调整布局时，我们打算在即将发布的Compose中将<code class="du jx jy jz ka b">includeFontPadding</code>默认值更改为false，并最终移除兼容性API。</p><p id="b69f" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以在每个<code class="du jx jy jz ka b">Text</code>中进行配置，因此迁移是渐进的:</p><figure class="lk ll lm ln fd hj"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="4153" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">或者更笼统地说，在你的排版上:</p><figure class="lk ll lm ln fd hj"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="ac33" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">由于这些API是实验性的，您需要用<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/ExperimentalTextApi" rel="noopener ugc nofollow" target="_blank">ExperimentalTextApi</a></code>注释来注释这些用法。<br/>或者，如果你正在用<code class="du jx jy jz ka b">Gradle</code>构建，你可以在你的应用程序的<code class="du jx jy jz ka b">build.gradle</code>文件中添加下面的异常到<code class="du jx jy jz ka b">kotlinOptions</code>:</p><pre class="lk ll lm ln fd mi ka mj mk aw ml bi"><span id="04ff" class="mm ki hs ka b fi mn mo l mp mq">kotlinOptions <strong class="ka ht">{<br/>    ...</strong><br/>    freeCompilerArgs += ["-Xuse-experimental=androidx.compose.ui.text.ExperimentalTextApi"]<br/><strong class="ka ht">}</strong></span></pre><h1 id="cb97" class="kh ki hs bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">LineHeightStyle API</h1><p id="b539" class="pw-post-body-paragraph ip iq hs ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">随着我们不断评估我们的更改的影响，我们听取了社区的反馈，并开发了一个API来帮助您更容易地将您的设计与您的撰写应用程序中的文本相匹配。</p><p id="2388" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">2019年，设计师工具Figma宣布，他们对测量和应用行高的方式进行了<a class="ae kb" href="https://www.figma.com/blog/line-height-changes/" rel="noopener ugc nofollow" target="_blank">更改</a>。简而言之，Figma就像一般的web一样分配行高:顶部和底部各占一半。从那以后，许多设计师和开发人员一直在和我们谈论这篇博文。<br/>2022年3月，一名开发人员发布了一篇关于如何在Compose中使用Figma行为的文章，因为它不能开箱即用。</p><p id="aa8d" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/TextStyle#lineHeight()" rel="noopener ugc nofollow" target="_blank">LineHeight</a></code>对于组合<code class="du jx jy jz ka b">Text</code>来说并不是一个新概念，它可以定义为文本基线之间的距离:</p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mr"><img src="../Images/4cde2ad7464c5b5dc5e0af4976e4404d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G34CE_BU1DxJn2GTB6oEzQ.png"/></div></div><figcaption class="lr ls et er es lt lu bd b be z dx">Definition of line height</figcaption></figure><p id="9588" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这使得文本的第一行和最后一行处于特殊的情况下，因为它们的上方和下方没有基线。因此，为了使每行具有相同的行高，需要添加一些额外的空间，并按照给定的标准在每行中进行分配。该标准可通过新的API <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle" rel="noopener ugc nofollow" target="_blank">LineHeightStyle</a></code>进行配置。</p><p id="de98" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du jx jy jz ka b">LineHeightStyle</code>控制如何分配每行文本的行高，以及行高是否应用于第一行的顶部和最后一行的底部。它定义了由<code class="du jx jy jz ka b">TextStyle(lineHeight)</code>提供的空间中的行的对齐方式，并提供了几个选项来修改可用绘图空间中的文本行为。</p><p id="576f" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以如下配置<code class="du jx jy jz ka b">LineHeightStyle</code>:</p><figure class="lk ll lm ln fd hj"><div class="bz dy l di"><div class="lo lp l"/></div></figure><p id="4268" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">注意:我们建议通过使用</em> <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/wear/compose/material/package-summary#LocalTextStyle()" rel="noopener ugc nofollow" target="_blank"><em class="jn">LocalTextStyle</em></a></code> <em class="jn">合并来定义</em> <code class="du jx jy jz ka b"><em class="jn">TextStyle</em></code> <em class="jn">，因为如果不这样做将会使你丢失你的素材主题的样式，例如，如果你添加这个文本作为一个按钮的内容。你可以在这个特征请求</em>  <em class="jn">中查看围绕这个</em> <a class="ae kb" href="https://issuetracker.google.com/233365719" rel="noopener ugc nofollow" target="_blank"> <em class="jn">的讨论。</em></a></p><h2 id="e393" class="mm ki hs bd kj ms mt mu kn mv mw mx kr ja my mz kv je na nb kz ji nc nd ld ne bi translated">对齐</h2><p id="8a44" class="pw-post-body-paragraph ip iq hs ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated"><code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Alignment" rel="noopener ugc nofollow" target="_blank">LineHeightStyle.Alignment</a></code>定义如何在行高提供的空间内对齐文本。</p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nf"><img src="../Images/4c37919625f337a1ed9ea30c63785198.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V1KWnvBAV9SUPrjkk3E1rg.png"/></div></div></figure><p id="cd86" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Alignment#Proportional()" rel="noopener ugc nofollow" target="_blank">LineHeightStyle.Alignment.Proportional</a></code>这是默认行为，按照字体规格分配行高。<br/> <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Alignment#Center()" rel="noopener ugc nofollow" target="_blank">LineHeightStyle.Alignment.Center</a></code>在每行文本的顶部和底部添加等量的间距，将文本置于中间。</p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ng"><img src="../Images/616fe7b9e45e72f027f1c99617460364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ocQQHGl7fyfmoiUWZfvnSg.png"/></div></div></figure><p id="20a0" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Alignment#Top()" rel="noopener ugc nofollow" target="_blank">LineHeightStyle.Alignment.Top</a></code>在每行文本的底部添加空格，将文本推到顶部。<br/> <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Alignment#Bottom()" rel="noopener ugc nofollow" target="_blank">LineHeightStyle.Alignment.Bottom</a></code> <a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Alignment#Bottom()" rel="noopener ugc nofollow" target="_blank"> </a>在每行文本的顶部添加空格，将文本推到底部。</p><h2 id="f1cb" class="mm ki hs bd kj ms mt mu kn mv mw mx kr ja my mz kv je na nb kz ji nc nd ld ne bi translated">附加装饰</h2><p id="2e2e" class="pw-post-body-paragraph ip iq hs ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">另一方面，<code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Trim" rel="noopener ugc nofollow" target="_blank">LineHeightStyle.Trim</a> </code>选项将允许你移除或保留第一行顶部和最后一行底部的额外填充。这些是可用的微调配置，与校准中心一起配置:</p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nh"><img src="../Images/d73b16917d58d9e3026cdd7b5b8bb05e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TldJBryLeL27Q7EoDw_01w.png"/></div></div></figure><p id="9a52" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Trim#FirstLineTop()" rel="noopener ugc nofollow" target="_blank">LineHeightStyle.Trim.FirstLineTop</a></code>修剪由于行高而增加到第一行顶部的空间。<br/> <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Trim#LastLineBottom()" rel="noopener ugc nofollow" target="_blank">LineHeightStyle.Trim.LastLineBottom</a></code>修剪由于行高而增加到最后一行底部的空间。</p><figure class="lk ll lm ln fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ni"><img src="../Images/d65b7a4da816fdd98d515485068c94f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gHE72-oqJW2HE18tKlgWCg.png"/></div></div></figure><p id="2d13" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Trim#None()" rel="noopener ugc nofollow" target="_blank">LineHeightStyle.Trim.None</a></code>不删除空格。<br/> <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle.Trim#Both()" rel="noopener ugc nofollow" target="_blank">LineHeightStyle.Trim.Both</a></code>修剪由于行高而增加到第一行顶部和最后一行底部的空间。</p><p id="344d" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">注意:只有在文本上定义了行高时，才应用该配置。<br/> </em> <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle#trim()" rel="noopener ugc nofollow" target="_blank"><em class="jn">trim</em></a></code> <em class="jn">功能仅在</em> <code class="du jx jy jz ka b"><a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/PlatformParagraphStyle#includeFontPadding()" rel="noopener ugc nofollow" target="_blank"><em class="jn">PlatformParagraphStyle.includeFontPadding</em></a></code> <em class="jn">为假时可用。</em></p><blockquote class="ma mb mc"><p id="5e8a" class="ip iq jn ir b is it iu iv iw ix iy iz md jb jc jd me jf jg jh mf jj jk jl jm ha bi translated"><code class="du jx jy jz ka b"><strong class="ir ht">includeFontPadding</strong></code> <strong class="ir ht">与</strong> <code class="du jx jy jz ka b"><strong class="ir ht">lineHeight</strong></code> <strong class="ir ht">和</strong> <code class="du jx jy jz ka b"><strong class="ir ht">LineHeightStyle</strong></code> <strong class="ir ht">(对齐和修剪配置)一起产生多种组合，允许您更好地对齐和样式化任何给定字体的</strong> <code class="du jx jy jz ka b"><strong class="ir ht">Text</strong></code> <strong class="ir ht">。请务必查看我们上面介绍的相关类的</strong> <a class="ae kb" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/style/LineHeightStyle" rel="noopener ugc nofollow" target="_blank"> <strong class="ir ht">文档</strong> </a> <strong class="ir ht">，以探索最有助于匹配您的设计的选项。</strong></p></blockquote><h1 id="4d82" class="kh ki hs bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">结论</h1><p id="186a" class="pw-post-body-paragraph ip iq hs ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated"><a class="ae kb" href="https://android-developers.googleblog.com/2022/05/whats-new-in-jetpack-compose.html" rel="noopener ugc nofollow" target="_blank"> Compose 1.2.0 beta发布了</a>，默认情况下相当于<code class="du jx jy jz ka b">includeFontPadding</code>的Compose是启用的，可以关闭它，今天就开始调整和测试您的<code class="du jx jy jz ka b">Text</code>。</p><p id="aab4" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">虽然<code class="du jx jy jz ka b">PlatformTextStyle</code>兼容性API(允许您禁用<code class="du jx jy jz ka b">includeFontPadding</code>)将在未来版本中保持可用，但我们的目标是尽快将默认行为更改为默认关闭。您可以开始使用它来测试您的屏幕，并在需要时进行所有必要的调整。</p><p id="1eab" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">此外，我们还添加了具有多个选项的<code class="du jx jy jz ka b">LineHeightStyle</code> API，这是另一个备受欢迎的功能，将帮助您更轻松地匹配您的设计。</p><p id="0d3d" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您在关闭<code class="du jx jy jz ka b">includeFontPadding</code>时遇到问题/错误，请让我们知道并在<a class="ae kb" href="https://issuetracker.google.com/issues/new?component=779818&amp;template=1371638" rel="noopener ugc nofollow" target="_blank">我们的问题跟踪器</a>上记录一个错误。</p><p id="c046" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">还有什么问题吗？请在下面留言或在<a class="ae kb" href="https://twitter.com/astamatok" rel="noopener ugc nofollow" target="_blank"> Twitter </a>上联系我，我们希望收到您的来信！</p><p id="65ee" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">快乐作曲！👋</p></div><div class="ab cl nj nk go nl" role="separator"><span class="nm bw bk nn no np"/><span class="nm bw bk nn no np"/><span class="nm bw bk nn no"/></div><div class="ha hb hc hd he"><p id="b0cf" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">这篇文章是与Jetpack撰写文本团队的Seigo Nonaka、</em> <a class="ae kb" href="https://twitter.com/objcode" rel="noopener ugc nofollow" target="_blank"> <em class="jn">肖恩·麦克奎蓝</em> </a> <em class="jn">、</em> <a class="ae kb" href="https://twitter.com/siyamed" rel="noopener ugc nofollow" target="_blank"> <em class="jn">西亚梅德·西尼尔</em> </a> <em class="jn">和阿纳斯塔西娅·索博列娃合作撰写的。特别感谢DevRel团队中的</em> <a class="ae kb" href="https://twitter.com/lojanda" rel="noopener ugc nofollow" target="_blank"> <em class="jn">约兰达·维尔霍夫</em> </a> <em class="jn">和</em> <a class="ae kb" href="https://twitter.com/FMuntenescu" rel="noopener ugc nofollow" target="_blank"> <em class="jn">弗洛里纳·芒特内斯库</em> </a> <em class="jn">的观点和评论。</em></p></div></div>    
</body>
</html>