<html>
<head>
<title>GO: Time And Date API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GO:时间和日期API</h1>
<blockquote>原文：<a href="https://medium.com/globant/go-time-and-date-api-73280566d037?source=collection_archive---------4-----------------------#2020-06-15">https://medium.com/globant/go-time-and-date-api-73280566d037?source=collection_archive---------4-----------------------#2020-06-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/f2869fe772af8be4a522bafd3330ac3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ifpd_HtDiK9u6h68SZgNuA.png"/></div></div></figure><p id="2c6e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">包装时间提供测量和显示时间的功能。日历计算总是假设公历，没有闰秒。</p><p id="10dd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">操作系统提供了“<strong class="ir hi">挂钟</strong>”和“<strong class="ir hi">单调时钟</strong>”，前者会因时钟同步而改变，后者则不会。</p><p id="38d2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">总的规则是，挂钟是用来报时的，单调钟是用来计时的。</p><p id="4fe6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们来看看时间API的一些基本特性。为此，我们需要导入“时间”包。</p><p id="d8a8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">睡眠</strong></p><p id="51b9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Sleep至少在持续时间d内暂停当前的goroutine。持续时间为负或为零会导致Sleep立即返回。</p><pre class="jn jo jp jq fd jr js jt ju aw jv bi"><span id="8086" class="jw jx hh js b fi jy jz l ka kb">package main</span><span id="2bc4" class="jw jx hh js b fi kc jz l ka kb">import (<br/> "time"<br/>)</span><span id="d272" class="jw jx hh js b fi kc jz l ka kb">func main() {<br/> time.Sleep(100 * time.Millisecond)<br/>}</span></pre><p id="29e0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">持续时间</strong></p><p id="2cc1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们了解一下如何计算两个时间条目之间的持续时间。一般来说，我们用这个来衡量任何昂贵的电话所花费的时间。</p><pre class="jn jo jp jq fd jr js jt ju aw jv bi"><span id="346a" class="jw jx hh js b fi jy jz l ka kb">package main</span><span id="9feb" class="jw jx hh js b fi kc jz l ka kb">import (<br/> "fmt"<br/> "time"<br/>)</span><span id="ecca" class="jw jx hh js b fi kc jz l ka kb">func main() {<br/> t0 := time.Now() //Now returns the current local time.<br/> //Do some time consuming operation<br/> time.Sleep(100 * time.Millisecond)<br/> t1 := time.Now()<br/> fmt.Printf("The call took %v to run.\n", t1.Sub(t0))<br/>}</span><span id="b90e" class="jw jx hh js b fi kc jz l ka kb"><strong class="js hi">O/P-</strong><br/>The call took 100ms to run.</span></pre><p id="09bd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">解析时长</strong></p><p id="87b7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">ParseDuration分析持续时间字符串。有效的时间单位是“ns”、“us”(或“s”)、“ms”、“s”、“m”、“h”。很少有实用函数可以计算特定时间内的纳秒、微秒、秒、分钟或小时。例如时间。ParseDuration("-1.5h ")。秒数()</p><pre class="jn jo jp jq fd jr js jt ju aw jv bi"><span id="4046" class="jw jx hh js b fi jy jz l ka kb">package main</span><span id="5bb1" class="jw jx hh js b fi kc jz l ka kb">import (<br/> "fmt"<br/> "time"<br/>)</span><span id="03e6" class="jw jx hh js b fi kc jz l ka kb">func main() {<br/> hours1, _ := time.ParseDuration("-1.5h") <strong class="js hi">//.5h hrs is 30 secs</strong><br/> hours2, _ := time.ParseDuration("10h")<br/> hours3, _ := time.ParseDuration("1h10m10s")<br/> micro, _ := time.ParseDuration("1µs")<br/>                                     <strong class="js hi">//prefix u for micro is also ok</strong><br/> fmt.Println(hours1)<br/> fmt.Println(hours2)<br/> fmt.Println(hours3)<br/> fmt.Printf("There are %.0f seconds in %v.\n",<br/>               hours3.Seconds(),hours3)<br/> fmt.Printf("There are %d nanoseconds in %v.\n",     micro.Nanoseconds(),micro) h, _ := time.ParseDuration("4h30m")<br/> fmt.Printf("I've got %.1f hours of work left.", h.Hours())<br/>}</span><span id="d58a" class="jw jx hh js b fi kc jz l ka kb"><strong class="js hi">O/P -<br/></strong>-1h30m0s<br/>10h0m0s<br/>1h10m10s<br/>There are 4210 seconds in 1h10m10s.<br/>There are 1000 nanoseconds in 1µs.<br/>I've got 4.5 hours of work left.</span></pre><p id="91c2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">跑马灯</strong></p><p id="2724" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">ticker<strong class="ir hi"/>在你想要定期重复做某件事的时候使用。</p><pre class="jn jo jp jq fd jr js jt ju aw jv bi"><span id="f08f" class="jw jx hh js b fi jy jz l ka kb">package main</span><span id="76ab" class="jw jx hh js b fi kc jz l ka kb">import (<br/> "fmt"<br/> "time"<br/>)</span><span id="848b" class="jw jx hh js b fi kc jz l ka kb">func main() {<br/> c := time.Tick(time.Second * 2)<br/> for next := range c {<br/>  fmt.Printf("%v %s\n", next, statusUpdate())<br/> }<br/>}</span><span id="7bf1" class="jw jx hh js b fi kc jz l ka kb">func statusUpdate() string {<br/> <strong class="js hi">//update status continuously</strong><br/> return "Go is Awesome"<br/>}</span><span id="4bb7" class="jw jx hh js b fi kc jz l ka kb"><strong class="js hi">O/P-</strong><br/>2009-11-10 23:00:02 +0000 UTC m=+2.000000001 Go is Awesome<br/>2009-11-10 23:00:04 +0000 UTC m=+4.000000001 Go is Awesome<br/>2009-11-10 23:00:06 +0000 UTC m=+6.000000001 Go is Awesome<br/>2009-11-10 23:00:08 +0000 UTC m=+8.000000001 Go is Awesome</span></pre><p id="ba93" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">日期</strong></p><p id="59aa" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在Go中，可以使用<code class="du kd ke kf js b">time.Now()</code>确定当前时间。这将打印系统本地时间。如果你想要UTC格式的时间，那么使用<code class="du kd ke kf js b">t := time.Now().UTC()</code>。如果想要时间戳，那么使用<code class="du kd ke kf js b">t := time.Now().Unix()</code>。您也可以指定自己的自定义格式。如果你想知道今天是星期几，你可以通过<strong class="ir hi"> time得到。现在()。Weekday()，</strong>查找当前月份使用，<strong class="ir hi">时间。现在()。月份()。</strong>同样，对于当前年份，使用<strong class="ir hi">时间。现在()。年份()。有一些函数可以计算从某个特定时间过去了多长时间，你可以使用。自(t)，</strong>类似地，要找出特定时间还剩多少时间，请使用<strong class="ir hi"> time。直到(t) </strong></p><pre class="jn jo jp jq fd jr js jt ju aw jv bi"><span id="3f24" class="jw jx hh js b fi jy jz l ka kb">package main</span><span id="c32e" class="jw jx hh js b fi kc jz l ka kb">import (<br/> "fmt"<br/> "time"<br/>)</span><span id="f8b7" class="jw jx hh js b fi kc jz l ka kb">func main() {</span><span id="2ad7" class="jw jx hh js b fi kc jz l ka kb">year, month, day := time.Now().Date()</span><span id="6bb5" class="jw jx hh js b fi kc jz l ka kb">fmt.Println("Year : ", year, " Month: ", month, " Day: ", day)</span><span id="8f9c" class="jw jx hh js b fi kc jz l ka kb">if month == time.May || day == 14 {<br/>    fmt.Println("Its a may!")<br/>}</span><span id="8c7f" class="jw jx hh js b fi kc jz l ka kb">t := time.Date(2020, time.May, 15, 23, 0, 0, 0, time.UTC)</span><span id="aea4" class="jw jx hh js b fi kc jz l ka kb">fmt.Println("Given date is  :", t)</span><span id="c316" class="jw jx hh js b fi kc jz l ka kb">fmt.Println("Time passed since given time   :", time.Since(t)) <br/>                                      <br/>fmt.Println("Time remains until given time :", time.Until(t)) <br/>                                   <strong class="js hi"> </strong><br/>fmt.Println(time.May.String())     <strong class="js hi">//string representation</strong></span><span id="722d" class="jw jx hh js b fi kc jz l ka kb">fmt.Println(time.Now().Weekday()) <strong class="js hi">//day of week</strong></span><span id="ac6e" class="jw jx hh js b fi kc jz l ka kb">fmt.Println(time.Now().Month()) <strong class="js hi"> //current month</strong></span><span id="3e83" class="jw jx hh js b fi kc jz l ka kb">fmt.Println(time.Now().Year())  <strong class="js hi">//current year<br/></strong>}</span><span id="f97b" class="jw jx hh js b fi kc jz l ka kb"><strong class="js hi">O/P-</strong><br/>Year :  2020  Month:  June  Day:  15<br/>Given date is  : 2020-05-15 23:00:00 +0000 UTC<br/>Time passed since given time   : 738h21m6.346267s<br/>Time remains until given time : -738h21m6.346272s<br/>May<br/>Monday<br/>June<br/>2020</span></pre><p id="1340" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">位置</strong></p><p id="fb69" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">位置将时间瞬间映射到当时使用的区域。通常，位置代表在地理区域中使用的时间偏移的集合。对于许多地方来说，时间偏移取决于在该时刻是否使用夏令时。让我们比较一下当位置考虑日光节约或考虑固定时区时会有什么不同。</p><pre class="jn jo jp jq fd jr js jt ju aw jv bi"><span id="1686" class="jw jx hh js b fi jy jz l ka kb">package main</span><span id="d900" class="jw jx hh js b fi kc jz l ka kb">import (<br/> "fmt"<br/> "time"<br/>)</span><span id="920e" class="jw jx hh js b fi kc jz l ka kb">func main() {</span><span id="b566" class="jw jx hh js b fi kc jz l ka kb"><strong class="js hi">// China doesn't have daylight saving. It uses a fixed 8 hour offset from UTC.<br/></strong>secondsEastOfUTC := int((8 * time.Hour).Seconds())<br/>beijing := time.FixedZone("Beijing Time", secondsEastOfUTC)</span><span id="8914" class="jw jx hh js b fi kc jz l ka kb"><strong class="js hi">// Creating a time requires a location. Common locations are time.Local and time.UTC</strong>.<br/>timeInUTC := time.Date(2009, 1, 1, 12, 0, 0, 0, time.UTC)<br/>sameTimeInBeijing := time.Date(2009, 1, 1, 20, 0, 0, 0, beijing)</span><span id="c46d" class="jw jx hh js b fi kc jz l ka kb"><strong class="js hi"><br/>// Although the UTC clock time is 1200 and the Beijing clock time is 2000, Beijing is 8 hours ahead so the two dates actually represent the same instant.<br/></strong>timesAreEqual := timeInUTC.Equal(sameTimeInBeijing)</span><span id="987b" class="jw jx hh js b fi kc jz l ka kb">fmt.Println(timesAreEqual)<br/>}</span><span id="71ab" class="jw jx hh js b fi kc jz l ka kb"><strong class="js hi">O/P-</strong><br/>true</span></pre><p id="58cf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在本例中，我们发现尽管为北京设置的时间比为timeInUTC设置的时间早8个小时，但仍然显示两个时间相等。背后的原因是，中国没有夏令时，它总是使用固定的8小时时差。</p></div></div>    
</body>
</html>