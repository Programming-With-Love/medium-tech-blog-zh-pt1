<html>
<head>
<title>The Whale in the Refrigerator — An Introduction to Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">冰箱里的鲸鱼Docker简介</h1>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/the-whale-in-the-refrigerator-80f659fea1a4?source=collection_archive---------2-----------------------#2019-02-26">https://medium.com/capital-one-tech/the-whale-in-the-refrigerator-80f659fea1a4?source=collection_archive---------2-----------------------#2019-02-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/488daa68db0720a5a322ba641eeaa90c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uYe9xFOZGFZhlRQCLMBBHQ.png"/></div></div></figure><p id="c6d1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您在DevOps领域呆过一段时间，您可能听说过Docker，并且您肯定听说过“容器”。如果您刚刚开始使用DevOps，或者想知道Docker是什么以及容器是如何工作的，那么请允许我启发您！我是一名DevOps工程师，也是一名Docker爱好者，使用Docker大约五年了，从小型集装箱工具到生产质量容器，我都在使用。我喜欢谈论码头工人。让我们从头开始…</p><h1 id="b7ad" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">什么是容器？</h1><p id="2204" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">如果没有对容器的更高层次的理解，谈论Docker是不可能的。容器(在这个上下文中)是一个<em class="kq">独立的用户空间实例</em>。通常，这种隔离既来自主机的文件系统，也来自主机的网络，这意味着默认情况下，在容器中运行的任何进程都不能直接访问主机的资源。结果是，如果您正在与一个运行在容器内部的shell交互，您将无法(再次默认)访问主机系统上的任何可执行文件。</p><p id="400d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了比较，我们以冰箱为例。冰箱持续运转，保持内部空气温度和湿度。现在，假设你想在冰箱里储存一些剩菜。你把这些剩菜放在一个塑料容器里，然后把那个容器放进冰箱。容器将剩菜与冰箱中的其他物品隔离开，<em class="kq">将冰箱的其他部分与容器</em>隔离开。该容器没有任何冷却剩菜的机制，它<em class="kq">重复使用</em>冰箱的冷却资源。现在假设你把容器放在冰箱里太久，霉菌设法进入了容器。该容器现在保护冰箱中的其余物品免受霉菌影响，确保冰箱中的所有食物不会仅仅因为一件物品变坏而变质。</p><h1 id="0b07" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">Docker是什么(以及它的特别之处)？</h1><p id="2244" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">希望上面提供了对什么是容器的高级理解。那么Docker是什么？Docker 是一个容器化平台，已经成为数据中心容器化的事实标准。然而，Docker不仅仅是集装箱。Docker命令行界面和相关的GUI包含用于轻松存储、传输、构建、检查和运行容器映像的工具——容器映像是Docker的基本分发单元——无论是作为单个容器、容器组，还是在协调的容器集群上。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ks"><img src="../Images/65418aa9de1e0bb830171a2103b89a85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*9M4bpeTQBcXCPlt-"/></div></div></figure><p id="5d42" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您认为这听起来很像虚拟化，即在主机操作系统中运行虚拟机，那么您是正确的。Docker和虚拟机有很多共同点，至少表面上是这样。一般来说，尤其是Docker，容器的优势在于系统资源的使用。如上面冰箱示例中所述，容器重用主机操作系统中可以共享的某些部分和服务。然而，虚拟机必须运行任何给定来宾操作系统的完整版本—从内核到用户界面，带来来宾操作系统带来的所有磁盘和内存开销。这使得Docker容器的启动速度比VM快得多，并且使用的系统资源也少得多。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kx"><img src="../Images/7290aaab70f8b806985135550934b323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*juyMmjQswpKhGKlS"/></div></div></figure><h1 id="fe45" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">哦哦，我会说鲸语！</h1><p id="3d9f" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">市场上的每个软件工具都有一个术语词典，这些术语在该工具的上下文中有特定的含义。Docker也不例外。这里有两个你在和Docker打交道时会经常听到的术语。</p><ul class=""><li id="5ece" class="ky kz hh ir b is it iw ix ja la je lb ji lc jm ld le lf lg bi translated"><strong class="ir hi">映像</strong>或“<strong class="ir hi">容器映像</strong>”:一个轻量级的、独立的、可执行的包，包含运行一个软件所需的一切，包括代码、运行时、库、环境变量、解释器和配置文件</li><li id="393c" class="ky kz hh ir b is lh iw li ja lj je lk ji ll jm ld le lf lg bi translated"><strong class="ir hi">容器</strong>:图像的运行时实例——图像在实际执行时在内存中变成什么样</li></ul><h1 id="5a7e" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">Docker的实际好处</h1><h2 id="bfe8" class="lm jo hh bd jp ln lo lp jt lq lr ls jx ja lt lu kb je lv lw kf ji lx ly kj lz bi translated">运行服务器</h2><p id="61da" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">容器化模型有几个好处，其中许多超出了本文的范围。然而，其中之一是软件安装、升级和删除。让我们以一个web服务器为例。</p><p id="3280" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">传统上，您使用操作系统的软件包管理器来安装您选择的web服务器。这将安装web服务器可执行文件，加上许多其他文件、库和运行web服务器软件的其他要求，还可能加上一些管理实用程序和/或插件。快进到大约六个月之后，网络服务器就可以升级了。您可以通过软件包管理器安装升级。然后你发现新的web服务器版本破坏了你的网站。所以您回滚它，但是为了这样做，您必须卸载当前安装的web服务器版本。您可以再次使用操作系统包管理工具删除它，但更有可能的是，您会在整个磁盘上留下残余的文件和库，更不用说潜在的数据丢失。</p><p id="c5bf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用Docker，安装和删除过程是完全不同的。几乎所有主要的网络服务器都可以从<a class="ae kr" href="https://hub.docker.com" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>获得<em class="kq">官方</em> <strong class="ir hi"> Docker镜像</strong>。您只需将您想要运行的任何web服务器的Docker映像拉到您的本地主机(例如<code class="du ma mb mc md b">docker image pull nginx:latest</code>)上，运行它，现在您就有了一个web服务器。当您需要升级时，您只需获取最新的版本，移除旧的web服务器容器，并启动新的容器。需要回滚吗？只要恢复到旧的图像。当您不再需要在该主机上运行web服务器时，只需删除映像(例如<code class="du ma mb mc md b">docker image remove nginx:latest</code>)。没有什么需要卸载的，因为所有的web服务器可执行文件都在Docker映像中，并且您的系统没有任何额外的库或其他散布在文件系统中的文件。</p><h2 id="a29f" class="lm jo hh bd jp ln lo lp jt lq lr ls jx ja lt lu kb je lv lw kf ji lx ly kj lz bi translated">发展</h2><p id="be04" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">Docker的另一个实际用途是用于开发。Docker可以在任何现代桌面操作系统上运行，并提供与Linux服务器相同的功能。这意味着任何Docker映像都可以在您的笔记本电脑或台式机上本地运行，让您可以轻松访问您的目标架构。</p><p id="345d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">例如，假设您的目标架构包括一个Redis缓存。如果您需要编写与Redis缓存对话的代码，您可以在云中启动一个虚拟机，安装Redis并确保安全组允许您与它对话，记下它的FQDN或IP地址，然后开始使用它进行开发。或者，您可以只<code class="du ma mb mc md b">docker image pull redis </code>、<code class="du ma mb mc md b">docker container run redis</code>并在您的开发计算机上本地运行Redis缓存。当您完成Redis缓存时，不需要卸载或清理Redis安装，只需销毁Redis容器并删除Redis映像。</p><h1 id="b6f8" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">Docker设置</h1><p id="22f5" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">Docker为<a class="ae kr" href="https://docs.docker.com/docker-for-mac/install/" rel="noopener ugc nofollow" target="_blank"> Macintosh </a>和<a class="ae kr" href="https://docs.docker.com/docker-for-windows/install/" rel="noopener ugc nofollow" target="_blank"> Windows </a>电脑提供免费安装程序。获取“稳定”版本的安装程序并安装它。如果您遇到任何问题，请参考上面链接的页面，了解故障排除程序。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es me"><img src="../Images/7c9ac6576f279d270ff86f88cb58aaac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*2vLRjSJbbiyoqp-5"/></div></div></figure><p id="759c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">安装完成后，通过在终端中运行<code class="du ma mb mc md b">docker run hello-world</code>来测试它是否正常工作。假设您与互联网的连接不受限制，您应该会看到Docker从Docker Hub拉出一个名为“hello world”的图像，一些样板文本应该会打印到终端上。如果图像拉似乎挂起，或者如果你在一个公司代理后面，你可能需要编辑Docker的代理信息。</p><p id="fca5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">单击菜单栏(Mac)或系统托盘(Windows)中的Docker whale图标，选择“首选项…”然后选择“代理”选项卡，打开“首选项”对话框。然后尝试再次运行<code class="du ma mb mc md b">docker run hello-world</code>。如果它仍然不工作，看看上面链接的那些页面上的文档。</p><h1 id="47cf" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">练习:运行Web服务器</h1><p id="2b23" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">所以我们现在有Docker运行，让我们用它做点什么。</p><p id="b8f2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在本例中，我们将提取一个Web服务器的Docker映像(Nginx)，启动Web服务器，并验证它是否正常工作。这将涵盖以下Docker命令:</p><p id="c68c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">&gt;<code class="du ma mb mc md b">docker image pull</code></p><p id="f0a8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">&gt;<code class="du ma mb mc md b">docker image list</code></p><p id="43fe" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">&gt;<code class="du ma mb mc md b">docker image rm</code></p><p id="de6d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">&gt;<code class="du ma mb mc md b">docker container run</code></p><p id="2ec0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">&gt;<code class="du ma mb mc md b">docker container stop</code></p><p id="7311" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">&gt;<code class="du ma mb mc md b">docker container rm</code></p><h1 id="c575" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第1部分:提取图像</h1><p id="c8bc" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">我将假设您的计算机上正确运行了Docker。如果没有，请参考上面针对您的平台的链接。这里的第一步是运行某种终端，要么是MacOS上的terminal或iTerm2，要么是Windows上的CMD或PowerShell。</p><p id="60b5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">进入终端后，运行以下命令:</p><pre class="kt ku kv kw fd mf md mg mh aw mi bi"><span id="ac00" class="lm jo hh md b fi mj mk l ml mm">&gt; docker image pull nginx</span></pre><p id="21c2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您应该看到Docker开始从Docker Hub中提取图像。这不会花很长时间，因为官方的Nginx图像相对较小。</p><p id="3233" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">完成后，当您返回提示时，运行以下命令:</p><pre class="kt ku kv kw fd mf md mg mh aw mi bi"><span id="f637" class="lm jo hh md b fi mj mk l ml mm">&gt; docker image list</span></pre><p id="ba4f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您应该会看到类似这样的内容:</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mn"><img src="../Images/12039b7d67694a63007b97e569657b41.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*AefL_ojEb8S8VuI4"/></div></div></figure><h1 id="5b46" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第2部分:运行映像</h1><p id="630e" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">你闪亮的新Nginx图像已经下载，但在我们运行它之前，它对我们没有任何好处。</p><p id="11a3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要启动Nginx web服务器，请运行以下命令:</p><pre class="kt ku kv kw fd mf md mg mh aw mi bi"><span id="0c75" class="lm jo hh md b fi mj mk l ml mm">&gt; docker container run -d -p 80:80 nginx:latest</span></pre><p id="a9b4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在我们继续之前，让我为您分解一下这个命令，因为我引入了一些重要的新命令行开关。</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mo"><img src="../Images/7b3d28eb13341ec7a5c9265f4828591e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*aZpNmTuk-jxZdsSs"/></div></div></figure><ul class=""><li id="77ef" class="ky kz hh ir b is it iw ix ja la je lb ji lc jm ld le lf lg bi translated"><code class="du ma mb mc md b">docker container run</code> =基本停靠命令</li><li id="363e" class="ky kz hh ir b is lh iw li ja lj je lk ji ll jm ld le lf lg bi translated"><code class="du ma mb mc md b">-d</code> =分离(即发送到后台)</li><li id="0b01" class="ky kz hh ir b is lh iw li ja lj je lk ji ll jm ld le lf lg bi translated"><code class="du ma mb mc md b">-p 80:80</code> =发布(即将端口从主机连接到容器)</li><li id="4eab" class="ky kz hh ir b is lh iw li ja lj je lk ji ll jm ld le lf lg bi translated">发布开关的模式为<code class="du ma mb mc md b">host:container</code>或<code class="du ma mb mc md b">outside:inside</code></li><li id="7bf1" class="ky kz hh ir b is lh iw li ja lj je lk ji ll jm ld le lf lg bi translated">这就是使容器可访问的魔力</li><li id="504f" class="ky kz hh ir b is lh iw li ja lj je lk ji ll jm ld le lf lg bi translated"><code class="du ma mb mc md b">nginx:latest</code> =图像名称</li></ul><p id="61b4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当您运行上面的命令时，假设一切都按照预期的方式发生，Docker应该会返回一个看起来像是随机的数字字符串，如下所示:</p><p id="b310" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du ma mb mc md b"><em class="kq">de3a09f56fbd4d1d6c5cf5c7b43ac42257bdc7a92f3e7cccde42d9f07027f961</em></code></p><p id="0b1d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这是容器的唯一ID。有许多方法可以识别/指定一个容器，但是我们将在以后的文章中讨论这些方法。</p><p id="34db" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在您已经启动了Nginx容器，让我们检查一下以确保它工作正常。在web浏览器中(或使用<code class="du ma mb mc md b">curl</code>，导航到<a class="ae kr" href="http://localhost:80" rel="noopener ugc nofollow" target="_blank"> http://localhost:80 </a>。您应该会看到标准的Nginx欢迎页面:</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mp"><img src="../Images/c5f39cb6d9ec1b3f85b45c646c65edd8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*r62MfwMRtn-r-Th3"/></div></div></figure><p id="800b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">恭喜你！您刚刚运行了您的第一个Docker容器。</p><h1 id="7f93" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">第3部分:清理</h1><p id="03b4" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">所以现在我们完成了这个Nginx容器。如果我不告诉你如何收拾自己的残局，那就是我的失职。要停止这个Docker容器，我们需要知道它的ID。你可以从上面注意到它，但是有一个更简单的方法。</p><p id="5940" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">执行以下命令:</p><pre class="kt ku kv kw fd mf md mg mh aw mi bi"><span id="f265" class="lm jo hh md b fi mj mk l ml mm">&gt; docker container ls</span></pre><p id="7eb1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您应该得到这样的回复:</p><figure class="kt ku kv kw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ks"><img src="../Images/ec57de4f861c93e7220240bd36a92883.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uFArruk4zaRy477q"/></div></div></figure><p id="e9a2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">集装箱ID在左边(<code class="du ma mb mc md b">20fe68eb05e5</code>)，自动生成的名称(<code class="du ma mb mc md b">affectionate_davanci</code>)在右边。这两种方法中的任何一种都可以用来阻止和破坏集装箱。</p><p id="6bf4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要停止容器:</p><pre class="kt ku kv kw fd mf md mg mh aw mi bi"><span id="0e88" class="lm jo hh md b fi mj mk l ml mm">&gt; docker stop &lt;container ID or container name&gt;</span></pre><p id="8e4a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在如果你尝试访问<a class="ae kr" href="http://localhost:80" rel="noopener ugc nofollow" target="_blank"> http://localhost:80 </a>，浏览器就会超时。也就是说，Docker容器实际上并没有消失，我们只是“停止”了它。再次执行容器列表命令:</p><pre class="kt ku kv kw fd mf md mg mh aw mi bi"><span id="1098" class="lm jo hh md b fi mj mk l ml mm">&gt; docker container list</span></pre><p id="81ae" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您应该只取回标题行，这意味着没有“运行中”的容器。现在执行这个命令:</p><pre class="kt ku kv kw fd mf md mg mh aw mi bi"><span id="5782" class="lm jo hh md b fi mj mk l ml mm">&gt; docker container list -a</span></pre><p id="0f12" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du ma mb mc md b">-a</code>开关告诉Docker显示所有运行和停止的集装箱。您应该看到您的Nginx容器，但是在status下应该显示类似于"<code class="du ma mb mc md b">Exited (0) About a minute ago</code>"的内容。让我们永远摆脱那个容器吧。</p><p id="261d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">运行以下命令:</p><pre class="kt ku kv kw fd mf md mg mh aw mi bi"><span id="f2b6" class="lm jo hh md b fi mj mk l ml mm">&gt; docker container rm &lt;container id or container name&gt;</span><span id="3820" class="lm jo hh md b fi mq mk l ml mm">&gt; docker container list -a</span></pre><p id="72f8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Nginx容器现在应该没有了。也就是说，Nginx <em class="kq">图像</em>还在。</p><pre class="kt ku kv kw fd mf md mg mh aw mi bi"><span id="9eb2" class="lm jo hh md b fi mj mk l ml mm">&gt; docker image ls</span></pre><p id="ba0d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这应该向您显示我们之前<em class="kq">从</em>中提取的相同Docker图像。要删除此图像:</p><pre class="kt ku kv kw fd mf md mg mh aw mi bi"><span id="a6ca" class="lm jo hh md b fi mj mk l ml mm">&gt; docker image rm nginx:latest</span><span id="4b71" class="lm jo hh md b fi mq mk l ml mm">&gt; docker image ls</span></pre><p id="cab6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">结果应该只是标题行，因为系统上应该没有Docker图像。</p><h1 id="682b" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">结论</h1><p id="5ac9" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">在本文中，我们讨论了一些容器背后的理论，以及使用Docker的容器的实际执行。我们在电脑上安装了Docker并运行了一个web服务器，然后我们清理了电脑上的任何残留痕迹。</p><p id="faea" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我希望你喜欢这篇文章，并且至少对Docker是什么以及你为什么想使用它有了一个基本的概念。如果有，请关注后续文章，了解更高级的Docker主题，包括<a class="ae kr" rel="noopener" href="/capital-one-tech/whale-in-the-grocery-store-an-introduction-to-docker-and-docker-images-311319688692">构建Docker映像和Docker文件</a>。</p></div><div class="ab cl mr ms go mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ha hb hc hd he"><h2 id="8539" class="lm jo hh bd jp ln lo lp jt lq lr ls jx ja lt lu kb je lv lw kf ji lx ly kj lz bi translated">相关:</h2><ul class=""><li id="7470" class="ky kz hh ir b is kl iw km ja my je mz ji na jm ld le lf lg bi translated"><a class="ae kr" rel="noopener" href="/capital-one-tech/secure-docker-containers-require-secure-applications-75eb358abef9">安全Docker容器需要安全应用</a></li><li id="268e" class="ky kz hh ir b is lh iw li ja lj je lk ji ll jm ld le lf lg bi translated"><a class="ae kr" rel="noopener" href="/capital-one-tech/multi-stage-builds-and-dockerfile-b5866d9e2f84">使用多阶段构建来简化和标准化构建流程</a></li><li id="1608" class="ky kz hh ir b is lh iw li ja lj je lk ji ll jm ld le lf lg bi translated"><a class="ae kr" rel="noopener" href="/capital-one-tech/whale-in-the-grocery-store-an-introduction-to-docker-and-docker-images-311319688692">杂货店里的鲸鱼Docker文件和Docker图像介绍</a></li></ul></div><div class="ab cl mr ms go mt" role="separator"><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw mx"/><span class="mu bw bk mv mw"/></div><div class="ha hb hc hd he"><p id="425e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这些是作者的观点。除非本帖中另有说明，否则Capital One不隶属于所提及的任何公司，也不被其认可。使用或展示的所有商标和其他知识产权都是其各自所有者的所有权。本文为2019首都一。</p></div></div>    
</body>
</html>