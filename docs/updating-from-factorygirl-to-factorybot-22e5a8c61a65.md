# 从 FactoryGirl 更新到 FactoryBot

> 原文：<https://medium.com/square-corner-blog/updating-from-factorygirl-to-factorybot-22e5a8c61a65?source=collection_archive---------2----------------------->

> 注意，我们已经行动了！如果您想继续了解 Square 的最新技术内容，请访问我们的新家[https://developer.squareup.com/blog](https://developer.squareup.com/blog)

2017 年 10 月 24 日，ThoughtBot 团队将他们广受欢迎的 Ruby 测试库 FactoryGirl 更名为 [FactoryBot](https://github.com/thoughtbot/factory_bot) 。他们[解释了他们的推理](https://robots.thoughtbot.com/factory_bot#why):

> 那些被名字困扰的人都担心，在男性主导的空间里，女性性别的名字(用于软件库和工具)可能会有问题。[……]我们得出结论，即使不是每个人都同意，许多人缺乏关心也不应该阻止名称被更改。聪明不应该以他人感到被边缘化为代价而受到青睐。

我们一会儿会回到这个话题。

前几天下班有点时间，就按照他们的[升级指令](https://github.com/thoughtbot/factory_bot/blob/4-9-0-stable/UPGRADE_FROM_FACTORY_GIRL.md)对[广场工资表](https://squareup.com/payroll)代码库进行升级。我们的应用程序的前端测试与后端 Ruby 测试服务器对话，所以我也必须转换这些文件(只需在他们的`grep` / `sed`命令中将`*.rb`更改为`*.js`和`*.coffee`)。从阅读说明到提交拉取请求的整个过程花了八分半钟。十八分十四秒后，我们的持续集成系统 [Kochiku](https://github.com/square/kochiku) 将其标记为绿色，经过几分钟的审核后，完成。

我第一次遇到 FactoryGirl 是在 6 月份开始在 Square 工作的时候。这个名字对我来说有点奇怪，奇怪到我想知道作者为什么选择这个名字。在我的探索中，我[并不是](https://github.com/thoughtbot/factory_bot/issues/785)一个人:项目开发者在 2016 年写下了[这个解释](https://github.com/thoughtbot/factory_bot/commit/903d4325feb9c373863601cdab3fca4b6118fca7#diff-ef754c36537453011c86ea82844bc6e0)来澄清这个名字的来源。我耸耸肩，认为它迷失在翻译中，继续前进。话又说回来，我是一个[顺其自然](https://en.wikipedia.org/wiki/Cisgender)的人，真的不需要考虑太多这些事情。

它困扰了其他人。Github 用户 [*tastycode*](https://github.com/tastycode) 提交了一个[问题](https://github.com/thoughtbot/factory_bot/issues/921)询问名称，称他们考虑将其简单地重命名为“工厂”。经过短暂的交流，在此期间 *tastycode* 建议了新的名称，项目负责人同意更改该名称，几个月后 ThoughtBot 开发者[*geraldius*](https://github.com/Euraldius)将该库重命名为 FactoryBot。

用户 [*maxkwallace*](https://github.com/maxkwallace) 提供了这个轶事来帮助人们理解为什么这个名字有问题:

> 我正在和一位女工程师研究一些代码，注意到 FactoryGirl 这个名字导致了一次尴尬的交流。[……]附近的另一个家伙开了一个关于[工厂女孩]“为你工作”的玩笑。和我一起工作的那个女的没有明确说她觉得不舒服(人们几乎从来不会这样)，但是我的主观印象是她觉得不舒服。我也感到不舒服。

这一集讲述了女性经常面临的微侵犯，有时是每天都面临的微侵犯:暗示她们是不同的、不寻常的，甚至可能是不受欢迎的，至少是男人的软件工程世界中的客人。虽然个别情况可能看起来是良性的，但它们在一生中累积起来，随着时间的推移，会使妇女边缘化。这也发生在有色人种、LGBTQ 人群中，事实上，几乎所有不是“标准”异性恋白人男性的群体中。也许它甚至影响了这些同样的白人男性。

我们都有权作为盟友对抗和帮助解决这些微侵略。当风险较低时，纠正行为不仅有更大的机会促进增长，而且还能消除导致更大问题的深层根源。当观察到需要不到十分钟的工作的一个明显微小的变化在许多(主要是男性)开发人员中变得非常有争议时，向前支持积极变化的重要性就变得很明显，这可以从 *tastycode* 的[问题](https://github.com/thoughtbot/factory_bot/issues/921)的评论和表情符号投票中看出。

在成为我们未被充分代表的朋友的更好盟友方面，这条线索给了我几个教训:

1.  *审视我们对改变的抗拒。*
    我们大多数人都倾向于抗拒改变。如果有人要求我做出改变，而我对这种代价感到愤怒，我应该检查这种改变实际上让我付出了什么，以及它对要求改变的人有什么影响。如果我的不安与成本不成比例，那么我的特权就有可能显现出来。
2.  *抵制冷漠。*
    当一个问题没有直接影响到我们时，我们往往会不太关注它。当“我们”是当地的多数群体时，这意味着我们较少关注少数群体的问题，这只会进一步加剧边缘化。如果我发现自己认为某个问题并不重要，但有人告诉我对他们来说很重要，我应该花时间去倾听。我应该鼓励我的同龄人也这样做。
3.  *不要把沉默当成同意。*
    当人们感到舒服的时候，他们更容易表达自己的意见。相反，当人们感到被边缘化时，他们不太可能在一个问题似乎有争议时大声疾呼。我不应该假设某人的沉默意味着他们对此事没有想法，或者同意这个问题不重要。我不应该让房间里最响亮的声音左右决策，而应该立即或在单独的谈话中征求其他意见。
4.  *不要把来自特权之地的感受和“逻辑”混为一谈。当世界以某种方式呈现在我们面前时，我们很容易认为这是因为我们的世界观实际上是合乎逻辑的、理性的。这是一种知识上的傲慢，不仅会导致进一步的边缘化，还会阻碍我们扩大对人类同胞的了解。如果我不明白为什么一个问题很重要，我不应该认为这是因为其他人不理性或不合逻辑；我应该随时准备质疑我的假设。*

以笔者的拙见，上述内容有助于更好的人际交往。

> "聪明不应该以他人感到被边缘化为代价而受到青睐。"

建立一个多元化和包容性的环境非常重要:首先，因为平等对待所有人具有内在价值，其次，因为它培育了更强大、更可持续的企业和社区。请和我一起朝着这个目标努力，并在评论中分享你的想法！