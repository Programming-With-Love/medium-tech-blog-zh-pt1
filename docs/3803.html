<html>
<head>
<title>Monit installation and configuration on Linux/Unix</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Linux/Unix上Monit的安装和配置</h1>
<blockquote>原文：<a href="https://medium.com/globant/monit-installation-and-configuration-on-linux-unix-8013dd22fe45?source=collection_archive---------1-----------------------#2021-12-30">https://medium.com/globant/monit-installation-and-configuration-on-linux-unix-8013dd22fe45?source=collection_archive---------1-----------------------#2021-12-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="ae1e" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">介绍</h1><p id="34bf" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">Monit tool是一个免费的开源工具，用于管理和监控UNIX系统。它进行自动维护和修复，并可以在出现错误的情况下执行有意义的操作，例如，如果某个进程没有运行，则启动该进程；如果没有响应，则重新启动该进程；如果该进程占用大量资源，则停止该进程。Monit有一个用户友好的网络界面，您可以直接查看系统状态并设置流程。我们可以使用Monit来监视文件、目录和文件系统的变化。通过使用Monit，我们将能够监控远程主机的TCP/IP端口、服务器协议和ping。Monit有自己的日志文件来验证服务。它有关于恢复状态的任何关键问题的警报。</p><p id="1955" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">本文涵盖了以下几点</p><ol class=""><li id="1618" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">Monit主收集器上的Monit安装</li><li id="4f41" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">在客户端上安装监控代理</li><li id="b7fa" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">Monit的配置</li><li id="e4c0" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">监控服务</li><li id="ff17" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">参考</li></ol><h1 id="e52e" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak"> 1。Monit主收集器上的Monit安装</strong></h1><p id="1715" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">按照以下步骤在主收集器上下载monit:</p><p id="9db7" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">打开终端/控制台，在Linux上安装monit并下载zip包</p><blockquote class="kt ku kv"><p id="1c35" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated">【https://mmonit.com/dist/mmonit-3.7.7-linux-x64.tar.gz】<a class="ae la" href="https://mmonit.com/dist/mmonit-3.7.7-linux-x64.tar.gz" rel="noopener ugc nofollow" target="_blank"><strong class="je hi"/></a></p><p id="04cf" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated">拉开焦油</p><p id="a2ad" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated"><strong class="je hi"> #冈兹普mmonit-3.7.7-linux-x64.tar.gz</strong></p><p id="93ce" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated"><strong class="je hi"># tar-xvf mmonit-3.7.7-linux-x64.tar</strong></p><p id="2cdd" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated">使用以下命令启动Monit:</p><p id="358c" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated"><strong class="je hi"># CD mmunit-3 . 7 . 6-Linux-x64/bin</strong></p><p id="7a43" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated"><strong class="je hi"> #。/mmunit开始</strong></p></blockquote><h1 id="e452" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak"> 2。客户端服务器上的Monit安装</strong></h1><p id="0c63" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated"><strong class="je hi">先决条件</strong></p><p id="9c33" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">默认情况下，Monit工具在系统库不可用，您需要添加并启用第三方<a class="ae la" href="https://www.tecmint.com/how-to-enable-epel-repository-for-rhel-centos-6-5/" rel="noopener ugc nofollow" target="_blank"> epel库</a>，以便在您的RHEL/CentOS系统下安装Monit包。一旦添加了epel存储库，就可以通过运行下面的yum命令来安装这个包。对于Ubuntu/Debian/Linux Mint，用户可以使用所示的apt-get命令轻松安装。</p><p id="e853" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在RedHat/CenOS/Fedora/上</p><blockquote class="kt ku kv"><p id="fec3" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated"><strong class="je hi"> # yum安装监视器</strong></p><p id="b3ff" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated">在Ubuntu/Debian/Linux上</p><p id="66ef" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated"><strong class="je hi"> $ sudo apt-get安装监视器</strong></p></blockquote><h1 id="7eda" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak"> 3。显示器的配置</strong></h1><p id="2c5f" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">Monit有一个使用web服务器在端口2812上运行的web接口。打开从主服务器(Monit)到所有客户端服务器的端口2812，反之亦然。monit的主配置文件位于(RedHat/CentOS/Fedora)下的/etc/monit.conf和(Ubuntu/Debian/Linux Mint)下的/etc/monit/monitrc文件中。然后，取消monit.conf或monitrc文件下的以下部分的注释，并添加您的服务器的IP地址或域名，允许任何人连接和更改Monit用户和密码，或者您可以使用默认的。</p><figure class="lc ld le lf fd lg er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lb"><img src="../Images/5ac8abaeaa552205c5b0f15609e4e6cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6nluQF50xkztcOodaIw9OQ.png"/></div></div></figure><p id="f7dd" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">现在，使用以下命令启动Monit服务以获取新的配置设置:</p><blockquote class="kt ku kv"><p id="b5a1" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated"><strong class="je hi"> # /etc/init.d/monit开始</strong></p></blockquote><p id="e6bf" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">现在，您可以使用“http://localhost:2812”连接到Monit web接口，如下图所示。您可以使用在(RedHat/CentOS/Fedora)下的/etc/monit.conf和(Ubuntu/Debian/Linux Mint)的/etc/monit/monitrc文件中设置的用户名和密码。</p><figure class="lc ld le lf fd lg er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es ln"><img src="../Images/1fb8b83bcd249de3fdb472d5fb713007.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pgZCTVdWBK9aeTY2CXTUvA.png"/></div></div></figure><h1 id="0c20" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak"> 4。监控服务</strong></h1><p id="dcbb" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">现在我们需要在web界面设置完成后添加我们想要监控的程序。这些程序应该添加到(RedHat/CentOs/Fedora)下的/etc/monit.conf和(Ubuntu/Debian/Linux Mint)的/etc/monit/monitrc文件中。</p><p id="cc7d" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">示例:</p><p id="2f44" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">微服务</p><figure class="lc ld le lf fd lg er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lo"><img src="../Images/fc6f1ddc6a006e3998d654343edae963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9vc29R8z0qcQiNRtcFX8rw.png"/></div></div></figure><p id="122a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">CPU内存监控</p><figure class="lc ld le lf fd lg er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lp"><img src="../Images/60a350c96dd8b26d55a39aaa0f577b8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P9FOIn9xWsEcdrXBfy-YhA.png"/></div></div></figure><p id="b855" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">磁盘空间</p><figure class="lc ld le lf fd lg er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lo"><img src="../Images/480b17d096be5478a9a1ed35dc582fc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*b4cJQq46NDbIUPrRFXL9yg.png"/></div></div></figure><p id="f6a8" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">记录</p><figure class="lc ld le lf fd lg er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lp"><img src="../Images/9ab559f298d4cb8763c5b560f9b3796e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GzYqL0Ql-Q61d4j7JGA2Qg.png"/></div></div></figure><p id="5330" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">继续之前，请检查monit语法是否有错误。</p><p id="71ad" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">检查monit语法的命令是</p><blockquote class="kt ku kv"><p id="8f81" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated"><strong class="je hi"> # monit -t </strong></p><p id="3577" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated"><strong class="je hi"> $ sudo monit -t </strong></p></blockquote><p id="9ba5" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">如果您得到消息“<strong class="je hi">控制文件语法正常</strong>”，那么我们就可以开始了。</p><p id="5dc0" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">要启动monit服务，可以使用以下命令。</p><blockquote class="kt ku kv"><p id="d0cb" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated"><strong class="je hi"> # /etc/init.d/monit重启</strong></p><p id="91f8" class="jc jd kw je b jf ka jh ji jj kb jl jm kx kc jp jq ky kd jt ju kz ke jx jy jz ha bi translated"><strong class="je hi"> $ sudo /etc/init.d/monit重启</strong></p></blockquote><p id="ae72" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">重新启动monit后，点击URL“http://localhost:2812”，您将能够看到您添加到(RedHat/CentOs/Fedora)下的/etc/monit.conf和(Ubuntu/Debian/Linux Mint)的/etc/monit/monitrc文件中的所有程序的状态。</p><h1 id="cdbe" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak"> 5。参考文献</strong></h1><p id="ae9f" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated"><a class="ae la" href="https://mmonit.com/monit/documentation/monit.html" rel="noopener ugc nofollow" target="_blank">https://mmonit.com/monit/documentation/monit.html</a></p><p id="e842" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><a class="ae la" href="https://mmonit.com/documentation/" rel="noopener ugc nofollow" target="_blank">https://mmonit.com/documentation/</a></p><p id="fc09" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">感谢您阅读我的文章。希望对你在Linux/Unix上设置Monit有所帮助。</p></div></div>    
</body>
</html>