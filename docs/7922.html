<html>
<head>
<title>Building The Next-Generation E-Commerce Platform For 10X Growth</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建下一代电子商务平台，实现10倍增长</h1>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/building-a-next-generation-e-commerce-platform-for-10x-growth-b677ea35de89?source=collection_archive---------0-----------------------#2020-10-23">https://medium.com/walmartglobaltech/building-a-next-generation-e-commerce-platform-for-10x-growth-b677ea35de89?source=collection_archive---------0-----------------------#2020-10-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="d3ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作者:西达尔特·帕特奈克</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/3ca4fa390a26bf063614a48443a017a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nx1WQcXfq1B8JqtltnqytA.jpeg"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Photo credit: Chandler Cruttenden</figcaption></figure><h1 id="4f96" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">介绍</h1><p id="9a6d" class="pw-post-body-paragraph ie if hh ig b ih kq ij ik il kr in io ip ks ir is it kt iv iw ix ku iz ja jb ha bi translated">在本帖中，我们将讨论公共云上的云原生未来电子商务平台的架构。我们将讨论手头的问题、构建这样一个新平台背后的动机、我们遵循的架构指南和操作原则、我们选择的技术堆栈以及这些决策背后的基本原理。这篇文章将关注云原生的架构方面，所以我建议你参考我之前关于<a class="ae kv" rel="noopener" href="/walmartglobaltech/cloud-native-application-architecture-a84ddf378f82">云原生应用架构</a>的博客作为预读。</p><p id="4bc1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">背景是沃尔玛的电子商务业务之一，年收入约为50亿美元。该业务正以每年30–40%的速度增长，并且该业务期望该技术能够扩展以支持这种超高速增长。实际上，当前的电子商务应用程序已经存在了几年，建立在商业现货供应(COTS)的整体软件上，从开发、支持和硬件成本的角度来看，它不具有可伸缩性，而且成本高昂。我们面临着在典型的monolith应用程序中看到的各种问题，例如极难扩展到某个点之外，发布周期延迟，在部署期间需要团队之间的大量协调和沟通，开发缓慢，QA周期长，无法通过快速实验和利用新技术进行创新。</p><p id="8b21" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些问题促使我们在公共云上使用现代技术从头开始构建一个新平台，其目标如下:</p><ul class=""><li id="a3e8" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated"><strong class="ig hi">高性能、大规模可扩展</strong> —应该能够扩展到当前吞吐量的10倍。在电子商务应用中，吞吐量通常用PVM(每分钟页面浏览量)和OPM(每分钟订单量)来衡量。我们希望扩展到当前指标的10倍</li><li id="1e92" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">高质量</strong>——无Bug的高质量软件</li><li id="8f8b" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">上市时间</strong> —应该能够快速构建新功能，频繁部署</li><li id="0d84" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi"> Elastic — </strong>我们一年中会举办多次促销活动。该平台应在此类事件期间扩大规模，并在这些事件之后缩小规模。遵循按使用付费的模式</li><li id="19b9" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">创新</strong> —应该能够试验&amp;快速采用新技术</li><li id="e39e" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">经济高效</strong> —解决方案应该经济高效。应该随着业务逐步扩展</li><li id="4e11" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">高可用性</strong> —系统停机与收入损失直接相关。该系统应提供99.99的正常运行时间</li></ul><h1 id="92d1" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">架构指南和操作原则</h1><p id="ac5d" class="pw-post-body-paragraph ie if hh ig b ih kq ij ik il kr in io ip ks ir is it kt iv iw ix ku iz ja jb ha bi translated">我们制定了一些架构指导方针和设计模式，并严格遵循。我们确保微服务和各个团队都遵循这些原则。在随后的部分中，我们将深入这些领域，并从<strong class="ig hi"> <em class="lk">购物车&amp;结账服务</em> </strong>的角度讨论实现细节。</p><ul class=""><li id="e348" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated"><strong class="ig hi">同类最佳技术</strong> —使用多云战略，并使用来自Azure、GCP等不同公共云提供商的同类最佳技术。此外，比起IAAS，我更喜欢PAAS。我们的大部分服务都是建立在Azure之上的。还有一些利用GCP的特定服务。支付、税务等关键服务在私有云上运行</li><li id="be46" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">面向领域的微服务架构</strong> —我们基于领域边界将整体分为多个微服务。我们最终获得了目录、搜索、购物车、结账、促销、支付、库存、订单、退货等服务。这些服务是以这样的方式独立设计的，它们由各自的团队管理，拥有明确的所有权，提供API合同，使用最合适的技术堆栈，独立测试，部署时有明确的关注点分离</li><li id="b6e9" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">容器化部署</strong> —使用docker技术将微服务打包为轻量级容器，并在Kubernetes平台中进行编排</li><li id="bcee" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">无状态、全渠道&amp;可大规模扩展</strong> —无共享状态，使用NoSQL数据库可大规模扩展(尽可能实现最终一致性)，尽可能缓存，多区域主动-主动部署拓扑</li><li id="01f7" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">弹性</strong> —按需放大&amp;缩小。从容器到数据库的所有级别的自动缩放</li><li id="2959" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">核心的弹性</strong> —系统应对故障具有弹性。还应通过影响尽可能少的客户来最小化爆炸半径</li><li id="3a2c" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi"> STOSA </strong> —单一团队拥有的服务架构。该团队负责从开发到部署再到生产支持的整个过程</li><li id="2f5c" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">敏捷开发运维&amp;自动化</strong> —持续集成&amp;部署策略，实现从开发到部署的一切自动化。频繁部署(一天多次)</li><li id="d16d" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">可观察性</strong> —每个服务都用服务级别指标声明它们的服务级别目标(SLO)。例如，平均响应时间、P95响应时间、错误百分比、吞吐量(每秒请求数)。所有这些sli都使用仪表板进行监控。定义了警报，一旦阈值被突破，就会触发警报并采取适当的措施</li><li id="44e7" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">经济高效</strong> —应选择合适的技术，同时考虑成本因素。此外，还会定期监控云资源，以确保有效利用资源</li></ul><h1 id="0f15" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">微服务部署架构</h1><p id="86be" class="pw-post-body-paragraph ie if hh ig b ih kq ij ik il kr in io ip ks ir is it kt iv iw ix ku iz ja jb ha bi translated">Kubernetes已经成为运行容器化工作负载的事实上的平台。我们所有的微服务都部署到Azure Kubernetes服务中。Kubernetes提供了许多重要功能，如服务发现/负载平衡、基于配置的CPU/内存跨虚拟机调度pod/容器、部署策略(蓝/绿、滚动更新)、基于水平pod自动缩放器的自动缩放&amp;节点自动缩放器、管理应用pod的生命周期。我们还使用<a class="ae kv" href="https://istio.io/" rel="noopener ugc nofollow" target="_blank"> Istio </a>作为服务网格技术，该技术使用sidecar模型在流量管理、负载平衡、金丝雀部署、微服务之间的安全通信和完整服务拓扑的可观察性方面获得更大的灵活性。</p><p id="1f43" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们遵循主动-主动模式来实现高吞吐量和HA/DR。服务部署在Azure东部和西部地区。未来，我们计划部署到更多地区。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ll"><img src="../Images/ad6ab41b5b4ae9595406b4e4f3ce9622.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x_1pY4rDrSZOScsFdXZL6A.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Deployment Topology</figcaption></figure><h1 id="7d81" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">水平可扩展性</h1><p id="359a" class="pw-post-body-paragraph ie if hh ig b ih kq ij ik il kr in io ip ks ir is it kt iv iw ix ku iz ja jb ha bi translated">为了实现线性可伸缩性，该架构使用各种策略构建，如异步处理、无状态、缓存、自动伸缩、高性能NoSQL数据库、多区域部署等。让我们详细研究一下这些方面。</p><p id="aa34" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">异步处理</strong></p><p id="5a92" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">像Cart &amp; Checkout这样的服务依赖于多个远程服务，这是它们处理逻辑的一部分。这些服务已经使用异步处理框架实现，如<a class="ae kv" href="https://docs.spring.io/spring-framework/docs/current/spring-framework-reference/web-reactive.htmlhttps://docs.spring.io/spring-framework/docs/current/spring-framework-reference/web-reactive.html" rel="noopener ugc nofollow" target="_blank"> Webflux </a>、Completable Future、异步HTTP客户端。这种非阻塞和反应式的处理特性有助于我们用相对较小的硬件配置实现高吞吐量</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lm"><img src="../Images/ef56a590415deb2eaa3cf91aa8d005f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1262/format:webp/1*dt4f5GQi6GwW8bDUUvlnog.png"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">Non-Blocking IO</figcaption></figure><p id="0ec4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">Kubernetes中的自动缩放</strong></p><p id="b711" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">已经为自动缩放配置了水平窗格自动缩放规则。每当流量激增时，就会添加新的单元和节点，服务也会随之扩展。同样如上图所示，服务已经被部署到多个Azure区域中。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ln"><img src="../Images/084c085cd4775ca7330b001532b40fb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/format:webp/1*TJiQHEz9NnjqE3BbrsVhtA.png"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">Autoscaling in Kubernetes</figcaption></figure><p id="bc23" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> Azure Cosmos可扩展性</strong></p><p id="c13b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们早期的应用程序是基于包含数百个表的RDBMS的，我们在可伸缩性方面面临很多问题。在设计新平台时，我们确信NoSQL是前进的方向。我们选择了Azure Cosmos DB，它是一个全球分布式的、水平可伸缩的、无模式的数据库，专为全球规模而设计。数据模型是用正确的分区键和访问模式精心设计的。对于我们的用例，访问总是基于密钥(getDocumentByID ),这为我们99%的调用提供了不到10 Ms的延迟。从一致性的角度来看，我们使用会话一致性。当传递正确的会话令牌时，Cosmos确保一致的读取。因此，在每次写入之后，令牌被存储在键值存储(Redis)中的相应文档中，并在后续读取中使用该令牌。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lo"><img src="../Images/17819274c49c14f1760f8a917edcf8b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OGxOZSpFjSDQDTcWCok3Hg.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Azure Cosmos</figcaption></figure><h1 id="e14c" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">弹性/混沌工程</h1><p id="63fb" class="pw-post-body-paragraph ie if hh ig b ih kq ij ik il kr in io ip ks ir is it kt iv iw ix ku iz ja jb ha bi translated">每件事都会失败，每时每刻！在云架构中，虽然我们无法避免完全失败，但我们可以为失败做好计划。不要接受失败！那么，如何定义可靠的应用程序呢？以下是弹性应用程序的特征:</p><ul class=""><li id="d9d0" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated">从故障中优雅地恢复并继续运营</li><li id="613a" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">高可用性(HA ),按设计运行，无明显停机</li></ul><p id="7d86" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们通过遵循许多设计模式在我们的架构中建立了弹性。下面列举了几个例子:</p><ul class=""><li id="1ea7" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated">到处建立冗余。没有SPOF。将服务部署到多个区域，以避免完全的区域故障</li><li id="8567" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">节流以抵御流量的突然增加和bot攻击</li><li id="6f83" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">军种间通信</li><li id="947e" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">为每个远程服务调用配置超时和重试次数</li><li id="fb2f" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">每个远程服务的断路器。回退逻辑到位以处理故障</li><li id="69e9" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">当系统的一部分发生故障时，防止完全故障的隔板</li></ul><p id="92c4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">故障注入测试</strong></p><p id="b478" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了模拟故障，注入故障并验证行为。为此，我们使用各种工具，如Istio、Gremlin</p><h1 id="d7d8" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">敏捷和开发实践</h1><p id="c2c8" class="pw-post-body-paragraph ie if hh ig b ih kq ij ik il kr in io ip ks ir is it kt iv iw ix ku iz ja jb ha bi translated">每个微服务的设计都是由一个团队拥有的。该团队使用STOSA模型(单个团队拥有的服务架构)运营，他们从架构到开发、测试、部署、监控到解决生产问题承担端到端的责任。开发是使用敏捷方法完成的。源代码存储在Git中，团队遵循基于主干的开发作为分支策略。对于测试，团队非常依赖自动化测试，并且使用CI/CD最佳实践对代码进行持续测试。这是团队遵循的CI/CD模型</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lp"><img src="../Images/26368806d982768dcc37616c7d7f7021.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uGT7moOmnjwK21X9b4tr2A.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">CI/CD</figcaption></figure><h1 id="0e87" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">可观察性</h1><p id="edf0" class="pw-post-body-paragraph ie if hh ig b ih kq ij ik il kr in io ip ks ir is it kt iv iw ix ku iz ja jb ha bi translated">服务最重要的特征之一是它的可观察性。每项服务都会将应用程序日志推送到一个集中的Splunk集群中进行聚合和搜索。对于实时监控和警报，我们使用Prometheus作为指标存储，Graffana作为仪表板。我们最初从Azure Application insights开始，但后来出于性能原因转向Splunk和Prometheus。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lq"><img src="../Images/1e3132fb0b062f988a7941ab4742a74a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*DlwnToXnjjSiajyXimm8FQ.png"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">Monitoring Setup</figcaption></figure><p id="033c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下指标是仪表板的一部分。</p><ul class=""><li id="7965" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated">Kubernetes仪表板</li><li id="8896" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">pod级别的CPU /内存</li><li id="7e23" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">pod级别的Tomcat线程状态</li><li id="6ea5" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">pod级别的垃圾收集统计信息</li><li id="cca7" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">断路器状态</li><li id="c524" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">有效性</li><li id="6999" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">吞吐量</li><li id="3007" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">响应时间(平均95分钟)</li><li id="45e3" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">错误(基于HTTP状态代码)</li><li id="3347" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">所有相关服务(响应时间、可用性、错误)</li></ul><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lr"><img src="../Images/d55ece5133987931d5532e72087afe80.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PFKKSgeEEC9amt9WgnNHxw.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Dashboards</figcaption></figure><h1 id="b89e" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">成本管理</h1><p id="b414" class="pw-post-body-paragraph ie if hh ig b ih kq ij ik il kr in io ip ks ir is it kt iv iw ix ku iz ja jb ha bi translated">成本是任何架构的一个非常重要的方面，我们从一开始就牢记这一点。在本节中，我们将看到我们遵循的准则以及我们为构建最具成本效益的解决方案而采取的措施。</p><p id="5956" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">技术选择</strong></p><p id="1b87" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">云提供商为一个域提供多种PAAS服务。例如，对于数据库存储，有像Cosmos、Postgress、MySQL、SQL Server这样的服务，每种服务都有自己的定价模式。此外，根据所选的功能，价格也会有所不同。例如，Cosmos Multi write与single write的定价模式不同。</p><p id="662f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">最佳云资源使用</strong></p><p id="c5da" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">云计算最大的承诺之一是你为你使用的东西付费。因此，监控资源的使用情况并对其进行优化是非常重要的。在我们的例子中，我们尽可能使用自动缩放功能。例如，使用AKS自动缩放，宇宙自动驾驶仪，这有助于最佳的资源利用，并确保成本效益。</p><p id="c49e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">成本报告</strong></p><p id="f159" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作为Azure成本管理的一部分，可以创建报告并从不同的维度对其进行分割。我们为每项服务创建了报告，为多个阈值定义了预算和警报。这为我们提供了一个非常好的整体成本的可视性，并在预算违反时通知相应的成本中心所有者。</p><p id="1568" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是一个成本报告的示例:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ls"><img src="../Images/1747ca68a4ccf0d5271355333fc828d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9Rrz2B0OSeJly1uOckrKRQ.png"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Cost Report</figcaption></figure><h1 id="2637" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">结论</h1><p id="0619" class="pw-post-body-paragraph ie if hh ig b ih kq ij ik il kr in io ip ks ir is it kt iv iw ix ku iz ja jb ha bi translated">尽管在构建这个平台的过程中进行了大量的思考、研究和努力工作，但你不会在第一次尝试中就把所有事情都做好。这个想法是不断地监控系统，从生产流量中观察系统行为，并从每次迭代中改进。</p></div></div>    
</body>
</html>