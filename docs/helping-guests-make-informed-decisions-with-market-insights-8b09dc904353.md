# 利用市场洞察力帮助客人做出明智的决策

> 原文：<https://medium.com/airbnb-engineering/helping-guests-make-informed-decisions-with-market-insights-8b09dc904353?source=collection_archive---------4----------------------->

自 2015 年以来，我们一直在稳步向客人提供丰富多样的市场洞察，这篇文章概述了市场洞察功能和我们最近的工作。

我们的客人通常会做出两个决定:

1.  我应该现在预订以获得更好的可用性，还是以后预订以获得更好的灵活性？
2.  我应该预订哪个列表？

作为服务提供商，我们对整个市场和客人行为有着广阔的视野，这是单个客人不一定具备的。这些信息通常为解决客人的困惑提供有用的见解。

市场洞察是我们在预订流程的各个阶段与客人互动的一个渠道。我们提供动态生成的信息来帮助我们的客人规划他们的旅行。这些信息包括市场和上市可用性趋势、供应、定价折扣、社区活动等。它是预订流程的一个重要组成部分，并通过让更多不同的人做出更明智的预订决定并适应任何地方，向 Airbnb 社区展示了它的效用。

# 市场洞察

图 1 展示了我们的市场洞察服务的架构。当客人与网站交互时，Market Insight 后端系统与搜索和定价服务对话，以收集市场可用性和定价信息。它在键值存储中查询与搜索或列表视图相关的数据，以及用户信息，以实时生成候选人洞察。然后，它根据见解对客户的价值对其进行排序，并在最终见解上为前端供电以进行显示。

我们决心产生真实的、信息性的和及时的市场洞察力。

![](img/c52bc45a8628d237d4df39852c4280d3.png)

当客人键入包括位置、日期、客人数量以及可能的房间类型和附加舒适性约束的搜索查询时，搜索后端系统检索可用的房屋。前端自动将地图放大到一个水平，以足够的上下文最好地覆盖游客的兴趣。对于一个这样的地图视图，市场洞察服务器聚集可用位置的确切数量，并且如果数量低，则警告游客。类似地，我们可以洞察可用位置的百分比。

![](img/d1ae57e41a2de3ddf382b198e3e4a112.png)

为了支持异构类型的洞察，服务器从键值存储中检索两个主要的数据源。

1.  **流数据**主要是具有有限计数和簿记的事实信息，几乎是实时的，例如在过去 N 天中某个列表的唯一查看次数。数据通过内部系统提供。
2.  **聚合数据**通常需要加入其他数据源并从其他数据源进行推理，通常会有几天的延迟。我们使用[气流](https://github.com/apache/incubator-airflow)构建数据管道，以简化数据生成过程并监控其日常进展。我们使用 Spark 进行大规模数据聚合，使用 Hive 进行数据存储。“罕见发现”洞察是使用聚合数据的一个例子。

作为服务平台，我们比散客拥有更多的数据。例如，Airbnb 跟踪房屋预订的频率。这一信息很好地表明了受欢迎的程度。当客人看到一个很少空置的地方时，我们会提醒客人以下几点。

![](img/6116594f052d5ef0df460f55b5a92344.png)

这种洞察力由两条数据管道提供支持，一条管道收集单个列表的可用性信息，另一条管道收集所有市场的可用性信息。“罕见发现”洞察是指与市场 X 百分位相比具有较高长期可用率的列表，X 百分位是一个权衡洞察价值和稀缺性的值，我们通过现场实验确定。两条数据管道每天都在更新，因此我们的服务器将向我们的客人提供准确及时的信息。

自 2015 年市场洞察成立以来，我们逐渐增加了更多的洞察类型。我们的工作将预订转化率提高了 5%以上。随着 Airbnb 社区的扩大，以及我们向更多垂直领域的延伸，我们的工作在很大程度上促进了公司的发展。

# 个性化

个性化一直是许多服务平台不断发展的主题，Airbnb 是采用新技术的先锋，将[机器学习](/airbnb-engineering/automated-machine-learning-a-paradigm-shift-that-accelerates-data-scientist-productivity-airbnb-f1f8a10d61f8)应用于[个性化搜索结果](/airbnb-engineering/how-marketplace-search-differs-from-traditional-search-c7bb533b6680)和[检测主人偏好](/airbnb-engineering/how-airbnb-uses-machine-learning-to-detect-host-preferences-18ce07150fa3)。我们在个性化市场洞察方面采取了几个步骤。

经常会出现多个符合条件的见解，但是我们每次只能显示一个。我们目前的策略是使用确定性的静态审查规则。但是，来宾解析信息的方式不同。对于对时间很敏感的客人来说，提前提醒她可以非常有效地让她尽快预订行程。然而，对于最后一分钟的旅行者来说，搜索结果的数量或百分比可能听起来更具信息性，为他们提供了预订信号，因为可用性越来越低。在列表详细信息页面上，对于不同的人来说，列表“通常被预订”的心态可能具有与“10 个其他人正在查看这个地方”不同的含义。更不用说可能会有一些老练的客人，他们喜欢纯粹根据他们与房源之间的化学反应来做决定，因此根本不喜欢市场洞察力。

2016 年，我们在预订流程中增加了广泛的日志记录，记录客人看到哪些类型的见解，以及他们在看到这些见解时的反应，例如他们在某个房源页面上花了多长时间，他们是否希望列出某个房源，是否提出预订请求，或者是否返回搜索。我们实施了一些随机策略，均衡了每个符合条件的见解的印象几率。展示不同的、种类越来越多的见解，有助于我们获取数据，了解用户偏好。

在收集用户交互数据后，我们将它与列表信息(如占用率和浏览量)以及搜索参数(如旅行提前天数和长度)结合起来，并执行数据分析。我们的目标是学习 smart insight 审查规则，以最大限度地实现预期结果。我们相信客人更有可能预订高级用户体验，所以我们创建了一个评估他们进度的效用函数。例如，请求预订值一分，联系主机值半分，等等。

我们根据客人的特征对客人进行分类，例如他们过去的搜索和预订次数，并为每个用户群制定一个洞察审查规则。我们正在对我们的假设进行实验，即个性化的见解可以改善用户体验，并反过来提高预订转化率。

技术在不断发展。除了应用基于特征的细分，我们还计划分析这些特征，尝试对它们进行语义化，并根据游客旅行的目标和特征对其进行细分。

*Market Insights 是 Airbnb 搜索的一个关键产品，我们是一个跨学科的团队，由工程师、数据科学家、设计师、产品经理和体验研究员组成。我们感谢 Jenny Chen、Ira Patnaik、Crystal Ciancutti、Helen Sims、Ankit Agarwal、Jennie Perri 和*[*Adam Neary*](/@AdamRNeary)*对本文的评论。我们还要感谢整个搜索团队为市场洞察做出的各种贡献。*

*当然，如果你喜欢阅读这篇文章，并认为这是一个有趣的挑战，我们一直在寻找有才华、有好奇心的人加入*[](https://www.airbnb.com/careers/departments/engineering)**团队。**