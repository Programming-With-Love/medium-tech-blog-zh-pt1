<html>
<head>
<title>Building a reporting app with ASP.NET Core, VueJS and MySQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ASP.NET核心、VueJS和MySQL构建报告应用</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/building-a-reporting-app-with-asp-net-core-vuejs-and-mysql-fbea7ff99794?source=collection_archive---------0-----------------------#2020-03-24">https://medium.com/quick-code/building-a-reporting-app-with-asp-net-core-vuejs-and-mysql-fbea7ff99794?source=collection_archive---------0-----------------------#2020-03-24</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/0d4dacac7b723207264024d515b6acd4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sekXaeviEXL0LZ6vWp3ulg.png"/></div></div></figure><p id="53b5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">今天，我将向您展示如何创建一个全栈应用程序，并为其提供报告功能。作为后端技术，我们将使用<strong class="ir hi">ASP.NET内核</strong>。对于前端部分，我决定选择<strong class="ir hi">vue . js</strong>——快速、易学、强大的框架。如果您以前使用过React，那么解决这个框架对您来说也不是问题。</p><p id="5770" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，您将获得一个具有报告功能的轻量级应用程序。为了让事情变得漂亮，我们将尝试遵循<em class="jn">的材料设计准则</em>，给我们的应用程序带来原生外观&amp;的感觉。</p><p id="529a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们将通过创建前端API客户机和后端API服务器在两端实现web API。</p><p id="d48d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">但是为了简单起见，我们将不讨论后端实现的细节。我相信指导你创建ASP.NET核心web API的最佳教程是微软官方指南。这就是为什么我将<strong class="ir hi">更多地关注前端开发</strong>和UI设计。</p><p id="cd50" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了不在后端开发上花太多时间，可以参考专门为本教程准备的工作web API 的<a class="ae jo" href="https://github.com/veronikaro/reporting-app-asp-dot-net-core" rel="noopener ugc nofollow" target="_blank">完整代码。它在</a><a class="ae jo" href="http://localhost:5000/api" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/API</a>启动。</p><p id="f459" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我希望你能享受过程和结果。</p><p id="bd97" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">准备好了吗？</p><p id="7562" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们开始吧！⭐</p><h1 id="8b86" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">先决条件</h1><ul class=""><li id="8dad" class="kn ko hh ir b is kp iw kq ja kr je ks ji kt jm ku kv kw kx bi translated">HTML、JavaScript和CSS的基础知识</li><li id="20e8" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">熟悉webpack</li><li id="b319" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">ASP.NET核心的基本经验</li><li id="c377" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">使用MySQL或其他SQL数据库的经验</li><li id="21df" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated"><em class="jn">耐心和渴望编写令人敬畏的东西</em>🎉</li></ul><h2 id="5507" class="ld jq hh bd jr le lf lg jv lh li lj jz ja lk ll kd je lm ln kh ji lo lp kl lq bi translated">工具和技术</h2><ul class=""><li id="7ba6" class="kn ko hh ir b is kp iw kq ja kr je ks ji kt jm ku kv kw kx bi translated"><strong class="ir hi"> Vue.js </strong>框架+ <strong class="ir hi">用于Vue的Flexmonster透视表</strong></li><li id="00c5" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated"><strong class="ir hi"> Visual Studio代码</strong> + Vue.js扩展包<strong class="ir hi">或您选择的任何其他IDE </strong></li><li id="72ba" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated"><strong class="ir hi">ASP.NET核心</strong></li><li id="65ac" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated"><strong class="ir hi"> MySQL </strong> + MySQL工作台</li><li id="9629" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">测试API服务器的邮递员</li></ul><h1 id="6101" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">准备数据库</h1><p id="738b" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">出于演示的目的，我创建了一个包含三个表的测试数据库，并用样本记录填充它们。如果您希望在整个教程中与我保持一致，您可以设置<a class="ae jo" href="https://dev.mysql.com/downloads/mysql/" rel="noopener ugc nofollow" target="_blank"> <strong class="ir hi"> MySQL服务器</strong> </a>和<a class="ae jo" href="https://gist.github.com/veronikaro/109100324929465af739b22765705337" rel="noopener ugc nofollow" target="_blank"> <em class="jn">运行这个SQL脚本</em> </a>。或者您可以使用自定义数据集。在后一种情况下，您需要<em class="jn">对后端代码</em>进行一些更改:更改现有的类，使它们与您的数据模型实体相对应，并更改数据传输对象类(d to)、控制器和存储库。我想这对你来说不是一件难事。MySQL初学者可以从<a class="ae jo" href="https://blog.coursesity.com/best-mysql-database-tutorials/" rel="noopener ugc nofollow" target="_blank">最佳MySQL教程</a>中受益。</p><h1 id="c254" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建Vue.js项目</h1><p id="2096" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">假设你已经有一个工作的后端，让我们来关注一下未来应用的用户界面。<em class="jn">在最后，我们将让它们都进行通信:前端将向后端发送数据请求，并在获得这些数据后创建可视化。</em></p><ul class=""><li id="87e2" class="kn ko hh ir b is it iw ix ja lu je lv ji lw jm ku kv kw kx bi translated">安装<a class="ae jo" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> Node.js </a>和<a class="ae jo" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"><strong class="ir hi">NPM</strong></a>——一个用于JavaScript库管理的CLI。</li><li id="ec37" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">要使用命令行创建应用程序，您需要安装Vue CLI:</li></ul><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="e438" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里，-g参数代表全局安装Vue CLI。</p><ul class=""><li id="2736" class="kn ko hh ir b is it iw ix ja lu je lv ji lw jm ku kv kw kx bi translated">使用<a class="ae jo" href="https://vuejs-templates.github.io/webpack/" rel="noopener ugc nofollow" target="_blank"> webpack模板</a>创建一个Vue.js项目:</li></ul><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="b43e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我喜欢webpack样板文件的一点是，它附带了所有必要的特性，比如<em class="jn">热重装、林挺、测试和CSS提取</em>。</p><p id="fb3b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">运行该命令后，系统会要求您指定项目的名称(不带大写字母)、描述和作者。在这个阶段，选择路由器是很重要的，因为我们将为不同的页面设置路径。</p><p id="77df" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">其他可供选择的特性是linter和单元测试。是否使用<a class="ae jo" href="https://eslint.org/" rel="noopener ugc nofollow" target="_blank"> ESLint </a>由你决定。但是请记住，它迫使您在代码中遵循一致的风格。你可以在这里阅读更多关于ESLint <a class="ae jo" href="https://eslint.org/docs/user-guide/configuring" rel="noopener ugc nofollow" target="_blank">的不同规则。</a></p><p id="bb4c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">以下是我选择的最少选项:</p><figure class="lx ly lz ma fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es md"><img src="../Images/1f938a137869d03bac0929352443e3be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CkMIfWjiGaRY5RVbpRUBtw.png"/></div></div></figure><p id="addf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">瞧！</strong>我们的项目已经搭好脚手架，随时可以开工。在您最喜欢的IDE中打开它，并检查其结构:</p><ul class=""><li id="5c47" class="kn ko hh ir b is it iw ix ja lu je lv ji lw jm ku kv kw kx bi translated"><em class="jn"> src是一个</em>目录，包含模块资产、UI组件和路由器；</li><li id="cb70" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated"><em class="jn"> App.vue </em>是入口点组件；</li><li id="7427" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated"><em class="jn"> main.js </em>是挂载App.vue的入口点文件。</li></ul><p id="3f72" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要对每个文件夹的用途有信心，请在这里阅读关于生成项目的结构的更多细节<a class="ae jo" href="https://vuejs-templates.github.io/webpack/structure.html" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="48be" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">所以，让我们通过运行<code class="du me mf mg mh b"><em class="jn">npm run dev</em></code> <em class="jn">来对前端进行一次试驾。</em></p><p id="1c24" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们开始吧:</p><figure class="lx ly lz ma fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mi"><img src="../Images/2e81736b684421d400cf117d8e919991.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u8jMrFQAYdWPhQMvyMCnxQ.png"/></div></div></figure><h2 id="2a5c" class="ld jq hh bd jr le lf lg jv lh li lj jz ja lk ll kd je lm ln kh ji lo lp kl lq bi translated">引导组件</h2><p id="88fa" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">为了在最短的时间内使我们的用户界面看起来时尚，我们将使用Vue.js的Bootstrap的预制组件。让我们安装它:</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="ed7f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，打开<code class="du me mf mg mh b"><em class="jn">main.js</em></code>文件，导入<em class="jn"> BootstrapVue </em>及其样式，通过调用<em class="jn">Vue . use()</em>——一种安装Vue插件的方法，让Vue.js注册引导组件。</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><h2 id="f385" class="ld jq hh bd jr le lf lg jv lh li lj jz ja lk ll kd je lm ln kh ji lo lp kl lq bi translated">安装Flexmonster数据透视表和图表</h2><p id="573e" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">为了在我们的Vue项目中使用这个JavaScript库，我们需要安装它。逐一运行以下命令:</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="50e6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们可以在全局或本地注册<em class="jn"> vue-flexmonster </em>模块。让我们遵循第一种方法。只需将模块及其样式导入到<em class="jn"> main.js: </em></p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="15ae" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">并将其注册为插件:</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="a447" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，该模块是全局可访问的。</p><p id="6658" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">下面是<em class="jn"> main.js </em>现在的样子:</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="14fb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">❗注意到，我们将绝对进口置于相对进口之前，这正是埃斯林规则所要求的。</p><h1 id="8bba" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建导航</h1><p id="4504" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">让我们继续<strong class="ir hi">构建我们的第一个组件</strong>。</p><p id="8cf2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">它将负责在页面之间导航。</p><p id="6bb6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了允许最终用户在多个报告之间切换，我们将创建一个单独的UI元素——一个<strong class="ir hi">导航栏</strong>。它将引导他们查看三种报告:</p><ul class=""><li id="7d91" class="kn ko hh ir b is it iw ix ja lu je lv ji lw jm ku kv kw kx bi translated">一份<strong class="ir hi">销售</strong>管理<strong class="ir hi">报告</strong></li><li id="4d55" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">一个<strong class="ir hi"> HR绩效</strong>仪表板</li><li id="97f6" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated"><strong class="ir hi">数字营销</strong>仪表盘</li></ul><p id="548a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在<em class="jn">组件</em>文件夹中创建一个<em class="jn"> Navbar.vue </em>组件，并向其中添加模板和脚本:</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="6cad" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如你所见，我们正在使用自举<code class="du me mf mg mh b">&lt;b-nav&gt;</code>控制。它的主要好处是您可以创建随路由URL变化的选项卡式内容。通过<a class="ae jo" href="https://blog.coursesity.com/best-vuejs-tutorials/" rel="noopener ugc nofollow" target="_blank">最佳VueJs教程</a>在线学习VueJs，以处理大量的用户交互和动态数据。</p><p id="a8b4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于每个选项卡，我们将值分配给<code class="du me mf mg mh b">to</code> —路由器链接属性。通过向该属性传递一个JSON对象，我们使选项卡的链接指向指定的组件。</p><p id="3916" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在代码中，您可以看到三个组件的名称。不要担心它们还不存在——这正是我们将在本教程的下一部分中关注的。</p><h1 id="f00a" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建报表组件</h1><p id="37d6" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated"><em class="jn">现在开始设计报告！</em>我们将在每个页面上添加两个Flexmonster实例:一个用于数据透视表，另一个用于数据透视表图表。或者，您可以安排任意多的实例:唯一的预防措施是对不同的对象使用不同的引用。</p><p id="82a8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在<em class="jn">组件</em>目录<em class="jn">，</em>中创建<em class="jn"> SalesReport.vue </em>文件<em class="jn">。</em></p><p id="7d8b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在<code class="du me mf mg mh b">&lt;template&gt;</code>标签中，创建一个根<code class="du me mf mg mh b">&lt;div&gt;</code>元素，我们将在它下面放置我们的报告组件。</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="f225" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们还向数据透视表添加了一个<code class="du me mf mg mh b">id</code>属性，以便以后能够更改其样式。</p><p id="ebc9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在同一文件中添加<em class="jn">导出默认</em>语句:</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="ab65" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">类似地，在同一个文件夹中创建另外两个组件，名为<em class="jn"> HRReport.vue </em>和<em class="jn"> MarketingReport.vue </em>。</p><p id="963d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">然而，我们没有组件内部的数据。但是如何在从服务器获取数据之前测试它们呢？我们可以简单地解决:让我们提供一个到示例报告的链接:</p><figure class="lx ly lz ma fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mj"><img src="../Images/8b8932088098debd71c0bbb903b9043d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Juh1w2XMOwtd3qYhgX51Bg.gif"/></div></div></figure><p id="835b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">看起来不错！</p><h1 id="709b" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">按指定路线发送</h1><p id="b2c6" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">到目前为止，除了导航栏，我们已经创建了三个Vue组件，并在导航栏中添加了指向它们的链接。现在我们需要告诉应用程序在哪里寻找对应于这些组件的页面，即指定它们的URL。为此，让我们从<em class="jn">路由器目录中打开<em class="jn"> index.js </em>文件，</em>导入组件，并通过将它们添加到路由列表中来将路由器指向页面组件。</p><p id="35b4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们的工具栏工作正常。现在我们可以在选项卡之间切换。</p><h1 id="a3df" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">从后端显示数据</h1><p id="dfda" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">让我们弄清楚如何将HTTP请求从我们的前端定向到后端。我提醒一下，我们服务器的端点位于<a class="ae jo" href="http://localhost:5000/api" rel="noopener ugc nofollow" target="_blank">http://localhost:5000/API</a>。</p><h1 id="3513" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">配置环境文件</h1><p id="c1b3" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">打开<em class="jn"> config </em>目录，在<em class="jn"> dev.env.js </em>文件中添加一个新的环境变量:</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="e527" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要在生产模式下将HTTP请求指向后端，相应地修改<em class="jn"> config/prod.env.js </em>文件。</p><p id="a736" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于从Node.js发出HTTP请求，我们将使用<em class="jn">Axios</em>——一个基于Promise的浏览器和Node.js的HTTP客户端。在撰写本文时，它<a class="ae jo" href="https://github.com/axios/axios#browser-support" rel="noopener ugc nofollow" target="_blank">支持所有浏览器的最新版本</a>，包括IE 11。</p><p id="d41d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">运行<em class="jn"> </em> <code class="du me mf mg mh b"><em class="jn">npm i axios</em></code>安装它。将Axios导入到<em class="jn"> main.js </em>文件中，并使用API_ENDPOINT变量作为所有Axios请求的基本URL:</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><h1 id="6a62" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建API服务</h1><p id="485a" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">让我们创建一个API服务。在它的帮助下，我们将从后端获取数据。</p><p id="54b6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在<em class="jn"> src </em>中，创建一个保存不同API服务的文件夹。将其命名为<em class="jn"> api-services。</em>新建一个文件<em class="jn"> order.service.js </em>。在其中，导入Axios并实现<em class="jn"> getAll() </em>调用:</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="171b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">注意，对于我们的报告目的，我们需要的唯一方法是<code class="du me mf mg mh b">getAll()</code>。您还可以<strong class="ir hi">添加其他</strong> <strong class="ir hi"> RESTful调用</strong>，比如创建、更新、删除。</p><p id="6693" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">了解了数据库的设计，相应地，您可以为每个实体创建单独的API服务。在我们的例子中，我们还需要添加<em class="jn"> employee.service.js </em>和<em class="jn"> marketing.service.js </em>。</p><h1 id="7feb" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">将数据发送到数据透视表和数据透视表图表</h1><p id="3091" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">现在让我们回到我们的组件。我们如何用数据填充它们？</p><p id="8379" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们可以使用返回带有键和值的JSON的<em class="jn"> data() </em>函数为每个组件设置数据。相反，我们将利用Flexmonster <strong class="ir hi"> API调用</strong>。通过这种方式，我们将学习如何在Vue中与他们合作。</p><p id="1c4b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用<em class="jn"/><a class="ae jo" href="https://www.flexmonster.com/api/setreport/?r=qc2" rel="noopener ugc nofollow" target="_blank"><em class="jn">flex monster . set report()</em></a><em class="jn">，</em>我们将定义一个报表，其中的数据以及所有行、列和度量都在<em class="jn"> mounted() </em>钩子内。如果你怀疑不同的场景应该选择哪种挂钩，我鼓励你看一看<a class="ae jo" href="https://vuejs.org/v2/guide/instance.html#Lifecycle-Diagram" rel="noopener ugc nofollow" target="_blank">这张图</a>。它将帮助您更好地理解Vue实例的生命周期。</p><p id="ac72" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果只想连接数据而不为透视表设置报表，可以调用<a class="ae jo" href="https://www.flexmonster.com/api/connectto/?r=qc2" rel="noopener ugc nofollow" target="_blank"><em class="jn">flex monster . connect to()</em></a>方法。</p><p id="d07e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在说重点。打开<em class="jn"> SalesReport.vue </em>和<em class="jn">T49】导入相应的API服务。</em></p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="d7eb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">将<em class="jn">安装()</em>挂钩添加到导出的组件:</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="82ab" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如您所见，在这个钩子中，我们通过最近创建的API服务从服务器请求数据。在这里，我们还创建了一个报告对象，并使用<code class="du me mf mg mh b">setReport()</code>方法将其设置为组件。</p><p id="b6a9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">同样，您可以为其他组件设置报告:<em class="jn"> HRReport </em>和<em class="jn"> MarketingReport </em>。</p><h1 id="a7c5" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">集合映射</h1><p id="c130" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">您可能已经注意到，MySQL表中的字段名称是按照它们在数据库中被指定的方式显示的。我们可以使用报表的<a class="ae jo" href="https://www.flexmonster.com/doc/mapping/?r=qc2" rel="noopener ugc nofollow" target="_blank"> <strong class="ir hi">映射</strong> </a> <strong class="ir hi"> </strong>属性来修改它并美化字段名。只需将该对象添加到报表的<em class="jn">数据源</em>属性中。</p><h1 id="5a75" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">设计一个报告工具🎨</h1><p id="7fd4" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">为了美化我们的仪表板，您可以使用<a class="ae jo" href="https://material.io/design/color/#tools-for-picking-colors" rel="noopener ugc nofollow" target="_blank">材料设计调色板生成器</a>并为图表选择符合您偏好的颜色。</p><h1 id="71bf" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">把所有东西放在一起</h1><p id="d6be" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">现在是时候看看后端和前端如何协同工作了。通过运行IIS服务器启动您的ASP.NET核心应用程序。启动后，您可以运行前端并单击每个选项卡来检查不同的报告。所有这些报告都填充了数据库中的数据。</p><h1 id="a54d" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">提高性能</h1><p id="7d69" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">注意，我们发送到数据透视表组件的数据是在客户端处理的<em class="jn">。</em></p><p id="1bf1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">数据处理的速度很大程度上依赖于你的浏览器资源。高达百兆，一般都做的很快。但是，如果您正在处理大量的数据，或者只是希望在数据访问层优化数据处理，那么有一个选项适合您。我鼓励你尝试设置<a class="ae jo" href="https://www.flexmonster.com/doc/pivot-table-with-dot-net-core-server/?r=qc2" rel="noopener ugc nofollow" target="_blank"> <strong class="ir hi">。NET Core server </strong> </a>实现<a class="ae jo" href="https://www.flexmonster.com/doc/introduction-to-custom-data-source-api/?r=qc2" rel="noopener ugc nofollow" target="_blank">flex monster公开的API </a>。这种方法将显著加快服务器端的数据处理，并让您绕过浏览器的限制。你可以在官方指南中找到所有关于如何实施的说明。如果你的服务器运行在Node.js上，你也可以试试<a class="ae jo" href="https://www.flexmonster.com/doc/pivot-table-with-node-js-server/?r=qc2" rel="noopener ugc nofollow" target="_blank"> <strong class="ir hi"> Node.js示例服务器</strong> </a>或者自己实现服务器-客户端通信。</p><h1 id="f03c" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">结果</h1><p id="7437" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">让我们来检查结果！</p><figure class="lx ly lz ma fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mk"><img src="../Images/1a2b5dccc7206f9633c1a1a6dac3bfb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*rbtE01vFXeib1VSFARGPQw.gif"/></div></div></figure><p id="9c9a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这是您到目前为止构建的报告工具。您可以将它用于任何数据和任何业务案例。</p><h1 id="f9bb" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">结束语</h1><p id="a0d2" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">今天你已经学会了如何使用Vue.js、ASP.NET核心、MySQL和Vue的数据透视表创建一个漂亮的应用程序。我希望你对结果满意。您可以尝试使用其他客户端和服务器端技术构建类似的应用程序。、或其他数据源。</p><p id="ddcf" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以轻松地在不同的数据之间切换。</p><h1 id="dc20" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">示例代码</h1><ul class=""><li id="7361" class="kn ko hh ir b is kp iw kq ja kr je ks ji kt jm ku kv kw kx bi translated"><a class="ae jo" href="https://github.com/veronikaro/reporting-app-vue" rel="noopener ugc nofollow" target="_blank"> Vue.js报表app </a></li><li id="f917" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">【ASP.NET T2】核心Web API </li></ul><h1 id="dc02" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">反馈</h1><p id="523d" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja lr jc jd je ls jg jh ji lt jk jl jm ha bi translated">我喜欢与社区分享我的技术经验和想法。这样做的好处之一是收到你的反馈。这有助于我提高技能和知识。所以我很想收到你的回信。如果您对改进代码或本教程有任何建议，请与我和其他读者分享您的想法。</p></div></div>    
</body>
</html>