<html>
<head>
<title>Getting Started with Oracle Spatial and Graph — RDF Knowledge Graph (Part 3)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle Spatial和图形入门— RDF知识图(第3部分)</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/getting-started-with-oracle-spatial-and-graph-rdf-knowledge-graph-part-3-ce40edc4b1f5?source=collection_archive---------2-----------------------#2018-11-10">https://medium.com/oracledevs/getting-started-with-oracle-spatial-and-graph-rdf-knowledge-graph-part-3-ce40edc4b1f5?source=collection_archive---------2-----------------------#2018-11-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="af3c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是“Oracle Spatial和图形入门— RDF知识图”系列的第三部分在这篇博文中，我们将通过配置一个W3C标准的SPARQL端点来完成我们在Oracle公共云中的RDF triplestore的设置。点击本系列之前文章的链接:<a class="ae jc" rel="noopener" href="/oracledevs/getting-started-with-oracle-spatial-and-graph-rdf-knowledge-graph-part-1-fa400427c6bd">第一部分</a>、<a class="ae jc" rel="noopener" href="/oracledevs/getting-started-with-oracle-spatial-and-graph-rdf-knowledge-graph-part-2-2def0bc08a5c">第二部分</a>。</p><p id="13d3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">W3C为查询和更新RDF数据定义了几个<a class="ae jc" href="https://www.w3.org/TR/sparql11-protocol/" rel="noopener ugc nofollow" target="_blank">标准REST API</a>。Oracle RDF Semantic graph利用Apache Jena Fuseki来提供这些接口的实现。Oracle对Apache Jena的支持通过特定于Oracle的Apache Jena接口实现，提供了Apache Jena和Oracle RDF语义图之间的紧密集成。</p><p id="6161" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这篇博文将展示如何在我们的DBCS实例上设置和运行Apache Jena Fuseki。Fuseki可以作为独立的服务器或Java web应用程序运行。在这种情况下，我们将在我们的DBCS实例上将Fuseki作为独立服务器运行。您还可以设置一个Oracle Java Cloud Service实例，并将Fuseki Java web应用程序部署到包含的Web Logic Server实例中。</p><p id="99d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第一步是从OTN下载最新的Oracle Apache Jena支持。打开网页浏览器进入<a class="ae jc" href="http://www.oracle.com/technetwork/database/options/spatialandgraph/downloads/index-156999.html" rel="noopener ugc nofollow" target="_blank">http://www . Oracle . com/tech network/database/options/spatialand graph/downloads/index-156999 . html</a>。选择下载Oracle Database 12c Release 12.1.0.2支持Apache Jena 3.1、Apache Jena Fuseki 2.4和Protégé Desktop 5.0。</p><p id="f253" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下载完成后，将下载的Oracle Support for Apache Jena文件传输到您的DBCS实例。在本例中，我们将文件复制到/home/oracle。关于如何将文件复制到DBCS实例或从其复制文件的进一步说明可以在DBCS <a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/database-dbaas-cloud/csdbi/copy-files-node.html" rel="noopener ugc nofollow" target="_blank">用户指南</a>中找到，或者在本文末尾的详细操作指南中找到。</p><p id="f869" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以oracle用户身份打开到DBCS实例的SSH连接。关于如何建立到DBCS实例的SSH连接的更多信息，请参见DBCS用户指南。</p><p id="f6f6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在/home/oracle中创建一个名为Jena的目录。然后将rdf _ semantic _ graph _ support _ for _ 12c _ and _ jena 310 _ protege _ 5.0 _ 2017 _ 01 _ 19 . zip移动到新创建的Jena目录下，解压文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/60407e7bb14e4bc4621cc1b1c1047b8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*01Vwi8QQ-2TjOnsZ7LnerQ.png"/></div></figure><p id="64a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">解压缩命令完成后，您将看到几个目录和一个自述文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/58c8820f11a71d11432dd5eae229ab72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*MPPwEMUxpKe4OcLteSMvFg.png"/></div></figure><p id="f553" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们现在将配置Fuseki来访问我们之前创建的LGD _体育语义模型。将目录更改为/fuseki，并编辑config-oracle.ttl文件。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/278c3a44cbcdca0a6b097a1d4dcff14d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*uURbkOTH2FK3wdfORc_b3Q.png"/></div></figure><p id="1c61" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将以下默认数据集规格从</p><pre class="je jf jg jh fd jl jm jn jo aw jp bi"><span id="e0f5" class="jq jr hh jm b fi js jt l ju jv">&lt;#oracle&gt; rdf:type oracle:Dataset;<br/>    oracle:connection<br/>      [ a oracle:OracleConnection ;<br/>        oracle:jdbcURL “jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=orcl)))”;<br/>        oracle:User “rdfuser” ;<br/>        oracle:Password “rdfuser”<br/>      ];<br/>    oracle:allGraphs [ oracle:firstModel “TEST_MODEL” ] .</span></pre><p id="491a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">到</p><pre class="je jf jg jh fd jl jm jn jo aw jp bi"><span id="f18c" class="jq jr hh jm b fi js jt l ju jv">&lt;#oracle&gt; rdf:type oracle:Dataset;<br/>    oracle:connection<br/>      [ a oracle:OracleConnection ;<br/>        oracle:jdbcURL “jdbc:oracle:thin:@(DESCRIPTION=(ADDRESS=(PROTOCOL=TCP)(HOST=localhost)(PORT=1521))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=<strong class="jm hi">PDB1.uspm020.oraclecloud.internal</strong>)))”;<br/>        oracle:User “<strong class="jm hi">rdfuser</strong>” ;<br/>        oracle:Password “<strong class="jm hi">rdfuser</strong>”<br/>      ];<br/>    oracle:allGraphs [ oracle:firstModel “<strong class="jm hi">LGD_SPORT</strong>” ] .</span></pre><p id="c311" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请注意，根据您的特定DBCS实例的设置，SERVICE_NAME会有所不同。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/c8f395a7bb65662b51333ac4cd4c9d76.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*rEYDd1AeCirSyKzxQd32Bg.png"/></div></figure><p id="f4d4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">接下来，我们将更改默认的shiro.ini配置，以允许非本地主机连接。首先，我们需要启动Fuseki来创建一个/run目录。只需在当前/fuseki目录中执行以下命令。</p><pre class="je jf jg jh fd jl jm jn jo aw jp bi"><span id="3729" class="jq jr hh jm b fi js jt l ju jv">./fuseki-server</span></pre><p id="34cd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦看到Fuseki已经在端口3030上启动的消息，就用Ctrl-C杀死这个进程。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jw"><img src="../Images/7199cd0e250400e884b870b94dacea34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1344/format:webp/1*c9qL0PUdk8DyGo5lLFicrw.png"/></div></figure><p id="f98d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在应该创建了/run目录。将目录更改为/run并编辑shiro.ini。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/b5c55fce533b9ad13ca73466e01cc934.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*DBSw3O4mzmGhR4DEodBTzg.png"/></div></figure><p id="579a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">替换</p><pre class="je jf jg jh fd jl jm jn jo aw jp bi"><span id="6a7d" class="jq jr hh jm b fi js jt l ju jv">/$/** = localhostFilter </span></pre><p id="ca95" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">随着</p><pre class="je jf jg jh fd jl jm jn jo aw jp bi"><span id="39c0" class="jq jr hh jm b fi js jt l ju jv">/$/server = anon<br/>$/** = localhostFilter</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/71bbceea6aa42077f21857010b00aab4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*b_1FMHN0NB-NKlJLqMZHMQ.png"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/f39c5be4da08172a8751a549dca16551.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*UrBFPp1BGL3IqFhI6Fe5cQ.png"/></div></figure><p id="a6ee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将目录改回/fuseki，并通过运行以下命令启动fuseki服务:</p><pre class="je jf jg jh fd jl jm jn jo aw jp bi"><span id="6d8d" class="jq jr hh jm b fi js jt l ju jv">nohup ./fuseki-server — config config-oracle.ttl &gt; fuseki_out.log &amp;</span></pre><p id="1f62" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意，如果我们的连接关闭，我们使用nohup来防止Fuseki进程终止。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/8c9ff691a08ee0eeb2ad5dad27eb8df5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1322/format:webp/1*8ySUCqBNAL328IXcd_e2MA.png"/></div></figure><p id="e0b7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">就是这样。Fuseki SPARQL端点现在已经在我们的DBCS实例上启动并运行了。</p><p id="b2bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在Fuseki服务器已经启动并运行在我们的DBCS实例的端口3030上，有两个连接选项:</p><ol class=""><li id="6628" class="jx jy hh ig b ih ii il im ip jz it ka ix kb jb kc kd ke kf bi translated">为端口3030创建一个到我们的DBCS实例的SSH隧道。</li><li id="4a8f" class="jx jy hh ig b ih kg il kh ip ki it kj ix kk jb kc kd ke kf bi translated">创建一个访问规则，将我们的DBCS实例的端口3030向公共互联网开放。</li></ol><p id="7263" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇博文中，我们将使用SSH隧道来说明第一种方法。关于第二个选项的说明，请参见文章末尾的详细操作方法。使用SSH隧道允许我们安全地访问DBCS实例上的端口3030，而无需将端口3030向公共互联网开放。</p><p id="b0c6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，使用PuTTY或类似的工具创建一个SSH隧道，将客户端计算机上的端口3030转发到DBCS实例上的端口3030。我们在这个例子中使用了PuTTY，如下所示。详细说明请参考DBCS <a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/database-dbaas-cloud/csdbi/create-ssh-tunnel.html#GUID-6929CE39-6CD7-46C9-8022-929A9844B1C5" rel="noopener ugc nofollow" target="_blank">用户指南</a>。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kl"><img src="../Images/d462ff6aa175af9722144aeea39f10a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:904/format:webp/1*3i_G9gE2UwuZblJGZ5Du2w.png"/></div></figure><p id="412d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击打开打开SSH隧道，然后打开web浏览器访问http://localhost:3030。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es km"><img src="../Images/87047dc717b48a5326aeca625c8ac4d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0h9see5sndtpvWXNR8Wy3A.png"/></div></div></figure><p id="4180" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击〖查询〗按钮，打开SPARQL查询界面。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es km"><img src="../Images/4f0b983c2d400e02195a23c137ddc255.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rj9RxkE9tkDQslKGuVERPg.png"/></div></div></figure><p id="9560" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击info查看所有可用的REST端点。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="kn ko di kp bf kq"><div class="er es km"><img src="../Images/6152761b45c46e5710d1d3270b78546f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XGRumjy93feCWHIpqt3eVg.png"/></div></div></figure><p id="e528" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，我们已经使用SSH隧道连接到运行在我们的DBCS实例上的SPARQL端点。</p><p id="a3dd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们还可以使用curl通过SSH隧道直接测试SPARQL REST接口。在本例中，我们在Windows客户端计算机上使用Cygwin终端。下面的curl命令将test_query.rq文件中的SPARQL查询发送到运行在我们的DBCS实例上的Fuseki端点，并将结果打印到stdout。</p><pre class="je jf jg jh fd jl jm jn jo aw jp bi"><span id="e2c3" class="jq jr hh jm b fi js jt l ju jv">curl –X POST –data-binary “@test_quey.rq” –H “Content-Type: application/sparql-query” –H “Accept: application/sparql-results+json” “http://localhost:3030/sparql"</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kr"><img src="../Images/0203758e5e67e3b46ae788b55d7d18f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1358/format:webp/1*nC1dZsAymC2HdUTCokoypw.png"/></div></figure><p id="29ab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们完事了。我们已经成功访问了运行在我们的DBCS实例上的W3C标准SPARQL REST端点。</p><p id="7730" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">“Oracle Spatial和图形入门— RDF知识图”系列的最后一篇文章到此结束。在第一篇文章中，我们在18.1 DBCS实例上设置和配置了Oracle Spatial和Graph — RDF语义图。在第二篇文章中，我们加载了一些RDF数据，并使用SQL Developer的SPARQL查询编辑器运行了一些示例查询，在最后一篇文章中，我们在我们的DBCS实例上设置了一个W3C标准的SPARQL端点，为我们的triplestore提供一个REST接口。</p><p id="5c51" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本博客系列中涉及的所有内容的详细步骤都可以在本<a class="ae jc" href="https://github.com/mperry455/rdf-graph-oracle-public-cloud-18c/blob/main/RDF_18_1_DBCS_how_to.pdf" rel="noopener ugc nofollow" target="_blank">操作指南</a>中找到。</p></div></div>    
</body>
</html>