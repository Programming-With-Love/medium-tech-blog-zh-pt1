<html>
<head>
<title>PL/SQL: Everything You Need To Know About PL/SQL</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">PL/SQL:关于PL/SQL你需要知道的一切</h1>
<blockquote>原文：<a href="https://medium.com/edureka/pl-sql-86e7652b2801?source=collection_archive---------0-----------------------#2019-11-15">https://medium.com/edureka/pl-sql-86e7652b2801?source=collection_archive---------0-----------------------#2019-11-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/a89c40b881290bab94da4104ec32b802.png" data-original-src="https://miro.medium.com/v2/resize:fit:1386/format:webp/1*bIhLOcmBN77-AL3NFXZpMw.jpeg"/></div></figure><p id="7fc9" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">PL/SQL是一种过程语言，克服了结构化查询语言所面临的缺点。它是SQL的扩展，我们甚至可以在任何PL/SQL应用程序或程序中毫无困难地使用SQL查询。在本PL/SQL教程中，我们将详细介绍PL/SQL的基本概念。本文涵盖了以下主题。</p><ol class=""><li id="db3d" class="jj jk hh in b io ip is it iw jl ja jm je jn ji jo jp jq jr bi translated">什么是PL/SQL？</li></ol><ul class=""><li id="0207" class="jj jk hh in b io ip is it iw jl ja jm je jn ji js jp jq jr bi translated">特征</li><li id="e356" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated">PL/SQL与SQL</li></ul><p id="2803" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">2.PL/SQL中的块结构</p><p id="d3e8" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">3.PL/SQL变量</p><p id="d21b" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">4.PL/SQL中的函数</p><p id="2673" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">5.PL/SQL过程</p><p id="cd10" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">6.嵌套分程序</p><p id="1b52" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">7.如果语句</p><p id="a88b" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">8.选择语句</p><p id="1b8e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">9.循环语句</p><p id="a80e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">10.While循环语句</p><p id="fe8c" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">11.For循环语句</p><p id="e96e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">12.异常处理</p><h1 id="a736" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">什么是PL/SQL？</h1><figure class="kx ky kz la fd ii er es paragraph-image"><div class="er es kw"><img src="../Images/0e36719b33653d60839102d27c05c3ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:572/format:webp/1*N6HTX6eUu15xHjB_YWRtRw.png"/></div></figure><p id="c895" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">它代表结构化查询语言的过程语言扩展。oracle创建了PL/SQL，它扩展了SQL的一些限制，为构建在Oracle数据库上运行的任务关键型应用程序提供了更全面的解决方案。</p><h2 id="9de7" class="lb jz hh bd ka lc ld le ke lf lg lh ki iw li lj km ja lk ll kq je lm ln ku lo bi translated">特征</h2><ul class=""><li id="0e7a" class="jj jk hh in b io lp is lq iw lr ja ls je lt ji js jp jq jr bi translated">PL/SQL提供了过程语言的功能，如决策、迭代等。</li><li id="f603" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated">使用一个命令，PL/SQL可以执行许多查询。</li><li id="d997" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated">我们还可以重用创建后存储在数据库中的PL/SQL单元，如函数、触发器、过程等。</li><li id="b080" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated">PL/SQL还有一个异常处理块，用于处理PL/SQL中的异常。</li><li id="2274" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated">使用PL/SQL也可以进行广泛的错误检查</li><li id="80a0" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated">用PL/SQL编写的应用程序可以移植到其他硬件和操作系统，前提是oracle必须可以运行。</li></ul><h2 id="0a9b" class="lb jz hh bd ka lc ld le ke lf lg lh ki iw li lj km ja lk ll kq je lm ln ku lo bi translated">PL/SQL与SQL</h2><figure class="kx ky kz la fd ii er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es lu"><img src="../Images/13198edf22ea18e55b6a734a80c29ee6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0MpbjuY6AIsNVlTlCGmwHQ.png"/></div></div></figure><h1 id="7f95" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">PL/SQL中的块结构</h1><figure class="kx ky kz la fd ii er es paragraph-image"><div class="er es lz"><img src="../Images/1a07e97dfe87c55bbabd79951951a6f8.png" data-original-src="https://miro.medium.com/v2/resize:fit:824/format:webp/1*Fxe0v8Ni44s_VgZyXvZ14w.png"/></div></figure><p id="bff0" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">PL/SQL通常将代码组织成块。没有名称的代码块称为匿名块。它被称为匿名块，因为它不保存在oracle数据库中。让我们看一下PL/SQL中的匿名块。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="e339" class="lb jz hh mb b fi mf mg l mh mi">[<strong class="mb hi">DECLARE</strong>]<br/>declaration statements;<br/>[<strong class="mb hi">BEGIN</strong>]<br/>execution statements;<br/>[EXCEPTION]<br/>exception statements;<br/><strong class="mb hi">END</strong>;<br/>/</span></pre><p id="113c" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">看上面的图，我们可以看到块结构分为四个部分，即声明、开始、异常和结束。让我们试着理解块结构在PL/SQL中是如何工作的。在所有这些部分中，执行部分是必需的，其余部分都是可选的。</p><ul class=""><li id="8bee" class="jj jk hh in b io ip is it iw jl ja jm je jn ji js jp jq jr bi translated"><strong class="in hi"> DECLARE </strong>关键字用于对用于声明的数据类型和结构如变量、函数等进行声明。</li><li id="142d" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated"><strong class="in hi"> BEGIN </strong>关键字用于执行段。它是强制性的，包含所有需要执行的语句。这个块是定义业务逻辑的地方，我们可以在这个块中使用过程语句或SQL语句。</li><li id="1016" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated"><strong class="in hi">异常</strong>关键字用于异常部分。它包含所有的异常语句。</li><li id="65ff" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated"><strong class="in hi"> END </strong>关键字标记块的结尾，反斜杠“/”告诉您正在使用的工具(Oracle数据库工具)执行PL/SQL块。</li></ul><p id="3695" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这里有一个简单的例子来展示我们如何使用PL/SQL代码。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="1ec0" class="lb jz hh mb b fi mf mg l mh mi">BEGIN <br/>NULL; <br/>END; /</span></pre><p id="b5fe" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在我们知道了PL/SQL中的块结构是如何工作的，让我们了解PL/SQL的各个方面，比如声明、命名和给变量赋值。</p><h1 id="4621" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">PL/SQL变量</h1><p id="0377" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">PL/SQL中的变量基本上是支持特定数据类型的可变名称或临时存储位置。让我们看看如何在PL/SQL程序中使用变量。</p><h2 id="7ee6" class="lb jz hh bd ka lc ld le ke lf lg lh ki iw li lj km ja lk ll kq je lm ln ku lo bi translated">变量命名规则</h2><p id="7b78" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">PL/SQL遵循以下规则来命名变量。</p><ul class=""><li id="e9bd" class="jj jk hh in b io ip is it iw jl ja jm je jn ji js jp jq jr bi translated">变量不能超过31个字符</li><li id="f76d" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated">变量名应该以ASCII字符开头。由于PL/SQL区分大小写，大写字母和小写字母将是不同的变量。</li><li id="7dd1" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated">在第一个字符之后，必须有一个特殊字符($，_)或任何数字。</li></ul><h2 id="a56b" class="lb jz hh bd ka lc ld le ke lf lg lh ki iw li lj km ja lk ll kq je lm ln ku lo bi translated">命名规格</h2><p id="1def" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">使用下面列出的命名约定来使用变量。</p><figure class="kx ky kz la fd ii er es paragraph-image"><div class="er es mm"><img src="../Images/f53fcb6d21f4c57de1165e671f6e47fa.png" data-original-src="https://miro.medium.com/v2/resize:fit:440/format:webp/1*UNc2sAGb2FhNdyt7sggaBA.png"/></div></figure><h2 id="4407" class="lb jz hh bd ka lc ld le ke lf lg lh ki iw li lj km ja lk ll kq je lm ln ku lo bi translated">申报</h2><p id="56d4" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">让我们试着理解在PL/SQL中变量声明是如何完成的</p><p id="84e0" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">声明包括变量名，后跟数据类型，并用分号分隔。下面的示例展示了如何在PL/SQL中声明变量。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="4924" class="lb jz hh mb b fi mf mg l mh mi"><strong class="mb hi">DECLARE<br/></strong>v_name <strong class="mb hi">VARCHAR</strong>(25);<br/>n_age NUMBER(3);<br/><strong class="mb hi">BEGIN<br/></strong>NULL;<br/><strong class="mb hi">END</strong>;</span></pre><p id="0c8a" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">您还可以添加数据类型的长度，就像我们在上面的示例中所做的那样。</p><h2 id="c00b" class="lb jz hh bd ka lc ld le ke lf lg lh ki iw li lj km ja lk ll kq je lm ln ku lo bi translated">锚</h2><p id="0412" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">锚基本上是指使用%TYPE关键字来声明数据类型与表中特定列的数据类型相关联的变量。</p><p id="a503" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">看一个例子来理解这一点。假设我们有一个雇员表，我们可以按照下面的方式使用锚。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="482d" class="lb jz hh mb b fi mf mg l mh mi"><strong class="mb hi">DECLARE<br/></strong>v_name EMPLOYEE.<strong class="mb hi">NAME</strong>%TYPE;<br/>n_age    EMPLOYEE.AGE%TYPE;<br/><strong class="mb hi">BEGIN<br/></strong>NULL;<br/><strong class="mb hi">END</strong>;<br/>/</span></pre><h2 id="45b6" class="lb jz hh bd ka lc ld le ke lf lg lh ki iw li lj km ja lk ll kq je lm ln ku lo bi translated">分配</h2><p id="19c5" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">变量赋值是相当容易的，我们可以用赋值运算符给变量赋值。下面的例子展示了我们如何给一个变量赋值。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="05d2" class="lb jz hh mb b fi mf mg l mh mi"><strong class="mb hi">DECLARE<br/></strong>v_name <strong class="mb hi">VARCHAR</strong>(20);<br/>n_course <strong class="mb hi">VARCHAR</strong>(10);<br/><strong class="mb hi">BEGIN<br/></strong>v_name = "edureka";<br/>v_course = "sql";<br/><strong class="mb hi">END</strong>;<br/>/</span></pre><h2 id="2e11" class="lb jz hh bd ka lc ld le ke lf lg lh ki iw li lj km ja lk ll kq je lm ln ku lo bi translated">初始化</h2><p id="8353" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">我们也可以在声明部分为变量初始化一个值。下面的例子展示了我们如何初始化变量的值。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="972f" class="lb jz hh mb b fi mf mg l mh mi"><strong class="mb hi">DECLARE<br/></strong>v_name <strong class="mb hi">VARCHAR</strong>(20) = "edureka";<br/>n_course <strong class="mb hi">VARCHAR</strong>(10) = "sql";<br/><strong class="mb hi">BEGIN<br/></strong>NULL;<br/><strong class="mb hi">END</strong>;<br/>/</span></pre><p id="267b" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在我们知道了如何处理变量，让我们试着理解如何在PL/SQL中使用函数。</p><h1 id="1a66" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">PL/SQL中的函数</h1><p id="4683" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">PL/SQL中的函数基本上是一个返回值的命名块。它也被称为子例程或子程序，以下语法显示了我们如何在PL/SQL中使用函数。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="92d6" class="lb jz hh mb b fi mf mg l mh mi"><strong class="mb hi">CREATE</strong> <!-- -->[OR<!-- --> <!-- -->REPLACE] <strong class="mb hi">FUNCTION</strong> <!-- -->function_name [(<br/>parameter_1 [IN] [<strong class="mb hi">OUT</strong>] data_type,<br/>parameter_2 [IN] [<strong class="mb hi">OUT</strong>] data_type,<br/>parameter_N [IN] [<strong class="mb hi">OUT</strong>] data_type]<br/><strong class="mb hi">RETURN</strong> <!-- -->return_data_type <strong class="mb hi">IS<br/>BEGIN<br/></strong>statements<br/><strong class="mb hi">return</strong> <!-- -->return_data_type;<br/>EXCEPTION<br/><strong class="mb hi">END</strong>;<br/>/</span></pre><p id="5ca9" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">首先，必须在关键字后指定一个函数名。函数名必须以动词开头。一个函数可能没有参数，也可能有一个或多个我们在parameters中指定的参数。我们必须显式指定每个参数的数据类型，然后是可以执行以下任一操作的模式。</p><ul class=""><li id="3af8" class="jj jk hh in b io ip is it iw jl ja jm je jn ji js jp jq jr bi translated"><strong class="in hi">IN—</strong>IN参数是只读参数。</li><li id="8db1" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated"><strong class="in hi"> OUT — </strong>这是一个只写参数</li><li id="8808" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated"><strong class="in hi">IN OUT—</strong>IN OUT参数既是读写参数。</li></ul><p id="de78" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这里有一个简单的例子来展示我们如何在PL/SQL中使用函数。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="b8a1" class="lb jz hh mb b fi mf mg l mh mi"><strong class="mb hi">CREATE</strong> <!-- -->OR<!-- --> <!-- -->REPLACE<!-- --> <strong class="mb hi">FUNCTION</strong> <!-- -->try_parse(</span><span id="98d5" class="lb jz hh mb b fi mn mg l mh mi">iv_number IN<!-- --> <!-- -->VARCHAR2)</span><span id="060d" class="lb jz hh mb b fi mn mg l mh mi"><strong class="mb hi">RETURN</strong> <!-- -->NUMBER <strong class="mb hi">IS</strong></span><span id="7caa" class="lb jz hh mb b fi mn mg l mh mi"><strong class="mb hi">BEGIN</strong></span><span id="ca7e" class="lb jz hh mb b fi mn mg l mh mi"><strong class="mb hi">RETURN</strong> <!-- -->to_number(iv_number);</span><span id="8541" class="lb jz hh mb b fi mn mg l mh mi">EXCEPTION</span><span id="ba5c" class="lb jz hh mb b fi mn mg l mh mi"><strong class="mb hi">WHEN</strong> <!-- -->others <strong class="mb hi">THEN</strong></span><span id="8eba" class="lb jz hh mb b fi mn mg l mh mi"><strong class="mb hi">RETURN</strong> <!-- -->NULL;</span><span id="4061" class="lb jz hh mb b fi mn mg l mh mi"><strong class="mb hi">END</strong>;</span></pre><p id="e414" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">调用函数</strong></p><p id="36a7" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">让我们在下面的例子中尝试调用我们在匿名块中创建的函数。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="19b4" class="lb jz hh mb b fi mf mg l mh mi"><strong class="mb hi">SET</strong> <!-- -->SERVEROUTPUT <strong class="mb hi">ON</strong> <strong class="mb hi">SIZE</strong> <!-- -->1000000;<br/><strong class="mb hi">DECLARE<br/></strong>n_x number;<br/>n_y number;<br/>n_z number;<br/><strong class="mb hi">BEGIN<br/></strong>n_x := try_parse('256');<br/>n_y := try_parse('29.72');<br/>n_z := try_parse('pqrs');<br/>DBMS_OUTPUT.PUT_LINE(n_x);<br/>DBMS_OUTPUT.PUT_LINE(n_y);<br/>DBMS_OUTPUT.PUT_LINE(n_z);<br/><strong class="mb hi">END</strong>;<br/>/</span></pre><p id="7dc7" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我们也可以在SELECT语句中调用这个函数。现在我们知道了如何在PL/SQL中使用函数，让我们试着理解如何在PL/SQL中使用过程。</p><h1 id="e3a7" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">PL/SQL过程</h1><p id="e417" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">过程基本上是一个完成特定任务的块。使用过程，我们可以包装或封装复杂的业务逻辑，并在应用程序和数据库层重用它们。</p><p id="e752" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">让我们看一个简单的例子来理解这个过程在PL/SQL中是如何工作的</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="a487" class="lb jz hh mb b fi mf mg l mh mi"><strong class="mb hi">CREATE</strong> <!-- -->OR<!-- --> <!-- -->REPLACE<!-- --> <strong class="mb hi">PROCEDURE</strong> <!-- -->adjust_salary(<br/>in_employee_id IN<!-- --> <!-- -->EMPLOYEES.EMPLOYEE_ID%TYPE,<br/>in_percent IN<!-- --> <!-- -->NUMBER<br/>) <strong class="mb hi">IS<br/>BEGIN<br/></strong>-- update employee's salary<br/><strong class="mb hi">UPDATE</strong> <!-- -->employees<br/><strong class="mb hi">SET</strong> <!-- -->salary = salary + salary * in_percent / 100<br/><strong class="mb hi">WHERE</strong> <!-- -->employee_id = in_employee_id;<br/><strong class="mb hi">END</strong>;</span></pre><p id="a120" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在上面的例子中，我们有两个参数，过程按给定的百分比调整薪水，关键字UPDATE更新薪水信息中的值。</p><p id="0226" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">程序头</strong></p><p id="4dd8" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">关键字IS之前的部分称为过程头。以下是使用过程时必须熟悉的一些要点。</p><ul class=""><li id="92d9" class="jj jk hh in b io ip is it iw jl ja jm je jn ji js jp jq jr bi translated"><strong class="in hi">模式— </strong>它是过程所属的模式的可选名称。</li><li id="a4d5" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated"><strong class="in hi">名称— </strong>应该以动词开头的过程的名称。</li><li id="54d7" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated"><strong class="in hi">参数— </strong>可选参数列表。</li><li id="535b" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated"><strong class="in hi"> AUTHID — </strong>它确定程序是以当前用户的权限执行，还是以程序的原始所有者的权限执行。</li></ul><p id="0ea0" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">程序体</strong></p><p id="5e4d" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">IS关键字后面的所有内容都称为过程体。我们在过程体中有声明、异常和执行语句。与函数不同，过程中的RETURN关键字用于暂停执行并将控制权返回给调用方。</p><p id="6ea7" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">调用程序</strong></p><p id="6310" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">让我们看看如何在PL/SQL中调用过程。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="0251" class="lb jz hh mb b fi mf mg l mh mi">EXEC procedure_name(param1,param2...paramN);</span></pre><p id="c462" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我们可以只使用EXEC关键字和过程名来调用不带参数的过程。现在我们知道了如何使用过程，让我们试着理解如何在PL/SQL中使用嵌套块。</p><h1 id="bfbd" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">嵌套分程序</h1><p id="d7f6" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">嵌套块不过是一个或多个PL/SQL块的组合，以便更好地控制程序的执行和异常处理。</p><p id="a675" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">下面是一个嵌套块的简单示例。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="8fed" class="lb jz hh mb b fi mf mg l mh mi"><strong class="mb hi">SET</strong> <!-- -->SERVEROUTPUT <strong class="mb hi">ON</strong> <strong class="mb hi">SIZE</strong> <!-- -->1000000;<br/><strong class="mb hi">DECLARE<br/></strong>n_emp_id EMPLOYEES.EMPLOYEE_ID%TYPE := &amp;emp_id1;<br/><strong class="mb hi">BEGIN<br/>DECLARE<br/></strong>n_emp_id employees.employee_id%TYPE := &amp;emp_id2;<br/>v_name   employees.first_name%TYPE;<br/><strong class="mb hi">BEGIN<br/>SELECT</strong> <!-- -->first_name<br/><strong class="mb hi">INTO</strong> <!-- -->v_name<br/><strong class="mb hi">FROM</strong> <!-- -->employees<br/><strong class="mb hi">WHERE</strong> <!-- -->employee_id = n_emp_id;<br/>DBMS_OUTPUT.PUT_LINE('First name of employee '<!-- --> <!-- -->|| n_emp_id ||<br/>' is '<!-- --> <!-- -->|| v_name);<br/>EXCEPTION<br/><strong class="mb hi">WHEN</strong> <!-- -->no_data_found <strong class="mb hi">THEN<br/></strong>DBMS_OUTPUT.PUT_LINE('Employee '<!-- --> <!-- -->|| n_emp_id || ' not found');<br/><strong class="mb hi">END</strong>;<br/><strong class="mb hi">END</strong>;<br/>/</span></pre><p id="092e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">上例中的外部PL/SQL块称为父块或封闭块，而内部块则称为子块或封闭块。</p><p id="18aa" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在两个块中使用相同名称的变量不是一个好主意，因为在执行过程中，子块变量将覆盖父块变量。发生这种情况是因为PL/SQL将第一优先权赋予了它自己的块中的变量。</p><p id="b334" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">块标签</strong></p><p id="d88e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我们可以通过块标签来解决这个问题，块标签可以帮助我们使用标签来引用块中的变量。</p><p id="38e5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这里有一个简单的例子来说明我们如何使用块标签。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="bc2d" class="lb jz hh mb b fi mf mg l mh mi">&lt;&lt;block_label&gt;&gt; DECLARE ... BEGIN ... END;</span></pre><p id="506d" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">使用块标签有助于提高代码的可读性，获得更好的控制并引用块。现在我们知道了如何使用嵌套块，让我们试着理解IF语句在PL/SQL中是如何工作的。</p><h1 id="2b75" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">如果语句</h1><p id="cd9c" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">PL/SQL有三个IF语句</p><ul class=""><li id="e5a5" class="jj jk hh in b io ip is it iw jl ja jm je jn ji js jp jq jr bi translated"><strong class="in hi"> IF-THEN </strong> —这是最简单的IF语句，如果条件为真，则执行语句，如果条件为假，则不执行任何操作。</li><li id="a2bc" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated"><strong class="in hi"> IF-THEN-ELSE — </strong>在这种情况下，ELSE子句被添加用于替代语句序列。</li><li id="41a7" class="jj jk hh in b io jt is ju iw jv ja jw je jx ji js jp jq jr bi translated"><strong class="in hi"> IF-THEN-ELSEIF — </strong>它允许我们在一个序列中执行多个测试条件。</li></ul><p id="0dc1" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi"> IF-THEN语法</strong></p><figure class="kx ky kz la fd ii er es paragraph-image"><div class="er es mo"><img src="../Images/b320044c467897063b43751523c1a328.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*igow2-YZtjRQVm-izYn_GQ.png"/></div></figure><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="7e1c" class="lb jz hh mb b fi mf mg l mh mi">IF condition THEN sequence_of_statements; END IF;</span></pre><p id="9927" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi"> IF-THEN-ELSE语法</strong></p><figure class="kx ky kz la fd ii er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mp"><img src="../Images/162869d6b95f09e8b5cc0c9fae2a3cf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YaXo62VDejoupC9IeXY7IA.png"/></div></div></figure><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="8e0d" class="lb jz hh mb b fi mf mg l mh mi">IF condition THEN sequence_of_if_statements; ELSE sequence_of_else_statements; END IF;</span></pre><p id="b01a" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi"> IF-THEN-ELSEIF语法</strong></p><figure class="kx ky kz la fd ii er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es mq"><img src="../Images/2987bbfbd4c81a0fb2c722d8ee0bfa92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*v4F1uJHoTv4MECT6bPY_9g.png"/></div></div></figure><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="e5a3" class="lb jz hh mb b fi mf mg l mh mi">IF condition1 THEN sequence_of_statements1 ELSIF condition2 THEN sequence_of_statements2 ELSE sequence_of_statements3 END IF;</span></pre><p id="a045" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在我们已经完成了IF语句，让我们看看PL/SQL中的CASE语句。</p><h1 id="1044" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">选择语句</h1><p id="c92d" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">CASE语句主要帮助执行基于选择器的一系列语句。在这种情况下，选择器可以是任何东西，它可以是变量、函数或简单的表达式。下面是一个简单的例子，展示了PL/SQL中CASE语句的语法。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="169e" class="lb jz hh mb b fi mf mg l mh mi">[&lt;&lt;label_name&gt;&gt;]<br/>CASE<!-- --> <!-- -->[<strong class="mb hi">TRUE</strong> <!-- -->| selector]<br/><strong class="mb hi">WHEN</strong> <!-- -->expression1 <strong class="mb hi">THEN<br/></strong>sequence_of_statements1;<br/><strong class="mb hi">WHEN</strong> <!-- -->expression2 <strong class="mb hi">THEN<br/></strong>sequence_of_statements2;<br/>...<br/><strong class="mb hi">WHEN</strong> <!-- -->expressionN <strong class="mb hi">THEN<br/></strong>sequence_of_statementsN;<br/>[<strong class="mb hi">ELSE</strong> <!-- -->sequence_of_statementsN+1;]<br/><strong class="mb hi">END</strong> <!-- -->CASE<!-- --> <!-- -->[label_name];</span></pre><p id="892a" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在上面的语法中，CASE关键字后面是选择器。PL/SQL将只评估选择器一次，以确定需要执行哪个语句。</p><p id="0680" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">选择器后面是WHEN关键字。如果表达式满足选择器，则执行then关键字后的相应语句。</p><p id="328a" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在我们知道了如何使用CASE语句，让我们试着理解如何在PL/SQL中使用loop语句。</p><h1 id="de79" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">循环语句</h1><p id="5f68" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">PL/SQL中的循环语句是一种迭代语句，允许您多次执行一系列语句。下面是一个简单的例子，展示了PL/SQL中循环语句的语法。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="1907" class="lb jz hh mb b fi mf mg l mh mi">LOOP sequence_of_statements; <br/>ND LOOP;</span></pre><p id="f3f0" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在LOOP和END LOOP关键字之间必须至少有一个可执行语句。</p><p id="9830" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">带有退出语句的循环</strong></p><p id="76da" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">EXIT和EXIT when语句允许您退出循环。EXIT WHEN语句有条件地终止循环，而EXIT语句无条件地终止执行。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="0254" class="lb jz hh mb b fi mf mg l mh mi">LOOP ... EXIT WHEN condition;<br/>END LOOP;</span></pre><p id="4628" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">循环标签</strong></p><p id="d133" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在嵌套循环中使用时，循环标签用于限定循环计数器变量的名称。下面是循环标签的语法。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="fa4e" class="lb jz hh mb b fi mf mg l mh mi">&lt;&lt;label&gt;&gt; LOOP sequence_of_statements;<br/>END LOOP label;</span></pre><p id="9587" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在我们知道了如何使用循环语句，让我们来看看while循环语句，以便更好地理解。</p><h2 id="7a86" class="lb jz hh bd ka lc ld le ke lf lg lh ki iw li lj km ja lk ll kq je lm ln ku lo bi translated">While循环语句</h2><p id="c6a2" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">当直到执行开始才定义执行次数时，我们可以使用WHILE循环语句。以下语法用于PL/SQL中的WHILE循环语句。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="ca30" class="lb jz hh mb b fi mf mg l mh mi">WHILE condition LOOP sequence_of_statements; END LOOP;</span></pre><p id="fce1" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">语法中的条件是一个布尔值或表达式，其值为TRUE、FALSE或NULL。如果条件为真，则执行语句，如果条件为假，则停止执行，控制转到下一个可执行语句。</p><p id="69b7" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在我们知道了如何使用WHILE循环语句，让我们来看看FOR循环语句。</p><h2 id="996a" class="lb jz hh bd ka lc ld le ke lf lg lh ki iw li lj km ja lk ll kq je lm ln ku lo bi translated">For循环语句</h2><p id="b784" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">PL/SQL中的FOR循环语句允许我们执行一系列语句一定的次数。以下是PL/SQL中用于循环语句的语法</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="c10c" class="lb jz hh mb b fi mf mg l mh mi">FOR loop_counter IN [REVERSE] lower_bound .. higher_bound LOOP sequence_of_statements; END LOOP;</span></pre><p id="93c0" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">PL/SQL自动为循环创建一个整数数据类型的局部变量loop_counter，这样您就不必显式声明它。下限..上限是循环迭代的范围。此外，在LOOP和END LOOP关键字之间必须至少有一个可执行语句。</p><p id="ae77" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在我们知道了如何在PL/SQL中使用循环语句，让我们来看看PL/SQL中的异常处理。</p><h1 id="aa49" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">异常处理</h1><p id="f57c" class="pw-post-body-paragraph il im hh in b io lp iq ir is lq iu iv iw mj iy iz ja mk jc jd je ml jg jh ji ha bi translated">在PL/SQL中，任何种类的错误都被视为异常。异常可以被视为可以改变或变更执行流的特殊条件。在PL/SQL中，有两种类型的异常。</p><p id="c47c" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><strong class="in hi">定义异常</strong></p><p id="684d" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">PL/SQL中的异常必须在引发之前声明。我们可以使用exception关键字来定义异常，就像我们在下面的例子中所做的那样。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="b561" class="lb jz hh mb b fi mf mg l mh mi">EXCEPTION_NAME EXCEPTION;</span></pre><p id="7846" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">要引发异常，我们使用raise关键字。</p><pre class="kx ky kz la fd ma mb mc md aw me bi"><span id="846d" class="lb jz hh mb b fi mf mg l mh mi">RAISE EXCEPTION_NAME;</span></pre><p id="339f" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">以上是关于PL/SQL的所有内容，我希望这篇文章能够帮助您增加知识的价值。如果你想查看更多关于人工智能、DevOps、道德黑客等市场最热门技术的文章，那么你可以参考<a class="ae mr" href="https://www.edureka.co/blog/?utm_source=medium&amp;utm_medium=content-link&amp;utm_campaign=pl-sql-tutorial" rel="noopener ugc nofollow" target="_blank"> Edureka的官方网站。</a></p><p id="ad35" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">请留意本系列中的其他文章，它们将解释SQL的各个方面。</p><blockquote class="ms mt mu"><p id="965f" class="il im mv in b io ip iq ir is it iu iv mw ix iy iz mx jb jc jd my jf jg jh ji ha bi translated"><em class="hh"> 1。</em><a class="ae mr" rel="noopener" href="/edureka/sql-vs-nosql-db-5d9b69ace6ac"><em class="hh">SQL之间的差异&amp; NoSQL数据库</em> </a></p><p id="a4ac" class="il im mv in b io ip iq ir is it iu iv mw ix iy iz mx jb jc jd my jf jg jh ji ha bi translated"><em class="hh"> 2。</em><a class="ae mr" rel="noopener" href="/edureka/sql-for-data-science-a8fe10fe2ef9"><em class="hh">SQL For Data Science</em></a></p><p id="ee72" class="il im mv in b io ip iq ir is it iu iv mw ix iy iz mx jb jc jd my jf jg jh ji ha bi translated"><a class="ae mr" rel="noopener" href="/edureka/sql-interview-questions-162f97f37ac2"> <em class="hh"> 3。前65名SQL面试问题</em> </a> <em class="hh"> s </em></p></blockquote></div><div class="ab cl mz na go nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ha hb hc hd he"><p id="733a" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><em class="mv">原载于2019年11月15日</em><a class="ae mr" href="https://www.edureka.co/blog/pl-sql-tutorial/" rel="noopener ugc nofollow" target="_blank"><em class="mv">https://www.edureka.co</em></a><em class="mv">。</em></p></div></div>    
</body>
</html>