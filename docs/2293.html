<html>
<head>
<title>Unity Coroutine Vs Thread</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Unity Coroutine Vs Thread</h1>
<blockquote>原文：<a href="https://medium.easyread.co/unity-coroutine-vs-thread-fa5a6dc168a7?source=collection_archive---------0-----------------------#2018-03-29">https://medium.easyread.co/unity-coroutine-vs-thread-fa5a6dc168a7?source=collection_archive---------0-----------------------#2018-03-29</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="a7aa" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Beberapa waktu yang lalu, saya melakukan diskusi dengan teman-teman <em class="ki"> developer </em> game mengenai optimasi aplikasi game untuk meningkatkan <strong class="jm io"> <em class="ki"> Frame Per Second </em> ( <em class="ki"> FPS </em> ) </strong> . Dalam bahasan tersebut kami membahas tentang bagaimana jika kita mempunyai <em class="ki"> task </em> atau proses kalkulasi yang berat atau lama seperti <em class="ki"> Fog of War </em> , <em class="ki"> PathFinding </em> , dan lain-lain, namun tetap menjaga <em class="ki"> FPS </em> dari game kita. Dalam pembahasan tersebut, ada yang menyarankan untuk menggunakan <strong class="jm io"> <em class="ki"> Coroutine </em> </strong> . Dari situ saya menangkap terdapat beberapa kesalahpahaman tentang <em class="ki"> Coroutine </em> yang akan kita bahas kali ini.</p><h2 id="6bf4" class="kj kk in bd kl km kn dn ko kp kq dp kr jv ks kt ku jz kv kw kx kd ky kz la lb bi translated"><strong class="ak"> Unity Main Thread </strong></h2><p id="539e" class="pw-post-body-paragraph jk jl in jm b jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd lg kf kg kh ig bi translated"><em class="ki"> Unity core game loop </em> berjalan pada sebuah <em class="ki"> thread </em> yang sering disebut dengan <strong class="jm io"> <em class="ki"> Unity MainThread </em> </strong> . Pada <em class="ki"> thread </em> ini semua proses <code class="fe lh li lj lk b"><strong class="jm io">onCollisionXX(), update(), LateUpdate(), FixedUpdate()</strong></code> dan lain-lain berjalan (lihat <a class="ae ll" href="https://docs.unity3d.com/Manual/ExecutionOrder.html" rel="noopener ugc nofollow" target="_blank"> Unity Execution Order </a> ). <em class="ki"> Nah </em> , FPS dari aplikasi kita bergantung pada berapa lama waktu yang dibutuhkan <em class="ki"> MainThread </em> ini untuk melakukan semua operasi dalam satu game <em class="ki"> loop </em> atau satu frame. Jika <em class="ki"> MainThread </em> ini membutuhkan waktu sekitar 33ms untuk melakukan seluruh proses <em class="ki"> logic </em> -nya, maka aplikasi kita akan berjalan dengan 30 FPS (1000ms/30ms = 30.3…FPS). Oleh karena itu, jika kita ingin meningkatkan FPS kita, maka hal yang harus kita perhatikan adalah <strong class="jm io"> Bagaimana Meminimalisir Operasi Yang Dilakukan MainThread. </strong></p><figure class="ln lo lp lq gt lr gh gi paragraph-image"><div role="button" tabindex="0" class="ls lt di lu bf lv"><div class="gh gi lm"><img src="../Images/d0891581748169e009b35077fba641ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n3wl4LSwk6bziLUVTQAxzg.jpeg"/></div></div><figcaption class="ly lz gj gh gi ma mb bd b be z dk">Unity Script Lifecycle</figcaption></figure><h2 id="1357" class="kj kk in bd kl km kn dn ko kp kq dp kr jv ks kt ku jz kv kw kx kd ky kz la lb bi translated">Unity Coroutine</h2><p id="8850" class="pw-post-body-paragraph jk jl in jm b jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd lg kf kg kh ig bi translated"><em class="ki"> Unity Coroutine </em> adalah fitur <em class="ki"> asynchronous </em> yang dimiliki Unity untuk mengeksekusi <em class="ki"> task </em> yang membutuhkan pengeksekusian dalam beberapa frame secara bertahap. Jika teman-teman perhatikan pada gambar di atas, <em class="ki"> Unity Coroutine </em> berjalan pada <em class="ki"> MainThread </em> , yang berarti <em class="ki"> coroutine </em> tetap dibebankan pada <em class="ki"> MainThread </em> dan tetap berpengaruh menurunkan FPS. Jika kita menempatkan <em class="ki"> task </em> yang berat pada coroutine, maka task tersebut tetap akan mempengaruhi FPS.</p><p id="61df" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Lalu teman-teman bertanya, apa arti <em class="ki"> asynchronous </em> yang disebut di atas? <em class="ki"> Asynchronous </em> yang disebutkan di atas <strong class="jm io"> proses </strong> <strong class="jm io"> yang membutuhkan pengeksekusian dalam beberapa frame secara bertahap </strong> . Contohnya adalah :</p><ol class=""><li id="f1a8" class="mc md in jm b jn jo jr js jv me jz mf kd mg kh mh mi mj mk bi translated"><strong class="jm io"> <em class="ki"> Fade Animation </em> </strong> , untuk membuat <em class="ki"> fade animation </em> , teman-teman akan mengurai transparansi sebuah <em class="ki"> image </em> secara perlahan pada setiap frame.</li><li id="b0b7" class="mc md in jm b jn ml jr mm jv mn jz mo kd mp kh mh mi mj mk bi translated"><em class="ki"> WaitForSeconds </em> / <em class="ki"> EndOfFrame </em> / <em class="ki"> SomeFrame </em> , untuk menunggu beberapa detik atau <em class="ki"> end of frame </em> atau menunggu beberapa frame terbentuk, lalu mengeksekusi sesuatu.</li></ol><h2 id="72df" class="kj kk in bd kl km kn dn ko kp kq dp kr jv ks kt ku jz kv kw kx kd ky kz la lb bi translated">C# Thread</h2><p id="0dc3" class="pw-post-body-paragraph jk jl in jm b jn lc jp jq jr ld jt ju jv le jx jy jz lf kb kc kd lg kf kg kh ig bi translated">Solusi sebenarnya untuk menangani task yang berat adalah <strong class="jm io"> memisahkan task tersebut untuk tidak dieksekusi di <em class="ki"> MainThread </em> </strong> <strong class="jm io"> dengan </strong> <strong class="jm io"> membuat Thread baru </strong> . <em class="ki"> Thread </em> adalah fitur <em class="ki"> asynchronous </em> yang memungkinkan pengeksekusian <em class="ki"> task </em> secara paralel bergantung pada jumlah <em class="ki"> core </em> dari <em class="ki"> processor </em> .</p><p id="0e41" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Jika teman-teman mencoba membayangkannya, misalnya aplikasi teman-teman berjalan pada perangkat yang memiliki 4 <em class="ki"> core </em> , maka akan ada kemungkinan terbentuknya 4 <em class="ki"> thread </em> yang akan dieksekusi secara bersamaan. Jika <em class="ki"> MainThead </em> dieksekusi pada <em class="ki"> core </em> 1 (20 ms), dan <em class="ki"> pathfinding </em> di eksekusi pada <em class="ki"> core </em> 2 (13 ms), maka FPS akan meningkat secara drastis karena beban <em class="ki"> MainThread </em> terbagi menjadi 1000ms/20ms = 50 FPS.</p><p id="7797" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Jadi solusi yang tepat untuk <em class="ki"> task </em> yang berat adalah <strong class="jm io"> <em class="ki"> MultiThreading </em> </strong> . Namun ada beberapa catatan khusus bahwa <em class="ki"> Unity </em> API tidak <em class="ki"> Thread-Safe </em> , oleh karena itu, kita membutuhkan cara khusus untuk mengunakan <em class="ki"> thread </em> pada unity.</p><p id="037c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Saya tidak akan membahas jauh tentang <em class="ki"> thread </em> , karena <em class="ki"> thread </em> cukup kompleks untuk dibahas. Saya hanya ingin menjadikan artikel ini sebagai pointer buat teman-teman untuk mengeksplorasi tentang <em class="ki"> performance </em> . Dan saya sarankan teman-teman eksplorasi tentang <a class="ae ll" href="https://github.com/sebas77/Svelto.Tasks" rel="noopener ugc nofollow" target="_blank"> Svelto.Tasks </a> , sebuah <em class="ki"> library </em> yang bisa membantu teman-teman saat berurusan dengan <em class="ki"> MultiThreading </em> di Unity.</p><p id="3bc4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Demikian sedikit tulisan saya, jika ada pertanyaan atau saran, boleh menambahkan komentar dibawah 😄</p></div><div class="ab cl mq mr hr ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ig ih ii ij ik"><p id="bf0a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki"> Artikel ini di tulis oleh </em> <a class="mx my ep" href="https://medium.com/u/ea9a874c360d?source=post_page-----fa5a6dc168a7--------------------------------" rel="noopener" target="_blank"> <em class="ki"> Leo Pripos Marbun </em> </a> <em class="ki"> , beliau adalah Co-Founder dan CEO dari </em> <a class="ae ll" href="http://nedstudio.net/" rel="noopener ugc nofollow" target="_blank"> <em class="ki"> Ned Studio </em> </a> <em class="ki"> sebuah Startup Game Development di Yogyakarta. </em></p><p id="0144" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><em class="ki"> Jika anda merasa artikel ini menarik dan bermanfaat, bagikan ke lingkaran pertemanan anda, agar mereka dapat membaca artikel ini. </em></p></div><div class="ab cl mq mr hr ms" role="separator"><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv mw"/><span class="mt bw bk mu mv"/></div><div class="ig ih ii ij ik"><figure class="ln lo lp lq gt lr"><div class="bz fp l di"><div class="mz na l"/></div></figure></div></div>    
</body>
</html>