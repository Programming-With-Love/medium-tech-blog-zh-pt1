<html>
<head>
<title>Connect to a private MySQL Database Service Instance via PublicIP</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通过PublicIP连接到私有的MySQL数据库服务实例</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/connect-to-a-private-mysql-database-service-instance-via-publicip-f892451bb195?source=collection_archive---------1-----------------------#2021-04-14">https://medium.com/oracledevs/connect-to-a-private-mysql-database-service-instance-via-publicip-f892451bb195?source=collection_archive---------1-----------------------#2021-04-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="7808" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">使用MySQL路由器通过公共IP安全地连接到您的私人数据库</em></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/804967fcc41d241d166e246515b10151.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hcKZe4hkZyfRbDcQlEgogw.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Photo by <a class="ae jt" href="https://unsplash.com/@jankolar?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Jan Antonin Kolar</a> on Unsplash</figcaption></figure><p id="0bb6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Oracle MySQL数据库服务是一项完全托管的数据库服务，开发人员可以使用世界上最流行的开源数据库快速开发和部署安全的云原生应用。MySQL数据库服务是唯一一款集成了高性能分析引擎(HeatWave)的MySQL云服务，该引擎使客户能够直接针对其运营的MySQL数据库运行复杂的分析，从而消除了复杂、耗时且昂贵的数据移动以及与独立分析数据库集成的需求。MySQL数据库服务专为Oracle云基础设施(OCI)而优化，完全由Oracle云基础设施和MySQL工程团队构建、管理和支持。</p><p id="46d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在OCI上，出于安全原因，您只能获得一个私有IP，但有时您需要连接到公共IP上的数据库。无论是为了测试还是只是一小段时间，拥有这种可能性都是有用的。</p><p id="67fd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本教程中，您将学习如何安装和配置MySQL路由器，以便将连接重定向到Oracle云基础架构上的MySQL数据库服务DB系统。您可以使用它为MySQL创建一个公共端点。</p><blockquote class="ju jv jw"><p id="a007" class="ie if jc ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated"><strong class="ig hi">注意:</strong>出于安全原因，不建议将您的数据库暴露给任何来自互联网的主机访问。欲了解更多信息，请查看<a class="ae jt" href="https://docs.cloud.oracle.com/en-us/iaas/Content/Security/Reference/networking_security.htm" rel="noopener ugc nofollow" target="_blank"> OCI网络最佳实践</a>。</p></blockquote><h1 id="fb84" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">我们要做什么？</h1><p id="5b2e" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated"><strong class="ig hi"> <em class="jc">先决条件:</em> </strong>您当然需要Oracle云租赁。<a class="ae jt" href="http://bit.ly/rdb-mysql-free-tier" rel="noopener ugc nofollow" target="_blank">如果没有就在这里报名吧！</a> <em class="jc">您将获得价值300美元的免费积分，并且您将永远拥有所有项目的免费等级！</em></p><p id="02c4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本教程中，我不会深入介绍如何创建MySQL数据库服务实例的细节，您可以跟随<a class="ae jt" href="https://blogs.oracle.com/developers/complete-guide-to-getting-started-with-mysql-db-in-the-oracle-cloud" rel="noopener ugc nofollow" target="_blank">这篇精彩的教程</a>开始学习。</p><p id="9194" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">今天，我们将在公共子网(分配有公共IP)中创建计算实例。在这台机器上，我们将安装MySQL路由器包，并将它配置为连接到专用子网上的DB系统。</p><p id="98b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最终的架构看起来会是这样的:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ld"><img src="../Images/ad50c1867a2f6605f89ff11376db8cc7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2K6ljq5_ZIrS68zR-ta67w.png"/></div></div></figure><h1 id="0c0a" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">步骤1:在Oracle Cloud上创建一个Linux实例，并通过ssh连接</strong></h1><blockquote class="ju jv jw"><p id="b044" class="ie if jc ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated"><strong class="ig hi">注意</strong>:在这一点上，形状是无关紧要的，你可以很容易地选择本教程的总是自由的实例。<a class="ae jt" href="https://roberto-di-bella.medium.com/create-an-oci-compute-instance-and-connect-to-it-via-ssh-using-putty-1a445109045b" rel="noopener">如果你不知道如何做，看看我的文章，我会一步一步地教你。</a></p></blockquote><h1 id="d629" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">第二步:安装MySQL路由器包</strong></h1><p id="ba39" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">我使用的是自治Linux(基于CentOS)映像，但是您也可以选择其他发行版(在这里您可以找到如何在不同的操作系统上安装MySQL路由器的指南)</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="le lf l"/></div></figure><h1 id="d241" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤3:配置MySQL路由器来重定向流量</h1><p id="bf2d" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">我们现在需要将流量重定向到MySQL数据库服务实例。在这种情况下，实例的IP地址为10.0.0.3。用你的私有IP修改这个。</p><p id="be62" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例如，假设MySQL端点IP是' 10.0.0.6 '，编辑并添加到配置文件'/etc/MySQL router/MySQL router . conf ':</p><p id="cf75" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">sudo nano/etc/MySQL router/MySQL router . conf</em></p><p id="e31f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后在末尾添加以下代码:</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="le lf l"/></div></figure><p id="ad4a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">MySQL路由器现在知道将流量重定向到哪里。是时候开始服务和连接了！</p><h1 id="5223" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤4:打开防火墙端口并启动MySQL路由器</h1><p id="ec4e" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">自治Linux默认启用防火墙，所以如果我们需要打开一些端口以便能够连接到MySQL数据库</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="le lf l"/></div></figure><blockquote class="ju jv jw"><p id="bf0e" class="ie if jc ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated"><strong class="ig hi">注意</strong>:如果你使用不同的系统，你可能需要修改上面的脚本</p></blockquote><p id="a0a2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们开始服务吧！如果一切正常，您会看到一个绿色的“<strong class="ig hi"> Running </strong>”文本，如下图所示。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="le lf l"/></div></figure><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lg"><img src="../Images/bbd553f078b7df1a333ccc3bbfbba555.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zDEyBqWaRhNsyjki_bsBsA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">MySQL Router is running correctly.</figcaption></figure><h1 id="a125" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">步骤5:在Oracle Cloud上打开安全性列表</h1><p id="2306" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">剩下的就是打开Oracle Cloud上的端口。为此，从汉堡菜单转到<strong class="ig hi">联网&gt;虚拟云网络&gt; </strong>点击<strong class="ig hi"> VCN名称&gt; </strong>点击<strong class="ig hi">公共子网</strong>名称&gt;点击<strong class="ig hi">安全列表名称</strong> &gt; <strong class="ig hi">添加如下所示的2个入口规则</strong>。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="le lf l"/></div></figure><blockquote class="ju jv jw"><p id="2423" class="ie if jc ig b ih ii ij ik il im in io jx iq ir is jy iu iv iw jz iy iz ja jb ha bi translated"><strong class="ig hi">注意:</strong>建议对可以到达您的实例的IP地址进行更严格的限制。用更严格的范围替换源CIDR“0 . 0 . 0 . 0/0”。</p></blockquote><p id="091b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你现在应该有这样的东西</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lh"><img src="../Images/f29e460e68d62bcf19e402a14c0dbd83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XM8NY0BIocCWe444H2sCJQ.png"/></div></div></figure><h1 id="b284" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated"><strong class="ak">连接！</strong></h1><p id="e18b" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">从安装了MySQL Shell的机器上，您可以运行以下命令。</p><p id="645c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jc">mysqlsh user @ MYSQL _ ROUTER _ MACHINE _ PUBLIC _ IP</em></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es li"><img src="../Images/86cab9b0e0f207c3da3f6f4b5ea7319f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hhTJhXh8avbmVhB7nQr2pQ.png"/></div></div></figure><h1 id="5406" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">就是这样！现在，您可以从您的机器直接测试到MySQL的连接。</h1></div><div class="ab cl lj lk go ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ha hb hc hd he"><h1 id="809b" class="ka kb hh bd kc kd lq kf kg kh lr kj kk kl ls kn ko kp lt kr ks kt lu kv kw kx bi translated"><strong class="ak">下一步</strong></h1><p id="5492" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">这只是冰山一角！参加我们的活动，了解如何使用MySQL数据库服务，并了解HeatWave如何将分析提升到一个新的水平！HeatWave是Oracle Cloud中针对MySQL数据库服务的一个新的内存查询加速器。</p><p id="56bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jt" href="https://go.oracle.com/LP=108944?elqCampaignId=290489&amp;src1=:pp:sl:::::RC_WWSA210303P00066C0001:Rob_MySql" rel="noopener ugc nofollow" target="_blank"> <em class="jc">在这里注册！</em>T3】</a></p><h1 id="61dc" class="ka kb hh bd kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx bi translated">结论</h1><p id="1d9b" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated">在本文中，我们看到了如何使用MySQL路由器包连接到没有公共IP地址的MySQL数据库。这在许多不需要构建复杂架构的测试案例中非常有用。</p><h2 id="154f" class="lv kb hh bd kc lw lx ly kg lz ma mb kk ip mc md ko it me mf ks ix mg mh kw mi bi translated">谢谢大家！——我想感谢我的朋友和同事<a class="ae jt" href="https://a-hassane.medium.com" rel="noopener">阿里·哈桑</a>，他值得这篇教程的所有荣誉。</h2></div><div class="ab cl lj lk go ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ha hb hc hd he"><h2 id="f5ac" class="lv kb hh bd kc lw lx ly kg lz ma mb kk ip mc md ko it me mf ks ix mg mh kw mi bi translated">要了解永远免费的云资源，请点击此处！</h2><h2 id="864e" class="lv kb hh bd kc lw lx ly kg lz ma mb kk ip mc md ko it me mf ks ix mg mh kw mi bi translated">想要更多吗？加入非官方<a class="ae jt" href="http://bit.ly/rdb-oci-community" rel="noopener ugc nofollow" target="_blank">不和谐社区</a>！</h2><p id="3fe5" class="pw-post-body-paragraph ie if hh ig b ih ky ij ik il kz in io ip la ir is it lb iv iw ix lc iz ja jb ha bi translated"><em class="jc">注意——免费层用户可能会体验到其帐户所含服务的变化。</em></p></div><div class="ab cl lj lk go ll" role="separator"><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo lp"/><span class="lm bw bk ln lo"/></div><div class="ha hb hc hd he"><blockquote class="mj"><p id="0380" class="mk ml hh bd mm mn mo mp mq mr ms jb dx translated"><em class="mt">我是Roberto Di Bella，甲骨文公司的数据科学家顾问。帮助数据科学家、开发人员和公司在Oracle云上取得成功。</em></p><p id="72b6" class="mk ml hh bd mm mn mo mp mq mr ms jb dx translated"><em class="mt">随时连接上</em><a class="ae jt" href="https://www.linkedin.com/in/roberto-di-bella-9ba3b915b/" rel="noopener ugc nofollow" target="_blank"><em class="mt">LinkedIn</em></a><em class="mt">。</em></p></blockquote></div></div>    
</body>
</html>