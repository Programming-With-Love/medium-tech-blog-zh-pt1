<html>
<head>
<title>Oracle Cluster File System with iSCSI on Oracle Cloud Infrastructure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Oracle云基础架构上使用iSCSI的Oracle集群文件系统</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/oracle-cluster-file-system-with-iscsi-on-bare-metal-cloud-services-8da5bfcdc6f9?source=collection_archive---------0-----------------------#2017-07-27">https://medium.com/oracledevs/oracle-cluster-file-system-with-iscsi-on-bare-metal-cloud-services-8da5bfcdc6f9?source=collection_archive---------0-----------------------#2017-07-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="6b27" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本教程介绍了使用iSCSI作为底层存储在Oracle裸机服务上部署Oracle集群文件系统(OCFS2)的步骤。</p><p id="356a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">至于Oracle云基础设施(OCI)上的配置选项，建议将您的资源分布在您的裸机租赁可用性域(AD)上，以实现容错。</p><p id="d591" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里是一个OCFS2架构的例子，将用于本教程的OCI</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/86a4d3bcb780b44f4aa2f5416f41f6ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*4l4L6_leiN4zyI9K.png"/></div></div></figure><h1 id="5177" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">什么是iSCSI？</h1><p id="8499" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">如<a class="ae kr" href="http://linux-iscsi.org/wiki/ISCSI" rel="noopener ugc nofollow" target="_blank">公开文档</a>中所述，iSCSI是一种基于互联网协议(IP)的存储网络标准，用于连接数据存储设施。通过在IP网络上传送SCSI命令，iSCSI被用来促进内部网的数据传输和管理远距离存储。iSCSI可用于通过局域网(LAN)、广域网(wan)或互联网传输数据，并可实现与位置无关的数据存储和检索。</p><p id="2ef3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">iSCSI允许客户端(称为启动器)向远程服务器上的SCSI存储设备(LinuxIOs)发送SCSI命令(CDB)。它是一种流行的SAN协议，允许组织将存储整合到数据中心存储阵列中，同时为主机(如数据库和web服务器)提供本地连接磁盘的假象。与需要特殊用途电缆的传统光纤通道不同，iSCSI可以使用现有的网络基础设施长距离运行。</p><h1 id="8d7a" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">OCFS2是什么？</h1><p id="e25a" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">Oracle集群文件系统版本2 (OCFS2)是一个通用、高性能、高可用性的共享磁盘文件系统，旨在用于集群。也可以在独立的非集群系统上挂载OCFS2卷，如<a class="ae kr" href="https://docs.oracle.com/cd/E52668_01/E54669/html/ol7-about-ocfs2.html" rel="noopener ugc nofollow" target="_blank">公共文档中所述。</a></p><p id="193f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">几乎所有的应用程序都可以使用OCFS2，因为它提供了本地文件系统语义。支持集群的应用程序可以使用来自多个集群节点的缓存一致的并行I/O来平衡集群中的活动，或者可以使用可用的文件系统功能进行故障切换，并在一个节点出现故障时在另一个节点上运行。</p><p id="541e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">OCFS2具有大量特性，这些特性使其适合在企业级计算环境中部署:</p><ul class=""><li id="6200" class="ks kt hh ig b ih ii il im ip ku it kv ix kw jb kx ky kz la bi translated">支持有序和回写数据日志，在电源故障或系统崩溃时提供文件系统一致性。</li><li id="e1eb" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">块大小范围从512字节到4 KB，文件系统簇大小范围从4 KB到1 MB(都以2的幂为增量)。支持的最大卷大小为16 TB，相当于4 KB的群集大小。对于1 MB的集群大小，理论上可以达到4 PB的卷大小，尽管这一限制尚未经过测试。</li><li id="1ec5" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">基于扩展区的分配，用于高效存储非常大的文件。</li><li id="3434" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">对稀疏文件、内联数据、未写入范围、打孔、引用链接和分配预留的优化分配支持，可实现高性能和高效存储。</li><li id="c4c6" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">对目录进行索引，即使目录包含数百万个对象，也能有效地访问该目录。</li><li id="b23f" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">用于检测损坏的信息节点和目录的元数据校验和。</li><li id="40a0" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">扩展属性，允许将无限数量的名称:值对附加到文件系统对象，如常规文件、目录和符号链接。</li><li id="f802" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">除了传统的文件访问权限模型之外，对POSIX ACLs和SELinux的高级安全支持。</li><li id="37af" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">支持用户和组配额。</li><li id="bb8e" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">支持混合了32位和64位、小端(x86、x86_64、ia64)和大端(ppc64)体系结构的异构节点群集。</li><li id="cbe6" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">一个易于配置的内核集群堆栈(O2CB ),带有一个分布式锁管理器(DLM ),用于管理集群节点的并发访问。</li><li id="b115" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">支持缓冲、直接、异步、拼接和存储器映射I/O。</li><li id="a03c" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb kx ky kz la bi translated">使用与ext3文件系统相似参数的工具集。</li></ul><h1 id="8242" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">入门指南</h1><p id="9641" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">首先，本教程需要至少三个Oracle裸机实例；一个实例将作为iSCSI目标服务器，其余两个实例将用作iSCSI启动器服务器，也用作OCFS2群集的节点，本地装载点指向OCFS2卷。</p><p id="4b5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是该体系结构所需的配置步骤摘要:</p><ol class=""><li id="4c4f" class="ks kt hh ig b ih ii il im ip ku it kv ix kw jb lg ky kz la bi translated">您需要配置iSCSI目标和启动器裸机实例</li><li id="4ab4" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb lg ky kz la bi translated">下一步将是设置OCFS2/O2CB集群节点</li><li id="88ae" class="ks kt hh ig b ih lb il lc ip ld it le ix lf jb lg ky kz la bi translated">要完成安装，您需要创建OCFS2文件系统和挂载点</li></ol><p id="595b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您还需要在BMCS仪表板上打开端口7777和3260。您需要编辑VCN安全列表，并打开裸机内部网络(非公共网络)的所有端口。</p><p id="8838" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下是网络172.0.0.0/16的示例</p><blockquote class="lh li lj"><p id="8aec" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">来源:172.0.0.0/16 <br/> IP协议:所有协议<br/>允许:所有端口的所有流量</p></blockquote><p id="8205" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">或者只打开内部网络所需的7777和3260端口。以下是端口7777的一个示例:</p><blockquote class="lh li lj"><p id="d31b" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">来源:172.0.0.0/16 <br/> IP协议:TCP <br/>源端口范围:所有<br/>目的端口范围:7777 <br/>允许:端口的TCP流量:7777</p></blockquote><p id="e7ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请确保DNS正常工作，并且您的裸机实例可以跨ADs正常通信。下面是一个基于这种设置的/etc/resolv.conf的快速示例</p><blockquote class="lh li lj"><p id="244d" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ cat/etc/resolv . conf<br/>；由/usr/sbin/dhclient-script生成<br/>搜索baremetal.oraclevcn.com publicsubnetad3.baremetal.oraclevcn.com publicsubnetad1.baremetal.oraclevcn.com publicsubnetad1.baremetal.oraclevcn.com<br/>名称服务器169.254.169.254</p></blockquote><p id="ff7c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如您在上面看到的，所有的ADs DNS条目都可以在resolv.conf文件中找到。</p><p id="f678" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Oracle Linux防火墙也需要在本地裸机实例中进行更新。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es lo"><img src="../Images/37272e017aa0917743612520f7cc4558.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*wcDGyEqtwraptYuD9W1Fgw.png"/></div></figure><h1 id="14c4" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">环境</h1><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lp"><img src="../Images/6ffc1c23da19eb0c2762a8128921fa8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hCNpqJJly67gyvNiHlGX8A.png"/></div></div></figure><h1 id="0860" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">存储配置</h1><p id="f32d" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">您将配置一个裸机HighIO1.36，以便能够将NVMe磁盘用作iSCSI目标，但您也可以将虚拟机形状与连接的数据块存储磁盘一起使用。哪种方式都可以。</p><p id="12d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于本教程，假设您已经提供了一个HighIO1.36实例，您应该能够将所有4个NVMe磁盘合并到一个LVM逻辑卷(~12Tb)中，或者如果您愿意，也可以单独使用它们。</p><h1 id="6175" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">LVM逻辑卷</h1><p id="40a1" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">高IO1.36裸机形状有4个NVMe磁盘(~12TB)，因此下面是创建将用作iSCSI目标的单个逻辑卷的过程</p><blockquote class="lh li lj"><p id="bef3" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo PV create/dev/nvme 0 n1/dev/nvme 1 n1/dev/nvme 2 n1/dev/nvme 3 n1<br/>$ sudo vgcreate VG _ ocfs 2/dev/nvme 0 n1/dev/nvme 1 n1/dev/nvme 2 n1/dev/nvme 3 n1<br/>$ sudo LV create-L 11500g-n target VG _ ocfs 2</p></blockquote><h1 id="04c6" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">iSCSI目标</h1><p id="0435" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">现在，您可以选择创建带身份验证或不带身份验证的iSCSI目标。在本教程中，我们不会使用CHAP身份验证，但在下面的参考会话中，您会发现有关如何在必要时配置它的更多详细信息。</p><h1 id="9930" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">配置没有CHAP身份验证的iSCSI目标</h1><p id="8e9e" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">在服务器上安装targetcli软件包。</p><blockquote class="lh li lj"><p id="c26c" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo yum安装目标cli -y</p></blockquote><p id="67a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">安装软件包后，输入以下命令以获得iSCSI CLI的交互式提示符。</p><blockquote class="lh li lj"><p id="0657" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo targetcli <br/>警告:无法加载首选项文件/root/。target CLI/prefs . bin .<br/>target CLI shell版本2.1.fb41 <br/>版权2011–2013，由Datera，Inc .和其他公司所有。如需有关命令的帮助，请键入“help”。<br/> &gt;</p></blockquote><p id="c378" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在使用现有的逻辑卷(/dev/vg_ocfs2/target)作为存储对象“ocfs2”的块类型后备存储。</p><blockquote class="lh li lj"><p id="48b3" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">/&gt; CD backstores/block<br/>/backstores/block&gt;create name = ocfs 2 dev =/dev/VG _ ocfs 2/target</p></blockquote><p id="a8a0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用/dev/vg_ocfs2/target创建了块存储对象ocfs2。</p><p id="4cb3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建一个目标</p><blockquote class="lh li lj"><p id="3b49" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">/back stores/block &gt; CD/iscsi<br/>/iscsi&gt;创建iqn . 2003–01 . org . Linux-iscsi . target . x 8664:sn . 4131653673 fa<br/>创建目标iqn . 2003–01 . org . Linux-iscsi . target . x 8664:sn . 4131653673 fa .<br/>创建TPG 1 .<br/>Global pref auto _ add _ default _ portal = true<br/>创建了默认门户监听所有IP(0 . 0 . 0 . 0)，端口3260。<br/> /iscsi &gt;</p></blockquote><p id="398c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">默认情况下，身份验证是启用的，禁用它</p><blockquote class="lh li lj"><p id="e39c" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">/iscsi/iqn.20…3fa/tpg1/acls &gt;创建iqn . 2003–01 . org . Linux-iscsi . target . x 8664:sn . 4131653673 fa<br/>为iqn . 2003–01 . org . Linux-iscsi . target . x 8664:sn . 4131653673 fa<br/>/iscsi/iqn . 20…3fa/TPG 1<br/>/iscsi/iqn . 20…653673 fa/TP G1&gt;设置属性generate_node_acls=1 <br/>参数generate_node_acls现在为‘1’。</p></blockquote><p id="4d9e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在目标下创建一个LUN，该LUN应该使用前面提到的名为“ocfs2”的后备存储对象</p><blockquote class="lh li lj"><p id="333d" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">/iscsi/iqn . 20…653673 fa/TPG 1 &gt; CD/iscsi/iqn . 2003–01 . org . Linux-iscsi . target . x 8664:sn . 4131653673 fa/TPG 1/LUN<br/>/iscsi/iqn . 20…3fa/TPG 1/LUN&gt;pwd<br/>/iscsi/iqn . 2003–01 . org . Linux-iscsi . target。</p></blockquote><p id="e43f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">验证目标服务器配置。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lq"><img src="../Images/8fcd742ab44518526a0e3f3174eaa7c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wCMq9SzAPMMGOnPzjmlPWQ.png"/></div></div></figure><p id="8b60" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">启用并重新启动目标服务。</p><blockquote class="lh li lj"><p id="a551" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo systemctl启用target.service<br/>$ sudo system CTL启动target . service</p></blockquote><h1 id="518e" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">iSCSI启动器</h1><h1 id="d0a0" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">配置不带CHAP身份验证的启动器</h1><p id="f9bd" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">现在是时候配置您的裸机iSCSI Initiator1和Initiator2节点，以使用此目标作为存储。以下步骤需要在两个iSCSI启动器节点上完成。默认情况下，Iscsi-initiator-utils软件包应安装在Oracle Linux裸机映像中，但请使用以下命令仔细检查。</p><blockquote class="lh li lj"><p id="2c28" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo yum安装iscsi-initiator-utils -y</p></blockquote><p id="7215" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用下面的命令发现目标。</p><blockquote class="lh li lj"><p id="c086" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo iscsiadm-m discovery-t ST-p 172.0.2.40<br/>172 . 0 . 2 . 40:3260，1 iqn . 2003–01 . org . Linux-iscsi . target . x 8664:sn . 43673 fa</p></blockquote><p id="3cf2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">编辑下面的文件并添加iscsi启动器名称</p><blockquote class="lh li lj"><p id="00d9" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo VI/etc/iscsi/initiator name . iscsi<br/>initiator name = iqn . 2003–01 . org . Linux-iscsi . target . x 8664:sn . 41353673 fa</p></blockquote><p id="0962" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">重新启动并启用发起程序服务。</p><blockquote class="lh li lj"><p id="11e9" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo systemctl启用iscsid.service<br/>$ sudo system CTL重新启动iscsid . service</p></blockquote><p id="ad00" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">登录到发现的目标。</p><blockquote class="lh li lj"><p id="26b0" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo iscsi ADM-m node-T iqn . 2003–01 . org . Linux-iscsi . target . x 8664:sn . 4131653673 fa-p 172.0.2.40-l</p><p id="42c1" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">登录[iface: default，target:iqn . 2003–01 . org . Linux-iscsi . target . x 8664:sn . 4131653673 fa，portal: 172.0.2.40，3260](多个)</p><p id="a68b" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">登录【iface: default，target:iqn . 2003–01 . org . Linux-iscsi . target . x 8664:sn . 4131653673 fa，portal: 172.0.2.40，3260】成功。</p></blockquote><p id="af27" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">两个iSCSI启动器裸机实例现在都应该能够看到新磁盘</p><blockquote class="lh li lj"><p id="b533" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo fdisk-l | grep sdb<br/>Disk/dev/sdb:12455.4 GB，12455405158400字节，24326963200个扇区</p></blockquote><h1 id="f938" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">OCFS2</h1><h1 id="8c12" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">为集群堆栈创建配置文件</h1><p id="5689" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">安装所需的OCFS2软件包</p><blockquote class="lh li lj"><p id="e98f" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo yum install ocfs 2-tools-devel ocfs 2-tools-y</p></blockquote><p id="d7bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，使用o2cb命令或文本编辑器创建配置文件。让我们使用下面的命令来创建一个集群定义。</p><blockquote class="lh li lj"><p id="41e9" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo o2cb add-cluster bmcsocfs2</p></blockquote><p id="a824" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果配置文件/etc/ocfs2/cluster.conf不存在，该命令将创建它。</p><p id="9f34" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于每个节点，使用以下命令定义节点。</p><blockquote class="lh li lj"><p id="a7e3" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo o2cb添加节点bmcsocfs2启动器1—IP 172.0.0.41<br/>$ sudo o2cb添加节点bmcsocfs2启动器2—IP 172.0.1.42</p></blockquote><p id="63d7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:节点的名称必须与/etc/sysconfig/network中配置的系统主机名的值相同。IP地址是节点将在集群中用于私有通信的地址。</p><p id="1a30" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您需要将集群配置文件/etc/ocfs2/cluster.conf复制到集群中的每个节点。</p><p id="c3b5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在重新启动集群堆栈之前，对集群配置文件所做的任何更改都不会生效。</p><p id="680e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下/etc/ocfs2/cluster.conf配置文件定义了一个名为bmcsocfs2的双节点集群，该集群具有本地心跳，这是本教程中使用的配置。</p><blockquote class="lh li lj"><p id="5df2" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo cat/etc/ocfs 2/cluster . conf<br/>cluster:<br/>heart beat _ mode = local<br/>node _ count = 2<br/>name = bmcsocfs 2<br/>node:<br/>number = 0<br/>cluster = bmcsocfs 2<br/>IP _ port = 7777<br/>IP _ address = 172.0.0.41<br/>name = initiator 1<br/>node:<br/>number = 1<br/>cluster = bmcsocfs 2<br/>IP _ port</p></blockquote><h1 id="9db1" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">配置集群堆栈</h1><p id="ea1f" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">在群集的每个节点上运行以下命令:</p><blockquote class="lh li lj"><p id="73b0" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo /sbin/o2cb.init配置</p></blockquote><p id="65b6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">配置O2CB驱动程序。</p><p id="835e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将配置O2CB驱动程序的启动属性。</p><p id="8c72" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下问题将确定驱动程序是否已加载</p><p id="785f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">靴子。当前值将显示在括号(“[]”)中。打</p><p id="77ef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><enter>不输入答案将保持当前值。Ctrl-C</enter></p><p id="9cb0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将中止。</p><p id="278d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">启动时加载O2CB驱动程序(y/n) [y]:</p><p id="8c2e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">集群堆栈支持O2CB [o2cb]:</p><p id="62f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">引导时启动的群集(输入“none”清除)[ocfs2]: bmcsocfs2</p><p id="1bfe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">指定心跳停止阈值(&gt; =7) [31]:</p><p id="ace3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">指定网络空闲超时，单位为毫秒(&gt; =5000) [30000]:</p><p id="51fa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">指定网络保持活动延迟，单位为毫秒(&gt; =1000) [2000]:</p><p id="3342" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">指定网络重新连接延迟，单位为毫秒(&gt; =2000) [2000]:</p><p id="6346" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正在写入O2CB配置:正常</p><p id="f9df" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正在检查调试…</p><p id="9f26" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">设置集群堆栈“o2cb”:正常</p><p id="2e56" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正在注册O2CB群集“bmcsocfs2”:正常</p><p id="85b6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">设置O2CB集群超时:正常</p><p id="77fc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正在启动群集“bmcsocfs2”的全局心跳:正常</p><p id="bec9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">上述选项的解释可在OCFS2 <a class="ae kr" href="https://docs.oracle.com/cd/E52668_01/E54669/html/ol7-config-stack-ocfs2.html" rel="noopener ugc nofollow" target="_blank">公共文档</a>中找到。</p><p id="89e8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要验证集群堆栈的设置，请输入/sbin/o2cb.init status命令:</p><p id="242b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo /sbin/o2cb.init状态</p><p id="349c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">“configfs”的驱动程序:已加载</p><p id="fe76" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">文件系统“configfs”:已挂载</p><p id="52cb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">堆栈粘合驱动程序:已加载</p><p id="7f61" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">堆栈插件“o2cb”:已加载</p><p id="1102" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">“ocfs2_dlmfs”的驱动程序:已加载</p><p id="2fb6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">文件系统“ocfs2_dlmfs”:已挂载</p><p id="ab63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">检查O2CB集群“bmcsocfs2”:联机</p><p id="5b5e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">心跳停止阈值:31</p><p id="ae67" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">网络空闲超时:30000</p><p id="fd50" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">网络保持活动延迟:2000</p><p id="6bf4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">网络重新连接延迟:2000</p><p id="5ba6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">心跳模式:本地</p><p id="0fd8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">检查O2CB心跳:活动</p><p id="35d4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">调试文件系统，位于/sys/kernel/debug: mounted</p><p id="3819" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本例中，集群处于在线状态，并且使用本地心跳模式。如果没有配置卷，O2CB心跳将显示为非活动而非活动。配置o2cb和ocfs2服务，以便它们在启用网络后的引导时启动。</p><blockquote class="lh li lj"><p id="8d6e" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo system CTL enable o2cb<br/>$ sudo system CTL enable ocfs 2</p></blockquote><p id="0ce0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些设置允许节点在系统启动时自动挂载OCFS2卷。</p><h1 id="aebe" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">为集群操作配置内核</h1><p id="7522" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">为了正确运行群集，您必须配置下表中显示的内核设置:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es lr"><img src="../Images/b1aab9afc679f32d09dc7b46a66d06ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cdL9A3jfBfzqoWRhqS55fw.png"/></div></div></figure><p id="7298" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在每个节点上，输入以下命令来设置panic和panic_on_oops的建议值:</p><blockquote class="lh li lj"><p id="f554" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo sysctl kernel . panic = 30<br/>$ sudo sysctl kernel . panic _ on _ oops = 1</p></blockquote><p id="2d5f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要使更改在重新引导后保持不变，请将以下条目添加到/etc/sysctl.conf文件中:</p><blockquote class="lh li lj"><p id="caf6" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">#为集群操作定义panic和panic _ on _ oops<br/>kernel . panic = 30<br/>kernel . panic _ on _ oops = 1</p></blockquote><h1 id="e52f" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">启动和停止集群堆栈</h1><p id="ea72" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">下表显示了可用于在集群堆栈上执行各种操作的命令。</p><p id="b886" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">命令描述</strong>/sbin/o2cb . init status检查集群栈的状态。/sbin/o2cb . init online启动集群堆栈。/sbin/o2cb . init offline停止集群堆栈。/sbin/o2cb.init卸载卸载集群堆栈。</p><h1 id="3d37" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">创建OCFS2卷</h1><p id="9c46" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">您可以使用mkfs.ocfs2命令在设备上创建ocfs2卷。如果要标记卷并通过指定标签来挂载它，设备必须对应于一个分区。不能通过指定标签来装载未分区的磁盘设备。</p><blockquote class="lh li lj"><p id="77a2" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo mkfs . ocfs 2-L " ocfs 2 "/dev/sdb</p><p id="e40b" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">mkfs.ocfs2 1.8.6</p><p id="67e6" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">集群堆栈:经典o2cb</p><p id="0253" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">标签:ocfs2</p><p id="c1a1" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">功能:稀疏扩展-slotmap备份-超级未写入内联-数据严格-日志-超级xattr索引-目录引用计数不连续-bg</p><p id="19f6" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">块大小:4096 (12位)</p><p id="1587" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">簇大小:4096 (12位)</p><p id="8d55" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">卷大小:12455405158400 (3040870400簇)(3040870400块)</p><p id="3e2a" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">聚类组:94274(尾部覆盖512个聚类，其余覆盖32256个聚类)</p><p id="6404" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">区分配器大小:780140544 (186组)</p><p id="62a8" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">日志大小:268435456</p><p id="0412" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">节点插槽:16个</p><p id="ac2c" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">创建位图:完成</p><p id="5e18" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">初始化超级块:完成</p><p id="8921" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">写入系统文件:完成</p><p id="cf3f" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">编写超级块:完成</p><p id="78b1" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">正在写入备份超级块:6个块</p><p id="a85f" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">格式化日记帐:完成</p><p id="be0e" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">增长范围分配器:完成</p><p id="5bca" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">格式化插槽映射:完成</p><p id="b752" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">格式化配额文件:完成</p><p id="b938" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">写入丢失+找到:完成</p><p id="9a64" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">mkfs.ocfs2成功</p></blockquote><h1 id="920d" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">装载OCFS2卷</h1><p id="6a80" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">如下例所示，如果希望系统在启动网络后的引导时装入OCFS2卷，并在网络停止前卸载文件系统，请在/etc/fstab中指定_netdev和nofail选项。</p><blockquote class="lh li lj"><p id="4272" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">$ sudo mkdir/ocfs 2<br/>$ sudo VI/etc/fstab</p><p id="2433" class="ie if lk ig b ih ii ij ik il im in io ll iq ir is lm iu iv iw ln iy iz ja jb ha bi translated">#包含下面一行以在重启后挂载ocfs 2<br/>/dev/sdb/ocfs 2 ocfs 2 _ net dev，默认为0 0</p></blockquote><p id="9317" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，您可以运行“使用mount.ocfs2手动挂载ocfs2设备”或“mount -a”。</p><p id="fc67" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在裸机实例上使用iSCSI的OCFS2设置已完成。现在，您应该在Initiator1和Initiator2 Oracle Linux 7.3节点上的/ocfs2上挂载了一个集群文件系统，如下所示。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es ls"><img src="../Images/3dd6ea6f3865bda222241aa7b3e2ce10.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kwj3xNTKXywK-I6X.png"/></div></div></figure></div></div>    
</body>
</html>