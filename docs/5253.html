<html>
<head>
<title>Quickstart: MongoDB with Oracle Application Container &amp; Developer Cloud</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速入门:MongoDB与Oracle应用容器和开发人员云</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/quickstart-mongodb-with-oracle-application-container-oracle-developer-cloud-e05d2d5207ba?source=collection_archive---------3-----------------------#2017-06-29">https://medium.com/oracledevs/quickstart-mongodb-with-oracle-application-container-oracle-developer-cloud-e05d2d5207ba?source=collection_archive---------3-----------------------#2017-06-29</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="0ea5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个博客将展示如何开始使用一个简单的基于MongoDB的应用程序</p><ul class=""><li id="6385" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">在<strong class="ig hi"> Oracle应用容器云</strong>上运行</li><li id="d645" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">使用<strong class="ig hi"> Oracle开发者云</strong>的单元测试和CI/CD</li><li id="0a08" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">我们的MongoDB实例将在Oracle容器云<strong class="ig hi">上的<strong class="ig hi"> Docker </strong>容器中运行</strong></li></ul><h1 id="2beb" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">应用</h1><p id="ae57" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">示例项目相对简单</p><ul class=""><li id="8b2d" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">它使用<strong class="ig hi"> JPA </strong>和<strong class="ig hi"> Hibernate OGM </strong>来定义数据层</li><li id="ab3b" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><a class="ae kt" href="https://github.com/fakemongo/fongo" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> Fongo </strong> </a>(内存中的Mongo DB)用于单元测试</li><li id="bf47" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi">Jersey</strong>(JAX-RS实现)用于提供一个REST接口</li></ul><p id="cd3a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你可以在这里查看<a class="ae kt" href="https://github.com/abhirockzz/accs-mongodb" rel="noopener ugc nofollow" target="_blank">项目</a></p><h1 id="fde4" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">MongoDB，休眠OGM</h1><p id="faf5" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">MongoDB是一个开源的、基于文档的分布式数据库..更多<a class="ae kt" href="https://docs.mongodb.com/" rel="noopener ugc nofollow" target="_blank">信息在这里</a>。Hibernate OGM是一个框架，它帮助你使用JPA (Java Persistence API)来处理NoSQL商店，而不是RDBMS(JPA就是为RDBMS设计的)</p><ul class=""><li id="9c3c" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">它支持各种NoSQL存储(文档、列、键值、图表)</li><li id="0233" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">它支持的NoSQL数据库包括MongoDB(如本博客所示)、Neo4j、Redis、Cassandra等。</li></ul><p id="ec5b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">更多<a class="ae kt" href="http://hibernate.org/ogm/" rel="noopener ugc nofollow" target="_blank">详情在此</a></p><p id="c7b2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这种应用中</p><ul class=""><li id="760d" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">我们使用普通的JPA定义我们的实体和数据操作(创建、读取)</li><li id="3020" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><strong class="ig hi"> Hibernate OGM </strong>用于<em class="ku">用MongoDB </em>在后台使用原生Mongo DB Java驱动说出JPA。我们不明确地与Java驱动程序交互/在其上编写代码</li></ul><p id="fee8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是来自<strong class="ig hi"> persistence.xml </strong>的一个片段，它让您对Hibernate OGM相关的配置有一个概念</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es kv"><img src="../Images/212b780041efb4c0f368a11b3de8f174.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WNUofQyLUEtcl7Cw.png"/></div></div></figure><h1 id="177d" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">设置</h1><p id="40b0" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">让我们配置/设置我们的云服务，并启动和运行应用程序…</p><h2 id="d982" class="lh jr hh bd js li lj lk jw ll lm ln ka ip lo lp ke it lq lr ki ix ls lt km lu bi translated">Oracle容器云上的MongoDB</h2><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es lv"><img src="../Images/9c00337a28463f6e56a9cd790b40bf24.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*H_zqSkctzDiOshrY.png"/></div></div></figure><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es lw"><img src="../Images/797617d9b3ae0b12e6c3d3223891d3e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*_aLJzAQhoevI-7RO.png"/></div></div></figure><h1 id="ad35" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">Oracle开发人员云</h1><p id="9a0a" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">您需要为<em class="ku">持续构建</em>以及<em class="ku">部署</em>过程配置开发人员云。您可以参考以前的博客(这里将重点介绍这个例子的一些细节)</p><p id="69ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">参考文献</strong></p><ul class=""><li id="5632" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">Oracle开发人员云中的引导应用程序— <a class="ae kt" href="https://community.oracle.com/community/cloud_computing/oracle-cloud-developer-solutions/blog/2017/05/25/getting-started-with-kafka-based-microservices-using-oracle-event-hub-cloud-application-container-cloud-developer-cloud#jive_content_id_Project__code_repository_creation" rel="noopener ugc nofollow" target="_blank">项目&amp;代码库创建</a></li><li id="8de9" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">持续集成设置— <a class="ae kt" href="https://community.oracle.com/community/cloud_computing/oracle-cloud-developer-solutions/blog/2017/05/25/getting-started-with-kafka-based-microservices-using-oracle-event-hub-cloud-application-container-cloud-developer-cloud#jive_content_id_Configure_build_job" rel="noopener ugc nofollow" target="_blank">配置构建任务</a></li><li id="dc30" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">部署设置— <a class="ae kt" href="https://community.oracle.com/community/cloud_computing/oracle-cloud-developer-solutions/blog/2017/05/25/getting-started-with-kafka-based-microservices-using-oracle-event-hub-cloud-application-container-cloud-developer-cloud#jive_content_id_Continuous_Deployment_CD_to_Application_Container_Cloud" rel="noopener ugc nofollow" target="_blank">持续部署(CD)到应用容器云</a></li></ul><h2 id="db17" class="lh jr hh bd js li lj lk jw ll lm ln ka ip lo lp ke it lq lr ki ix ls lt km lu bi translated">JUnit相关配置</h2><p id="2fbf" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">确保您设置了Oracle Developer Cloud来提供JUnit结果</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es lx"><img src="../Images/5b4c58f07d89013f29fe6f5e4fd7b4d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*w_gvRQM0w_LjhvJX.png"/></div></div></figure><h2 id="7ff7" class="lh jr hh bd js li lj lk jw ll lm ln ka ip lo lp ke it lq lr ki ix ls lt km lu bi translated">提供Oracle应用程序容器云(配置)描述符</h2><p id="1358" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">作为部署配置的一部分，我们将向Oracle Developer Cloud提供<em class="ku"> deployment.json </em>细节——在这种情况下，它专门用于以环境变量的形式设置MongoDB坐标。Oracle开发人员云将处理部署到Oracle应用容器云的复杂性</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es ly"><img src="../Images/3384d2509411b9eaf45e7095f3399755.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*sK6SDD3G0r4BqP5U.png"/></div></div></figure><h2 id="5d38" class="lh jr hh bd js li lj lk jw ll lm ln ka ip lo lp ke it lq lr ki ix ls lt km lu bi translated">JUnit成就了Oracle开发人员云</h2><p id="07a4" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">从<strong class="ig hi">构建日志</strong></p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es lz"><img src="../Images/8889729f9838f784dbc0597a23bbc06e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Wkl4MxV_D049kBPJ.png"/></div></div></figure><p id="89ab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从<strong class="ig hi">测试</strong>到<strong class="ig hi">报告</strong></p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es ma"><img src="../Images/99b6345bc119f360ad18864619823bef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vuCGgUOkm73Ujzp4.png"/></div></div></figure><h2 id="a7db" class="lh jr hh bd js li lj lk jw ll lm ln ka ip lo lp ke it lq lr ki ix ls lt km lu bi translated">Oracle开发人员云中的部署确认</h2><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es mb"><img src="../Images/e775ade91b8ab37835452e02493d5b4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1276/format:webp/0*WbTUAoZOAcyAFXVn.png"/></div></div></figure><h2 id="7d4d" class="lh jr hh bd js li lj lk jw ll lm ln ka ip lo lp ke it lq lr ki ix ls lt km lu bi translated">应用程序容器云中的部署后状态</h2><p id="39e8" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">请注意，环境变量是在部署过程中植入的</p><figure class="kw kx ky kz fd la er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es mc"><img src="../Images/a43838b363183aa0cfcd2afbb80f5233.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XOXuTcXTtJ5vRPqa.png"/></div></div></figure><h1 id="4cc8" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">测试应用程序</h1><ul class=""><li id="e0ea" class="jc jd hh ig b ih ko il kp ip md it me ix mf jb jh ji jj jk bi translated">我们使用<a class="ae kt" href="https://curl.haxx.se/" rel="noopener ugc nofollow" target="_blank"> cURL </a>与我们的应用程序REST端点进行交互，并且</li><li id="f693" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><a class="ae kt" href="https://robomongo.org/" rel="noopener ugc nofollow" target="_blank"> Robomongo </a>作为(胖)客户端验证Mongo DB中的数据</li></ul><p id="3c3e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先检查ACCS应用程序的URL</p><h2 id="c47a" class="lh jr hh bd js li lj lk jw ll lm ln ka ip lo lp ke it lq lr ki ix ls lt km lu bi translated">添加员工</h2><pre class="kw kx ky kz fd mg mh mi mj aw mk bi"><span id="1a24" class="lh jr hh mh b fi ml mm l mn mo">curl -X POST <a class="ae kt" href="https://my-accs-app/employees" rel="noopener ugc nofollow" target="_blank">https://my-accs-app/employees</a> -d 42:abhirockzz <br/>curl -X POST <a class="ae kt" href="https://my-accs-app/employees" rel="noopener ugc nofollow" target="_blank">https://my-accs-app/employees</a> -d 43:john <br/>curl -X POST <a class="ae kt" href="https://my-accs-app/employees" rel="noopener ugc nofollow" target="_blank">https://my-accs-app/employees</a> -d 44:jane</span></pre><p id="849d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请求负载是带有员工ID和姓名的“:”分隔的字符串</p><h2 id="9e77" class="lh jr hh bd js li lj lk jw ll lm ln ka ip lo lp ke it lq lr ki ix ls lt km lu bi translated">获取员工</h2><p id="e6ec" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">作为响应，您将得到一个XML有效负载</p><pre class="kw kx ky kz fd mg mh mi mj aw mk bi"><span id="c541" class="lh jr hh mh b fi ml mm l mn mo">curl -X GET <a class="ae kt" href="https://my-accs-app/employees" rel="noopener ugc nofollow" target="_blank">https://my-accs-app/employees</a> - all employees <br/>curl -X GET <a class="ae kt" href="https://my-accs-app/employees/44" rel="noopener ugc nofollow" target="_blank">https://my-accs-app/employees/44</a> - specific employee (by ID)</span></pre><p id="c21c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们也来看看MongoDB</p><ul class=""><li id="9ab1" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><em class="ku">蒙哥测试</em>是数据库</li><li id="e840" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><em class="ku">雇员</em>是MongoDB集合(相当于JPA中的<code class="du mp mq mr mh b">@Table</code>)</li></ul><figure class="kw kx ky kz fd la er es paragraph-image"><div class="er es ms"><img src="../Images/8297241ba68a79077163b2d70511afe3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1234/format:webp/0*weCfeA1YO8NA2Xxj.png"/></div></figure><h1 id="2dbe" class="jq jr hh bd js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn bi translated">测试CI/CD流</h1><p id="bdf2" class="pw-post-body-paragraph ie if hh ig b ih ko ij ik il kp in io ip kq ir is it kr iv iw ix ks iz ja jb ha bi translated">做一些代码修改，推送给开发者云服务Git repo。这应该</p><ul class=""><li id="4abc" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">自动触发构建，一旦成功将</li><li id="9754" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">自动触发部署流程，以及</li><li id="edff" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">将新的应用程序版本重新部署到应用程序容器云</li></ul></div><div class="ab cl mt mu go mv" role="separator"><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my mz"/><span class="mw bw bk mx my"/></div><div class="ha hb hc hd he"><h1 id="9bdc" class="jq jr hh bd js jt na jv jw jx nb jz ka kb nc kd ke kf nd kh ki kj ne kl km kn bi translated">不要忘记…</h1><ul class=""><li id="61c5" class="jc jd hh ig b ih ko il kp ip md it me ix mf jb jh ji jj jk bi translated">查看Oracle应用容器云的<a class="ae kt" href="https://docs.oracle.com/en/cloud/paas/app-container-cloud/create-first-applications.html" rel="noopener ugc nofollow" target="_blank">教程—每个运行时都有一些内容！</a></li><li id="e9c3" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><a class="ae kt" href="http://bit.ly/2gR3nrV" rel="noopener ugc nofollow" target="_blank">其他关于应用容器云的博客</a></li></ul><blockquote class="nf ng nh"><p id="1c6b" class="ie if ku ig b ih ii ij ik il im in io ni iq ir is nj iu iv iw nk iy iz ja jb ha bi translated">本文表达的观点是我个人的观点，不一定代表甲骨文的观点。</p></blockquote></div></div>    
</body>
</html>