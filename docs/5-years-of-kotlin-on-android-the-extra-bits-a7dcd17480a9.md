# Kotlin 在 Android 上的 5 年——扩展访谈

> 原文：<https://medium.com/androiddevelopers/5-years-of-kotlin-on-android-the-extra-bits-a7dcd17480a9?source=collection_archive---------0----------------------->

![](img/de5a4f20b2bf8296b28af5e529c10877.png)

我们在博客上发布了[一篇庆祝帖子](https://android-developers.googleblog.com/2022/08/celebrating-5-years-of-kotlin-on-android.html),以纪念 Android 对 Kotlin 的官方支持五周年。

在撰写这篇博文的过程中，我有机会采访了一些参与科特林故事的伟大人物，这篇博文只能包含他们对这个话题的一些看法。因此，这篇文章包括了一些原本会留在剪辑室地板上的采访材料。

## 杰弗里·梵高

Jeffrey 在 Google 领导着一个从事 Kotlin 工具开发的工程师团队，他从很早就参与了围绕该语言的讨论。他也是[科特林基金会](https://kotlinfoundation.org/)的成员，该基金会由谷歌和 JetBrains 共同努力，旨在保护语言的发展。

他回忆了谷歌最初与科特林的遭遇:

> 出于各种原因，我们大约在 6.5 年前开始关注科特林。当然，我们都是想学习新语言的语言极客。我们还从我们的客户那里听说，即使谷歌没有正式认可，他们也开始使用 Kotlin。我们玩了很长时间，我们喜欢“嘿，这真的很棒！”

他还阐述了两家公司之间的合作。

> 在 2017 年 I/O 大会前几个月，我们开始与 JetBrains 的人讨论如何在 Android 上实现 Kotlin。我们想确保如果我们把它作为 Android 的推荐语言，它会得到很好的支持。与此同时，JetBrains 也不希望看到 Kotlin 仅仅成为一种 Android 语言。
> 
> 许多其他语言都有基础，我们认为这也是我们应该走的一条好路。我们必须弄清楚我们想在基金会里放什么。我们试图保护我们真正关心保护的东西，比如确保这种语言经久不衰。但我们有一个人负责语言设计，由基金会任命，所以我们不是由委员会设计每一种语言功能。
> 
> 我是科特林语言委员会的成员，我们确保每次我们必须做出突破性的改变或反对某事时，我们都非常小心。我们希望这种语言向前发展，但也希望它成熟。我们每隔几个月就与 JetBrains 会面，研究问题，并进行深入的技术讨论。

> “这种语言仍在成长，并取得了很大的进步，以很快的速度增加了新的功能，所以我认为我们正在取得成功。”

## 叶戈尔·托尔斯泰

叶戈尔是 JetBrains 的 Kotlin 产品负责人，他反思了 JetBrains 方面的合作努力。

> 开发并不是 JetBrains 和 Google 合作的唯一领域。我们在产品管理方面合作，分享研究见解和想法，让开发者体验更好。另一项重要的合作是科特林基金会，该基金会保护科特林商标，致力于促进科特林生态系统的成熟和丰富。

他还指出，JetBrains 需要调整他们的工作方式，以适当支持使用 Kotlin 的 Android 开发者。

> JetBrains 工程文化的一个关键原则是狗食化。我们每天都在使用我们的工具，并且亲自测试所有的特性。当某样东西对我们的目的很有效时，它通常对其他人也很有效。但我们不是移动开发者，一般不会写 Android 应用。我们必须学会如何以不同的方式收集反馈——通过倾听社区意见、进行产品研究，以及与谷歌的领域专家密切合作。

## 弗洛里纳·芒特内斯库

我和弗洛里纳谈到了 Jetpack Compose，她提到了以下关于 Kotlin 的使用和 Android 用户界面的未来:

> 当我们决定从 Compose 开始时，我们知道 Kotlin 是一种可以使用的语言，不仅是编写 Compose 的语言，也是唯一可以使用它的语言。我们做了这个长期的赌注，即使当时并不是所有的开发者都在使用 Kotlin。我们相信 Kotlin 的采用会随着时间的推移而增长，因此 Compose 不会有这个问题。
> 
> 我们还不是 Compose-first，但是 Compose 是 Android UI 开发的未来。现在，对于开始学习 Android 的开发人员来说，我们已经推荐了[Android Compose 基础课程](https://developer.android.com/courses/android-basics-compose/course)，而不是视图课程。

> “多年来，我们一直告诉开发商搬到科特林。科特林将留在这里，作曲是我们未来的赌注。”

她还描述了 Kotlin 如何以及为什么让 Compose 变得如此好用。

> Compose 与视图系统的真正不同之处在于，它都是基于函数的。函数是 Kotlin 的一等公民，可组合函数是 Compose 的核心。这意味着可组合组件可以很容易地在整个应用程序中重用，而不必绑定到特定的类、活动或片段。
> 
> [协程](https://developer.android.com/jetpack/compose/kotlin#coroutines)用于在 Compose 中进行异步工作，既可以在幕后进行，也可以在我们公开的 API 中进行。
> 
> 您不再需要在 Kotlin 和 XML 之间切换。即使考虑大屏幕，我们也不再需要转换到 XML。使用[窗口大小类](https://developer.android.com/jetpack/compose/layouts/adaptive#explicit-layout-changes)，你可以很容易地在 Kotlin 中构建你的所有 UI

## 伊吉特·博亚尔

我采访的下一位谷歌人是 Yigit，他从一开始就支持 Kotlin。

> 从很早的时候起，我就一直是科特林的大力支持者。我很早就开始写科特林了。我相信我在 2014 年与 AOSP 的科特林有了[的第一次合作。](https://android.googlesource.com/platform/frameworks/data-binding/+/085724fd84795ae1631747443c43f77c08e11a28)
> 
> 当我们开始数据绑定时，我最初想用 Kotlin 编写注释处理器逻辑，但那是一个“不”字。但后来我提出，我们可以把它作为一个模板引擎，这就是我们如何开始以非常有限的方式使用 Kotlin。

> *“一堆人都知道科特林。我们谈了很多。”*

缓慢但稳定地，他也开始将 Kotlin 融入 Jetpack 库。

> 当我开始研究架构组件时，我们能够用 Kotlin 编写 Room 的注释处理器，因为我们没有在设备上发布任何注释处理器。我们发布架构组件的那一年也是我们宣布支持 Kotlin 的那一年。
> 
> 谷歌在 2019 年宣布了 Kotlin-first Android 开发，但直到 2020 年 3 月左右，我们才能够在我们的核心库中使用 Kotlin。快进到今天，如果你想创建一个 Jetpack 库，除非你有非常非常非常好的理由不这么做，否则你只能用 Kotlin 编写。

我们还谈到了 Java 中有太多并发解决方案的问题，以及将库从 Java 迁移到 Kotlin 的问题。

> 数据存储库是一个很好的例子，其中一切都是 Kotlin 和协程。我们仍然有一些 RxJava 和 Guava 的包装器，使它可以从 Java 中使用，但是如果不使用 Kotlin，就很难使用 DataStore。
> 
> 在 Java 中，你必须使用一个反应式框架，但是没有一个标准的框架是每个人都使用的。那么你是做什么的，你支持哪一个？一直是个问题。但是我们今天很好，因为一切都在科特林。我们推荐使用协程作为并发解决方案，这使得以后的工作变得更加容易。
> 
> 现在我们正在积极地重写 Kotlin 中的库，就像我们对 Room 所做的那样。我们仍然在寻找用 Kotlin 重写现有库的好理由，并且我们也牢记二进制兼容性规则。我们最不希望的事情就是为了把 Java 语言转换成 Kotlin 而破坏人们。

最后，Yigit 强调，这种语言提供的不仅仅是 Android 开发。

> 尽管我们非常专注于 Android 方面，但我们确实在努力确保 Kotlin 也能在其他平台上采用。比如 Google Cloud 现在有 Kotlin 支持，这在当时是一个巨大的努力。

> “Kotlin 对 Android 来说非常重要，但我们并不局限于 Android。”

> 我们希望 Kotlin 成为一种顶级语言，只有在服务器端也采用这种语言的情况下才会发生，所以我们正在努力确保这一点。我们不是目光短浅；我们不想让它成为一种 Android 语言。

## 凯文·比埃尔霍夫

我与 Kevin 交谈，了解 Kotlin 在谷歌内部是如何使用的，包括在 Android 和其他平台上。

> 我在软件基金会领导 Kotlin 团队，该组织支持我们在谷歌开发中使用的语言。在过去的 4 年里，我们一直致力于将 Kotlin 带给谷歌员工。
> 
> 这意味着浏览谷歌开发人员使用的工具，并向他们传授 Kotlin。一切都始于让构建系统与 Kotlin 一起工作。
> 
> 静态分析也是一个很大的领域，在过去的十年中，我们在这方面投入了很多，作为我们在整个代码库中强制属性的一种方式。例如，我们用它来寻找我们想要根除的 bug 模式。通常这是关于正确性，但有时是关于安全或隐私。
> 
> 我们工作的另一个领域是库或 API，深入到常用的基础设施中，并使它们很好地与 Kotlin 一起使用。我们从谷歌普遍使用的 protos 开始。我们为构建原型设计了[API，它利用了 Kotlin 的优势，提供了更好的体验。](https://developers.googleblog.com/2021/11/announcing-kotlin-support-for-protocol.html)
> 
> 另一个反复出现的主题是 Kotlin 协程。谷歌有很多基础设施在某种程度上是异步的。这些代码传统上是为 Java 未来而编写的，现在我们希望这些代码能够原生支持 Kotlin 协程

虽然我们今天在 Android 上庆祝 Kotlin，但我们也在 Android 平台之外的语言上进行了投资。

> 最初，谷歌内部对 Kotlin 的支持来自 Android。我们不想只是鼓励其他人使用 Kotlin，我们想证明我们自己也在这样做。总会有热心者，但很多组织都在期待我们做出决定，比如他们是否应该过渡到 Kotlin。
> 
> 在这一点上，我们的 monorepo 中有大量的 Kotlin 代码，其规模之大，甚至对 JetBrains 来说也很有趣，可以找到他们自己找不到的 bug。这是我们希望为 Kotlin 社区的利益而建立和利用的东西。

## 克里斯蒂娜·李

说到社区，我最后一次采访的是克里斯蒂娜，她是 Pinterest 的一名 Android 工程师，也是 Kotlin 和 Android 的 Google 开发者专家。

这是她回忆自己第一次接触语言的情景。

> 我第一天上班时，有人提起了科特林。我不知道他在说什么，因为我从来没听过这个词。那天晚上我不得不回家谷歌了一下，可以说，我们最终在科特林开发了这个应用。
> 
> 当我们讨论在 Android 上使用 Kotlin 时，我们仔细阅读了杰克的文档。当时很多人都在谈论科特林，那是每个人都去的**的**文件。

然后，我们讨论了成为 Android 和 Kotlin 社区的一员是什么感觉，以及是什么让他们如此乐于参与。

> Kotlin 存在的时间越长，我就越欣赏它周围的社区和建设它的团队。团队对开发计划如此开放，对反馈也如此开放。
> 
> 关于社区，很难找到平衡的一点是推动事情变得更好，并给出建设性的反馈，但不要让社区陷入混乱。那真的很难亲自去做；在网上做要难得多。Android 社区和 Kotlin 社区给我留下深刻印象的是，这种平衡似乎就在那里。
> 
> Kotlin 社区真的令人难以置信，因为它既能提供直接的反馈，又能保持积极的空间。

最后，她总结了这种语言的深远影响。

> 在一种新的编程语言的背景下说起来听起来很傻，但技术真的可以改变人们的生活，它真的可以让人们在工作中更快乐。当我们都在从 Java 转换到 Kotlin 时，听听有多少人受到了它的积极影响，我发现这真的很强大，因为在工作场所很难找到这样的 step 函数。
> 
> 我们通常关注“存在零安全”或“存在类型推断”或所有其他技术部分。但是当你后退一步，你会看到一个完整的故事，关于所有那些点燃或重燃编程热情的人，因为 Kotlin 是一种如此美妙的语言。
> 
> 你不能制造它，对吗？你买不到人们的热情，他们必须真的有那种感觉。令人印象深刻的是，这个团队能够做他们能够做的事情，这个社区也是如此之好。并不总是这样。我认为这是我们之间非常特别的东西。

我们也很乐意听到您学习和采用 Kotlin 进行 Android 开发的故事！使用标签 **#Hi5KotlinOnAndroid 在社交媒体上分享它们。**

*Java 是甲骨文和/或其附属公司的商标或注册商标。*