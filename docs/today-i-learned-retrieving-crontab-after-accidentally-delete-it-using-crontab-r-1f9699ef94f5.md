# ä»Šå¤©æˆ‘å­¦ä¹ äº†â€”â€”åœ¨ä½¿ç”¨ Crontab -R ä¸å°å¿ƒåˆ é™¤ Crontab åé‡æ–°è·å¾—å®ƒ

> åŸæ–‡ï¼š<https://medium.easyread.co/today-i-learned-retrieving-crontab-after-accidentally-delete-it-using-crontab-r-1f9699ef94f5?source=collection_archive---------0----------------------->

> ä»Šå¤©æ˜¯å’Œå¾€å¸¸ä¸€æ ·å¹³é™çš„ä¸€å¤©ã€‚å·²ç»æ˜¯æ™šä¸Š 7 ç‚¹äº†ï¼Œæˆ‘æƒ³åˆä¸Šç¬”è®°æœ¬ç”µè„‘åƒæ™šé¥­ã€‚çªç„¶ï¼Œæˆ‘çš„ä¸€ä¸ªæœ‹å‹å‘Šè¯‰æˆ‘ï¼Œä»–ä¸å°å¿ƒè¿è¡Œäº†å‘½ä»¤ **crontab -r** è€Œä¸æ˜¯ **crontab -e** æ¥æ›´æ–°æˆ‘ä»¬æœåŠ¡å™¨ä¸­çš„ cronjobã€‚ç„¶åï¼Œæˆ‘ä»¬ä¸€èµ·æ…Œäº†ã€‚

![](img/b35c779a3f59cf30be1d518067fc3b29.png)

Photo by [Richard Brutyo](https://unsplash.com/@richardbrutyo?utm_source=medium&utm_medium=referral) on [Unsplash](https://unsplash.com?utm_source=medium&utm_medium=referral)

æ¥ä¸‹æ¥â€”â€”æˆ‘ä»¬ä¸€èµ·å¯»æ‰¾å‡ºè·¯ï¼Œå¾—å‡ºäº†ä¸¤ä¸ªè§£å†³æ–¹æ¡ˆã€‚

1.  è¯•å›¾é€šè¿‡ ***syslog*** æŸ¥æ‰¾ cron æ—¥å¿—

```
**grep CRON /var/log/syslog**
```

ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç³»ç»Ÿè¿è¡Œçš„æ‰€æœ‰ç³»ç»Ÿæ—¥å¿—ã€‚ *grep* å‡½æ•°å°†åªæ•æ‰åŒ…å«å•è¯ *cron* çš„æ—¥å¿—ã€‚

![](img/1a299a6656a9bdb6ca8ed3f4fc962e8e.png)

grep CRON /var/log/syslog

ä»è¿™äº›æ—¥å¿—ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°å‘½ä»¤`***/tmp/test/hello_world.sh***` æ¯ 1 åˆ†é’Ÿè¿è¡Œä¸€æ¬¡ã€‚ä½¿ç”¨è¿™äº›ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥è·å–åœ¨è¿™é‡Œæ‰¾åˆ°çš„æ‰€æœ‰å‘½ä»¤ï¼Œå¹¶å°†å®ƒä»¬é‡å†™åˆ°ç°æœ‰çš„ crontab ä¸­ã€‚

2.æ£€æŸ¥ `***/tmp/***`è¯•è¯•è¿æ°”

```
**ll /tmp/ | grep crontab**
```

![](img/0a4ad701d541f1274a731dd0e3364535.png)

ll /tmp/ | grep crontab

è®¸å¤šç¨‹åºä¸ç›´æ¥å†™å…¥å®é™…æ–‡ä»¶ã€‚ç›¸åï¼Œç¨‹åºå°†é¦–å…ˆå†™å…¥`***/tmp/***`æ–‡ä»¶ï¼Œå½“å®ƒä»¬å®Œæˆæ›´æ–°æ—¶ï¼Œå®ƒä»¬å°†åšä¸€äº›æ­¥éª¤æ¥æ£€æŸ¥å’ŒéªŒè¯(å–å†³äºç¨‹åº)ï¼Œç„¶åæœ€ç»ˆå†™å…¥å®é™…çš„åŸå§‹æ–‡ä»¶ã€‚

crontab çš„ä¸€ä¸ªä¾‹å­æ˜¯:å¦‚æœ crontab ä¸­æœ‰å†²çªçš„æ›´æ”¹(æ‚¨æ­£åœ¨å°è¯•æ›´æ–°æ–‡ä»¶ï¼Œè€Œå¦ä¸€ä¸ªä¹Ÿåœ¨åšåŒæ ·çš„äº‹æƒ…)ï¼Œé‚£ä¹ˆåœ¨`***/tmp/***`ä¸­å°†ä¼šæœ‰ä¸€ä¸ªå‰ç¼€ä¸º ***crontab çš„æ–°ç›®å½•ã€‚**** å­˜å‚¨æ‚¨çš„ç‰ˆæœ¬æ›´æ–°ã€‚

å¦‚æœè¿æ°”åœ¨æˆ‘ä»¬è¿™è¾¹ï¼Œ*å¥½æ­¹åœ¨* ***æˆ‘ä»¬è¿™è¾¹â€”â€”è¿æ°”åœ¨æˆ‘ä»¬è¿™è¾¹*** ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°æ—§æ¡£æ¡ˆã€‚ä½¿ç”¨è¿™äº›æ—§æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡å†™ç°æœ‰çš„ crontabã€‚

æœ‰äº†è¿™ç§æƒ…å†µä¹‹åï¼Œè¿›è¡Œå®šæœŸçš„ crontab é…ç½®å¤‡ä»½ä¼¼ä¹æ˜¯ä¸€ä¸ªå¥½ä¸»æ„â€”â€”åªéœ€å°†å®ƒå†™å…¥ crontab é…ç½®ä¸­ã€‚ç„¶åï¼Œcron å¯ä»¥åœ¨æœªæ¥æ‹¯æ•‘è‡ªå·±ã€‚ğŸ˜‚

> æœ€åï¼Œæˆ‘ä»¬èƒ½å¤Ÿæ¢å¤æˆ‘ä»¬çš„ crontab é…ç½®ã€‚æˆ‘ç»ˆäºåˆä¸Šç¬”è®°æœ¬ï¼Œåƒäº†æ™šé¥­ã€‚
> 
> ç¥å¤§å®¶æ„‰å¿«ï¼

# **å‚è€ƒ**

1.  [æ„å¤–ç§»é™¤åå–å› crontab](http://intosimple.blogspot.com/2013/10/retrieving-crontab-after-accidental.html)
2.  [ç”¨ crontab -r æ¢å¤æ„å¤–åˆ é™¤çš„ cron ä½œä¸š](https://unix.stackexchange.com/questions/136350/recover-cron-jobs-accidently-removed-with-crontab-r)