<html>
<head>
<title>Android Grid Layout</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android网格布局</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/android-grid-layout-1faf0df8d6f2?source=collection_archive---------0-----------------------#2016-04-26">https://medium.com/google-developer-experts/android-grid-layout-1faf0df8d6f2?source=collection_archive---------0-----------------------#2016-04-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><blockquote class="ie"><p id="2af8" class="if ig hh bd ih ii ij ik il im in io dx translated">android开发人员每天都会问自己一个问题——使用哪种布局？</p></blockquote><p id="b3e7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl io ha bi translated">距离<em class="jm"> GridLayout </em>发布— <a class="ae jn" href="http://android-developers.blogspot.com/2011/11/new-layout-widgets-space-and-gridlayout.html" rel="noopener ugc nofollow" target="_blank">新布局小部件:空间和GridLayout </a> <em class="jm">已经有一段时间了。</em></p><p id="8a7d" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">android开发世界关于<em class="jm"> GridLayout </em>的现状如下:</p><ul class=""><li id="0978" class="jt ju hh ir b is jo iw jp ja jv je jw ji jx io jy jz ka kb bi translated">大多数android开发者甚至不知道这样的布局存在。</li><li id="2c6a" class="jt ju hh ir b is kc iw kd ja ke je kf ji kg io jy jz ka kb bi translated">一些android开发者知道GridLayout，但出于某种原因，他们不使用这种布局。</li><li id="c08a" class="jt ju hh ir b is kc iw kd ja ke je kf ji kg io jy jz ka kb bi translated">只有少数android开发者花时间玩GridLayout并积极使用它。</li></ul><p id="1bec" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">我写这篇文章的原因，是因为我认为这个布局被不公平地遗忘了。</p><h1 id="d97a" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">为什么我们需要网格布局？</h1><p id="f1ee" class="pw-post-body-paragraph ip iq hh ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl io ha bi translated"><em class="jm"> GridLayout </em>让你可以用一个根视图创建基于网格的布局。</p><blockquote class="lk ll lm"><p id="84cc" class="ip iq jm ir b is jo iu iv iw jp iy iz ln jq jc jd lo jr jg jh lp js jk jl io ha bi translated">我可以使用嵌套的LinearLayout来创建网格！</p></blockquote><p id="fb88" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">是的，但是在太深的层次结构中会有性能问题。</p><blockquote class="lk ll lm"><p id="f5e3" class="ip iq jm ir b is jo iu iv iw jp iy iz ln jq jc jd lo jr jg jh lp js jk jl io ha bi translated">我可以使用RelativeLayout来创建网格！</p></blockquote><p id="4a24" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">是的，但是<em class="jm"> RelativeLayout </em>有一些限制，例如:</p><ul class=""><li id="7246" class="jt ju hh ir b is jo iw jp ja jv je jw ji jx io jy jz ka kb bi translated">无法同时控制沿两个轴的对齐。</li><li id="3b08" class="jt ju hh ir b is kc iw kd ja ke je kf ji kg io jy jz ka kb bi translated">当小工具占用的空间比你预期的多时，它们会离开屏幕/重叠，因为你不能使用<em class="jm"> weigh </em>等。</li></ul><p id="1ea0" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">换句话说，<em class="jm">relative layout</em>——不够灵活，不够灵敏。</p><h1 id="b2c1" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">样品</h1><p id="1b7b" class="pw-post-body-paragraph ip iq hh ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl io ha bi translated">让我们实现一个简单的布局，它由一个大图像、两个小图标和这些图标旁边的文本组成。</p><figure class="lr ls lt lu fd lv er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es lq"><img src="../Images/02fd2354e67cae04043a41f3dcf11fc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hm-KJs7FJG5qtHglpvWYSQ.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Preview</figcaption></figure><p id="9a55" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated"><strong class="ir hi"> <em class="jm">相对布局</em> </strong></p><p id="01d1" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">通过<em class="jm"> RelativeLayout </em>很容易实现这种布局。这里的关键属性是<em class="jm"> layout_below、</em> <em class="jm"> layout_toRightOf </em>和<em class="jm"> layout_alignTop </em>。</p><figure class="lr ls lt lu fd lv er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es mg"><img src="../Images/1886b12f3cdfc746328532a3e52927b2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1208/format:webp/1*orH45OZ2t_qeoEfSHzaZtA.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Code</figcaption></figure><p id="ec45" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">乍一看，一切似乎都很完美，直到你开始用不同的文本大小测试你的布局。</p><p id="b0af" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated"><strong class="ir hi">问题1 </strong>无法同时控制沿两个轴的对齐。</p><p id="c79e" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">单行文本应该与图标垂直居中，不幸的是<em class="jm"> RelativeLayout </em>不提供这种可能性。</p><figure class="lr ls lt lu fd lv er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es lq"><img src="../Images/6e9c748810df7f1727d359082bea218d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1pxJm-XLyhFHoIzZf65CdQ.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Preview</figcaption></figure><p id="3284" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated"><strong class="ir hi">问题2 </strong>小部件重叠</p><p id="0a39" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">多行文本导致重叠，因为文本通过<em class="jm"> layout_alignTop </em>属性与图标对齐。</p><figure class="lr ls lt lu fd lv er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es lq"><img src="../Images/7c0aea2cf276b4ff86920c3e32e3676a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uemGANLvCQv-tdfyadqnqA.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Preview</figcaption></figure><p id="8856" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated"><strong class="ir hi"><em class="jm">GridLayout</em>T43】</strong></p><p id="a3c4" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">正如你在下图中看到的<em class="jm"> GridLayout </em>产生了更好的结果:</p><ul class=""><li id="ea54" class="jt ju hh ir b is jo iw jp ja jv je jw ji jx io jy jz ka kb bi translated">文本与图标垂直对齐。</li><li id="f0d2" class="jt ju hh ir b is kc iw kd ja ke je kf ji kg io jy jz ka kb bi translated">多行文本向下推送小部件。</li></ul><figure class="lr ls lt lu fd lv er es paragraph-image"><div role="button" tabindex="0" class="lw lx di ly bf lz"><div class="er es lq"><img src="../Images/d3264284c16d25799043fa7a0b72588a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dz8SX4ju0NEW4OL6sHeI5g.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Preview</figcaption></figure><p id="d320" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">那么如何取得这样的成绩呢？首先将<em class="jm"> GridLayout </em>定义为根布局。接下来计算你有多少列，并定义<em class="jm"> android:columnCount </em>属性，在这个例子中我们有2列。</p><p id="1c6a" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">当您在<em class="jm"> GridLayout </em>中定义视图时，它们被一个接一个地放置，因此没有必要显式地定义视图的行和列。</p><p id="6590" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">如果你想拉伸2行或更多行/列的视图，你可以使用<em class="jm">layout _ column span/layout _ rowSpan</em>属性。</p><p id="6f01" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">最重要的是要记住——如果你想让你的视图使用所有可用的空间，<strong class="ir hi">不要将你的视图的</strong>宽度设置为<em class="jm"> match_parent，</em>将其设置为<em class="jm"> 0dp </em>以及<em class="jm"> layout_gravity="fill" </em>属性。</p><figure class="lr ls lt lu fd lv er es paragraph-image"><div class="er es mh"><img src="../Images/2a92e8a323ceabf5fe48f1366c5b2fdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1148/format:webp/1*lSg-UAbQTJkG4pVMM34YaA.png"/></div><figcaption class="mc md et er es me mf bd b be z dx">Code</figcaption></figure><h1 id="fa46" class="kh ki hh bd kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le bi translated">结论</h1><p id="c88a" class="pw-post-body-paragraph ip iq hh ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl io ha bi translated">GridLayout在合适的人手里会是一个强大的工具。它提供了极大的灵活性和性能。另一方面，它需要一些时间来了解它是如何工作的，你通常需要更多的时间来开发和维护这样的布局。</p><p id="6527" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">优点:</p><ul class=""><li id="36ed" class="jt ju hh ir b is jo iw jp ja jv je jw ji jx io jy jz ka kb bi translated">灵活性</li><li id="d44e" class="jt ju hh ir b is kc iw kd ja ke je kf ji kg io jy jz ka kb bi translated">单根布局</li></ul><p id="85f1" class="pw-post-body-paragraph ip iq hh ir b is jo iu iv iw jp iy iz ja jq jc jd je jr jg jh ji js jk jl io ha bi translated">缺点:</p><ul class=""><li id="ed48" class="jt ju hh ir b is jo iw jp ja jv je jw ji jx io jy jz ka kb bi translated">学习曲线</li><li id="a25d" class="jt ju hh ir b is kc iw kd ja ke je kf ji kg io jy jz ka kb bi translated">维护</li></ul></div></div>    
</body>
</html>