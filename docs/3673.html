<html>
<head>
<title>Deploy TensorFlow-hub models on Amazon Sagemaker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Amazon Sagemaker上部署TensorFlow-hub模型</h1>
<blockquote>原文：<a href="https://medium.com/globant/deploy-tensorflow-hub-models-on-amazon-sagemaker-e41c9cc470b5?source=collection_archive---------0-----------------------#2021-05-13">https://medium.com/globant/deploy-tensorflow-hub-models-on-amazon-sagemaker-e41c9cc470b5?source=collection_archive---------0-----------------------#2021-05-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="e17b" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">轻松部署TensorFlow</h2></div><p id="6d29" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在本文中，我们将了解TensorFlow hub模型，以及如何在本地和AWS云上部署这些模型。</p><h1 id="6222" class="js jt hh bd ju jv jw jx jy jz ka kb kc in kd io ke iq kf ir kg it kh iu ki kj bi translated">介绍</h1><p id="c239" class="pw-post-body-paragraph iw ix hh iy b iz kk ii jb jc kl il je jf km jh ji jj kn jl jm jn ko jp jq jr ha bi translated">Tensorflow-hub是一个非常有用的预训练机器学习模型的存储库。这些模型是免费提供的，可以与Keras或TensorFlow一起使用。</p><p id="d6b7" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这些模型很容易通过TensorFlow服务进行部署。Tensorflow服务旨在通过简单的API接口在生产环境中轻松部署机器学习模型。Tensorflow模型提供了与TensorFlow服务的现成集成。</p><h1 id="ca91" class="js jt hh bd ju jv jw jx jy jz ka kb kc in kd io ke iq kf ir kg it kh iu ki kj bi translated">本地执行</h1><p id="d12c" class="pw-post-body-paragraph iw ix hh iy b iz kk ii jb jc kl il je jf km jh ji jj kn jl jm jn ko jp jq jr ha bi translated">我们将首先使用该图像在本地测试TensorFlow服务。我们将从一个最常用的模型开始，例如Google——通用句子编码器。</p><ol class=""><li id="f9aa" class="kp kq hh iy b iz ja jc jd jf kr jj ks jn kt jr ku kv kw kx bi translated">下载并安装docker。将TensorFlow/servings图像从<a class="ae ky" href="https://hub.docker.com/r/tensorflow/serving" rel="noopener ugc nofollow" target="_blank">拉至此处</a>。</li><li id="bb15" class="kp kq hh iy b iz kz jc la jf lb jj lc jn ld jr ku kv kw kx bi translated">从<a class="ae ky" href="https://tfhub.dev/google/universal-sentence-encoder/4" rel="noopener ugc nofollow" target="_blank">这里</a>下载谷歌通用句子编码器4。</li><li id="8426" class="kp kq hh iy b iz kz jc la jf lb jj lc jn ld jr ku kv kw kx bi translated">从zip文件中提取模型</li><li id="255a" class="kp kq hh iy b iz kz jc la jf lb jj lc jn ld jr ku kv kw kx bi translated">文件夹结构看起来像这样-</li></ol><figure class="lf lg lh li fd lj er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es le"><img src="../Images/2db981ead147f3bafe098d79621e2164.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F4sJxRamCLT8OuS94UHWZg.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">The directory structure of the universal-sentence-encoder model</figcaption></figure><p id="738d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">5.要使用带有TensorFlow服务的任何模型，应遵循以下规则</p><p id="18ea" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">6.创建一个名为“models”的目录和以模型名命名的子目录，如“sentence-encoder”</p><p id="3de9" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">7.创建一个带有版本号的子目录。默认情况下，它将为版本号最高的型号提供服务。</p><p id="9636" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">8.在子目录中复制所有的模型文件。</p><p id="6346" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">9.您最终的目录结构将如下所示-</p><figure class="lf lg lh li fd lj er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es lu"><img src="../Images/2a82502bc36f295829a44cabc8f93ad7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HYc3FCloFXjNbZt3xlh3Qg.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">Final directory structure as per TensorFlow servings format</figcaption></figure><p id="940c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">10.现在，我们可以在本地docker容器上开始TensorFlow服务。运行命令-</p><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="3d22" class="ma jt hh lw b fi mb mc l md me">docker run -t — rm -p 8501:8501 -v “&lt;ABSOLUTE_PATH&gt;/models:/models” -e MODEL_NAME=”sentence-encoder” tensorflow/serving</span></pre><p id="4903" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">12.现在，您可以发送请求并将模型用作Rest-API端点。如果请求成功，那么结果将是一个编码的句子。</p><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="bfb4" class="ma jt hh lw b fi mb mc l md me">curl -d '{"instances": ["sample data"]}' -X POST <a class="ae ky" href="http://localhost:8501/v1/models/sentence-encoder:predict" rel="noopener ugc nofollow" target="_blank">http://localhost:8501/v1/models/sentence-encoder:predict</a></span></pre><figure class="lf lg lh li fd lj er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es mf"><img src="../Images/584d8997535d626efbf81829de1fad7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*O3Y0lIfe_dA6skdjm6h8mg.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">The local deployment result</figcaption></figure></div><div class="ab cl mg mh go mi" role="separator"><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml mm"/><span class="mj bw bk mk ml"/></div><div class="ha hb hc hd he"><h1 id="916b" class="js jt hh bd ju jv mn jx jy jz mo kb kc in mp io ke iq mq ir kg it mr iu ki kj bi translated">Sagemaker执行</h1><p id="c67a" class="pw-post-body-paragraph iw ix hh iy b iz kk ii jb jc kl il je jf km jh ji jj kn jl jm jn ko jp jq jr ha bi translated">Sagemaker允许您将模型带到Sagemaker环境之外进行训练。因此，一种方法是你可以用tar.gz格式的目录结构压缩模型。一旦准备好，您就可以将zip上传到s3桶，并在部署时传递S3位置。</p><p id="aeb2" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">但是这种方法的问题是您需要下载模型，提取并更改目录结构，再次压缩模型并手动上传到s3 bucket。这导致了大量的开销，而且效率非常低。</p><p id="d432" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">但是还有另外一个选择！</p><p id="2c49" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Sagemaker培训作业允许您进行一些处理，并在完成后将模型工件保存回s3存储桶。您可以使用Sagemaker脚本模式为培训作业提供您的自定义代码。</p><h1 id="1c24" class="js jt hh bd ju jv jw jx jy jz ka kb kc in kd io ke iq kf ir kg it kh iu ki kj bi translated">先决条件</h1><p id="a454" class="pw-post-body-paragraph iw ix hh iy b iz kk ii jb jc kl il je jf km jh ji jj kn jl jm jn ko jp jq jr ha bi translated">我们需要为此设置一些AWS服务。</p><ol class=""><li id="e2e8" class="kp kq hh iy b iz ja jc jd jf kr jj ks jn kt jr ku kv kw kx bi translated">创建一个S3桶。</li></ol><p id="b031" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">2.创建一个名为“trainingData”的目录和一个名为“train”的子目录</p><p id="a703" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">3.上传列车目录下的任意CSV文件，文件名为“tranin.csv”。我们只是想要它作为占位符。</p><p id="2f16" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">4.创建一个Sagemaker笔记本实例&amp;将策略“AmazonS3FullAccess”附加到默认的Sagemaker角色。</p><p id="7bb6" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">5.创建一个新的Sagemaker笔记本，内核为“conda_amazonei_tensorflow_p36”</p><p id="e744" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">6.创建一个新的文本文件，并将其保存为“encoder.py”</p><figure class="lf lg lh li fd lj er es paragraph-image"><div role="button" tabindex="0" class="lk ll di lm bf ln"><div class="er es ms"><img src="../Images/e062611a264c75ed19305c5d6d0e6baa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0irjybJrU1P7GE1Fq6IQIQ.png"/></div></div><figcaption class="lq lr et er es ls lt bd b be z dx">The directory structure in the Sagemaker notebook instance</figcaption></figure><h1 id="cac9" class="js jt hh bd ju jv jw jx jy jz ka kb kc in kd io ke iq kf ir kg it kh iu ki kj bi translated">培训脚本</h1><p id="e235" class="pw-post-body-paragraph iw ix hh iy b iz kk ii jb jc kl il je jf km jh ji jj kn jl jm jn ko jp jq jr ha bi translated">Sagemaker提供脚本模式执行，用户提供自己的脚本来执行培训工作。让我们在“encoder.py”中添加脚本。</p><p id="ea4c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">编码器. py →</p><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="5652" class="ma jt hh lw b fi mb mc l md me">"""This module is responsible for creating training job and<br/>saving the model back to the s3"""</span><span id="6de3" class="ma jt hh lw b fi mt mc l md me">import argparse<br/>import os<br/>import subprocess<br/>import sys<br/>import tensorflow as tf</span><span id="90ca" class="ma jt hh lw b fi mt mc l md me"># The tensorflow hub is not installed for sagemaker tensorflow image<br/># Therefore we need to install the package programmatically<br/>def install(package):<br/>    """<br/>        Function to install python package<br/>        Parameters:<br/>            package (str) : name of package to be installed<br/>         Returns:<br/>            None<br/>        """<br/>    subprocess.check_call(<br/>        [sys.executable, "-q", "-m", "pip", "install", package])</span><span id="9d5d" class="ma jt hh lw b fi mt mc l md me"># Installing tensorflow-hub package and importing it<br/>install('tensorflow-hub')<br/>import tensorflow_hub as hub</span><span id="0d02" class="ma jt hh lw b fi mt mc l md me"># When a training job is created then <br/># we can provide a script and execute the training job in script mode.<br/># This script should be passed as an entry_point while creating a training job.<br/># The main method should dictate the flow of execution.<br/>if __name__ == '__main__':</span><span id="b5a1" class="ma jt hh lw b fi mt mc l md me">    # To extract command line options if passed any.<br/>    # we can use argparse package<br/>    # Here we are creating an ArgumentParser object.<br/>    parser = argparse.ArgumentParser()</span><span id="01e1" class="ma jt hh lw b fi mt mc l md me">    # Data, model, and output directories these variables <br/>    # are set as environment variables by sagemaker.<br/>    # We need to extract these variables and <br/>    # add it to ArgumentParser object<br/>    parser.add_argument(<br/>        '--output-data-dir',<br/>        type=str,<br/>        default=os.environ.get('SM_OUTPUT_DATA_DIR'))<br/>    parser.add_argument(<br/>        '--model-dir',<br/>        type=str,<br/>        default=os.environ.get('SM_MODEL_DIR'))<br/>    parser.add_argument(<br/>        '--train',<br/>        type=str,<br/>        default=os.environ.get('SM_CHANNEL_TRAIN'))<br/>    parser.add_argument(<br/>        '--test',<br/>        type=str,<br/>        default=os.environ.get('SM_CHANNEL_TEST'))<br/>    # Extracting all known arguments and storing it in args variable<br/>    args, _ = parser.parse_known_args()</span><span id="ca28" class="ma jt hh lw b fi mt mc l md me">    # Now we need to load the required tensorflow-hub module.<br/>    # Once loaded into memory we get the model as return value<br/>    model = hub.load("<a class="ae ky" href="https://tfhub.dev/google/universal-sentence-encoder/4" rel="noopener ugc nofollow" target="_blank">https://tfhub.dev/google/universal-sentence-encoder/4</a>")</span><span id="bb2a" class="ma jt hh lw b fi mt mc l md me">    # The model need to be saved as per <br/>    # sagemaker tensorflow servings format<br/>    # Notice we are saving in directory structure <br/>    # like &lt;model_name&gt;/&lt;version_number&gt;<br/>    # This method will save the output model to S3 bucket<br/>    tf.saved_model.save(<br/>        model,<br/>        os.path.join(<br/>            args.model_dir,<br/>            "sentence-encoder/1"))</span></pre><h1 id="c6c8" class="js jt hh bd ju jv jw jx jy jz ka kb kc in kd io ke iq kf ir kg it kh iu ki kj bi translated">Jupyter笔记本</h1><p id="1af4" class="pw-post-body-paragraph iw ix hh iy b iz kk ii jb jc kl il je jf km jh ji jj kn jl jm jn ko jp jq jr ha bi translated">首先，让我们设置S3配置。</p><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="c58c" class="ma jt hh lw b fi mb mc l md me">s3_bucket = '&lt;Bucket_name&gt;' <br/>prefix = 'sentence-encoder' # model will be saved under this prefix<br/>training_data_prefix = 'trainingData/train' # training data location </span></pre><p id="6963" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">下一步是导入所有需要的包。</p><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="eb75" class="ma jt hh lw b fi mb mc l md me">from sagemaker.tensorflow import TensorFlow</span><span id="667a" class="ma jt hh lw b fi mt mc l md me">from sagemaker.tensorflow.model import TensorFlowModel</span><span id="3d5c" class="ma jt hh lw b fi mt mc l md me">from sagemaker import get_execution_role</span><span id="bfab" class="ma jt hh lw b fi mt mc l md me">from sagemaker.inputs import TrainingInput</span><span id="57c7" class="ma jt hh lw b fi mt mc l md me">from sagemaker.predictor import JSONSerializer, Predictor, JSONDeserializer</span><span id="c5b7" class="ma jt hh lw b fi mt mc l md me">import sagemaker</span><span id="3fae" class="ma jt hh lw b fi mt mc l md me">import time</span><span id="091c" class="ma jt hh lw b fi mt mc l md me">import boto3</span></pre><p id="89b9" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">接下来，我们将创建一个张量流估计器</p><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="67fb" class="ma jt hh lw b fi mb mc l md me">tf_estimator = TensorFlow(entry_point='encoder.py',<br/>                          role=get_execution_role(),<br/>                          instance_count=1,<br/>                          instance_type='ml.m5.large',<br/>                          framework_version='2.0.0',<br/>                          sagemaker_session=sagemaker.Session(),<br/>                          output_path="s3://{}/{}/".format(<br/>                                                 s3_bucket,prefix),<br/>                          py_version='py3')</span></pre><p id="92a7" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">接下来是将训练数据设置为占位符。它实际上不会处理用于训练的数据。</p><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="6861" class="ma jt hh lw b fi mb mc l md me">train_input = TrainingInput("s3://{}/{}/".format(s3_bucket,<br/>                                             training_data_prefix), <br/>                            content_type="text/csv")</span></pre><p id="7ae2" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，通过调用fit方法开始训练作业。</p><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="55e4" class="ma jt hh lw b fi mb mc l md me">job_name = 'sentence-encoder-training-job-' +<br/>            time.strftime("%Y-%m-%d-%H-%M-%S", time.gmtime())</span><span id="48ff" class="ma jt hh lw b fi mt mc l md me">print(job_name)</span><span id="2f12" class="ma jt hh lw b fi mt mc l md me">tf_estimator.fit({"train":train_input}, job_name=job_name)</span></pre><p id="bc59" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这将使用Tensorflow-2映像开始一项培训工作。一旦准备就绪，它将执行训练脚本。该脚本将</p><ol class=""><li id="fc7f" class="kp kq hh iy b iz ja jc jd jf kr jj ks jn kt jr ku kv kw kx bi translated">安装张量流-集线器</li><li id="153b" class="kp kq hh iy b iz kz jc la jf lb jj lc jn ld jr ku kv kw kx bi translated">下载通用句子编码器模型</li><li id="6af4" class="kp kq hh iy b iz kz jc la jf lb jj lc jn ld jr ku kv kw kx bi translated">将模型保存到所需的目录结构中</li><li id="7f44" class="kp kq hh iy b iz kz jc la jf lb jj lc jn ld jr ku kv kw kx bi translated">Sagemaker将把模型工件保存到s3存储桶输出路径中</li></ol><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="a7e7" class="ma jt hh lw b fi mb mc l md me">s3://&lt;bucket_name&gt;/&lt;prefix&gt;/&lt;job_name&gt;/model.tar.gz</span></pre><p id="7313" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在所有的神器都准备好了。有了这些存储的工件，模型可以被部署到一个端点—</p><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="bf9d" class="ma jt hh lw b fi mb mc l md me">model = TensorFlowModel(<br/>            model_data="s3://{}/{}/{}/output/model.tar.gz".format(<br/>                                         s3_bucket,prefix,job_name),<br/>            role=get_execution_role(),<br/>            framework_version="2.0.0",<br/>            sagemaker_session=sagemaker.Session())</span><span id="a5b9" class="ma jt hh lw b fi mt mc l md me">predictor = model.deploy(initial_instance_count=1, <br/>                         instance_type='ml.m5.large', <br/>                         endpoint_name='sentence-encoder-test')</span><span id="9c99" class="ma jt hh lw b fi mt mc l md me">print(predictor.endpoint_name)</span></pre><p id="5284" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">该过程需要一些时间来完成，并打印端点名称。</p><p id="76c8" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">一旦模型部署完毕，我们就可以使用Sagemaker Predictor进行一些预测—</p><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="1d3d" class="ma jt hh lw b fi mb mc l md me">predictor = Predictor(endpoint_name=predictor.endpoint_name,<br/>                      sagemaker_session=sagemaker.Session(),<br/>                      serializer=JSONSerializer(),<br/>                      deserializer=JSONDeserializer())</span><span id="d245" class="ma jt hh lw b fi mt mc l md me">result = predictor.predict({'instances': ['hello world']})</span><span id="6db6" class="ma jt hh lw b fi mt mc l md me">print(result)</span></pre><p id="02e2" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这将返回一个带有编码句子值的JSON响应。这意味着模型部署成功。</p><p id="0349" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">最后，删除已部署的实例以停止计费。</p><pre class="lf lg lh li fd lv lw lx ly aw lz bi"><span id="c0f1" class="ma jt hh lw b fi mb mc l md me">client = boto3.client('sagemaker')</span><span id="acd4" class="ma jt hh lw b fi mt mc l md me">response = client.delete_endpoint(<br/>                EndpointName=predictor.endpoint_name)</span><span id="bf8b" class="ma jt hh lw b fi mt mc l md me">print(response)</span></pre><p id="2a45" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">就是这样！</p><p id="985b" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">通过这种方式，您可以利用Sagemaker的特性将TensorFlow模型部署到Sagemaker。您可以创建一个管道并自动化这个工作流，这样在不同的环境中部署模型将会非常容易。</p><h1 id="2c28" class="js jt hh bd ju jv jw jx jy jz ka kb kc in kd io ke iq kf ir kg it kh iu ki kj bi translated">参考</h1><p id="bfb0" class="pw-post-body-paragraph iw ix hh iy b iz kk ii jb jc kl il je jf km jh ji jj kn jl jm jn ko jp jq jr ha bi translated"><a class="ae ky" href="https://sagemaker.readthedocs.io/en/stable/frameworks/tensorflow/deploying_tensorflow_serving.html#how-to-implement-the-pre-and-or-post-processing-handler-s" rel="noopener ugc nofollow" target="_blank">https://sagemaker . readthedocs . io/en/stable/frameworks/tensor flow/deploying _ tensor flow _ serving . html</a></p><p id="7d58" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">https://www.tensorflow.org/tfx/serving/docker<a class="ae ky" href="https://www.tensorflow.org/tfx/serving/docker" rel="noopener ugc nofollow" target="_blank"/></p><p id="9552" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae ky" href="https://www.tensorflow.org/api_docs/python/tf/saved_model/save" rel="noopener ugc nofollow" target="_blank">https://www . tensor flow . org/API _ docs/python/TF/saved _ model/save</a></p></div></div>    
</body>
</html>