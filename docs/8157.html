<html>
<head>
<title>Building Design System UI kits for large frontend applications</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">面向大型前端应用的建筑设计系统UI套件</h1>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/building-design-system-ui-kits-for-large-frontend-applications-1bb1d1ac234f?source=collection_archive---------3-----------------------#2022-11-23">https://medium.com/walmartglobaltech/building-design-system-ui-kits-for-large-frontend-applications-1bb1d1ac234f?source=collection_archive---------3-----------------------#2022-11-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex ig ih ii ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es if"><img src="../Images/5121588c9e11a04a9ca0e9ff9d0b252a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MQCX3f3y34-WOuJovqaB3Q.png"/></div></div></figure><p id="f9b1" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">设计系统对于构建大规模前端应用变得越来越重要。它们用于构建可重用的组件，帮助我们构建、扩展和维护前端应用程序。</p><p id="bd65" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">构建复杂的前端架构需要从小的基础模块开始。这个基础帮助我们建立应用程序的城堡。可重复使用的组件就像<strong class="is hi">乐高</strong>积木一样，可以用来搭建各种产品。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es jo"><img src="../Images/7bc18c4a8aa7ca21c141706b971609cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MxqwwYE5J94iRJjBddKNvw.jpeg"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">Photo Credits: <a class="ae jx" href="https://pixabay.com/photos/lego-construction-site-replica-516559/" rel="noopener ugc nofollow" target="_blank">Steffi Timm</a></figcaption></figure><blockquote class="jy jz ka"><p id="ac26" class="iq ir kb is b it iu iv iw ix iy iz ja kc jc jd je kd jg jh ji ke jk jl jm jn ha bi translated"><strong class="is hi">什么是设计系统？</strong></p></blockquote><p id="3803" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">设计系统是多个项目之间共享的UI组件的完整指南。它也是一个组织的共享UI组件的真实来源。它侧重于促进采用和简化维护的核心工作流。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kf"><img src="../Images/f9a27f4fcc41636b85a150383fc590a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WsatDDKGuCkb1wUxFCs3LQ.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx"><strong class="bd kg">Storybook Design System Workflow</strong></figcaption></figure><p id="9034" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">在本文中，我们将讨论如何通过使用这个工作流来构建可重用的组件。</p><p id="e5e9" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">先决条件:<a class="ae jx" href="https://nodejs.org/en/" rel="noopener ugc nofollow" target="_blank"> <strong class="is hi">节点</strong> </a> <strong class="is hi"> </strong>(版本14或以上)。</p><p id="d0b5" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">让我们使用下面的命令创建一个简单的React应用程序。</p><pre class="jp jq jr js fd kh ki kj kk aw kl bi"><span id="2c26" class="km kn hh ki b fi ko kp l kq kr">npx create-react-app starter-design-systems --template typescript</span></pre><p id="e17b" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">这将创建一个名为<code class="du ks kt ku ki b">starter-design-system</code>的React starter项目。接下来在IDE中打开这个项目(我使用的是Visual Studio代码)。</p><p id="e264" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">现在让我们安装下面的包来开始设计系统。上图项目去终端。以下命令将安装必要的软件包(安装可能需要一些时间)。</p><pre class="jp jq jr js fd kh ki kj kk aw kl bi"><span id="5a3b" class="km kn hh ki b fi ko kp l kq kr">#Install the React bootstrap frontend framework<br/>npm install react-bootstrap bootstrap</span><span id="bb0c" class="km kn hh ki b fi kv kp l kq kr">#Installs the testing packages<br/>npm install --save-dev react-test-renderer @types/react-test-renderer</span><span id="89dc" class="km kn hh ki b fi kv kp l kq kr">#Installs and initializes the storybook<br/>npx storybook init</span></pre><p id="4cf8" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">如果您当前的节点版本低于14.17，您将需要一个额外的包来运行jest命令。</p><pre class="jp jq jr js fd kh ki kj kk aw kl bi"><span id="037b" class="km kn hh ki b fi ko kp l kq kr">#Installs the typed definitions for react-test-renderer<br/>npm i --save-dev <!-- -->jest-watch-typeahead</span></pre><p id="5fcd" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">初始化故事书会将相关的文件夹和文件引导到项目中。它在项目的根目录下创建一个<code class="du ks kt ku ki b">.storybook</code>文件夹，在<code class="du ks kt ku ki b">src/</code>下创建一个<code class="du ks kt ku ki b">stories</code>文件夹，其中包含所有组件的故事文件。</p><p id="677c" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">同样在<code class="du ks kt ku ki b">src/index.tsx</code>文件和<code class="du ks kt ku ki b">.storybook/preview.js</code>文件中导入bootstrap.css文件。这将把所有的引导css和样式添加到项目和故事书故事中。</p><pre class="jp jq jr js fd kh ki kj kk aw kl bi"><span id="216d" class="km kn hh ki b fi ko kp l kq kr">import 'bootstrap/dist/css/bootstrap.css';</span></pre><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kw"><img src="../Images/fe0e70d8138b0d5840e0ecb3e1817fd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*epVv00TtgBfrKtBN-0EgaQ.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">Index.tsx and preview.js file with import bootstrap css</figcaption></figure><p id="0f8e" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">接下来让我们运行故事书</p><pre class="jp jq jr js fd kh ki kj kk aw kl bi"><span id="6b49" class="km kn hh ki b fi ko kp l kq kr">npm run storybook</span></pre><p id="079b" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">这将在Google Chrome中打开故事书页面，显示可重用组件的列表。默认情况下，Storybook提供了三个新组件:按钮、标题和页面。如果不需要，这些组件可以移除。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kx"><img src="../Images/d09b334b4bd9af595c8a0fbb0cf97ad3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VzzU-9qU8XIDtEF0JKH08g.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">Storybook in Browser</figcaption></figure><p id="3090" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">让我们创建一个<strong class="is hi">警报</strong>组件，它可以给出警报消息，还可以根据警报的类型改变颜色。</p><p id="33af" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">在<code class="du ks kt ku ki b">src/</code>文件夹中创建一个<code class="du ks kt ku ki b">components</code>文件夹。在这个文件夹中创建一个<code class="du ks kt ku ki b">alert</code>文件夹。在这个文件夹中创建一个文件<code class="du ks kt ku ki b">alert.tsx</code></p><blockquote class="jy jz ka"><p id="efc5" class="iq ir kb is b it iu iv iw ix iy iz ja kc jc jd je kd jg jh ji ke jk jl jm jn ha bi translated"><strong class="is hi"> src - &gt;组件- &gt; alert - &gt; alert.tsx </strong></p></blockquote><figure class="jp jq jr js fd ij er es paragraph-image"><div class="er es ky"><img src="../Images/97e5b0f76acba5aed555ed1498f77ca8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1128/format:webp/1*1kohRHHt-AEQO0Xb6UG9-w.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">File structure for components</figcaption></figure><p id="6a20" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">为<code class="du ks kt ku ki b">alert.tsx</code>中的警报组件复制以下代码。</p><pre class="jp jq jr js fd kh ki kj kk aw kl bi"><span id="6e2a" class="km kn hh ki b fi ko kp l kq kr">import { Alert as ReactAlert } from 'react-bootstrap'</span><span id="62c0" class="km kn hh ki b fi kv kp l kq kr">import { Variant } from 'react-bootstrap/esm/types';</span><span id="77cd" class="km kn hh ki b fi kv kp l kq kr">interface Props {</span><span id="7587" class="km kn hh ki b fi kv kp l kq kr">variant?: Variant;</span><span id="8951" class="km kn hh ki b fi kv kp l kq kr">message?: string;</span><span id="c364" class="km kn hh ki b fi kv kp l kq kr">}</span><span id="daa5" class="km kn hh ki b fi kv kp l kq kr">const Alert = ({ variant, message } : Props) =&gt; {</span><span id="b2a3" class="km kn hh ki b fi kv kp l kq kr">return (&lt;ReactAlert variant={variant}&gt; {message} &lt;/ReactAlert&gt;)</span><span id="36f5" class="km kn hh ki b fi kv kp l kq kr">}</span><span id="7d44" class="km kn hh ki b fi kv kp l kq kr">Alert.defaultProps = {</span><span id="d3a3" class="km kn hh ki b fi kv kp l kq kr">variant: 'success',</span><span id="b013" class="km kn hh ki b fi kv kp l kq kr">message: 'This is an alert message'</span><span id="9408" class="km kn hh ki b fi kv kp l kq kr">}</span><span id="fec1" class="km kn hh ki b fi kv kp l kq kr">export default Alert;</span></pre><p id="c343" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">现在让我们为这个组件创建一个故事，以便在故事书界面中查看这个组件。用下面的代码在<code class="du ks kt ku ki b">src/stories</code>文件夹中创建一个文件<code class="du ks kt ku ki b">alert.stories.tsx</code>。</p><pre class="jp jq jr js fd kh ki kj kk aw kl bi"><span id="deed" class="km kn hh ki b fi ko kp l kq kr">import { ComponentStory, ComponentMeta } from '@storybook/react';</span><span id="d3c4" class="km kn hh ki b fi kv kp l kq kr">import Alert from '../components/alert/alert';</span><span id="2b7b" class="km kn hh ki b fi kv kp l kq kr">enum VariantType {</span><span id="8b58" class="km kn hh ki b fi kv kp l kq kr">Primary = "primary",</span><span id="4266" class="km kn hh ki b fi kv kp l kq kr">Secondary = "secondary",</span><span id="8b78" class="km kn hh ki b fi kv kp l kq kr">Danger = "danger",</span><span id="49c6" class="km kn hh ki b fi kv kp l kq kr">Success = "success",</span><span id="3560" class="km kn hh ki b fi kv kp l kq kr">}</span><span id="8c4c" class="km kn hh ki b fi kv kp l kq kr">export default {</span><span id="9cb1" class="km kn hh ki b fi kv kp l kq kr">title: 'Example/Alert',</span><span id="a165" class="km kn hh ki b fi kv kp l kq kr">component: Alert,</span><span id="745d" class="km kn hh ki b fi kv kp l kq kr">argTypes: {</span><span id="4335" class="km kn hh ki b fi kv kp l kq kr">variant: {</span><span id="0818" class="km kn hh ki b fi kv kp l kq kr">control: { type: "select", options: VariantType },</span><span id="5386" class="km kn hh ki b fi kv kp l kq kr">description: "Type of alert",</span><span id="219a" class="km kn hh ki b fi kv kp l kq kr">defaultValue:"success",</span><span id="a375" class="km kn hh ki b fi kv kp l kq kr">},</span><span id="a201" class="km kn hh ki b fi kv kp l kq kr">message: {</span><span id="10cb" class="km kn hh ki b fi kv kp l kq kr">control: 'text',</span><span id="e32c" class="km kn hh ki b fi kv kp l kq kr">description: 'Enter the alert message',</span><span id="15b3" class="km kn hh ki b fi kv kp l kq kr">defaultValue: 'This is an alert message'</span><span id="0931" class="km kn hh ki b fi kv kp l kq kr">}}} as ComponentMeta&lt;typeof Alert&gt;;</span><span id="ee13" class="km kn hh ki b fi kv kp l kq kr">const Template: ComponentStory&lt;typeof Alert&gt; = ({variant, message}) =&gt; &lt;Alert variant={variant} message={message} /&gt;;</span><span id="03ba" class="km kn hh ki b fi kv kp l kq kr">export const Default = Template.bind({});</span><span id="c1fb" class="km kn hh ki b fi kv kp l kq kr">Default.args = {<br/>variant: "success"<br/>}</span></pre><p id="b238" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">你可以在这里阅读更多关于故事书配置<a class="ae jx" href="https://storybook.js.org/docs/react/writing-stories/introduction" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="58d2" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">如果您保存这些文件并刷新浏览器中的运行故事书界面，您应该会在组件列表中看到一个警告组件。如果在故事书中没有看到您的新组件，那么停止并运行故事书命令。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/fec6c5a3c5e6a5499dfeb37e011a1db6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5dujIW6sJjdCPnsiq0Mk6Q.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">Storybook canvas interface with new component</figcaption></figure><p id="3b3a" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">这也将在<strong class="is hi">文档</strong>选项卡中添加组件的文档，当在应用程序中使用组件时，该文档可用作参考。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es kz"><img src="../Images/c6ae28f0b4efb83ee9fb57d6ba597836.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c0CSE25UFppUcjze3zKWvA.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">Storybook Docs tab</figcaption></figure><p id="2c1a" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">故事书UI可以帮助我们将组件的构建与应用程序UI并行隔离。大型前端应用程序可能有许多不同类型的可重用组件。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es la"><img src="../Images/bfdee656433a24d28ce6e23abee49284.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RNUkLYd0bVdIF8-_1EDwxg.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">Sample Storybook components list</figcaption></figure><p id="c920" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">我们还可以通过在<code class="du ks kt ku ki b">src/stories/</code>文件夹中创建<code class="du ks kt ku ki b">.stories.mdx</code>来为故事书UI中的这些组件创建故事。这也将添加Markdown语法和<code class="du ks kt ku ki b">.jsx</code>语法。你可以在这里找到更多关于<code class="du ks kt ku ki b">.mdx</code>文档<a class="ae jx" href="https://storybook.js.org/docs/react/writing-docs/mdx" rel="noopener ugc nofollow" target="_blank">的信息。</a></p><p id="2176" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">接下来，我们需要创建快照测试。创建组件的快照可以确保它不会意外更改。</p><p id="7151" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">在警报组件文件夹中创建一个新文件<code class="du ks kt ku ki b">alert.spec.tsx</code>，并添加下面的代码，该代码将创建警报组件的快照。</p><pre class="jp jq jr js fd kh ki kj kk aw kl bi"><span id="c45d" class="km kn hh ki b fi ko kp l kq kr">import renderer from 'react-test-renderer';</span><span id="5437" class="km kn hh ki b fi kv kp l kq kr">import Alert from '../alert/alert';</span><span id="1e6a" class="km kn hh ki b fi kv kp l kq kr">it('renders correctly', () =&gt; {</span><span id="3cc2" class="km kn hh ki b fi kv kp l kq kr">const tree = renderer</span><span id="9ee8" class="km kn hh ki b fi kv kp l kq kr">.create(&lt;Alert variant='success' message='This is an alert message'/&gt;)</span><span id="c29a" class="km kn hh ki b fi kv kp l kq kr">.toJSON();</span><span id="7215" class="km kn hh ki b fi kv kp l kq kr">expect(tree).toMatchSnapshot();</span><span id="c786" class="km kn hh ki b fi kv kp l kq kr">});</span></pre><blockquote class="jy jz ka"><p id="abf8" class="iq ir kb is b it iu iv iw ix iy iz ja kc jc jd je kd jg jh ji ke jk jl jm jn ha bi translated"><strong class="is hi">src-&gt;components-&gt;alert-&gt;alert . spec . tsx</strong></p></blockquote><p id="a44e" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">运行<code class="du ks kt ku ki b">npm run test</code>为警报组件生成快照。这将创建一个_ _ snapshots _ _文件夹，在其中生成<code class="du ks kt ku ki b">.snap</code>文件。</p><figure class="jp jq jr js fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es lb"><img src="../Images/3a18e0c872c3a6b49d9a387b3881e68e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*W4KB4XlJshYaG5361GW3_w.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">File structure for the snapshots and tests</figcaption></figure><p id="5624" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">您还可以根据组件的功能测试覆盖率，向这个<code class="du ks kt ku ki b">.spec</code>文件添加其他测试用例。</p><p id="587a" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated">现在，这个组件可以在应用程序的任何地方使用。对此组件的任何更改都将导致npm测试失败。这些快照必须根据更改进行更新，以便可以及早识别任何意外的更改。</p><h2 id="f6ce" class="km kn hh bd kg lc ld le lf lg lh li lj jb lk ll lm jf ln lo lp jj lq lr ls lt bi translated">最后的想法</h2><p id="c171" class="pw-post-body-paragraph iq ir hh is b it lu iv iw ix lv iz ja jb lw jd je jf lx jh ji jj ly jl jm jn ha bi translated">创建一个复杂的前端应用程序需要大量的规划、设计和开发。在软件开发生命周期的初始阶段构建一个设计系统可以帮助我们更加容易和精确地达到可交付成果。</p><p id="bd2f" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn ha bi translated"><strong class="is hi">参考文献:</strong></p><ol class=""><li id="f6f6" class="lz ma hh is b it iu ix iy jb mb jf mc jj md jn me mf mg mh bi translated">【https://storybook.js.org/ T2】号</li><li id="32ad" class="lz ma hh is b it mi ix mj jb mk jf ml jj mm jn me mf mg mh bi translated">【https://jestjs.io/docs/tutorial-react T4】</li></ol></div></div>    
</body>
</html>