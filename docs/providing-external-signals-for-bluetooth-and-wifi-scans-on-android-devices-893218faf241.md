# 为 Android 设备上的蓝牙和 WiFi 扫描提供外部信号

> 原文：<https://medium.com/quick-code/providing-external-signals-for-bluetooth-and-wifi-scans-on-android-devices-893218faf241?source=collection_archive---------1----------------------->

## 我们如何适应隔离室内导航

![](img/978addd1ae5d6b1493cac69b1d07e094.png)

Image from [Dribbble](https://dribbble.com/shots/5980552-Wifi-City) by [Folio Illustration Agency](https://dribbble.com/Folio)

你好，你好！我来自 [Navigine](https://navigine.com/) 团队。八年来，我们一直提供集成定位移动技术，实现先进的室内导航和邻近解决方案。今天，我们想告诉你一些变通办法，我们想出这些办法是为了在没有信标和其他发射信号的设备的情况下，改善室内导航的测试。让我们深入了解并找出如何使用它。

## 公共职能中的必需品

世界各地都在继续隔离，但这并不妨碍我们继续努力，找到更好的室内导航解决方案，并改进现有的解决方案。由于我们继续远程工作，我们需要测试我们的解决方案是否正确运行，但有时缺少信标或其他发射信号的设备迫使我们想出一个更棘手的解决方案。所以我们决定公开提供 WiFi 和蓝牙信号的方法。这些解决方案不仅适用于室内导航，如果您技术使用蓝牙或 wifi 设备，也适用于其他情况。

另外值得特别注意的是，这种方法也可以用于其他情况，例如，如果蓝牙或 WiFi 传感器中的一个在您的设备上不能很好地工作，或者如果您决定测试别人的解决方案，但不想购买 beacones。当然，您仍然可以使用一些模拟这些信号的应用程序，但这种解决方案并不总是很好，因为有时您需要某种类型的信标，而大多数应用程序允许您更改非常有限的参数。

## 功能参数描述

当您使用蓝牙或 WiFi 扫描时，您在扫描回调中接收信号，然后将数据传递给您的函数，其中会发生某种神奇的事情。但是在没有发射信号的设备的情况下，就不会有魔法，所以为了进一步的测试，当您立即向您的魔法函数提供数据时，您必须使用类似的解决方案。在我们的情况下，这个神奇的功能将评估您的室内位置。所以让我们试着理解我们用来传递给函数的变量。

![](img/fefec2e813f72d2558231ba7c383f768.png)

iBeacon AD structure

对于蓝牙测量数据提供功能 ***名称*** 是蓝牙设备名称， ***地址*** 是其 mac 地址。信标的这些字段不是很重要，所以我们不关注它们。 ***Rssi*** 是对接收信号中存在的功率的测量。 ***ScanRecord*** 是一个字节数组，由 major、minor、uuid、power 等参数组成。您可以在每个信标制造商的文档中找到有关该字节数组数据的更多信息。

对于 Wifi 测量数据提供功能，只有一个参数。 ***ScanResults*** 是扫描结果的向量，其中每个扫描结果包含 BSSID、SSID、level、frequency 等信息。要了解更多信息，我们建议您阅读 ScanResult 文档。

## 如何使用

拥有所有这些数据后，您可以为您的功能提供定制信号，而无需扫描任何蓝牙和 WiFi 设备。最重要的是，以一定的频率调用这些函数是值得的，以便不断地接收数据，并且不断地执行您需要的函数，在我们的例子中，它是一个导航评估。这是代码片段，告诉你如何运行室内导航并向它提供信标信息。

顺便说一下，您需要创建自己的函数来生成信标和 WiFi 信号，以提供给这个函数，但这是另一项任务，可以在另一篇文章中讲述。

## 结论

当然，最好使用发射信号的真实设备，并在真实数据上测试您所在位置的导航。但有时需要采取这种变通办法。该解决方案非常适合作为临时解决方案，用于测试您所在位置的导航，或者测试您感兴趣的其他点，或者如果您不想为此购买额外的材料，而又不确定这是您所需要的。

你可以在我们的 [wiki](https://github.com/Navigine/Android-SDK/wiki/Custom-Bluetooth-and-WiFi-signals-providing) 中找到这个解决方案的更多细节。你也可以在我们的 [GitHub](https://github.com/Navigine/Android-SDK) 中找到演示应用。请随意提问并留下您的反馈。