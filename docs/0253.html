<html>
<head>
<title>#SmallerAPK, Part 7: Image optimization, Shape and VectorDrawables</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">#SmallerAPK，第7部分:图像优化、形状和矢量绘图</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/smallerapk-part-7-image-optimization-shape-and-vectordrawables-ed6be3dca3f?source=collection_archive---------7-----------------------#2016-02-19">https://medium.com/androiddevelopers/smallerapk-part-7-image-optimization-shape-and-vectordrawables-ed6be3dca3f?source=collection_archive---------7-----------------------#2016-02-19</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/16742a27007b85054b45771a39fbd376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6OvLVi-G5Ldze7Novm7M0w.jpeg"/></div></div></figure><div class=""/><p id="f12b" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><a class="ae jn" href="#2807" rel="noopener ugc nofollow"> <strong class="ir ht">更新1 </strong> </a> : VectorDrawableCompat现已发布！</p><p id="41f3" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">像<a class="ae jn" rel="noopener" href="/@wkalicinski/smallerapk-part-6-image-optimization-zopfli-webp-4c462955647d"> JPEG、PNG和WebP </a>这样的光栅图像格式对于某些图像类型来说是非常好的，有时甚至是必要的，但是它们有两个主要缺点——它们的大小以及你需要在你的项目中以不同的版本保存它们以适应不同的屏幕密度，这使得问题更加复杂。但是有些图像类型，尤其是图标和UI元素，可以使用XML和路径信息，用更简洁的表示方式轻松地重新创建。</p><h1 id="5700" class="jo jp hs bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">可拉伸的形状</h1><p id="0d0c" class="pw-post-body-paragraph ip iq hs ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">这是一种在XML文件中定义的通用drawable，从一开始就可以在Android中使用，并且可以在任何平台版本下使用。它只能支持非常基本的形状，如矩形、椭圆形、线条和环形，但有时对于简单的背景或装饰来说就足够了。通过它的属性，你还可以创建渐变、圆角和轮廓效果。</p><p id="f610" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里的<a class="ae jn" href="http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape" rel="noopener ugc nofollow" target="_blank"/>是一个关于拉延成形的完整指南。你可以在你的布局中使用位图或其他类型的drawables时使用它们，例如在<em class="kr"> android:background </em>或<em class="kr"> android:src </em>中。</p><h1 id="4cb7" class="jo jp hs bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">矢量绘图</h1><p id="b2b8" class="pw-post-body-paragraph ip iq hs ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">从API level 21 (Lollipop)开始，Android支持一种新的表示矢量图形的drawable类型(非常适合图标！)，称为<a class="ae jn" href="http://developer.android.com/reference/android/graphics/drawable/VectorDrawable.html" rel="noopener ugc nofollow" target="_blank"><em class="kr">VectorDrawable</em></a>。</p><p id="58f8" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="kr"> VectorDrawables </em>与密度无关(一个文件适用于所有屏幕)，缩放时保持完整质量，并且通常尺寸非常小。<strong class="ir ht">使用矢量绘图工具可以对你的APK瘦身产生巨大的影响。</strong></p><p id="d5ed" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该格式与SVG相似，使用相同的路径格式，但是<em class="kr"> VectorDrawables </em>有自己的XML模式。这意味着在使用SVG之前需要对其进行转换，而且并不是所有的SVG特性都受支持。您可以使用Android Studio中的<a class="ae jn" href="http://developer.android.com/tools/help/vector-asset-studio.html" rel="noopener ugc nofollow" target="_blank"> Vector Asset Studio </a>进行转换。</p><p id="8024" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你想保持你的应用程序向后兼容，我们的Gradle Android插件也可以提供帮助。将以下几行添加到您的构建中，选择将从<em class="kr"> drawable/ </em>文件夹中的<em class="kr"> VectorDrawables </em>生成png的密度:</p><h2 id="bbe6" class="ks jp hs bd jq kt ku kv ju kw kx ky jy ja kz la kc je lb lc kg ji ld le kk lf bi translated">build.gradle</h2><pre class="lg lh li lj fd lk ll lm ln aw lo bi"><span id="1c91" class="ks jp hs ll b fi lp lq l lr ls">android {<br/>    ...<br/>    defaultConfig {<br/>        //if you're using Android Gradle plugin &lt; 2.0.0<br/>        //omit the vectorDrawables block<br/>        vectorDrawables {<br/>            generatedDensities = ["mdpi", "hdpi", "xhdpi"]<br/>        }<br/>    }<br/>}</span></pre><blockquote class="lt lu lv"><p id="76eb" class="ip iq kr ir b is it iu iv iw ix iy iz lw jb jc jd lx jf jg jh ly jj jk jl jm ha bi translated"><strong class="ir ht">注意</strong>:如果不想生成png，只需将generatedDensities设置为空列表:generatedDensities = []。</p></blockquote><p id="978e" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您使用多APK 来只为棒棒糖之前的构建生成图像，您可以将<em class="kr"> vectorDrawables </em>块放在<a class="ae jn" rel="noopener" href="/@wkalicinski/smallerapk-part-5-multi-apk-through-product-flavors-e069759f19cd">产品风味定义中。</a></p><h1 id="2807" class="jo jp hs bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">VectorDrawableCompat</h1><p id="637d" class="pw-post-body-paragraph ip iq hs ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">AppCompat版本23.2现在包括VectorDrawables的向后兼容实现。使用这种方法，只需对布局和代码做最小的改动，您就可以放弃在所有版本的应用程序中包含生成的png(在API 7+上)。</p><p id="35b5" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Chris Banes在他的文章中解释了<a class="ae jn" rel="noopener" href="/@chrisbanes/appcompat-v23-2-age-of-the-vectors-91cbafa87c88">如何使用VectorDrawableCompat，或者你可以在这里</a>查看新支持库<a class="ae jn" href="http://android-developers.blogspot.co.uk/2016/02/android-support-library-232.html" rel="noopener ugc nofollow" target="_blank">中的这个和其他特性。</a></p></div><div class="ab cl lz ma go mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ha hb hc hd he"><p id="41c5" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">继续阅读第8部分:本地图书馆，从APK打开。</p></div></div>    
</body>
</html>