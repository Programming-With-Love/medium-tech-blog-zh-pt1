<html>
<head>
<title>Creating a chat solution using Rocket.chat and React — Part 1</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Rocket.chat和React创建聊天解决方案—第1部分</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/creating-a-chat-solution-using-rocket-chat-and-react-part-1-2dd4335b19f3?source=collection_archive---------4-----------------------#2020-10-02">https://medium.com/quick-code/creating-a-chat-solution-using-rocket-chat-and-react-part-1-2dd4335b19f3?source=collection_archive---------4-----------------------#2020-10-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/3658633b371f60db583ef22b22f152aa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*es-wH2THoE9EjRdn"/></div></div></figure><p id="f9b6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">从很长一段时间来看，聊天一直是任何产品最重要的部分之一。无论是考虑个人信息应用程序、客户服务聊天解决方案还是像Slack这样的团队管理产品</p><p id="225a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">找到一个正确的聊天解决方案可能会很棘手，因为你会发现很多用不同技术创建聊天的教程，但它们几乎没有可扩展性。</p><p id="3940" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以选择预构建的解决方案，但大多数都是付费的，或者在可扩展性或灵活性方面有一定的限制。</p><p id="287c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果我必须给你一行介绍，那么<a class="ae jn" href="https://rocket.chat/" rel="noopener ugc nofollow" target="_blank"> Rocket Chat </a>是Slack的开源替代品。</p><p id="82ae" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，你可以在任何平台上下载他们的应用程序，并像Slack一样使用它，但事实上，它的开源给了它更多的灵活性，其中之一是你可以在完全的管理控制下运行你的火箭聊天服务器</p><p id="3258" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最棒的是rocket chat为你提供了Rest和socket API来创建一个健壮的聊天应用。</p><p id="a3e8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这意味着您可以使用rocket chat作为聊天服务器，并在其上构建您的前端客户端。这就是我们接下来要做的。</p><p id="9db1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果还不清楚，让我再解释一下一般步骤。我们将</p><ol class=""><li id="89a2" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">在本地主机上运行我们的Rocket聊天服务器</li><li id="d65e" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">使用React连接服务器并与之交互</li></ol><p id="46f8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该过程的第一步是在您的本地机器上安装Rocket chat服务器。下面是根据安装的操作系统在本地机器上运行rocket chat服务器的方法</p><h1 id="a4cb" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">Linux操作系统</h1><p id="e083" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">在Linux上运行它非常简单。只需安装火箭聊天使用快照使用给定的链接<a class="ae jn" href="https://docs.rocket.chat/installation/snaps" rel="noopener ugc nofollow" target="_blank">火箭聊天快照安装</a></p><h1 id="e53c" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">mac 操作系统</h1><p id="8fff" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">最简单的方法是使用docker-compose。只需在您的系统中安装docker和docker-compose，然后按照给定的步骤操作</p><ol class=""><li id="609e" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">只需创建一个名为<strong class="ir hi"> docker-compose.yml </strong>的文件，并将这个链接<a class="ae jn" href="https://github.com/RocketChat/Rocket.Chat/blob/develop/docker-compose.yml" rel="noopener ugc nofollow" target="_blank"> Rocket chat docker-compose文件</a>的内容复制到新创建的文件中</li><li id="a205" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">从创建文件的同一个目录中运行命令<strong class="ir hi"> docker-compose up -d </strong></li><li id="63b4" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">它会自动获取最新的docker图像，然后运行它</li><li id="035c" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">您可以查看docker仪表板中运行的docker容器</li></ol><h1 id="9a8a" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">Windows操作系统</h1><p id="aa00" class="pw-post-body-paragraph ip iq hh ir b is la iu iv iw lb iy iz ja lc jc jd je ld jg jh ji le jk jl jm ha bi translated">对于windows，您还有多种选择</p><ol class=""><li id="a74c" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">如果你安装了windows professional，你可以像运行mac os一样运行docker</li><li id="8fe7" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">你也可以使用VMware运行Ubuntu，然后按照上面给出的步骤安装rocket chat</li></ol><p id="0659" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以在前端使用任何东西，只要您可以进行API调用并连接到WebSocket服务器</p><p id="0fa0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">正如你可以从标题本身猜到的，我们将使用react作为前端客户端</p><p id="c1c3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我创建了一个小的React挂钩，用于本地连接到WebSocket服务器，并以最独特的方式命名(useWebsocket … lol)</p><p id="06f1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">所以事不宜迟，这里是完整的钩子</p><p id="0998" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">代码非常简单明了。但是让我补充一些额外的要点</p><ol class=""><li id="8989" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">我们创建了一个状态变量connected来表示与rocket聊天服务器的连接状态</li><li id="c2d2" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">我们使用ref而不是state来存储WebSocket对象，因为ref不会像state那样在发生变化时触发重新呈现</li><li id="6edf" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">有些任务需要在onopen处理程序中执行，这就是我们留出空间的原因</li><li id="7da0" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">经过一些定制后，上面这段代码可以用于连接任何WebSocket服务器</li><li id="283b" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">如果您在运行rocket chat服务器时遇到任何问题，您可以在评论中询问，或者从他们的文档<a class="ae jn" href="https://docs.rocket.chat/installation" rel="noopener ugc nofollow" target="_blank"> Rocket chat安装指南</a>中查看在您的机器上运行服务器的其他方式</li></ol><p id="299f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">就这样</strong>在本系列的下一部分，我们将了解Rocket chat的流程以及连接到服务器所需的所有API。</p><p id="9453" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在那之前，快乐编码😃</p></div><div class="ab cl lf lg go lh" role="separator"><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk ll"/><span class="li bw bk lj lk"/></div><div class="ha hb hc hd he"><p id="ea6b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="lm">原载于2020年10月2日https://codingshogun.com</em><a class="ae jn" href="https://codingshogun.com/connect-to-rocket-chat-server-using-react-part-1/" rel="noopener ugc nofollow" target="_blank"><em class="lm"/></a><em class="lm">。</em></p></div></div>    
</body>
</html>