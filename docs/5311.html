<html>
<head>
<title>Deploy your apps to Oracle Cloud using PaaS Service Manager CLI on Docker</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Docker上的PaaS Service Manager CLI将您的应用部署到Oracle云</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/quick-start-docker-ized-paas-service-manager-cli-f54eaf4ebcc7?source=collection_archive---------1-----------------------#2017-09-26">https://medium.com/oracledevs/quick-start-docker-ized-paas-service-manager-cli-f54eaf4ebcc7?source=collection_archive---------1-----------------------#2017-09-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="52ae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本博客将带您快速浏览Oracle <a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/java-cloud/pscli/toc.htm" rel="noopener ugc nofollow" target="_blank"> PaaS服务管理器命令行界面</a>(简称<strong class="ig hi"> PSM CLI </strong>)，它提供命令行界面(CLI)来管理各种服务的生命周期(例如Oracle应用容器云、Oracle大数据云计算版、Oracle Java云、Oracle事件中心云等)。)在Oracle公共云中</p><p id="2051" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">具体来说，我们将探讨针对<a class="ae jc" href="https://cloud.oracle.com/en_US/application-container-cloud" rel="noopener ugc nofollow" target="_blank"> Oracle应用容器云</a> (ACCS)的PSM CLI功能(对于所有PSM ACCS命令，<a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/java-cloud/pscli/accs-commands.html" rel="noopener ugc nofollow" target="_blank">请参考文档</a>)</p><ul class=""><li id="6ff2" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">我们将首先将PSM CLI与我们的应用程序对接，一旦我们的对接容器准备就绪，</li><li id="626d" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">执行各种生命周期活动—部署、检查运行状况、停止、删除等。</li></ul><blockquote class="jr js jt"><p id="412f" class="ie if ju ig b ih ii ij ik il im in io jv iq ir is jw iu iv iw jx iy iz ja jb ha bi translated"><a class="ae jc" rel="noopener" href="/oracledevs/creating-an-oracle-cloud-infrastructure-cli-toolkit-docker-image-35be0ca71aa">这里有一篇博客</a>，它是这篇文章的灵感/触发点！</p></blockquote><h1 id="1a11" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">Dockerfile文件概述</h1><p id="c442" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">这是Dockerfile文件以及正在发生的事情的摘要…</p><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="d5b4" class="lk jz hh lg b fi ll lm l ln lo">#1<br/>FROM <strong class="lg hi">python:3.6.2-alpine3.6</strong></span><span id="2fa8" class="lk jz hh lg b fi lp lm l ln lo">#2<br/>ARG <strong class="lg hi">USERNAME</strong><br/>ARG <strong class="lg hi">PASSWORD</strong><br/>ARG <strong class="lg hi">IDENTITY_DOMAIN</strong><br/>ARG <strong class="lg hi">PSM_USERNAME</strong><br/>ARG <strong class="lg hi">PSM_PASSWORD</strong><br/>ARG <strong class="lg hi">PSM_REGION</strong><br/>ARG <strong class="lg hi">PSM_OUTPUT</strong></span><span id="a663" class="lk jz hh lg b fi lp lm l ln lo">#3<br/>WORKDIR “/oracle-cloud-psm-cli/”</span><span id="727a" class="lk jz hh lg b fi lp lm l ln lo">#4<br/>RUN apk add --update curl &amp;&amp; \<br/> rm -rf /var/cache/apk/*</span><span id="b794" class="lk jz hh lg b fi lp lm l ln lo">#5<br/>RUN curl -X GET -u $<strong class="lg hi">USERNAME</strong>:$<strong class="lg hi">PASSWORD </strong>-H X-ID-TENANT-NAME:$<strong class="lg hi">IDENTITY_DOMAIN </strong><a class="ae jc" href="https://psm.us.oraclecloud.com/paas/core/api/v1.1/cli/$IDENTITY_DOMAIN/client" rel="noopener ugc nofollow" target="_blank">https://psm.us.oraclecloud.com/paas/core/api/v1.1/cli/$<strong class="lg hi">IDENTITY_DOMAIN</strong>/client</a> -o psmcli.zip</span><span id="bc6d" class="lk jz hh lg b fi lp lm l ln lo">#6<br/>RUN pip3 install -U psmcli.zip</span><span id="b103" class="lk jz hh lg b fi lp lm l ln lo">#7<br/>RUN echo -e “$<strong class="lg hi">PSM_USERNAME</strong>\n$<strong class="lg hi">PSM_PASSWORD</strong>\n$<strong class="lg hi">PSM_PASSWORD</strong>\n$<strong class="lg hi">IDENTITY_DOMAIN</strong>\n$<strong class="lg hi">PSM_REGION</strong>\n$<strong class="lg hi">PSM_OUTPUT</strong>” | psm setup</span><span id="c636" class="lk jz hh lg b fi lp lm l ln lo">#8<br/>COPY accs-hello-world/target/accs-hello-world.zip .<br/>COPY accs-hello-world/deployment.json .</span><span id="078f" class="lk jz hh lg b fi lp lm l ln lo">#9<br/>CMD [“/bin/sh”]</span></pre><ol class=""><li id="95b6" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb lq jj jk jl bi translated">base<a class="ae jc" href="https://hub.docker.com/r/library/python/" rel="noopener ugc nofollow" target="_blank">Docker Python image</a>—<a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/java-cloud/pscli/performing-prerequisite-tasks-command-line-interface-1.html" rel="noopener ugc nofollow" target="_blank">PaaS CLI需要Python </a></li><li id="dd3a" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb lq jj jk jl bi translated">声明参数(稍后将在<code class="du lr ls lt lg b">docker build</code>中使用)</li><li id="d020" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb lq jj jk jl bi translated">设置工作目录</li><li id="a692" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb lq jj jk jl bi translated">安装<code class="du lr ls lt lg b">cURL</code></li><li id="5a60" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb lq jj jk jl bi translated">下载PSM CLI ( <a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/java-cloud/pscli/downloading-cli-using-rest-api.html" rel="noopener ugc nofollow" target="_blank">使用REST API </a>)</li><li id="051f" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb lq jj jk jl bi translated">安装Python包</li><li id="5f35" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb lq jj jk jl bi translated"><a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/java-cloud/pscli/configuring-command-line-interface-1.html" rel="noopener ugc nofollow" target="_blank">自举</a> PSM</li><li id="bf45" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb lq jj jk jl bi translated">包括示例应用程序(zip)和<code class="du lr ls lt lg b">deployment.json</code></li><li id="67bd" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb lq jj jk jl bi translated">指定Docker容器启动时要执行的默认命令</li></ol><h1 id="9a4a" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">让我们开始吧…</h1><p id="c868" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">此处提供了<a class="ae jc" href="https://github.com/abhirockzz/accs-psm-cli-docker" rel="noopener ugc nofollow" target="_blank">应用程序..为了开始，</a></p><h2 id="c41e" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">克隆git存储库</h2><p id="cbaf" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated"><code class="du lr ls lt lg b">git clone <a class="ae jc" href="https://github.com/abhirockzz/accs-psm-cli-docker.git" rel="noopener ugc nofollow" target="_blank">https://github.com/abhirockzz/accs-psm-cli-docker.git</a></code></p><h2 id="f847" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">构建应用程序</h2><p id="d826" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated"><code class="du lr ls lt lg b">mvn clean install </code>将使用<code class="du lr ls lt lg b">accs-hello-world.zip</code>创建一个目标目录——这是将被推送到云的工件</p><h2 id="8e33" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">构建Docker映像</h2><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="a0d2" class="lk jz hh lg b fi ll lm l ln lo">docker build --build-arg <strong class="lg hi">USERNAME</strong>=”foo@bar.com” --build-arg <strong class="lg hi">PASSWORD</strong>=”foobared" --build-arg <strong class="lg hi">IDENTITY_DOMAIN</strong>=”foodomain" --build-arg <strong class="lg hi">PSM_USERNAME</strong>=”foo@bar.com” --build-arg <strong class="lg hi">PSM_PASSWORD</strong>=”foobared" --build-arg <strong class="lg hi">PSM_REGION</strong>=”us” --build-arg <strong class="lg hi">PSM_OUTPUT</strong>=”json” -t psm-cli .</span></pre><p id="0039" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">执行<code class="du lr ls lt lg b">docker images</code> —您应该会在图像列表中看到<code class="du lr ls lt lg b">psm-cli</code></p><h2 id="2443" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">启动Docker容器</h2><p id="3354" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated"><code class="du lr ls lt lg b">docker run --rm -it psm-cli</code> —你将降落在贝壳里..现在是时候执行我们的命令了</p><h2 id="b95a" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">健全性检查</h2><p id="6a53" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated"><code class="du lr ls lt lg b">psm --version</code></p><p id="e6b2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="ju">响应</em> : <code class="du lr ls lt lg b">PSM CLI Client — version 1.1.16</code></p><h2 id="d622" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">将应用部署到Oracle应用容器云</h2><pre class="lb lc ld le fd lf lg lh li aw lj bi"><span id="3541" class="lk jz hh lg b fi ll lm l ln lo">psm accs <strong class="lg hi">push </strong>-n HelloWorldApp -r java -s hourly -d deployment.json -p accs-hello-world.zip</span></pre><figure class="lb lc ld le fd mi er es paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="er es mh"><img src="../Images/8e06d9773e441a27df17cc9ad9e6bd20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*15SmBUX9xfO32wlF8moEyw.png"/></div></div></figure><h2 id="2d9c" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">检查(部署)作业状态</h2><p id="3d50" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">我们将使用由<strong class="ig hi">推送</strong>操作返回的<em class="ju">任务ID </em>(上面高亮显示)</p><p id="bdb2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du lr ls lt lg b">psm accs <strong class="ig hi">operation-status</strong> -j 14988917</code></p><figure class="lb lc ld le fd mi er es paragraph-image"><div class="er es mp"><img src="../Images/feafbcaaaee7c7aa450c86702e079e38.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*AUThqHWSSijTHm3N3equgg.png"/></div></figure><h2 id="4b62" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">申请信息</h2><p id="dacf" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated"><code class="du lr ls lt lg b">psm accs <strong class="ig hi">app </strong>-n HelloWorldApp</code></p><figure class="lb lc ld le fd mi er es paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="er es mq"><img src="../Images/eb6d0429993f94fad6d815a12a3691ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-2cQ5n6Gix5TYb-RxoR0ng.png"/></div></div></figure><h2 id="ff42" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">访问应用程序URL</h2><p id="149b" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">示例应用程序使用一个简单的基于<a class="ae jc" href="https://github.com/abhirockzz/accs-psm-cli-docker/blob/master/accs-hello-world/src/main/java/com/oracle/cloud/accs/helloworld/Bootstrap.java#L18" rel="noopener ugc nofollow" target="_blank"> JDK的</a>T10】</p><p id="2496" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du lr ls lt lg b">curl <a class="ae jc" href="https://helloworldapp-ocloud109.apaas.us2.oraclecloud.com/" rel="noopener ugc nofollow" target="_blank">https://helloworldapp-&lt;identity-domain&gt;.apaas.us2.oraclecloud.com/</a></code>将返回类似<code class="du lr ls lt lg b">Hello @ Fri Sep 01 13:37:39 UTC 2017 from 10.199.34.135</code>的内容</p><h2 id="30de" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">健康检查</h2><p id="a2c7" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated"><code class="du lr ls lt lg b">psm accs check-health -n HelloWorldApp</code></p><figure class="lb lc ld le fd mi er es paragraph-image"><div class="er es mr"><img src="../Images/4e8761ee5d6f198b65eb4d5b23071fa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*Kh0ITtNuo1uoR7HLMIzRsg.png"/></div></figure><h2 id="16d7" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">停止应用程序</h2><p id="44a7" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated"><code class="du lr ls lt lg b">psm accs stop -n HelloWorldApp</code> —流程将被触发</p><p id="7efa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用作业ID(与之前相同)进行跟踪，并在一段时间后使用<code class="du lr ls lt lg b">psm accs app -n HelloWorldApp</code>检查状态</p><figure class="lb lc ld le fd mi er es paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="er es ms"><img src="../Images/8ef057af6088eac22bb1463505c0086c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ejm2ozj-yZe7NOH74KnFIw.png"/></div></div></figure><h2 id="b35d" class="lk jz hh bd ka lu lv lw ke lx ly lz ki ip ma mb km it mc md kq ix me mf ku mg bi translated">删除应用程序</h2><p id="878e" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated"><code class="du lr ls lt lg b">psm accs delete -n HelloWorldApp</code> —使用作业ID跟踪进度</p><figure class="lb lc ld le fd mi er es paragraph-image"><div role="button" tabindex="0" class="mj mk di ml bf mm"><div class="er es mt"><img src="../Images/b088423e3e3301bd8d960eabfa5d266a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nev5sWk-fDjgaOx3pBH1gg.png"/></div></div></figure><p id="950d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">那都是乡亲们！</p></div><div class="ab cl mu mv go mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ha hb hc hd he"><h1 id="f87b" class="jy jz hh bd ka kb nb kd ke kf nc kh ki kj nd kl km kn ne kp kq kr nf kt ku kv bi translated">不要忘记…</h1><ul class=""><li id="61c5" class="jd je hh ig b ih kw il kx ip ng it nh ix ni jb ji jj jk jl bi translated">查看Oracle应用容器云的<a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/app-container-cloud/create-first-applications.html" rel="noopener ugc nofollow" target="_blank">教程—每个运行时都有一些内容！</a></li><li id="e9c3" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated"><a class="ae jc" href="http://bit.ly/2gR3nrV" rel="noopener ugc nofollow" target="_blank">其他关于应用容器云的博客</a></li></ul><blockquote class="jr js jt"><p id="81e7" class="ie if ju ig b ih ii ij ik il im in io jv iq ir is jw iu iv iw jx iy iz ja jb ha bi translated"><em class="hh">本文所表达的观点是我个人的观点，不一定代表甲骨文的观点。</em></p></blockquote></div></div>    
</body>
</html>