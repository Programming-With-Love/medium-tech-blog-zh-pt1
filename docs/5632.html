<html>
<head>
<title>Machine Learning in Digital Process Automation — Part I</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">数字过程自动化中的机器学习——第一部分</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/machine-learning-in-digital-process-automation-part-i-7c7468e23804?source=collection_archive---------6-----------------------#2019-07-17">https://medium.com/oracledevs/machine-learning-in-digital-process-automation-part-i-7c7468e23804?source=collection_archive---------6-----------------------#2019-07-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="e91f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是关于如何在<a class="ae jc" href="https://cloud.oracle.com/OIC" rel="noopener ugc nofollow" target="_blank"> Oracle集成云</a>的数字流程自动化和集成应用中使用<a class="ae jc" href="https://www.oracle.com/data-science/machine-learning/what-is-machine-learning/" rel="noopener ugc nofollow" target="_blank">机器学习</a> (ML)的系列文章的第一篇。对于本系列，我们将混合使用Oracle云服务，并逐步实施几个用例。第一篇文章(这一篇)关注于为我们的第一个用例设置机器学习环境和实现机器学习模型。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/2ae1dc23301321f9f59f391bb48728ee.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mH4R2zg48_6AFqwz4Y1kiA.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Flow (Image © Ralf Mueller)</figcaption></figure><h1 id="c488" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">示例使用案例</h1><p id="103d" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">审批工作流是流程自动化应用程序非常流行的示例，因为审批在任何组织中都广泛使用，例如</p><ul class=""><li id="08a9" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated">在员工入职流程中批准雇用员工</li><li id="fed3" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">在采购过程中批准购买设备</li><li id="a028" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">在差旅管理流程中审批差旅费</li><li id="34f7" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">等等。等等。</li></ul><p id="73a9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个清单可以一直列下去。但是对于本系列，我们从销售中选取一个用例，并希望实现以下场景</p><ul class=""><li id="a15b" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated">客户的订单来自公司的销售代表</li><li id="63b9" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">除其他数据外，订单具有以下相关信息<br/> -订单金额<br/> -订单创建的季度(1、2、3、4) <br/> -客户状态(绿色、黄色、红色)<br/> -客户要求的折扣(0–99%)</li><li id="aa41" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">根据订单信息，我们希望<strong class="ig hi">预测</strong>该订单是否应该由给定季度的销售副总裁批准。</li></ul><p id="d04d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是任何公司的典型情况，销售代表从客户那里获得订单，销售副总裁必须决定是否批准该订单。尤其是到了第四季度末，这对于销售副总裁来说会变得相当有压力，因此这里的一些自动化将显著改善销售流程，并有助于处理更多订单。</p><p id="094d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文中，我们将展示如何使用<a class="ae jc" href="https://cloud.oracle.com/en_US/datawarehouse" rel="noopener ugc nofollow" target="_blank"> Oracle自治数据仓库</a>建立机器学习(ML)环境，并为我们的用例实现一个ML模型。</p><h1 id="0360" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">Oracle自治数据仓库</h1><p id="f497" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated"><a class="ae jc" href="https://cloud.oracle.com/en_US/datawarehouse" rel="noopener ugc nofollow" target="_blank"> Oracle自治数据仓库</a> (ADW)是一项Oracle云基础设施原生服务。这是一个完全托管的云服务，具有机器学习和<a class="ae jc" href="https://www.oracle.com/artificial-intelligence/what-is-ai/" rel="noopener ugc nofollow" target="_blank">人工智能</a>功能，可以非常简单地供应数据仓库，快速轻松地加载数据，并使用内置的基于网络的工具(如笔记本电脑)查询数据。<a class="ae jc" href="http://zeppelin.apache.org/" rel="noopener ugc nofollow" target="_blank">基于Apache Zeppelin </a>的ML笔记本和<a class="ae jc" href="https://www.oracle.com/database/technologies/datawarehouse-bigdata/advanced-analytics.html" rel="noopener ugc nofollow" target="_blank"> Oracle Advanced Analytics </a>一起为数据科学家提供了一个全面的ML工具包，用于加载和可视化数据、训练和测试ML模型，并使用简单的markdown语言记录ML用例。</p><h1 id="128a" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">初始用户设置</h1><p id="2225" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">有关ADW的设置和管理，请参见本文的附录。建议在ADW设置用户。ADW用户不同于OCI用户，因为ADW用户实际上是在ADW拥有模式的数据库用户。在ADW创建用户后，用户可能希望运行几个安装SQL脚本。这些在系统中只需要一次，然后可以在每个笔记本或SQL脚本中使用。关于如何在ADW创建用户，请参见<a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/omlug/administer-oracle-machine-learning.html#GUID-6899BA4F-C845-4364-9E28-9C267363CB15" rel="noopener ugc nofollow" target="_blank">在Oracle Machine Learning </a>中创建用户账户。要在ADW创建SQL脚本，使用您的用户和密码登录，然后从用户主页打开<em class="lk">运行SQL脚本</em></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ll"><img src="../Images/76a2b043f64125df27246460ddf643e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V20yLfdohPqh6QhwPyc2lw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">ADW User home page</figcaption></figure><p id="cc56" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将打开一个SQL脚本暂存，您可以在其中按段落组织SQL脚本，然后单独执行每个段落或执行整个脚本暂存。我建议按段落组织工作，这样你可以稍后再回来，只在需要时执行适当的段落。</p><h2 id="aef1" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">创建凭据</h2><p id="63ea" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">由于我们稍后将与Oracle Cloud Storage合作，将数据从云存储加载到ADW，因此我们需要在ADW设置用户凭据，以使用ADW包DBMS_CLOUD的过程连接到云存储。为此，在ADW中打开一个SQL脚本并执行以下命令</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ma mb l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Create Credential to connect to Cloud Storage from ML notebooks</figcaption></figure><p id="f47c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">参见<a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/user/dbmscloud-reference.html#GUID-742FC365-AA09-48A8-922C-1987795CF36A" rel="noopener ugc nofollow" target="_blank"> DBMS_CLOUD。CREATE_CREDENTIAL </a>过程和使用授权令牌的<a class="ae jc" href="https://docs.cloud.oracle.com/iaas/Content/Identity/Tasks/managingcredentials.htm#two" rel="noopener ugc nofollow" target="_blank">了解详情。</a></p><h2 id="6e9d" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">创建将BLOB写入DATA_PUMP_DIR的过程</h2><p id="f2f3" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">接下来，我们将创建一个方便的过程，用于将序列化的ML模型作为二进制BLOB转储到ADW的DATA_PUMP_DIR。我们稍后会解释为什么需要这样做。为此，将以下内容添加到您的SQL草稿栏并执行它</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ma mb l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Procedure to write a BLOB to a directory on ADW Database</figcaption></figure><h1 id="edac" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">实施销售审批机器学习模型</h1><p id="93eb" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">我们现在准备在ADW使用ML笔记本来实现这个用例。为此，请转到主页，单击笔记本，然后单击创建</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es mc"><img src="../Images/d4306ecf3554e1fc09929098991746bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:366/format:webp/1*BbHtoz85mE-Q2n9NJOSdVA.png"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Creation of ML notebook</figcaption></figure><p id="1c7c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将打开一个新的空ML笔记本，如下所示:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es md"><img src="../Images/c140130206d0a1d7179f0a24167eac55.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*frrgzDGfuvRR7my3nC9wfQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Empty ML notebook for Order Approvals Classification</figcaption></figure><h2 id="3ad3" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">ML笔记本使用</h2><p id="fb4d" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">ML笔记本被组织在所谓的段落中。每个段落由以下实现类型之一实现</p><ul class=""><li id="caed" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated"><strong class="ig hi"> %md </strong> <br/>这是标记语言，可用于记录ML笔记本。标清中的链接可用于链接到外部资源。</li><li id="9fa1" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">% script</strong>T9】这是针对PL/SQL语言的SQL脚本。在ADW的后续版本中，将增加对Python的支持。</li><li id="bd75" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi"> %sql </strong></li></ul><p id="eddf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi me translated">实现类型应该在每段的第一行指定。段落可以单独执行。此外，整个ML笔记本可能会被执行。为此，笔记本上和每一段上都有一个小小的<em class="lk">播放</em>按钮。有关ML笔记本及其使用的更多信息，请参见<a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/omlug/get-started-oracle-machine-learning.html#GUID-2AEC56A4-E751-48A3-AAA0-0659EDD639BA" rel="noopener ugc nofollow" target="_blank">使用Oracle机器学习</a>。阅读关于Apache Zeppelin笔记本电脑的一般知识，以更好地理解它们的用法和最佳实践，可能也是有用的。</p><p id="46d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面的部分是以一种方式组织的，你可以将示例代码复制粘贴到你的ML笔记本的新段落中。在这一段结束时，你将有一个运行的ML笔记本，它为订单分类创建了一个ML模型。</p><h2 id="1fdf" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">1.证明文件</h2><p id="a819" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">记录您的用例是一个很好的实践，为此，我们从一个标记(%md)段落开始ML笔记本</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ma mb l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Paragraph to document the use case</figcaption></figure><h2 id="d9d3" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">2.清除</h2><p id="04c1" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">接下来，我们将清理这个用例上下文中的任何现有数据。这将使ML笔记本可重复。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ma mb l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Cleanup data for this use case</figcaption></figure><h2 id="629a" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">3.创建数据库对象</h2><p id="8c7c" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">清理之后，我们将在ADW数据库中创建所需的对象。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ma mb l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Create tables required for this use case</figcaption></figure><h2 id="e3bf" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">4.从云存储中加载数据</h2><p id="24e7" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">接下来，我们将把云存储中的数据加载到表SALES_DATA中。此表包含我们稍后用来训练ML模型的训练集。ADW提供了多种将数据加载到ADW数据库的选项，详见<a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/user/load-data.html#GUID-1351807C-E3F7-4C6D-AF83-2AEEADE2F83E" rel="noopener ugc nofollow" target="_blank">使用自主数据仓库</a>加载数据。在我们的用例中，数据在云存储中是一个. CSV文件，我们可以使用<a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/user/dbmscloud-reference.html#GUID-9428EA51-5DDD-43C2-B1F5-CD348C156122" rel="noopener ugc nofollow" target="_blank"> DBMS_CLOUD将它加载到数据库中。COPY_DATA </a>程序</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ma mb l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Copy data from .CSV file on Cloud Object Storage to table SALES_DATA</figcaption></figure><p id="296e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里是云对象存储上的文件sales_data_export.csv</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mn"><img src="../Images/b5e847558be64ba979f906a7800d904c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QmaEVRcXY1ZUXE4ZcQ4uAg.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">sales_data_export.csv on Object Storage</figcaption></figure><h2 id="3b40" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">5.分割数据</h2><p id="80ea" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">对于任何机器学习练习，将数据分成两部分都是很好的做法</p><ol class=""><li id="2249" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb mo lc ld le bi translated"><strong class="ig hi">训练数据</strong> <br/>训练数据用于实际训练机器学习模型</li><li id="e95f" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb mo lc ld le bi translated"><strong class="ig hi">测试数据</strong></li></ol><p id="c1b8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这可以在SQL中通过在SALES_DATA表的顶部创建两个视图来方便地实现，一个视图用于训练数据，另一个视图用于测试数据</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ma mb l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Split SALES_DATA into training and test data by using views</figcaption></figure><p id="c587" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这里有一个警告:虽然上面的SQL非常方便且富有表现力，但是这种分割方法不应该用于大型训练集，因为SQL MINUS操作并不真正具有高性能。相反，应该结合使用案例id和ora_hash函数来分割数据集。</p><h2 id="dc38" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">6.为GLM算法准备设置</h2><p id="0f9b" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">对于这个用例，我们将使用一个<a class="ae jc" href="https://docs.oracle.com/en/database/oracle/oracle-database/19/dmcon/generalized-linear-models.html#GUID-5E59530F-EBD9-414E-8C8B-63F8079772CE" rel="noopener ugc nofollow" target="_blank">广义线性模型</a> (GLM) ML算法，这是一个用于<a class="ae jc" href="https://docs.oracle.com/en/database/oracle/oracle-database/19/dmcon/classification.html#GUID-3D51EC47-E686-4468-8F49-A27B5F8E8FE4" rel="noopener ugc nofollow" target="_blank">分类</a>模型的算法。为了在ADW使用GLM，我们需要参数化算法的设置。默认情况下，自动数据准备是打开的，不需要显式设置。为了完整起见，下面只显示了它。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ma mb l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Settings for GLM algorithm</figcaption></figure><h2 id="a5da" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">7.显示数据</h2><p id="1525" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">我们现在准备使用GLM分类算法为存储在表SALES_DATA中的数据训练一个机器学习模型。在此之前，我们查询表SALES_DATA并显示一些图形。为此，我们可以创建一个新段落，并选择%sql作为实现，然后将以下sql添加到该段落中</p><pre class="je jf jg jh fd mp mq mr ms aw mt bi"><span id="d8c3" class="lm ju hh mq b fi mu mv l mw mx">%sql</span><span id="7f1f" class="lm ju hh mq b fi my mv l mw mx">select CustomerStatus, Quarter, OrderAmount from sales_data_train</span></pre><p id="70d3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在用户选择对查询结果使用条形图可视化后，将显示类似下面的内容。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es mz"><img src="../Images/63da890e24bf588cbd35b43ee88bf18d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U5OCjo9LeJDuERw2x3mwjw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Example bar chart from data in view SALES_DATA_TRAIN</figcaption></figure><p id="4c6c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请随意使用笔记本中可用的可视化和各种图表实现。上面的条形图显示了状态为绿色、红色和黄色的客户在四个季度的订单金额分布。</p><h2 id="27c4" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">8.训练机器学习模型</h2><p id="02fc" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">现在是时候根据视图SALES_DATA_TRAIN中的数据来训练ML模型了</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ma mb l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Creation of ML model SALES_CLASSIFICATION_GLM_V2</figcaption></figure><p id="78a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这可能需要更多的解释，完整的细节请参见<a class="ae jc" href="https://docs.oracle.com/en/database/oracle/oracle-database/19/dmprg/model-creation.html#GUID-03C85895-C9C3-4003-AFB4-C36E36B60CE8" rel="noopener ugc nofollow" target="_blank"> DBMS_DATA_MINING。CREATE_MODEL </a>文档和Oracle高级分析<a class="ae jc" href="https://docs.oracle.com/en/database/oracle/oracle-database/19/dmprg/index.html" rel="noopener ugc nofollow" target="_blank">数据挖掘用户指南</a>。</p><ul class=""><li id="120c" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated">我们创建了一个名为销售_分类_GLM_V2的模型</li><li id="dfc1" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">该模型的挖掘功能是分类</li><li id="5827" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">培训数据存储在视图SALES_DATA_TRAIN中</li><li id="46fa" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">目标列(我们稍后想要预测的属性)是批准</li><li id="09e2" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">算法的设置存储在表GLM设置中</li></ul><h2 id="881e" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">9.显示预测结果</h2><p id="ad25" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">既然我们已经建立了模型，我们可以检查模型的质量。在本文中，我们只展示了针对视图SALES_DATA_TEST的一些预测结果。</p><p id="0052" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用以下内容在你的ML笔记本上创建一个新段落</p><pre class="je jf jg jh fd mp mq mr ms aw mt bi"><span id="8591" class="lm ju hh mq b fi mu mv l mw mx">%sql</span><span id="339c" class="lm ju hh mq b fi my mv l mw mx">select prediction(SALES_CLASSIFICATION_GLM_V2 USING *) pr,<br/>       Quarter,<br/>       OrderAmount<br/>  from sales_data_test<br/>  order by pr ;</span></pre><p id="4d13" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">可能会显示这样的内容</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es na"><img src="../Images/768ab62361275afe736c0939fe8ddc3f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eRg0lur1NdnjH0mtphfxvw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Result of predicting APPROVALS using data from view SALES_DATA_TEST</figcaption></figure><p id="88a6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">不出所料，对于批准属性，大多数预测是“是”，只有一小部分是“否”。在现实世界中，人们会使用不同的算法构建更多的分类模型，然后比较每个算法的结果，然后为用例选择最佳算法。然而，这将远远超出本系列的目的，实际上可能是一个系列本身。</p><p id="0f71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ADW为以下项目提供了大量的ML技术和算法</p><ul class=""><li id="6396" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated">分类</li><li id="2b9f" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">回归</li><li id="0255" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">异常检测</li><li id="60df" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">使聚集</li><li id="7e8a" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">联合</li><li id="546f" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">时间序列</li><li id="c674" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">特征选择和回归</li></ul><p id="4a7c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">关于一套完整的算法，请参见<a class="ae jc" href="https://docs.oracle.com/en/database/oracle/oracle-database/19/dmcon/algorithms.html#GUID-B901A29B-218C-4F37-91E0-AA94631364E3" rel="noopener ugc nofollow" target="_blank">算法</a>。</p><h2 id="86ac" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">10.将ML模型写入目录</h2><p id="bd69" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">现在我们已经为用例建立了一个ML模型，我们可以把它的序列化版本作为BLOB写到ADW的一个目录中。本段将利用我们最初在用户设置时创建的过程<em class="lk"> write_serialized_model </em>。此过程可在其他ML笔记本中使用，因此我们没有在此处创建它，而是作为设置Data Scientist ML笔记本环境的一部分。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ma mb l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Writing serialized ML model to ADW DATA_PUMP_DIR</figcaption></figure><h2 id="9066" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">11.将ML模型转移到云对象存储</h2><p id="3948" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">作为ML笔记本的最后一步，我们将把ML模型的序列化版本从ADW的DATA_PUMP_DIR目录转移到云对象存储。为此，我们使用<a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/autonomous-data-warehouse-cloud/user/dbmscloud-reference.html#GUID-716F0DE7-C669-477E-8AB8-EA42E41ACB12" rel="noopener ugc nofollow" target="_blank"> DBMS_CLOUD。PUT_OBJECT </a>程序。</p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="ma mb l"/></div><figcaption class="jp jq et er es jr js bd b be z dx">Transfer serialized ML model from DATA_PUMP_DIR to Cloud Object Storage</figcaption></figure><p id="a663" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们现在完成了ML笔记本。运行这个ML笔记本的结果是一个存储在云对象存储上的机器学习模型<em class="lk">sales classification v2 . mod</em>。在本系列的下一部分，我们将展示如何使用这个机器学习模型进行评分。</p><h1 id="0c6a" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">附录:自治数据仓库管理</h1><p id="6759" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">在本章中，我们将重点介绍ADW的一些管理功能，这些功能对于使用ADW实例可能很有价值。</p><h2 id="9dc2" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">ADW数据库连接和服务控制台</h2><p id="cf46" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">ADW提供了某些可以从OCI自治数据仓库控制台访问的管理功能。为此，ADW的管理员可能希望从OCI控制台中选择适当的ADW实例，如下所示</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nb"><img src="../Images/e49c08b081e2cdaff6fce696843c8108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WDYeSuKJAiZwCQvojv5F0A.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">List of Autonomous Data Warehouse instances</figcaption></figure><h2 id="c924" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">正在下载客户端凭据</h2><p id="6e7e" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">使用SQL*Developer的全套功能来处理ADW数据库非常方便。在18.1及更高版本中，SQL*Developer支持从客户端凭据文件(也称为Wallet)创建数据库连接。要下载ADW数据库的客户机身份证明，请在OCI控制台中打开ADW实例详细信息页面，然后单击<em class="lk">数据库连接</em></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nc"><img src="../Images/3e6522df0171bf587ff7fc3bf1285c2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*G9snW4NghdZ5cN8-ztwKFA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Details of Autonomous Data Warehouse Instance</figcaption></figure><p id="9977" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将打开另一个对话框，您可以从中下载. zip存档文件</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nd"><img src="../Images/9e6a71ee95bbb639f1f63b6efe973da3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ITZyBF8JSl-MlqA6u_X9Vg.png"/></div></div></figure><p id="442e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">的。zip存档包含通过TLS上的JDBC连接到ADW数据库所需的客户端凭证和密钥。可以在SQL*Developer中使用该归档文件来创建数据库连接。</p><h2 id="63da" class="lm ju hh bd jv ln lo lp jz lq lr ls kd ip lt lu kh it lv lw kl ix lx ly kp lz bi translated">服务控制台</h2><p id="183b" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">服务控制台显示了ADW实例的一些运行时统计数据，包括CPU利用率和平均SQL语句响应时间等。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ne"><img src="../Images/b78dbbc73062397ba53b4f4c3e8748bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FacZpaCjFbA7wKG2vMGytQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">ADW Service Console</figcaption></figure><p id="43f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ADW的所有管理任务都可以通过服务控制台的<em class="lk">管理</em>菜单来完成</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es nf"><img src="../Images/f8dee64b991eecc66a9095767c2a75ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6Y5kDOiI8Dzhd1DjIrzVnw.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">ADW Administration Tasks</figcaption></figure><p id="f7e5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi me translated"><span class="l mf mg mh bm mi mj mk ml mm di">综上</span>，管理控制台允许ADW管理员进行以下操作</p><ul class=""><li id="ad6d" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated"><strong class="ig hi">下载客户端凭证</strong> <br/>这与您可以从ADW实例的实例详细信息页面中执行的操作基本相同，如上所述</li><li id="59c9" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">设置资源管理规则</strong> <br/>这允许您为ADW消费群设置高、中、低计算资源限制</li><li id="b288" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">设置管理员密码</strong></li><li id="5679" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">管理Oracle ML用户</strong> <br/>允许ADW管理员向自治数据仓库添加用户。这些用户本质上是数据库用户(而不是由OCI身份管理系统管理的用户)。为了使用ADW的ML笔记本功能，应该创建一个用户</li><li id="e788" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">下载Oracle Instant Client </strong> <br/>这将重定向到<a class="ae jc" href="https://www.oracle.com/technetwork/database/database-technologies/instant-client/overview/index.html" rel="noopener ugc nofollow" target="_blank"> Oracle Instant Client下载</a>页面，您可以从该页面下载适用于您选择的平台和操作系统的Oracle Instant Client。instant client可让您通过SQL*Plus、imp/exp等著名的Oracle客户端工具访问ADW数据库。</li><li id="60dc" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated"><strong class="ig hi">向甲骨文发送反馈</strong></li></ul><h1 id="65b0" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">承认</h1><p id="9ef3" class="pw-post-body-paragraph ie if hh ig b ih kr ij ik il ks in io ip kt ir is it ku iv iw ix kv iz ja jb ha bi translated">本系列文章是与Oracle机器学习(OML)团队一年多合作的成果。因此，我要感谢Boriana Milenova和她的开发团队对机器学习的大力支持、及时交付和宝贵对话。感谢来自<a class="ae jc" href="https://twitter.com/OracleAnalytics" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">@</strong>OracleAnalytics</a>的产品经理<a class="ng nh ge" href="https://medium.com/u/8a5bd14977df?source=post_page-----7c7468e23804--------------------------------" rel="noopener" target="_blank"> Charlie Berger </a>对OML和集成云的推广，以及有机会在各种场合展示这项工作。最后，非常感谢流程运行时团队和集成云UI团队的苏曼·甘塔在集成云中支持OML。</p></div></div>    
</body>
</html>