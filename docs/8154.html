<html>
<head>
<title>Introduction to React Native Navigation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">React本机导航简介</h1>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/introduction-to-react-native-navigation-83ac8903ddad?source=collection_archive---------2-----------------------#2022-11-02">https://medium.com/walmartglobaltech/introduction-to-react-native-navigation-83ac8903ddad?source=collection_archive---------2-----------------------#2022-11-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/96782d10f1eec4a1435395d43edbdafc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1mobEqq8zFFArVfLrH-EsA.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Image from <a class="ae it" href="https://www.pexels.com/photo/forced-perspective-photography-of-cars-running-on-road-below-smartphone-799443/" rel="noopener ugc nofollow" target="_blank">Matheus Bertelli</a></figcaption></figure><p id="7b5f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi js translated">在本文中，我们将学习如何在React Native中实现导航。我们将使用<a class="ae it" href="https://reactnavigation.org/" rel="noopener ugc nofollow" target="_blank"> React Navigation </a>，它是用于向React本地应用程序添加路由和导航的官方库。我们将讨论以下导航类型以及如何实现它们:</p><ul class=""><li id="e20b" class="kb kc hh iw b ix iy jb jc jf kd jj ke jn kf jr kg kh ki kj bi translated">堆栈导航</li><li id="e841" class="kb kc hh iw b ix kk jb kl jf km jj kn jn ko jr kg kh ki kj bi translated">标签导航</li><li id="ece0" class="kb kc hh iw b ix kk jb kl jf km jj kn jn ko jr kg kh ki kj bi translated">抽屉导航</li></ul></div><div class="ab cl kp kq go kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ha hb hc hd he"><h2 id="3edd" class="kw kx hh bd ky kz la lb lc ld le lf lg jf lh li lj jj lk ll lm jn ln lo lp lq bi translated"><strong class="ak">先决条件</strong></h2><ul class=""><li id="db86" class="kb kc hh iw b ix lr jb ls jf lt jj lu jn lv jr kg kh ki kj bi translated">React的基础</li><li id="861a" class="kb kc hh iw b ix kk jb kl jf km jj kn jn ko jr kg kh ki kj bi translated"><a class="ae it" href="https://reactnavigation.org/docs/getting-started" rel="noopener ugc nofollow" target="_blank"> React导航设置</a></li></ul></div><div class="ab cl kp kq go kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ha hb hc hd he"><figure class="lx ly lz ma fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lw"><img src="../Images/cb144db82f9541b30d69564c93a526af.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FWsrWa7lzMLb6OBWaryBCg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Stack Navigation Illustration</figcaption></figure><p id="2390" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> <em class="mb">堆栈导航</em> </strong>在这种导航中，维护的是一堆屏幕。每次我们访问一个屏幕，它就被推到堆栈中，按back会从堆栈中弹出该项，显示最后一个屏幕。这种类型的导航的一个很好的例子是网页，我们在网站的不同页面之间导航，并按back移动到最后一页。在我们继续之前，我们需要添加堆栈导航所需的库。</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="0adc" class="kw kx hh md b fi mh mi l mj mk">npm install @react-navigation/native-stack</span></pre><h2 id="cbe5" class="kw kx hh bd ky kz la lb lc ld le lf lg jf lh li lj jj lk ll lm jn ln lo lp lq bi translated"><strong class="ak"> <em class="ml">我们怎样才能创建屏幕？</em> </strong></h2><p id="dfea" class="pw-post-body-paragraph iu iv hh iw b ix lr iz ja jb ls jd je jf mm jh ji jj mn jl jm jn mo jp jq jr ha bi translated">要在应用程序中添加可导航的屏幕，我们需要创建一个基本结构，如下面的代码示例所示，包括用<code class="du mp mq mr md b">createNativeStackNavigator()</code>初始化堆栈导航器，并在<code class="du mp mq mr md b">NavigationContainer</code>中使用它。</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="ms mt l"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Stack Navigation Structure</figcaption></figure><p id="0073" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在<code class="du mp mq mr md b">&lt;Stack.Navigator&gt;</code>里面是我们需要放置所有屏幕的地方。每个屏幕都带有<code class="du mp mq mr md b">&lt;Stack.Screen&gt;</code>标签，我们将传递两个道具<code class="du mp mq mr md b">name</code>和<code class="du mp mq mr md b">component</code>，其中<code class="du mp mq mr md b">name</code>是组件的名称，确保它是唯一的，并避免使用特殊字符和空格，<code class="du mp mq mr md b">component</code>是我们要添加到屏幕的组件。下面给出的是添加了两个屏幕的代码。默认情况下，<code class="du mp mq mr md b">&lt;Stack.Navigator&gt;</code>中最先出现的屏幕将首先对用户可见，或者换句话说，它将是堆栈中已经被推到那里的屏幕，例如在下面的代码中<code class="du mp mq mr md b">Screen1</code>将是可见的。</p><blockquote class="mu mv mw"><p id="0129" class="iu iv mb iw b ix iy iz ja jb jc jd je mx jg jh ji my jk jl jm mz jo jp jq jr ha bi translated"><strong class="iw hi">提示:</strong>我们也可以使用<code class="du mp mq mr md b">Stack.Navigator</code>上的<code class="du mp mq mr md b">initialRouteName</code>道具来指定默认屏幕。</p></blockquote><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="ms mt l"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Adding Screens to Stack Navigator</figcaption></figure><p id="106d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">该应用程序现在看起来像下面给出的图像，我们看到我们的默认屏幕(屏幕1)，目前没有办法导航到屏幕2。我们将在下一节讨论如何做到这一点。</p><figure class="lx ly lz ma fd ii er es paragraph-image"><div class="er es na"><img src="../Images/204c415d32993ae33aa5b12c26439f8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:500/format:webp/1*OcoxK8WUzTNNgIcIUINhGA.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Screen1 is visible as the default screen</figcaption></figure><h2 id="c783" class="kw kx hh bd ky kz la lb lc ld le lf lg jf lh li lj jj lk ll lm jn ln lo lp lq bi translated">我们如何在屏幕间穿梭？</h2><p id="f967" class="pw-post-body-paragraph iu iv hh iw b ix lr iz ja jb ls jd je jf mm jh ji jj mn jl jm jn mo jp jq jr ha bi translated">现在我们的应用程序中有两个屏幕。让我们看看如何在这些屏幕之间移动，或者我们可以说如何将新屏幕推到堆栈中。React导航附带了一个名为<code class="du mp mq mr md b">navigate()</code>的方法来实现这一点，该方法在<code class="du mp mq mr md b">navigation</code>道具中可用，该道具会自动添加到每个屏幕中。在<code class="du mp mq mr md b">navigate()</code>方法中，我们只需要通过我们想要导航到的屏幕的<code class="du mp mq mr md b">name</code>。这个<code class="du mp mq mr md b">name</code>与我们在上一节中设置的<code class="du mp mq mr md b">name</code>相同。让我们看一个代码示例，其中我们在<code class="du mp mq mr md b">Screen1</code>中有一个按钮导航到<code class="du mp mq mr md b">Screen2</code>，在后者中有一个按钮导航到前者。</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="ms mt l"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Navigating between screens</figcaption></figure><figure class="lx ly lz ma fd ii er es paragraph-image"><div class="er es nb"><img src="../Images/ea8dc27f66fc39276a2b6828ce4eed7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*LB6XfE_-FWER27br3sJgJA.gif"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Animation of navigation between screens</figcaption></figure><p id="64ff" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">您可以看到，点击<code class="du mp mq mr md b">Go to Screen 2</code>会将我们带到<code class="du mp mq mr md b">Screen2</code>，此外，在<code class="du mp mq mr md b">Screen2</code>的左上角有一个后退按钮可以返回。<code class="du mp mq mr md b">Screen2</code>中的<code class="du mp mq mr md b">Go to Screen 1</code>按钮将我们带回到<code class="du mp mq mr md b">Screen1</code>，其行为与按下后退按钮相同，这由React导航库处理。它不是把新的<code class="du mp mq mr md b">Screen1</code>压入堆栈，而是回顾堆栈的历史，如果找到就导航到所需的页面。此外，以类似的方式，如果要导航的页面已经在堆栈中，它将继续弹出堆栈，直到到达该页面。如果您的要求是创建新屏幕并推入堆栈，而不是回顾历史堆栈，请使用<code class="du mp mq mr md b">navigation.push("name")</code>而不是<code class="du mp mq mr md b">navigation.navigate("name")</code>。</p><blockquote class="mu mv mw"><p id="4c47" class="iu iv mb iw b ix iy iz ja jb jc jd je mx jg jh ji my jk jl jm mz jo jp jq jr ha bi translated"><strong class="iw hi">注意:</strong> React导航提供两种类型的堆栈导航器API，我们使用<a class="ae it" href="https://reactnavigation.org/docs/native-stack-navigator" rel="noopener ugc nofollow" target="_blank">原生堆栈</a>而不是<a class="ae it" href="https://reactnavigation.org/docs/stack-navigator/" rel="noopener ugc nofollow" target="_blank">堆栈</a>，因为前者使用原生导航原语来提供更好的性能。如果你想要更多的可定制性，选择后者。</p></blockquote></div><div class="ab cl kp kq go kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ha hb hc hd he"><figure class="lx ly lz ma fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lw"><img src="../Images/f529ce483cf4ab336a04e096dee0c6c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U6wIPv2INeZyCCddrM8haQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Tab Navigation Illustration</figcaption></figure><p id="3cef" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">另一种常用的导航方式是在页面上设置选项卡并来回导航。选项卡可以在屏幕的顶部或底部。React导航为选项卡提供了三种不同的API:</p><ul class=""><li id="47b1" class="kb kc hh iw b ix iy jb jc jf kd jj ke jn kf jr kg kh ki kj bi translated"><a class="ae it" href="https://reactnavigation.org/docs/bottom-tab-navigator" rel="noopener ugc nofollow" target="_blank">底部标签</a>屏幕底部的一个简单标签栏。</li><li id="2aee" class="kb kc hh iw b ix kk jb kl jf km jj kn jn ko jr kg kh ki kj bi translated"><a class="ae it" href="https://reactnavigation.org/docs/material-bottom-tab-navigator" rel="noopener ugc nofollow" target="_blank">材料底部标签</a>屏幕底部以材料设计为主题的标签栏。</li><li id="c386" class="kb kc hh iw b ix kk jb kl jf km jj kn jn ko jr kg kh ki kj bi translated"><a class="ae it" href="https://reactnavigation.org/docs/material-top-tab-navigator" rel="noopener ugc nofollow" target="_blank">材料顶部标签</a>屏幕顶部的一个以材料设计为主题的标签栏。</li></ul><p id="5ad3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在本文中，我们将只查看底部的选项卡，以了解如何使用选项卡导航器。从安装底部标签所需的软件包开始:</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="bd96" class="kw kx hh md b fi mh mi l mj mk">npm install @react-navigation/bottom-tabs</span></pre><p id="de66" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">就像堆栈导航一样，我们必须遵循下面示例代码中给出的结构。我们必须使用<code class="du mp mq mr md b">createBottomTabNavigator()</code>初始化导航器，然后在<code class="du mp mq mr md b">NavigationContainer</code>中使用它。如示例所示，所有选项卡屏幕都在<code class="du mp mq mr md b">Tab.Navigator</code>中。</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="ms mt l"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Tab Navigation Structure</figcaption></figure><p id="c19c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们为选项卡创建简单的组件，<code class="du mp mq mr md b">Tab1</code>和<code class="du mp mq mr md b">Tab2</code>，每个组件都需要在<code class="du mp mq mr md b">&lt;Tab.Navigator&gt;</code>元素中。我们需要用<code class="du mp mq mr md b">Tab.Screen</code>创建每个选项卡，并以与堆栈示例中类似的方式传递<code class="du mp mq mr md b">name</code>和<code class="du mp mq mr md b">component</code>。</p><blockquote class="mu mv mw"><p id="e3c0" class="iu iv mb iw b ix iy iz ja jb jc jd je mx jg jh ji my jk jl jm mz jo jp jq jr ha bi translated">您也可以像在Stack Navigator中一样使用<code class="du mp mq mr md b">navigation.navigate()</code>方法。</p></blockquote><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="ms mt l"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Adding Tabs to Tab navigator</figcaption></figure><p id="3c98" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们来看一个动画，看看我们的项目在当前代码变化的情况下是怎样的。单击按钮上的选项卡名称应该会改变渲染组件，如下图动画所示。</p><figure class="lx ly lz ma fd ii er es paragraph-image"><div class="er es nb"><img src="../Images/4cce9390811c70b317b6f6a6ef90d57f.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*pTYu0yUldnFtnj2kLITTMA.gif"/></div></figure><blockquote class="mu mv mw"><p id="09a1" class="iu iv mb iw b ix iy iz ja jb jc jd je mx jg jh ji my jk jl jm mz jo jp jq jr ha bi translated">您还可以使用每个<code class="du mp mq mr md b">Tab.Screen</code>上的<code class="du mp mq mr md b">options</code>支柱上的<code class="du mp mq mr md b">tabBarIcon</code>键自定义每个选项卡的图标，或者通过将<code class="du mp mq mr md b">tabBarIcon</code>传递给<code class="du mp mq mr md b">Tab.Navigator</code>上的<code class="du mp mq mr md b">screenOptions</code>来自定义每个选项卡的图标，为了保持代码示例简单，我将这种探索留给您自己。</p></blockquote></div><div class="ab cl kp kq go kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ha hb hc hd he"><figure class="lx ly lz ma fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lw"><img src="../Images/a6b7e7de3ed0b489f498159fe0970578.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*x4ltoW9t277kXfZK_fGskQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Drawer Navigation</figcaption></figure><p id="ce8e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">抽屉</strong>可以说是一种特殊类型的拉环，其中改变拉环的按钮活在左侧(或右侧)的抽屉中。要在项目中使用抽屉，从安装依赖项开始。</p><pre class="lx ly lz ma fd mc md me mf aw mg bi"><span id="1290" class="kw kx hh md b fi mh mi l mj mk">npm install @react-navigation/drawer</span></pre><p id="d9d1" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">此外，要完成设置，请遵循此处<a class="ae it" href="https://reactnavigation.org/docs/drawer-navigator/#installation" rel="noopener ugc nofollow" target="_blank">给出的说明</a>。建议在完成所有依赖项安装后，运行<code class="du mp mq mr md b">ios</code>文件夹中的<code class="du mp mq mr md b">pod install</code>。</p><p id="6a56" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">就像前面已经讨论过的其他导航器一样，Drawer也有类似的结构。我们使用<code class="du mp mq mr md b">createDrawerNavigator()</code>来初始化导航器，并在<code class="du mp mq mr md b">&lt;NavigationContainer&gt;</code>中使用它，如下面的代码示例所示。</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="ms mt l"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Drawer Navigation Structure</figcaption></figure><p id="3793" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">同样，我们将使用<code class="du mp mq mr md b">Drawer.Navigator</code>放置所有不同的屏风/抽屉组件。现在让我们看看一个有三个屏幕的完整抽屉。每个画面都会配有<code class="du mp mq mr md b">Drawer.Screen</code>和<code class="du mp mq mr md b">name</code>和<code class="du mp mq mr md b">component</code>道具。在每个屏幕上，我们也有一个在它们之间导航的链接，或者，我们可以使用抽屉来改变屏幕。下面给出的是代码和输出。</p><figure class="lx ly lz ma fd ii"><div class="bz dy l di"><div class="ms mt l"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Adding Drawer Components to Drawer Navigator</figcaption></figure><figure class="lx ly lz ma fd ii er es paragraph-image"><div class="er es nb"><img src="../Images/f727216a75c3305a250ed21a9adffaf7.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*SJJnvGC9zoRBlDAHEw8kOA.gif"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Drawer Navigation Animation</figcaption></figure></div><div class="ab cl kp kq go kr" role="separator"><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku kv"/><span class="ks bw bk kt ku"/></div><div class="ha hb hc hd he"><p id="e34a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">资源:</strong></p><ul class=""><li id="15f8" class="kb kc hh iw b ix iy jb jc jf kd jj ke jn kf jr kg kh ki kj bi translated"><a class="ae it" href="https://reactnavigation.org/" rel="noopener ugc nofollow" target="_blank">反应原生导航文档</a></li></ul></div></div>    
</body>
</html>