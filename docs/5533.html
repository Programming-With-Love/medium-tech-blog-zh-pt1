<html>
<head>
<title>Finding Symmetry</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">寻找对称</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/finding-symmetry-27944c74b6d4?source=collection_archive---------0-----------------------#2018-11-27">https://medium.com/oracledevs/finding-symmetry-27944c74b6d4?source=collection_archive---------0-----------------------#2018-11-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="514f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过对称进化Eclipse系列的设计。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/e8120c817050057578e71ddd2e238c1e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*V20XrVJpyEhsPGcGFyDlwQ.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Got Eclipse Collections stickers?</figcaption></figure><h1 id="1f3c" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">找到缺失的类型</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kr"><img src="../Images/dad2e78119a18037d6696b962d03f736.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Gs6oL36CsN69d4aJPmBsag.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">New Eclipse Collections types on the left add to the existing JDK types on the right</figcaption></figure><p id="8c56" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Eclipse Collections有一大堆你在JDK找不到的新类型。这些类型为开发人员提供了他们需要的有用功能。支持额外的容器类型需要额外的成本，尤其是当您考虑到跨这些类型支持基本类型时。</p><p id="76d7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些缺失的类型很重要。它们帮助Eclipse集合为迭代模式返回更好的返回类型。</p><h1 id="0a05" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">类型对称</h1><p id="ffa5" class="pw-post-body-paragraph ie if hh ig b ih ks ij ik il kt in io ip ku ir is it kv iv iw ix kw iz ja jb ha bi translated">Eclipse集合在对象和原始类型之间有很好的对称性。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kx"><img src="../Images/24d19aae0431ef85d85d91175eac1e85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fqryL65gBdF6lRMdrY2G2w.png"/></div></div></figure><p id="4e6d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">缺少的容器类型是固定大小的基元数组、基元<code class="du ky kz la lb b">BiMaps</code>、基元<code class="du ky kz la lb b">Multimaps</code>和一些基元<code class="du ky kz la lb b">Intervals</code>(现在只有<code class="du ky kz la lb b">IntInterval</code>存在)。字符串实际上只应该作为<code class="du ky kz la lb b">char</code>或<code class="du ky kz la lb b">int</code>的原始不可变集合存在。Eclipse集合有<code class="du ky kz la lb b">CharAdapter</code>、<code class="du ky kz la lb b">CodePointAdapter</code>和<code class="du ky kz la lb b">CodePointList</code>，它们提供了一组丰富的与<code class="du ky kz la lb b">Strings</code>协同工作的迭代协议。</p><h1 id="6357" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">API对称性</h1><p id="24f0" class="pw-post-body-paragraph ie if hh ig b ih ks ij ik il kt in io ip ku ir is it kv iv iw ix kw iz ja jb ha bi translated">仍然有很多事情可以做，以改善对象和原始API之间的对称性。有些API不添加新类型就无法复制。例如，用当前的<code class="du ky kz la lb b">Multimap</code>实现来实现<code class="du ky kz la lb b">groupBy</code>的原语版本是不太理想的，因为唯一的选择是将原语<code class="du ky kz la lb b">Lists</code>、<code class="du ky kz la lb b">Sets</code>或<code class="du ky kz la lb b">Bags</code>装箱。由于Eclipse集合中有大量的API，我将只关注一些主要的API，它们目前在对象和原语集合之间没有对称性。原语<code class="du ky kz la lb b">Iterables</code>中缺少以下方法。</p><ol class=""><li id="f8fc" class="lc ld hh ig b ih ii il im ip le it lf ix lg jb lh li lj lk bi translated"><code class="du ky kz la lb b">groupBy</code> / <code class="du ky kz la lb b">groupByEach</code></li><li id="c3ce" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated"><code class="du ky kz la lb b">countBy</code> / <code class="du ky kz la lb b">countByEach</code></li><li id="b2be" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated"><code class="du ky kz la lb b">aggregateBy</code> / <code class="du ky kz la lb b">aggregateInPlaceBy</code></li><li id="b83a" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated"><code class="du ky kz la lb b">partition</code></li><li id="d740" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated"><code class="du ky kz la lb b">reduce</code> / <code class="du ky kz la lb b">reduceInPlace</code></li><li id="dc29" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated"><code class="du ky kz la lb b">toMap</code></li><li id="14f5" class="lc ld hh ig b ih ll il lm ip ln it lo ix lp jb lh li lj lk bi translated"><strong class="ig hi">所有的</strong> <code class="du ky kz la lb b"><strong class="ig hi">With</strong></code> <strong class="ig hi">方法</strong></li></ol><p id="a9a2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在原始集合上所有缺失的API中，最微妙但最明显的区别可能是缺少<strong class="ig hi"/><code class="du ky kz la lb b"><strong class="ig hi">With</strong></code><strong class="ig hi"/>方法。尚不清楚“<code class="du ky kz la lb b">With</code>”方法对于原始集合是否像对于对象集合一样有用。关于对象集合API上的“<code class="du ky kz la lb b">With</code>”方法的一些用法示例，请阅读我的博客<a class="ae jc" rel="noopener" href="/@donraab/preposition-preference-1f1c709b098b">“介词偏好”</a>。“<code class="du ky kz la lb b">With</code>”方法允许更多的API与方法引用一起使用。</p><p id="12d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是一些“<code class="du ky kz la lb b">With</code>”方法的签名在<code class="du ky kz la lb b">IntList</code>上的样子。</p><pre class="je jf jg jh fd lq lb lr ls aw lt bi"><span id="79f8" class="lu ju hh lb b fi lv lw l lx ly">&lt;P&gt; boolean anySatisfyWith(IntObjectPredicate&lt;? super P&gt; predicate, P parameter);</span><span id="2666" class="lu ju hh lb b fi lz lw l lx ly">&lt;P&gt; boolean allSatisfyWith(IntObjectPredicate&lt;? super P&gt; predicate, P parameter);</span><span id="d90c" class="lu ju hh lb b fi lz lw l lx ly">&lt;P&gt; boolean noneSatisfyWith(IntObjectPredicate&lt;? super P&gt; predicate, P parameter);</span><span id="6ae9" class="lu ju hh lb b fi lz lw l lx ly">&lt;P&gt; IntList selectWith(IntObjectPredicate&lt;? super P&gt; predicate, P parameter);</span><span id="0166" class="lu ju hh lb b fi lz lw l lx ly">&lt;P&gt; IntList rejectWith(IntObjectPredicate&lt;? super P&gt; predicate, P parameter);</span></pre><h1 id="03b1" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">救援的默认方法</h1><p id="4eac" class="pw-post-body-paragraph ie if hh ig b ih ks ij ik il kt in io ip ku ir is it kv iv iw ix kw iz ja jb ha bi translated">Java 8中添加的默认方法对增加我们的对象和原始API之间的对称性有很大的帮助。在Eclipse Collections 10.x中，我们将能够更多地利用默认方法，因为我们现在能够在接口中使用容器工厂类。下面的例子展示了如何使用<code class="du ky kz la lb b">Bags</code>工厂优化<code class="du ky kz la lb b">countBy</code>和<code class="du ky kz la lb b">countByWith</code>的默认实现。</p><pre class="je jf jg jh fd lq lb lr ls aw lt bi"><span id="7513" class="lu ju hh lb b fi lv lw l lx ly">default &lt;V&gt; Bag&lt;V&gt; countBy(Function&lt;? super T, ? extends V&gt; function)<br/>{<br/>    return this.countBy(function, Bags.<strong class="lb hi"><em class="ma">mutable</em></strong>.empty());<br/>}</span><span id="9761" class="lu ju hh lb b fi lz lw l lx ly">default &lt;V, P&gt; Bag&lt;V&gt; countByWith(Function2&lt;? super T, ? super P, ? extends V&gt; function, P parameter)<br/>{<br/>    return this.countByWith(function, parameter,<br/>        Bags.<strong class="lb hi"><em class="ma">mutable</em></strong>.empty());<br/>}</span></pre><h1 id="11fe" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">关于Eclipse集合API设计的更多信息</h1><p id="6f49" class="pw-post-body-paragraph ie if hh ig b ih ks ij ik il kt in io ip ku ir is it kv iv iw ix kw iz ja jb ha bi translated">要了解更多关于<a class="ae jc" href="http://www.eclipse.org/collections/" rel="noopener ugc nofollow" target="_blank"> Eclipse集合</a> API的设计，请查看这个<a class="ae jc" href="http://eclipse.github.io/eclipse-collections-kata/api-design/#/" rel="noopener ugc nofollow" target="_blank">幻灯片和下面的演示。</a></p><figure class="je jf jg jh fd ji"><div class="bz dy l di"><div class="mb mc l"/></div></figure><p id="43cc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你还可以在这篇博文的<a class="ae jc" rel="noopener" href="/oracledevs/visualizing-eclipse-collections-646dad9533a9">中找到一组Eclipse集合库的可视化。</a></p><p id="f7e5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://github.com/eclipse/eclipse-collections" rel="noopener ugc nofollow" target="_blank"> <em class="ma">月食收藏</em> </a> <em class="ma">为</em> <a class="ae jc" href="https://github.com/eclipse/eclipse-collections/blob/master/CONTRIBUTING.md" rel="noopener ugc nofollow" target="_blank"> <em class="ma">投稿开放</em> </a> <em class="ma">。如果你喜欢这个库，你可以在GitHub上让我们知道。</em></p></div></div>    
</body>
</html>