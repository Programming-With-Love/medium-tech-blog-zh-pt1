<html>
<head>
<title>Predict My Message — Stop Hateful Comments Online with Perspective API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">预测我的消息—使用透视API在线停止仇恨言论</h1>
<blockquote>原文：<a href="https://medium.com/mendix/predict-my-message-stop-hateful-comments-online-with-google-perspective-api-165ad7a0eda2?source=collection_archive---------2-----------------------#2022-09-20">https://medium.com/mendix/predict-my-message-stop-hateful-comments-online-with-google-perspective-api-165ad7a0eda2?source=collection_archive---------2-----------------------#2022-09-20</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/2c7627cc8cc5ff24ffb5b1b402863204.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wBN4hSbTGaFXOpfIuUDuNg.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Predict My Message — Stopping Hateful Comments Online (Banner Image)</figcaption></figure><div class=""/><div class=""><h2 id="9a4d" class="pw-subtitle-paragraph jg ii ij bd b jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx ek translated">沟通对地球上的每一件事和每一个人都至关重要，因为我们都相互依存。有效的沟通有助于我们变得亲切，和平共处。然而，同样重要的是，我们在交流时要非常细致，不要用我们的言语给别人造成伤害。你不必搜索很长时间，你就会发现有毒的评论和仇恨言论在线。人工智能和情感分析的最新进展让我们能够在这篇可恨的演讲发表之前阻止它。</h2></div><h2 id="1fa8" class="jy jz ij bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">问候！</h2><p id="d616" class="pw-post-body-paragraph kw kx ij bd b ky kz jk la lb lc jn ld kj le lf lg kn lh li lj kr lk ll lm ln hn dt translated">大家好，庄家</p><p id="900f" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">我希望你们都做得很好。这是我在Mendix社区平台上发布的第一个博客。我非常兴奋和高兴地与世界各地的制造商分享我的知识和经验！</p><p id="b288" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">首先，让我介绍一下自己；我的名字是维贾亚博拉提。我是门第克斯高级认证顾问，很荣幸能与APAC最大的门第克斯技术服务提供商MX techies的一些最优秀的人才共事！现在，让我们进入博客没有进一步的麻烦。</p><h2 id="71b3" class="jy jz ij bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">接下来</h2><p id="4953" class="pw-post-body-paragraph kw kx ij bd b ky kz jk la lb lc jn ld kj le lf lg kn lh li lj kr lk ll lm ln hn dt translated">以下是我将在本博客中讨论的内容的简要总结:</p><p id="168b" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">1)沟通的演变以及为什么健康的对话非常重要。</p><p id="d0e9" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">2)Perspective API以及如何在Mendix中使用Perspective API的服务。</p><p id="f888" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">泰米尔有句老话:</p><blockquote class="lu lv lw"><p id="c959" class="kw kx lx bd b ky lo jk la lb lp jn ld ly lq lf lg lz lr li lj ma ls ll lm ln hn dt translated">“即使没有其他可以克制，一个必须控制自己的舌头；如果没有，</p><p id="2a7f" class="kw kx lx bd b ky lo jk la lb lp jn ld ly lq lf lg lz lr li lj ma ls ll lm ln hn dt translated">他会因为他的话所造成的伤害而遭受痛苦。"</p><p id="b96c" class="kw kx lx bd b ky lo jk la lb lp jn ld ly lq lf lg lz lr li lj ma ls ll lm ln hn dt translated"><em class="ij">——古代泰米尔诗人蒂鲁瓦勒瓦。</em></p></blockquote><h2 id="6fc0" class="jy jz ij bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">传播演进述略</h2><p id="f2d9" class="pw-post-body-paragraph kw kx ij bd b ky kz jk la lb lc jn ld kj le lf lg kn lh li lj kr lk ll lm ln hn dt translated">开始的时候，谈话是面对面的。在适当的时候，他们改为书面和电话沟通。在数字革命之后，电子邮件和视频聊天通信成为当今的主流。</p><p id="96a2" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">你现在可能已经听说了，某个巨大的社交媒体公司目前正在元宇宙开展工作，这被认为是未来的沟通！</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div class="fe ff mb"><img src="../Images/a40aa8238767e511872c30ff2558e11e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/1*nW3ayAS5N3y8psYI6wB6VA.gif"/></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Mark Zuckerberg — Metaverse concept animation</figcaption></figure><h2 id="de31" class="jy jz ij bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">什么是元宇宙？</h2><blockquote class="lu lv lw"><p id="3681" class="kw kx lx bd b ky lo jk la lb lp jn ld ly lq lf lg lz lr li lj ma ls ll lm ln hn dt translated"><em class="ij">“在未来主义和科幻小说中，元宇宙是互联网作为一个单一的、通用的、沉浸式的虚拟世界的假想迭代，其由虚拟现实和增强现实耳机的使用来促进。通俗地说，元宇宙就是一个专注于社交联系的3D虚拟世界网络。”——</em><a class="ae lt" href="https://en.wikipedia.org/wiki/Metaverse" rel="noopener ugc nofollow" target="_blank">维基百科 </a></p></blockquote><h2 id="5217" class="jy jz ij bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">为什么健康的对话很重要？</h2><p id="4c3c" class="pw-post-body-paragraph kw kx ij bd b ky kz jk la lb lc jn ld kj le lf lg kn lh li lj kr lk ll lm ln hn dt translated">举个例子，让我们看看游戏。谁不爱玩游戏？20世纪90年代，像《超级马里奥》(Super Mario)、《门》(Contra)等街机游戏相当流行。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div class="fe ff mg"><img src="../Images/6c5ec9d566bc9b9282673b9bd8a20071.png" data-original-src="https://miro.medium.com/v2/resize:fit:910/1*3JruBQEXlASSiaa7H9OB6A.gif"/></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Arcade game — Contra</figcaption></figure><p id="5267" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">我们没有办法和朋友们聊天。我们只能与游戏中的人物互动。随着游戏的发展，我们可以通过文本、语音聊天等方式与朋友们一起玩游戏。</p><p id="a014" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">像Valorant和PUBG mobile这样的热门游戏都有一个举报有毒玩家的选项。职业游戏玩家通过Twitch、YouTube等流媒体平台播放内容。很多孩子都在看游戏视频。根据一项调查，16至24岁的孩子经常观看游戏流。在群聊中，有些人可能会发送有毒信息。</p><p id="85a4" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">在这种情况下，每个观看视频的人，包括孩子，都会受到这些有害信息的影响。在大多数流媒体平台上，频道主持人都会留意这些“巨魔”。但是，我们不能指望一个版主把大部分时间都用来当看门狗。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div class="fe ff mh"><img src="../Images/b0b9da75774ad0f11db71ecd46fbceef.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/1*fgSOlQeQgKUaQEu73Ri7mQ.gif"/></div></figure><p id="76a6" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">如果我们可以选择自动删除或屏蔽有毒聊天，这对流媒体和观众都有很大的帮助。这就是透视图API的用武之地。</p><h2 id="767f" class="jy jz ij bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated"><strong class="ak">Mendix中的透视图API:</strong></h2><p id="5046" class="pw-post-body-paragraph kw kx ij bd b ky kz jk la lb lc jn ld kj le lf lg kn lh li lj kr lk ll lm ln hn dt translated">Perspective API使用机器学习模型来识别辱骂性评论。它将根据评论返回毒性分数。如果毒性分数很高，我们可以认为该评论是有毒的。让我们深入了解集成，以及我们如何在Mendix中实现这一点。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/3592c518d4eb12ce35af78d1d56e61f2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SemiuO_PeBxYZJVBRKVGlQ.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Predict My Chat Mendix application Chat Interface</figcaption></figure><p id="2d30" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">这里我已经使用Mendix创建了示例聊天界面应用程序。为了使用Perspective API的服务，我们需要一个API键来继续。在现阶段，我们的努力对于取得预期结果至关重要。甚至爱迪生在1000次不成功的尝试后也找到了灯泡。对吗？</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div class="fe ff mj"><img src="../Images/465d29de44715b3192e6bd0038706f4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*KTWATWlLc9COL-0lfRORuA.jpeg"/></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Thomas Alva Edison Motivation Quotes</figcaption></figure><p id="7c13" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">https://en.wikipedia.org/wiki/Thomas_Edison<a class="ae lt" href="https://en.wikipedia.org/wiki/Thomas_Edison" rel="noopener ugc nofollow" target="_blank"/></p><p id="890d" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated"><strong class="bd mk">集成API: </strong></p><p id="ba25" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">点击下面的链接<strong class="bd mk">去perspectiveapi.com</strong></p><div class="ht hu fm fo hv ml"><a href="https://perspectiveapi.com/how-it-works/" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab ej"><div class="mn ab mo cl cj mp"><h2 class="bd ik fv z el mq eo ep mr er et ii dt translated">透视API——工作原理</h2><div class="ms l"><h3 class="bd b fv z el mq eo ep mr er et ek translated">了解API是如何工作的。</h3></div><div class="mt l"><p class="bd b gc z el mq eo ep mr er et ek translated">perspectiveapi.com</p></div></div><div class="mu l"><div class="mv l mw mx my mu mz ib ml"/></div></div></a></div><p id="377b" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">向下滚动一点，然后<strong class="bd mk">找到“转到开发者网站”按钮</strong>。现在点击按钮。</p><div class="ht hu fm fo hv ml"><a href="https://developers.perspectiveapi.com/s/" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab ej"><div class="mn ab mo cl cj mp"><h2 class="bd ik fv z el mq eo ep mr er et ii dt translated">视角|开发者</h2><div class="ms l"><h3 class="bd b fv z el mq eo ep mr er et ek translated">编辑描述</h3></div><div class="mt l"><p class="bd b gc z el mq eo ep mr er et ek translated">developers.perspectiveapi.com</p></div></div></div></a></div><p id="d1a7" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">一旦你点击链接，它将在一个新的标签页中打开开发者网站。接下来，<strong class="bd mk">点击【开始】按钮</strong>。它将重定向到Perspective API文档站点。在这里，您可以看到请求访问API密钥的分步文档。</p><div class="ht hu fm fo hv ml"><a href="https://developers.perspectiveapi.com/s/docs-get-started" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab ej"><div class="mn ab mo cl cj mp"><h2 class="bd ik fv z el mq eo ep mr er et ii dt translated">视角|开发者</h2><div class="ms l"><h3 class="bd b fv z el mq eo ep mr er et ek translated">编辑描述</h3></div><div class="mt l"><p class="bd b gc z el mq eo ep mr er et ek translated">developers.perspectiveapi.com</p></div></div></div></a></div><h2 id="0bd8" class="jy jz ij bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated"><em class="na">先决条件:</em></h2><ul class=""><li id="21cc" class="nb nc ij bd b ky kz lb lc kj nd kn ne kr nf ln ng nh ni nj dt translated">google帐户:<em class="lx"> </em>如果你没有Google帐户，<strong class="bd mk">点击下面的链接</strong>在Google中创建一个帐户。只需要2到5分钟。</li></ul><div class="ht hu fm fo hv ml"><a href="https://support.google.com/mail/answer/56256?hl=en" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab ej"><div class="mn ab mo cl cj mp"><h2 class="bd ik fv z el mq eo ep mr er et ii dt translated">创建一个Gmail帐户</h2><div class="ms l"><h3 class="bd b fv z el mq eo ep mr er et ek translated">要注册Gmail，请创建一个Google帐户。您可以使用用户名和密码登录Gmail和其他…</h3></div><div class="mt l"><p class="bd b gc z el mq eo ep mr er et ek translated">support.google.com</p></div></div></div></a></div><p id="2a02" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">创建Google帐户后，<strong class="bd mk">点击此链接进入Google cloud开发者控制台仪表板</strong>页面。</p><p id="758e" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated"><a class="ae lt" href="https://console.cloud.google.com/getting-started?pli=1" rel="noopener ugc nofollow" target="_blank">https://console.cloud.google.com/getting-started?pli=1</a></p><p id="4b16" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">接下来，我们需要<strong class="bd mk">在我们的谷歌云平台</strong>中创建一个项目，以利用透视图评论分析器API。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff nk"><img src="../Images/62fac2fb2af97f6ed765d79b0fe77f78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lcWDiTpzbyjql-18QkFE_Q.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Google Cloud Platform Dashboard</figcaption></figure><p id="c5c9" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">透视图API文档页面上已经提供了创建GCP项目的步骤。</p><div class="ht hu fm fo hv ml"><a href="https://developers.perspectiveapi.com/s/docs-get-started" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab ej"><div class="mn ab mo cl cj mp"><h2 class="bd ik fv z el mq eo ep mr er et ii dt translated">视角|开发者</h2><div class="ms l"><h3 class="bd b fv z el mq eo ep mr er et ek translated">编辑描述</h3></div><div class="mt l"><p class="bd b gc z el mq eo ep mr er et ek translated">developers.perspectiveapi.com</p></div></div></div></a></div><p id="33cc" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">创建完项目后，单击左上角的菜单图标。这将打开侧面导航菜单。<strong class="bd mk">点击API和服务&gt;启用API&amp;服务。</strong></p><p id="5794" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">接下来点击导航菜单顶部的<strong class="bd mk"> +启用API &amp;服务</strong> <strong class="bd mk">按钮</strong>。然后<strong class="bd mk">搜索视角评论分析器API </strong>。</p><div class="ht hu fm fo hv ml"><a href="https://developers.perspectiveapi.com/s/docs-enable-the-api" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab ej"><div class="mn ab mo cl cj mp"><h2 class="bd ik fv z el mq eo ep mr er et ii dt translated">视角|开发者</h2><div class="ms l"><h3 class="bd b fv z el mq eo ep mr er et ek translated">编辑描述</h3></div><div class="mt l"><p class="bd b gc z el mq eo ep mr er et ek translated">developers.perspectiveapi.com</p></div></div></div></a></div><p id="d7b6" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">一旦您找到该服务，<strong class="bd mk">点击并打开该服务以启用它</strong>。你可能会想，我们已经完成了获得一个API密匙的所有步骤。但这还没有完成。我们需要<strong class="bd mk">填写Perspective API申请表，通过电子邮件获得API密钥(一小时内)</strong>。因为它需要一个启用了透视图注释分析器API服务的GCP项目ID。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/8a169b8de9b1bef5b8010d228d6cddf3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LJkQd0XcZ7snjKZCy22VAQ.png"/></div></div></figure><p id="b746" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">现在只需点击下面的链接，即可在一小时内获得API密钥。</p><p id="9a87" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated"><a class="ae lt" href="https://docs.google.com/forms/d/e/1FAIpQLSdhBBnVVVbXSElby-jhNnEj-Zwpt5toQSCFsJerGfpXW66CuQ/viewform" rel="noopener ugc nofollow" target="_blank">https://docs . Google . com/forms/d/e/1 faipqlsdhbwbnvvbxselby-jhNnEj-zwpt 5 to qscfsjergfpxw 66 cuq/view form</a></p><p id="08ae" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">现在已经完成了，我们已经完成了几乎50%的工作制造者！太棒了&amp;太棒了！现在，让我们回到我们的Mendix聊天应用程序！</p><p id="e0c5" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">这是我之前开发的简单聊天界面布局。我只是调用发送按钮中的简单nanoflow来请求我们的透视图API分析给定的聊天是否有害。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/a79739ff9d8399178fe464cbb1db6485.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CysBSaq_uSaouUITO6__cw.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">PMC Chat Interface Layout — Mendix</figcaption></figure><p id="5679" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">这是我的纳米流的样子。很简单吧？😉</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/bca07b6d56ec543e16e251f6d19de152.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k99-CvNogTY6e8iH2wukkg.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Send button Nanoflow image</figcaption></figure><p id="2a86" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">对于所有开发人员来说，这是调试流程的有趣部分。在之前的Mendix版本V8和之前的版本中，我们没有调试纳流的选项。就像Thor用Storm breaker来对抗灭霸一样，我们的Mendix团队在Mendix v 9及更高版本中提出了Nanoflow调试器。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div class="fe ff mh"><img src="../Images/0e6d94b424372f5a6e6bb639ab130c9f.png" data-original-src="https://miro.medium.com/v2/resize:fit:996/1*fwj-Zest0XXz6hjecd-jDg.gif"/></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Thor, the Son of Odin — Avengers Infinity war climax scene</figcaption></figure><p id="a226" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">作为Mendix开发者，我们能感受到。这是我们期待已久的，并在我们的Mendix论坛创意部分投了赞成票。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/5be4a7ade59f81ff81c3901f54de2e4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mMgS_K3vbbe7IxOsh2_N7w.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Mendix forum idea — Nanoflow debugging</figcaption></figure><p id="57fd" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">在这个nanoflow中，我得到了两个输入参数<strong class="bd mk">它们是<strong class="bd mk">接收者帐户对象和聊天对象。</strong></strong></p><p id="3f8b" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">首先，我只是在检索活动的帮助下检索当前登录的用户帐户。我知道这不是使用系统令牌的最佳做法。相反，我们可以使用一般化方法来获取当前登录的用户帐户。我暂时使用这种方法。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/c323483b96f68c537c96aa589786d17d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FvWEBnRiOxMj26wf3W2IuA.png"/></div></div></figure><p id="3a09" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">接下来，<strong class="bd mk">保护模式和账户实体</strong>之间有<strong class="bd mk">一对一关联</strong>。在保护模式实体中，我们有一个<strong class="bd mk">布尔属性</strong>来控制我们是否需要借助这个(IsEnabled)布尔属性来检查有毒注释。为了改善用户体验，我们将这种控制权交给了用户。他们可以决定是否发送有害信息。但是，另一方面，如果收件人启用了这种保护，他们将不会收到有毒邮件。很酷，对吧？</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/d8a79457faf379b28c2f88666bc83915.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ppDqEmE3q4FoMLXEYHKVhg.png"/></div></div></figure><p id="bb73" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">在下一个决策活动中，我将检查用户是否启用了保护模式。如果为假，它将检查用户是否在布尔属性的帮助下发送任何图像或文本消息。如果为真，它将继续下一个SUB_GenerateToxicScore子微流调用活动。</p><p id="5e23" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">这是将请求我们的透视图API的微流。首先，我检查这个聊天是否有图像。为了避免REST调用错误，我只是添加了这个验证，以便只向这个API调用发送文本消息。</p><p id="bcf9" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">我们的输入体JSON结构如下所示。</p><pre class="mc md me mf fq nl nm nn no aw np dt"><span id="0a51" class="jy jz ij nm b fv nq nr l ns nt"><em class="lx">{<br/>     "comment": {<br/>         "text": "'+$Chat/Message+'"<br/>     },<br/>     "languages": [<br/>         "en"<br/>     ],<br/>     "requestedAttributes": {<br/>         "TOXICITY": {}<br/>     }<br/> }</em></span></pre><p id="18c1" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">在评论对象中，在文本属性上，我们需要传递我们的文本消息来检查它是否有毒。在languages数组中，我们需要提到文本消息的语言代码。因为Perspective API支持像阿拉伯语、西班牙语、英语等多语言。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/5a45035b2bb993f6c2212e7508073b66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3lvU2A_jfM8IwJtwvzf6MA.png"/></div></div><figcaption class="id ie fg fe ff if ig bd b be z ek">Perspective API supports multi-languages</figcaption></figure><p id="acc5" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">我测试了英语，因为我不知道任何其他语言中有任何有毒的单词(开玩笑😉).</p><p id="3572" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">我们可以让请求的属性对象保持原样。<strong class="bd mk">一旦我们的JSON主体准备就绪</strong>，我们需要将这个字符串变量发送给<strong class="bd mk">下一个调用REST API活动。</strong></p><h2 id="71fc" class="jy jz ij bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated"><em class="na">透视API端点:</em></h2><p id="350a" class="pw-post-body-paragraph kw kx ij bd b ky kz jk la lb lc jn ld kj le lf lg kn lh li lj kr lk ll lm ln hn dt translated"><a class="ae lt" href="https://commentanalyzer.googleapis.com/v1alpha1/comments:analyze?key='+@ToxicityDetector.CONST_APIKey" rel="noopener ugc nofollow" target="_blank">https://commentanalyzer . Google APIs . com/v1 alpha 1/评论:分析？key='+@ToxicityDetector。CONST_APIKey </a></p><p id="14c2" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">这是我们需要用API键向Perspective API发送POST请求的端点。我只是<strong class="bd mk">将我的API键存储在一个常量变量</strong> (CONST_APIKey)中。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/22c9f5d3977ef56c3f8400deef2e8048.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FusEw9yu4Jg7-n65I6IdtA.png"/></div></div></figure><p id="44f3" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">在<strong class="bd mk"> HTTP headers </strong>部分，我们需要添加<strong class="bd mk">Content-Type:“Application/JSON”</strong>。在上一节中，我们刚刚创建了JSON主体字符串变量。所以，我在那个输入HTTP头中提到了相同的JSON类型。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/3d36153d181d9be1cffd7ddb2ab67f3a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J8I0VssxhDq7saBuNeqnjA.png"/></div></div></figure><p id="5ace" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">在Request选项卡中，我只是在parameters部分传递了JSON字符串变量，如下所示:</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/0c965808ac2b5eb2e0913edb2a8447fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yuJmMQrD1HRWHiXGq_Mguw.png"/></div></div></figure><p id="4361" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">我们几乎已经完成了这个配置。最后一部分是回应部分。我们可以使用<strong class="bd mk"> Import_Mapping流程</strong>从Perspective API获得响应。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/32de1b7c17922db79f73dc3c4fa15301.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Z9A2nr7FM7xusiNqzWxVbA.png"/></div></div></figure><p id="3d7a" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">透视图API响应JSON结构如下图所示。</p><pre class="mc md me mf fq nl nm nn no aw np dt"><span id="b835" class="jy jz ij nm b fv nq nr l ns nt">{<br/>   "attributeScores":{<br/>      "TOXICITY":{<br/>         "spanScores":[<br/>            {<br/>               "begin":0,<br/>               "end":6,<br/>               "score":{<br/>                  "value":0.10428705,<br/>                  "type":"PROBABILITY"<br/>               }<br/>            }<br/>         ],<br/>         "summaryScore":{<br/>            "value":0.10428705,<br/>            "type":"PROBABILITY"<br/>         }<br/>      }<br/>   },<br/>   "languages":[<br/>      "en"<br/>   ],<br/>   "detectedLanguages":[<br/>      "ar"<br/>   ]<br/>}</span></pre><p id="6a34" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">我们可以<strong class="bd mk">从SummaryScore对象值属性</strong>中获得毒性分数。一旦我们从SummaryScore对象中获得毒性分数，我们只需要使用formatDecimal函数将这个值转换成百分比格式的<strong class="bd mk">。</strong></p><pre class="mc md me mf fq nl nm nn no aw np dt"><span id="c53a" class="jy jz ij nm b fv nq nr l ns nt"><strong class="nm ik">formatDecimal((($SummaryScore/Value)*100),’##.##’)</strong></span></pre><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/789b4bb362939c716796e35e8509b992.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2x2Wglp8ToYYk1eFE5sNFA.png"/></div></div></figure><p id="e8fc" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">一旦我们从子微流返回毒性分数，我们就可以使用这个分数来验证它是否超过了我们在决策活动上设置的限制。在这种情况下，<strong class="bd mk">我设置了70作为限制</strong>。如果返回的毒性分数大于或等于70 (x ≥ 70)，我们可以认为该文本是有毒的。</p><figure class="mc md me mf fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff mi"><img src="../Images/4e5e5a1aee2e61d77844a80c9572f684.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1NMnTNmz3obD7Np0vRfqrw.png"/></div></div></figure><p id="a24e" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated"><strong class="bd mk">如果条件为真</strong>，我们可以向用户显示一条警告消息，要求他们使用适当的词语，而不是提交聊天对象。<strong class="bd mk">如果条件为假</strong>，我们可以使用检索活动获取SenderAccount对象，并将该对象映射到Chat_SenderAccount关联中。通过这种方法，我们可以自动阻止有害的评论或消息。</p><p id="c97c" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">下面，我附上了示例聊天界面应用程序的工作演示。在这里，Duke试图向Mike发送一条有毒的消息，但我们的Perspective API在后端的机器学习模型的帮助下很容易识别出这条有毒的聊天。预期的邮件将不会发送到Mike的帐户。</p><div class="ht hu fm fo hv ml"><a href="https://drive.google.com/file/d/1BG00sPZ8IR8TmRoU94gOZZY9yrRpT4qe/view?usp=sharing" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab ej"><div class="mn ab mo cl cj mp"><h2 class="bd ik fv z el mq eo ep mr er et ii dt translated">PMC屏幕录制. webm</h2><div class="ms l"><h3 class="bd b fv z el mq eo ep mr er et ek translated">编辑描述</h3></div><div class="mt l"><p class="bd b gc z el mq eo ep mr er et ek translated">drive.google.com</p></div></div></div></a></div><h2 id="848f" class="jy jz ij bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">最后的想法</h2><p id="5f5a" class="pw-post-body-paragraph kw kx ij bd b ky kz jk la lb lc jn ld kj le lf lg kn lh li lj kr lk ll lm ln hn dt translated">我们可以在机器学习训练模型的帮助下得出结论，我们将能够识别有毒信息，并可以自动阻止它们。只需轻轻一点，我们就可以过滤并删除所有有害信息。这在与陌生人一对一的对话或社区间的群聊中非常有用。</p><p id="a51b" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">感谢您宝贵的时间。我希望你们喜欢这个博客，并希望它对你们未来的项目有所帮助。我很快会在另一个有趣的博客中见到你。祝你有美好的一天，去创造吧😊！！</p><h2 id="c017" class="jy jz ij bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv dt translated">阅读更多</h2><div class="ht hu fm fo hv ml"><a href="https://developers.google.com/codelabs/setup-perspective-api" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab ej"><div class="mn ab mo cl cj mp"><h2 class="bd ik fv z el mq eo ep mr er et ii dt translated">Perspective API | Google开发者入门</h2><div class="ms l"><h3 class="bd b fv z el mq eo ep mr er et ek translated">了解如何构建透视图API。</h3></div><div class="mt l"><p class="bd b gc z el mq eo ep mr er et ek translated">developers.google.com</p></div></div><div class="mu l"><div class="nu l mw mx my mu mz ib ml"/></div></div></a></div><div class="ht hu fm fo hv ml"><a href="https://docs.mendix.com/howto/integration/consume-a-rest-service/" rel="noopener  ugc nofollow" target="_blank"><div class="mm ab ej"><div class="mn ab mo cl cj mp"><h2 class="bd ik fv z el mq eo ep mr er et ii dt translated">消费休息服务</h2><div class="ms l"><h3 class="bd b fv z el mq eo ep mr er et ek translated">描述如何从REST服务获取信息。</h3></div><div class="mt l"><p class="bd b gc z el mq eo ep mr er et ek translated">docs.mendix.com</p></div></div></div></a></div></div><div class="ab cl nv nw hb nx" role="separator"><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa ob"/><span class="ny bw bk nz oa"/></div><div class="hn ho hp hq hr"><p id="7d6c" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated"><em class="lx">来自发布者- </em></p><p id="8f88" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">如果你喜欢这篇文章，你可以在我们的 <a class="ae lt" href="https://medium.com/mendix" rel="noopener"> <em class="lx">中页</em> </a> <em class="lx">找到更多喜欢的。对于精彩的视频和直播会话，您可以前往</em><a class="ae lt" href="https://www.mendix.com/live/" rel="noopener ugc nofollow" target="_blank"><em class="lx">MxLive</em></a><em class="lx">或我们的社区</em><a class="ae lt" href="https://www.youtube.com/c/MendixCommunity/community" rel="noopener ugc nofollow" target="_blank"><em class="lx">Youtube PAG</em></a><em class="lx">e .</em></p><p id="585d" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated"><em class="lx">希望入门的创客，可以注册一个</em> <a class="ae lt" href="https://signup.mendix.com/link/signup/?source=direct" rel="noopener ugc nofollow" target="_blank"> <em class="lx">免费账号</em> </a> <em class="lx">，通过我们的</em> <a class="ae lt" href="https://academy.mendix.com/link/home" rel="noopener ugc nofollow" target="_blank"> <em class="lx">学苑</em> </a> <em class="lx">即时获取学习。</em></p><p id="3059" class="pw-post-body-paragraph kw kx ij bd b ky lo jk la lb lp jn ld kj lq lf lg kn lr li lj kr ls ll lm ln hn dt translated">有兴趣更多地参与我们的社区吗？加入我们的 <a class="ae lt" href="https://join.slack.com/t/mendixcommunity/shared_invite/zt-hwhwkcxu-~59ywyjqHlUHXmrw5heqpQ" rel="noopener ugc nofollow" target="_blank"> <em class="lx"> Slack社区频道</em> </a> <em class="lx">。</em></p></div></div>    
</body>
</html>