<html>
<head>
<title>Migrating an Android project to Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Android项目迁移到Kotlin</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/migrating-an-android-project-to-kotlin-f93ecaa329b7?source=collection_archive---------5-----------------------#2017-07-12">https://medium.com/androiddevelopers/migrating-an-android-project-to-kotlin-f93ecaa329b7?source=collection_archive---------5-----------------------#2017-07-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="c012" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">不久前，我们开源了Android问答应用程序<a class="ae jc" href="https://github.com/googlesamples/android-topeka" rel="noopener ugc nofollow" target="_blank"> Topeka </a>。<br/>使用<a class="ae jc" href="https://github.com/googlesamples/android-topeka/tree/master/app/src/androidTest/java/com/google/samples/apps/topeka" rel="noopener ugc nofollow" target="_blank">集成测试</a>和<a class="ae jc" href="https://github.com/googlesamples/android-topeka/tree/master/app/src/test/java/com/google/samples/apps/topeka" rel="noopener ugc nofollow" target="_blank">单元测试</a>进行测试。<br/>而且是纯Java写的。嗯……的确是</p><h1 id="ce1d" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">圣彼得堡海岸边的那个岛叫什么名字？_ _ _ _ _ _</h1><p id="4c07" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">在Google I/O 2017上，我们宣布了对Kotlin编程语言的官方<a class="ae jc" href="https://blog.jetbrains.com/kotlin/2017/05/kotlin-on-android-now-official/" rel="noopener ugc nofollow" target="_blank">支持。那是我开始从Java迁移代码库的时候，<strong class="ig hi">在途中学习Kotlin。</strong></a></p><blockquote class="kg"><p id="b5a1" class="kh ki hh bd kj kk kl km kn ko kp jb dx translated">从技术角度来看，这种迁移并不是必要的。这个应用程序很坚固，但主要是为了满足我的好奇心；托皮卡作为我学习新语言的载体。</p></blockquote><p id="d2cf" class="pw-post-body-paragraph ie if hh ig b ih kq ij ik il kr in io ip ks ir is it kt iv iw ix ku iz ja jb ha bi translated">如果你好奇，你可以直接跳到GitHub 上的<a class="ae jc" href="https://github.com/googlesamples/android-topeka/" rel="noopener ugc nofollow" target="_blank">源代码。有一段时间，代码在一个单独的分支上，但现在它被合并到主代码中了。</a></p><p id="57e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这篇文章收集了我在迁移过程中发现的一些关键部分。它还展示了我在学习新的Android开发编程语言时发现的一些有用的东西。</p></div><div class="ab cl kw kx go ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ha hb hc hd he"><figure class="le lf lg lh fd li er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es ld"><img src="../Images/d0638212947874fe55db7c15d4b75b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oML2dls3WxjhTnR4a_TTRg.png"/></div></div><figcaption class="lp lq et er es lr ls bd b be z dx">It still looks the same</figcaption></figure><h1 id="e7fd" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">🔑关键外卖</h1><ul class=""><li id="c313" class="lt lu hh ig b ih kb il kc ip lv it lw ix lx jb ly lz ma mb bi translated">Kotlin是一种有趣而强大的语言</li><li id="8070" class="lt lu hh ig b ih mc il md ip me it mf ix mg jb ly lz ma mb bi translated">测试让你安心</li><li id="5d0c" class="lt lu hh ig b ih mc il md ip me it mf ix mg jb ly lz ma mb bi translated">特定于平台的习惯用法很少</li></ul></div><div class="ab cl kw kx go ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ha hb hc hd he"><h1 id="9996" class="jd je hh bd jf jg mh ji jj jk mi jm jn jo mj jq jr js mk ju jv jw ml jy jz ka bi translated">最初迁移到科特林</h1><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="mm mn l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">It’s not as easy as Bad Android Advice put it, but it’s a good starting point.</figcaption></figure><p id="eda9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第1步和第2步对于Kotlin的入门是有效的。不过，我会弄清楚第三步会如何进行。</p><h2 id="e25e" class="mo je hh bd jf mp mq mr jj ms mt mu jn ip mv mw jr it mx my jv ix mz na jz nb bi translated">对托皮卡来说，路线更像这样:</h2><ol class=""><li id="1901" class="lt lu hh ig b ih kb il kc ip lv it lw ix lx jb nc lz ma mb bi translated">仔细阅读Kotlin 的<a class="ae jc" href="https://kotlinlang.org/docs/reference/basic-syntax.html" rel="noopener ugc nofollow" target="_blank">基本语法</a></li><li id="860e" class="lt lu hh ig b ih mc il md ip me it mf ix mg jb nc lz ma mb bi translated">通过考研来获得对语言的基本熟悉</li><li id="e629" class="lt lu hh ig b ih mc il md ip me it mf ix mg jb nc lz ma mb bi translated">转换文件，一个接一个，通过“⌥⇧⌘K”，确保测试仍然通过</li><li id="3d15" class="lt lu hh ig b ih mc il md ip me it mf ix mg jb nc lz ma mb bi translated">仔细检查科特林的文件，让他们更地道</li><li id="2824" class="lt lu hh ig b ih mc il md ip me it mf ix mg jb nc lz ma mb bi translated">重复第4步，直到您和您的代码审查人员都满意为止</li><li id="45d1" class="lt lu hh ig b ih mc il md ip me it mf ix mg jb nc lz ma mb bi translated">装运它</li></ol><h1 id="d014" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">互用性</h1><p id="98d5" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">循序渐进是明智的做法。Kotlin编译成Java字节码，这两种语言可以互操作。同样，在同一个项目中使用两种语言也是可能的。所以没有必要将所有代码移植到另一种语言。</p><p id="b299" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是如果这是你的目标，那么迭代地这样做是有意义的。这样，在整个迁移过程中维护一个稳定的应用程序并在迁移过程中不断学习就更加可行。</p><h1 id="262a" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">测试让你放松心情</h1><p id="e1bb" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">拥有一套单元和集成测试有很多好处。<br/>在大多数情况下，他们的存在是为了让人们相信变化并没有破坏现有的行为。</p><p id="8849" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对我来说，从不太复杂的数据类开始是明确的选择。<br/>它们在整个项目中被使用，然而它们的复杂性相对较低。这使得它们成为开启新语言之旅的理想起点。</p><p id="4499" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在使用内置于Android Studio中的Kotlin代码转换器迁移了其中一些代码之后，我执行测试并使它们通过，直到最终将测试本身迁移到Kotlin。</p><p id="86ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果没有测试，我会被要求在每次更改后检查接触到的特性，并手动验证它们。<br/>通过自动化，在代码库中移动、移植代码变得更快更容易了。</p><p id="25ba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以，如果你还没有对你的应用程序进行适当的测试，这里有一个更好的理由来这样做。👆</p><h1 id="f8dd" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">‼️生成的代码并不总是好看的</h1><p id="1f6d" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">在第一轮<em class="kv">主要是</em>自动化迁移之后，我继续阅读<a class="ae jc" href="https://kotlinlang.org/docs/reference/coding-conventions.html" rel="noopener ugc nofollow" target="_blank">科特林风格指南</a>。这一页让我明白，前方的路还很长。</p><p id="e6dd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">总的来说，转换器做得很好。然而，在自动化过程中，有许多语言习惯用法和特征没有被考虑在内。这可能是更好的，因为翻译是棘手的。尤其是如果一种语言包含更多的功能或者以不同的方式实现类似的东西。</p><p id="db09" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了进一步了解科特林转换器，<a class="nd ne ge" href="https://medium.com/u/9a3b7ded03e0?source=post_page-----f93ecaa329b7--------------------------------" rel="noopener" target="_blank">本杰明·巴克斯特</a>写了他的经历:</p><div class="nf ng ez fb nh ni"><a rel="noopener follow" target="_blank" href="/google-developers/lessons-learned-while-converting-to-kotlin-with-android-studio-f0a3cb41669"><div class="nj ab dw"><div class="nk ab nl cl cj nm"><h2 class="bd hi fi z dy nn ea eb no ed ef hg bi translated">使用Android Studio转换到Kotlin的经验教训</h2><div class="np l"><h3 class="bd b fi z dy nn ea eb no ed ef dx translated">使用Android Studio提升您的Kotlin转换</h3></div><div class="nq l"><p class="bd b fp z dy nn ea eb no ed ef dx translated">medium.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw ln ni"/></div></div></a></div><h1 id="6101" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi">‼️ ⁉</h1><p id="2e2d" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">在自动转换之后，我得到了很多的<code class="du nx ny nz oa b">?</code>和<code class="du nx ny nz oa b">!!</code>。<br/>这些用于使一个值可为空，并断言某个值不为空。这反过来又会导致一个<code class="du nx ny nz oa b">NullPointerException</code>。<br/>我不禁想起一句非常贴切的名言:</p><blockquote class="ob oc od"><p id="d97f" class="ie if kv ig b ih ii ij ik il im in io oe iq ir is of iu iv iw og iy iz ja jb ha bi translated">“多个感叹号，”他摇着头继续说道，“是精神不正常的明显标志。——<a class="ae jc" href="https://wiki.lspace.org/mediawiki/Multiple_exclamation_marks" rel="noopener ugc nofollow" target="_blank"><em class="hh">特里·普拉切特</em> </a></p></blockquote><p id="6d3a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在许多情况下，值不必为空，因此可以删除空检查。甚至没有必要直接在构造函数中初始化所有的值。相反，可以使用<code class="du nx ny nz oa b">lateinit</code>或委托初始化。</p><p id="a836" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然而，这并不适用于所有情况:</p><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="mm mn l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">Sometimes vars have to be nullable nonetheless</figcaption></figure><p id="2961" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以我必须返回并使我的视图成员可空。</p><p id="b842" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这些和其他情况下，你仍然需要检查是否有东西是<code class="du nx ny nz oa b">null</code>。如果有<code class="du nx ny nz oa b">supportActionBar</code>，使用<code class="du nx ny nz oa b"><em class="kv">supportActionBar</em>?.setDisplayShowTitleEnabled(false)</code>只执行问号后面的部分。<br/>这意味着少了很多基于<code class="du nx ny nz oa b">if</code>语句的空支票。🔥</p><p id="b8ce" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">另外，直接在非空变量上执行带有一些stdlib函数的代码也很方便:</p><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="oh mn l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">let it scale, let it scaaaale…</figcaption></figure></div><div class="ab cl kw kx go ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ha hb hc hd he"><h1 id="9bb1" class="jd je hh bd jf jg mh ji jj jk mi jm jn jo mj jq jr js mk ju jv jw ml jy jz ka bi translated">逐渐变得更加地道</h1><p id="8964" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">仔细检查生成的代码，使其更加符合习惯，以及获得评审者的反馈，这些都表明Kotlin是一种强大的语言。它让事情变得可读和简洁。</p><p id="380a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们来看看我遇到的一些例子。</p><h2 id="2ec5" class="mo je hh bd jf mp mq mr jj ms mt mu jn ip mv mw jr it mx my jv ix mz na jz nb bi translated">读书少并不总是一件坏事</h2><p id="db84" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">让我们以适配器的<code class="du nx ny nz oa b">getView</code>为例:</p><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="oh mn l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">getView in Java</figcaption></figure><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="oh mn l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">getView in Kotlin</figcaption></figure><p id="fd01" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这两个代码片段做<em class="kv">同样的事情</em> : <br/>检查<code class="du nx ny nz oa b">convertView</code>是否为<code class="du nx ny nz oa b">null</code>，并在<code class="du nx ny nz oa b">createView(...)</code>内创建一个新视图或返回<code class="du nx ny nz oa b">convertView</code>。两者也叫<code class="du nx ny nz oa b">bindView(...)</code>。</p><p id="8e6f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这两段文字同样清晰可辨。把东西从8行精简到只有2行？使我印象深刻。</p><h2 id="dd4e" class="mo je hh bd jf mp mq mr jj ms mt mu jn ip mv mw jr it mx my jv ix mz na jz nb bi translated">数据类是神奇的🦄</h2><p id="9608" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">为了让Kotlin的简洁更加明显，数据类很容易摆脱一些冗长:</p><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="oh mn l"/></div></figure><p id="cb2a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，让我们看看科特林:</p><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="oh mn l"/></div></figure><p id="cbd8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">没错，就是少了55行代码，表达同样的东西。这就是数据类的神奇之处。</p><h2 id="d509" class="mo je hh bd jf mp mq mr jj ms mt mu jn ip mv mw jr it mx my jv ix mz na jz nb bi translated">扩展功能</h2><p id="ed75" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">从传统Android开发者的角度来看，这就是事情变得有点奇怪的地方。Kotlin允许在给定的范围内创建自己的DSL。</p><p id="8c1b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">让我们看看它是如何工作的</strong></p><p id="4832" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有时在Topeka内部，在<code class="du nx ny nz oa b">Parcel</code>中传递布尔值是有意义的。Android框架API并不直接支持这一点。在最初的实现中，有必要显式地调用一个实用类的方法，比如<code class="du nx ny nz oa b">ParcelableHelper.writeBoolean(parcel, value)</code>。<br/>有了Kotlin，<a class="ae jc" href="https://kotlinlang.org/docs/reference/extensions.html" rel="noopener ugc nofollow" target="_blank">扩展函数</a>一劳永逸地解决了这个问题:</p><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="oh mn l"/></div></figure><p id="a23f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将这些写在一个地方，使得直接调用<code class="du nx ny nz oa b">parcel.writeBoolean(value)</code>和<code class="du nx ny nz oa b">parcel.readBoolean()</code>成为可能，就好像它是框架的一部分。如果Android Studio不会以不同的方式突出扩展功能，它们几乎不会引人注意。</p><p id="0773" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">扩展功能让东西更容易阅读。</strong>让我们看看另一个例子:替换视图层次结构中的片段</p><p id="aad5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在Java世界中，这看起来像这样:</p><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="oh mn l"/></div></figure><p id="e6e4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">那其实也不算太差。但是你必须写这段代码，在<em class="kv">每一个片段将被替换的位置</em>。或者在某个地方创建一个方法，例如在另一个Utils类中。</p><p id="be52" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有了Kotlin，一个扩展函数使得简单地调用<code class="du nx ny nz oa b">replaceFragment(R.id.container, MyFragment())</code>来替换项目中任何<code class="du nx ny nz oa b">FragmentActivity</code>内的一个片段成为可能，通过添加以下代码:</p><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="oh mn l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">Replacing Fragments in a single line</figcaption></figure><h2 id="5b5f" class="mo je hh bd jf mp mq mr jj ms mt mu jn ip mv mw jr it mx my jv ix mz na jz nb bi translated">少一些仪式，多一些功能</h2><p id="ee6e" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated"><strong class="ig hi">高阶函数</strong>让我大吃一惊。<br/>是的，我知道这总的来说不是一个新概念。但是对于传统的Android开发者来说，事实上是这样的。我以前听说过它们，也看过它们的编写，但是在我自己的代码中使用它们是另一回事。</p><p id="b36b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在托皮卡的几个地方，我依靠<code class="du nx ny nz oa b">OnLayoutChangeListener</code>来注入行为。在Kotlin之前的世界中，这通常会导致一个匿名类，带有一些重复的代码。</p><p id="ccd4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">迁移后，需要调用的是:<br/> <code class="du nx ny nz oa b">view.onLayoutChange { myAction() }</code></p><p id="bff7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">围绕这一点的仪式已经被封装在这个扩展函数中:</p><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="oh mn l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">Higher order function to reduce boilerplate</figcaption></figure><p id="0eb4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">再举一个例子，这种行为也可以应用于数据库事务:</p><figure class="le lf lg lh fd li"><div class="bz dy l di"><div class="oh mn l"/></div><figcaption class="lp lq et er es lr ls bd b be z dx">Less ceremony for database transactions</figcaption></figure><p id="1996" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，这个API的所有用户只需调用<code class="du nx ny nz oa b">db.transact { operation() }</code>，而不是执行整个舞蹈来开始和结束一个事务。</p><p id="ad80" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://twitter.com/pacoworks/status/885147451757350912" rel="noopener ugc nofollow" target="_blank">通过Twitter </a>更新:使用<code class="du nx ny nz oa b">SQLiteDatabase.()</code>而不仅仅是<code class="du nx ny nz oa b">()</code>来传递函数允许直接在<code class="du nx ny nz oa b">operation()</code>中操作数据库。🔥</p><p id="ce40" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我可以继续说下去，但你已经知道要点了。</p><blockquote class="kg"><p id="80c3" class="kh ki hh bd kj kk kl km kn ko kp jb dx translated">高阶函数和扩展很方便，通过删除不必要的冗长，添加功能和隐藏实现细节，使项目更容易阅读，工作更有趣。</p></blockquote></div><div class="ab cl kw kx go ky" role="separator"><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb lc"/><span class="kz bw bk la lb"/></div><div class="ha hb hc hd he"><h1 id="cd11" class="jd je hh bd jf jg mh ji jj jk mi jm jn jo mj jq jr js mk ju jv jw ml jy jz ka bi translated">有待发现的事物</h1><p id="7ab6" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">在整个转换过程中，我还没有遇到很多Android开发的最佳实践。到目前为止，我一直坚持使用风格指南和代码约定。</p><p id="e674" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这可能是因为我还不熟悉这门语言，或者是因为还没有太多的投资来收集和宣传这些信息。也许有一个我还没有碰到的集合，但是看起来有相当大的空间来存放特定于平台的习惯用法。<br/>如果你知道这样的收藏，请将它们添加到评论中。</p></div></div>    
</body>
</html>