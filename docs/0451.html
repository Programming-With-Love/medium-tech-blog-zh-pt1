<html>
<head>
<title>Translucent SystemBars the right way — across API levels and themes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">半透明系统阻碍了正确的方式——跨API级别和主题</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/translucent-systembars-the-right-way-across-api-levels-and-themes-6d7ddda21396?source=collection_archive---------0-----------------------#2020-01-14">https://medium.com/androiddevelopers/translucent-systembars-the-right-way-across-api-levels-and-themes-6d7ddda21396?source=collection_archive---------0-----------------------#2020-01-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/825835e96439f44b7180b0d8c48dd6c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0FTFY3WbhcEc4LgguxS5rw.png"/></div></div></figure><h1 id="0c2e" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">目标:</h1><p id="4a34" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">在v21+上用半透明状态和导航栏边对边绘制深色和浅色主题。</p><p id="6dea" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">本文假设你已经完成了<a class="ae kq" rel="noopener" href="/androiddevelopers/gesture-navigation-going-edge-to-edge-812f62e4e83e">手势导航——边到边(I) </a></p><p id="b3ec" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">因为我们希望内容被绘制在系统栏的后面，这意味着</p><ol class=""><li id="a30f" class="kr ks hh jp b jq kl ju km jy kt kc ku kg kv kk kw kx ky kz bi translated">我们需要半透明</li><li id="45a2" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk kw kx ky kz bi translated">我们需要根据当前主题的导航栏和状态栏的深色或浅色scrims。</li></ol><h1 id="c11a" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">能力</h1><h2 id="a226" class="lf iq hh bd ir lg lh li iv lj lk ll iz jy lm ln jd kc lo lp jh kg lq lr jl ls bi translated">v21+离子</h2><ul class=""><li id="5df5" class="kr ks hh jp b jq jr ju jv jy lt kc lu kg lv kk lw kx ky kz bi translated">完全可配置的<em class="lx">状态栏颜色</em> <br/>但是我们被限制使用深色，因为状态栏图标仍然是白色的。</li><li id="8e00" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk lw kx ky kz bi translated"><em class="lx">window translucent status</em>true将覆盖<em class="lx"> statusBarColor </em>并应用一个<strong class="jp hi">不可更改的固定深色稀松布</strong>。</li><li id="cdb5" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk lw kx ky kz bi translated">完全可配置的<em class="lx">navigationbar color</em><br/>但是我们仅限于使用深色，因为导航按钮仍然是白色的。</li><li id="0b68" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk lw kx ky kz bi translated"><em class="lx">window translucent navigation</em>true将覆盖导航<em class="lx"> BarColor </em>并应用不能更改的<strong class="jp hi">固定深色稀松布</strong>。</li><li id="b83c" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk lw kx ky kz bi translated">状态栏图标和导航栏按钮始终保持亮着。</li></ul><h2 id="f84d" class="lf iq hh bd ir lg lh li iv lj lk ll iz jy lm ln jd kc lo lp jh kg lq lr jl ls bi translated">v23+</h2><ul class=""><li id="0376" class="kr ks hh jp b jq jr ju jv jy lt kc lu kg lv kk lw kx ky kz bi translated"><em class="lx">windowLightStatusBar</em><br/>使状态栏图标变暗</li></ul><h2 id="beb4" class="lf iq hh bd ir lg lh li iv lj lk ll iz jy lm ln jd kc lo lp jh kg lq lr jl ls bi translated">v27+</h2><ul class=""><li id="d208" class="kr ks hh jp b jq jr ju jv jy lt kc lu kg lv kk lw kx ky kz bi translated"><em class="lx">windowLightNavigationBar<br/></em>使导航条按钮变暗。</li></ul><h1 id="7849" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">解决办法</h1><blockquote class="ly lz ma"><p id="8a05" class="jn jo lx jp b jq kl js jt ju km jw jx mb kn ka kb mc ko ke kf md kp ki kj kk ha bi translated">注意:我们将使用透明的状态栏颜色。因为我们将使用AppBar来给状态栏着色。由于AppBar覆盖了statusBar的区域，所以直接给AppBar设置相关背景应该就够了。</p><p id="50f3" class="jn jo lx jp b jq kl js jt ju km jw jx mb kn ka kb mc ko ke kf md kp ki kj kk ha bi translated">在您的实现中，这可以是顶部的任何视图。如果屏幕上方没有视图，可以改为使用<strong class="jp hi"><em class="hh">statusubarcolor</em></strong><em class="hh">属性。它会给出相同的结果。</em></p></blockquote><h1 id="1af2" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">基本值:</h1><figure class="me mf mg mh fd ii"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h2 id="3bc4" class="lf iq hh bd ir lg lh li iv lj lk ll iz jy lm ln jd kc lo lp jh kg lq lr jl ls bi translated">AppBarLayout:</h2><pre class="me mf mg mh fd mk ml mm mn aw mo bi"><span id="bc31" class="lf iq hh ml b fi mp mq l mr ms">&lt;com.google.android.material.appbar.AppBarLayout<br/>    android:id="@+id/moviesAppBar"<br/>    android:layout_width="match_parent"<br/>    android:layout_height="wrap_content"<br/>    android:background="@color/status_bar_scrim"<br/>    android:theme="@style/<strong class="ml hi">Widget.AppTheme.AppBar</strong>"<br/>    app:elevation="2dp"<br/>    app:layout_constraintTop_toTopOf="parent"&gt;</span><span id="62e9" class="lf iq hh ml b fi mt mq l mr ms">    &lt;androidx.appcompat.widget.Toolbar<br/>        android:id="@+id/moviesToolbar"<br/>        android:layout_width="match_parent"<br/>        android:layout_height="?actionBarSize"<br/>        app:title="Popular Movies" /&gt;<br/>&lt;/com.google.android.material.appbar.AppBarLayout&gt;</span></pre><h1 id="cf85" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">v21 — v22:</h1><ul class=""><li id="5028" class="kr ks hh jp b jq jr ju jv jy lt kc lu kg lv kk lw kx ky kz bi translated">我们放弃了<em class="lx">window translucent status</em>和<em class="lx">window translucent navigation</em>，因为如果我们使用它们的话，系统会应用深色的网布。</li><li id="935e" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk lw kx ky kz bi translated">状态栏和导航栏图标保持白色。</li><li id="ebf1" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk lw kx ky kz bi translated">意味着，我们只能使用<strong class="jp hi">深色背景/稀松布</strong>。</li></ul><p id="c801" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">我们有两个选择:</p><h2 id="e495" class="lf iq hh bd ir lg lh li iv lj lk ll iz jy lm ln jd kc lo lp jh kg lq lr jl ls bi translated">1.深色和浅色主题使用不同的背景。</h2><p id="21ba" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">在深色主题的情况下，颜色表面将是深色/黑色。我们也可以对系统栏使用类似的颜色。<br/>如果是浅色主题，色彩表面将是浅色/白色。我们不能在系统栏上使用相似的颜色，因为图标是白色的。</p><p id="31f2" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">基本上，我们不能很好地处理v21–22上的轻主题系统栏。所以我们只能使用深色背景。</p><h2 id="44a5" class="lf iq hh bd ir lg lh li iv lj lk ll iz jy lm ln jd kc lo lp jh kg lq lr jl ls bi translated">2.[选择]深色和浅色主题使用相同的背景。</h2><figure class="me mf mg mh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mu"><img src="../Images/1f013b5dff5e4f0cb79954c5a1fc96cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*hyaqVymXewNlefzn.png"/></div></div></figure><p id="2702" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">我们可以用深色背景来设计深色和浅色主题。</p><p id="7d60" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">因此，黑暗主题将大放异彩。</p><p id="0407" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">在浅色主题的情况下:<br/>因为这种深色的稀松布也将应用于AppBar(如果我们在它后面绘图，我们就是这样！)，我们将不得不使用主题叠加。AppBar的黑暗。否则，我们将在深色背景上显示深色文本。</p><h2 id="dd6d" class="lf iq hh bd ir lg lh li iv lj lk ll iz jy lm ln jd kc lo lp jh kg lq lr jl ls bi translated">价值观-夜晚</h2><figure class="me mf mg mh fd ii"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h1 id="5303" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">v23 — v26:</h1><figure class="me mf mg mh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mv"><img src="../Images/d9c81fe5efb6bf2640a4f909dbf0da34.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2FwZOnBXiMvC07x2bM_b3Q.png"/></div></div></figure><p id="4554" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">我们可以完全灵活地使用状态栏，因为我们有能力使状态栏图标变暗。</p><ul class=""><li id="a9de" class="kr ks hh jp b jq kl ju km jy kt kc ku kg kv kk lw kx ky kz bi translated">对于浅色主题，我们将有一个浅色的<em class="lx">状态栏和深色的导航栏(因为导航图标不能是深色的)。</em></li><li id="5964" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk lw kx ky kz bi translated">对于深色主题，values-night将覆盖<em class="lx"> status_bar_scrim </em>为深色，nav_bar_scrim也将跟随status_bar_scrim为深色。</li><li id="8208" class="kr ks hh jp b jq la ju lb jy lc kc ld kg le kk lw kx ky kz bi translated">此外，我们需要防止我们的<strong class="jp hi">部件。AppTheme.AppBar </strong>永远是深色主题。</li></ul><h2 id="a62e" class="lf iq hh bd ir lg lh li iv lj lk ll iz jy lm ln jd kc lo lp jh kg lq lr jl ls bi translated">值-v23</h2><figure class="me mf mg mh fd ii"><div class="bz dy l di"><div class="mi mj l"/></div></figure><h1 id="c929" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">v27+:</h1><figure class="me mf mg mh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mw"><img src="../Images/4a60ac607cda8cdf03564efb040e6077.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dzSIksKT4dSL_qS012LjBw.png"/></div></div></figure><p id="134d" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">我们可以完全灵活地使用导航栏，因为我们现在有能力让导航栏图标变暗。<br/>因为values-v23为light主题使用了不同的status_bar_scrim和nav_bar_scrim。我们必须确保两者是相同的(两者都是浅色主题，两者都是深色主题)。</p><p id="0110" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">我们只需要让nav_bar_scrim再次跟随status_bar_scrim，我们就完成了。</p><h2 id="d144" class="lf iq hh bd ir lg lh li iv lj lk ll iz jy lm ln jd kc lo lp jh kg lq lr jl ls bi translated">值-v27</h2><figure class="me mf mg mh fd ii"><div class="bz dy l di"><div class="mi mj l"/></div></figure><p id="77e2" class="pw-post-body-paragraph jn jo hh jp b jq kl js jt ju km jw jx jy kn ka kb kc ko ke kf kg kp ki kj kk ha bi translated">完整的代码可以在这里找到:<a class="ae kq" href="https://github.com/gaurav414u/MoviesInsetsDemo" rel="noopener ugc nofollow" target="_blank">https://github.com/gaurav414u/MoviesInsetsDemo</a></p></div></div>    
</body>
</html>