<html>
<head>
<title>Create a Simple Docker Container with a Python Web Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Python Web服务器创建简单的Docker容器</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/create-a-simple-docker-container-with-a-python-web-server-26534205061a?source=collection_archive---------0-----------------------#2022-08-03">https://medium.com/oracledevs/create-a-simple-docker-container-with-a-python-web-server-26534205061a?source=collection_archive---------0-----------------------#2022-08-03</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="9497" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由<a class="ae jc" href="https://twitter.com/chrisbensen" rel="noopener ugc nofollow" target="_blank">克里斯本森</a></p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/7106c618a45cf44e56bed617675fb046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Dy7HggA1e1SFBZCq5x0QNg.jpeg"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx"><a class="ae jc" href="https://www.pexels.com/photo/cargo-containers-trailer-lot-1624695/" rel="noopener ugc nofollow" target="_blank">Photo by Frans van Heerden</a></figcaption></figure><p id="fdc5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你愿意，你可以在GitHub <a class="ae jc" href="https://github.com/chrisbensen/chris-blogs/blob/main/HowTo/DockerWebServer/DockerWebServer.md" rel="noopener ugc nofollow" target="_blank">这里</a>阅读这篇博文。</p><p id="3b14" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这篇文章对一些人来说似乎是显而易见的，但其他人需要知道如何开始。在容器中运行服务器是许多伟大事情的开始。</p><h2 id="9309" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">先决条件</h2><ol class=""><li id="55e7" class="ko kp hh ig b ih kq il kr ip ks it kt ix ku jb kv kw kx ky bi translated">安装<a class="ae jc" href="https://www.docker.com" rel="noopener ugc nofollow" target="_blank">对接器</a>。</li><li id="083c" class="ko kp hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">阅读<a class="ae jc" rel="noopener" href="/oracledevs/create-a-simple-python-web-server-on-oci-1d3634a1d7c2">创建一个简单的Python Web服务器</a>，因为我们将使用这个Web服务器，但是将它放入Docker容器中。</li></ol><h2 id="205d" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">构建Web服务器</h2><ol class=""><li id="a083" class="ko kp hh ig b ih kq il kr ip ks it kt ix ku jb kv kw kx ky bi translated">创建一个文件夹，并将我们要创建的所有文件放入该文件夹。</li><li id="3b1e" class="ko kp hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">创建<a class="ae jc" href="https://github.com/chrisbensen/chris-blogs/blob/main/HowTo/DockerWebServer/files/index.html" rel="noopener ugc nofollow" target="_blank">index.html</a>:<br/><br/><code class="du le lf lg lh b">&lt;!DOCTYPE html&gt;<br/> &lt;html&gt;<br/> &lt;body&gt;<br/> Hello World<br/> &lt;/body&gt;<br/> &lt;/html&gt;</code></li><li id="60bc" class="ko kp hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">创建<a class="ae jc" href="https://github.com/chrisbensen/chris-blogs/blob/main/HowTo/DockerWebServer/files/server.py" rel="noopener ugc nofollow" target="_blank"> server.py </a>:</li></ol><pre class="je jf jg jh fd li lh lj lk aw ll bi"><span id="a23d" class="jt ju hh lh b fi lm ln l lo lp"><br/> <br/> #!/usr/bin/python3<br/> from http.server import BaseHTTPRequestHandler, HTTPServer<br/> import time<br/> import json<br/> from socketserver import ThreadingMixIn<br/> import threading</span><span id="8cef" class="jt ju hh lh b fi lq ln l lo lp">hostName = “0.0.0.0”<br/> serverPort = 80</span><span id="de25" class="jt ju hh lh b fi lq ln l lo lp">class Handler(BaseHTTPRequestHandler):<br/> def do_GET(self):<br/> # curl http://&lt;ServerIP&gt;/index.html<br/> if self.path == “/”:<br/> # Respond with the file contents.<br/> self.send_response(200)<br/> self.send_header(“Content-type”, “text/html”)<br/> self.end_headers()<br/> content = open(‘index.html’, ‘rb’).read()<br/> self.wfile.write(content)</span><span id="e2a6" class="jt ju hh lh b fi lq ln l lo lp">else:<br/> self.send_response(404)</span><span id="e7be" class="jt ju hh lh b fi lq ln l lo lp">return</span><span id="575f" class="jt ju hh lh b fi lq ln l lo lp">class ThreadedHTTPServer(ThreadingMixIn, HTTPServer):<br/> “””Handle requests in a separate thread.”””</span><span id="5a1e" class="jt ju hh lh b fi lq ln l lo lp">if __name__ == “__main__”:<br/> webServer = ThreadedHTTPServer((hostName, serverPort), Handler)<br/> print(“Server started http://%s:%s" % (hostName, serverPort))</span><span id="49c0" class="jt ju hh lh b fi lq ln l lo lp">try:<br/> webServer.serve_forever()<br/> except KeyboardInterrupt:<br/> pass</span><span id="0619" class="jt ju hh lh b fi lq ln l lo lp">webServer.server_close()<br/> print(“Server stopped.”)<br/> ```</span></pre><h2 id="035f" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ip ke kf kg it kh ki kj ix kk kl km kn bi translated">将所有东西放入Docker容器中</h2><ol class=""><li id="4b38" class="ko kp hh ig b ih kq il kr ip ks it kt ix ku jb kv kw kx ky bi translated">创建<a class="ae jc" href="https://github.com/chrisbensen/chris-blogs/blob/main/HowTo/DockerWebServer/files/Dockerfile" rel="noopener ugc nofollow" target="_blank">docker file</a>:<br/><br/><code class="du le lf lg lh b"> FROM python:3<br/> ADD index.html index.html<br/> ADD server.py server.py<br/> EXPOSE 8000<br/> ENTRYPOINT [“python3”, “server.py”]</code></li><li id="8e07" class="ko kp hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">cd放入您创建的文件夹中。</li><li id="be05" class="ko kp hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">跑<code class="du le lf lg lh b">docker build -f Dockerfile . -t web-server-test</code></li><li id="52fc" class="ko kp hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">运行<code class="du le lf lg lh b">docker run -rm -p 8000:80 — name web-server-test web-server-test</code></li></ol><p id="ccf7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你有它！享受Docker容器中的web服务器。这样做的好处是，作为一名开发人员，您可以在容器内运行和调试东西，就像它们在您的本地计算机上一样，但您的本地系统上安装的唯一东西是Docker。</p></div></div>    
</body>
</html>