<html>
<head>
<title>Securely Connect .NET to Oracle Autonomous Database without a Wallet or Client Configuration Files</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">安全连接。NET到Oracle自治数据库，无需钱包或客户机配置文件</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/securely-connect-net-to-oracle-autonomous-database-without-a-wallet-nor-client-configuration-files-a1438893240a?source=collection_archive---------0-----------------------#2022-01-25">https://medium.com/oracledevs/securely-connect-net-to-oracle-autonomous-database-without-a-wallet-nor-client-configuration-files-a1438893240a?source=collection_archive---------0-----------------------#2022-01-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/fd9987bd44eecca36b4da788bd993c19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1024/format:webp/1*wf-BqWzm53WHGlMUTLfGSg.png"/></div></figure><p id="edf3" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">对于Oracle自治数据库共享(ADB-S)开发人员来说，无需钱包，使用单向传输层安全(TLS)连接变得更加容易。现在，有两种方法可以从。NET到ADB-S。</p><ul class=""><li id="e822" class="jj jk hh in b io ip is it iw jl ja jm je jn ji jo jp jq jr bi translated"><strong class="in hi">相互TLS (mTLS) </strong> —客户端和服务器相互验证</li><li id="08e3" class="jj jk hh in b io js is jt iw ju ja jv je jw ji jo jp jq jr bi translated"><strong class="in hi">单向TLS (TLS) </strong> —仅客户端认证服务器</li></ul><p id="b455" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在这篇博客文章中，我将讨论这两种连接选项之间的区别，带您完成无wallet TLS ADB-S连接设置，并向您展示如何消除将Oracle客户端配置文件(<em class="jx"> tnsnames.ora </em>和<em class="jx"> sqlnet.ora </em>)部署到您的。NET ADB-S应用程序。到最后你的。NET apps将能够连接到ADB-S，而无需任何Oracle wallet或配置文件部署。</p><h1 id="d3bd" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">将mTLS和TLS与ADB-S进行比较</h1><p id="a4bb" class="pw-post-body-paragraph il im hh in b io kw iq ir is kx iu iv iw ky iy iz ja kz jc jd je la jg jh ji ha bi translated">mTLS和TLS都提供到ADB-S的安全连接。一个关键区别是mTLS需要客户端钱包，而TLS不需要。钱包通常从ADB-S管理控制台或工具下载，供每个客户使用。的。NET app必须访问此钱包，才能通过mTLS连接到ADB-S。使用TLS的好处是不再需要钱包管理，并且比mTLS有更好的连接延迟。</p><p id="b916" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">即使没有钱包，TLS连接仍然是安全的，因为管理员必须定义允许连接到ADB-S或使用私有端点的公共端点访问控制列表(ACL)。ACL可以包括IP地址、无类域间路由(CIDR)块和虚拟云网络(VCN)。来自ACL外部的任何连接都必须使用mTLS。因此，TLS需要ACL管理，而mTLS不需要。</p><p id="d8e5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">mTLS仍然是ADB-S的默认连接选项。管理员必须明确启用TLS并更新ACL，以便客户端使用它。启用TLS后，TLS和mTLS ADB-S连接可以共存。</p><p id="44d3" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">Oracle数据提供程序。NET(ODP.NET)从以下版本开始支持无墙TLS:</p><ul class=""><li id="257a" class="jj jk hh in b io ip is it iw jl ja jm je jn ji jo jp jq jr bi translated">ODP。网络核心— 19.13和21.4</li><li id="e00d" class="jj jk hh in b io js is jt iw ju ja jv je jw ji jo jp jq jr bi translated">托管ODP.NET—19.13和21.4</li><li id="93ef" class="jj jk hh in b io js is jt iw ju ja jv je jw ji jo jp jq jr bi translated">非托管ODP.NET—19.14和21.5</li></ul><p id="5895" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">如果您计划使用不带钱包的ODP.NET TLS，请确保使用这些版本之一或更高版本。</p><h1 id="2b32" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">不带钱包的TLS设置</h1><p id="d5e0" class="pw-post-body-paragraph il im hh in b io kw iq ir is kx iu iv iw ky iy iz ja kz jc jd je la jg jh ji ha bi translated">使用无墙TLS和公共端点需要一些配置步骤。以下是要做的事情:</p><p id="79dd" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">1.登录Oracle云控制台。接下来，选择要为其启用TLS的ADB-S实例。在<strong class="in hi">网络</strong>部分，点击<strong class="in hi">访问控制列表</strong>行上的“编辑”链接。</p><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lb"><img src="../Images/f3066c152743039d8730e27dd0500d2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aLVzBY1jTDhLvTAGkni-UQ.png"/></div></div></figure><p id="e11c" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">2.添加允许连接到此ADB-S实例的IP地址、CIDR块和/或vcn，然后单击“保存更改”按钮。</p><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lk"><img src="../Images/8cdbfe7e1c02ea93dc4146bbf5df25ad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gIPHlQnTCzCXP2eZjIzs4A.png"/></div></div></figure><p id="5728" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">3.保存后，您将返回到ADB-S实例控制台页面。在<strong class="in hi">网络</strong>部分，点击<strong class="in hi">相互TLS (mTLS)认证</strong>行上的“编辑”链接。</p><p id="20bf" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">4.取消选中<strong class="in hi">要求相互TLS (mTLS)认证</strong>框，然后单击“保存更改”按钮。</p><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es ll"><img src="../Images/f8c0f42df7a3806329dcb3d49d29e8ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ppLIb0IZjOGxwcVfs6EEBQ.png"/></div></div></figure><p id="f5be" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">ODP。来自指定IP、CIDR块、vcn的. NET应用程序现在可以通过TLS连接到ADB-S实例，而无需钱包。</p><h1 id="c82a" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">消除Oracle客户端文件部署</h1><p id="3d1d" class="pw-post-body-paragraph il im hh in b io kw iq ir is kx iu iv iw ky iy iz ja kz jc jd je la jg jh ji ha bi translated">到目前为止，我们已经了解了如何设置ODP.NET亚行的无线连接。通过消除所有Oracle配置文件分发，我们可以进一步简化客户端文件部署。这将使您不必为每个ODP.NET应用程序部署<em class="jx"> tnsnames.ora </em>和<em class="jx"> sqlnet.ora </em>。</p><p id="a225" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">5.从ADB-S实例控制台页面，单击靠近顶部的“数据库连接”按钮。</p><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lb"><img src="../Images/ceb7a593665863e2bfa4fe2f8ab925cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0nwPahimWl9umZKyJ8mwDQ.png"/></div></div></figure><p id="c34c" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">6.在<strong class="in hi">连接字符串</strong>部分，从<strong class="in hi"> TLS认证</strong>下拉框中选择“TLS”。该选项为每个ADB-S <strong class="in hi"> TNS名称</strong>提供一个连接字符串值。单击您要使用的连接字符串文本值旁边的“复制”链接。</p><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lm"><img src="../Images/44139cd194cd3ef0c9c7c6dae1d9f1de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0UWAZvwCnNM2mBFpce79dA.png"/></div></div></figure><h1 id="54c0" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">连接时不部署Oracle客户机文件</h1><p id="09e1" class="pw-post-body-paragraph il im hh in b io kw iq ir is kx iu iv iw ky iy iz ja kz jc jd je la jg jh ji ha bi translated">连接字符串可以粘贴在ODP.NET连接字符串的“数据源”属性中。这里有一个<a class="ae ln" href="https://github.com/oracle/dotnet-db-samples/blob/master/samples/autonomous-db/odp-core/console-app/no-wallet/autonomous-odp-core.cs" rel="noopener ugc nofollow" target="_blank">示例ODP.NET核心控制台应用程序，它连接到ADB-S，无需钱包</a>。</p><p id="07f4" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">注意TLS连接字符串在可分辨名称值两边使用引号。当您在. NET字符串中保存TLS连接字符串时，请在每个引号前添加一个反斜杠(\)转义序列。转义序列允许。NET将引号识别为TLS连接字符串的一部分，而不是连接字符串的结尾。</p><p id="9db1" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">一旦您提供了“用户Id”和“密码”值，您就可以运行应用程序从ACL上的机器连接到您的ADB-S实例。您应该会看到类似如下的结果:</p><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="lg lh di li bf lj"><div class="er es lo"><img src="../Images/712097e31e8093a0f4fb41842a18ce9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_DOLw2mbueynjC3SGgB0rg.png"/></div></div></figure><p id="c194" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">如果您检查代码，您会发现不需要设置<code class="du lp lq lr ls b">OracleConfiguration.TnsAdmin</code>或<code class="du lp lq lr ls b">OracleConfiguration.WalletLocation</code>，因为不再需要Oracle客户端和wallet文件。</p><p id="2ef8" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在，您拥有了一个到ADB-S的安全ODP.NET连接，无需部署客户端配置文件。</p><h1 id="5637" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">加入对话！</h1><p id="e702" class="pw-post-body-paragraph il im hh in b io kw iq ir is kx iu iv iw ky iy iz ja kz jc jd je la jg jh ji ha bi translated">如果你对甲骨文开发人员在他们的自然栖息地发生的事情感到好奇，来加入我们的<a class="ae ln" href="https://oracledevrel.slack.com/join/shared_invite/zt-uffjmwh3-ksmv2ii9YxSkc6IpbokL1g#/shared-invite/email" rel="noopener ugc nofollow" target="_blank">公共休闲频道</a>！我们不介意成为你的鱼缸🐠</p></div></div>    
</body>
</html>