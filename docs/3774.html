<html>
<head>
<title>Active directory journey to the cloud, Part-1: Setup</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Active directory云之旅，第1部分:设置</h1>
<blockquote>原文：<a href="https://medium.com/globant/active-directory-journey-to-the-cloud-part-1-setup-4441200f1978?source=collection_archive---------1-----------------------#2021-10-22">https://medium.com/globant/active-directory-journey-to-the-cloud-part-1-setup-4441200f1978?source=collection_archive---------1-----------------------#2021-10-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="9c7f" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">介绍</h1><p id="5eea" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在任何云平台上的组织中工作时，您是否想过是什么使得在登录组织的域(笔记本电脑/台式机)以及您工作的云平台时可以使用相同的凭据？这是可能的，因为您的组织广告与云提供商的广告是同步的。在这篇文章中，我们将尝试对任何组织的AD和Azure AD之间的集成有一个高层次的理解。</p><p id="d786" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在本文档中，我们将讨论以下几点:</p><ul class=""><li id="1058" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">先决条件</li><li id="947f" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">工作流程</li><li id="33ab" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">根据设计的工作流程应遵循的步骤</li><li id="924c" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">摘要</li><li id="9f95" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">别名</li><li id="a5ae" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">参考</li></ul><h1 id="b43f" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">先决条件</h1><ul class=""><li id="c71b" class="kf kg hh je b jf jg jj jk jn kt jr ku jv kv jz kk kl km kn bi translated">Azure账户——可以使用<strong class="je hi">预付费</strong>或<strong class="je hi">免费试用</strong>Azure<strong class="je hi">T5】账户。</strong></li><li id="569d" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">自定义域名-你可以购买任何自定义域名通过任何域名提供商，如freenom.com，godaddy.com和更多。</li></ul><h1 id="e74f" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">工作流程</strong></h1><p id="5cfd" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们将把整个系统分成两部分-</p><ol class=""><li id="fbad" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kw kl km kn bi translated">购买自定义域并进行DNS相关配置。</li><li id="337f" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kw kl km kn bi translated">在Azure云级别创建虚拟机，并在其上安装AD角色，以便将其模拟为内部AD。</li></ol><h1 id="f129" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">根据设计的工作流程应遵循的步骤- </strong></h1><p id="1f56" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated"><strong class="je hi"> 1。</strong> <strong class="je hi">购买</strong> <strong class="je hi">自定义</strong> <strong class="je hi">域名</strong> <strong class="je hi">和</strong> <strong class="je hi">做</strong><strong class="je hi"/><strong class="je hi">DNS</strong><strong class="je hi">相关</strong> <strong class="je hi">配置。</strong></p><ul class=""><li id="325a" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">从任何域名提供商处购买一个域名，并记下它。<br/>我将在整个活动中使用<strong class="je hi">chiragplane . tk</strong>域名。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es kx"><img src="../Images/d2f570bc63f0b44fb8321bda9ea7e7e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*dZxD-Ccmi-WmcmaV"/></div></div></figure><ul class=""><li id="c5fc" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">在Azure中创建一个与购买的域名同名的公共DNS区域(chiragpilane.tk ),然后单击Create。NS和SOA记录将在DNS区域内自动创建，但这会增加Azure的额外成本。或者，您也可以使用域名提供商提供的DNS管理器，因为它不会产生任何费用。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es kx"><img src="../Images/e82515d6ef7c982d6da93ef6f599c5c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OGwvZrQuEPR5HpQJ"/></div></div></figure><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es kx"><img src="../Images/4ff2aefd067d084e0ca1595737763732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*7LqbHJBcCPnPa0HD"/></div></div></figure><ul class=""><li id="4837" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">从域提供商DNS管理器中点击管理DNS，将我们域的NS记录映射到Azure中创建的公共DNS区域的NS记录，这样我们域的所有请求都将发送到Azure提供的名称服务器。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es kx"><img src="../Images/4bfa38da58413e9c2a53597d76e18f73.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*8YfO-_QcM3L96MUo"/></div></div></figure><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es kx"><img src="../Images/1b4330d5c9abc6950351f2f367b5eb56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*krOIWl-pLPJRJBI8"/></div></div></figure><ul class=""><li id="43e9" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">您还可以使用任何d NS检查器网站(如mxtoolbox.com dnschecker.org)验证更新的NS记录是否反映了您的域。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es kx"><img src="../Images/f466af125b349e4e0813530f74ead5fe.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eUaJTR0pERaW89ik"/></div></div></figure><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es kx"><img src="../Images/5938e8fd9e6374c2f2d2544f38e1b7e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*jmZbH6Vqz-U1Ivxs"/></div></div></figure><p id="ba45" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><strong class="je hi"> 2。</strong> <strong class="je hi">在Azure云级别创建虚拟机，并在其上安装ad角色，以便将其模拟为本地AD。</strong></p><ul class=""><li id="5550" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">使用Azure中的Windows Server 2019数据中心映像创建一个Windows VM，如下图所示，其余设置保持默认。完成后，点击审查+创建。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es kx"><img src="../Images/b3ebf7409e6ddb1a53c473023a7424e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*CvbfQDaqKFP0BUNs"/></div></div></figure><ul class=""><li id="05e4" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">使用RDP登录虚拟机，并从服务器管理器在虚拟机上安装AD角色。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lj"><img src="../Images/17d790388972a162066a76ca0d14ff0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t20T2Zg9tR9TIgrK"/></div></div></figure><ul class=""><li id="9267" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">安装AD角色后，配置AD并添加您的自定义域。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lk"><img src="../Images/6c0569ff10a1ad40c8dffc39ea3b7c5d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*vvQolEVM-EjBDaYJ"/></div></div></figure><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es ll"><img src="../Images/1a6dd9dc1530d2fb89f94cf5d0862967.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*M1rVRePfbhMCfuuk"/></div></div></figure><ul class=""><li id="9e77" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">保持默认设置，然后点击安装。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lm"><img src="../Images/4030967cad14164c1c0ffb01261851b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Oiu2JJ6OasKI2DBN"/></div></div></figure><ul class=""><li id="ddc5" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">一旦配置了我们的自定义本地AD，我们将添加我们的DNS服务器的私有IP作为部署服务器的Vnet的自定义DNS IP，以便在该Vnet中部署的任何服务器都将使用我们的自定义DNS进行域解析，而不是Azure提供的DNS。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es ln"><img src="../Images/f0d8d8c3074aad7911b162d24e4de29b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*JO_vKr3pqsNUUqr4"/></div></div></figure><ul class=""><li id="1fa5" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">在Azure门户中创建另一个VM，并将其加入到您自定义创建的域中。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lo"><img src="../Images/440d9d3fb4317ef209b1d47d9962bdb4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ge-E_xzXv5NFWZVS"/></div></div></figure><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lp"><img src="../Images/9059b7af46fc75b0946dfaa0293dac70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4ilQE52n4bNvP41b"/></div></div></figure><ul class=""><li id="e4d5" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">将服务器添加到我们的自定义域中。</li></ul><figure class="ky kz la lb fd lc er es paragraph-image"><div class="er es lq"><img src="../Images/10b5c15d37957a85e7bd34670efaf7a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/0*jcUtGL6WjQNifZiW"/></div></figure><figure class="ky kz la lb fd lc er es paragraph-image"><div role="button" tabindex="0" class="ld le di lf bf lg"><div class="er es lr"><img src="../Images/5863e318c8832d95b4e98a58e9c3da39.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tZSkqfR3dLPDj3A3"/></div></div></figure><ul class=""><li id="7ae7" class="kf kg hh je b jf ka jj kb jn kh jr ki jv kj jz kk kl km kn bi translated">请参考本文的第二部分，以了解广告整合的进一步过程。</li></ul><h1 id="5c1f" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">总结</strong></h1><p id="2ff6" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">通过这篇文章，我们能够设置使用自定义域将本地AD与Azure AD集成所需的所有先决条件。文章还解释了Azure的资源之一DNS zone的用法。</p><h1 id="e7b6" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">别名</strong></h1><ul class=""><li id="bee8" class="kf kg hh je b jf jg jj jk jn kt jr ku jv kv jz kk kl km kn bi translated">AD -活动目录</li><li id="6795" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">DNS -域名服务</li><li id="2c9b" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">NS -名称服务器记录</li><li id="188f" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">SOA -授权记录的开始</li><li id="5801" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">VM -虚拟机</li><li id="db1a" class="kf kg hh je b jf ko jj kp jn kq jr kr jv ks jz kk kl km kn bi translated">虚拟网络</li></ul><h1 id="d228" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated"><strong class="ak">参考文献</strong></h1><p id="c30f" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated"><a class="ae ls" href="https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/identity/azure-ad" rel="noopener ugc nofollow" target="_blank">https://docs . Microsoft . com/en-us/azure/architecture/reference-architectures/identity/azure-ad</a></p><div class="lt lu ez fb lv lw"><a href="https://docs.microsoft.com/en-us/azure/active-directory-domain-services/synchronization" rel="noopener  ugc nofollow" target="_blank"><div class="lx ab dw"><div class="ly ab lz cl cj ma"><h2 class="bd hi fi z dy mb ea eb mc ed ef hg bi translated">Azure AD域服务中同步的工作方式</h2><div class="md l"><h3 class="bd b fi z dy mb ea eb mc ed ef dx translated">Azure Active Directory域服务(Azure AD DS)管理的域中的对象和凭据可以创建…</h3></div><div class="me l"><p class="bd b fp z dy mb ea eb mc ed ef dx translated">docs.microsoft.com</p></div></div><div class="mf l"><div class="mg l mh mi mj mf mk lh lw"/></div></div></a></div><p id="c49d" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated"><a class="ae ls" href="https://www.globant.com/studio/cloudops" rel="noopener ugc nofollow" target="_blank"> Globant CloudOps </a></p></div></div>    
</body>
</html>