<html>
<head>
<title>Oracle Management Cloud — Agent Deployment</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle管理云—代理部署</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/oracle-management-cloud-agent-deployment-24394dde017f?source=collection_archive---------0-----------------------#2019-02-16">https://medium.com/oracledevs/oracle-management-cloud-agent-deployment-24394dde017f?source=collection_archive---------0-----------------------#2019-02-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="ba05" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">作者:<a class="iw ix ge" href="https://medium.com/u/3757393c69bd?source=post_page-----24394dde017f--------------------------------" rel="noopener" target="_blank">mono war Mukul</a>(OCM)&amp;<a class="iw ix ge" href="https://medium.com/u/ba3f0a72ff81?source=post_page-----24394dde017f--------------------------------" rel="noopener" target="_blank">NASS yam Basha</a>(甲骨文王牌总监，OCM)</h2></div><h2 id="8f3d" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated">介绍</h2><p id="a6be" class="pw-post-body-paragraph jw jx hh jy b jz ka ii kb kc kd il ke jj kf kg kh jn ki kj kk jr kl km kn ko ha bi translated">在第一篇文章中，我们已经了解了如何创建和配置Oracle管理云实例。在本文中，我们将按照后续步骤在目标端下载并安装Oracle管理云代理。在此示例中，目标将是一个双节点RAC群集。</p><h2 id="f3e5" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated"><strong class="ak"> OMC代理</strong></h2><p id="228e" class="pw-post-body-paragraph jw jx hh jy b jz ka ii kb kc kd il ke jj kf kg kh jn ki kj kk jr kl km kn ko ha bi translated">Oracle Management Cloud agent在将分析数据发送到OMC服务器方面发挥着主要和关键的作用，在吸引人的图形用户界面中为少数人提供了漂亮的图形。我们将在下一篇文章中看到如何应用分析以及如何收集数据。在本文中，我们将纯粹关注代理安装以及如何注册密钥。</p><p id="10fd" class="pw-post-body-paragraph jw jx hh jy b jz kp ii kb kc kq il ke jj kr kg kh jn ks kj kk jr kt km kn ko ha bi translated">要下载适用于OMC的代理软件，请访问Oracle管理云门户，并按照“控制面板→服务→管理云”的导航进行操作这个导航将我们重定向到OMC实例和OMC界面。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es ku"><img src="../Images/4c495c683c8fd81722958d804b35f763.png" data-original-src="https://miro.medium.com/v2/resize:fit:506/format:webp/1*-y3AOCk5NnXC9ewgh_bFSw.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx">Navigation to Management Cloud Page</figcaption></figure><p id="72b9" class="pw-post-body-paragraph jw jx hh jy b jz kp ii kb kc kq il ke jj kr kg kh jn ks kj kk jr kt km kn ko ha bi translated">从OMC服务访问OMC门户网站如下。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lg"><img src="../Images/ce077f87f7e80dfb56ae27784eb23c0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*V9xhk7G0200ulSVkkt_fJA.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx">OMC Portal Access</figcaption></figure><p id="af9e" class="pw-post-body-paragraph jw jx hh jy b jz kp ii kb kc kq il ke jj kr kg kh jn ks kj kk jr kt km kn ko ha bi translated">现在，OMC网址将带我们进入OMC界面，以管理、监控和控制管理云。最初，我们将通过导航“管理云à管理à代理”从OMC界面下载所需平台的代理软件</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lg"><img src="../Images/d1dd7d33aef80b1d0688d0a01194ecf8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*bZGGXKAfCwMK2q-yzB8VbQ.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx">OMC Interface</figcaption></figure><p id="be88" class="pw-post-body-paragraph jw jx hh jy b jz kp ii kb kc kq il ke jj kr kg kh jn ks kj kk jr kt km kn ko ha bi translated">在Oracle Management Cloud Agent页面中，我们将执行两项操作。</p><ol class=""><li id="c0c6" class="lh li hh jy b jz kp kc kq jj lj jn lk jr ll ko lm ln lo lp bi translated">注册密钥</li><li id="ff51" class="lh li hh jy b jz lq kc lr jj ls jn lt jr lu ko lm ln lo lp bi translated">下载代理软件</li><li id="52f3" class="lh li hh jy b jz lq kc lr jj ls jn lt jr lu ko lm ln lo lp bi translated">代理的安装。</li></ol><h2 id="24b5" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated"><strong class="ak">创建注册密钥</strong></h2><p id="df8d" class="pw-post-body-paragraph jw jx hh jy b jz ka ii kb kc kd il ke jj kf kg kh jn ki kj kk jr kl km kn ko ha bi translated">最初，我们将创建注册密钥—针对身份域颁发的注册密钥，这些密钥将在代理安装时使用。创建注册密钥后，确保状态处于有效状态。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lg"><img src="../Images/502592d32bd0ebc082951a23ae3a2820.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*GRLJn9KBU02RJTSw9iVXeg.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx">Creating registration keys for OMC agents</figcaption></figure><p id="a924" class="pw-post-body-paragraph jw jx hh jy b jz kp ii kb kc kq il ke jj kr kg kh jn ks kj kk jr kt km kn ko ha bi translated">创建注册密钥后，使用导航“操作菜单→管理注册密钥”按照导航下载密钥。它将显示到目前为止创建的所有注册密钥。选择适当的注册码并下载。</p><h2 id="ed5f" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated"><strong class="ak">下载代理软件</strong></h2><p id="53cf" class="pw-post-body-paragraph jw jx hh jy b jz ka ii kb kc kd il ke jj kf kg kh jn ki kj kk jr kl km kn ko ha bi translated">现在，我们将继续下一步，下载所需平台的代理文件。在同一个OMC代理中，我们将通过选择I)代理类型ii)操作系统，从“下载”选项卡下载代理。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lg"><img src="../Images/2ece6bb4390f351bbff3ca1e06e4cf87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*7YziilteTJxJpe-fcW0nhQ.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx">Download the platform based agent software.</figcaption></figure><p id="6c4b" class="pw-post-body-paragraph jw jx hh jy b jz kp ii kb kc kq il ke jj kr kg kh jn ks kj kk jr kt km kn ko ha bi translated">下载页面中有值得注意的信息来保存值</p><ol class=""><li id="a0aa" class="lh li hh jy b jz kp kc kq jj lj jn lk jr ll ko lm ln lo lp bi translated">租户名称</li><li id="a085" class="lh li hh jy b jz lq kc lr jj ls jn lt jr lu ko lm ln lo lp bi translated">OMC _网址</li><li id="6a75" class="lh li hh jy b jz lq kc lr jj ls jn lt jr lu ko lm ln lo lp bi translated">AGENT_REGISTRATION_KEY —这些值将在代理安装时使用。</li></ol><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lg"><img src="../Images/c6310182dff435db2bdf950e3092cc11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*OpP8pR20aqlG_uxVdhPipw.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx">Save the information related to OMC, TENANT Names</figcaption></figure><h2 id="d616" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated">正在安装OMC代理</h2><p id="6be3" class="pw-post-body-paragraph jw jx hh jy b jz ka ii kb kc kd il ke jj kf kg kh jn ki kj kk jr kl km kn ko ha bi translated">下载代理软件后，我们将移动到目标服务器，并确保校验和值与上述图像相同。</p><pre class="kv kw kx ky fd lv lw lx ly aw lz bi"><span id="99b9" class="iy iz hh lw b fi ma mb l mc md">[oracle@racdb1 tmp]$ unzip cloudagent_linux.x64_1.35.0.zip -d /u01/app/OMC<br/>Archive: cloudagent_linux.x64_1.35.0.zip<br/>inflating: /u01/app/omcagent/unzip<br/>inflating: /u01/app/omcagent/AgentDeployment.sh<br/>inflating: /u01/app/omcagent/agentimage.properties<br/>inflating: /u01/app/omcagent/agent.rsp<br/>inflating: /u01/app/omcagent/agent_software_build.xml<br/>extracting: /u01/app/omcagent/agentcoreimage.zip<br/>inflating: /u01/app/omcagent/AgentInstall.sh</span></pre><p id="c041" class="pw-post-body-paragraph jw jx hh jy b jz kp ii kb kc kq il ke jj kr kg kh jn ks kj kk jr kt km kn ko ha bi translated">从解压缩的文件夹中，我们可以看到带有“agent.rsp”的文件，我们将制作该文件的副本，这样我们就不会干扰原始文件。</p><pre class="kv kw kx ky fd lv lw lx ly aw lz bi"><span id="04c9" class="iy iz hh lw b fi ma mb l mc md">$ cp agent.rsp agent.rsp.bkp<br/>$ vi agent.rsp</span></pre><p id="a2a1" class="pw-post-body-paragraph jw jx hh jy b jz kp ii kb kc kq il ke jj kr kg kh jn ks kj kk jr kt km kn ko ha bi translated">在代理响应文件中，我们将授予以下信息</p><ol class=""><li id="a78a" class="lh li hh jy b jz kp kc kq jj lj jn lk jr ll ko lm ln lo lp bi translated">租户名称</li><li id="7cbe" class="lh li hh jy b jz lq kc lr jj ls jn lt jr lu ko lm ln lo lp bi translated">OMC _网址</li><li id="50eb" class="lh li hh jy b jz lq kc lr jj ls jn lt jr lu ko lm ln lo lp bi translated">代理_注册_密钥</li></ol><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lg"><img src="../Images/ad52c4fb05a3d1bc5e6d3fd819e72ba6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*SCisogwtCn88Dy8U0YXwUw.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx">Validate the values of the response file</figcaption></figure><p id="e716" class="pw-post-body-paragraph jw jx hh jy b jz kp ii kb kc kq il ke jj kr kg kh jn ks kj kk jr kt km kn ko ha bi translated">完成agent.rsp文件中的更改后，我们将运行代理安装程序，并且我们将忽略如下响应文件。</p><h2 id="3293" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated"><strong class="ak">以oracle OS用户身份运行代理安装</strong></h2><pre class="kv kw kx ky fd lv lw lx ly aw lz bi"><span id="1f18" class="iy iz hh lw b fi ma mb l mc md">[oracle@racdb1 OMC]$ ./AgentInstall.sh AGENT_RSP_FILE=agent.rsp<br/>Unzipping agent software, this may take some time…<br/>Installing Cloud Agent…<br/>Cloud Agent parameter validation started…<br/>Cloud Agent pre-requisite checks started…<br/>Cloud Agent base directory creation started…<br/>Security artifacts download started…<br/>Cloud Agent setup started…<br/>Registering Cloud Agent…<br/>Starting Cloud Agent…<br/>Cloud Agent started.<br/>Cloud Agent installation completed.<br/>Cloud Agent post installation checks started.<br/>Cloud Agent is up and running.<br/>Cloud Agent is communicating to Oracle Management Cloud.<br/>Cloud Agent is monitored in Oracle Management Cloud.<br/>Cloud Agent post installation checks completed.<br/>To start Cloud Agent upon Operating System restart include ‘/u01/app/OMC/omcagent/agent_inst/bin/omcli start agent’ in the start-up scripts.<br/>For further details please refer <a class="ae me" href="http://www.oracle.com/pls/topic/lookup?ctx=en/cloud/paas/management-cloud&amp;id=deploy_agent." rel="noopener ugc nofollow" target="_blank">http://www.oracle.com/pls/topic/lookup?ctx=en/cloud/paas/management-cloud&amp;id=deploy_agent.</a></span></pre><h2 id="0832" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated"><strong class="ak">检查代理状态</strong></h2><p id="1e12" class="pw-post-body-paragraph jw jx hh jy b jz ka ii kb kc kd il ke jj kf kg kh jn ki kj kk jr kl km kn ko ha bi translated">将代理二进制文件导出到路径，以访问带有关联文件的omcli可执行文件。</p><pre class="kv kw kx ky fd lv lw lx ly aw lz bi"><span id="acd3" class="iy iz hh lw b fi ma mb l mc md">[oracle@racdb1 OMC]$ export PATH=$PATH:/u01/app/OMC/omcagent/agent_inst/bin</span></pre><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lg"><img src="../Images/2bd8637cc85523c73bad8ece1ce5dd3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*v1721JtQ55ObH6vlKeU3Fw.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx">Agent Status</figcaption></figure><h2 id="0dad" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated"><strong class="ak">执行根脚本</strong></h2><p id="b0b2" class="pw-post-body-paragraph jw jx hh jy b jz ka ii kb kc kd il ke jj kf kg kh jn ki kj kk jr kl km kn ko ha bi translated">以root用户身份登录并执行root.sh脚本来更新存储库。</p><pre class="kv kw kx ky fd lv lw lx ly aw lz bi"><span id="8f4e" class="iy iz hh lw b fi ma mb l mc md">[opc@racdb1 app]$ sudo su -<br/>Last login: Mon Nov 5 23:32:04 UTC 2018 on pts/0<br/>[root@racdb1 ~]# /u01/app/OMC/omcagent/core/1.35.0/root.sh<br/>/etc exist<br/>Creating /etc/oragchomelist file…<br/>/bin/chown: invalid group: `oracle:#OSDBA_GROUP#’</span></pre><h2 id="9659" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated"><strong class="ak">在第二个节点上扩展OMC云代理</strong></h2><p id="8abb" class="pw-post-body-paragraph jw jx hh jy b jz ka ii kb kc kd il ke jj kf kg kh jn ki kj kk jr kl km kn ko ha bi translated">到目前为止，我们已经在节点1上完成了所有必需的步骤，同样，我们还需要在第二个节点上执行所有的步骤。假设我们已经在第二个节点上安装了代理，并在第二个节点上检查OMC代理的状态，如下所示。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lg"><img src="../Images/bca78f1f644eb56093219f2541192a6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*ziQJYYqZxkHiuUGltYMUlg.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx">Agent Status from the 2nd node of cluster</figcaption></figure><h2 id="fa83" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated"><strong class="ak">代理部署后验证OMC服务器</strong></h2><p id="1bb6" class="pw-post-body-paragraph jw jx hh jy b jz ka ii kb kc kd il ke jj kf kg kh jn ki kj kk jr kl km kn ko ha bi translated">我们已经在RAC集群的两个节点上部署了代理，现在我们将使用导航“OMC控制台à管理à代理”来检查OMC服务器控制台中的状态。验证云代理是否正在RAC配置的所有节点上运行。</p><figure class="kv kw kx ky fd kz er es paragraph-image"><div class="er es lg"><img src="../Images/01d109124505bb2eb7f8a79c404d1291.png" data-original-src="https://miro.medium.com/v2/resize:fit:1204/format:webp/1*y4APWx_pvS67wVh6cdNZcw.png"/></div><figcaption class="lc ld et er es le lf bd b be z dx">Agents latest status from OMC</figcaption></figure><blockquote class="mf mg mh"><p id="a172" class="jw jx mi jy b jz kp ii kb kc kq il ke mj kr kg kh mk ks kj kk ml kt km kn ko ha bi translated"><strong class="jy hi">问题</strong>？目标将如何与OMC服务器通信？这里，注册密钥在从目标到服务器的身份验证中起着重要作用。同样，SSH密钥也适用于从一台服务器到另一台服务器的身份验证。</p></blockquote><h2 id="d9ee" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated"><strong class="ak">总结</strong></h2><p id="ead3" class="pw-post-body-paragraph jw jx hh jy b jz ka ii kb kc kd il ke jj kf kg kh jn ki kj kk jr kl km kn ko ha bi translated">我们已经了解了如何为代理注册密钥，以及如何下载所需的基于平台的代理并在RAC的两个节点上进行安装，最后，我们还从OMC控制台看到了代理的状态以及分步说明。</p><h2 id="6971" class="iy iz hh bd ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv bi translated"><strong class="ak">作者</strong></h2><p id="7add" class="pw-post-body-paragraph jw jx hh jy b jz ka ii kb kc kd il ke jj kf kg kh jn ki kj kk jr kl km kn ko ha bi translated">Nassyam Basha是一名数据库管理员。他有大约十年的Oracle数据库管理员工作经验，目前是eprosed KSA公司的数据库专家。他拥有马德拉斯大学的计算机应用硕士学位。他是Oracle 11g认证大师和Oracle ACE总监。他以超级英雄的身份积极参与甲骨文相关论坛，如OTN，甲骨文支持被授予“大师”称号，并担任OTN版主，与OTN一起撰写了大量关于Toad World的文章。他维护着一个与甲骨文技术相关的博客，<a class="ae me" href="http://www.oracle-ckpt.com/" rel="noopener ugc nofollow" target="_blank">www.oracle-ckpt.com</a>，可以通过<a class="ae me" href="https://www.linkedin.com/in/nassyambasha/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/nassyambasha/</a>找到他</p><p id="71ac" class="pw-post-body-paragraph jw jx hh jy b jz kp ii kb kc kq il ke jj kr kg kh jn ks kj kk jr kt km kn ko ha bi translated">Monowar Mukul目前担任首席Oracle数据库专家。我是Oracle认证大师(Oracle 12c认证大师管理、Oracle 12c认证大师MAA和Oracle 11g认证大师管理)。他在Oracle MAA空间担任了17年的Oracle数据库管理员顾问，负责数据库云服务器和非数据库云服务器系统、Oracle云空间和SOA中间件。他曾在澳大利亚的多个商业领域工作，包括高等教育、能源、政府、采矿和运输。作为一名首席Oracle数据库专家，他展示了高度发展的批判性思维和分析技能。你可以在https://www.linkedin.com/in/monowarmukul/的<a class="ae me" href="https://www.linkedin.com/in/monowarmukul/" rel="noopener ugc nofollow" target="_blank">找到关于他和他的工作成就的更多细节</a></p></div></div>    
</body>
</html>