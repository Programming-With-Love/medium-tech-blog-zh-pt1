<html>
<head>
<title>OCI Streaming — create producer/consumer use case using ATP, OIC and Kafka connect</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">OCI流媒体—使用ATP、OIC和Kafka connect创建生产者/消费者使用案例</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/oci-streaming-create-producer-consumer-use-case-using-atp-oic-and-kafka-connect-e5be254edea3?source=collection_archive---------0-----------------------#2021-09-20">https://medium.com/oracledevs/oci-streaming-create-producer-consumer-use-case-using-atp-oic-and-kafka-connect-e5be254edea3?source=collection_archive---------0-----------------------#2021-09-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="0dbb" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">介绍</h1><p id="6cb8" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在本文中，我将解释如何使用Oracle云基础设施(OCI)流服务来创建系统之间的集成。我将在OCI流中创建一个流，以接收来自自治事务处理(ATP)表的数据(当新记录插入表中时)，Oracle Integration Cloud (OIC)汇集该流并使用该消息。我还使用Oracle Kubernetes Engine (OKE)和Oracle Container Registry (OCIR)来部署Kafka connect。这是一个非常简单的用例，您可以将这个解决方案扩展到几个真实的用例。</p><h1 id="1b11" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">体系结构</h1><p id="09ac" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在这个架构中，我已经在私有网络中部署了所有服务(您可以在公共访问中使用ATP和流实例，但这是一个更安全的架构。这完全取决于您的用例)。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ka"><img src="../Images/767abd06bcc4c3ce40985c6a4d628260.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*72bjKQW1DMQNJzn0jH3s5g.png"/></div></div></figure><p id="665a" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">当您在数据库表(在我们的例子中是ATP数据库)中插入新记录时，Kafka source connector将挑选记录并将其放入OCI流中。然后，OIC池集成将使用OCI流中的消息(使用OIC连接代理。OIC流适配器池功能仅支持使用OIC连接代理)。</p><h1 id="4867" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">履行</h1><p id="e195" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">要实现此架构，我们应该在OCI租赁中创建以下服务和部署:</p><ul class=""><li id="6fbb" class="kr ks hh je b jf km jj kn jn kt jr ku jv kv jz kw kx ky kz bi translated">创建隔间</li><li id="3b29" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">配置网络(数据库、流、连接代理和Oracle Kubernetes集群的子网以及它们之间的所有防火墙规则)。</li><li id="3b41" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">创建IAM策略和组。</li><li id="76a3" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">提供仅具有私人访问权限的自治事务处理数据库。</li><li id="2b76" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">仅通过私有访问设置OCI流池。</li><li id="1119" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">创建Kafka连接配置</li><li id="d8d6" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">供应Oracle Kubernetes集群。</li><li id="f373" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">提供OIC实例。</li><li id="f285" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">供应计算实例并执行OIC连接代理。</li><li id="3061" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">构建docker容器映像以将记录接收到OCI流(ATP表中的池)并在OCI容器注册表中推送容器。</li><li id="37ce" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">使用上一步中创建的容器在OKE中创建部署。</li><li id="ea2a" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">在伊斯兰会议组织中建立一体化以汇集OCI流。</li><li id="3134" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">测试端到端解决方案。</li></ul><p id="63e2" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">我不打算在本文中详细解释所有上述步骤，我将只讨论我在本文中实现的重要注意事项和特定配置(与OKE中的部署、流配置和OIC集成相同)。你可以在OCI文档中找到其他信息。</p><p id="ec7c" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">让我们开始构建这个用例。</p><h2 id="fcf3" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated"><strong class="ak"> <em class="lt">创建网络</em> </strong></h2><p id="aaab" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我假设您已经有了一个OCI租约，并创建了自己的区间和网络基础设施(根据架构)。这是我在这个用例中使用的简单网络架构。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es lu"><img src="../Images/8a880717043a2e26f710ec3b65e2aa42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C19ZyiLlfogwf7_YbPLdYw.png"/></div></div></figure><ul class=""><li id="0d5b" class="kr ks hh je b jf km jj kn jn kt jr ku jv kv jz kw kx ky kz bi translated"><strong class="je hi"> db-private-subnet </strong>托管ATP数据库。</li><li id="48a1" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated"><strong class="je hi"> app-private-subnet </strong>托管OIC连接代理和OCI流。</li><li id="99c2" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated"><strong class="je hi">节点私有子网</strong>托管OKE工作节点。</li><li id="b71f" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated"><strong class="je hi"> lb-public-subnet </strong>托管公共负载平衡器(你不需要它来实现这个架构)。</li><li id="c033" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated"><strong class="je hi"> mgmt-subnet </strong>托管与堡垒主机相同的公共实例，以访问私有网络中的服务(您可以使用OCI堡垒服务代替)。</li></ul><p id="61ed" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">请记住，您需要有安全列表或网络安全组(NSG)规则，以允许OKE工作节点访问ATP数据库和OCI流，以及OIC连接代理访问OCI流。</p><p id="c47d" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">例如，您需要在ATP NSG中遵循以下规则，以允许应用子网在端口1522上访问数据库。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es lv"><img src="../Images/769c601fcae3d050d7edb1307daa7e11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EnQIJpTyrqI6OAq4iEdqbQ.png"/></div></div></figure><p id="cf07" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">并且，遵循流NSG中的规则，以允许OKE工作节点和OIC连接代理访问端口9020上的流。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es lw"><img src="../Images/bb07324733211414dc4343b3d0a33167.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Cmf4aN_jpdaMkEkjGOfSuA.png"/></div></div></figure><h2 id="ef64" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated">供应ATP数据库</h2><p id="4e1f" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在db-private-subnet(仅可在VCN境内访问)内为ATP实例预配专用端点。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es lx"><img src="../Images/8d1e8fdf4b4d147d1ed3f990df54fe54.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vmpVXjIfpVpGZper8EkSLg.png"/></div></div></figure><p id="b73c" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">使用SQL Developer连接到数据库(您可以在Bastion主机上使用端口转发来访问私有子网中的数据库)，然后执行以下SQL命令来创建DB和表。</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="19ea" class="lf if hh lz b fi md me l mf mg">CREATE USER StreamingDemo IDENTIFIED BY "xxxxxxx";</span><span id="ddea" class="lf if hh lz b fi mh me l mf mg">GRANT CONNECT, RESOURCE TO StreamingDemo;</span><span id="b930" class="lf if hh lz b fi mh me l mf mg">GRANT UNLIMITED TABLESPACE TO StreamingDemo;</span><span id="aee5" class="lf if hh lz b fi mh me l mf mg">CREATE TABLE Users</span><span id="a822" class="lf if hh lz b fi mh me l mf mg">(</span><span id="0bcf" class="lf if hh lz b fi mh me l mf mg">ID NUMBER(10,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,</span><span id="2598" class="lf if hh lz b fi mh me l mf mg">USERNAME VARCHAR2(50) NOT NULL,</span><span id="c3bc" class="lf if hh lz b fi mh me l mf mg">FIRST_NAME VARCHAR2(50) NOT NULL,</span><span id="e15c" class="lf if hh lz b fi mh me l mf mg">MIDDLE_NAME VARCHAR2(50),</span><span id="fe41" class="lf if hh lz b fi mh me l mf mg">LAST_NAME VARCHAR2(50) NOT NULL,</span><span id="88c0" class="lf if hh lz b fi mh me l mf mg">AGE NUMBER(5,0) DEFAULT 0 NOT NULL,</span><span id="6537" class="lf if hh lz b fi mh me l mf mg">CREATED_ON TIMESTAMP(9) NOT NULL,</span><span id="8c61" class="lf if hh lz b fi mh me l mf mg">CONSTRAINT TEST_PK PRIMARY KEY</span><span id="8b12" class="lf if hh lz b fi mh me l mf mg">(</span><span id="7ed0" class="lf if hh lz b fi mh me l mf mg">ID</span><span id="59e5" class="lf if hh lz b fi mh me l mf mg">)</span><span id="05a9" class="lf if hh lz b fi mh me l mf mg">ENABLE</span><span id="6f31" class="lf if hh lz b fi mh me l mf mg">);</span></pre><p id="9321" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">您可以使用您喜欢的任何用户名和任何表结构(但是您需要在以后相应地更改其他配置)。</p><h2 id="6e8c" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated">设置OCI流池</h2><p id="3f4a" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">导航到分析和人工智能，并在OCI控制台的消息选项卡下选择流。您首先需要创建一个具有私有连接的流池。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mi"><img src="../Images/e3a2185f3a5358c65345236e567f1254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o9QyUffb0QNyQO15kOkPCg.png"/></div></div></figure><p id="cf4d" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">输入名称并为流池选择VCN、子网和NSG后，选择“显示高级选项”并为此池选中“自动创建主题”选项。使用此选项，在创建Kafka源连接后，流实例将自动在池中创建。您也可以更新分区数量和保留期。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mj"><img src="../Images/900ccc783cb965d991d667c0f298d216.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qa_cnq0fbY_yt8R43zrj5g.png"/></div></div></figure><p id="168e" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">在配置流池后，您需要捕获该池的Kafka连接设置。在流池详细信息页面中，选择“资源”选项卡中的“Kafka连接设置”选项，并捕获引导服务器、SASL连接设置中的用户名、安全协议和安全机制。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mk"><img src="../Images/fd1e04e802c45f2a6759a00c157d5a20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IV_BlLBYng8EUEsUK5-sUw.png"/></div></div></figure><p id="460b" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">此外，您需要为您的用户生成认证令牌，并将其用作Kafka连接密码。为此，在OCI控制台中导航到“用户设置”,选择“身份验证令牌”、“生成新令牌”和“捕获令牌”。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ml"><img src="../Images/6b8d3ed10969919b252a9f84c80008e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*8bPsG8qnwAmwMcHp3a1AHQ.png"/></div></div></figure><h2 id="755e" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated">创建Kafka连接配置</h2><p id="81c9" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">OCI流媒体与大多数Kafka APIs兼容，允许您使用为Kafka编写的应用程序向流媒体服务发送消息和从流媒体服务接收消息，而无需重写代码。</p><p id="4ef4" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">流还可以利用Kafka Connect生态系统直接与外部源(如数据库、对象存储或Oracle云上的任何微服务)进行交互。Kafka connectors可以轻松地自动创建、发布和交付主题，同时利用流媒体服务的高吞吐量和耐用性。</p><p id="2d21" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">Kafka connect允许您构建连接器，将Apache Kafka兼容的流服务与其他应用程序和数据系统(在我们的例子中是ATP数据库)集成在一起。我们有两种类型的卡夫卡连接:源和汇。</p><p id="6978" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">要将Kafka连接器与OCI流配合使用，您需要创建Kafka Connect配置。为此，在OCI控制台中导航到“流”,然后在菜单栏中选择“Kafka Connect配置”。然后选择“创建Kafka连接配置”。这三个压缩主题旨在由Kafka Connect和Streaming用来存储配置和状态管理数据，而不应用于存储您的数据。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mm"><img src="../Images/e518646fa8119519ea65bb4956c61009.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hg-aK9gVkeR7Bixy7zzBvg.png"/></div></div></figure><h2 id="5323" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated">调配OKE集群</h2><p id="3849" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在这一部分中，您需要在OCI提供一个Kubernetes集群。您可以使用Oracle managed Kubernetes engine(OKE)来配置集群。我假设您已经供应和配置了您的OKE集群。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mn"><img src="../Images/b2a274b06cd501d4d2d3c6dc110dbfad.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nlL8_0N1fCMl_lPwUCLUZg.png"/></div></div></figure><h2 id="295b" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated">构建docker容器</h2><p id="7b54" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在构建docker映像之前，您需要首先下载依赖项。</p><ul class=""><li id="55e1" class="kr ks hh je b jf km jj kn jn kt jr ku jv kv jz kw kx ky kz bi translated">下载JDBC驱动程序并解压到libs文件夹(<a class="ae mo" href="https://www.oracle.com/database/technologies/appdev/jdbc-downloads.html" rel="noopener ugc nofollow" target="_blank">https://www . Oracle . com/database/technologies/app dev/JDBC-downloads . html</a>)</li><li id="0e9b" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">下载Kafka connect JDBC连接器，解压到kafka-connect-jdbc文件夹(<a class="ae mo" href="https://www.confluent.io/hub/confluentinc/kafka-connect-jdbc" rel="noopener ugc nofollow" target="_blank">https://www . confluent . io/hub/confluent Inc/Kafka-connect-JDBC</a>)</li><li id="f0fd" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated">下载ATP Wallet文件并提取到Wallet文件夹中</li></ul><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mp"><img src="../Images/fe4927fe6537cef0c8c8a9a5b59a573c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gvpx94e8nTF20Qpl00HUMw.png"/></div></div></figure><p id="14c6" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">创建Kafka源连接属性文件(connect-distributed . properties)。使用您在设置OCI流池和Kafka connect配置期间捕获的信息来更新此属性文件。</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="a018" class="lf if hh lz b fi md me l mf mg">group.id=<em class="mq">atp-kafta-source-connect-group</em><br/>bootstrap.servers=<strong class="lz hi">&lt;OCI Streaming Pool FQDN&gt;</strong>:9092<br/>sasl.mechanism=PLAIN<br/>security.protocol=SASL_SSL</span><span id="5518" class="lf if hh lz b fi mh me l mf mg">sasl.jaas.config=org.apache.kafka.common.security.plain.PlainLoginModule required username="<strong class="lz hi">&lt;SASL Connection Username&gt;</strong>" password="<strong class="lz hi">&lt;User Auth Token&gt;</strong>";</span><span id="30a0" class="lf if hh lz b fi mh me l mf mg">producer.sasl.mechanism=PLAIN<br/>producer.security.protocol=SASL_SSL</span><span id="1173" class="lf if hh lz b fi mh me l mf mg">producer.sasl.jaas.config= org.apache.kafka.common.security.plain.PlainLoginModule required username="<strong class="lz hi">&lt;SASL Connection Username&gt;</strong>" password="<strong class="lz hi">&lt;User Auth Token&gt;</strong>";</span><span id="a95c" class="lf if hh lz b fi mh me l mf mg">consumer.sasl.mechanism=PLAIN<br/>consumer.security.protocol=SASL_SSL</span><span id="8f2b" class="lf if hh lz b fi mh me l mf mg">consumer.sasl.jaas.config= org.apache.kafka.common.security.plain.PlainLoginModule required username="<strong class="lz hi">&lt;SASL Connection Username&gt;</strong>" password="<strong class="lz hi">&lt;User Auth Token&gt;</strong>";</span><span id="f2f1" class="lf if hh lz b fi mh me l mf mg">config.storage.replication.factor=1<br/>config.storage.partitions=1<br/>config.storage.topic=<strong class="lz hi">&lt;Kafka Connect Configuration Config&gt;</strong></span><span id="2d67" class="lf if hh lz b fi mh me l mf mg">status.storage.replication.factor=1<br/>status.storage.partitions=1<br/>status.storage.topic=<strong class="lz hi">&lt;Kafka Connect Configuration Status&gt;</strong></span><span id="1b35" class="lf if hh lz b fi mh me l mf mg">offset.storage.replication.factor=1<br/>offset.storage.partitions=1<br/>offset.storage.topic=<strong class="lz hi">&lt;Kafka Connect Configuration Offset&gt;</strong></span><span id="95c5" class="lf if hh lz b fi mh me l mf mg">offset.flush.interval.ms=10000<br/>offset.flush.timeout.ms=5000</span><span id="165c" class="lf if hh lz b fi mh me l mf mg">key.converter=org.apache.kafka.connect.storage.StringConverter<br/>value.converter=org.apache.kafka.connect.json.JsonConverter<br/>key.converter.schemas.enable=false<br/>value.converter.schemas.enable=true</span><span id="6944" class="lf if hh lz b fi mh me l mf mg">internal.key.converter=org.apache.kafka.connect.json.JsonConverterinternal.value.converter=org.apache.kafka.connect.json.JsonConverter</span><span id="cec4" class="lf if hh lz b fi mh me l mf mg">task.shutdown.graceful.timeout.ms=10000</span></pre><p id="7f49" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">创建Dockerfile文件</p><p id="ec91" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">我正在使用debezium基础映像来构建docker文件(有几个选项来构建您的映像，如果您喜欢，您可以选择不同的方法)。</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="22fd" class="lf if hh lz b fi md me l mf mg">FROM debezium/connect:0.10<br/>USER root<br/>RUN mkdir /wallet<br/>USER kafka<br/>COPY libs/* /kafka/libs/<br/>COPY kafka-connect-jdbc/lib/* /kafka/libs/<br/>COPY wallet/* /wallet/<br/>COPY connect-distributed.propertes /kafka/config/connect-distributed.properties</span></pre><p id="8c4f" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">然后，使用以下命令构建docker映像(使用docker build)</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="4947" class="lf if hh lz b fi md me l mf mg"><em class="mq">docker build -t atp-kafka-source-connect:v1</em> <em class="mq">.</em></span></pre><p id="fb3a" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">您可以通过在本地机器上使用以下命令创建一个容器来本地测试您的docker映像(请记住，要进行此测试，您需要从本地机器连接到端口9020上的流池，您可以通过使用端口转发来实现这一点)。</p><p id="ddc1" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">(*注意:在执行此命令之前，请更新Kafka流池端点和Kafka connect配置OCID)。</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="d8c3" class="lf if hh lz b fi md me l mf mg"><em class="mq">CONNECT_CONFIG_ID=</em><strong class="lz hi"><em class="mq">&lt;OCID of Kafka connect configuration&gt;</em></strong></span><span id="1c11" class="lf if hh lz b fi mh me l mf mg"><em class="mq">CONFIG_STORAGE_TOPIC=$CONNECT_CONFIG_ID-config<br/>OFFSET_STORAGE_TOPIC=$CONNECT_CONFIG_ID-offset<br/>STATUS_STORAGE_TOPIC=$CONNECT_CONFIG_ID-status</em></span><span id="b1c3" class="lf if hh lz b fi mh me l mf mg"><em class="mq">docker run -it --rm --name atp-kafta-source-connect -p 8083:8083 \<br/>-e GROUP_ID=atp-kafta-source-connect-group \<br/>-e BOOTSTRAP_SERVERS=</em><strong class="lz hi"><em class="mq">&lt;Kafka Streaming pool FQDN&gt;</em></strong><em class="mq">:9092 \<br/>-e CONFIG_STORAGE_TOPIC=$CONFIG_STORAGE_TOPIC \<br/>-e OFFSET_STORAGE_TOPIC=$OFFSET_STORAGE_TOPIC \<br/>-e STATUS_STORAGE_TOPIC=$STATUS_STORAGE_TOPIC \<br/>-v `pwd -P`/atp-kafka-source-connect.properties:/kafka/config/connect-distributed.properties \<br/>atp-kafka-source-connect:v1</em></span></pre><p id="ad03" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">我不打算在本地机器上测试这个映像，稍后我将在Kubernetes集群中部署和测试这个映像。</p><p id="0ee7" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">将docker映像推送到OCIR存储库(首先在OCIR创建oss-kafka连接器私有存储库)</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mr"><img src="../Images/8e0560927edde2afa3949d7fba62806c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5eKkz7Sn1A4Xsl7EhFSLIg.png"/></div></div></figure><p id="1136" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">在下一部分中，我将把图像推送到OCI容器存储服务(OCIR)。您可以使用以下命令登录OCIR，标记映像并将映像推送到OCIR(在运行脚本之前相应地更新OCIR用户名、密码、区域和租赁)。</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="0743" class="lf if hh lz b fi md me l mf mg"><em class="mq">docker login mel.ocir.io<br/>Username: </em><strong class="lz hi"><em class="mq">&lt;OCIR User - OCI username&gt;<br/></em></strong><em class="mq">Password: </em><strong class="lz hi"><em class="mq">&lt;Auth token&gt;</em></strong></span><span id="99a3" class="lf if hh lz b fi mh me l mf mg"><em class="mq">docker tag atp-kafka-source-connect:v1 </em><strong class="lz hi"><em class="mq">&lt;Region&gt;</em></strong><em class="mq">.ocir.io/</em><strong class="lz hi"><em class="mq">&lt;Tenancy&gt;</em></strong><em class="mq">/oss-kafka-connect:v1</em></span><span id="1206" class="lf if hh lz b fi mh me l mf mg">docker push <strong class="lz hi"><em class="mq">&lt;Region&gt;</em></strong><em class="mq">.ocir.io/</em><strong class="lz hi"><em class="mq">&lt;Tenancy&gt;</em></strong><em class="mq">/oss-kafka-connect:v1</em></span></pre><p id="0d0c" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">在这一步中，我将配置Kubernetes集群。首先，您需要配置您的本地环境来访问Kubernetes集群(通过在您的本地环境中创建Kubeconfig)。</p><p id="4c01" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">使用以下命令为Kafka connect部署和从Kubernetes集群到OCIR的Kubernetes secret创建Kubernetes命名空间:</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="7544" class="lf if hh lz b fi md me l mf mg"><em class="mq">kubectl create namespace oss-kafka-connect</em></span><span id="e15a" class="lf if hh lz b fi mh me l mf mg"><em class="mq">kubectl create secret docker-registry ocir-secret --docker-server=</em><strong class="lz hi"><em class="mq">&lt;Region&gt;</em></strong><em class="mq">.ocir.io --docker-username='</em><strong class="lz hi"><em class="mq">&lt;Tenancy&gt;</em></strong><em class="mq">/</em><strong class="lz hi"><em class="mq">&lt;OCIR Username&gt;</em></strong><em class="mq">' --docker-password='</em><strong class="lz hi"><em class="mq">&lt;Auth Token&gt;</em></strong><em class="mq">' --docker-email='&lt;Email Address' -n oss-kafka-connect</em></span></pre><p id="6834" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">在Kubernetes中创建以下配置映射(此配置映射包含Kafka connect属性)。在进入下一步之前，相应地使用Kafka connect配置和OCI流数据更新配置图。</p><figure class="kb kc kd ke fd kf"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="8c02" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">执行以下命令创建配置映射:</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="7ba4" class="lf if hh lz b fi md me l mf mg"><em class="mq">kubectl apply -f atp-kafka-source-connect-configmap.yaml -n oss-kafka-connect</em></span></pre><p id="0d4d" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">创建Kubernetes部署和服务(该服务创建公共负载平衡器，它侦听端口80并将请求转发到端口8083上Kubernetes部署)。在进入下一步之前，相应地使用Kafka connect配置和OCI流数据更新部署。</p><figure class="kb kc kd ke fd kf"><div class="bz dy l di"><div class="ms mt l"/></div></figure><p id="4e52" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">执行以下命令在Kubernetes集群中创建部署:</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="752f" class="lf if hh lz b fi md me l mf mg"><em class="mq">kubectl apply -f atp-kafka-source-connect-deployment.yaml -n oss-kafka-connect</em></span></pre><p id="1720" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">在Kubernetes集群中部署Kafka connect之后，应该为数据库创建连接器配置。您可以使用Kafka connect REST APIs在Kafka connect实例中创建配置。您需要创建以下json文件(更新ATP连接名称、数据库密码、主题前缀和您想要加入白名单的表列表),并使用以下REST API将配置应用到Kafka连接器。</p><figure class="kb kc kd ke fd kf"><div class="bz dy l di"><div class="ms mt l"/></div></figure><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="a157" class="lf if hh lz b fi md me l mf mg"><em class="mq">curl -iX POST -H "Accept:application/json" -H "Content-Type:application/json" -d @connector-config.json  http://&lt;Kubernetes deployment load balancer public IP&gt;/connectors</em></span></pre><h2 id="38d9" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated">提供OIC实例</h2><p id="2698" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在这一步中，您需要在您的租用中提供一个OIC实例。为此，导航到OCI控制台中的开发人员服务，并选择应用程序集成选项卡下的集成菜单。然后，您可以在选定的隔离专区中创建新的集成实例。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mu"><img src="../Images/022d504e851d6194a37f3cdd98934497.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BTHWcX-lOMqtuel8t_IzJg.png"/></div></div></figure><h2 id="b258" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated">部署OIC连接代理</h2><p id="4673" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在配置OIC实例之后，您需要在一个私有子网(例如app-private-subnet)中配置一个计算实例。然后，您应该连接到OIC实例服务控制台(从OIC实例详细信息页面选择“服务控制台”)，导航到集成菜单项下的代理页面。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es mv"><img src="../Images/d25e6657ed7fdab24f5b1a873e573ec9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1214/format:webp/1*q7yv5aDfKl8M0daKAdztgg.png"/></div></figure><p id="7848" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">创建代理组:</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mw"><img src="../Images/2bc13e737df9c0b2fed4ecba23e4baa4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-6dwR-4cfGbLZYgZDSdADw.png"/></div></div></figure><p id="3024" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">下载连接代理zip文件，并将该文件传输到计算机。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es mx"><img src="../Images/eb201f631f361e32ffd5279f4ef80bf2.png" data-original-src="https://miro.medium.com/v2/resize:fit:870/format:webp/1*Dt3PNJM52AnDTMq4FpMJ0w.png"/></div></figure><p id="39a4" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">连接到计算实例并解压缩连接代理文件。更新InstaleProfile.cfg文件并更新以下信息:</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="54c8" class="lf if hh lz b fi md me l mf mg"># Required Parameters<br/># oic_URL format should be <a class="ae mo" href="https://hostname:sslPort" rel="noopener ugc nofollow" target="_blank">https://hostname:sslPort</a><br/>oic_URL=<a class="ae mo" href="https://app-instance-apaccpt03-me.integration.ocp.oraclecloud.com:443" rel="noopener ugc nofollow" target="_blank"><strong class="lz hi">https://&lt;OIC Instance URL&gt;:&lt;</strong></a><strong class="lz hi">OIC Instance Port&gt;</strong><br/>agent_GROUP_IDENTIFIER=<strong class="lz hi">&lt;Agent Group ID&gt;</strong></span><span id="8f3b" class="lf if hh lz b fi mh me l mf mg">oic_USER=<strong class="lz hi">&lt;Username&gt;</strong><br/>oic_PASSWORD=<strong class="lz hi">&lt;Password&gt;</strong></span></pre><p id="8b6b" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">最后，使用以下命令运行连接代理:</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="3daf" class="lf if hh lz b fi md me l mf mg">java -jar connectivityagent.jar &amp;</span></pre><p id="a2e4" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">要创建到OCI流服务的连接，您需要使用以下命令创建包含OCI流证书的密钥库。</p><pre class="kb kc kd ke fd ly lz ma mb aw mc bi"><span id="1109" class="lf if hh lz b fi md me l mf mg">echo -n | openssl s_client -connect <strong class="lz hi">&lt;OCI Streaming pool endpoint&gt;</strong>:9092 | sed -ne '/-BEGIN CERTIFICATE-/,/-END CERTIFICATE-/p' &gt; app-streaming.cert</span><span id="9636" class="lf if hh lz b fi mh me l mf mg">keytool -keystore app_streaming_truststore.jks -alias OSSStream -import -file app-streaming.cert</span></pre><h2 id="6fea" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated">创建OIC集成以汇集来自OCI流的消息</h2><p id="8e3e" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">首先，您需要使用OCI流适配器创建一个连接。为此，导航到OIC控制台中集成菜单下的连接，并使用OCI流适配器创建新连接。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es my"><img src="../Images/f048b75aa0d0c29e49a3e04ea73e4044.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ocaKWjtgZVTXHGd5k6sRsw.png"/></div></div></figure><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es mz"><img src="../Images/8b28595365b7eb73edcfbf1d89ce8b21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m6tXH8V3nkzKS1T2dtrWzQ.png"/></div></div></figure><p id="ef7c" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">创建连接后，使用Kafka连接设置更新以下连接属性</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es na"><img src="../Images/eae60ce1dccfe63638689ef4889b54e4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jhyNSR-e7SM7e1b3sM8cpA.png"/></div></div></figure><p id="e799" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">引导服务器:<strong class="je hi"> &lt; OCI流池端点&gt; :9020 </strong></p><p id="4adb" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">SASL用户名:<strong class="je hi"> SASL连接用户名</strong></p><p id="85dd" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">SASL密码:<strong class="je hi"> &lt;认证令牌&gt; </strong></p><p id="c2c4" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">信任库:<strong class="je hi"> &lt;上传在前面步骤&gt; </strong>中创建的密钥库</p><p id="3bca" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">信任库密码:<strong class="je hi"> &lt;密钥库密码如果存在&gt; </strong></p><p id="485a" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">代理组:<strong class="je hi">选择在前面步骤</strong>中创建的代理组</p><p id="4549" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">最后，测试并保存连接。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es nb"><img src="../Images/a821564615ec94dd303d34489aa4cb91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KKMUnJXd2FHDkSLWUKwxYw.png"/></div></div></figure><p id="537b" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">最后一步，您需要在OIC中创建应用程序驱动的集成，以使用上一步创建的连接来汇集来自OCI流的消息。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es nc"><img src="../Images/d944201e42adf3d345513aed5b6f106f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1084/format:webp/1*uSkO8Ryvlf2YuqaluVIwkg.png"/></div></figure><p id="d7a4" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">向集成起点添加连接</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es nd"><img src="../Images/0eb9266e63ef2ae22f9024f77c1eecce.png" data-original-src="https://miro.medium.com/v2/resize:fit:728/format:webp/1*1pdM3momWoOwj6VB0-nudw.png"/></div></figure><p id="c14b" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">选择流、分区和使用者组。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ne"><img src="../Images/3c23c5f1254ec4757408beda95b2c062.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AQizab9Ddbrnj0RLw5Gm5Q.png"/></div></div></figure><p id="04bd" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">最后选择消息JSON结构:</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div class="er es nf"><img src="../Images/7ff0ca8f8f89800c04c81d3151a28b18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*ThpBzVXipSUCUdvipuVoTA.png"/></div></figure><p id="5ebf" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">保存并激活集成。</p><h2 id="95d9" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated">测试实现</h2><p id="816b" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">您可以通过在ATP数据库的表中插入新记录来测试这个用例。</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ng"><img src="../Images/0af18f8f25f5f0a0aeea8d98b3ddd654.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yabflaAy4wSTVx_TEzrEag.png"/></div></div></figure><p id="2947" class="pw-post-body-paragraph jc jd hh je b jf km jh ji jj kn jl jm jn ko jp jq jr kp jt ju jv kq jx jy jz ha bi translated">如果所有配置都正确，您可以在OIC中触发集成</p><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es nh"><img src="../Images/106f336bb026730185c1c5ef88ed820d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eX2AIMEduNQEzOQ2nhK2UA.png"/></div></div></figure><figure class="kb kc kd ke fd kf er es paragraph-image"><div role="button" tabindex="0" class="kg kh di ki bf kj"><div class="er es ni"><img src="../Images/3de22fe071f727cc97c45eaee00117fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0MROPuFkIlvpp7HJSTNqyw.png"/></div></div></figure><h2 id="8870" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated">结论</h2><p id="55b7" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">这是一个简单的使用案例，说明如何使用OCI流来接收和使用消息。您可以将此用例扩展到多个场景，如将IOT传感器数据接收到OCI流，并使用OIC中的集成实例来汇集流和丰富传感器数据。</p><h2 id="4b41" class="lf if hh bd ig lg lh li ik lj lk ll io jn lm ln is jr lo lp iw jv lq lr ja ls bi translated">参考</h2><ul class=""><li id="b2d1" class="kr ks hh je b jf jg jj jk jn nj jr nk jv nl jz kw kx ky kz bi translated"><a class="ae mo" href="https://docs.oracle.com/en-us/iaas/Content/GSG/Concepts/baremetalintro.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en-us/iaas/Content/GSG/Concepts/baremetalintro . htm</a></li><li id="00aa" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated"><a class="ae mo" href="https://blogs.oracle.com/developers/post/using-kafka-connect-with-oracle-streaming-service-and-autonomous-db" rel="noopener ugc nofollow" target="_blank">https://blogs . Oracle . com/developer/post/using-Kafka-connect-with-Oracle-streaming-service-and-autonomous-db</a></li><li id="ba94" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated"><a class="ae mo" href="https://docs.oracle.com/en-us/iaas/Content/Streaming/Concepts/streamingoverview.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en-us/iaas/Content/Streaming/Concepts/Streaming overview . htm</a></li><li id="2e61" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated"><a class="ae mo" href="https://www.confluent.io/product/confluent-connectors/?utm_medium=sem&amp;utm_source=google&amp;utm_campaign=ch.sem_br.nonbrand_tp.prs_tgt.kafka-connectors_mt.xct_rgn.apac_lng.eng_dv.all_con.kafka-connectors&amp;utm_term=kafka%20connect%20jdbc&amp;creative=&amp;device=c&amp;placement=&amp;gclid=CjwKCAjw4qCKBhAVEiwAkTYsPJdw7FnEavLvhMW-jIKIxwle6iDPGKUYuVM6P75dLHssW7e5PuPkxRoCQvQQAvD_BwE" rel="noopener ugc nofollow" target="_blank">https://www.confluent.io/product/confluent-connectors</a></li><li id="f8d4" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated"><a class="ae mo" href="https://docs.oracle.com/en-us/iaas/Content/ContEng/home.htm" rel="noopener ugc nofollow" target="_blank">https://docs.oracle.com/en-us/iaas/Content/ContEng/home.htm</a></li><li id="6996" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated"><a class="ae mo" href="https://docs.oracle.com/en-us/iaas/integration/index.html" rel="noopener ugc nofollow" target="_blank">https://docs.oracle.com/en-us/iaas/integration/index.html</a></li><li id="7c8f" class="kr ks hh je b jf la jj lb jn lc jr ld jv le jz kw kx ky kz bi translated"><a class="ae mo" href="https://docs.oracle.com/en/cloud/paas/integration-cloud/integrations-user/managing-agent-groups-and-connectivity-agent.html" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en/cloud/PAAs/integration-cloud/integrations-user/managing-agent-groups-and-connectivity-agent . html</a></li></ul></div></div>    
</body>
</html>