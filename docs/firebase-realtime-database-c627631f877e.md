# Firebase å®æ—¶æ•°æ®åº“â€”â€”é¢¤æŒ¯ğŸ’™ğŸ’›

> åŸæ–‡ï¼š<https://medium.com/google-developer-experts/firebase-realtime-database-c627631f877e?source=collection_archive---------0----------------------->

åœ¨æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºä¸­ï¼Œæˆ‘ä»¬æ€»æ˜¯éœ€è¦ä½¿ç”¨æ•°æ®åº“ã€‚æœ‰è®¸å¤šæä¾›æ•°æ®åº“ä½¿ç”¨çš„æœåŠ¡æä¾›å•†ã€‚Firebase å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œå®ƒä¸ºæˆ‘ä»¬æä¾›å®æ—¶æ•°æ®åº“ã€‚

![](img/00a4fceb5fb31a9406bf509193db1a0a.png)

Firebase å®æ—¶æ•°æ®åº“æ˜¯**ï¼Œä¸€ä¸ªäº‘æ‰˜ç®¡çš„ NoSQL æ•°æ®åº“ï¼Œè®©ä½ ä»¥ JSON æ ¼å¼åœ¨ä½ çš„ç”¨æˆ·ä¹‹é—´å®æ—¶å­˜å‚¨å’ŒåŒæ­¥æ•°æ®**ã€‚

ä»å®æ—¶æ•°æ®åº“å¼€å§‹ï¼Œæˆ‘ä»¬æœ‰ä»¥ä¸‹æ­¥éª¤:

*   ä» Firebase æ§åˆ¶å°å¯ç”¨å®æ—¶æ•°æ®åº“
*   ç¼–å†™åç«¯ä»£ç æ¥å¤„ç†å®æ—¶æ•°æ®åº“çš„è¯»å†™
*   ä»ç”¨æˆ·ç•Œé¢è°ƒç”¨å‡½æ•°æ¥è¯»å†™æ•°æ®ã€‚

æ‰€ä»¥ï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ï¼

## æ­¥éª¤ 1:ä» Firebase æ§åˆ¶å°å¯ç”¨å®æ—¶æ•°æ®åº“

è¿›å…¥ä½ çš„ [Firebase æ§åˆ¶å°](https://console.firebase.google.com/)ï¼Œä»å³è¾¹é¢æ¿è¿›å…¥å®æ—¶æ•°æ®åº“ã€‚æ‚¨å°†çœ‹åˆ°ä¸€ä¸ªæ¬¢è¿å±å¹•ï¼Œä¸Šé¢æœ‰ä¸€ä¸ª`Create Database`æŒ‰é’®ã€‚

![](img/16d5e68bfbf42bc4f971052436123ccd.png)

å•å‡»è¯¥æŒ‰é’®åï¼Œæ‚¨å°†çœ‹åˆ°ä¸€ä¸ªå¼¹å‡ºçª—å£ï¼Œå¯ä»¥é€‰æ‹©åŒºåŸŸä»¥åŠæ˜¯å¦è¦åœ¨æµ‹è¯•æˆ–é”å®šæ¨¡å¼ä¸‹åˆ›å»ºæ•°æ®åº“ã€‚æ‚¨å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œé€‰æ‹©ã€‚

åˆ›å»ºæ•°æ®åº“åï¼Œæ‚¨å°†è¿›å…¥æ•°æ®åº“é¡µé¢ã€‚

æˆ‘ä»¬å®é™…ä¸Šæ˜¯åœ¨ç»§ç»­æˆ‘ä»¬åœ¨ [Firebase è®¤è¯](https://abhishekdoshi26.medium.com/firebase-authentication-flutter-80e8f00338ac)å’Œ [Firebase Firestore](/google-developer-experts/firestore-database-flutter-38c9a0cc77c7) æ–‡ç« ä¸­åˆ›å»ºçš„åº”ç”¨ç¨‹åºã€‚è¯·éšæ„æŸ¥çœ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„ç™»å½•/æ³¨å†Œåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬éœ€è¦ä¸€äº›ç”¨æˆ·ä¿¡æ¯ã€‚æ‰€ä»¥â€¦â€¦â€¦æ˜¯æ—¶å€™é‡‡å–è¡ŒåŠ¨äº†ï¼

## æ­¥éª¤ 2:åç«¯ä»£ç 

æ‰€ä»¥ä¸‹ä¸€æ­¥æ˜¯åˆ›å»ºæˆ‘ä»¬çš„è‹±é›„åç«¯æ–‡ä»¶ï¼Œå®ƒå°†å¤„ç†å®æ—¶æ•°æ®åº“çš„è¯»å†™ã€‚åœ¨å¼€å§‹ä½¿ç”¨å®æ—¶æ•°æ®åº“ä¹‹å‰ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–¹æ³•æ¥è·å– auth åŒ…ä¸­çš„å½“å‰ user-idã€‚

```
String getCurrentUserId() {
    return _firebaseAuth.currentUser?.uid ?? '';
  }
```

åœ¨æˆ‘ä»¬å¼€å§‹åç«¯ä»£ç ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æ•°æ®åº“æ˜¯å¦‚ä½•å­˜å‚¨æ•°æ®çš„ã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒFirestore æ•°æ®åº“ä»¥é›†åˆæ–‡æ¡£æ ¼å¼å­˜å‚¨æ•°æ®ï¼Œå®æ—¶æ•°æ®åº“ç¨æœ‰ä¸åŒã€‚å®ƒä»¥ [JSON æ ¼å¼](https://en.wikipedia.org/wiki/JSON)å­˜å‚¨æ•°æ®ï¼Œè¿™ä½¿å¾—æˆ‘ä»¬åœ¨å¤„ç†å¤§é‡æ•°æ®æ—¶å˜å¾—éå¸¸å®¹æ˜“ï¼Œå› ä¸º JSON æ˜¯å¤„ç†å¤§é‡æ•°æ®çš„æœ€ä½³æ ¼å¼ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬æƒ³ä»æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºå‘é€æ•°æ®æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨æ•°æ®ç»“æ„`Map`ä¸­å‘é€ï¼Œç”¨`String`ä½œä¸ºé”®çš„æ•°æ®ç±»å‹ï¼Œå¹¶ä¸”`value`çš„æ•°æ®ç±»å‹å¯ä»¥æ˜¯åŠ¨æ€çš„ã€‚è¿™å°±æ˜¯æˆ‘ä»¬å¿…é¡»ä½¿ç”¨ userID è€Œä¸æ˜¯ email ä½œä¸ºå¯†é’¥çš„åŸå› ï¼Œå› ä¸º email ä¼šåŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œè€Œæˆ‘ä»¬åœ¨ä¸–ç•Œä¸Šä»»ä½•åœ°æ–¹éƒ½æ²¡æœ‰è§è¿‡ç‰¹æ®Šå­—ç¬¦æˆ– email ä½œä¸º JSON çš„å¯†é’¥ğŸ¤¯ï¼

å› æ­¤ï¼Œè®©æˆ‘ä»¬ä¸ºå®æ—¶æ•°æ®åº“åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„åŒ…ï¼Œæˆ–è€…ç®€å•åœ°åˆ›å»ºä¸€ä¸ªæ–‡ä»¶æ¥å­˜å‚¨ä»£ç (ç„¶è€Œï¼Œæ ¹æ®æ‚¨çš„æ–¹ä¾¿ç¨‹åº¦ï¼ŒåŒ…æ–¹æ³•æœ‰åˆ©äºä½¿æ‚¨çš„åº”ç”¨ç¨‹åºå¯ä¼¸ç¼©)ã€‚æ‚¨å¿…é¡»åœ¨æ‚¨çš„`pubspec.yaml`æ–‡ä»¶ä¸­æ·»åŠ `[firebase_database](https://pub.dev/packages/firebase_database)`åŒ…ã€‚

åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œå¯¹äº write æ–¹æ³•ï¼Œæˆ‘ä»¬ä»ç”¨æˆ·(ä»è°ƒç”¨è¯¥å‡½æ•°çš„çˆ¶å‡½æ•°)è·å– userId å’Œæ•°æ®ã€‚ç„¶åï¼Œæˆ‘ä»¬åˆ›å»ºå®æ—¶æ•°æ®åº“çš„å®ä¾‹(ä¹Ÿç§°ä¸º FirebaseDatabase)ã€‚ç°åœ¨ï¼Œå¦‚æ‚¨æ‰€è§ï¼Œåœ¨åˆ›å»ºå®ä¾‹çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å·²ç»å°†`user/$userId`ä¼ é€’ç»™äº†`ref`æ–¹æ³•ã€‚å› æ­¤ï¼Œå¦‚æœæ•°æ®åº“ä¸åŒ…å«å¸¦æœ‰è¿™ä¸ª userID çš„ JSON æ¡ç›®ï¼Œå®ƒå°†åˆ›å»ºä¸€ä¸ªï¼Œå¦‚æœå®ƒå·²ç»å­˜åœ¨ï¼Œå®ƒå°†ä½¿ç”¨é‚£ä¸ªè®°å½•ã€‚ç„¶åæˆ‘ä»¬ç®€å•åœ°ä½¿ç”¨åŒ…ä¸­å¯ç”¨çš„`set`æ–¹æ³•ã€‚

å¯¹äº read æ–¹æ³•ï¼Œæˆ‘ä»¬é¦–å…ˆä»¥åŒæ ·çš„æ–¹å¼åˆ›å»ºå®ä¾‹ï¼Œç„¶åä½¿ç”¨`get`æ–¹æ³•è·å–æ‰€æä¾›ç”¨æˆ·çš„è®°å½•ã€‚ç°åœ¨ï¼Œå¦‚æœæ•°æ®å­˜åœ¨ï¼Œæˆ‘ä»¬ç”¨å¿«ç…§å€¼åˆ›å»ºä¸€ä¸ªæ˜ å°„(å› ä¸ºæ•°æ®å¯ä»¥ä½œä¸ºå¯¹è±¡ä½¿ç”¨)ï¼Œç„¶åè¿™é‡Œæˆ‘ä»¬åªè¿”å›ç”¨æˆ·åã€‚

## æ­¥éª¤ 3:ä» UI è°ƒç”¨å‡½æ•°

ä¸€æ—¦æ•°æ®åº“ä»£ç å‡†å¤‡å¥½äº†ï¼Œå°±å¯ä»¥ä»æˆ‘ä»¬çš„ UI ä¸­ä½¿ç”¨è¿™äº›å‡½æ•°äº†ã€‚æ‰€ä»¥æˆ‘ä»¬çš„è®¡åˆ’æ˜¯åœ¨åˆ›å»ºæ–°å¸æˆ·æ—¶è°ƒç”¨`write`å‡½æ•°ï¼Œåœ¨ç”¨æˆ·ç™»å½•æ—¶è°ƒç”¨`read`å‡½æ•°ã€‚ç®€å•ï¼

å› æ­¤ï¼Œåœ¨åˆ›å»ºå¸æˆ·æ—¶ï¼Œæˆ‘ä»¬ä½¿ç”¨ä»¥ä¸‹ä»£ç ç‰‡æ®µ:

```
RealtimeDatabase.write(
        userId: _authService.getCurrentUserId(),
        data: {
          'name': event.name,
          'email': event.email,
        },
      );
```

æ­£å¦‚æˆ‘ä»¬ä¹‹å‰ä½¿ç”¨ bloc ä¸€æ ·ï¼Œæˆ‘ä»¬åªæ˜¯ä» event ç±»ä¸­è·å–åç§°å’Œäº‹ä»¶ï¼Œå¹¶ä»æˆ‘ä»¬åœ¨`authService`ä¸­åˆ›å»ºçš„å‡½æ•°ä¸­è·å– userIdã€‚

ç°åœ¨ï¼Œä¸ºäº†è¯»å–æ•°æ®ï¼Œæˆ‘ä»¬è°ƒç”¨ read å‡½æ•°:

```
final _name =
          await RealtimeDatabase.read(userId: _authService.getCurrentUserId());
```

è¿™é‡Œæˆ‘ä»¬åªæ˜¯ä¼ é€’æ¥è‡ª`authService`çš„ç”¨æˆ·æ ‡è¯†

## è®©æˆ‘ä»¬çœ‹çœ‹å®ƒåœ¨æ•°æ®åº“ä¸­çš„æ ·å­

![](img/e509392a9275112bfd1db5d5b75f7838.png)

åœ¨è¿™é‡Œä½ å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬åœ¨æ ‘çš„æ ¹éƒ¨æœ‰`users`,åœ¨é‡Œé¢ï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå¸¦æœ‰ç”¨æˆ· id çš„ç”¨æˆ·ï¼Œæ¯ä¸ªç”¨æˆ· id æœ‰ä¸¤ä¸ªå­—æ®µï¼Œç”µå­é‚®ä»¶å’Œå§“åã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å¦‚ä½•è¯»å†™å®æ—¶æ•°æ®åº“ä¸­çš„æ•°æ®ã€‚ç„¶è€Œï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è®¸å¤šå…¶ä»–æ–¹æ³•æ¥å¤„ç†æ•°æ®ã€‚è¯·éšæ„ç”¨å®˜æ–¹æ–‡ä»¶[æ£€æŸ¥å®ƒä»¬ã€‚](https://firebase.google.com/docs/database/flutter/read-and-write)

ç®€å•ä¸æ˜¯å—ï¼Ÿæˆ‘å¸Œæœ›ä½ ä»è¿™ç¯‡æ–‡ç« ä¸­å­¦åˆ°äº†ä¸€äº›æ–°çš„ä¸œè¥¿ï¼

## å¸Œæœ›ä½ å–œæ¬¢è¿™ç¯‡æ–‡ç« ï¼

ä½ å¯ä»¥é€šè¿‡å…‹éš† GitHub åº“æ¥å°è¯•ä¸€ä¸‹ï¼

ç–‘æƒ‘ï¼Ÿéšæ—¶ç•™è¨€ [@AbhishekDoshi26](https://linktr.ee/abhishekdoshi26)

[![](img/b087f76a48b4b718836c94f0b1a579e8.png)](https://www.buymeacoffee.com/abhishekdoshi26)

> *ä¸è¦åœæ­¢ï¼Œç›´åˆ°ä½ å‘¼å¸ï¼ğŸ’™
> - Abhishek Doshi*