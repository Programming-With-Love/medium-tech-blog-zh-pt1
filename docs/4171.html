<html>
<head>
<title>Android Navigation Components — Part 2</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android导航组件—第2部分</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/android-navigation-components-part-2-ca643eb301e3?source=collection_archive---------2-----------------------#2018-05-25">https://medium.com/google-developer-experts/android-navigation-components-part-2-ca643eb301e3?source=collection_archive---------2-----------------------#2018-05-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/b78bb7fc2eda42df0702e4172596b2a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yrrhYqKxSA1mjfV2sZCt6A.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">photo by burst.shopify.com</figcaption></figure><div class=""/><p id="a909" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">两周前，在谷歌I/O大会上，谷歌发布了许多优秀的工具，帮助开发者加快开发过程，开发出更好的应用。</p><p id="1a9f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">其中一些公告是Android导航组件。导航组件是Android Jetpack库集的库部分。</p><p id="c6ec" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这个库的创建是为了帮助在android应用中实现一致的导航。</p><p id="6d38" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在我之前的<a class="ae jr" rel="noopener" href="/google-developer-experts/android-navigation-components-part-1-236b2a479d44">帖子</a>中，我谈到了我认为你应该创建或规划你的应用程序结构的准备工作。</p><p id="9efb" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">了解应用程序结构是帮助您更好地启动或迁移应用程序以使用导航组件的关键。</p><p id="9bb3" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果你没有机会阅读我之前的帖子，我建议你在继续之前先阅读一下<a class="ae jr" rel="noopener" href="/google-developer-experts/android-navigation-components-part-1-236b2a479d44">这里</a>。</p><p id="79bb" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在我之前的文章中，我举了一个例子，一个应用程序可以查找附近的活动，并允许用户购买门票。<br/>在帖子的最后，我们得到了下面的用例图:</p><figure class="jt ju jv jw fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es js"><img src="../Images/6b0683f23bd2c102c19cb158afbbf343.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*U7eKXCRZ_f1tXc7-yz3UYg.png"/></div></div></figure><p id="7185" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果你把这个图顺时针旋转90度，你会得到一个看起来像树的东西。在这个树中，您会注意到:</p><ol class=""><li id="2740" class="jx jy hw iv b iw ix ja jb je jz ji ka jm kb jq kc kd ke kf bi translated">用户需要做的最重要的动作在更高的层次上。</li><li id="e78c" class="jx jy hw iv b iw kg ja kh je ki ji kj jm kk jq kc kd ke kf bi translated">用户需要做的最不重要的动作在较低的级别。</li><li id="3318" class="jx jy hw iv b iw kg ja kh je ki ji kj jm kk jq kc kd ke kf bi translated">为了实现某些操作，用户需要遵循一组步骤。</li><li id="cfc6" class="jx jy hw iv b iw kg ja kh je ki ji kj jm kk jq kc kd ke kf bi translated">有一些流依赖于嵌套流(登录是一个嵌套流)。</li></ol><p id="d75f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在开始实现导航组件之前，让我们看一下这个库的主要概念:</p><h2 id="4e60" class="kl km hw bd kn ko kp kq kr ks kt ku kv je kw kx ky ji kz la lb jm lc ld le lf bi translated">导航图</h2><p id="83ce" class="pw-post-body-paragraph it iu hw iv b iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm lk jo jp jq ha bi translated">导航图是描述一组导航目的地及其连接的图。</p><p id="5eb0" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果你看一下上面的用例图，它可以用一个单独的导航图或一组多个导航图来表示，这取决于你决定使用的实现(单活动或多活动应用)。</p><h2 id="6203" class="kl km hw bd kn ko kp kq kr ks kt ku kv je kw kx ky ji kz la lb jm lc ld le lf bi translated">导航目的地</h2><p id="b31b" class="pw-post-body-paragraph it iu hw iv b iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm lk jo jp jq ha bi translated">导航目的地可以是应用程序中的屏幕或任何视图。在上面的用例图中，导航目的地相当于用户可以做的不同用例。</p><h2 id="4b35" class="kl km hw bd kn ko kp kq kr ks kt ku kv je kw kx ky ji kz la lb jm lc ld le lf bi translated">导航动作</h2><p id="64f1" class="pw-post-body-paragraph it iu hw iv b iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm lk jo jp jq ha bi translated">导航动作是连接一个目的地和另一个目的地的链接。<br/>一个动作知道它正在连接哪些目的地，以及它们之间将流动的信息类型。</p><h2 id="2b65" class="kl km hw bd kn ko kp kq kr ks kt ku kv je kw kx ky ji kz la lb jm lc ld le lf bi translated">导航主机</h2><p id="0f6a" class="pw-post-body-paragraph it iu hw iv b iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm lk jo jp jq ha bi translated">导航主机是一个组件，它知道导航图中的所有目的地和动作。<br/>它处理不同目的地之间的导航。</p></div><div class="ab cl ll lm go ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ha hb hc hd he"><h1 id="2cda" class="ls km hw bd kn lt lu lv kr lw lx ly kv lz ma mb ky mc md me lb mf mg mh le mi bi translated">在项目中实现导航组件</h1><p id="ccc3" class="pw-post-body-paragraph it iu hw iv b iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm lk jo jp jq ha bi translated">为了开始在你的应用中实现导航组件，你需要首先将你正在使用的Android Studio版本升级到最新的3.2 Canary版本。</p><p id="51ec" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这将确保您拥有所有最新的工具，如导航编辑器，以支持您实现导航。你可以在这里找到最新版本的Android Studio <a class="ae jr" href="https://developer.android.com/studio/preview/?utm_source=android-studio" rel="noopener ugc nofollow" target="_blank">。</a></p><h2 id="2e75" class="kl km hw bd kn ko kp kq kr ks kt ku kv je kw kx ky ji kz la lb jm lc ld le lf bi translated">添加导航组件依赖关系</h2><figure class="jt ju jv jw fd hj"><div class="bz dy l di"><div class="mj mk l"/></div></figure><h2 id="0c7c" class="kl km hw bd kn ko kp kq kr ks kt ku kv je kw kx ky ji kz la lb jm lc ld le lf bi translated"><strong class="ak">创建导航图形文件</strong></h2><p id="16c8" class="pw-post-body-paragraph it iu hw iv b iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm lk jo jp jq ha bi translated">开始使用导航组件的第一步是创建一个导航图资源文件。</p><p id="ed1c" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">正如我前面提到的，这个文件是我们在应用程序中定义不同目的地以及它们如何连接的地方。</p><p id="c53d" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">一个应用程序可以有多个导航图，这些导航图可以嵌套在一起。</p><p id="de18" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">要创建一个导航图文件，在你的应用程序模块内的任何地方点击右键，选择选项<strong class="iv hx">新建</strong>-&gt;T6】Android资源文件。</p><p id="59ca" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这将打开一个模板来创建一个新的Android资源文件。</p><p id="2f2d" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">通过给出文件名来填充模板，并使用<strong class="iv hx">资源类型</strong>下拉菜单来选择导航资源类型。</p><p id="4bf7" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">完成后，按ok，该文件的导航编辑器将打开，如下所示。</p><figure class="jt ju jv jw fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ml"><img src="../Images/b90f30b905e93d4009bd321cc81ccbc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*o1tHTDBlKGhhOK9D-PloBg.png"/></div></div></figure><p id="dcc7" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">上面显示的导航编辑器分为3个不同的部分。从左至右:</p><ol class=""><li id="fb38" class="jx jy hw iv b iw ix ja jb je jz ji ka jm kb jq kc kd ke kf bi translated">该部分显示了图中所有目的地的列表以及导航图所在的位置。</li><li id="8c3d" class="jx jy hw iv b iw kg ja kh je ki ji kj jm kk jq kc kd ke kf bi translated">在中间和大部分，您可以看到图形中所有目的地及其连接的可视化表示。<br/>如果您在布局中使用工具命名空间，数据也将在这里呈现，您可以很好地查看您的应用程序和样本数据。</li><li id="d2f7" class="jx jy hw iv b iw kg ja kh je ki ji kj jm kk jq kc kd ke kf bi translated">第三个也是最右边的部分是属性部分。仅当您选择目的地或操作时，此部分内容才会显示。此部分将显示并允许修改所选项目的属性，无论是动作还是目的地</li></ol><h2 id="009b" class="kl km hw bd kn ko kp kq kr ks kt ku kv je kw kx ky ji kz la lb jm lc ld le lf bi translated">向图表中添加目的地</h2><p id="6ed3" class="pw-post-body-paragraph it iu hw iv b iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm lk jo jp jq ha bi translated">通过在应用程序中添加不同的目的地，开始构建导航图。我鼓励你从上到下开始构建导航图。</p><p id="d099" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我发现这种方式更容易，因为用例图的最顶层只有少量的目的地。</p><p id="0a40" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果我们在作为本文示例的Event Finder应用程序中添加最顶端的目的地，我们将得到如下结果:</p><figure class="jt ju jv jw fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mm"><img src="../Images/8fe014b6c12782a35166272a4552d74d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0oRWYK41n8Zmc30Hek-p_A.png"/></div></div></figure><p id="c2c8" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如您所见，我们有3个目的地，它们是应用程序的入口点。这些目的地彼此不相连，因此不会有将它们链接在一起的动作。</p><p id="7408" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">稍后我将展示如何导航到这些目的地中的每一个。</p><p id="1e78" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在，让我们添加购买机票的片段，并拥有一个相互连接的目的地流。</p><p id="db62" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为此，您应该首先重复向导航图添加新目的地的过程。</p><p id="1162" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">要开始进行连接，请选择您想要开始的目的地，并拖动一条连接结束目的地的线。</p><p id="e897" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">以这篇文章为例，我们现在将有这样的导航图:</p><figure class="jt ju jv jw fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mn"><img src="../Images/84348668f8dd7fb3a4d8fb7091d44364.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bJXE30ImqGJlq143kKQTkg.png"/></div></div></figure><h2 id="ab4a" class="kl km hw bd kn ko kp kq kr ks kt ku kv je kw kx ky ji kz la lb jm lc ld le lf bi translated">托管导航图</h2><p id="32bd" class="pw-post-body-paragraph it iu hw iv b iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm lk jo jp jq ha bi translated">实际上，这个导航图除了给用户在应用程序中的旅程提供一个很好的视觉表现之外，什么也没做。</p><p id="9933" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这是因为导航图需要一个称为导航主机的特殊容器。</p><p id="2176" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">该组件采用导航图，并提供使用<code class="du mo mp mq mr b">NavController</code>导航不同目的地的机制。</p><p id="e1d8" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">导航主机为我们完成所有繁重的工作，比如处理片段事务和执行导航所需的所有其他事情。</p><p id="8492" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果你使用Google现在推荐的单活动应用程序类型的结构，你的应用程序将有一个活动，只有一个导航主机和一个导航图。</p><p id="6970" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果您正在进行迁移，建议将您的流程分成不同的活动，并在产品化阶段为每个活动提供一个导航图和主机。</p><p id="d5b4" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">无论您是启动新应用程序还是迁移现有应用程序，您的活动布局都可能是相同的，并且将仅包含导航主机，如下所示:</p><figure class="jt ju jv jw fd hj"><div class="bz dy l di"><div class="mj mk l"/></div></figure><p id="9f54" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在上面的代码片段中需要注意的两件事是自定义属性:</p><ul class=""><li id="010e" class="jx jy hw iv b iw ix ja jb je jz ji ka jm kb jq ms kd ke kf bi translated"><code class="du mo mp mq mr b">app:navGraph</code>:定义哪个导航图将与导航主机关联</li><li id="2d42" class="jx jy hw iv b iw kg ja kh je ki ji kj jm kk jq ms kd ke kf bi translated"><code class="du mo mp mq mr b">app:defaultNavHost</code>:布尔值，如果设置为真，将允许导航主机在按下系统后退按钮时进行拦截。</li></ul><p id="3125" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在，如果您启动具有导航主机的活动，它将在屏幕上显示导航图中设置为起点的目的地。</p><blockquote class="mt mu mv"><p id="0dc7" class="it iu mw iv b iw ix iy iz ja jb jc jd mx jf jg jh my jj jk jl mz jn jo jp jq ha bi translated"><strong class="iv hx"> pro-tip </strong>:如果你想可视化你的片段在孤立状态下的样子，在导航图中将片段设置为起始目的地。</p><p id="cbbf" class="it iu mw iv b iw ix iy iz ja jb jc jd mx jf jg jh my jj jk jl mz jn jo jp jq ha bi translated">为此，在导航编辑器中右键单击目的地顶部，并选择“设为起始目的地”。</p></blockquote><h2 id="49b3" class="kl km hw bd kn ko kp kq kr ks kt ku kv je kw kx ky ji kz la lb jm lc ld le lf bi translated">在目的地之间导航</h2><p id="d261" class="pw-post-body-paragraph it iu hw iv b iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm lk jo jp jq ha bi translated">既然导航图被托管在<code class="du mo mp mq mr b">NavFragmentHost</code>中，让我们看看如何从一个目的地移动到另一个目的地。</p><p id="a4af" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在此处显示的示例中，导航到一个目的地的过程是在起始目的地发生事件后完成的。例如，当单击列表中的事件时，导航到EventDetails片段。</p><p id="2265" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">为了在目的地之间导航，导航主机有一个叫做<code class="du mo mp mq mr b">NavController</code>的组件。</p><p id="955b" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><code class="du mo mp mq mr b">NavController</code>组件负责管理导航主机内导航的全过程。</p><p id="0b7d" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">要在目的地内执行导航，您需要首先从导航主机获取NavController。</p><p id="b362" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">通过使用<code class="du mo mp mq mr b">NavHostFragment</code> <code class="du mo mp mq mr b">findNavController</code>的静态方法来这样做:</p><pre class="jt ju jv jw fd na mr nb nc aw nd bi"><span id="f6ee" class="kl km hw mr b fi ne nf l ng nh">val navController = Navigation.<em class="mw">findNavController</em>(fragment)</span></pre><p id="17ba" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">获得<code class="du mo mp mq mr b">NavController</code>后，可以这样导航到活动详情目的地:</p><p id="e9c5" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><code class="du mo mp mq mr b">navController.navigate(R.id.event_details_fragment)</code></p><p id="e951" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">R.id.event_details_fragment是EventDetailsFragmen的目的地id</p><p id="663a" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">要导航回上一个目的地，过程是类似的，您需要首先获取NavController，然后像这样调用<strong class="iv hx"> navigateUp </strong>函数:</p><p id="2730" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><code class="du mo mp mq mr b">navController.navigateUp()</code></p><p id="2e4f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">您通常会实现这个方法来处理在目的地按下<strong class="iv hx">向上按钮</strong>。使用这种方法时，导航控制器会计算出上升对您的目的地意味着什么。</p><h2 id="e81d" class="kl km hw bd kn ko kp kq kr ks kt ku kv je kw kx ky ji kz la lb jm lc ld le lf bi translated"><strong class="ak">在目的地之间传递数据</strong></h2><p id="1ad8" class="pw-post-body-paragraph it iu hw iv b iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm lk jo jp jq ha bi translated">在不同的目的地之间导航是核心的事情，但是大多数时候我们不仅仅是去另一个目的地，而且我们需要在这个过程中发送某种信息。</p><p id="8f2b" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们仍然通过以两种不同的方式使用捆绑包来做到这一点:</p><ul class=""><li id="cb97" class="jx jy hw iv b iw ix ja jb je jz ji ka jm kb jq ms kd ke kf bi translated">使用导航组件安全参数Gradle插件的类型安全方式。</li><li id="5934" class="jx jy hw iv b iw kg ja kh je ki ji kj jm kk jq ms kd ke kf bi translated">一种非类型安全的方法，我们像往常一样自己构造包。</li></ul><p id="3390" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我将在下一篇文章中讨论安全参数，以及其他一些我觉得很酷但现在没有必要的东西。</p><p id="0b78" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">使用第二种方法，为了在目的地之间传递信息，我将首先在目的地中用一个名为bundleArgs的函数创建一个伴随对象，该函数将接受目的地需要的任何参数并返回一个包。</p><pre class="jt ju jv jw fd na mr nb nc aw nd bi"><span id="4c4d" class="kl km hw mr b fi ne nf l ng nh">//EventDetailsFragment.kt </span><span id="3e05" class="kl km hw mr b fi ni nf l ng nh"><strong class="mr hx">companion object </strong>{<br/>  <strong class="mr hx">private const val ARG_EVENT </strong>= <strong class="mr hx">"event"<br/>  <br/>  fun </strong>bundleArgs(event: Event): Bundle {<br/>    <strong class="mr hx">return </strong>Bundle().<em class="mw">apply </em><strong class="mr hx">{ <br/>      this</strong>.putParcelable(<strong class="mr hx">ARG_EVENT</strong>, event)<br/>    <strong class="mr hx">}<br/>  </strong>}<br/>}</span></pre><p id="1b36" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这种方法有助于我保留与绑定参数和将它们提取到目的片段中相关的所有内容。</p><p id="af3f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">要导航到此目的地并传递信息包，您需要使用navigate方法的重载之一，该重载接受操作和参数:</p><pre class="jt ju jv jw fd na mr nb nc aw nd bi"><span id="1f08" class="kl km hw mr b fi ne nf l ng nh">val args = EventDetailsFragment.bundleArgs(event)<br/>navController.navigate(R.id.<em class="mw">event_details_fragment</em>, args)</span></pre><blockquote class="mt mu mv"><p id="82ae" class="it iu mw iv b iw ix iy iz ja jb jc jd mx jf jg jh my jj jk jl mz jn jo jp jq ha bi translated">在导航目的地中提取这些参数的方式保持不变。</p></blockquote></div><div class="ab cl ll lm go ln" role="separator"><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq lr"/><span class="lo bw bk lp lq"/></div><div class="ha hb hc hd he"><h1 id="0bb6" class="ls km hw bd kn lt lu lv kr lw lx ly kv lz ma mb ky mc md me lb mf mg mh le mi bi translated">结论</h1><p id="604b" class="pw-post-body-paragraph it iu hw iv b iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm lk jo jp jq ha bi translated">在做了我在上一篇<a class="ae jr" rel="noopener" href="/google-developer-experts/android-navigation-components-part-1-236b2a479d44">文章</a>中推荐的准备工作后，实现或迁移到导航组件的使用变得简单明了。</p><p id="cbe6" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这是因为api是清晰的，并且在最新版本的Android Studio中支持它们的工具非常棒。</p><p id="03b1" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">到目前为止，您已经准备好开始在自己的项目中实现导航组件，如果您正在开始一个新项目，您可以使用Google推荐的单个活动应用程序来实现；如果您正在迁移一个大型应用程序，您可以通过多个活动及其自己的导航图来实现。</p><p id="8bc0" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我期待着在下一篇文章中看到你，告诉你引擎盖下发生了什么，以及一些提示和技巧，如提供的扩展功能，直接用NavController挂钩应用程序的BottomNav。</p><blockquote class="mt mu mv"><p id="4734" class="it iu mw iv b iw ix iy iz ja jb jc jd mx jf jg jh my jj jk jl mz jn jo jp jq ha bi translated">如果您有任何问题或意见，请随时在下面的评论区留言或发推文给我。</p></blockquote><div class="hg hh ez fb hi nj"><a href="https://twitter.com/DarioMungoi" rel="noopener  ugc nofollow" target="_blank"><div class="nk ab dw"><div class="nl ab nm cl cj nn"><h2 class="bd hx fi z dy no ea eb np ed ef hv bi translated">达里奥·蒙古伊·🇲🇿(@达里奥·蒙古伊)|推特</h2><div class="nq l"><h3 class="bd b fi z dy no ea eb np ed ef dx translated">达里奥·蒙古伊·🇲🇿的最新推文。安卓@shopify(🇨🇦)。谷歌开发专家(安卓)…</h3></div><div class="nr l"><p class="bd b fp z dy no ea eb np ed ef dx translated">twitter.com</p></div></div><div class="ns l"><div class="nt l nu nv nw ns nx ho nj"/></div></div></a></div><p id="d69f" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">下次见！</p><p id="f95b" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hx">资源:</strong></p><p id="76dd" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><a class="ae jr" href="https://storage.googleapis.com/androiddevelopers/android_developers_backstage/ADB%2092%20Navigation%20Conversation.mp3" rel="noopener ugc nofollow" target="_blank">安卓ADB播客—导航专题</a></p></div></div>    
</body>
</html>