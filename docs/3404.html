<html>
<head>
<title>How I built an image search web-app in Kotlin JS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">我如何在Kotlin JS中构建一个图像搜索网络应用程序</h1>
<blockquote>原文：<a href="https://medium.com/globant/how-i-built-an-image-search-web-app-in-kotlin-js-994756c7ea5e?source=collection_archive---------5-----------------------#2020-04-13">https://medium.com/globant/how-i-built-an-image-search-web-app-in-kotlin-js-994756c7ea5e?source=collection_archive---------5-----------------------#2020-04-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/7fec9626c452a4d72c0029af4869d6bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*23QmJfDyzrnQ-G1I"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@marvelous?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Marvin Meyer</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="26f3" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">科特林JS</h1><p id="a537" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">自从Kotlin在Android上获得一等公民身份后，我就想试试它。从那以后，它已经勾选了许多选项。</p><blockquote class="kq kr ks"><p id="8ab5" class="js jt kt ju b jv ku jx jy jz kv kb kc kw kx kf kg ky kz kj kk la lb kn ko kp ha bi translated">它已经成为JVM上第二流行的语言。</p><p id="5ddd" class="js jt kt ju b jv ku jx jy jz kv kb kc kw kx kf kg ky kz kj kk la lb kn ko kp ha bi translated"><em class="hh">它已经成为StackOverflow上最受欢迎的语言之一</em></p><p id="0957" class="js jt kt ju b jv ku jx jy jz kv kb kc kw kx kf kg ky kz kj kk la lb kn ko kp ha bi translated"><em class="hh">这是2019年谷歌十大编程语言搜索趋势之一</em></p></blockquote><p id="eec6" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">科特林的一些特征引起了我的注意:</p><ul class=""><li id="6bc4" class="lc ld hh ju b jv ku jz kv kd le kh lf kl lg kp lh li lj lk bi translated">与Java和JavaScript无缝互操作，意味着没有学习开销。这使得在您的项目中逐步适应Kotlin变得非常容易</li><li id="2b38" class="lc ld hh ju b jv ll jz lm kd ln kh lo kl lp kp lh li lj lk bi translated">能够编译到多种平台:基于JVM的平台、本地平台和JS。瓶中闪电！</li><li id="2087" class="lc ld hh ju b jv ll jz lm kd ln kh lo kl lp kp lh li lj lk bi translated">项目改进:迁移到Kotlin的传统Java项目受益于它的健壮性(零安全性)和简洁性。调试和开发速度更快。最重要的是，您的前端也采用它，统一开发的道路是清晰的，消除了前端和后端团队之间的障碍。</li><li id="d8e8" class="lc ld hh ju b jv ll jz lm kd ln kh lo kl lp kp lh li lj lk bi translated">多平台:当团队在不同的应用程序上工作时，他们可以在一个地方编写特定于平台的公共逻辑，维护单一的事实来源，同时避免冗余。</li></ul><p id="0ffe" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">我和ReactJS一起工作了很长时间，一直在寻找一种介于Java的严格性和JavaScript的自由性之间的东西。科特林符合这种描述。鉴于其反应的相似性，它出奇地容易写。</p><p id="c9b0" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">以下是我实验中的一些代码片段:</p><h1 id="c9e2" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">Main.kt —入口点</h1><figure class="lr ls lt lu fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lq"><img src="../Images/4d97f774849258fde6d4a543608fe285.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*SzV5muLlivoPEBJj.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Main function which injects our app in root element just like React</figcaption></figure><p id="8362" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">就像在React中一样，main file将组件的整个层次结构注入到DOM的根div中，如上所示。除此之外，它还需要根级别的应用程序的整个CSS。</p><p id="577e" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">我们现在深入到app.kt，我们在上面的main.kt中对它进行了膨胀</p><h1 id="1ac7" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">App.kt</h1><figure class="lr ls lt lu fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lv"><img src="../Images/cac5d6f7ded6e0267bbcfa3ed6320470.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6yBbXy636qtZwiUz.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">App.kt</figcaption></figure><p id="a8a2" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">App.kt是searchBar、loading和errorView组件的父组件。在这里，我们加载我们的图库时，不在加载或空列表状态。对于div{}、br{}等DOM元素，它有一个类似对象文字的表示。JSX盛传！</p><p id="8669" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">searchBar组件:传递onSearchTermChange方法作为其props，该方法在内部反跳startSearch方法。</p><p id="f51c" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">Loading component:向其传递以app组件状态出现的加载变量，从而在组件的业务逻辑中扮演重要角色。</p><p id="ef44" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">类似地，errorView也与来自app组件状态的errorMessage一起传递，以便在出现任何错误时可以显示该消息。</p><p id="8bd5" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">让我们进一步深入层次，将这些组件视为它们自己。</p><h1 id="ced1" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">searchBar.kt</h1><figure class="lr ls lt lu fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lw"><img src="../Images/f2cc252dd07a594ab30bebf51e0d7012.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*LsErgFFKW2eAd7WG.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Portion of searchBar component showing a constructor and render method</figcaption></figure><p id="8b9d" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">Searchbar是一个由div、h2、input和p元素组成的类组件，当用户键入术语时，input元素触发onInputChange方法(如下)。</p><figure class="lr ls lt lu fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lx"><img src="../Images/71d1ef6401bb7d032657ad795c1ec4a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*0m7V6a0BVVlU6jVO.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">State and props!! React devs rejoice!</figcaption></figure><p id="51e2" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">onInputChange方法运行包含服务调用的函数。onSearchTermChange是由app.kt从props传入的，它还用当前搜索词设置状态。</p><h1 id="58a2" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">loader.kt</h1><figure class="lr ls lt lu fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ly"><img src="../Images/b2c2940db553b6f5e232fa159426ac49.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YlQ_6EXNgeNhcFIb.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">loader component</figcaption></figure><p id="9ebd" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">Loader是一个简单的功能组件，它从app.kt获取isLoading标志，并在获取时呈现一个spinner div和一个带有消息“正在加载…”的h3。</p><h1 id="01ac" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">图像库</h1><p id="ff08" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">Kotlin与现有的npm库无缝协作。在这里，我们整合了<a class="ae it" href="https://github.com/neptunian/react-photo-gallery" rel="noopener ugc nofollow" target="_blank"> react-photo-gallery </a>来展示一幅拼贴画。简单地npm安装并导入库作为一个jsModule</p><figure class="lr ls lt lu fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lz"><img src="../Images/28754c3d799ed5d3505dfeac904f4bc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WqIpdt-ooablz19C.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Class declaration of external JS library</figcaption></figure><h1 id="368f" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">服务</h1><figure class="lr ls lt lu fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ma"><img src="../Images/78f1085a57196f119a3b68b0018c9cd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*wko2FRqi7zNC5kMG.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Search function called by onSearchTermChange</figcaption></figure><p id="090c" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">我们用searchBar组件传递的searchTerm param调用上面的函数。它利用Kotlin的<a class="ae it" href="https://kotlinlang.org/docs/reference/coroutines-overview.html" rel="noopener ugc nofollow" target="_blank">协程</a>从API端点异步获取我们的图像。</p></div><div class="ab cl mb mc go md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ha hb hc hd he"><h1 id="1642" class="iu iv hh bd iw ix mi iz ja jb mj jd je jf mk jh ji jj ml jl jm jn mm jp jq jr bi translated">摘要</h1><p id="57ce" class="pw-post-body-paragraph js jt hh ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">科特林是这个街区的新成员，值得关注！它的多平台、协同程序、交叉编译能力和类型安全等特性使它与众不同。在我们上面的小探索中，我们看到了除了下面提到的主题之外，前端的反应非常相似:</p><blockquote class="kq kr ks"><p id="68ce" class="js jt kt ju b jv ku jx jy jz kv kb kc kw kx kf kg ky kz kj kk la lb kn ko kp ha bi translated">类别和功能组件</p><p id="e5f9" class="js jt kt ju b jv ku jx jy jz kv kb kc kw kx kf kg ky kz kj kk la lb kn ko kp ha bi translated">道具和状态</p><p id="7f8d" class="js jt kt ju b jv ku jx jy jz kv kb kc kw kx kf kg ky kz kj kk la lb kn ko kp ha bi translated">Http服务集成</p><p id="62c0" class="js jt kt ju b jv ku jx jy jz kv kb kc kw kx kf kg ky kz kj kk la lb kn ko kp ha bi translated">NPM包装集成</p></blockquote><h1 id="625d" class="iu iv hh bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">#BeKindKotlinChallenge</h1><blockquote class="kq kr ks"><p id="ba3b" class="js jt kt ju b jv ku jx jy jz kv kb kc kw kx kf kg ky kz kj kk la lb kn ko kp ha bi translated"><em class="hh">受科特林的启发，我们发起了一场由</em> <a class="ae it" href="https://www.globant.com/" rel="noopener ugc nofollow" target="_blank"> <em class="hh"> Globant </em> </a> <em class="hh">和</em><a class="ae it" href="https://www.jetbrains.com/" rel="noopener ugc nofollow" target="_blank"><em class="hh">Jetbrains</em></a><em class="hh">支持的编程大赛。</em></p><p id="4ff3" class="js jt kt ju b jv ku jx jy jz kv kb kc kw kx kf kg ky kz kj kk la lb kn ko kp ha bi translated"><a class="ae it" href="http://uiorbit.globant.com/" rel="noopener ugc nofollow" target="_blank"> <em class="hh">点击这里</em> </a> <em class="hh">了解更多！</em></p></blockquote><p id="d212" class="pw-post-body-paragraph js jt hh ju b jv ku jx jy jz kv kb kc kd kx kf kg kh kz kj kk kl lb kn ko kp ha bi translated">团队演职员表:<a class="mn mo ge" href="https://medium.com/u/62658ead3a79?source=post_page-----994756c7ea5e--------------------------------" rel="noopener" target="_blank">尼克希尔·贾达夫</a> | <a class="mn mo ge" href="https://medium.com/u/bb9487b17334?source=post_page-----994756c7ea5e--------------------------------" rel="noopener" target="_blank">阿克沙塔·谢拉尔</a> | <a class="mn mo ge" href="https://medium.com/u/fca6492380a9?source=post_page-----994756c7ea5e--------------------------------" rel="noopener" target="_blank">苏米特·苏塔尔</a> | <a class="mn mo ge" href="https://medium.com/u/ddb5232e0b42?source=post_page-----994756c7ea5e--------------------------------" rel="noopener" target="_blank">阿尔卡纳0623 </a></p></div></div>    
</body>
</html>