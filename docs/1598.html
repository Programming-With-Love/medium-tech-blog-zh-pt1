<html>
<head>
<title>5 Keys to Successful API Integrations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">成功的API集成的5个关键</h1>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/5-keys-to-successful-api-integration-aa1b02657eff?source=collection_archive---------4-----------------------#2018-09-14">https://medium.com/capital-one-tech/5-keys-to-successful-api-integration-aa1b02657eff?source=collection_archive---------4-----------------------#2018-09-14</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="bc80" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">使用Capital One移动iOS应用程序的经验教训</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/10057f828e9ab762b850f602650a63f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C2Yw-N7uA2R7UD1m7XXXaw.png"/></div></div></figure><p id="f718" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">重建Capital One iOS应用程序需要整个Capital One的许多不同团队进行协调。新的应用程序不仅采用全新的设计在本机构建，而且它还为所有需要所有新后端API的客户帐户使用单一登录。通过这一努力，我们学到了很多，我们尝试了许多不同的实践和哲学。然而，面对这些变化和挑战，我们开发了一些与内部API集成的通用最佳实践。</p><p id="802a" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">在Google上快速搜索“API集成最佳实践”会返回超过2600万个结果，但大多数结果都集中在技术性API消费实践上，如缓存、线程和错误处理。所有这些对于成功的API集成都很重要，但是在这篇文章中，我决定将重点放在成功的API集成所需的沟通上。下面是与API集成相关的五个关键经验。</p><h1 id="b8b3" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">1.沟通是关键</h1><p id="ff41" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">这听起来可能是显而易见的，但沟通是至关重要的。它应该在与API的集成真正开始之前就开始，并且它有多种用途。</p><p id="bf37" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">*首先是预警<strong class="jk hi">。</strong>API的存在并不意味着它已经为无限量的流量做好了准备。如果您正在处理一个大容量的应用程序，那么在选择API时需要考虑负载。通过早期的沟通，客户团队可以和API团队一起工作，为他们的项目和API确定最佳的前进方向。</p><p id="79aa" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">在某些情况下，API可能需要进行更改以支持流量需求。虽然这可能会影响时间表——确实如此——但这比其他选择好得多。没有人想开发一个新特性，把它发布到产品中，认为一切都会很好(因为你的测试显示没有问题)，然后让API关闭，因为突然有数百万人试图访问它，而它是为更少的流量设计的。</p><p id="b497" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">在其他情况下，您选择的API可能已经能够处理负载。这是否意味着交流不重要？不，因为它打开了沟通渠道，让API团队计划发布日期前后的额外监控。</p><p id="1ccc" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">*除了预先警告，早期沟通可以让你尽早开始提问。这为集成过程中出现的问题打开了沟通的渠道。这允许API团队学习并影响你如何计划使用他们的API。它还允许前端开发团队确定他们计划使用的API的特性。这是一种沟通模式，应该贯穿整个开发过程，甚至在发布之后；帮助两个团队避免不必要的意外，并帮助快速解决问题和顾虑。</p><p id="3c6a" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">*沟通还有助于调试客户团队面临的任何意外行为。然而，为了使这种交流最有效，两个团队都需要诚实地面对他们代码中的任何问题或限制，并对潜在的解决方案持开放态度。</p><h1 id="d574" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">2.文档文档文档</h1><p id="c075" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">这伴随着交流，但是文档对于API和开发团队都是至关重要的。</p><p id="6b6e" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">*拥有最新和准确的API文档允许客户端团队轻松地与API集成。对于与API相关的问题，他们有一个文档可以参考，这减少了API团队回答问题所花费的时间。</p><p id="bb5a" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">文档中的信息越多越好，但至少应该包含所有的请求字段，指定它们的数据类型和可接受的值，以便正确调用API、响应的基本结构和问题的联系点。更好的文档还将包括关于错误场景、样本请求和样本响应的信息，包括针对错误场景的信息。同样，这里的信息越多越好。如果API团队认为有任何其他与API相关的信息，应该包括在内。</p><p id="efc8" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">*对于客户端团队来说，拥有关于他们对API的期望的文档同样重要。这个文档应该是一致的，并应用于所有与它们集成的API。(显然，会出现例外，但这些应该很少。)这个文档将允许API团队快速了解你对他们和他们的API的要求。</p><p id="45c3" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">例如，对于Capital One移动iOS应用程序，我们要求我们集成的任何API都要有适当的错误处理，带有客户友好的错误消息和特定的响应格式。这允许我们以同样的方式处理所有的错误。这个需求在我们的文档中进行了交流，所以API团队理解我们的期望。</p><h1 id="958c" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">3.做好管家</h1><p id="2b95" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">每一个API和每一个组织对于好的管理都有自己的要求和期望。这也是为什么交流、诚实和文档是成功集成组织内部API的关键的原因。例如，您可能希望使用每个API来确定适当的缓存行为。不断调用API可能会对您的客户产生严重影响，例如增加他们的数据使用量并耗尽他们的电池。此外，这些额外的、通常是不必要的API调用对您的组织来说是非常昂贵的，因为它们增加了后端的流量。</p><p id="5cbb" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">因此，与您的API团队一起确定成为每个API的好管家意味着什么是很重要的。这可能包括预期的缓存行为、调用频率和/或确定要调用的适当API。在开发iOS应用程序的一个实例中，通过与API团队的讨论，确定不仅应用程序调用API过于频繁，而且有一个API更适合我们的用例。由此带来的变化带来了更好的客户体验和更可靠的整体功能。</p><h1 id="1d53" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">4.测试一切</h1><p id="16e6" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">无论客户团队和API团队之间存在多少沟通，总有可能会遗漏一些东西。适当的测试有助于填补这些空白。这个测试应该包括快乐路径场景、HTTP错误场景和边缘情况。</p><p id="5d1c" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">当与Capital One移动应用中的新API集成时，这种测试实际上发生在多个级别:</p><p id="f3c9" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">* API集成代码使用模拟响应进行了全面的单元测试，这些模拟响应要么是我们直接从API收到的，要么是我们与API团队密切合作开发的。</p><p id="fdf3" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">*每个API集成包含至少一个集成测试。这些测试涵盖了快乐的路径和一些更常见的错误场景。</p><p id="507b" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">UI构建完成后，我们对所有场景进行端到端测试。这些测试将涵盖所有的快乐路径、错误场景和边缘情况。</p><p id="3c98" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">这种级别的测试有两个目的。第一个也是最重要的目的是降低在应用程序中引入bug的风险。第二，当测试开始失败时，它可以更容易地找出问题所在。如果UI的端到端测试失败了，但是API层的单元测试和集成测试成功了，那么问题很可能出在UI代码上，等等。</p><p id="46ed" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated">编写这些测试可能会感觉乏味，但它们会防止代码中的错误，带来更好的用户体验，以及更稳定的应用程序。这使得他们值得努力。</p><h1 id="4799" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">5.我们都是一个团队</h1><p id="e096" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">归根结底，API团队和客户团队都朝着同一个目标努力，尽可能提供最好的体验。此外，客户团队和API团队需要彼此来完成这个目标。如果不与后端API集成，大多数应用程序都不是很有用。同样，API只有在有人实际使用时才有用。记住我们都在一起，可以在团队之间发展有益的关系。</p><h1 id="44e5" class="ke kf hh bd kg kh ki kj kk kl km kn ko in kp io kq iq kr ir ks it kt iu ku kv bi translated">结论</h1><p id="764f" class="pw-post-body-paragraph ji jj hh jk b jl kw ii jn jo kx il jq jr ky jt ju jv kz jx jy jz la kb kc kd ha bi translated">这五个关键点代表了我们每天努力实现、支持和扩展的事情，并导致了API和客户团队之间的良好合作关系、改进的应用程序功能、改进的API等等。它们适用于各种各样的企业和应用程序，其中内部API集成是开发过程的一部分。希望这些要点也能对您的用例有所帮助。</p><figure class="ix iy iz ja fd jb er es paragraph-image"><a href="https://medium.com/capital-one-tech/api/home"><div class="er es lb"><img src="../Images/c6c5bb1f3967049ba012aebf5757e08d.png" data-original-src="https://miro.medium.com/v2/resize:fit:900/format:webp/1*x8RfN3y_bm7aDVs1vHMfkg.jpeg"/></div></a></figure></div><div class="ab cl lc ld go le" role="separator"><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh li"/><span class="lf bw bk lg lh"/></div><div class="ha hb hc hd he"><p id="4001" class="pw-post-body-paragraph ji jj hh jk b jl jm ii jn jo jp il jq jr js jt ju jv jw jx jy jz ka kb kc kd ha bi translated"><em class="lj">披露声明:这些观点是作者的观点。除非本帖中另有说明，否则Capital One不属于所提及的任何公司，也不被其认可。使用或展示的所有商标和其他知识产权都是其各自所有者的所有权。本文为2018首都一。</em></p></div></div>    
</body>
</html>