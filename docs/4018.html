<html>
<head>
<title>The power of Chrome Devtools Protocol — Part III</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Chrome Devtools协议的力量——第三部分</h1>
<blockquote>原文：<a href="https://medium.com/globant/the-power-of-chrome-devtools-protocol-f4b1bcd4fb34?source=collection_archive---------0-----------------------#2022-10-26">https://medium.com/globant/the-power-of-chrome-devtools-protocol-f4b1bcd4fb34?source=collection_archive---------0-----------------------#2022-10-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="079a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第三部分—运行时域</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jc"><img src="../Images/38ea410020b74becf09ed7e869aec7db.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/0*zKSHSV7aoSxxChTH"/></div></figure><p id="1390" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在<a class="ae jk" rel="noopener" href="/globant/the-power-of-chrome-devtools-protocol-part-ii-3fb8239785db">上一篇文章</a>中，我们介绍了使用<a class="ae jk" href="https://chromedevtools.github.io/devtools-protocol/" rel="noopener ugc nofollow" target="_blank"> CDP </a>的<a class="ae jk" href="https://chromedevtools.github.io/devtools-protocol/tot/Network/" rel="noopener ugc nofollow" target="_blank">网络</a>域的强大功能，以及如何在Selenium测试中实现它。在本文中，我们将介绍<a class="ae jk" href="https://chromedevtools.github.io/devtools-protocol/tot/Runtime/" rel="noopener ugc nofollow" target="_blank">运行时</a>域，以及如何使用该域捕获控制台消息，如错误、警告和日志。</p><p id="160b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你可以在https://github.com/germanbisogno/cdp-utils找到完整的代码。让我们投入进去吧！</p><h1 id="d2c1" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">使用运行时域</h1><p id="0aa0" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">在测试执行期间，我们将使用<a class="ae jk" href="https://chromedevtools.github.io/devtools-protocol/tot/Runtime/" rel="noopener ugc nofollow" target="_blank">运行时</a>域从控制台获取数据。运行时域使用远程评估和镜像对象公开JavaScript运行时，您可以通过该域访问控制台。</p><ul class=""><li id="0a03" class="ko kp hh ig b ih ii il im ip kq it kr ix ks jb kt ku kv kw bi translated">打开devtools (F12)并转到控制台选项卡</li><li id="89a7" class="ko kp hh ig b ih kx il ky ip kz it la ix lb jb kt ku kv kw bi translated">编写控制台日志消息<code class="du lc ld le lf b">console.log('Hello world');</code></li><li id="3406" class="ko kp hh ig b ih kx il ky ip kz it la ix lb jb kt ku kv kw bi translated">消息出现了！</li></ul><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="lh li di lj bf lk"><div class="er es lg"><img src="../Images/42f7fbfc6123d1178da076ae7b0f0091.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jgTF0MsNq5BXdcJyu8bpDw.png"/></div></div><figcaption class="ll lm et er es ln lo bd b be z dx">Printing log messages in the console</figcaption></figure><p id="b69a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以将消息记录到控制台，您的应用程序可能也会这样做。它也可用于使用<code class="du lc ld le lf b">console.warning</code>或<code class="du lc ld le lf b">console.error</code>记录警告和错误。(如果您需要有关如何使用控制台选项卡的更多信息，您可以查看此处的<a class="ae jk" href="https://developer.chrome.com/docs/devtools/console/" rel="noopener ugc nofollow" target="_blank"/>。)</p><p id="683f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">控制台的开发人员工具中没有可用的记录，所以我们将直接跳到代码中来实现这个类。</p><h1 id="a062" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">我们如何实现自动化？</h1><p id="276d" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">让我们实现一个类<code class="du lc ld le lf b">Runtime</code>来监听控制台事件。请考虑将需要在<a class="ae jk" rel="noopener" href="/globant/the-power-of-chrome-devtools-protocol-cbb2c47f1c29">上一篇文章</a>中使用的npm依赖项。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="39bd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这种情况下，我们使用<code class="du lc ld le lf b">Runtime.enable</code>来启用运行时域，使用<code class="du lc ld le lf b">Runtime.consoleAPICalled</code>来监听控制台事件。或者，因为它已经在其他类中实现，控制台事件可以保存到JSON格式的文件中，或者只是在测试中返回这些信息来执行断言。</p><h1 id="751a" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">开发一个测试！</h1><p id="f6b3" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">让我们在下面的测试中捕获浏览器控制台消息。我们将生成错误、警告或日志等消息来测试这个API。</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="lp lq l"/></div></figure><p id="2ad6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如您将在代码中观察到的，我们通过使用<code class="du lc ld le lf b">driver.executeScript</code>来测试这个域，有意让它在控制台中产生错误、警告和日志。请注意，在您的测试应用程序的真实场景中，可以类似地捕获这些信息。</p><h1 id="6fe7" class="jl jm hh bd jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki bi translated">结论</h1><p id="d8d2" class="pw-post-body-paragraph ie if hh ig b ih kj ij ik il kk in io ip kl ir is it km iv iw ix kn iz ja jb ha bi translated">我们进入了运行时领域和它的一些不同的特性。这个域将有助于在测试自动化过程中捕获控制台消息。</p><p id="f5b1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在接下来的文章中，我们将继续讨论更多的领域。</p><p id="5488" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我希望你喜欢这次旅行！下次见！</p><p id="edd8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">感谢阅读！</strong></p></div></div>    
</body>
</html>