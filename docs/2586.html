<html>
<head>
<title>Setup TLS/SSL on Kubernetes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Kubernetes上设置TLS/SSL</h1>
<blockquote>原文：<a href="https://medium.easyread.co/setup-tls-ssl-on-kubernetes-8a682aff3b4d?source=collection_archive---------1-----------------------#2021-06-27">https://medium.easyread.co/setup-tls-ssl-on-kubernetes-8a682aff3b4d?source=collection_archive---------1-----------------------#2021-06-27</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/69be20e4999a3c4e9eac3a692eba451e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*zyZjJBase2tdf5Il"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/@markuswinkler?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Markus Winkler</a> on <a class="ae jz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="55f7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">在这篇文章中，我将分享如何使用私有证书在Kubernetes上安装TLS/SSL</p><h1 id="790a" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">步伐</h1><p id="5704" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">在你关注这篇文章之前，请确保你的证书和私钥是有效的。如果您还没有任何证书和私钥，您应该生成它。之后，通过执行下面的命令创建一个Kubernetes秘密</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="e81c" class="mk kz in mg b gy ml mm l mn mo">$ kubectl create secret tls (tls secret name) --key (private key filename)  --cert (certificate filename)</span></pre><p id="bb01" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">将机密名称添加到入口配置中。该名称应该与上一步中的秘密名称相匹配</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="61b7" class="mk kz in mg b gy ml mm l mn mo">apiVersion: networking.k8s.io/v1<br/>kind: Ingress<br/>metadata:<br/>  name: tls-example-ingress<br/>spec:<br/>  tls:<br/>  - hosts:<br/>      - example.com<br/>    secretName: (tls secret name)<br/>  rules:<br/>  - host: example.com<br/>    http:<br/>      paths:<br/>      - path: /<br/>        backend:<br/>          service:<br/>            name: service1<br/>            port:<br/>              number: 80</span></pre><h1 id="799e" class="ky kz in bd la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv bi translated">可选择的</h1><p id="5f55" class="pw-post-body-paragraph ka kb in kc b kd lw kf kg kh lx kj kk kl ly kn ko kp lz kr ks kt ma kv kw kx ig bi translated">如果您已经安装了ingress，有两种方法可以实现TLS/SSL:</p><ol class=""><li id="6c3b" class="mp mq in kc b kd ke kh ki kl mr kp ms kt mt kx mu mv mw mx bi translated">编辑ingress的YAML配置文件，然后使用kubectl重新应用它</li></ol><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="4b15" class="mk kz in mg b gy ml mm l mn mo">$ kubectl apply -f (name-file).yaml</span></pre><p id="2517" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">2.通过执行以下命令，编辑集群上的现有配置</p><pre class="mb mc md me gt mf mg mh mi aw mj bi"><span id="7c02" class="mk kz in mg b gy ml mm l mn mo">$ kubectl edit secret (tls name secret)</span></pre><p id="0d09" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">要验证是否安装了TLS/SSL，您应该检查您的浏览器。</p></div></div>    
</body>
</html>