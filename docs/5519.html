<html>
<head>
<title>Introduction to Oracle Digital Assistant Dialog Flow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle数字助理对话流程简介</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/introduction-to-oracle-digital-assistant-dialog-flow-72075c6bd841?source=collection_archive---------0-----------------------#2018-11-09">https://medium.com/oracledevs/introduction-to-oracle-digital-assistant-dialog-flow-72075c6bd841?source=collection_archive---------0-----------------------#2018-11-09</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="405a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Oracle数字助理是Oracle聊天机器人的新名称。实际上，它不仅仅是一个新名称——从现在开始，聊天机器人功能被提取到单独的云服务中——Oracle数字助理(ODA)云服务。它现在单独运行，不属于Oracle移动云服务。我认为这是一个很大的进步——这将使ODA服务更轻便、更易于使用，并且对不是Oracle移动云服务客户的人更有吸引力。</p><p id="0017" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我在玩ODA中的对话流定义，想分享一些经验教训。我从ODA中提取了我的bot定义，上传到<a class="ae jc" href="https://github.com/abaranovskis-redsamurai/TimeExpenseReportBot" rel="noopener ugc nofollow" target="_blank"> GitHub </a> repo供大家参考。</p><p id="dcb3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当在ODA服务中创建新机器人时，首先你需要定义意图列表，并为每个意图提供示例短语。基于该信息，算法训练并创建用于用户输入分类的机器学习模型:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/6d15d348ba9f32bce45c6ede877d1678.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ivkTlzZdH8uArssV-STPwg.png"/></div></div></figure><p id="9d8f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">ODA给了我们一个选择——使用更简单的基于语言学的模型或机器学习算法。在我的简单例子中，我使用的是第一个:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/db244733d591f35ea6644d8bc01b170c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cESnEC9vkhQSsYi7CwYPsQ.png"/></div></div></figure><p id="5012" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">意图与实体一起分配:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/03ba9fe926e760633c8aabe25cc30ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MNmZjikHccXkWIpW3QugpA.png"/></div></div></figure><p id="495f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将实体视为关于类型，它定义了某个基本类型的单个值，或者它可以是值的列表。实体将定义对话流变量的类型:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jr"><img src="../Images/910f3870be1770b1e086a8fe2ae77dbd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZqpGwB1lQK0YLhC57tCZqw.png"/></div></div></figure><p id="ddda" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">bot实现的关键部分——对话流程。这是您定义如何处理意图以及如何处理对话上下文的规则的地方。目前，ODA没有为托管对话流提供UI接口，您需要手工输入规则(如果您的bot逻辑很复杂，您可以在ODA之外创建YAML结构)。我强烈推荐阅读ODA对话流程指南，这是bot实现中最复杂的部分——<a class="ae jc" href="https://docs.oracle.com/en/cloud/paas/autonomous-digital-assistant-cloud/use-chatbot/dialog-flow-definition.html#GUID-CE86A43E-286A-462C-8B80-0BA2666D80F7" rel="noopener ugc nofollow" target="_blank">对话流程定义</a>。</p><p id="6dc8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对话流定义基于两个主要部分——上下文变量和状态。上下文变量—这是您定义bot上下文中可访问的变量的地方。如你所见，既可以使用基本类型，也可以使用我们自己定义的类型(实体)。类型<em class="js"> nlpresult </em>是内置类型，该类型的变量获取分类意图信息:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jt"><img src="../Images/bd66f65d69034cd02d1ce2cfa93e4c3d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FzD_hR24_dctnUGrczvmtA.png"/></div></div></figure><p id="40f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">状态部分定义了停止(或对话)的顺序，在与用户对话期间，机器人从一个停止转换到另一个停止。每个站点都指向某个组件，有许多内置组件，您也可以使用自定义组件(例如，也可以调用REST服务)。在下面的示例中，用户键入<em class="js">提交项目时间</em>，这将触发分类，结果由系统处理。意图，从对话流开始的地方-它转到对话框，用户应该从列表中选择项目。在对话流停留在上下文中之前，我们不需要对用户输入进行分类，因为我们将用户答案视为输入变量:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/bdac46e8b63bc8365fe349c6a438ecf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ry-GO8Wm8huBWAgmpuaqhw.png"/></div></div></figure><p id="d9f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用户一选择项目，流程就转到下一站<em class="js">选择任务</em>，在这里我们要求用户选择任务:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/b2d0c0777c63d18f6af5fe69006fde63.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*py7FV2tqmwRM25jZa9hUTA.png"/></div></div></figure><p id="172d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择任务时—转到下一站，选择花费在此任务上的时间。查看我们如何在当前提示文本中引用以前的答案。我们可以通过表达式引用和显示以前的答案:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jv"><img src="../Images/0724599a9c065ab22baaeb1224bb6a58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iz_r85xr4VqHxRTk0Z66tQ.png"/></div></div></figure><p id="e389" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后我们问一个问题——如果用户想输入更多关于任务的细节。默认情况下，所有停靠点从上到下按顺序执行，如果过渡为空，这意味着将执行下一个停靠点，在这种情况下为<em class="js"> confirmtaskdetails </em>。下一站将是有条件的(系统。ConditionEquals component)，根据用户的回答，它将选择下一个要执行的站点:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jv"><img src="../Images/847255af45aa5789cb6ea4ea90a73999.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ILyDbOF6YQevc1Ngqc6Usg.png"/></div></div></figure><p id="e8b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果用户选择是—将转到下一站，在那里用户需要键入文本(系统。文本组件):</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jv"><img src="../Images/0c8ebf0ce8962ad6b03ecace2bb01506.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-YXJab4lawU9OCzkxtNENg.png"/></div></div></figure><p id="bb63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">最后，我们打印任务日志信息，并询问用户是否想继续。如果他回答“否”,我们停止上下文流，否则我们询问用户——他下一步想做什么:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jv"><img src="../Images/0c47b5eb81ae4e3cda043be1b93eb3ac.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CI6j128-5vpEMC5yg2lJxQ.png"/></div></div></figure><p id="f849" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当用户键入句子时，我们脱离了对话上下文，句子将被分类以识别新的意图，并且流程将继续:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/d138dc7ecbc87ff7686b2199115efcf5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DL6OJ30R69rz3iMquxOIsQ.png"/></div></div></figure><p id="2aad" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我希望这为您提供了关于Oracle数字助理服务中bot对话流实现的良好介绍。</p></div><div class="ab cl jw jx go jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="ha hb hc hd he"><p id="0093" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="js">原载于2018年11月9日</em><a class="ae jc" href="https://andrejusb.blogspot.com/2018/11/introduction-to-oracle-digital.html" rel="noopener ugc nofollow" target="_blank"><em class="js">andrejusb.blogspot.com</em></a><em class="js">。</em></p></div></div>    
</body>
</html>