<html>
<head>
<title>Two-factor authentication on Pinterest</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Pinterest上的双因素认证</h1>
<blockquote>原文：<a href="https://medium.com/pinterest-engineering/two-factor-authentication-on-pinterest-238aa3dc92d1?source=collection_archive---------6-----------------------#2017-06-27">https://medium.com/pinterest-engineering/two-factor-authentication-on-pinterest-238aa3dc92d1?source=collection_archive---------6-----------------------#2017-06-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="3549" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">伊曼纽·切塞纳和阿明·卡梅尔| Pinterest安全工程师</p><p id="9e72" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Pinterest致力于保护全球Pinners的账户。随着超过1.75亿用户群的不断增长，今天我们宣布双因素身份认证(2FA)将在未来几周内推出，作为额外的安全层。这里我们将分享我们是如何在Pinterest上实现双因素认证的。</p><h2 id="e27f" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">2FA如何工作</h2><p id="eb72" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">启用双因素身份验证意味着您每次登录时都要使用两个因素的组合来确认您的身份。一般来说，第一个因素是密码，第二个因素是通过智能手机这样的可信设备。我们利用Twilio的<a class="ae kc" href="https://authy.com/" rel="noopener ugc nofollow" target="_blank"> Authy </a>来提供不同的验证方法，包括推送通知和SMS消息。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kd"><img src="../Images/f16f38dae9a0b08e986da88d3924fcd5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0B4bCtfKFi8UuR9yHRa7XA.jpeg"/></div></div></figure><h2 id="cd0f" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">认证选项</h2><p id="2835" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">Pinterest支持使用电子邮件地址、脸书或谷歌跨Android、iOS和web登录。如果您启用2FA，您每次登录时都会收到一个七位数的验证码。</p><p id="dd77" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">默认情况下，我们将通过短信发送验证码。如果你是Authy用户，我们将通过Authy而不是短信向你发送推送通知。此外，Authy移动应用程序是一个离线的基于时间的代码，所以即使没有网络连接，你也可以使用它。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kp"><img src="../Images/f7224418aebf6b52f9cc8b8d30f4dd8c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MTowryo68GnsePkQfKsDUg.png"/></div></div></figure><h2 id="22e2" class="jc jd hh bd je jf jg jh ji jj jk jl jm ip jn jo jp it jq jr js ix jt ju jv jw bi translated">体系结构</h2><p id="1942" class="pw-post-body-paragraph ie if hh ig b ih jx ij ik il jy in io ip jz ir is it ka iv iw ix kb iz ja jb ha bi translated">让我们更深入地探究这个架构，看看幕后发生了什么。</p><p id="356d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有三个主要的架构组件:</p><ol class=""><li id="b0c4" class="kq kr hh ig b ih ii il im ip ks it kt ix ku jb kv kw kx ky bi translated">Pinterest API，它是网络和移动应用的连接点。</li><li id="cd01" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">用户服务，存储数据。</li><li id="4a1b" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">Authy，我们用来生成、发送和验证2FA代码的第三方提供商。</li></ol><p id="de0d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下是启用流程的工作方式:</p><ol class=""><li id="2485" class="kq kr hh ig b ih ii il im ip ks it kt ix ku jb kv kw kx ky bi translated">用户验证他们的密码</li><li id="886e" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">用户输入他们的电话号码</li><li id="ec66" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">API将电话号码发送给Authy，接收Authy ID以备将来参考</li><li id="fe13" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">API向Authy请求SMS(或推送通知，Authy透明地处理)</li><li id="ef4a" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">Authy向用户手机发送验证码。或者，用户可以请求另一个代码(这一次，我们需要发送短信)</li><li id="cd4c" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">用户发送验证码</li><li id="4f1a" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">API将验证码转发给Authy</li><li id="7770" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">如果验证码正确，API启用2FA并生成备份代码</li><li id="8d7b" class="kq kr hh ig b ih kz il la ip lb it lc ix ld jb kv kw kx ky bi translated">API将电话号码、2FA启用和备份代码存储在用户服务中，并返回给用户</li></ol><p id="fbad" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请注意，用户的电话号码只有在经过验证后才会被保存。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es le"><img src="../Images/0cd09825e500208030461beb2b0bb14e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MpRj19oQcciBSzSlKM0FdA.png"/></div></div></figure><p id="bf92" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当启用2FA时，登录流程会稍作修改，以向用户发送一个验证码，方式与上面的启用流程类似。</p><p id="725e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此更新将在未来几周内开始向Pinners推出。若要在可用时选择加入，请访问您在web上的帐户设置的安全部分，然后单击按钮以启用双因素身份验证。</p><p id="0ece" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">鸣谢:2FA是一个跨团队的努力。非常感谢Devin Lundberg、Flavius Popescu、Juan Vasconez、Joseph Zingarelli、Jean Aurambault以及设计、核心体验、android、iOS和web团队的所有帮助和指导。</p></div></div>    
</body>
</html>