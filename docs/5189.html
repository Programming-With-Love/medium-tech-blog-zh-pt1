<html>
<head>
<title>AWS Elastic Search in Mendix</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Mendix中的AWS弹性搜索</h1>
<blockquote>原文：<a href="https://medium.com/mendix/aws-elastic-search-in-mendix-3d70898dbd8e?source=collection_archive---------3-----------------------#2022-06-30">https://medium.com/mendix/aws-elastic-search-in-mendix-3d70898dbd8e?source=collection_archive---------3-----------------------#2022-06-30</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><div class=""/><figure class="fi fk is it iu iv fe ff paragraph-image"><div role="button" tabindex="0" class="iw ix di iy bf iz"><div class="fe ff ir"><img src="../Images/5055aac935733785124524e2310d8f6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EvZBQAo-7ZfslcFBsxB_uQ.png"/></div></div><figcaption class="jc jd fg fe ff je jf bd b be z ek">AWS Elastic Search in Mendix</figcaption></figure><h1 id="589f" class="jg jh hu bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">如今，大多数人对一切都有即时的期待，从送咖啡到最新的股票价格。人们不愿意等待哪怕是最基本的信息，这种情况已经持续了一段时间。用户是否期望与他们互动的每个应用都能快速响应？是的，当然！</h1><h1 id="e614" class="jg jh hu bd ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd dt translated">全球任何终端用户在使用应用程序时的最大期望是快速、轻松地完成工作。</h1><p id="03e1" class="pw-post-body-paragraph ke kf hu bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hn dt translated">全球疫情极大地促使人们在日常生活中依赖多种形式的应用程序。这是因为无论他们在哪里，在方便的时候完成任务都是安全和舒适的。其他因素(除了支持这种变化的技术发展之外)已经驱使大多数商业组织使用他们的软件作为进行商业交易的主要工具，并取得了良好的结果。</p><h2 id="72bd" class="lb jh hu bd ji lc ld le jm lf lg lh jq ko li lj ju ks lk ll jy kw lm ln kc lo dt translated"><strong class="ak">绩效相关指标</strong></h2><p id="440e" class="pw-post-body-paragraph ke kf hu bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hn dt translated">成功衡量客户对应用程序的满意度所需的指标之一是<strong class="bd lp">平均响应时间</strong>，它扮演着重要的角色，因为它会显著影响用户的整体使用体验。</p><p id="64d1" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">通常在创建搜索功能时，您必须创建几个流和按钮以及其他页面元素，然后才创建逻辑来处理搜索结果。大部分时间都在检索和循环所有数据库项，直到找到匹配项，并隐藏那些与搜索查询不匹配的项。</p><p id="4da9" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">但是，如果我们想比仅仅通过数据检索更快地减少响应时间，需要做些什么呢？</p><p id="6ccc" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">令人高兴的是<strong class="bd lp"> Mendix现已在AWS市场</strong>上市，集成了开发者体验和部署。下面我将讨论如何通过整合<strong class="bd lp"> AWS弹性搜索</strong>在你的Mendix应用中解决我上面概述的问题。</p><h2 id="6515" class="lb jh hu bd ji lc ld le jm lf lg lh jq ko li lj ju ks lk ll jy kw lm ln kc lo dt translated"><strong class="ak">弹性搜索？</strong></h2><p id="833a" class="pw-post-body-paragraph ke kf hu bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hn dt translated">弹性搜索是一个开源的分布式搜索和分析引擎。用<strong class="bd lp"> Java编写，</strong>它支持多种数据类型，包括文本、数字、地理空间、结构化、非结构化等等</p><blockquote class="lv"><p id="360e" class="lw lx hu bd ly lz ma mb mc md me la ek translated">弹性搜索是一个为高性能搜索而设计的分布式搜索引擎。</p></blockquote><p id="6af9" class="pw-post-body-paragraph ke kf hu bd b kg mf ki kj kk mg km kn ko mh kq kr ks mi ku kv kw mj ky kz la hn dt translated">事实上，它是一个面向文档的数据库，针对各种搜索操作进行了优化。理解了这一点，并对基于doc的数据存储方法背后的概念有了基本的理解，理解这个工具就变得容易一些了。</p><p id="7c14" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">在市场上多年来(第一个版本于2010年发布)，弹性搜索已经成为弹性生态系统的核心:<strong class="bd lp"> ELK Stack </strong>。ELK是Elastic的三个产品的首字母缩写:<strong class="bd lp"> Elastic Search </strong>(一个搜索和分析引擎)<strong class="bd lp"> Logstash </strong>(一个数据处理管道)<strong class="bd lp"> Kibana </strong>(一个数据可视化的接口)。</p><p id="e910" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">今天，弹性搜索有两个流行的用例:</p><ul class=""><li id="ba65" class="mk ml hu bd b kg lq kk lr ko mm ks mn kw mo la mp mq mr ms dt translated">全文搜索引擎</li><li id="14fd" class="mk ml hu bd b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms dt translated">ELK堆栈中日志和指标的存储</li></ul><p id="6847" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">创建Elastic Search的想法是通过一个简单易懂的面向所有人的接口向其他语言的用户提供Apache Lucene全文搜索库Java的功能:<strong class="bd lp"> JSON over HTTP </strong>。</p><p id="d64e" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">这意味着所有的请求都是JSON，并且通过HTTP发送。要执行示例中的请求，您可以使用任何HTTP客户端，无论是Postman还是curl。但是我个人建议您应该使用Kibana 中的<strong class="bd lp">开发工具，哪怕只是因为有一个<strong class="bd lp">自动完成查询和语法高亮显示。</strong></strong></p><h2 id="710b" class="lb jh hu bd ji lc ld le jm lf lg lh jq ko li lj ju ks lk ll jy kw lm ln kc lo dt translated"><strong class="ak">弹性搜索的特点</strong></h2><p id="971b" class="pw-post-body-paragraph ke kf hu bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hn dt translated">主要特点是</p><ul class=""><li id="38cb" class="mk ml hu bd b kg lq kk lr ko mm ks mn kw mo la mp mq mr ms dt translated">非常强大的搜索(使用Lucene索引)</li><li id="aebf" class="mk ml hu bd b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms dt translated">分布式(数据可以分布到数千个节点)</li><li id="66bb" class="mk ml hu bd b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms dt translated">实时(数据几乎在插入后立即可用)</li><li id="e867" class="mk ml hu bd b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms dt translated">易于扩展(可以轻松扩展到数千个节点)</li><li id="c637" class="mk ml hu bd b kg mt kk mu ko mv ks mw kw mx la mp mq mr ms dt translated">有些人把Elasticsearch和NoSQL数据库混为一谈，但它们并不相同。ES确实提供了NoSQL的一些特性，但它主要是一个搜索和分析引擎。</li></ul><h2 id="5c1a" class="lb jh hu bd ji lc ld le jm lf lg lh jq ko li lj ju ks lk ll jy kw lm ln kc lo dt translated"><strong class="ak">其他一些Mendix支持的AWS资源</strong></h2><p id="9f81" class="pw-post-body-paragraph ke kf hu bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hn dt translated">Mendix支持的AWS资源包括亚马逊简单存储服务(亚马逊S3)、亚马逊关系数据库服务(亚马逊RDS)、亚马逊简单通知服务(亚马逊SNS)。</p><p id="57c9" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">Mendix开发人员可以根据他们在组织的AWS帐户中的访问权限来选择AWS资源。应用程序在组织的AWS设置中运行，并利用来自公司AWS帐户的服务。</p><h2 id="58d7" class="lb jh hu bd ji lc ld le jm lf lg lh jq ko li lj ju ks lk ll jy kw lm ln kc lo dt translated">为什么要弹性搜索？</h2><p id="3182" class="pw-post-body-paragraph ke kf hu bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hn dt translated">快速检索数据——elastic search基于一个<strong class="bd lp"> Lucene标准分析器</strong>。这是一个半结构化/面向文档的数据库，数据以JSON文档的形式存储。</p><p id="113c" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">与通用数据库Mongo DB不同，ES是一个分布式文本搜索引擎，用于实时处理大型数据集。</p><p id="47f8" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">当处理大量数据时，es依赖于碎片。碎片是由ES 管理的单个Lucene实例。它们有两种类型——首先被索引的<strong class="bd lp">主碎片</strong>，以及随后被索引的<strong class="bd lp">副本碎片</strong></p><p id="f773" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">默认情况下，每个索引有5个关联的碎片。这有助于在搜索大量数据时保持高水平的性能</p><p id="b1b2" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">在实践中，Logstash、Kibana和Elasticsearch结合使用，Logstash收集、解析和存储es的日志。然后使用Kibana来搜索和可视化被索引的日志。这三人组通常被称为<strong class="bd lp">麋鹿群</strong>。ES经常与其他SQL &amp; NoSQL数据库配对使用。这就是AWS弹性搜索服务如何通过减少响应时间来帮助实现应用程序的更好性能。</p><h2 id="2901" class="lb jh hu bd ji lc ld le jm lf lg lh jq ko li lj ju ks lk ll jy kw lm ln kc lo dt translated"><strong class="ak">将AWS弹性搜索与Mendix整合</strong></h2><p id="d62e" class="pw-post-body-paragraph ke kf hu bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hn dt translated">让我们看一下组织如何订阅具有特定资源的AWS帐户。</p><p id="a136" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">开发人员可以根据符合其组织需求的资源来利用AWS资源。将您的应用程序链接到弹性搜索服务后，您可以通过Kibana管理与您的应用程序相关的索引和对象。</p><p id="edcb" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">现在让我们用逻辑来创建搜索查询，因为字符串是由用户决定的。例如，当您需要使用该服务对特定过滤器进行自定义搜索时，您可以在构建查询时使用<strong class="bd lp">必须/应该/范围关键字</strong>。</p><p id="03f0" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">下面是一个如何构造发送给弹性搜索的查询的例子。下面的代码显示了一个查询，用于检索国家/地区值为“UK”、名称为“Johnson”、要求日期在“2021–08–01”和“2021–08–31”之间的对象的记录(这里gte表示大于或等于，lte表示小于或等于)</p><pre class="my mz na nb fq nc nd ne nf aw ng dt"><span id="c719" class="lb jh hu nd b fv nh ni l nj nk">{<br/>   "size":3000,<br/>   "query":{<br/>      "bool":{<br/>         "must":[<br/>            {<br/>               "query_string":{<br/>                  "query":"UK",<br/>                  "fields":[<br/>                     "country"<br/>                  ]<br/>               }<br/>            },<br/>            {<br/>               "query_string":{<br/>                  "query":"Ronaldo",<br/>                  "fields":[<br/>                     "Name"<br/>                  ]<br/>               }<br/>            },<br/>            {<br/>               "bool":{<br/>                  "should":[<br/>                     {<br/>                        "bool":{<br/>                           "must":[<br/>                              {<br/>                                 "bool":{<br/>                                    "should":[<br/>                                       {<br/>                                          "range":{<br/>                                             "RequiredDate":{<br/>                                                "gte":"2021–08–01",<br/>                                                "lte":"2021–08–31"<br/>                                             }<br/>                                          }<br/>                                       }<br/>                                    ]<br/>                                 }<br/>                              }<br/>                           ]<br/>                        }<br/>                     }<br/>                  ]<br/>               }<br/>            }<br/>         ]<br/>      }<br/>   }<br/>}</span></pre><p id="8804" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">在将查询构建为字符串之后，可以使用<strong class="bd lp">授权密钥</strong>和必需的参数将它发送给AWS网关的相应API。</p><p id="c242" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">在AWS弹性搜索端，应用程序需要被集成，每当你发送这个查询，它点击服务，它以JSON形式给出结果(在这种情况下，它提供过滤的对象)。然后，在导入映射和消息定义的帮助下，可以将JSON映射到一个列表中。</p><h2 id="665c" class="lb jh hu bd ji lc ld le jm lf lg lh jq ko li lj ju ks lk ll jy kw lm ln kc lo dt translated"><strong class="ak">结论</strong></h2><p id="beca" class="pw-post-body-paragraph ke kf hu bd b kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la hn dt translated">我们已经看到了Mendix与AWS的结合使用，以及这将如何帮助您的应用程序实现更好的性能。这只是利用服务来调优性能的一个场景，但是有很多情况可以改善您的整体用户体验。这完全取决于你的项目的用例和需求。希望这有帮助！！</p><h2 id="7a92" class="lb jh hu bd ji lc ld le jm lf lg lh jq ko li lj ju ks lk ll jy kw lm ln kc lo dt translated">阅读更多</h2><div class="nl nm fm fo nn no"><a href="https://aws.amazon.com/opensearch-service/the-elk-stack/what-is-elasticsearch/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab ej"><div class="nq ab nr cl cj ns"><h2 class="bd hv fv z el nt eo ep nu er et ht dt translated">什么是Elasticsearch？-亚马逊网络服务</h2><div class="nv l"><h3 class="bd b fv z el nt eo ep nu er et ek translated">Elasticsearch是一个基于Apache Lucene的分布式搜索和分析引擎。</h3></div><div class="nw l"><p class="bd b gc z el nt eo ep nu er et ek translated">aws.amazon.com</p></div></div><div class="nx l"><div class="ny l nz oa ob nx oc ja no"/></div></div></a></div><div class="nl nm fm fo nn no"><a href="https://aws.amazon.com/opensearch-service/the-elk-stack/logstash/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab ej"><div class="nq ab nr cl cj ns"><h2 class="bd hv fv z el nt eo ep nu er et ht dt translated">什么是Logstash？-亚马逊网络服务</h2><div class="nv l"><h3 class="bd b fv z el nt eo ep nu er et ek translated">Logstash是一个轻量级、开源的服务器端数据处理管道，它允许您从一个…</h3></div><div class="nw l"><p class="bd b gc z el nt eo ep nu er et ek translated">aws.amazon.com</p></div></div><div class="nx l"><div class="od l nz oa ob nx oc ja no"/></div></div></a></div><div class="nl nm fm fo nn no"><a href="https://aws.amazon.com/opensearch-service/the-elk-stack/kibana/" rel="noopener  ugc nofollow" target="_blank"><div class="np ab ej"><div class="nq ab nr cl cj ns"><h2 class="bd hv fv z el nt eo ep nu er et ht dt translated">什么是基巴纳？-亚马逊网络服务</h2><div class="nv l"><h3 class="bd b fv z el nt eo ep nu er et ek translated">Kibana是一个数据可视化和探索工具，用于日志和时间序列分析、应用程序监控和…</h3></div><div class="nw l"><p class="bd b gc z el nt eo ep nu er et ek translated">aws.amazon.com</p></div></div><div class="nx l"><div class="oe l nz oa ob nx oc ja no"/></div></div></a></div><div class="nl nm fm fo nn no"><a href="https://aws.amazon.com/free/?all-free-tier.sort-by=item.additionalFields.SortRank&amp;all-free-tier.sort-order=asc&amp;awsf.Free%20Tier%20Types=*all&amp;awsf.Free%20Tier%20Categories=*all" rel="noopener  ugc nofollow" target="_blank"><div class="np ab ej"><div class="nq ab nr cl cj ns"><h2 class="bd hv fv z el nt eo ep nu er et ht dt translated">免费云计算服务- AWS免费层</h2><div class="nv l"><h3 class="bd b fv z el nt eo ep nu er et ek translated">获得免费的AWS平台、产品和服务实践经验初创公司可获得高达100，000美元的AWS积分…</h3></div><div class="nw l"><p class="bd b gc z el nt eo ep nu er et ek translated">aws.amazon.com</p></div></div><div class="nx l"><div class="of l nz oa ob nx oc ja no"/></div></div></a></div><div class="nl nm fm fo nn no"><a href="https://aws.amazon.com/marketplace/seller-profile?id=35f3fca6-04fd-45d2-8025-a9473b806bdc" rel="noopener  ugc nofollow" target="_blank"><div class="np ab ej"><div class="nq ab nr cl cj ns"><h2 class="bd hv fv z el nt eo ep nu er et ht dt translated">门迪克斯</h2><div class="nv l"><h3 class="bd b fv z el nt eo ep nu er et ek translated">Mendix是西门子的一项业务，也是企业低代码领域的全球领导者，它从根本上重塑了…</h3></div><div class="nw l"><p class="bd b gc z el nt eo ep nu er et ek translated">aws.amazon.com</p></div></div><div class="nx l"><div class="og l nz oa ob nx oc ja no"/></div></div></a></div></div><div class="ab cl oh oi hb oj" role="separator"><span class="ok bw bk ol om on"/><span class="ok bw bk ol om on"/><span class="ok bw bk ol om"/></div><div class="hn ho hp hq hr"><p id="2b0f" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated"><em class="oo">来自发布者- </em></p><p id="bb8c" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated"><em class="oo">如果你喜欢这篇文章，你可以在我们的</em> <a class="ae op" href="https://medium.com/mendix" rel="noopener"> <em class="oo">中页</em> </a> <em class="oo">找到更多喜欢的。对于精彩的视频和直播会话，您可以前往</em><a class="ae op" href="https://www.mendix.com/live/" rel="noopener ugc nofollow" target="_blank"><em class="oo">MxLive</em></a><em class="oo">或我们的社区</em><a class="ae op" href="https://www.youtube.com/c/MendixCommunity/community" rel="noopener ugc nofollow" target="_blank"><em class="oo">Youtube PAG</em></a><em class="oo">e .</em></p><p id="517a" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated"><em class="oo">希望入门的创客，可以注册一个</em> <a class="ae op" href="https://signup.mendix.com/link/signup/?source=direct" rel="noopener ugc nofollow" target="_blank"> <em class="oo">免费账号</em> </a> <em class="oo">，通过我们的</em> <a class="ae op" href="https://academy.mendix.com/link/home" rel="noopener ugc nofollow" target="_blank"> <em class="oo">学苑</em> </a> <em class="oo">获得即时学习。</em></p><p id="7077" class="pw-post-body-paragraph ke kf hu bd b kg lq ki kj kk lr km kn ko ls kq kr ks lt ku kv kw lu ky kz la hn dt translated">有兴趣加入我们的社区吗？加入我们的 <a class="ae op" href="https://join.slack.com/t/mendixcommunity/shared_invite/zt-hwhwkcxu-~59ywyjqHlUHXmrw5heqpQ" rel="noopener ugc nofollow" target="_blank"> <em class="oo">松弛社区频道</em> </a> <em class="oo">。</em></p></div></div>    
</body>
</html>