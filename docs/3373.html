<html>
<head>
<title>Testing your presenter in Kotlin using Mockito</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Mockito在Kotlin中测试您的演示者</h1>
<blockquote>原文：<a href="https://medium.com/globant/testing-your-presenter-in-kotlin-using-mockito-c6da1fe7f99e?source=collection_archive---------4-----------------------#2018-11-15">https://medium.com/globant/testing-your-presenter-in-kotlin-using-mockito-c6da1fe7f99e?source=collection_archive---------4-----------------------#2018-11-15</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="f042" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是一个<strong class="ig hi"> <em class="jc">非常基本的</em> </strong>示例，说明如何在演示器中测试您的功能。这里，通过<strong class="ig hi"> <em class="jc">非常基本的</em> </strong>，我指的是在同一线程上处理数据而不是从一些API调用或数据库中获取数据的函数。我将在下一页介绍。</p><p id="1a9e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我举了一个非常简单的例子，点击一个按钮，在文本视图中显示用户的全名。</p><p id="7d71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以，你有一些明显的东西。</p><blockquote class="jd"><p id="336e" class="je jf hh bd jg jh ji jj jk jl jm jb dx translated">主要活动</p></blockquote><pre class="jn jo jp jq jr js jt ju jv aw jw bi"><span id="8f8f" class="jx jy hh jt b fi jz ka l kb kc">class MainActivity : AppCompatActivity(), MainView {<br/><br/>    private lateinit var presenter: MainPresenter<br/><br/>    override fun onCreate(savedInstanceState: Bundle?) {<br/>        super.onCreate(savedInstanceState)<br/>        setContentView(R.layout.<em class="jc">activity_main</em>)<br/>        presenter = MainPresenter(this)<br/>    }<br/><br/>    fun onClickFetchData(view: View){<br/>        presenter.fetchData()<br/>    }<br/><br/>    override fun setUserName(name: String) {<br/>        tvName.<em class="jc">text </em>= name<br/>    }<br/>}</span></pre><blockquote class="jd"><p id="7b67" class="je jf hh bd jg jh kd ke kf kg kh jb dx translated">主演示者</p></blockquote><p id="815b" class="pw-post-body-paragraph ie if hh ig b ih ki ij ik il kj in io ip kk ir is it kl iv iw ix km iz ja jb ha bi translated">我们只需要测试presenter中的一个函数。</p><p id="c9fd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:<em class="jc">没有API调用或在不同的线程上获取数据。为了测试这些函数，你需要使用一个叫做</em> <a class="ae kn" href="https://static.javadoc.io/org.mockito/mockito-core/2.2.9/org/mockito/ArgumentCaptor.html" rel="noopener ugc nofollow" target="_blank"> <em class="jc">的东西。我将在下一页讨论这个问题。</em></a></p><pre class="ko kp kq kr fd js jt ju jv aw jw bi"><span id="3086" class="jx jy hh jt b fi jz ka l kb kc">class MainPresenter(val view: MainView) {<br/><br/>    fun fetchData() {<br/>        val user = User("Rana Ranvijay","Singh")<br/>        view.setUserName("${user.firstName} ${user.lastName}")<br/>    }<br/>}</span></pre><blockquote class="jd"><p id="2f35" class="je jf hh bd jg jh kd ke kf kg kh jb dx translated">主视图</p></blockquote><pre class="jn jo jp jq jr js jt ju jv aw jw bi"><span id="d487" class="jx jy hh jt b fi jz ka l kb kc">interface MainView {<br/>    fun setUserName(name: String)<br/>}</span></pre><blockquote class="jd"><p id="5ec9" class="je jf hh bd jg jh kd ke kf kg kh jb dx translated">用户</p></blockquote><pre class="jn jo jp jq jr js jt ju jv aw jw bi"><span id="c182" class="jx jy hh jt b fi jz ka l kb kc">data class User(<br/>        val firstName: String,<br/>        val lastName: String)</span></pre><blockquote class="jd"><p id="a0bd" class="je jf hh bd jg jh kd ke kf kg kh jb dx translated"><strong class="ak"> build.gradle </strong></p></blockquote><pre class="jn jo jp jq jr js jt ju jv aw jw bi"><span id="b04f" class="jx jy hh jt b fi jz ka l kb kc">testImplementation 'junit:junit:4.12'<br/>testImplementation 'org.mockito:mockito-core:2.23.0'</span></pre><p id="fb79" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在在<strong class="ig hi"><em class="jc">app/src/test/Java/&lt;包&gt; </em> </strong>中创建一个测试类</p><blockquote class="jd"><p id="3e8d" class="je jf hh bd jg jh ji jj jk jl jm jb dx translated">主演示者测试</p></blockquote><pre class="jn jo jp jq jr js jt ju jv aw jw bi"><span id="cc22" class="jx jy hh jt b fi jz ka l kb kc">import org.junit.Before<br/>import org.junit.Test<br/>import org.junit.runner.RunWith<br/>import org.mockito.Mock<br/>import org.mockito.Mockito<br/>import org.mockito.junit.MockitoJUnitRunner<br/><br/>@RunWith(MockitoJUnitRunner::class)<br/>class MainPresenterTest {<br/><br/>    @Mock<br/>    lateinit var view: MainView<br/><br/>    lateinit var presenter: MainPresenter<br/><br/>    @Before<br/>    fun setUp() {<br/>        presenter = MainPresenter(view)<br/>    }<br/><br/>    @Test<br/>    fun testFetchData() {<br/>        presenter.fetchData()<br/>        Mockito.verify(view).setUserName("Rana Ranvijay Singh")<br/>    }<br/>}</span></pre><p id="4bd9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">还有<strong class="ig hi">跑！</strong></p></div></div>    
</body>
</html>