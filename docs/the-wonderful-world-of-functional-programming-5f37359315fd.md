# 函数式编程的奇妙世界

> 原文：<https://medium.com/capital-one-tech/the-wonderful-world-of-functional-programming-5f37359315fd?source=collection_archive---------3----------------------->

## 简要概述

![](img/ee1f742d875dbd1086202a3b71a81d33.png)

函数式编程如今越来越受欢迎。当大多数开发人员讨论函数式编程时，他们倾向于将其称为二元条件——函数式或面向对象。然而，函数式编程更像是一种范式——存在于接近纯函数的范围内。你能建立一个非平凡的、纯功能的系统吗？请允许我通过说*你不必*来避免回答这个问题。像大多数事情一样，任何事情太多对你都是有害的。函数式和传统面向对象结构的健康结合可能是大多数重要系统的最佳选择。

# 什么是函数式编程？

函数式编程(FP)是一堆东西。FP 使用纯函数作为构建软件的基本构件。纯函数是这样的函数:

1.  不会产生副作用(可观察到的交互作用不是返回值)
2.  对于任何一组输入，*总是会产生相同的输出吗*

考虑以下 JavaScript 代码:

Mutate array — no good!

我们已经成功地变异了我们的数组`arr`，但是我们已经超出了我们的函数范围，变异了函数范围之外的数据。这是一个副作用的例子，如果我们想使用该数据的原始版本，可能会导致以后的问题。此外，函数本身没有显式输入，因此如果修改了`arr`，对`mutateArr`的相同调用将产生不同的输出，这违反了我们的第一个函数约束。此外，我们打印函数内部的计算结果。日志(或任何其他形式的 I/O)是副作用的另一个例子。稍微好一点的实现是:

Mutate array — *slightly* better

现在我们已经创建了一个纯函数，它不会产生任何副作用。我们的原始数据没有被污染，我们已经将日志语句移到了函数之外。我们现在完全正常了，对吧？没有。再来看看`mutateArr`功能。你看到那些循环代码了吗`for (let...)`？这就有问题了！这就把我们带到了函数式编程的下一个特征——声明性结构。

## 操作:迭代删除——支持声明性而非命令性

给定一个项目集合，您希望对集合中的每个项目执行某个任务，或者像上面的例子一样改变数组中的每个项目。for 循环完成工作，但是您必须指定任务如何完成的细节——这就是所谓的命令式编程。例如，我们创建了一个变量`k`，它跟踪我们当前的索引。我们初始化了`k`，根据`k`的值指定何时停止迭代，并在每次迭代结束时递增`k`。这些代码与手头的任务没有任何关系。此外，我们显式创建一个新的(空)数组，手动将或变异的数据放入其中。我们需要一种声明式的方法来执行这项任务。声明式编程意味着你确定应该发生什么，而不关心细节。让我们使用 JavaScript 的`map()`函数再试一次。

Mutate array — pretty good

对于我们的`mutateArr`函数的主体，我们从六行代码减少到了一行。如果你真的想压缩`mutateArr`代码，你可以更积极地使用 JavaScript 的箭头函数:

Mutate array — baller!

## 不可变数据结构

不变性是函数式编程的另一个核心部分。如果您还记得我们之前的例子，我们打印了原始数据`arr`以及变异后的结果。重要的是我们不能修改原始数据。JavaScript 的[高阶](http://eloquentjavascript.net/05_higher_order.html)函数(map，reduce 等。)总是返回一个新的*数组，而不是修改新的原始数据。*

使用不可变的数据结构构建应用程序有很多好处，包括(但不限于)完整的状态历史。在调试代码时，能够“倒回”状态是非常有用的。可以想象，保留旧数据的完整副本会很快增加内存消耗。然而，有一些内存管理技术可以解决这个问题。今天我不会深究细节，但它涉及到 trie 结构和指针。你可以在这里阅读更多关于不变性和持久数据结构的内容。

## 包裹

以上任何一个概念都很容易成为自己的长篇博文。这里的想法是说明函数范式，并提出一种不同的编写代码的方式。记住，*最佳*方法总是在给定*你的*问题集的背景下有意义的方法。考虑 FP 是你可以使用的另一个工具，明智地选择吧！

*披露声明:这些观点是作者的观点。除非本帖中另有说明，否则 Capital One 不属于所提及的任何公司，也不被其认可。使用或展示的所有商标和其他知识产权都是其各自所有者的所有权。本文为 2017 首都一。*

*欲了解更多关于 Capital One 的 API、开源、社区活动和开发者文化，请访问我们的一站式开发者门户 DevExchange。*[](https://developer.capitalone.com/)