<html>
<head>
<title>Machine Learning Applied — TensorFlow Chatbot UI with Oracle JET Custom Component</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">应用机器学习— TensorFlow聊天机器人UI，带有Oracle JET自定义组件</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/machine-learning-applied-tensorflow-chatbot-ui-with-oracle-jet-custom-component-c7bb2ea2f8bf?source=collection_archive---------0-----------------------#2018-06-11">https://medium.com/oracledevs/machine-learning-applied-tensorflow-chatbot-ui-with-oracle-jet-custom-component-c7bb2ea2f8bf?source=collection_archive---------0-----------------------#2018-06-11</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="f61e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本帖基于甲骨文码2018深圳、华沙、柏林会谈。查看<a class="ae jc" href="https://www.slideshare.net/andrejusb/machine-learning-applied-contextual-chatbots-coding-oracle-jet-and-tensorflow" rel="noopener ugc nofollow" target="_blank">幻灯片共享</a>上的演示文稿:</p><figure class="jd je jf jg fd jh"><div class="bz dy l di"><div class="ji jj l"/></div></figure><p id="da85" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我以前的帖子中，我概述了如何用TensorFlow构建聊天机器人后端— <a class="ae jc" href="http://andrejusb.blogspot.com/2018/03/classification-machine-learning-chatbot.html" rel="noopener ugc nofollow" target="_blank">分类—用TensorFlow构建机器学习聊天机器人</a>。今天的帖子是下一步——我将解释如何使用Oracle JET在TensorFlow聊天机器人上构建自定义UI。</p><p id="b24e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以从我的<a class="ae jc" href="https://github.com/abaranovskis-redsamurai/shenzhen" rel="noopener ugc nofollow" target="_blank"> GitHub </a>资源库下载完整的源代码(包括TensorFlow部分、chatbot上下文处理后端和JET自定义组件chatbot UI)。</p><p id="ea36" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是解决方案架构快照:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jk"><img src="../Images/1ad8d6b286f2cb1a1fa98136f8384cef.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZKT-PgEJwaERAyKwIiLb5w.png"/></div></div></figure><p id="46f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">TensorFlow用于机器学习和文本分类任务。烧瓶允许通过REST与来自外部的张量流进行通信。上下文聊天机器人对话处理在Node.js后端实现，与Oracle JET客户端的通信由Socket.io处理。</p><p id="dec7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">聊天机器人实现的关键点——为机器训练过程构建正确的数据结构。学习将越精确，随后将获得更好的分类结果。聊天机器人训练数据可以以JSON的形式出现。训练数据的质量可以通过意图和例句之间的重叠来衡量。随着重叠越来越多，产生的机器学习输出将越来越弱，分类将越来越不准确。训练数据可以包含TensorFlow不直接使用的信息-我们可以将意图上下文处理包括到相同的结构中，它将由上下文处理算法使用。训练数据的JSON结构示例:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jr"><img src="../Images/5f0b38375f3a103208f281e3b98e7744.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_KGmwydxqcxMS8qCdlGLug.png"/></div></div></figure><p id="400c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">TensorFlow的精确分类只是聊天机器人功能的一部分。我们需要保持对话上下文。这可以通过自定义算法在Node.js后端实现。在我的例子中，当没有设置上下文时— TensorFlow被调用来分类语句并产生意图概率。同一个句子可能有多个分类的意图— TensorFlow将返回多个概率。这取决于你，要么总是选择最有可能的意图，要么让用户选择。通过调用<em class="js"> socket.emit </em>函数，通过Socket.io处理回客户端的通信:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jt"><img src="../Images/4d3e0bf865c0867b118d459697da93ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RbcFH6u-aaDSauy65VdwvQ.png"/></div></div></figure><p id="ec33" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果已经设置了上下文，我们就不调用分类函数——在这一步中我们不需要它。相反，我们通过意图上下文映射来检查——下一步应该做什么。基于这些信息，我们通过调用<em class="js"> socket.emit </em>函数，再次通过Socket.io将问题或操作发送回客户端:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es ju"><img src="../Images/8747afc873e48c65cc9923f43aef1577.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VJH64Akr-3gLPDBTysfMjw.png"/></div></div></figure><p id="45e7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">聊天机器人UI是用JET定制组件实现的(查看<a class="ae jc" href="http://www.oracle.com/webfolder/technetwork/jet/jetCookbook.html?component=composite&amp;demo=basic" rel="noopener ugc nofollow" target="_blank"> JET菜谱</a>中的工作原理)。这使得在各种应用程序中重用同一组件变得非常容易:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jv"><img src="../Images/0096fd7b597398bd30aa8453c06c78c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*NNJspHnCqzBpqog3nzz2DA.png"/></div></figure><p id="9448" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是一个例子，当聊天机器人用户界面被纳入消费应用程序。它带有自定义监听器，在那里可以执行任何自定义操作。自定义监听器允许将任何自定义逻辑移出聊天机器人组件，使其真正可重用:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jw"><img src="../Images/cdf986a3f5a5ead38dd9e3e51037cb85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HyzU1COT9SOS6roNpE65bA.png"/></div></div></figure><p id="a180" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">自定义逻辑的示例—基于聊天机器人回复，我们可以加载应用程序模块、分配参数值等。：</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jx"><img src="../Images/3d7c72b5a65fa526f1c2ed46271c7ff6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dFaSheX8shrTEcv03nv0MQ.png"/></div></div></figure><p id="4ba4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Chatbot UI实现基于列表，它使用模板呈现bot和客户端消息。该模板检测消息是属于客户端还是bot，并应用所需的样式—这有助于呈现可读的列表。还有输入区和控制按钮:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jy"><img src="../Images/63024605fdd8a5ca2fb0286f8b3e04f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2WoDMX2LrIBCU8tUYymXpg.png"/></div></div></figure><p id="fd3f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">JS模块执行有助于显示bot消息的逻辑，通过将消息添加到消息列表来生成要由自定义逻辑监听器处理的事件。客户端通过调用Socket.io <em class="js"> socket.emit </em>函数向bot服务器发送消息:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es jz"><img src="../Images/6bae4ac521f5e3f8f44533fdb54a1e91.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IDZjsAn2MxhxwumaCaLokQ.png"/></div></div></figure><p id="6bf1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以下是最终结果—用Oracle JET实现的聊天机器人框:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="jl jm di jn bf jo"><div class="er es ka"><img src="../Images/68af1598d24cd02819d463cf499f543d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K9rVfTpeBwigCbjm71-SWA.png"/></div></div></figure></div><div class="ab cl kb kc go kd" role="separator"><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg kh"/><span class="ke bw bk kf kg"/></div><div class="ha hb hc hd he"><p id="06b2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="js">原载于2018年6月11日</em><a class="ae jc" href="http://andrejusb.blogspot.com/2018/06/machine-learning-applied-tensorflow.html" rel="noopener ugc nofollow" target="_blank"><em class="js">andrejusb.blogspot.com</em></a><em class="js">。</em></p></div></div>    
</body>
</html>