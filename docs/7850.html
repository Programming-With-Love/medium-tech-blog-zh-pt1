<html>
<head>
<title>Kafka Connect Quickstart</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kafka Connect快速入门</h1>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/kafka-connect-quickstart-71c8a70bc454?source=collection_archive---------0-----------------------#2020-01-30">https://medium.com/walmartglobaltech/kafka-connect-quickstart-71c8a70bc454?source=collection_archive---------0-----------------------#2020-01-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="f032" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本指南将有助于Kafka Connect的端到端本地设置。</p><p id="cb96" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">接收器连接器，它将从Kafka主题(kctopic_for_sink)获取记录，并在控制台上输出其值。</p><ul class=""><li id="2471" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">假设:Java8，Maven，卡夫卡基础知识</li><li id="3681" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">本指南使用的Kafka版本:Kafka _ 2.10–0 . 10 . 2 . 1</li><li id="bff6" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">根据具体的项目需求，随时将所需的库升级到最新版本</li></ul><p id="c79c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.从<a class="ae jq" href="https://archive.apache.org/dist/kafka/0.10.2.1/kafka_2.10-0.10.2.1.tgz" rel="noopener ugc nofollow" target="_blank">阿帕奇卡夫卡</a>下载卡夫卡</p><p id="410f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建这两个额外的文件</p><ul class=""><li id="cf95" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">“Kafka _ 2.10–0 . 10 . 2 . 1/config/”下的connect-distributed-local . properties</li></ul><blockquote class="jr js jt"><p id="147b" class="ie if ju ig b ih ii ij ik il im in io jv iq ir is jw iu iv iw jx iy iz ja jb ha bi translated">bootstrap . servers = localhost:9092<br/>group . id = local-connect-cluster</p><p id="6e7c" class="ie if ju ig b ih ii ij ik il im in io jv iq ir is jw iu iv iw jx iy iz ja jb ha bi translated">key . converter = org . Apache . Kafka . connect . JSON . JSON converter<br/>value . converter = org . Apache . Kafka . connect . JSON . JSON converter<br/></p><p id="9683" class="ie if ju ig b ih ii ij ik il im in io jv iq ir is jw iu iv iw jx iy iz ja jb ha bi translated">internal . key . converter = org . Apache . Kafka . connect . JSON . JSON converter<br/>internal . value . converter = org . Apache . Kafka . connect . JSON . JSON converter<br/>internal . key . converter . schemas . enable = false<br/>internal . value . converter . schemas . enable = false</p><p id="2435" class="ie if ju ig b ih ii ij ik il im in io jv iq ir is jw iu iv iw jx iy iz ja jb ha bi translated">offset . storage . topic = connect-local-stg-offsets<br/>config . storage . topic = connect-local-stg-configs<br/>status . storage . topic = connect-local-stg-status</p><p id="8b81" class="ie if ju ig b ih ii ij ik il im in io jv iq ir is jw iu iv iw jx iy iz ja jb ha bi translated">consumer . max . poll . records = 1<br/>consumer . enable . auto . commit = false<br/>consumer . auto . offset . reset = latest</p></blockquote><ul class=""><li id="056a" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">“Kafka _ 2.10–0 . 10 . 2 . 1/”下的create_local_topics.sh(用于创建运行Kafka-connect所需的主题，也可以逐个创建这些主题，跳过此处。sh文件)</li></ul><blockquote class="jr js jt"><p id="36a3" class="ie if ju ig b ih ii ij ik il im in io jv iq ir is jw iu iv iw jx iy iz ja jb ha bi translated">#!/bin/sh <br/>。/bin/Kafka-topics . sh-list-zookeeper localhost:2181<br/>。/bin/Kafka-topics . sh-create-zookeeper localhost:2181-replication-factor 1-partitions 1-topic connect-local-stg-offsets<br/>。/bin/Kafka-topics . sh-create-zookeeper localhost:2181-replication-factor 1-partitions 1-topic connect-local-stg-configs<br/>。/bin/Kafka-topics . sh—create—zookeeper localhost:2181 —复制—因子1—分区1—topic connect-local-stg-status<br/>。/bin/Kafka-topics . sh—create—zookeeper localhost:2181 —复制—因子1—分区1 — topic kctopic_for_sink <br/>。/bin/Kafka-topics . sh-list-zookeeper localhost:2181</p></blockquote><p id="fbf1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些可以单独创建，以防你从其他仓库下载Kafka。</p><p id="c42c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.从下面给出的源代码构建KCQuickstartSinkConnector jar</p><p id="bcd2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">感兴趣的文件:</p><ul class=""><li id="5d85" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated"><a class="ae jq" href="https://github.com/luckykurhe/kcquickstart/blob/master/src/main/java/com/sample/kcquickstart/KCQuickstartSinkConnector.java" rel="noopener ugc nofollow" target="_blank">KCQuickstartSinkConnector.java</a></li><li id="382f" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">【KCQuickstartSinkConnectorConfig.java】</li><li id="b05a" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated"><a class="ae jq" href="https://github.com/luckykurhe/kcquickstart/blob/master/src/main/java/com/sample/kcquickstart/KCQuickstartSinkTask.java" rel="noopener ugc nofollow" target="_blank">KCQuickstartSinkTask.java</a></li></ul><p id="f5bf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jq" href="https://github.com/luckykurhe/kcquickstart" rel="noopener ugc nofollow" target="_blank">源代码</a></p><p id="aab0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.获取如所示的控制台设置(以便更好地查看每个屏幕上运行的命令)</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es jy"><img src="../Images/7f935ef412ba225b057fe1a0717e20c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hbh4k6O_-7me9XleeUoYUQ.jpeg"/></div></div></figure><p id="a3ea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.将KCQuickstartSinkConnector jar复制粘贴到文件夹“Kafka _ 2.10–0 . 10 . 2 . 1/libs/”</p><p id="8872" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.启动卡夫卡动物园管理员</p><p id="f2a4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">6.启动Kafka服务器</p><p id="e096" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">7.创建卡夫卡主题</p><p id="2e50" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">8.启动Kafka Conosle制作人</p><p id="59c8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">9.启动Kafka连接</p><p id="3d6a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">10.使用REST API调用<code class="du kk kl km kn b">curl -X POST -H "Content-Type: application/json"</code> <code class="du kk kl km kn b">-d '{"name":"kc-local-quickstart","config":{"topics":"kctopic_for_sink","connector.class":"com.sample.kcquickstart.KCQuickstartSinkConnector","tasks.max":"1","key.converter":"org.apache.kafka.connect.storage.StringConverter","value.converter":"org.apache.kafka.connect.storage.StringConverter","key.converter.schemas.enable":"false","value.converter.schemas.enable":"false"}}'</code> <code class="du kk kl km kn b">localhost:8083/connectors</code>启动一个连接器</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es ko"><img src="../Images/b086874912aff7a32b83a52f0dfce4d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C53hXhKOeLMI8YjfTwlxBQ.jpeg"/></div></div></figure><p id="23b6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">11.使用Kafka控制台生成器向Kafka主题“kctopic_for_sink”发送少量记录</p><p id="bb64" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">12.由于主题上有新记录，连接器应该获取这些记录并将其发送到SinkTask进行处理</p><p id="c3ee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">13.检查Kafka-Connect的输出控制台，记录应该显示在这里..</p><figure class="jz ka kb kc fd kd er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es kp"><img src="../Images/46545dff19396938639bf13cba3efb22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iG5VWyTi4lykL0dOHTTWXg.jpeg"/></div></div></figure><p id="e7eb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">14。<em class="ju">现在，您有了一个用于完整Kafka connect开发和测试目的的端到端本地设置。</em> </p><p id="31bc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">希望您喜欢快速入门指南，并学到了一些新东西。如果是，记得按下<strong class="ig hi">拍手</strong>按钮:-)</p></div></div>    
</body>
</html>