<html>
<head>
<title>Executing microflows in parallel (Parallel computing) with Mendix</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Mendix并行执行微流(并行计算)</h1>
<blockquote>原文：<a href="https://medium.com/mendix/mendix-executing-microflow-in-parallel-parallel-computing-3e642a7aa0b6?source=collection_archive---------1-----------------------#2020-07-19">https://medium.com/mendix/mendix-executing-microflow-in-parallel-parallel-computing-3e642a7aa0b6?source=collection_archive---------1-----------------------#2020-07-19</a></blockquote><div><div class="ef hi hj hk hl hm"/><div class="hn ho hp hq hr"><figure class="ht hu fm fo hv hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff hs"><img src="../Images/0d1f03e526f7499bc450b6e943234f8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ci7_MJjd-6Wxhj8ITabkag.png"/></div></div></figure><div class=""/><blockquote class="jc jd je"><p id="c8c4" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">介绍</p></blockquote><p id="4fa7" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">在本文中，我将讨论我们如何并行执行微流——并行计算，Mendix中有哪些可用选项，它的缺陷和其他解决方案。</p><figure class="kh ki kj kk fq hw fe ff paragraph-image"><div role="button" tabindex="0" class="hx hy di hz bf ia"><div class="fe ff kg"><img src="../Images/c15933ed7369d1d135faaeb19b85d49d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*betC1hAVYE0DorNTlRqE3g.png"/></div></div><figcaption class="kl km fg fe ff kn ko bd b be z ek">Parallel computing</figcaption></figure><blockquote class="jc jd je"><p id="03ea" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">需求和问题(只是为了理解需求)</p></blockquote><p id="a922" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">我必须生成一个PDF，为了生成PDF，我必须获得大量(实际上是大量)数据，将它们放在一起，一旦收集完毕，我就可以生成PDF。</p><p id="7b02" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">我面临两个问题。按顺序收集数据花费了大量时间。的确，生成Mendix PDF本身需要时间，最终，一切都完成了，PDF在25秒后生成。在本文中，我将向您展示我是如何解决数据收集问题以减少时间的。</p><p id="f44b" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">数据收集是按顺序进行的，这在当今这个拥有强大计算能力和多核处理器的世界是不需要的。因此，我进一步研究:我如何避免顺序处理，进入并行计算来收集所有需要的数据？</p><blockquote class="jc jd je"><p id="426a" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">Mendix选项</p></blockquote><p id="3a79" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">我们都知道并体验过流程队列。其中，我们为流程分配一个微流，为处理对象进行排队操作。还有其他核心选项，如来自核心或社区公共的executeMicroflowInBackground。但是我不确定这些选项是否能完全支持上述并行计算需求。</p><blockquote class="jc jd je"><p id="fc15" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">替代解决方案</p></blockquote><p id="ba70" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">作为一名java程序员，我回归本源，决定用Java来做。我想写我自己的线程，看看我如何能解决这个问题。通过花大量时间阅读，我最终有了两个选择:CountDownLatch和CyclicBarrier。这些选择真的让我大吃一惊。因为我需要的东西已经在那里了。</p><p id="f049" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">我将在下面提供一些阅读链接给那些有兴趣了解更多选项的人。</p><blockquote class="jc jd je"><p id="a476" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">履行</p></blockquote><ol class=""><li id="09a0" class="kp kq if bd b ji jj jm jn kd kr ke ks kf kt kc ku kv kw kx dt translated">我拆分了进行数据收集的微流，最终得到了逻辑拆分的微流，我可以单独并行执行这些微流。</li><li id="7527" class="kp kq if bd b ji ky jm kz kd la ke lb kf lc kc ku kv kw kx dt translated">编写了一个接受微流名称作为参数的java操作。</li><li id="2679" class="kp kq if bd b ji ky jm kz kd la ke lb kf lc kc ku kv kw kx dt translated">我选择CountDownLatch选项，因为我希望一个主线程等待其他线程完成并继续生成PDF。</li><li id="bf13" class="kp kq if bd b ji ky jm kz kd la ke lb kf lc kc ku kv kw kx dt translated">对于每个微流，我创建了一个服务线程，它通过传递所需的参数来执行微流。</li><li id="0a82" class="kp kq if bd b ji ky jm kz kd la ke lb kf lc kc ku kv kw kx dt translated">微流的执行实际上是并行的，而不是顺序的。最后，一旦所有的数据收集完成，我就可以继续生成PDF了</li></ol><blockquote class="jc jd je"><p id="e331" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated">结论</p></blockquote><p id="08d8" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">我能够通过并行运行微流来优化数据收集。因此，如果我有5个微流进行数据收集，按顺序执行它们:考虑到1个微流需要4秒，那么数据收集在20秒后完成。在我上面解释的方法中，我能够在4-5秒内完成数据收集，还能够减少生成PDF所需的时间。</p><p id="e230" class="pw-post-body-paragraph jf jg if bd b ji jj jk jl jm jn jo jp kd jr js jt ke jv jw jx kf jz ka kb kc hn dt translated">注意:就我所知，这只对持久化的实体有效。由于服务线程在系统上下文中工作，我们仍然必须在微流中提交。</p><blockquote class="jc jd je"><p id="f2b9" class="jf jg jh bd b ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc hn dt translated"><em class="if">参考文献</em></p></blockquote><div class="ht hu fm fo hv ld"><a href="https://www.omnisci.com/technical-glossary/parallel-computing" rel="noopener  ugc nofollow" target="_blank"><div class="le ab ej"><div class="lf ab lg cl cj lh"><h2 class="bd ig fv z el li eo ep lj er et ie dt translated">什么是并行计算？定义和常见问题| OmniSci</h2><div class="lk l"><h3 class="bd b fv z el li eo ep lj er et ek translated">并行计算是一种计算架构，其中几个处理器同时执行多个…</h3></div><div class="ll l"><p class="bd b gc z el li eo ep lj er et ek translated">www.omnisci.com</p></div></div><div class="lm l"><div class="ln l lo lp lq lm lr ib ld"/></div></div></a></div><div class="ht hu fm fo hv ld"><a href="https://www.baeldung.com/java-cyclicbarrier-countdownlatch" rel="noopener  ugc nofollow" target="_blank"><div class="le ab ej"><div class="lf ab lg cl cj lh"><h2 class="bd ig fv z el li eo ep lj er et ie dt translated">Java cyclic barrier vs CountDownLatch | bael dung</h2><div class="lk l"><h3 class="bd b fv z el li eo ep lj er et ek translated">在本教程中，我们将比较CyclicBarrier和CountDownLatch，并尝试了解它们的相似之处和不同之处…</h3></div><div class="ll l"><p class="bd b gc z el li eo ep lj er et ek translated">www.baeldung.com</p></div></div><div class="lm l"><div class="ls l lo lp lq lm lr ib ld"/></div></div></a></div><div class="ht hu fm fo hv ld"><a href="https://javahungry.blogspot.com/2018/08/difference-between-countdownlatch-and-cyclicbarrier-in-java.html" rel="noopener  ugc nofollow" target="_blank"><div class="le ab ej"><div class="lf ab lg cl cj lh"><h2 class="bd ig fv z el li eo ep lj er et ie dt translated">Java中CountDownLatch和CyclicBarrier的区别</h2><div class="lk l"><h3 class="bd b fv z el li eo ep lj er et ek translated">在本文中，我们将看到java中CountDownLatch和CyclicBarrier的区别。这个问题是相关的…</h3></div><div class="ll l"><p class="bd b gc z el li eo ep lj er et ek translated">javahungry.blogspot.com</p></div></div></div></a></div></div></div>    
</body>
</html>