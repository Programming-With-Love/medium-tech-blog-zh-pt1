<html>
<head>
<title>The Android Lifecycle cheat sheet — part II: Multiple activities</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android生命周期备忘单——第二部分:多项活动</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/the-android-lifecycle-cheat-sheet-part-ii-multiple-activities-a411fd139f24?source=collection_archive---------4-----------------------#2017-12-05">https://medium.com/androiddevelopers/the-android-lifecycle-cheat-sheet-part-ii-multiple-activities-a411fd139f24?source=collection_archive---------4-----------------------#2017-12-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="e117" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本系列:<br/> * <a class="ae jc" rel="noopener" href="/@JoseAlcerreca/the-android-lifecycle-cheat-sheet-part-i-single-activities-e49fd3d202ab"> <strong class="ig hi">第一部分:活动</strong> —单个活动生命周期</a> <br/> * <strong class="ig hi">第二部分:多个活动</strong> —导航和回栈(本帖)<br/> * <a class="ae jc" rel="noopener" href="/@JoseAlcerreca/the-android-lifecycle-cheat-sheet-part-iii-fragments-afc87d4f37fd"> <strong class="ig hi">第三部分:片段</strong> —活动和片段生命周期</a> cle <br/> * <a class="ae jc" rel="noopener" href="/androiddevelopers/the-android-lifecycle-cheat-sheet-part-iv-49946659b094"> <strong class="ig hi">第四部分:视图模型、半透明活动和启动模式</strong> </a></p><p id="f8e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些图表还可以作为PDF格式的<a class="ae jc" href="https://github.com/JoseAlcerreca/android-lifecycles" rel="noopener ugc nofollow" target="_blank">备忘单</a>快速参考。</p></div><div class="ab cl jd je go jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="ha hb hc hd he"><blockquote class="jk jl jm"><p id="e14b" class="ie if jn ig b ih ii ij ik il im in io jo iq ir is jp iu iv iw jq iy iz ja jb ha bi translated">请注意，当在图表中显示多个组件(活动、片段等)的生命周期时，并排出现的分组事件并行运行。执行焦点可以在任何时候从一个并行事件组切换到另一个，所以并行事件组之间的调用顺序没有保证。但是，组内的顺序是有保证的。</p><p id="4997" class="ie if jn ig b ih ii ij ik il im in io jo iq ir is jp iu iv iw jq iy iz ja jb ha bi translated">以下场景不适用于定义了自定义启动模式或任务关联性的活动和任务。有关更多信息，请参见Android开发者网站上的<a class="ae jc" href="https://developer.android.com/guide/components/activities/tasks-and-back-stack.html" rel="noopener ugc nofollow" target="_blank">任务和后台堆栈</a>。</p></blockquote><h1 id="e3ef" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">后台堆栈—场景1:在活动之间导航</h1><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es et"><img src="../Images/587499758d01c1ef297f39a2da4cb281.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Bt1fQmVtZc0ExHUlzhJO6Q.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx"><strong class="bd jt">Scenario 1: Navigating between activities</strong></figcaption></figure><p id="d2f6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这种情况下，当一个新的活动开始时，活动1被<a class="ae jc" href="https://developer.android.com/guide/components/activities/activity-lifecycle.html#onstop" rel="noopener ugc nofollow" target="_blank">停止</a>(但不被销毁)，类似于用户导航离开(就好像“Home”被按下)。</p><p id="82a1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当按下返回按钮时，activity 2被销毁并结束。</p><h2 id="d7e9" class="le js hh bd jt lf lg lh jx li lj lk kb ip ll lm kf it ln lo kj ix lp lq kn lr bi translated">管理状态</h2><p id="0f5e" class="pw-post-body-paragraph ie if hh ig b ih ls ij ik il lt in io ip lu ir is it lv iv iw ix lw iz ja jb ha bi translated">注意，<code class="du lx ly lz ma b"><a class="ae jc" href="https://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState(android.os.Bundle)" rel="noopener ugc nofollow" target="_blank">onSaveInstanceState</a></code>叫做，<strong class="ig hi">但是</strong> <code class="du lx ly lz ma b"><a class="ae jc" href="https://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState(android.os.Bundle, android.os.PersistableBundle)" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">onRestoreInstanceState</strong></a></code> <strong class="ig hi">不是</strong>。如果在第二个活动处于活动状态时发生了配置更改，那么只有当第一个活动重新获得焦点时，它才会被销毁并重新创建。这就是为什么保存状态的实例很重要。</p><p id="68e6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果系统为了节省资源而杀死app进程，这是另一个需要恢复状态的场景。</p></div><div class="ab cl jd je go jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="ha hb hc hd he"><h1 id="aa50" class="jr js hh bd jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk mf km kn ko bi translated"><strong class="ak">后台堆栈—场景2:配置发生变化的后台堆栈中的活动</strong></h1><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es mg"><img src="../Images/8de2beba3c388472d79e49902b76fe68.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TaoqKwKSPur_2S__OzhdoQ.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx"><strong class="bd jt">Scenario 2: Activities in the back stack with configuration changes</strong></figcaption></figure><h2 id="0d54" class="le js hh bd jt lf lg lh jx li lj lk kb ip ll lm kf it ln lo kj ix lp lq kn lr bi translated">管理状态</h2><p id="792e" class="pw-post-body-paragraph ie if hh ig b ih ls ij ik il lt in io ip lu ir is it lv iv iw ix lw iz ja jb ha bi translated">保存状态不仅对前台的活动很重要。<strong class="ig hi">配置更改后，堆栈中的所有活动都需要恢复状态</strong>以重新创建它们的UI。</p><p id="07b7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，系统几乎可以在任何时候终止你的应用程序的进程，所以你应该准备好在任何情况下恢复状态。</p></div><div class="ab cl jd je go jf" role="separator"><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji jj"/><span class="jg bw bk jh ji"/></div><div class="ha hb hc hd he"><h1 id="eadd" class="jr js hh bd jt ju mb jw jx jy mc ka kb kc md ke kf kg me ki kj kk mf km kn ko bi translated">后台堆栈—场景3:应用程序的进程被终止</h1><p id="802f" class="pw-post-body-paragraph ie if hh ig b ih ls ij ik il lt in io ip lu ir is it lv iv iw ix lw iz ja jb ha bi translated">当Android操作系统需要资源时，它会在后台杀死应用程序。</p><figure class="kp kq kr ks fd kt er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es mh"><img src="../Images/8d7f29648e985ef1249f54de4358a560.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Au5PqGADz31UCfANL3ZRug.png"/></div></div><figcaption class="la lb et er es lc ld bd b be z dx"><strong class="bd jt">Scenario 3: App’s process is killed</strong></figcaption></figure><h2 id="0e10" class="le js hh bd jt lf lg lh jx li lj lk kb ip ll lm kf it ln lo kj ix lp lq kn lr bi translated"><strong class="ak">管理状态</strong></h2><p id="33f7" class="pw-post-body-paragraph ie if hh ig b ih ls ij ik il lt in io ip lu ir is it lv iv iw ix lw iz ja jb ha bi translated">注意，完整回栈的状态被保存，但是为了有效地使用资源，活动仅在它们被重新创建时被恢复。</p><h1 id="cf6e" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">也阅读</h1><ul class=""><li id="52c7" class="mi mj hh ig b ih ls il lt ip mk it ml ix mm jb mn mo mp mq bi translated"><a class="ae jc" rel="noopener" href="/google-developers/who-lives-and-who-dies-process-priorities-on-android-cb151f39044f">谁生谁死？Android上的进程优先级</a></li></ul><h1 id="4c72" class="jr js hh bd jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko bi translated">继续阅读</h1><ul class=""><li id="1a3f" class="mi mj hh ig b ih ls il lt ip mk it ml ix mm jb mn mo mp mq bi translated"><a class="ae jc" rel="noopener" href="/@JoseAlcerreca/the-android-lifecycle-cheat-sheet-part-iii-fragments-afc87d4f37fd">Android生命周期备忘单第三部分——片段</a></li></ul></div></div>    
</body>
</html>