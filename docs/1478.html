<html>
<head>
<title>Building CelebritySleuth — A Serverless Framework Application</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">构建一个无服务器的框架应用程序</h1>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/building-celebritysleuth-a-serverless-framework-application-42ce9fe9d22f?source=collection_archive---------6-----------------------#2017-10-19">https://medium.com/capital-one-tech/building-celebritysleuth-a-serverless-framework-application-42ce9fe9d22f?source=collection_archive---------6-----------------------#2017-10-19</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/b0eac96c43ac74dd923be11ce298e483.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aWgAzommvoDw6BTxPAQVlw.png"/></div></div></figure><h1 id="2f8f" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">庆祝活动</h1><p id="5766" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">我用<a class="ae kl" href="https://www.twilio.com/" rel="noopener ugc nofollow" target="_blank"> Twilio </a>、<a class="ae kl" href="https://aws.amazon.com/rekognition" rel="noopener ugc nofollow" target="_blank"> Amazon Rekognition </a>和<a class="ae kl" href="http://imdbpy.sourceforge.net/" rel="noopener ugc nofollow" target="_blank"> IMDbPy API </a>用<a class="ae kl" href="https://serverless.com/framework" rel="noopener ugc nofollow" target="_blank">无服务器框架</a>构建了一个名人人脸识别服务。</p><p id="958c" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">该项目提供了无服务器计算的概述，并通过帮助构建一个引人注目的名人<em class="kr">Shazam</em>示例(使用无服务器框架命名为<strong class="jp hi"> CelebritySleuth </strong>)来深化这一概念。</p><p id="50d6" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><em class="kr">有关无服务器架构和无服务器框架的更多信息，请查看本</em> <a class="ae kl" href="https://github.com/skarlekar/faces/blob/master/What_is_Serverless.md" rel="noopener ugc nofollow" target="_blank"> <em class="kr">白皮书</em> </a> <em class="kr">。</em></p><h1 id="591e" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">介绍</h1><p id="a963" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">我们正处于计算时代的转折点，机器学习正在商品化，允许普通开发人员运用人工智能的能力来处理自然语言，识别人脸，并将文本转换为语音，而不必涉足神秘的神经网络或其他基于深度学习的算法。亚马逊的Rekognition、Polly和Lex等服务就是很好的例子，它们允许个人开发者设计应用程序，而这些应用程序直到最近还是研究实验室和大型科技公司的领域。(最重要的是，这些是100%无服务器的。你只需要为你使用它们的时间付费，而且它是不可思议的可扩展的。)</p><p id="5207" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">为了理解这些服务的能力，同时享受使用无服务器模型构建应用程序的乐趣，我在寻找一个有趣的问题来解决。我解决的第一个问题是计算放在桌子上的硬币的价值。使用Python和各种Python图像库很容易构建该解决方案。不幸的是，当要把代码塞进AWS Lambda时，我遇到了硬停。AWS Lambda对可部署的代码大小有上限，我使用的图像库非常庞大。这很快被证明是行不通的。</p><p id="2ce9" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">大约在这个时候，我的小女儿面临着她自己的一个令人烦恼的问题。在看电视节目时，她不能把女演员的脸和她的名字放在一起。她知道她以前在另一部迪斯尼系列剧中见过这位女演员，但她是谁呢？当我们在餐桌上讨论这个问题时，我们很快决定由我来做点什么来解决她的困境。CelebritySleuth诞生了。</p><h1 id="e6f2" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">观众</h1><p id="f5a7" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">希望实现以下目标的开发人员或解决方案架构师:</p><p id="ddea" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">1.了解有关无服务器框架以及如何使用它来开发自动伸缩、按执行付费、事件驱动的应用程序的更多信息。</p><p id="1f1c" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">2.构建对业务目标至关重要的应用程序，而不是花费时间配置、部署和维护基础架构。</p><p id="f634" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">3.探索无服务器架构带来的效率提升。</p><h1 id="b0ec" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">CelebritySleuth应用程序</h1><p id="7797" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">CelebritySleuth应用程序是一个事件驱动的应用程序，它利用了:</p><p id="32ed" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">1.表示层的用户的移动SMS/MMS，</p><p id="51ef" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">2.Twilio位于中间层，是短信世界和AWS网关之间的桥梁</p><p id="82eb" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">3.一组用Python编写的AWS Lambda函数，使用AWS Rekogniton进行图像处理，使用IMDB收集名人信息。</p><p id="3441" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">在一个典型的应用中，用户拍摄一个名人的照片(在电视上？！)使用他/她的手机摄像头，并将图像和指令一起发送到Twilio上的电话号码。系统会验证指令，如果指令集中有错误，系统会立即做出响应，如果验证通过，系统会显示一条消息以等待实际响应。不一会儿，用户就会收到一个回复，上面有这个名人的名字和传记。</p><p id="a584" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">首先，该应用程序必须通过建立名人集合来训练识别人脸。您可以通过向应用程序发送名人图片(图片URL)及其相应名称的随机样本来实现这一点。个人名人发送的照片越多，识别就越准确。</p><p id="8fd1" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">CelebritySleuth应用程序包含两个服务:</p><p id="23d0" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">- <a class="ae kl" href="https://github.com/skarlekar/faces/tree/master/twilioCommunicationService" rel="noopener ugc nofollow" target="_blank"> Twilio通信服务</a></p><p id="4ea8" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">- <a class="ae kl" href="https://github.com/skarlekar/faces/tree/master/faceRecognitionService" rel="noopener ugc nofollow" target="_blank">人脸识别服务</a></p><p id="754a" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">服务被分离，以允许将来使用不同的表示层。</p><ul class=""><li id="b6d5" class="ks kt hh jp b jq km ju kn jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">建筑</strong></li></ul><p id="b979" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">CelebritySleuth应用程序使用Lambda函数来满足计算需求。因此，应用程序组件在使用前配置，使用后关闭，从而形成低成本、高可扩展性的应用程序。</p><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lb"><img src="../Images/c2d269971232742d4ce2fa509dcc372f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Yr1EdMqB5N_39djgHhQzGg.png"/></div></div></figure><p id="1271" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">上图展示了应用程序的高级架构。详情如下:</p><p id="3beb" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">1.用户发送一张图片和命令，以添加/匹配一个集合的脸。或者，用户可以创建一个集合，在这种情况下不需要图片。SMS/MMS被发送到Twilio拥有的电话号码。</p><p id="ffd2" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">2.Twilio截取消息，并根据用户的Twilio配置将其转发给API网关。</p><p id="c36a" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">3.API Gateway将TwiML翻译成JSON，并调用请求处理器lambda函数。</p><p id="99c7" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">4.请求处理器lambda验证这些命令，并向SNS上的适当主题发送一条消息。如果验证失败，它会通过Twilio向用户返回错误消息。</p><p id="dfb8" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">5.当消息到达Create Collection主题时，会触发一个lambda，通过Boto库将命名的集合添加到AWS Rekognition中。成功/错误消息放在响应处理器主题中。</p><p id="8959" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">6.当消息到达Add Face主题时，会触发一个lambda来标识图像中最突出的面部，并将该面部的元数据添加到给定的集合中。如果没有识别出面孔，它会创建一条错误消息，并将响应发送到响应处理器主题。</p><p id="6a30" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">7.当消息到达匹配面部主题时，lambda被触发，该lambda识别图像中最突出的面部，并将该面部的元数据与集合中的已知面部进行匹配。如果找到匹配，则返回相应人员的姓名。Lambda然后使用IMDB来查找这个人的传记。</p><p id="768b" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">8.各种基于lambda的处理器丢弃响应处理器主题上的响应消息。</p><p id="d54e" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">9.响应处理器获取响应并构造一条SMS消息，然后调用Twilio的SMS服务。</p><p id="8882" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">10.Twilio验证发件人号码，并将消息发送到相应的收件人号码。</p><ul class=""><li id="909a" class="ks kt hh jp b jq km ju kn jy ku kc kv kg kw kk kx ky kz la bi translated"><strong class="jp hi">组件</strong></li></ul><p id="ab4c" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">该应用程序由以下组件组成:</p><p id="083b" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">1.<strong class="jp hi"> Python </strong> — Python是一种编程语言，可以让你快速工作，更有效地集成系统。我们将使用Python 2.7来构建CelebritySleuth应用程序。</p><p id="a1c6" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">2.<strong class="jp hi"> Twilio </strong> — Twilio消息服务，让用户通过SMS与应用程序通信。</p><p id="9624" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">3.<strong class="jp hi"> AWS Lambda </strong> — AWS Lambda让您无需供应或管理服务器即可运行代码。您只需为您消耗的计算时间付费，当您的代码不运行时，则不收费。</p><p id="8232" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">4.<strong class="jp hi">AWS Rekognition</strong>—Amazon Rekognition是一项服务，可以轻松地将图像分析添加到您的应用程序中。使用Rekognition，您可以检测图像中的对象、场景和人脸。您还可以搜索和比较面孔。</p><p id="f993" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">5.<strong class="jp hi"> IMDb </strong> — IMDbPY是一个Python包，用于检索和管理IMDb电影数据库中关于电影、人物、角色和公司的数据。</p><h1 id="1e60" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">安装说明</h1><p id="4197" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated"><strong class="jp hi"> 1。</strong> <strong class="jp hi">安装Python </strong></p><p id="f392" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">如果您在Mac或Linux机器上，您可能已经安装了Python。在Windows上，您必须安装Python。</p><p id="c66f" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">不管您的操作系统是什么，您都应该使用虚拟环境来运行Python。<a class="ae kl" href="https://www.continuum.io/downloads" rel="noopener ugc nofollow" target="_blank"> Anaconda </a>，或者它的简洁版本<a class="ae kl" href="https://conda.io/miniconda.html" rel="noopener ugc nofollow" target="_blank"> Miniconda </a>，是Python虚拟环境，允许你管理Python的各种版本和环境。Python自带了安装程序和包管理器<em class="kr"> conda </em>。</p><p id="fc84" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">按照此处的说明<a class="ae kl" href="https://conda.io/docs/install/quick.html" rel="noopener ugc nofollow" target="_blank">安装Miniconda。<em class="kr">注意:对于这个项目，我们将使用Python 2.7。</em></a></p><p id="018c" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> 2。</strong> <strong class="jp hi">创建Python虚拟环境</strong></p><p id="5baf" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">安装Python 2.7后，创建一个虚拟环境，如下所示。注意:我调用我的虚拟环境<em class="kr"> faces </em>:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="ce18" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ conda create -n faces python=2</em></span></pre><p id="8785" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> 3。</strong> <strong class="jp hi">初始化你的Python虚拟环境</strong></p><p id="6438" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">要开始在新的Python虚拟环境中工作:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="71d9" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ source activate faces</em></span></pre><p id="ad54" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">如果您在Windows中工作，请使用:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="43e9" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ activate faces</em></span></pre><p id="5726" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> 4。</strong> <strong class="jp hi">安装Git </strong></p><p id="dd3e" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">Git是一个流行的代码修订控制系统。要为您各自的操作系统安装Git，请遵循这里的说明<a class="ae kl" href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="e747" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> 5。</strong> <strong class="jp hi">安装庆典灯</strong></p><p id="6b89" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">要从Git安装CelebritySleuth，请遵循以下说明:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="349b" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ mkdir DevFestDC</em></span><span id="ec33" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ cd DevFestDC</em></span><span id="03ea" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ git clone — recursive </em><a class="ae kl" href="https://github.com/skarlekar/faces.git" rel="noopener ugc nofollow" target="_blank"><em class="kr">https://github.com/skarlekar/faces.git</em></a></span></pre><p id="254c" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> 6。</strong> <strong class="jp hi"> Twilio设置</strong></p><p id="17cb" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">如果您还没有Twilio号码，<a class="ae kl" href="https://www.twilio.com/try-twilio" rel="noopener ugc nofollow" target="_blank">注册Twilio </a>并获得一个带有彩信功能的试用电话号码。您可以在30天的试用期内使用该号码。</p><p id="ef49" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi">设置Twilio环境变量</strong></p><p id="2433" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">使用您从Twilio获得的凭证更新存储库中的<em class="kr"> setTwilio.sh </em>并设置您的环境。<em class="kr"> vi </em>的使用说明此处为<a class="ae kl" href="https://www.howtoforge.com/faq/how-to-edit-files-on-the-command-line" rel="noopener ugc nofollow" target="_blank"/>。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="d206" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ cd faces</em></span><span id="8f02" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ vi setTwilio.sh</em></span><span id="787f" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ source ./setTwilio.sh</em></span></pre><p id="a670" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">Windows用户，使用:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="33e5" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ cd faces</em></span><span id="4ec7" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ edit setTwilio.cmd</em></span><span id="b4f2" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ setTwilio.cmd</em></span></pre><p id="e4d6" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi">测试Twilio设置</strong></p><p id="95a1" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">为了测试你的Twilio设置，运行<em class="kr"> twilioTester </em>下的Python程序<em class="kr"> sendmessage.py </em>。该程序只需使用您的Twilio凭据向您的手机号码发送一条消息。<em class="kr">注意:确保您是在Python 2.7环境中运行的。</em></p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="0400" class="ll iq hh lh b fi lm ln l lo lp">$ python twilioTester/sendmessage.py</span></pre><p id="7d36" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">如果您在手机上收到一条带有图像的信息，则您的Twilio is setup正在运行。</p><p id="f0d4" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi">7<em class="kr">。</em> </strong> <strong class="jp hi"> <em class="kr">安装Node.js和无服务器框架</em> </strong></p><p id="78b2" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">无服务器框架是一个Node.js应用程序。要使用无服务器框架并运行CelebritySleuth应用程序，您需要安装Node.js。按照无服务器框架网站上的<a class="ae kl" href="https://serverless.com/framework/docs/providers/aws/guide/installation/" rel="noopener ugc nofollow" target="_blank">说明</a>安装Node.js和无服务器框架。</p><p id="ae42" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">使用以下方法确保您的无服务器框架正常运行:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="d7ca" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ serverless –version</em></span></pre><p id="b92e" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr"> 8。</em> </strong> <strong class="jp hi">亚马逊AWS设置</strong></p><p id="7e95" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">1.登录您的AWS帐户或<a class="ae kl" href="https://console.aws.amazon.com/console/home?region=us-east-1" rel="noopener ugc nofollow" target="_blank">注册</a>获得一个帐户。</p><p id="4375" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">2.按照此处的<a class="ae kl" href="https://serverless.com/framework/docs/providers/aws/guide/credentials/" rel="noopener ugc nofollow" target="_blank">中的说明设置您的AWS凭证。</a></p><p id="1a9b" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> 9。</strong> <strong class="jp hi">测试您的无服务器设置</strong></p><p id="fbb0" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">既然您已经设置了AWS，那么是时候通过使用无服务器框架创建一个模拟函数来测试您的无服务器设置了。</p><p id="1a2d" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">创建一个测试目录。在测试目录中，从默认模板创建一个Lambda函数，如下所示:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="f56e" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ mkdir sls-tester</em></span><span id="c7b9" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ cd sls-tester</em></span><span id="050b" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ sls create — template aws-python — name sls-test</em></span></pre><p id="2695" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">这将在当前目录中创建两个文件:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="b5a7" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">&gt; serverless.yml</em></span><span id="7e5b" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">&gt;</em></span><span id="dca5" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">&gt; handler.py</em></span></pre><p id="90d2" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><em class="kr"> serverless.yml </em>声明了一个示例服务和一个函数。<em class="kr"> handler.py </em>返回一条消息，表明您的函数执行成功。</p><p id="28bb" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">要部署该功能，只需键入:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="110d" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ sls deploy — verbose</em></span></pre><p id="e09a" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">这将部署该功能。verbose选项提供额外的信息。</p><p id="63d9" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">要测试您的函数，请键入:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="b441" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ sls invoke — function hello</em></span></pre><p id="b683" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">如果您收到以下消息，则您的无服务器安装正在运行。</p><p id="f147" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr">警告:您正在运行1.9.0版。1.10.0版将包含以下重大变更:</em> </strong></p><p id="9d97" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr"> -部署插件的一些生命周期事件将移动到一个新的插件包中。更多信息-&gt;</em></strong><a class="ae kl" href="https://git.io/vy1zC" rel="noopener ugc nofollow" target="_blank"><strong class="jp hi"><em class="kr">https://git.io/vy1zC</em></strong></a></p><p id="492c" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">您可以通过设置“SLS_IGNORE_WARNING=*”环境变量来退出这些警告。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="2a22" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">{</em></span><span id="3a6f" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">“body”: “{\”input\”: {}, \”message\”: \”Go Serverless v1.0! Your function executed successfully!\”}”,</em></span><span id="3077" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">“statusCode”: 200</em></span><span id="5f55" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">}</em></span></pre><p id="270a" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> 10。</strong> <strong class="jp hi"> Twilio通信服务</strong></p><p id="ccd4" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><a class="ae kl" href="https://github.com/skarlekar/faces/tree/master/twilioCommunicationService" rel="noopener ugc nofollow" target="_blank"> Twilio通信服务</a>将Twilio的短信服务与人脸识别服务连接起来。当用户向他/她的Twilio号码发送消息时，该消息会被Twilio的消息服务拦截。Twilio消息服务会将SMS消息内容转发到AWS API网关URL。AWS API网关将依次调用<em class="kr">twilicommunicationservice</em>中的请求处理器(<em class="kr">process _ Request</em>)Lambda函数。</p><p id="611b" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><em class="kr">twilio communication service</em>支持两个功能:</p><p id="4c44" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">1.<em class="kr"> processRequest </em>函数验证传入的请求，如果消息格式正确，则同步发送响应，如果不正确，则发送一条给出正确用法的错误消息——有关如何使用该服务的详细信息，请参见<a class="ae kl" href="https://github.com/skarlekar/faces#usage" rel="noopener ugc nofollow" target="_blank">用法</a>一节。然后它通过SNS异步调用<em class="kr">facecognitionservice</em>来处理命令。</p><p id="e68f" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">2.<em class="kr"> sendResponse </em>函数编写来自<a class="ae kl" href="https://github.com/skarlekar/faces#face-recognition-service" rel="noopener ugc nofollow" target="_blank">facecognitionservice</a>的响应，并将响应发送回发出请求的号码。</p><p id="2591" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi">部署Twilio通信服务</strong></p><p id="4307" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">假设您的本地无服务器设置已经完成，并且上面的测试通过，按照下面的说明使用无服务器框架部署<em class="kr">twilioCommunicationService</em>:</p><p id="445b" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">通过运行您之前更新的shell脚本来设置您的Twilio凭证。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="41c6" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ source ./setTwilio.sh</em></span><span id="ebf7" class="ll iq hh lh b fi lq ln l lo lp">Windows users, use:</span><span id="9fb3" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ setTwilio.cmd</em></span></pre><p id="5304" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">将目录切换到twilioCommunicationService目录，并通过运行<em class="kr"> sls deploy </em>部署服务，如下所示:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="9b07" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ cd twilioCommunicationService</em></span><span id="4c43" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ sls deploy — verbose</em></span></pre><p id="ec17" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">确保部署过程中没有错误。您也可以前往您的<a class="ae kl" href="https://console.aws.amazon.com/apigateway/home?region=us-east-1#/apis" rel="noopener ugc nofollow" target="_blank"> AWS控制台</a>并验证API网关已经创建。您应该会看到一个名为<em class="kr">dev-twilio communication</em>的API网关。</p><p id="53e0" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">此外，通过验证<em class="kr">twilio communication-dev-process reques</em>t和<em class="kr">twilio communication-dev-send response</em>Lambda函数在<a class="ae kl" href="https://console.aws.amazon.com/lambda/home?region=us-east-1#/functions?display=list" rel="noopener ugc nofollow" target="_blank"> AWS Lambda控制台</a>中可用，确保创建Lambda函数。</p><p id="72c9" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">确保您的Twilio凭证设置为环境变量，方法是单击每个Lambda函数，并验证<em class="kr"> TWILIO_AUTH_TOKEN </em>和<em class="kr"> TWILIO_ACCOUNT_SID </em>已使用正确的值在<em class="kr">代码</em>选项卡的<em class="kr">环境变量</em>部分创建。</p><p id="9cc1" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi">设置Twilio消息服务</strong></p><p id="99fc" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">按照以下说明在Twilio中设置信息服务，并将您的Twilio号码与信息服务相关联:</p><p id="108e" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">1.在Twilio网站上，登录您的帐户，进入<a class="ae kl" href="https://www.twilio.com/console/sms/services" rel="noopener ugc nofollow" target="_blank">信息服务</a>。</p><p id="8b1a" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">2.点击Copilot信息服务下的<em class="kr"> + </em>添加新的信息服务。</p><p id="9249" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">3.为您的服务命名，然后点击<em class="kr">创建</em>。比方说，<em class="kr"> CelebritySleuth </em>。</p><p id="e627" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">4.在<em class="kr">用例</em>下拉列表中的<em class="kr">属性</em>下，选择<em class="kr">聊天机器人/交互式双向</em>。</p><p id="742a" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">5.在<em class="kr">入站设置</em>部分，确保勾选<em class="kr">处理入站消息</em>。</p><p id="f684" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">6.将AWS API网关URL从您的AWS控制台复制并粘贴到<em class="kr">请求URL </em>字段，并将<em class="kr"> /process_request </em>添加到URL的末尾。你的网址应该是这样的:<a class="ae kl" href="https://netxnasdfda.execute-api.us-east-1.amazonaws.com/dev/process_request" rel="noopener ugc nofollow" target="_blank"><strong class="jp hi"><em class="kr">https://netxnasdfda . execute-API . us-east-1 . amazonaws . com/dev/process _ request</em></strong></a></p><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lr"><img src="../Images/403e9e90593f2a6762ee8f6129ef1c37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EC4NE7B_jKo4xpwx77vVKQ.png"/></div></div></figure><p id="0410" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">7.在字段旁边的下拉列表中选择HTTP GET。</p><p id="3598" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">8.将其余字段保留默认值，并点击<em class="kr">保存</em>。</p><p id="1f0b" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">9.前往Twilio控制台中的<a class="ae kl" href="https://www.twilio.com/console/phone-numbers/incoming" rel="noopener ugc nofollow" target="_blank">数字</a>部分。</p><p id="99e3" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">10.点击分配给您的号码。这将带您到一个部分，在那里您可以配置当SMS消息发送到您的电话号码时应该发生什么。</p><p id="2026" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">11.在<em class="kr"> Messagin </em> g部分，选择<em class="kr"> CONFIGURE WITH </em>下拉框下的<em class="kr">消息服务</em>。</p><p id="8be0" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">12.在<em class="kr">消息服务</em>中，选择上面步骤2-8中创建的消息服务，点击<em class="kr">保存</em>。</p><p id="fb13" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> 11。</strong> <strong class="jp hi">人脸识别服务</strong></p><p id="fe34" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><a class="ae kl" href="https://github.com/skarlekar/faces/tree/master/faceRecognitionService" rel="noopener ugc nofollow" target="_blank">人脸识别服务</a>目前支持三种功能。它们是:</p><p id="39ab" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr">创建收藏</em> </strong>:添加收藏。</p><p id="8284" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr"> addFace: </em> </strong>向现有集合添加一个面。</p><p id="df96" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr"> matchFace: </em> </strong>匹配集合中的人脸，并在IMDb查找匹配人姓名的传记。</p><p id="af47" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">集合是面索引(面向量)及其相应名称的逻辑组。当您使用<em class="kr">create collection</em>Lambda函数创建集合时，它是空的。在后端，<em class="kr"> createCollection </em>在AWS Rekognition中创建一个集合。然后，您可以将新面孔添加到集合中，并将其与给定的名称相关联。这样创建的集合然后可以用于以高置信度搜索已知人脸的图像。实际上，面索引存储在由AWS Rekognition管理的服务器上的数据库中，您不能直接访问该数据库。</p><p id="027a" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">创建集合后，您可以使用<em class="kr"> addFace </em> Lambda函数将面添加到集合中。要将人脸添加到收藏中，您必须提供图像、收藏名称以及要与人脸关联的名称。如果给定图像中没有人脸，或者集合不存在，则会返回一条错误消息。<em class="kr"> addFace </em>函数使用AWS重新识别来检测给定图像中的面部，从面部提取特征，并将图像中检测到的面部特征信息保存到AWS重新识别中。面部特征被存储为可搜索的图像向量。</p><p id="0fdb" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">一旦你有了一些使用<em class="kr"> addFace </em>功能索引的人脸，你就可以提供使用<em class="kr"> matchFace </em>功能索引的人的图像。</p><p id="9484" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> 12。</strong> <strong class="jp hi">部署人脸识别服务</strong></p><p id="a916" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">将目录更改为faceRecognitionService目录，并通过运行<em class="kr"> sls deploy </em>部署服务，如下所示:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="54f0" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ cd faceRecognitionService</em></span><span id="f184" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ sls deploy — verbose</em></span></pre><p id="21c1" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">确保部署过程中没有错误。您也可以直接进入您的<a class="ae kl" href="https://console.aws.amazon.com/lambda/home?region=us-east-1#/functions?display=list" rel="noopener ugc nofollow" target="_blank"> AWS Lambda控制台</a>并验证Lambda函数<em class="kr">face recognition-dev-addFace</em>、<em class="kr">face recognition-dev-match face</em>和<em class="kr">face recognition-dev-create collection</em>已经创建。</p><p id="078f" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">13。 <strong class="jp hi">测试应用程序</strong></p><p id="ed48" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">要测试该应用程序，请通过向您的Twilio号码发送以下短信来创建收藏:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="1c37" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">face addcol celebs</em></span></pre><p id="0586" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">有用吗？你从那边收到消息了吗？如果不是为什么？查看您的processRequest Lambda函数的CloudWatch日志。有什么问题？</p><p id="fb7b" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">如果你仔细观察，你会发现Lambda函数没有足够的权限来操作SNS主题或AWS Rekognition资源。</p><p id="d727" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">14。 <strong class="jp hi">修复<em class="kr">twilio communication service</em></strong></p><p id="a53f" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">打开<em class="kr">twilicommunicationservice</em>中的<em class="kr"> serverless.yml </em>文件，取消对<em class="kr"> iamRoleStatements </em>部分的注释，保存并重新部署服务。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="a0cc" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ cd twilioCommunicationService</em></span><span id="81f2" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ vi serverless.yml</em></span><span id="1704" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ sls deploy — verbose</em></span></pre><p id="89ff" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">再次重复添加收藏。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="7ad7" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">face addcol celebs</em></span></pre><p id="cd05" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">这一次，您应该会收到一条消息，说明您将很快收到回复。</p><p id="21a5" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr">谓都好。你应该很快就会收到回复！”</em>T41】</strong></p><p id="eee5" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">你可以等到母牛回家，但你没有得到回应，是吗？这是因为，你必须在<em class="kr">facecognitionservice</em>中为Lambda函数提供更多的权限。</p><p id="5424" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi">15<em class="kr">。</em> </strong> <strong class="jp hi">固定<em class="kr">面部识别服务</em> </strong></p><p id="596d" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">打开<em class="kr"> faceRecognitionService </em>中的<em class="kr"> serverless.yml </em>文件，取消对<em class="kr"> iamRoleStatements </em>部分的注释，保存并重新部署服务。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="f677" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">$ cd twilioCommunicationService</em></span><span id="f2cf" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ vi serverless.yml</em></span><span id="1497" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">$ sls deploy — verbose</em></span></pre><p id="78d5" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">这应该已经解决了。现在，如果您添加一个集合:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="5937" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">face addcol celebs</em></span></pre><p id="da3d" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">您不仅会得到以下响应:</p><p id="2744" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr">“一切都好。你应该很快会收到你的回复！</em>T9】</strong></p><p id="c028" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">您还应该收到以下消息:</p><p id="00c4" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr">“收藏名人创建成功”</em> </strong></p><p id="82dd" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> 16。</strong> <strong class="jp hi">向集合添加一张脸</strong></p><p id="820d" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">要在收藏中添加人脸和人物图像，请在同一条短信中发送以下内容:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="9c80" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">(image)</em></span><span id="82d2" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">face addimg celebs firstName_lastName</em></span></pre><p id="9bd1" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">您应该会收到以下响应:</p><p id="ba83" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr">“名_姓添加到名人收藏中的照片”</em> </strong></p><p id="bf7a" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">17。 <strong class="jp hi">匹配集合中的一张脸</strong></p><p id="5ee5" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">现在，通过SMS向您的Twilio号码发送图像和以下命令，找到该人的另一张图像并测试AWS Rekognition的面部匹配能力:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="3330" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">(image)</em></span><span id="6413" class="ll iq hh lh b fi lq ln l lo lp"><em class="kr">face match celebs</em></span></pre><p id="20ca" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">您不仅会收到以下消息:</p><p id="9cb3" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr">“一切都好。你应该很快就会收到回复！”</em>T29】</strong></p><p id="e24f" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">您还应该收到以下消息，以及此人的传记。</p><p id="191a" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr">“面部匹配名姓，具有xx.xx相似度和yy.yy置信度。</em> </strong></p><p id="7169" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr"> …。</em> </strong></p><p id="e533" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi"> <em class="kr"> …。</em> </strong></p><h1 id="ea5d" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">使用</h1><p id="2075" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">以下是CelebritySleuth目前支持的命令。</p><p id="4cc0" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi">添加收藏</strong></p><p id="07ff" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">要添加新的收藏，请在SMS正文中键入以下内容。您不需要用这个命令添加任何图像。任何添加的图像都将被忽略。</p><p id="820e" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><em class="kr"> face addcol(收藏名称)</em></p><p id="81a5" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">其中<em class="kr">收藏名称</em>是您想要创建的收藏的名称。</p><p id="c0a0" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">示例:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="8586" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">face addcol celebs</em></span></pre><figure class="lc ld le lf fd ii er es paragraph-image"><div class="er es ls"><img src="../Images/38a562fc6c362cdbd42ee447638724e6.png" data-original-src="https://miro.medium.com/v2/resize:fit:932/format:webp/1*ElmkjlKPDZOJiroXA-Gi3Q.png"/></div></figure><p id="5d3d" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi">添加图像</strong></p><p id="6530" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">要将图像添加到给定的集合并将图像中的人脸与姓名相关联，请在SMS的正文中键入以下内容。您应该在同一条短信中包含一张图片。</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="6e63" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">face addimg (collection-name) (first-name_last-name)</em></span></pre><p id="370d" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">其中<em class="kr">收藏集名称</em>是现有收藏集的名称，名字姓氏是该人的全名。<em class="kr">注意:名字和姓氏应该用下划线隔开。</em></p><p id="feb7" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">示例:</p><figure class="lc ld le lf fd ii er es paragraph-image"><div class="er es lt"><img src="../Images/34881b47142b9a14c88f33540c7d04a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*OtGcJH9-OWsKq36cDkGY-Q.png"/></div></figure><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="9098" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">face addimg celebs Albert_Einstein</em></span></pre><p id="cd0e" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><strong class="jp hi">牌面</strong></p><p id="0863" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">要匹配给定集合中的面孔:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="c728" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">face match (collection-name)</em></span></pre><figure class="lc ld le lf fd ii er es paragraph-image"><div class="er es lt"><img src="../Images/1a432d53909143c333d81ed7a1943b55.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*G9Vzms2MapWsjpGEOFPDEg.png"/></div></figure><p id="04cc" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">其中<em class="kr">收藏名称</em>是现有收藏的名称。该命令必须在同一SMS消息中附带一个图像。</p><p id="7b19" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">示例:</p><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="231f" class="ll iq hh lh b fi lm ln l lo lp"><em class="kr">face match celebs</em></span></pre><h1 id="4664" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">实际应用:</h1><p id="44c9" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">以下是实际应用的动画示例:</p><p id="cf79" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><a class="ae kl" href="https://gist.github.com/skarlekar/c27ae9fef725683c0f969e2b02649454/raw/6749a5103b006e0b313f4dd510e9bd9b664c33b3/mel-fuzzed-less.gif" rel="noopener ugc nofollow" target="_blank">https://gist . github . com/skarlekar/c 27 AE 9 fef 725683 c0f 969 e2b 02649454/raw/6749 a 5103 b 006 E0 b 313 F4 DD 510 e9 BD 9 b 664 c 33 b 3/Mel-fuzzed-less . gif</a></p><h1 id="0997" class="ip iq hh bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">结论</h1><p id="7337" class="pw-post-body-paragraph jn jo hh jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">亚马逊、谷歌和微软等提供商提供的人工智能服务是构建智能应用程序的基石。它使开发人员能够使用预先训练的服务将智能添加到他们的应用程序中，而不是从头开始构建他们的算法和模型。</p><p id="f4b0" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">另一方面，无服务器框架是采用无服务器架构的加速器。它承诺大大减少开发工作量、降低成本、高可伸缩性以及跨各种提供商的多种部署选项。</p><p id="0c76" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated">在我的测试中，我无法在Microsoft Azure上部署CelebritySleuth应用程序，因为无服务器框架目前不支持部署用Python编写的函数。除此之外，使用无服务器框架，我能够在几个小时内从头到尾构建CelebritySleuth应用程序，相比之下，通过AWS控制台手动设置组件需要半天时间。</p><p id="144e" class="pw-post-body-paragraph jn jo hh jp b jq km js jt ju kn jw jx jy ko ka kb kc kp ke kf kg kq ki kj kk ha bi translated"><em class="kr">免责声明:Capital One与这篇博文中提到的公司无关。所有使用的商标都是其各自所有者的财产。</em></p></div></div>    
</body>
</html>