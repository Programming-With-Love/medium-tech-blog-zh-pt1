# 关于发展世博会的思考

> 原文：<https://medium.com/walmartglobaltech/on-developing-expo-6aa3330ad652?source=collection_archive---------5----------------------->

## 建造我们的河马狩猎工具

![](img/69f0001b4ad951c60f5c66f906561436.png)

Photo Credit: [3dman_eu](https://pixabay.com/en/boss-suit-tie-business-manager-2017655/)

你知道世界上最危险的动物之一是河马吗？在工业界，尤其是在产品决策方面，河马的意见也是危险的。构建我们的 A/B 测试平台 Expo 的目标之一是寻找河马，实现数据驱动的产品决策。在[沃尔玛实验室的 A/B 测试之旅](/walmartlabs/the-journey-of-a-b-testing-at-walmartlabs-3b9bba8e558f)中，我们讨论了沃尔玛和我们平台的 A/B 测试流程。在这个系列中，我们将更深入地探讨我们构建了什么、为什么构建、如何构建以及如何使用它。无论您是拥有内部平台，还是依靠第三方来满足您的 A/B 测试需求，我们都希望您能够了解我们的平台是如何工作的，并激励您在自己的地方开始或增强自己的 A/B 测试计划。

# 动机

理解了实验的价值，我们开始使运行测试和分析结果变得更简单。我们最初组建了一个小团队来扩充我们已经拥有的第三方工具。当我们探索它如何工作时，我们认识到了一些缺点，探索了其他第三方工具，并决定投资建立我们自己的 A/B 测试平台，我们称之为 Expo。构建我们自己的平台的一个主要优势是与其他内部工具以及构建我们正在试验的应用程序的平台紧密集成。这些工具和平台中的许多是在 Expo 的同时开发的，因此我们能够利用和指导一些集成，以便更好地与我们新生的平台一起工作。我们将 Expo 与这些工具中的两个紧密集成:(1)我们的配置管理系统，它提供特性标志；(2)我们的内容管理系统，用于定义我们大多数网站和应用程序的内容。

通过构建我们自己的平台，我们还能够针对沃尔玛实验室的具体使用案例进行定制。这使得我们能够专注于与我们的测试程序的需求直接相关的特性，包括基于匿名或登录用户的分配、实验版本控制以及更加定制化的报告。这也使得集成到我们用于工作流的工具，如吉拉和 Slack，并提供其他人可以集成的 API，以提供围绕测试程序的使用和性能指标。

# 成长的烦恼

当在生产中部署我们的新 Expo 工具时，我们的优势是能够与旧工具并行运行，这给了我们一个很好的比较机制来验证它是否按预期工作。这降低了切换的风险。这也给了我们一些与使用实时流量进行比较的东西。在我们将所有流量切换到 Expo 的同时，沃尔玛实验室的实验项目也处于转折点。工程和业务团队一起做出了利用 A/B 测试的更大承诺。这样做的另一个影响是，我们的新平台受到了额外的审查，这很好，因为这意味着 Expo 将得到很好的测试。

当第一次升级时，我们确实遇到了一些健康的怀疑。我们需要获得对我们生成的数据的信任——不仅是在我们自己之间，更重要的是在我们的业务用户之间。我们构建了易于查看的实时图形监视器，以帮助向我们有时持怀疑态度的业务用户显示 A/B 测试数据是正确和一致的。我们与我们的产品分析团队合作完成了这项工作，并确保 data Expo 报告使用了他们用于向我们的业务用户报告的相同来源和算法。反过来，这有助于赢得他们对我们新平台的信任。

当我们第一次开始操作时，我们也发现了我们最初的分配算法的一些缺点。虽然它是随机的，但不是决定性的。这意味着不容易保证访问者在两次访问之间有一致的任务。更值得注意的是，因为我们依赖或多或少的永久 cookies 来维护分配状态，所以引擎不能正确地“减速”——被分配到一个变体中的用户在实验的整个生命周期中维护该变体，即使实验流量被重新配置为减速。随着时间的推移，这最终会使分配给实验的实际流量与配置的流量发生偏差。

我们能够在不影响下游集成和依赖性的情况下重新实现分配算法。我们将在以后的文章中更详细地讨论分配算法。

# 加速前进

从零开始构建 A/B 测试平台对我们天真的想法来说似乎是一件简单的事情。在某些方面的确如此，但是我们在这个过程中发现了很多，并且还在学习更多。当然，最终，如果没有人想运行 A/B 测试，那么构建 A/B 测试平台就没有任何意义。对测试计划的日益关注有助于加速 Expo 的开发和采用。作为我们的主要消费者，产品组帮助推动世博会平台开发路线图，并确定我们应该在平台中构建哪些功能来最好地支持他们的需求。在那段时间里，在几年的时间里，我们从一年 70 个实验增加到将近 400 个，并且还在增加。Expo 现在支持浏览器网站和本机应用程序以及交易电子邮件的 A/B 测试，我们将继续支持更多沃尔玛企业和渠道。在此过程中，我们帮助推广实验文化，以帮助我们的企业用户做出更明智的产品决策，并提供有关客户行为的数据和见解，帮助指导未来的产品研究。

我们将在本系列的后续文章中更详细地讨论这些特性，以及提供有趣知识的具体实验用例和结果。我们希望接下来的文章能让你对我们的平台和项目有更深入的了解，并帮助你踏上 A/B 测试之旅。我们去猎河马吧。