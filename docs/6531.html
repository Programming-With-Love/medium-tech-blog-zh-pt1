<html>
<head>
<title>End to End Test Automation — SQL Server, Event Store, MongoDB, ElasticSearch, React</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">端到端测试自动化— SQL Server、事件存储、MongoDB、ElasticSearch、React</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/end-to-end-test-automation-d6608d26154d?source=collection_archive---------0-----------------------#2018-11-03">https://medium.com/quick-code/end-to-end-test-automation-d6608d26154d?source=collection_archive---------0-----------------------#2018-11-03</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/d7c22e122fa186a4be926a39afcb2c42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kJAN8miQq-sum1dauMjsnA.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Clicked in my society in Pune, Maharashtra, India</figcaption></figure><p id="4706" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">一个想法是用下面的组件为产品建立端到端的测试自动化。</p><p id="663e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">组件</strong>--</p><p id="5537" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">1.CRM——研究人员输入数据。</p><p id="94f4" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">2.Microsoft SQL Server — 2个数据库</p><p id="16ea" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a.CRMDB</p><p id="a084" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b.用户标识数据库</p><p id="bc22" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">3.Scooper —从CRMDB获取数据并放入事件存储的组件</p><p id="7616" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">4.订阅者——监听事件存储的组件，它从事件存储中获取数据并将其推送到MongoDB和弹性搜索中</p><p id="cee6" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">5.中间层——从MongoDB和弹性搜索中提取数据并以Rest apis的形式发送到前端的服务。</p><p id="2bb0" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">6.前端——研究人员输入的要显示的数据。</p><figure class="js jt ju jv fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jr"><img src="../Images/6778b17bb3c4fee24c02d3ef8342bc75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q2hMW20pYZ-TeyZt2mv1Bg.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx"><strong class="bd jw">Architecture</strong></figcaption></figure><p id="c139" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">建筑</strong>—</p><p id="8036" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">1.研究人员将数据输入客户关系管理系统。</p><p id="1068" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">2.因此，数据存储在Microsoft SQL Server数据库— CRMDB中</p><p id="3d1b" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">3.在步骤2中提到的CRMDB中创建专用表，其中在CRMDB的原始模式中输入的数据以事件源的格式存储。</p><p id="161a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">4.Scooper / Batch Scooper在步骤3中从CRMDB的专用表中提取数据，并将其推送到事件存储。</p><p id="c765" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">5.订阅者从事件存储中获取数据，并将其推送到MongoDB和Elastic Search。</p><p id="81f7" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">6.另一方面，有一个面向服务的架构，其中每个服务从弹性搜索中获取数据，并以Rest apis的形式将数据提供给前端。</p><p id="22e3" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">7.前端是一个单页面应用程序，它使用Rest apis发送的数据并呈现页面。</p><p id="7d06" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">8.有一个专用的身份服务器，它管理用户作为订阅的一部分可以访问的所有应用程序的用户身份。保存与用户身份相关的详细信息的数据库存在于步骤2中提到的Microsoft SQL Server数据库中。</p><p id="da28" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">技术栈</strong>—</p><p id="1c17" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">1.独家新闻/订户/服务-。网络核心</p><p id="b690" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">2.活动商店—<a class="ae jx" href="https://eventstore.org/" rel="noopener ugc nofollow" target="_blank">https://eventstore.org/</a></p><p id="6bd2" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">3.MongoDB—<a class="ae jx" href="https://www.mongodb.com/" rel="noopener ugc nofollow" target="_blank">https://www.mongodb.com/</a></p><p id="fe17" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">4.弹性搜索—<a class="ae jx" href="https://www.elastic.co/" rel="noopener ugc nofollow" target="_blank">https://www.elastic.co/</a></p><p id="f091" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">5.https://reactjs.org/</p><p id="e0f2" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">6.亚马逊EC2—<a class="ae jx" href="https://aws.amazon.com/ec2/" rel="noopener ugc nofollow" target="_blank">https://aws.amazon.com/ec2/</a></p><p id="71c3" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">7.团队城市—<a class="ae jx" href="https://www.jetbrains.com/teamcity/" rel="noopener ugc nofollow" target="_blank">https://www.jetbrains.com/teamcity/</a></p><p id="c054" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">功能测试挑战</strong>—</p><p id="e719" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">1.验证数据完整性，即在CRM中输入的数据正确地保存在弹性搜索和MongoDB中。</p><p id="baba" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">2.验证弹性搜索&amp; MongoDB中的数据是否正确显示在前端。</p><p id="ec37" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">端到端测试自动化</strong>—</p><p id="8d7d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">先决条件</strong>—</p><p id="08ec" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">从CRMDB中的表导出行，其中数据以事件源格式存储在Sql文件中。</p><p id="fee0" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">自动化工作流程</strong>--</p><p id="db4d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">1.从CRMDB中的表中删除现有行，其中数据以事件源格式存储。</p><p id="ac8c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">2.从事件存储中删除事件。</p><p id="3cfa" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">3.清除MongoDB和弹性搜索。</p><p id="163c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">4.将最新的模式应用于CRMDB和更新的存储过程。</p><p id="de40" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">5.将先决条件中的Sql文件(步骤1)插入CRMDB的表中，其中数据以事件源格式存储。</p><p id="208a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">6.当事件开始流经事件存储库时，验证是否没有任何事件进入事件存储库的暂停队列。</p><p id="6dc7" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">7.验证事件存储中是否没有正在进行的事件。</p><p id="2ef0" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">8.等到CRMDB中表的所有行(其中数据以事件源格式存储)和事件存储中的事件都为0时。</p><p id="0357" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">9.触发测试用例的执行。</p><p id="3150" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">测试</strong>–</p><p id="1832" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="jy">数据完整性测试</em> </strong> —这些测试验证CRMDB中以事件源格式存储数据的表中的数据是否已通过中间组件Scooper、事件存储和订户，并已到达MongoDB和Elastic Search。</p><p id="63aa" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="jy"> Api测试</em> </strong> —这些测试验证Api端点是否以前端预期的格式发送数据。</p><p id="8e36" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="jy"> UI测试</em> </strong> —这些测试是验证业务用例的功能测试。</p><p id="cd1a" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">自动化技术栈</strong></p><p id="2e1e" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="jy"> Api自动化</em></strong>--</p><p id="1c98" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a.<a class="ae jx" href="https://mochajs.org/" rel="noopener ugc nofollow" target="_blank">https://mochajs.org/</a></p><p id="595d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b.<a class="ae jx" href="https://www.npmjs.com/package/supertest" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/supertest</a></p><p id="14d5" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="jy"> UI自动化</em></strong>—</p><p id="d5a3" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">a.<a class="ae jx" href="https://jasmine.github.io/index.html" rel="noopener ugc nofollow" target="_blank">https://jasmine.github.io/index.html</a></p><p id="1ee6" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">b.<a class="ae jx" href="https://www.protractortest.org/#/" rel="noopener ugc nofollow" target="_blank">https://www.protractortest.org/#/</a></p></div></div>    
</body>
</html>