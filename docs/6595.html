<html>
<head>
<title>Reduce Redux Boilerplate with Sitka</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用Sitka减少Redux样板文件</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/reduce-redux-boilerplate-with-sitka-a8c4bc6fe8f9?source=collection_archive---------0-----------------------#2019-02-25">https://medium.com/quick-code/reduce-redux-boilerplate-with-sitka-a8c4bc6fe8f9?source=collection_archive---------0-----------------------#2019-02-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="97f0" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">介绍React/Redux/Redux Saga的新框架</h2></div><p id="78f2" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">作者阿伦·拉乔和弗兰克·梅萨——最初发布于2019年2月15日</p><figure class="jt ju jv jw fd jx er es paragraph-image"><div role="button" tabindex="0" class="jy jz di ka bf kb"><div class="er es js"><img src="../Images/39fc90e694c335d43509238ed13e946e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1zN06V_dU9LUgWF0qMoAlA.jpeg"/></div></div><figcaption class="ke kf et er es kg kh bd b be z dx">Evergreen trees in an open field. Photo: Diverse Graphics via <a class="ki kj ge" href="https://medium.com/u/5c7773c5a002?source=post_page-----a8c4bc6fe8f9--------------------------------" rel="noopener" target="_blank">Pexels</a></figcaption></figure><p id="5b4d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Sitka是一个小而强大的国家管理框架。它将应用程序组织成模块，每个模块管理一个逻辑状态区域。它建立在Redux和Redux Saga之上，为您提供这些工具的所有好处，而没有样板文件。</p><p id="654f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们检查一个简单的计数器应用程序，对比传统的<a class="ae kk" href="https://redux.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux </a> / <a class="ae kk" href="https://redux-saga.js.org/" rel="noopener ugc nofollow" target="_blank"> Redux Saga </a>实现和Sitka实现之间的差异。</p><h1 id="f9c9" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">简单的计数器应用程序</h1><p id="bb59" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">为了便于说明，我们将使用一个使用<a class="ae kk" href="https://www.typescriptlang.org/" rel="noopener ugc nofollow" target="_blank"> TypeScript </a>构建的简单计数器应用程序，其状态存在于Redux存储中，并使用Redux Saga来协调其逻辑。</p><p id="7e36" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在简单的应用程序中，通过调用Redux reducer直接使用的动作来改变状态可能就足够了。然而，在较大的应用程序中，Sagas提供了一个有用的机制来触发围绕单个逻辑动作的复合操作，例如“增量计数器”。例如，在最终调用缩减器来更改状态之前，increment操作可能需要权限检查、日志记录，甚至是对辅助数据存储的异步访问。</p><p id="6cf4" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里讨论的计数器应用程序是一个更大的应用程序的简化模型，类似于我们在Olio Apps创建的其他应用程序。</p><h1 id="eb4e" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">传统的方式</h1><p id="55c4" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">使用TypeScript、Redux和Redux Saga构建计数器应用程序需要:</p><ol class=""><li id="2ad1" class="li lj hh iy b iz ja jc jd jf lk jj ll jn lm jr ln lo lp lq bi translated">Redux中的计数器状态</li><li id="8109" class="li lj hh iy b iz lr jc ls jf lt jj lu jn lv jr ln lo lp lq bi translated">增量动作创建者的界面</li><li id="76d4" class="li lj hh iy b iz lr jc ls jf lt jj lu jn lv jr ln lo lp lq bi translated">使用界面的动作创建者</li><li id="4bd7" class="li lj hh iy b iz lr jc ls jf lt jj lu jn lv jr ln lo lp lq bi translated">Sagas索引中此动作的监听器，路由到一个Saga</li><li id="5a73" class="li lj hh iy b iz lr jc ls jf lt jj lu jn lv jr ln lo lp lq bi translated">从Redux获取当前计数器状态的选择器</li><li id="781c" class="li lj hh iy b iz lr jc ls jf lt jj lu jn lv jr ln lo lp lq bi translated">一个Saga，它处理动作的有效负载以及任何其他应用程序副作用，并使用第二个Redux动作创建器通过Redux状态设置一个新值</li><li id="c122" class="li lj hh iy b iz lr jc ls jf lt jj lu jn lv jr ln lo lp lq bi translated">这个面向reducer的动作创建器的接口</li><li id="61d8" class="li lj hh iy b iz lr jc ls jf lt jj lu jn lv jr ln lo lp lq bi translated">面向减速器的动作创建者的动作</li><li id="5fa4" class="li lj hh iy b iz lr jc ls jf lt jj lu jn lv jr ln lo lp lq bi translated">倾听价值设定行动创建者的缩减器</li><li id="13cb" class="li lj hh iy b iz lr jc ls jf lt jj lu jn lv jr ln lo lp lq bi translated">渐缩管与根部渐缩管的配准</li></ol><p id="5977" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">下面是这些组件的完全实现的实现:</p><figure class="jt ju jv jw fd jx"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="2dd2" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">TypeScript、Redux和Redux-Saga一起使用很棒。您将获得强类型代码库、Redux状态管理以及同步和异步操作的简单控制流的所有优势。</p><p id="b1cd" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">但是正如您从上面看到的，这个堆栈的一个明显的缺点是典型的用法需要大量的样板文件！这就是Sitka派上用场的地方。</p><h1 id="fb1f" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">使用Sitka实现应用程序</h1><p id="af8e" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">Sitka大幅减少了样板文件的数量。完成上述相同计数器应用程序所需的所有代码都可以使用Sitka编写，如下所示:</p><figure class="jt ju jv jw fd jx"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="4546" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">完整的反申请可在Github 上找到<a class="ae kk" href="https://github.com/frankmeza/sitka-counter-ts" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="bc43" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">类内设置了<code class="du ly lz ma mb b">moduleName</code>和<code class="du ly lz ma mb b">defaultState</code>，并定义了单个生成器函数<code class="du ly lz ma mb b">*handleCounter</code>，它只是将计数器加1。</p><p id="bb2d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><code class="du ly lz ma mb b">public</code>和<code class="du ly lz ma mb b">private</code>关键字用于显示哪些类方法可以从类本身之外调用。有关TypeScript这个特性的更多信息，请参见他们关于<a class="ae kk" href="https://www.typescriptlang.org/docs/handbook/classes.html" rel="noopener ugc nofollow" target="_blank">类</a>的手册。在这种情况下，<code class="du ly lz ma mb b">getCounter</code>被标记为<code class="du ly lz ma mb b">private</code>，因此只有<code class="du ly lz ma mb b">CounterModule</code>可以进入它自己的状态。</p><p id="b17d" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这比第一个例子要少得多。这使得它更容易维护，也更容易推理。总的来说，这给你留下了一个更干净的代码库。</p><p id="4515" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在你的表现部分，你可以这样称呼<code class="du ly lz ma mb b">*handleIncrement</code>:</p><figure class="jt ju jv jw fd jx"><div class="bz dy l di"><div class="lw lx l"/></div></figure><p id="f851" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">您的模块中定义的<code class="du ly lz ma mb b">handleIncrement</code>生成器封装在一个在引擎盖下创建的Action中，因为它的名称以<code class="du ly lz ma mb b">handle</code>开头。</p><h1 id="9780" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">引擎盖下发生了什么</h1><p id="e901" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">Sitka通过自动生成代码使您不必编写样板文件。它生成:</p><ul class=""><li id="648c" class="li lj hh iy b iz ja jc jd jf lk jj ll jn lm jr mc lo lp lq bi translated">包装每个生成器函数的动作</li><li id="d20f" class="li lj hh iy b iz lr jc ls jf lt jj lu jn lv jr mc lo lp lq bi translated">支持setState方法的缩减器</li><li id="fb21" class="li lj hh iy b iz lr jc ls jf lt jj lu jn lv jr mc lo lp lq bi translated">redux状态树的一部分，由sitka类属性<code class="du ly lz ma mb b">moduleName</code> -在本例中为<code class="du ly lz ma mb b">counter</code>-定义。</li></ul><h1 id="353b" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">你什么时候应该使用Sitka</h1><p id="e1c2" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">如果您打算使用typescript和redux构建一个更大的应用程序，我们建议您使用Sitka。Sitka保持您的代码的强类型化和组织化，同时减少重复和类型化脚本的样板负担。更少的打字=更快的开发时间。</p><h1 id="93f8" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">升级现有应用程序</h1><p id="0970" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">虽然您可以使用Sitka从头开始构建您的应用程序，但它也被设计为增量添加到现有的Redux应用程序中。查看将Sitka添加到项目的<a class="ae kk" href="https://github.com/olioapps/sitka/wiki/Adding-Sitka-to-a-Redux-store" rel="noopener ugc nofollow" target="_blank">示例，以及使用React-Redux的<code class="du ly lz ma mb b">connect</code>函数将您的组件连接到Sitka支持的Redux <code class="du ly lz ma mb b">store</code>的</a><a class="ae kk" href="https://github.com/olioapps/sitka/wiki/React-web-usage" rel="noopener ugc nofollow" target="_blank">示例。</a></p><h1 id="9159" class="kl km hh bd kn ko kp kq kr ks kt ku kv in kw io kx iq ky ir kz it la iu lb lc bi translated">Olio Apps正在使用Sitka</h1><p id="fa30" class="pw-post-body-paragraph iw ix hh iy b iz ld ii jb jc le il je jf lf jh ji jj lg jl jm jn lh jp jq jr ha bi translated">我们在实际项目中使用Sitka，和它一起工作很愉快。我们可以利用强类型代码库的所有优势，同时也享受在使用Sitka之前编写一小部分所需代码的乐趣。我们Olio Apps希望你在下一个项目中试用Sitka来管理状态，甚至在现有项目中实现一个新功能。</p></div><div class="ab cl md me go mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ha hb hc hd he"><p id="51cc" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Olio Apps为网络、手机和其他平台开发软件。要阅读更多类似的文章，请订阅我们的时事通讯。</p></div><div class="ab cl md me go mf" role="separator"><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi mj"/><span class="mg bw bk mh mi"/></div><div class="ha hb hc hd he"><p id="4fe3" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="mk">原载于</em><a class="ae kk" href="https://www.olioapps.com/blog/sitka-module-manager/" rel="noopener ugc nofollow" target="_blank"><em class="mk">www.olioapps.com</em></a><em class="mk">。</em></p></div></div>    
</body>
</html>