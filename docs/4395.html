<html>
<head>
<title>Building a Flask App using Docker and Deploy to Google Cloud Run.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Docker构建Flask应用程序并部署到Google Cloud Run。</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/building-a-flask-app-using-docker-and-deploy-to-google-cloud-run-8f311ad36040?source=collection_archive---------0-----------------------#2021-12-06">https://medium.com/google-developer-experts/building-a-flask-app-using-docker-and-deploy-to-google-cloud-run-8f311ad36040?source=collection_archive---------0-----------------------#2021-12-06</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/8d666fcb71e0d8e9695c54da89ee8b7d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nbRy1NraNwxFPk-_CCx8ZA.jpeg"/></div></div></figure><p id="a76c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">了解如何将应用程序打包成容器是一个最佳实践，也是了解如何将它们部署到云的一个很好的知识。</p><p id="9de9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">在本教程中，我将讨论如何构建一个</em> <a class="ae jo" href="https://flask.palletsprojects.com/" rel="noopener ugc nofollow" target="_blank"> <em class="jn"> Flask </em> </a> <em class="jn">应用程序，并使用</em><a class="ae jo" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"><em class="jn">Docker</em></a><em class="jn">将其部署到云运行。</em></p><h1 id="bed4" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">概观</h1><ol class=""><li id="f93b" class="kn ko hh ir b is kp iw kq ja kr je ks ji kt jm ku kv kw kx bi translated">Docker —基础和安装</li><li id="cb59" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">Flask —先决条件和创建Hello World应用程序</li><li id="5aae" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">构建Docker容器并推送到容器注册中心</li><li id="f337" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">部署到Google云运行</li><li id="1c24" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ku kv kw kx bi translated">结论</li></ol><h1 id="1375" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">Docker —基础和安装</h1><p id="9d9d" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated"><a class="ae jo" href="https://www.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker </a>是一个开源的应用容器化平台，支持开发者将应用打包到容器中。容器是一个标准的软件单元，它将软件代码及其所有依赖项打包在一起。容器成为分发和测试应用程序的单元。</p><p id="f6a7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">容器也是图像的可运行实例。您可以使用Docker创建、启动、停止、移动或删除容器。你可以按照下面的步骤来设置Docker。</p><h1 id="0b22" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">安装Docker</h1><p id="c369" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">Docker可在多种Linux平台、Mac OS和Windows操作系统上使用。</p><p id="79a0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">关于安装Docker的详细说明，你可以阅读官方文档。</p><p id="de2f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你是Mac OS用户，你可以简单地使用HomebrewCask，一个用于在Mac上安装GUI软件的Homebrew扩展。只需运行以下命令。</p><p id="b339" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">brew cask install docker</code></p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lk"><img src="../Images/721735f184d41ccc12b484e04dc0dd90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QQJ_59Tn6OIW7G1G.png"/></div></div></figure><h1 id="cf3a" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">Flask —先决条件和创建Hello World应用程序</h1><p id="32a3" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">Flask 是一个用Python开发的web微框架，它易于学习和使用，不需要特殊的工具或库。Flask框架是轻量级的、灵活的，但却是高度结构化的，这使得它比其他框架更受青睐。</p><p id="e0c1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要开始使用Flask，您需要安装以下要求。点击每个项目，访问其官方安装页面。</p><ul class=""><li id="f4fe" class="kn ko hh ir b is it iw ix ja lp je lq ji lr jm ls kv kw kx bi translated"><a class="ae jo" href="https://www.python.org/downloads/" rel="noopener ugc nofollow" target="_blank"> Python </a></li><li id="0461" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ls kv kw kx bi translated">Python的包安装程序— <a class="ae jo" href="https://pip.pypa.io/en/stable/installation/" rel="noopener ugc nofollow" target="_blank"> Pip </a></li></ul><p id="da7a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一旦安装了Python和Pip我们可以使用下面的命令继续安装Flask。</p><p id="2f2d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">pip install flask</code></p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lt"><img src="../Images/969d0c847e2e095ccdaa3527912303d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BPcn836Guy0INdu5.png"/></div></div></figure><p id="e5ce" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们已经安装了Flask，让我们继续编写应用程序。</p><h1 id="eb53" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">创建Hello World应用程序</h1><p id="a7e6" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">下面的代码片段是我们的Hello World应用程序。</p><pre class="ll lm ln lo fd lu lj lv lw aw lx bi"><span id="97de" class="ly jq hh lj b fi lz ma l mb mc"># Filename: app.py</span><span id="6f5e" class="ly jq hh lj b fi md ma l mb mc">from flask import Flask # import Flask in Python</span><span id="3fd7" class="ly jq hh lj b fi md ma l mb mc">app = Flask(__name__) # creates an instance of a Flask app</span><span id="19a9" class="ly jq hh lj b fi md ma l mb mc">@app.route('/') # route called by user</span><span id="7d14" class="ly jq hh lj b fi md ma l mb mc">def index(): # function called by '/' route</span><span id="5639" class="ly jq hh lj b fi md ma l mb mc">    return 'Hello World! This App is built using Flask.'</span><span id="8bd9" class="ly jq hh lj b fi md ma l mb mc">app.run(host='0.0.0.0', port=8000) # starts the web app at port 8000</span></pre><p id="f93f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">每一行都包含Python注释，以散列字符(#)开头，解释它的作用。将文件保存为<em class="jn"> app.py </em>并运行以下命令。</p><p id="bc45" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">python app.py</code></p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es me"><img src="../Images/f71a1b3c88b7cb3b6b26b80316d6cf22.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ovt0kwMouWgJ1ZSM.png"/></div></div></figure><p id="895d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们有一个单一的路由，它返回一条显示在浏览器上的消息，如下所示。</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mf"><img src="../Images/96b49d026476500585b5077988463fc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1300/format:webp/0*SBAA4k5EFYdAT6Jk.png"/></div></div></figure><p id="ca79" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们有了一个可以工作的应用程序，让我们继续构建我们的Docker映像。</p><h1 id="30af" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">构建Docker容器并推送到容器注册中心</h1><p id="a196" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">在本节中，我们将把我们的应用程序及其依赖项打包成一个Docker映像，然后将该映像推送到Docker Hub——一个容器注册表。</p><p id="a7a1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><a class="ae jo" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank"> Docker Hub </a>是Docker提供的一项服务，用于寻找和分享容器。如果您没有Docker ID ，您需要<a class="ae jo" href="https://hub.docker.com/signup" rel="noopener ugc nofollow" target="_blank">创建一个Docker ID</a>。</p><p id="0d9e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可能已经注意到了一条警告，该警告将内置的Flask服务器描述为对生产不安全。为了解决这个问题，我们将使用guni corn——用于UNIX的Python WSGI HTTP服务器。</p><p id="a5f5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">创建一个<em class="jn"> requirements.txt </em>文件来存放我们的应用程序需要的依赖项。</p><pre class="ll lm ln lo fd lu lj lv lw aw lx bi"><span id="387a" class="ly jq hh lj b fi lz ma l mb mc"># requirements.txt</span><span id="5fa0" class="ly jq hh lj b fi md ma l mb mc">flask</span><span id="d176" class="ly jq hh lj b fi md ma l mb mc">gunicorn</span></pre><p id="84ba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，让我们设置我们的<em class="jn"> Dockerfile，</em>一个包含Docker构建映像所需的所有命令的文件。</p><pre class="ll lm ln lo fd lu lj lv lw aw lx bi"><span id="d63d" class="ly jq hh lj b fi lz ma l mb mc"># Dockerfile</span><span id="7fe8" class="ly jq hh lj b fi md ma l mb mc">FROM python:alpine3.7</span><span id="9c04" class="ly jq hh lj b fi md ma l mb mc">COPY requirements.txt /</span><span id="7d25" class="ly jq hh lj b fi md ma l mb mc">RUN pip3 install -r /requirements.txt</span><span id="65a8" class="ly jq hh lj b fi md ma l mb mc">COPY app.py .</span><span id="d9e6" class="ly jq hh lj b fi md ma l mb mc">CMD ["gunicorn"  , "-b", "0.0.0.0:8888", "app:app"]</span></pre><p id="c817" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们将引入<a class="ae jo" href="https://hub.docker.com/_/python" rel="noopener ugc nofollow" target="_blank"> Python Alpine </a>作为我们的基础映像，然后继续复制&amp;安装我们的依赖项并设置我们的应用程序</p><p id="9271" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后一行告诉Docker运行<em class="jn"> gunicorn </em>，第一个“app”参数作为模块，第二个“app”参数作为代码中定义的WSGI callable的名称。</p><p id="fbde" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">与你的<em class="jn"> app.py </em>、<em class="jn"> requirements.txt和Dockerfile放在同一个目录下。您应该运行以下命令来构建Docker映像。</em></p><p id="3a34" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">docker build -t flask_app .</code></p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mg"><img src="../Images/e4cee66e160b4acdd1297c8a4cf89c2b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tAZXPGu212WQ_qrF.png"/></div></div></figure><p id="731b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">既然我们已经建立了自己的形象。我们也可以使用以下命令运行它:</p><p id="ee7b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">docker run -it -p 8000:8888 flask_app</code></p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mg"><img src="../Images/899ce211e5f3d96568225fb74fa6cbbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BTdtMdPbVD6xU6kh.png"/></div></div></figure><p id="ceca" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">瞧啊。它跑了！您可以访问端口<em class="jn"> 8000 </em>上的应用程序，如下图所示:</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div class="er es mh"><img src="../Images/82e8445edaf5d17ccba08351267b7d3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1144/format:webp/0*6COcFfcFm9CWPPoi.png"/></div></figure><h1 id="7d0b" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">推送到容器注册中心</h1><p id="4d0e" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">现在让我们将我们的图像推送到Docker Hub。为此，您可以使用您的凭据登录到<a class="ae jo" href="https://hub.docker.com" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com</a>，然后点击<strong class="ir hi">创建存储库。</strong></p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mi"><img src="../Images/b9d4a60c2de4faa248aabc49363b3356.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*mFTQP0RNMDZQ1gxN.png"/></div></div></figure><p id="90bc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您需要使用以下命令从终端登录Docker CLI</p><p id="e9b4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">docker login</code></p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mj"><img src="../Images/7b49db8d59a9ac9d4e0dbbd044ad76cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MzxNGWDfMW3BYuyV.png"/></div></div></figure><p id="d438" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">完成后，您应该能够使用以下命令将图像推送到Docker Hub</p><p id="15a2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">docker tag flask_app timtech4u/flask_app</code></p><p id="7c37" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">docker push timtech4u/flask_app</code></p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mj"><img src="../Images/0c748e8eb8ba5cb9a4ae570c5b8c38a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*aZE5vZ-5OwzXyYL2.png"/></div></div></figure><p id="961f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您应该用自己的Docker Hub ID替换<em class="jn"> timtech4u </em>。您还可以验证映像是否在Docker Hub注册表中。</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mk"><img src="../Images/ab15778377ae4f4c0c046c704d6f33d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*M9RPccSfYznMxZX-.png"/></div></div></figure><p id="69a6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们已经完成了大部分困难的部分，现在您可以将捆绑的Docker映像部署到您选择的任何云提供商上。</p><p id="6519" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在下一节中，您将看到如何在Google云平台上轻松部署映像。</p><h1 id="7459" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">部署到Google云运行</h1><p id="dd88" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">在本指南中，我们将把我们的映像部署到<a class="ae jo" href="https://cloud.google.com/run" rel="noopener ugc nofollow" target="_blank"> Google Cloud Run </a>，这是一个在Google Cloud Platform (GCP)上运行容器的无服务器环境。</p><p id="1601" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要开始使用谷歌云，你可以在这里注册:<a class="ae jo" href="https://cloud.google.com/free" rel="noopener ugc nofollow" target="_blank">https://cloud.google.com/free</a>获得300美元的免费积分。完成后，请访问此处的云运行页面:<a class="ae jo" href="https://console.cloud.google.com/run" rel="noopener ugc nofollow" target="_blank">https://console.cloud.google.com/run</a></p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ml"><img src="../Images/7612a3c37d822b4f20773cefd8b4f864.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*KbWNSdJ8kziqAydO.png"/></div></div></figure><p id="57cd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">需要将Docker映像推送到Google容器注册中心(GCR)，然后才能在Cloud Run上部署。您可以通过在Cloud Shell上运行一些命令来轻松做到这一点。</p><p id="0a60" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要激活Google Cloud Shell，请点击屏幕右上角蓝色导航栏上的<em class="jn">终端图标</em>。然后运行以下命令，第一个命令是启用GCR。</p><p id="2aec" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">gcloud services enable containerregistry.googleapis.com</code></p><p id="4a9f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">docker pull &lt;docker-id&gt;/&lt;image-name&gt;</code></p><p id="bd75" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">docker tag &lt;docker-id&gt;/&lt;image-name&gt; gcr.io/&lt;project-id&gt;/&lt;image-name&gt;</code></p><p id="d29c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du lg lh li lj b">docker push gcr.io/&lt;project-id&gt;/&lt;image-name&gt;</code></p><p id="0bbd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">需要对以下内容进行编辑，以符合您的使用情形:</p><ul class=""><li id="904a" class="kn ko hh ir b is it iw ix ja lp je lq ji lr jm ls kv kw kx bi translated"><docker-id> — Docker Hub ID或用户名</docker-id></li><li id="2bd2" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ls kv kw kx bi translated"><image-name> —图像名称</image-name></li><li id="f537" class="kn ko hh ir b is ky iw kz ja la je lb ji lc jm ls kv kw kx bi translated"><project-id> — GCP项目ID</project-id></li></ul><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ml"><img src="../Images/489cff9b55c6a01b87eca4ed763e7846.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*6Bru9SmXbCVp8jQu.png"/></div></div></figure><p id="5341" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，您可以在云运行页面上点击<strong class="ir hi">创建服务</strong>。选择您刚刚推送的图像。</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ml"><img src="../Images/4b97687a4b62403c168a0dfe4e9e254e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*BqfAuD6p6bLp_3Ks.png"/></div></div></figure><p id="65af" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">点击<strong class="ir hi">高级设置</strong>开关，按照之前的定义配置容器的端口号</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mm"><img src="../Images/e49718af1a2d3b5fdd682809d51bf41c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*PErc6YfqUuRcO0P0.png"/></div></div></figure><p id="97e3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">点击下一步的<strong class="ir hi">并选择<strong class="ir hi">允许未认证调用</strong>以公开部署。</strong></p><p id="98f0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">几分钟后，您的服务将被部署并生成一个URL。</p><p id="54c0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以单击云运行页面上的服务来访问其属性和生成的URL。</p><figure class="ll lm ln lo fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ml"><img src="../Images/63badc885f7c5d55bf9b90bee415c4bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*tDYc7LebN0X6aBTF.png"/></div></div></figure><h1 id="3d3d" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">结论</h1><p id="2a61" class="pw-post-body-paragraph ip iq hh ir b is kp iu iv iw kq iy iz ja ld jc jd je le jg jh ji lf jk jl jm ha bi translated">在本文中，我介绍了使用Docker封装Flask应用程序的基础知识。我已经向您展示了如何将Docker图像上传到Docker Hub、Google Container Registry并部署到Google Cloud Run。</p></div></div>    
</body>
</html>