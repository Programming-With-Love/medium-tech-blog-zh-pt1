<html>
<head>
<title>Making your testing more resilient</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">让您的测试更有弹性</h1>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/making-your-testing-more-resilient-57be6fb11f91?source=collection_archive---------6-----------------------#2020-05-28">https://medium.com/walmartglobaltech/making-your-testing-more-resilient-57be6fb11f91?source=collection_archive---------6-----------------------#2020-05-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="3af2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi jc translated">自动化测试对于我们作为一个软件组织如何快速自信地运作至关重要。在这个敏捷开发和持续部署的时代，拥有接近100%的端到端功能测试可以决定软件产品的成败。</p><figure class="jm jn jo jp fd jq er es paragraph-image"><div role="button" tabindex="0" class="jr js di jt bf ju"><div class="er es jl"><img src="../Images/1911d4da12863e20484cec7fbbe0f541.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*f80P3kkHpIzKcYuo.jpeg"/></div></div><figcaption class="jx jy et er es jz ka bd b be z dx">Credit: <a class="ae kb" href="https://pixabay.com/photos/horse-racing-gallop-jockey-horses-4018609/" rel="noopener ugc nofollow" target="_blank">pixabay.com</a></figcaption></figure><p id="fca0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">浏览器测试是一个相当新的领域，主要由基于Selenium的web驱动程序来驱动特定于浏览器的API。直到赛普拉斯最近才出现。关键的区别在于，Cypress测试直接在浏览器中运行，而不是在web驱动中运行，这使得它更快更可靠。在很短的时间内，它就在质量工程师和开发人员社区中流行起来。</p><p id="d931" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我职业生涯的大部分时间都是一名开发人员，从事全栈工作，习惯于单元测试。编写功能测试对我来说是新的，因为它主要是质量工程师的职责。但是自己编写一个功能性的端到端测试让我晚上睡得更好😴。当我知道我有一堆功能测试来<em class="kc">证明</em>我的工作时，我更有信心点击<em class="kc">合并</em>按钮。</p><p id="ad09" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用cypress编写功能测试既快速又简单。它的文档和直观的API使得新手升级没有麻烦。在我过去六个月的it之旅中，我遇到了许多顿悟的时刻，我愿意与工程师同事们分享。</p><p id="5efc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">1.<strong class="ig hi">在柏使用</strong> <a class="ae kb" href="https://github.com/Bkucera/cypress-plugin-retries" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi"> <em class="kc">柏-插件-重试</em> </strong> </a></p><p id="8a5e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用自动化软件运行功能测试不同于用户与它交互的方式。一个真正的用户<em class="kc">知道</em>屏幕上正在发生什么，并且能够适应它；与在浏览器上运行一组指令的脚本不同。应用程序UI的可变性可能是由于不同的API响应时间、网络速度、浏览器和服务器环境等造成的。重试失败的测试非常有助于抵消这种不可预测性😅</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="kd ke l"/></div></figure><p id="37ab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.<strong class="ig hi">服务器端使用<em class="kc">cy . request</em>T19】进行渲染内容验证</strong></p><p id="2f40" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">测试服务器端呈现的代码并不简单。当一个测试在浏览器中请求一个特定的URL时，脚本会立即执行并修改服务器呈现的代码。使用cy.request 我们可以通过发出HTTP请求来请求HTML文档。一旦返回HTML，我们就可以创建一个HTML文档，像我们期望的对象和查询元素。</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="kd ke l"/></div></figure><p id="fb81" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.<strong class="ig hi">运行测试时自动生成模拟</strong></p><p id="6e51" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为您的数据提供模拟对于使测试可预测和更快是至关重要的。我们看到，在添加模拟后，CI中的片状化和测试周期显著减少。然而，我讨厌添加模拟的部分是为无数用例手动添加模拟文件。使用这个简单的实用程序有助于生成mock(如果不存在的话),或者用以前生成的mock进行响应。🙌</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="kd ke l"/></div></figure><p id="ed79" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.使用实时服务/模拟服务有选择地运行测试。</p><p id="6c96" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用mock运行测试有其优势，但有时与live API同步并确保应用程序按预期运行同样重要。我们可以使用下面的包来正则表达式匹配测试名称，并运行没有模拟的测试。</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="kd ke l"/></div></figure><p id="debd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.<strong class="ig hi">柏树司令部的无名英雄——cy . wrap，。如(' @…') </strong></p><p id="66e1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kc"> cy.wrap </em>有时很方便，它帮助包装任何不是cypress命令直接结果的对象，并继续在其上执行命令。</p><p id="f362" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">。<em class="kc">as(…)</em>DOM元素的别名有点独特。当您为在使用别名调用时已经从DOM中删除的DOM元素命名时，Cypress会自动重新查询DOM以再次找到这些元素。</p><figure class="jm jn jo jp fd jq"><div class="bz dy l di"><div class="kd ke l"/></div></figure></div><div class="ab cl kf kg go kh" role="separator"><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk kl"/><span class="ki bw bk kj kk"/></div><div class="ha hb hc hd he"><blockquote class="km kn ko"><p id="ab5f" class="ie if kc ig b ih ii ij ik il im in io kp iq ir is kq iu iv iw kr iy iz ja jb ha bi translated">功能测试是伟大的，但是在某些情况下，比如服务人员，让它工作起来是很重要的。在这种情况下，我们总是可以依靠单元测试功能。服务工作者环境不同于浏览器或Node.js环境。服务-工人-模拟 npm包产生了模拟服务工人环境。通过添加正确的事件侦听器和适当的缓存检查，很容易进行测试。</p></blockquote><h1 id="a270" class="ks kt hh bd ku kv kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp bi translated">参考</h1><p id="0e61" class="pw-post-body-paragraph ie if hh ig b ih lq ij ik il lr in io ip ls ir is it lt iv iw ix lu iz ja jb ha bi translated"><a class="ae kb" href="https://github.com/Bkucera/cypress-plugin-retries" rel="noopener ugc nofollow" target="_blank">https://github.com/Bkucera/cypress-plugin-retries</a></p><p id="7fa8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae kb" href="https://github.com/zackargyle/service-workers/tree/master/packages/service-worker-mock" rel="noopener ugc nofollow" target="_blank">https://github . com/zackargyle/service-workers/tree/master/packages/service-worker-mock</a></p></div></div>    
</body>
</html>