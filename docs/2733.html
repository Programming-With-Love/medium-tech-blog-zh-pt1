<html>
<head>
<title>Nagios Tutorial - Know How To Perform Continuous Monitoring With Nagios</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Nagios教程——了解如何使用Nagios执行连续监控</h1>
<blockquote>原文：<a href="https://medium.com/edureka/nagios-tutorial-e63e2a744cc8?source=collection_archive---------2-----------------------#2017-11-22">https://medium.com/edureka/nagios-tutorial-e63e2a744cc8?source=collection_archive---------2-----------------------#2017-11-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/edf87c87fa9931d3a30b6e1f939265bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*ifa2k1_MsxFwy5xU8dnLCw.png"/></div><figcaption class="il im et er es in io bd b be z dx">Nagios Tutorial — Edureka</figcaption></figure><p id="bee9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我相信Nagios上的帖子很少，互联网上的相关信息也不多。所以，我认为这篇文章会让你对这个监控工具有一个清晰的认识。Nagios监控您的整个IT基础设施，以确保系统、应用程序、服务和业务流程正常运行。在这个Nagios教程中，我将涉及以下主题:</p><ol class=""><li id="4dc3" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">为什么我们需要持续监控？</li><li id="84a9" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">什么是持续监控？</li><li id="5038" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">什么是Nagios？</li><li id="e18f" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">如何安装Nagios？</li><li id="8369" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">如何使用NRPE添加远程服务器。</li></ol><p id="8662" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们从理解为什么我们需要持续监控开始这个Nagios教程，因为每件事的存在都是有原因的。所以，让我们试着找出原因。</p><h1 id="fb9b" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">为什么我们需要持续监控？</h1><p id="4d9a" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">持续监控工具解决任何系统错误(内存不足、无法访问服务器等。)以免它们对您的业务效率产生任何负面影响。</p><p id="5d09" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">使用监控工具的重要原因是:</p><ul class=""><li id="b208" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm le jt ju jv bi translated">它检测任何网络或服务器问题</li><li id="91e1" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">它决定了任何问题的根本原因</li><li id="bcad" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">它维护服务的安全性和可用性</li><li id="7559" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">它监控和排除服务器性能问题</li><li id="0c66" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">它使我们能够在过时的系统导致故障之前规划基础架构升级</li><li id="83ab" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">它可以在问题出现的第一时间做出反应</li><li id="52d5" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">它可用于在检测到问题时自动修复问题</li><li id="eadc" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">它确保It基础架构中断对您组织的底线影响最小</li><li id="7671" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">它可以监控您的整个基础架构和业务流程</li></ul><p id="e202" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">是的，它做了很多很酷的工作，但是它是什么呢？</p><h1 id="304e" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">什么是持续监控？</h1><p id="66b3" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">首先让我告诉你持续监控在<em class="lf"> DevOps生命周期</em>中的位置，请看下图:</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lg"><img src="../Images/f34a2108a8f064ad05fed2c0bdc7448c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0gS6OePLzRaTJOE8uOxDAw.png"/></div></div></figure><p id="0a21" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">看着图表，您一定会认为这是DevOps生命周期的最后一个阶段，但事实并非如此。DevOps的生命周期没有尽头，这就是无限符号的原因。一旦在生产服务器上部署了应用程序，就需要持续的监控。</p><p id="1485" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">持续监控是指组织检测、报告、响应、遏制和缓解其基础架构中发生的攻击的能力。</p><p id="6e9b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">连续监测实际上并不新鲜，它已经存在了一段时间。多年来，我们的安全专家一直在对系统日志、防火墙日志、IDS日志、IPS日志等进行静态分析。但是，它没有提供适当的分析和回应。今天的持续监控方法使我们能够汇总我在上面讨论的所有事件，关联它们，比较它们，然后估计组织的风险状况。</p><p id="261f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果我们把所有这些碎片放在一起，并确保它们之间的相互联系。这就是持续监控的症结所在。</p><p id="4dc6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我用一个用例来解释一下。考虑下图:</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lp"><img src="../Images/d9b9900261189ca9402eeb404130b142.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*85_GTj6Jxc8XAJrAnnyV2w.png"/></div></div></figure><p id="3764" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，让我给你解释一下上面的图表:</p><ol class=""><li id="98f0" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">我们有各种安全工具，如防火墙、IDS、端点保护等。它们与安全信息和事件管理系统相连。</li><li id="cfeb" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">为了实现持续的监控，我们需要让所有的部分都相互对话，让我来给你解释一下。</li><li id="9ed8" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">因此，我们有安全工具和一系列“端点”，这可以包括客户端和服务器、路由器、交换机、移动设备等。</li><li id="0adc" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">然后，这两个小组可以通过通用语言，以更加自动化的方式与安全信息和事件管理系统(SIEM)对话。</li><li id="a457" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">与此SIEM相关的有两个重要组件，第一个是数据仓库。现在，对于这个数据仓库，我们将连接“分析”和“安全智能”。</li><li id="aa97" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">安全情报(SI)是与保护组织免受外部和内部威胁相关的信息，以及旨在收集和分析这些信息的流程、策略和工具。</li><li id="9086" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">此SIEM还连接到一个“治理风险和合规性系统”,它主要提供仪表板。</li><li id="4c43" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">在这个“治理风险和合规系统”上，我们附加了一个风险数据库。这给了我们“可操作的情报”。</li><li id="76c2" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">可操作的情报只不过是可以采取行动的信息，并进一步暗示应该采取行动。</li></ol><p id="c755" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，我们正在持续监控事件，并确定我们正在经历的风险级别。有了这个，我们就能把SIEM的事件联系起来。我们可以在“分析引擎”上执行网络行为和异常检测。<strong class="ir hi">这就是持续监控的意义所在</strong>:</p><blockquote class="lq lr ls"><p id="f131" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated">组织安全工具的集成，安全工具产生的数据的聚合、规范化和关联。基于组织的风险目标和威胁知识的数据分析，以及对已识别风险的近乎实时的响应。</p></blockquote><p id="f7ee" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> <em class="lf">如果你不能衡量它，你就不能管理它</em></strong>’。我希望你知道我在说什么。</p><p id="c257" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在接下来的Nagios教程中，我将向您介绍一个最著名的监控工具‘Nagios’。</p><h1 id="6123" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">什么是Nagios？</h1><p id="d655" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">Nagios用于持续监控DevOps文化中的系统、应用程序、服务和业务流程等。如果出现故障，Nagios可以向技术人员发出问题警报，允许他们在中断影响业务流程、最终用户或客户之前开始补救过程。使用Nagios，您不必解释为什么看不见的基础设施中断会影响您组织的底线。</p><p id="7bd4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我给你解释一下Nagios是如何工作的。考虑下图:</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es lw"><img src="../Images/843e729351481e03c30cc561422c3092.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SXLmjJHG7Qf2LuzIEmBgMA.png"/></div></div></figure><p id="a4e2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Nagios运行在服务器上，通常作为守护进程或服务。</p><p id="9d15" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">它定期运行驻留在同一台服务器上的插件，它们联系您的网络或互联网上的主机或服务器。用户可以使用web界面查看状态信息。如果有事发生，你也可以收到电子邮件或短信通知。Nagios守护进程就像一个调度程序，在特定的时刻运行特定的脚本。它存储这些脚本的结果，如果这些结果发生变化，它将运行其他脚本。</p><p id="242d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">插件:</strong> <em class="lf"> </em>这些是编译后的可执行文件或脚本(Perl脚本、shell脚本等。)可以从命令行运行，以检查主机或服务的状态。Nagios使用插件的结果来确定网络上主机和服务的当前状态。</p><p id="ff8f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在让我们来讨论它的架构。</p><h1 id="e5e2" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">Nagios架构:</h1><ul class=""><li id="2736" class="jn jo hh ir b is kz iw la ja lx je ly ji lz jm le jt ju jv bi translated">Nagios构建在服务器/代理架构之上。</li><li id="5777" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">通常，在网络上，Nagios服务器运行在主机上，插件与本地和所有需要监控的远程主机进行交互。</li><li id="468b" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">这些插件将信息发送给调度程序，调度程序将信息显示在GUI中。</li></ul><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ma"><img src="../Images/36d8c1a0fe7f98288bbaaf394448a333.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YOw619w6UF6ClmWrDC5lyw.png"/></div></div></figure><p id="786e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我还需要向你解释NRPE (Nagios远程插件执行器)。</p><p id="1f58" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">NRPE插件被设计成允许你在远程Linux/Unix机器上执行Nagios插件。这样做的主要原因是允许Nagios监控“本地”资源(如CPU负载、内存使用等。)在远程机器上。因为这些公共资源通常不会暴露给外部机器，所以像NRPE这样的代理必须安装在远程Linux/Unix机器上。</p><p id="de82" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">考虑下图:</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mb"><img src="../Images/28b653b4933ab17dfc5616787e470bc3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XFAon0J5plia-oQP-_edlg.png"/></div></div></figure><ul class=""><li id="01b6" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm le jt ju jv bi translated">check_nrpe插件驻留在本地监控机器上。</li><li id="d4bf" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">NRPE守护进程运行在远程Linux/Unix机器上。</li><li id="898b" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm le jt ju jv bi translated">如上图所示，监控主机和远程主机之间有一个SSL(安全套接字层)连接。</li></ul><p id="6049" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在在这个Nagios教程中，是时候进行一些<strong class="ir hi">实践</strong>了。</p><p id="f470" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们从安装Nagios核心开始</p><h1 id="dcc1" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">安装Nagios核心:</h1><p id="1cb8" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">安装Nagios的完整过程可以总结为四个步骤:</p><ol class=""><li id="7fa6" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">在监控服务器中安装所需的软件包</li><li id="4502" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">安装Nagios核心、Nagios插件和NRPE (Nagios远程插件执行器)</li><li id="8958" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">设置Nagios密码以访问Web界面</li><li id="e57d" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">在客户端安装NRPE</li></ol><h2 id="1c9c" class="mc kc hh bd kd md me mf kh mg mh mi kl ja mj mk kp je ml mm kt ji mn mo kx mp bi translated">步骤1:在监控服务器上安装所需的软件包:</h2><p id="8fb7" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">访问网站:<a class="ae mq" href="https://dl.fedoraproject.org/pub/epel/6/" rel="noopener ugc nofollow" target="_blank"><strong class="ir hi">http://dl.fedoraproject.org/pub/epel/6/</strong></a></p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mr"><img src="../Images/100f9bf9f64f824ceb70447c9b1a4d61.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*L3MJp9kLfYKWf7UZ2SKU-Q.png"/></div></div></figure><p id="3fad" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">点击i386，然后你将被重定向到一个页面。</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ms"><img src="../Images/d09ee9845461c1acd51f3ee4fdc57553.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wNcRtKVBFe9hIbuK0puBRQ.png"/></div></div></figure><p id="0f29" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">由于我使用的是<strong class="ir hi"> CentOS 6 </strong>，所以我将右键单击并复制'<strong class="ir hi"><em class="lf">epel-release-6–8 . no arch . rpm</em></strong>'的链接位置，如上图截图所示。</p><p id="2552" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">打开终端，使用<strong class="ir hi"><em class="lf">rpm-Uvh</em></strong><em class="lf"/>命令粘贴链接。</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mr"><img src="../Images/6a0d2e26485093b3c57b03b6b8879600.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pr67waxEsc0SG1Mr6dPHIw.png"/></div></div></figure><p id="8fe6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们需要再下载一个存储库，请访问网站'<strong class="ir hi">http://rpms.famillecollet.com/enterprise</strong>/'</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mt"><img src="../Images/b8864684fb2ea8186b0d19cf19e6dfc5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DMR9KIQ19sT6-peFFNTotg.png"/></div></div></figure><p id="199d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">右键复制'<strong class="ir hi"><em class="lf">remi-release-6 . rpm</em></strong>的链接位置</p><p id="b1b2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">再次打开终端，使用<strong class="ir hi"> <em class="lf"> rpm -Uvh </em> </strong>命令粘贴链接。</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mu"><img src="../Images/cb26e5b6e5821116bdb8a0e112848afd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oB_6OqjAExHeZ7ne_rIa6A.png"/></div></div></figure><p id="8e13" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">好了，前提条件已经谈完了。让我们进行下一步。</p><h2 id="83b2" class="mc kc hh bd kd md me mf kh mg mh mi kl ja mj mk kp je ml mm kt ji mn mo kx mp bi translated">步骤2:安装Nagios核心、Nagios插件和NRPE (Nagios远程插件执行器):</h2><p id="ee9e" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">在终端中执行以下命令:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="268a" class="mc kc hh mw b fi na nb l nc nd">yum -y install nagios nagios-plugins-all nagios-plugins-nrpe nrpe httpd php</span></pre><p id="a93d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这将安装Nagios，Nagios插件，NRPE，NRPE，阿帕奇和<a class="ae mq" href="https://www.edureka.co/blog/php-tutorial-for-beginners/?utm_source=medium&amp;utm_medium=content-link&amp;utm_campaign=nagios-tutorial" rel="noopener ugc nofollow" target="_blank"> PHP </a>插件。</p><p id="8c69" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Apache web服务器需要监视当前的web服务器状态。</p><p id="b83e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Php用于处理网站日期的动态内容。</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ne"><img src="../Images/da98d776cb3b2730faa65db54d50a267.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IidLut0AJ7GNAP_dWuHk9g.png"/></div></div></figure><p id="fa06" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，我们需要启用Apache和Nagios服务:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="8713" class="mc kc hh mw b fi na nb l nc nd">chkconfig httpd on &amp;&amp; chkconfig nagios on</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ne"><img src="../Images/ec8931ef5d695740c6fdae4097c8a12f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pCTyKqScWsfryCe8dCJK1g.png"/></div></div></figure><p id="c4bd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们的下一步是启动Nagios和Apache:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="a29c" class="mc kc hh mw b fi na nb l nc nd">service httpd start &amp;&amp; service nagios start</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ne"><img src="../Images/6c2af8a03e97e7b633054dc6032f1b0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GatvylmTlnNer7UkmUW4MA.png"/></div></div></figure><p id="2263" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，我将启用至少1GB的交换内存。是时候使用dd命令创建交换文件本身了:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="11c0" class="mc kc hh mw b fi na nb l nc nd">dd if=/dev/zero of=/swap bs=1024 count=2097152</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mr"><img src="../Images/161c8e1fcf2b61f81ca1f5b2f8a4dc7b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*lWiYIpsHQ_WEsojYs49CrA.png"/></div></div></figure><p id="a4a5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">交换基本上是用来从RAM中释放一些不经常访问的信息，并将其移动到硬盘上的特定分区。</p><p id="22ea" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在您已经创建了交换分区，使用命令<em class="lf"> mkswap </em>来设置交换分区。这将通过创建一个linux交换区来准备交换文件。</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="5474" class="mc kc hh mw b fi na nb l nc nd">mkswap /swap</span></pre><p id="4952" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了防止文件在全球范围内可读，您应该对交换文件设置正确的权限:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="8dc2" class="mc kc hh mw b fi na nb l nc nd">chown root. /swap <br/>chmod 0600 /swap</span></pre><p id="4738" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您没有看到错误，您的交换空间就可以使用了。要立即激活它，请键入:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="4533" class="mc kc hh mw b fi na nb l nc nd">swapon /swap</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es nf"><img src="../Images/10ea4831cbceb7652b360ba6323574ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6-180rfvngcTcxUzL3rMDg.png"/></div></div></figure><p id="daf9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该文件将保留在虚拟专用服务器上，直到计算机重新启动。通过将交换添加到fstab文件中，可以确保交换是永久性的。</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="af95" class="mc kc hh mw b fi na nb l nc nd">echo /swap swap swap defaults 0 0 &gt;&gt; /etc/fstab</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mt"><img src="../Images/868c67095f6413ccda27890dac7102a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XUFdz12z58QDSxkD5ZhLrQ.png"/></div></div></figure><p id="6ba8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">操作系统内核可以通过一个名为<strong class="ir hi"> swappiness </strong>的配置参数来调整它依赖交换的频率。</p><p id="5bd6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要查找当前的交换度设置，请键入:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="66b7" class="mc kc hh mw b fi na nb l nc nd">cat /proc/sys/vm/swappiness</span></pre><p id="8f0d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">交换度可以是0到100之间的值。接近100的交换率意味着操作系统会经常交换，而且通常交换得太快。虽然交换提供了额外的资源，但RAM比交换空间快得多。每当有东西从RAM移到swap时，它就会变慢。</p><p id="c861" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">swappiness值为0意味着操作仅在绝对需要时才依赖交换。我们可以用sysctl命令调整交换度。要使您的VPS在每次启动时自动应用该设置，您可以将该设置添加到/etc/sysctl.conf文件中:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="022a" class="mc kc hh mw b fi na nb l nc nd">echo vm.swappiness = 0 &gt;&gt; /etc/sysctl.conf &amp;&amp; sysctl -p</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es nf"><img src="../Images/86dbbb4157cffcf0f8b3ae0821140aa8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GB1vmdMSte3V20G-tYZTKQ.png"/></div></div></figure><p id="c1e6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后，我们完成了第二步。</p><p id="43ce" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们进一步设置Nagios密码来访问web界面。</p><h2 id="646b" class="mc kc hh bd kd md me mf kh mg mh mi kl ja mj mk kp je ml mm kt ji mn mo kx mp bi translated">步骤3:设置Nagios密码以访问Web界面:</h2><p id="d5e9" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">使用以下命令设置访问web界面的密码:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="f25a" class="mc kc hh mw b fi na nb l nc nd">htpasswd -c /etc/nagios/passwd nagiosadmin</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ne"><img src="../Images/cb79c11c7c476e2cb11a1d0c56949586.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*uF_TJpQZ-rwnAgNRvcikDA.png"/></div></div></figure><p id="f278" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">键入密码，并通过重新键入进行确认。</p><p id="0201" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，打开浏览器。在这里，键入您的公共IP或主机名/nagios。考虑下面的例子:</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ng"><img src="../Images/5ded35571e522b58368c0e12e10093e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0N4ZW5Rg-wLEy-0X6-dRKw.png"/></div></div></figure><p id="29ee" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这里，给出用户名和密码。默认情况下，用户名是<strong class="ir hi"> <em class="lf">、nagiosadmin </em> </strong> <em class="lf">、</em>，密码是您在上一步中设置的。最后，按确定。</p><p id="b6e8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在此之后，您将被定向到<strong class="ir hi"> Nagios核心仪表板</strong>。</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ne"><img src="../Images/6b8aabc26b45d77a7cf86d2eae14f6c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gA-46G_7-1JQtif1c7KXTA.png"/></div></div></figure><p id="c08f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以单击hosts并查看Nagios核心当前正在监控的所有主机。</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es nh"><img src="../Images/1339231394d343f970903034690e4c48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0lDkAKZWMSc5Mq2M1MvX4Q.png"/></div></div></figure><p id="6604" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以注意到它只监视一台主机，即localhost。如果我希望我的Nagios内核监控一个远程主机，我需要在那个远程主机上安装NRPE。这将我们带到下一步，在您希望Nagios监控的客户机/机器上安装NRPE。</p><h2 id="6d63" class="mc kc hh bd kd md me mf kh mg mh mi kl ja mj mk kp je ml mm kt ji mn mo kx mp bi translated">步骤4:在客户端安装NRPE:</h2><p id="b910" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">好吧，那么，让我们在客户机上安装NRPE。</p><p id="b438" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">首先，您需要像我在Nagios服务器上一样安装所需的包。因此，只需执行相同的命令，考虑下面的截图:</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ni"><img src="../Images/6f1609a264b6ca91cc46740520544199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LS0RBwb_o4bTJCB_B8LpaQ.png"/></div></div></figure><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mt"><img src="../Images/e8293c645df61f074306f4d08f6fdc0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*P0-3Z898U3nyR7TITrAEww.png"/></div></div></figure><p id="d619" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在在客户端安装Nagios、Nagios插件和NRPE:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="fe77" class="mc kc hh mw b fi na nb l nc nd">yum -y install nagios nagios-plugins-all nrpe</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ne"><img src="../Images/d74b37902523569206999ce70f37c86e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HkXUn8zXY383uREbuaWCfQ.png"/></div></div></figure><p id="2c4f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">安装后，启用NRPE服务:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="8171" class="mc kc hh mw b fi na nb l nc nd">chkconfig nrpe on</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es nj"><img src="../Images/e7d2225908cea3c42fd745b732329f4c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*R90icuja_sIyti9yfwqWcA.png"/></div></div></figure><p id="8b78" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们的下一步是编辑，<strong class="ir hi"> <em class="lf"> nrpe.cfg </em> </strong>文件。我将使用<em class="lf"> vi </em>编辑器，您也可以选择任何其他编辑器:</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ni"><img src="../Images/792c35e2bdc04d1f3789c309f34ec30c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VRLbzItk2zhfzkJeLuVFHQ.png"/></div></div></figure><p id="d918" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您需要在允许的主机行中添加您的监控服务器的IP地址，请考虑下面的屏幕截图:</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mr"><img src="../Images/18615c7b4958c830f1e4b9902f240ec1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jBFFoDxn5vhdQzm8i78Ywg.png"/></div></div></figure><p id="c049" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里，我的监控服务器的IP地址是192.168.56.101。</p><p id="f55f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，我们需要设置防火墙规则，以允许监控服务器和客户端之间的连接。</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="0de6" class="mc kc hh mw b fi na nb l nc nd">iptables -N NRPE</span></pre><p id="be06" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">-选项用于将新规则附加到链的末尾。如果您想把它放在链中的其他地方，您可以使用-I选项，它允许您指定新规则的位置。</p><p id="6866" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">以下命令接受端口5666上的tcp请求。</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="647a" class="mc kc hh mw b fi na nb l nc nd">iptables -I INPUT -s 0/0 -p tcp --dport 5666 -j NRPE<br/>iptables -I NRPE -s 192.168.56.101 -j ACCEPT<br/>iptables -A NRPE -s 0/0 -j DROP</span></pre><p id="3e65" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这将基本上配置iptables接受来自特定主机(在我的例子中是192.168.56.101)的数据包，并丢弃来自其他主机的数据包。</p><p id="a53d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，我将保存这些配置:</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="cca7" class="mc kc hh mw b fi na nb l nc nd">/etc/init.d/iptables save</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es nj"><img src="../Images/0dab8c6515a4179aeb4318a20f1c9aea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vc6rhp8zpzA_rwSgVwREJg.png"/></div></div></figure><p id="5ac1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">立即开始NRPE服务。</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="8087" class="mc kc hh mw b fi na nb l nc nd">service nrpe start</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ne"><img src="../Images/c8109b9edaddeadb6cfb00c350492db3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4i5po1fT-1GMedRxZGQtEg.png"/></div></div></figure><p id="2ef7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在回到监控服务器。</p><p id="eaba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这里，我需要编辑nagios.cfg文件。</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="8279" class="mc kc hh mw b fi na nb l nc nd">vi /etc/nagios/nagios.cfg</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ne"><img src="../Images/d0cadc113cbda92f5f36c8d88e11866d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tDrfZ0mVOhsuVTZhxbMjxg.png"/></div></div></figure><p id="d075" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">取消注释该行—<em class="lf">CFG _ dir = etc/Nagios/servers</em></strong></p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ng"><img src="../Images/695f97d193a6c10fe5266fb101c6f86f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lq9cY7OlntFw7ZdVaKbZMA.png"/></div></div></figure><p id="3f4a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">制作‘服务器’目录，为此使用<strong class="ir hi"> <em class="lf"> mkdir </em> </strong>命令。</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="457a" class="mc kc hh mw b fi na nb l nc nd">mkdir /etc/nagios/servers/</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mt"><img src="../Images/de3318896dcfc7bf9202408f801e4a09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Hzm2xWyoDdkingnG7CulcA.png"/></div></div></figure><p id="b351" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">将您的工作目录更改为服务器。</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="bc47" class="mc kc hh mw b fi na nb l nc nd">cd /etc/nagios/servers</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ni"><img src="../Images/c9ebe9d3a24e36232b0549bf204cd5ed.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YUmp_tseAasLIzZi2U8HIQ.png"/></div></div></figure><p id="e67b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这个目录中创建一个新文件。cfg扩展名并编辑它。我将把它命名为client.cfg，我将使用<strong class="ir hi"> vi </strong>编辑器。</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="5e75" class="mc kc hh mw b fi na nb l nc nd">vi /etc/nagios/servers/client.cfg</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ca"><img src="../Images/066a0f0adab675528da20e332a49396a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KPsRa2DZKR_FeTFG8YpMFA.png"/></div></div></figure><p id="9b17" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在此添加以下几行:</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es nk"><img src="../Images/d50f7cc2f47aa2a87996889e45be6cd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*417gekcgi_T4ymtjG_602w.png"/></div></div></figure><p id="6e5c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这基本上包括了我想要监控的服务类型。给出您希望Nagios监控的机器的主机名及其IP地址。</p><p id="007e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">同样，您可以添加许多想要监视的服务。相同的配置可用于添加“n”个客户端。</p><p id="26e3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后一步伙计们，正确设置文件夹权限，重启Nagios。</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="2448" class="mc kc hh mw b fi na nb l nc nd">chown -R nagios. /etc/nagios/</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es mr"><img src="../Images/3d75800d0b0aa0722f20c73d518772dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bx6Nytu5ynw4Nf6BWuhxxQ.png"/></div></div></figure><p id="e087" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，重新启动Nagios</p><pre class="lh li lj lk fd mv mw mx my aw mz bi"><span id="8d86" class="mc kc hh mw b fi na nb l nc nd">service nagios restart</span></pre><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es nj"><img src="../Images/308b2b1c1f15e8b81f66107dbc5937a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5-w0mZn5-FdZGt6laH69NQ.png"/></div></div></figure><p id="8e4f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">打开浏览器，再次键入<em class="lf">主机名或公共ip/nagios/。</em>在我的例子中，是localhost/nagios/。</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ng"><img src="../Images/b60dc5237d433b4b0e953a60282c064c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gqp92XRh5GbCokrC17gZLw.png"/></div></div></figure><p id="8936" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">单击hosts查看Nagios当前正在监控的所有机器。</p><figure class="lh li lj lk fd ii er es paragraph-image"><div role="button" tabindex="0" class="ll lm di ln bf lo"><div class="er es ng"><img src="../Images/3e9de4109baa281edb5e03ea5bf5a536.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ARuHc6DjUPD2bfPj5lMScw.png"/></div></div></figure><p id="ab2b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里您可以注意到，它当前正在监视客户机(我希望Nagios监视的机器的主机名)。基本上，我们已经添加了一个使用NRPE的远程主机。</p><p id="554e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我希望你喜欢阅读Nagios教程的这篇文章。<em class="lf"> </em>如果你想查看更多关于人工智能、Python、道德黑客等市场最热门技术的文章，你可以参考Edureka的官方网站。</p><p id="27e8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请留意本系列中的其他文章，它们将解释DevOps的各个方面。</p><blockquote class="lq lr ls"><p id="12a1" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 1。</em> <a class="ae mq" rel="noopener" href="/edureka/devops-tutorial-89363dac9d3f"> <em class="hh"> DevOps教程</em> </a></p><p id="afba" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 2。</em> <a class="ae mq" rel="noopener" href="/edureka/git-tutorial-da652b566ece"> <em class="hh"> Git教程</em> </a></p><p id="d36b" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 3。</em> <a class="ae mq" rel="noopener" href="/edureka/jenkins-tutorial-68110a2b4bb3"> <em class="hh">詹金斯教程</em> </a></p><p id="e500" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 4。</em> <a class="ae mq" rel="noopener" href="/edureka/docker-tutorial-9a6a6140d917"> <em class="hh"> Docker教程</em> </a></p><p id="bdbb" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 5。</em> <a class="ae mq" rel="noopener" href="/edureka/ansible-tutorial-9a6794a49b23"> <em class="hh"> Ansible教程</em> </a></p><p id="8d48" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 6。</em> <a class="ae mq" rel="noopener" href="/edureka/puppet-tutorial-848861e45cc2"> <em class="hh">木偶教程</em> </a></p><p id="b6bb" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 7。</em> <a class="ae mq" rel="noopener" href="/edureka/chef-tutorial-8205607f4564"> <em class="hh">厨师教程</em> </a></p><p id="fb1f" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 8。</em> <a class="ae mq" rel="noopener" href="/edureka/devops-tools-56e7d68994af"> <em class="hh">如何编排DevOps工具？</em>T51】</a></p><p id="60db" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 9。</em> <a class="ae mq" rel="noopener" href="/edureka/continuous-delivery-5ca2358aedd8"> <em class="hh">连续交货</em> </a></p><p id="b6c6" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 10。</em> <a class="ae mq" rel="noopener" href="/edureka/continuous-integration-615325cfeeac"> <em class="hh">持续集成</em> </a></p><p id="db01" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 11。</em> <a class="ae mq" rel="noopener" href="/edureka/continuous-deployment-b03df3e3c44c"> <em class="hh">连续部署</em> </a></p><p id="8961" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 12。</em> <a class="ae mq" rel="noopener" href="/edureka/continuous-delivery-vs-continuous-deployment-5375642865a"> <em class="hh">持续交付vs持续部署</em> </a></p><p id="5fd0" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 13。</em> <a class="ae mq" rel="noopener" href="/edureka/ci-cd-pipeline-5508227b19ca"> <em class="hh"> CI CD管道</em> </a></p><p id="3bbf" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 14。</em> <a class="ae mq" rel="noopener" href="/edureka/docker-compose-containerizing-mean-stack-application-e4516a3c8c89"> <em class="hh"> Docker作曲</em> </a></p><p id="10aa" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 15。</em> <a class="ae mq" rel="noopener" href="/edureka/docker-swarm-cluster-of-docker-engines-for-high-availability-40d9662a8df1"> <em class="hh">码头工人群</em> </a></p><p id="f059" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated">16。 <a class="ae mq" rel="noopener" href="/edureka/docker-networking-1a7d65e89013"> <em class="hh">码头工人联网</em> </a></p><p id="b9d8" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated">17。<a class="ae mq" rel="noopener" href="/edureka/ansible-roles-78d48578aca1"><em class="hh"/></a></p><p id="cc40" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated">18。<a class="ae mq" rel="noopener" href="/edureka/ansible-vault-secure-secrets-f5c322779c77"><em class="hh"/></a></p><p id="20c0" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 19。</em><a class="ae mq" rel="noopener" href="/edureka/ansible-for-aws-provision-ec2-instance-9308b49daed9"><em class="hh">Ansible for AWS</em></a></p><p id="2ded" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated">20。 <a class="ae mq" rel="noopener" href="/edureka/jenkins-pipeline-tutorial-continuous-delivery-75a86936bc92"> <em class="hh">詹金斯管道</em> </a></p><p id="79d0" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 21。</em> <a class="ae mq" rel="noopener" href="/edureka/git-commands-with-example-7c5a555d14c"> <em class="hh">顶级Git命令</em> </a></p><p id="3b83" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh">二十二。</em> <a class="ae mq" rel="noopener" href="/edureka/docker-commands-29f7551498a8"> <em class="hh">顶级Docker命令</em> </a></p><p id="49ea" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 23。</em><a class="ae mq" rel="noopener" href="/edureka/git-vs-github-67c511d09d3e"><em class="hh">Git vs GitHub</em></a></p><p id="4973" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 24。</em> <a class="ae mq" rel="noopener" href="/edureka/devops-interview-questions-e91a4e6ecbf3"> <em class="hh"> DevOps面试问题</em> </a></p><p id="95f6" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 25。</em> <a class="ae mq" rel="noopener" href="/edureka/devops-engineer-role-481567822e06"> <em class="hh">谁是DevOps工程师？</em>T59】</a></p><p id="f809" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 26。</em> <a class="ae mq" rel="noopener" href="/edureka/devops-lifecycle-8412a213a654"> <em class="hh"> DevOps生命周期</em> </a></p><p id="46f4" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 27。</em><a class="ae mq" rel="noopener" href="/edureka/git-reflog-dc05158c1217"><em class="hh">Git ref log</em></a></p><p id="8d7c" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 28。</em><a class="ae mq" rel="noopener" href="/edureka/ansible-provisioning-setting-up-lamp-stack-d8549b38dc59"><em class="hh"/></a></p><p id="b9b8" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 29。</em> <a class="ae mq" rel="noopener" href="/edureka/devops-skills-f6a7614ac1c7"> <em class="hh">组织正在寻找的顶尖DevOps技能</em> </a></p><p id="f43e" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated">三十。 <a class="ae mq" rel="noopener" href="/edureka/waterfall-vs-agile-991b14509fe8"> <em class="hh">瀑布vs敏捷</em> </a></p><p id="006e" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 31。</em> <a class="ae mq" rel="noopener" href="/edureka/maven-tutorial-2e87a4669faf"> <em class="hh"> Maven用于构建Java应用</em> </a></p><p id="9b32" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 32。</em> <a class="ae mq" rel="noopener" href="/edureka/jenkins-cheat-sheet-e0f7e25558a3"> <em class="hh">詹金斯小抄</em> </a></p><p id="86bc" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 33。</em> <a class="ae mq" rel="noopener" href="/edureka/ansible-cheat-sheet-guide-5fe615ad65c0"> <em class="hh"> Ansible备忘单</em> </a></p><p id="a28f" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 34。</em> <a class="ae mq" rel="noopener" href="/edureka/ansible-interview-questions-adf8750be54"> <em class="hh"> Ansible面试问答</em> </a></p><p id="c40f" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated">35。 <a class="ae mq" rel="noopener" href="/edureka/docker-interview-questions-da0010bedb75"> <em class="hh"> 50码头工人面试问题</em> </a></p><p id="0d78" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated">36。 <a class="ae mq" rel="noopener" href="/edureka/what-is-agile-methodology-fe8ad9f0da2f"> <em class="hh">敏捷方法论</em> </a></p><p id="b83a" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 37。</em> <a class="ae mq" rel="noopener" href="/edureka/jenkins-interview-questions-7bb54bc8c679"> <em class="hh">詹金斯面试问题</em> </a></p><p id="0949" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 38。</em> <a class="ae mq" rel="noopener" href="/edureka/git-interview-questions-32fb0f618565"> <em class="hh"> Git面试问题</em> </a></p><p id="62a6" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated">39。 <a class="ae mq" rel="noopener" href="/edureka/docker-architecture-be79628e076e"> <em class="hh"> Docker架构</em> </a></p><p id="057a" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated">40。<a class="ae mq" rel="noopener" href="/edureka/linux-commands-in-devops-73b5a2bcd007"><em class="hh">devo PS中使用的Linux命令</em> </a></p><p id="ad1e" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated">41。 <a class="ae mq" rel="noopener" href="/edureka/jenkins-vs-bamboo-782c6b775cd5"> <em class="hh">詹金斯vs竹子</em> </a></p><p id="d9cd" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 42。</em> <a class="ae mq" rel="noopener" href="/edureka/nagios-interview-questions-f3719926cc67"> <em class="hh"> Nagios面试问题</em> </a></p><p id="a00d" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 43。</em> <a class="ae mq" rel="noopener" href="/edureka/jenkins-x-d87c0271af57"> <em class="hh"> DevOps实时场景</em> </a></p><p id="b0cd" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 44。</em> <a class="ae mq" rel="noopener" href="/edureka/jenkins-vs-bamboo-782c6b775cd5"> <em class="hh">詹金斯和詹金斯X </em> </a>的区别</p><p id="59f6" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 45。</em><a class="ae mq" rel="noopener" href="/edureka/docker-for-windows-ed971362c1ec"><em class="hh">Windows Docker</em></a></p><p id="2b8b" class="ip iq lf ir b is it iu iv iw ix iy iz lt jb jc jd lu jf jg jh lv jj jk jl jm ha bi translated"><em class="hh"> 46。</em><a class="ae mq" href="http://git%20vs%20github/" rel="noopener ugc nofollow" target="_blank"><em class="hh">Git vs Github</em></a></p></blockquote></div><div class="ab cl nl nm go nn" role="separator"><span class="no bw bk np nq nr"/><span class="no bw bk np nq nr"/><span class="no bw bk np nq"/></div><div class="ha hb hc hd he"><p id="4273" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="lf">原载于2017年11月22日</em><a class="ae mq" href="https://www.edureka.co/blog/nagios-tutorial/" rel="noopener ugc nofollow" target="_blank"><em class="lf">www.edureka.co</em></a><em class="lf">。</em></p></div></div>    
</body>
</html>