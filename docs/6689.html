<html>
<head>
<title>RegExp lookarounds in JavaScript</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaScript中的RegExp循环</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/regexp-lookarounds-in-javascript-6d81ca15df25?source=collection_archive---------8-----------------------#2019-08-27">https://medium.com/quick-code/regexp-lookarounds-in-javascript-6d81ca15df25?source=collection_archive---------8-----------------------#2019-08-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/25c806b4ae41aa1bec019861be569770.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oOl5lNedjGmeMkyH"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@nathananderson?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Nathan Anderson</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="3d47" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在这篇文章中，我将通过简单的例子来解释JS RegExp lookarounds是什么。</p><p id="6fbe" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们假设您需要进行pin码样式的文本输入。像这样的:</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div class="er es js"><img src="../Images/a9ee305f1696629845461e234a845b56.png" data-original-src="https://miro.medium.com/v2/resize:fit:1064/format:webp/1*IJrwi-DxWcuuTonaPQr_gg.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx">Simple pin-code style input</figcaption></figure><p id="1ee4" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">注意到除了最后一位，所有数字都是点吗？使用RegExp lookaround(在这种情况下是负的lookahead)，只用一行代码就很容易实现:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="7ef4" class="kc kd hh jy b fi ke kf l kg kh">pin.replace(/\d(<strong class="jy hi">?!$</strong>)/g, ‘•’)</span></pre><p id="7812" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里刚刚发生了什么？我们会弄清楚的，但首先让我们回顾一个更简单的例子。</p></div><div class="ab cl ki kj go kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ha hb hc hd he"><p id="d632" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们有一个降价字符串:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="7f05" class="kc kd hh jy b fi ke kf l kg kh">- 1 potato for 2€<br/>- 2 tomatoes for 3€<br/>- 5 bananas for 4€</span></pre><p id="2c3e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们编写一个代码，查找欧元符号之前的所有数字。使用回看可以这样做:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="aed4" class="kc kd hh jy b fi ke kf l kg kh">str.match(/\d+(<strong class="jy hi">?=</strong>€)/g)</span></pre><p id="926e" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">它的意思是:</p><ul class=""><li id="5b40" class="kp kq hh iw b ix iy jb jc jf kr jj ks jn kt jr ku kv kw kx bi translated"><strong class="iw hi"> \d+ </strong>一个或多个数字</li><li id="233e" class="kp kq hh iw b ix ky jb kz jf la jj lb jn lc jr ku kv kw kx bi translated"><strong class="iw hi">(？</strong>=€)其次是€</li></ul><p id="9642" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">就是这样！根本不用动脑筋。</p><p id="50cd" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">那(<strong class="iw hi">？= </strong> your_regexp)被称为<strong class="iw hi">正向前瞻</strong>。你可以这样理解，因为它以积极的态度展望未来。</p><p id="f221" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">结果你会得到一个数组:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="a9f0" class="kc kd hh jy b fi ke kf l kg kh">[“2”, “3”, “4”]</span></pre><p id="c8d0" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">请注意，它返回了前瞻之前的内容，在我们的例子中是<strong class="iw hi"> \d+ </strong>。€符号本身不包含在生成的数组中。</p><p id="7f87" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在我想找出所有没有€符号的数字。那也很容易。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="cc5f" class="kc kd hh jy b fi ke kf l kg kh">str.match(/\d+(<strong class="jy hi">?!</strong>€)/g)</span></pre><p id="23a9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这是一个消极的前瞻。主要区别是<strong class="iw hi">！</strong>符号代替<strong class="iw hi"> = </strong>。</p><p id="8120" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">所以，这个将返回数量:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="7059" class="kc kd hh jy b fi ke kf l kg kh">[“1”, “2”, “5”]</span></pre><p id="17b0" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这正是我想要的数字。</p></div><div class="ab cl ki kj go kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ha hb hc hd he"><p id="ebb6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在我们可以回到我们的pin码示例:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="f9b7" class="kc kd hh jy b fi ke kf l kg kh">pin.replace(/\d(<strong class="jy hi">?!$</strong>)/g, ‘•’)</span></pre><ul class=""><li id="76ca" class="kp kq hh iw b ix iy jb jc jf kr jj ks jn kt jr ku kv kw kx bi translated"><strong class="iw hi"> \d </strong>只是一个数字</li><li id="3049" class="kp kq hh iw b ix ky jb kz jf la jj lb jn lc jr ku kv kw kx bi translated"><strong class="iw hi">(？！$) </strong>后面没有行尾(<strong class="iw hi"> $ </strong>在regexps中是一个特殊的字符，表示行尾)</li></ul><p id="d595" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">总结一下，找出所有不在行尾的数字，用' \'代替。轻松点。</p></div><div class="ab cl ki kj go kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ha hb hc hd he"><p id="3da4" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">嗯，如果有一个前瞻，应该有一个后视。是的，有一个。</p><p id="9da1" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">与€不同，$通常写在数字之前。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="c96e" class="kc kd hh jy b fi ke kf l kg kh">- 1 potato for $2<br/>- 2 tomatoes for $3<br/>- 5 bananas for $4</span></pre><p id="35fe" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在要查找值，我们需要一点不同的代码:</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="a9af" class="kc kd hh jy b fi ke kf l kg kh">str.match(/(<strong class="jy hi">?&lt;=</strong>\$)\d+/g)</span></pre><p id="07fd" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这被称为<strong class="iw hi">正面回顾</strong>。然后转义<strong class="iw hi"> $ </strong>符号(因为我们不想把它当作行尾，所以我们用反斜杠对它进行转义)。</p><p id="9420" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">它查找所有以<strong class="iw hi"> $ </strong>符号开头的数字。</p><p id="6dcb" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">另一方面，还有一个(<strong class="iw hi">？&lt;！</strong> your_regexp) <strong class="iw hi">负面回顾</strong>。</p><pre class="jt ju jv jw fd jx jy jz ka aw kb bi"><span id="9e5d" class="kc kd hh jy b fi ke kf l kg kh">str.match(/(<strong class="jy hi">?&lt;!</strong>\$)\d+/g</span></pre><p id="60de" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">它查找前面没有$符号的所有数字。</p></div><div class="ab cl ki kj go kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ha hb hc hd he"><p id="a350" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">总之，如果你需要找到后面有或后面没有的东西，用这些:</p><ul class=""><li id="46a9" class="kp kq hh iw b ix iy jb jc jf kr jj ks jn kt jr ku kv kw kx bi translated"><strong class="iw hi">正向前瞻:</strong> ( <strong class="iw hi">？= </strong> your_regexp)</li><li id="ffb2" class="kp kq hh iw b ix ky jb kz jf la jj lb jn lc jr ku kv kw kx bi translated"><strong class="iw hi">消极前瞻:</strong> ( <strong class="iw hi">？！</strong> your_regexp)</li></ul><p id="300d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果你需要查找某事之前或之前没有某事，使用这些:</p><ul class=""><li id="bba7" class="kp kq hh iw b ix iy jb jc jf kr jj ks jn kt jr ku kv kw kx bi translated"><strong class="iw hi">正面回望:</strong> ( <strong class="iw hi">？&lt; = </strong> your_regexp)</li><li id="0193" class="kp kq hh iw b ix ky jb kz jf la jj lb jn lc jr ku kv kw kx bi translated"><strong class="iw hi">负面回顾:</strong> ( <strong class="iw hi">？&lt;！</strong> your_regexp)</li></ul><p id="347f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">你可以使用<a class="ae it" href="https://regex101.com/" rel="noopener ugc nofollow" target="_blank"> regex101 </a>来检查所有的例子。这是测试所有正则表达式的好地方。</p></div><div class="ab cl ki kj go kk" role="separator"><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn ko"/><span class="kl bw bk km kn"/></div><div class="ha hb hc hd he"><p id="7675" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">另外，在JS中使用lookbehinds时要小心，因为在我写这篇文章的时候，它还有部分支持。检查 <a class="ae it" href="https://caniuse.com/#search=lookbehind" rel="noopener ugc nofollow" target="_blank"> <em class="ld">可以使用</em> </a> <em class="ld">进行确认。</em></p></div></div>    
</body>
</html>