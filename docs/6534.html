<html>
<head>
<title>Get Started With Firewalls On Google Cloud Platform In Minutes</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在几分钟内开始使用谷歌云平台上的防火墙</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/get-started-with-firewalls-on-google-cloud-platform-in-minutes-1d458442dbc8?source=collection_archive---------0-----------------------#2018-11-10">https://medium.com/quick-code/get-started-with-firewalls-on-google-cloud-platform-in-minutes-1d458442dbc8?source=collection_archive---------0-----------------------#2018-11-10</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/138e3c17158253a811e9bf6abbff2f0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TaHYVIS4MDa_nCgqM36QnQ.jpeg"/></div></div></figure><p id="21e4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">云之战始于10年前，许多人试图在巨头中占有一席之地，但很少有人成功。虽然没有人能够挑战巨头，但亚马逊、谷歌和微软是AWS、谷歌云和Azure的明显赢家。</p><p id="5b31" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，您有一个项目的云服务器，您想启用ssh或ftp。你已经安装了必要的软件包，当你尝试连接时，你不能。连接中断。发生了什么事？</p><p id="7cd7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">云防火墙的默认规则非常严格，这是理所应当的。如果没有明确标记为允许，就不应该打开任何东西。在安全方面，永远要有白名单，不要有黑名单。除非需要，否则屏蔽所有未知内容。</p><p id="f9e6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在本例中，我们将启用SSH。默认情况下，它在端口22上运行，您应该对此进行更改。你会问为什么。如果这是默认端口，那么它应该在这里运行。不。每个人都知道22是默认端口，所以攻击者会尝试扫描ip范围并检查端口22是否可达，如果可达(并且您使用的是没有速率限制的用户名/密码),那么您基本上就完蛋了。</p><p id="a909" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">幸运的是，可以将SSH守护进程映射到一个不同的端口，比如说1599(不要实际使用这个端口，随机选择一个没有被其他守护进程使用的端口)。</p><p id="742f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您需要在操作系统级别和云平台级别启用通过该端口的流量。</p><h1 id="1a6a" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated"><strong class="ak">谷歌防火墙</strong></h1><p id="7c1c" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">要让它通过谷歌防火墙，你需要去实例组，然后再去防火墙。从那里添加一个规则到端口1599(更改为您的端口)并总是允许连接。</p><h2 id="72f2" class="kq jo hh bd jp kr ks kt jt ku kv kw jx ja kx ky kb je kz la kf ji lb lc kj ld bi translated"><strong class="ak"> OS防火墙</strong></h2><p id="092d" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">出于本教程的目的，我假设您运行的是Linux服务器(如果不是，您可以随时切换到Linux服务器；) ).IPTABLES是您需要的命令。您需要告诉它允许流量通过端口1599，就像您对Google所做的那样。</p><p id="d11c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">完成后，您还应该在SSH守护进程的配置中禁止root登录，并禁止密码登录。</p><p id="c9bb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">唯一安全的登录方法是使用RSA。</p><h2 id="6727" class="kq jo hh bd jp kr ks kt jt ku kv kw jx ja kx ky kb je kz la kf ji lb lc kj ld bi translated"><strong class="ak">宋承宪键</strong></h2><p id="af2f" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">为了连接，您需要在每台用于连接服务器的机器上生成一个密钥，为了简单起见，我假设它是一个密钥。如果不是，您只需为每台不同的机器重复这一部分。</p><p id="0f64" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">导航到`. ssh '文件夹。对于Linux: `cd /root/.ssh`。对于Mac: `cd /Users/USERNAME/。ssh/`。如果这些文件夹不存在，请使用“mkdir”创建它们。</p><p id="57d7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">打开终端并键入“ssh-keygen -T rsa”</p><p id="9e2c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">-按enter键输入名称(您可以选择您想要的，我将保留id_rsa)</p><p id="5494" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">-随机选择一个强密码，并将其保存在您的密码管理器中</p><p id="fb8e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">-在这样的密码管理器中将输出保存为注释</p><p id="79a5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">-打开id_rsa.pub并复制公钥。</p><p id="576a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这将是你的公开身份，私钥将证明你就是你所说的那个人。永远保持你的私人密钥的秘密！</p><p id="58c7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">导航到authorized_keys，并在新行中粘贴您想要允许的机器的公钥。</p><h2 id="f83e" class="kq jo hh bd jp kr ks kt jt ku kv kw jx ja kx ky kb je kz la kf ji lb lc kj ld bi translated"><strong class="ak">连接</strong></h2><p id="c110" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">尝试使用“ssh -p 1599用户名@192.168.1.1”从您的设备连接到服务器</p><p id="9e57" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">1599 -&gt;端口</p><p id="cf5c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">用户名-&gt;你想登录的账户的用户名(希望你没有忘记关闭root登录)</p><p id="a050" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">192.168.1.1 -&gt;服务器的ip地址或域名</p><h2 id="bab6" class="kq jo hh bd jp kr ks kt jt ku kv kw jx ja kx ky kb je kz la kf ji lb lc kj ld bi translated">外卖食品</h2><p id="df4f" class="pw-post-body-paragraph ip iq hh ir b is kl iu iv iw km iy iz ja kn jc jd je ko jg jh ji kp jk jl jm ha bi translated">你需要从一开始就考虑安全问题，永远不要放松。</p><p id="f71f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">关于我</strong></p><p id="cefc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我是Valentino Urbano，来自意大利米兰的iOS开发者。我的客户包括大众汽车、Moncler、PMI和意大利联合银行。你可以在推特或我的网站上找到我<a class="ae le" href="https://twitter.com/valentinourbano" rel="noopener ugc nofollow" target="_blank">。</a></p></div></div>    
</body>
</html>