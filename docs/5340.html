<html>
<head>
<title>JShell - A Quick Look</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JShell -快速浏览</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/jshell-a-quick-look-d26f7e91a864?source=collection_archive---------1-----------------------#2017-11-07">https://medium.com/oracledevs/jshell-a-quick-look-d26f7e91a864?source=collection_archive---------1-----------------------#2017-11-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="1242" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jc jd je jf b"><a class="ae jg" href="https://docs.oracle.com/javase/9/tools/jshell.htm" rel="noopener ugc nofollow" target="_blank">jshell</a></code> <a class="ae jg" href="https://docs.oracle.com/javase/9/tools/jshell.htm" rel="noopener ugc nofollow" target="_blank">是一个新的Java-9工具</a>——一个Java的REPL！！一开始我不确定它会有多有用，但是自从我开始玩它，我发现它的用途越来越多，而且它很酷。尽管有一些令人惊讶的事情。让我们看一看。</p><h1 id="8468" class="jh ji hh bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">快速浏览</h1><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="17ab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们在REPL提示。我们可以做一些完全不令人惊讶的事情(但是很简洁！)事情:</p><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="db4c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">还有一些元命令，试着从<code class="du jc jd je jf b">/help</code>开始</p><p id="5d1b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jc jd je jf b">$n</code>是对结果的引用:</p><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="51cb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">等等。我们可以动态地创建、修改和替换类:</p><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="6154" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当改变时，等级是<code class="du jc jd je jf b">created</code>然后是<code class="du jc jd je jf b">modified</code>或<code class="du jc jd je jf b">replaced</code>。如果这个变化改变了方法签名或者添加/删除了一个字段，那么这个类就是<code class="du jc jd je jf b">replaced</code>，否则就是<code class="du jc jd je jf b">modified</code>。当你这样做时，实例会发生什么？</p><h1 id="22fa" class="jh ji hh bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">修改类</h1><p id="d68c" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">修改类会改变现有实例:</p><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><h1 id="6d81" class="jh ji hh bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">替换类</h1><p id="1211" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">替换类会使实例引用无效:</p><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><h1 id="8f6e" class="jh ji hh bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">分号插入</h1><p id="ace4" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">老实说，我内心深处的道格拉斯-克罗克福德对此有些恼火。<strong class="ig hi">分号可选</strong>。您可能会注意到，我在上面的代码中没有使用任何代码。规则似乎是，如果一个表达式<em class="kr">可以被</em>求值，那么它<em class="kr">将会被</em>求值。因此，键入代码时要小心，比如:</p><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="120a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因为你会得到这个:</p><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="b447" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我用三种方法来处理这个问题:</p><ul class=""><li id="56f5" class="ks kt hh ig b ih ii il im ip ku it kv ix kw jb kx ky kz la bi translated">所有东西都在一条线上。排长队不好看。</li></ul><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><ul class=""><li id="3570" class="ks kt hh ig b ih ii il im ip ku it kv ix kw jb kx ky kz la bi translated">使用反向引用。通常只在我<em class="kr">忘记</em>关于分号插入的时候使用，并且伴随着我踢自己。</li></ul><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><ul class=""><li id="afb9" class="ks kt hh ig b ih ii il im ip ku it kv ix kw jb kx ky kz la bi translated">移动你的点。看起来有点令人惊讶，但工作正常。最小最坏的选择。</li></ul><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="b68c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意这里有一个<a class="ae jg" href="https://bugs.openjdk.java.net/browse/JDK-8190294" rel="noopener ugc nofollow" target="_blank">公开的bug来防止多行粘贴时的这种行为</a></p><h1 id="0f7b" class="jh ji hh bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">粘贴内容</h1><p id="806c" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">似乎有一个bug阻止粘贴2行以上的代码。这里报道的是<a class="ae jg" href="https://bugs.openjdk.java.net/browse/JDK-8182297" rel="noopener ugc nofollow" target="_blank"/>。这个bug被标记为<code class="du jc jd je jf b">RESOLVED</code>，但是这个bug在最新的JDK 9.0.1中仍然存在(至少在Linux上)。解决方法是:</p><figure class="kf kg kh ki fd kj"><div class="bz dy l di"><div class="kk kl l"/></div></figure><p id="1291" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将启动您的<code class="du jc jd je jf b">$EDITOR</code>，您可以将任意多的行粘贴到其中，然后保存&amp;退出，<code class="du jc jd je jf b">jshell</code>对其进行评估。</p><h1 id="1d3c" class="jh ji hh bd jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke bi translated">结论</h1><p id="894d" class="pw-post-body-paragraph ie if hh ig b ih km ij ik il kn in io ip ko ir is it kp iv iw ix kq iz ja jb ha bi translated">jshell是一种处理Java代码的好方法。比用<code class="du jc jd je jf b">main()</code>方法创建虚拟类好得多。Trisha Gee向我们展示了如何使用IntelliJ的jshell的一个很好的演示——看起来很棒，我想其他ide也有类似的支持。试试吧:)</p></div><div class="ab cl lb lc go ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ha hb hc hd he"><p id="d29e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kr">最初发布于</em><a class="ae jg" href="http://mjg123.github.io" rel="noopener ugc nofollow" target="_blank"><em class="kr">mjg 123 . github . io</em></a><em class="kr">。</em></p></div></div>    
</body>
</html>