<html>
<head>
<title>Remote Software Development with code-server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用代码服务器进行远程软件开发</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/remote-software-development-with-code-server-1d742dacbc5?source=collection_archive---------0-----------------------#2019-09-12">https://medium.com/oracledevs/remote-software-development-with-code-server-1d742dacbc5?source=collection_archive---------0-----------------------#2019-09-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/e6b18b27d9e47b6cd094c4ac62b4a15f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*629_26JPXwYB00sFLy_Gag.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Remote development</figcaption></figure><div class=""/><h1 id="a73e" class="it iu hw bd iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq bi translated">为什么要在远程环境上开发？</h1><p id="27e6" class="pw-post-body-paragraph jr js hw jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ha bi translated">通过可访问性、标准化和可伸缩性，在远程服务器上运行开发环境有利于您的软件工程过程。这些好处几乎不会改变您的开发体验。只需连接到远程服务器，签出代码，并在本地使用编辑器，通过浏览器窗口进行更改，而一切都集中进行。</p><h2 id="a654" class="kp iu hw bd iv kq kr ks iz kt ku kv jd kc kw kx jh kg ky kz jl kk la lb jp lc bi translated">易接近的</h2><p id="9819" class="pw-post-body-paragraph jr js hw jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ha bi translated">由于服务器可以远程访问，并且与您的本地工作站分离，因此您可以通过安全连接从任何地方连接到环境，而不是局限于一个物理系统。这也有助于提高系统的耐用性，因为将咖啡洒到云上比洒到笔记本电脑上要困难得多。你仍然可以安装你最喜欢的插件，按照你的喜好配置编辑器，就像它在你的本地机器上运行一样。</p><h2 id="95d5" class="kp iu hw bd iv kq kr ks iz kt ku kv jd kc kw kx jh kg ky kz jl kk la lb jp lc bi translated">使标准化</h2><p id="49a4" class="pw-post-body-paragraph jr js hw jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ha bi translated">远程服务器可以使用组织标准工具进行预配置或模板化。通过跳过配置本地环境所需的步骤，这为第一天的开始提供了一种更简单的方法。当开始一个新项目时，它也提供了一个干净的石板——一个可以为各种语言和开发配置创建的石板。这种方法的另一个好处是，公司的源代码永远不会存储在开发人员的本地机器上，而是存储在一个安全的服务器上，这对于合规性非常有用。</p><h2 id="a5c2" class="kp iu hw bd iv kq kr ks iz kt ku kv jd kc kw kx jh kg ky kz jl kk la lb jp lc bi translated">可攀登的</h2><p id="db4e" class="pw-post-body-paragraph jr js hw jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ha bi translated">连接到云中的远程服务器提供了对可伸缩基础设施的访问。您可以在高性能硬件上运行云中的过程，并根据需要扩展硬件，而不是占用您的机器来运行编译或长时间的测试。我的一个同事提到了他过去在远程构建服务器上运行编译/测试作业的经历，这些作业花费了大约13个小时，这是你在本地机器上永远不会做的事情。</p><h1 id="59df" class="it iu hw bd iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq bi translated"><code class="du ld le lf lg b"><a class="ae lh" href="https://github.com/cdr/code-server" rel="noopener ugc nofollow" target="_blank">code-server</a></code></h1><p id="5a4d" class="pw-post-body-paragraph jr js hw jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ha bi translated">一个用于远程开发的工具是由<a class="ae lh" href="https://coder.com/" rel="noopener ugc nofollow" target="_blank">编码器</a>开发的<code class="du ld le lf lg b">code-server</code>。这是一个开源选项，使用户能够在通过浏览器访问的远程服务器上运行Visual Studio代码开发环境。<code class="du ld le lf lg b">code-server</code>附带了许多有文档记录的安装选项，包括预构建的二进制文件、使用<code class="du ld le lf lg b">sshcode</code>的简化设置、<a class="ae lh" href="https://marketplace.digitalocean.com/apps/code-server?action=deploy" rel="noopener ugc nofollow" target="_blank">数字海洋水滴</a>、Docker图像等等。为了快速入门，我建议从Docker映像开始，或者安装二进制文件。<code class="du ld le lf lg b">sshcode</code>选项提供了<a class="ae lh" href="https://github.com/cdr/code-server" rel="noopener ugc nofollow" target="_blank">额外的</a>同步功能，以保持本地VS代码环境中的设置和扩展与远程环境一致。</p><h2 id="467b" class="kp iu hw bd iv kq kr ks iz kt ku kv jd kc kw kx jh kg ky kz jl kk la lb jp lc bi translated">码头工人</h2><p id="2664" class="pw-post-body-paragraph jr js hw jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ha bi translated">使用Docker镜像就像安装并运行Docker一样简单:</p><pre class="li lj lk ll fd lm lg ln lo aw lp bi"><span id="aaf2" class="kp iu hw lg b fi lq lr l ls lt">$ docker run -it -p 127.0.0.1:8443:8443 -v "${PWD}:/home/coder/project" codercom/code-server --allow-http --no-auth</span></pre><p id="b7be" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">这将创建一个运行<code class="du ld le lf lg b">code-server</code>的Docker容器，带有一个转发到8443的端口，并且没有启用密码保护。你可以在<a class="ae lh" href="https://github.com/cdr/code-server" rel="noopener ugc nofollow" target="_blank"> code-server GitHub repo </a>中的<a class="ae lh" href="https://github.com/cdr/code-server/blob/master/Dockerfile" rel="noopener ugc nofollow" target="_blank"> /Dockerfile </a>查看Dockerfile。导航到<a class="ae lh" href="http://localhost:8443" rel="noopener ugc nofollow" target="_blank"> http://localhost:8443 </a>以访问VS代码环境。<code class="du ld le lf lg b">code-server</code>使用自签名SSL证书，该证书可能会在您继续操作之前提示您的浏览器询问一些其他问题。</p><h2 id="62bc" class="kp iu hw bd iv kq kr ks iz kt ku kv jd kc kw kx jh kg ky kz jl kk la lb jp lc bi translated">带<code class="du ld le lf lg b">code-server</code>二进制的云虚拟机</h2><p id="f7f2" class="pw-post-body-paragraph jr js hw jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ha bi translated">首先连接到目标开发服务器并下载二进制文件。在这种情况下，我提供了一个运行在Oracle云基础设施上的Ubuntu 18.04虚拟机。您可以使用SSH将远程端口从服务器转发到本地客户端。为了节省时间，您甚至可以在安装<code class="du ld le lf lg b">code-server</code>之前连接到VM并运行端口转发:</p><pre class="li lj lk ll fd lm lg ln lo aw lp bi"><span id="3994" class="kp iu hw lg b fi lq lr l ls lt">$ ssh [username]@[IP address] -L 8443:localhost:8443</span></pre><p id="82a6" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">将二进制文件添加到您的路径中，并以项目目录作为第一个参数启动二进制文件:</p><pre class="li lj lk ll fd lm lg ln lo aw lp bi"><span id="0a9b" class="kp iu hw lg b fi lq lr l ls lt">$ code-server [initial directory to open]</span></pre><p id="b7de" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">导航到<a class="ae lh" href="http://localhost:8443" rel="noopener ugc nofollow" target="_blank"> http://localhost:8443 </a>并输入终端中显示的密码。</p><figure class="li lj lk ll fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lz"><img src="../Images/5ddceab92cfeeb5bc5cb4859e561c4be.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*00UYgy11z4Vj1CW_dKUbKA.png"/></div></div></figure><p id="caea" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">这个过程相当简单，但是对于那些寻求额外帮助的人来说，Coder为自托管的 <code class="du ld le lf lg b"><a class="ae lh" href="https://github.com/cdr/code-server/blob/master/doc/self-hosted/index.md" rel="noopener ugc nofollow" target="_blank">code-server</a></code>编写了一个<a class="ae lh" href="https://github.com/cdr/code-server/blob/master/doc/self-hosted/index.md" rel="noopener ugc nofollow" target="_blank">故障排除指南。</a></p><p id="cb3e" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">一旦用<code class="du ld le lf lg b">code-server</code>配置了虚拟机，我建议使用Oracle Cloud 和其他云提供商提供的<a class="ae lh" href="https://docs.cloud.oracle.com/iaas/Content/Compute/Tasks/managingcustomimages.htm" rel="noopener ugc nofollow" target="_blank">映像创建工具创建一个自定义映像。这种方法生成的模板可以用作开发环境的标准起点。</a></p><figure class="li lj lk ll fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lz"><img src="../Images/b547a96a3767a79e93210b8c5b764f6d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RNYboIQNe93DQ1MB05caUQ.png"/></div></div></figure><h1 id="1617" class="it iu hw bd iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq bi translated">使用<code class="du ld le lf lg b">sshcode</code>的云虚拟机</h1><p id="6f74" class="pw-post-body-paragraph jr js hw jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ha bi translated"><code class="du ld le lf lg b">sshcode</code>提供一个CLI，通过SSH将<code class="du ld le lf lg b">code-server</code>自动安装到远程服务器。它还通过<code class="du ld le lf lg b">rsync</code>自动将您的本地VS代码设置和扩展同步到远程服务器。</p><p id="8e05" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">要将<code class="du ld le lf lg b">sshcode</code>安装到您的本地机器上，要么下载一个<a class="ae lh" href="https://github.com/cdr/sshcode/releases" rel="noopener ugc nofollow" target="_blank">预构建的二进制文件</a>要么使用<code class="du ld le lf lg b">go</code>:</p><pre class="li lj lk ll fd lm lg ln lo aw lp bi"><span id="ae0d" class="kp iu hw lg b fi lq lr l ls lt">$ go get -u go.coder.com/sshcode</span><span id="89c0" class="kp iu hw lg b fi ma lr l ls lt">$ sshcode<br/>Usage: sshcode [FLAGS] HOST [DIR]<br/>​<br/>Start VS Code via code-server over SSH.<br/>​<br/>Environment variables:<br/>     VSCODE_CONFIG_DIR use special VS Code settings dir.<br/>     VSCODE_EXTENSIONS_DIR use special VS Code extensions dir.<br/>​<br/>More info: <a class="ae lh" href="https://github.com/cdr/sshcode" rel="noopener ugc nofollow" target="_blank">https://github.com/cdr/sshcode</a><br/>​<br/>Arguments:<br/>     HOST is passed into the ssh command. Valid formats are '&lt;ip-address&gt;' or 'gcp:&lt;instance-name&gt;'.<br/>     DIR is optional.<br/>​<br/>sshcode flags:<br/>      --b                           sync extensions back on termination<br/>      --bind string                 local bind address for SSH tunnel, in [HOST][:PORT] syntax (default: 127.0.0.1)<br/>      --no-reuse-connection         do not reuse SSH connection via control socket<br/>      --skipsync                    skip syncing local settings and extensions to remote host<br/>      --ssh-flags string            custom SSH flags<br/>      --upload-code-server string   custom code-server binary to upload to the remote host<br/>      --version                     print version information and exit</span></pre><p id="0a06" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">要运行<code class="du ld le lf lg b">sshcode</code>,请传入您的远程服务器的用户名和地址，在本例中是运行在Oracle Cloud上的另一个VM，并可选地指定远程服务器上要打开的项目目录。</p><pre class="li lj lk ll fd lm lg ln lo aw lp bi"><span id="eee6" class="kp iu hw lg b fi lq lr l ls lt">$ sshcode [username]@[IP address] [initial directory to open]</span></pre><p id="80e3" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">去冲杯咖啡或者三杯。安装和同步需要几分钟时间。</p><p id="41b6" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">安装完成后，将会打开一个浏览器窗口，运行VS代码。如果你安装了Chrome，它将在无边框应用模式下打开，这使得它看起来几乎和你桌面上运行的VS代码一样。</p><figure class="li lj lk ll fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mb"><img src="../Images/ffe8e463077d626aa938dd0f91a51e4b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TgMUjVBH9lqNlkv-HoTA2Q.png"/></div></div></figure><p id="6fc9" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">每次连接时，<code class="du ld le lf lg b">sshcode</code>将使用<code class="du ld le lf lg b">rsync</code>将您的本地VS代码设置和扩展传输并同步到远程服务器。正如我上面提到的，第一次连接时，这个操作可能需要一些时间。在后续连接到同一台服务器时，速度会更快。传入<code class="du ld le lf lg b">--skipsync</code>标志来跳过同步。默认情况下，当连接关闭时，远程服务器上的VS代码更改不会同步回您的本地环境。当连接结束时，传递<code class="du ld le lf lg b">-b</code>标志以启用本地同步。如果你使用的是VS代码的替代版本，比如VS Code Insiders，有<a class="ae lh" href="https://github.com/cdr/sshcode#custom-settings-directories" rel="noopener ugc nofollow" target="_blank">选项可以设置自定义目录</a>。</p><h1 id="c08e" class="it iu hw bd iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq bi translated">其他远程开发选项</h1><p id="9471" class="pw-post-body-paragraph jr js hw jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ha bi translated"><a class="ae lh" href="https://cloud.google.com/shell/docs/features#code_editor" rel="noopener ugc nofollow" target="_blank"> Google Cloud Shell代码编辑器</a>是基于浏览器的远程代码编辑器的另一个选项。这个工具目前处于测试阶段，运行的是Eclipse忒伊亚，这是一个用TypeScript实现的IDE框架。通过单击工具栏中的铅笔图标或在云Shell终端中键入<code class="du ld le lf lg b">cloudshell edit</code>来启动代码编辑器。</p><figure class="li lj lk ll fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lz"><img src="../Images/d115960bb988f8685851a2bbe9f07a1f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*t1NgKW8i_5rGhu9fqYBxLQ.png"/></div></div></figure><p id="ec7a" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">类似地，微软Azure包括一个基于<a class="ae lh" href="https://github.com/Microsoft/monaco-editor" rel="noopener ugc nofollow" target="_blank"> Monaco编辑器</a>的<a class="ae lh" href="https://azure.microsoft.com/en-us/features/cloud-shell/" rel="noopener ugc nofollow" target="_blank">文件编辑器</a>，它直接从VS代码源中生成，旨在在浏览器中工作。通过单击工具栏中的<code class="du ld le lf lg b">{}</code>图标或在云外壳终端中键入<code class="du ld le lf lg b">code .</code>来启动编辑器。这两个工具都允许你通过在编辑命令后传递一个文件路径来直接打开一个文件(例如<code class="du ld le lf lg b">cloudshell edit ~/.bashrc</code>)。</p><p id="4727" class="pw-post-body-paragraph jr js hw jt b ju lu jw jx jy lv ka kb kc lw ke kf kg lx ki kj kk ly km kn ko ha bi translated">Google Cloud和Microsoft Azure云外壳代码编辑器使用户能够浏览文件目录以及查看和编辑文件，并且默认情况下每个云外壳实例都提供这些编辑器。</p><h1 id="35f4" class="it iu hw bd iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq bi translated">结论</h1><p id="92a2" class="pw-post-body-paragraph jr js hw jt b ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko ha bi translated">远程开发环境，比如那些由<code class="du ld le lf lg b">code-server</code>和谷歌云和微软Azure云外壳代码编辑器提供的环境，为用户提供了比本地开发环境更多的好处。它们可以从任何地方连接，在您的团队中实现标准化，并可扩展以满足您的性能需求。所有这些都可以通过对您现有的开发流程进行很少或没有改变来完成。</p></div></div>    
</body>
</html>