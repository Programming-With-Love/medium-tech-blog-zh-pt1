<html>
<head>
<title>iOS | Custom Activity Indicator With Image</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">iOS |带图像的自定义活动指示器</h1>
<blockquote>原文：<a href="https://medium.com/globant/ios-custom-activity-indicator-with-image-3326d80e8803?source=collection_archive---------0-----------------------#2021-08-09">https://medium.com/globant/ios-custom-activity-indicator-with-image-3326d80e8803?source=collection_archive---------0-----------------------#2021-08-09</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/cd83fd561d0911be4b17a8c4a326df81.png" data-original-src="https://miro.medium.com/v2/resize:fit:444/1*PJ8mrU8GFq1kTsp6qmra4g.gif"/></div></figure><p id="6aa2" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">活动指示器是一个旋转的轮子，指示任务正在进行中。苹果已经提供了基本的<code class="du jj jk jl jm b"><a class="ae jn" href="https://developer.apple.com/documentation/uikit/uiactivityindicatorview" rel="noopener ugc nofollow" target="_blank">UIActivityIndicatorView</a></code>，但是没有提供图像的外观定制。在这篇文章中，我们将设计一个自定义的活动指示器，其中单个图像将作为纺车动画。在这篇文章中，我们也将使用<code class="du jj jk jl jm b"><a class="ae jn" href="https://developer.apple.com/documentation/uikit/uidynamicitembehavior" rel="noopener ugc nofollow" target="_blank">UIDynamicItemBehaviour</a></code>和<code class="du jj jk jl jm b"><a class="ae jn" href="https://developer.apple.com/documentation/uikit/uidynamicanimator" rel="noopener ugc nofollow" target="_blank">UIDynamicAnimator</a></code>来给出纺车的效果。</p><p id="933a" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">让我们开始设计我们自己的牛逼且方便使用的自定义活动指示器:</p><h1 id="476d" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">设置活动指示器</strong></h1><ol class=""><li id="debc" class="km kn hh in b io ko is kp iw kq ja kr je ks ji kt ku kv kw bi translated">声明并初始化<code class="du jj jk jl jm b">UIImageView</code>实例，用你想要的图像作为旋转器。</li></ol><pre class="kx ky kz la fd lb jm lc ld aw le bi"><span id="e3db" class="lf jp hh jm b fi lg lh l li lj">let theImage = UIImage(named: "activityLoader")<br/>let imageView = UIImageView(image: theImage)<br/>imageView.frame = CGRect(x: self.center.x — 20, y: self.center.y — 20, width: 40, height: 40)</span></pre><blockquote class="lk ll lm"><p id="37a0" class="il im ln in b io ip iq ir is it iu iv lo ix iy iz lp jb jc jd lq jf jg jh ji ha bi translated"><strong class="in hi">注意</strong>:这里self是一个名为MRActivityIndicator的<code class="du jj jk jl jm b">UIVIew</code>类实例，activityLoader是一个名为的图像，它将充当spinner。</p></blockquote><p id="1d27" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">2.为图像视图上的动态动画添加动态行为。</p><pre class="kx ky kz la fd lb jm lc ld aw le bi"><span id="f940" class="lf jp hh jm b fi lg lh l li lj">let spinnerBehavior = UIDynamicItemBehavior(items: [imageView])<br/>let animator = UIDynamicAnimator(referenceView: self)</span></pre><h1 id="0471" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated"><strong class="ak">显示活动指示器</strong></h1><ol class=""><li id="aeb8" class="km kn hh in b io ko is kp iw kq ja kr je ks ji kt ku kv kw bi translated">将imageView添加到屏幕上并开始播放动画。</li></ol><pre class="kx ky kz la fd lb jm lc ld aw le bi"><span id="330d" class="lf jp hh jm b fi lg lh l li lj">func showLoadingActivity() {<br/>   addSubview(imageView)<br/>   startAnimation()<br/>   UIApplication.shared.windows.first?.addSubview(self)<br/>}</span></pre><blockquote class="lk ll lm"><p id="b8aa" class="il im ln in b io ip iq ir is it iu iv lo ix iy iz lp jb jc jd lq jf jg jh ji ha bi translated"><strong class="in hi">注意</strong>:如果您想在显示微调器时忽略用户的交互，请将其添加到上面的If-block<br/>T5】</p></blockquote><p id="2aee" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">2.在startAnimation()中，如果animator不包含spinnerBehavior，则为imageView添加角速度值(此处为5.0)。一旦spinnerBehavior被添加到animator中，imageView就开始旋转，其行为就像纺车一样。</p><pre class="kx ky kz la fd lb jm lc ld aw le bi"><span id="8550" class="lf jp hh jm b fi lg lh l li lj">func startAnimation() {<br/>   if !animator.behaviors.contains(spinnerBehavior) {<br/>      spinnerBehavior.addAngularVelocity(5.0, for: imageView)<br/>      animator.addBehavior(spinnerBehavior)<br/>   }<br/>}</span></pre><blockquote class="lk ll lm"><p id="2081" class="il im ln in b io ip iq ir is it iu iv lo ix iy iz lp jb jc jd lq jf jg jh ji ha bi translated"><strong class="in hi">注</strong>:我们可以增加速度以获得更快的旋转效果。</p></blockquote><h1 id="82f3" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">隐藏活动指示器</h1><p id="453c" class="pw-post-body-paragraph il im hh in b io ko iq ir is kp iu iv iw lr iy iz ja ls jc jd je lt jg jh ji ha bi translated">要停止活动指示器，我们将遵循以下步骤:</p><pre class="kx ky kz la fd lb jm lc ld aw le bi"><span id="1d14" class="lf jp hh jm b fi lg lh l li lj">animator.removeAllBehaviors()<br/>imageView.removeFromSuperview()<br/>imageView = nil<br/>self.removeFromSuperview()</span></pre><blockquote class="lk ll lm"><p id="5d8b" class="il im ln in b io ip iq ir is it iu iv lo ix iy iz lp jb jc jd lq jf jg jh ji ha bi translated"><strong class="in hi">注意</strong>:如果你禁用了用户交互，那么请添加下面的代码来启用它。<br/> <code class="du jj jk jl jm b">UIApplication.shared.endIgnoringInteractionEvents()</code></p></blockquote><p id="d8f9" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">请查找活动指示器的完整代码片段，我们在其中使用了UIImageView并对其进行了定制，使其像纺车一样运行。</p><figure class="kx ky kz la fd ii"><div class="bz dy l di"><div class="lu lv l"/></div></figure><h1 id="9758" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">MRActivityIndicator的用法</h1><ol class=""><li id="85c9" class="km kn hh in b io ko is kp iw kq ja kr je ks ji kt ku kv kw bi translated">要显示它，请使用<br/> <code class="du jj jk jl jm b">MRActivityIndicator.shared.show()</code></li><li id="b775" class="km kn hh in b io lw is lx iw ly ja lz je ma ji kt ku kv kw bi translated">要隐藏它，请使用<br/> <code class="du jj jk jl jm b">MRActivityIndicator.shared.hide()</code></li></ol><blockquote class="lk ll lm"><p id="c4df" class="il im ln in b io ip iq ir is it iu iv lo ix iy iz lp jb jc jd lq jf jg jh ji ha bi translated">如果你喜欢这篇文章，请用掌声和评论来欣赏它。这真的会鼓励我多写！！！！</p></blockquote></div></div>    
</body>
</html>