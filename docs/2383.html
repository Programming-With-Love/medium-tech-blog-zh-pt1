<html>
<head>
<title>Progressive Web Apps with PokeAPI and Deploy using Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用PokeAPI和Firebase部署渐进式Web应用程序</h1>
<blockquote>原文：<a href="https://medium.easyread.co/progressive-web-apps-with-pokeapi-and-deploy-using-firebase-9e6aeb9e3abd?source=collection_archive---------2-----------------------#2019-03-12">https://medium.easyread.co/progressive-web-apps-with-pokeapi-and-deploy-using-firebase-9e6aeb9e3abd?source=collection_archive---------2-----------------------#2019-03-12</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><div class=""><h2 id="89fc" class="pw-subtitle-paragraph jn ip iq bd b jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke dk translated">如何创建一个简单的渐进式Web应用程序并部署到Firebase？</h2></div><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi kf"><img src="../Images/a666decd7ac08c3a6e8149d1149466cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aBObP5jRncclNJk2Z9RUYg.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk"><a class="ae kv" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQN9smacZhSdYRvNjOJG8orpNdrAVkVxSPNL8VYTCMcO5LRmQwB" rel="noopener ugc nofollow" target="_blank">https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQN9smacZhSdYRvNjOJG8orpNdrAVkVxSPNL8VYTCMcO5LRmQwB</a></figcaption></figure><blockquote class="kw kx ky"><p id="42a4" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">大家好，现在我想分享一下我在完成建造PWA课程后的收获。实际上，已经有大量文章介绍了PWA。但是我仍然写这个，因为我对它感到兴奋。我写这篇文章是基于我的经验，所以如果这篇文章有什么问题请纠正我😅</p></blockquote><p id="3a5f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们首先要知道的是<strong class="lc ir">“什么是PWA”</strong>。PWA是一个web应用程序，结合了现代浏览器的功能和移动体验。使用PWA，有很多优点，例如在离线模式下运行应用程序，直接将应用程序添加到屏幕上，通过URL访问，等等。虽然PWA具有所有的优点，但它也有一些缺点，比如还不支持所有的浏览器，不能通过商店应用程序获得，等等。但是，凭借PWA提供的优势，我们没有办法不尝试它。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><h1 id="29c3" class="mg mh iq bd mi mj mk ml mm mn mo mp mq jw mr jx ms jz mt ka mu kc mv kd mw mx bi translated">当我们构建PWA时，我们必须使用一些组件。</h1><h2 id="89ab" class="my mh iq bd mi mz na dn mm nb nc dp mq lw nd ne ms lx nf ng mu ly nh ni mw nj bi translated">服务行业人员</h2><p id="1286" class="pw-post-body-paragraph kz la iq lc b ld nk jr lf lg nl ju li lw nm ll lm lx nn lp lq ly no lt lu lv ij bi translated">Service worker是一个在后台应用程序中运行的脚本，与网页分离，允许我们使用一些不需要用户交互的功能。当用户向我们的网站发出请求时，服务人员将充当代理，并决定该请求是继续发送到服务器还是使用之前存储的数据(点击此处了解更多<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API/Using_Service_Workers" rel="noopener ugc nofollow" target="_blank"/>)。</p><h2 id="dca0" class="my mh iq bd mi mz na dn mm nb nc dp mq lw nd ne ms lx nf ng mu ly nh ni mw nj bi translated">隐藏物</h2><p id="ef97" class="pw-post-body-paragraph kz la iq lc b ld nk jr lf lg nl ju li lw nm ll lm lx nn lp lq ly no lt lu lv ij bi translated">缓存是当我们访问某个页面时，浏览器用来节省一些资源的本地存储。如果我们第二次访问该页面，该页面将从缓存中加载资源。</p><h2 id="f2d2" class="my mh iq bd mi mz na dn mm nb nc dp mq lw nd ne ms lx nf ng mu ly nh ni mw nj bi translated">Web应用程序清单</h2><p id="d24f" class="pw-post-body-paragraph kz la iq lc b ld nk jr lf lg nl ju li lw nm ll lm lx nn lp lq ly no lt lu lv ij bi translated">Web应用程序清单是一个JSON，它包含关于我们应用程序的元数据，并告诉浏览器应用程序应该如何运行。(此处阅读更多<a class="ae kv" href="https://developers.google.com/web/fundamentals/web-app-manifest/?hl=en" rel="noopener ugc nofollow" target="_blank"/>)。</p><h2 id="8751" class="my mh iq bd mi mz na dn mm nb nc dp mq lw nd ne ms lx nf ng mu ly nh ni mw nj bi translated"><strong class="ak">获取API </strong></h2><p id="bf8b" class="pw-post-body-paragraph kz la iq lc b ld nk jr lf lg nl ju li lw nm ll lm lx nn lp lq ly no lt lu lv ij bi translated">Fetch API是一个允许我们通过网络访问和操作资源的接口。(此处阅读更多<a class="ae kv" href="https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API/Using_Fetch" rel="noopener ugc nofollow" target="_blank">)。</a></p><h2 id="781c" class="my mh iq bd mi mz na dn mm nb nc dp mq lw nd ne ms lx nf ng mu ly nh ni mw nj bi translated"><strong class="ak">推送通知</strong></h2><p id="30b0" class="pw-post-body-paragraph kz la iq lc b ld nk jr lf lg nl ju li lw nm ll lm lx nn lp lq ly no lt lu lv ij bi translated">推送通知是一种通知用户重要事件的方式，即使他们此刻没有使用应用程序。(此处阅读更多<a class="ae kv" href="https://developers.google.com/web/ilt/pwa/introduction-to-push-notifications" rel="noopener ugc nofollow" target="_blank"/>)</p><h2 id="c855" class="my mh iq bd mi mz na dn mm nb nc dp mq lw nd ne ms lx nf ng mu ly nh ni mw nj bi translated">应用程序外壳</h2><p id="85e9" class="pw-post-body-paragraph kz la iq lc b ld nk jr lf lg nl ju li lw nm ll lm lx nn lp lq ly no lt lu lv ij bi translated">应用程序外壳是一个用户界面组件，将像标题，侧栏，页脚使用。它将首先缓存，并在每次用户访问时显示相同的内容(一致性)。因为我们将应用程序外壳保存在缓存中，所以不需要向服务器请求它。(此处阅读更多<a class="ae kv" href="https://developers.google.com/web/fundamentals/architecture/app-shell?hl=en" rel="noopener ugc nofollow" target="_blank"/>)。</p><h2 id="44e4" class="my mh iq bd mi mz na dn mm nb nc dp mq lw nd ne ms lx nf ng mu ly nh ni mw nj bi translated">索引b</h2><p id="09fe" class="pw-post-body-paragraph kz la iq lc b ld nk jr lf lg nl ju li lw nm ll lm lx nn lp lq ly no lt lu lv ij bi translated">IndexedDB是我们浏览器内置的数据库。IndexedDB是NoSQL，这意味着我们不能使用SQL语法进行查询。(此处阅读更多<a class="ae kv" href="https://developers.google.com/web/ilt/pwa/working-with-indexeddb" rel="noopener ugc nofollow" target="_blank">)。</a></p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="7052" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">在我们尝试制作自己的PWA之前，我们需要准备:</p><ul class=""><li id="668a" class="np nq iq lc b ld le lg lh lw nr lx ns ly nt lv nu nv nw nx bi translated">版本≥ 52的Chrome浏览器</li><li id="0c15" class="np nq iq lc b ld ny lg nz lw oa lx ob ly oc lv nu nv nw nx bi translated"><a class="ae kv" href="https://chrome.google.com/webstore/detail/web-server-for-chrome/ofhbbkphhbklhfoeikjpcbhemlocgigb?hl=id" rel="noopener ugc nofollow" target="_blank">Chrome网络服务器</a></li><li id="e305" class="np nq iq lc b ld ny lg nz lw oa lx ob ly oc lv nu nv nw nx bi translated">编辑器(<a class="ae kv" href="https://www.jetbrains.com/webstorm/" rel="noopener ugc nofollow" target="_blank"> WebStrom </a>，<a class="ae kv" href="https://code.visualstudio.com/" rel="noopener ugc nofollow" target="_blank"> VSCode </a>，<a class="ae kv" href="https://www.sublimetext.com/" rel="noopener ugc nofollow" target="_blank"> Sublime </a>)</li><li id="e3c8" class="np nq iq lc b ld ny lg nz lw oa lx ob ly oc lv nu nv nw nx bi translated">HTML、CSS和Javascript的基础知识</li></ul></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="d1e7" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">现在，让我们构建自己的PWA。我们将尝试构建一个关于口袋妖怪的简单应用程序。我们将为这个项目使用口袋妖怪API(<a class="ae kv" href="https://pokeapi.co/" rel="noopener ugc nofollow" target="_blank">PokeAPI</a>)。我们也将使用物化CSS(在这里下载<a class="ae kv" href="https://github.com/Dogfalo/materialize/releases/download/1.0.0/materialize-v1.0.0.zip" rel="noopener ugc nofollow" target="_blank"/>)。如果你愿意，你可以使用另一个CSS框架。提取。zip文件到您的项目文件夹中。您的项目文件夹应该如下所示👇</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi od"><img src="../Images/4aac9e0ecebc3f9fa4ad504aa06ecd54.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*brLXv8BlXiwJ1cgNR_uqcQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Project structure</figcaption></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="b096" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">第一步，在根文件夹中创建<code class="fe oe of og oh b">index.html</code>。创建HTML结构，并用以下内容填充<code class="fe oe of og oh b">&lt;body&gt;</code>标记:</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="af0a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">之后，在<code class="fe oe of og oh b">&lt;/body&gt;</code>标签之前，加上这个👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="cc6b" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们在这里做的是，检查对象导航器是否已经存在于我们的浏览器中。如果导航器不存在，这意味着我们的浏览器还不支持。然后，我们使用方法<code class="fe oe of og oh b">navigator.serviceWorker.register().</code>注册我们的<code class="fe oe of og oh b">service-worker.js</code>。现在，让我们创建一个文件<code class="fe oe of og oh b">service-worker.js</code>,并用这个代码填充它👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="3d3f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们在这里所做的是，首先我们用一个变量<code class="fe oe of og oh b">CACHE_NAME.</code>给缓存命名，然后，我们在<code class="fe oe of og oh b">urlsToCache.</code>中添加我们想要缓存的文件，之后，我们为<code class="fe oe of og oh b">install</code>添加一个事件监听器，当服务工作者注册成功时将调用它。我们先用<code class="fe oe of og oh b">caches.open()</code>打开缓存，用<code class="fe oe of og oh b">cache.addAll().</code>将我们的<code class="fe oe of og oh b">urlsToCache</code>文件添加到缓存中，我们可以在<strong class="lc ir">缓存<em class="lb"> </em> </strong>中检查我们的缓存是否成功，在<strong class="lc ir"> DevTools </strong>标签<strong class="lc ir">应用</strong>中。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ok"><img src="../Images/1b3725fba512c3d20867ab7e146d24a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s9HiT0ytgQDbMMnMU8iPuA.png"/></div></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Our asset already in cache.</figcaption></figure><p id="0485" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">接下来，让我们添加这段代码来使用缓存中的资产。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="8c10" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们在这里做的是，首先，我们检查请求是否与缓存中的资产相等。如果请求匹配，它将从缓存中返回资产。如果不是，它将向服务器请求资产。然后，让我们的应用程序能够<strong class="lc ir">添加到主屏幕</strong>。将这段代码添加到我们的<code class="fe oe of og oh b">&lt;head&gt;</code>元素中👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="97f0" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">然后，在根文件夹中创建一个文件<code class="fe oe of og oh b">manifest.json</code>,并添加以下代码👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="93c0" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">为了确保我们的清单已经正确设置，请转到Chrome DevTools的<strong class="lc ir">应用程序</strong>面板上的<strong class="lc ir">清单</strong>选项卡。毕竟，我们可以通过使用Chrome的Web服务器来运行我们的应用程序，并转到URL。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="0192" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们已经制作了所有需要的组件，现在，让我们添加数据。正如我之前提到的，我们将使用PokeAPI。可以先查一下试试。<br/>我们要做的第一件事是在<code class="fe oe of og oh b">js</code>文件夹中创建一个文件<code class="fe oe of og oh b">api.js</code>。当我们的应用程序与PokeAPI交互时，这个文件将进行处理。在<code class="fe oe of og oh b">api.js</code>中添加这段代码👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="a114" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们在这里做的是，首先，我们创建包含API URL的变量<code class="fe oe of og oh b">base_url</code>。然后，我们创建一个函数<code class="fe oe of og oh b">getAllPokemon()</code>从API中获取pokemon的所有数据。在这个函数中，我们还使用<code class="fe oe of og oh b">innerHTML</code>将数据呈现到HTML中，并将响应保存到缓存中。之后，让我们通过添加这段代码来调用<code class="fe oe of og oh b">index.html</code>中的函数👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="fa7e" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">不要忘记用<code class="fe oe of og oh b">&lt;script src="js/api.js"&gt;&lt;/script&gt;</code>调用<code class="fe oe of og oh b">api.js</code>并将文件添加到<code class="fe oe of og oh b">service-worker.js</code>。</p><p id="853c" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">当你运行应用程序时，你应该会得到如下结果。酷吧lol。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ol"><img src="../Images/913c2ea735a9265dfa5d635ed33c49d4.png" data-original-src="https://miro.medium.com/v2/resize:fit:804/format:webp/1*kvyO6v2BDWrOaM_UoX0mEQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">List of Pokemon</figcaption></figure><p id="4398" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">然后，让我们在根文件夹中创建<code class="fe oe of og oh b">detailPokemon.html</code>，以显示口袋妖怪的细节。你可以复制<code class="fe oe of og oh b">index.html</code>并用这个代码修改<code class="fe oe of og oh b">&lt;script&gt;</code>里面的代码👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="7b7f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">现在，让我们用下面的代码创建<code class="fe oe of og oh b">api.js</code>中的函数👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="b465" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">这个函数将从API得到一个关于口袋妖怪名称的响应，我们将在HTML中显示数据。到这里，我们应该可以看到<code class="fe oe of og oh b">index.html</code>中所有的口袋妖怪列表，并且可以看到<code class="fe oe of og oh b">detailPokemon.html</code>中每个口袋妖怪的细节，如下图所示。你可以根据自己的意愿定制细节，做得比我的更好(我不擅长设计😅).</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi om"><img src="../Images/a82ce8feb143441a61133d19a97484be.png" data-original-src="https://miro.medium.com/v2/resize:fit:618/format:webp/1*1r57IfZGoMz1a7KHojy3ag.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Detail of Pokemon</figcaption></figure></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="d1fd" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">现在，让我们做一些改进😆。我们要做的是，我们将为我们最喜欢的口袋妖怪制作一个页面，并能够使用通知。我们会用IndexedDB来拯救我们最喜欢的口袋妖怪。</p><p id="d15d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">首先，我们在这里下载库<a class="ae kv" href="https://github.com/jakearchibald/idb/archive/v2.1.3.zip" rel="noopener ugc nofollow" target="_blank">。提取文件，并将<code class="fe oe of og oh b">idb.js</code>文件复制到<code class="fe oe of og oh b">js</code>文件夹中。不要忘记将它添加到<code class="fe oe of og oh b">urlsToCache</code>变量内的<code class="fe oe of og oh b">service-worker.js</code>中，以首先缓存该文件。不要忘记在<code class="fe oe of og oh b">&lt;/body&gt;</code>标签前用<code class="fe oe of og oh b">&lt;script src="js/idb.js"&gt;&lt;/script&gt;</code>调用<code class="fe oe of og oh b">idb.js</code>。现在，让我们在<code class="fe oe of og oh b">detailPokemon.html</code>中添加fab来触发功能，并将口袋妖怪保存到我们的收藏夹列表中。在按钮中，我们添加了<code class="fe oe of og oh b">onclick</code>事件，并调用<code class="fe oe of og oh b">addPokemon()</code>来触发保存数据到IndexedDB的函数。</a></p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="38be" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">让我们在<code class="fe oe of og oh b">js</code>文件夹中创建一个文件<code class="fe oe of og oh b">db.js</code>，不要忘记像以前一样在<code class="fe oe of og oh b">sevice-worker.js</code>中添加该文件。这个文件将处理我们的数据库操作。首先，添加如下代码👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="9549" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们在这里做的是，首先，我们使用<code class="fe oe of og oh b">idb.open()</code>返回一个包含数据库对象的承诺，我们将使用它与IndexedDB进行交互。如果数据库尚不存在，IndexedDB将创建一个新的数据库。我们将使用<code class="fe oe of og oh b">id</code>作为使用<code class="fe oe of og oh b">keypath</code>的主键。之后，在<code class="fe oe of og oh b">db.js</code>中为<code class="fe oe of og oh b">addPokemon()</code>功能添加如下代码👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="800c" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们在这里做的是，在从API获取数据后，我们将使用事务把它保存到数据库中。如果交易成功，它将重定向到<code class="fe oe of og oh b">fav-pokemon.html</code>是的，我们现在没有<code class="fe oe of og oh b">fav-pokemon.html</code>，但我们以后会添加它。我们先完成函数。</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="9669" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">现在，我们能够将口袋妖怪存储到数据库中我们最喜欢的列表中。让我们用这段代码创建另一个函数来获取所有我们喜欢的口袋妖怪👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="cf62" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">使用<code class="fe oe of og oh b">store.getAll()</code>函数，我们将从数据库中获取所有数据，并使用<code class="fe oe of og oh b">innerHTML</code>将其显示在HTML中。接下来，我们将用这段代码创建<code class="fe oe of og oh b">deletePokemon()</code>函数👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="afa7" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">在上面的代码中，我们将能够使用<code class="fe oe of og oh b">id</code>作为参数从数据库中删除口袋妖怪。如果交易成功，它会将我们重定向到<code class="fe oe of og oh b">index.html</code>。现在，我们的<code class="fe oe of og oh b">db.js</code>已经准备好了，让我们在根文件夹中创建<code class="fe oe of og oh b">fav-pokemon.html</code>，并调用<code class="fe oe of og oh b">getAllFavPokemon()</code>函数。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="d475" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">接下来，让我们将<code class="fe oe of og oh b">fav-pokemon.html</code>链接到我们的应用程序，如下所示👇</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="615d" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">这就是了😙我们的应用应该能够:</p><ol class=""><li id="84ad" class="np nq iq lc b ld le lg lh lw nr lx ns ly nt lv on nv nw nx bi translated">显示API中的所有口袋妖怪</li><li id="a7dd" class="np nq iq lc b ld ny lg nz lw oa lx ob ly oc lv on nv nw nx bi translated">前往详细口袋妖怪</li><li id="8c84" class="np nq iq lc b ld ny lg nz lw oa lx ob ly oc lv on nv nw nx bi translated">将口袋妖怪添加到收藏夹列表</li><li id="e6cb" class="np nq iq lc b ld ny lg nz lw oa lx ob ly oc lv on nv nw nx bi translated">从收藏列表中删除口袋妖怪</li></ol></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="db37" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">最后，让我们做一些通知，当我们把口袋妖怪添加到我们最喜欢的列表，也当我们删除它。首先，在<code class="fe oe of og oh b">index.html</code>中添加这段代码</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="df39" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">这段代码将检查浏览器是否支持通知。如果通知允许，我们将能够从这个应用程序接收通知。最后，将这段代码添加到<code class="fe oe of og oh b">addPokemon()</code>和<code class="fe oe of og oh b">deletePokemon()</code>函数内的<code class="fe oe of og oh b">db.js</code>中。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="db76" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">addPokemon()的通知</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="9134" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">删除口袋妖怪的通知()</p></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><p id="caf5" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">酷吧？现在，我们将使用firebase部署我们的应用程序🤩首先，我们的环境需要<code class="fe oe of og oh b">npm</code>。(点击查看<a class="ae kv" href="https://docs.npmjs.com/downloading-and-installing-node-js-and-npm" rel="noopener ugc nofollow" target="_blank">)。然后，让我们从在终端中键入这个命令开始。</a></p><pre class="kg kh ki kj gt oo oh op oq aw or bi"><span id="274b" class="my mh iq oh b gy os ot l ou ov">$ npm install -g firebase-tools</span></pre><p id="bad1" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">接下来，让我们在<a class="ae kv" href="https://console.firebase.google.com/" rel="noopener ugc nofollow" target="_blank">https://console.firebase.google.com/</a><br/>中创建我们的firebase账户，然后按照步骤操作，直到弹出<strong class="lc ir">你的新项目准备好了</strong>。打开你的终端，输入</p><pre class="kg kh ki kj gt oo oh op oq aw or bi"><span id="e926" class="my mh iq oh b gy os ot l ou ov">$ firebase login.</span></pre><p id="6bfd" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">通过这个命令，你将得到窗口浏览器来验证你的谷歌帐户。如果登录过程成功，您将看到如下成功消息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi ow"><img src="../Images/9543ddcf47755f4632883845d21c7215.png" data-original-src="https://miro.medium.com/v2/resize:fit:778/format:webp/1*kpy6gAB2Cnm2ee_fl8FxEQ.png"/></div><figcaption class="kr ks gj gh gi kt ku bd b be z dk">Login firebase success</figcaption></figure><p id="f546" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">现在，我们可以转到项目目录并键入</p><pre class="kg kh ki kj gt oo oh op oq aw or bi"><span id="216c" class="my mh iq oh b gy os ot l ou ov">$ firebase init</span></pre><p id="d042" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">它将向我们显示如下一些选项。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div role="button" tabindex="0" class="kl km di kn bf ko"><div class="gh gi ox"><img src="../Images/0466e590f5967605ca18cdaadbf71d8d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cikimzFodMIGrxz_hTW5lA.png"/></div></div></figure><p id="adbb" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">去选择<strong class="lc ir">托管:配置和部署Firebase托管站点</strong>。<br/>然后我们会得到如下的选项。如果您还没有在firebase中创建项目，选择<strong class="lc ir">【创建新项目】，</strong>并创建项目。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oy"><img src="../Images/07a894342713b99601fc53871057e20c.png" data-original-src="https://miro.medium.com/v2/resize:fit:858/format:webp/1*StWY1iD0vyrO6-WSjyAyMw.png"/></div></figure><p id="6fab" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">之后，你会得到一个如下的问题，第一个问题只需回车，第二个问题输入<strong class="lc ir"> N </strong>。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi oz"><img src="../Images/db02b055bccb592377adc5c2f35ef921.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*D0MQT9SNIVmP5dioY9DG5g.png"/></div></figure><p id="fb3f" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">然后，它会生成文件<code class="fe oe of og oh b">firebase.json</code>和<code class="fe oe of og oh b">.firebashrc</code>。如果成功，您会收到这条消息。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pa"><img src="../Images/61835f1908cec2c6d6588118c1090ddf.png" data-original-src="https://miro.medium.com/v2/resize:fit:876/format:webp/1*SmbSCFy2V7jvg1UJynIpFw.png"/></div></figure><p id="2e98" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">然后，我们可以使用命令:</p><pre class="kg kh ki kj gt oo oh op oq aw or bi"><span id="5bdc" class="my mh iq oh b gy os ot l ou ov">$ firebase use --add</span></pre><p id="fde4" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">该命令将我们的项目添加到firebase，并在firebase中选择目标项目。</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pb"><img src="../Images/2ca6b7d44ca946b86c9c68f898d7c98f.png" data-original-src="https://miro.medium.com/v2/resize:fit:976/format:webp/1*EcYRqXc8dRFW1KbEBisoXg.png"/></div></figure><p id="1d7a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">您将被要求为项目创建一个别名，您可以随意填写。我用<code class="fe oe of og oh b">pokemonpwa</code>制作我自己的</p><figure class="kg kh ki kj gt kk gh gi paragraph-image"><div class="gh gi pc"><img src="../Images/96d11acb21d55a06a28f003e9c55a525.png" data-original-src="https://miro.medium.com/v2/resize:fit:1078/format:webp/1*fcoOUiMR7SboZyi6OuLsXQ.png"/></div></figure><p id="57eb" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">在我们部署我们的应用程序之前，我们需要改变我们的<code class="fe oe of og oh b">firebase.json</code>中的一些东西，应该是这样的。</p><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="oi oj l"/></div></figure><p id="7754" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">我们在这里所做的是，当应用程序启动时，应用程序将前往<code class="fe oe of og oh b">index.html</code>。</p><p id="fe6a" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">对于最后一步，只需键入</p><pre class="kg kh ki kj gt oo oh op oq aw or bi"><span id="7338" class="my mh iq oh b gy os ot l ou ov">$ firebase deploy</span></pre><p id="4574" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">然后嘣💥💥💥。我们的项目已经部署。我们可以通过<strong class="lc ir">托管URL </strong>访问它。</p><p id="b864" class="pw-post-body-paragraph kz la iq lc b ld le jr lf lg lh ju li lw lk ll lm lx lo lp lq ly ls lt lu lv ij bi translated">亚什🎉 🎉 🎉这是我们的应用程序。希望这篇文章对你有帮助。如果你有意见或纠正，请告诉我。另一篇文章再见👋</p><blockquote class="kw kx ky"><p id="8c5d" class="kz la lb lc b ld le jr lf lg lh ju li lj lk ll lm ln lo lp lq lr ls lt lu lv ij bi translated">你可以在我的回购<a class="ae kv" href="https://github.com/mariesto/PokemonPWA" rel="noopener ugc nofollow" target="_blank">这里</a>访问完整的代码</p></blockquote></div><div class="ab cl lz ma hu mb" role="separator"><span class="mc bw bk md me mf"/><span class="mc bw bk md me mf"/><span class="mc bw bk md me"/></div><div class="ij ik il im in"><figure class="kg kh ki kj gt kk"><div class="bz fp l di"><div class="pd oj l"/></div></figure></div></div>    
</body>
</html>