# 从 v1 项目过渡到目录 API

> 原文：<https://medium.com/square-corner-blog/transitioning-from-v1-items-to-catalog-apis-57d4badb012?source=collection_archive---------7----------------------->

## 项目管理可能是任何应用程序的重要部分。如果您要从`v1 items`API 迁移到新的目录端点，您需要了解以下内容。

> 注意，我们已经行动了！如果您想继续了解 Square 的最新技术内容，请访问我们的新家[https://developer.squareup.com/blog](https://developer.squareup.com/blog)

今年早些时候， [Square 发布了新的目录端点](/square-corner-blog/introducing-the-new-square-catalog-api-3e2ebf254967)来帮助以一种更加简化和可扩展的方式管理您的项目。您可能熟悉 v1 端点`create`、`retrieve`、`update`和`delete` (CRUD)对项目及其相关变化、修改量列表、修改量选项、折扣、费用等的操作。目录端点将所有这些不同的实体精简到一个单一的`CatalogObject`类型中，新的端点用于一次对多个项目进行批处理操作。因此，跨多个位置管理项目变得更加容易。在这篇文章的剩余部分，我将回顾一些操作的不同之处。

# 创建项目和变体

以前，您只能使用端点来创建新物件、变体、修改量等。通常，您必须使用它们来创建一个新项目，通过复杂的请求链来确保所有内容都正确关联。为您帐户中的所有项目增加这样的工作流程可以快速地将“导入您的项目”转变为在您连续创建新项目、变化、折扣和修改量时等待大量请求完成。

有了目录端点，该工作流被简化为一个端点，`POST /v2/catalog/object,`或 upsert 目录对象。虽然这乍一看似乎很复杂，但是 catalog 对象非常强大，通过向同一个请求添加多个对象类型，可以简化其他调用的数量。现在，您可以并行创建您的项目及其变体、选项和修改器，同时利用`batch`端点选项进行大规模操作。

让我们看看创建一个新项目和几个变体所需的代码。

## 使用 v1 项端点创建项和变体

## 使用 v2 目录端点创建项目和变体

# 正在检索项目

这是目录端点可以发挥重要作用的另一个领域，尤其是在管理多个位置的项目时。

## 检索带有 v1 项端点的项和变体

## 检索带有 v1 项端点的项和变体

乍一看，这两个片段看起来很相似，但是这些微小的差异会对管理真实世界的示例的容易程度产生很大的影响。首先，您不需要一个位置来检索您的项目，因为项目不再需要局限于单独的位置。此外，您可以选择使用`$include_related_objects`参数请求所有相关的对象，其中包括所有相关的类别、税和适用于该项目的修改量列表。对 v1 项的端点进行相同的操作将需要您为想要检索的每个不同的属性调用特定的端点。

这仅仅是在 v1 items 端点上使用新的[目录 API](https://docs.connect.squareup.com/api/connect/v2#navsection-catalog)的好处的一个尝试，所以如果你还没有进行转换，试试看它会如何简化你的一些代码。

Square 现在也在为我们的开发者平台招聘更多的人！去 Square.com/careers 看看，看看是否有你感兴趣的机会。来和我们一起工作吧:)。