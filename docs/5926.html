<html>
<head>
<title>Oracle Exadata Cloud Service Long Term Database Backup Retention and Replicate Backups Across Regions</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle数据库云服务器云服务长期数据库备份保留和跨区域复制备份</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/retain-database-backups-forever-and-replicate-backups-cross-region-on-oracle-exadata-database-af0fcc10c22d?source=collection_archive---------0-----------------------#2022-06-18">https://medium.com/oracledevs/retain-database-backups-forever-and-replicate-backups-cross-region-on-oracle-exadata-database-af0fcc10c22d?source=collection_archive---------0-----------------------#2022-06-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="630f" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">Oracle云基础架构解决方案可永久保留备份，并将Oracle数据库备份跨区域归档到客户管理的存储桶中。</h2></div><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es iw"><img src="../Images/0cef43b1016ee3fc3b4f98ad6de28dc6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*dk4cWaalVYDSpueoB-YEaQ.png"/></div></div></figure><h2 id="cfd8" class="ji jj hh bd jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf bi translated">介绍</h2><p id="ceb9" class="pw-post-body-paragraph kg kh hh ki b kj kk ii kl km kn il ko jt kp kq kr jx ks kt ku kb kv kw kx ky ha bi translated">由于所在行业的各种法规遵从性要求，我们的许多客户都要求将其Oracle数据库备份跨区域存储在Oracle云基础架构(OCI)上并进行长期保留。企业客户向我提出的最常见的问题是:我如何才能将我的备份在OCI上存档七年或十年，以满足监管机构的要求？在本文中，我们将探讨如何在OCI数据库云服务器云服务上实现这一点</p><p id="3d0f" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">目前，数据库云服务器云服务(ExaCS)上默认提供的自动备份最多限于60天，并且不支持跨区域备份。自动备份和手动备份都存储在您无法直接访问的Oracle托管存储桶中。那么，我们如何在您自己的存储桶中进行归档备份，然后跨区域复制这些备份呢？</p><p id="c500" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">在本文中，我们将向您展示如何将数据库云服务器上的按需数据库备份转移到Oracle对象存储上的客户托管存储区，并跨区域复制备份数据。</p><h1 id="df6d" class="le jj hh bd jk lf lg lh jo li lj lk js in ll io jw iq lm ir ka it ln iu ke lo bi translated">解决办法</h1><p id="05da" class="pw-post-body-paragraph kg kh hh ki b kj kk ii kl km kn il ko jt kp kq kr jx ks kt ku kb kv kw kx ky ha bi translated">与最多只能保留60天的自动备份不同，数据库云服务器云服务提供了“永久保留”的归档备份功能。您可以使用OCI控制台或dbaascli实用程序创建这些按需备份。我们将使用dbaascli创建长期备份，然后使用MV2BUCKET实用程序将它们上传到客户管理的存储区，然后将该存储区复制到另一个区域。</p><p id="5044" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated"><strong class="ki hi">该解决方案由以下组件实施</strong></p><ol class=""><li id="2edb" class="lp lq hh ki b kj kz km la jt lr jx ls kb lt ky lu lv lw lx bi translated">MV2BUCKET实用程序，可用于将备份从Oracle管理的存储桶复制到您自己的存储桶</li><li id="beab" class="lp lq hh ki b kj ly km lz jt ma jx mb kb mc ky lu lv lw lx bi translated">在ExaCS虚拟机节点上验证<a class="ae md" href="https://support.oracle.com/epmos/faces/SearchDocDisplay?_afrLoop=524275329186190&amp;_afrWindowMode=0&amp;_adf.ctrl-state=1czlo73u8b_4#aref_section323" rel="noopener ugc nofollow" target="_blank"> MV2BUCKET </a>的OCI-CLI命令行实用程序</li><li id="8425" class="lp lq hh ki b kj ly km lz jt ma jx mb kb mc ky lu lv lw lx bi translated">文件存储服务，用于在本地数据库云服务器节点上暂存备份</li><li id="6856" class="lp lq hh ki b kj ly km lz jt ma jx mb kb mc ky lu lv lw lx bi translated">用于存储备份的Oracle对象存储</li><li id="d99b" class="lp lq hh ki b kj ly km lz jt ma jx mb kb mc ky lu lv lw lx bi translated">最后，将主区域中的对象存储桶跨区域复制到目标区域，以存储备份</li><li id="f88a" class="lp lq hh ki b kj ly km lz jt ma jx mb kb mc ky lu lv lw lx bi translated">用于在数据库云服务器上备份数据库的dbaascli实用程序</li></ol><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es me"><img src="../Images/482503ef4ef3cf04f54d1eb591bfdc37.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LnYNjUxfanjJMS4YopKwGA.png"/></div></div><figcaption class="mf mg et er es mh mi bd b be z dx">Exadata Database Service Long-Term Backup Retention and Cross Region Replication Architecture</figcaption></figure><p id="2ccb" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated"><strong class="ki hi">先决条件</strong></p><ol class=""><li id="0037" class="lp lq hh ki b kj kz km la jt lr jx ls kb lt ky lu lv lw lx bi translated">您拥有一个OCI用户，并且需要IAM权限来执行租赁中的所有操作</li><li id="cf54" class="lp lq hh ki b kj ly km lz jt ma jx mb kb mc ky lu lv lw lx bi translated">您拥有对ExaCS VM集群节点的opc用户SSH访问权限</li></ol><p id="e4c3" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">3.ExaCS VM集群上存在一个数据库。在这个例子中，我们将使用一个名为'<strong class="ki hi"> TestDB </strong>的数据库</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mj"><img src="../Images/8a9aa2888a2f83f25914df031e79dab8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pBk7y8f3SIGwA5wfqlC8eg.png"/></div></div></figure><h1 id="363f" class="le jj hh bd jk lf lg lh jo li lj lk js in ll io jw iq lm ir ka it ln iu ke lo bi translated">为Oracle对象存储设置MV2Bucket、OCI CLI和跨区域复制的步骤</h1><ol class=""><li id="ce89" class="lp lq hh ki b kj kk km kn jt mk jx ml kb mm ky lu lv lw lx bi translated"><strong class="ki hi">在ExaCS节点上安装和配置mv 2 bucket</strong></li></ol><p id="4fe7" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">从Oracle技术支持<strong class="ki hi">【1】</strong>:(OCI)mv 2 BUCKET—Oracle管理的Bucket内容管理器(文档ID 2723911.1)下载并在数据库云服务器节点上以root用户身份安装最新版本的MV2BUCKET rpm文件</p><p id="8adb" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">2.<strong class="ki hi">创建一个OCI文件存储系统，并将其挂载到ExaCS DB节点上，用于暂存备份的[2] </strong></p><pre class="ix iy iz ja fd mn mo mp mq aw mr bi"><span id="e2a1" class="ji jj hh mo b fi ms mt l mu mv">mkdir -p /shared_store</span><span id="0785" class="ji jj hh mo b fi mw mt l mu mv">sudo mount 10.10.1.120:/Prod-Apps-Shared /shared_store -o nolock</span><span id="c5f0" class="ji jj hh mo b fi mw mt l mu mv">mkdir -p /shared_store/db_backup/TestDB</span></pre><p id="b395" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">3.<strong class="ki hi">在主区域创建一个存储桶，在目标区域创建一个存储桶。创建两个存储桶后，在主区域存储桶上创建一个复制策略，将数据复制到目标区域存储桶[3] </strong></p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mx"><img src="../Images/f6e1e4c2f72c6a0fb5a73e700efdd884.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KBvCo3ymSfp01XGw_DDQyw.png"/></div></div><figcaption class="mf mg et er es mh mi bd b be z dx">Primary Region Bucket</figcaption></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mx"><img src="../Images/94fdbbb289ba8a905482555e498a4702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wxI8EwLz7eRfdxRCj2QkOQ.png"/></div></div><figcaption class="mf mg et er es mh mi bd b be z dx">Destination Region Bucket</figcaption></figure><p id="dd72" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated"><strong class="ki hi"> 4。在ExaCS所在的隔离专区中为OSS复制创建IAM策略</strong></p><pre class="ix iy iz ja fd mn mo mp mq aw mr bi"><span id="3a22" class="ji jj hh mo b fi ms mt l mu mv">Allow group <strong class="mo hi"><em class="my">&lt;Group Name&gt;</em></strong> to manage buckets in compartment <strong class="mo hi"><em class="my">&lt;Compartment Name&gt;</em></strong></span><span id="a5f7" class="ji jj hh mo b fi mw mt l mu mv">Allow group <strong class="mo hi"><em class="my">&lt;Group Name&gt;</em></strong> to manage objects in compartment <strong class="mo hi"><em class="my">&lt;Compartment Name&gt;</em></strong></span><span id="a197" class="ji jj hh mo b fi mw mt l mu mv">Allow service objectstorage-ap-sydney-1 to manage object-family in compartment <strong class="mo hi"><em class="my">&lt;Compartment Name&gt;</em></strong></span></pre><p id="a582" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">5.<strong class="ki hi">在您的主区域存储桶上创建复制策略到目标区域</strong></p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mx"><img src="../Images/b29fa69bea3f3f7038b5cff5a79bb214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*E43h6cdWuvkPoiHzRQkIQQ.png"/></div></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mx"><img src="../Images/b8b4c587afbee7eff05e230e6f5462cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PYnEhQGUyadIiSIN85S4ZQ.png"/></div></div></figure><p id="f169" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">6.<strong class="ki hi">以root用户身份在数据库云服务器云服务节点上安装OCI-CLI</strong></p><pre class="ix iy iz ja fd mn mo mp mq aw mr bi"><span id="6216" class="ji jj hh mo b fi ms mt l mu mv">-- Linux</span><span id="e3fa" class="ji jj hh mo b fi mw mt l mu mv">bash -c "$(curl -L https://raw.githubusercontent.com/oracle/oci-cli/master/scripts/install/install.sh)"</span><span id="5022" class="ji jj hh mo b fi mw mt l mu mv">-- Oracle Linux</span><span id="c997" class="ji jj hh mo b fi mw mt l mu mv">sudo yum install python36-oci-cli</span></pre><p id="57c7" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">使用您的用户配置API密钥，并将您的私钥和配置文件添加到/root/中。oci目录。您将需要创建。安装oci-cli后手动安装oci目录</p><p id="2ff7" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">测试oci cli客户端是否安装正确</p><pre class="ix iy iz ja fd mn mo mp mq aw mr bi"><span id="162a" class="ji jj hh mo b fi ms mt l mu mv">$ oci compute instance list --compartment-id ocid1.compartment.oc1..aaaaaa*******a</span></pre></div><div class="ab cl mz na go nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ha hb hc hd he"><h1 id="b908" class="le jj hh bd jk lf ng lh jo li nh lk js in ni io jw iq nj ir ka it nk iu ke lo bi translated">使用DBAASCLI进行备份并使用MV2BUCKET复制到客户管理的Bucket的步骤</h1><ol class=""><li id="f97f" class="lp lq hh ki b kj kk km kn jt mk jx ml kb mm ky lu lv lw lx bi translated"><strong class="ki hi">登录到任何一个数据库云服务器节点，创建一个自定义备份，保留“keep-forever”</strong></li></ol><pre class="ix iy iz ja fd mn mo mp mq aw mr bi"><span id="2682" class="ji jj hh mo b fi ms mt l mu mv"><strong class="mo hi">$ ssh opc@exacsnode1</strong></span><span id="b6f3" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">$</strong> <strong class="mo hi">sudo -s</strong></span><span id="6b1f" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">$ dbaascli database backup --dbname TestDB --start --archival --tag TestDBLongTermBackup2022</strong></span><span id="4ddf" class="ji jj hh mo b fi mw mt l mu mv"><em class="my">DBAAS CLI version 22.2.1.1.0<br/>Executing command database backup --start --archival --tag TestDBLongTermBackup2022<br/>DBaaS Backup API V1.5 @2022 Multi-Oracle home<br/>-&gt; Action : bkup_start<br/>-&gt; logfile: /var/opt/oracle/log/TestDB/bkup_api_log/bkup_api_4af4f585_20220618161130.837209.log<br/>UUID 7fb45008eecd11eca48d02001700c06a for this backup<br/>** process started with PID: 95722<br/>** see log file for monitor progress<br/>-------------------------------------</em></span></pre><p id="d0d6" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">或者，您也可以从OCI控制台创建长期保留备份</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mx"><img src="../Images/2b447f1a1fe0349804afd4f57fd8a680.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H0Su2Y9l-ODBGl1UHpvQSA.png"/></div></div></figure><p id="306e" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">2.使用dbaascli命令检查备份状态</p><pre class="ix iy iz ja fd mn mo mp mq aw mr bi"><span id="476a" class="ji jj hh mo b fi ms mt l mu mv"><strong class="mo hi">$ dbaascli database backup --dbname TestDB --status --uuid 7fb45008eecd11eca48d02001700c06a</strong></span><span id="ede6" class="ji jj hh mo b fi mw mt l mu mv"><em class="my">DBAAS CLI version 22.2.1.1.0<br/>Executing command database backup --status --uuid 7fb45008eecd11eca48d02001700c06a<br/>DBaaS Backup API V1.5 @2022 Multi-Oracle home<br/>@ STARTING CHECK STATUS 7fb45008eecd11eca48d02001700c06a<br/>[ REQUEST TICKET ]<br/>[UUID    -&gt;  7fb45008eecd11eca48d02001700c06a<br/>[DBNAME  -&gt;  TestDB<br/>[STATE   -&gt;  success<br/>[ACTION  -&gt;  create-backup-keep-forever<br/>[STARTED -&gt;  2022-06-18 06:11:36 UTC<br/>[ENDED   -&gt;  2022-06-18 06:15:44 UTC<br/>[PID     -&gt;  95722<br/>[TAG     -&gt;  TestDBLongTermBackup2022<br/>[PCT     -&gt;  100</em></span><span id="9325" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">$ dbaascli database backup --dbname TestDB --list</strong></span><span id="f74d" class="ji jj hh mo b fi mw mt l mu mv"><em class="my">DBAAS CLI version 22.2.1.1.0<br/>Executing command database backup --list<br/>DBaaS Backup API V1.5 @2022 Multi-Oracle home<br/>-&gt; Action : list<br/>-&gt; logfile: /var/opt/oracle/log/TestDB/bkup_api_log/bkup_api_40a9cc5e_20220618161647.574847.log<br/>-&gt; Listing all backups<br/>Backup Tag             Completion Date (UTC)            Type          keep<br/>----------------------   -----------------------      -----------    --------<br/>TAG20220618T155626     06/17/2022 20:00:39       full        False<br/>TestDBLongTermBackup2022     06/17/2022 20:15:44       keep-forever        True<br/>dbaascli execution completed</em></span></pre><p id="a2a4" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">3.<strong class="ki hi">以“root”用户身份运行mv2bucket.bin，将备份从数据库复制到暂存区，然后上传到主区域存储桶</strong></p><pre class="ix iy iz ja fd mn mo mp mq aw mr bi"><span id="68df" class="ji jj hh mo b fi ms mt l mu mv"><strong class="mo hi">-- Check content of Oracle managed bucket for the Database</strong></span><span id="5f4d" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">$ /opt/mv2bucket/mv2bucket.bin list --dbuniquename TestDB_wd5_syd</strong></span><span id="95d0" class="ji jj hh mo b fi mw mt l mu mv"><em class="my">|=============================================================================================================================================================|============|<br/>|Oracle Managed Bucket content size                                                                                                                           |     2.67 GB|<br/>|=============================================================================================================================================================|============|<br/></em></span><span id="374f" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">-- Copy data from Oracle Managed Bucket to Staging Area in FSS and then upload to Customer Managed Bucket</strong></span><span id="52bd" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">$ /opt/mv2bucket/mv2bucket.bin copy --dbuniquename TestDB_wd5_syd --bucketname Archival_LongTerm_Backup_Retention_Primary --stage /shared_store/db_backup/TestDB --parallel 5 --incremental</strong></span><span id="a0d7" class="ji jj hh mo b fi mw mt l mu mv"><em class="my">INFO: 2022-06-18 16:26:47: Im going to get '140' files missing on target 'Archival_LongTerm_Backup_Retention_Primary' and on stage '/shared_store/db_backup/TestDB'<br/>INFO: 2022-06-18 16:26:47: Getting Oracle Managed Bucket incremental files size<br/>INFO: 2022-06-18 16:26:47: Required stage area size for incremental is 2.67 GB<br/>INFO: 2022-06-18 16:26:47: Available free space on stage area '/shared_store/db_backup/TestDB' is 8.00 EB<br/>INFO: 2022-06-18 16:26:47: Getting '140' files from Oracle Managed Bucket, it will take time, please wait...<br/>SUCCESS: 2022-06-18 16:27:01: Files downloaded from Oracle Managed Bucket successfully<br/>INFO: 2022-06-18 16:27:01: Uploading files to own bucket, it will take time, please wait...<br/>SUCCESS: 2022-06-18 16:27:39: Files Uploaded to 'Archival_LongTerm_Backup_Retention_Primary' successfully</em></span><span id="fad3" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">-- Check the size of the Customer Managed Bucket</strong></span><span id="f935" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">$ /opt/mv2bucket/mv2bucket.bin size --bucketname Archival_LongTerm_Backup_Retention_Primary</strong></span><span id="6b57" class="ji jj hh mo b fi mw mt l mu mv"><em class="my">-------------------------------------------------<br/>Bucket 'Archival_LongTerm_Backup_Retention_Primary' content<br/>- Number of files : 140<br/>- Total Files size: 2.67 GB<br/>-------------------------------------------------</em></span><span id="2ca6" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">-- Check difference between Oracle Managed Bucket and Customer Managed Bucket</strong></span><span id="c07c" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">$ /opt/mv2bucket/mv2bucket.bin diff --dbuniquename TestDB_wd5_syd --bucketname Archival_LongTerm_Backup_Retention_Primary</strong></span><span id="2833" class="ji jj hh mo b fi mw mt l mu mv"><em class="my">INFO: 2022-06-18 16:32:30: Target Bucket 'Archival_LongTerm_Backup_Retention_Primary' existence check<br/>INFO: 2022-06-18 16:32:31: Database 'TestDB_wd5_syd' existence check<br/>INFO: 2022-06-18 16:32:32: Getting OPC file<br/>INFO: 2022-06-18 16:32:33: Getting OPC file parameters<br/>INFO: 2022-06-18 16:32:34: Checking Oracle Managed Bucket connectivity<br/>INFO: 2022-06-18 16:32:35: Getting Oracle Managed Bucket informations, please wait...<br/>INFO: 2022-06-18 16:32:35: Getting Oracle Managed Bucket files list<br/>INFO: 2022-06-18 16:32:35: Getting target bucket 'Archival_LongTerm_Backup_Retention_Primary' files list<br/>SUCCESS: 2022-06-18 16:32:36: Source and target bucket 'Archival_LongTerm_Backup_Retention_Primary' are having the same files.</em></span></pre><p id="a6b6" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">数据进入主存储桶后，会自动复制到目标区域存储桶。检查目标区域中的时段</p><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mx"><img src="../Images/a4ae01f8a1642608a5cdfd727f5980e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cFlM2NWyR7uLoxqBelX3GA.png"/></div></div></figure><figure class="ix iy iz ja fd jb er es paragraph-image"><div role="button" tabindex="0" class="jc jd di je bf jf"><div class="er es mx"><img src="../Images/056bc39822c9149dd052af34a9883705.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wyeQq88sbCHAsgx80fHybw.png"/></div></div></figure><p id="e19b" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated"><strong class="ki hi"> 4。再次同步到本地存储器</strong></p><pre class="ix iy iz ja fd mn mo mp mq aw mr bi"><span id="b846" class="ji jj hh mo b fi ms mt l mu mv"><strong class="mo hi">-- Sync to Local Storage </strong></span><span id="349c" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">$ /opt/mv2bucket/mv2bucket.bin get --dbuniquename TestDB_wd5_syd --bucketname Archival_LongTerm_Backup_Retention_Primary --stage /shared_store/db_backup/TestDB --incremental --parallel 5</strong></span><span id="a6c8" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi"><em class="my">-- Upload to Object Storage Bucket</em></strong></span><span id="d8bf" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">$ /opt/mv2bucket/mv2bucket.bin get --dbuniquename TestDB_wd5_syd --bucketname Archival_LongTerm_Backup_Retention_Primary --stage /shared_store/db_backup/TestDB --incremental --parallel 5</strong></span><span id="9096" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">-- Final Check</strong></span><span id="0368" class="ji jj hh mo b fi mw mt l mu mv"><strong class="mo hi">$ /opt/mv2bucket/mv2bucket.bin diff --dbuniquename TestDB_wd5_syd --bucketname Archival_LongTerm_Backup_Retention_Primary</strong></span><span id="e2b6" class="ji jj hh mo b fi mw mt l mu mv"><em class="my">SUCCESS: 2022-06-18 17:00:50: Source and target bucket 'Archival_LongTerm_Backup_Retention_Primary' are having the same files.</em></span></pre><p id="836e" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated"><strong class="ki hi"> 5。获取OPC和钱包文件信息</strong></p><pre class="ix iy iz ja fd mn mo mp mq aw mr bi"><span id="f856" class="ji jj hh mo b fi ms mt l mu mv"><strong class="mo hi">$ /opt/mv2bucket/mv2bucket.bin opcinfo --dbuniquename TestDB_wd5_syd</strong></span></pre><p id="e7a6" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">因此，我们成功地对数据库云服务器进行了长期归档备份，并将其复制到客户管理的存储桶中，跨区域复制了备份数据。</p><p id="1afc" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">准备好了解更多信息了吗？请访问oracle.com/database了解更多信息。</p><p id="548d" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">也可以<a class="ae md" href="https://bit.ly/devrel_slack" rel="noopener ugc nofollow" target="_blank">访问我们的公懈讨论</a>！</p></div><div class="ab cl mz na go nb" role="separator"><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne nf"/><span class="nc bw bk nd ne"/></div><div class="ha hb hc hd he"><h1 id="a488" class="le jj hh bd jk lf ng lh jo li nh lk js in ni io jw iq nj ir ka it nk iu ke lo bi translated">参考</h1><p id="d395" class="pw-post-body-paragraph kg kh hh ki b kj kk ii kl km kn il ko jt kp kq kr jx ks kt ku kb kv kw kx ky ha bi translated">[1] (OCI) mv2bucket — Oracle托管存储桶内容管理器(文档ID 2723911.1)</p><p id="7f08" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">[2]<a class="ae md" href="https://docs.oracle.com/en-us/iaas/Content/File/Concepts/filestorageoverview.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en-us/iaas/Content/File/Concepts/filestorageoverview . htm</a></p><p id="0eaa" class="pw-post-body-paragraph kg kh hh ki b kj kz ii kl km la il ko jt lb kq kr jx lc kt ku kb ld kw kx ky ha bi translated">[3]<a class="ae md" href="https://docs.oracle.com/en-us/iaas/Content/Object/Tasks/usingreplication.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en-us/iaas/Content/Object/Tasks/using replication . htm</a></p></div></div>    
</body>
</html>