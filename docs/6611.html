<html>
<head>
<title>Creating WhatsApp Clone Using Firebase</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Firebase创建WhatsApp克隆</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/creating-whatsapp-clone-using-firebase-f7971f32b35?source=collection_archive---------0-----------------------#2019-03-23">https://medium.com/quick-code/creating-whatsapp-clone-using-firebase-f7971f32b35?source=collection_archive---------0-----------------------#2019-03-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/6e2f4719bd40f388f69c7336372261f6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S7tfpMPl3Rrzga4dH-KFOQ.jpeg"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Image taken from <a class="ae hu" href="https://unsplash.com/photos/0AY15U_H-3U" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><p id="9b23" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在本教程中，我们将利用Firebase来创建一个WhatsApp的克隆。</p><h1 id="de4b" class="js jt hx bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">先决条件</h1><p id="e750" class="pw-post-body-paragraph iu iv hx iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">我将不会通过实现这个应用程序的全部细节，主要只是逻辑和代码文件。本教程假设您已经掌握了在iOS上使用简单应用程序的知识，我们将在此基础上继续学习。但是不要担心，如果你想一行一行地学习，我会在下面列出完整的源代码供你参考。</p><p id="50cb" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在这个教程中，我使用了XCode 10和Swift 4.2。</p><h1 id="028c" class="js jt hx bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">辅导的</h1><p id="7c8c" class="pw-post-body-paragraph iu iv hx iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">让我们首先创建一个新项目，<code class="du kv kw kx ky b">FakeChat</code>在任何你喜欢的文件夹中。您可以选择包含或排除核心数据/单元/ UI测试，因为我不会在这里讨论它们。</p><h1 id="7f68" class="js jt hx bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">使用窗格创建新项目</h1><figure class="la lb lc ld fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es kz"><img src="../Images/acacdb2ec65b12d0c35f9c23fa8cd1ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ooAz5qgiUhxGKwwKJ9QeHQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Create a single view app `FakeChat`</figcaption></figure><p id="5c1d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">接下来，我们将安装将在本教程中使用的各种pod:</p><pre class="la lb lc ld fd le ky lf lg aw lh bi"><span id="1d84" class="li jt hx ky b fi lj lk l ll lm">pod init<br/>open Podfile -a Xcode</span></pre><figure class="la lb lc ld fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ln"><img src="../Images/956affaecb553c7aed7a565e6317ceb1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RmoDIEKb884tL4qU3K2YXQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Add the required pods</figcaption></figure><pre class="la lb lc ld fd le ky lf lg aw lh bi"><span id="25b8" class="li jt hx ky b fi lj lk l ll lm">pod install</span></pre><p id="82ee" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在我们已经安装了所需的依赖项，让我们创建一个新的Firebase项目。Swift初学者将从<a class="ae hu" href="https://blog.coursesity.com/best-swift-tutorials/" rel="noopener ugc nofollow" target="_blank">最佳Swift教程</a>中受益匪浅。</p><h1 id="ab25" class="js jt hx bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">设置Firebase</h1><p id="ba02" class="pw-post-body-paragraph iu iv hx iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">越过<a class="ae hu" href="https://firebase.google.com" rel="noopener ugc nofollow" target="_blank">这里的</a>并按下右上角的<code class="du kv kw kx ky b">Go To Console</code>(确保您已登录)。</p><p id="c4f6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">之后，用默认设置和位置点击<code class="du kv kw kx ky b">Add Project</code>。在生产应用程序中，您可能希望根据需要更改位置。</p><figure class="la lb lc ld fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lo"><img src="../Images/e960638e40fe8ed1adede7e89cdb0ac8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*168gANrHdD5X6d6Z77Q6fQ.png"/></div></div></figure><p id="9945" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">选择<code class="du kv kw kx ky b">Project Overview</code>并向项目添加一个新的iOS应用程序，确保使用您的iOS Bunde ID，因为它必须是唯一的，我们的应用程序才能工作。将<code class="du kv kw kx ky b">com.bilguun.FakeChat</code>换成对你来说独一无二的东西，比如<code class="du kv kw kx ky b">com.yourorgname.FakeChat</code></p><figure class="la lb lc ld fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lp"><img src="../Images/60ae6dc32179b84843cd70a860a395d1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fbk4Q--Hy3FjjHKWkdqh4A.png"/></div></div></figure><p id="f301" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">点击<code class="du kv kw kx ky b">Register app</code>并下载<code class="du kv kw kx ky b">GoogleService-Info.plist.</code>，我们将把它添加到我们项目的根目录中。</p><figure class="la lb lc ld fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lq"><img src="../Images/22dc73645efb4249fb1721db7c7fb928.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ithx-4rtzPAAoIsgKCImaA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Make sure to add FakeChat as our target</figcaption></figure><p id="d5e6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在我们唯一需要做的就是在我们的<code class="du kv kw kx ky b">AppDelegate.swift</code>文件<code class="du kv kw kx ky b">didFinishLaunchingWithOption</code>方法中添加以下内容。</p><pre class="la lb lc ld fd le ky lf lg aw lh bi"><span id="56fc" class="li jt hx ky b fi lj lk l ll lm">FirebaseApp.configure()</span><span id="2e9e" class="li jt hx ky b fi lr lk l ll lm"><strong class="ky hy">let</strong> database = Database.database().reference()</span><span id="6cf2" class="li jt hx ky b fi lr lk l ll lm">database.setValue("Testing")</span></pre><h1 id="0888" class="js jt hx bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">正在创建数据库</h1><p id="5989" class="pw-post-body-paragraph iu iv hx iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">现在Firebase目前提供了两种支持云同步的数据库。这些是<em class="ls">云Firestore </em>和<em class="ls">实时数据库。</em>本质上，云Firestore是一个升级的实时数据库。</p><blockquote class="lt lu lv"><p id="a7d7" class="iu iv ls iw b ix iy iz ja jb jc jd je lw jg jh ji lx jk jl jm ly jo jp jq jr ha bi translated"><strong class="iw hy"> Cloud Firestore </strong>是Firebase面向移动应用开发的全新旗舰数据库。它用一个新的、更直观的数据模型改进了实时数据库的成功之处。Cloud Firestore还具有比实时数据库更丰富、更快速的查询和更好的扩展性。</p></blockquote><p id="3f4f" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">它更容易扩展，可以模拟复杂的模型，从长远来看总体上更好。然而，为了简单起见，我们将坚持使用实时数据库。</p><h2 id="9b1e" class="li jt hx bd ju lz ma mb jy mc md me kc jf mf mg kg jj mh mi kk jn mj mk ko ml bi translated">实时数据库</h2><p id="8c7e" class="pw-post-body-paragraph iu iv hx iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">接下来，返回Firebase控制台并执行以下操作:</p><div class="la lb lc ld fd ab cb"><figure class="mm hj mn mo mp mq mr paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><img src="../Images/7316a5afcfe0bade00949a0858fc718b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*7d0HOxG9caTWZd1zNqEjmA.png"/></div></figure><figure class="mm hj ms mo mp mq mr paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><img src="../Images/fb68c2787f9a54037263a9615dc823c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:810/format:webp/1*WV5Gb1pvzTJTCN47ePiK9w.png"/></div></figure></div><p id="46b1" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这将在测试模式下创建一个<em class="ls">实时数据库</em>,这意味着用户不需要被认证就可以读写这个数据库。我们最终会改变规则，但让我们继续这样做，这样我们就可以测试我们的应用程序。</p><p id="c669" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">继续在模拟器上运行我们的iOS应用程序。一旦启动，当你点击Firebase中的数据库时，你应该会看到如下内容:</p><figure class="la lb lc ld fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mt"><img src="../Images/c43892d01cd2ef44578e965d4963934c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4G4_-6LCgnfdbn-K4Z-LVQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Our set value method worked!</figcaption></figure><p id="6404" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">太好了！一旦我们的应用程序完成启动，我们就引用了实时数据库的根，并设置了一个新值<code class="du kv kw kx ky b">Testing</code></p><p id="c1f7" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们现在将把Firebase数据库放在一边，当我们准备好发送消息时再回来使用它。现在让我们为用户实现视图控制器和注册/登录逻辑。</p><h1 id="07de" class="js jt hx bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">注册和登录</h1><div class="la lb lc ld fd ab cb"><figure class="mm hj mu mo mp mq mr paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><img src="../Images/3a2a5aa61a02e2c8964332c743b1b209.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*gp3Zbw5cR46kOjDqKfylRA.png"/></div></figure><figure class="mm hj mv mo mp mq mr paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><img src="../Images/d8017e759f750919352d1c1a78523b48.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/format:webp/1*1iVHXbKz9RwNkZrf3GSIIA.png"/></div></figure></div><p id="fec0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们转到<code class="du kv kw kx ky b">Authentication</code>，点击电子邮件/密码并启用它。我们在这里所做的是，我们给我们的用户使用电子邮件或密码注册的能力。在本教程中，我们不会检查电子邮件的有效性或用户的真实性。</p><figure class="la lb lc ld fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mw"><img src="../Images/43db60994229d36e7333dd8033a4cbe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kv0mW0UPJpSKklu10bualQ.png"/></div></div></figure><p id="38c0" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Firebase也有更多的选项，允许用户注册/登录，随意探索并将其整合到你的应用程序中。</p><h2 id="a182" class="li jt hx bd ju lz ma mb jy mc md me kc jf mf mg kg jj mh mi kk jn mj mk ko ml bi translated">创建视图控制器</h2><figure class="la lb lc ld fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mx"><img src="../Images/64f3be9d46eb82e30bf2402a4cbf3444.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eNPtKI7ysdyMG1dDZ-ecZQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">This will be our initial storyboard</figcaption></figure><p id="7436" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们着手创建我们最初的故事板。在这里，我们将只有2个屏幕嵌入在<code class="du kv kw kx ky b">Navigation Controller.</code>我们的欢迎屏幕有<code class="du kv kw kx ky b">email</code>和<code class="du kv kw kx ky b">password.</code>的输入字段，然后我们可以登录或注册。一旦我们完成其中任何一项，我们就可以展示我们的<code class="du kv kw kx ky b">Chats ViewController</code></p><figure class="la lb lc ld fd hj"><div class="bz dy l di"><div class="my mz l"/></div></figure><p id="7345" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">查看上面的屏幕记录，了解当前流程的要点。</p><h2 id="ff83" class="li jt hx bd ju lz ma mb jy mc md me kc jf mf mg kg jj mh mi kk jn mj mk ko ml bi translated">处理注册和登录</h2><figure class="la lb lc ld fd hj"><div class="bz dy l di"><div class="na mz l"/></div></figure><p id="d8fa" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">把你的主<code class="du kv kw kx ky b">ViewController.swift</code>更新成这样。确保连接故事板中的<code class="du kv kw kx ky b">IBOutlets</code>和<code class="du kv kw kx ky b">IBActions</code>以防止崩溃。</p><p id="05c9" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在让我们运行应用程序并注册一个新用户</p><figure class="la lb lc ld fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nb"><img src="../Images/cffb66b64c8cd1500f09adce6c4f9c16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VVU4WEkWsTgXLNMKbc-F6w.png"/></div></div></figure><p id="7605" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">输入你想要的电子邮件和密码。点击注册，短暂延迟后，应用程序会带您进入<code class="du kv kw kx ky b">ChatsViewController</code>。</p><figure class="la lb lc ld fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nc"><img src="../Images/8902d562fe67175cfd386fb4ce05b689.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4gjnKQO9G53aNfF8Sb2Pjw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Authentication page</figcaption></figure><p id="d695" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在Firebase中，刷新身份验证页面，您应该会看到一个我们刚刚注册的新用户。我们有的是:</p><ul class=""><li id="ff60" class="nd ne hx iw b ix iy jb jc jf nf jj ng jn nh jr ni nj nk nl bi translated">标识符—我们使用的电子邮件</li><li id="f650" class="nd ne hx iw b ix nm jb nn jf no jj np jn nq jr ni nj nk nl bi translated">提供者—显示身份验证类型的图标</li><li id="e67b" class="nd ne hx iw b ix nm jb nn jf no jj np jn nq jr ni nj nk nl bi translated">创建—创建日期</li><li id="bdf1" class="nd ne hx iw b ix nm jb nn jf no jj np jn nq jr ni nj nk nl bi translated">登录日期—用户上次登录的日期</li><li id="2ff2" class="nd ne hx iw b ix nm jb nn jf no jj np jn nq jr ni nj nk nl bi translated">用户UUID —分配给每个用户的唯一标识符</li><li id="6e9b" class="nd ne hx iw b ix nm jb nn jf no jj np jn nq jr ni nj nk nl bi translated">密码列未显示，因为它是敏感数据。它将被相应地散列和存储。</li></ul><p id="6de6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">返回主页并尝试登录。一旦用户成功登录，我们再次显示<code class="du kv kw kx ky b">ChatsViewController</code>。</p><h2 id="63bc" class="li jt hx bd ju lz ma mb jy mc md me kc jf mf mg kg jj mh mi kk jn mj mk ko ml bi translated">ChatsViewController</h2><figure class="la lb lc ld fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nb"><img src="../Images/be7f092ae35acc539f0b767af8ee8f70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0n6S7i6IpA3vsoM9pz_7uQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Looks pretty decent!</figcaption></figure><p id="f49c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这就是我们将在<code class="du kv kw kx ky b">ChatsViewController.</code>中实施的内容。基本想法如下:</p><ol class=""><li id="5d2a" class="nd ne hx iw b ix iy jb jc jf nf jj ng jn nh jr nr nj nk nl bi translated">创建一个自定义模型，将举行<code class="du kv kw kx ky b">message,</code> <code class="du kv kw kx ky b">incoming,</code> <code class="du kv kw kx ky b">sender</code></li><li id="4f8d" class="nd ne hx iw b ix nm jb nn jf no jj np jn nq jr nr nj nk nl bi translated">创建自定义表格视图单元格，根据收到的模型定义消息对齐和背景颜色。如果发件人不是你，在邮件顶部显示发件人姓名</li><li id="c6b4" class="nd ne hx iw b ix nm jb nn jf no jj np jn nq jr nr nj nk nl bi translated">在表格视图中显示单元格。</li></ol><figure class="la lb lc ld fd hj"><div class="bz dy l di"><div class="na mz l"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Chat Message Cell</figcaption></figure><figure class="la lb lc ld fd hj"><div class="bz dy l di"><div class="na mz l"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">Chats View Controller</figcaption></figure><p id="c530" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这就是我们真正需要相应地显示消息的地方。现在让我们将<code class="du kv kw kx ky b">TableView</code>数据连接到Firebase！我们将发送一条消息，并确保我们可以在另一个模拟器上恢复它。说到数据库，<a class="ae hu" href="https://blog.coursesity.com/best-mongodb-courses/" rel="noopener ugc nofollow" target="_blank"> MongoDB教程</a>可以让复杂的任务变得简单，让处理信息变得简单明了。</p><h2 id="adaf" class="li jt hx bd ju lz ma mb jy mc md me kc jf mf mg kg jj mh mi kk jn mj mk ko ml bi translated">连接到Firebase数据库</h2><p id="b05e" class="pw-post-body-paragraph iu iv hx iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">我们将添加两个新方法来与Firebase数据库通信:</p><ol class=""><li id="bf07" class="nd ne hx iw b ix iy jb jc jf nf jj ng jn nh jr nr nj nk nl bi translated">点击<code class="du kv kw kx ky b">send</code>按钮时向firebase发送消息。</li><li id="9ec5" class="nd ne hx iw b ix nm jb nn jf no jj np jn nq jr nr nj nk nl bi translated">给<em class="ls">添加一个监听器，观察数据库</em>的变化。</li></ol><p id="fabb" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我不会用太多的话来烦你，所以这里是实际的实现</p><figure class="la lb lc ld fd hj"><div class="bz dy l di"><div class="na mz l"/></div></figure><p id="432c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">仔细阅读代码，尝试理解到底发生了什么。新方法是<code class="du kv kw kx ky b">sendButtonDidTap</code>和<code class="du kv kw kx ky b">getMessages.</code>，它们都是与我们的Firebase数据库正确通信所必需的。继续运行应用程序，注册2个用户(如果你还没有这样做的话),并在模拟器或你的手机上与他们登录。最终结果应该是这样的:</p><figure class="la lb lc ld fd hj"><div class="bz dy l di"><div class="ns mz l"/></div></figure><p id="7c25" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">消息是<em class="ls">发送</em> <em class="ls">即时</em>，<em class="ls">收到</em> <em class="ls">即时</em>的。</p><h1 id="882b" class="js jt hx bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">总结想法</h1><h2 id="0bb2" class="li jt hx bd ju lz ma mb jy mc md me kc jf mf mg kg jj mh mi kk jn mj mk ko ml bi translated">关于我们的应用</h2><p id="acb8" class="pw-post-body-paragraph iu iv hx iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">是的，我知道，虽然我们的WhatsApp克隆版可以工作，但它没有任何<code class="du kv kw kx ky b">friends.</code>的想法/概念，这意味着在现阶段，<code class="du kv kw kx ky b">ChatsViewController</code>就像一个巨大的团体，所有注册成员都可以在那里发送和接收消息。为了融入向朋友/群组/房间发送消息的想法，我们的<strong class="iw hy"> <em class="ls">数据库</em> </strong>结构将需要被改变以促进这一点。也许在不久的将来，我会给你一个更新，告诉你如何使用Firebase来实现这个目标。如果有人想知道如何做到这一点，请随时告诉我。</p><p id="7306" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果您没有必要的技能或资源来获得自己的服务器，Firebase可以成为一个非常强大的工具来开始实时信息交换。将来我会更新这个或者创建一个新的教程，介绍如何使用Sockets / MongoDB而不是Firebase来实现我们自己的服务。但是作为开始，Firebase提供了一个<strong class="iw hy"> <em class="ls">超级整洁的方式</em> </strong>允许实时信息共享。</p><p id="0242" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">最终的源代码可以在这里找到。</p><div class="hg hh ez fb hi nt"><a href="https://github.com/Bilguun132/FakeChat" rel="noopener  ugc nofollow" target="_blank"><div class="nu ab dw"><div class="nv ab nw cl cj nx"><h2 class="bd hy fi z dy ny ea eb nz ed ef hw bi translated">Bilguun132/FakeChat</h2><div class="oa l"><h3 class="bd b fi z dy ny ea eb nz ed ef dx translated">iOS教程实时聊天。在GitHub上创建一个帐户，为Bilguun132/FakeChat的开发做出贡献。</h3></div><div class="ob l"><p class="bd b fp z dy ny ea eb nz ed ef dx translated">github.com</p></div></div></div></a></div></div><div class="ab cl oc od go oe" role="separator"><span class="of bw bk og oh oi"/><span class="of bw bk og oh oi"/><span class="of bw bk og oh"/></div><div class="ha hb hc hd he"><p id="5d8b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果有人觉得这些有用，请随意分享或者让我知道是否有错误/不好的实践/实现。</p><p id="cb5b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">祝编码愉快！</p></div></div>    
</body>
</html>