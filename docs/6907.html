<html>
<head>
<title>Deploying Django App to Heroku: Full Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">将Django应用程序部署到Heroku:完整指南</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/deploying-django-app-to-heroku-full-guide-6ff7252578d7?source=collection_archive---------0-----------------------#2020-09-20">https://medium.com/quick-code/deploying-django-app-to-heroku-full-guide-6ff7252578d7?source=collection_archive---------0-----------------------#2020-09-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/1e7e248108809b60e6b5bbbe9e547eda.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*NQp7RLCL1KkSS99S.png"/></div></div></figure><p id="158f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">你和姜戈一起做了个应用。太好了！，你很兴奋地向地球上的每个人展示它。为此，你需要把它放在网上的某个地方，以便其他人可以访问它。</p><p id="d314" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">好吧，你做了些调查然后选择了赫罗库。很棒的选择！👍</p><p id="a53d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，你开始部署你的应用程序，并在网上做你的研究，现在你有许多不同的资源可以遵循，这些资源提供了数百万种方法。因此，你感到困惑、沮丧和困顿，不知何故设法把它放在主机上，但之后，令你惊讶的是，你发现你的CSS文件没有出现。🤦‍♂️</p><p id="bff3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">好，现在让我们来解决你的问题。这篇文章几乎涵盖了你需要的一切。</p><h1 id="f4b7" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">路标</h1><ul class=""><li id="6902" class="kl km hh ir b is kn iw ko ja kp je kq ji kr jm ks kt ku kv bi translated">安装所需的工具</li><li id="7dd7" class="kl km hh ir b is kw iw kx ja ky je kz ji la jm ks kt ku kv bi translated">创建所需的文件</li><li id="d72e" class="kl km hh ir b is kw iw kx ja ky je kz ji la jm ks kt ku kv bi translated">创建Heroku应用程序</li><li id="c1dd" class="kl km hh ir b is kw iw kx ja ky je kz ji la jm ks kt ku kv bi translated">编辑设置. py</li><li id="2eea" class="kl km hh ir b is kw iw kx ja ky je kz ji la jm ks kt ku kv bi translated">对静态文件进行更改</li></ul><h1 id="dd55" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">安装所需的工具</h1><p id="1ee3" class="pw-post-body-paragraph ip iq hh ir b is kn iu iv iw ko iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">要部署到Heroku，您需要安装Heroku CLI(命令行界面)。</p><p id="6bac" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">你可以通过这里来做到这一点:<a class="ae le" href="https://devcenter.heroku.com/articles/heroku-cli" rel="noopener ugc nofollow" target="_blank">https://devcenter.heroku.com/articles/heroku-cli</a></p><p id="41af" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">CLI是必需的，因为它将使我们能够使用登录、运行迁移等功能。</p><h1 id="d05c" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">创建Heroku需要的文件</h1><p id="8970" class="pw-post-body-paragraph ip iq hh ir b is kn iu iv iw ko iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">安装完CLI后，让我们创建Heroku需要的所有文件。</p><p id="6701" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">文件有:</p><h2 id="5a64" class="lf jo hh bd jp lg lh li jt lj lk ll jx ja lm ln kb je lo lp kf ji lq lr kj ls bi translated"><strong class="ak"> requirements.txt </strong></h2><p id="6cb5" class="pw-post-body-paragraph ip iq hh ir b is kn iu iv iw ko iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">Requirements.txt制作最简单。只需运行命令</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="7d01" class="lf jo hh ly b fi mc md l me mf">pip freeze &gt; requirements.txt</span></pre><p id="852f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这个命令将生成一个. txt文件，其中包含当前Django应用程序所需的所有包。</p><p id="7c23" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">注意:如果您进一步添加任何包，然后再次运行此命令，这样文件将会用新的包更新</strong></p><p id="2a05" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"><em class="mg">requirements . txt</em></strong>有什么用？<br/>如您所见，它包含了您的应用程序所需的所有依赖项。所以当你把你的应用程序放到Heroku上时，它会告诉Heroku要安装哪些包。</p><h2 id="6957" class="lf jo hh bd jp lg lh li jt lj lk ll jx ja lm ln kb je lo lp kf ji lq lr kj ls bi translated"><strong class="ak">过程文件</strong></h2><p id="475f" class="pw-post-body-paragraph ip iq hh ir b is kn iu iv iw ko iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">之后，创建一个新的文件名Procfile，不要添加任何扩展名。这是Heroku需要的文件</p><p id="0f97" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">根据Heroku的说法:</p><blockquote class="mh mi mj"><p id="ea65" class="ip iq mg ir b is it iu iv iw ix iy iz mk jb jc jd ml jf jg jh mm jj jk jl jm ha bi translated">Heroku应用程序包括一个<strong class="ir hi"> Procfile </strong>，它指定了应用程序在启动时执行的命令。您可以使用Procfile来声明各种<strong class="ir hi">过程类型</strong>，包括:</p><p id="299e" class="ip iq mg ir b is it iu iv iw ix iy iz mk jb jc jd ml jf jg jh mm jj jk jl jm ha bi translated">你的应用程序的web服务器<br/>多种类型的工作进程<br/>一个单独的进程，比如一个<a class="ae le" href="https://devcenter.heroku.com/articles/scheduled-jobs-custom-clock-processes" rel="noopener ugc nofollow" target="_blank">时钟</a> <br/>在一个新版本部署之前运行的任务<a class="ae le" href="https://devcenter.heroku.com/articles/release-phase" rel="noopener ugc nofollow" target="_blank"/></p></blockquote><p id="5a15" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于我们的应用程序，我们可以编写以下命令</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="7547" class="lf jo hh ly b fi mc md l me mf">web: gunicorn name_of_your_app.wsgi -log-file -</span></pre><p id="e55b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你对你的应用程序名称感到困惑，那么只需进入你的项目中的wsgi.py文件，你将在那里找到你的应用程序名称。</p><p id="5dba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为此，您应该安装gunicorn并将其添加到requirements.txt文件中</p><p id="73ab" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">安装非常简单。你一定猜到了！</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="264c" class="lf jo hh ly b fi mc md l me mf">pip install gunicorn</span></pre><h2 id="2981" class="lf jo hh bd jp lg lh li jt lj lk ll jx ja lm ln kb je lo lp kf ji lq lr kj ls bi translated"><strong class="ak"> runtime.txt </strong></h2><p id="3532" class="pw-post-body-paragraph ip iq hh ir b is kn iu iv iw ko iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">之后，创建一个名为runtime.txt的新文本文件，并在其中以如下格式编写您正在使用的python版本</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="4a4f" class="lf jo hh ly b fi mc md l me mf">python-3.8.1 </span></pre><p id="23b3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这是我们需要的所有文件。现在我们必须开始编辑settings.py文件。</p><h1 id="425e" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">创建Heroku应用程序</h1><p id="64b5" class="pw-post-body-paragraph ip iq hh ir b is kn iu iv iw ko iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">这是一个简单的步骤，可以通过两种方式完成，要么通过命令行，要么通过Heroku网站。</p><p id="92b2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在让我们使用Heroku网站。</p><ul class=""><li id="cdd9" class="kl km hh ir b is it iw ix ja mn je mo ji mp jm ks kt ku kv bi translated">创建Heroku账户后，你会看到一个创建新应用的选项</li><li id="49c2" class="kl km hh ir b is kw iw kx ja ky je kz ji la jm ks kt ku kv bi translated">它会要求您输入名称，名称应该是唯一的。点击和试用后，您将被重定向至您的应用仪表板。</li><li id="5325" class="kl km hh ir b is kw iw kx ja ky je kz ji la jm ks kt ku kv bi translated">这里有许多选项，但让我们转到设置选项卡，然后单击显示配置变量</li><li id="56d1" class="kl km hh ir b is kw iw kx ja ky je kz ji la jm ks kt ku kv bi translated">在密钥中写入SECRET_KEY，在值中粘贴设置文件中的密钥，您可以更改它，因为只有这个密钥会被使用。</li><li id="9b23" class="kl km hh ir b is kw iw kx ja ky je kz ji la jm ks kt ku kv bi translated">目前就这些。</li><li id="40be" class="kl km hh ir b is kw iw kx ja ky je kz ji la jm ks kt ku kv bi translated">我们很快会重访。</li></ul><h1 id="929c" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">编辑设置. py</h1><p id="0e22" class="pw-post-body-paragraph ip iq hh ir b is kn iu iv iw ko iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">在这个文件中应该有相当多的修改。</p><p id="18e3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们开始吧</p><p id="8f34" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">第一次改变</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="25e5" class="lf jo hh ly b fi mc md l me mf">DEBUG = False</span></pre><p id="8f35" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在允许的主机中，输入您的Heroku应用程序的域</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="6f99" class="lf jo hh ly b fi mc md l me mf">ALLOWED_HOSTS = ["your_app_name.herokuapp.com", "127.0.0.1"]</span></pre><p id="c6d6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">用下面的内容替换SECRET_KEY变量(假设您已经在前面的步骤中在heroku中设置了密钥)</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="fe16" class="lf jo hh ly b fi mc md l me mf">SECRET_KEY = os.environ.get('SECRET_KEY')</span></pre><p id="84f4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">它的作用是从环境中获取SECRET_KEY。在我们的例子中，我们可以在Heroku中设置secret_key，它将通过环境变量在这里提供密钥。</p><h1 id="9db0" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">设置静态文件</h1><p id="ffdd" class="pw-post-body-paragraph ip iq hh ir b is kn iu iv iw ko iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">在设置文件中，您会发现</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="2258" class="lf jo hh ly b fi mc md l me mf">STATIC_URL = '/static/'</span></pre><p id="a56b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">用下面的代码替换它</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="7009" class="lf jo hh ly b fi mc md l me mf">STATIC_ROOT = os.path.join(BASE_DIR, 'staticfiles')<br/>STATIC_URL = '/static/'<br/><br/>STATICFILES_DIRS = (<br/>    os.path.join(BASE_DIR, 'static'),<br/>)</span></pre><p id="ecf0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">基本上，这将创建一个名为static的文件夹，其中包含所有静态文件，如CSS文件。</p><p id="0d02" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您的应用程序包含您已存储的图像，或者用户有能力存储图像，则添加以下行</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="2861" class="lf jo hh ly b fi mc md l me mf">MEDIA_URL = "/media/"<br/>MEDIA_ROOT = os.path.join(BASE_DIR, 'media')</span></pre><p id="e292" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这和上面的差不多</p><p id="66f5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">你还需要做一件事。</p><p id="7dc9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你有媒体文件，那么要让Django提供服务，你必须在项目的urls.py文件中添加一行(顶级urls文件)</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="7eda" class="lf jo hh ly b fi mc md l me mf">from django.conf import settings<br/>from django.conf.urls.static import static<br/><br/>urlpatterns = [<br/>    # ... the rest of your URLconf goes here ...<br/>] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)</span></pre><p id="3a9f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我强烈建议您看一下这个文档。</p><p id="ed67" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">https://docs.djangoproject.com/en/3.1/howto/static-files/<a class="ae le" href="https://docs.djangoproject.com/en/3.1/howto/static-files/" rel="noopener ugc nofollow" target="_blank"/></p><p id="4404" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在生产中为静态文件提供服务最不需要的就是WhiteNoise</p><blockquote class="mh mi mj"><p id="7139" class="ip iq mg ir b is it iu iv iw ix iy iz mk jb jc jd ml jf jg jh mm jj jk jl jm ha bi translated"><em class="hh">通过几行配置，WhiteNoise允许你的web应用服务于它自己的静态文件，使它成为一个独立的单元，可以部署在任何地方，而不需要依赖nginx、亚马逊S3或任何其他外部服务。(在Heroku、OpenShift等PaaS提供商上特别有用。)-白化文件</em></p></blockquote><p id="e808" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">安装白噪音</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="ad1b" class="lf jo hh ly b fi mc md l me mf">pip install whitenoise</span></pre><p id="220c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">将其添加到settings.py文件的中间件中</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="33f2" class="lf jo hh ly b fi mc md l me mf">MIDDLEWARE = [<br/>  # 'django.middleware.security.SecurityMiddleware',<br/>  'whitenoise.middleware.WhiteNoiseMiddleware',<br/>  # ...<br/>]</span></pre><p id="9ac0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">之后，不要忘记运行创建requirements.txt文件的命令。记得吗？</p><p id="1d93" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">看一下文档<br/>【http://whitenoise.evans.io/en/stable/ T2】</p><p id="b7b7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后，我们已经完成了部署的两个最重要的步骤</p><h1 id="d496" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">向GitHub添加代码</h1><p id="28f8" class="pw-post-body-paragraph ip iq hh ir b is kn iu iv iw ko iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">制作一个新的Github Repo，并在其中添加您的所有代码。<br/> <a class="ae le" href="https://dev.to/ayomide_bajo/pushing-an-existing-repository-to-github-1f68" rel="noopener ugc nofollow" target="_blank">用本帖作参考</a></p><p id="d2af" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">之后，转到Heroku，在Deploy选项卡下，您会看到一个连接Github的选项。</p><p id="c502" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">连接您的repo，您可以点击部署按钮来部署您的应用程序。</p><h1 id="59bc" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">使用Heroku Postgres</h1><h2 id="2ea3" class="lf jo hh bd jp lg lh li jt lj lk ll jx ja lm ln kb je lo lp kf ji lq lr kj ls bi translated">需要什么？我已经在用SQLite了！</h2><p id="367f" class="pw-post-body-paragraph ip iq hh ir b is kn iu iv iw ko iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">问题是</p><blockquote class="mh mi mj"><p id="c7d7" class="ip iq mg ir b is it iu iv iw ix iy iz mk jb jc jd ml jf jg jh mm jj jk jl jm ha bi translated">Heroku文件系统是短暂的——这意味着在dyno运行期间对文件系统的任何更改都只会持续到dyno关闭或重启。每个dyno引导时都带有最近一次部署的文件系统的干净副本。这类似于Docker等基于容器的系统的运行数量。<br/>此外，在正常操作下，dynos每天都会在一个称为“循环”的过程中重新启动。</p></blockquote><p id="0828" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><a class="ae le" href="https://help.heroku.com/K1PPS2WM/why-are-my-file-uploads-missing-deleted" rel="noopener ugc nofollow" target="_blank">https://help . heroku . com/k1 PPS 2 WM/why-are-my-file-uploads-missing-deleted</a></p><p id="d73e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">基本上，你存储的所有数据每24小时就会被删除一次。</p><p id="7e67" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要解决Heroku，建议使用AWS或Postgres。Heroku使得使用Postgres变得非常简单。</p><p id="366d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们开始吧</p><p id="f2b4" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">进入你的应用仪表板，在资源部分搜索Postgres。选择它，你会得到这样的东西</p><figure class="lt lu lv lw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mq"><img src="../Images/e90bca6d5bde012b15f77db432ae1b3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vAF5EGk4PwJwspHat3C4Vg.png"/></div></div><figcaption class="mr ms et er es mt mu bd b be z dx">Postgres Add-on in Heroku</figcaption></figure><p id="3e73" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在转到设置选项卡，显示配置变量</p><p id="a2f9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您将在那里看到一个DATABASE_URL键。这意味着Heroku已经添加了数据库，现在我们必须告诉我们的应用程序使用这个数据库。</p><p id="6657" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为此，我们将需要另一个名为dj_database_url的包。通过pip安装并导入到settings.py文件的顶部</p><p id="205e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，将以下代码粘贴到设置文件中的数据库下</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="22b5" class="lf jo hh ly b fi mc md l me mf">db_from_env = dj_database_url.config(conn_max_age=600)<br/>DATABASES['default'].update(db_from_env)</span></pre><p id="1f97" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在你的数据库已经设置好了</p><p id="bef0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">目前，您的数据库是空的，您可能想要填充它。</p><ul class=""><li id="abe6" class="kl km hh ir b is it iw ix ja mn je mo ji mp jm ks kt ku kv bi translated">开放终端</li><li id="af91" class="kl km hh ir b is kw iw kx ja ky je kz ji la jm ks kt ku kv bi translated">类型→ <code class="du mv mw mx ly b">heroku login</code></li><li id="014e" class="kl km hh ir b is kw iw kx ja ky je kz ji la jm ks kt ku kv bi translated">登录后运行以下命令</li></ul><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="41db" class="lf jo hh ly b fi mc md l me mf">heroku run python manage.py makemigrations<br/>heroku run python manage.py migrate<br/>heroku run python manage.py createsuperuser</span></pre><p id="e798" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，您的应用程序已经可以部署了</p><p id="ea13" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要么使用</p><pre class="lt lu lv lw fd lx ly lz ma aw mb bi"><span id="b075" class="lf jo hh ly b fi mc md l me mf">git push heroku master</span></pre><p id="9906" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">(提交更改后)或通过Github推送。</p></div><div class="ab cl my mz go na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ha hb hc hd he"><p id="1a37" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">好了，终于完成了。这有点长，但很容易做到，因为你只需要做一些小的改变，没有太大的变化。</p><p id="1e26" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果这篇文章被证明是有帮助的，那么不要忘记给它鼓掌👏</p><p id="ea06" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果有任何改进，请在评论中告诉我。😄</p><h1 id="0c36" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">查看我的其他文章</h1><div class="nf ng ez fb nh ni"><a rel="noopener follow" target="_blank" href="/@theshubhagrwl/should-you-track-your-time-by-shubh-agrawal-968aecfcf97f"><div class="nj ab dw"><div class="nk ab nl cl cj nm"><h2 class="bd hi fi z dy nn ea eb no ed ef hg bi translated">你应该记录你的时间吗？-舒布·阿格拉瓦尔</h2><div class="np l"><h3 class="bd b fi z dy nn ea eb no ed ef dx translated">时间追踪是高效人士给出的最常见的建议…</h3></div><div class="nq l"><p class="bd b fp z dy nn ea eb no ed ef dx translated">medium.com</p></div></div><div class="nr l"><div class="ns l nt nu nv nr nw in ni"/></div></div></a></div><div class="nf ng ez fb nh ni"><a rel="noopener follow" target="_blank" href="/@theshubhagrwl/custom-user-model-in-django-3-3750fb5656c4"><div class="nj ab dw"><div class="nk ab nl cl cj nm"><h2 class="bd hi fi z dy nn ea eb no ed ef hg bi translated">Django 3中的自定义用户模型</h2><div class="np l"><h3 class="bd b fi z dy nn ea eb no ed ef dx translated">嗨，在这篇文章中，我们将学习在Django 3中创建一个自定义用户模型，并使用电子邮件登录Django admin。</h3></div><div class="nq l"><p class="bd b fp z dy nn ea eb no ed ef dx translated">medium.com</p></div></div><div class="nr l"><div class="nx l nt nu nv nr nw in ni"/></div></div></a></div><h1 id="14be" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">访问我的博客</h1><div class="nf ng ez fb nh ni"><a href="https://theshubhagrwl.hashnode.dev/" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab dw"><div class="nk ab nl cl cj nm"><h2 class="bd hi fi z dy nn ea eb no ed ef hg bi translated">舒布·阿格拉瓦尔的博客</h2><div class="np l"><h3 class="bd b fi z dy nn ea eb no ed ef dx translated">这是舒布·阿格拉瓦尔的博客。</h3></div><div class="nq l"><p class="bd b fp z dy nn ea eb no ed ef dx translated">theshubhagrwl.hashnode.dev</p></div></div><div class="nr l"><div class="ny l nt nu nv nr nw in ni"/></div></div></a></div><h1 id="8855" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">查看我关于Dev.to的文章</h1><div class="nf ng ez fb nh ni"><a href="https://dev.to/theshubhagrwl" rel="noopener  ugc nofollow" target="_blank"><div class="nj ab dw"><div class="nk ab nl cl cj nm"><h2 class="bd hi fi z dy nn ea eb no ed ef hg bi translated">Shubh Agrawal - DEV简介</h2><div class="np l"><h3 class="bd b fi z dy nn ea eb no ed ef dx translated">全栈开发者| Django | React |竞争性编程</h3></div><div class="nq l"><p class="bd b fp z dy nn ea eb no ed ef dx translated">开发到</p></div></div><div class="nr l"><div class="nz l nt nu nv nr nw in ni"/></div></div></a></div><h1 id="184d" class="jn jo hh bd jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk bi translated">访问我的网站，在博客和社交平台上关注我</h1><p id="fd32" class="pw-post-body-paragraph ip iq hh ir b is kn iu iv iw ko iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated"><a class="ae le" href="http://theshubhagrwl.netlify.app/" rel="noopener ugc nofollow" target="_blank">http://theshubhagrwl.netlify.app/</a></p></div><div class="ab cl my mz go na" role="separator"><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd ne"/><span class="nb bw bk nc nd"/></div><div class="ha hb hc hd he"><p id="42e3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="mg">原载于2020年9月20日</em><a class="ae le" href="https://dev.to/theshubhagrwl/deploying-django-app-to-heroku-full-guide-4ce0" rel="noopener ugc nofollow" target="_blank"><em class="mg">https://dev . to</em></a><em class="mg">。</em></p></div></div>    
</body>
</html>