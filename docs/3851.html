<html>
<head>
<title>Modern Concurrency with async/await in Swift(Task). Part — 2.</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Swift中使用async/await的现代并发(任务)。第二部分。</h1>
<blockquote>原文：<a href="https://medium.com/globant/modern-concurrency-with-async-await-in-swift-task-part-2-c0f1abe6e1e0?source=collection_archive---------0-----------------------#2022-04-01">https://medium.com/globant/modern-concurrency-with-async-await-in-swift-task-part-2-c0f1abe6e1e0?source=collection_archive---------0-----------------------#2022-04-01</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="f063" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">在这篇文章中，我们将学习任务</h2></div><p id="d6ae" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果您还没有阅读第1部分，请先阅读。<br/><a class="ae js" rel="noopener" href="/@rahul.patel_41877/modern-concurrency-with-async-await-in-swift-part-1-2e4ee3272cc8">https://medium . com/@ Rahul . Patel _ 41877/modern-concurrency-with-async-await-in-swift-part-1-2e 4ee 3272 c8</a></p></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><p id="eb39" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们来了解一下<strong class="iy hi">任务</strong></p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="93a0" class="kj kk hh kf b fi kl km l kn ko">- A task is a unit of asynchronous work.</span><span id="b55e" class="kj kk hh kf b fi kp km l kn ko">- A task provides new context to execute code concurrently</span><span id="5dd0" class="kj kk hh kf b fi kp km l kn ko">- The Swift compiler checks for usage of tasks, to prevent concurrency bugs</span><span id="3950" class="kj kk hh kf b fi kp km l kn ko">- Calling the async function does not mean creating a task.</span></pre><h1 id="bba1" class="kq kk hh bd kr ks kt ku kv kw kx ky kz in la io lb iq lc ir ld it le iu lf lg bi translated">任务类型</h1><ol class=""><li id="ca49" class="lh li hh iy b iz lj jc lk jf ll jj lm jn ln jr lo lp lq lr bi translated">任务(非结构化)</li><li id="25d9" class="lh li hh iy b iz ls jc lt jf lu jj lv jn lw jr lo lp lq lr bi translated">异步let任务/异步let绑定(结构化)</li><li id="8799" class="lh li hh iy b iz ls jc lt jf lu jj lv jn lw jr lo lp lq lr bi translated">小组任务(结构化)</li><li id="74ba" class="lh li hh iy b iz ls jc lt jf lu jj lv jn lw jr lo lp lq lr bi translated">分离的任务(非结构化)</li></ol></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><h2 id="4318" class="kj kk hh bd kr lx ly lz kv ma mb mc kz jf md me lb jj mf mg ld jn mh mi lf mj bi translated">工作</h2><p id="4506" class="pw-post-body-paragraph iw ix hh iy b iz lj ii jb jc lk il je jf mk jh ji jj ml jl jm jn mm jp jq jr ha bi translated">我们可以使用Task在任何地方调用异步函数。我们还指定了操作的优先级。</p><figure class="ka kb kc kd fd mn"><div class="bz dy l di"><div class="mo mp l"/></div></figure><p id="a996" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果你想在操场上运行这个，别忘了添加下面的代码</p><pre class="ka kb kc kd fd ke kf kg kh aw ki bi"><span id="dd43" class="kj kk hh kf b fi kl km l kn ko"><strong class="kf hi">import</strong> _Concurrency<br/><strong class="kf hi">import</strong> PlaygroundSupport</span><span id="e0a3" class="kj kk hh kf b fi kp km l kn ko">PlaygroundPage.current.needsIndefiniteExecution = <strong class="kf hi">true</strong></span></pre></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><h2 id="7949" class="kj kk hh bd kr lx ly lz kv ma mb mc kz jf md me lb jj mf mg ld jn mh mi lf mj bi translated">异步let任务/异步let绑定</h2><p id="3e79" class="pw-post-body-paragraph iw ix hh iy b iz lj ii jb jc lk il je jf mk jh ji jj ml jl jm jn mm jp jq jr ha bi translated">这将允许开发人员创建一个异步变量，其值将从异步函数中分配。<br/>使用这个变量时，我们必须写await，因为这些变量是从异步函数中计算出来的</p><figure class="ka kb kc kd fd mn"><div class="bz dy l di"><div class="mo mp l"/></div></figure></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><h2 id="270d" class="kj kk hh bd kr lx ly lz kv ma mb mc kz jf md me lb jj mf mg ld jn mh mi lf mj bi translated">小组任务</h2><p id="2352" class="pw-post-body-paragraph iw ix hh iy b iz lj ii jb jc lk il je jf mk jh ji jj ml jl jm jn mm jp jq jr ha bi translated">任务组用于具有动态宽度的并发，在调用多个异步任务时必须使用它。我们可以通过一个名为<strong class="iy hi"> withTaskGroup <br/> </strong>的函数来实现这一点。在实现多个异步调用的同时，我们还需要注意数据竞争，这有时会导致崩溃。<br/>此处<strong class="iy hi">异步序列</strong>进入画面，因为组已确认异步序列协议循环通过。<br/>这将帮助您迭代可用的元素。这就是为什么我们在await 循环的<strong class="iy hi">变量前写Await关键字</strong></p><figure class="ka kb kc kd fd mn"><div class="bz dy l di"><div class="mo mp l"/></div></figure></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><h2 id="37c0" class="kj kk hh bd kr lx ly lz kv ma mb mc kz jf md me lb jj mf mg ld jn mh mi lf mj bi translated"><strong class="ak">分离任务</strong></h2><p id="89d4" class="pw-post-body-paragraph iw ix hh iy b iz lj ii jb jc lk il je jf mk jh ji jj ml jl jm jn mm jp jq jr ha bi translated">分离的任务和正常的任务有点不同。在结构化任务中，操作使用类似子任务的结构化并发功能。子任务继承父任务的优先级和任务本地存储，取消父任务会自动取消其所有子任务。您需要用一个分离的任务手动处理这些考虑事项。</p><figure class="ka kb kc kd fd mn"><div class="bz dy l di"><div class="mo mp l"/></div></figure><figure class="ka kb kc kd fd mn er es paragraph-image"><div role="button" tabindex="0" class="mr ms di mt bf mu"><div class="er es mq"><img src="../Images/bc1048818dcde1c285c8c84782dd1a3e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SfTeY3ea6-foDC2uIVgacA.png"/></div></div></figure><p id="df3f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">要深入了解<strong class="iy hi">结构并发&amp;任务</strong>请观看https://developer.apple.com/videos/play/wwdc2021/10134/<br/>WWDC<a class="ae js" href="https://developer.apple.com/videos/play/wwdc2021/10134/" rel="noopener ugc nofollow" target="_blank">视频</a></p></div></div>    
</body>
</html>