<html>
<head>
<title>Create Script to check JavaScript and Golang Regex</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建脚本来检查JavaScript和Golang正则表达式</h1>
<blockquote>原文：<a href="https://medium.easyread.co/create-script-to-check-javascript-and-golang-regex-1bfa047586a7?source=collection_archive---------3-----------------------#2022-10-28">https://medium.easyread.co/create-script-to-check-javascript-and-golang-regex-1bfa047586a7?source=collection_archive---------3-----------------------#2022-10-28</a></blockquote><div><div class="fc ie if ig ih ii"/><div class="ij ik il im in"><div class=""/><figure class="gl gn jo jp jq jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi jn"><img src="../Images/9a86683bfb53c0a47b5d27d69ef344c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LWMysRbkvsqInLSOFk5yIA.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Golang &amp; JavaScript Regex Compability</figcaption></figure><h1 id="cb2e" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">介绍</h1><p id="1120" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">大家好！还是跟我分享一些软件工程领域中关于技术相关的经验，想法，或者看法。在本文中，我想分享如何使用Golang创建一个脚本来检查JavaScript和Golang的正则表达式！</p><h1 id="be49" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">背景问题</h1><p id="1a12" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">我有一个使用Golang作为后端服务的项目经验，在前端，我们使用JavaScript。我们有一个使用正则表达式来验证一些输入的特性。正则表达式存储在数据库中，后端和前端都使用相同的正则表达式来验证输入。</p><p id="75a4" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">但是我们有时发现正则表达式对双方都不起作用。就像它在后端工作，但在前端不工作。例如，这个正则表达式:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="292d" class="mm kd iq mi b gy mn mo l mp mq">^[\p{Hiragana}\p{Katakana}ー]{1,20}$</span></pre><p id="28c0" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">这是使用Go运行时的结果(工作正常):</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi mr"><img src="../Images/2bee1d9a99555145f2492afc339014bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J5Um5Lt5muTQMTdEkNgB3g.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Regex test using Go</figcaption></figure><p id="7b1a" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">然而，使用JavaScript会产生相反的结果:</p><figure class="md me mf mg gt jr gh gi paragraph-image"><div role="button" tabindex="0" class="js jt di ju bf jv"><div class="gh gi ms"><img src="../Images/cf167c74a4bc2675012cc39a174124c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A0ggn106YIqs-hVnt8Q3Jw.png"/></div></div><figcaption class="jy jz gj gh gi ka kb bd b be z dk">Regex test using JavaScript</figcaption></figure><h1 id="87a4" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">解决办法</h1><p id="8d58" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">那么如何检查它的解决方案是创建一个脚本来验证两种语言的兼容性。</p><p id="caa0" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">在Golang中，有一个运行JavaScript代码的库叫做otto。包otto是一个用Go原生编写的JavaScript解析器和解释器。因此，我们可以在Golang中创建一个脚本，并对两者进行验证！</p><p id="f753" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">如果您想了解更多关于otto的信息，请查看以下链接:</p><div class="mt mu gp gr mv mw"><a href="https://github.com/robertkrimen/otto" rel="noopener  ugc nofollow" target="_blank"><div class="mx ab fo"><div class="my ab mz cl cj na"><h2 class="bd ir gy z fp nb fr fs nc fu fw ip bi translated">GitHub-robertkrimen/Otto:Go(golang)中的JavaScript解释器</h2><div class="nd l"><h3 class="bd b gy z fp nb fr fs nc fu fw dk translated">Go (golang)中的一个JavaScript解释器。在GitHub上创建一个帐户，为robertkrimen/otto开发做贡献。</h3></div><div class="ne l"><p class="bd b dl z fp nb fr fs nc fu fw dk translated">github.com</p></div></div><div class="nf l"><div class="ng l nh ni nj nf nk jw mw"/></div></div></a></div><p id="2e53" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">下面是我用来检查正则表达式的脚本:</p><figure class="md me mf mg gt jr"><div class="bz fp l di"><div class="nl nm l"/></div></figure><p id="2d1f" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">当使用一些输入参数运行脚本时，我们可以像这样检查:</p><pre class="md me mf mg gt mh mi mj mk aw ml bi"><span id="28f5" class="mm kd iq mi b gy mn mo l mp mq">go run main.go -regex='^[\p{Hiragana}\p{Katakana}ー]{1,20}$' -input='ひらがな'<br/>2022/10/28 17:47:21 [PASS][Golang] input: "ひらがな" regex: "^[\p{Hiragana}\p{Katakana}ー]{1,20}$"<br/>2022/10/28 17:47:21 [FAIL][JavaScript] input: "ひらがな" regex: "^[\p{Hiragana}\p{Katakana}ー]{1,20}$"<br/>2022/10/28 17:47:21 ### Found some failed check on a regex!! ###<br/>exit status 1</span></pre><p id="4057" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">耶！成功了！然后我们使用上面的代码来检查我们拥有的每个正则表达式。</p><h1 id="188d" class="kc kd iq bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">关闭</h1><p id="889c" class="pw-post-body-paragraph la lb iq lc b ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ij bi translated">这种情况下的otto实现只是一小段代码。所以如果你想用这个库探索更多的想法，请随意！</p><p id="b618" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">基本上，这个实验的结论是，如果我们需要验证Golang和JavaScript的一些代码，我们可以很容易地使用Golang和库在Golang代码中运行JS代码。</p><p id="9e59" class="pw-post-body-paragraph la lb iq lc b ld ly lf lg lh lz lj lk ll ma ln lo lp mb lr ls lt mc lv lw lx ij bi translated">感谢您的阅读！希望这篇文章对你有用！！</p></div></div>    
</body>
</html>