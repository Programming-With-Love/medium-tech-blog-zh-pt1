<html>
<head>
<title>Ethereum 101 - A Deeper Look Into Ethereum!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">以太坊101 -深入了解以太坊！</h1>
<blockquote>原文：<a href="https://medium.com/edureka/ethereum-tutorial-with-smart-contracts-db7f80175646?source=collection_archive---------7-----------------------#2018-03-07">https://medium.com/edureka/ethereum-tutorial-with-smart-contracts-db7f80175646?source=collection_archive---------7-----------------------#2018-03-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/e3af5e558ebadb7ed2881ea1251a1732.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*3sb8t3DSzx60NU9Ui4WiiQ.png"/></div><figcaption class="il im et er es in io bd b be z dx">Ethereum Tutorial — Edureka</figcaption></figure><p id="e577" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这篇以太坊教程文章中，我将解释以太坊体系结构的内部工作原理，并通过一个简单的智能契约向您展示以太坊的实现。</p><p id="6c8f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我认为以太坊是一个可编程的区块链，未来将服务于大多数B2C企业。以太坊允许开发人员自由创建在区块链上执行的复杂模型，而不是限制他们进行像比特币区块链这样的预定义操作。</p><p id="62ba" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">通过这种方法，以太坊将自己变成了一个平台，用于大量分散的应用程序和组织，包括但不限于加密货币。</p><p id="c70f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我将在这个“以太坊教程”博客中详尽地讨论各种主题。这些主题包括:</p><ul class=""><li id="8a56" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">以太坊账户</li><li id="e510" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">以太坊虚拟机</li><li id="9b6f" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">以太坊网络</li><li id="08e4" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">乙醚和气体</li><li id="ac82" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">以太坊采矿</li></ul><h1 id="1868" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">以太坊账户</h1><p id="111d" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">以太坊网络有两种类型的账户，即:</p><ul class=""><li id="cea5" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">外部账户</li><li id="e907" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">合同账户</li></ul><p id="7c96" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这些账户，无论是外部账户还是合同账户，都被称为“状态对象”，构成以太网的“状态”。每个状态对象都有一个明确定义的状态。对于外部账户，状态由账户余额组成，而对于合约账户，状态由存储器存储和余额定义。</p><p id="6578" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我将外部账户简称为账户。这些账户由网络的外部代理拥有和代表，包括每个普通用户、矿工、自动代理等。</p><p id="a9d9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这些帐户通常在RSA等公钥加密算法的帮助下得到控制。外部账户的主要目的是作为用户与以太坊区块链交互的媒介。</p><p id="b28f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">另一方面，契约帐户是驻留在区块链特定地址的代码集合。这些契约由外部帐户调用，或者由其他契约通过特定的行动号召功能调用。这些合同是用像Solidity、Serpent或LLL这样的高级脚本语言编写的。驻留在以太坊区块链上的每个合同都以一种称为EVM(以太坊虚拟机)字节码的特定格式存储，这是一种以太坊特定的二进制格式。既然我已经告诉了你关于EVM字节码的事情，我解释一下EVM才公平。</p><h1 id="c95b" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">以太坊虚拟机</h1><p id="2d43" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">以太坊以一种质朴的方式定义了一套通用的协议，这些协议已经成为分散式应用程序开发的支柱。其核心是以太坊虚拟机。下图解释了该架构:</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es le"><img src="../Images/ebc68a10be18209d3765d8e5aa2fe1f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*okXcju42JTXEXGW39r38aQ.png"/></div></div></figure><p id="a54a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">值得注意的是，以太坊虚拟机不仅是完全沙盒化的，而且是完全隔离的。这意味着当前在EVM上运行的代码不能访问网络或文件系统，并且可以有节制地访问其他契约。<br/> <br/>既然我们了解了平台的核心，让我们更深入地看看网络节点。</p><h1 id="8afc" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">以太坊网络</h1><p id="71f7" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">以太坊网络是一个公共区块链网络。它形成了在网络上运行的所有分散的对等应用和组织的基础。网络由两种类型的节点组成，即满节点和轻量节点。</p><p id="3d62" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">完整节点</strong>包含自genesis块以来的全部事务历史。它们充分证明了区块链网络的完整性。完整的节点必须包含根据以太坊规范建立的规则验证过的每一个交易。</p><p id="fdd7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">另一方面，轻量级节点</strong>只包含整个区块链的一个子集。这些类型的节点主要用在电子钱包中，电子钱包本质上必须是轻量级的，因此整个区块链不能存储在其上。相反，这些节点不验证每个块或事务，并且可能没有当前区块链状态的副本。它们依赖完整的节点来提供缺失的细节(或者只是缺少特定的功能)。轻型节点的优势在于它们可以更快地启动和运行，可以在更多计算/内存受限的设备上运行，并且不会消耗几乎同样多的存储。<br/> <br/>每个公共区块链都有一种货币与之相连。以太坊也不例外。让我们更深入地了解一下以太坊的加密货币。</p><h1 id="93a0" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">乙醚和气体</h1><p id="7330" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">以太是用于支付以太坊网络交易的加密货币的名称。除了支付一般交易和服务费用，乙醚还被用来购买天然气，而天然气又被用来支付EVM内的计算费用。</p><p id="bf56" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">乙醚是公制单位，有很多面额，有助于准确支付交易和汽油。最小的货币单位叫做卫。下表列出了各种面额及其具体名称:</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es ln"><img src="../Images/9ba7c1c580322cf997bcdc2b9afb2dbb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PeVfpvYml1yL3XAeU6yFzA.png"/></div></div></figure><p id="06db" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如前所述，我们知道EVM负责运行部署在其网络上的代码。那么，是什么阻止了人们在EVM上运行无限循环并使其内存完全超载呢？这就是气体概念的由来。</p><p id="c363" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Gas被用作为网络上的计算资源付费的度量。网络上的每个合同都有一个设定的最大天然气量，可以用于计算。这被称为"<strong class="ir hi">气体极限</strong>"其他相关气体术语如下:</p><blockquote class="lo lp lq"><p id="9c04" class="ip iq lr ir b is it iu iv iw ix iy iz ls jb jc jd lt jf jg jh lu jj jk jl jm ha bi translated"><strong class="ir hi">汽油价格</strong>:这是汽油的成本，以乙醚等代币及其其他面额表示。为了稳定气价，气价是浮动值，使得如果代币或货币的成本波动，气价变化以保持相同的实际值。</p><p id="ae27" class="ip iq lr ir b is it iu iv iw ix iy iz ls jb jc jd lt jf jg jh lu jj jk jl jm ha bi translated"><strong class="ir hi">天然气费</strong>:这实际上是运行特定交易或程序(称为合同)所需支付的天然气数量。</p></blockquote><p id="0295" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">因此，如果有人试图运行一段永远运行的代码，该契约最终将超过其gas限制，并且调用该契约的整个事务将回滚到其先前的状态。</p><p id="2a66" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们知道了货币，让我们来看看产生新货币的过程。</p><h1 id="894b" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">采矿</h1><p id="0f24" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">以太坊，很像其他公共区块链技术，通过基于激励的模型来确保安全性。这被称为工作验证机制。下图显示了以太坊采矿的工作原理:</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es lv"><img src="../Images/a75aaffdcfbc6f7e51c39e517197a631.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*msWz5hJPnh3qcnwy_8LrWg.png"/></div></div></figure><p id="80f5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">从更技术性的角度来看，所使用的工作证明算法被称为Ethash，这是一种受Dagger-Hashimoto算法启发的散列算法。</p><p id="7020" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们已经看到了以太坊的工作架构，并讨论了它的基本元素，让我们看看一个现实世界的问题以及解决该问题的以太坊方法。</p><h1 id="b49a" class="kb kc hh bd kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky bi translated">分散式众筹用例</h1><h2 id="425e" class="lw kc hh bd kd lx ly lz kh ma mb mc kl ja md me kp je mf mg kt ji mh mi kx mj bi translated"><strong class="ak">问题陈述</strong>:</h2><p id="ef20" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">在当今世界，一个好的“想法”并不是成功创业的一切。实现一个想法需要大量的资金和努力。这就是像“Kickstarter”这样的组织出现的原因。他们为项目提供公众曝光度，这是他们的项目运作所需的捐款，但这种动机的集中架构也有其缺点，主要表现在回报的处理方式上。由于集中的权力机构做出所有的决定，系统倾向于这样的规则:</p><ul class=""><li id="4cab" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">错过活动最后期限的人不能再参加了</li><li id="aa89" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">任何改变主意的捐赠者都不能出来</li></ul><h2 id="72a9" class="lw kc hh bd kd lx ly lz kh ma mb mc kl ja md me kp je mf mg kt ji mh mi kx mj bi translated"><strong class="ak">接近</strong>:</h2><p id="bb2a" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">我们采用分散的方法来解决问题，如下图所示:</p><figure class="lf lg lh li fd ii er es paragraph-image"><div role="button" tabindex="0" class="lj lk di ll bf lm"><div class="er es le"><img src="../Images/c31691082f4f3c8bff64504208cf41c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AZzRNEUPg0KvpDyx_rrbig.png"/></div></div></figure><h2 id="c013" class="lw kc hh bd kd lx ly lz kh ma mb mc kl ja md me kp je mf mg kt ji mh mi kx mj bi translated"><strong class="ak">解决方案</strong>:</h2><p id="f1d0" class="pw-post-body-paragraph ip iq hh ir b is kz iu iv iw la iy iz ja lb jc jd je lc jg jh ji ld jk jl jm ha bi translated">下面是针对上述问题陈述的solidity智能合约。</p><pre class="lf lg lh li fd mk ml mm mn aw mo bi"><span id="fc7f" class="lw kc hh ml b fi mp mq l mr ms">pragma solidity ^0.4.16;<br/> <br/>interface token {<br/>function transfer(address receiver, uint amount);<br/>}<br/> <br/>contract Crowdsale {<br/>address public beneficiary;<br/>uint public fundingGoal;<br/>uint public amountRaised;<br/>uint public deadline;<br/>uint public price;<br/>token public tokenReward;<br/>mapping(address =&gt; uint256) public balanceOf;<br/>bool fundingGoalReached = false;<br/>bool crowdsaleClosed = false;<br/> <br/>event GoalReached(address recipient, uint totalAmountRaised);<br/>event FundTransfer(address backer, uint amount, bool isContribution);<br/> <br/>/**<br/>* Constrctor function<br/>*<br/>* Setup the owner<br/>*/<br/>function Crowdsale(<br/>address ifSuccessfulSendTo; // the address of the owner when funding is successful<br/>uint fundingGoalInEthers; // target amount to raise<br/>uint durationInMinutes; //given time<br/>uint etherCostOfEachToken; //cost of equity in ether<br/>address addressOfTokenUsedAsReward; //token address<br/>) {<br/>beneficiary = ifSuccessfulSendTo;<br/>fundingGoal = fundingGoalInEthers * 1 ether;<br/>deadline = now + durationInMinutes * 1 minutes;<br/>price = etherCostOfEachToken * 1 ether;<br/>tokenReward = token(addressOfTokenUsedAsReward);<br/>}<br/> <br/>/**<br/>* Fallback function<br/>*<br/>* The function without name is the default function that is called whenever anyone sends funds to a contract<br/>*/<br/>function () payable {<br/>require(!crowdsaleClosed);<br/>uint amount = msg.value;<br/>balanceOf[msg.sender] += amount;<br/>amountRaised += amount;<br/>tokenReward.transfer(msg.sender, amount / price);<br/>FundTransfer(msg.sender, amount, true);<br/>}<br/> <br/>modifier afterDeadline() { if (now &lt;= deadline) _; }<br/> <br/>/**<br/>* Check if goal was reached<br/>*<br/>* Checks if the goal or time limit has been reached and ends the campaign<br/>*/<br/>function checkGoalReached() afterDeadline {<br/>if (amountRaised &gt;= fundingGoal){<br/>fundingGoalReached = true;<br/>GoalReached(beneficiary, amountRaised);<br/>}<br/>crowdsaleClosed = true;<br/>}<br/> <br/>/**<br/>* Withdraw the funds<br/>*<br/>* Checks to see if goal or time limit has been reached, and if so, and the funding goal was reached,<br/>* sends the entire amount to the beneficiary. If goal was not reached, each contributor can withdraw<br/>* the amount they contributed.<br/>*/<br/>function safeWithdrawal() afterDeadline {<br/>if (!fundingGoalReached) {<br/>uint amount = balanceOf[msg.sender];<br/>balanceOf[msg.sender] = 0;<br/>if (amount &gt; 0) {<br/>if (msg.sender.send(amount)) {<br/>FundTransfer(msg.sender, amount, false);<br/>} else {<br/>balanceOf[msg.sender] = amount;<br/>}<br/>}<br/>}<br/> <br/>if (fundingGoalReached &amp;&amp; beneficiary == msg.sender) {<br/>if (beneficiary.send(amountRaised)) {<br/>FundTransfer(beneficiary, amountRaised, false);<br/>} else {<br/>//If we fail to send the funds to beneficiary, unlock funders balance<br/>fundingGoalReached = false;<br/>}<br/>}<br/>}<br/>}</span></pre><p id="b622" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">到此，我们已经成功地结束了这个博客。如果你想查看更多关于人工智能、DevOps、道德黑客等市场最热门技术的文章，你可以参考Edureka的官方网站。</p><p id="27e8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请留意本系列中的其他文章，它们将解释区块链的其他各个方面。</p><blockquote class="lo lp lq"><p id="f6cb" class="ip iq lr ir b is it iu iv iw ix iy iz ls jb jc jd lt jf jg jh lu jj jk jl jm ha bi translated">1.<a class="ae mt" rel="noopener" href="/edureka/blockchain-tutorial-d05f9c36b62b">区块链教程</a></p><p id="e656" class="ip iq lr ir b is it iu iv iw ix iy iz ls jb jc jd lt jf jg jh lu jj jk jl jm ha bi translated">2.<a class="ae mt" rel="noopener" href="/edureka/ethereum-private-network-tutorial-22ef4119e4c3">以太坊专用网络</a></p><p id="96b8" class="ip iq lr ir b is it iu iv iw ix iy iz ls jb jc jd lt jf jg jh lu jj jk jl jm ha bi translated">3.<a class="ae mt" rel="noopener" href="/edureka/smart-contracts-301d39565b76">什么是智能合约？</a></p><p id="71eb" class="ip iq lr ir b is it iu iv iw ix iy iz ls jb jc jd lt jf jg jh lu jj jk jl jm ha bi translated">4.<a class="ae mt" rel="noopener" href="/edureka/solidity-tutorial-ca49906bdd47">坚固性教程</a></p><p id="2614" class="ip iq lr ir b is it iu iv iw ix iy iz ls jb jc jd lt jf jg jh lu jj jk jl jm ha bi translated">5.<a class="ae mt" rel="noopener" href="/edureka/developing-ethereum-dapps-with-truffle-7533289c8b2">松露以太坊教程</a></p><p id="fdb2" class="ip iq lr ir b is it iu iv iw ix iy iz ls jb jc jd lt jf jg jh lu jj jk jl jm ha bi translated">6.<a class="ae mt" rel="noopener" href="/edureka/ethereum-development-tools-7175503a1ac7">最佳以太坊开发工具</a></p><p id="5792" class="ip iq lr ir b is it iu iv iw ix iy iz ls jb jc jd lt jf jg jh lu jj jk jl jm ha bi translated">7.<a class="ae mt" rel="noopener" href="/edureka/hyperledger-fabric-184667460-edc184667460">总账结构</a></p><p id="d817" class="ip iq lr ir b is it iu iv iw ix iy iz ls jb jc jd lt jf jg jh lu jj jk jl jm ha bi translated">8.<a class="ae mt" rel="noopener" href="/edureka/hyperledger-vs-ethereum-bdc868e10817"> Hyperledge vs以太坊</a></p></blockquote></div><div class="ab cl mu mv go mw" role="separator"><span class="mx bw bk my mz na"/><span class="mx bw bk my mz na"/><span class="mx bw bk my mz"/></div><div class="ha hb hc hd he"><p id="c28a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="lr">原载于2018年3月7日</em><a class="ae mt" href="https://www.edureka.co/blog/ethereum-tutorial-with-smart-contracts/" rel="noopener ugc nofollow" target="_blank"><em class="lr">【www.edureka.co</em></a><em class="lr">。</em></p></div></div>    
</body>
</html>