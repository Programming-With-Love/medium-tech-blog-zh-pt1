<html>
<head>
<title/>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1/>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/sharing-gradle-configuration-in-multi-module-android-projects-370602f526a7?source=collection_archive---------3-----------------------#2019-10-31">https://medium.com/capital-one-tech/sharing-gradle-configuration-in-multi-module-android-projects-370602f526a7?source=collection_archive---------3-----------------------#2019-10-31</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><h2 id="a3e5" class="hf hg hh bd hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id bi translated">在多模块Android项目中共享梯度配置</h2><figure class="if ig ih ii fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ie"><img src="../Images/60edeefc8ca2dd36ec31845251933792.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*srvR_kuUGVpjo_ozE2E0pQ.png"/></div></div></figure><p id="e598" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja hr jb jc jd hv je jf jg hz jh ji jj jk ha bi translated"><em class="jl">本帖最初出现在我的个人博客【https://handstandsam.com】<a class="ae jm" href="https://handstandsam.com" rel="noopener ugc nofollow" target="_blank"><em class="jl"/></a></em></p><p id="94f8" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja hr jb jc jd hv je jf jg hz jh ji jj jk ha bi translated">在我参与的Android项目中，使用多个模块有助于我们将代码分解成逻辑组件。它们还可以实现更快的增量构建，以及更多的模块化代码。多模块项目的一个问题是有很多冗长的配置。这篇文章向你展示了一种在你的Android库模块之间共享公共配置的方法，以减少样板文件的梯度配置。</p><p id="f4d9" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja hr jb jc jd hv je jf jg hz jh ji jj jk ha bi translated">我在GitHub上的ShoppingApp项目中的一个PR中做了这个改变，最终删除了7个库模块的净90行代码。</p><figure class="if ig ih ii fd ij er es paragraph-image"><div role="button" tabindex="0" class="ik il di im bf in"><div class="er es ie"><img src="../Images/23f22e582b67fd1e74abbc65ea9cc3e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WisOW5lf58-2biqAq49xPQ.png"/></div></div></figure><h2 id="d263" class="hf hg hh bd hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id bi translated"><strong class="ak">申请自:" _ _ _ _ _ _ _。</strong></h2><p id="1574" class="pw-post-body-paragraph iq ir hh is b it jn iv iw ix jo iz ja hr jp jc jd hv jq jf jg hz jr ji jj jk ha bi translated">通过使用“应用于:”并指定要添加内容的文件，可以将另一个Gradle文件的内容添加到当前文件中。</p><pre class="if ig ih ii fd js jt ju jv aw jw bi"><span id="2042" class="hf hg hh jt b fi jx jy l jz ka">apply from: “$rootProject.projectDir/android-library.gradle”</span></pre><h2 id="b280" class="hf hg hh bd hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id bi translated">$rootProject.projectDir</h2><p id="138a" class="pw-post-body-paragraph iq ir hh is b it jn iv iw ix jo iz ja hr jp jc jd hv jq jf jg hz jr ji jj jk ha bi translated">模块可以存在于不同的目录结构中，所以通过利用<code class="du kb kc kd jt b">$rootProject.projectDir</code>属性，我们基于根项目目录指定路径。</p><h2 id="0b70" class="hf hg hh bd hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id bi translated">原始库模块build.gradle</h2><pre class="if ig ih ii fd js jt ju jv aw jw bi"><span id="cf2f" class="hf hg hh jt b fi jx jy l jz ka">apply plugin: ‘com.android.library’<br/>apply plugin: ‘kotlin-android’</span><span id="eae5" class="hf hg hh jt b fi ke jy l jz ka">android {<br/> compileSdkVersion Versions.compile_sdk</span><span id="f677" class="hf hg hh jt b fi ke jy l jz ka">defaultConfig {<br/> minSdkVersion Versions.min_sdk<br/> targetSdkVersion Versions.target_sdk<br/> versionCode 1<br/> versionName “1.0”</span><span id="ba6d" class="hf hg hh jt b fi ke jy l jz ka">testInstrumentationRunner <br/> “android.support.test.runner.AndroidJUnitRunner”<br/> }<br/>}</span><span id="0b73" class="hf hg hh jt b fi ke jy l jz ka">dependencies {<br/> implementation project(Modules.models)<br/> implementation Libs.kotlin_std_lib<br/>}</span></pre><h2 id="fd6f" class="hf hg hh bd hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id bi translated"><strong class="ak">结果库模块build.gradle </strong></h2><pre class="if ig ih ii fd js jt ju jv aw jw bi"><span id="6710" class="hf hg hh jt b fi jx jy l jz ka">apply from: “$rootProject.projectDir/android-library.gradle”</span><span id="2f3a" class="hf hg hh jt b fi ke jy l jz ka">dependencies {<br/> implementation project(Modules.models)<br/> implementation Libs.kotlin_std_lib<br/>}</span></pre><h2 id="346a" class="hf hg hh bd hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id bi translated"><strong class="ak">共享梯度文件</strong></h2><pre class="if ig ih ii fd js jt ju jv aw jw bi"><span id="ccfc" class="hf hg hh jt b fi jx jy l jz ka">apply plugin: ‘com.android.library’<br/>apply plugin: ‘kotlin-android’</span><span id="05b2" class="hf hg hh jt b fi ke jy l jz ka">android {<br/> compileSdkVersion Versions.compile_sdk</span><span id="d93f" class="hf hg hh jt b fi ke jy l jz ka">defaultConfig {<br/> minSdkVersion Versions.min_sdk<br/> targetSdkVersion Versions.target_sdk<br/> versionCode 1<br/> versionName “1.0”</span><span id="4306" class="hf hg hh jt b fi ke jy l jz ka">testInstrumentationRunner <br/> “android.support.test.runner.AndroidJUnitRunner”<br/> }<br/>}</span></pre><h2 id="d67a" class="hf hg hh bd hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id bi translated">如果你做一件事3次以上，提取功能</h2><p id="7569" class="pw-post-body-paragraph iq ir hh is b it jn iv iw ix jo iz ja hr jp jc jd hv jq jf jg hz jr ji jj jk ha bi translated">只要有可能和有意义，就使用通用配置来减少样板文件。如果你正在写代码，或者写Android Gradle配置，这个规则同样适用。这篇文章分享了一个“轻松取胜”的方法，你可以用它来更好地管理你的多模块项目。通过利用buildSrc，你可以做更多的事情来清理你的构建，你可以用Kotlin、Java或Groovy来编写，但那是另一篇文章了。</p><p id="7946" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja hr jb jc jd hv je jf jg hz jh ji jj jk ha bi translated"><em class="jl">在我的个人博客上查看更多Android内容</em><a class="ae jm" href="https://handstandsam.com" rel="noopener ugc nofollow" target="_blank"><em class="jl">https://handstandsam.com</em></a><em class="jl">。</em></p><figure class="if ig ih ii fd ij"><div class="bz dy l di"><div class="kf kg l"/></div></figure><h2 id="c3d8" class="hf hg hh bd hi hj hk hl hm hn ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic id bi translated">是的，我们在技术上是一家银行；在这里阅读更多<a class="ae jm" href="https://www.capitalone.com/tech/software-engineering/technically-its-a-bank/" rel="noopener ugc nofollow" target="_blank"/>。</h2></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><p id="2764" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja hr jb jc jd hv je jf jg hz jh ji jj jk ha bi translated"><em class="jl">披露声明:2019资本一。观点是作者个人的观点。除非本帖中另有说明，否则Capital One不隶属于所提及的任何公司，也不被这些公司认可。使用或展示的所有商标和其他知识产权是其各自所有者的财产。</em></p></div></div>    
</body>
</html>