<html>
<head>
<title>Media Playback and the must-have Support Library APIs</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">媒体播放和必备的支持库API</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/meida-playback-and-the-must-have-android-support-library-apis-9f48dc6b657e?source=collection_archive---------2-----------------------#2016-08-25">https://medium.com/androiddevelopers/meida-playback-and-the-must-have-android-support-library-apis-9f48dc6b657e?source=collection_archive---------2-----------------------#2016-08-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="b9ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当谈到媒体播放的最佳实践时，有很多API可以用来构建最佳体验。感谢支持库，你不需要担心的一件事就是API级别。但是有<a class="ae jc" href="https://developer.android.com/topic/libraries/support-library/features.html" rel="noopener ugc nofollow" target="_blank">很多支持库</a>，并且随着<a class="ae jc" href="https://developer.android.com/topic/libraries/support-library/revisions.html#24-2-0-v4-refactor" rel="noopener ugc nofollow" target="_blank"> v4支持库在版本24.2.0 </a>中分裂，找到所有你可能需要的媒体API仍然需要一点思考。</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es jd"><img src="../Images/f5880ff1e27c16fb1a628f80c7c08c11.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*YDyfoGcfyZKk3ne6yg4LDw.png"/></div><figcaption class="jl jm et er es jn jo bd b be z dx">What you really need to build a media playback app</figcaption></figure><h1 id="7dc3" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">媒体兼容支持库</h1><p id="a25b" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">查看新的split v4支持库时，您首先会注意到一个闪亮的新<a class="ae jc" href="https://developer.android.com/topic/libraries/support-library/features.html#v4-media-compat" rel="noopener ugc nofollow" target="_blank"> Media-Compat支持库</a>。正如您所料，这是绝大多数特定于媒体的支持库功能所在的地方。</p><p id="38ab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这一切都从<a class="ae jc" href="https://developer.android.com/reference/android/support/v4/media/session/MediaSessionCompat.html" rel="noopener ugc nofollow" target="_blank"><em class="ks">mediasessionpat</em></a>开始，它正好位于<a class="ae jc" href="https://www.youtube.com/watch?v=FBC1FgWe5X4" rel="noopener ugc nofollow" target="_blank">将您的媒体应用与系统</a>集成的中心。这是您如何通过提供元数据(如标题、艺术家和专辑)告诉系统正在播放什么媒体，以及您的应用程序支持什么媒体按钮事件(如播放或暂停)。</p><p id="87c8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了帮助处理那些媒体按钮事件，仅<em class="ks">支持库</em><a class="ae jc" href="https://developer.android.com/reference/android/support/v4/media/session/MediaButtonReceiver.html" rel="noopener ugc nofollow" target="_blank"><em class="ks">MediaButtonReceiver</em></a>使得从broadcast receiver(API 21之前的设备上需要)到您的媒体播放服务的媒体按钮事件变得容易，在那里您可以适当地处理它们。最棒的是:它是一个单独的清单条目和一行代码。</p><p id="840f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除此之外，<a class="ae jc" href="https://developer.android.com/reference/android/support/v4/media/MediaBrowserServiceCompat.html" rel="noopener ugc nofollow" target="_blank"><em class="ks">MediaBrowserServiceCompat</em></a>和<a class="ae jc" href="https://developer.android.com/reference/android/support/v4/media/MediaBrowserCompat.html" rel="noopener ugc nofollow" target="_blank"> MediaBrowserCompat </a>类是现代媒体播放应用的主干。它们充当媒体播放服务和其他组件(如UI或其他应用程序，如Android Auto)之间的预建通信协议。</p><h1 id="011f" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">片段支持库</h1><p id="ba28" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">Media-Compat还包含两个静态便利方法，<a class="ae jc" href="https://developer.android.com/reference/android/support/v4/media/session/MediaControllerCompat.html#setMediaController(android.app.Activity, android.support.v4.media.session.MediaControllerCompat)" rel="noopener ugc nofollow" target="_blank"><em class="ks">mediacontrollercompat . setmediacontroller()</em></a>和<em class="ks">mediacontrollercompat . getmediacontroller()</em>，如果您希望支持API 21之前的设备，则需要使用<a class="ae jc" href="https://developer.android.com/reference/android/support/v4/app/FragmentActivity.html" rel="noopener ugc nofollow" target="_blank"><em class="ks">fragmentation activity</em></a>，<a class="ae jc" href="https://developer.android.com/topic/libraries/support-library/features.html#v4-fragment" rel="noopener ugc nofollow" target="_blank">片段支持库</a>的一部分。</p><p id="773c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">除了为您提供一种简单的方法来检索您的<a class="ae jc" href="https://developer.android.com/reference/android/support/v4/media/session/MediaControllerCompat.html" rel="noopener ugc nofollow" target="_blank"><em class="ks">MediaControllerCompat</em></a>以从您的UI触发操作之外，它们还通过调用API 21+<a class="ae jc" href="https://developer.android.com/reference/android/app/Activity.html#setMediaController(android.media.session.MediaController)" rel="noopener ugc nofollow" target="_blank"><em class="ks">setMediaController()</em></a>在您的活动处于活动状态时捕获媒体按钮和音量事件，并确保它们被发送到您的<em class="ks"> MediaController </em>(即使您的<em class="ks"> MediaSession </em>处于非活动状态，例如在回放尚未开始的情况下)。</p><h1 id="0fcb" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">AppCompat</h1><p id="9b76" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated"><a class="ae jc" href="https://developer.android.com/topic/libraries/support-library/features.html#v7-appcompat" rel="noopener ugc nofollow" target="_blank"> AppCompat </a>支持库支持目前应用程序中预期的许多材料设计主题，但它也是<a class="ae jc" href="https://developer.android.com/reference/android/support/v7/app/NotificationCompat.MediaStyle.html" rel="noopener ugc nofollow" target="_blank"> <em class="ks">通知Compat的家。media style</em>T5。</a></p><p id="d4d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">MediaStyle 是API 21中添加的一种通知样式，通过支持库，它也可以在旧设备上使用。由于控制播放对于媒体播放应用程序来说至关重要，MediaStyle将这些作为优先事项，使您添加到通知中的操作可以在折叠的通知中使用，甚至可以在扩展的通知中使用更多操作。</p><h1 id="90e0" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">媒体路由器支持库</h1><p id="b780" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">对Google Cast支持至关重要的是，<a class="ae jc" href="https://developer.android.com/topic/libraries/support-library/features.html#v7-mediarouter" rel="noopener ugc nofollow" target="_blank"> MediaRouter支持库</a>构建了连接按钮、对话框和其他与这些设备交互所需的组件。</p><p id="a2b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你正在使用Android 的<a class="ae jc" href="https://developers.google.com/cast/docs/android_sender_setup" rel="noopener ugc nofollow" target="_blank"> Cast v3，包含MediaRouter支持库是你从一开始就要做的事情之一。</a></p><h1 id="44a7" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">每个支持库？</h1><p id="d2b0" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">当然，每个<a class="ae jc" href="https://developer.android.com/topic/libraries/support-library/features.html" rel="noopener ugc nofollow" target="_blank">支持库</a>的存在都有一个很好的理由——它们有一些有用的功能，可以简化应用程序中的逻辑，或者添加与Android API级别无关的全新功能。虽然上面概述的库都是支持构建优秀应用程序所需的媒体API所需的库，但我鼓励您在构建应用程序时仔细查看整个<em class="ks"> android.support </em>名称空间中的完整类列表。</p><p id="de13" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"># BuildBetterApps</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="ku kv di kw bf kx"><div class="er es kt"><img src="../Images/5f245535a178a74efaf9472e7bb63e93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-GUCehPLslOuQsIthtQ6uw.png"/></div></div></figure></div></div>    
</body>
</html>