<html>
<head>
<title>The importance of USB SuperSpeed for Android Development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">USB超高速对Android开发的重要性</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/the-importance-of-usb-superspeed-for-android-development-e87534dc8c75?source=collection_archive---------4-----------------------#2019-12-05">https://medium.com/androiddevelopers/the-importance-of-usb-superspeed-for-android-development-e87534dc8c75?source=collection_archive---------4-----------------------#2019-12-05</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/b09e2f50188a35e1796cfed4bc43b39d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CvxD6HwvuzZ1bQOC-HibjA.png"/></div></div></figure><div class=""/><h1 id="5579" class="ip iq hs bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">概观</h1><p id="0950" class="pw-post-body-paragraph jn jo hs jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">迭代速度是构建高质量Android应用的关键因素。你进步得越快，结果就越完美。本文讨论如何优化部署时间。</p><h1 id="6d1a" class="ip iq hs bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">部署101</h1><p id="c07f" class="pw-post-body-paragraph jn jo hs jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">Android Studio 3.5进行了大量改进，以缩短迭代时间。根据代码的结构，开发人员现在可以选择使用<a class="ae kl" rel="noopener" href="/androiddevelopers/android-studio-project-marble-apply-changes-e3048662e8cd">应用更改</a>，这将交换更改的代码并重新启动当前活动。如果代码与活动生命周期无关，可以使用“应用代码更改”来代替，以便只交换修改的代码，而不重新启动正在运行的活动。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es km"><img src="../Images/bbca693a290fb9dcca94eac97a27b9a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qORC8h8yTi6VU4KhkEdJxg.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx">Apply Changes introduced two new ways to deploy an app.</figcaption></figure><p id="e339" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">在应用更改的基础上，Android Studio 3.5引入了“增量推送”，在后续的运行调用中，只向设备发送APK中已更改的部分。通过<a class="ae kl" href="http://man7.org/linux/man-pages/man2/sendfile.2.html" rel="noopener ugc nofollow" target="_blank"> sendfile(2) </a>将新部分和“旧”部分交替提供给包管理器，在设备上重建应用程序，实现接近零拷贝的安装。</p><p id="b113" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">总之，这些大大减少了安装时间。然而，为了充分利用这些优化，开发人员必须注意设备连接的质量。</p><h1 id="0f2d" class="ip iq hs bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">为什么USB速度很重要</h1><p id="fcb4" class="pw-post-body-paragraph jn jo hs jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">无论“增量推送”是否触发，一些数据都必须传输到设备。对于仿真器，这是通过TCP/IP完成的，但是在真实设备的情况下，将使用USB。USB连接越快，等待的时间就越少，迭代的速度就越快。</p><p id="ab99" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">好消息是USB越来越快了。1996年的第一个版本提供了最大12 Mb/s，随着2019年8月4.0版的发布，我们现在已经进入了多Gb/s时代。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es la"><img src="../Images/4dda52e387c0cadd179ed2e8fa3144e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6xklAWvSuQtwk8grQvL5aQ.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx">From 1996 to 2019, USB signal rate improved from 1.5MiB/s to 40GiB/s.</figcaption></figure><p id="f1e2" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">如果你不太关注细节，USB是一项简单的技术。只要两个设备支持相同的USB版本，你只需抓住一根USB电缆，连接它们，它就可以工作了。客户端层甚至不需要改变。这是一顿“免费午餐”。</p><p id="034e" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">作为一名开发人员，保持最快的USB速度是非常重要的。在一定程度上(手机的闪存驱动器不能以USB 3.2的20 Gb/s写入，但可以超越USB 2.0)，USB传输速率和迭代速度之间存在直接的相关性。如果您使用50兆字节的apk，使用USB 3.0比USB 2.0快25%。你在每次安装上节省了整整一秒钟，这将在一天结束时累加起来。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lb"><img src="../Images/242c2489fa44c84586ed44bc6ae7a13a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JchWhlwgdhR7dZAIkjB1xA.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx">Installing a 50MiB app with USB 3.0 is 30% faster than with USB 2.0.</figcaption></figure><p id="99ee" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">坏消息是，使用USB 3.0设备以USB 2.0的速度运行非常容易。使用错误的电缆或坏的集线器是确保速度慢于预期的两种最佳方式。</p><h1 id="3b22" class="ip iq hs bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">避免降低USB连接速度</h1><p id="acc6" class="pw-post-body-paragraph jn jo hs jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">有三个简单的规则，你可以遵循，以帮助避免放慢你的USB连接。</p><ol class=""><li id="17c2" class="lc ld hs jp b jq kv ju kw jy le kc lf kg lg kk lh li lj lk bi translated">寻找蓝色。</li><li id="dd09" class="lc ld hs jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">明白USB-C是什么意思。</li><li id="af35" class="lc ld hs jp b jq ll ju lm jy ln kc lo kg lp kk lh li lj lk bi translated">链接USB设备时要小心。</li></ol><h1 id="9f3c" class="ip iq hs bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">寻找蓝色</h1><p id="ea3d" class="pw-post-body-paragraph jn jo hs jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">如果你正在处理USB类型A或USB类型B连接器，你是幸运的。<a class="ae kl" href="https://www.usb3.com/whitepapers/USB%203%200%20(11132008)-final.pdf" rel="noopener ugc nofollow" target="_blank"> USB 3.0规范</a>建议对连接到USB 3的连接器进行颜色编码。支持x的硬件。如果你看到类似下面这些图片的东西，你就在正确的道路上。</p><p id="2200" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">USB类型-A:</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lq"><img src="../Images/810358d8b38f1e0bf41c757ee1260dfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QNIZp_H-8zQaQO0x1RP39Q.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx">Left: USB Type-A female. Right: USB Type-A male.</figcaption></figure><p id="b5e9" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">USB类型B:</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/b5efd4ebbb065080eba6d7a3e3feb5e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ps8i_fO5Jzchjdk-waBFSg.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx">Left: USB Type-B female. Right: USB Type-B male.</figcaption></figure><h1 id="d0b2" class="ip iq hs bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">了解USB-C连接器</h1><p id="c5dd" class="pw-post-body-paragraph jn jo hs jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">USB-C连接器大约与USB 3.1同时推出。许多人认为一个意味着另一个，或者他们有某种联系。他们不是。</p><p id="5787" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">USB 2.0电缆由四根导线组成。两个给总线供电，两个传输数据。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ls"><img src="../Images/7e979881bb0c2763268ca3882741700b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gP63za9jyd8uzSF5Mwiwhg.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx">A USB 2.0 cable contains four wires.</figcaption></figure><p id="84a7" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">USB 3。x电缆完全向后兼容。它们有两条USB-2信号所需的导线，以及两条用于USB-3上行和下行的专用双绞线。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lt"><img src="../Images/1b1232058966cead6adf3872fbca4c21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*nPyUue-hFQeKJ_Ua30UHxw.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx">A USB 3.+ cable contains eight wires.</figcaption></figure><p id="57a9" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">USB Type-C连接器不指示连接了多少根线。它们仅指连接器的形状。因为它们制造成本更低，所以有许多带有USB-C连接器的电缆，但只有USB-2接线。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lu"><img src="../Images/ecda683b086efa96b83865f3e59d0b7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QdH5LwUBdyN0fevmJll16Q.png"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx">The Type-A/C cable bundled in the Nexus 6P box.</figcaption></figure><p id="37bc" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">上面这条电缆是捆绑在Nexus 6P的包装盒中的。这些手机具有连接到USB type-C连接器的USB 2.0集线器。</p><p id="c956" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">这些电缆里只有四根电线。</p><p id="7826" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">如果这是您永久插入工作站作为“首选”电缆的东西，并且您使用它在手机之间交换，您很可能会降低使用USB-3设备的体验。</p><p id="2a87" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">在处理USB type-C连接器时，确保寻找SS(超高速)符号的存在。</p><figure class="kn ko kp kq fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lu"><img src="../Images/3da04d3d7523082bab560856549499c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*qNABIxpt7Rp6yaqM"/></div></div><figcaption class="kr ks et er es kt ku bd b be z dx">USB Super-Speed symbol.</figcaption></figure><p id="732c" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">如果是电话连接器，请仔细检查规格。即使是最近的手机，如Pixel 3a和Pixel 3a XL，也有USB 2.0集线器。</p><h1 id="a6bd" class="ip iq hs bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">链接USB设备</h1><p id="53b2" class="pw-post-body-paragraph jn jo hs jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">要避免的最后一个错误是使用坏的集线器。这和用错电缆一样糟糕。一种常见的配置是将我的所有设备(键盘、鼠标和开发人员的手机)插入一个充当USB集线器的显示器。</p><p id="70f4" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">许多集线器的预期用途是集中“轻量级”外围设备，如只需要USB 2.0功能的键盘、鼠标和耳机。</p><p id="5b16" class="pw-post-body-paragraph jn jo hs jp b jq kv js jt ju kw jw jx jy kx ka kb kc ky ke kf kg kz ki kj kk ha bi translated">确保您的USB集线器支持3.0，方法是检查它是否有蓝色连接器，或者如果它只有USB type-C连接器，请查阅文档。</p><h1 id="9399" class="ip iq hs bd ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm bi translated">有用的工具</h1><p id="62da" class="pw-post-body-paragraph jn jo hs jp b jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk ha bi translated">如果您有疑问，您可以仔细检查主机与设备协商的USB速度。</p><ul class=""><li id="617a" class="lc ld hs jp b jq kv ju kw jy le kc lf kg lg kk lv li lj lk bi translated">在Mac上:<em class="lw"> </em> <code class="du lx ly lz ma b"><strong class="jp ht"><em class="lw">system_profiler SPUSBDataType</em></strong></code></li><li id="5240" class="lc ld hs jp b jq ll ju lm jy ln kc lo kg lp kk lv li lj lk bi translated">在Linux上:<code class="du lx ly lz ma b"><strong class="jp ht"><em class="lw">lsusb -vvv</em></strong></code></li><li id="faa4" class="lc ld hs jp b jq ll ju lm jy ln kc lo kg lp kk lv li lj lk bi translated">在Windows上:<code class="du lx ly lz ma b"><strong class="jp ht"><em class="lw">USBView.exe</em></strong></code></li></ul></div></div>    
</body>
</html>