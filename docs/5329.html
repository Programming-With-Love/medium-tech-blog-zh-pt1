<html>
<head>
<title>Extending JSON responses to include dynamic (Transient) attributes in Oracle JET</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">扩展JSON响应以在Oracle JET中包含动态(瞬时)属性</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/extending-json-responses-to-include-dynamic-transient-attributes-in-oracle-jet-67366d56c6a3?source=collection_archive---------0-----------------------#2017-10-23">https://medium.com/oracledevs/extending-json-responses-to-include-dynamic-transient-attributes-in-oracle-jet-67366d56c6a3?source=collection_archive---------0-----------------------#2017-10-23</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="8e1e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当您需要在表中包含一个不是从API返回的列时，会发生什么呢？也许该列将由现有数据在运行时处理的一些信息组成，比如串联(名和姓)，或者它可能是条件逻辑。</p><p id="9b3e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">简单的连接可以包含在视图的表模板中，但是可能会出现业务逻辑太复杂而无法计算这个额外的列的情况，或者数据可能来自另一个服务。在这些场景中，最好给模型添加一个额外的属性——动态属性。在ADF中，我们过去称这些为瞬态属性。</p><p id="7e66" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我在一个项目中遇到了这个用例，它调用一个服务来对表中的一行或多行执行操作。如果该服务由于某种原因未能处理这些行，我希望向用户直观地突出显示失败的行。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/3ccca366fc6dbe2c0e4aef13d92ac6d3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WWINi-BIydaIaOLOgXYsbA.png"/></div></div></figure><p id="13da" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我下面描述的例子中，用例被剥离回来，我只是简单地扩展我的模型以包括一些条件逻辑。如果条件逻辑为真，那么我们通过在JSON响应中添加一个额外的属性，并用这个额外的列来切换行的颜色，从而用红色突出显示该行。</p><p id="2420" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">虽然这是一个简单的例子，但是对于更复杂的场景来说，这是一个很好的起点。</p></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><h1 id="5e8f" class="jv jw hh bd jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks bi translated">模型数据解析示例</h1><p id="f95f" class="pw-post-body-paragraph ie if hh ig b ih kt ij ik il ku in io ip kv ir is it kw iv iw ix kx iz ja jb ha bi translated">从cookbook*中，通过解析响应来扩展您的模型:</p><p id="94fd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> viewModel </strong></p><pre class="jd je jf jg fd ky kz la lb aw lc bi"><span id="40ad" class="ld jw hh kz b fi le lf l lg lh">self.parseDept = function (response) {<br/>  if (response['DepartmentId'] == 10 || response['DepartmentId'] == 50) {<br/>     response['failed'] = true;<br/>  }  else {<br/>     response['failed'] = false;<br/>  }<br/>  return response;<br/>};</span><span id="e437" class="ld jw hh kz b fi li lf l lg lh">self.Department = oj.Model.extend({<br/>    urlRoot: self.serviceURL,<br/>    parse: self.parseDept,<br/>    idAttribute: 'DepartmentId'<br/>});</span></pre><p id="15a6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">查看</strong></p><pre class="jd je jf jg fd ky kz la lb aw lc bi"><span id="e5fa" class="ld jw hh kz b fi le lf l lg lh">&lt;oj-table id="table" aria-label="Departments Table" <br/>          data='[[datasource]]'<br/>          selection-mode='{"row": "multiple", "column": "multiple"}'<br/>          columns='[{"headerText": "Department Id",<br/>                     "field": "DepartmentId",<br/>                     "id": "column1"},<br/>                    {"headerText": "Department Name",<br/>                     "field": "DepartmentName",<br/>                     "id": "column2"},<br/>                    {"headerText": "Location Id",<br/>                     "field": "LocationId",<br/>                     "id": "column3"},<br/>                    {"headerText": "Manager Id",<br/>                     "field": "ManagerId",<br/>                     "id": "column4"}]'<br/>    row-renderer='[[oj.KnockoutTemplateUtils.getRenderer("row_tmpl", true)]]'&gt;<br/>&lt;/oj-table&gt;</span><span id="c86d" class="ld jw hh kz b fi li lf l lg lh">&lt;script type="text/html" id="row_tmpl"&gt;<br/>&lt;tr data-bind="css: { highlight: failed == true }"&gt;<br/>  &lt;td data-bind="text: DepartmentId"&gt;&lt;/td&gt;<br/>  &lt;td data-bind="text: DepartmentName"&gt;&lt;/td&gt;<br/>  &lt;td data-bind="text: LocationId"&gt;&lt;/td&gt;<br/>  &lt;td data-bind="text: ManagerId"&gt;&lt;/td&gt;<br/>&lt;/tr&gt;</span><span id="6416" class="ld jw hh kz b fi li lf l lg lh">&lt;/script&gt;</span></pre><p id="4546" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> css </strong></p><pre class="jd je jf jg fd ky kz la lb aw lc bi"><span id="f242" class="ld jw hh kz b fi le lf l lg lh">.highlight {<br/>    background-color:#ea5b6e;<br/>}</span></pre><p id="b300" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在<a class="ae lj" href="http://oraclejet.org" rel="noopener ugc nofollow" target="_blank"> Oracle JET </a>中扩展您的模型比在<a class="ae lj" href="https://docs.oracle.com/cd/E15051_01/web.1111/b31974/bcintro.htm#ADFFD123" rel="noopener ugc nofollow" target="_blank"> ADFBC </a>中使用瞬态属性提供了更多的灵活性。您不再局限于groovy代码，因此可以包含更高级的业务逻辑。</p><p id="e521" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">— DC</p><p id="ede1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本文使用了以下食谱示例:</p><ul class=""><li id="51ab" class="lk ll hh ig b ih ii il im ip lm it ln ix lo jb lp lq lr ls bi translated"><a class="ae lj" href="http://www.oracle.com/webfolder/technetwork/jet/jetCookbook.html?component=table&amp;demo=customRowTable" rel="noopener ugc nofollow" target="_blank">oracle.com/webfolder/technetwork/jet/jetCookbook.html?component = table&amp;demo = customRowTable</a></li><li id="f23a" class="lk ll hh ig b ih lt il lu ip lv it lw ix lx jb lp lq lr ls bi translated"><a class="ae lj" href="http://www.oracle.com/webfolder/technetwork/jet/jetCookbook.html?component=table&amp;demo=ojCollectionTable" rel="noopener ugc nofollow" target="_blank">oracle.com/webfolder/technetwork/jet/jetCookbook.html?component = table&amp;demo = ojCollectionTable</a></li></ul></div></div>    
</body>
</html>