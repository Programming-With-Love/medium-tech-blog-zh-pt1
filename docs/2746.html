<html>
<head>
<title>Learn How To Schedule Hadoop Jobs Using Apache Oozie</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">了解如何使用Apache Oozie调度Hadoop作业</h1>
<blockquote>原文：<a href="https://medium.com/edureka/apache-oozie-tutorial-d8f7bbbe1591?source=collection_archive---------0-----------------------#2017-12-27">https://medium.com/edureka/apache-oozie-tutorial-d8f7bbbe1591?source=collection_archive---------0-----------------------#2017-12-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/871d3a6c8275c163a5a559636be51c43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*KTrzMFmK4v1Rx__hUzYObw.png"/></div><figcaption class="il im et er es in io bd b be z dx">Oozie Tutorial - Edureka</figcaption></figure><p id="999d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在开始这篇Apache Oozie教程之前，让我们先了解一下调度系统用在哪里。在实时场景中，一个作业依赖于其他作业，例如MapReduce任务的输出可能会传递给Hive job以供进一步处理。下一个场景可以是，根据时间(如每天、每周、每月)或根据数据可用性安排一组任务。Apache Oozie为您提供了轻松处理这类场景的能力。这就是为什么Apache Oozie是<strong class="ir hi"> <em class="jn"> Hadoop生态系统</em> </strong>的重要组成部分。</p><p id="47a0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这个Apache Oozie教程博客中，我们将讨论:</p><ul class=""><li id="ae6d" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">阿帕奇Oozie游戏攻略</li><li id="ca9d" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">Oozie工作流</li><li id="4513" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">Oozie协调员</li><li id="08b1" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">Oozie包</li><li id="2bf1" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">字数统计工作流作业</li><li id="b0e6" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">基于时间的字数统计协调员工作</li></ul><p id="e0e3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们将从介绍Apache Oozie开始这个Oozie教程。接下来，我们将了解可以使用Apache Oozie创建和执行的作业类型。</p><h1 id="0d8f" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">Apache Oozie简介</h1><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es la"><img src="../Images/37051c386f12aa03617daf90594465cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:918/format:webp/1*jzChtdyzIMKVImI2Hy8kGA.jpeg"/></div></figure><p id="8997" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Apache Oozie是一个调度系统，用于在分布式环境中管理和执行Hadoop作业。我们可以通过组合不同类型的任务来创建所需的管道。它可以是你的Hive，Pig，Sqoop或者MapReduce任务。使用Apache Oozie，您还可以安排您的工作。在一个任务序列中，两个或多个作业也可以被编程为彼此并行运行。这是一个可升级的、可靠的和可扩展的系统。</p><p id="94ca" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Oozie是一个开源的Java web应用程序，负责触发工作流操作。反过来，它使用Hadoop执行引擎来执行任务。</p><p id="41a9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Apache Oozie通过回调和轮询来检测任务的完成。当Oozie启动一个任务时，它向该任务提供一个惟一的回调HTTP URL，并在任务完成时通知该URL。如果任务调用回调URL失败，Oozie可以轮询任务是否完成。</p><p id="41b0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Apache Oozie中有三种类型的作业:</p><ul class=""><li id="d4a8" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated"><strong class="ir hi"> Oozie工作流作业</strong>——这些是有向无环图(Dag ),指定了要执行的一系列动作。</li><li id="46e4" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated">Oozie协调器作业—这些作业由时间和数据可用性触发的工作流作业组成。</li><li id="a308" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated"><strong class="ir hi">oo zie Bundles</strong>——这些可以被称为多个协调器和工作流任务的包。</li></ul><p id="db4b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，让我们逐一了解这些工作。</p><h1 id="c07f" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">Oozie工作流</h1><p id="1ad9" class="pw-post-body-paragraph ip iq hh ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">工作流是排列在有向无环图(DAG)中的一系列动作。这些操作相互依赖，因为下一个操作只能在当前操作输出后执行。工作流动作可以是Pig动作、Hive动作、MapReduce动作、Shell动作、Java动作等。可以使用决策树来决定作业应该如何运行以及在什么条件下运行。</p><p id="5318" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们可以根据作业创建不同类型的操作，每种类型的操作都可以有自己的标记类型。在执行工作流之前，应该将工作流和脚本或jar放在HDFS路径中。</p><p id="4496" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">命令:</strong><em class="jn">oo zie job–oo zie http://localhost:11000/oo zie-config job . properties-run</em></p><p id="de3d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要检查作业的状态，您可以到Oozie web控制台，即<em class="jn"> http://host_name:11000 </em>。通过单击作业，您将看到作业的状态。</p><p id="a4e8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在我们想要并行运行多个作业的场景中，我们可以使用<em class="jn"> Fork </em>。每当我们使用fork时，我们都必须使用Join作为fork的端节点。对于每个分叉，都应该有一个连接。Join假设所有并行执行的节点都是一个fork的子节点。例如，我们可以同时并行创建两个表。</p><p id="79de" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果我们想基于决策的输出运行一个动作，我们可以添加决策标签。例如，如果我们已经有了hive表，我们就不需要再创建它了。在这种情况下，我们可以添加一个决策标记，如果表已经存在，就不运行创建表步骤。决策节点有一个类似于开关案例的开关标签。</p><p id="cb9f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">可以直接传递作业跟踪器、名称节点、脚本和参数的值。但是，这变得难以管理。这是配置文件(即。属性文件)就派上了用场。</p><h1 id="cfc3" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">Oozie协调员</h1><p id="c7a2" class="pw-post-body-paragraph ip iq hh ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">您可以计划复杂的工作流以及使用Coordinator定期计划的工作流。Oozie协调器基于时间、数据或事件谓词触发工作流作业。当满足给定条件时，作业协调器中的工作流就会启动。</p><p id="63a9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">协调员工作所需的定义如下:</p><ul class=""><li id="9078" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated"><strong class="ir hi">开始</strong>—作业的开始日期时间。</li><li id="5b9b" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated"><strong class="ir hi">结束</strong>—结束作业的日期时间。</li><li id="6942" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated"><strong class="ir hi">时区</strong>—协调器应用程序的时区。</li><li id="9890" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated"><strong class="ir hi">频率</strong>—执行作业的频率，以分钟为单位。</li></ul><p id="5879" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">还有一些属性可用于控制信息:</p><ul class=""><li id="9a89" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated"><strong class="ir hi">超时</strong>—一个动作在被丢弃之前等待满足附加条件的最长时间，以分钟为单位。0表示如果在动作具体化时没有满足所有的输入事件，那么动作应该立即超时。-1表示没有超时，操作将永远等待。默认值为-1。</li><li id="5d3c" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated"><strong class="ir hi">并发</strong>—一个作业可以并行运行的最大动作数。默认值为1。</li><li id="4d00" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm jt ju jv jw bi translated"><strong class="ir hi">执行</strong>–它指定协调器作业的多个实例满足其执行标准时的执行顺序。它可以是:</li></ul><ol class=""><li id="b5e4" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm lk ju jv jw bi translated">FIFO(默认)</li><li id="3ff7" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm lk ju jv jw bi translated">后进先出法。比较 FIFO</li><li id="8c81" class="jo jp hh ir b is jx iw jy ja jz je ka ji kb jm lk ju jv jw bi translated">仅最后一个</li></ol><p id="4b9f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> <em class="jn">命令:</em> </strong> <em class="jn"> oozie作业——oo zie http://localhost:11000/oo zie-config&lt;coordinator . properties文件路径&gt;——运行</em></p><p id="9d14" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果在提交协调器作业时没有为作业配置提供定义中使用的配置属性，作业提交将会失败。</p><h1 id="44ac" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">Oozie包</h1><p id="5941" class="pw-post-body-paragraph ip iq hh ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">Oozie Bundle system允许您定义和执行一组协调器应用程序，通常称为数据管道。在Oozie包中，协调器应用程序之间没有明确的依赖关系。但是，您可以使用协调器应用程序的数据依赖性来创建隐式数据应用程序管道。您可以启动/停止/暂停/恢复/重新运行软件包。它提供了更好和更容易的操作控制。</p><p id="b747" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">启动时间</strong>—捆绑包应启动并提交协调器申请的时间。</p><p id="ebf9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在本Apache Oozie教程中，我们将了解如何创建工作流作业。</p><h1 id="f027" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">字数统计工作流作业</h1><p id="1b16" class="pw-post-body-paragraph ip iq hh ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">在这个例子中，我们将使用Apache Oozie执行一个字数统计作业。这里我们不讨论如何编写一个MapReduce字数统计程序。因此，在阅读这篇Apache Oozie教程之前，您需要下载这个字数统计jar文件。现在，创建一个WordCountTest目录，我们将在其中放置所有文件。创建一个lib目录，我们将在其中放置word count jar，如下图所示。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es ll"><img src="../Images/140cb5e24f896759a8aca8d3390fd5dd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*pyPVEN5gt_31nILwv_SP4A.png"/></div></figure><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es ll"><img src="../Images/421380006318928d165b208de277fbce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1008/format:webp/1*9LFaKAT1ftODRyJHA_XIEQ.png"/></div></figure><p id="4532" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，让我们继续前进&amp;创建<strong class="ir hi"><em class="jn">job . properties</em></strong>&amp;<strong class="ir hi"><em class="jn">workflow . XML</em></strong>文件，我们将在其中指定作业及其相关参数。</p><h1 id="a9cd" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">作业.属性</h1><p id="439b" class="pw-post-body-paragraph ip iq hh ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">首先我们创建一个<em class="jn"> job.properties </em>文件，在这里我们定义NameNode &amp; ResourceManager的路径。解析工作流目录路径&amp;需要NameNode路径，jobTracker路径将有助于向YARN提交作业。我们需要提供<em class="jn"> workflow.xml </em>文件的路径，该文件应该存储在HDFS。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es lm"><img src="../Images/136505cd169dfb09aa3b6df1b9217c87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1306/format:webp/1*0qslwcaIidbfALMM11wHFQ.png"/></div></figure><h1 id="8fe7" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">workflow.xml</h1><p id="9802" class="pw-post-body-paragraph ip iq hh ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">接下来，我们需要创建<em class="jn"> workflow.xml </em>文件，在这里我们将定义并执行所有的动作。首先，我们需要指定工作流应用程序名称，即<em class="jn"> WorkflowRunnerTest </em>。然后，我们指定<strong class="ir hi">开始节点</strong>。开始节点<em class="jn">(<strong class="ir hi"><em class="jn"/></strong><em class="jn">开始到</em>标记<em class="jn"> ) </em>是工作流作业的入口点。它指向作业应该开始的第一个工作流节点。如下图所示，下一个节点是<strong class="ir hi"> <em class="jn">交叉点0 </em> </strong>，作业将从这里开始。</em></p><p id="9435" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，我们将在action节点中指定要执行的任务。我们正在执行MapReduce WordCount任务。我们需要指定执行这个MapReduce任务所需的配置。我们正在定义作业跟踪器&amp; NameNode地址。</p><p id="3aac" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来是prepare元素，它专门用于在执行操作之前清理目录。这里我们在HDFS执行删除操作，删除已经创建的<em class="jn"> out1 </em>文件夹。准备标签用于在执行作业之前创建或删除文件夹。然后，我们指定MapReduce属性，如作业队列名称、映射器类、缩减器类、输出键类&amp;输出值类。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es ln"><img src="../Images/7e0e58b183bfe53f2fa901e193f5840a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4_BiYdzFjZ7f5oyFiMvuxg.png"/></div></div></figure><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es ls"><img src="../Images/9fcfcc87cc702156504ff7175828ac51.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IEMKznbpf8wRFnGTc0xItA.png"/></div></div></figure><p id="5801" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后一个MapReduce任务配置是HDFS的输入和输出目录。输入目录是<em class="jn">数据</em>目录，存储在NameNode <em class="jn">的根路径中。</em>最后，如果作业失败，我们将指定kill元素。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es lt"><img src="../Images/0091d5598f0d565432489eb81f3eba43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1244/format:webp/1*5RuRz5zmrwXL6NAI66LZcQ.png"/></div></figure><p id="a86e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在我们需要移动HDFS的<em class="jn"> WordCountTest </em>文件夹，正如我们在<em class="jn"> job.properties </em>文件的<em class="jn">oo zie . wf . application . path</em>属性中指定的那样。因此，我们正在复制Hadoop根目录中的<em class="jn"> WordCountTest </em>文件夹。</p><p id="7e80" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> <em class="jn">命令:</em></strong>Hadoop fs-put word count test/</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es lu"><img src="../Images/98874b90313fe8859f1ba4d0ed92f8da.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*4yZ2hcDvb8JDohKPREKZpw.png"/></div></figure><p id="a92c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要验证这一点，你可以进入NameNode Web UI，检查文件夹是否已经上传到HDFS根目录。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lv"><img src="../Images/63f740704a80fb22860e28cf94210fd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mUml_dlOP6krZxfwE0rEbQ.png"/></div></div></figure><p id="ceb7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，我们已经准备好继续前进并执行工作流作业。</p><p id="3b64" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> <em class="jn">命令:</em> </strong> <em class="jn"> oozie作业-oo zie http://localhost:11000/oo zie-config job . properties-run</em></p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es lu"><img src="../Images/fbbd323710d3c4a38479470f11c77a7c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*1ldG9dqquGKdvyvtKU7iqA.png"/></div></figure><p id="e721" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">一旦我们执行了我们的作业，我们将得到一个作业id(即<em class="jn">0000009–171219160449620-oo zie-edur-W</em>)，如上图所示。您可以在Oozie Web UI中查看您提交的作业，即<em class="jn"> localhost:11000 </em>。您可以在下图中看到，我们提交的工作已列出。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lw"><img src="../Images/d14a8ffa640f22b59ece08c956b43945.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*onX5Eo2VEMLXUMWUAgycWQ.png"/></div></div></figure><p id="225c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您仔细观察上图，您会看到作业ID、作业名称、作业状态、提交作业的用户、创建时间、开始和最后修改时间。您可以点击工作以获取更多详细信息，例如:</p><ul class=""><li id="4c04" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">工作信息</li></ul><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lx"><img src="../Images/6d74adc8100630646638f5c68f37168b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IbC8u71E99zBWLaa3k4_OQ.png"/></div></div></figure><ul class=""><li id="980b" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">作业定义</li></ul><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es ly"><img src="../Images/0f6cd22069fdb328a3df17565406f809.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u3SQxltGcxGkaRRUh5tJEQ.png"/></div></div></figure><ul class=""><li id="c043" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">作业配置</li></ul><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lx"><img src="../Images/6f6973353ff7daf2c7e0af98db8b3e5c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iVPgd60esJxKEOxThy3hMg.png"/></div></div></figure><p id="cebb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">由于作业的状态是成功，所以我们需要转到HDFS根目录，检查输出目录是否已经创建。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lz"><img src="../Images/bff8ab8e26b9b6a06d8ef762d1d10b0a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rYepXLfRj5yqZuNCPqbjdg.png"/></div></div></figure><p id="3c17" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">正如您所看到的，已经在HDFS中创建了<em class="jn"> oozieout </em>目录，现在让我们看看已经创建的输出文件。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es ma"><img src="../Images/127a4628871cea7f78849d9f71edd452.png" data-original-src="https://miro.medium.com/v2/resize:fit:1048/format:webp/1*R6xlJnLo4lej1tQ_i0kM1A.png"/></div></figure><p id="db11" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们已经看到了如何创建Oozie工作流作业，现在我们将在这个Apache Oozie教程博客中进一步了解如何创建协调者作业。</p><h1 id="03bb" class="kc kd hh bd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz bi translated">基于时间的字数统计协调员工作</h1><p id="fcfc" class="pw-post-body-paragraph ip iq hh ir b is lf iu iv iw lg iy iz ja lh jc jd je li jg jh ji lj jk jl jm ha bi translated">在本例中，我们将创建一个基于时间的字数统计协调器作业，该作业将在特定的时间间隔后执行。您可以使用Apache Oozie创建和调度需要每天或定期执行的作业。</p><p id="5754" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们在这个Apache Oozie教程中快速前进，并创建一个协调者工作。这里我们将创建三个文件，即<em class="jn"> coordinator.properties </em>、<em class="jn">coordinator . XML</em>&amp;<em class="jn">workflow . XML</em>文件。同样，这里我们将把w <em class="jn"> ordcount </em> jar放在<em class="jn"> lib </em>目录中，如下图所示。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es mb"><img src="../Images/03d09645501f951b3f169c955d273f6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1012/format:webp/1*nXOQlDttXFASgwrUbReQMg.png"/></div></figure><p id="26fb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在让我们分别看一下这些文件。首先，我们将从coordinator.properties文件开始。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es mc"><img src="../Images/80f2e94d73434b3a4e7924571a6f95e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vSwSLtqg-D6A6TqFuRSHWQ.png"/></div></div></figure><p id="41da" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里，我们指定了工作流的执行频率。频率总是以分钟表示。在我们的例子中，这个协调器作业将在指定时间内每小时执行一次。Frequency用于捕获产生数据集的周期性间隔，以及协调器应用程序的运行计划。</p><p id="afbb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要以分钟、小时、天、月为单位定义频率，请使用以下格式:</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es md"><img src="../Images/d82ccc4c4c0ab0a0e2d51e71002cd1b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D_-zNfJ3gnnFaeXwtR3fbQ.png"/></div></div></figure><p id="f5a6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，我们定义作业的开始和结束时间，如上图所示。<em class="jn">开始时间</em>是作业&amp;的开始日期时间<em class="jn">结束时间</em>是作业的结束日期时间。</p><p id="a0b1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，我们将指定NameNode &amp; ResourceManager URL，这将分别用于引用HDFS中的workflow.xml文件和向YARN提交作业。最后，我们指定workflow.xml路径，它将存储在HDFS。我们还将指定存储所有文件和lib目录的应用程序路径。</p><p id="94b0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">第二个文件是<em class="jn"> coordinator.xml </em>，在这里我们将使用在<em class="jn"> coordinator.properties </em>文件中指定的所有属性。现在，首先我们将指定协调应用程序的属性，即名称、频率&amp;时区。接下来，我们将逐一指定工作流。在这里，我们只有一个工作流程。因此，在action元素中，我们将创建workflow元素，并在其中指定应用程序路径。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es mc"><img src="../Images/fcc7f8d9bf0a4b29b9e20dc47be2352d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bmeS3-CdcxJBcGhXDj2rqQ.png"/></div></div></figure><p id="694c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，我们必须创建一个<em class="jn"> workflow.xml </em>文件，我们将在其中指定任务。它类似于我们在工作流作业中创建的<em class="jn"> workflow.xml </em>文件。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es me"><img src="../Images/08634390a65a62f8d82d4852bf3ca5a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NjEqUVyOpFI4mFWobAmXEg.png"/></div></div></figure><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es mf"><img src="../Images/2e348959f38e2410bbdcc89f12ac1ce1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1288/format:webp/1*enL5IdqyyPsS8EIjcz_VbA.png"/></div></figure><p id="3733" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，我们再次将这个<em class="jn">word count test _ timedbase</em>目录移动到HDFS。</p><p id="4867" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">命令</strong>:<em class="jn">Hadoop fs-put word count test _ time based/</em></p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lu"><img src="../Images/4f397dd448923d8f5d7a3a3548f017bf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1326/format:webp/1*yRr9ESQQcgdPsTX6Y8B_Ag.png"/></div></div></figure><p id="b53b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，我们已经准备好继续前进，在Oozie教程中执行这个协调器工作。让我们继续执行它。</p><p id="a4d2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">命令</strong> : <em class="jn"> oozie作业–oo zie http://localhost:11000/oo zie-config coordinator . properties-run</em></p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es mg"><img src="../Images/d4ff619375e52f23a77b7400d874cd53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1324/format:webp/1*8eI5UbY-jQzimpt03hshjg.png"/></div></figure><p id="763d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">记下该协调员的工作id(即0000010–171219160449620-oo zie-edur-C)。它将帮助你在Oozie Web UI中找到你的工作。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es mh"><img src="../Images/66697693519695629d82beef8b54f724.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FBSmzR3RpY-tqW29JNbSow.png"/></div></div></figure><p id="4116" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">您可以在Oozie Web UI的Coordinator Jobs选项卡中看到列出的作业。类似于工作流作业，我们有作业的名称、状态、用户、频率、开始和结束时间。当您单击某个特定作业时，将会看到该作业的详细信息，如下图所示。</p><ul class=""><li id="23c4" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">协调员工作信息</li></ul><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es ly"><img src="../Images/104121eb76f676ea1c2b0bef3b0f9376.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FkkW5batgDFXa3vSQiONQw.png"/></div></div></figure><ul class=""><li id="5250" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">协调员工作定义</li></ul><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es lx"><img src="../Images/e43bff2266b369a5aa618b52f2769039.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A4eDvnXu31d7Nzmfl2SN6g.png"/></div></div></figure><ul class=""><li id="6acd" class="jo jp hh ir b is it iw ix ja jq je jr ji js jm jt ju jv jw bi translated">协调员工作配置</li></ul><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es mi"><img src="../Images/f9822abad6ec96cb0016f7ee97246f32.png" data-original-src="https://miro.medium.com/v2/resize:fit:1028/format:webp/1*mW8m55OSQLVoOnM0SHEVEw.png"/></div></figure><p id="702f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，我们已经查看了不同的选项卡。我们将返回到将创建输出文件夹的HDFS根目录。正如您在下图中看到的，<em class="jn"> oozieTimeBasedout </em>目录已经创建，正如我们在<em class="jn"> workflow.xml </em>文件中指定的那样。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="er es mj"><img src="../Images/ab987f93442838fa939e78490db0efe7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*H46LW8cpgWIKfuW8ZsFDjQ.png"/></div></div></figure><p id="b1a8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，让我们看看已经创建的输出文件。</p><figure class="lb lc ld le fd ii er es paragraph-image"><div class="er es mk"><img src="../Images/02547298121d84acf6e79efc368656f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:986/format:webp/1*MY49pKCC9NU_eI480wwH5g.png"/></div></figure><p id="ee83" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我希望这篇文章能给你带来信息和附加值。</p><p id="0d2f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果你想查看更多关于人工智能、Python、道德黑客等市场最热门技术的文章，你可以参考Edureka的官方网站。</p><p id="d04e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">请留意本系列中解释大数据其他各方面的其他文章。</p><blockquote class="ml mm mn"><p id="5a6c" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">1.<a class="ae mr" rel="noopener" href="/edureka/hadoop-tutorial-24c48fbf62f6"> Hadoop教程</a></p><p id="9946" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">2.<a class="ae mr" rel="noopener" href="/edureka/hive-tutorial-b980dfaae765">蜂巢教程</a></p><p id="9e31" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">3.<a class="ae mr" rel="noopener" href="/edureka/pig-tutorial-2baab2f0a5b0">养猪教程</a></p><p id="e262" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">4.<a class="ae mr" rel="noopener" href="/edureka/mapreduce-tutorial-3d9535ddbe7c">地图缩小教程</a></p><p id="2d9f" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">5.<a class="ae mr" rel="noopener" href="/edureka/hbase-tutorial-bdc36ab32dc0">h基础教程</a></p><p id="87c0" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">6.<a class="ae mr" rel="noopener" href="/edureka/hdfs-tutorial-f8c4af1c8fde"> HDFS教程</a></p><p id="c46f" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">7.<a class="ae mr" rel="noopener" href="/edureka/hadoop-3-35e7fec607a"> Hadoop 3 </a></p><p id="f389" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">8.<a class="ae mr" rel="noopener" href="/edureka/apache-sqoop-tutorial-431ed0af69ee"> Sqoop教程</a></p><p id="a848" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">9.<a class="ae mr" rel="noopener" href="/edureka/apache-flume-tutorial-6f7150210c76">水槽教程</a></p><p id="04ec" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">10.<a class="ae mr" rel="noopener" href="/edureka/big-data-tutorial-b664da0bb0c8">大数据教程</a></p><p id="67e9" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">11.<a class="ae mr" rel="noopener" href="/edureka/hadoop-ecosystem-2a5fb6740177"> Hadoop生态系统</a></p><p id="790a" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">12.<a class="ae mr" rel="noopener" href="/edureka/hive-commands-b70045a5693a">HQL顶级配置单元命令及示例</a></p><p id="3d79" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">13.<a class="ae mr" rel="noopener" href="/edureka/create-hadoop-cluster-with-amazon-emr-f4ce8de30fd"> Hadoop集群搭配亚马逊EMR？</a></p><p id="29e4" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">14.<a class="ae mr" rel="noopener" href="/edureka/big-data-engineer-resume-7bc165fc8d9d">大数据工程师简历</a></p><p id="8ba9" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">15.<a class="ae mr" rel="noopener" href="/edureka/hadoop-developer-cc3afc54962c"> Hadoop开发人员-工作趋势和薪水</a></p><p id="4d94" class="ip iq jn ir b is it iu iv iw ix iy iz mo jb jc jd mp jf jg jh mq jj jk jl jm ha bi translated">16.<a class="ae mr" rel="noopener" href="/edureka/hadoop-interview-questions-55b8e547dd5c"> Hadoop面试问题</a></p></blockquote></div><div class="ab cl ms mt go mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ha hb hc hd he"><p id="9b08" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">原载于2017年12月27日</em><a class="ae mr" href="https://www.edureka.co/blog/apache-oozie-tutorial/" rel="noopener ugc nofollow" target="_blank"><em class="jn">www.edureka.co</em></a><em class="jn">。</em></p></div></div>    
</body>
</html>