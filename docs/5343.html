<html>
<head>
<title>Implementing feature rich tooltips in Oracle JET with custom Knockout bindings</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Oracle JET中使用自定义剔除绑定实现功能丰富的工具提示</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/implementing-feature-rich-tooltips-in-oracle-jet-using-custom-knockout-bindings-7eeeb8b17f01?source=collection_archive---------2-----------------------#2017-11-13">https://medium.com/oracledevs/implementing-feature-rich-tooltips-in-oracle-jet-using-custom-knockout-bindings-7eeeb8b17f01?source=collection_archive---------2-----------------------#2017-11-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="e388" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在一些场景中，我发现工具提示示例和插件对于需求来说不够丰富，<a class="ae jc" href="http://www.oracle.com/webfolder/technetwork/jet/jetCookbook.html?component=popup&amp;demo=tooltip" rel="noopener ugc nofollow" target="_blank"> Oracle JET cookbook </a>也不例外。</p><p id="1b95" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">cookbook包含了一个使用元素属性来包含工具提示内容的示例场景(我认为这适合大多数项目的需求)，但是如果您想做更多的事情呢……比如在<a class="ae jc" href="http://www.oracle.com/webfolder/technetwork/jet/jetCookbook.html?component=gantt&amp;demo=tooltipTemplate" rel="noopener ugc nofollow" target="_blank"> ojGant组件</a>中显示的示例:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/874e52cb0a628d9326410c3fb2a21dbf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J_nLpHbcfggNRjLPUsb2TA.png"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">ojGant component with tooltip template</figcaption></figure><p id="5fb4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我的例子中，我需要创建一个功能丰富的工具提示，我希望实现简单。</p><p id="35d0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">经过一番挖掘后，我决定最好的方法是利用创建自定义knockout绑定的能力，这是一个真正展示JET才华的展示。我们有一个包含许多有用组件的框架，但是如果我们需要实现自定义功能，没有必要与框架对抗，扩展起来相对简单。</p><p id="1da8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，让我们首先创建一个定制绑定(使用<strong class="ig hi"> init </strong>回调，因为在这种情况下不需要更新)，并将其绑定到ojAvatar组件。</p><p id="d287" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jt">(对于这个例子，我将使用食谱中的</em><a class="ae jc" href="http://www.oracle.com/webfolder/technetwork/jet/jetCookbook.html?component=avatar&amp;demo=colors" rel="noopener ugc nofollow" target="_blank"><em class="jt">OJ avatar</em></a><em class="jt">)</em></p><h2 id="deff" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">视图模型</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="2929" class="ju jv hh kq b fi ku kv l kw kx">ko.bindingHandlers.toolTip = {<br/>  init: function (element, valueAccessor, allBindings) {<br/>           <br/>      var value = valueAccessor();<br/>      var valueUnwrapped = ko.unwrap(value);<br/>              <br/>      console.log("binding occurred! " + value)<br/>  }<br/>}</span></pre><h2 id="2832" class="ju jv hh bd jw jx jy jz ka kb kc kd ke ip kf kg kh it ki kj kk ix kl km kn ko bi translated">视角</h2><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="bbd7" class="ju jv hh kq b fi ku kv l kw kx">&lt;oj-avatar data-bind='css: value, attr:{"aria-label":"Avatar of " + $parent.firstName<br/>                  + " " + $parent.lastName + " with color " + label}, <strong class="kq hi">toolTip: "test"</strong>', <br/>                role='img'  size='[[$parent.avatarSize]]' initials='[[$parent.initials]]'&gt;<br/>                &lt;/oj-avatar&gt;</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ky"><img src="../Images/5acd5b750921026fc5a4fa1a8bb09af8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UEfr8DHVACMIy96bcBvT_Q.png"/></div></div></figure><p id="e8b6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将写入<strong class="ig hi">“绑定发生！测试你的队伍中每个角色的日志(6个不同的角色)。<strong class="ig hi">‘test’</strong>的值正在传递，稍后可以在我们的弹出逻辑中使用。</strong></p><p id="3f09" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们进一步扩展它，创建一个div来保存一些关于用户的额外信息。</p><p id="717a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">视图</strong></p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="b03b" class="ju jv hh kq b fi ku kv l kw kx">&lt;!-- ko foreach: avatarColors --&gt;<br/>     &lt;div class="oj-flex-item oj-sm-margin-2x" <strong class="kq hi">data-bind="toolTip: true"</strong>&gt;<br/>          &lt;oj-avatar data-bind='css: value, attr:{"aria-label":"Avatar of " + $parent.firstName + " " + $parent.lastName + " with color " + label}, '  role='img' size='[[$parent.avatarSize]]' initials='[[$parent.initials]]'&gt;<br/>          &lt;/oj-avatar&gt;<br/>    <strong class="kq hi">      &lt;div class="myTooltip" style="position:absolute; padding:10px; z-index:1; background-color: #ebebeb; left:-999999px;" data-bind="style: { border: '3px solid ' + color }"&gt;<br/>            &lt;b&gt;First name:&lt;/b&gt; &lt;span data-bind="text: $parent.firstName"&gt;&lt;/span&gt;&lt;br&gt;<br/>            &lt;b&gt;Surname:&lt;/b&gt; &lt;span data-bind="text: $parent.lastName"&gt;&lt;/span&gt;<br/>            &lt;oj-rating-gauge class="myRating" value="4" readonly style="width:90px;height:35px;" selected-state.color="{{color}}"&gt;<br/>            &lt;/oj-rating-gauge&gt;<br/>          &lt;/div&gt;</strong><br/>    &lt;/div&gt;<br/>&lt;!-- /ko --&gt;</span></pre><p id="bd19" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我已经修改了我们之前开始的代码，查看加粗的代码。</p><blockquote class="kz la lb"><p id="7695" class="ie if jt ig b ih ii ij ik il im in io lc iq ir is ld iu iv iw le iy iz ja jb ha bi translated"><strong class="ig hi">注意:</strong>样式属性应该被添加到myTooltip类中，但是cookbook不支持样式表的编辑，所以在这个例子中我已经内嵌了它。</p></blockquote><p id="fccf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在我们已经完成了视图，让我们修改自定义绑定处理程序中的逻辑来隐藏/显示我们的工具提示:</p><p id="6020" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> viewModel </strong></p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="5768" class="ju jv hh kq b fi ku kv l kw kx">ko.bindingHandlers.toolTip = {</span><span id="e565" class="ju jv hh kq b fi lf kv l kw kx">init: function (element, valueAccessor, allBindings) {</span><span id="2bb8" class="ju jv hh kq b fi lf kv l kw kx">   // Determine if popup should be loaded<br/>   var value = valueAccessor();<br/>   var valueUnwrapped = ko.unwrap(value);<br/>   if (valueUnwrapped == true) {</span><span id="0948" class="ju jv hh kq b fi lf kv l kw kx">      // Show or hide popup depedent on hover status    <br/>      $(element).hover(function () {<br/>         $(element).find('.myTooltip').show();<br/>      }, function () {<br/>         $(element).find('.myTooltip').hide();<br/>      }).mousemove(function (e) {<br/>         // Enables the tooltip to follow the users cursor<br/>         var mousex = e.pageX + 50 //Get X coordinates<br/>         var mousey = e.pageY - 50 //Get Y coordinates<br/>         $(".myTooltip").css({ top: mousey, left: mousex });<br/>      })</span><span id="5c05" class="ju jv hh kq b fi lf kv l kw kx">     }</span><span id="766b" class="ju jv hh kq b fi lf kv l kw kx">}</span><span id="36e8" class="ju jv hh kq b fi lf kv l kw kx">}</span></pre><p id="bad9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">avatarColours数组也已扩展为包括十六进制代码，用于工具提示边框和仪表星形颜色:</p><pre class="je jf jg jh fd kp kq kr ks aw kt bi"><span id="31f6" class="ju jv hh kq b fi ku kv l kw kx">self.avatarColors = ko.observableArray([<br/>      {label: 'a', value: 'demo-avatar-a', color: '#0096e0'},<br/>      {label: 'b', value: 'demo-avatar-b', color: '#d97638'},<br/>      {label: 'c', value: 'demo-avatar-c', color: '#eb5a50'},<br/>      {label: 'd', value: 'demo-avatar-d', color: '#d16ba6'},<br/>      {label: 'e', value: 'demo-avatar-e', color: '#749e5a'},<br/>      {label: 'f', value: 'demo-avatar-f', color: '#c94e30'},<br/>])</span></pre><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es lg"><img src="../Images/8e8e5991f8881479eaf6798b5fc6e79c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*IhBIvpEbl2AclpuZ-CeL9g.gif"/></div></div><figcaption class="jp jq et er es jr js bd b be z dx">Custom tooltips using ojAvatar</figcaption></figure><p id="2414" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">框架已经就位，可以在工具提示中包含自定义数据和组件，欢迎使用！</p><p id="43ef" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">— DC</p><blockquote class="kz la lb"><p id="70a0" class="ie if jt ig b ih ii ij ik il im in io lc iq ir is ld iu iv iw le iy iz ja jb ha bi translated"><strong class="ig hi">有用阅读:</strong><a class="ae jc" href="https://hackernoon.com/my-approach-to-using-z-index-eca67feb079c" rel="noopener ugc nofollow" target="_blank">https://hacker noon . com/my-approach-to-using-z-index-ECA 67 feb 079 c</a></p></blockquote></div></div>    
</body>
</html>