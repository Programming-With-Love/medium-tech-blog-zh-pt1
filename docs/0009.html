<html>
<head>
<title>AirMapView: A View Abstraction for Maps on Android</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">AirMapView:Android上地图的视图抽象</h1>
<blockquote>原文：<a href="https://medium.com/airbnb-engineering/airmapview-a-view-abstraction-for-maps-on-android-4b7175a760ac?source=collection_archive---------2-----------------------#2015-04-20">https://medium.com/airbnb-engineering/airmapview-a-view-abstraction-for-maps-on-android-4b7175a760ac?source=collection_archive---------2-----------------------#2015-04-20</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="fb45" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">埃里克·佩泽尔</p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es je"><img src="../Images/535b2bcab8956f71f9c82d75c6899696.png" data-original-src="https://miro.medium.com/v2/resize:fit:948/1*ZnkPlrxpQIRRmCXe5b1C9A.gif"/></div></figure></div><div class="ab cl jm jn go jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="ha hb hc hd he"><p id="f8ce" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如今，许多Android应用程序需要某种形式的交互式地图作为其用户界面的一部分。谷歌提供了Google Play服务的原生包和体验来满足这种需求，但问题是如何为没有Play服务的设备创建交互式地图。</p><p id="5028" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在一些国家，大多数设备出售时都没有Google Play服务。不提供Play服务的设备制造商在全球范围内越来越受欢迎。为了让我们的应用程序提供真正国际化的体验，我们不能遗漏像地图这样重要的功能。因为我们知道其他公司也有同样的问题，所以我们创建并开源了AirMapView。</p><p id="2ce2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jt" href="https://github.com/airbnb/airmapview" rel="noopener ugc nofollow" target="_blank"> AirMapView </a>是一个视图抽象，支持带有和不带有Google Play服务的设备的交互式地图。有Google Play服务的设备将使用谷歌地图V2，而没有的设备将使用基于网络的谷歌地图实现。这一切都是作为一个单一的API来实现的，它是在大多数开发者习惯的谷歌地图V2的基础上设计的。</p><p id="625b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">默认情况下，AirMapView将选择设备可用的最佳地图提供商。默认情况下，如果可用，它将使用原生的谷歌地图V2，如果Google Play服务不可用，它将回退到WebView解决方案。该API被设计为对用户完全透明，这样开发者可以使用当前用于谷歌地图的相同API来获得回退功能。</p><p id="1d78" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">原生GoogleMap是作为AirMapView内部的一个片段实现的，提供了与直接使用Google Maps V2完全相同的功能。将现有实现从GoogleMap移植到AirMapView非常简单，只需将对GoogleMap的调用替换为对AirMapView的调用，并为OnCameraChanged等操作实现正确的回调类。该API被设计为可插拔的，因此开发人员可以为特定设备添加自己的提供商，如亚马逊kindle fire设备的亚马逊地图。</p><p id="9168" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">回退webview地图在Android WebView中显示Google地图，并使用javascript bridge回调来实现与地图的动态交互。由于它是一个webview，而不是本机代码，它的性能不如本机GoogleMap，但它在Airbnb应用程序的实验中表现稍差。</p><p id="2467" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用Javascript Bridge，我们能够在web地图中实现相同的API，因此，一旦为本地地图实现了AirMapView，就不需要更改客户端代码来支持web地图。</p><p id="0a3e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">网络地图允许设置位置、居中、添加标记、拖动、点击地图和其他GoogleMap当前支持的常见操作。</p><p id="6d75" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们构建AirMapView的方式允许我们在未来轻松添加其他地图提供商，如亚马逊地图V2、百度、Mapbox等。</p><p id="ec4d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">更多信息请看我们的Github页面:<a class="ae jt" href="https://github.com/airbnb/airmapview" rel="noopener ugc nofollow" target="_blank">https://github.com/airbnb/airmapview</a></p><figure class="jf jg jh ji fd jj er es paragraph-image"><div class="er es ju"><img src="../Images/3913f6470a7657e02386189e67b4eb30.png" data-original-src="https://miro.medium.com/v2/resize:fit:108/format:webp/1*YsUOrWx3mRxZZljtc9xZyw.png"/></div></figure><h2 id="8e81" class="jv jw hh bd jx jy jz ka kb kc kd ke kf ip kg kh ki it kj kk kl ix km kn ko kp bi translated">在<a class="ae jt" href="http://airbnb.io" rel="noopener ugc nofollow" target="_blank"> airbnb.io </a>查看我们所有的开源项目，并在Twitter上关注我们:<a class="ae jt" href="https://twitter.com/AirbnbEng" rel="noopener ugc nofollow" target="_blank">@ Airbnb eng</a>+<a class="ae jt" href="https://twitter.com/AirbnbData" rel="noopener ugc nofollow" target="_blank">@ Airbnb data</a></h2></div><div class="ab cl jm jn go jo" role="separator"><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr js"/><span class="jp bw bk jq jr"/></div><div class="ha hb hc hd he"><p id="b849" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kq">原载于2015年4月20日nerds.airbnb.com</em><em class="kq">的</em> <a class="ae jt" href="http://nerds.airbnb.com/airmapview/" rel="noopener ugc nofollow" target="_blank"> <em class="kq">。</em></a></p></div></div>    
</body>
</html>