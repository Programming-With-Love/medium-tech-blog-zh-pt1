<html>
<head>
<title>Contact Tracing using Oracle Spatial</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用Oracle Spatial追踪联系人</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/contact-tracing-using-oracle-spatial-b345a0c66a7a?source=collection_archive---------0-----------------------#2022-03-04">https://medium.com/oracledevs/contact-tracing-using-oracle-spatial-b345a0c66a7a?source=collection_archive---------0-----------------------#2022-03-04</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/afd2ddb9b3bc7216521b3fcab14ef94e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n4GDdemcxO2iqQDSi-GnUg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@13on?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">13on</a> on <a class="ae it" href="https://unsplash.com/s/photos/people-walking?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a> (edited)</figcaption></figure><p id="91c7" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Oracle Spatial是Oracle数据库的空间特性，它为管理、处理和分析基于位置的地理空间信息提供了一个平台。该平台使人们能够基于其业务实体(如活动、事故、事件和资产)的位置关系来理解并做出更好的决策。</p><p id="f331" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在本文中，我想介绍一下Oracle Spatial的<strong class="iw hi">联系人追踪API </strong>，它是在2020年为响应新冠肺炎的全球疫情而添加的。使用来自几个用户的GPS跟踪数据样本，我们将在地图上查看他们的移动，并通过运行基于位置和时间的分析来检测接触事件。请参考这篇<a class="ae it" href="https://blogs.oracle.com/oraclespatial/post/contact-tracing-apis-in-oracle-database" rel="noopener ugc nofollow" target="_blank">博文</a>和<a class="ae it" href="https://analyticsanddatasummit.org/wp-content/uploads/2020/07/Contact_Tracing_SQL_API_overview.pdf" rel="noopener ugc nofollow" target="_blank">幻灯片</a>了解更多关于API的信息和技术细节。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/ab03959fd95ec47d88c4feaab6576df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*00PGabOezyATwXH_fglY0Q.png"/></div></div></figure><p id="521c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">创建一个自治数据库(21c) </strong></p><p id="45f4" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">最新的创新版本Oracle Database 21c包含了这个API。对于18c和19c，您需要应用补丁。在本例中，我们将在Oracle云上使用21c。一些甲骨文云地区(阿什伯恩、菲尼克斯、法兰克福和伦敦)有21c作为永远免费的云服务的一部分，您可以立即注册使用。如果你愿意，你也可以从<a class="ae it" href="https://www.oracle.com/database/technologies/oracle-database-software-downloads.html" rel="noopener ugc nofollow" target="_blank">这里</a>下载这个包并安装在你的Linux机器上。</p><p id="f557" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果您是Oracle云的新手，请参考<a class="ae it" href="https://apexapps.oracle.com/pls/apex/dbpm/r/livelabs/view-workshop?wid=719" rel="noopener ugc nofollow" target="_blank">本次研讨会</a>创建一个帐户并设置您的“始终免费”自治数据库(ADB)。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es jx"><img src="../Images/71898a636d13cc010d384e989e5d2e58.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fX0b_G5ZsS0ErXWbhjpzMQ.png"/></div></div></figure><p id="d49d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在这里，我创建了一个名为ADB1的实例，选择数据仓库作为其工作负载类型，但是您也可以选择事务处理。请确保您的数据库版本是21c。</p><p id="dd12" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">创建数据库用户</strong></p><p id="13ac" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">从ADB管理页面，以<code class="du jy jz ka kb b">ADMIN</code>用户身份登录数据库操作，并创建一个名为<code class="du jy jz ka kb b">SPATIALUSER</code>的用户。为表空间分配一些配额，如<code class="du jy jz ka kb b">UNLIMITED</code>，并为该用户登录数据库操作启用Web访问。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kc"><img src="../Images/7edf67e8cab67752cc2103eb7e3ec650.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*N7ermMV9oO7A-0c8AUfKKg.png"/></div></div></figure><p id="e1a9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">此外，打开SQL窗口并运行以下查询来授予使用Spatial Studio所需的权限<a class="ae it" href="https://docs.oracle.com/en/database/oracle/spatial-studio/21.3/spstu/administering-spatial-studio.html#GUID-B57F59E9-B526-4916-9AF3-C430BB627E41" rel="noopener ugc nofollow" target="_blank">和</a>。</p><pre class="jt ju jv jw fd kd kb ke bn kf kg bi"><span id="0a0f" class="kh ki hh kb b be kj kk l kl km">GRANT CONNECT,<br/>      CREATE SESSION,<br/>      CREATE TABLE,<br/>      CREATE VIEW,<br/>      CREATE SEQUENCE,<br/>      CREATE PROCEDURE,<br/>      CREATE SYNONYM,<br/>      CREATE TYPE,<br/>      CREATE TRIGGER<br/>TO spatialuser;</span></pre><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kn"><img src="../Images/8728d2c8f9a17a06d5ff4c727389aea2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*wUPJwbm5oPsmGy_fzrjLvw.png"/></div></div></figure><p id="7ad0" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">请确保您可以使用该用户登录数据库操作。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ko"><img src="../Images/43648a3ca7a82e8c17eb01376f9ef97b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZVRFtds28b-ZfGDtmgo4Xg.png"/></div></div></figure><p id="1903" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">加载样本数据集</strong></p><p id="d291" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">从<a class="ae it" href="https://raw.githubusercontent.com/ryotayamanaka/oracle-spatial/main/contact-tracing/track.csv" rel="noopener ugc nofollow" target="_blank">此处</a>下载样本CSV文件(右击并保存)。该文件包含来自9个用户的GPS设备的大量数据点。每个记录包含纬度和经度以及捕获时间，如下所示。</p><pre class="jt ju jv jw fd kd kb ke bn kf kg bi"><span id="4383" class="kh ki hh kb b be kj kk l kl km">+---------+-------------+------------+---------------------+<br/>| USER_ID |  LONGITUDE  |  LATITUDE  |    CAPTURE_TIME     |<br/>+---------+-------------+------------+---------------------+<br/>|       1 | -71.0836909 | 42.3629132 | 2020-05-31 00:02:39 |<br/>|       1 | -71.0837229 | 42.3629156 | 2020-05-31 00:06:07 |<br/>|       1 | -71.0836832 |  42.362915 | 2020-05-31 00:06:58 |<br/>|     ... |         ... |        ... |                 ... |<br/>|       9 |  -71.076882 |  42.369989 | 2020-05-31 22:12:14 |<br/>|       9 |  -71.076893 |  42.369996 | 2020-05-31 22:12:15 |<br/>+---------+-------------+------------+---------------------+</span></pre><p id="132a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">以您在上面创建的用户身份登录数据库操作，并加载您刚刚下载的CSV文件作为<code class="du jy jz ka kb b">TRACK</code>表。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kp"><img src="../Images/377ce948f0bf36a3382584741981547a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7FBC-gI5NOoT1J32aUIZ5g.png"/></div></div></figure><p id="92c9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">将<code class="du jy jz ka kb b">LONGITUDE</code>和<code class="du jy jz ka kb b">LATITUDE</code>栏的刻度设置为<code class="du jy jz ka kb b">7</code>。此外，为<code class="du jy jz ka kb b">CAPTURE_TIME</code>列选择<code class="du jy jz ka kb b">DATE</code>数据类型，并将格式掩码设置为<code class="du jy jz ka kb b">YYYY-MM-DD HH24:MI:SS</code>。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kq"><img src="../Images/0a8cbec4d6925d4aa66d037034c40c2d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aL1wF1U8WglPW92ktD8bIA.png"/></div></div></figure><p id="96c1" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">将数据转换成几何对象</strong></p><p id="d4ff" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Oracle Spatial为Oracle数据库中的空间数据提供了一种称为SDO_GEOMETRY的对象类型。将数据转换为SDO_GEOMETRY对象后，可以对其运行各种地理空间操作和分析。在这一步中，我们将把纬度和经度数据转换成SDO_GEOMETRY对象，这些数据目前作为常规数字保存在<code class="du jy jz ka kb b">TRACK</code>表中。它们将被存储为二维点。</p><p id="8759" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">通过在数据库中执行以下SQL操作，基于<code class="du jy jz ka kb b">TRACK</code>表中的数据创建一个名为<code class="du jy jz ka kb b">TRACK_GEOM</code>的新表。这将向包含SDO_GEOMETRY对象的表中添加一个<code class="du jy jz ka kb b">GEOM</code>列。此外，我们将把捕获时间的数据类型从日期转换为数字，并将其存储在<code class="du jy jz ka kb b">CAPTURE_TIME_AS_NUMBER</code>列中。</p><pre class="jt ju jv jw fd kd kb ke bn kf kg bi"><span id="b5f2" class="kh ki hh kb b be kj kk l kl km">CREATE TABLE track_geom AS<br/>SELECT<br/>  t.user_id,<br/>  SDO_GEOMETRY(<br/>    2001,       -- Geometry type (two-dementional point)<br/>    4326,       -- Coordinate system ID (SRID) <br/>    SDO_POINT_TYPE(t.longitude, t.latitude, NULL),<br/>    NULL,<br/>    NULL<br/>  ) AS geom,<br/>  t.capture_time,<br/>  t.capture_time - TO_DATE('2019-01-01 00:00:00', 'YYYY-MM-DD HH24:MI:SS')<br/>    AS capture_time_as_number<br/>FROM track t;</span></pre><p id="f605" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">创建一个空间索引</strong></p><p id="12a7" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为了检测用户之间的接触事件，我们需要识别GPS跟踪数据中的位置和时间戳重合的跟踪点。然后，捆绑这样的数据点，并找出它们是否连续出现超过一个特定的时期。检索空间距离的空间索引对于以合理的响应时间执行这些计算是必不可少的。</p><p id="5ac3" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们创建一个空间索引。首先，我们需要注册元数据(索引将使用的关于空间数据的附加信息)。下面的INSERT INTO SQL语句为表<code class="du jy jz ka kb b">TRACK_GEOM</code>的<code class="du jy jz ka kb b">GEOM</code>列中的点指定了所需的元数据。</p><p id="7401" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">然后，我们将通过指定<code class="du jy jz ka kb b">mdsys.spatial_index_v2</code>作为索引类型来创建索引。我们还将为用户ID和捕获时间创建标准索引(这是我们为了优化计算而创建的数字列)。</p><pre class="jt ju jv jw fd kd kb ke bn kf kg bi"><span id="5b3f" class="kh ki hh kb b be kj kk l kl km">INSERT INTO user_sdo_geom_metadata VALUES (<br/>  'track_geom',<br/>  'geom',<br/>  SDO_DIM_ARRAY(<br/>    SDO_DIM_ELEMENT('LONGITUDE', -180.0, 180.0, 0.05),<br/>    SDO_DIM_ELEMENT('LATITUDE', -90.0, 90.0, 0.05)<br/>  ),<br/>  4326<br/>);<br/>COMMIT;<br/>CREATE INDEX idx_geom ON track_geom (geom) INDEXTYPE IS mdsys.spatial_index_v2;<br/>CREATE INDEX idx_user_id ON track_geom (user_id);<br/>CREATE INDEX idx_capture_time_as_number ON track_geom (capture_time_as_number);</span></pre><p id="ec76" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">使用Spatial Studio可视化曲目</strong></p><p id="c35d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">Oracle Spatial Studio是在地图上绘制几何数据集的一个有用工具。您可以从Oracle Cloud Marketplace部署它，并通过一个始终免费的计算实例免费使用它。有关如何设置Spatial Studio的更多信息，请参考<a class="ae it" href="https://apexapps.oracle.com/pls/apex/dbpm/r/livelabs/view-workshop?wid=778" rel="noopener ugc nofollow" target="_blank">本研讨会</a>。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kr"><img src="../Images/6f6e9546a74003225077ca8296cc9b9d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q08SL4z4aI-8P6wSw9xJvw.png"/></div></div></figure><p id="e595" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">建立Spatial Studio后，连接到ADB并选择<code class="du jy jz ka kb b">TRACK_GEOM</code>表作为数据集。然后，将该数据集添加到新项目中，并将其拖放到地图面板中。因为已经创建了必要的空间索引，所以数据点将被正确地可视化，如下所示。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ks"><img src="../Images/2212b3d988516436eee35d426be91981.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ze89Dq1hMWKwvYvynqhAhg.png"/></div></div></figure><p id="7615" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果你仔细观察，你可以看到多个用户被标绘在相同的地点或路径上，但是你不容易发现他们是否真的互相接触过。为此，我们还需要考虑捕获时间。</p><p id="c5df" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">在音轨中查找联系人事件</strong></p><p id="d201" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，我们可以使用联系人跟踪API来检测联系人。联系人跟踪API是一个PL/SQL表函数(sdo_obj_tracing包)。让我们找出在5月31日来到<strong class="iw hi">用户7 15米范围内的人。我们将相应地给出用户ID、时间范围和距离阈值作为参数。此外，我们可以设置时间阈值来确定接近度，以及检测连续数据点的时间容差。</strong></p><pre class="jt ju jv jw fd kd kb ke bn kf kg bi"><span id="4175" class="kh ki hh kb b be kj kk l kl km">SELECT<br/>  ROWNUM AS contact_id,<br/>  t.in_user_id,<br/>  t.out_user_id,<br/>  ROUND(t.duration / 60, 2) AS duration_in_minutes,<br/>  TO_CHAR(t.start_time, 'YYYY-MM-DD HH24:MI:SS') AS start_time,<br/>  TO_CHAR(t.end_time, 'YYYY-MM-DD HH24:MI:SS') AS end_time,<br/>  t.num_contact_times,<br/>  t.geom<br/>FROM<br/>  TABLE(<br/>    sdo_obj_tracing.get_all_durations(<br/>      user_id                    =&gt; 7,<br/>      start_time                 =&gt; TO_DATE('2020-05-31 00:00:00','YYYY-MM-DD HH24:MI:SS'),<br/>      end_time                   =&gt; TO_DATE('2020-05-31 23:59:59','YYYY-MM-DD HH24:MI:SS'),<br/>      distance                   =&gt; 15,<br/>      time_tolerance_in_sec      =&gt; 5,<br/>      chaining_tolerance_in_sec  =&gt; 20,<br/>      track_table_name           =&gt; 'track_geom',<br/>      geom_column_name           =&gt; 'geom',<br/>      user_id_column_name        =&gt; 'user_id',<br/>      time_column_name           =&gt; 'capture_time',<br/>      date_as_number_column_name =&gt; 'capture_time_as_number'<br/>    )<br/>  ) t<br/>WHERE<br/>  t.segment_or_all = 'ALL'<br/>ORDER BY<br/>  t.in_user_id,<br/>  t.out_user_id,<br/>  t.start_time;</span></pre><p id="978d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在数据库操作中执行此查询。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kn"><img src="../Images/e005b4d81456d69b0eca8997c436ee66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w0kjRN6yK8v6Uz2lAwfogw.png"/></div></div></figure><p id="26bf" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">查询结果显示用户7与用户5、6和8有联系。特别地，与用户6的联系非常长(86分钟)。接触位置组作为一个几何对象返回到<code class="du jy jz ka kb b">GEOM</code>列。</p><p id="fdd6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">可视化联系人</strong></p><p id="c868" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为了在Spatial Studio中可视化联系人位置，我们将把上面的查询结果存储在一个表中。为此，只需在前一个查询的开头添加一行(CREATE TABLE … AS)。或者，您可以创建一个视图(创建视图…作为),以便在访问该视图时运行计算。</p><pre class="jt ju jv jw fd kd kb ke bn kf kg bi"><span id="2887" class="kh ki hh kb b be kj kk l kl km">CREATE TABLE contacts AS<br/>SELECT<br/>  ROWNUM AS contact_id,<br/>  t.in_user_id,<br/>  t.out_user_id,<br/>  ROUND(t.duration / 60, 2) AS duration_in_minutes,<br/>  TO_CHAR(t.start_time, 'YYYY-MM-DD HH24:MI:SS') AS start_time,<br/>  TO_CHAR(t.end_time, 'YYYY-MM-DD HH24:MI:SS') AS end_time,<br/>  t.num_contact_times,<br/>  t.geom<br/>FROM<br/>  TABLE(<br/>    sdo_obj_tracing.get_all_durations(<br/>      user_id                    =&gt; 7,<br/>      start_time                 =&gt; TO_DATE('2020-05-31 00:00:00','YYYY-MM-DD HH24:MI:SS'),<br/>      end_time                   =&gt; TO_DATE('2020-05-31 23:59:59','YYYY-MM-DD HH24:MI:SS'),<br/>      distance                   =&gt; 15,<br/>      time_tolerance_in_sec      =&gt; 5,<br/>      chaining_tolerance_in_sec  =&gt; 20,<br/>      track_table_name           =&gt; 'track_geom',<br/>      geom_column_name           =&gt; 'geom',<br/>      user_id_column_name        =&gt; 'user_id',<br/>      time_column_name           =&gt; 'capture_time',<br/>      date_as_number_column_name =&gt; 'capture_time_as_number'<br/>    )<br/>  ) t<br/>WHERE<br/>  t.segment_or_all = 'ALL'<br/>ORDER BY<br/>  t.in_user_id,<br/>  t.out_user_id,<br/>  t.start_time;</span></pre><p id="1086" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">将新创建的<code class="du jy jz ka kb b">CONTACTS</code>表添加到Spatial Studio，并将其拖放到地图上以绘制联系人位置。如红色圆圈所示，我们可以看到，即使用户一起移动，也会跟踪持续的接触。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/ab03959fd95ec47d88c4feaab6576df2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*00PGabOezyATwXH_fglY0Q.png"/></div></div></figure><p id="ddfc" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">许多其他用例</strong></p><p id="6660" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">随着GPS设备的广泛使用，管理地理空间信息的平台正在成为IT基础设施的重要组成部分。我们不仅可以将上述空间数据库技术应用于人与人之间的接触追踪，还可以用于追踪车辆和物联网设备。其可能的使用案例非常广泛，从地理营销或MaaS(移动即服务)等个性化服务到警察调查和交通优化等社会基础设施。</p></div><div class="ab cl kt ku go kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ha hb hc hd he"><p id="2f32" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">请从以下网址了解有关<strong class="iw hi"> Oracle Spatial </strong>的更多信息:</p><ul class=""><li id="a9eb" class="la lb hh iw b ix iy jb jc jf lc jj ld jn le jr lf lg lh li bi translated"><a class="ae it" rel="noopener" href="/tag/oracle-spatial">中</a> (=所有带有Oracle Spatial标签的文章)</li><li id="afdb" class="la lb hh iw b ix lj jb lk jf ll jj lm jn ln jr lf lg lh li bi translated"><a class="ae it" href="https://stackoverflow.com/questions/tagged/oracle-spatial" rel="noopener ugc nofollow" target="_blank">堆栈溢出</a> (=带有oracle-spatial标记的问题)</li><li id="daf4" class="la lb hh iw b ix lj jb lk jf ll jj lm jn ln jr lf lg lh li bi translated"><a class="ae it" href="https://join.slack.com/t/andouc/shared_invite/zt-1a2hmiz6f-vLlblcQyv0t9FMraMMP5uQ" rel="noopener ugc nofollow" target="_blank"> Slack AnDOUC </a> (=邀请链接，请访问#spatial)</li><li id="ade2" class="la lb hh iw b ix lj jb lk jf ll jj lm jn ln jr lf lg lh li bi translated"><a class="ae it" href="https://join.slack.com/t/oracledevrel/shared_invite/zt-uffjmwh3-ksmv2ii9YxSkc6IpbokL1g" rel="noopener ugc nofollow" target="_blank"> Slack OracleDevRel </a> (=邀请链接，请访问#oracle-db-spatial)</li></ul></div></div>    
</body>
</html>