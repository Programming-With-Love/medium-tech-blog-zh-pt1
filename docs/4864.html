<html>
<head>
<title>Your first Selenium data scraper in Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">你在科特林的第一个硒数据刮刀</h1>
<blockquote>原文：<a href="https://blog.kotlin-academy.com/your-first-selenium-data-scraper-in-kotlin-51ce22083fb9?source=collection_archive---------0-----------------------#2018-09-03">https://blog.kotlin-academy.com/your-first-selenium-data-scraper-in-kotlin-51ce22083fb9?source=collection_archive---------0-----------------------#2018-09-03</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><figure class="im in gp gr io ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi il"><img src="../Images/fbd0c218f6934869e3276daeaff2dd93.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6hKZFKSmN_ERII6g1rPtsg.png"/></div></div></figure><div class=""/><p id="fd28" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">很可能你每天都有一些例行任务要做。也许你一遍又一遍地查看Twitter或一些门户网站？也许你正在测试你的网站？或者你可能接到一个从某个网站收集大量数据的任务。这些动作中的一些可以使用应用程序或API来自动化。然而这并不总是可能的，相反，我们使用经典的点击和从我们的浏览器复制。虽然不需要这样。有许多替代方法可以为我们打开浏览器，进行一系列操作，包括在页面上移动和收集数据。其中最受欢迎的是<a class="ae kt" href="https://www.seleniumhq.org/projects/ide/" rel="noopener ugc nofollow" target="_blank">硒</a>。让我们从中得到一些乐趣，并制作一些样本数据收集器。</p><h1 id="cd1b" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">装置</h1><p id="2150" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">当我们将Kotlin与Gradle一起使用时，我们只需添加以下依赖项即可使用Selenium:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="f35a" class="mg kv iy mc b gy mh mi l mj mk">compile <strong class="mc iz">group</strong>: <strong class="mc iz">'org.seleniumhq.selenium'</strong>, <strong class="mc iz">name</strong>: <strong class="mc iz">'selenium-java'</strong>, <strong class="mc iz">version</strong>: <strong class="mc iz">'2.41.0'</strong></span></pre><p id="8d41" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">或者，如果不使用Gradle，可以使用Maven或者在项目中添加Selenium jar。</p><p id="18ee" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你需要做的另一件事是你需要安装<a class="ae kt" href="https://sites.google.com/a/chromium.org/chromedriver/" rel="noopener ugc nofollow" target="_blank"> Chromedriver </a>。好消息是，在MacOS上，你需要做的就是:</p><p id="5752" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated"><code class="fe ml mm mn mc b">brew install chromedriver</code></p><p id="dfc2" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在，您已经准备好制作您的第一个数据刮刀了。</p><h1 id="2d1d" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">例1。新闻报废</h1><p id="ff93" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">如果你需要了解在线时事通讯的新闻，你可以使用RSS订阅程序，比如Feedly。尽管假设您最喜欢的门户网站不支持它。现在你每天都要查看很多次，寻找一些新闻。相反，我们将制作一个程序来为您检查并一个接一个地显示标题:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="8bec" class="mg kv iy mc b gy mh mi l mj mk">&gt; bwwnews<br/>How to Pick a Career (That Actually Fits You)<br/>Neuralink and the Brain’s Magical Future<br/>100 Blocks a Day<br/>The Second Presidential Debate<br/>SpaceX’s Big Fucking Rocket – The Full Story...<br/>The Marriage Decision: Everything Forever or Nothi...<br/>Wait But Hi – Full Report<br/>Clueyness: A Weird Kind of Sad<br/>...<br/>&gt; bwwnews<br/>Nothing new on But Wait Why</span></pre><p id="08ed" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">(这只是一个例子！如果你想要新闻，我建议你使用邮件列表或者RSS订阅。)</p><p id="bbbe" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">怎么做？首先，我们需要初始化驱动程序:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="7a0c" class="mg kv iy mc b gy mh mi l mj mk"><strong class="mc iz">val </strong>driver = ChromeDriver()</span></pre><p id="5b05" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">有了这个驱动程序，我们可以打开网站:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="d41d" class="mg kv iy mc b gy mh mi l mj mk">driver.get(<strong class="mc iz">"https://waitbutwhy.com/archive"</strong>)</span></pre><p id="e3fc" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">找一些你可以用来识别新闻的东西:</p><figure class="lx ly lz ma gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mo"><img src="../Images/638ed6e438f83dc9f4a33c49292c2da4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7ClSiDt-B7SALXRb_WouhA.png"/></div></div></figure><p id="0eb0" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是一个困难的情况——我们要寻找的元素没有特定的类。我们将参考<code class="fe ml mm mn mc b">post-right</code>,并利用我们对该网站如何构建的了解继续下去:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="326d" class="mg kv iy mc b gy mh mi l mj mk"><strong class="mc iz">val </strong>titles = driver.findElementsByClassName(<strong class="mc iz">"post-right"</strong>)<br/>        .<em class="mp">map </em><strong class="mc iz">{ it</strong>.findElement(By.tagName(<strong class="mc iz">"H5"</strong>)) <strong class="mc iz">}<br/>        </strong>.<em class="mp">map </em><strong class="mc iz">{ it</strong>.findElement(By.tagName(<strong class="mc iz">"A"</strong>)) <strong class="mc iz">}<br/>        </strong>.<em class="mp">map </em><strong class="mc iz">{ it</strong>.<em class="mp">text </em><strong class="mc iz">}</strong></span></pre><p id="358f" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">对于引用元素的不同方式，我建议使用色调:</p><figure class="lx ly lz ma gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mq"><img src="../Images/9f6541ee35aff5d3ec395c5edb4b8f1a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n0TkAxTcOmGG4Yp3YxkCug.png"/></div></div></figure><p id="bcbf" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们只需要打印它，然后我们可以关闭驱动程序:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="ade7" class="mg kv iy mc b gy mh mi l mj mk">titles.<em class="mp">forEach</em>(::println)<br/>driver.close()</span></pre><p id="d6d6" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">一些有用的提示:如果您需要等待页面加载，请使用以下函数:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="4252" class="mg kv iy mc b gy mh mi l mj mk"><strong class="mc iz">fun </strong>waitUntilPageIsReady(driver: ChromeDriver) {<br/>    <strong class="mc iz">val </strong>executor = driver <strong class="mc iz">as </strong>JavascriptExecutor<br/>    WebDriverWait(driver, 1)<br/>            .until <strong class="mc iz">{ </strong>executor.executeScript(<strong class="mc iz">"return document.readyState"</strong>) == <strong class="mc iz">"complete" }<br/></strong>}</span></pre><p id="2291" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果需要接受一些cookies，使用<code class="fe ml mm mn mc b">click</code>(可能的话，按id引用):</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="b810" class="mg kv iy mc b gy mh mi l mj mk">driver.findElementByClassName(<strong class="mc iz">"intro_acceptAll--23PPA"</strong>)?.click()</span></pre><p id="35b3" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">如果元素不一定在我们引用的容器内，我们需要捕捉一个错误或者使用<code class="fe ml mm mn mc b">flatMap</code>:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="0c56" class="mg kv iy mc b gy mh mi l mj mk"><strong class="mc iz">val </strong>titles = driver.findElementsByClassName(<strong class="mc iz">"post-right"</strong>)<br/>        .<em class="mp">flatMap </em><strong class="mc iz">{ it</strong>.findElements(By.tagName(<strong class="mc iz">"H5"</strong>)) <strong class="mc iz">}<br/>        </strong>.<em class="mp">map </em><strong class="mc iz">{ it</strong>.findElement(By.tagName(<strong class="mc iz">"A"</strong>)) <strong class="mc iz">}<br/>        </strong>.<em class="mp">map </em><strong class="mc iz">{ it</strong>.<em class="mp">text </em><strong class="mc iz">}</strong></span></pre><p id="6856" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是一个包含缓存并只显示新闻的版本:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="5ad2" class="mg kv iy mc b gy mh mi l mj mk"><strong class="mc iz">fun </strong>main(args: Array&lt;String&gt;) {<br/>    <strong class="mc iz">val </strong>driver = ChromeDriver()<br/><br/>    <strong class="mc iz">val </strong>file = File(<strong class="mc iz">"BWWHistory.txt"</strong>)<br/>    <strong class="mc iz">if </strong>(!file.exists()) file.createNewFile()<br/>    <strong class="mc iz">val </strong>history = file.<em class="mp">readLines</em>()<br/><br/>    driver.get(<strong class="mc iz">"https://waitbutwhy.com/archive"</strong>)<br/><br/>    <strong class="mc iz">val </strong>titles = driver.findElementsByClassName(<strong class="mc iz">"post-right"</strong>)<br/>            .<em class="mp">map </em><strong class="mc iz">{ it</strong>.findElement(By.tagName(<strong class="mc iz">"H5"</strong>)) <strong class="mc iz">}<br/>            </strong>.<em class="mp">map </em><strong class="mc iz">{ it</strong>.findElement(By.tagName(<strong class="mc iz">"A"</strong>)) <strong class="mc iz">}<br/>            </strong>.<em class="mp">map </em><strong class="mc iz">{ it</strong>.<em class="mp">text </em><strong class="mc iz">}<br/><br/>    val </strong>new = titles - history<br/>    <strong class="mc iz">if </strong>(new.isEmpty()) {<br/>        <em class="mp">println</em>(<strong class="mc iz">"Nothing new on But Wait Why?"</strong>)<br/>    } <strong class="mc iz">else </strong>{<br/>        <em class="mp">println</em>(<strong class="mc iz">"New articles:"</strong>)<br/>        new.<em class="mp">forEach </em><strong class="mc iz">{<br/>            </strong><em class="mp">println</em>(<strong class="mc iz">it</strong>)<br/>            file.<em class="mp">appendText</em>(<strong class="mc iz">"$it\n"</strong>)<br/>        <strong class="mc iz">}<br/>    </strong>}<br/>    <br/>    driver.close()<br/>}</span></pre><p id="524e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">现在你只需要别名，你可以在你的系统的任何地方运行它。如果你想查看新闻，你可以启动你的程序，而不是查看网站。</p><figure class="lx ly lz ma gt ip gh gi paragraph-image"><a href="https://leanpub.com/effectivekotlin/c/3YYtCtqCC6a4"><div class="gh gi mr"><img src="../Images/0742a8ad0cfd3851db2d28061bf6f214.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xbef0K0JtDZ6F2vBVUDZsg.jpeg"/></div></a></figure><h1 id="0564" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">例2。没有API的程序的API</h1><p id="f63f" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">我用来改善健康饮食的一项服务是Inside Tracker。它分析我的血液测试，并给我饮食建议。我发现它非常有用。不过，令人恼火的是，它有一个系统，只有在我申请推荐的情况下才进行跟踪，这真的不方便。尤其是缺乏移动或桌面应用程序是相当恼人的。他们希望我每天访问他们的网站，并填写它。我的想法是用一个简单的终端程序代替它:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="d6b7" class="mg kv iy mc b gy mh mi l mj mk">Did you do "Eat more whole grains"? (y/n)<br/>&gt; y<br/>Great!<br/>Did you do "Adopt a vegetarian or vegan diet"? (y/n)<br/>&gt; n<br/>Did you do "Eat more oats or barley for beta-glucan"? (y/n)<br/>&gt; <br/>Great!<br/>Did you do "Probiotic"? (y/n)<br/>&gt; <br/>Great!<br/>Did you do "Eat more fish"? (y/n)</span></pre><p id="6b95" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们来讨论一下动作的顺序。首先，我们需要登录:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="0a15" class="mg kv iy mc b gy mh mi l mj mk"><strong class="mc iz">val </strong>driver = ChromeDriver()<br/>driver.get(<strong class="mc iz">"https://www.insidetracker.com/public/login/"</strong>)<br/>driver.findElementByLinkText(<strong class="mc iz">"Dismiss"</strong>)?.click()<br/>driver.findElementById(<strong class="mc iz">"email"</strong>).sendKeys(<strong class="mc iz">"XXX@gmail.com"</strong>)<br/>driver.findElementById(<strong class="mc iz">"password"</strong>).sendKeys(<strong class="mc iz">"XXX"</strong>)<br/>driver.findElementByName(<strong class="mc iz">"submit"</strong>).click()</span></pre><p id="383d" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后我们可以得到卡片:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="b62c" class="mg kv iy mc b gy mh mi l mj mk"><strong class="mc iz">val </strong>cards = driver.findElementsByClassName(<strong class="mc iz">"card-hover"</strong>)</span></pre><p id="aaa9" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们为他们每个人取了头衔:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="55e0" class="mg kv iy mc b gy mh mi l mj mk"><strong class="mc iz">val </strong>name = card.findElement(By.className(<strong class="mc iz">"card__text"</strong>)).<em class="mp">text</em></span></pre><p id="9555" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">请求用户操作并解释它(除“n”之外的所有内容都被解释为确认):</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="b05e" class="mg kv iy mc b gy mh mi l mj mk"><em class="mp">println</em>(<strong class="mc iz">"Did you do \"$</strong>name<strong class="mc iz">\"? (y/n)"</strong>)<br/><strong class="mc iz">val </strong>resp = <em class="mp">readLine</em>()<br/><strong class="mc iz">val </strong>shouldBeChecked = resp != <strong class="mc iz">"n"<br/>if</strong>(shouldBeChecked) {<br/>     <em class="mp">println</em>(<strong class="mc iz">"Great!"</strong>)<br/>}</span></pre><p id="3bcb" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">我们检查动作是否已经被选中:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="4147" class="mg kv iy mc b gy mh mi l mj mk"><strong class="mc iz">val </strong>cardWithNow = card.findElement(By.className(<strong class="mc iz">"card__days-item--now"</strong>))<br/><strong class="mc iz">val </strong>isChecked = <strong class="mc iz">"card__days-item--check" in </strong>cardWithNow.getAttribute(<strong class="mc iz">"class"</strong>)</span></pre><p id="23d9" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后，如果当前状态与期望的不同，我们切换操作:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="137f" class="mg kv iy mc b gy mh mi l mj mk"><strong class="mc iz">if</strong>(isChecked != shouldBeChecked) {<br/>    card.click()<br/>    card.findElement(By.className(<strong class="mc iz">"check-in-btn"</strong>)).click()<strong class="mc iz"><br/></strong>}</span></pre><p id="0ae1" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">还需要一个技巧。在他们的网站上，你不会在一个页面上看到所有的动作。你需要滑动以移动到下一个操作:</p><figure class="lx ly lz ma gt ip gh gi paragraph-image"><div role="button" tabindex="0" class="iq ir di is bf it"><div class="gh gi mo"><img src="../Images/12c5490fc2ceb3a99a13ddd9a678be30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*31d7v8WJcRArWRn-21d0NQ.png"/></div></div></figure><p id="cfd4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">简单的方法是使用右边的按钮滑动到下一个元素。问题是它只有在你悬停在某个动作上时才可见。你可以很容易地模拟它:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="c4bb" class="mg kv iy mc b gy mh mi l mj mk">Actions(driver).moveToElement(card).perform()</span></pre><p id="128a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">然后按钮应该是可见的，我们可以点击它。只是为了避免我们在最后一个项目上时按钮不可见的情况，我们将检查它是否显示:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="3ac5" class="mg kv iy mc b gy mh mi l mj mk">driver.findElementsByClassName(<strong class="mc iz">"swiper-button-next"</strong>)<br/>      .<em class="mp">filter </em><strong class="mc iz">{ it</strong>.<em class="mp">isDisplayed </em><strong class="mc iz">}<br/>      </strong>.<em class="mp">forEach </em><strong class="mc iz">{ it</strong>.click() <strong class="mc iz">}</strong></span></pre><p id="eec2" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">最后我们可以结束程序了:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="545f" class="mg kv iy mc b gy mh mi l mj mk">driver.close()<br/>driver.quit()</span></pre><p id="5d2a" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">这是我最后的代码:</p><pre class="lx ly lz ma gt mb mc md me aw mf bi"><span id="96cc" class="mg kv iy mc b gy mh mi l mj mk"><strong class="mc iz">fun </strong>main(args: Array&lt;String&gt;) {<br/>    <strong class="mc iz">val </strong>driver = ChromeDriver()<br/>    driver.get(<strong class="mc iz">"https://www.insidetracker.com/public/login/"</strong>)<br/>    driver.findElementByLinkText(<strong class="mc iz">"Dismiss"</strong>)?.click()<br/>    driver.findElementById(<strong class="mc iz">"email"</strong>).sendKeys(<strong class="mc iz">"XXX@gmail.com"</strong>)<br/>    driver.findElementById(<strong class="mc iz">"password"</strong>).sendKeys(<strong class="mc iz">"XXX"</strong>)<br/>    driver.findElementByName(<strong class="mc iz">"submit"</strong>).click()<br/>    <strong class="mc iz">val </strong>cards = driver.findElementsByClassName(<strong class="mc iz">"card-hover"</strong>)<br/>    <strong class="mc iz">for </strong>(card <strong class="mc iz">in </strong>cards) {<br/>        <strong class="mc iz">val </strong>name = card.findElement(By.className(<strong class="mc iz">"card__text"</strong>)).<em class="mp">text<br/><br/>        println</em>(<strong class="mc iz">"Did you do \"$</strong>name<strong class="mc iz">\"? (y/n)"</strong>)<br/>        <strong class="mc iz">val </strong>resp = <em class="mp">readLine</em>()<br/><br/>        <strong class="mc iz">val </strong>cardWithNow = card.findElement(By.className(<strong class="mc iz">"card__days-item--now"</strong>))<br/>        <strong class="mc iz">val </strong>isChecked = <strong class="mc iz">"card__days-item--check" in </strong>cardWithNow.getAttribute(<strong class="mc iz">"class"</strong>)<br/>        <strong class="mc iz">val </strong>shouldBeChecked = resp != <strong class="mc iz">"n"<br/><br/>        if</strong>(shouldBeChecked) {<br/>            <em class="mp">println</em>(<strong class="mc iz">"Great!"</strong>)<br/>        }<br/><br/>        <strong class="mc iz">if</strong>(isChecked != shouldBeChecked) {<br/>            card.click()<br/>            card.findElements(By.className(<strong class="mc iz">"check-in-btn"</strong>)).<em class="mp">forEach </em><strong class="mc iz">{ it</strong>.click() <strong class="mc iz">}<br/>        </strong>}<br/><br/>        Actions(driver).moveToElement(card).perform()<br/>        driver.findElementsByClassName(<strong class="mc iz">"swiper-button-next"</strong>)<br/>                .<em class="mp">filter </em><strong class="mc iz">{ it</strong>.<em class="mp">isDisplayed </em><strong class="mc iz">}<br/>                </strong>.<em class="mp">forEach </em><strong class="mc iz">{ it</strong>.click() <strong class="mc iz">}<br/>    </strong>}<br/>    driver.close()<br/>    driver.quit()<br/>}</span></pre><p id="241e" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Program相对于手动登记来说并不是一个很大的改进，但它是可编程的，现在我可以将它与我使用的其他程序或服务集成在一起。</p><h1 id="e78b" class="ku kv iy bd kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr bi translated">摘要</h1><p id="3a06" class="pw-post-body-paragraph jv jw iy jx b jy ls ka kb kc lt ke kf kg lu ki kj kk lv km kn ko lw kq kr ks ig bi translated">制作这两个Selenium程序花了我不到3个小时。它真的很容易和有趣，我相信每个人都可以找到一天来玩它。</p><p id="35b4" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">Selenium也是一个强大的自动化工具。这是两个简单的例子，但是它应该给你一种感觉，每一个普通的动作，比如更新的签入或者执行某个动作的签入，都可以在任何网站上自动化。以下是更多关于如何使用它的想法:</p><ul class=""><li id="6adc" class="ms mt iy jx b jy jz kc kd kg mu kk mv ko mw ks mx my mz na bi translated">检查您的视频在YouTube或Google网站上的位置。在一些排名中其他事物的位置。</li><li id="3c0b" class="ms mt iy jx b jy nb kc nc kg nd kk ne ko nf ks mx my mz na bi translated">在论坛和Reddit上自动分享内容。</li><li id="d11b" class="ms mt iy jx b jy nb kc nc kg nd kk ne ko nf ks mx my mz na bi translated">在您使用的门户中查找并保存您想要跟踪的统计数据。</li></ul><p id="67b8" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">小心点。如果你在大型门户网站中过度使用自动操作，你可能会被封禁(我的朋友就这样在谷歌学术被封禁了，但他非常频繁地使用这个解决方案)。</p></div><div class="ab cl ng nh hr ni" role="separator"><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl nm"/><span class="nj bw bk nk nl"/></div><div class="ig ih ii ij ik"><p id="4ba7" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">你需要Kotlin工作室吗？请访问我们的网站,看看我们能为您做些什么。</p><p id="35d9" class="pw-post-body-paragraph jv jw iy jx b jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks ig bi translated">了解卡帕头最新的重大新闻。学院、<a class="ae kt" href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a" rel="noopener ugc nofollow" target="_blank">订阅时事通讯</a>、<a class="ae kt" href="https://twitter.com/ktdotacademy" rel="noopener ugc nofollow" target="_blank">观察推特</a>并在媒体上关注。</p><figure class="lx ly lz ma gt ip gh gi paragraph-image"><a href="http://eepurl.com/diMmGv"><div class="gh gi mr"><img src="../Images/3146970f03e44cb07afe660b0d43e045.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*54OqlYA4etu7wfpmMP5TKQ.png"/></div></a></figure></div></div>    
</body>
</html>