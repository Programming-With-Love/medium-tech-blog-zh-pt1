<html>
<head>
<title>Bringing Web components into play with Ng!</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">用ng发挥Web组件的作用！</h1>
<blockquote>原文：<a href="https://medium.com/globant/bringing-web-components-into-play-with-ng-d9b1042af267?source=collection_archive---------3-----------------------#2020-07-24">https://medium.com/globant/bringing-web-components-into-play-with-ng-d9b1042af267?source=collection_archive---------3-----------------------#2020-07-24</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/876cd5a07484bf68430f4dcce24758bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*n7yaGRDKhXbHEVSG"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@baciutudor?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Tudor Baciu</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="fc95" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">从<a class="ae it" rel="noopener" href="/globant/unraveling-the-web-components-5df1df4ec605">上一篇关于web组件的文章</a>继续，我们现在对它们有了一个概念！</p><p id="473c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">关于角形组件转换成Web组件，需要理解的重要一点是，它们是简单的角形组件——作为Web组件使用，它们没有什么不同。你可以在里面做任何事情，你可以用一个普通的角度组件，它会正确地工作。为了让组件工作，您必须做的任何配置步骤都是在模块级完成的；组件本身没有任何变化。这意味着你可以毫不费力地将任何现有的角形组件转换成Web组件。</p><p id="d9a7" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">那么我们如何在angular中创建一个web组件呢？</p><h1 id="90f4" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">设置您的项目</h1><p id="9ec2" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">首先，我们将使用Angular CLI创建一个Angular项目。我们需要通过运行以下命令来安装Angular CLI:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="6cc1" class="le jt hh la b fi lf lg l lh li">npm install -g @angular/cli</span></pre><p id="35b9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这个命令将把Angular CLI工具安装到我们的命令行中。安装后，运行以下命令创建CLI项目。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="87c7" class="le jt hh la b fi lf lg l lh li">ng new my-new-app</span></pre><p id="81d6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">该命令将创建一个角度项目，并将安装所有必要的NPM软件包。完成后，我们可以运行:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="16a7" class="le jt hh la b fi lf lg l lh li">ng serve</span></pre><p id="4d8c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这个命令将在localhost:4200上本地运行我们的Angular应用程序</p><p id="6d6a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">使用以下命令通过CLI安装角度元素:</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="a862" class="le jt hh la b fi lf lg l lh li">npm i @angular/elements --save</span></pre><p id="a4da" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi"> @angular/elements </strong>实现angular的自定义元素API，可以将组件打包成自定义元素。</p><p id="f3f6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">接下来，我们需要安装自定义元素polyfill。</p><blockquote class="lj lk ll"><p id="22aa" class="iu iv lm iw b ix iy iz ja jb jc jd je ln jg jh ji lo jk jl jm lp jo jp jq jr ha bi translated">一个“<strong class="iw hi"><em class="hh">”polyfill</em></strong>”本质上是一段代码，它允许你访问浏览器应该提供的API。但是，有时这些特性和功能并不容易获得，因此polyfill会填充缺少的内容，并确保您的应用程序继续按预期工作。</p></blockquote><p id="9ab1" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这意味着您的应用程序在一定程度上可以向后兼容旧的浏览器。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="893c" class="le jt hh la b fi lf lg l lh li">npm i @webcomponents/custom-elements --save</span></pre><p id="0baa" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">完成这些工作后，进入poyfills.ts文件，该文件位于Angular应用程序的src文件夹中，并将其导入到该文件中。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="7b36" class="le jt hh la b fi lf lg l lh li">import ‘@webcomponents/custom-elements/custom-elements.min’;</span></pre><h1 id="8bda" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">创建新组件</h1><p id="123c" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">Angular CLI没有为我们的组件编写所有这些文件，而是为我们提供了一种快速生成这些文件的方法。让我们使用这个方法在我们的系统中创建一个HelloWorld组件。</p><pre class="kv kw kx ky fd kz la lb lc aw ld bi"><span id="af6e" class="le jt hh la b fi lf lg l lh li">ng g c hello-world</span></pre><p id="aedf" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">该命令将在app文件夹中创建一个名为hello-world的文件夹。如果你打开这个文件，你会发现里面有4个文件:</p><ul class=""><li id="f5ec" class="lq lr hh iw b ix iy jb jc jf ls jj lt jn lu jr lv lw lx ly bi translated">hello-world.component.css</li><li id="fb80" class="lq lr hh iw b ix lz jb ma jf mb jj mc jn md jr lv lw lx ly bi translated">hello-world.component.html</li><li id="c3af" class="lq lr hh iw b ix lz jb ma jf mb jj mc jn md jr lv lw lx ly bi translated">你好-世界.组件.规格</li><li id="1f6f" class="lq lr hh iw b ix lz jb ma jf mb jj mc jn md jr lv lw lx ly bi translated">hello-world.component.ts</li></ul><p id="5e70" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在hello-world.component.ts文件中，您会看到选择器被设置为app-hello-world。所以，如果我们像这样把这个加到app.component.html上:</p><figure class="kv kw kx ky fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="ed32" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">然后，hello-world.component.html的内容将显示在浏览器中。</p><p id="84d5" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">我们的初始设置已经准备好了。让我们从如何使用角元素开始。</p><h1 id="4f7e" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated">将角度构件转换为腹板构件</h1><p id="c406" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">我们可以将项目中的任何组件转换成自定义元素。这个过程相当简单。接下来要做的事情是告诉Angular我们想要构建为定制元素的组件是entryComponents，在我们的AppModule中看起来是这样的:</p><figure class="kv kw kx ky fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="8023" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在，通过从@angular/core 中导入<strong class="iw hi"> Injector，并从<strong class="iw hi"> app.module.ts </strong>中的@angular/elements </strong>中导入<strong class="iw hi"> createCustomElement，将其转换为一个Angular自定义元素</strong></p><figure class="kv kw kx ky fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="1ecc" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">然后在AppModule类中，编写一个构造函数创建一个<strong class="iw hi"> createCustomElement </strong>的新实例，并向其传递HelloWorldComponent，如下所示:</p><figure class="kv kw kx ky fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><p id="feb1" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">注射器是我们用来解决依赖性的东西。这样，我们就创建了HelloWorldComponent的一个实例作为自定义元素。</p><p id="3257" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">向createCustomElement()方法传递要转换为角度元素的角度分量。这个方法将有助于创建一个桥梁，将您的Angular代码转换成能够与DOM APIs一起工作的原生JavaScript代码。</p><p id="90f6" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">代码片段:</strong></p><figure class="kv kw kx ky fd ii"><div class="bz dy l di"><div class="me mf l"/></div></figure><h1 id="d707" class="js jt hh bd ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp bi translated"><strong class="ak">后记</strong></h1><p id="8161" class="pw-post-body-paragraph iu iv hh iw b ix kq iz ja jb kr jd je jf ks jh ji jj kt jl jm jn ku jp jq jr ha bi translated">角度元素可让您在角度元件和自定义元素浏览器标准之间架起桥梁。将Angular组件转换成web组件提供了一种在Angular应用程序之外创建动态HTML内容的简单方法。</p></div></div>    
</body>
</html>