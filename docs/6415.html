<html>
<head>
<title>2 Minutes: Reactive Model</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2分钟:反应式模型</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/2-minutes-reactive-model-4135089bebff?source=collection_archive---------1-----------------------#2018-02-03">https://medium.com/quick-code/2-minutes-reactive-model-4135089bebff?source=collection_archive---------1-----------------------#2018-02-03</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="3aae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为一个新项目尝试了一个有趣的东西——基于RxJava的不可变模型。</p><p id="8b5d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以主要的想法是:</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="4e51" class="jl jm hh jh b fi jn jo l jp jq"><strong class="jh hi">public interface </strong>IRxModel&lt;Item <strong class="jh hi">extends </strong>IRxModelItem, Category&gt; {<br/><br/>    <em class="jr">/**<br/>     * submitting one item to add/replace<br/>     * </em><strong class="jh hi"><em class="jr">@param item<br/>     </em></strong><em class="jr">*/<br/>    </em><strong class="jh hi">void </strong>submitItem(@NonNull Item item);<br/><br/>    <em class="jr">/**<br/>     * submitting a few items to add/replace<br/>     * </em><strong class="jh hi"><em class="jr">@param items<br/>     </em></strong><em class="jr">*/<br/>    </em><strong class="jh hi">void </strong>submitItems(@NonNull List&lt;? <strong class="jh hi">extends </strong>Item&gt; items);<br/><br/>    <em class="jr">/**<br/>     * delete an item<br/>     * </em><strong class="jh hi"><em class="jr">@param id<br/>     </em></strong><em class="jr">*/<br/>    </em><strong class="jh hi">void </strong>delete(String id);<br/><br/>    <em class="jr">/**<br/>     * delete all items<br/>     */<br/>    </em><strong class="jh hi">void </strong>clear();<br/><br/>    <em class="jr">/**<br/>     * get item as a sync operation<br/>     * </em><strong class="jh hi"><em class="jr">@param id<br/>     </em></strong><em class="jr">* </em><strong class="jh hi"><em class="jr">@return </em></strong><em class="jr">item or null<br/>     */<br/>    </em>@Nullable<br/>    Item getItem(String id);<br/><br/>    <em class="jr">/**<br/>     * get Observable for item<br/>     * </em><strong class="jh hi"><em class="jr">@param id<br/>     </em></strong><em class="jr">* </em><strong class="jh hi"><em class="jr">@return </em></strong><em class="jr">observable to emit item updates until item is deleted<br/>     */<br/>    </em>@NonNull<br/>    Observable&lt;Item&gt; subscribeItem(String id);<br/><br/>    <em class="jr">/**<br/>     * get Observable to emit category items updates until cleared<br/>     * </em><strong class="jh hi"><em class="jr">@param category<br/>     </em></strong><em class="jr">* </em><strong class="jh hi"><em class="jr">@return<br/>     </em></strong><em class="jr">*/<br/>    </em>@NonNull<br/>    Observable&lt;List&lt;Item&gt;&gt; subscribeCategory(Category category);<br/>}</span></pre><p id="9b5d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">模型包含一些项目。项目可以通过它们的id以及它们的类别来处理。最重要的是—您可以订阅项目，包括目前在模型中不可用的项目。比如稍后将要创建/下载/解析的空类别或项目id。</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="9103" class="jl jm hh jh b fi jn jo l jp jq"><strong class="jh hi">public interface </strong>ICategorizator&lt;Item, Category&gt; {<br/>    Set&lt;Category&gt; categorize(Item item);<br/>}</span></pre><p id="a2ae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您的ICategorizator实现可以根据您的需要将项目分成任意多的类别。例如，对于出租车订单，订单可能同时是OrderWithCars、RunningOrder、OrderInDowntown、VIP模型机制是相同的。</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="5eed" class="jl jm hh jh b fi jn jo l jp jq"><strong class="jh hi">public interface </strong>IRxModelItem {<br/>    String getId();<br/>}</span></pre><p id="a695" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Item需要提供字符串ID，这是唯一的问题——它可能不会在您的代码中以这种方式使用(如果您使用int或者根本不使用ID)。</p><p id="1fcb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">代码在这里<a class="ae js" href="https://github.com/Cryosleeper/RxModel" rel="noopener ugc nofollow" target="_blank">https://github.com/Cryosleeper/RxModel</a>，你可以从jcenter中使用</p><pre class="jc jd je jf fd jg jh ji jj aw jk bi"><span id="c395" class="jl jm hh jh b fi jn jo l jp jq">implementation <strong class="jh hi">'com.cryosleeper.android:rx-model:1.0.1'</strong></span></pre></div><div class="ab cl jt ju go jv" role="separator"><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy jz"/><span class="jw bw bk jx jy"/></div><div class="ha hb hc hd he"><p id="f322" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jr"> 2分钟是少于一根烟，而冲泡咖啡的Android中不同问题的文章。你可以使用标签</em> <a class="ae js" rel="noopener" href="/tag/2-minutes-read/latest"> <em class="jr"> 2分钟</em> </a> <em class="jr">来阅读其他的。我总是很高兴听到你的反馈，告诉我如何做得更好，以及你想读些什么。</em></p></div></div>    
</body>
</html>