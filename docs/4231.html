<html>
<head>
<title>Getting Started to Build your Actions with Yeoman Action Generator</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">开始使用Yeoman动作生成器构建动作</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/getting-started-to-build-your-actions-with-yeoman-action-generator-5ea63098e078?source=collection_archive---------0-----------------------#2019-03-11">https://medium.com/google-developer-experts/getting-started-to-build-your-actions-with-yeoman-action-generator-5ea63098e078?source=collection_archive---------0-----------------------#2019-03-11</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="f927" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我在本文中向您介绍了Yeoman动作生成器。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es jc"><img src="../Images/35b25e54bc08090c4050f600012c5e8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1236/format:webp/1*0_bm-Ubm-u1u89OJn-JbWw.png"/></div></figure><p id="6384" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">目前，谷歌助手的生态系统正在稳步成长。当然，有一个开发环境来构建动作，因此开发人员可以构建自己的动作来扩展Google Assistant的功能。该平台名为“谷歌行动”。</p><p id="55c7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当您构建动作时，实际上您需要编写一个代码来与用户和您的动作进行交互。该代码被称为“履行”。Google上的Actions将用户请求发送到您的HTTP上的实现代码，并期待HTTP响应，其中包含为用户做出响应的短语。有必要通过实现代码来处理JSON请求/响应，但是格式有点复杂。Google Client Library上的动作有能力处理它们，因此开发人员可以使用SDK轻松编写实现代码。</p><p id="63e0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我写这篇文章的时候，有两个官方SDK:</p><ul class=""><li id="6594" class="jk jl hh ig b ih ii il im ip jm it jn ix jo jb jp jq jr js bi translated"><a class="ae jt" href="https://github.com/actions-on-google/actions-on-google-nodejs" rel="noopener ugc nofollow" target="_blank">对NodeJS的Google客户端库的操作</a></li><li id="1673" class="jk jl hh ig b ih ju il jv ip jw it jx ix jy jb jp jq jr js bi translated"><a class="ae jt" href="https://github.com/actions-on-google/actions-on-google-java" rel="noopener ugc nofollow" target="_blank">对谷歌Java客户端库的操作</a></li></ul><p id="f9ae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要使用它们，您需要准备一个开发环境。例如，安装NodeJS或Java开发工具包，编写您反复编写的构建脚本和初始代码，配置您的项目以部署每个云服务，等等。但是，这些代码集对于所有项目来说几乎是相同的。</p><p id="351b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当您开始构建您的操作时，您应该能够通过简单的方式获得代码集。</p><p id="0df0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">今天，您可以使用Yeoman动作生成器自动生成代码集。您的代码集是在您回答一些问题后由生成器生成的。基本上，生成的代码集是没有任何接触的工作。也就是说，您可以将其快速部署到您选择的云服务。</p><h1 id="0b6a" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">支持的操作类型、云服务和语言</h1><p id="9d54" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">在当前版本中，生成器支持以下功能:</p><ul class=""><li id="0c51" class="jk jl hh ig b ih ii il im ip jm it jn ix jo jb jp jq jr js bi translated"><strong class="ig hi">动作类型:</strong>动作SDK和Dialogflow。</li><li id="4808" class="jk jl hh ig b ih ju il jv ip jw it jx ix jy jb jp jq jr js bi translated"><strong class="ig hi">云服务:</strong> Firebase函数、Google Cloud函数和Google AppEngine。</li><li id="2b2a" class="jk jl hh ig b ih ju il jv ip jw it jx ix jy jb jp jq jr js bi translated"><strong class="ig hi">语言:</strong> JavaScript，TypeScript，Java。</li></ul><pre class="jd je jf jg fd lc ld le lf aw lg bi"><span id="0fb1" class="lh ka hh ld b fi li lj l lk ll">? Which type do you want to use for your action? (Use arrow keys)<br/>&gt; Actions SDK <br/>  Dialogflow</span><span id="5140" class="lh ka hh ld b fi lm lj l lk ll">? Which cloud service do you want to deploy for your action? (Use arrow keys)<br/>&gt; Firebase Functions <br/>  Google Cloud Functions <br/>  Google AppEngine</span><span id="8c61" class="lh ka hh ld b fi lm lj l lk ll">? Which language do you want to use for your action? (Use arrow keys)<br/>&gt; JavaScript <br/>  TypeScript<br/>  Java</span></pre><p id="84c8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以选择每个选项来生成您的操作。但是，实际上有如下一些限制:</p><ul class=""><li id="9c4a" class="jk jl hh ig b ih ii il im ip jm it jn ix jo jb jp jq jr js bi translated"><strong class="ig hi"> Firebase函数，Google Cloud函数:</strong> JavaScript或TypeScript。</li><li id="d355" class="jk jl hh ig b ih ju il jv ip jw it jx ix jy jb jp jq jr js bi translated"><strong class="ig hi">谷歌AppEngine: </strong>仅限Java。</li></ul><p id="c1dc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">根据您对操作类型的选择，生成的源代码会发生变化。此外，如果选择了Actions SDK，则会创建一个<code class="du ln lo lp ld b">action.json</code>文件来注册您的操作包。</p><h1 id="cf75" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">如何安装</h1><p id="3b3b" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">您可以使用以下命令安装Yeoman动作生成器:</p><pre class="jd je jf jg fd lc ld le lf aw lg bi"><span id="6765" class="lh ka hh ld b fi li lj l lk ll">$ npm install -g yo generator-action</span></pre><p id="7c83" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请注意，在安装它们之前，您需要安装NodeJS 8或更高版本。</p><h1 id="4e6f" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">Actions SDK、Google Cloud函数和TypeScript</h1><p id="0cfe" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">在这里，我将介绍一个用例，以便您可以了解如何使用这个生成器。</p><p id="04bf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作为第一种情况，我们尝试使用Actions SDK生成由TypeScript编写的操作，以部署到Google Cloud功能。我们假设动作的名称是“Hello world”。</p><h2 id="ec4c" class="lh ka hh bd kb lq lr ls kf lt lu lv kj ip lw lx kn it ly lz kr ix ma mb kv mc bi translated">先决条件</h2><p id="6f34" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">在创建操作之前，您需要安装以下软件:</p><ul class=""><li id="4382" class="jk jl hh ig b ih ii il im ip jm it jn ix jo jb jp jq jr js bi translated">NodeJS 8或更高。</li><li id="b52f" class="jk jl hh ig b ih ju il jv ip jw it jx ix jy jb jp jq jr js bi translated"><a class="ae jt" href="https://cloud.google.com/sdk/docs/" rel="noopener ugc nofollow" target="_blank">谷歌云SDK </a></li></ul><p id="578c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">此外，您需要使用以下命令更新并安装测试版:</p><pre class="jd je jf jg fd lc ld le lf aw lg bi"><span id="cf3a" class="lh ka hh ld b fi li lj l lk ll">$ gcloud components update &amp;&amp; gcloud components install beta</span></pre><h2 id="0da0" class="lh ka hh bd kb lq lr ls kf lt lu lv kj ip lw lx kn it ly lz kr ix ma mb kv mc bi translated">创建AoG项目</h2><p id="f6ac" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">要为Google Assistant创建一个动作，需要在Google上创建一个新的Actions项目(AoG)。访问谷歌控制台上的<a class="ae jt" href="https://console.actions.google.com/" rel="noopener ugc nofollow" target="_blank">动作，点击<code class="du ln lo lp ld b">Add/import project</code>按钮。</a></p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es md"><img src="../Images/b985d68925456bcdc7253a5609cf9a8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bNAiDZAIzZeCYqAL8d6BaQ.png"/></div></div></figure><p id="a38f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">谷歌控制台上的操作会询问你姓名、语言和国家。您填写每个字段，然后点击<code class="du ln lo lp ld b">CREATE PROJECT</code>按钮。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es mi"><img src="../Images/84e10181a329fe9c83653532f532cf62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*84D6wkXgIsseSxvaO8wwag.png"/></div></div></figure><p id="6b84" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在下一页，点击<code class="du ln lo lp ld b">Actions SDK</code>按钮。另外，点击下一个弹出窗口上的<code class="du ln lo lp ld b">OK</code>按钮。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es mj"><img src="../Images/7e1f50cf2b7c23f35eb24d29d74c74ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*enc6W5_Ne5Hnw_y1hIZerg.png"/></div></div></figure><p id="600a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您需要获得刚才创建的项目ID。点击齿轮图标，然后点击<code class="du ln lo lp ld b">Project settings</code>菜单项。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es mk"><img src="../Images/5277f72157a8fd4965f02d0f3e305de4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Q07aE6rq3mnX1JCBGrXysA.png"/></div></div></figure><p id="4165" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您应该在项目设置页面上看到<code class="du ln lo lp ld b">Project ID</code>值。留着吧。</p><h2 id="3a2c" class="lh ka hh bd kb lq lr ls kf lt lu lv kj ip lw lx kn it ly lz kr ix ma mb kv mc bi translated">下载gactions命令</h2><p id="b7e8" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">要在谷歌上注册你的动作，需要一个<code class="du ln lo lp ld b">gactions</code>命令。您可以从以下页面下载:</p><div class="ml mm ez fb mn mo"><a href="https://developers.google.com/actions/tools/gactions-cli" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab dw"><div class="mq ab mr cl cj ms"><h2 class="bd hi fi z dy mt ea eb mu ed ef hg bi translated">gactions CLI |对Google的操作| Google开发者</h2><div class="mv l"><h3 class="bd b fi z dy mt ea eb mu ed ef dx translated">要使用update参数，必须使用操作的项目ID。您可以通过点击设置获得您的项目ID…</h3></div><div class="mw l"><p class="bd b fp z dy mt ea eb mu ed ef dx translated">developers.google.com</p></div></div><div class="mx l"><div class="my l mz na nb mx nc ji mo"/></div></div></a></div><p id="860e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下载它，并将命令文件放在PATH环境中包含的某个目录下。</p><h2 id="fd21" class="lh ka hh bd kb lq lr ls kf lt lu lv kj ip lw lx kn it ly lz kr ix ma mb kv mc bi translated">使用约曼动作生成器生成文件</h2><p id="b677" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">现在，让我们生成您的项目文件！在您的终端中，执行以下命令:</p><pre class="jd je jf jg fd lc ld le lf aw lg bi"><span id="a712" class="lh ka hh ld b fi li lj l lk ll">$ mkdir hello-world<br/>$ cd hello-world<br/>$ yo action</span></pre><p id="e14c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您看到了来自生成器的欢迎消息，同时，生成器提出了第一个问题。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es nd"><img src="../Images/3ee91c954c54145444d026a3dcdbe3d6.png" data-original-src="https://miro.medium.com/v2/resize:fit:992/format:webp/1*fUsWZZrBNbxtgTWERc5IPw.png"/></div></div></figure><p id="1976" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择<code class="du ln lo lp ld b">Actions SDK</code>。然后，生成器会询问您想要使用的云服务。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ne"><img src="../Images/6eee9f50ae6ed404b1635878daf30e4f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1140/format:webp/1*8UOJUUZGn3ZNbdazn_8Mhw.png"/></div></figure><p id="21d3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">选择<code class="du ln lo lp ld b">Google Cloud Functions</code>。接下来，生成器会询问您希望使用哪种语言来编写实现代码。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es nf"><img src="../Images/99b57f58490561bcfd481e06b9924eab.png" data-original-src="https://miro.medium.com/v2/resize:fit:1142/format:webp/1*K5z7BBXNgTo9ffX7N8Ri0A.png"/></div></figure><p id="8db3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">作为最后一个问题，生成器会询问您项目ID。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ng"><img src="../Images/86ab9b211876bfe66ff267ba595e0bd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1146/format:webp/1*1JP6vRIHdN_jGNZnmoBvbg.png"/></div></figure><p id="0d6e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">键入上一步保留的<code class="du ln lo lp ld b">project ID</code>。</p><p id="c8be" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果已经有了<code class="du ln lo lp ld b">yarn</code>，生成器生成文件，并执行命令<code class="du ln lo lp ld b">yarn install</code>来安装依赖项。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es nh"><img src="../Images/c64f9af0dd206242cbe4cdc210ea795b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1152/format:webp/1*rY21OvILpq6nnb5pHQP-yQ.png"/></div></figure><p id="a882" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在生成文件和安装依赖项之后，您应该会看到如下结束消息:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es ni"><img src="../Images/c6e4982f76188a877152dc88f32d6039.png" data-original-src="https://miro.medium.com/v2/resize:fit:1150/format:webp/1*qdJ0iS93uGdjc3uXEeSdUw.png"/></div></figure><p id="cae1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">哇！你有了新的代码集！</p><h2 id="aa71" class="lh ka hh bd kb lq lr ls kf lt lu lv kj ip lw lx kn it ly lz kr ix ma mb kv mc bi translated">部署您的履行代码</h2><p id="fbd5" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">您现在得到的代码集无需任何接触即可工作。也就是说，您可以部署代码。执行以下命令:</p><pre class="jd je jf jg fd lc ld le lf aw lg bi"><span id="14cd" class="lh ka hh ld b fi li lj l lk ll">$ gcloud config set project &lt;YOUR_PROJECT_ID&gt;<br/>$ yarn deploy</span></pre><p id="d195" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你用的是<code class="du ln lo lp ld b">npm</code>，你可以用<code class="du ln lo lp ld b">npm run deploy</code>代替纱线。实际上，<code class="du ln lo lp ld b">yarn deploy</code>命令运行两个任务:构建TypeScript编写的代码，用<code class="du ln lo lp ld b">gcloud</code>命令部署到Google云平台。如果部署成功，您将看到如下输出:</p><pre class="jd je jf jg fd lc ld le lf aw lg bi"><span id="3743" class="lh ka hh ld b fi li lj l lk ll">Created .gcloudignore file. See `gcloud topic gcloudignore` for details.<br/>Deploying function (may take a while - up to 2 minutes)...done.                               <br/>availableMemoryMb: 256<br/>entryPoint: fulfillment<br/>httpsTrigger:<br/>  url: https://us-central1-hello-world-*****.cloudfunctions.net/fulfillment<br/>labels:<br/>  deployment-tool: cli-gcloud<br/>name: projects/hello-world-*****/locations/us-central1/functions/fulfillment<br/>runtime: nodejs8<br/>serviceAccountEmail: hello-world-*****@appspot.gserviceaccount.com<br/>sourceUploadUrl: https://storage.googleapis.com/gcf-upload-us-central1-12643551-0839-****-****-3518bb26eda4/77dea571-****-****-b69a-924ffecff74f.zip?GoogleAccessId=service-414****89196@gcf-admin-robot.iam.gserviceaccount.com&amp;Expires=1552270433&amp;Signature=EoZWuBug06v8036umcw1O4BpJYOETvYA%2BZrg9aMhe7H5EkD8Hi%2FYnH%2FO0B%2B3mGEKR1tlNSAfsSVU8MN9lcE9FvO3U0JZLfFTj4sUyaz6A%2BTY0E%2F6lPfGv%2FsCzvOB74fU5zxWDbgH4f9jq1PWZNqjd0lIyZciNXD9E%2BWi4...<br/>status: ACTIVE<br/>timeout: 60s<br/>updateTime: '2019-03-11T01:50:29Z'<br/>versionId: '1'</span></pre><p id="fd20" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在上面的输出中，<code class="du ln lo lp ld b">httpsTrigger:url</code>很重要。</p><h2 id="71ed" class="lh ka hh bd kb lq lr ls kf lt lu lv kj ip lw lx kn it ly lz kr ix ma mb kv mc bi translated">注册您的行动包</h2><p id="c6c0" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">您已经有一个名为<code class="du ln lo lp ld b">action.json</code>的动作包文件。但是，您需要编辑该文件。用您喜欢的文本编辑器打开<code class="du ln lo lp ld b">action.json</code>文件。</p><pre class="jd je jf jg fd lc ld le lf aw lg bi"><span id="b9e8" class="lh ka hh ld b fi li lj l lk ll">{<br/>  "actions": [<br/>    {<br/>      "name": "MAIN",<br/>      "fulfillment": {<br/>        "conversationName": "myFulfillment"<br/>      },<br/>      "intent": {<br/>        "name": "actions.intent.MAIN"<br/>      }<br/>    }<br/>  ],<br/>  "conversations": {<br/>    "myFulfillment": {<br/>      "name": "myFulfillment",<br/>      "url": "&lt;YOUR_FULFILLMENT_URL&gt;",<br/>      "fulfillmentApiVersion": 2<br/>    }<br/>  },<br/>  "locale": "en"<br/>}</span></pre><p id="82f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">“conversation.myFulfillment.url”里有<code class="du ln lo lp ld b">&lt;YOUR_FULFILLMENT_URL&gt;</code>。将占位符替换为您刚才部署的履行代码的URL。然后，执行以下命令:</p><pre class="jd je jf jg fd lc ld le lf aw lg bi"><span id="21cf" class="lh ka hh ld b fi li lj l lk ll">$ yarn update-action</span></pre><p id="249d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果成功，您将看到如下输出:</p><pre class="jd je jf jg fd lc ld le lf aw lg bi"><span id="3665" class="lh ka hh ld b fi li lj l lk ll">Your app for the Assistant for project hello-world-***** was successfully updated with your actions. Visit the Actions on Google console to finish registering your app and submit it for review at https://console.actions.google.com/project/hello-world-*****/overview</span></pre><h2 id="205f" class="lh ka hh bd kb lq lr ls kf lt lu lv kj ip lw lx kn it ly lz kr ix ma mb kv mc bi translated">测试您的行动</h2><p id="a913" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">在Google控制台上打开Actions，并选择您的行动项目。然后，点击左侧导航菜单上的<code class="du ln lo lp ld b">Simulator</code>菜单项。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es nj"><img src="../Images/638999a8c5a5138e53d3b72bc5bdc834.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RcvCztiZ6QJPOtDmR8FI5A.png"/></div></div></figure><p id="e43f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">动作模拟器打开。您可以使用短语“与我的测试应用程序对话”来调用您的操作。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="me mf di mg bf mh"><div class="er es nk"><img src="../Images/7cea818292b8bf136f729b8b985cee35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pD1QN1PIaBvFpSvhp4DzJQ.png"/></div></div></figure><p id="f921" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">太好了！我们可以确认行动奏效了。</p><h2 id="c8ab" class="lh ka hh bd kb lq lr ls kf lt lu lv kj ip lw lx kn it ly lz kr ix ma mb kv mc bi translated">生成器生成了什么文件？</h2><p id="b265" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">生成后，您将拥有以下文件:</p><pre class="jd je jf jg fd lc ld le lf aw lg bi"><span id="0ab2" class="lh ka hh ld b fi li lj l lk ll">hello-world<br/>├── action.json      - Action Package file.<br/>├── node_modules     - Generated by `yarn install`.<br/>├── package.json     - Node project file.<br/>├── src<br/>│   └── index.ts     - The fulfillment code.<br/>├── tsconfig.json    - For TypeScript.<br/>├── tslint.json      - For TypeScript.<br/>└── yarn.lock        - Generated by `yarn install`.</span></pre><p id="2bab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当前版本为0.2.7，以下代码是由生成器为履行代码创建的:</p><pre class="jd je jf jg fd lc ld le lf aw lg bi"><span id="e69e" class="lh ka hh ld b fi li lj l lk ll">import * as functions from 'firebase-functions';<br/>import { actionssdk } from 'actions-on-google';</span><span id="409c" class="lh ka hh ld b fi lm lj l lk ll">const app = actionssdk({<br/>  debug: true<br/>});</span><span id="688f" class="lh ka hh ld b fi lm lj l lk ll">app.intent('actions.intent.MAIN', (conv): void =&gt; {<br/>  conv.close('Hello, world!');<br/>});</span><span id="20b8" class="lh ka hh ld b fi lm lj l lk ll">exports.fulfillment = functions.https.onRequest(app);</span></pre><p id="3594" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">也就是说，它是一个简单的“Hello，world”程序。我认为这是建立你的行动的一个好的起点。</p><h1 id="6f8c" class="jz ka hh bd kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw bi translated">结论</h1><p id="07ae" class="pw-post-body-paragraph ie if hh ig b ih kx ij ik il ky in io ip kz ir is it la iv iw ix lb iz ja jb ha bi translated">约曼行动生成器项目已经在GitHub上托管。</p><div class="ml mm ez fb mn mo"><a href="https://github.com/yoichiro/generator-action" rel="noopener  ugc nofollow" target="_blank"><div class="mp ab dw"><div class="mq ab mr cl cj ms"><h2 class="bd hi fi z dy mt ea eb mu ed ef hg bi translated">洋一郎/发电机-动作</h2><div class="mv l"><h3 class="bd b fi z dy mt ea eb mu ed ef dx translated">谷歌助理的行动实现代码项目约曼发电机。-洋一郎/发电机-动作</h3></div><div class="mw l"><p class="bd b fp z dy mt ea eb mu ed ef dx translated">github.com</p></div></div><div class="mx l"><div class="nl l mz na nb mx nc ji mo"/></div></div></a></div><p id="a70c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我打算为Azure和etc添加其他支持。此外，我认为有必要生成具有其他功能的代码:登录、交易、i18n等等，而不仅仅是简单的“Hello，world”输出。</p><p id="f2d1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我希望你可以用生成器更容易地构建你的动作。请随时告诉我你改进发电机的想法！</p></div></div>    
</body>
</html>