<html>
<head>
<title>Announcing cocoapods-generate</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">宣布椰子-生成</h1>
<blockquote>原文：<a href="https://medium.com/square-corner-blog/announcing-cocoapods-generate-66df4a382663?source=collection_archive---------5-----------------------#2018-06-25">https://medium.com/square-corner-blog/announcing-cocoapods-generate-66df4a382663?source=collection_archive---------5-----------------------#2018-06-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/6c87dd52796468da864e6071d6d3539e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-o32FVstXaQkyGNVlIarPQ.png"/></div></div></figure><blockquote class="ip iq ir"><p id="7b50" class="is it iu iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">注意，我们已经行动了！如果您想继续了解Square的最新技术内容，请访问我们的新家<a class="ae jr" href="https://developer.squareup.com/blog" rel="noopener ugc nofollow" target="_blank">https://developer.squareup.com/blog</a></p></blockquote><p id="f4c8" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">在Square，我们使用CocoaPods作为我们iOS开发工作流的核心部分，除了在我们的测试套件中使用的库之外，仅在Square销售点应用程序中就有大量的库。许多这样的库存在于我们主要的iOS monorepo中，随着应用程序的增长，构建整个程序所需的时间也在增长。</p><p id="66c8" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">CocoaPods允许我们将所有的库配置保存在易读的podspec文件中，这比Xcode项目更容易在pull请求中查看。我们的项目配置很少在Xcode内部管理，这确保了我们在文件系统和Xcode中看到的内容之间的一致性。</p><p id="6379" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">然而，将所有这些模块集成到一个项目中有一些缺点。虽然我们已经投入了精力来提高安装依赖项的整体性能，但是运行单个pod install命令可能需要一两分钟的时间，当快速迭代单个库时，这个时间会增加。使用CocoaPods还会生成一个非常大的Pods项目，这可能会导致Xcode响应速度变慢，并且需要很长时间进行索引。</p><p id="5853" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">随着这种爆炸式的增长，很明显我们需要一种更好的方式让开发人员工作。我们希望能够独立地处理模块，只构建正在处理的模块，只运行附带的测试套件。</p><p id="2464" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">输入<a class="ae jr" href="https://github.com/square/cocoapods-generate" rel="noopener ugc nofollow" target="_blank"> pod gen </a>。</p><p id="00f1" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">我们构建了一个CocoaPods插件，它允许iOS开发人员轻松地在独立的库上工作，特别是在monorepo的上下文中。运行此插件将生成一个存根应用程序项目，该项目集成并链接一个指定的库及其依赖项。我们的full Pods项目需要大约95秒来生成，并且是356，000行。如果我们在我们的UI组件库上运行pod gen，它需要5秒钟并生成一个9千行的项目文件。这使得迭代这些基本库变得更快，并且工具可以轻松处理较小的规模。gen最酷的一点是，它自动从现有的Podfile和Podfile.lock中引入依赖关系限制，因此所有配置都反映在生成的库工作区中。</p><p id="4efa" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">这不仅仅在独立开发的monorepo环境中有用。当与从podspec 中描述测试的能力<a class="ae jr" href="https://blog.cocoapods.org/CocoaPods-1.3.0/" rel="noopener ugc nofollow" target="_blank">结合使用时，它在独立的存储库中也工作得很好。这使得独立库可以避免签入和维护自己的Xcode项目，因为CocoaPods可以管理它。这意味着您不再需要处理PRs中的Xcode冲突，因为。xcodeproj只是一个用于开发的生成工件。podspec本身成为描述您的库的真实来源，从中您可以用一个简单的pod gen命令生成一个工作区。</a></p><p id="ed0e" class="pw-post-body-paragraph is it hh iv b iw ix iy iz ja jb jc jd js jf jg jh jt jj jk jl ju jn jo jp jq ha bi translated">测试可以简单地放在文件系统的适当文件夹中，并作为CI的一部分运行。例如，我们设置了这个<a class="ae jr" href="https://github.com/segiddins/pod-gen-demo" rel="noopener ugc nofollow" target="_blank">演示回购</a>，我们需要检查的唯一配置是podspecs。我们已经在内部使用这个宝石几个月了，我们非常高兴与世界分享它！</p></div></div>    
</body>
</html>