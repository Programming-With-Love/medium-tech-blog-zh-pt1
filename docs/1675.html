<html>
<head>
<title>Apache Pulsar-Geo-Replication &amp; Hybrid Deployment Model to Achieve Synchronous Replication</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Apache Pulsar-地理复制和混合部署模式可实现同步复制</h1>
<blockquote>原文：<a href="https://medium.com/capital-one-tech/apache-pulsar-geo-replication-and-hybrid-deployment-model-to-achieve-synchronous-replication-35f30e8b0f2?source=collection_archive---------0-----------------------#2019-05-02">https://medium.com/capital-one-tech/apache-pulsar-geo-replication-and-hybrid-deployment-model-to-achieve-synchronous-replication-35f30e8b0f2?source=collection_archive---------0-----------------------#2019-05-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/a3ff134b04d26ee672f95a75ebc282f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*w2GgE9ICeUaPIMXU"/></div></div></figure><p id="e4f8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Apache Pulsar系列的第3部分是关于地理复制的。如果你直接来到这里，请阅读阿帕奇脉冲星  <em class="jn">中的</em> <a class="ae jo" rel="noopener" href="/capital-one-tech/apache-pulsar-apaches-newest-pub-sub-messaging-platform-1c1ba1a6c673"> <em class="jn">特性。</em></a></p><p id="1549" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">正如我们在<a class="ae jo" rel="noopener" href="/capital-one-tech/apache-pulsar-apaches-newest-pub-sub-messaging-platform-1c1ba1a6c673">上一篇文章</a>中提到的，<a class="ae jo" href="https://pulsar.apache.org/" rel="noopener ugc nofollow" target="_blank"> Apache Pulsar </a>是一个新的开源分布式发布-订阅消息平台，由雅虎创建，现在是Apache软件基金会的一部分。Pulsar提供了各种开箱即用的功能，我们将在本文中评估/测试地理复制功能。</p><p id="6d8d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Apache Pulsar支持地理复制，包括n-mesh复制模式:</p><ul class=""><li id="2560" class="jp jq hh ir b is it iw ix ja jr je js ji jt jm ju jv jw jx bi translated">异步复制</li><li id="5151" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">同步复制</li></ul><p id="24b1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">下面详细讨论一下实现、优缺点以及如何选择最适合的。</p><h1 id="b683" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">异步复制</strong></h1><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lb"><img src="../Images/c764974caade6068e6004d43c1c364f1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*tygDedE1IWF5VzhT"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Asynchronous Replication (Active-Active)</figcaption></figure><p id="7fef" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">异步复制涉及发布到主题的数据，这些数据在位于不同区域的已配置集群之间异步复制。可以在租户有权访问的命名空间级别配置异步复制。一旦消息在本地发布/保存到集群，生产者就会得到确认。然后，代理将数据复制到已配置的复制集群。复制数据时，会保留顺序，但<strong class="ir hi">不会保留光标</strong>的位置。</p><p id="c5df" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">注意:</strong> <em class="jn">光标位置在本地集群内被保留和维护。</em></p><h2 id="47c1" class="lk ke hh bd kf ll lm ln kj lo lp lq kn ja lr ls kr je lt lu kv ji lv lw kz lx bi translated">异步复制(故障转移)</h2><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lb"><img src="../Images/c5acc311f26af99a591d366343a6a2e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WSPw08qHNI_bJBvW"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Asynchronous Replication (Failover)</figcaption></figure><p id="d574" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">配置集群类似于上面的模式，除了集群有一个消费者。订阅是群集的本地订阅。</p><p id="df01" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当美国东部集群关闭时，即使没有活动订阅，也可以通过配置来保留消息，从而将生产者和消费者移动到美国西部集群。在此事件中，数据不会丢失，因为复制是从美国东部到美国西部进行的。当我们在US-West上启动消费者时，我们需要重置光标，以重放从开始处理失败时开始的消息。</p><p id="528e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种模式的主要缺点是手动迁移生产者/消费者，重置游标以重播失败时的消息可能会导致重复百分比降低，这取决于游标重置的准确性级别。</p><p id="47eb" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种部署/可配置模式推荐用于:</p><ul class=""><li id="fea5" class="jp jq hh ir b is it iw ix ja jr je js ji jt jm ju jv jw jx bi translated">幂等数据的应用。</li><li id="9f71" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">后端数据未复制和/或在不同区域维护副本的应用程序。</li><li id="93f6" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">可以接受重复消息直到恢复时间到来的应用程序。</li></ul><h2 id="14f7" class="lk ke hh bd kf ll lm ln kj lo lp lq kn ja lr ls kr je lt lu kv ji lv lw kz lx bi translated">配置异步复制</h2><p id="3b04" class="pw-post-body-paragraph ip iq hh ir b is ly iu iv iw lz iy iz ja ma jc jd je mb jg jh ji mc jk jl jm ha bi translated">假设我们在<strong class="ir hi"> A </strong>和<strong class="ir hi"> B </strong>中有两个集群，执行下面的命令让每个集群加入集群的仲裁。运行以下命令，将集群<strong class="ir hi"> B </strong>到集群<strong class="ir hi"> A </strong>注册为复制集群:</p><pre class="lc ld le lf fd md me mf mg aw mh bi"><span id="52e6" class="lk ke hh me b fi mi mj l mk ml">./bin/pulsar-admin clusters create \<br/>— url http://&lt;DNS-OF-B&gt;:&lt;PORT&gt; \<br/>— broker-url pulsar://&lt;DNS-OF-B&gt;:&lt;PORT&gt; \<br/>— broker-url-secure pulsar+ssl://&lt;DNS-OF-B&gt;:&lt;PORT&gt; \<br/>— url-secure https://&lt;DNS-OF-B&gt;:&lt;PORT&gt; B</span></pre><p id="3ae1" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在上面的命令中，<strong class="ir hi"> B </strong>是在broker.conf中配置的集群名称。为了配置复制集群，admin希望提供所有参数，即使它们是互斥的。</p><p id="ed97" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">类似地，寄存器组<strong class="ir hi"> A </strong>到<strong class="ir hi"> B </strong>:</p><pre class="lc ld le lf fd md me mf mg aw mh bi"><span id="b53f" class="lk ke hh me b fi mi mj l mk ml">./bin/pulsar-admin clusters create \<br/>— url http://&lt;DNS-OF-A&gt;:&lt;PORT&gt; \<br/>— broker-url pulsar://&lt;DNS-OF-A&gt;:&lt;PORT&gt; \<br/>— broker-url-secure pulsar+ssl://&lt;DNS-OF-A&gt;:&lt;PORT&gt; \<br/>— url-secure https://&lt;DNS-OF-A&gt;:&lt;PORT&gt; A</span></pre><p id="2903" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">通过为两个集群配置权限，在两个集群中创建租户。</p><pre class="lc ld le lf fd md me mf mg aw mh bi"><span id="55ca" class="lk ke hh me b fi mi mj l mk ml">./bin/pulsar-admin tenants create my-tenant \<br/>— admin-roles admin — allowed-clusters A,B</span></pre><p id="8b25" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在两个集群中创建命名空间以及权限:</p><pre class="lc ld le lf fd md me mf mg aw mh bi"><span id="12ab" class="lk ke hh me b fi mi mj l mk ml">./bin/pulsar-admin namespaces create my-tenant/ns1</span><span id="44c1" class="lk ke hh me b fi mm mj l mk ml">./bin/pulsar-admin namespaces grant-permission my-tenant/ns1 \<br/>— actions produce,consume \<br/>— role ‘admin’</span></pre><p id="abc6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在命名空间级别设置集群配置，如下所示:</p><pre class="lc ld le lf fd md me mf mg aw mh bi"><span id="7aa1" class="lk ke hh me b fi mi mj l mk ml">./bin/pulsar-admin namespaces set-clusters my-tenant/ns1 \<br/>— clusters A,B</span></pre><p id="66de" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">复制跨两个集群配置。当应用程序在my-tenant/ns1/my-topic上生成消息时，数据会在整个集群中复制。上述模式也可以在Kubernetes上轻松配置。</p><h1 id="6bda" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">同步复制</h1><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lb"><img src="../Images/157498e3bb00200fbbdd0ae1f7c0cd29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ANYJ-kIlHZ-2MOv7"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Synchronous Replication</figcaption></figure><p id="dae2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">同步复制是由Apache BookKeeper实现的。同步复制为只需要一个群集的企业提供了更大的灵活性。这里的主要配置问题涉及到在代理上启用“rackAwarePlacementPolicy ”,以便在托管于不同地理位置的不同数据中心之间将数据持久化。Pulsar支持这一特性。</p><p id="8117" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">要配置同步复制，最佳选择是在裸机上提供ZooKeeper和Pulsar，这是根据<a class="ae jo" href="http://pulsar.apache.org/docs/en/deploy-bare-metal-multi-cluster/" rel="noopener ugc nofollow" target="_blank">http://Pulsar . Apache . org/docs/en/deploy-bare-metal-multi-cluster/</a>上的说明进行的。</p><p id="e0f8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种方法的缺点是:</p><ul class=""><li id="6c25" class="jp jq hh ir b is it iw ix ja jr je js ji jt jm ju jv jw jx bi translated">集装箱化和使用集装箱的灵活性。</li><li id="67e2" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">基于组织需求的集群维护。</li><li id="3e17" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">云治理和敏捷性(刚性模型)。</li><li id="c358" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">资源利用。</li><li id="da61" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">不一定划算。</li></ul><h2 id="bd9e" class="lk ke hh bd kf ll lm ln kj lo lp lq kn ja lr ls kr je lt lu kv ji lv lw kz lx bi translated">同步复制—混合模式</h2><p id="d878" class="pw-post-body-paragraph ip iq hh ir b is ly iu iv iw lz iy iz ja ma jc jd je mb jg jh ji mc jk jl jm ha bi translated">为了充分利用Pulsar对云和Kubernetes的支持，并克服上面提到的复杂性，我想提出一个新的部署模型——混合模型。</p><p id="51ee" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在<strong class="ir hi"> </strong>混合模式中，配置发生在裸机和Kubernetes集群(GKE EKS或独立的Kubernetes集群)上。</p><p id="5310" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">假设:</strong></p><ul class=""><li id="2087" class="jp jq hh ir b is it iw ix ja jr je js ji jt jm ju jv jw jx bi translated">ZooKeeper可以使用Apache Pulsar二进制文件安装在裸机上。</li><li id="ae91" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">经纪人和赌注登记经纪人的容器是可用的。</li></ul><p id="d8b6" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该模型建议按如下所述配置组件:</p><ul class=""><li id="3e6e" class="jp jq hh ir b is it iw ix ja jr je js ji jt jm ju jv jw jx bi translated">裸机/EC2(AWS)上的ZooKeeper</li><li id="9347" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">Kubernetes上的庄家和经纪人</li></ul><p id="9f7b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">例如，要在三个地区提供ZooKeeper，我们可以选择AWS地区US-East、US-West和US-Central，总共有三个ZooKeeper节点来形成集群或ZooKeeper仲裁。</p><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mn"><img src="../Images/725d3ba084f50e7d4940d230af0a07fd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*NNSe9dvCwwGL_V5S"/></div></div><figcaption class="lg lh et er es li lj bd b be z dx">Synchronous Replication — Hybrid</figcaption></figure><p id="f408" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">以下是实现混合同步复制所需的配置:</p><ul class=""><li id="ac55" class="jp jq hh ir b is it iw ix ja jr je js ji jt jm ju jv jw jx bi translated">使用initialize-cluster-metadata命令，在其中一个集群名称为“hybrid”的节点上配置Pulsar的集群元数据。</li><li id="0c6c" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">在每个地区(如美国东部、美国西部和美国中部)调配Kubernetes集群。向Kubernetes集群部署博彩公司和经纪人。比方说，每个有三个复制品。</li><li id="8dee" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">在Bookies配置中将ZooKeeper节点配置为ZooKeeper服务器。</li><li id="2084" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">在代理配置中将ZooKeeper节点配置为ZooKeeper服务器和配置存储服务器。</li><li id="12c2" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">启用机架感知策略。</li></ul><p id="13ce" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上述配置以及写法定数(应该是AckQuorum+1)将允许簿记员跨不同的地理位置/区域复制数据。</p><p id="0dff" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">使用该模式的主要优势:</strong></p><ul class=""><li id="1775" class="jp jq hh ir b is it iw ix ja jr je js ji jt jm ju jv jw jx bi translated">与裸机相比，资源共享可降低成本。</li><li id="101c" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">表现为单个逻辑群集，在尽可能多的区域中有尽可能多的物理群集。</li><li id="048c" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">n个集群可以从任意数量的区域开始。</li><li id="8479" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">零数据丢失。</li><li id="bfc4" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">弹性模型(主题)—如果一个集群关闭，主题可以无缝转移到另一个集群。</li><li id="08c8" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">弹性模型(消息)—如果一个群集出现故障，消息将根据写入仲裁复制到另一个群集上的博彩公司。</li><li id="5002" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">消费者可以使用来自任何地区/集群的消息。</li><li id="1e2d" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">与异步复制不同，故障转移期间不会产生重复的消息。</li><li id="cc02" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">保留光标位置，因为此模型的行为类似于单个逻辑集群。</li></ul><p id="52e9" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">使用该模式的主要缺点:</strong></p><ul class=""><li id="7b78" class="jp jq hh ir b is it iw ix ja jr je js ji jt jm ju jv jw jx bi translated">维护两种不同的供应架构— EC2和Kubernetes。如果使用EKS或GKE，那么使用混合框架实现同步复制是一种简单的模式。</li><li id="51d5" class="jp jq hh ir b is jy iw jz ja ka je kb ji kc jm ju jv jw jx bi translated">主题创建/删除过程中基于leader的ZooKeeper跳之间的延迟。这不会影响消息的生命周期。</li></ul><h1 id="cc51" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">测试地理复制</h1><p id="4e95" class="pw-post-body-paragraph ip iq hh ir b is ly iu iv iw lz iy iz ja ma jc jd je mb jg jh ji mc jk jl jm ha bi translated">可以使用我们在本文<a class="ae jo" rel="noopener" href="/capital-one-tech/apache-pulsar-one-cluster-for-the-entire-enterprise-using-multi-tenancy-ac0bd925fbdf"> <strong class="ir hi">文章</strong> </a>中开发的相同的生产者和消费者集合来测试地理复制。修改下面的行以反映不同的群集主机/端口:</p><p id="dd2f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">Producer.java</em></p><pre class="lc ld le lf fd md me mf mg aw mh bi"><span id="6f79" class="lk ke hh me b fi mi mj l mk ml">String localClusterUrl = “pulsar+ssl://&lt;DNS-OF-A&gt;:&lt;PORT&gt;”;</span><span id="402f" class="lk ke hh me b fi mm mj l mk ml">String namespace = “my-tenant/ns1”;</span><span id="1e1d" class="lk ke hh me b fi mm mj l mk ml">String topic = String.format(“persistent://%s/my-topic”, namespace);</span></pre><p id="3425" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">Consumer.java</em></p><pre class="lc ld le lf fd md me mf mg aw mh bi"><span id="7e52" class="lk ke hh me b fi mi mj l mk ml">String localClusterUrl = “pulsar+ssl://&lt;DNS-OF-B&gt;:&lt;PORT&gt;”;</span><span id="06a1" class="lk ke hh me b fi mm mj l mk ml">String namespace = “my-tenant/ns1”;</span><span id="6cad" class="lk ke hh me b fi mm mj l mk ml">String topic = String.format(“persistent://%s/my-topic”, namespace);</span></pre><p id="2e23" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在群集上配置复制时，在租户和命名空间级别配置适当的角色。例如，上面的例子有“admin”。</p><p id="adf0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，当您在集群<strong class="ir hi"> A </strong>上生成消息时，消费者可以从<strong class="ir hi"> B </strong>上读取它。根据上面的例子，消费者可以被配置成同时监听<strong class="ir hi"> A </strong>和<strong class="ir hi"> B </strong>来消费同一组消息。</p><h1 id="efbe" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated">结论</h1><p id="97e3" class="pw-post-body-paragraph ip iq hh ir b is ly iu iv iw lz iy iz ja ma jc jd je mb jg jh ji mc jk jl jm ha bi translated">Apache Pulsar附带了许多功能，并有可能在未来几年成为流媒体平台领域的强大玩家。一个强大的功能是地理复制，它开箱即用，具有本机云支持。Pulsar提供了多种选择，让组织可以根据使用案例决定如何托管其流媒体平台。总之，如果平台支持并忽略少量的消息副本，就可以利用异步复制。如果用例要求严格的唯一消息处理，那么同步复制就是一种方法。如果云成本和资源利用率是主要因素，混合方法将是最佳选择。</p><p id="3a7d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> <em class="jn">脉冲快乐！</em>T11】</strong></p><h1 id="9f3f" class="kd ke hh bd kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la bi translated"><strong class="ak">本系列相关文章</strong></h1><p id="cc89" class="pw-post-body-paragraph ip iq hh ir b is ly iu iv iw lz iy iz ja ma jc jd je mb jg jh ji mc jk jl jm ha bi translated"><a class="ae jo" rel="noopener" href="/capital-one-tech/apache-pulsar-one-cluster-for-the-entire-enterprise-using-multi-tenancy-ac0bd925fbdf">Apache Pulsar——使用多租户的整个企业的一个集群</a><br/><a class="ae jo" rel="noopener" href="/capital-one-tech/apache-pulsar-apaches-newest-pub-sub-messaging-platform-1c1ba1a6c673">Apache Pulsar——对Apache最新发布-订阅消息平台的简要介绍</a></p></div><div class="ab cl mo mp go mq" role="separator"><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt mu"/><span class="mr bw bk ms mt"/></div><div class="ha hb hc hd he"><p id="350d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="jn">披露声明:2020资本一。观点是作者个人的观点。除非本帖中另有说明，否则Capital One不隶属于所提及的任何公司，也不被这些公司认可。使用或展示的所有商标和其他知识产权是其各自所有者的财产。</em></p></div></div>    
</body>
</html>