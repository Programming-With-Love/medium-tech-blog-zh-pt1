<html>
<head>
<title>Oracle Offline Persistence Toolkit — Reacting to Replay Conflict</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle离线持久性工具包—对重放冲突做出反应</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/oracle-offline-persistence-toolkit-reacting-to-replay-conflict-c7b0a7a67311?source=collection_archive---------1-----------------------#2018-09-22">https://medium.com/oracledevs/oracle-offline-persistence-toolkit-reacting-to-replay-conflict-c7b0a7a67311?source=collection_archive---------1-----------------------#2018-09-22</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="b941" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是下一篇关于Oracle离线持久性工具包的文章。检查我以前写的同一主题的文章— <a class="ae jc" href="http://andrejusb.blogspot.com/2018/09/implementing-handle-patch-method-for.html" rel="noopener ugc nofollow" target="_blank">在JET离线工具包</a>中实现句柄补丁方法。在<a class="ae jc" href="https://github.com/oracle/offline-persistence-toolkit" rel="noopener ugc nofollow" target="_blank"> GitHub </a> repo上阅读更多关于工具包的信息。</p><p id="0f39" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当应用程序上线时，我们称之为同步方法。如果至少有一个请求失败，那么同步就会停止，并调用错误回调，我们可以在那里处理失败。在错误回调中，我们检查失败是否与冲突有关——然后我们打开对话框，用户将在其中决定做什么(强制客户端更改或接受服务器更改)。从错误回调的响应中读取最新的更改指示符值(如果用户决定在下一个请求中强制客户端更改，则应用该值):</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/bc8ac9d3c27c482ecc2434dac05868e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MW64_WtwHWlSqZ16jxI9_w.png"/></div></div></figure><p id="47b0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对话框很简单—它显示冲突值的动态文本，并为用户提供操作选择:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jp"><img src="../Images/23dbe4d6ac5512bb4a1c812d54b0422e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*raz53XPZ96m-pxQDcFfVJQ.png"/></div></div></figure><p id="f957" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们看看它是如何工作的。</p><p id="9a03" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用户A编辑值Lex并将其保存到后端:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jq"><img src="../Images/6d16d3f9ed8df66ce96033665ab7825f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gadCJqpiKNHHIgcjQ1uHPg.png"/></div></div></figure><p id="a818" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用户B离线，编辑相同的值B并将其保存在本地存储中:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jr"><img src="../Images/fec73cfeb00d55896ebbbdbf865d81fc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7gpfJxWKamFnFa664PM1nA.png"/></div></div></figure><p id="a196" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以在日志中检查它—更改值存储在本地存储中:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es js"><img src="../Images/57ffa984eaf5bd653b4b7299ceaec3ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-WtpKxRAICCov6GEb-rJpg.png"/></div></div></figure><p id="54eb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当联机时，脱机记录的挂起请求将被重新执行。显然，上述请求将失败，因为相同的值已被另一个用户更改。将报告冲突:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jt"><img src="../Images/e0ad81747d63d63323a094e40218e3c7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jSgW4FNAexIkxlSTvGWS4w.png"/></div></div></figure><p id="3b19" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">修补操作失败，冲突代码为409:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ju"><img src="../Images/f30c4fcfd655eb2f1ba77c21e249df90.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4xqnBwDr3jEtgmXCCGS4ig.png"/></div></div></figure><p id="713a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">将询问用户—如何继续。要在后端应用更改并覆盖更改，或者相反，从后端获取更改并将它们带到客户端:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jv"><img src="../Images/5b8a1595b15b49def50231bcae166139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yZSnNwkGbgDtHbaFvMQNTQ.png"/></div></div></figure><p id="0438" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我将在下一篇文章中解释如何实现这些操作。与此同时，您可以在<a class="ae jc" href="https://github.com/abaranovskis-redsamurai/persistencejetapp" rel="noopener ugc nofollow" target="_blank"> GitHub </a> repo上研究完整的应用程序。</p></div><div class="ab cl jw jx go jy" role="separator"><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb kc"/><span class="jz bw bk ka kb"/></div><div class="ha hb hc hd he"><p id="239b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kd">原载于2018年9月22日</em><a class="ae jc" href="https://andrejusb.blogspot.com/2018/09/oracle-offline-persistence-toolkit.html" rel="noopener ugc nofollow" target="_blank"><em class="kd">andrejusb.blogspot.com</em></a><em class="kd">。</em></p></div></div>    
</body>
</html>