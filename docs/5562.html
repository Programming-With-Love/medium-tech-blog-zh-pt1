<html>
<head>
<title>Oracle Analytics Cloud — Data Flow to produce a Date Value and Timeline to Visualize the time related data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle分析云—产生日期值的数据流和可视化时间相关数据的时间线</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/oracle-analytics-cloud-data-flow-to-produce-a-date-value-and-timeline-to-visualize-the-time-3e089ea03f4d?source=collection_archive---------0-----------------------#2019-01-29">https://medium.com/oracledevs/oracle-analytics-cloud-data-flow-to-produce-a-date-value-and-timeline-to-visualize-the-time-3e089ea03f4d?source=collection_archive---------0-----------------------#2019-01-29</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="5d99" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在关于Oracle Analytics Cloud的两篇早期文章中，我介绍了Oracle OpenWorld 2018会议目录数据集(<a class="ae jc" href="https://technology.amis.nl/2019/01/24/first-steps-with-oracle-analytics-cloud-gather-explore-wrangle-visualize/" rel="noopener ugc nofollow" target="_blank">Oracle Analytics Cloud的第一步—收集、探索、争论、可视化</a>和<a class="ae jc" href="https://technology.amis.nl/2019/01/26/creating-a-data-flow-in-oracle-analytics-cloud-to-enriching-with-geo-encoding-to-map-visualization-of-data/" rel="noopener ugc nofollow" target="_blank">在Oracle Analytics Cloud中创建数据流，通过地理编码丰富地图数据的可视化</a>)。一套超过2000个会议记录，描述甲骨文全球大会2013和CodeOne 2018上的演示。每节课都有一个标题，一个持续时间，与一个或多个曲目相关联，有一定的级别，在特定的房间进行，并安排在特定的日期和时间。在之前的文章中，我已经可视化了其中的一些特性，比如在旧金山市中心的地图上可视化的会议的地理分布。</p><p id="842e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文中，我将研究这个数据集的一些日期和时间方面。我想找出一天中以及一周中最繁忙的时间——根据并发会话的数量。我想了解CodeOne的晚间会议，并希望随着本周的展开提供一份活动时间表。</p><h1 id="5696" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">用会话日期和时间戳丰富数据集</h1><p id="b071" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">要显示时间线，记录需要时间戳。然而，他们没有。这些会话有一个日列，值为星期一、星期二等。我们知道甲骨文全球大会2018从10月21日(周日)持续到10月25日(周四)。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kg"><img src="../Images/d7e5589d4873868389a36e6ca1e5b96c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1106/format:webp/0*J4P6LHzaaaYVM7JY.png"/></div></figure><p id="ba79" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，我们知道如何将<em class="ko">日</em>转换为<em class="ko">真实会话日期</em>。</p><p id="2401" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">至少有三种方法可以获得可视化的新值:</p><ul class=""><li id="efa3" class="kp kq hh ig b ih ii il im ip kr it ks ix kt jb ku kv kw kx bi translated">在“可视化”选项卡上添加计算</li></ul><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es ky"><img src="../Images/f3bf0ca03065d5cfa380b10c13d5a44a.png" data-original-src="https://miro.medium.com/v2/resize:fit:890/format:webp/0*fx1NTobBIKLy13ua.png"/></div></figure><ul class=""><li id="25ef" class="kp kq hh ig b ih ii il im ip kr it ks ix kt jb ku kv kw kx bi translated">在数据集的数据准备选项卡中添加步骤(和新列)</li></ul><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es kz"><img src="../Images/4c1ca9deab47d06109d3098ebe096f0f.png" data-original-src="https://miro.medium.com/v2/resize:fit:938/format:webp/0*Pt1Hs_gsgNOjpeQx.png"/></div></figure><ul class=""><li id="1236" class="kp kq hh ig b ih ii il im ip kr it ks ix kt jb ku kv kw kx bi translated">在数据流中添加一个步骤，并在目标数据集中创建一个新列</li></ul><p id="cf48" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对我来说，最后一个选项似乎是最健壮的——我对其他两个方法有一些例外——所以我将应用这一个。</p><p id="6a41" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">打开数据流GeoVenueEnrichSessions——这也为所有会话添加了地点和地理坐标。添加步骤添加列。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es la"><img src="../Images/ff8009d2a90f16869b4af12bebcb7f3b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1380/format:webp/0*W0PB969nd8xQXIYy.png"/></div></figure><p id="c2d0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">配置这个步骤:新列名为<em class="ko"> session_date </em>，它将包含会话的日期。该值由字符串组成，随后使用To_DateTime函数将其转换为实际日期属性:</p><p id="ff2c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">to _ DateTime(concat(concat(' 2018–10-'，case when day = ' Sunday ' THEN ' 21 ' when day = '周一' then '22' when day= '周二' then '23' when day= '周三' THEN '24' when day= '周四' THEN '25' ELSE '25' END)，concat(concat(')，cast(hour(time) as char(2))，concat(:'，cast(minute(time) as char(2))))，'</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lb"><img src="../Images/cd3cfd6b36ee055da692ca3427048c09.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*W9LMP7Y_uBTIRWaK.png"/></div></div></figure><p id="0848" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">按保存并运行数据流。这将把session_date列添加到数据集中，并计算每个会话的值。</p><h1 id="9ef5" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">显示一周内每个事件每天的会议次数的时间线</h1><p id="2f84" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">使用全新的session_date数据元素，我现在可以创建一个时间线。Session_date是时间线的类别元素。将Event和Row_Count添加到图片中。现在我可以很容易地说出10月24日有多少场CodeOne会议:116场会议。</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lg"><img src="../Images/74f31916bf7ae2ee3387649d9dca62ba.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*bXrYhOQMN1bhgPcc.png"/></div></div></figure><h1 id="94fc" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">全天会话</h1><p id="09a6" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">使用数据集中时间数据元素的小时部分，我可以很容易地知道一天中会话的开始时间。高峰期是上午11点至下午1点，晚上也有不少时段:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lh"><img src="../Images/e444a616b8ca2053f4bff84b2cca4067.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*MZRcummWSETqdyqh.png"/></div></div></figure><p id="927b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我在处理会话时间数据元素的分钟部分时遇到了问题。我决定坚持使用小时组件，而不是试图解决这个问题。我想给每个会话添加一个session_time属性，指示会话开始的小时[槽]。</p><p id="14ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这种情况下，我将通过简单地添加一个计算，在visualization选项卡中添加<em class="ko"> session_time </em>。我用过的表达方式:</p><p id="ce3c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">timestampad(SQL _ TSI _ hour，(hour(time))，session_date)</p><p id="db42" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">(这采用了session _ date——它的时间部分是日期的午夜——并向该时间戳添加与时间属性的小时部分的值一样多的小时</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div class="er es li"><img src="../Images/e8b35ecc8bfd5ae7bef07ae8203f3c9b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1030/format:webp/0*hRCPMkmoNZtDNK0T.png"/></div></figure><p id="a885" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用session_time时间戳，我可以创建一个时间线，显示每天每小时有多少个会话在该小时启动:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lg"><img src="../Images/87b74843330237c20ede2b21b22c9544.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vAWNGKTCuVnqKRbk.png"/></div></div></figure><h1 id="be4e" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">带过滤的时间线</h1><p id="dda0" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">这里，我在时间线上添加了一个会话类型过滤器。这导致了一个简单的洞察力，在什么时候发生一丘之貉和点燃会议:在晚上。周一和周二。我对这个发现有一种特殊的感觉:我在周一晚上和周二晚上都做了报告。有一次，有两个观众(是的，是两个)——其中一个大部分时间都在睡觉…</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lh"><img src="../Images/b6eb9904a1597967063fa10fd9cb0775.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*iNofn8BLgEE9qs4C.png"/></div></div></figure><h1 id="59f8" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">全天和一周的会议次数热图</h1><p id="530c" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">这张热图显示了我的目标—单元格的蓝色越深，会话数越高:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lg"><img src="../Images/0d7572d7f721798ce07420c62afba153.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Dccon9zMCBPuA_vX.png"/></div></div></figure><p id="c307" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一周中最忙的时间是:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lj"><img src="../Images/79c4f0d716508d6b61fb3cfc5c052d95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*G2ii76QICI3GVp11.png"/></div></div></figure><p id="7b4c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">星期二，中午12点——在这一个小时的时间段里开始了98场会议。还有午餐。</p><h1 id="086c" class="jd je hh bd jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka bi translated">一天中的部分时间—上午、下午、晚上</h1><p id="502f" class="pw-post-body-paragraph ie if hh ig b ih kb ij ik il kc in io ip kd ir is it ke iv iw ix kf iz ja jb ha bi translated">在数据流中，使用下面的case表达式创建一个名为session_day_part的新列，该表达式将行分成三组:<em class="ko">上午、下午和晚上</em>。</p><blockquote class="lk ll lm"><p id="317c" class="ie if ko ig b ih ii ij ik il im in io ln iq ir is lo iu iv iw lp iy iz ja jb ha bi translated"><em class="hh">格当小时(时间)&lt; 12然后‘上午’当小时(时间)&gt; 17然后‘晚上’否则‘下午’结束</em></p></blockquote><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lq"><img src="../Images/35091a585f8d11a84c602fbecd082666.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*-fh2afu-YcxFfQ0l.png"/></div></div></figure><p id="c173" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">按“保存并运行数据流”以修改数据流并创建新列。</p><p id="bdba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">两种快速可视化方法——显示上午、下午和晚上的会议次数:</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es lr"><img src="../Images/3aa5735d7b5dc28780e4034f9779bff0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*dl2TdioBYL-WlL3N.png"/></div></div></figure><p id="1b63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">和</p><figure class="kh ki kj kk fd kl er es paragraph-image"><div role="button" tabindex="0" class="lc ld di le bf lf"><div class="er es ls"><img src="../Images/6f69a8fd1b65a52d20a66057fdd4fe28.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*vyufaowKNB5rGw1v.png"/></div></div></figure><p id="99b1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">显然下午最忙，星期一是最忙的一天。</p></div><div class="ab cl lt lu go lv" role="separator"><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly lz"/><span class="lw bw bk lx ly"/></div><div class="ha hb hc hd he"><p id="b774" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="ko">原载于2019年1月29日</em><a class="ae jc" href="https://technology.amis.nl/2019/01/29/oracle-analytics-cloud-data-flow-to-produce-a-date-value-and-timeline-to-visualize-the-time-related-data/" rel="noopener ugc nofollow" target="_blank"><em class="ko">technology . amis . nl</em></a><em class="ko">。</em></p></div></div>    
</body>
</html>