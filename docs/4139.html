<html>
<head>
<title>Angular — Applying Motion principles to a listing</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">角度—将运动原理应用于列表</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/angular-applying-motion-principles-to-a-list-d5cdd35c899e?source=collection_archive---------0-----------------------#2017-08-21">https://medium.com/google-developer-experts/angular-applying-motion-principles-to-a-list-d5cdd35c899e?source=collection_archive---------0-----------------------#2017-08-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="c59c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如何使用角度动画应用运动原理</p><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es jc"><img src="../Images/22e1c814f151fe1e7081bee99e5368a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jBa4I0rs4-vrr44YxEV8CQ.jpeg"/></div></div><figcaption class="jo jp et er es jq jr bd b be z dx">Image by thedotisblack. <a class="ae js" href="https://twitter.com/DavidMrugala" rel="noopener ugc nofollow" target="_blank">Credits</a></figcaption></figure><p id="6617" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章中，我将描述如何将运动原理应用到不同的交互中，并以一系列项目为基础。我们将涵盖:</p><ul class=""><li id="e739" class="jt ju hh ig b ih ii il im ip jv it jw ix jx jb jy jz ka kb bi translated"><a class="ae js" href="#e845" rel="noopener ugc nofollow">依赖项设置</a>和最终<a class="ae js" href="#e2fe" rel="noopener ugc nofollow">解决方案</a></li><li id="4acb" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated"><a class="ae js" href="#8347" rel="noopener ugc nofollow">设计材质按钮</a>并引入<a class="ae js" href="#85e0" rel="noopener ugc nofollow">角度动画</a></li><li id="41f8" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated">施加动作:<a class="ae js" href="#fe4c" rel="noopener ugc nofollow">添加</a>、<a class="ae js" href="#bb36" rel="noopener ugc nofollow">移除</a>和<a class="ae js" href="#e813" rel="noopener ugc nofollow">初始显示</a>。</li></ul><p id="71e6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以使用以下代码来浏览源代码:</p><p id="2655" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae js" href="https://stackblitz.com/edit/angular-motion-initial" rel="noopener ugc nofollow" target="_blank">初赛</a> | <a class="ae js" href="https://stackblitz.com/edit/angular-motion" rel="noopener ugc nofollow" target="_blank">决赛</a></p><p id="64ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在<a class="ae js" href="https://twitter.com/intent/user?screen_name=gerardsans" rel="noopener ugc nofollow" target="_blank"> @gerardsans </a>找到我的最新观点。</p><blockquote class="kh ki kj"><p id="90ff" class="ie if kk ig b ih ii ij ik il im in io kl iq ir is km iu iv iw kn iy iz ja jb ha bi translated">这个例子是一个演示的一部分，以支持在<a class="ae js" href="https://www.meetup.com/Women-Who-Code-London/events/242089054/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">伦敦</strong> </a>进行的一次演讲。在这次演讲中，我介绍了我将在这里使用的相同原理。请随意查看幻灯片中的介绍。</p></blockquote><div class="ko kp ez fb kq kr"><a href="http://slides.com/gerardsans/wwc-motion-angular" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab dw"><div class="kt ab ku cl cj kv"><h2 class="bd hi fi z dy kw ea eb kx ed ef hg bi translated">Gerard Sans以角度(4.3+版)实现运动</h2><div class="ky l"><h3 class="bd b fi z dy kw ea eb kx ed ef dx translated">在这次演讲中，我们将通过一些实例来讲述UX动议背后的12项原则。我们将专注于…</h3></div><div class="kz l"><p class="bd b fp z dy kw ea eb kx ed ef dx translated">slides.com</p></div></div><div class="la l"><div class="lb l lc ld le la lf jm kr"/></div></div></a></div><h1 id="e845" class="lg lh hh bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">相关性设置</h1><p id="be43" class="pw-post-body-paragraph ie if hh ig b ih me ij ik il mf in io ip mg ir is it mh iv iw ix mi iz ja jb ha bi translated">首先，我们需要做一些准备，确保所有的依赖项都到位。使用<strong class="ig hi">角度动画</strong>，我们需要:<code class="du mj mk ml mm b">@angular/animations</code>和<code class="du mj mk ml mm b">@angular/platform-browser/animations</code>。对于<strong class="ig hi">角料</strong> : <code class="du mj mk ml mm b">@angular/material</code>和<code class="du mj mk ml mm b">@angular/cdk</code>。除此之外，我们还将导入<strong class="ig hi">靛粉色主题</strong>和<strong class="ig hi">材质图标</strong>(用于按钮)。见下文。</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="d098" class="mr lh hh mm b fi ms mt l mu mv">// style.css<a class="ae js" href="http://twitter.com/import" rel="noopener ugc nofollow" target="_blank"><br/>@import</a> '<a class="ae js" href="https://unpkg.com/@angular/material/prebuilt-themes/indigo-pink.css" rel="noopener ugc nofollow" target="_blank">https://unpkg.com/@angular/material/prebuilt-themes/indigo-pink.css</a>';<br/><a class="ae js" href="http://twitter.com/import" rel="noopener ugc nofollow" target="_blank">@import</a> '<a class="ae js" href="https://fonts.googleapis.com/icon?family=Material+Icons'" rel="noopener ugc nofollow" target="_blank">https://fonts.googleapis.com/icon?family=Material+Icons'</a>;</span></pre><p id="5c82" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我们的根模块上，我们将像这样添加上面的模块:</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="eb74" class="mr lh hh mm b fi ms mt l mu mv">import { <strong class="mm hi">BrowserAnimationsModule</strong> } from '<a class="ae js" href="http://twitter.com/angular/platform-browser" rel="noopener ugc nofollow" target="_blank">@angular/platform-browser</a>/animations';<br/>import { <strong class="mm hi">MaterialModule</strong>, <strong class="mm hi">MdButtonModule</strong> } from '<a class="ae js" href="http://twitter.com/angular/material" rel="noopener ugc nofollow" target="_blank">@angular/material</a>';</span><span id="07d3" class="mr lh hh mm b fi mw mt l mu mv"><a class="ae js" href="http://twitter.com/NgModule" rel="noopener ugc nofollow" target="_blank">@NgModule</a>({<br/>  imports: [ BrowserModule, <strong class="mm hi">BrowserAnimationsModule</strong>, <strong class="mm hi">MaterialModule</strong>, <strong class="mm hi">MdButtonModule</strong> ],<br/>  declarations: [ App ],<br/>  bootstrap: [ App ]<br/>})<br/>export class AppModule { }</span></pre><p id="621d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">更多关于如何设置<a class="ae js" href="https://material.angular.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">角度材质</strong> </a>的信息，请查看Loiane Groner <a class="ae js" href="https://twitter.com/loiane" rel="noopener ugc nofollow" target="_blank"> @loiane </a>的<a class="ae js" href="https://loiane.com/2017/07/getting-started-with-angular-material-2/" rel="noopener ugc nofollow" target="_blank">教程</a>。</p><h1 id="e2fe" class="lg lh hh bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">解决办法</h1><p id="f809" class="pw-post-body-paragraph ie if hh ig b ih me ij ik il mf in io ip mg ir is it mh iv iw ix mi iz ja jb ha bi translated">下图交替显示了没有动画的版本和最终版本。这里需要注意的是列表最初是如何显示预先存在的项目的，以及添加和删除项目的效果。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mx"><img src="../Images/8aaab51ee1644ac212dbec7d8cd7f04a.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*jGK8AWNWgxBdC3728wr90g.gif"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">Initial version followed by final version.</figcaption></figure><p id="a8c4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们将使用一个基本的列表设置，使用<strong class="ig hi"> ngFor </strong>来应用我们的动画。</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="3e3f" class="mr lh hh mm b fi ms mt l mu mv"><a class="ae js" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  selector: 'my-app',<br/>  template: `<br/>    &lt;div class="buttons-container"&gt;...&lt;/div&gt;<br/>    &lt;div class="list-container"&gt;<br/>      &lt;div class="box" <strong class="mm hi">*ngFor="let item of list"</strong>&gt;&lt;/div&gt;<br/>    &lt;/div&gt;`<br/>})<br/>export class App {<br/>  list = [1,2,3,4];<br/>}</span></pre><p id="f0e8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将呈现一个包含4个元素的列表。对于我们正在使用的布局:<strong class="ig hi">按钮-容器</strong>，<strong class="ig hi">列表-容器</strong>和<strong class="ig hi">框</strong>。</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="dbdd" class="mr lh hh mm b fi ms mt l mu mv">.buttons-container, .list-container {<br/>  display: flex;<br/>  align-items: center;<br/>  justify-content: center;  <br/>}<br/>    <br/>.buttons-container {<br/>  flex-direction: row;  <br/>}<br/>    <br/>.list-container {<br/>  flex-direction: column;<br/>}<br/>   <br/>.box {<br/>  width: 100px;<br/>  height: 50px;<br/>  background-color: #9c27b0;<br/>  margin: 5px;<br/>}</span></pre><p id="fb93" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们使用flex来设计我们的容器。按钮分别使用<code class="du mj mk ml mm b">row</code>(从左到右)和<code class="du mj mk ml mm b">column</code>(从上到下)<code class="du mj mk ml mm b">flex-direction</code>。为了样式化这些项目，我们使用了<strong class="ig hi">盒子</strong>类。</p><h1 id="8347" class="lg lh hh bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated"><strong class="ak">造型材料按钮</strong></h1><p id="d151" class="pw-post-body-paragraph ie if hh ig b ih me ij ik il mf in io ip mg ir is it mh iv iw ix mi iz ja jb ha bi translated">为了样式化我们的<strong class="ig hi">添加</strong>和<strong class="ig hi">移除</strong>按钮，我们使用了下面的代码。</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="50ec" class="mr lh hh mm b fi ms mt l mu mv">&lt;button <strong class="mm hi">md-fab</strong>&gt;<br/>  <strong class="mm hi">&lt;i class="material-icons"&gt;&amp;#xE147;&lt;/i&gt;</strong><br/>&lt;/button&gt;<br/>&lt;button <strong class="mm hi">md-fab</strong> [disabled]="list.length===0"&gt;<br/>  <strong class="mm hi">&lt;i class="material-icons"&gt;&amp;#xE872;&lt;/i&gt;</strong><br/>&lt;/button&gt;</span></pre><p id="4051" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们选择的<strong class="ig hi"> md-fab </strong>是带仰角的圆形按钮。对于图标，我们搜索了<a class="ae js" href="https://material.io/icons/#ic_add_circle" rel="noopener ugc nofollow" target="_blank">图标库</a>，并使用该版本来最大化浏览器与IE9或更低版本的兼容性。注意当列表中没有更多项目时，禁用<strong class="ig hi">移除</strong>按钮的代码。</p><h1 id="85e0" class="lg lh hh bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">角度动画</h1><p id="cbea" class="pw-post-body-paragraph ie if hh ig b ih me ij ik il mf in io ip mg ir is it mh iv iw ix mi iz ja jb ha bi translated">下面简单介绍一下角度动画。Angular基于<a class="ae js" href="https://w3c.github.io/web-animations/" rel="noopener ugc nofollow" target="_blank"> Web Animations API </a>，我们可以使用<strong class="ig hi">触发器</strong>来定义一系列的<strong class="ig hi">状态</strong>和状态之间的<strong class="ig hi">转换</strong>。我们使用<strong class="ig hi">样式</strong>来帮助我们使用<strong class="ig hi"> CSS属性</strong>构建想要的效果。</p><p id="400b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">动画背后的<strong class="ig hi">主要原理</strong>是，一旦我们使用样式设置了<strong class="ig hi">初始状态</strong>和<strong class="ig hi">最终状态</strong>，浏览器就会为我们计算中间状态。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es my"><img src="../Images/a1c64796a972afca59026db928d38b4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:960/1*IECoOW-RM7jFxyQ3MT--Fg.gif"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">Who else better to explain animations than the party parrot!? 😃</figcaption></figure><p id="455a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们可以用秒或毫秒来设置动画的持续时间。例如:1秒，1.2秒，200毫秒。有时我们可能还想控制<strong class="ig hi">计时功能</strong>，它设置计算中间步长<strong class="ig hi">补间</strong>的速度。默认定时为<code class="du mj mk ml mm b">ease</code>；其他常见的值有<code class="du mj mk ml mm b">linear</code>或<code class="du mj mk ml mm b">ease-in-out</code>。</p><p id="f173" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">由于<strong class="ig hi"> Angular v4.2+ </strong>我们也可以使用<strong class="ig hi">序列</strong>和<strong class="ig hi">组</strong>一个接一个或并行运行动画；并且<strong class="ig hi">查询</strong>来访问子元素，<strong class="ig hi">交错</strong>来创建良好链接的编排。</p><h1 id="fe4c" class="lg lh hh bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">为新项目制作动画</h1><p id="9315" class="pw-post-body-paragraph ie if hh ig b ih me ij ik il mf in io ip mg ir is it mh iv iw ix mi iz ja jb ha bi translated">让我们研究一下添加新项目所涉及的代码:</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="2f1f" class="mr lh hh mm b fi ms mt l mu mv"><a class="ae js" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  template: `<br/>    &lt;div class="top-buttons"&gt;<br/>      &lt;button md-fab <strong class="mm hi">(click)="add()"</strong>&gt;&lt;/button&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="list-container"&gt;...&lt;/div&gt;`<br/>})<br/>export class App {<br/>  <strong class="mm hi">counter = 5;</strong><br/>  list = [1,2,3,4];<br/>  <br/>  add(){<br/>    <strong class="mm hi">this.list.push(this.counter++);</strong><br/>  }<br/>}</span></pre><p id="ffbe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们使用绑定到第一个按钮的事件来调用<code class="du mj mk ml mm b">click</code>上的<code class="du mj mk ml mm b">add</code>方法。这将使用<code class="du mj mk ml mm b">counter</code>从我们离开的地方开始添加一个新号码。</p><p id="f2f7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">到目前为止，这将立即显示新的项目，这可能感觉有点粗糙。为了改善用户体验，我们将应用以下原则:预期、夸张和合成。</p><h2 id="2148" class="mr lh hh bd li mz na nb lm nc nd ne lq ip nf ng lu it nh ni ly ix nj nk mc nl bi translated">预期原则</h2><p id="4f5a" class="pw-post-body-paragraph ie if hh ig b ih me ij ik il mf in io ip mg ir is it mh iv iw ix mi iz ja jb ha bi translated">这一原则增加了真实性，并在行动发生之前让观众做好准备。在我们的例子中，我们不希望这些项目凭空出现。我们将使用不透明的淡入效果来帮助预期。</p><h2 id="b34e" class="mr lh hh bd li mz na nb lm nc nd ne lq ip nf ng lu it nh ni ly ix nj nk mc nl bi translated">夸张原则</h2><p id="4af8" class="pw-post-body-paragraph ie if hh ig b ih me ij ik il mf in io ip mg ir is it mh iv iw ix mi iz ja jb ha bi translated">夸张原则就是让动作感觉更极端。这样会增加吸引力，增强行动力。为了实现这一点，我们将尝试添加项目的大小。我们能做的是使用一个<strong class="ig hi">三次贝塞尔</strong>计时函数将它放大和缩小到正常大小。这通常需要一些修改，但是我们可以使用Lea Verou的在线工具。</p><h2 id="3e1e" class="mr lh hh bd li mz na nb lm nc nd ne lq ip nf ng lu it nh ni ly ix nj nk mc nl bi translated">构图原理</h2><p id="c416" class="pw-post-body-paragraph ie if hh ig b ih me ij ik il mf in io ip mg ir is it mh iv iw ix mi iz ja jb ha bi translated">这也被称为<a class="ae js" href="https://twitter.com/jrcanest/status/788441769864073216" rel="noopener ugc nofollow" target="_blank">二次或分层动画</a>。这是将单独的动画合并成一个动画的结果。在我们的例子中，我们将把前面的两个动画合成一个，这样它们可以同时发生。</p><p id="1dd6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们把这些动画添加到我们的列表中吧！</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="cf3d" class="mr lh hh mm b fi ms mt l mu mv">&lt;div class="list-container"&gt;<br/>  &lt;div <strong class="mm hi">@items</strong> class="box" *ngFor="let item of list"&gt;&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="6734" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先我们将添加触发器<code class="du mj mk ml mm b">@items</code>来告诉Angular我们想要处理影响列表中每个<strong class="ig hi"> div </strong>项目的动画。之后，我们将触发器定义添加到<code class="du mj mk ml mm b">animations</code>组件元数据中。这两个需要使用匹配的名称。</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="3933" class="mr lh hh mm b fi ms mt l mu mv"><a class="ae js" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  <strong class="mm hi">animations:</strong> [<br/>    trigger('<strong class="mm hi">items</strong>', [<br/>      transition('<strong class="mm hi">:enter</strong>', [<br/>        style(<strong class="mm hi">{ transform: 'scale(0.5)', opacity: 0 }</strong>),  // initial<br/>        animate('1s cubic-bezier(.8, -0.6, 0.2, 1.5)', <br/>          style(<strong class="mm hi">{ transform: 'scale(1)', opacity: 1 }</strong>))  // final<br/>      ])<br/>    ])<br/>  ]<br/>})</span></pre><p id="d80a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于我们的触发器，我们使用<code class="du mj mk ml mm b">:enter</code>定义了一个转换来捕获添加到视图中的新DOM元素。在我们的代码中，我们使用了一个自定义的计时函数。这就是我们的<strong class="ig hi">贝塞尔曲线</strong> <a class="ae js" href="http://cubic-bezier.com/#.8,-0.6,.2,1.5" rel="noopener ugc nofollow" target="_blank">看起来</a>的样子。当使用超出0–1区间的三次贝塞尔值时，我们允许CSS样式超出我们用于初始和结束状态的值。对于我们的触发器来说，这意味着我们将得到比<code class="du mj mk ml mm b">scale(0.5)</code>小一点和比<code class="du mj mk ml mm b">scale(1)</code>大一点的值，产生一个微小的反弹效果。</p><h1 id="bb36" class="lg lh hh bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">动画移除项目</h1><p id="6292" class="pw-post-body-paragraph ie if hh ig b ih me ij ik il mf in io ip mg ir is it mh iv iw ix mi iz ja jb ha bi translated">让我们看看从列表中删除项目的代码。</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="4d5f" class="mr lh hh mm b fi ms mt l mu mv"><a class="ae js" href="http://twitter.com/Component" rel="noopener ugc nofollow" target="_blank">@Component</a>({<br/>  template: `<br/>    &lt;div class="top-buttons"&gt;<br/>      &lt;button md-fab <strong class="mm hi">(click)="remove(0)"</strong>&gt;&lt;/button&gt;<br/>    &lt;/div&gt;<br/>    &lt;div class="list-container"&gt;<br/>      &lt;div <a class="ae js" href="http://twitter.com/items" rel="noopener ugc nofollow" target="_blank">@items</a> class="box" <strong class="mm hi">(click)="remove(i)"</strong><br/>        *ngFor="let item of list; <strong class="mm hi">let i=index;</strong>"&gt;<br/>      &lt;/div&gt;<br/>    &lt;/div&gt;`<br/>})<br/>export class App {<br/>  remove(index) {<br/>    if(!this.list.length) return;<br/>    <strong class="mm hi">this.list.splice(index, 1);</strong><br/>  }<br/>}</span></pre><p id="2d84" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">与之前类似，我们使用事件绑定来调用索引为<code class="du mj mk ml mm b">0</code>的remove方法。每次点击时，我们将使用<strong class="ig hi">拼接</strong>并传递索引<code class="du mj mk ml mm b">0</code>来移除列表的第一个元素。我们还可以使用这种新方法来删除单个项目。为了获得列表中的当前索引，我们可以使用一个模板变量<code class="du mj mk ml mm b">i</code>，并将其作为参数传递给<code class="du mj mk ml mm b">remove</code>。对于第一个div，结果代码将是<code class="du mj mk ml mm b">(click)="remove(0)"</code>等等。</p><p id="de61" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这将立即删除项目。正如我们之前所做的，我们将应用以下原则:预期、夸张和构图。我们将使用与之前相同的状态，但顺序相反。</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="a792" class="mr lh hh mm b fi ms mt l mu mv">transition('<strong class="mm hi">:leave</strong>', [<br/>  style({ transform: 'scale(1)', opacity: 1, <strong class="mm hi">height: '*'</strong> }),<br/>  animate('1s cubic-bezier(.8, -0.6, 0.2, 1.5)', <br/>   style({ <br/>     transform: 'scale(0.5)', opacity: 0, <br/>     <strong class="mm hi">height: '0px', margin: '0px'</strong> <br/>   })) <br/>])</span></pre><p id="20aa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于这个转换，我们使用了<code class="du mj mk ml mm b">:leave</code>来捕捉从视图中移除的DOM元素。这一次，除了<code class="du mj mk ml mm b">height</code>和<code class="du mj mk ml mm b">margin</code>，其他所有东西看起来都很熟悉。这是为了解决动画在元素所在的位置留下一个间隙，然后下降以弥合与其余项目的间隙的问题。见下文:</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mx"><img src="../Images/4d54d3802f27606584f211a3003b133a.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*WqTkCzrm6nVmRvs1YvMq6A.gif"/></div><figcaption class="jo jp et er es jq jr bd b be z dx">Animations without handling “height” and “margin”.</figcaption></figure><p id="ee00" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">height中的星号告诉Angular使用DOM元素的当前值作为这个属性的值。</p><blockquote class="kh ki kj"><p id="79b3" class="ie if kk ig b ih ii ij ik il im in io kl iq ir is km iu iv iw kn iy iz ja jb ha bi translated">我们可以使用<strong class="ig hi"> 50px </strong>而不是<strong class="ig hi"> * </strong>，但是后者将允许我们更改CSS值，而不必担心动画中的值。</p></blockquote><h1 id="e813" class="lg lh hh bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">为列表的初始显示制作动画</h1><p id="e51c" class="pw-post-body-paragraph ie if hh ig b ih me ij ik il mf in io ip mg ir is it mh iv iw ix mi iz ja jb ha bi translated">我们差不多完成了。还有最后一件事要做。当列表第一次显示时，所有预先存在的项目会同时显示。那不太好，是吗？让我们解决这个问题！</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="e227" class="mr lh hh mm b fi ms mt l mu mv">&lt;div <a class="ae js" href="http://twitter.com/list" rel="noopener ugc nofollow" target="_blank"><strong class="mm hi">@list</strong></a> class="list-container"&gt;<br/>  &lt;div <a class="ae js" href="http://twitter.com/items" rel="noopener ugc nofollow" target="_blank">@items</a> class="box" *ngFor="let item of list"&gt;&lt;/div&gt;<br/>&lt;/div&gt;</span></pre><p id="d197" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这次我们希望能够控制一个列表而不是一个DOM元素。我们可以通过将<strong class="ig hi">触发器</strong>添加到父对象中，并使用<strong class="ig hi">查询</strong>来分别动态地制作每个项目的动画。</p><pre class="jd je jf jg fd mn mm mo mp aw mq bi"><span id="00c9" class="mr lh hh mm b fi ms mt l mu mv">trigger('<strong class="mm hi">list</strong>', [<br/>  transition('<strong class="mm hi">:enter</strong>', [<br/>    query('<a class="ae js" href="http://twitter.com/items" rel="noopener ugc nofollow" target="_blank">@items</a>', <strong class="mm hi">stagger(300, animateChild())</strong>)<br/>  ]),<br/>])</span></pre><p id="a8d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如我们之前看到的，当div第一次被添加到视图中时，我们使用了<code class="du mj mk ml mm b">:enter</code>来捕捉。注意，这个触发器适用于带有<strong class="ig hi">列表容器</strong>类的div。<strong class="ig hi">查询</strong>命令使用一个选择器，在本例中是一个触发器选择器，它将使用<code class="du mj mk ml mm b">@items</code>触发器匹配子节点。该查询连同<strong class="ig hi"> stagger </strong>和<strong class="ig hi"> animateChild </strong>将产生预先存在的4个div项目的列表，以300毫秒的延迟运行它们各自的动画。你可以在下面看到最终的动画。</p><figure class="jd je jf jg fd jh er es paragraph-image"><div class="er es mx"><img src="../Images/cc56127a9068ca4602ce5a82c0917593.png" data-original-src="https://miro.medium.com/v2/resize:fit:600/1*3TV9gACKH2WiybyaAg0xEA.gif"/></div></figure><p id="37c3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">仅此而已！觉得我错过了什么吗？通过<a class="ae js" href="https://twitter.com/intent/user?screen_name=gerardsans" rel="noopener ugc nofollow" target="_blank"> @gerardsans </a>或gerard.sans_at_gmail.com联系我，感谢阅读！</p><h1 id="5d91" class="lg lh hh bd li lj lk ll lm ln lo lp lq lr ls lt lu lv lw lx ly lz ma mb mc md bi translated">进一步阅读</h1><ul class=""><li id="d7e9" class="jt ju hh ig b ih me il mf ip nm it nn ix no jb jy jz ka kb bi translated"><a class="ae js" rel="noopener" href="/ux-in-motion/creating-usability-with-motion-the-ux-in-motion-manifesto-a87a4584ddc"> <strong class="ig hi">用运动创造可用性:UX运动宣言</strong> </a>作者伊萨拉·威伦斯科莫<a class="ae js" href="https://twitter.com/UX_in_Motion" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">@</strong>UX _运动</a></li><li id="1640" class="jt ju hh ig b ih kc il kd ip ke it kf ix kg jb jy jz ka kb bi translated"><a class="ae js" href="https://loiane.com/2017/07/getting-started-with-angular-material-2/" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">Loiane Groner<a class="ae js" href="https://twitter.com/loiane" rel="noopener ugc nofollow" target="_blank">@ Loiane</a>角度素材入门2 </strong> </a>。</li></ul><div class="ko kp ez fb kq kr"><a href="http://www.meetup.com/AngularZone/" rel="noopener  ugc nofollow" target="_blank"><div class="ks ab dw"><div class="kt ab ku cl cj kv"><h2 class="bd hi fi z dy kw ea eb kx ed ef hg bi translated">安古拉宗社区</h2><div class="ky l"><h3 class="bd b fi z dy kw ea eb kx ed ef dx translated">欢迎来到我们的社区。我们的激情是有棱角的。加入我们吧！🚀</h3></div></div><div class="la l"><div class="np l lc ld le la lf jm kr"/></div></div></a></div><figure class="jd je jf jg fd jh er es paragraph-image"><a href="https://twitter.com/intent/user?screen_name=gerardsans"><div class="er es nq"><img src="../Images/abefda0aa7864742686ec7f7fdffe2b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K1tQhWBuVOdzR7OAGvyd8Q.png"/></div></a></figure><figure class="jd je jf jg fd jh er es paragraph-image"><div role="button" tabindex="0" class="ji jj di jk bf jl"><div class="er es nr"><img src="../Images/262c25a72e2000a1a8c4e796fcbb254f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aJfKCaFh4ktyfHzCzdz6VA.png"/></div></div></figure></div></div>    
</body>
</html>