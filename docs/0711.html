<html>
<head>
<title>The L in 12L</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">12L中的L</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/the-curious-case-of-flag-activity-launch-adjacent-f1212f37a8e0?source=collection_archive---------4-----------------------#2022-04-07">https://medium.com/androiddevelopers/the-curious-case-of-flag-activity-launch-adjacent-f1212f37a8e0?source=collection_archive---------4-----------------------#2022-04-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/f4be76c8265969a44ed7d99ecb2f5bb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YWg6uZkqSakAb5vW6uc-gg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Illustration by Ocupop</figcaption></figure><div class=""/><p id="b6a8" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">12L中的L代表大屏幕，这已经不是什么秘密了。</p><p id="0636" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">有很多运行Android应用程序的大屏幕设备，包括平板电脑和可折叠设备。然后，我们有更大的屏幕设备运行Android应用程序，即使它们的原生操作系统是其他东西，如Chrome操作系统。</p><p id="036c" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">12L增加了新功能，以改善用户在大屏幕设备上的体验。其中一个改进是进入分屏多窗口模式(本文剩余部分中的分屏模式)的更简单的UI:</p><figure class="js jt ju jv fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es jr"><img src="../Images/980f61b71b309932a16d97ca0ef37394.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*4L2adbRgEHnGlsUf"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx"><em class="jw">12L’s recents screen showing Split control</em></figcaption></figure><blockquote class="jx jy jz"><p id="7785" class="it iu ka iv b iw ix iy iz ja jb jc jd kb jf jg jh kc jj jk jl kd jn jo jp jq ha bi translated"><strong class="iv hx">注:</strong>分屏模式是多窗口模式的特例。在分屏模式下，两个应用程序并排显示在屏幕上。参见<a class="ae ke" href="https://developer.android.com/guide/topics/large-screens/multi-window-support" rel="noopener ugc nofollow" target="_blank">多窗口支持</a>。</p></blockquote><p id="7dfa" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">在本文中，我们将介绍一个特性，它可以让大屏幕用户更容易地构建多窗口体验。</p><p id="e052" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果您的应用程序需要通过一个意图打开一些其他内容，您可以使用<code class="du kf kg kh ki b"><a class="ae ke" href="https://developer.android.com/reference/android/content/Intent#FLAG_ACTIVITY_LAUNCH_ADJACENT" rel="noopener ugc nofollow" target="_blank">FLAG_ACTIVITY_LAUNCH_ADJACENT</a></code>在一个新的相邻窗口中打开它。</p><p id="9538" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">这个标志是在Android 7.0中引入的，当设备已经处于分屏模式时，允许应用程序将意图指向相邻的窗口。</p><p id="0386" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">12L的新功能是，标志现在允许应用程序进入分屏模式。</p><blockquote class="jx jy jz"><p id="3326" class="it iu ka iv b iw ix iy iz ja jb jc jd kb jf jg jh kc jj jk jl kd jn jo jp jq ha bi translated"><strong class="iv hx">注意:</strong>OEM可以在旧的Android版本上启用12L行为。例如，三星在Android 11+设备上启用了这一行为，微软在Surface Duo上也是如此。</p></blockquote><p id="b30c" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果设备的最小屏幕尺寸超过600dp，您可以在12L上运行的最新版本的Chrome浏览器中看到这种行为。长按链接将显示一个上下文菜单，其中包含在新窗口中打开链接的选项:</p><figure class="js jt ju jv fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es jr"><img src="../Images/c7db79ea0348caf611eca9ec46acb93a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-U5lTQilSrk92l1k"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx"><em class="jw">Chrome’s menu option to open link in a new window on screens larger than 600dp</em></figcaption></figure><p id="c935" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果你在一个紧凑的屏幕上尝试同样的操作(由新的<a class="ae ke" href="https://developer.android.com/guide/topics/large-screens/support-different-screen-sizes#window_size_classes" rel="noopener ugc nofollow" target="_blank">窗口大小类别</a>定义)，选项不存在:</p><figure class="js jt ju jv fd hj er es paragraph-image"><div class="er es kj"><img src="../Images/fa21d5e492fffb34e63e13185a5273b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1176/0*f1WMW2Lfpo6maT9Q"/></div><figcaption class="hq hr et er es hs ht bd b be z dx"><em class="jw">Chrome’s menu option on screens smaller than 600dp</em></figcaption></figure><p id="f0b3" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果您在设备已经处于分屏模式时打开上下文菜单，您将可以选择在另一个窗口中打开链接:</p><figure class="js jt ju jv fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es jr"><img src="../Images/3a7011c8942729b79116a2d5e7d3c673.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*FhiCDWEFxqXrX1dq"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx"><em class="jw">Chrome’s menu option to open link in other window when already in split-screen mode</em></figcaption></figure><h1 id="db88" class="kk kl hw bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">给我看看代码</h1><p id="3822" class="pw-post-body-paragraph it iu hw iv b iw li iy iz ja lj jc jd je lk jg jh ji ll jk jl jm lm jo jp jq ha bi translated">其核心是在启动第二个活动时使用<code class="du kf kg kh ki b">FLAG_ACTIVITY_LAUNCH_ADJACENT</code>:</p><figure class="js jt ju jv fd hj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="3849" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们还可以做的是，如果设备已经处于分屏模式(参见<code class="du kf kg kh ki b"><a class="ae ke" href="https://developer.android.com/reference/android/app/Activity#isInMultiWindowMode()" rel="noopener ugc nofollow" target="_blank">Activity#isInMultiWindowMode()</a></code>)或者如果设备有大屏幕，则添加<code class="du kf kg kh ki b">FLAG_ACTIVITY_LAUNCH_ADJACENT</code>:</p><figure class="js jt ju jv fd hj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><p id="6c17" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">我们可以使用来自<a class="ae ke" href="https://developer.android.com/jetpack/androidx/releases/window" rel="noopener ugc nofollow" target="_blank"> Jetpack WindowManager </a>的<code class="du kf kg kh ki b"><a class="ae ke" href="https://developer.android.com/reference/androidx/window/layout/WindowMetricsCalculator" rel="noopener ugc nofollow" target="_blank">WindowMetricsCalculator</a></code>来决定我们是否在600dp视口断点之上:</p><figure class="js jt ju jv fd hj"><div class="bz dy l di"><div class="ln lo l"/></div></figure><h1 id="48fa" class="kk kl hw bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">活动嵌入</h1><p id="0ea7" class="pw-post-body-paragraph it iu hw iv b iw li iy iz ja lj jc jd je lk jg jh ji ll jk jl jm lm jo jp jq ha bi translated"><code class="du kf kg kh ki b">FLAG_ACTIVITY_LAUNCH_ADJACENT</code>非常适用于您只想打开一个新窗口来显示另一个应用程序或您自己的应用程序的另一个活动中的网页或其他内容的情况。这是一个火灾和遗忘的场景。</p><p id="1d3a" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">如果您需要对新活动的外观有更多的控制，或者您需要对应用程序中两个活动的集成有更多的控制，那么看看<a class="ae ke" href="https://developer.android.com/guide/topics/large-screens/activity-embedding" rel="noopener ugc nofollow" target="_blank"> Activity embedding </a>，这是Jetpack WindowManager 1.0中的另一个实验性API提供的12L特性。</p><h1 id="ed2f" class="kk kl hw bd km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld le lf lg lh bi translated">在你的应用中采用分屏模式</h1><p id="a6dd" class="pw-post-body-paragraph it iu hw iv b iw li iy iz ja lj jc jd je lk jg jh ji ll jk jl jm lm jo jp jq ha bi translated">谷歌正在投入大量资源来改善大屏幕设备上的用户体验。Android 12L功能的下降就是一个证明，用户正在采用这些允许更长时间和更复杂交互的设备。</p><p id="b1ed" class="pw-post-body-paragraph it iu hw iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">现在是时候改善你的应用程序对分屏模式的支持了。</p></div></div>    
</body>
</html>