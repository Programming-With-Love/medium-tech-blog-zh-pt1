<html>
<head>
<title>Custom JavaScript Client Code in Oracle Visual Builder</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle Visual Builder中的自定义JavaScript客户端代码</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/custom-javascript-client-code-in-oracle-visual-builder-fc2450c507de?source=collection_archive---------1-----------------------#2018-06-18">https://medium.com/oracledevs/custom-javascript-client-code-in-oracle-visual-builder-fc2450c507de?source=collection_archive---------1-----------------------#2018-06-18</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="71a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">嘿，这是我的第一篇关于VBCS的帖子，你应该期待将来会有更多关于这个话题的帖子。Red Samurai决定选择VBCS作为我们在云中的主要JavaScript开发IDE。我们将使用它进行声明性JS开发，就像我们将JDeveloper用于ADF一样。</p><p id="ff08" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我在VBCS浏览定制JS客户端代码功能，觉得描述一下它是如何工作的是个好主意。Oracle为同一主题提供了很好的资料，我建议浏览一下— <a class="ae jc" href="https://blogs.oracle.com/vbcs/variables%2c-modules%2c-and-functions%2c-oh-my-custom-client-code-in-visual-builder" rel="noopener ugc nofollow" target="_blank">变量、模块和函数，天哪！Visual Builder中的自定义客户端代码</a>。</p><p id="b70a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我创建了一个简单的UI，有一个输入和一个输出字段。按钮调用自定义JS方法，其中来自输入字段的值将被处理并返回以显示在禁用字段中:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/5d182525c5c82157a80345d95d6c8cd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_PTTletrxkjpXOkuqUBBBQ.png"/></div></div></figure><p id="f67f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面我将描述所有部分是如何连接在一起的。在VBCS的不同地区，ADF开发的方式有很多相似之处——这有助于在VBCS重用ADF技能。</p><p id="1f13" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">VBCS允许在3个级别上定义变量:</p><ol class=""><li id="8d50" class="jp jq hh ig b ih ii il im ip jr it js ix jt jb ju jv jw jx bi translated">页面-页面范围</li><li id="80e4" class="jp jq hh ig b ih jy il jz ip ka it kb ix kc jb ju jv jw jx bi translated">流量—流量范围</li><li id="6314" class="jp jq hh ig b ih jy il jz ip ka it kb ix kc jb ju jv jw jx bi translated">应用—应用范围</li></ol><p id="7d19" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我的例子中，我决定使用页面范围变量(在名为<em class="kd"> main-start </em>的页面中定义)——第一个变量分配给输入字段，第二个变量分配给输出:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ke"><img src="../Images/43319d844a875e1b9ef29d2e39b00027.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*k0DEiROGY-Qr8T8MpKW8AQ.png"/></div></div></figure><p id="526d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有一个属性检查器，它允许将表达式分配给UI字段。下面您可以看到分配给输入字段的第一个变量:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kf"><img src="../Images/bea5c1247cf067550ab2cdcae2b63b42.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*d8u-XSaDIcg02k52EK0Dpg.png"/></div></div></figure><p id="077f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">第二个变量被分配给输出字段:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kg"><img src="../Images/47ab9da72631e91327eff1f4f230aedc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*MXsa6bmL8ShIrqW4o4oHtQ.png"/></div></div></figure><p id="ad92" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">按钮分配有动作链调用——在VBCS我们称之为动作链。在ADF中，我们调用action listener并在方法中编码Java逻辑，这里action chain提供了更大的灵活性，您将在下面的action chain实现中看到这一点:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kh"><img src="../Images/77df02224c93fa5e554103293faa1d96.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*n-Pgcw2iowLVCUMtd8_now.png"/></div></div></figure><p id="fceb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">VBCS允许切换到代码视图，并检查用JET组件构建的HTML结构。当您想要自己调整生成的代码或将布局复制到外部JET项目时，这很有用:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ki"><img src="../Images/3a578ceaa34a2c3413b0d7ac805d4e5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1Yl-sJ-7QfHyaynS_TIbTg.png"/></div></div></figure><p id="6d43" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">每个VBCS页面都有一个JS标签。在那里我们可以找到JS文件，其中可以包含自定义代码。我已经创建了基本的自定义函数，只是为了测试:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kj"><img src="../Images/d523c735f9b7801136163abccdb92c8b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gwsz69aoO_o2630sSj98BA.png"/></div></div></figure><p id="14e6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">VBCS JS代码编辑器提供了广泛的自动建议功能，在开发过程中非常有帮助:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kk"><img src="../Images/97a1c67b5c657e1bcf38458ff5bf5bc1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QnNfIn6BNox0g6TO2fc5Pg.png"/></div></div></figure><p id="8dd4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果出现语法问题，将在审计窗口中报告错误:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kl"><img src="../Images/de379aba5ce163978411857d96347702.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BKs6GNYNUu5_8qesfVxGvQ.png"/></div></div></figure><p id="7ad4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">动作链有单独的标签，我已经有一个了——从按钮调用(见上图):</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es km"><img src="../Images/db0e775beb6a1a7c3fe61c8e57858068.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*01--NctVR0k3MIgMP24I8Q.png"/></div></div></figure><p id="678e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">动作链编辑器视图——除了图表，我们还有各种可用的组件。这看起来有点类似于JDeveloper中的SOA/BPM扩展，不是吗？在这个动作链中，首先我们调用自定义动作——自定义JS方法定义如上:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kl"><img src="../Images/60f88674f4a64e56ac8f0258c7c09d43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m1PMMXlQx-_Ll0mZWphLGA.png"/></div></div></figure><p id="9538" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">JS调用的输入参数是从页面变量(输入组件)中分配的:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kn"><img src="../Images/b0bddae6bf9018f0c64407e000615349.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*09fVVY3jCMA0gjHpAAXRMQ.png"/></div></div></figure><p id="73f2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在下一步中，调用分配变量逻辑，这有助于将函数返回值分配给页面变量，该变量映射到输出UI字段:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ko"><img src="../Images/05a754735347c62011f80246eaff2d66.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bhmvpbLlQMpy3HTb1dGEfA.png"/></div></div></figure><p id="11f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">函数返回值与页面变量的映射:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kp"><img src="../Images/0e1c47606d0a4c012bf206b67a74a09f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m_OobTqsMmhCaMWL4szvhQ.png"/></div></div></figure><p id="816d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单击即可测试应用程序，我们的消息打印在日志中:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kq"><img src="../Images/5d422b6e068d3c11cec7ed452f26edcb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oZIxJXU_MewxA8UA6fYumQ.png"/></div></div></figure><p id="026f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我已经导出了VBCS应用程序并上传到GitHub <a class="ae jc" href="https://github.com/abaranovskis-redsamurai/customfunction" rel="noopener ugc nofollow" target="_blank">库</a>。从VBCS导出后，可以访问和检查生成的代码。以下是主页代码:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kr"><img src="../Images/22bac67f4b4ed3d9e3ec2e8825345072.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6dqJeaKRV5WN76V2_7y-Eg.png"/></div></div></figure><p id="6219" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在<em class="kd"> main-start-page.json </em>中我们可以看到元数据定义。例如，在那里我们可以找到按钮事件与动作链的映射:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ks"><img src="../Images/adf3bec5de19adbc9002184283ce0cbc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*0DeLJpj8Y_KPLgcGdwmMpw.png"/></div></div></figure><p id="ddaf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">VBCS在我看来很有前途，我认为这可能是JS发展的未来。</p></div><div class="ab cl kt ku go kv" role="separator"><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky kz"/><span class="kw bw bk kx ky"/></div><div class="ha hb hc hd he"><p id="4b0d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="kd">原载于2018年6月18日</em><a class="ae jc" href="https://andrejusb.blogspot.com/2018/06/custom-javascript-client-code-in-oracle.html" rel="noopener ugc nofollow" target="_blank"><em class="kd">andrejusb.blogspot.com</em></a><em class="kd">。</em></p></div></div>    
</body>
</html>