<html>
<head>
<title>Simple Web Scraping using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Simple Web Scraping using Python</h1>
<blockquote>原文：<a href="https://medium.easyread.co/simple-web-scraping-using-python-fdfebbb4343a?source=collection_archive---------0-----------------------#2016-10-15">https://medium.easyread.co/simple-web-scraping-using-python-fdfebbb4343a?source=collection_archive---------0-----------------------#2016-10-15</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="8fe9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Di artikel sebelumnya, kita sudah melakukan environment setup untuk python project menggunakan <strong class="jm io"> virtualenv </strong> . Sekarang kita akan mencoba membuat project <a class="ae ki" href="https://en.wikipedia.org/wiki/Web_scraping" rel="noopener ugc nofollow" target="_blank"> <em class="kj"> web scraping </em> </a> <em class="kj"> </em> sederhana yang dapat mengambil / mengekstrak data dari website.</p><h2 id="ba11" class="kk kl in bd km kn ko dn kp kq kr dp ks jv kt ku kv jz kw kx ky kd kz la lb lc bi translated">Preparation</h2><p id="4212" class="pw-post-body-paragraph jk jl in jm b jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh ig bi translated">Pertama, kita perlu menentukan website yang akan dijadikan target untuk diambil datanya. Pada artikel ini, saya memilih target website <a class="ae ki" href="http://gitlab.com/" rel="noopener ugc nofollow" target="_blank"> GitLab </a> yang tujuannya untuk mengesktrak nama project-project dari akun GitLab.</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/d060b89306102f23ce6b0e827d9e1489.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IBtXbyfSfeLy49ZZeCnnbw.png"/></div></div></figure><p id="042a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Tahap selanjutnya, kita perlu mencari bagian <em class="kj"> form </em> untuk login / sign in, yang nantinya link untuk login ini diperlukan oleh script web scraping kita untuk menginput username/email dan password. Berikut tampilan form untuk login di GitLab:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/458cd9209dd06a3ec91ed284fad9cc48.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PxfwbV9HcjICMLxF2TYtbA.png"/></div></div></figure><p id="26b7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Link untuk login di GitLab yaitu:</p><pre class="lj lk ll lm gt lu lv lw lx aw ly bi"><span id="99de" class="kk kl in lv b gy lz ma l mb mc">https://gitlab.com/users/sign_in</span></pre><p id="5951" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Setelah menemukan link login, kita baru dapat memulai tahap membuat script web scraping kita. Buka text editor favorit masing-masing, disini saya menggunakan text editor <a class="ae ki" href="https://atom.io/" rel="noopener ugc nofollow" target="_blank"> <strong class="jm io"> Atom </strong> </a> .</p><h2 id="e791" class="kk kl in bd km kn ko dn kp kq kr dp ks jv kt ku kv jz kw kx ky kd kz la lb lc bi translated">Web scraping script</h2><p id="3c9e" class="pw-post-body-paragraph jk jl in jm b jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh ig bi translated">Kita akan menggunakan MechanicalSoup library untuk melakukan web scraping dengan python. Pertama import dulu mechanicalsoup library nya:</p><pre class="lj lk ll lm gt lu lv lw lx aw ly bi"><span id="966d" class="kk kl in lv b gy lz ma l mb mc">import mechanicalsoup</span></pre><p id="7799" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Buat variables untuk menyimpan informasi link login, email, dan password akun GitLab.</p><pre class="lj lk ll lm gt lu lv lw lx aw ly bi"><span id="2d9d" class="kk kl in lv b gy lz ma l mb mc">URL = "https://gitlab.com/users/sign_in"<br/>EMAIL = "yourname@email.com"<br/>PASSWORD = "yourpassword"</span></pre><p id="f8e1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Kita buat object dengan nama browser dan memberikan url untuk login kepada browser:</p><pre class="lj lk ll lm gt lu lv lw lx aw ly bi"><span id="d2fa" class="kk kl in lv b gy lz ma l mb mc">browser = mechanicalsoup.Browser()<br/>login_page = browser.get(URL)</span></pre><p id="a9db" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Object yang telah kita buat dengan nama “browser” memiliki <em class="kj"> state </em> , termasuk navigation history, HTML form state, dan cookies yang mengemulasikan seperti browser umumnya. <br/> Note: MechanicalSoup tidak sepenuhnya berjalan seperti browser Chrome, Firefox, atau Safari, karena MechanicalSoup tidak dapat menghandle Javascript.</p><p id="5960" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Kita perlu menganalisa form dari login url GitLab untuk mengetahui nama class dari HTML nya. Hal ini dapat dilakukan dengan browser Chrome melalui shortcut <strong class="jm io"> control + shift + c </strong> atau melalui <strong class="jm io"> Inspect Element </strong> :</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/347cf1f0783b3e47a287203c9db07522.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6n0xDuXJ9MHL69nBLJguXQ.png"/></div></div></figure><p id="493b" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Tujuan analisa form ini akan digunakan saat ingin melakukan login, sehingga script yang kita buat dapat melakukan input untuk Email dan Password. Kita akan mengambil element form ini dan ditampung ke dalam login_form:</p><pre class="lj lk ll lm gt lu lv lw lx aw ly bi"><span id="fc87" class="kk kl in lv b gy lz ma l mb mc">login_form = login_page.soup.find("form", {"class":"new_user"})</span></pre><p id="68fb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">login_form menampung isi dari tag <form> dengan nama class “new_user”.</form></p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi md"><img src="../Images/d8eddd39c6bc8279bae874490114aba1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DXM0bAv764hBfdN34jY25w.png"/></div></div></figure><p id="2ba1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Kita perlu melakukan analisa element HTML nya lagi untuk dapat memberikan <input/> value untuk Email dan Password pada form login. Kita akan mencari tag <input/> dalam login_form berdasarkan <em class="kj"> name </em> dan langsung memberikan input value dengan variable EMAIL dan PASSWORD yang telah kita definisikan di atas</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/f391bb1212a829e64b55e95a35018fe0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fb6kiECjnb5iOGAwpXdgew.png"/></div></div></figure><pre class="lj lk ll lm gt lu lv lw lx aw ly bi"><span id="2a93" class="kk kl in lv b gy lz ma l mb mc">login_form.find("input", {"name": "user[login]"})["value"] = EMAIL<br/>login_form.find("input", {"name": "user[password]"})["value"] = PASSWORD</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi md"><img src="../Images/8975461882683b6421922fa1c535dc87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AYBacdrN0nAr5TacDpyvcA.png"/></div></div></figure><p id="5dd9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Value untuk Email dan Password sudah berhasil diberikan, sekarang kita sudah siap submit untuk melakukan login.</p><pre class="lj lk ll lm gt lu lv lw lx aw ly bi"><span id="6588" class="kk kl in lv b gy lz ma l mb mc">response = browser.submit(login_form, login_page.url)</span></pre><p id="3003" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Di tahap ini, kita asumsikan Email dan Password yang diinput benar, bearti kita sudah berhasil login ke GitLab. Tujuan awal web scraping kita yaitu untuk mengambil nama-nama project yang ada di akun GitLab, maka kita perlu menganalisa lagi element HTML nya saat sudah login.</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi li"><img src="../Images/d52607e36200484d25544406325177cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KnxmI2nEquL_xRnl5hN_SA.png"/></div></div></figure><p id="d815" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Untuk mengambil nama project, kita akan mencari semua tag <span> yang memiliki nama class “project-name”.</span></p><pre class="lj lk ll lm gt lu lv lw lx aw ly bi"><span id="b22c" class="kk kl in lv b gy lz ma l mb mc">projects = response.soup.findAll("span", {"class":"project-name"})</span></pre><p id="61a5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Nama-nama project sudah berhasil diambil. Sekarang kita print hasil dari script web scrapingnya:</p><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi md"><img src="../Images/b08511d5ff908fb0bce857c24d4d4d0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cWpjGiJ32ZhXHXNB6b8FJQ.png"/></div></div></figure><h2 id="56c0" class="kk kl in bd km kn ko dn kp kq kr dp ks jv kt ku kv jz kw kx ky kd kz la lb lc bi translated">Testing</h2><p id="e2c2" class="pw-post-body-paragraph jk jl in jm b jn ld jp jq jr le jt ju jv lf jx jy jz lg kb kc kd lh kf kg kh ig bi translated">Buka <strong class="jm io"> Terminal </strong> dan masuk ke dalam virtual environment “scraping” yang sebelumnya sudah dibuat:</p><pre class="lj lk ll lm gt lu lv lw lx aw ly bi"><span id="bf91" class="kk kl in lv b gy lz ma l mb mc">workon scraping</span></pre><p id="f53a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Script yang dibuat saya save di directory Desktop dengan nama <strong class="jm io"> simple_web_scraping.py </strong> . Untuk menjalankan scriptnya:</p><pre class="lj lk ll lm gt lu lv lw lx aw ly bi"><span id="ad67" class="kk kl in lv b gy lz ma l mb mc">python simple_web_scraping.py</span></pre><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi md"><img src="../Images/9fbcff5f3f268098f27ce4e4434ef7c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fqTs_cSJl92ErKppnzne_A.png"/></div></div></figure><p id="494e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Script yang dijalankan berhasil mengambil data nama project dari akun GitLab.</p><p id="1a46" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Banyak hal menarik yang dapat dilakukan dengan web scraping, misalnya monitoring cuaca, pengambilan harga barang dan lainnya. Saya sendiri belum lama mencoba web scraping dengan python. Dengan terus menelusuri tentang web scraping, saya berharap dapat membuat script / project yang dapat digunakan sehari-hari untuk meningkatkan produktivitas.</p><h2 id="9d67" class="kk kl in bd km kn ko dn kp kq kr dp ks jv kt ku kv jz kw kx ky kd kz la lb lc bi translated">Complete script</h2><figure class="lj lk ll lm gt ln gh gi paragraph-image"><div role="button" tabindex="0" class="lo lp di lq bf lr"><div class="gh gi me"><img src="../Images/ac6cd53b4a1954b9819343b09a9d7139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ffr7Ls6RMk6gPZqwOrn_WQ.png"/></div></div></figure></div></div>    
</body>
</html>