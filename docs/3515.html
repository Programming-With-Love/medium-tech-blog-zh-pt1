<html>
<head>
<title>Android : Unit Testing For Beginners</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android:面向初学者的单元测试</h1>
<blockquote>原文：<a href="https://medium.com/globant/android-unit-testing-for-beginners-f64f07e07a78?source=collection_archive---------0-----------------------#2020-10-04">https://medium.com/globant/android-unit-testing-for-beginners-f64f07e07a78?source=collection_archive---------0-----------------------#2020-10-04</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/670ae2e593c983126156e8e7ace9d956.png" data-original-src="https://miro.medium.com/v2/resize:fit:690/format:webp/1*GEJ4e47fcss6IcIs3C1feg.jpeg"/></div></figure><ul class=""><li id="ec25" class="il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated"><strong class="in hi"> <em class="jd">什么是单元测试？</em> </strong></li><li id="48f8" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">单元测试的目的是对系统的每个模块或单元进行识别、分析和修复缺陷。</li><li id="6f50" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">单元测试是软件开发中至关重要的特性。它由用于检查代码业务逻辑的测试用例组成。</li><li id="2dbd" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">一般来说，测试意味着确保“这个东西”做它应该做的事情。</li><li id="d575" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">单元测试由测试用例组成，用于检查代码的<strong class="in hi">业务逻辑。确保类做它应该做的事情。</strong></li><li id="c40e" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated"><strong class="in hi"> <em class="jd">以下是Android中使用的一些测试框架:</em> </strong></li></ul><ol class=""><li id="9adc" class="il im hh in b io ip iq ir is it iu iv iw ix iy jj ja jb jc bi translated"><strong class="in hi"> JUnit </strong></li><li id="7233" class="il im hh in b io je iq jf is jg iu jh iw ji iy jj ja jb jc bi translated"><strong class="in hi">莫奇托</strong></li><li id="63f7" class="il im hh in b io je iq jf is jg iu jh iw ji iy jj ja jb jc bi translated"><strong class="in hi"> Powermock </strong></li><li id="b10f" class="il im hh in b io je iq jf is jg iu jh iw ji iy jj ja jb jc bi translated"><strong class="in hi">机器人电力</strong></li><li id="69b7" class="il im hh in b io je iq jf is jg iu jh iw ji iy jj ja jb jc bi translated"><strong class="in hi">浓缩咖啡</strong></li><li id="ba41" class="il im hh in b io je iq jf is jg iu jh iw ji iy jj ja jb jc bi translated"><strong class="in hi">汉克莱斯特</strong></li></ol><ul class=""><li id="183a" class="il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">让我们从JUnit测试框架开始，通过简单的java字符串反向示例来理解</li></ul><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="107d" class="jt ju hh jp b fi jv jw l jx jy">public class StringReverse {<br/>    public String reverse(String string){<br/>        StringBuilder stringBuilder = new StringBuilder();<br/>        for(int i = stringBuilder.length() - 1 ;i &gt;= 0 ; i--){<br/>             stringBuilder.append(string.charAt(i));<br/>        }<br/>        return stringBuilder.toString();<br/>    }<br/>}</span></pre><ul class=""><li id="1036" class="il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">假设我们编写了一个反转字符串的JAVA类，我们需要通过编写单元测试用例来测试它。</li><li id="1e67" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">为了创建测试用例，你需要右击并点击</li><li id="e994" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated"><strong class="in hi">转到&gt;测试</strong></li></ul><figure class="jk jl jm jn fd ii er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es jz"><img src="../Images/3d03d22e2650f2ff34f5e9878b6a4438.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*czjEzhkt66D-2C6RjGYYaQ.jpeg"/></div></div></figure><ul class=""><li id="4ab4" class="il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">单击Test后，您将能够创建扩展TestCase类的测试类StringReverseTest。</li><li id="4dc1" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">现在，在开始使用StringReverseTest类之前，我们应该理解我们将在测试类中使用的一些注释的含义。</li><li id="d097" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated"><strong class="in hi"> <em class="jd"> JUnit测试框架</em> </strong> — JUnit是一个测试框架，它使用注释来识别指定测试的方法。</li><li id="c8e2" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">让我们来看看一些基本的注释:</li></ul><ol class=""><li id="cf6b" class="il im hh in b io ip iq ir is it iu iv iw ix iy jj ja jb jc bi translated"><strong class="in hi"> @BeforeClass : </strong>在类中任何测试方法之前运行一次。</li><li id="5137" class="il im hh in b io je iq jf is jg iu jh iw ji iy jj ja jb jc bi translated"><strong class="in hi"> @AfterClass </strong> —在类中的所有测试都运行后运行一次。</li><li id="8c43" class="il im hh in b io je iq jf is jg iu jh iw ji iy jj ja jb jc bi translated"><strong class="in hi"> @Before </strong> —测试前运行</li><li id="2d9f" class="il im hh in b io je iq jf is jg iu jh iw ji iy jj ja jb jc bi translated"><strong class="in hi">@后</strong>——测试后运行</li><li id="ec38" class="il im hh in b io je iq jf is jg iu jh iw ji iy jj ja jb jc bi translated"><strong class="in hi"> @Test </strong> —这是要运行的测试方法</li></ol><ul class=""><li id="938c" class="il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">因此，在StringReverseTest类中，我们编写了方法setUp()</li></ul><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="49c3" class="jt ju hh jp b fi jv jw l jx jy">public class StringReverseTest extends TestCase {<br/><br/>    StringReverse SUT;<br/><br/>    @Before<br/>    public void setUp() throws Exception {<br/>        SUT = new StringReverse();<br/>     }<br/>}</span></pre><ul class=""><li id="3864" class="il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">超类的<code class="du ke kf kg jp b">@Before</code>方法将在当前类的方法之前运行，除非它们在当前类中被覆盖。</li><li id="be0f" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">现在在<strong class="in hi">之后，@在</strong>之前，我们已经使用了<strong class="in hi"> @Test </strong>，它告诉<strong class="in hi"> </strong>使用它的公共void方法可以作为<strong class="in hi">测试</strong>案例运行。</li><li id="ec94" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">我写了3个方法来测试字符串反转</li></ul><ol class=""><li id="d50e" class="il im hh in b io ip iq ir is it iu iv iw ix iy jj ja jb jc bi translated"><strong class="in hi"> <em class="jd">测试方法是否有空字符串</em> </strong></li></ol><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="763c" class="jt ju hh jp b fi jv jw l jx jy">@Test<br/> public void reverse_emptyString_emptyStringReturned() {<br/>     String result = SUT.reverse("");<br/>    Assert.<em class="jd">assertThat</em>(result, CoreMatchers.<em class="jd">is</em>(""));<br/> }</span></pre><ul class=""><li id="26a0" class="il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">在开始之前，我们应该理解断言</li><li id="138f" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated"><strong class="in hi"> <em class="jd">什么是断言？</em> </strong></li></ul><figure class="jk jl jm jn fd ii er es paragraph-image"><div class="er es kh"><img src="../Images/6bf7f807b5f145a4839186f435d692a5.png" data-original-src="https://miro.medium.com/v2/resize:fit:450/format:webp/1*1SpmRWYROypHvFunk1FLaA.jpeg"/></div></figure><ul class=""><li id="2a66" class="il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">断言是一种用于确定测试用例通过或失败状态的方法。</li><li id="56b9" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">assert方法由org.junit.Assert类提供，该类扩展了java.lang.Object类。</li><li id="38eb" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated"><strong class="in hi">Assert . Assert that()</strong>—<strong class="in hi">Assert that()</strong>来自Assert对象的JUnit方法，可用于检查特定值是否与预期值匹配。</li><li id="4cb5" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">现在我们可以运行方法<strong class="in hi"><em class="jd">reverse _ empty string _ empty string returned()。</em> </strong>我们如何通过点击绿色箭头或右击并点击运行来运行该方法。</li></ul><figure class="jk jl jm jn fd ii er es paragraph-image"><div role="button" tabindex="0" class="ka kb di kc bf kd"><div class="er es ki"><img src="../Images/d23e102c4dad59dfb560e79a1985a8e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mU6AVIt0SXPqMAf_lzFgGA.jpeg"/></div></div></figure><ul class=""><li id="d079" class="il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">现在，在运行这个测试用例之后，你可以看到这个测试用例将通过，因为两个表达式都传递空字符串。</li></ul><p id="137b" class="pw-post-body-paragraph kj kk hh in b io ip kl km iq ir kn ko is kp kq kr iu ks kt ku iw kv kw kx iy ha bi translated">2.<strong class="in hi"> <em class="jd">测试方法是否有相同的单字符字符串</em> </strong></p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="1a4c" class="jt ju hh jp b fi jv jw l jx jy">@Test<br/>public void reverse_singleCharString_singleCharStringReturned() {<br/>    String result = SUT.reverse("b");<br/>    <em class="jd">assertThat</em>(result, <em class="jd">is</em>("b"));<br/>}</span></pre><ul class=""><li id="4f2c" class="il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">这里测试用例将通过，因为它正在反转单个字符的字符串。</li></ul><p id="4e46" class="pw-post-body-paragraph kj kk hh in b io ip kl km iq ir kn ko is kp kq kr iu ks kt ku iw kv kw kx iy ha bi translated">3.<strong class="in hi"> <em class="jd">测试方法是否有相同的多个字符串</em> </strong></p><pre class="jk jl jm jn fd jo jp jq jr aw js bi"><span id="0995" class="jt ju hh jp b fi jv jw l jx jy">@Test<br/>public void reverse_multipleCharString_multipleCharStringReturned() {<br/>    String result1 = SUT.reverse("ababcc");<br/>    <em class="jd">assertThat</em>(result1, <em class="jd">is</em>("abcabc"));<br/>}</span></pre><ul class=""><li id="94b5" class="il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc bi translated">在这个测试用例中，将得到错误，因为传递的值不是先前传递的字符串的反码。</li><li id="4f3d" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">预期的字符串应该与传递的字符串相反，即</li><li id="5333" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">ababcc → ccbaba</li><li id="8343" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">这些是单元测试案例的一些基本例子</li><li id="fdd7" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">注意:-在这个程序中，我遵循了测试用例方法名的一些基本命名惯例</li><li id="50bc" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated"><strong class="in hi"> &lt;工作单元&gt; _ &lt;状态下测试&gt; _ &lt;预期行为&gt; </strong></li><li id="5e21" class="il im hh in b io je iq jf is jg iu jh iw ji iy iz ja jb jc bi translated">这应该是我们练习时应该遵循的模式。</li></ul><p id="5739" class="pw-post-body-paragraph kj kk hh in b io ip kl km iq ir kn ko is kp kq kr iu ks kt ku iw kv kw kx iy ha bi translated">快乐阅读:)</p></div></div>    
</body>
</html>