<html>
<head>
<title>How Do I Query JSON in Log Analytics?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何在日志分析中查询JSON？</h1>
<blockquote>原文：<a href="https://medium.com/version-1/how-do-i-query-json-in-log-analytics-ce289b4b1fb5?source=collection_archive---------1-----------------------#2022-09-21">https://medium.com/version-1/how-do-i-query-json-in-log-analytics-ce289b4b1fb5?source=collection_archive---------1-----------------------#2022-09-21</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/e367fd07534204618fa98813d26dcfd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1316/format:webp/1*0S7pKBMVqofnDRSqjf_O2g.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">JSON — not always fun to query…..</figcaption></figure><p id="fd62" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">Azure日志通常包含JSON数据，我们需要“打开”这些数据来检索特定的值。</p><p id="1cd0" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">ADF日志就是一个很好的例子:</strong></p><figure class="js jt ju jv fd ii er es paragraph-image"><div class="er es jr"><img src="../Images/13b67cc6ba85148cd87c87fdda609931.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/format:webp/1*EPwJmN2-nqG2AIMWE4AcQQ.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx">SystemParameters data in JSON</figcaption></figure><p id="48a2" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi"> <em class="jw">系统参数</em> </strong>包含一些关于管道运行请求时间的有用数据——那么我们如何将其提取到自己的列中呢？</p></div><div class="ab cl jx jy go jz" role="separator"><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc kd"/><span class="ka bw bk kb kc"/></div><div class="ha hb hc hd he"><h2 id="d84e" class="ke kf hh bd kg kh ki kj kk kl km kn ko je kp kq kr ji ks kt ku jm kv kw kx ky bi translated">这是一个非常简单的三阶段过程:</h2><ul class=""><li id="3282" class="kz la hh iv b iw lb ja lc je ld ji le jm lf jq lg lh li lj bi translated"><a class="ae lk" href="https://docs.microsoft.com/en-us/azure/data-explorer/kusto/query/parsejsonfunction" rel="noopener ugc nofollow" target="_blank"><strong class="iv hi"><em class="jw">【parse _ json()</em></strong></a>函数—将JSON数据加载到单个对象中</li><li id="cffe" class="kz la hh iv b iw ll ja lm je ln ji lo jm lp jq lg lh li lj bi translated"><a class="ae lk" href="https://docs.microsoft.com/en-us/azure/data-explorer/kusto/query/mvexpandoperator" rel="noopener ugc nofollow" target="_blank"><strong class="iv hi"><em class="jw">mv-展开</em></strong></a><strong class="iv hi"><em class="jw"/></strong>—<strong class="iv hi"><em class="jw"/></strong>将JSON对象展开到其单独的记录中</li><li id="c0dc" class="kz la hh iv b iw ll ja lm je ln ji lo jm lp jq lg lh li lj bi translated"><a class="ae lk" href="https://docs.microsoft.com/en-us/azure/data-explorer/kusto/query/extendoperator" rel="noopener ugc nofollow" target="_blank"> <strong class="iv hi"> <em class="jw">扩展</em></strong></a>—Kusto操作符为了创建计算列，我们引用我们感兴趣的JSON记录(PipelineRunRequestTime)并将其作为新的结果列进行表面处理。</li></ul><figure class="js jt ju jv fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lq"><img src="../Images/15747918857c1b7bd414ef4143e7dc62.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*234lBBpUBmsfZCk_QvPIsQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">PipelineRunRequestTime surfaced in its own column</figcaption></figure><p id="d83d" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">值得注意的是，Kusto优雅地处理丢失的数据，JSON中没有的行被忽略，而不是抛出错误——很好！</p><p id="22ea" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated">就是这样！嵌套的JSON数据和数组会增加复杂性，但希望这是在日志分析中处理JSON的一个快速而简单的开始。</p><figure class="js jt ju jv fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lr"><img src="../Images/0b08b5128606a286e4bca2396d0fbb7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oVtbHaKa7DTAGPy1TXZx-g.jpeg"/></div></div></figure><p id="044c" class="pw-post-body-paragraph it iu hh iv b iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq ha bi translated"><strong class="iv hi">关于作者:<br/> </strong> Mike Knee是Azure 1.0版的高级数据开发人员。</p></div></div>    
</body>
</html>