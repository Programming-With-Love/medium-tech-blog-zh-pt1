<html>
<head>
<title>Compile time exception handling in Kotlin</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Kotlinä¸­çš„ç¼–è¯‘æ—¶å¼‚å¸¸å¤„ç†</h1>
<blockquote>åŸæ–‡ï¼š<a href="https://blog.kotlin-academy.com/compile-time-exception-handling-in-kotlin-1126c55387ce?source=collection_archive---------1-----------------------#2022-09-20">https://blog.kotlin-academy.com/compile-time-exception-handling-in-kotlin-1126c55387ce?source=collection_archive---------1-----------------------#2022-09-20</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><figure class="gl gn jl jm jn jo gh gi paragraph-image"><div role="button" tabindex="0" class="jp jq di jr bf js"><div class="gh gi jk"><img src="../Images/1071a0593eb884c986aef19ae98fbd20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VXyU6ziL93ZAaisYfNkLdg.jpeg"/></div></div><figcaption class="jv jw gj gh gi jx jy bd b be z dk">Photo by <a class="ae jz" href="https://unsplash.com/es/@dav420?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">David Pupaza</a> on <a class="ae jz" href="https://unsplash.com/s/photos/error?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="1b8e" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">åœ¨Kotlinä¸­ï¼Œæ²¡æœ‰ç±»ä¼¼Javaçš„æ£€æŸ¥å¼‚å¸¸çš„æ¦‚å¿µã€‚æˆ‘ä»¬è¦ä¹ˆå¤„ç†å¼‚å¸¸ï¼Œè¦ä¹ˆè®©å®ƒåœ¨è¿è¡Œæ—¶å´©æºƒã€‚</p><p id="e9e1" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ‘ä¸€ç›´åœ¨åšä¸€ä¸ªKotliné¡¹ç›®ï¼Œä»–ä»¬ç”¨<strong class="kc io">å‡½æ•°å¼é£æ ¼</strong>å†™ä»£ç ã€‚ç”±äºæˆ‘æ¥è‡ªC++èƒŒæ™¯ï¼Œé€‚åº”è¿™ç§é£æ ¼ç›¸å½“æ£˜æ‰‹ã€‚ä¸€å¼€å§‹ï¼Œæˆ‘è¿åäº†è§„åˆ™ï¼Œä½¿ç”¨äº†å¤§é‡çš„<strong class="kc io"> var </strong>è€Œä¸æ˜¯<strong class="kc io"> val </strong>ï¼Œå¹¶ä¸”åˆ°å¤„ä½¿ç”¨<strong class="kc io">å¯å˜é›†åˆ</strong>ï¼Œä½†æ˜¯è¿‡äº†ä¸€æ®µæ—¶é—´ï¼Œæˆ‘å¼€å§‹é€‚åº”äº†ã€‚</p><p id="02c7" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">éœ€è¦å¤šèŠ±ä¸€ç‚¹æ—¶é—´æ¥é€‚åº”çš„ä¸€ä»¶äº‹æ˜¯å‡½æ•°å¼ç¼–ç¨‹ä¸­çš„é”™è¯¯å¤„ç†ã€‚åœ¨FPé£æ ¼ä¸­ï¼Œæ²¡æœ‰å¼‚å¸¸ï¼Œé”™è¯¯è¢«è§†ä¸ºå€¼ã€‚æ¯ä¸ªå‡½æ•°è¿”å›<strong class="kc io">æˆåŠŸ</strong>æˆ–<strong class="kc io">é”™è¯¯</strong>ã€‚ä½†é—®é¢˜æ˜¯ï¼ŒKotlinå¹¶ä¸æ˜¯åƒHaskellé‚£æ ·çš„çº¯å‡½æ•°å¼è¯­è¨€ã€‚å¤§å¤šæ•°æ ‡å‡†åº“å‡½æ•°éƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="063a" class="lh li in ld b gy lj lk l ll lm">fun main() {<br/>    <em class="ln">emptyList</em>&lt;Int&gt;().<em class="ln">first</em>()<br/>}</span></pre><p id="2f57" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">è¿™æ®µä»£ç å°†åœ¨è¿è¡Œæ—¶æŠ›å‡º<code class="fe lo lp lq ld b">NoSuchElementException</code>ã€‚å‡½æ•°ä»£ç ä¸­ä¸å…è®¸å‡ºç°è¿™ç§è¿è¡Œæ—¶æ„å¤–ğŸ˜œå½“ç„¶ï¼Œä¹Ÿå¯ä»¥æŠŠä¸Šé¢çš„ä»£ç æ¯«æ— ä¾‹å¤–åœ°å†™æˆå¦‚ä¸‹ã€‚</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="b2c4" class="lh li in ld b gy lj lk l ll lm">fun main() {<br/>    <em class="ln">emptyList</em>&lt;Int&gt;().<em class="ln">firstOrNull</em>()?.<em class="ln">let </em><strong class="ld io">{ </strong>first <strong class="ld io">-&gt;<br/>        </strong><em class="ln">println</em>("only execute if the list is not empty. First element = $first")<br/>    <strong class="ld io">}<br/></strong>}</span></pre><p id="2edb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æˆ–è€…å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ç®­å¤´åº“æ¥ç¼–å†™æ²¡æœ‰nullçš„ä»£ç ã€‚</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="5d75" class="lh li in ld b gy lj lk l ll lm">import arrow.core.firstOrNone<br/>fun main() {<br/>    <em class="ln">emptyList</em>&lt;Int&gt;().<em class="ln">firstOrNone</em>().tap <strong class="ld io">{ </strong>first <strong class="ld io">-&gt;<br/>        </strong><em class="ln">println</em>("only execute if the list is not empty. First element = $first")<br/>    <strong class="ld io">}<br/></strong>}</span></pre><p id="7805" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ‰€ä»¥æˆ‘ä»¬æœ‰ä¸€äº›æŠ›å‡ºå¼‚å¸¸çš„æ ‡å‡†åº“å‡½æ•°çš„æ›¿ä»£å‡½æ•°ã€‚</p><p id="2e1d" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">é‚£è¿˜æœ‰ä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿé—®é¢˜åœ¨äºå¼€å‘è€…ğŸ˜„æ˜¯çš„ï¼Œåœ¨å¤„ç†å¤§å‹å‡½æ•°å¼é¡¹ç›®æ—¶ï¼Œæˆ‘ä»¬æœ‰æ—¶ä¼šå¿½ç•¥å¹¶ä½¿ç”¨æ ‡å‡†çš„åº“å‡½æ•°ï¼Œå®ƒä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ç”šè‡³æœ‰å‡ æ¬¡æˆ‘ä¹Ÿé™·å…¥äº†è¿™ä¸ªé™·é˜±ï¼Œé™·å…¥äº†ä»£ç å®¡æŸ¥ã€‚</p><p id="ee7c" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">æ‰€ä»¥æˆ‘åœ¨å¯»æ‰¾ä¸€äº›linterï¼Œå®ƒå¯ä»¥åœ¨ç¼–è¯‘æ—¶è­¦å‘Šæˆ‘æœªå¤„ç†çš„å¼‚å¸¸ã€‚ä¸å¹¸çš„æ˜¯ï¼Œæœ‰ä¸¤ä¸ªé—®é¢˜(<a class="ae jz" href="https://youtrack.jetbrains.com/issue/KT-18276" rel="noopener ugc nofollow" target="_blank"> KT-18276 </a>ã€<a class="ae jz" href="https://youtrack.jetbrains.com/issue/KTIJ-10948" rel="noopener ugc nofollow" target="_blank"> KTIJ-10948 </a>)å·²ç»å­˜åœ¨äºIntelliJ YouTrackä¸­ï¼Œå¹¶ä¸”åœ¨è¿‡å»çš„3å¹´ä¸­æ²¡æœ‰å¾—åˆ°è§£å†³ğŸ˜</p><h2 id="c365" class="lh li in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">ç®­å¤´åˆ†æ</h2><p id="5d5c" class="pw-post-body-paragraph ka kb in kc b kd mi kf kg kh mj kj kk kl mk kn ko kp ml kr ks kt mm kv kw kx ig bi translated">è¿™ç¯‡æ–‡ç« åŸºæœ¬ä¸Šæ˜¯ä¸ºäº†è¡¨æ‰¬è¿™ä¸ªæ’ä»¶çš„å¼€å‘è€…ğŸ‘å®ƒåœ¨ç¼–è¯‘æ—¶åˆ†æä»£ç ï¼Œå¹¶è¯•å›¾æ•æ‰æ½œåœ¨çš„æœªå¤„ç†å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œå¦‚æœåœ¨Gradleæ„å»ºä¸­åº”ç”¨äº†ç®­å¤´åˆ†ææ’ä»¶ï¼Œä¸‹é¢çš„ä»£ç å°†æ— æ³•ç¼–è¯‘ã€‚</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="2f01" class="lh li in ld b gy lj lk l ll lm">fun main() {<br/>    <em class="ln">emptyList</em>&lt;Int&gt;().<em class="ln">first</em>()<br/>}</span></pre><p id="36eb" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç®­å¤´åˆ†ææ’ä»¶çš„ç¼–è¯‘æ—¶é”™è¯¯ã€‚</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="1ab5" class="lh li in ld b gy lj lk l ll lm">pre-condition `not empty` is not satisfied in `first()`<br/>  -&gt; unsatisfiable constraint: `(emptyList&lt;Int&gt;().size) &gt;= 1`</span></pre><p id="1872" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å®ƒä»ç„¶ä¸èƒ½æ»¡è¶³æˆ‘çš„è¦æ±‚ï¼Œå› ä¸ºå®ƒåªæ•è·è¿è¡Œæ—¶å¯èƒ½å´©æºƒçš„å¼‚å¸¸ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç å¯ä»¥é¡ºåˆ©ç¼–è¯‘ã€‚</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="afd7" class="lh li in ld b gy lj lk l ll lm">fun main() {<br/>    <em class="ln">listOf</em>(1,2).<em class="ln">first</em>()<br/>}</span></pre><p id="bd42" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å› æ­¤ï¼Œè¯¥æ’ä»¶å‘ç±»ä¼¼äºKotlin <code class="fe lo lp lq ld b"><a class="ae jz" href="https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/require.html" rel="noopener ugc nofollow" target="_blank">require</a></code>çš„å‡½æ•°æ·»åŠ äº†ä¸€ç»„å‰ç½®å’Œåç½®æ¡ä»¶ï¼Œä½†å®ƒä»¬æ˜¯åœ¨ç¼–è¯‘æ—¶éªŒè¯çš„ã€‚</p><p id="1212" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å³ä½¿æ‚¨çš„é¡¹ç›®å·²ç»ç”¨Kotlin <code class="fe lo lp lq ld b">require</code>ç¼–å†™ï¼Œä½¿ç”¨è¿™ä¸ªæ’ä»¶ä»ç„¶æœ‰å¥½å¤„ã€‚å®ƒåœ¨ç¼–è¯‘æ—¶è€Œä¸æ˜¯è¿è¡Œæ—¶æ£€æŸ¥é‚£äº›<code class="fe lo lp lq ld b">require</code>ã€‚</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="50ff" class="lh li in ld b gy lj lk l ll lm">fun getIndices(count: Int): List&lt;Int&gt; {<br/>    <em class="ln">require</em>(count &gt;= 0) <strong class="ld io">{ </strong>"Count must be non-negative, was $count" <strong class="ld io">}<br/>    </strong>return <em class="ln">List</em>(count) <strong class="ld io">{ it </strong>+ 1 <strong class="ld io">}<br/></strong>}<br/><br/>fun main() {<br/>    <em class="ln">getIndices</em>(-1)<br/>}</span></pre><p id="ee7a" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">ç®­å¤´åˆ†ææ’ä»¶çš„ç¼–è¯‘æ—¶é”™è¯¯ã€‚</p><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="a18e" class="lh li in ld b gy lj lk l ll lm">pre-condition `Count must be non-negative, was $count` is not satisfied in `getIndices(-1)`<br/>  -&gt; unsatisfiable constraint: `-1 &gt;= 0`</span></pre><h2 id="822e" class="lh li in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">å‘Gradleé¡¹ç›®æ·»åŠ ç®­å¤´åˆ†æ</h2><pre class="ky kz la lb gt lc ld le lf aw lg bi"><span id="3e35" class="lh li in ld b gy lj lk l ll lm">buildscript {<br/>  dependencies {<br/>    classpath("io.arrow-kt.analysis.kotlin:io.arrow-kt.analysis.kotlin.gradle.plugin:2.0")<br/>  }<br/>}<br/>apply(plugin = "io.arrow-kt.analysis.kotlin")</span></pre><p id="a2fa" class="pw-post-body-paragraph ka kb in kc b kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ig bi translated">å»¶ä¼¸é˜…è¯»:<a class="ae jz" href="https://arrow-kt.io/docs/meta/analysis/#%CE%BBrrow-analysis-beyond-the-compiler" rel="noopener ugc nofollow" target="_blank">Î»rrowåˆ†æã€‚è¶…è¶Šç¼–è¯‘å™¨</a></p></div><div class="ab cl mn mo hr mp" role="separator"><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms mt"/><span class="mq bw bk mr ms"/></div><div class="ig ih ii ij ik"><h2 id="f69d" class="lh li in bd lr ls lt dn lu lv lw dp lx kl ly lz ma kp mb mc md kt me mf mg mh bi translated">èµ„æº</h2><div class="mu mv gp gr mw mx"><a href="https://arrow-kt.io/docs/meta/analysis/" rel="noopener  ugc nofollow" target="_blank"><div class="my ab fo"><div class="mz ab na cl cj nb"><h2 class="bd io gy z fp nc fr fs nd fu fw im bi translated">rrowå…ƒ</h2><div class="ne l"><h3 class="bd b gy z fp nc fr fs nd fu fw dk translated">rrowåˆ†æåœ¨æ‚¨çš„ç¼–è¯‘ç®¡é“ä¸­å¼•å…¥äº†æ–°çš„æ£€æŸ¥ï¼Œå®ƒä¼šè­¦å‘Šå¸¸è§çš„é”™è¯¯ï¼Œå¦‚è¶Šç•Œâ€¦</h3></div><div class="nf l"><p class="bd b dl z fp nc fr fs nd fu fw dk translated">arrow-kt.io</p></div></div><div class="ng l"><div class="nh l ni nj nk ng nl jt mx"/></div></div></a></div><figure class="ky kz la lb gt jo"><div class="bz fp l di"><div class="nm nn l"/></div></figure><figure class="ky kz la lb gt jo gh gi paragraph-image"><a href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a"><div class="gh gi no"><img src="../Images/68557afd7e8ae2a75dec26b78d8ec016.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XxZ6inD12UP7rnbt-2PJZw.png"/></div></a></figure></div></div>    
</body>
</html>