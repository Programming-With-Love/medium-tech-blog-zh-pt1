<html>
<head>
<title>How to send emails with just a few lines of code with Yagmail in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">如何用Python中的Yagmail用几行代码发送电子邮件</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/how-to-send-emails-with-just-a-few-lines-of-code-with-yagmail-in-python-239f261585?source=collection_archive---------0-----------------------#2019-09-26">https://medium.com/quick-code/how-to-send-emails-with-just-a-few-lines-of-code-with-yagmail-in-python-239f261585?source=collection_archive---------0-----------------------#2019-09-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/6ac15d24ca7636dfe8d9748f00a28adc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/0*m8JJZDoA5iJEsijV"/></div></figure><p id="5dc4" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在上一课中，<a class="ae jj" href="https://letslearnabout.net/tutorial/how-to-send-beautiful-emails-with-attachments-using-only-python/" rel="noopener ugc nofollow" target="_blank">如何仅使用Python发送漂亮的带附件的电子邮件</a>，我们构建了一个脚本来发送基于HTML的带附件的电子邮件。</p><p id="c0bc" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">如果你使用的是gmail账户，我们可以用Gmail的STMP客户端<a class="ae jj" href="https://pypi.org/project/yagmail/" rel="noopener ugc nofollow" target="_blank"> Yagmail </a>大大简化我们的代码。</p><figure class="jk jl jm jn fd ii"><div class="bz dy l di"><div class="jo jp l"/></div></figure></div><div class="ab cl jq jr go js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="ha hb hc hd he"><h1 id="8249" class="jx jy hh bd jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku bi translated">设置一切</h1><p id="0687" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">我们将使用Gmail帐户发送电子邮件。首先，创建一个Gmail帐户(或使用您自己的帐户)，并在您的帐户中启用“不太安全的应用程序访问”。你可以在这里做:【https://myaccount.google.com/u/0/security?hl=en】T4&amp;pli = 1</p><figure class="jk jl jm jn fd ii er es paragraph-image"><div class="er es la"><img src="../Images/e40c80768af8dc425a5a3697c7706ff8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1374/0*PPnXcsErGNG6W_sK"/></div></figure><p id="85b7" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">之后，你就大功告成了！用Python创建一个环境(我用pipenv，所以用<em class="lb"> shell </em>创建一个)，用<em class="lb"> pip安装yagmail安装yagmail </em>就可以了！</p><h1 id="7997" class="jx jy hh bd jz ka lc kc kd ke ld kg kh ki le kk kl km lf ko kp kq lg ks kt ku bi translated">我们的基本脚本</h1><p id="0434" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">当我说Yagmail简化了我们的工作时，我不是在开玩笑。让我给你看看。</p><p id="4bdc" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">首先，创建一个Python文件。我的是<em class="lb"> yagmail_sender.py </em>。</p><p id="d7e8" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在，写下以下内容:</p><figure class="jk jl jm jn fd ii"><div class="bz dy l di"><div class="lh jp l"/></div></figure><p id="3f3d" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这很清楚，不需要解释。</p><p id="b9bb" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">但是万一真的发生了:</p><ul class=""><li id="17d1" class="li lj hh in b io ip is it iw lk ja ll je lm ji ln lo lp lq bi translated">像往常一样，我们声明我们的发件人和收件人电子邮件。也是用户输入的主题和密码。</li><li id="2530" class="li lj hh in b io lr is ls iw lt ja lu je lv ji ln lo lp lq bi translated">然后，我们用登录的用户和密码创建一个yagmail实例。</li><li id="b517" class="li lj hh in b io lr is ls iw lt ja lu je lv ji ln lo lp lq bi translated">最后一个变量<em class="lb"> contents </em>是一个字符串列表。这是我们电子邮件的正文</li><li id="06ba" class="li lj hh in b io lr is ls iw lt ja lu je lv ji ln lo lp lq bi translated">然后我们向收件人<em class="lb"> receiver_email </em>发送主题为<em class="lb"> contents </em>中列出的邮件正文。</li></ul><p id="81f5" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">就是这样。这就是你所需要的:</p><figure class="jk jl jm jn fd ii er es paragraph-image"><div class="er es lw"><img src="../Images/e35df9d3d54f7b9d3b07f7225fa205d9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1310/0*t8JYukmfJj_UDukC"/></div></figure><h1 id="86ba" class="jx jy hh bd jz ka lc kc kd ke ld kg kh ki le kk kl km lf ko kp kq lg ks kt ku bi translated">向一组人发送电子邮件</h1><p id="41a0" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">你能想象如何将电子邮件发送到一系列电子邮件地址吗？</p><p id="63bf" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">用新行替换旧行:</p><figure class="jk jl jm jn fd ii"><div class="bz dy l di"><div class="lh jp l"/></div></figure><p id="c581" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">注意从单数到复数的变化。</p><p id="2f5b" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">是时候再次运行代码了:</p><figure class="jk jl jm jn fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/b9060dfd5da4aad733179c2674d1dea8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/0*vbVYVxOeiTfeX5SI"/></div></figure><p id="a76f" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">名单上的每个收件人都收到了电子邮件！</p><blockquote class="lx ly lz"><p id="b02e" class="il im lb in b io ip iq ir is it iu iv ma ix iy iz mb jb jc jd mc jf jg jh ji ha bi translated">声明:即使它是一个列表，它的行为也像Python中的集合。重复的邮件不会被发送两次。</p></blockquote><h1 id="791e" class="jx jy hh bd jz ka lc kc kd ke ld kg kh ki le kk kl km lf ko kp kq lg ks kt ku bi translated">添加附件</h1><p id="e046" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">发送附件也非常简单。我不希望人们在评论中争吵，所以在这一张中，我将发送两张图片:一张是猫，另一张是狗。</p><p id="6aeb" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在程序的同一个根目录下添加所需的文件，并添加绝对路径。以下是我的<em class="lb">内容</em>:</p><figure class="jk jl jm jn fd ii"><div class="bz dy l di"><div class="lh jp l"/></div></figure><p id="1eb2" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我使用的是Windows操作系统，所以我用反斜杠(' \ ')对路由进行了转义。</p><p id="12d4" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">这就是我们所需要的。说真的。运行代码，您将在电子邮件中附加两个文件:</p><figure class="jk jl jm jn fd ii er es paragraph-image"><div class="er es md"><img src="../Images/cdebc502ae3677c384de4487bf849dd2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1122/0*vgcX4sdSlgJm9Qud"/></div></figure><p id="d7d9" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">万一代码失败(我们失去了互联网连接，我们的密码是错误的，等等)，让我们用一个漂亮的try/catch来包装一切:</p><figure class="jk jl jm jn fd ii"><div class="bz dy l di"><div class="lh jp l"/></div></figure><p id="742e" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">我们来介绍一个错误的密码:</p><figure class="jk jl jm jn fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/25f9d9b2e5d800e7e53fdeed696b4ed4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/0*7SnhQSd8bRWiYtBn"/></div></figure><p id="9381" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">很好，现在我们收到了一条通知我们出错的消息。</p><p id="dde8" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">如果您不知道，这条消息与我们在使用:Yagmail时得到的消息是一样的，正如您刚才看到的，它只是该库的一个包装器，极大地简化了代码。</p><h1 id="6956" class="jx jy hh bd jz ka lc kc kd ke ld kg kh ki le kk kl km lf ko kp kq lg ks kt ku bi translated">结论</h1><p id="6716" class="pw-post-body-paragraph il im hh in b io kv iq ir is kw iu iv iw kx iy iz ja ky jc jd je kz jg jh ji ha bi translated">Yagmail是smtplib库的一个包装器，帮助我们编写短小精悍的代码。问题是你只能用Gmail地址。</p><p id="f916" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">但是因为每个人都在使用它们，所以这不是问题，对吗？</p><p id="5ac4" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">如果您仍在使用Hotmail或其他电子邮件服务，您仍可以使用<em class="lb"> smtplib </em> Python库。在此了解如何操作:</p><p id="d2ca" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><a class="ae jj" href="https://letslearnabout.net/tutorial/how-to-send-beautiful-emails-with-attachments-using-only-python/" rel="noopener ugc nofollow" target="_blank">如何只用Python发送漂亮的带附件的电子邮件(是的，还有猫的照片)</a></p><p id="1bf8" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">是的，我知道在看了邮件附件中的猫和狗的照片后，你想看到整个画面，而不是缩略图。你应得的:</p><figure class="jk jl jm jn fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/85209052eea3488583867ca3bed1995c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/0*cZYXztfRnj4lPRQh"/></div></figure><figure class="jk jl jm jn fd ii er es paragraph-image"><div class="er es ie"><img src="../Images/a514779ac508fdc188efd3d3b21a59bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1376/0*ty_2byKoWOtN9F6Y"/></div></figure></div><div class="ab cl jq jr go js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="ha hb hc hd he"><p id="e6e1" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">Yagmail包:【https://pypi.org/project/yagmail/ T4】</p><p id="1010" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">YAG mail docs:<a class="ae jj" href="https://buildmedia.readthedocs.org/media/pdf/yagmail/latest/yagmail.pdf" rel="noopener ugc nofollow" target="_blank">https://build media . readthedocs . org/media/pdf/YAG mail/latest/YAG mail . pdf</a></p><p id="8f8c" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><a class="ae jj" href="https://www.youtube.com/channel/UC9OLm6YFRzr4yjlw4xNWYvg?sub_confirmation=1" rel="noopener ugc nofollow" target="_blank">我的Youtube教程视频</a><a class="ae jj" href="https://github.com/david1707/yagmail_sender" rel="noopener ugc nofollow" target="_blank">Github上的最终代码</a> <a class="ae jj" href="https://twitter.com/DavidMM1707" rel="noopener ugc nofollow" target="_blank">在Twitter上联系我</a> <a class="ae jj" href="https://letslearnabout.net/category/tutorial/" rel="noopener ugc nofollow" target="_blank">阅读更多教程</a></p></div><div class="ab cl jq jr go js" role="separator"><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv jw"/><span class="jt bw bk ju jv"/></div><div class="ha hb hc hd he"><p id="b522" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated"><em class="lb">原载于2019年9月26日</em><a class="ae jj" href="https://letslearnabout.net/tutorial/how-to-send-easily-emails-with-yagmail/" rel="noopener ugc nofollow" target="_blank"><em class="lb">https://letslearnabout.net</em></a><em class="lb">。</em></p></div></div>    
</body>
</html>