<html>
<head>
<title>An Introduction to GridFS</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">GridFS简介</h1>
<blockquote>原文：<a href="https://medium.com/version-1/an-introduction-to-gridfs-e8de4537cd4?source=collection_archive---------1-----------------------#2022-05-27">https://medium.com/version-1/an-introduction-to-gridfs-e8de4537cd4?source=collection_archive---------1-----------------------#2022-05-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/cfdadfd23353b42928823fc0db962ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*A2hIVUWlsVrjIQoaTG6Aig.jpeg"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/es/@campaign_creators?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Campaign Creators</a> on <a class="ae it" href="https://unsplash.com/?utm_source=unsplash&amp;utm_medium=referral&amp;utm_content=creditCopyText" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="4809" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">MongoDB是一个领先的NoSQL、开源、面向文档的数据库平台。然而，<a class="ae it" href="https://www.mongodb.com/docs/manual/reference/limits/#bson-documents" rel="noopener ugc nofollow" target="_blank">BSON文件的最大容量是16兆字节。</a>您会如何处理大于这个长度的文件？这就是GridFS的作用所在。</p><p id="56d9" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">grid fs到底是什么？</strong></p><p id="0158" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><a class="ae it" href="https://www.mongodb.com/docs/manual/core/gridfs/#gridfs" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hi"> GridFS </strong> </a>是一个MongoDB文件系统抽象，用于存储和检索巨大的图像、音频或视频文件。这不是MongoDB的一个特性，而是一个规范，驱动程序为用户提供了一个端点来存储/检索文件。GridFS与MongoDB中的BinData存储的不同之处在于，它可以存储大于16MB文档大小限制的文件。</p><p id="efda" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">grid fs中的数据是如何存储的？</strong></p><p id="efd7" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">GridFS获取一个文件，并将其分割成称为块的部分。默认情况下，每个块大小为255 KB(这是一个可配置的参数)。</p><p id="ba85" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">GridFS创建两个集合，即<strong class="iw hi"> chunk </strong>集合和<strong class="iw hi"> file </strong>集合，并通过在每个集合前面加上bucket名称(默认名称为FS)将它们放入一个公共的<strong class="iw hi"> bucket </strong>中，即fs.chunks和fs.files。</p><p id="9a01" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">拆分的块作为文档存储在块集合中，而附加的元数据保存在文件集合中。</p><p id="cd02" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">为了提高效率和方便起见，最初上载数据时，会自动在集合上创建索引。还可以根据需要创建额外的索引。</p><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es js"><img src="../Images/7e5281d742eae792f1dbdf347fdfe87c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gFPN3QKkY_u5malf_cObVg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx"><strong class="bd jx">How does GridFS store data</strong></figcaption></figure><p id="f07c" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">如何获取数据？</strong> <br/> <br/>当你想读取GridFS中存储的文件时，<a class="ae it" href="https://www.mongodb.com/docs/drivers/" rel="noopener ugc nofollow" target="_blank">驱动程序</a>/客户端从文件集合中获取元数据，并根据需要定位和合并所有的块。该文件可以读入内存或输出到流中。您还可以从文件的任何部分检索数据。</p><p id="0fb1" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">优点</strong></p><ol class=""><li id="a370" class="jy jz hh iw b ix iy jb jc jf ka jj kb jn kc jr kd ke kf kg bi translated">分块的主要优势之一是GridFS可以检索文件的各个部分，而无需将整个文件加载到内存中。</li><li id="789e" class="jy jz hh iw b ix kh jb ki jf kj jj kk jn kl jr kd ke kf kg bi translated">将文件元数据与文件本身一起保存。</li><li id="9ea1" class="jy jz hh iw b ix kh jb ki jf kj jj kk jn kl jr kd ke kf kg bi translated">地理复制和可用性—借助GridFS和MongoDB <a class="ae it" href="https://www.mongodb.com/docs/manual/sharding/" rel="noopener ugc nofollow" target="_blank">分片</a>，文件和元数据可以自动同步和部署。</li><li id="af55" class="jy jz hh iw b ix kh jb ki jf kj jj kk jn kl jr kd ke kf kg bi translated">可以将它与其他数据库内容一起存储，从而简化架构。</li><li id="9a67" class="jy jz hh iw b ix kh jb ki jf kj jj kk jn kl jr kd ke kf kg bi translated">使用MongoDB内置的认证和安全机制。</li><li id="6f99" class="jy jz hh iw b ix kh jb ki jf kj jj kk jn kl jr kd ke kf kg bi translated">不需要担心文件系统的限制。</li></ol><p id="a711" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">缺点</strong></p><ol class=""><li id="3cb4" class="jy jz hh iw b ix iy jb jc jf ka jj kb jn kc jr kd ke kf kg bi translated">与文件系统或从服务器提供文件相比，性能较慢。</li><li id="d8ef" class="jy jz hh iw b ix kh jb ki jf kj jj kk jn kl jr kd ke kf kg bi translated">对文件进行原子性更改是不可行的。另一种方法是创建文件的多个版本，丢弃不需要的版本。</li></ol><p id="e267" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">阅读下一篇文章，学习如何使用GridFS 来<a class="ae it" rel="noopener" href="/version-1/file-storage-and-retrieval-using-gridfs-30169630e75a">存储和检索文件！</a></p></div><div class="ab cl km kn go ko" role="separator"><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr ks"/><span class="kp bw bk kq kr"/></div><div class="ha hb hc hd he"><figure class="jt ju jv jw fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kt"><img src="../Images/34a6cb470877ba8ac9807461f178c1b9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ilt9gy_RtgJNOYLNpRjp6A.jpeg"/></div></div></figure><p id="979d" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><strong class="iw hi">关于作者:<br/> </strong> Geethu Suresh是微软的一员。Net顾问在这里的版本1。</p></div></div>    
</body>
</html>