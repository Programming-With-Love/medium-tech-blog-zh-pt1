<html>
<head>
<title>Puzzlers on Kt. Academy, week 7</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">卡帕头的拼图。学院，第7周</h1>
<blockquote>原文：<a href="https://blog.kotlin-academy.com/puzzlers-on-kotlin-academy-week-7-7015f41f79e5?source=collection_archive---------3-----------------------#2018-05-11">https://blog.kotlin-academy.com/puzzlers-on-kotlin-academy-week-7-7015f41f79e5?source=collection_archive---------3-----------------------#2018-05-11</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="c535" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">没有一种编程语言是完美的。因此Kotlin也有它的问题(多亏了它运行的JVM)。本周我们展示了Kotlin中的两个错误，每个高级程序员都应该知道。尤其是“覆盖父级中使用的属性”是一个非常重要的难题。</p><p id="3463" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">知道和理解这样的情况是很重要的，因为否则，你可能会在你的项目中碰到一些这样的情况。这就是为什么如果你想成为一名Kotlin开发者，字谜游戏是一个重要的知识来源。要始终保持最新，请跟踪<a class="ae ki" href="http://portal.kotlin-academy.com" rel="noopener ugc nofollow" target="_blank"> Kt。学院门户</a>并登录<a class="ae ki" href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a" rel="noopener ugc nofollow" target="_blank">我们的简讯</a>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/074f8355d7ad9ca42e59616cc24acde2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jszn_9GOtyFLexwyKFcQrw.jpeg"/></div></div></figure><h1 id="94c8" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">整理</h1><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="014b" class="ly kw in lu b gy lz ma l mb mc">fun main(args: Array&lt;String&gt;) {<br/>    val list = arrayListOf(1, 5, 3, 2, 4)<br/>    val sortedList = list.sort()<br/>    print(sortedList)<br/>}</span></pre><p id="558d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">作者:<a class="ae ki" href="https://github.com/angryziber/kotlin-puzzlers/tree/master/src/collections/sorting" rel="noopener ugc nofollow" target="_blank">安东·凯克斯</a></p><p id="6723" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它将显示什么？一些可能性:</p><p id="4f74" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">a) [1，5，3，2，4] <br/> b) [1，2，3，4，5] <br/> c)科特林。单元<br/> d)不会编译</p><p id="bdb9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用<a class="ae ki" href="http://portal.kotlin-academy.com/#/?tag=puzzler-50" rel="noopener ugc nofollow" target="_blank">此链接</a>或阅读本文直到最后，查看答案和解释。</p><h1 id="23ec" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">集合相等</h1><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="e2e9" class="ly kw in lu b gy lz ma l mb mc">fun main(args: Array&lt;String&gt;) {<br/>    println(listOf(1, 2, 3) == listOf(1, 2, 3))<br/>    println(listOf(1, 2, 3).asSequence() == listOf(1, 2, 3).asSequence())<br/>    println(sequenceOf(1, 2, 3) == sequenceOf(1, 2, 3))<br/>}</span></pre><p id="aed1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">作者:<a class="ae ki" href="https://github.com/dkandalov/kotlin-puzzlers/blob/master/puzzlers/7-collection-equality.kts" rel="noopener ugc nofollow" target="_blank">德米特里·坎达洛夫</a></p><p id="0746" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它将显示什么？一些可能性:</p><p id="4e66" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">a)真实；真实；true<br/>b)true；真实；false<br/>c)true；假的；true<br/>d)true；假的；false<br/>e)false；假的；错误的</p><p id="526c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用<a class="ae ki" href="http://portal.kotlin-academy.com/#/?tag=puzzler-56" rel="noopener ugc nofollow" target="_blank">此链接</a>或阅读本文直到最后，查看答案和解释。</p><h1 id="e539" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">好孩子有很多名字</h1><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="f5c6" class="ly kw in lu b gy lz ma l mb mc">open class C {<br/>    open fun sum(x: Int = 1, y: Int = 2): Int = x + y<br/>}<br/><br/>class D : C() {<br/>    override fun sum(y: Int, x: Int): Int = super.sum(x, y)<br/>}<br/><br/>fun main(args: Array&lt;String&gt;) {<br/>    val d: D = D()<br/>    val c: C = d<br/>    print(c.sum(x = 0))<br/>    print(d.sum(x = 0))<br/>}</span></pre><p id="78c3" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">作者:<a class="ae ki" href="https://github.com/angryziber/kotlin-puzzlers/blob/master/src/functions/goodChildHasManyNames/GoodChildHasManyNames.kts" rel="noopener ugc nofollow" target="_blank">安东·凯克斯</a></p><p id="3573" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它将显示什么？一些可能性:</p><p id="9ac9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">a) 22 <br/> b) 11 <br/> c) 21 <br/> d)将不编译</p><p id="72f5" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用<a class="ae ki" href="http://portal.kotlin-academy.com/#/?tag=puzzler-64" rel="noopener ugc nofollow" target="_blank">此链接</a>或阅读本文直到最后，查看答案和解释。</p><h1 id="6334" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">覆盖父级中使用的属性</h1><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="ae24" class="ly kw in lu b gy lz ma l mb mc">open class Parent(open val a: String) {<br/>    init { print(a) }<br/>}<br/><br/>class Children(override val a: String): Parent(a)<br/><br/>fun main(args: Array&lt;String&gt;) {<br/>    Children("abc")<br/>}</span></pre><p id="6d08" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它将显示什么？一些可能性:</p><p id="d0e7" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">a) abc <br/> b)未解析的引用:a <br/> c)无，它不会编译<br/> d)空</p><p id="190a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用<a class="ae ki" href="http://portal.kotlin-academy.com/#/?tag=puzzler-53" rel="noopener ugc nofollow" target="_blank">此链接</a>或阅读本文直到最后，查看答案和解释。</p><h1 id="fadb" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">循环宾语结构</h1><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="dd7f" class="ly kw in lu b gy lz ma l mb mc">open class A(val x: Any?)<br/><br/>object B : A(C)<br/>object C : A(B)<br/><br/>fun main(args: Array&lt;String&gt;) {<br/>    println(B.x)<br/>    println(C.x)<br/>}</span></pre><p id="5d96" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">作者:<a class="ae ki" href="https://github.com/angryziber/kotlin-puzzlers/blob/master/src/types/cyclicObjectConstructions/cyclicObjectConstructions.kts" rel="noopener ugc nofollow" target="_blank">黑川浩</a></p><p id="3a12" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">它将显示什么？一些可能性:</p><p id="6c58" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">a)空；null<br/>b)C @ 1544 BF 85；null <br/> c)异常初始化错误<br/> d)将不编译</p><p id="22c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">使用<a class="ae ki" href="http://portal.kotlin-academy.com/#/?tag=puzzler-70" rel="noopener ugc nofollow" target="_blank">此链接</a>或阅读本文直到最后，查看答案和解释。</p><h1 id="6b9c" class="kv kw in bd kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq lr ls bi translated">答案和解释</h1><p id="0588" class="pw-post-body-paragraph jk jl in jm b jn md jp jq jr me jt ju jv mf jx jy jz mg kb kc kd mh kf kg kh ig bi translated">对于<strong class="jm io">排序</strong>，正确答案是:</p><p id="b684" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">c)科特林。单位</p><p id="52b8" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">c)科特林。单位</p><p id="d8eb" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">c)科特林。单位</p><p id="2003" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为什么？这里有一个解释:</p><blockquote class="mi mj mk"><p id="6a47" class="jk jl ml jm b jn jo jp jq jr js jt ju mm jw jx jy mn ka kb kc mo ke kf kg kh ig bi translated">有两个函数sort()——对可变集合进行排序——复制集合(并返回排序后的结果)</p></blockquote><p id="98c1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于“<strong class="jm io">集合相等</strong>”的正确答案是:</p><p id="5d3d" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">d)真实；假的；错误的</p><p id="3082" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为什么？这里有一个解释:</p><blockquote class="mi mj mk"><p id="2b43" class="jk jl ml jm b jn jo jp jq jr js jt ju mm jw jx jy mn ka kb kc mo ke kf kg kh ig bi translated">相等适用于列表，因为<code class="fe mp mq mr lu b">equals</code>是为在幕后实现的<code class="fe mp mq mr lu b">ArrayList</code>而实现的。<code class="fe mp mq mr lu b">Sequence</code>没有<code class="fe mp mq mr lu b">equals</code>方法，所以使用默认的方法来比较两个对象的地址。</p></blockquote><p id="0c6c" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于“<strong class="jm io">好孩子有很多名字</strong>”正确答案是:</p><p id="e596" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">c) 21</p><p id="fc28" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为什么？这里有一个解释:</p><ul class=""><li id="fa56" class="ms mt in jm b jn jo jr js jv mu jz mv kd mw kh mx my mz na bi translated">开放函数是多态的，由JVM在运行时解析</li><li id="f173" class="ms mt in jm b jn nb jr nc jv nd jz ne kd nf kh mx my mz na bi translated">命名参数是静态的，在编译时解析</li><li id="759b" class="ms mt in jm b jn nb jr nc jv nd jz ne kd nf kh mx my mz na bi translated">重写时最好不要重新排列参数名，至少有一个警告！</li></ul><p id="eac9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于“<strong class="jm io">覆盖父级</strong>中使用的属性”，正确答案是:</p><p id="5b6f" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">d)空</p><p id="12b4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为什么？这里有一个解释:</p><blockquote class="mi mj mk"><p id="3093" class="jk jl ml jm b jn jo jp jq jr js jt ju mm jw jx jy mn ka kb kc mo ke kf kg kh ig bi translated">这是Kotlin实现中最大的已知问题。要理解它，请参见代码的简化Java表示:</p></blockquote><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="55bf" class="ly kw in lu b gy lz ma l mb mc">public static class Parent {<br/>    private final String a;</span><span id="260a" class="ly kw in lu b gy ng ma l mb mc">public String getA() {<br/>        return this.a;<br/>    }</span><span id="7a40" class="ly kw in lu b gy ng ma l mb mc">Parent(String a) {<br/>        super();<br/>        this.a = a;<br/>        System.out.print(this.getA());<br/>    }<br/>}</span><span id="a9d0" class="ly kw in lu b gy ng ma l mb mc">public static final class B extends Parent {<br/>    private final String a;<br/>    public String getA() {<br/>        return this.a;<br/>    }</span><span id="e24c" class="ly kw in lu b gy ng ma l mb mc">    B(String a) {<br/>        super(a);<br/>        this.a = a;<br/>    }<br/>}</span></pre><blockquote class="mi mj mk"><p id="efde" class="jk jl ml jm b jn jo jp jq jr js jt ju mm jw jx jy mn ka kb kc mo ke kf kg kh ig bi translated">正如你所看到的，为了得到a，我们使用了引用<code class="fe mp mq mr lu b">a</code>的<code class="fe mp mq mr lu b">getA</code>方法。唯一的问题是它在<code class="fe mp mq mr lu b">Child</code>中被覆盖，所以它实际上从<code class="fe mp mq mr lu b">Child</code>中引用了<code class="fe mp mq mr lu b">a</code>，而此时还没有设置。这是因为parent总是首先被初始化。</p></blockquote><p id="45e6" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">在Kotlin/JS中，我们也有类似的问题，因此我们有了<code class="fe mp mq mr lu b">undefined</code>。</p><p id="87e4" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">对于“<strong class="jm io">循环宾语结构</strong>，正确答案是:</p><p id="7395" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">b)C @ 1544 BF 85；空</p><p id="fcab" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">为什么？这里有一个解释:</p><blockquote class="mi mj mk"><p id="b50a" class="jk jl ml jm b jn jo jp jq jr js jt ju mm jw jx jy mn ka kb kc mo ke kf kg kh ig bi translated">单例对象的初始化顺序是通过尝试根据它们的依赖关系对它们进行拓扑排序来确定的。在初始化循环的情况下，完整的拓扑排序是不可能的，并且有可能观察到循环中涉及的对象的值为空。如果的构造函数采用不可为空的参数，如open class A(val x: Any)，它将引发异常。参见<a class="ae ki" href="http://jetbrains.github.io/kotlin-spec/#_singleton_objects" rel="noopener ugc nofollow" target="_blank">http://jetbrains.github.io/kotlin-spec/#_singleton_objects</a></p></blockquote></div><div class="ab cl nh ni hr nj" role="separator"><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm nn"/><span class="nk bw bk nl nm"/></div><div class="ig ih ii ij ik"><p id="a5ad" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你对谜题有自己的想法吗？提交给<a class="ae ki" href="http://portal.kotlin-academy.com/" rel="noopener ugc nofollow" target="_blank"> Kt。学院门户</a>。</p><p id="8240" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你希望未来有更多的谜题吗？轨道<a class="ae ki" href="http://portal.kotlin-academy.com/" rel="noopener ugc nofollow" target="_blank"> Kt。学院门户</a>或<a class="ae ki" href="https://kotlin-academy.us17.list-manage.com/subscribe?u=5d3a48e1893758cb5be5c2919&amp;id=d2ba84960a" rel="noopener ugc nofollow" target="_blank">订阅我们的邮件列表</a>。</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="ab gu cl no"><img src="../Images/a067d0a925b721e9a82bf36c2cffd874.png" data-original-src="https://miro.medium.com/v2/format:webp/1*uDqv_d5NZnPUJA0FeZqhqQ.png"/></div></figure><p id="3a89" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">你需要Kotlin工作室吗？访问我们的网站<a class="ae ki" href="https://www.kt.academy/" rel="noopener ugc nofollow" target="_blank">看看我们能为您做些什么。</a></p><p id="1047" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">喜欢的话记得鼓掌。请注意，如果您按住鼓掌按钮，您可以留下更多的掌声。</p></div></div>    
</body>
</html>