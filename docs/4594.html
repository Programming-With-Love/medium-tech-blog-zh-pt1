<html>
<head>
<title>Automatically run Black in PyCharm on Windows</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Windows上的PyCharm中自动运行黑色</h1>
<blockquote>原文：<a href="https://medium.com/compendium/automatically-run-black-in-pycharm-on-windows-d2eab855a918?source=collection_archive---------0-----------------------#2021-11-02">https://medium.com/compendium/automatically-run-black-in-pycharm-on-windows-d2eab855a918?source=collection_archive---------0-----------------------#2021-11-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class="ev ex ie if ig ab cb"><figure class="ih ii ij ik il im in paragraph-image"><div role="button" tabindex="0" class="io ip di iq bf ir"><img src="../Images/245e9f94b5226ca13d7f1ddda28bbedc.png" data-original-src="https://miro.medium.com/v2/resize:fit:238/format:webp/1*0a7JKgPTxuz6HWm_6yl4wA.png"/></div></figure><figure class="ih ii iu ik il im in paragraph-image"><div role="button" tabindex="0" class="io ip di iq bf ir"><img src="../Images/b09a677a4beeba2aed4269330c28c068.png" data-original-src="https://miro.medium.com/v2/resize:fit:646/format:webp/1*iwMjk9rEJ5PwsVYF2RJvBg.png"/></div></figure><figure class="ih ii iv ik il im in paragraph-image"><div role="button" tabindex="0" class="io ip di iq bf ir"><img src="../Images/d8975aed05f9189f37f1046d94713684.png" data-original-src="https://miro.medium.com/v2/resize:fit:1120/format:webp/1*JqugFrVbN_e9V_h_avBRJw.png"/></div></figure></div><h1 id="f6f7" class="iw ix hh bd iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">(2021年12月)</h1><p id="04a6" class="pw-post-body-paragraph ju jv hh jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">从2022年12月开始的更新和更短的版本是<a class="ae ks" rel="noopener" href="/@josteinleira/automatically-run-black-in-pycharm-on-windows-december-2022-746d7b06ef52">这里是</a>。</p><p id="0376" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">我经常忘记在将代码提交给git之前运行代码格式化程序。这是不好的，因为下面的提交将包含不相关的格式更改。</p><p id="14f4" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">我希望代码格式化程序自动运行。我听说过git预提交挂钩，但从未在Windows上使用过。</p><p id="e094" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">以下是安装步骤:</p><h1 id="101d" class="iw ix hh bd iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">概观</h1><ol class=""><li id="4448" class="ky kz hh jw b jx jy kb kc kf la kj lb kn lc kr ld le lf lg bi translated">在Windows上安装系统Python</li><li id="8091" class="ky kz hh jw b jx lh kb li kf lj kj lk kn ll kr ld le lf lg bi translated">为黑色格式化程序创建虚拟环境</li><li id="6dbb" class="ky kz hh jw b jx lh kb li kf lj kj lk kn ll kr ld le lf lg bi translated">在PyCharm的外部工具中添加黑色(可选步骤)</li><li id="ed14" class="ky kz hh jw b jx lh kb li kf lj kj lk kn ll kr ld le lf lg bi translated">启用PyCharm中的文件监视器插件</li></ol><h1 id="d1de" class="iw ix hh bd iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">在Windows上安装系统Python</h1><p id="55c3" class="pw-post-body-paragraph ju jv hh jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">您需要在系统上安装Python。去python.org<a class="ae ks" href="https://python.org" rel="noopener ugc nofollow" target="_blank">下载并安装，如果还没好的话。您需要知道下一步(下面的创建虚拟环境)的python.exe文件的路径。</a></p><p id="a9b3" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">在Windows上，如果我能控制的话，我不会让任何安装程序把自己加入到路径中。对Python也有效，所以我们必须找到系统python.exe文件。</p><p id="34b6" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">打开命令提示符窗口并运行“dir \python.exe /s”:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="746d" class="lv ix hh lr b fi lw lx l ly lz">C:\&gt;dir \python.exe /s</span><span id="4d91" class="lv ix hh lr b fi ma lx l ly lz">(ignore any virtual environment ones)</span><span id="a16f" class="lv ix hh lr b fi ma lx l ly lz">(ignore Windows apps)</span><span id="5131" class="lv ix hh lr b fi ma lx l ly lz">This is the one:</span><span id="5712" class="lv ix hh lr b fi ma lx l ly lz">Directory of <strong class="lr hi">C:\Users\&lt;user&gt;\AppData\Local\Programs\Python\Python39</strong></span><span id="4d39" class="lv ix hh lr b fi ma lx l ly lz">30.08.2021  20:36           101 608 <strong class="lr hi">python.exe</strong></span><span id="34ac" class="lv ix hh lr b fi ma lx l ly lz">1 File(s)        101 608 bytes</span></pre><p id="0961" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">注意到到python.exe的<strong class="jw hi"> &lt;完整路径&gt; </strong>，用你的实际用户名代替&lt;用户&gt;。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="5a68" class="lv ix hh lr b fi lw lx l ly lz"><strong class="lr hi">C:\Users\&lt;user&gt;\AppData\Local\Programs\Python\Python39</strong></span></pre><p id="d11d" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">通过使用版本选项“-V”运行python.exe，检查它是否是您想要的。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="b1bf" class="lv ix hh lr b fi lw lx l ly lz"><strong class="lr hi">&lt;full path&gt;\python -V<br/>Python 3.9.7</strong></span></pre><h1 id="c7cb" class="iw ix hh bd iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">为黑色格式化程序创建虚拟环境</h1><p id="ea65" class="pw-post-body-paragraph ju jv hh jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">我总是为新的应用程序创建一个新的虚拟环境，而不是扰乱系统Python或其他应用程序。</p><p id="41eb" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">将末尾的目标路径更改为您想要的路径，然后运行命令:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="06e8" class="lv ix hh lr b fi lw lx l ly lz">&lt;full path&gt;\python -m venv C:\Users\<strong class="lr hi">&lt;user&gt;</strong>\venv\black</span></pre><p id="864d" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">然后在新的虚拟环境中安装黑色包。</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="e42d" class="lv ix hh lr b fi lw lx l ly lz"><strong class="lr hi">C:\Users\&lt;user&gt;\venv\black</strong>\Scripts\pip install black</span></pre><h1 id="9e9e" class="iw ix hh bd iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">在PyCharm的外部工具中添加黑色</h1><p id="70ee" class="pw-post-body-paragraph ju jv hh jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">如果您只想自动格式化，而不想从PyCharm菜单中选择运行黑色，这是一个可选步骤。</p><p id="167c" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">进入设置|工具|外部工具，将Balck添加到PyCharm的外部工具中。选择+创建新的工具条目:</p><figure class="lm ln lo lp fd ii er es paragraph-image"><div class="er es mb"><img src="../Images/c57f2af840bff3d0c94d1eccd9f7fd9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*gONpEHyRrwOlHR73oTvfMA.png"/></div><figcaption class="mc md et er es me mf bd b be z dx">Settings | Tools | External Tools | + (Add)</figcaption></figure><p id="4cdd" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">填写字段:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="632d" class="lv ix hh lr b fi lw lx l ly lz">Name: Black<br/>Program: C:\Users\&lt;user&gt;\venv\black\Scripts\black.exe<br/>Arguments: "$FilePath$"</span></pre><p id="23dc" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">如果您想重新格式化当前文件，新工具现在可以从主菜单中获得:工具|外部工具|黑色。</p><h1 id="52f4" class="iw ix hh bd iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">启用PyCharm中的文件监视器插件</h1><p id="4e75" class="pw-post-body-paragraph ju jv hh jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">文件监视插件与PyCharm捆绑在一起。首先，我们需要启用插件。选择菜单选项设置|插件|文件观察器|启用。</p><figure class="lm ln lo lp fd ii er es paragraph-image"><div role="button" tabindex="0" class="io ip di iq bf ir"><div class="er es mg"><img src="../Images/a56f87b160b9bb258d8a5c9ff17a031b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mVHBZE5XAXbSuosEhUF5LA.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Settings | Plugins | File Watchers | Enable</figcaption></figure><p id="8866" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">然后进入菜单选项设置|工具|文件观察器| +(添加<custom>模板)创建一个新的文件观察器。</custom></p><figure class="lm ln lo lp fd ii er es paragraph-image"><div role="button" tabindex="0" class="io ip di iq bf ir"><div class="er es mh"><img src="../Images/6508d6178f0bb467dbb90bb092b08299.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IzyXK4NGk1fzBZbNfUB_Fg.png"/></div></div><figcaption class="mc md et er es me mf bd b be z dx">Settings | Tools | File Watchers | + (Add)</figcaption></figure><p id="8fdb" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">填写字段:</p><pre class="lm ln lo lp fd lq lr ls lt aw lu bi"><span id="57fb" class="lv ix hh lr b fi lw lx l ly lz">Name: Black<br/>File type: Python<br/>Scope: Project Files<br/>Program: C:\Users\&lt;user&gt;\venv\black\Scripts\black<br/>Arguments: "$FilePath$"<br/>Output paths to refresh: "$FilePath$"<br/>Uncheck all advanced options.</span></pre><p id="7c19" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">当你的文件改变时，文件监视插件将会显示为黑色。</p><h1 id="050c" class="iw ix hh bd iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">摘要</h1><p id="30ba" class="pw-post-body-paragraph ju jv hh jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">我体验到在安装过程中一些PyCharm重启是必要的。安装后，我还收到了以下警告:</p><figure class="lm ln lo lp fd ii er es paragraph-image"><div class="er es mi"><img src="../Images/8c7dd96343c03191a6d756e024c070c1.png" data-original-src="https://miro.medium.com/v2/resize:fit:682/format:webp/1*mjX4QBMfXVDFNf4K4N-Vwg.png"/></div></figure><h1 id="5f09" class="iw ix hh bd iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt bi translated">来源</h1><p id="28f7" class="pw-post-body-paragraph ju jv hh jw b jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ha bi translated">黑色文档:<a class="ae ks" href="https://black.readthedocs.io/en/stable/integrations/editors.html#pycharm-intellij-idea" rel="noopener ugc nofollow" target="_blank">黑色编辑器集成</a></p><p id="65ff" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">PyCharm徽标版权所有2000–2021 JetBrains s.r.o . JetBrains和JetBrains徽标是JetBrains s . r . o .的注册商标</p><p id="9abf" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">黑色标志版权所有2018年</p><p id="7f89" class="pw-post-body-paragraph ju jv hh jw b jx kt jz ka kb ku kd ke kf kv kh ki kj kw kl km kn kx kp kq kr ha bi translated">Windows徽标版权所有2021 Microsoft</p></div></div>    
</body>
</html>