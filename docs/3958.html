<html>
<head>
<title>Creating Your Library: An NPM Series (Part I)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">创建你的图书馆:NPM系列(上)</h1>
<blockquote>原文：<a href="https://medium.com/globant/creating-your-library-an-npm-series-part-i-b75bd6f8431d?source=collection_archive---------4-----------------------#2022-08-25">https://medium.com/globant/creating-your-library-an-npm-series-part-i-b75bd6f8431d?source=collection_archive---------4-----------------------#2022-08-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/5ef66a63d29bfa87a1bbf2a2cbdcb692.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*eWfM-5cjl2d2vUwo"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">Photo by <a class="ae it" href="https://unsplash.com/@freegraphictoday?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">AbsolutVision</a> on <a class="ae it" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8b69" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在这个系列中，我们将探索整个NPM。首先，我们将了解如何在公共和私有配置中创建您的存储库，包括自述文件和许可。在第二篇文章<a class="ae it" rel="noopener" href="/@abhijeetgiram/maintaining-your-own-library-an-npm-series-part-ii-57f320ce2176">维护你的库:NPM系列(第二部分)</a>中，我们将探索如何通过最小化漏洞和学习很酷的新命令来有效地管理你的包。</p><p id="878a" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">开始吧！</p><p id="be1f" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">当我们忙着做<em class="js">的时候，NPM偶尔会安装</em>。今天，我们将退一步来探讨如何<em class="js"> NPM发布</em>一个库，并提供给大家安装。</p><h1 id="1b59" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">1.在NPM上创建帐户并登录</h1><ul class=""><li id="0e7d" class="kr ks hh iw b ix kt jb ku jf kv jj kw jn kx jr ky kz la lb bi translated">在<a class="ae it" href="https://www.npmjs.com/" rel="noopener ugc nofollow" target="_blank"> NPM </a>上创建一个账户。成功创建帐户后，使用<em class="js"> npm adduser </em>命令登录到本地机器，该命令<em class="js"> </em>将要求输入用户名、密码、电子邮件和OTP。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="05fb" class="ll ju hh lh b fi lm ln l lo lp">npm adduser</span></pre><ul class=""><li id="e8de" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">我们可以使用<em class="js"> npm whoami </em>命令检查登录的用户名。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="4a63" class="ll ju hh lh b fi lm ln l lo lp">npm whoami</span></pre><h1 id="39c1" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">2.创建一个库</h1><ul class=""><li id="54ff" class="kr ks hh iw b ix kt jb ku jf kv jj kw jn kx jr ky kz la lb bi translated">首先，创建一个新的角度项目。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="6954" class="ll ju hh lh b fi lm ln l lo lp">ng new foo</span></pre><ul class=""><li id="65d0" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">然后使用CLI更改目录并创建一个库。尝试为库选择一个唯一的名称，以避免发布时出现错误。</li></ul><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lt"><img src="../Images/b6116687f344d16c0e80aee0173914bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Vh9V0vBo2fhsRniKg5RqGg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">package name too similar to an existing package error</figcaption></figure><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="f21d" class="ll ju hh lh b fi lm ln l lo lp">ng generate library foo-lib</span></pre><ul class=""><li id="245c" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">这将在根级别创建一个目录作为项目，在项目下，它将创建一个目录作为foo-lib。CLI帮助我们更新所有相应的配置文件，如angular.json、package.json和tsconfig.json</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="35b7" class="ll ju hh lh b fi lm ln l lo lp"><em class="js">#REMEMBER</em></span><span id="bfa4" class="ll ju hh lh b fi lu ln l lo lp"><em class="js">major.minor.patch</em></span><span id="efc7" class="ll ju hh lh b fi lu ln l lo lp"><em class="js">npm uses tilde (~) to choose latest patch version and caret (^) to choose latest minor or patch version.</em></span></pre><h1 id="f8e2" class="jt ju hh bd jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq bi translated">3.构建并发布一个库</h1><ul class=""><li id="014d" class="kr ks hh iw b ix kt jb ku jf kv jj kw jn kx jr ky kz la lb bi translated">使用CLI构建foo-lib。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="8b36" class="ll ju hh lh b fi lm ln l lo lp">ng build foo-lib</span></pre><ul class=""><li id="312a" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">之后，更改目录并使用<em class="js"> npm包</em>创建一个tgz文件。检查package.json文件中的库版本。该库将有其单独的package.json文件。</li><li id="6f1e" class="kr ks hh iw b ix lv jb lw jf lx jj ly jn lz jr ky kz la lb bi translated">在每次发布之前，我们需要增加库的package.json中的版本，它可以是主版本、次版本或补丁版本。</li></ul><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ma"><img src="../Images/b4c7aaecff49cf369a5374344c54bcd7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*00CR_C2-8igL3-QSbOCmqg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">previously published version error</figcaption></figure><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="4a65" class="ll ju hh lh b fi lm ln l lo lp">cd dist<br/>cd foo-lib<br/>npm pack</span></pre><ul class=""><li id="036f" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">一旦我们有了tgz文件，就在NPM上发布库。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="779f" class="ll ju hh lh b fi lm ln l lo lp">npm publish -- access public</span></pre><ul class=""><li id="49fe" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">正如我们刚刚看到的，在npm上发布您的库很简单。使用上面的命令是免费的，你的图书馆将是公共的。</li></ul></div><div class="ab cl mb mc go md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ha hb hc hd he"><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="ed52" class="ll ju hh lh b fi lm ln l lo lp"><em class="js">#REMEMBER</em></span><span id="a28d" class="ll ju hh lh b fi lu ln l lo lp">Publishing the library on NPM privately requires paying NPM for paid account.</span></pre><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mi"><img src="../Images/0dcfe4f64eb70c50c7625c9cba3e6032.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pPE274oaeppVL7WjRiSXxg.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">payment required error to publish privately</figcaption></figure></div><div class="ab cl mb mc go md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ha hb hc hd he"><h1 id="e958" class="jt ju hh bd jv jw mj jy jz ka mk kc kd ke ml kg kh ki mm kk kl km mn ko kp kq bi translated">私下出版一个图书馆</h1><ul class=""><li id="3162" class="kr ks hh iw b ix kt jb ku jf kv jj kw jn kx jr ky kz la lb bi translated">有n个私有存储库，我们可以在那里私下发布一个库，这样它就不会对公众开放，只供你的团队使用。</li><li id="d5ea" class="kr ks hh iw b ix lv jb lw jf lx jj ly jn lz jr ky kz la lb bi translated">运行此命令以在组织级别或用户级别定义包的范围。否则，我们可以在package.json中更新范围。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="c753" class="ll ju hh lh b fi lm ln l lo lp">npm init --scope=@my-foo</span></pre><ul class=""><li id="48e2" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">NPM、Nexus和JFrog是我们可以私下发布库的存储库。在这里，我们将探索同样的NPM。</li><li id="ee29" class="kr ks hh iw b ix lv jb lw jf lx jj ly jn lz jr ky kz la lb bi translated">创建库foo-lib并使用CLI构建foo-lib。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="c3a0" class="ll ju hh lh b fi lm ln l lo lp">ng build foo-lib</span></pre><ul class=""><li id="ae26" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">之后，更改目录并使用<em class="js"> npm包</em>创建一个tgz文件。检查package.json文件中的库版本。该库将有其单独的package.json文件。</li><li id="2b7c" class="kr ks hh iw b ix lv jb lw jf lx jj ly jn lz jr ky kz la lb bi translated">在每次发布之前，我们需要增加库的package.json中的版本，它可以是主版本、次版本或补丁版本。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="386d" class="ll ju hh lh b fi lm ln l lo lp">cd dist<br/>cd foo-lib<br/>npm pack</span></pre><ul class=""><li id="0a99" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">一旦我们有了tgz文件，私下出版NPM图书馆，这需要支付NPM的私人帐户。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="d930" class="ll ju hh lh b fi lm ln l lo lp">npm publish</span></pre><ul class=""><li id="f54c" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">。npmrc是一个npm配置文件，它帮助我们设置安装私有npm软件包所需的npm注册表和注册表凭据。</li></ul><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mo"><img src="../Images/f3889fd89a7a98e168ed41d65fc860b7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QRdFAxec5zMKZbB4K4yjkw.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">.npmrc</figcaption></figure></div><div class="ab cl mb mc go md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ha hb hc hd he"><h1 id="2440" class="jt ju hh bd jv jw mj jy jz ka mk kc kd ke ml kg kh ki mm kk kl km mn ko kp kq bi translated">自述文件和许可</h1><ul class=""><li id="9d0f" class="kr ks hh iw b ix kt jb ku jf kv jj kw jn kx jr ky kz la lb bi translated">发布库时，建议提供关于库的信息，如如何安装、如何设置和使用以及代码片段。</li><li id="87dc" class="kr ks hh iw b ix lv jb lw jf lx jj ly jn lz jr ky kz la lb bi translated">请参考下面的自述文件示例。</li></ul><pre class="lc ld le lf fd lg lh li lj aw lk bi"><span id="bda0" class="ll ju hh lh b fi lm ln l lo lp"># FooLib</span><span id="7802" class="ll ju hh lh b fi lu ln l lo lp">This library was generated with [Angular CLI](https://github.com/angular/angular-cli) version 12.1.0.</span><span id="eed9" class="ll ju hh lh b fi lu ln l lo lp">Demo: <a class="ae it" href="https://stackblitz.com/edit/foo-lib-demo" rel="noopener ugc nofollow" target="_blank">https://stackblitz.com/edit/foo-lib-demo</a></span><span id="8328" class="ll ju hh lh b fi lu ln l lo lp">## Features</span><span id="0e3f" class="ll ju hh lh b fi lu ln l lo lp">- Easy to integrate<br/>- Supports every envionment</span><span id="4dfd" class="ll ju hh lh b fi lu ln l lo lp">## Install</span><span id="da96" class="ll ju hh lh b fi lu ln l lo lp">```<br/>npm i foo-lib<br/>```</span><span id="b255" class="ll ju hh lh b fi lu ln l lo lp">## Setup</span><span id="dc07" class="ll ju hh lh b fi lu ln l lo lp">- Add FooLibModule to App NgModule</span><span id="8332" class="ll ju hh lh b fi lu ln l lo lp">## Use</span><span id="bb79" class="ll ju hh lh b fi lu ln l lo lp">```bash<br/>import { Component } from '@angular/core';<br/>import { FooLibService } from 'foo-lib';</span><span id="926e" class="ll ju hh lh b fi lu ln l lo lp">@Component({<br/>  selector: 'app-root',<br/>  templateUrl: './app.component.html',<br/>  styleUrls: ['./app.component.scss']<br/>})<br/>export class AppComponent {</span><span id="33cf" class="ll ju hh lh b fi lu ln l lo lp">  constructor(<br/>    private fooLibService: FooLibService<br/>  ) { }</span><span id="2d13" class="ll ju hh lh b fi lu ln l lo lp">  ngOnInit(): void {<br/>    this.fooLibService.test('Hello World!');<br/>  }</span><span id="86e2" class="ll ju hh lh b fi lu ln l lo lp">}<br/>```</span><span id="06f2" class="ll ju hh lh b fi lu ln l lo lp">## Upcoming features</span><span id="aa7f" class="ll ju hh lh b fi lu ln l lo lp">- Custom foo<br/>- UX design update for foo<br/>- Backward compatibility with angular previous versions</span><span id="02b3" class="ll ju hh lh b fi lu ln l lo lp">## FAQ</span><span id="b030" class="ll ju hh lh b fi lu ln l lo lp">Check out article on <br/>[Crash Course: Publish a Library on NPM](https://medium.com/@abhijeetgiram/ep-01-un-publish-npm-myths-8c8c3001fde9)</span><span id="132a" class="ll ju hh lh b fi lu ln l lo lp">## License</span><span id="6283" class="ll ju hh lh b fi lu ln l lo lp">MIT</span><span id="3b85" class="ll ju hh lh b fi lu ln l lo lp">---</span><span id="6d7b" class="ll ju hh lh b fi lu ln l lo lp">&gt; GitHub [@AbhijeetGiram](https://github.com/AbhijeetGiram) &amp;nbsp;&amp;middot;&amp;nbsp;<br/>&gt; LinkedIn [@AbhijeetGiram](https://in.linkedin.com/in/abhijeet-giram-80265095) &amp;nbsp;&amp;middot;&amp;nbsp;<br/>&gt; Medium [@AbhijeetGiram](https://medium.com/@abhijeetgiram)</span></pre><ul class=""><li id="fd86" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">上述代码将出现在国家预防机制网站的下方。</li></ul><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mp"><img src="../Images/cd6246f8eaeac21f62b4544762f7283a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*K8PXDEv67EGwWisr9F4iwA.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx"><a class="ae it" href="https://gist.github.com/AbhijeetGiram/5133fd1c25ce4ffca7a64ca3c681dbda" rel="noopener ugc nofollow" target="_blank">README.md</a></figcaption></figure><ul class=""><li id="9405" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">我们可以在库的package.json中添加一个许可证和库的详细信息，如下所示，这将反映在NPM网站的主页库上。</li></ul><figure class="lc ld le lf fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es mq"><img src="../Images/4106cb4dc5e9961785779eb8c5b7c5bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qjDlt7PozqoEa4_EYM9kDQ.png"/></div></div><figcaption class="ip iq et er es ir is bd b be z dx">package.json</figcaption></figure><ul class=""><li id="bb84" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">npm网站上的结果会是这样的。</li></ul><figure class="lc ld le lf fd ii er es paragraph-image"><div class="er es mr"><img src="../Images/b0058d9f07231708eae96723fe04b3ce.png" data-original-src="https://miro.medium.com/v2/resize:fit:1100/format:webp/1*XRTHC9eEGZ7O_uO9fAmjiw.png"/></div><figcaption class="ip iq et er es ir is bd b be z dx"><a class="ae it" href="https://www.npmjs.com/package/@abhijeet-giram/foo-lib" rel="noopener ugc nofollow" target="_blank">https://www.npmjs.com/package/@abhijeet-giram/foo-lib</a></figcaption></figure><div class="ms mt ez fb mu mv"><a href="https://www.npmjs.com/package/@abhijeet-giram/foo-lib" rel="noopener  ugc nofollow" target="_blank"><div class="mw ab dw"><div class="mx ab my cl cj mz"><h2 class="bd hi fi z dy na ea eb nb ed ef hg bi translated">@abhijeet-giram/foo-lib</h2><div class="nc l"><h3 class="bd b fi z dy na ea eb nb ed ef dx translated">这个库是用Angular CLI版本12.1.0生成的。</h3></div><div class="nd l"><p class="bd b fp z dy na ea eb nb ed ef dx translated">www.npmjs.com</p></div></div><div class="ne l"><div class="nf l ng nh ni ne nj in mv"/></div></div></a></div><ul class=""><li id="1417" class="kr ks hh iw b ix iy jb jc jf lq jj lr jn ls jr ky kz la lb bi translated">我们已经探索了关于发布库的一切。在下一篇文章<a class="ae it" rel="noopener" href="/@abhijeetgiram/maintaining-your-own-library-an-npm-series-part-ii-57f320ce2176">维护你的图书馆:一个NPM系列(第二部分)</a>中，我们将对维护它进行一些说明。</li></ul></div><div class="ab cl mb mc go md" role="separator"><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg mh"/><span class="me bw bk mf mg"/></div><div class="ha hb hc hd he"><h1 id="ad1f" class="jt ju hh bd jv jw mj jy jz ka mk kc kd ke ml kg kh ki mm kk kl km mn ko kp kq bi translated">摘要</h1><p id="85ef" class="pw-post-body-paragraph iu iv hh iw b ix kt iz ja jb ku jd je jf nk jh ji jj nl jl jm jn nm jp jq jr ha bi translated">我们已经探讨了NPM帐户的创建和登录。之后，我们创建了一个样本库。我们构建并发布了这个样本库。我们探索如何出版一个私人图书馆。我们谈到了图书馆的自述。</p><p id="5494" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里特别要提到<a class="nn no ge" href="https://medium.com/u/733fa45e5564?source=post_page-----b75bd6f8431d--------------------------------" rel="noopener" target="_blank">穆昆德</a>帮我写这篇文章。</p><p id="20da" class="pw-post-body-paragraph iu iv hh iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">编码快乐！！</p></div></div>    
</body>
</html>