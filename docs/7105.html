<html>
<head>
<title>Introducing JavaPoet</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">JavaPoet简介</h1>
<blockquote>原文：<a href="https://medium.com/square-corner-blog/introducing-javapoet-f9a41435e396?source=collection_archive---------0-----------------------#2015-01-29">https://medium.com/square-corner-blog/introducing-javapoet-f9a41435e396?source=collection_archive---------0-----------------------#2015-01-29</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="4551" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">Square有一个用于生成Java代码的新库。</h2></div><p id="4f3b" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated"><em class="js">由</em> <a class="jt ju ge" href="https://medium.com/u/dee2b4f5bec4?source=post_page-----f9a41435e396--------------------------------" rel="noopener" target="_blank">撰写<em class="js">杰西·威尔逊</em>T5<em class="js">。</em></a></p><blockquote class="jv"><p id="711e" class="jw jx hh bd jy jz ka kb kc kd ke jr dx translated">注意，我们已经行动了！如果您想继续了解Square的最新技术内容，请访问我们的新家<a class="ae kf" href="https://developer.squareup.com/blog" rel="noopener ugc nofollow" target="_blank">https://developer.squareup.com/blog</a></p></blockquote><p id="985f" class="pw-post-body-paragraph iw ix hh iy b iz kg ii jb jc kh il je jf ki jh ji jj kj jl jm jn kk jp jq jr ha bi translated">我过去讨厌自动生成的代码。JSP、EJB和协议缓冲区的早期实现产生了大量格式错误的文件，其中充斥着警告和完全限定的类型名:</p><pre class="kl km kn ko fd kp kq kr ks aw kt bi"><span id="b43c" class="ku kv hh kq b fi kw kx l ky kz"><em class="js">/**</em><br/><em class="js">     * &lt;code&gt;optional string error_text = 2;&lt;/code&gt;</em><br/><em class="js">     */</em><br/>    <strong class="kq hi">public</strong> Builder <strong class="kq hi">setErrorText(</strong><br/>        java<strong class="kq hi">.</strong>lang<strong class="kq hi">.</strong>String value<strong class="kq hi">)</strong> <strong class="kq hi">{</strong><br/>      <strong class="kq hi">if</strong> <strong class="kq hi">(</strong>value <strong class="kq hi">==</strong> <strong class="kq hi">null)</strong> <strong class="kq hi">{</strong><br/>  <strong class="kq hi">throw</strong> <strong class="kq hi">new</strong> <strong class="kq hi">NullPointerException();</strong><br/><strong class="kq hi">}</strong><br/>bitField0_ <strong class="kq hi">|=</strong> 0x00000002<strong class="kq hi">;</strong><br/>      errorText_ <strong class="kq hi">=</strong> value<strong class="kq hi">;</strong><br/>      onChanged<strong class="kq hi">();</strong><br/>      <strong class="kq hi">return</strong> <strong class="kq hi">this;</strong><br/>    <strong class="kq hi">}</strong></span></pre><p id="ce1c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">但是事情会变好的。由于Java强大的<a class="ae kf" href="http://hannesdorfmann.com/annotation-processing/annotationprocessing101/" rel="noopener ugc nofollow" target="_blank">注释处理</a>功能，将生成的代码集成到项目中变得更加容易。测试代码生成器已经被Google的<a class="ae kf" href="https://github.com/google/compile-testing" rel="noopener ugc nofollow" target="_blank">编译测试</a>库驯服了。今天，由于<a class="ae kf" href="https://github.com/google/auto" rel="noopener ugc nofollow" target="_blank">自动赋值</a>、<a class="ae kf" href="http://square.github.io/dagger/" rel="noopener ugc nofollow" target="_blank">匕首</a>、<a class="ae kf" href="http://jakewharton.github.io/butterknife/" rel="noopener ugc nofollow" target="_blank">黄油刀</a>和<a class="ae kf" href="https://github.com/square/wire" rel="noopener ugc nofollow" target="_blank">钢丝</a>中生成的代码，方块移动得更快了。</p><p id="bb5c" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">不幸的是，在这些库中生成代码的代码仍然很笨拙。例如，Dagger从上到下编写每个生成的文件，这意味着它需要将准备导入作为一个笨拙的单独步骤。它模拟了。java文件作为一个字符串，不理解它的结构。</p><p id="043f" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">今天，我迫不及待地宣布JavaPoet，JavaWriter的继任者。javaPoet用类型、方法和字段对. Java文件建模，并自动执行导入。像这样生成“Hello World ”:</p><pre class="kl km kn ko fd kp kq kr ks aw kt bi"><span id="dbac" class="ku kv hh kq b fi kw kx l ky kz">MethodSpec main <strong class="kq hi">=</strong> MethodSpec<strong class="kq hi">.</strong>methodBuilder<strong class="kq hi">(</strong>"main"<strong class="kq hi">)</strong><br/>    <strong class="kq hi">.</strong>addModifiers<strong class="kq hi">(</strong>Modifier<strong class="kq hi">.</strong>PUBLIC<strong class="kq hi">,</strong> Modifier<strong class="kq hi">.</strong>STATIC<strong class="kq hi">)</strong><br/>    <strong class="kq hi">.</strong>returns<strong class="kq hi">(void.</strong>class<strong class="kq hi">)</strong><br/>    <strong class="kq hi">.</strong>addParameter<strong class="kq hi">(</strong>String<strong class="kq hi">[].</strong>class<strong class="kq hi">,</strong> "args"<strong class="kq hi">)</strong><br/>    <strong class="kq hi">.</strong>addStatement<strong class="kq hi">(</strong>"$T.out.println($S)"<strong class="kq hi">,</strong> System<strong class="kq hi">.</strong>class<strong class="kq hi">,</strong> "Hello, JavaPoet!"<strong class="kq hi">)</strong><br/>    <strong class="kq hi">.</strong>build<strong class="kq hi">();</strong></span><span id="85df" class="ku kv hh kq b fi la kx l ky kz">TypeSpec helloWorld <strong class="kq hi">=</strong> TypeSpec<strong class="kq hi">.</strong>classBuilder<strong class="kq hi">(</strong>"HelloWorld"<strong class="kq hi">)</strong><br/>    <strong class="kq hi">.</strong>addModifiers<strong class="kq hi">(</strong>Modifier<strong class="kq hi">.</strong>PUBLIC<strong class="kq hi">,</strong> Modifier<strong class="kq hi">.</strong>FINAL<strong class="kq hi">)</strong><br/>    <strong class="kq hi">.</strong>addMethod<strong class="kq hi">(</strong>main<strong class="kq hi">)</strong><br/>    <strong class="kq hi">.</strong>build<strong class="kq hi">();</strong></span><span id="48d3" class="ku kv hh kq b fi la kx l ky kz">JavaFile javaFile <strong class="kq hi">=</strong> JavaFile<strong class="kq hi">.</strong>builder<strong class="kq hi">(</strong>"com.example.helloworld"<strong class="kq hi">,</strong> helloWorld<strong class="kq hi">)</strong><br/>    <strong class="kq hi">.</strong>build<strong class="kq hi">();</strong></span><span id="d087" class="ku kv hh kq b fi la kx l ky kz">javaFile<strong class="kq hi">.</strong>emit<strong class="kq hi">(</strong>System<strong class="kq hi">.</strong>out<strong class="kq hi">);</strong></span></pre><p id="35f2" class="pw-post-body-paragraph iw ix hh iy b iz ja ii jb jc jd il je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在GitHub上获取<a class="ae kf" href="https://github.com/square/javapoet" rel="noopener ugc nofollow" target="_blank">JavaPoet</a>。</p></div><div class="ab cl lb lc go ld" role="separator"><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg lh"/><span class="le bw bk lf lg"/></div><div class="ha hb hc hd he"><div class="kl km kn ko fd li"><a rel="noopener follow" target="_blank" href="/@swankjesse"><div class="lj ab dw"><div class="lk ab ll cl cj lm"><h2 class="bd hi fi z dy ln ea eb lo ed ef hg bi translated">杰西·威尔逊</h2><div class="lp l"><h3 class="bd b fi z dy ln ea eb lo ed ef dx translated">安卓和笑话。</h3></div><div class="lq l"><p class="bd b fp z dy ln ea eb lo ed ef dx translated">medium.com</p></div></div><div class="lr l"><div class="ls l lt lu lv lr lw lx li"/></div></div></a></div></div></div>    
</body>
</html>