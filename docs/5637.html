<html>
<head>
<title>2. Automatically Starting Your Web Server</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">2.自动启动您的Web服务器</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/automatically-starting-your-web-server-2b7b793dfcb4?source=collection_archive---------0-----------------------#2019-08-02">https://medium.com/oracledevs/automatically-starting-your-web-server-2b7b793dfcb4?source=collection_archive---------0-----------------------#2019-08-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/e6396528f6ce2ded8b102df3b0947f7e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/0*bA8ZS1jUHhqpWP3p.png"/></div></figure><p id="bc67" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">在本系列的第一部分中，我向您展示了如何注册Oracle Cloud Infrastructure (OCI)的免费试用版，以及如何创建一个简单的web服务器并部署到云中。在本文中，我将向您展示如何在实例重启时自动启动web服务器。这一点很重要，因为在大规模情况下，您不希望手动SSH到每个服务器实例并启动web服务器。</p><p id="1808" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">请注意，这篇文章假设你有一个OCI的试用账户，并且你已经完成了第一篇文章中概述的所有步骤。本文直接建立在第一篇文章的基础上。</p><h1 id="07e8" class="jk jl hh bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">将Web服务器配置为自动启动</h1><p id="9780" class="pw-post-body-paragraph il im hh in b io ki iq ir is kj iu iv iw kk iy iz ja kl jc jd je km jg jh ji ha bi translated">我们需要web服务器在服务器启动或重启时自动启动。为此，我们需要创建一个系统服务。SSH进入<strong class="in hi"> <em class="kn"> webserver1 </em> </strong>实例并执行以下命令:</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="6a99" class="kx jl hh kt b fi ky kz l la lb">cd /etc/systemd/system<br/>sudo vi starthelloserver.service</span></pre><p id="1952" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">下面是<strong class="in hi"><em class="kn">starthello server . service</em></strong>脚本的内容:</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="8885" class="kx jl hh kt b fi ky kz l la lb">[Unit]<br/>Description=Start the Node helloserver web server on startup</span><span id="e8c1" class="kx jl hh kt b fi lc kz l la lb">[Service]<br/>Type=oneshot<br/>ExecStart=/home/opc/node-v12.7.0-linux-x64/bin/node /home/opc/helloserver/index.js<br/>StandardOutput=syslog<br/>StandardError=syslog<br/>RemainAfterExit=yes</span><span id="855f" class="kx jl hh kt b fi lc kz l la lb">[Install]<br/>WantedBy=multi-user.target</span></pre><p id="62e7" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">请注意，<strong class="in hi"> <em class="kn"> ExecStart </em> </strong>行在本文中可能出现在2行中，但它实际上是单行，显示了到<strong class="in hi"> <em class="kn">节点</em> </strong>程序的完整路径和到<strong class="in hi"> <em class="kn"> index.js </em> </strong>程序的完整路径。如果你从上面的源代码中复制粘贴，应该会很好。保存文件。现在，您需要使用以下命令激活服务:</p><pre class="ko kp kq kr fd ks kt ku kv aw kw bi"><span id="4c26" class="kx jl hh kt b fi ky kz l la lb">sudo systemctl enable starthelloserver.service</span></pre><p id="3747" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">现在，让我们确保脚本工作正常。登录你在https://cloud.oracle.com的审判实例。使用浏览器屏幕左上角的菜单导航到计算实例，并选择计算-&gt;实例</p><figure class="ko kp kq kr fd ii er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es ld"><img src="../Images/f6faa7714d7b17f2dc71a973d1d55e4a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YsHX4rtcrJsO3eLpBR3Urw.png"/></div></div></figure><p id="48ca" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">点击您的<strong class="in hi"> <em class="kn"> webserver1 </em> </strong>实例查看详情。靠近屏幕上方是一个<strong class="in hi"> <em class="kn">重启</em> </strong>按钮。现在点击那个按钮。</p><figure class="ko kp kq kr fd ii er es paragraph-image"><div role="button" tabindex="0" class="le lf di lg bf lh"><div class="er es li"><img src="../Images/e88809d4f1d30bd8196e8ca3f287e77e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OLQLG4VZ4gtoBsqETboFjA.png"/></div></div></figure><p id="7406" class="pw-post-body-paragraph il im hh in b io ip iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji ha bi translated">计算实例状态将更改为停止，然后迅速返回运行状态。一旦计算实例再次处于运行状态，打开浏览器访问URL http:// <your public="" ip=""> :3000，您应该会看到<strong class="in hi"> <em class="kn"> Healthy </em> </strong>消息。</your></p><h1 id="8625" class="jk jl hh bd jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh bi translated">就这些了！</h1><p id="4e3e" class="pw-post-body-paragraph il im hh in b io ki iq ir is kj iu iv iw kk iy iz ja kl jc jd je km jg jh ji ha bi translated">尽管这很简单，但我还是花了一番功夫才弄明白。多年来，Linux自动运行脚本或服务的方法已经发生了变化，网上有太多过时的信息，这些信息已经不再有效。如果你是Linux专家，知道更好的方法，请在评论中告诉我。</p><h2 id="b5ec" class="kx jl hh bd jm lj lk ll jq lm ln lo ju iw lp lq jy ja lr ls kc je lt lu kg lv bi translated">正误表</h2><p id="0a50" class="pw-post-body-paragraph il im hh in b io ki iq ir is kj iu iv iw kk iy iz ja kl jc jd je km jg jh ji ha bi translated">当我今天第一次发表这篇文章时，它在starthelloserver.service文件中包含了一个bug。我去掉了超时指令，让它在300秒后继续运行！如果你以某种方式获得了这个故事的最初版本，请放心，它现在都工作正常。</p></div></div>    
</body>
</html>