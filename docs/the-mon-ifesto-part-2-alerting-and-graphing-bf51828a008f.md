# Mon-ifesto 第 2 部分:警报和图形

> 原文：<https://medium.com/capital-one-tech/the-mon-ifesto-part-2-alerting-and-graphing-bf51828a008f?source=collection_archive---------0----------------------->

## 更好地监控应用程序的三部分指南

![](img/a244f9e1b4be332c312ea3ba7d1e3825.png)

***关于监控的 3 部分系列的第 2 部分。你可以在这里阅读***[***Part 1***](/capital-one-developers/the-mon-ifesto-part-1-metrics-808f6c944765)***。***

一旦您的度量标准被确定，基线被建立，数据流动，然后呢？接下来是设置警报。

您的指标将生成四种类型的警报:*低优先级、中优先级、高优先级和信息性*。弄清楚哪些警报产生哪些警报，并将它们发送到适当的通道，将大大有助于减少“寻呼机疲劳”，并使您的运营团队感到愉快(并减少睡眠不足)。让我们来看看每种警报类型，以及如何发送它们的一些建议。

*请注意，这些警报类型的 SLA 是通用指南；您的应用 SLA 可能会有所不同，但这是一个很好的起点。在这种情况下，SLA 是从警报生成到工程师确认的时间，而不是解决问题的时间。*

# **1。高优先级警报(SLA:分钟)**

高优先级警报是您的应用程序将生成的最严重级别的警报。这些警报通常是针对您的四个关键指标(每分钟呼叫数、错误率、响应时间、带宽饱和)中的一个突然出现的大峰值。注意我说，“*大型突发峰值”*——你不希望每个峰值都生成高优先级警报，只是那些表明你的应用可能出现故障的警报。此外，高优先级警报针对一般应用可用性；如果你的应用程序无法访问，那么你有一个大问题。

路由高优先级警报相当简单:如果您与公司的 NOC 集成，就向他们发送警报。如果不是，运营管理工具是非常宝贵的。像这样的工具可以让你给你的工程师打电话，提醒他们这个问题。高优先级警报是那种你会叫醒人们的警报，所以不要羞于设置大声的警报。你需要你的工程师对这些做出反应，就像消防员对五级火警做出反应一样。

除了呼叫您的工程师之外，您还希望在某个地方显示这些警报。拥有一个正在发生的事情的运行板对于确保整个团队在同一页上并理解什么是优先事项是至关重要的。基于浏览器的活动板是一个很好的解决方案，但是如果你的团队在同一个办公室，你也可以使用电视或投影仪。

# **2。中优先级警报(SLA:小时)**

让我们从讨论如何路由中等警报开始。您不想用这些警报拉响警报，但是您也想确保您的工程师可以看到您的中等警报。为此，我建议采取双管齐下的方法:将你的提醒发送给 Slack、Hipchat、Teams 等工具。还有你的警告牌。使用实时聊天应用程序为您的随叫随到工程师提供了一个实时警报通道，同时让下班的工程师能够忽略这些警报。

至于哪种警报应该被视为中等优先级，您通常希望查看持续升高的指标或指标中的突然峰值，这些指标不会给应用带来潜在的故障情况。此外，如果您愿意，还可以在中优先级类别中包含主机关闭通知。如果您已经正确地构建了您的应用程序服务，非临界数量的停机主机应该不会出现危机情况。然而，停机主机加上未知的未来流量模式意味着您不知道是否会看到大量的传入流量，应该做好最坏的打算。

# **3。低优先级警报(SLA:天)**

低优先级警报是您的工程师需要采取行动的最低优先级警报。这些警报可以针对任何需要某种人工干预的情况—磁盘空间不足、CPU 峰值、网络数据包丢失等。我们将这些警报视为低优先级的原因是，正如在第 1 部分中所讨论的，底层应用基础设施或环境的任何严重问题都会影响到您的四个关键指标。就其本身而言，像 CPU 使用率这样的事情并不意味着什么，但是工程师应该在有时间的时候研究一下，看看是否有更深层次的问题在起作用。

发送这些提醒很简单:将它们发送到 JIRA 或其他任务跟踪应用程序。由于 SLA 是以天为单位来衡量的，因此这些警报可以安全地放在 JIRA 队列中，以便您的工程团队在不涉及更高优先级警报时逐一挑选。此外，如果大多数低优先级问题很快以“无法重现”关闭，也不要感到惊讶，这些警报通常是由工程团队无法控制的因素(文件备份导致网络 I/O 瓶颈等)引起的短暂问题。).

如果您有开发能力，低优先级警报是自动化您的警报响应的非常好的目标。通常一个问题会有一个可重复的解决方案(重启机器，清除/tmp 文件夹，等等。)并且自动化这些任务是释放周期的好方法，以便您的工程师从事更重要的任务。

# **4。信息警报(SLA:无)**

到目前为止，我们一直在讨论在某种程度上需要人工干预的警报。信息警报不会；它们很难被称为“警报”，因为它们更类似于“通知”或“帖子”。这就是 Splunk 或 ELK stack 等系统的用处所在；如果您愿意，您可以将这些通知分流到某种文本聚合系统，以便以后进行分析或关联。这些通知对于构建跟踪统计数据(如应用程序部署或 JVM 重启)的度量仪表板非常有用。

既然我们已经定义了我们的警报级别以及我们将如何通知我们的工程师问题，我们需要弄清楚我们将如何准确地响应这些警报。

## *[Mon-if esto 第 1 部分:指标](/capital-one-developers/the-mon-ifesto-part-1-metrics-808f6c944765)

## * [周一至周五第三部分:警报响应和事后分析](/capital-one-developers/the-mon-ifesto-part-3-alert-response-and-post-mortem-cd227c684ac0)

***声明:以上观点仅代表作者个人观点。除非本帖中另有说明，否则 Capital One 不属于所提及的任何公司，也不被其认可。使用或展示的所有商标和其他知识产权都是其各自所有者的所有权。本文为 2018 首都一。***