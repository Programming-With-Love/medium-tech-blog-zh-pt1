<html>
<head>
<title>Gesture Navigation: immersive modes (IV)</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">手势导航:沉浸式模式(四)</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/gesture-navigation-immersive-modes-43f2d37a925d?source=collection_archive---------3-----------------------#2019-10-16">https://medium.com/androiddevelopers/gesture-navigation-immersive-modes-43f2d37a925d?source=collection_archive---------3-----------------------#2019-10-16</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/36988ac0698938a0e39ca9b2582a1d6e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HA3ZtpNRcwzxvVjSKtfEtQ.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Cover image by <a class="ae hu" rel="noopener" href="/@VPoltrack">Virginia Poltrack</a></figcaption></figure><div class=""/><p id="927b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这是我们手势导航系列的第四篇文章。如果你想跳到另一篇文章，你可以在下面找到它们:</p><div class="hg hh ez fb hi js"><a rel="noopener follow" target="_blank" href="/androiddevelopers/gesture-navigation-going-edge-to-edge-812f62e4e83e"><div class="jt ab dw"><div class="ju ab jv cl cj jw"><h2 class="bd hy fi z dy jx ea eb jy ed ef hw bi translated">手势导航:从边缘到边缘(一)</h2><div class="jz l"><h3 class="bd b fi z dy jx ea eb jy ed ef dx translated">Android Q增加了一个新的系统导航模式，允许用户导航回主屏幕…</h3></div><div class="ka l"><p class="bd b fp z dy jx ea eb jy ed ef dx translated">medium.com</p></div></div><div class="kb l"><div class="kc l kd ke kf kb kg ho js"/></div></div></a></div><div class="hg hh ez fb hi js"><a rel="noopener follow" target="_blank" href="/androiddevelopers/gesture-navigation-handling-visual-overlaps-4aed565c134c"><div class="jt ab dw"><div class="ju ab jv cl cj jw"><h2 class="bd hy fi z dy jx ea eb jy ed ef hw bi translated">手势导航:处理视觉重叠(二)</h2><div class="jz l"><h3 class="bd b fi z dy jx ea eb jy ed ef dx translated">这是我的手势导航系列的第二篇文章。如果你错过了，这是目前其他的:</h3></div><div class="ka l"><p class="bd b fp z dy jx ea eb jy ed ef dx translated">medium.com</p></div></div><div class="kb l"><div class="kc l kd ke kf kb kg ho js"/></div></div></a></div><div class="hg hh ez fb hi js"><a rel="noopener follow" target="_blank" href="/androiddevelopers/gesture-navigation-handling-gesture-conflicts-8ee9c2665c69"><div class="jt ab dw"><div class="ju ab jv cl cj jw"><h2 class="bd hy fi z dy jx ea eb jy ed ef hw bi translated">手势导航:处理手势冲突(三)</h2><div class="jz l"><h3 class="bd b fi z dy jx ea eb jy ed ef dx translated">这是我们博客系列的第三篇文章，我们讨论了如何在更新应用程序后处理视觉重叠…</h3></div><div class="ka l"><p class="bd b fp z dy jx ea eb jy ed ef dx translated">medium.com</p></div></div><div class="kb l"><div class="kc l kd ke kf kb kg ho js"/></div></div></a></div></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><p id="12d8" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在这第四篇文章中，我们将讨论如果你的应用程序需要在整个屏幕上绘制，隐藏系统栏，你能做什么。回头参考我们在<a class="ae hu" rel="noopener" href="/androiddevelopers/gesture-navigation-handling-gesture-conflicts-8ee9c2665c69">上一篇文章</a>中的流程图，我们将在图表的右侧介绍剩下的两个解决方案。</p><figure class="kp kq kr ks fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ko"><img src="../Images/21518aa1d425c3a946f56c60ea7e2bb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*4otWnenZkRZEVuvkEZPIOw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">You can find a printable PDF version of the complete flow chart <a class="ae hu" href="http://bit.ly/gesture-conflict-handling-print" rel="noopener ugc nofollow" target="_blank"><strong class="bd kt">here</strong></a>.</figcaption></figure><p id="27d6" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">这里的解决方案是使用Android平台提供的沉浸式模式。但是什么是沉浸式模式呢？</p><h1 id="6d4b" class="ku kv hx bd kt kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">什么是沉浸式模式？</h1><p id="b9bb" class="pw-post-body-paragraph iu iv hx iw b ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr ha bi translated">沉浸式模式是全屏显示内容的一种方式，隐藏系统栏，这样它们就不会碍事了。此外，它还可以防止意外手势/按压导致用户离开应用程序，这对游戏特别有用。</p><p id="979c" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">有两种沉浸式模式:</p><ol class=""><li id="8754" class="lw lx hx iw b ix iy jb jc jf ly jj lz jn ma jr mb mc md me bi translated"><a class="ae hu" href="https://developer.android.com/training/system-ui/immersive#immersive" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">非粘性</strong> </a> <strong class="iw hy"> </strong> <em class="mf">【普通】</em>沉浸式模式——用户可以通过在系统栏中滑动来退出沉浸式模式。</li><li id="e5d9" class="lw lx hx iw b ix mg jb mh jf mi jj mj jn mk jr mb mc md me bi translated"><a class="ae hu" href="https://developer.android.com/training/system-ui/immersive#sticky-immersive" rel="noopener ugc nofollow" target="_blank"> <strong class="iw hy">粘性</strong> </a>沉浸式模式——用户可以通过在系统栏中滑动<em class="mf">来暂时</em>退出沉浸式模式。短时间(几秒钟)后会自动重新进入沉浸式模式。</li></ol><p id="6eec" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">对于这两种模式，有两种状态:</p><ol class=""><li id="6d18" class="lw lx hx iw b ix iy jb jc jf ly jj lz jn ma jr mb mc md me bi translated"><strong class="iw hy">系统栏隐藏</strong> —在这种状态下，home和back手势被禁用。用户必须首先从边缘滑动以引入系统条。</li><li id="6fad" class="lw lx hx iw b ix mg jb mh jf mi jj mj jn mk jr mb mc md me bi translated"><strong class="iw hy">系统栏显示</strong> —在这种状态下，home和back手势正常工作。</li></ol><p id="0e60" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">现在我们已经了解了沉浸式模式的背景，让我们来详细了解一下这两种不同的模式。</p><h1 id="f6b8" class="ku kv hx bd kt kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">沉浸式模式:非粘性</h1><p id="ee10" class="pw-post-body-paragraph iu iv hx iw b ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr ha bi translated">正如你可能已经从流程图中看到的，非粘性沉浸式模式非常适合需要全屏的ui，但不需要在屏幕边缘附近进行精确的滑动手势。常见的例子包括全屏视频播放和照片浏览器。</p><p id="559e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">就手势导航而言，<em class="mf">非粘性</em>沉浸式模式的工作方式与它在之前版本的Android上的工作方式一致。当在Android 10+上运行时，应用程序可以使用我们在之前的<a class="ae hu" rel="noopener" href="/androiddevelopers/gesture-navigation-handling-gesture-conflicts-8ee9c2665c69">帖子</a>中提到的手势排除API。在这种模式下，无论系统条是否可见，每个边沿的<code class="du ml mm mn mo b">200dp</code>限制都相同。</p><p id="6714" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">如果你的应用程序目前正在使用沉浸式非粘性模式，我建议回头看看第三篇文章<a class="ae hu" rel="noopener" href="/androiddevelopers/gesture-navigation-handling-gesture-conflicts-8ee9c2665c69">，以防屏幕边缘附近的任何视图与系统手势冲突。</a></p><h1 id="95e1" class="ku kv hx bd kt kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">沉浸式模式:粘性</h1><p id="3d8f" class="pw-post-body-paragraph iu iv hx iw b ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr ha bi translated"><a class="ae hu" href="https://developer.android.com/training/system-ui/immersive#sticky-immersive" rel="noopener ugc nofollow" target="_blank">粘性沉浸式模式</a>专为强烈要求能够使用整个屏幕和相关触摸输入的用户界面而设计。使用这种模式的应用程序的常见例子是绘图应用程序和使用任何滑动手势的游戏。</p><p id="cc92" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们来看一个在Android 10上运行的带有手势导航的<a class="ae hu" href="https://github.com/dsandler/markers" rel="noopener ugc nofollow" target="_blank"> Markers </a>绘图应用的例子:</p><figure class="kp kq kr ks fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mp"><img src="../Images/02f9fb8f60eee5261fc63194ae6c0e16.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*knR7IrqWZ16CNpLyqmDM0w.gif"/></div></div></figure><p id="d990" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">正如你在上面看到的，一旦用户开始在屏幕边缘附近滑动(画),后退手势就会触发，这会打断用户。</p><p id="3b8e" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">由于使用粘性沉浸式模式的应用程序非常具有交互性，手势排除API限制被移除，但只有<em class="mf">而系统栏被</em> <strong class="iw hy"> <em class="mf">隐藏</em> </strong>。这意味着应用程序可以根据用例的需要排除任何数量的左/右边缘。</p><p id="7308" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">然而，当系统栏可见时，系统会忽略<strong class="iw hy">所有</strong>排除的手势区域，使用户能够在没有任何应用程序干扰的情况下返回。在粘性沉浸式模式下，系统栏仅在短时间内可见，因此这不会影响您的用例。</p><p id="98b9" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">屏幕底部的主手势区正常存在，是一个不可排除的“强制”手势区。处于粘性沉浸式模式的应用程序<em class="mf">可以</em>排除两个垂直边缘的整个长度，因此home手势区域可能是用户引入系统栏的唯一方式，从而退出应用程序。</p><p id="393d" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">让我们来看看我们的绘图应用程序的更新版本，它排除了整个垂直边缘:</p><figure class="kp kq kr ks fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mp"><img src="../Images/9a76a1ac98c8b3f837b0ffc7189624e8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*QCpC6p23o6eg-F0MgnJM5Q.gif"/></div></div></figure><p id="9595" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">您可以看到，用户现在可以在屏幕边缘自由绘制，而不会被后退手势打断。为了能够退出应用程序，用户可以从屏幕底部滑动，将系统栏带回来，使他们能够返回/回家。</p><p id="0e9b" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">在实现方面，这里使用的代码利用了我们在<a class="ae hu" rel="noopener" href="/androiddevelopers/gesture-navigation-handling-gesture-conflicts-8ee9c2665c69">第三篇文章</a>中的“<a class="ae hu" rel="noopener" href="/androiddevelopers/gesture-navigation-handling-gesture-conflicts-8ee9c2665c69#a8ad"> <em class="mf">使用手势排除API</em></a>”部分的相同思想，不同的是我们希望视图知道它是否处于沉浸式模式:</p><figure class="kp kq kr ks fd hj"><div class="bz dy l di"><div class="mq mr l"/></div></figure><p id="bf3a" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">用于更新Markers应用程序的完整代码如下所示👇：</p><div class="hg hh ez fb hi js"><a href="https://github.com/chrisbanes/markers/commit/5e7dcb5ec93dae0ac30ed42b6558da2e86af26bf" rel="noopener  ugc nofollow" target="_blank"><div class="jt ab dw"><div class="ju ab jv cl cj jw"><h2 class="bd hy fi z dy jx ea eb jy ed ef hw bi translated">在Android 10 chrisbanes/markers @ 5e 7 DC b5上使用手势排除API</h2><div class="ka l"><p class="bd b fp z dy jx ea eb jy ed ef dx translated">github.com</p></div></div></div></a></div><h1 id="e298" class="ku kv hx bd kt kw kx ky kz la lb lc ld le lf lg lh li lj lk ll lm ln lo lp lq bi translated">总结:非粘性与粘性</h1><p id="5ef5" class="pw-post-body-paragraph iu iv hx iw b ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr ha bi translated">唷，信息量真大🤯。作为总结，下面的表格比较了<em class="mf">非粘性</em>和<em class="mf">粘性</em>沉浸式模式之间的差异。</p><figure class="kp kq kr ks fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ms"><img src="../Images/76dea838811bf7fb8ba740eb8587cd21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7K55_lBht3gqSP8AzfERnA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Summary of the immersive modes</figcaption></figure></div><div class="ab cl kh ki go kj" role="separator"><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km kn"/><span class="kk bw bk kl km"/></div><div class="ha hb hc hd he"><h1 id="9a27" class="ku kv hx bd kt kw mt ky kz la mu lc ld le mv lg lh li mw lk ll lm mx lo lp lq bi translated">必须更深入</h1><p id="9efb" class="pw-post-body-paragraph iu iv hx iw b ix lr iz ja jb ls jd je jf lt jh ji jj lu jl jm jn lv jp jq jr ha bi translated">这篇文章总结了我们关于处理手势冲突的机制的报道。希望你现在有了一个更好的想法，如何更新你的应用程序来优雅地使用手势导航。</p><p id="bf28" class="pw-post-body-paragraph iu iv hx iw b ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr ha bi translated">本系列的第五篇也是最后一篇文章😌，将涵盖一些您可能在应用程序中使用的常见UI模式，以及您可以做些什么来支持手势导航。</p></div></div>    
</body>
</html>