<html>
<head>
<title>Data stream processing in Oracle Cloud — An introduction</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle云中的数据流处理——简介</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/data-stream-processing-in-oracle-cloud-an-introduction-59408bcb442?source=collection_archive---------0-----------------------#2022-12-13">https://medium.com/oracledevs/data-stream-processing-in-oracle-cloud-an-introduction-59408bcb442?source=collection_archive---------0-----------------------#2022-12-13</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/8e6dc5b3ca3317eed43c9ce2f89dc4b6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GrV833BeRlmSJQ-eofvlsw.jpeg"/></div></div></figure><p id="e11b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">随着公司希望近乎实时地处理和分析数据，并向用户提供相关的商业见解，数据流正日益流行。</p><p id="43d3" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">什么是数据流？这是从各种来源生成的连续数据流。可以使用各种流处理技术来存储、分析和处理数据。</p><p id="5362" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">数据流的一些常见使用案例包括:</p><ol class=""><li id="f11f" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">信息发送</li><li id="ab56" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">操作遥测</li><li id="3d84" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">网络点击流数据</li><li id="3efe" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm js jt ju jv bi translated">应用程序日志等。</li></ol><p id="ed3a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">上述用例可以使用Oracle Cloud中的各种服务来开发。</p><p id="de51" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi"> Oracle云基础设施(OCI)流服务</strong>为实时接收和使用大容量数据流提供全面管理、可扩展的持久解决方案，并符合企业级安全性。</p><p id="aa09" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">让我们以一个天气应用的开始来考察一个简单的流媒体用例。</p><p id="c47a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="kb">在OCI流媒体服务中摄取天气API数据。数据将存储在JSON数据库中，可以进一步用于分析用例。</em></p><p id="90f0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">实现步骤:</strong></p><ul class=""><li id="6e49" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm kc jt ju jv bi translated">调用由第三方源管理的天气API</li><li id="71a5" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">使用python SDK在OCI流服务中将消息发布为数据流</li><li id="730e" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">每当在流中发布数据时，使用OCI服务连接器来调用OCI函数。</li><li id="bc07" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">使用OCI函数转换数据</li><li id="4124" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">使用REST API将数据存储在自治的JSON数据库(AJD)中</li><li id="37c4" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">保护REST API</li><li id="577b" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">使用OCI保险库存储REST API的秘密</li></ul><p id="a728" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这里，AJD(自治JSON数据库)被用作数据存储。它有许多优点，例如:</p><ul class=""><li id="6a66" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm kc jt ju jv bi translated">它为开发人员提供了模式灵活性</li><li id="0194" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">它赋予开发人员关系数据库和文档数据库的优势</li></ul><p id="0aad" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">架构:</strong></p><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kd"><img src="../Images/7be8178a2973a90f0b3efeb304cee199.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GHB7vBu9-Y439TazgMTeqg.png"/></div></div></figure><p id="7042" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">组件:</strong></p><p id="04b7" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">为了实现这个用例，将在OCI租赁中部署以下OCI服务:</p><ul class=""><li id="4efc" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm kc jt ju jv bi translated">OCI车厢</li><li id="67d6" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">网络资源(VCN、子网、安全列表、路由表)</li><li id="8a4a" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">IAM策略，动态组</li><li id="fd2e" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">用于调用API、OCI函数设置和python SDK的OCI Linux VM</li><li id="677d" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">带私人通道的流池</li><li id="96d5" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">服务连接器</li><li id="34fc" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">OCI函数</li><li id="2444" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">OCI金库</li><li id="21bf" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">自治JSON数据库</li></ul><p id="a932" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">实施步骤:</strong></p><ol class=""><li id="1fdf" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm js jt ju jv bi translated">使用控制台/OCICLI/Python SDK创建流池</li></ol><figure class="ke kf kg kh fd ii er es paragraph-image"><div class="er es ki"><img src="../Images/ac18537c082078691a99904a83933982.png" data-original-src="https://miro.medium.com/v2/resize:fit:1248/format:webp/1*w3xPDgZpAqRJHsIdoH3JjA.png"/></div></figure><p id="c657" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">2.创建一个名为produce_weather_data.py的python脚本来调用天气API</p><figure class="ke kf kg kh fd ii"><div class="bz dy l di"><div class="kj kk l"/></div></figure><p id="659c" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">3.创建一个名为weatherstrm的新流，或者使用流池OCID获取现有流的详细信息。OCI python SDK可用于此目的(publish_weather_data_strm.py)。</p><figure class="ke kf kg kh fd ii"><div class="bz dy l di"><div class="kj kk l"/></div></figure><p id="8621" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">4.创建一个名为weatherstrmfunc的演示函数。</p><p id="1a5a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">注意:根据以下快速入门指南，需要事先完成必要的策略和设置。</p><p id="26f5" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><a class="ae kl" href="https://docs.oracle.com/en-us/iaas/Content/Functions/Tasks/functionsquickstartocicomputeinstance.htm" rel="noopener ugc nofollow" target="_blank">https://docs . Oracle . com/en-us/iaas/Content/Functions/Tasks/Functions quickstartocicouteininstance . htm</a></p><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es km"><img src="../Images/4536d65ab690c842016d953636892963.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*piUFbikq2hiHYRm5muzmZQ.png"/></div></div></figure><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kn"><img src="../Images/151842bd1abe3a87024422fa1a925d45.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fGYKs_5ZAOX2hCL_esvivg.png"/></div></div></figure><p id="a306" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">5.创建服务连接器</p><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ko"><img src="../Images/b1fe424585df2f7198ceac392fca83e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HSf9hUwXVgssI8hKywDOJw.png"/></div></div></figure><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kp"><img src="../Images/aeca5b96d183400ae3cfbf08e51c060e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*c3xQL2GRSjNFE5o1_LY5og.png"/></div></div></figure><p id="9dea" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">6.提供自治的JSON数据库</p><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es kq"><img src="../Images/80a367e6c2969004e262a33d662482c6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cjZiQj6-Q-5doHc_eJwivA.png"/></div></div></figure><p id="18e0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">7.创建一个演示用户，并启用rest服务</p><figure class="ke kf kg kh fd ii er es paragraph-image"><div class="er es kr"><img src="../Images/fc9c5f1ae4a771d48c1db7bb83b8cb8f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1224/format:webp/1*yyp8ZQYmCht8RPx7d50-rA.png"/></div></figure><p id="a926" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">8.创建一个名为weather_data的表来存储天气数据</p><pre class="ke kf kg kh fd ks kt ku kv aw kw bi"><span id="57bb" class="kx ky hh kt b fi kz la l lb lc">CREATE TABLE "DEMO"."WEATHER_DATA" <br/>   ( "location" CLOB constraint VALID_JSON_1 CHECK ("location" IS JSON ) , <br/> "current" CLOB constraint VALID_JSON_2 CHECK ("current" IS JSON )<br/>   ) ;</span></pre><p id="6ccc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">9.为weather_data表启用rest服务</p><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ld"><img src="../Images/8599e8e4e14d85f08734f73662f33940.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YMkhwFPv9nY3jZ1PQ_jF1A.png"/></div></div></figure><p id="816a" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">10.通过启用客户端身份验证令牌来保护rest API</p><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es le"><img src="../Images/585642e4278df86f7ad43f40d3195fa9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r7FoJ2NbHJKf6ojJMWSVHQ.png"/></div></div></figure><p id="be09" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">11.创建一个存储库来存储客户端身份验证令牌机密</p><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lf"><img src="../Images/b642d2cabc3194465bd19396d388f27a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZbJ7N4ifYRH_rTPPrjLUew.png"/></div></div></figure><figure class="ke kf kg kh fd ii er es paragraph-image"><div class="er es lg"><img src="../Images/69f66884712889efbf7d2c32dbb43785.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*mat7wb2vCnSu3c6O5QRjRg.png"/></div></figure><p id="7587" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">12.修改函数以执行以下任务:</p><ul class=""><li id="3614" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm kc jt ju jv bi translated">以适当的JSON格式处理消息</li><li id="47d0" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">破译信息</li><li id="2bd0" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">从OCI金库获取誓言客户端令牌</li><li id="9a07" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">通过调用带有承载令牌的REST API将数据插入自治json数据库</li></ul><p id="facd" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">功能详情:</p><p id="af63" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">a.函数. py</p><figure class="ke kf kg kh fd ii"><div class="bz dy l di"><div class="kj kk l"/></div></figure><p id="b920" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">b.func.yaml</p><figure class="ke kf kg kh fd ii"><div class="bz dy l di"><div class="kj kk l"/></div></figure><p id="4c69" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">c.requirements.txt</p><figure class="ke kf kg kh fd ii"><div class="bz dy l di"><div class="kj kk l"/></div></figure><p id="34a2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">13.在函数配置中添加client_id和client_secret ocid，以从OCI保险库中获取详细信息</p><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lh"><img src="../Images/0d513283077c7bff7a0bca26b721a5e3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*6EAyC4bh8T7i3mq2MBqR2g.png"/></div></div></figure></div><div class="ab cl li lj go lk" role="separator"><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln lo"/><span class="ll bw bk lm ln"/></div><div class="ha hb hc hd he"><p id="42f8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">是时候观察它的工作了！</p><ul class=""><li id="2e65" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm kc jt ju jv bi translated">以流的形式发布天气数据</li></ul><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lp"><img src="../Images/7f2ce2556b6110cc439646161e550d57.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J6HasNGj2bp4NtLCPiy3xA.png"/></div></div></figure><ul class=""><li id="938b" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm kc jt ju jv bi translated">检查溪流</li></ul><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lq"><img src="../Images/baa671dd7f29a1a64b17e7581cbe3087.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xZ_RIv3paCs5h71fUG0atA.png"/></div></div></figure><ul class=""><li id="b912" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm kc jt ju jv bi translated">服务连接器将自动调用该功能。</li><li id="305b" class="jn jo hh ir b is jw iw jx ja jy je jz ji ka jm kc jt ju jv bi translated">检查功能日志</li></ul><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lr"><img src="../Images/daad8569d0b55f7fc395ac7747534ab5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_NIvj0F6To2lYIqNorjT8A.png"/></div></div></figure><ul class=""><li id="dd8a" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm kc jt ju jv bi translated">检查AJD表中的数据。它应该以JSON格式插入</li></ul><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ls"><img src="../Images/21a1723487e60aefd402011ded8c8f6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LVYYAMcAAJStn-7G8DwPNQ.png"/></div></div></figure><ul class=""><li id="4673" class="jn jo hh ir b is it iw ix ja jp je jq ji jr jm kc jt ju jv bi translated">以用户友好的表格格式访问数据</li></ul><pre class="ke kf kg kh fd ks kt ku kv aw kw bi"><span id="8a61" class="kx ky hh kt b fi kz la l lb lc">select w."location".region,w."location".name,w."location".country, w."current".last_updated,w."current".temp_c,w."current".condition.text  FROM WEATHER_DATA w;</span></pre><figure class="ke kf kg kh fd ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es lt"><img src="../Images/c976f4a5362c9b8ce95eebe7fc4211cd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*-iig2_GwXoab3fZAv0Rsmw.png"/></div></div></figure><p id="b394" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">结论:</strong></p><p id="de6d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这只是OCI流和云原生服务如何帮助实时处理数据的一个简单用例。您可以将它用于本博客开头提到的其他几个用例，或者尝试其他用例。请进入我们的<a class="ae kl" href="https://bit.ly/odevrel_slack" rel="noopener ugc nofollow" target="_blank">开发者空闲时间</a>，让我们知道你在做什么，或者提出问题。当然，你也可以<a class="ae kl" href="https://signup.cloud.oracle.com/?language=en" rel="noopener ugc nofollow" target="_blank">在我们的免费等级</a>上试试这个。</p><p id="4a2f" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">快乐阅读！</p></div></div>    
</body>
</html>