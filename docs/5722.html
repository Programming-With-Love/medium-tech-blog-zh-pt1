<html>
<head>
<title>Oracle .NET Application Continuity — Getting Started</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">甲骨文。网络应用连续性—入门</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/oracle-net-application-continuity-getting-started-34e7045e863?source=collection_archive---------4-----------------------#2020-06-26">https://medium.com/oracledevs/oracle-net-application-continuity-getting-started-34e7045e863?source=collection_archive---------4-----------------------#2020-06-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div class="er es ie"><img src="../Images/9dff9dda3e515cb71301d1f70f903c95.png" data-original-src="https://miro.medium.com/v2/resize:fit:1282/format:webp/1*jGfAfVnqnjhGGFoD5cmABQ.jpeg"/></div><figcaption class="il im et er es in io bd b be z dx">Oracle Transparent Application Continuity</figcaption></figure><p id="c827" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我经常听到的一个请求是使用Oracle应用连续性(AC)的ODP.NET示例代码。它通常来自第一次尝试ODP.NET空调的顾客。我整理了一个运行中的<a class="ae jn" href="https://github.com/oracle/dotnet-db-samples/blob/master/samples/application-continuity/AppContinuity.cs" rel="noopener ugc nofollow" target="_blank">ODP.NET AC代码样本</a>，供任何人在概念验证评估中试用。示例代码可以针对单个实例数据库运行，以简化设置。comments部分包含成功测试AC out所需的所有客户端和数据库配置说明。</p><h1 id="808c" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">Oracle应用连续性简介</h1><p id="1507" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">当然，如果您不熟悉Oracle应用程序连续性，您会想知道它是什么。让我介绍一下这个特性，以及为什么这么多Oracle数据库用户和。NET开发人员想要采用它。</p><p id="04b2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">几年来，Oracle一直在谈论连续可用性，而不仅仅是高可用性。连续数据库可用性是指对最终用户隐藏计划内和计划外停机。虽然软件和硬件中断仍然会发生，但是系统具有弹性，最终用户不会遇到错误，不会丢失工作，并且可以继续使用数据库应用程序。最终用户不需要知道发生了软件更新、机器停机或数据库层负载不平衡等事件。</p><p id="0729" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在数据库方面，Oracle Real Application Clusters(RAC)和Oracle Data Guard长期以来一直致力于提供强大的数据库可用性解决方案。剩下的架构可用性挑战是确保当数据库层发生故障时，客户端应用程序仍然可用。可用性必须是端到端的，才能真正有效。同样重要的是，当应用程序或数据库业务逻辑发生变化时，维护可用性不应要求代码或配置发生变化。这就是交流电的用武之地。</p><p id="4866" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">AC使数据库请求能够在数据库会话中断时以无中断和快速的方式自动重放事务性或非事务性操作，从而导致可恢复的错误。AC通过屏蔽计划内和计划外停机错误来改善终端用户体验。开发应用程序时无需复杂的逻辑来处理异常，同时在出现可恢复的错误时自动重放数据库操作。</p><p id="8635" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">事实上，零应用程序代码更改是使用AC所必需的。默认情况下，非托管ODP.NET实际上通过连接字符串属性在客户端启用它:</p><p id="fc71" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du kr ks kt ku b">Application Continuity=true</code></p><p id="6684" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">只要为AC配置了数据库服务器，任何现有的非托管ODP.NET应用程序都可以启用AC。</p><p id="4c26" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">没有AC，几乎不可能以安全可靠的方式掩盖停机。数据库可能会丢失客户端尝试进行的状态更改。更糟糕的是，最终用户可能不知道事务是否已提交，因为提交消息不持久。</p><p id="a4e8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">Oracle RAC、Oracle RAC One Node、Oracle Active Data Guard以及专用和共享Oracle自治数据库都提供了AC。</p><p id="21d2" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">目前，只有非托管ODP.NET支持AC。托管ODP.NET和ODP.NET核心支持将在未来版本中推出。</p><h1 id="e989" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">测试ODP.NET应用程序的连续性</h1><p id="171c" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">如果你想亲自尝试ODP.NET AC，请使用我在本文开头链接的示例代码。该代码使用众所周知的Oracle HR示例模式。该应用程序在本地事务中无限循环递增一个员工的工资。</p><p id="a243" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当应用程序运行时，以管理员身份单独连接到数据库。间歇地执行以下命令(在添加数据库服务名之后):</p><p id="79d8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">执行DBMS _ service . disconnect _ session('您的服务名'，DBMS _ service . immediate)；</strong></p><p id="5e89" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该命令断开用户的会话，模拟可恢复的错误情况。启用AC后，最终用户不会看到任何错误消息，只有轻微的执行延迟。应用程序继续运行，不会明显中断最终用户的工作。AC向最终用户掩盖了断电，并完成了交易。</p><h1 id="3e6b" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">设置ODP.NET AC示例应用程序</h1><ol class=""><li id="b24b" class="kv kw hh ir b is km iw kn ja kx je ky ji kz jm la lb lc ld bi translated">将<a class="ae jn" href="https://github.com/oracle/dotnet-db-samples/blob/master/samples/application-continuity/AppContinuity.cs" rel="noopener ugc nofollow" target="_blank">非托管ODP.NET样本代码</a>下载到. NET框架控制台项目中。</li><li id="9167" class="kv kw hh ir b is le iw lf ja lg je lh ji li jm la lb lc ld bi translated">根据需要修改以下连接字符串属性、用户Id、密码和数据源。</li></ol><p id="ef0e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">确保使用支持AC的非托管ODP.NET 12.2或更高版本。我建议尽可能使用最高的ODP.NET版本，因为我们在不断提高交流能力和修复错误。</p><h1 id="1c24" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">设置数据库</h1><ol class=""><li id="5b9b" class="kv kw hh ir b is km iw kn ja kx je ky ji kz jm la lb lc ld bi translated">以数据库管理员身份连接以设置HR模式(如果还没有)。某些Oracle数据库服务器安装在以下目录中包含创建脚本:% Oracle _ HOME % \ demo \ schema \ human _ resources \ HR _ main . SQL</li><li id="95ae" class="kv kw hh ir b is le iw lf ja lg je lh ji li jm la lb lc ld bi translated">运行“将DBMS_APP_CONT上的执行权限授予HR；”以便ODP.NET可以在可恢复的错误之后确定进行中的事务状态。</li></ol><p id="5f95" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">AC最初是在Oracle Database 12c中引入的。我建议也使用可用的最高Oracle数据库版本。</p><h1 id="397a" class="jo jp hh bd jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl bi translated">结论</h1><p id="3922" class="pw-post-body-paragraph ip iq hh ir b is km iu iv iw kn iy iz ja ko jc jd je kp jg jh ji kq jk jl jm ha bi translated">就是这样！你现在可以运行应用程序并测试ODP.NET空调了。</p><p id="3b69" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如前所述，不需要修改应用程序代码。数据库设置指令很简单。您可以通过在数据库服务器上启用AC来为现有应用程序打开AC。</p></div></div>    
</body>
</html>