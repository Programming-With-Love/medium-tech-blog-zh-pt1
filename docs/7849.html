<html>
<head>
<title>Optimizing Experimentation Resources with Shared Control</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">利用共享控制优化实验资源</h1>
<blockquote>原文：<a href="https://medium.com/walmartglobaltech/optimizing-experimentation-resources-with-shared-control-6a2677e6e513?source=collection_archive---------1-----------------------#2020-01-27">https://medium.com/walmartglobaltech/optimizing-experimentation-resources-with-shared-control-6a2677e6e513?source=collection_archive---------1-----------------------#2020-01-27</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><h1 id="8c35" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">介绍</h1><p id="9587" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们在生活的不同部分看到了共享资源的好处。在我谈论共享控制之前，我想从一个类比开始。让我们举一个例子，说明沃尔玛“提货”服务是如何使用共享资源的。</p><p id="6399" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">沃尔玛提货:用户在Walmart.com网上订购，并选择商店提货。一辆卡车(共享资源)将多个用户在Walmart.com下的多个订单的物品从仓库运送到商店。用户在商店拿起他/她的物品。因此，卡车是一种共享资源，用于将多个用户的物品运送到商店。</p><p id="9439" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">在实验中，我们可以使用相同的共享资源的概念来提高流量的使用效率。共享控制顾名思义，是指在多个实验中共享一个控件作为共享资源。</p><p id="28ec" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">如果您是初次接触A/B测试，并且不熟悉控制等术语，请继续阅读下一部分。</p><h1 id="abaa" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">理解基础知识</h1><p id="36d7" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在我们深入讨论共享控制的原因、内容和方式之前，让我们了解一些基本概念。</p><h2 id="1544" class="kf if hh bd ig kg kh ki ik kj kk kl io jn km kn is jr ko kp iw jv kq kr ja ks bi translated">什么是控制？</h2><p id="a0e0" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">控件是指您的网站/应用程序的实时版本。控件是比较所有网站/应用程序测试结果的基础。</p><h2 id="a296" class="kf if hh bd ig kg kh ki ik kj kk kl io jn km kn is jr ko kp iw jv kq kr ja ks bi translated">什么是变异？</h2><p id="c7ed" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">该网站的替代体验被称为变体。</p><h2 id="eada" class="kf if hh bd ig kg kh ki ik kj kk kl io jn km kn is jr ko kp iw jv kq kr ja ks bi translated">什么是治疗？</h2><p id="7eff" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">为给您改变后的网站体验而做出的改变被称为治疗。</p><h2 id="c6d4" class="kf if hh bd ig kg kh ki ik kj kk kl io jn km kn is jr ko kp iw jv kq kr ja ks bi translated">什么是作业？</h2><p id="a03c" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">A/B测试的工作方式是，一些客户被分配到网站/应用的Live版本(<strong class="je hi"> Control </strong>),一些被分配到带有处理的版本(<strong class="je hi"> Variation </strong>)。</p><p id="a6c5" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">分配只是意味着某个客户被随机分配去看控制或变异治疗。</p><h2 id="4e7f" class="kf if hh bd ig kg kh ki ik kj kk kl io jn km kn is jr ko kp iw jv kq kr ja ks bi translated">什么是层？</h2><p id="0b42" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">Expo是我们在沃尔玛实验室开发和使用的A/B测试平台，它允许客户被分配到多个实验中。但我们想确保客户不会被分配到修改相同内容的实验中。这可能会破坏客户体验。为了避免这种冲突，博览会组织这些实验的方式是，修改相似内容的实验被分组在一起。因此，一个用户在每组中只分配到一个实验，这样他/她的体验就不会受到影响。这些组被称为图层。</p><p id="87f9" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">每个层都有固定的容量，因此根据每个实验占用的空间百分比，一个层中只能存在有限的一组实验。</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es kt"><img src="../Images/838d0df7cd3748fca004061d59a99a50.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hJjg9slMLQiCnoSZoIMpxA.png"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx">Figure 1: Layers with Experiments containing Variations</figcaption></figure><h1 id="c600" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">如何、为什么&amp;什么？</h1><p id="6fc9" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">让我们从中断的地方继续我们的共享控制故事。</p><h2 id="be5d" class="kf if hh bd ig kg kh ki ik kj kk kl io jn km kn is jr ko kp iw jv kq kr ja ks bi translated">这一切是如何开始的？</h2><p id="e092" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在采用沃尔玛的A/B Testing tool Expo初期，实验的数量开始逐日增加，我们开始面临一层空间不足以运行多个实验的问题。这个问题的直接解决办法是创建多个相同类型的层。但当时我们没有管理或创建这些层的UI，创建每一层的过程都是通过对Expo后端服务的api调用。请求开始流入越来越多的层。必须对这种情况采取一些措施。</p><h2 id="8221" class="kf if hh bd ig kg kh ki ik kj kk kl io jn km kn is jr ko kp iw jv kq kr ja ks bi translated">没有共享控制权的实验？</h2><p id="461e" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">假设一个用户创建了多个实验，所有这些实验都会影响主页。现在，Expo用户根据实验类型选择图层。因此，由于实验正在影响主页，因此Expo用户通常可能会为所有这些实验选择主页层。当Expo用户设置一个实验时，他/她通常会创建一个Control(默认体验)&amp;可能是该控件的一个或几个变体。所有这些加在一起，主页层最终会有多个控件和多个变体。</p><p id="5964" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">现在，当客户访问主页时，他们可以被分配到“控制”或主页层上实验的变体中的一个。看下面的例子，考虑一组客户可以被分配到实验1的控制或变体1。有些人可能会被分配到“控制”或“实验2的变体2”等等。这些控制和变化中的每一个都在层上占据一定百分比的空间。这是在共享控制之前将流量分配给层中的实验的唯一方法。</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es lj"><img src="../Images/bf6417d40a8ce18dfc17fe13c990d9e2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LZpbZa-BsnwTSVTU9k2qzg.png"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx">Figure 2: Assignment Before Shared Control</figcaption></figure><h2 id="9ebb" class="kf if hh bd ig kg kh ki ik kj kk kl io jn km kn is jr ko kp iw jv kq kr ja ks bi translated">我们为什么要共享控制权？</h2><p id="75db" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">在尝试为我们的每层容量不足问题找到解决方案时，我们意识到目前浪费了大量空间。</p><p id="ae4b" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">我们确定，被分配到实验1的控制1的一组客户与被分配到实验2的控制2的一组客户具有相同的体验。这就产生了冗余或未智能利用客户流量的问题。这意味着，对于同一层上的所有实验控件，Control体验完全相同，但每个控件仍然有自己的一组不同的客户流量。因此在层上占据更多空间。</p><h2 id="f3a9" class="kf if hh bd ig kg kh ki ik kj kk kl io jn km kn is jr ko kp iw jv kq kr ja ks bi translated">我们从共享控制中获得了什么？</h2><p id="0ba6" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">我们通过共享控制获得的最重要的东西是流量优化。层上的空间被分配给每个实验的控制的业务占用，所述业务彼此相似。此流量空间通过共享控制进行了优化。</p><p id="46e7" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">现在，下一个问题是我们如何优化每一层上的流量空间的使用？</p><p id="6dde" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">我们意识到，在同一层上运行的所有实验都可以共享相同的控制，并让相同的一组客户流量体验该控制。</p><p id="40e1" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">这意味着，我们可以用3个变量运行1个对照，而不是用3个对照和3个变量运行3个实验(假设每个实验只有一个变量)。</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es lj"><img src="../Images/c9dc13b836fb546323ae9130a694d85c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zfKFqOgsKHCStkoRvuoZsA.png"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx">Figure 3: Shared Control</figcaption></figure><p id="3b3a" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">为了更好地理解这一点，让我们以一些数字为例。下图显示了彼此相同的两个不同实验的对照，即实验1对照和实验2对照。其中每个都分配有40%的流量。这总计占该层流量的80%。</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es lk"><img src="../Images/3e32f776031cf31b6635641bb1795509.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hGjVT1nbRyPtYHiYyBl9RQ.png"/></div></div></figure><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es lk"><img src="../Images/ee331a66c51692e174279cfd495d9500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*50Z6gjUfEF6FEbYNiDQV5g.png"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx">Figure 4: Two Controls Combined Customer Traffic (80%)</figcaption></figure><p id="649e" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">而不是在两个实验中都有两个不同的对照。每个实验可以共享相同的控制，从而节省该层上占用的流量。因此，现在不是40 + 40 = 80%，我们只是共享了40%的流量。</p><figure class="ku kv kw kx fd ky er es paragraph-image"><div role="button" tabindex="0" class="kz la di lb bf lc"><div class="er es lk"><img src="../Images/c109968a33a030b9940ca5644fc88248.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*jG_OvuGpFTBr9JF6yT014Q.png"/></div></div><figcaption class="lf lg et er es lh li bd b be z dx">Figure 5: Shared Control (40% Traffic)</figcaption></figure><h2 id="c103" class="kf if hh bd ig kg kh ki ik kj kk kl io jn km kn is jr ko kp iw jv kq kr ja ks bi translated">世博共享控制</h2><p id="9a3b" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">如前所述，层是Expo完成的一组实验，以避免在执行A/B测试时可能破坏客户体验的任何冲突。</p><p id="b82b" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">共享控制通过更有效地利用可用的站点流量，允许更多的实验同时进行。它通过允许单个层中的多个实验使用共享的控制变量作为它们的控制变量来实现，而不是每个实验创建自己的控制变量&amp;每个实验都有自己的流量分配。关于共享控制变异，另一件要注意的事情是，由于它是一个控制，因此它没有治疗方法。它充当其层的“默认体验”。</p><p id="7af6" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">Expo中的共享控制是在层级别配置的。一定百分比的层流量可以被保留用于共享控制。每个实验都需要在配置时分配一个层。所有实验都是在Expo中的层上运行的。</p><h1 id="102b" class="ie if hh bd ig ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb bi translated">结论</h1><p id="4842" class="pw-post-body-paragraph jc jd hh je b jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ha bi translated">当我们开始使用Expo时，运行的实验数量并不多，因此最初，我们从未面临层容量耗尽的问题。但是，随着在一个图层上运行的实验数量随着工具的使用和新用户的增加而增加，图层容量的问题开始显现出来。因此，如果我们打算在同一层上运行更多的实验，而它没有能力，那么我们什么也做不了。唯一的方法是等待当前运行的实验结束，然后当空间空闲时，我们可以添加更多的实验来运行。</p><p id="595d" class="pw-post-body-paragraph jc jd hh je b jf ka jh ji jj kb jl jm jn kc jp jq jr kd jt ju jv ke jx jy jz ha bi translated">正如沃尔玛使用卡车作为共享资源，为多人从仓库到商店运送物品，以节省时间和金钱。我们使用相同的概念，通过共享控制和节省空间来帮助在单个层上同时运行更多的实验。总的来说，共享控制是优化层空间的主要因素，也允许更多的实验同时进行。</p></div></div>    
</body>
</html>