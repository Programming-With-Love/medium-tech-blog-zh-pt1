<html>
<head>
<title>Oracle Analytics Cloud Migration — OCI Automated Deployment Process</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Oracle分析云迁移— OCI自动化部署流程</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/oracle-analytics-cloud-migration-oci-automated-deployment-process-3b949b8b5673?source=collection_archive---------4-----------------------#2021-02-03">https://medium.com/oracledevs/oracle-analytics-cloud-migration-oci-automated-deployment-process-3b949b8b5673?source=collection_archive---------4-----------------------#2021-02-03</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="01a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">目前没有任何自动化工具用于OAC部署，这意味着为了设置两个OAC实例，在两个实例上都需要手动步骤。例如，如果我们需要在两个OAC实例上设置远程数据网关，那么需要为每个实例执行以下手动任务。</p><ol class=""><li id="abba" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">为OAC提供所有要求的尺寸和形状参数。</li><li id="bd76" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">从Oracle OAC网站下载远程数据网关(RDG)安装程序</li><li id="9af9" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">RDG Linux计算机的FTP RDG设置。</li><li id="31b4" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">在RDG Linux计算机上安装显示器或创建响应文件来安装远程数据网关</li><li id="c319" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">执行RDG设置并安装远程数据网关。</li></ol><p id="8251" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是，有一个解决方案可以自动执行这些步骤，并使用基于Terraform的自动部署流程在OCI的OAC和RDG部署，这将在OCI部署多个OAC-RDG环境，而无需执行上述手动步骤，并且您可以使用此工具在将来创建和删除更多OAC环境。这不仅可以通过部署Terraform脚本来处理手动步骤，还可以根据需要一致地部署额外的OAC实例。</p><p id="7458" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">自动部署脚本将执行以下任务</p><ol class=""><li id="67ec" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">OCI网络资源为多个环境设置，目前此部署过程可以配置两个OAC环境，无需任何调整，让我们使用非生产和生产作为整个博客的环境名称。</li><li id="82d0" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">部署流程可以根据执行过程中提供的输入，使用单个VCN或专用VCN创建两个环境。</li><li id="0030" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">将使用给定的配置预配Oracle数据库。</li><li id="4cba" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">将使用提供的配置来预配OAC实例。</li><li id="1972" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">预安装的远程数据网关计算实例将从自定义映像进行配置。</li><li id="3054" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">将设置堡垒主机来访问私有子网资源，例如DBCS、RDG计算。</li><li id="419c" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">将配置所有路由规则和安全列表，以便环境可以用于迁移。</li></ol><p id="0c37" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jq">支持OAC架构</em> </strong></p><p id="f04f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个部署过程可以创建单个VCN架构或多个VCN架构。</p><p id="eb2f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">单一VCN建筑</p><p id="4957" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jq">用例</em> —客户希望在同一个VCN下设置所有环境，例如非生产环境和生产环境，因此希望在OCI和他的数据中心之间设置一个VPN。</p><p id="f305" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jq">特性</em></p><ol class=""><li id="f7d5" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">生产和非生产这两个部分在逻辑上将非生产和生产环境分开。</li><li id="9c56" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">网络组件将在网络隔离专区中提供。</li><li id="c6aa" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">两种环境使用一个VCN(因此需要一个VPN)。</li><li id="42a1" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">通用网关，例如适用于两种环境的互联网网关、服务网关和Nat网关。</li><li id="7a43" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">针对非生产和生产环境的两组公共和私有子网。</li><li id="0469" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">DBCS和RDG计算机将安装在专用子网中。</li><li id="a5a5" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">将在公共子网中设置一台堡垒主机来访问这两种环境。</li><li id="6cc7" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">OAC将配备公共端点。</li></ol><p id="fab4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">多重VCN架构</p><p id="eaa6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jq">使用案例</em> —客户希望在两个不同的虚拟专用网络下设置所有环境，例如非生产环境和生产环境，因此希望在OCI和他的数据中心之间为非生产环境和生产环境提供单独的VPN。</p><p id="6a99" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jq">特色</em></p><ol class=""><li id="0f51" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">生产和非生产这两个部分在逻辑上将非生产和生产环境分开。</li><li id="68fb" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">网络组件将在网络隔离专区中提供。</li><li id="92ab" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">两种环境使用不同的虚拟专用网(因此需要单独的虚拟专用网)。</li><li id="6df3" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">用于两种环境的独立网关，例如互联网网关、服务网关和Nat网关。</li><li id="3b38" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">一组公共和私有子网，用于非生产VCN中的非生产环境。</li><li id="5c19" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">生产VCN中生产环境的一组公共和私有子网。</li><li id="ba58" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">DBCS和RDG计算机将安装在专用子网中。</li><li id="32e7" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">对于每个环境，将在各自的公共子网中设置两台独立的堡垒主机。</li><li id="c7db" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">OAC将配备公共端点。</li></ol><p id="df65" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jq">单个VCN建筑VS多个VCN建筑</em></p><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es jr"><img src="../Images/1e4980046895182cb5ed5d04adceeb19.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OiMyN2FPk6pfo3x3E6Njhg.png"/></div></div></figure><figure class="js jt ju jv fd jw er es paragraph-image"><div role="button" tabindex="0" class="jx jy di jz bf ka"><div class="er es kd"><img src="../Images/31b81f6c0c45588b01450d3a3536f1d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*s-HqZ7lG4ATnmVQcmF20TA.png"/></div></div></figure><p id="8149" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jq">部署流程构件</em> </strong></p><ul class=""><li id="d17e" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb ke ji jj jk bi translated">Variable.tf — Terraform变量文件包含所有变量定义。</li><li id="2758" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb ke ji jj jk bi translated">Config.tf — Terraform配置文件包含所有变量值，变量分为不同的类别，例如VCN、子网、DBCS等。并且不言自明。</li><li id="f42b" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb ke ji jj jk bi translated">Non product main . TF—用于非生产环境的Terraform资源文件，该文件将设置所有网络资源(包括VCN)并供应所有PaaS组件(数据库、OAC、RDG、堡垒)。</li><li id="e3f4" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb ke ji jj jk bi translated">ProdMain.tf — Terraform资源文件生产环境，将设置所有网络资源并供应所有PaaS组件(数据库、OAC、RDG、堡垒)。它可以根据用户在配置文件中提供的输入设置新的VCN或现有的非生产VCN。</li></ul><p id="3ff2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jq">如何使用此部署流程</em> </strong></p><p id="b262" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">先决条件Terraform应安装在您计划执行此流程的计算机上。</p><p id="f37c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">部署非生产环境</p><ol class=""><li id="a993" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">在您的机器上创建一个安装Terraform的目录。</li><li id="c1ac" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">复制目录中的Variable.tf、Config.tf和NonProdMain.tf文件，如果不想在同一次运行中部署生产环境，请不要复制ProdMain.tf。</li><li id="61a5" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">在Config.tf中为提供程序、VCN、子网和传递组件提供所有值，您可以将以下这些参数设置为Null，这是生产环境所必需的。</li></ol><blockquote class="kf kg kh"><p id="f0b1" class="ie if jq ig b ih ii ij ik il im in io ki iq ir is kj iu iv iw kk iy iz ja jb ha bi translated">vcn_prod_cidr= " "</p><p id="2ff7" class="ie if jq ig b ih ii ij ik il im in io ki iq ir is kj iu iv iw kk iy iz ja jb ha bi translated">subnet_prod_pub_cidr= " "</p><p id="2a4a" class="ie if jq ig b ih ii ij ik il im in io ki iq ir is kj iu iv iw kk iy iz ja jb ha bi translated">subnet_prod_pvt_cidr= " "</p></blockquote><p id="33a0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.将Resource_suffix_dev设置为“dev”、“Test”，因为这将用于所有资源名称，例如Dev_Public_Subnet。</p><p id="7cc8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.执行“terraform plan -var-file='config。</p><p id="c620" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">6.执行" terra form apply-var-file = ' config . TF vars ' "</p><p id="2929" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">输出:将为非生产环境部署所有网络资源VCN、互联网网关、服务网关、Nat网关、子网、路由表、安全列表和所有PaaS组件DBCS、OAC、RDG主机和Bastion主机。</p><p id="5d75" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">部署生产环境</p><ol class=""><li id="a237" class="jc jd hh ig b ih ii il im ip je it jf ix jg jb jh ji jj jk bi translated">将ProdMain.tf复制到为非生产环境创建的同一目录中。</li><li id="ba63" class="jc jd hh ig b ih jl il jm ip jn it jo ix jp jb jh ji jj jk bi translated">按照以下说明设置Config.tf中的值。</li></ol><p id="7f5e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">a.例如，如果您想为生产环境创建单独的VCN，请设置VCN生产CIDR和VCN生产DNS的值</p><p id="65f7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">vcn_prod_cidr= "192.168.5.0/24 "</p><p id="f649" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">subnet _ prod _ pub _ CIDR = " 192 . 168 . 5 . 0/25 "</p><p id="bdd8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">子网_生产_pvt_cidr= "192.168.5.128/25 "</p><p id="79bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">vcn_prod_dns_prefix="abcprod "</p><p id="231c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">b.如果要使用为非生产环境创建的相同VCN，请将VCN生产CIDR和VCN生产DNS的值设置为空白(在这种情况下，生产环境的新子网将在相同的VCN下创建)</p><p id="7bfa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">vcn_prod_cidr= " "</p><p id="1ddc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">vcn_prod_dns_prefix= " "</p><p id="a7b2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">c.为生产Paas组件设置这些参数的值。</p><p id="90ab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">#DBCS</p><p id="2e1e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">数据库_形状_生产= "虚拟机。标准2.2英寸</p><p id="8a6e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">数据库存储产品= "1024 "</p><p id="78b9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">#OAC</p><p id="7c77" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">oac_capacity_value_prod= 2</p><p id="bbd8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">#RDG</p><p id="b155" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">rdg_compute_shape_prod = "VM。标准2.2英寸</p><p id="6c61" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.执行“terraform plan -var-file='config。</p><p id="b263" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.执行" terra form apply-var-file = ' config . TF vars ' "</p><p id="3096" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">输出:将为生产环境部署所有网络资源VCN、互联网网关、服务网关、Nat网关(如果选择单独的VCN)、子网、路由表、安全列表和所有PaaS组件DBCS、OAC、RDG主机和Bastion主机。</p><p id="263e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jq">部署脚本</em> </strong></p><p id="3673" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以从这个GitHub存储库中下载部署过程工件。</p><p id="f03b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">【https://github.com/amittyagi27/MYBLOGS.git T4】</p><p id="66bf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jq">远程数据网关自定义图像</em> </strong></p><p id="33fc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">" ocid 1 . image . oc1 . IAD . aaaaaaaaaxmiypt 6 gkxvgxc 52 c 7 pbv 3 at 2 yyco j2o QL 42 ucwk 2d 4 ozuxzkqsq "</p><p id="c2d3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> <em class="jq"> OAC远程数据网关文档</em> </strong></p><p id="2e91" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有关OAC远程数据网关的更多详细信息，您可以通过以下链接查看Oracle文档。</p><p id="13d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae kl" href="https://docs.oracle.com/en/cloud/paas/analytics-cloud/acsds/connect-premise-data-sources.html#GUID-7D4A2A9F-1E6A-4F93-81D3-00A272398D5C" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi"><em class="jq">https://docs . Oracle . com/en/cloud/PAAs/analytics-cloud/acsds/connect-premise-data-sources . html # GUID-7d 4a 2 a9 f-1E6A-4f 93-81d 3-00a 272398 d5c</em></strong></a></p></div></div>    
</body>
</html>