<html>
<head>
<title>Exploring Android P: Magnifier</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">探索Android P:放大镜</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/exploring-android-p-magnifier-ddfd06bdecbe?source=collection_archive---------2-----------------------#2018-07-06">https://medium.com/google-developer-experts/exploring-android-p-magnifier-ddfd06bdecbe?source=collection_archive---------2-----------------------#2018-07-06</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><figure class="ev ex if ig ih ii er es paragraph-image"><div role="button" tabindex="0" class="ij ik di il bf im"><div class="er es ie"><img src="../Images/cb11eb7791f72272805a03971cd8075b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ymzfi4IVBtTQW5E33gw67w.png"/></div></div></figure><p id="110b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在Google I/O上，围绕最新版本的Android p发布了许多新公告。其中一项公告是新的<a class="ae jn" href="https://developer.android.com/reference/android/widget/Magnifier.html#show(float,%20float)" rel="noopener ugc nofollow" target="_blank">放大镜</a>功能，该功能将使查看和选择放大镜当前显示的内容变得更加容易。在本文中，我们将快速了解这个放大镜是什么，以及如何在我们的应用程序中的视图组件上使用它。</p></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><p id="b52b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，如果你还没有看到Android P中新的<a class="ae jn" href="https://developer.android.com/reference/android/widget/Magnifier.html#show(float,%20float)" rel="noopener ugc nofollow" target="_blank">放大镜</a>组件，那么这是它目前的样子:</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div class="er es jv"><img src="../Images/43436922e6e2d93c6bf00753b250f69d.png" data-original-src="https://miro.medium.com/v2/resize:fit:552/1*4-MqsKZqIG08UPKCYutx8A.gif"/></div></figure><p id="505d" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这是一个非常简单的触摸，但它对其预期功能的影响将是巨大的。在Android上选择特定的文本从来都不是最简单的事情——你的手指盖住文本，你就能清楚地看到你选择的是什么，我们都经历过这种情况！这个新工具不仅使这变得更容易，而且当涉及到可访问性时，这个特性也使文本相关的任务变得更简单。我甚至可以看到用户在阅读内容时利用这个工具来关注文本。</p><p id="b2fc" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在最棒的事情是<a class="ae jn" href="https://developer.android.com/reference/android/widget/Magnifier" rel="noopener ugc nofollow" target="_blank">放大镜</a>自动适用于所有扩展TextView组件的视图——所以在大多数情况下，我们不需要在我们的应用程序中做任何改变，因为用户将能够直接从框中放大文本内容。问题是，在某些情况下，我们希望允许内容的放大，但这可能不会扩展TextView类。幸运的是，框架为我们提供了这样的能力。</p><p id="feb0" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当我们想要创建一个<a class="ae jn" href="https://developer.android.com/reference/android/widget/Magnifier.html#show(float,%20float)" rel="noopener ugc nofollow" target="_blank">放大镜</a>实例时，我们只需调用类构造函数，将引用传递给我们提供放大的视图:</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="343e" class="kf kg hh kb b fi kh ki l kj kk">val magnifier = Magnifier(someView)</span></pre><p id="0f6e" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这一点上，我们的放大镜被附加到视图上，但是实际上并没有对它做什么，所以我们需要添加一些逻辑来在屏幕上显示它。为此，我们将在视图上设置一个触摸监听器:</p><pre class="jw jx jy jz fd ka kb kc kd aw ke bi"><span id="57b6" class="kf kg hh kb b fi kh ki l kj kk">someView.setOnTouchListener {<strong class="kb hi"> </strong>view, motionEvent <strong class="kb hi">-&gt;<br/>    </strong>when (motionEvent.<em class="kl">action</em>) {<br/>        MotionEvent.<em class="kl">ACTION_DOWN </em>-&gt; {<br/>            magnifier.show(motionEvent.<em class="kl">x</em>, motionEvent.<em class="kl">y</em>)<br/>        }<br/>        MotionEvent.<em class="kl">ACTION_MOVE </em>-&gt; {<br/>            magnifier.show(motionEvent.<em class="kl">x</em>, motionEvent.<em class="kl">y</em>)<br/>        }<br/>        MotionEvent.<em class="kl">ACTION_UP </em>-&gt; {<br/>            magnifier.dismiss()<br/>        }<br/>    }<br/>    true<br/>}</span></pre><p id="3678" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，当检测到<strong class="ir hi">按下</strong>事件时，我们要调用放大镜<a class="ae jn" href="https://developer.android.com/reference/android/widget/Magnifier.html#show(float,%20float)" rel="noopener ugc nofollow" target="_blank"> show() </a> t函数—该函数用于在屏幕上向用户显示放大镜。这个函数调用有两个参数:</p><ul class=""><li id="82a1" class="km kn hh ir b is it iw ix ja ko je kp ji kq jm kr ks kt ku bi translated"><strong class="ir hi"> xPosInView </strong> —用于放大镜中心点的水平坐标</li><li id="8e0f" class="km kn hh ir b is kv iw kw ja kx je ky ji kz jm kr ks kt ku bi translated"><strong class="ir hi"> yPosInView </strong> —放大镜中心点的纵坐标</li></ul><p id="770b" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">当我们调用这个函数时，放大镜将使用给定的坐标来显示放大镜实例中给定位置的视图内容。你会注意到，每次检测到<strong class="ir hi"> ACTION_MOVE </strong>事件时，我们也会再次调用这个函数<em class="kl"> — </em>这是因为当用户在屏幕上移动手指时，我们希望用触摸位置的最新坐标来更新放大镜。</p><p id="8560" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><strong class="ir hi">注意:</strong>放大镜也有一个<a class="ae jn" href="https://developer.android.com/reference/android/widget/Magnifier.html#update()" rel="noopener ugc nofollow" target="_blank"> update() </a>函数，它强制放大镜更新其内容。但是，这不需要任何参数，只使用最初传递给show()函数的坐标。</p><p id="cff8" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后，当我们检测到<strong class="ir hi"> ACTION_UP </strong>事件时，我们只需调用放大镜解散()函数，这样放大镜就从窗口中移除了。</p><p id="c060" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">但是我们为什么要这么做呢？嗯，我们可能是在绘制文本，而不是在文本视图中显示它。在这种情况下，系统不会为我们提供开箱即用的放大镜。因此，在这些情况下，您会希望提供一个放大镜，以便用户仍然可以利用它给我们带来的优势:</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div class="er es la"><img src="../Images/edfc2a0582c31accdb5004b3c15a222b.png" data-original-src="https://miro.medium.com/v2/resize:fit:680/1*36jOqTctS61wPRNfQBl2bw.gif"/></div></figure><p id="3248" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">老实说，您可能已经创建了一些其他视图，您认为放大镜会对这些视图有用。就像前面一样，当使用放大镜构造函数时，将实例传递到视图中，放大镜将被附加到视图中。</p><figure class="jw jx jy jz fd ii er es paragraph-image"><div class="er es lb"><img src="../Images/2df8d4bf53de697a6d85e7471e85b4e0.png" data-original-src="https://miro.medium.com/v2/resize:fit:684/1*p47H2RMYf8g2ap98z-V3kw.gif"/></div></figure></div><div class="ab cl jo jp go jq" role="separator"><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt ju"/><span class="jr bw bk js jt"/></div><div class="ha hb hc hd he"><p id="1037" class="pw-post-body-paragraph ip iq hh ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我希望这篇短文分享了一些关于Android P中新放大镜类的有用信息。你对这个新类有什么想法？您将如何在您的应用程序中使用它？请保持联系，分享你对此的想法和评论！</p><div class="lc ld ez fb le lf"><a href="https://twitter.com/hitherejoe" rel="noopener  ugc nofollow" target="_blank"><div class="lg ab dw"><div class="lh ab li cl cj lj"><h2 class="bd hi fi z dy lk ea eb ll ed ef hg bi translated">乔·伯奇(@hitherejoe) |推特</h2><div class="lm l"><h3 class="bd b fi z dy lk ea eb ll ed ef dx translated">乔伯奇的最新推文(@hitherejoe)。Android Lead &amp;高级工程师@Buffer。谷歌开发专家…</h3></div><div class="ln l"><p class="bd b fp z dy lk ea eb ll ed ef dx translated">twitter.com</p></div></div><div class="lo l"><div class="lp l lq lr ls lo lt in lf"/></div></div></a></div></div></div>    
</body>
</html>