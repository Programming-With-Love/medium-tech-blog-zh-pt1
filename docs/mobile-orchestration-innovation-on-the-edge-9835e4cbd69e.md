# 移动编排——边缘创新

> 原文：<https://medium.com/capital-one-tech/mobile-orchestration-innovation-on-the-edge-9835e4cbd69e?source=collection_archive---------1----------------------->

![](img/4b4910e07cfbe41ffbbece746e0affaf.png)

作为与用户互动的主要渠道，移动应用的增长极大地改变了开发人员构建和交付软件的方式。拥有数百万用户的活跃移动用户群，提供一流的移动用户体验是 Capital One 的绝对期望。是的，我们是美国顶级金融机构之一，但我们的在线业务意味着我们也像顶级数字和技术公司一样运作。

事实上，这促使我们不断创新用户在移动设备上与我们互动的方式。这种改变用户体验的驱动力也驱动着我们如何对待移动开发。由于 App Store 审查流程、版本差异和硬件差异，按照快速、持续的交付模式交付功能和更新变得越来越具有挑战性。为了抵消这种变化，越来越多的业务逻辑转移到服务器端代码，以重新获得对交付体验的控制。

> *移动编排提供服务来扩展我们现有 API 的功能，为我们的移动用户提供特定的新功能，并协助我们的工程团队提供整体功能。*

通过提供优化的、以用户体验为中心的 API，我们能够为客户将正确的数据与最佳的用户界面结合起来。这使我们的客户能够以新的方式消费他们的财务数据，让他们更深入地了解他们如何花费或节省他们辛苦赚来的钱。

作为开发人员，移动编排允许我们在我们的 API 中快速创建新的“数据”体验，以便我们能够帮助向我们的客户交付新的“用户”体验。通过快速获得他们的反馈，我们可以在工程师和客户之间建立一个活跃的反馈回路，带来更新更好的“用户”体验。这也减少了我们原生应用中的额外工作和代码量，将该逻辑移动到服务器，以便我们可以在其他应用中重复使用它，并停止为每个新产品重新发明轮子。

> Capital One 的移动编排团队通过构建三大支柱——*移动边缘、体验 API 和移动平台服务，将我们的原生应用扩展到我们的服务器。*

我们的方法在实现新服务的方式上创造了高度的一致性；考虑最佳实践，以确保我们在实施标准的同时，也在实施有意义的标准。

我们支柱的优势来自网飞 OSS 中心的几个项目。 [Zuul](https://github.com/Netflix/zuul/wiki) (是的，来自电影《捉鬼敢死队》)， [Hystrix](https://github.com/Netflix/Hystrix/wiki/How-it-Works) ， [Ribbon](https://github.com/Netflix/ribbon) 和 [Eureka](https://github.com/Netflix/eureka) ，都是我们利用开源项目来帮助定义和执行我们在移动编排中的标准的例子。

**移动边缘**

这就是移动编排的“前门”概念所在。在这里，我们为本地客户端应用程序提供了使用网飞 Zuul OSS 项目通过 HTTPS 访问数据的入口点。在“边缘”，我们提供特定于每个客户端和应用的路由和过滤器。每个生产应用程序都有自己的移动边缘，这使得在发布客户端特定更改时具有最佳的灵活性，同时消除了对其他应用程序的潜在影响。

例如，使用移动编排，我们可以为 iPhone 的 Capital One 移动应用程序发布新的服务器端更改，并确保它不会影响其他客户端。我们还可以定制每个移动应用和它自己的“前门”之间的交互

提供这些定制“边缘”可以确保快速实施和部署关键修复或定制流程，否则需要等待应用商店提交或后端依赖关系部署。

## **微体验和体验 API**

移动编排的另一个重要组成部分在于为客户端应用消费提供定制 API 的能力。这些 API 并不反映资源或数据模型，而是与应用程序创建的用户体验流直接相关。因此，命名为 Experience API，或 xAPI。

为了优化我们如何构建和发布这些 xAPIs，我们创造了一个 ***微体验*** 的概念。微体验本质上是将多个相关的 xAPIs 组合成一个可部署的单元。您可以将微体验想象成类似“兑换奖励”的东西，每个 xAPIs 都是构成奖励体验的流程的一个方面(获得奖励余额、兑换后、获得符合条件的交易等)。

虽然微服务现在非常流行，但微**体验**是一个经过调整的解决方案，它允许我们更好地定义由移动编排构建的服务。它描述了一个解耦的和以用户体验为中心的架构(而不是以任务和 T21 为中心的微服务)。

## **移动平台服务**

拼图的最后一块是我们作为平台的一部分构建的特定于移动设备的 API。应用认证、强制升级、功能切换、功能节流都是我们作为平台标准功能提供的 API 示例。这些是对我们使用的所有移动产品都有价值的功能的常见实现。

实现这一设计的一个重要部分是我们与 Capital One DevOps 团队 Mobius 的合作。如果不努力构建支持持续部署概念的自动化、通知/监控和基础设施设计，我们早发货、常发货的愿望就不会实现。

## **移动编排——可重用、敏捷、可维护**

移动编排只是我们本地应用在服务器上的延伸。我们提供了逻辑的可重用性、敏捷性和可维护性，否则这些会在昂贵的重新实现中被浪费掉；或者由于外部依赖性而遭受延迟。我们力求敏捷、快速，以一致认可的标准和公开对话取代流程和正式审查。

[![](img/c6c5bb1f3967049ba012aebf5757e08d.png)](https://medium.com/capital-one-tech/api/home)