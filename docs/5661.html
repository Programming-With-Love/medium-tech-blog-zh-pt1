<html>
<head>
<title>DevOps Series: Automate Of Oracle 19c RAC Container Database Using Ansible[GITHUB] — Part III</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">DevOps系列:使用Ansible[GITHUB]自动化Oracle 19c RAC容器数据库—第三部分</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/devops-series-automate-of-oracle-19c-rac-container-database-using-ansible-github-part-iii-279a7dfd0d13?source=collection_archive---------0-----------------------#2019-10-02">https://medium.com/oracledevs/devops-series-automate-of-oracle-19c-rac-container-database-using-ansible-github-part-iii-279a7dfd0d13?source=collection_archive---------0-----------------------#2019-10-02</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><div class=""><h2 id="cdde" class="pw-subtitle-paragraph ie hg hh bd b if ig ih ii ij ik il im in io ip iq ir is it iu iv dx translated">作者:<a class="iw ix ge" href="https://medium.com/u/ba3f0a72ff81?source=post_page-----279a7dfd0d13--------------------------------" rel="noopener" target="_blank">纳西姆·巴沙</a>(甲骨文王牌总监，OCM)<a class="iw ix ge" href="https://medium.com/u/3757393c69bd?source=post_page-----279a7dfd0d13--------------------------------" rel="noopener" target="_blank">莫诺瓦·穆库尔</a> (OCM)</h2></div><p id="3f27" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">【https://github.com/asiandevs/GI_19cSoftInstall】GITHUB链接:<a class="ae ju" href="https://github.com/asiandevs/GI_19cSoftInstall/tree/master/ansible/roles/racdb19c_create" rel="noopener ugc nofollow" target="_blank"/></p><pre class="jv jw jx jy fd jz ka kb kc aw kd bi"><span id="2cf0" class="ke kf hh ka b fi kg kh l ki kj">Added - Oracle 21c - Github Repository and Video</span></pre><div class="kk kl ez fb km kn"><a href="https://github.com/asiandevs/oracle21c/tree/main/roles/racdb21c_create" rel="noopener  ugc nofollow" target="_blank"><div class="ko ab dw"><div class="kp ab kq cl cj kr"><h2 class="bd hi fi z dy ks ea eb kt ed ef hg bi translated">Oracle 21 c/roles/racdb 21 c _ create at main Asian devs/Oracle 21 c</h2><div class="ku l"><h3 class="bd b fi z dy ks ea eb kt ed ef dx translated">本行动手册适用于Oracle网格基础架构安装、Oracle RAC安装和创建RAC数据库…</h3></div><div class="kv l"><p class="bd b fp z dy ks ea eb kt ed ef dx translated">github.com</p></div></div><div class="kw l"><div class="kx l ky kz la kw lb lc kn"/></div></div></a></div><figure class="jv jw jx jy fd ld"><div class="bz dy l di"><div class="le lf l"/></div></figure><h1 id="2395" class="lg kf hh bd lh li lj lk ll lm ln lo lp in lq io lr iq ls ir lt it lu iu lv lw bi translated"><strong class="ak">简介</strong></h1><p id="9eea" class="pw-post-body-paragraph iy iz hh ja b jb lx ii jd je ly il jg jh lz jj jk jl ma jn jo jp mb jr js jt ha bi translated">我们已经介绍了Oracle 19c RAC/GI软件的安装，然后介绍了用于RAC的Oracle 19c RDBMS软件。现在，在本文中，我们将看到如何为RAC创建带有可插拔数据库的容器数据库。</p><p id="c41e" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">RAC数据库是节点之间的主动-主动配置。RAC数据库的主要优势是数据库的高可用性和极高的性能。借助Ansible automation，我们可以减少人为错误，并且可以在多个集群上并行执行。</p><p id="df92" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">假设我们已经完成了</p><ol class=""><li id="20cd" class="mc md hh ja b jb jc je jf jh me jl mf jp mg jt mh mi mj mk bi translated"><a class="ae ju" rel="noopener" href="/@monowar.mukul/devops-series-automate-oracle-19c-grid-infrastructure-installations-with-ansible-bc491bdd34ce">在两个节点上安装了Oracle Grid Infrastructure 19c软件</a></li><li id="b24e" class="mc md hh ja b jb ml je mm jh mn jl mo jp mp jt mh mi mj mk bi translated"><a class="ae ju" rel="noopener" href="/@monowar.mukul/devops-series-automate-oracle-19c-rac-database-software-installations-with-ansible-e018ebfe09d5">为两个节点的RAC安装了Oracle RDBMS19c软件。</a></li></ol><p id="e296" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">控制服务器的清单文件包含我们正在执行部署的目标的主机名。</p><blockquote class="mq mr ms"><p id="4092" class="iy iz mt ja b jb jc ii jd je jf il jg mu ji jj jk mv jm jn jo mw jq jr js jt ha bi translated">[root@oel75 ansible]#卡特彼勒库存<br/>【ora-x1】<br/>192 . 168 . 56 . 102</p><p id="232b" class="iy iz mt ja b jb jc ii jd je jf il jg mu ji jj jk mv jm jn jo mw jq jr js jt ha bi translated">192.168.56.103</p><p id="6ff4" class="iy iz mt ja b jb jc ii jd je jf il jg mu ji jj jk mv jm jn jo mw jq jr js jt ha bi translated">[oel75] <br/> 192</p><p id="6090" class="iy iz mt ja b jb jc ii jd je jf il jg mu ji jj jk mv jm jn jo mw jq jr js jt ha bi translated">192.168.56.102</p></blockquote><p id="7986" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">让我们准备好下面的主剧本-</p><blockquote class="mq mr ms"><p id="1134" class="iy iz mt ja b jb jc ii jd je jf il jg mu ji jj jk mv jm jn jo mw jq jr js jt ha bi translated">[root @ oel 75 ansi ble]# cat Oracle ginrac 19 Cr 3 . yml<br/>-主机:ora-x1，ora-x2 <br/>用户:root</p><p id="ecde" class="iy iz mt ja b jb jc ii jd je jf il jg mu ji jj jk mv jm jn jo mw jq jr js jt ha bi translated">角色:<br/>#-racgi 19 c _ install<br/>#-racdbsoft 19 c _ install<br/>#-racdb 12 c _ create<br/>-racdb 19 c _ create</p></blockquote><p id="b0da" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">此行动手册的活动角色是“racdb19c_create”，如果有任何其他角色，您可以将其注释掉。让我们来看看这个角色的树形结构</p><figure class="jv jw jx jy fd ld er es paragraph-image"><div class="er es mx"><img src="../Images/3b354fdfb9c8b763d6fd7510be03ac87.png" data-original-src="https://miro.medium.com/v2/resize:fit:1304/1*KkMp2ygiwfPymQ64t-zcuQ.gif"/></div><figcaption class="mz na et er es nb nc bd b be z dx">Figure: tree structure role</figcaption></figure><p id="db9f" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">主要剧本任务如下。</p><figure class="jv jw jx jy fd ld er es paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="er es nd"><img src="../Images/61dab74d8a70ecffed3c78072e9cde9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EAxRIbHHzZ2O4ynimUCvuA.png"/></div></div><figcaption class="mz na et er es nb nc bd b be z dx">Figure: main playbook entry</figcaption></figure><p id="c6c9" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">在预检查部分，我们将确保所有先决条件都通过，然后将通过ansible使用DBCA静默方法创建RAC容器数据库，最后我们将验证数据库创建。</p><p id="59ac" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">请注意，在此步骤中，我们还将创建一个RECO磁盘组，用于恢复区。</p><p id="313e" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">在我们的案例中，响应文件根据我们的测试设置修改了参数值。</p><blockquote class="mq mr ms"><p id="ce30" class="iy iz mt ja b jb jc ii jd je jf il jg mu ji jj jk mv jm jn jo mw jq jr js jt ha bi translated">[root @ oel 75 racdb 19 c _ create]# cat templates/db RAC 19 c _ RSP . J2<br/>response file version =/Oracle/assistants/rspfmt _ dbca _ response _ schema _ v 19 . 0 . 0<br/>gdb name = eaymd<br/>sid = eaymd<br/>databaseConfigType = RAC<br/>policy managed = false<br/>createServerPool = false<br/>createscontainerdatabase = TRUE<br/>number of pdbs = 1<br/>PD</p></blockquote><p id="8e29" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">以下是本练习中使用的变量。</p><blockquote class="mq mr ms"><p id="771d" class="iy iz mt ja b jb jc ii jd je jf il jg mu ji jj jk mv jm jn jo mw jq jr js jt ha bi translated">[root@oel75 ansible]# cat roles/racdb 19 c _ create/vars/main . yml<br/>Oracle _ user:" Oracle "<br/>root _ user:" root "<br/>Oracle _ install _ group:" oinstall "<br/>stage _ dir:"/u02/stage "<br/>Oracle _ base:"/u02/app/Oracle "<br/>Oracle _ inventory:"/u02/app/ora inventory "<br/>Oracle _ home:" { { Oracle _ base } }/product/19 . 3 . 0/db <br/>oratab:/etc/oratab<br/>spfile:spfile<br/>recodiskgroup:RECO<br/>recodisks 1:ASM _ disk 07<br/>recodisks 2:ASM _ disk 08<br/>vredundancy:EXTERNAL<br/>vausize:1<br/>v compatibility:19 . 0 . 0 . 0<br/>env _ db:<br/>ORACLE _ HOME:“{ { ORACLE _ HOME</p></blockquote><p id="cf9b" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">剧本输出是—</p><figure class="jv jw jx jy fd ld er es paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="er es ni"><img src="../Images/a4210fb98cdaf72276f3cfe960a9f933.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JRNAczNvuPpOzPRWrNLVgA.png"/></div></div><figcaption class="mz na et er es nb nc bd b be z dx">Figure: pre check before create databse</figcaption></figure><figure class="jv jw jx jy fd ld er es paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="er es nj"><img src="../Images/9f527061e5b55e35e8cbaecfc7f2034d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RAQFOBPVxqaN-NEB9l-ZXA.png"/></div></div><figcaption class="mz na et er es nb nc bd b be z dx">Figure: create database output</figcaption></figure><figure class="jv jw jx jy fd ld er es paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="er es nk"><img src="../Images/97ff486f351ebd4b4b89da6319824412.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WeVux8TI3UWbWd2gwzY3Ow.png"/></div></div><figcaption class="mz na et er es nb nc bd b be z dx">Figure: Create database output</figcaption></figure><figure class="jv jw jx jy fd ld er es paragraph-image"><div role="button" tabindex="0" class="ne nf di ng bf nh"><div class="er es nl"><img src="../Images/18f151bbd3ec80c44fbb746c30a00baf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*qoq8Uo8-A3r2p0-RwTp-7w.gif"/></div></div><figcaption class="mz na et er es nb nc bd b be z dx">Figure: output — post db create</figcaption></figure><h2 id="594d" class="ke kf hh bd lh nm nn no ll np nq nr lp jh ns nt lr jl nu nv lt jp nw nx lv ny bi translated">RAC数据库的验证</h2><p id="35e1" class="pw-post-body-paragraph iy iz hh ja b jb lx ii jd je ly il jg jh lz jj jk jl ma jn jo jp mb jr js jt ha bi translated"><strong class="ja hi">检查RAC集群中PDB的当前实例状态</strong></p><p id="d440" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">SQL &gt;显示pdb</p><p id="fb36" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">CON_ID CON_NAME打开模式受限<br/>————————<br/>2 PDB＄SEED只读NO <br/> 3 PINKPDB挂载</p><h2 id="1e86" class="ke kf hh bd lh nm nn no ll np nq nr lp jh ns nt lr jl nu nv lt jp nw nx lv ny bi translated">在RAC集群中启动创建的可插拔数据库</h2><p id="0a46" class="pw-post-body-paragraph iy iz hh ja b jb lx ii jd je ly il jg jh lz jj jk jl ma jn jo jp mb jr js jt ha bi translated">SQL &gt; alter pluggable database pink pdb open instances = all；</p><p id="7660" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">可插拔数据库已更改。</p><p id="698a" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">SQL&gt; select INST_ID，孔_ID，DBID，名称，开放_模式，受限于gv$pdbs其中NAME = ' PINKPDB</p><p id="88d8" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">INST_ID CON_ID DBID姓名OPEN _ MODE RES<br/>——————————<br/>1 3 1005581498 PINKPDB读写号<br/> 2 3 1005581498 PINKPDB读写号</p><h1 id="d9c4" class="lg kf hh bd lh li lj lk ll lm ln lo lp in lq io lr iq ls ir lt it lu iu lv lw bi translated">摘要</h1><p id="5de7" class="pw-post-body-paragraph iy iz hh ja b jb lx ii jd je ly il jg jh lz jj jk jl ma jn jo jp mb jr js jt ha bi translated">我们已经使用Ansible完成了Oracle 19cR3 RAC集群容器数据库的创建。与每次运行几个步骤相比，Ansible通过一次执行使重复任务变得更加容易。这个剧本的源代码对于我们的测试设置来说是非常具体的。我们已经上传并在<a class="ae ju" href="https://github.com/asiandevs/GI_19cSoftInstall" rel="noopener ugc nofollow" target="_blank"> Github </a>中可用，现在是你玩它的时候了。请确保相应地修改变量，并在应用QA或PROD系统之前测试开发环境。</p><p id="13b8" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">享受自动化:)</p><h1 id="48d1" class="lg kf hh bd lh li lj lk ll lm ln lo lp in lq io lr iq ls ir lt it lu iu lv lw bi translated">作者简历</h1><p id="7c7f" class="pw-post-body-paragraph iy iz hh ja b jb lx ii jd je ly il jg jh lz jj jk jl ma jn jo jp mb jr js jt ha bi translated">Monowar Mukul 目前担任首席Oracle数据库专家。我是Oracle认证大师(Oracle 12c认证大师管理、Oracle 12c认证大师MAA和Oracle 11g认证大师管理)。他在Oracle MAA空间担任了17年的Oracle数据库管理员顾问，负责数据库云服务器和非数据库云服务器系统、Oracle云空间和SOA中间件。他曾在澳大利亚的多个商业领域工作，包括高等教育、能源、政府、采矿和运输。作为一名首席Oracle数据库专家，他展示了高度发展的批判性思维和分析技能。你可以在<a class="ae ju" href="https://www.linkedin.com/in/monowarmukul/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/monowarmukul/</a>找到更多关于他和他的工作成就的细节</p><p id="3b79" class="pw-post-body-paragraph iy iz hh ja b jb jc ii jd je jf il jg jh ji jj jk jl jm jn jo jp jq jr js jt ha bi translated">Nassyam Basha是一名数据库管理员。他有大约十年的Oracle数据库管理员工作经验，目前是eprosed KSA公司的数据库专家。他拥有马德拉斯大学的计算机应用硕士学位。他是Oracle 11g认证大师和Oracle ACE总监。他以超级英雄的身份积极参与甲骨文相关论坛，如OTN，甲骨文支持被授予“大师”称号，并担任OTN版主，与OTN一起撰写了大量关于Toad World的文章。他维护着一个与甲骨文技术相关的博客，<a class="ae ju" href="http://www.oracle-ckpt.com/" rel="noopener ugc nofollow" target="_blank">www.oracle-ckpt.com</a>，可以通过<a class="ae ju" href="https://www.linkedin.com/in/nassyambasha/" rel="noopener ugc nofollow" target="_blank">https://www.linkedin.com/in/nassyambasha/</a>找到他</p></div></div>    
</body>
</html>