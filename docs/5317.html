<html>
<head>
<title>Single Statement Table Partitioning: 12 Things Developers Will Love About Oracle Database 12c Release 2 Part 9</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">单语句表分区:开发人员会喜欢的Oracle Database 12c第2版第9部分的12件事</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/single-statement-table-partitioning-12-things-developers-will-love-about-oracle-database-12c-7200f5df30bf?source=collection_archive---------1-----------------------#2017-10-04">https://medium.com/oracledevs/single-statement-table-partitioning-12-things-developers-will-love-about-oracle-database-12c-7200f5df30bf?source=collection_archive---------1-----------------------#2017-10-04</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="8aba" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是一个经常出现在<a class="ae jc" href="https://asktom.oracle.com/pls/apex/f?p=100:1:0" rel="noopener ugc nofollow" target="_blank">问汤姆</a>的问题:</p><p id="c2d5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">"如何将非分区表转换为分区表？"</p><p id="705e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在12.2之前，这是一个复杂的过程。您必须创建一个表的分区副本并传输数据。</p><p id="b3b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以使用DBMS_redefinition在线完成这项工作。但这是一个令人头痛的问题，很容易出错。</p><p id="4712" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在Oracle Database 12c第2版中，这很容易。您所需要的只是一个alter table命令:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="e49f" class="jm jn hh ji b fi jo jp l jq jr">create table t ( x int, y int, z int ); </span><span id="291a" class="jm jn hh ji b fi js jp l jq jr">alter table t modify <br/>  partition by range (x) interval (100) (   <br/>    partition p1 values less than (100) <br/>  ) online;</span></pre><p id="7867" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你完了！</p><p id="9809" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">"但是所有的索引呢？"我听到你哭泣。嗯，你也可以转换它们！</p><p id="34a3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">只需添加一个“更新索引”子句，并声明在转换后希望它们是本地的还是全局的:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="0b12" class="jm jn hh ji b fi jo jp l jq jr">create index iy on t (y); <br/>create index iz on t (z); </span><span id="696c" class="jm jn hh ji b fi js jp l jq jr">alter table t modify <br/>  partition by range (x) interval (100) (<br/>    partition p1 values less than (100) <br/>  ) update indexes ( <br/>    iy local, iz global <br/>  );</span></pre><p id="c92f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你真的愿意，你可以给你的全局索引不同的分区方案。</p><p id="b8b9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">虽然可以从非分区表更改为分区表，但是不能再返回。你也不能改变分区方案，例如从列表到范围。尝试这样做，你会得到:</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="3b29" class="jm jn hh ji b fi jo jp l jq jr">ORA-14427: table does not support modification to a partitioned state DDL</span></pre><p id="8477" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是如果你想让<em class="jt">变得真正</em>奇特，你也可以直接从一个普通的桌子到一个有子分区的桌子！</p><pre class="jd je jf jg fd jh ji jj jk aw jl bi"><span id="5c4a" class="jm jn hh ji b fi jo jp l jq jr">alter table t modify <br/>  partition by range (x) interval (100) subpartition by hash (y)   <br/>  subpartitions 4 ( <br/>    partition p1 values less than (100) <br/>  ) online;</span></pre></div><div class="ab cl ju jv go jw" role="separator"><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz ka"/><span class="jx bw bk jy jz"/></div><div class="ha hb hc hd he"><p id="b506" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">【blogs.oracle.com】全文原载于2016年11月10日<a class="ae jc" href="https://blogs.oracle.com/sql/12-things-developers-will-love-about-oracle-database-12c-release-2" rel="noopener ugc nofollow" target="_blank"><em class="jt"/></a><em class="jt">。</em></p></div></div>    
</body>
</html>