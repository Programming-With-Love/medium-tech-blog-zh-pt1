<html>
<head>
<title>Using ARKit To Display Video In Augmented Reality</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">使用ARKit在增强现实中显示视频</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/using-arkit-to-display-video-in-augmented-reality-3a2e4c1418ad?source=collection_archive---------0-----------------------#2019-03-26">https://medium.com/quick-code/using-arkit-to-display-video-in-augmented-reality-3a2e4c1418ad?source=collection_archive---------0-----------------------#2019-03-26</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/2dcc168e08799b1378b9c6f4244b0046.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vGwOkINBVWoTzB3cyMqVVg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Image taken from <a class="ae hu" href="https://unsplash.com/photos/87oz2SoV9Ug" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><div class=""/><h1 id="ad2b" class="iu iv hx bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">我们将要做什么</h1><p id="f340" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">作为一个成长中的孩子，我对《哈利波特》系列中的动画<strong class="ju hy"> <em class="kq">【预言家日报】</em> </strong>非常着迷。如果你以前看过，新闻文章会出现'<strong class="ju hy"> <em class="kq">'直播</em> </strong>'就像你在下面看到的一样。</p><figure class="kr ks kt ku fd hj"><div class="bz dy l di"><div class="kv kw l"/></div></figure><p id="1792" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">在本教程中，我们将使用ARKit重新创建它。我们将首先检测天狼星布莱克的图像，然后在图像上叠加一个要播放的视频。我们开始吧！</p><h1 id="3416" class="iu iv hx bd iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr bi translated">辅导的</h1><p id="6f4a" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">在我们开始学习本教程之前，让我们收集一下完成本教程所需的所有材料。</p><h2 id="3fbc" class="lc iv hx bd iw ld le lf ja lg lh li je kd lj lk ji kh ll lm jm kl ln lo jq lp bi translated">收集资源</h2><figure class="kr ks kt ku fd hj er es paragraph-image"><div class="er es lq"><img src="../Images/5f430fe319b961d468691160a4bc69b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:998/format:webp/1*0FXw_4bIdK0CNIMHC0wpYQ.jpeg"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">I will be using this particular photo</figcaption></figure><p id="1f22" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">首先，我所做的是浏览Pinterest 来检索这张特定的照片。接下来，我裁剪了<strong class="ju hy"> <em class="kq">图像</em> </strong>，我们将检测并覆盖实际视频。</p><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lr"><img src="../Images/d92c2ff5872552253a05f67fb16c1d0b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*X1byskHLHiQDUT6KRWztOw.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Cropped image</figcaption></figure><p id="a767" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">最后，我们将在这张检测到的图像上播放一段视频。</p><figure class="kr ks kt ku fd hj"><div class="bz dy l di"><div class="ls kw l"/></div><figcaption class="hq hr et er es hs ht bd b be z dx">I will be using this particular video.</figcaption></figure><h2 id="9109" class="lc iv hx bd iw ld le lf ja lg lh li je kd lj lk ji kh ll lm jm kl ln lo jq lp bi translated">创建新项目</h2><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lt"><img src="../Images/5f7e6ada49502e34a80cd9f212647242.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*sqwNHT_NhJk1oH4XPt0hxA.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Create a new AR Project</figcaption></figure><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lt"><img src="../Images/a36b159cb2fad90fd8364ebe5cc8c26d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BWY7ht4FK4yNCPTN3H3dbg.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Language: Swift, Content Tech: SceneKit</figcaption></figure><p id="ea6c" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">现在您已经创建了一个项目，让我们在Assets文件夹中创建一个新的AR资源组，<code class="du lu lv lw lx b">Assets.xcassets</code></p><figure class="kr ks kt ku fd hj er es paragraph-image"><div class="er es ly"><img src="../Images/396c08de726baa1499dd7941562a21b3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1272/format:webp/1*IoQpEZBwqdzSOlWgY4qcPQ.png"/></div></figure><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lz"><img src="../Images/9e28f96b416049338c569e3461caa13a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*05MI_ZH09ikGrj2NOzcmIA.png"/></div></div></figure><p id="7bef" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">添加我们的裁剪图像(我的名为<code class="du lu lv lw lx b">black</code>)并给它一个尺寸。尺寸是我们<strong class="ju hy"> <em class="kq">实际</em> </strong> <em class="kq"> </em>在我们打印的照片上裁剪出的图像尺寸。根据我的测量，我打印的照片大约是14x15cm厘米。一旦我们键入0.14米的宽度，Xcode会自动生成高度。</p><p id="b064" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">接下来，拖放我们将用来播放检测到的图像的视频文件。</p><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ma"><img src="../Images/2a072f1be54dee431d9381386d502611.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*vGpYRX32hYh4rDsERzCz-w.png"/></div></div><figcaption class="hq hr et er es hs ht bd b be z dx">Video file black.mp4 added</figcaption></figure><p id="d276" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">确保当我们添加视频时，我们将它添加到我们的项目目标。</p><figure class="kr ks kt ku fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es mb"><img src="../Images/9c3c22a69ebb3ab74bfcbb5931c6069d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bnVteXMNuSSR0N0kDb8aqQ.png"/></div></div></figure><h2 id="62c3" class="lc iv hx bd iw ld le lf ja lg lh li je kd lj lk ji kh ll lm jm kl ln lo jq lp bi translated">添加代码</h2><figure class="kr ks kt ku fd hj"><div class="bz dy l di"><div class="mc kw l"/></div></figure><p id="03e8" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">删除<code class="du lu lv lw lx b">ViewController.swift</code>中的所有代码，替换成上面的代码。我们在这里所做的是设置AR配置来跟踪图像，并设置我们的应用程序应该跟踪哪些图像。</p><p id="08d2" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">接下来，我们将使用一个委托方法在检测到的图像上添加我们的视频。delegate方法通知我们它将要添加一个节点到场景中。这个节点将是空的，我们可以相应地定制。</p><p id="d343" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">但是在我们输入新代码之前，逻辑流程是这样的:</p><ol class=""><li id="60b9" class="md me hx ju b jv kx jz ky kd mf kh mg kl mh kp mi mj mk ml bi translated">首先检测我们的应用程序何时在锚中添加了一个新节点</li><li id="07f1" class="md me hx ju b jv mm jz mn kd mo kh mp kl mq kp mi mj mk ml bi translated">检查我们的锚是否匹配<code class="du lu lv lw lx b">ARImageAnchor</code>，如果匹配，则意味着我们的图像被检测到</li><li id="f1eb" class="md me hx ju b jv mm jz mn kd mo kh mp kl mq kp mi mj mk ml bi translated">创建一个包含视频文件的视频节点，并将其添加到视频场景中。调整所有必要的位置</li><li id="f617" class="md me hx ju b jv mm jz mn kd mo kh mp kl mq kp mi mj mk ml bi translated">创建一个与我们检测到的图像具有相同方向和大小的新平面</li><li id="63ee" class="md me hx ju b jv mm jz mn kd mo kh mp kl mq kp mi mj mk ml bi translated">将我们的视频节点添加到平面</li><li id="8c82" class="md me hx ju b jv mm jz mn kd mo kh mp kl mq kp mi mj mk ml bi translated">创建包含该平面的新节点</li><li id="b23d" class="md me hx ju b jv mm jz mn kd mo kh mp kl mq kp mi mj mk ml bi translated">将这个新节点添加为子节点</li></ol><figure class="kr ks kt ku fd hj"><div class="bz dy l di"><div class="mc kw l"/></div></figure><p id="db23" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">这就是我们最终会得到的结果。让我们运行应用程序，看看结果！</p><figure class="kr ks kt ku fd hj"><div class="bz dy l di"><div class="mr kw l"/></div></figure><p id="5455" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">不错！我们的AR应用程序工作正常！然而，有一个小问题。原始的<code class="du lu lv lw lx b">Daily Prophet</code>新闻，有循环效果，所以让我们在图像上循环我们的视频。<strong class="ju hy"> ARKit </strong>让你开发出世界上最大的AR平台。所以，从<a class="ae hu" href="https://blog.coursesity.com/best-arkit-tutorials/" rel="noopener ugc nofollow" target="_blank">最佳ARKit教程</a>中学习ARKit是有益的。</p><h2 id="0c26" class="lc iv hx bd iw ld le lf ja lg lh li je kd lj lk ji kh ll lm jm kl ln lo jq lp bi translated">循环播放视频</h2><figure class="kr ks kt ku fd hj"><div class="bz dy l di"><div class="mc kw l"/></div></figure><p id="c5cf" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">编辑我们的代码，如上所示。我们改变的是:</p><ol class=""><li id="d6cd" class="md me hx ju b jv kx jz ky kd mf kh mg kl mh kp mi mj mk ml bi translated">我们使用<code class="du lu lv lw lx b">AVPlayer</code>来播放物品</li><li id="3da6" class="md me hx ju b jv mm jz mn kd mo kh mp kl mq kp mi mj mk ml bi translated">使用<code class="du lu lv lw lx b">AVPlayer</code>初始化我们的<code class="du lu lv lw lx b">video node</code></li><li id="e45c" class="md me hx ju b jv mm jz mn kd mo kh mp kl mq kp mi mj mk ml bi translated">添加一个观察者，以便当玩家完成当前项目时，重置视频并再次播放</li></ol><p id="ae4e" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">继续运行应用程序吧！最终的结果应该与我们设定的目标非常相似！</p><figure class="kr ks kt ku fd hj"><div class="bz dy l di"><div class="mr kw l"/></div></figure></div><div class="ab cl ms mt go mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ha hb hc hd he"><h1 id="e85c" class="iu iv hx bd iw ix mz iz ja jb na jd je jf nb jh ji jj nc jl jm jn nd jp jq jr bi translated">结论</h1><p id="54c4" class="pw-post-body-paragraph js jt hx ju b jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp ha bi translated">在本教程中，您已经看到了开始使用<strong class="ju hy"><em class="kq">ARKit</em></strong><em class="kq"/>是多么容易，它确实使开始使用AR成为一个有趣的过程！使用<strong class="ju hy"> <em class="kq"> ARKit </em> </strong>还可以做更多的事情，例如在跟踪的图像上添加3D模型/网络视图，或者在检测到的平面/特征点上添加新的对象/模型等。但是现在，我们只用几行代码就完成了一些非常酷的事情！</p><p id="a4b8" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">像往常一样，可以在下面的my repo中找到这个项目的源代码:</p><div class="hg hh ez fb hi ne"><a href="https://github.com/Bilguun132/Harry-Pokker" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hy fi z dy nj ea eb nk ed ef hw bi translated">比尔古恩132/哈利-波克</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">AR工具包教程，帮助您开始使用图像检测和视频叠加</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">github.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns ho ne"/></div></div></a></div></div><div class="ab cl ms mt go mu" role="separator"><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx my"/><span class="mv bw bk mw mx"/></div><div class="ha hb hc hd he"><p id="8b33" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">如果有人觉得这些有用，请随意分享或者让我知道是否有错误/不好的实践/实现。</p><p id="cb5b" class="pw-post-body-paragraph js jt hx ju b jv kx jx jy jz ky kb kc kd kz kf kg kh la kj kk kl lb kn ko kp ha bi translated">祝编码愉快！</p></div></div>    
</body>
</html>