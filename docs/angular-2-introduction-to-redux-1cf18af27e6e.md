# angularâ€”Redux ç®€ä»‹

> åŸæ–‡ï¼š<https://medium.com/google-developer-experts/angular-2-introduction-to-redux-1cf18af27e6e?source=collection_archive---------0----------------------->

å¦‚ä½•åœ¨è§’åº¦åº”ç”¨ä¸­ä½¿ç”¨ Redux

![](img/f650f859933440d9ac111de54748c98f.png)

FluidScapes by Reza Ali

Redux ï¼Œç°åœ¨æ˜¯ç¬¬ä¸‰ç‰ˆï¼Œé—®ä¸–ä¸åˆ°ä¸€å¹´ï¼Œä½†äº‹å®è¯æ˜å®ƒéå¸¸æˆåŠŸã€‚å— [Flux](https://facebook.github.io/flux/) å’Œ [Elm](http://elm-lang.org) çš„å¯å‘ï¼Œç”¨äºå¤„ç†åº”ç”¨ç¨‹åºçŠ¶æ€ï¼Œå¹¶ä»¥ä¸€ç§éå¸¸æœ‰æ•ˆçš„æ–¹å¼å°†å…¶ç»‘å®šåˆ°ç”¨æˆ·ç•Œé¢ã€‚Redux è¿˜å¯ä»¥è½»æ¾å®ç°åƒ*çƒ­é‡è£…æˆ–æ—¶é—´æ—…è¡Œ*è¿™æ ·çš„é…·åŠŸèƒ½*ã€‚Redux é€šå¸¸ä¸ React ä¸€èµ·ä½¿ç”¨ï¼Œä½†ä¹Ÿå¯ä»¥å•ç‹¬ä½¿ç”¨ã€‚*

> Redux å»ºç«‹åœ¨é€šé‡æ¦‚å¿µä¹‹ä¸Šï¼Œå°½ç®¡ä»¥å‰çš„ç»éªŒä¸æ˜¯å¼ºåˆ¶æ€§çš„ã€‚

åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä¸€ä¸ªä» React ç§»æ¤æ¥çš„**å¾…åŠäº‹é¡¹åˆ—è¡¨ç¤ºä¾‹**ï¼Œå®ƒæ¥è‡ªäº [Dan Abramov](https://medium.com/u/a3a8af6addc1?source=post_page-----1cf18af27e6e--------------------------------) æœ€è¿‘çš„ Redux è§†é¢‘è¯¾ç¨‹ã€‚ä½¿ç”¨ä»¥ä¸‹é“¾æ¥ç ´è§£æœ€ç»ˆè§£å†³æ–¹æ¡ˆ:

[æ¼”ç¤º](https://embed.plnkr.co/6UJUYh7nbyU3TMS2Xd6l/) | [æ¥æº](https://plnkr.co/edit/6UJUYh7nbyU3TMS2Xd6l?p=preview)

åœ¨ [@gerardsans](https://twitter.com/intent/user?screen_name=gerardsans) æ‰¾åˆ°æˆ‘çš„æœ€æ–°è§‚ç‚¹ã€‚

# Redux ç®€ä»‹

Redux éµå¾ªä¸‰ä¸ªåŸºæœ¬åŸåˆ™:

*   å•ä¸€ä¸å¯å˜çŠ¶æ€æ ‘
*   å•å‘æ•°æ®æµ
*   ä½¿ç”¨çº¯å‡½æ•°(å‡é€Ÿå™¨)è¿›è¡Œæ›´æ”¹

é€šè¿‡éµå¾ªè¿™äº›åŸåˆ™ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°å¯é¢„æµ‹å’Œå¯å†ç°çš„åº”ç”¨ç¨‹åºè¡Œä¸ºã€‚

è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ä¸‹å›¾ä¸­æ¯ä¸ªç»„ä»¶çš„èŒè´£ã€‚

![](img/c0b530a115cd0b187ee6d79aa3bb377b.png)

Redux unidirectional flow

## è¡ŒåŠ¨

è¿™äº›æ˜¯æˆ‘ä»¬åº”ç”¨ç¨‹åºä¸­çš„**T21 åŠ¨ä½œ**ã€‚å®ƒä»¬å¯ä»¥ç”±ç”¨æˆ·æˆ–æœåŠ¡å™¨ç«¯å‘èµ·ã€‚ä»–ä»¬æ˜¯ ***å•†åº—*** çš„å”¯ä¸€ä¿¡æ¯æ¥æºã€‚åŠ¨ä½œæ˜¯æ™®é€šçš„ JavaScript å¯¹è±¡ï¼Œæè¿°ä¸€ä¸ªå˜æ›´ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸ª ***ç±»å‹*** å±æ€§ä½œä¸ºæ ‡è¯†ç¬¦ã€‚è¯·å‚è§ä¸‹é¢çš„ç¤ºä¾‹:

***åŠ¨ä½œåˆ›å»ºè€…*** æ˜¯åŒ…å«å¸®åŠ©å™¨æ–¹æ³•çš„ç»„ä»¶ï¼Œè¿™äº›å¸®åŠ©å™¨æ–¹æ³•åˆ›å»ºå…·ä½“çš„ ***åŠ¨ä½œ*** ï¼Œç”± ***è¿˜åŸè€…*** è°ƒåº¦è¿è¡Œã€‚

## è¿˜åŸå‰‚

***å‡é€Ÿå™¨*** æŒ‡å®šçŠ¶æ€å¦‚ä½•å˜åŒ–ä»¥å“åº” ***åŠ¨ä½œ*** ã€‚æ‰€æœ‰*å‡é€Ÿå™¨*å¿…é¡»æ˜¯ [***çº¯åŠŸèƒ½***](https://en.wikipedia.org/wiki/Pure_function)*å«ä¹‰:*

*   *ç»™å®šç›¸åŒçš„è¾“å…¥ï¼Œå®ƒä»¬äº§ç”Ÿç›¸åŒçš„è¾“å‡º*
*   *å®ƒä»¬ä¸ä¼šäº§ç”Ÿ ***å‰¯ä½œç”¨*** (ä¾‹å¦‚:å˜å¼‚çŠ¶æ€ï¼Œè°ƒç”¨åç«¯)*

> *è¿˜åŸå‰‚æ€»æ˜¯åˆ›é€ ä¸€ç§æ–°çš„çŠ¶æ€æ¥é¿å…å‰¯ä½œç”¨ï¼›æ›´é«˜çº§çš„é€‰æ‹©æ˜¯ä½¿ç”¨åƒ [immutable.js](https://facebook.github.io/immutable-js/) è¿™æ ·çš„åº“ã€‚*

**å‡é€Ÿå™¨*ä¹Ÿå¯æ ¹æ®éœ€è¦ä¸å…¶ä»–å‡é€Ÿå™¨ [***ç»„åˆæˆå‡é€Ÿå™¨***](https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/combineReducers.md) ã€‚è§ä¸‹é¢ä¸€ä¸ªåŸºæœ¬çš„ ***rootReducer*** ã€‚*

*é€šå¸¸çš„åšæ³•æ˜¯å°† ***initialState*** å®šä¹‰ä¸ºé»˜è®¤å‚æ•°(ç¬¬ 1 è¡Œ)å¹¶ç”¨[å¼€å…³](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/switch)è¯­å¥å¤„ç†æ¯ä¸ªåŠ¨ä½œã€‚*

## *åº”ç”¨å•†åº—*

*Redux ä½¿ç”¨åŒ…å«åº”ç”¨ç¨‹åºçŠ¶æ€*çš„å•ä¸€å­˜å‚¨ä½œä¸ºæ™®é€šçš„ JavaScript å¯¹è±¡ã€‚**

****åº”ç”¨å•†åº—*** æ˜¯ Redux çš„æ ¸å¿ƒï¼Œå®ƒæä¾›ä¸€ä¸ª API æ¥:*

*   *è°ƒåº¦åŠ¨ä½œç”±[***app store . dispatch***](https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#dispatch)***(åŠ¨ä½œ)****
*   *æ³¨å†Œå˜æ›´é€šçŸ¥ç›‘å¬å™¨:[***app store . subscribe***](https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#subscribe)***(å›è°ƒ)****
*   *è¯»å–åº”ç”¨çŠ¶æ€:[***app store . getstate***](https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#getState)***()****

# *å¾…åŠäº‹é¡¹åˆ—è¡¨ç¤ºä¾‹*

*æˆ‘ä»¬å°†æ¢ç´¢ä¸€ä¸ª **Todo List** åº”ç”¨ç¨‹åºï¼Œä»¥äº†è§£å¦‚ä½•å°† Redux ä¸ Angular é›†æˆåœ¨ä¸€èµ·ã€‚è¿™æ˜¯ä¸€ä¸ªåŸºæœ¬çš„å®ç°ï¼Œæˆ‘ä»¬å¯ä»¥æ·»åŠ æ–°çš„å¾…åŠäº‹é¡¹ï¼Œå°†å®ƒä»¬æ ‡è®°ä¸ºå·²å®Œæˆå¹¶è¿‡æ»¤å®ƒä»¬ã€‚*

*![](img/9799abb7df8a11e7f640ab92c54d61a4.png)*

# *åº”ç”¨è®¾è®¡*

*åœ¨ Angular ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª ***ç»„ä»¶æ ‘*** å¼€å§‹è®¾è®¡æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œå¹¶ä» ***æ ¹*** ç»„ä»¶å¼€å§‹ã€‚åœ¨ä¸‹é¢æ‰¾åˆ°ä¸€ä¸ªåŒ…å«æ‰€æœ‰ UI ç»„ä»¶çš„ç¤ºæ„æ€§ä¼ª HTML:add-todoï¼Œtodo-list(å­ç»„ä»¶:todo)ï¼Œfilters(å­ç»„ä»¶:filter-link)ã€‚*

## *è‡ªä¸¾è®¾ç½®*

*è¯·å‚è§ä¸‹é¢çš„ä»£ç æ¥è®¾ç½® Redux:*

*è§’åº¦åº”ç”¨åœ¨ ***åº”ç”¨æ¨¡å—*** ä¸­è‡ªä¸¾ä¼ é€’ã€‚ ***åº”ç”¨æ¨¡å—*** å£°æ˜æ‰€æœ‰éœ€è¦çš„ç»„ä»¶ã€æŒ‡ä»¤å’Œç®¡é“ã€‚è¿™åŒ…æ‹¬æ ¹ç»„ä»¶ ***App*** ï¼Œå…¶ä½™å…¨éƒ¨å½’å…¥***App _ DECLARATIONS***ã€‚å…¨å±€ä¾èµ–åœ¨ ***æä¾›è€…*** ä¸­å®šä¹‰ï¼Œå› æ­¤å®ƒä»¬å¯¹æˆ‘ä»¬çš„ *Redux ç»„ä»¶å¯ç”¨ã€‚å‚è§****app store***å’Œ ***TodoActions*** (ç¬¬ 15â€“16 è¡Œ)ã€‚ **TodoActions** (ç±»)å°†å……å½“ä¸€ä¸ª*åŠ¨ä½œåˆ›å»ºè€…*ï¼Œä¸ºæ¯ä¸ªåŠ¨ä½œæä¾›ä¸€ä¸ªå…¬å…±æ–¹æ³•ã€‚æˆ‘ä»¬å¯¼å…¥äº†æ‰€æœ‰çš„ä¾èµ–é¡¹(ç¬¬ 2â€“5 è¡Œ)ï¼Œç„¶åä½¿ç”¨[***createStore***](https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/createStore.md)*å’Œå®ä¾‹åŒ–*(ç¬¬ 7 è¡Œ)ä¼ é€’ ***rootReducer*** (å‡½æ•°)ã€‚æœ€åæˆ‘ä»¬ä½¿ç”¨ ***bootstrap*** å’Œæˆ‘ä»¬çš„æ ¹æ¨¡å— ***AppModule*** (ç¬¬ 21 è¡Œ)ã€‚***

> **ä½ å¯ä»¥åœ¨[è§’åº¦æ¨¡å—](https://angular.io/docs/ts/latest/guide/ngmodule.html) (angular.io)é˜…è¯»æ›´å¤šå…³äº**ng æ¨¡å—**å¦‚ä½•å·¥ä½œçš„ä¿¡æ¯**
> 
> **è¯·æ³¨æ„ï¼Œå½“ä½¿ç”¨å­—ç¬¦ä¸²ä»¤ç‰Œæ—¶ï¼Œæˆ‘ä»¬å¿…é¡»åœ¨ç»„ä»¶å‰é¢åŠ ä¸Š *@Inject('AppStore')* ã€‚**

## **åº”ç”¨çŠ¶æ€**

***åº”ç”¨å•†åº—*(***app Store)***å°†ä¿å­˜åº”ç”¨çŠ¶æ€ã€‚è¿™æ˜¯:todos æ•°ç»„å’Œå½“å‰è¿‡æ»¤å™¨ã€‚æˆ‘ä»¬å°†åˆå§‹çŠ¶æ€å®šä¹‰å¦‚ä¸‹:**

**åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å®šä¹‰ todo é¡¹çš„ç»“æ„ã€‚è¿™ä¸ªæ ¸å¿ƒç»“æ„å°†åœ¨åº”ç”¨ç¨‹åºçš„ç”Ÿå‘½å‘¨æœŸä¸­ä¿æŒä¸å˜ã€‚**

# **æ·»åŠ æ–°çš„å¾…åŠäº‹é¡¹**

**è®©æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªç®€åŒ–ç‰ˆçš„ ***AddTodo*** ç»„ä»¶ï¼Œå®ƒå°†å…è®¸æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–°çš„ Todo å¹¶å¤„ç†ç”¨æˆ·è¾“å…¥ã€‚**

**åœ¨æ¨¡æ¿ä¸­(ç¬¬ 4â€“8 è¡Œ)ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ª[æœ¬åœ°æ¨¡æ¿å˜é‡](https://angular.io/docs/ts/latest/guide/template-syntax.html#!#local-vars)***ã€todo***(è¾“å…¥ HTML å…ƒç´ ï¼Œç¬¬ 6 è¡Œ)ï¼Œå¹¶åœ¨æŒ‰é’®ç‚¹å‡»äº‹ä»¶(ç¬¬ 7 è¡Œ)ä¸Šä¼ é€’å®ƒçš„å¼•ç”¨ã€‚åœ¨æ„é€ å‡½æ•°ä¸Šï¼Œæˆ‘ä»¬å°† ***appStore*** å’Œ ***todoActions*** ä½œä¸ºç§æœ‰å±æ€§æ³¨å…¥åˆ°ç»„ä»¶ä¸­(ç¬¬ 11â€“17 è¡Œ)ã€‚å½“ç”¨æˆ·è¾“å…¥ä¸€ä¸ªæè¿°å¹¶ç‚¹å‡»' ***æ·»åŠ å¾…åŠäº‹é¡¹*ã€T21]æ—¶ï¼Œå°†ä¼šè°ƒåº¦ä¸€ä¸ªå¦‚ä¸‹æ‰€ç¤ºçš„åŠ¨ä½œ(ç¬¬ 20 è¡Œ)å¹¶æ¸…é™¤è¾“å…¥å†…å®¹ã€‚****

**ä¸ºäº†é¿å…åœ¨ç»„ä»¶ä¸­æ‰‹åŠ¨åˆ›å»ºåŠ¨ä½œå¯¹è±¡ï¼Œæˆ‘ä»¬åˆ›å»ºäº† ***TodoActions*** ç±»ä½œä¸º *ActionCreator* ã€‚**

**æˆ‘ä»¬å°† *ADD_TODO* æ ‡è®°ä½œä¸ºåŠ¨ä½œæ ‡è¯†ç¬¦å…¬å¼€(ç¬¬ 2 è¡Œ)ã€‚è¯·æ³¨æ„æˆ‘ä»¬æ˜¯å¦‚ä½•æ‰©å±• action å¯¹è±¡æ¥åŒ…å«æˆ‘ä»¬éœ€è¦çš„ä¿¡æ¯ï¼Œä»¥è¯†åˆ« todos å¹¶å°†å…¶æ ‡è®°ä¸ºå®Œæˆæˆ–æœªå®Œæˆ(ç¬¬ 12â€“15 è¡Œ)ã€‚**

**åœ¨åˆ†æ´¾åŠ¨ä½œä¹‹åï¼ŒrootReducer å°†è¢« store è°ƒç”¨ï¼Œä¼ é€’*current state*(*initial state*å¦‚æœæœªå®šä¹‰)å’Œç”¨æˆ·åŠ¨ä½œã€‚**

**ä¸ºäº†åˆ›å»ºæ–°çš„çŠ¶æ€ï¼Œæˆ‘ä»¬ä½¿ç”¨ ***concat*** (åˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„)å¹¶ä¿æŒå½“å‰çš„è¿‡æ»¤å™¨ï¼Œæœ€åˆå®ƒæ˜¾ç¤ºæ‰€æœ‰çš„å¾…åŠäº‹é¡¹ã€‚**

# **åˆ‡æ¢å¾…åŠäº‹é¡¹**

**å¯¹äºæ¯ä¸ªå¾…åŠäº‹é¡¹ï¼Œç”¨æˆ·å¯ä»¥ç‚¹å‡»å…¶æè¿°å°†å…¶åˆ‡æ¢ä¸ºå·²å®Œæˆã€‚ä¸‹é¢æ‚¨å¯ä»¥çœ‹åˆ°ä¸€ä¸ªæ´»åŠ¨å¾…åŠäº‹é¡¹çš„ç®€åŒ–æ ‡è®°:**

**ç±»ä¼¼äºæˆ‘ä»¬å¯¹ add todo æ‰€åšçš„ï¼Œæ¯ä¸ªç‚¹å‡»äº‹ä»¶å°†å‘ä¸‹ä¼ é€’ todo ***id*** (è¾“å…¥å±æ€§ï¼Œç¬¬ 6 è¡Œ)å¹¶åˆ†æ´¾ç›¸åº”çš„åŠ¨ä½œ(ç¬¬ 17 è¡Œ)ã€‚**

> **TypeScript æç¤º:åœ¨æ„é€ å‡½æ•°å‚æ•°ä¸­ä½¿ç”¨ç§æœ‰æˆ–å…¬å…±ä¿®é¥°ç¬¦æ˜¯å£°æ˜ç§æœ‰æˆ–å…¬å…±å±æ€§çš„æ·å¾„(ç¬¬ 12â€“13 è¡Œ)ã€‚å‚è§[ç§æœ‰/å…¬å…±ä¿®æ”¹å™¨](http://www.typescriptlang.org/Handbook#classes-privatepublic-modifiers)ã€‚**

**åˆ‡æ¢åˆå§‹ç¤ºä¾‹ todo å°†äº§ç”Ÿä»¥ä¸‹æ“ä½œ:**

**å’Œä»¥å‰ä¸€æ ·ï¼Œåˆ†æ´¾åŠ¨ä½œå°†æ‰§è¡Œ reducer å¹¶åˆ›å»ºä¸€ä¸ªæ–°çŠ¶æ€ã€‚**

**åŠ©æ‰‹å‡½æ•° ***toggleTodo*** åˆ›å»ºä¸€ä¸ªæ–°æ•°ç»„ï¼Œåˆ‡æ¢ Todo åŒ¹é…è¢«è°ƒåº¦çš„ ***action.id*** å¹¶ä¿æŒå…¶ä½™çš„ã€‚**

# **è¿‡æ»¤å¾…åŠäº‹é¡¹**

*****è¿‡æ»¤å™¨*** ç»„ä»¶å…è®¸ç”¨æˆ·è¿‡æ»¤:å…¨éƒ¨ã€ä»…æ´»åŠ¨æˆ–ä»…å®Œæˆå¾…åŠäº‹é¡¹ã€‚æˆ‘ä»¬ä½¿ç”¨ ***FilterLink*** ç»„ä»¶å°è£…æ¯ä¸ªè¿‡æ»¤å™¨ï¼Œé€šè¿‡å±æ€§ ***filter*** ä¼ é€’ä¸€ä¸ªæ ‡è¯†ç¬¦ã€‚**

**åœ¨ ***FilterLink*** å†…ï¼Œæ¯ä¸ªç‚¹å‡»äº‹ä»¶å‘ä¸‹ä¼ é€’ ***è¿‡æ»¤å™¨*** (è¾“å…¥å±æ€§ï¼Œç¬¬ 6 è¡Œ)å¹¶åˆ†æ´¾ç›¸åº”çš„è¿‡æ»¤å™¨åŠ¨ä½œã€‚**

**é€šè¿‡**è¿‡æ»¤*å®Œæˆå*è¿‡æ»¤**ä¼šç”Ÿæˆä»¥ä¸‹åŠ¨ä½œ**

**å’Œä»¥å‰ä¸€æ ·ï¼Œåˆ†æ´¾åŠ¨ä½œå°†æ‰§è¡Œ reducer å¹¶åˆ›å»ºä¸€ä¸ªæ–°çŠ¶æ€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¿æŒç›¸åŒçš„ todosï¼Œå¹¶ä½¿ç”¨è°ƒåº¦çš„è¿‡æ»¤å™¨(ç¬¬ 5 è¡Œ)æ›´æ”¹å½“å‰è¿‡æ»¤å™¨ã€‚**

# **æ˜¾ç¤ºå¾…åŠäº‹é¡¹åˆ—è¡¨**

**æˆ‘ä»¬å°†ä½¿ç”¨å­ç»„ä»¶ ***todo*** æ¥å°è£…å•ä¸ª todoï¼Œå°†ä¸€äº›å±æ€§ä½œä¸ºå±æ€§(idï¼Œcompleted)ä¼ é€’ï¼Œå°†æè¿°(æ–‡æœ¬)ä½œä¸ºå†…å®¹ä¼ é€’ã€‚è¿™ç§æ¨¡å¼è¢«ç§°ä¸º [***å®¹å™¨ç»„ä»¶***](/@learnreact/container-components-c0e67432e005) ã€‚**

**æˆ‘ä»¬ä½¿ç”¨*******[***ngFor***](https://angular.io/docs/ts/latest/api/common/NgFor-directive.html)æ¥è¿­ä»£ ***todos*** æ•°ç»„(ç¬¬ 3 è¡Œ)ã€‚å¯¹äºæ¯ä¸ªå¾…åŠäº‹é¡¹ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ª[æœ¬åœ°æ¨¡æ¿å˜é‡](https://angular.io/docs/ts/latest/guide/template-syntax.html#!#local-vars) ***å¾…åŠäº‹é¡¹*** ä¼ é€’å¾…åŠäº‹é¡¹ä¿¡æ¯ã€‚**

**ä»¥ä¸‹å‚è§ ***TodoList*** ç»„ä»¶çš„æ‘˜å½•ã€‚**

**ä¸Šé¢ï¼Œæˆ‘ä»¬ä½¿ç”¨[***app store . subscribe***](https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#subscribe)*(ç¬¬ 7 è¡Œ) ***æ³¨å†Œäº†ä¸€ä¸ªç›‘å¬å™¨ã€‚*** ä¸€æ—¦åœ¨æˆ‘ä»¬çš„ç›‘å¬å™¨å†…ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆå®¹æ˜“åœ°ä½¿ç”¨[***appstore . getstate***](https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#getState)*(ç¬¬ 8 è¡Œ)è¯»å–å½“å‰çŠ¶æ€ã€‚Subscribe è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å®ƒæ¥å–æ¶ˆè®¢é˜…ã€‚åœ¨ Angular ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨[***on destroy***](https://angular.io/docs/ts/latest/api/core/OnDestroy-interface.html)äº‹ä»¶å¤„ç†ç¨‹åºè¿›è¡Œæ¸…ç†(ç¬¬ 2 è¡Œï¼Œç¬¬ 13â€“16 è¡Œ)ã€‚****

> **è¯·æ³¨æ„ï¼Œæˆ‘ä»¬æ˜¯å¦‚ä½•å°†æ‰€æœ‰ç»„ä»¶å±æ€§å’ŒåŠ©æ‰‹æ–¹æ³•ä¿æŒä¸ºç§æœ‰çš„ã€‚æˆ‘ä»¬ä¸å¸Œæœ›å…¶ä»–ç»„ä»¶è®¿é—®å®ƒä»¬ã€‚**

# **Redux ç”Ÿå‘½å‘¨æœŸå®¡æŸ¥**

**è®©æˆ‘ä»¬å›é¡¾ä¸€ä¸‹ Redux åº”ç”¨ç¨‹åºåœ¨ä¸åŒé˜¶æ®µçš„è¡Œä¸ºã€‚**

*   ****åœ¨åº”ç”¨å¼•å¯¼**:æˆ‘ä»¬é€šè¿‡ ***rootReducer*** åˆå§‹åŒ– ***appStore*** ã€‚è¿™å°†è§¦å‘ ***appStore*** å†…éƒ¨åˆå§‹åŒ–ã€‚é€šå¸¸è¿™è®¾ç½®äº† ***åˆå§‹çŠ¶æ€*** ã€‚**
*   ****å…³äºç»„ä»¶åˆ›å»º**:æˆ‘ä»¬æ ¹æ®éœ€è¦åœ¨æ„é€ å™¨ä¸Šæ³¨å…¥ ***appStore*** å’Œ***to actions***ã€‚æ˜¾ç¤ºæ•°æ®çš„ç»„ä»¶è®¢é˜… ***appStore*** å¹¶é€šè¿‡è°ƒç”¨[***app store . getstate***](https://github.com/rackt/redux/blob/ec0b1a36e958584b7a11a5977734f04d05955c22/docs/api/Store.md#getState)***()***è¯»å–ã€‚æ”¹å˜çŠ¶æ€çš„ç»„ä»¶ä¸ºç›¸åº”çš„åŠ¨ä½œå‡†å¤‡è°ƒåº¦ä»£ç ï¼Œä¼ é€’ä»»ä½•æ‰€éœ€çš„æ•°æ®ã€‚**
*   ****å…³äºç»„ä»¶é”€æ¯**:ç»„ä»¶æ˜¾ç¤ºæ•°æ® ***é€€è®¢*** åˆ° ***appStore*** æ¸…ç†èµ„æºã€‚**
*   ****å…³äºç”¨æˆ·äº¤äº’**:æ¯ä¸ªç”¨æˆ·äº¤äº’éƒ½ä¼šè§¦å‘ä¸€ä¸ªåº•å±‚è°ƒåº¦åŠ¨ä½œã€‚è¿™å°†æ‰§è¡Œ ***rootReducer*** äº§ç”Ÿä¸€ä¸ªæ–°çš„çŠ¶æ€ã€‚ç„¶åï¼Œ ***appStore*** å°†é€šçŸ¥æ‰€æœ‰è®¢é˜…çš„ä¾¦å¬å™¨ï¼Œè¿™äº›ä¾¦å¬å™¨å°†ç›¸åº”åœ°æ›´æ–°ã€‚**
*   ****åœ¨æœåŠ¡å™¨ç«¯å‘èµ·çš„åŠ¨ä½œä¸Š**:ä¸€äº›åº”ç”¨ç¨‹åºå¯ä»¥è°ƒåº¦åŠ¨ä½œæ¥å“åº”æœåŠ¡å™¨ç«¯å‘èµ·çš„äº‹ä»¶ã€‚ä¾‹å¦‚:ç½‘ç»œå¥—æ¥å­—ã€‚è¿™äº›åŠ¨ä½œä¸€æ—¦æ­£ç¡®è®¾ç½®ï¼Œå°±ä¼šéµå¾ªä¸ç”¨æˆ·äº¤äº’ç›¸åŒçš„æµç¨‹ã€‚**

**æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ Redux æ„å»ºä¸€ä¸ªåŸºæœ¬çš„ Angular åº”ç”¨ç¨‹åºã€‚å¸Œæœ›ä½ ç°åœ¨å¯¹ Redux å¾ˆå¥½å¥‡ï¼Œä¹Ÿè®¸ä¼šåœ¨ä½ çš„ä¸‹ä¸€ä¸ªé¡¹ç›®ä¸­ç”¨åˆ°å®ƒã€‚æ„Ÿè°¢é˜…è¯»ï¼**

**[](http://www.meetup.com/AngularZone/) [## å®‰å¤æ‹‰å®—ç¤¾åŒº

### æ¬¢è¿æ¥åˆ°æˆ‘ä»¬çš„ç¤¾åŒºã€‚æˆ‘ä»¬çš„æ¿€æƒ…æ˜¯æœ‰æ£±è§’çš„ã€‚åŠ å…¥æˆ‘ä»¬å§ï¼ğŸš€](http://www.meetup.com/AngularZone/) 

# ç‰¹åˆ«æåŠ

ç‰¹åˆ«æ„Ÿè°¢[Robin bhm](https://twitter.com/robinboehm)å°†æœ¬æ–‡ç¿»è¯‘æˆå¾·è¯­å¹¶å‡ºç‰ˆæˆ [AngularJSã€‚å¾·](https://angularjs.de)åšå®¢ã€‚ä¸‹é¢æ¥çœ‹çœ‹å§ï¼ğŸ‡©ğŸ‡ªğŸ’–

[](https://angularjs.de/artikel/angular-redux-einfuehrung/) [## ä¸€ä¸ªè§’åæ ‡å’Œä¸€ä¸ªè§’åæ ‡ã€‚ç‰¹æ‹‰åå·

### åœ¨å…¬å…±å®‰å…¨é¢†åŸŸï¼Œå›½å®¶å¯ä»¥è§£å†³ä¸€ä¸ªé—®é¢˜ã€‚Autonome und wiederverwendbareâ€¦

å®‰å¤æ‹‰å‰æ–¯å¾·](https://angularjs.de/artikel/angular-redux-einfuehrung/) 

# è¿›ä¸€æ­¥é˜…è¯»

*   è§‚çœ‹ Dan Abramov @Dan_Abramov åˆ¶ä½œçš„[Redux](https://egghead.io/series/getting-started-with-redux)è§†é¢‘è¯¾ç¨‹å…¥é—¨
*   [æ™ºèƒ½å’Œéæ™ºèƒ½ç»„ä»¶](/@dan_abramov/smart-and-dumb-components-7ca2f9a7c7d0)ï¼Œä½œè€…ä¸¹Â·é˜¿å¸ƒæ‹‰è«å¤«
*   [ç”¨ Redux å’Œ Immutable.js](http://blog.jhades.org/angular-2-application-architecture-building-flux-like-apps-using-redux-and-immutable-js-js/) æ„å»º Flux åº”ç”¨ï¼Œä½œè€… [@JhadesDev](https://twitter.com/JhadesDev)
*   [React å¼€å‘è€…è°ƒæŸ¥ç»“æœ](https://angularclass.com/react-developer-survey-results)ï¼Œä½œè€… PatrickJSï¼Œ [@AngularClass](https://twitter.com/AngularClass)

[![](img/abefda0aa7864742686ec7f7fdffe2b5.png)](https://twitter.com/intent/user?screen_name=gerardsans)![](img/bff17231f703cc479d986766d8b3cad6.png)![](img/67b37e5d672384f0953563450fca0029.png)**