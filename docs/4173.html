<html>
<head>
<title>Android Navigation Components — Part 3</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Android导航组件—第3部分</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/android-navigation-components-part-3-19554ec9ae83?source=collection_archive---------0-----------------------#2018-06-07">https://medium.com/google-developer-experts/android-navigation-components-part-3-19554ec9ae83?source=collection_archive---------0-----------------------#2018-06-07</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="4318" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">两周前，我开始写关于Android导航组件的文章。</p><p id="9c27" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Android导航组件库是Google I/O 2018期间宣布并发布的Android JetPack库集的一部分。</p><p id="d894" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我在这一系列的文章中谈到了在使用这个库之前理解你的应用程序结构的重要性。</p><p id="51de" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后，我写了第二篇文章，向您展示如何实现导航组件，以及在您很好地理解了您的应用程序结构之后，实现导航组件是多么的容易。</p><p id="f296" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你还没有机会查看前两个帖子，你可以在这里找到它们<a class="ae jc" rel="noopener" href="/google-developer-experts/android-navigation-components-part-1-236b2a479d44">，在这里</a>找到它们<a class="ae jc" rel="noopener" href="/google-developer-experts/android-navigation-components-part-2-ca643eb301e3">。</a></p><p id="882e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这篇文章将涵盖的内容不仅仅是上一篇文章中提到的从一个目的地到另一个目的地的简单情况。</p><p id="e272" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这篇文章的主题被分成独立的部分，你可以直接跳到与你最相关的主题。</p><p id="81d4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我会试着把这篇文章作为一篇直播文章，并随着我开始遇到更多有趣的值得分享的东西而更新它。</p><p id="2e1c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本文结束时，你将能够:</p><ul class=""><li id="8ca7" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">使用安全args Gradle插件在目的地之间传递数据。</li><li id="40d8" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">设置导航组件以使用不同的视图。</li><li id="b588" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">处理两个活动目的地之间的导航。</li><li id="192d" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">向目标添加深度链接支持。</li></ul></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><h1 id="cbae" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">以安全的方式传递数据——安全的args插件</h1><p id="c2e0" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">在本系列的前一部分中，我谈到了如何使用bundle将数据从一个目的地传递到另一个目的地，就像您一直在做的那样。</p><p id="ced6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这种解决方案很好，但是它不能防止开发人员传递随机的包或者在从中提取参数时使用错误的密钥。</p><p id="9f02" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了防止这种小错误发生，导航组件库附带了一个名为safe args的Gradle插件。</p><p id="3791" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">安全参数允许你在编辑器中定义你的目标参数，它会生成代码来帮助你捆绑和解绑这些参数。</p><p id="8e22" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要使用safe args插件，您需要首先将类路径添加到项目<code class="du lb lc ld le b">build.gradle</code>文件中的Gradle插件:</p><pre class="lf lg lh li fd lj le lk ll aw lm bi"><span id="7b5e" class="ln jz hh le b fi lo lp l lq lr">classpath "android.arch.navigation:navigation-safe-args-gradle-plugin:1.0.0-alpha01"</span></pre><p id="323d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后将插件应用到应用程序模块Gradle构建文件。</p><pre class="lf lg lh li fd lj le lk ll aw lm bi"><span id="d441" class="ln jz hh le b fi lo lp l lq lr">apply <strong class="le hi">plugin</strong>: <strong class="le hi">'com.android.application'<br/></strong>apply <strong class="le hi">plugin</strong>: <strong class="le hi">'kotlin-android'<br/></strong>apply <strong class="le hi">plugin</strong>: <strong class="le hi">'kotlin-android-extensions'</strong></span><span id="812c" class="ln jz hh le b fi ls lp l lq lr">//Apply Safe Args Plugin<br/>apply <strong class="le hi">plugin</strong>: <strong class="le hi">'androidx.navigation.safeargs'<br/></strong></span><span id="ec10" class="ln jz hh le b fi ls lp l lq lr">android {<br/> ...<br/>}</span></pre><p id="8f16" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">与Gradle同步项目后，您可以开始使用导航编辑器为应用程序中的目的地添加安全参数。</p><p id="97f5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为此，您必须在导航图中单击目的地顶部，转到属性面板，并开始添加目的地可以接收的所有参数。</p><figure class="lf lg lh li fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es lt"><img src="../Images/3d1aef71995e02459723156e5eb1dfae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*J0SPNrqoLR-AkRtD7H29Kg.png"/></div></div></figure><p id="8f51" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">编辑器将允许您定义参数名称、类型(Int、String、Reference)和默认值。</p><p id="64da" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">添加所有参数后，项目需要重新构建，Gradle插件将生成两个文件，一个允许设置参数，另一个帮助从包中检索参数。</p><h2 id="3e88" class="ln jz hh bd ka mb mc md ke me mf mg ki ip mh mi km it mj mk kq ix ml mm ku mn bi translated">设置参数</h2><p id="44b8" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">安全参数插件将生成一个<strong class="ig hi">方向</strong>类。生成的类实现了<code class="du lb lc ld le b">NavDirections</code>接口，这个接口描述了导航操作。</p><blockquote class="mo mp mq"><p id="4581" class="ie if mr ig b ih ii ij ik il im in io ms iq ir is mt iu iv iw mu iy iz ja jb ha bi translated">我在上一篇文章中提到的导航操作主要由一个动作和它的参数组成。</p></blockquote><p id="57ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">生成的类将提供setters来定义所有已定义的参数。<br/>在定义参数之后，可以将这个类的一个实例传递给<code class="du lb lc ld le b">NavController</code> navigate函数。</p><p id="538e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于Events Finder应用程序来说，设置<code class="du lb lc ld le b">eventId</code>参数并导航到事件详细信息的目的地如下所示:</p><figure class="lf lg lh li fd lu"><div class="bz dy l di"><div class="mv mw l"/></div></figure><h2 id="14c8" class="ln jz hh bd ka mb mc md ke me mf mg ki ip mh mi km it mj mk kq ix ml mm ku mn bi translated">检索参数</h2><p id="7907" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">在目标端，safe args插件将生成一个类，该类将已定义的参数作为变量，并生成一个静态方法，该方法接收一个包并检索所有参数的值。</p><p id="f07c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于这个posts应用程序示例，通过safe args插件使用生成的类检索参数如下所示:</p><figure class="lf lg lh li fd lu"><div class="bz dy l di"><div class="mv mw l"/></div></figure></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><h1 id="8a86" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">设置导航组件以使用不同的视图。</h1><p id="94ae" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">到目前为止，展示如何进行实际导航的示例都是“手动”进行的。</p><p id="e284" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我说的“手动”是指完成实现UI组件监听器的过程，在这个监听器的实现中，获取Nav控制器并调用navigate方法。</p><p id="296c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所有这些都是正确的，这样做是没问题的，但是在我们有导航抽屉这样的东西的情况下，经历那个过程会很无聊，会增加很多不必要的代码。</p><p id="31ad" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了帮助减少样板文件，Google创建了一组静态函数，帮助设置导航组件和一些常见的UI组件，如工具栏和底部导航视图。</p><p id="58c8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些函数位于NavigationUI类中。这个类包含了绑定ActionBar、NavigationView和底部导航视图的函数。</p><p id="ff7f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你已经注意到在以前的文章中显示的图表，事件查找器应用程序的主要目的地没有连接它们的箭头(动作)。</p><p id="94ce" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是因为顶级目的地将由特定的导航组件连接。</p><p id="3098" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本文中的示例只有3个顶级目的地，根据材料设计规格，底部导航视图是适合使用的导航组件。</p><h2 id="09d9" class="ln jz hh bd ka mb mc md ke me mf mg ki ip mh mi km it mj mk kq ix ml mm ku mn bi translated">使用底部导航视图设置导航控制器</h2><p id="a4d7" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">正如我提到的，使用底部导航组件设置导航控制器很容易，通过调用NavigationUI类的以下静态函数即可完成:</p><pre class="lf lg lh li fd lj le lk ll aw lm bi"><span id="d6ac" class="ln jz hh le b fi lo lp l lq lr">setupWithNavController(bottomNav, <strong class="le hi">navHost</strong>)</span></pre><p id="cb63" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当这个设置完成后，点击事件和底部导航项目的选择状态都将由导航控制器来处理。</p><p id="9d41" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使该功能工作的唯一要求是确保底部导航菜单项中的<strong class="ig hi"> id的</strong>与导航图目的地的<strong class="ig hi"> id的</strong>相同。</p><h2 id="d8f7" class="ln jz hh bd ka mb mc md ke me mf mg ki ip mh mi km it mj mk kq ix ml mm ku mn bi translated">用自定义视图设置导航控制器</h2><p id="4b9d" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">正如我前面提到的，NavigationUi类只包含支持NavigationUi中一小组UI组件的函数。如果您有一个自定义视图，您将必须创建您的函数。</p><p id="213d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要创建您自己的函数，您需要依次遵循以下两个步骤:</p><ol class=""><li id="6858" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb mx jj jk jl bi translated">处理自定义UI组件的click事件，并使用Nav控制器导航到所需的目的地。</li><li id="d04e" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb mx jj jk jl bi translated">在<code class="du lb lc ld le b">addOnNavigatedListener</code>内听导航完成，并在导航完成后做所需的工作。(例如:检查当前选择的项目)。</li></ol><p id="1fc4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这些是NavigationUtils类中现有函数遵循的完全相同的步骤，您可以在下面看到设置底部导航视图的函数的实现:</p><figure class="lf lg lh li fd lu"><div class="bz dy l di"><div class="mv mw l"/></div></figure></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><h1 id="abc2" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">在活动之间导航</h1><p id="9431" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">虽然谷歌正在推荐和推动单活动应用程序模型，但这并不是目前大多数应用程序使用的模型。</p><p id="3883" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你正在开发的应用是这种情况，这应该不是问题。</p><p id="b323" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有一个很好的方法可以开始使用导航组件，并转移(或不转移)到单活动应用程序模型，而不必破坏一切。</p><p id="13a9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这包括识别哪些目的地当前处于同一级别，并在活动中托管的同一导航图中将它们分组在一起。</p><p id="780b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你看一下Event Finder应用程序的用例图，我们可以这样设置:</p><ol class=""><li id="e3df" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb mx jj jk jl bi translated">同一级别的前三个目的地在<strong class="ig hi"> main_nav_graph.xml </strong>中，托管在<strong class="ig hi"> MainActivity </strong>中。</li><li id="b448" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb mx jj jk jl bi translated">事件详细信息目的地和虚拟结账流程位于同一个导航图中(<strong class="ig hi">check out _ flow _ nav _ graph</strong>)。<strong class="ig hi"> xml </strong>托管在<strong class="ig hi"> CheckoutFlowActivity </strong>中。</li><li id="4ae0" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb mx jj jk jl bi translated"><strong class="ig hi"> CheckoutFlowActivity </strong>将是<strong class="ig hi"> main_nav_graph.xml </strong>中的一个目的地，我们可以从该图中的任何目的地导航到该目的地，就像前面的帖子和下面的帖子中所示的同一图中的任何其他目的地一样:</li></ol><figure class="lf lg lh li fd lu"><div class="bz dy l di"><div class="mv mw l"/></div></figure><p id="aa14" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">导航控制器将知道您正在调用的操作是针对活动目的地的，它将进行启动活动所需的所有调用，并传递它所需的参数。</p><h2 id="db78" class="ln jz hh bd ka mb mc md ke me mf mg ki ip mh mi km it mj mk kq ix ml mm ku mn bi translated">从活动目的地向上导航</h2><p id="c37c" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">要向上导航，例如从<code class="du lb lc ld le b">CheckoutFlowActivity</code>到<code class="du lb lc ld le b">MainActivity</code>，你必须按照导航组件库存在之前推荐的方式进行。</p><p id="3566" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如<a class="ae jc" href="https://developer.android.com/training/implementing-navigation/ancestral" rel="noopener ugc nofollow" target="_blank">该</a>页面上提供的文档所示，您必须:</p><ol class=""><li id="3b38" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb mx jj jk jl bi translated">在CheckoutActivity清单声明中定义一个元数据标记，指定<code class="du lb lc ld le b">MainActivity</code>是<code class="du lb lc ld le b">CheckoutFlowActivity</code>的父级。</li></ol><pre class="lf lg lh li fd lj le lk ll aw lm bi"><span id="0845" class="ln jz hh le b fi lo lp l lq lr">&lt;<strong class="le hi">meta-data<br/>    android:name="android.support.PARENT_ACTIVITY"<br/>    android:value=".home.MainActivity" </strong>/&gt;</span></pre><p id="8cf0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.使用NavUtils类进行导航。使用这个类导航到父活动，在大多数情况下只需要我们调用<code class="du lb lc ld le b">navigateUpFromSameTask</code>函数。</p><p id="2dfe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是，如果这个活动可以通过深层链接访问，向上导航会将用户带出应用程序。</p><p id="cb06" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了纠正这种行为，文档建议进行必要的检查，并使用父任务重新创建任务，如果需要，可以向上导航。</p><figure class="lf lg lh li fd lu"><div class="bz dy l di"><div class="mv mw l"/></div></figure></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><h1 id="3bd0" class="jy jz hh bd ka kb kc kd ke kf kg kh ki kj kk kl km kn ko kp kq kr ks kt ku kv bi translated">到目的地的深层链接</h1><p id="b0cc" class="pw-post-body-paragraph ie if hh ig b ih kw ij ik il kx in io ip ky ir is it kz iv iw ix la iz ja jb ha bi translated">深度链接是我一直认为非常痛苦的事情之一，尤其是在Firebase动态链接发布之前。</p><p id="ea82" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你不知道什么是深层链接，根据developer.android.com网站上的文档:</p><blockquote class="mo mp mq"><p id="6c9d" class="ie if mr ig b ih ii ij ik il im in io ms iq ir is mt iu iv iw mu iy iz ja jb ha bi translated"><strong class="ig hi">深层链接</strong>是将用户直接带到应用程序中特定内容的URL。在Android中，你可以通过添加<a class="ae jc" href="https://developer.android.com/guide/components/intents-filters.html" rel="noopener ugc nofollow" target="_blank">意图过滤器</a>并从输入的意图中提取数据来建立深度链接，以驱使用户进行正确的活动。</p></blockquote><p id="cd94" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当用户收到并打开深层链接时，会发生两件事:</p><ol class=""><li id="3c00" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb mx jj jk jl bi translated">如果用户没有安装应用程序，她将被带到playstore下载应用程序，当下载完成时，打开应用程序将带她到应用程序中的特定内容。</li><li id="a304" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb mx jj jk jl bi translated">如果用户确实安装了应用程序，打开深层链接会将她带到特定内容。</li></ol><p id="6b13" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如我在上面写的，处理不同的场景是一件非常复杂的事情，由于Firebase动态链接和现在的导航组件，在应用程序中实现深度链接是一件简单而愉快的事情。</p><p id="7777" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这篇文章中，我不会详细介绍Firebase动态链接，但是我强烈建议你阅读这篇由Joe Birch撰写的文章。</p><p id="d72a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要在活动应用程序查找器上实现深度链接，将用户直接带到活动详细信息屏幕，您应该:</p><ol class=""><li id="d0e7" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb mx jj jk jl bi translated">单击main_nav_graph.xml中的事件详细信息片段目的地，并在属性面板上单击表示深度链接的加号。</li><li id="fb03" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb mx jj jk jl bi translated">在打开的小对话框中，插入用于标识目的地的<a class="ae jc" href="https://developer.android.com/reference/kotlin/java/net/URI" rel="noopener ugc nofollow" target="_blank"> Uri </a>，完成后点击“添加”按钮。</li></ol><p id="a5ab" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="mr">正如您在下图中看到的，Uri以花括号内的“event_id”结束。这是定义一个占位符，您可以用运行时指定的实际参数替换它。<br/>示例:将用户带到id号为2334456的事件详细信息的深层链接如下:</em> <code class="du lb lc ld le b"><a class="ae jc" href="https://eventfinder.app/event/2334456" rel="noopener ugc nofollow" target="_blank"><strong class="ig hi">https://eventfinder.app/event/2334456</strong></a></code></p><figure class="lf lg lh li fd lu er es paragraph-image"><div role="button" tabindex="0" class="lv lw di lx bf ly"><div class="er es na"><img src="../Images/5fc84132772e5dcf47e3c994450ac6f3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5VacldDzy8Ck7C78eVxgAg.png"/></div></div></figure><p id="6fe9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.在签出活动清单定义中指定导航图。您可以通过复制并粘贴以下行来完成此操作:</p><pre class="lf lg lh li fd lj le lk ll aw lm bi"><span id="3d7d" class="ln jz hh le b fi lo lp l lq lr">&lt;<strong class="le hi">nav-graph android:value="@navigation/main_nav"</strong>/&gt;</span></pre><p id="ff6a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在清单合并步骤中，这一行将被扩展，新清单将具有处理深层链接所需的所有配置。</p><p id="81d7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了测试一切是否正常，有一个ADB命令允许您在给定URI和应用程序包名称的情况下启动一个活动。</p><pre class="lf lg lh li fd lj le lk ll aw lm bi"><span id="2be9" class="ln jz hh le b fi lo lp l lq lr">adb shell am start -a android.intent.action.VIEW -d "<a class="ae jc" href="https://eventfinder.app/event/2334456" rel="noopener ugc nofollow" target="_blank">https://eventfinder.app/event/2334456</a>" com.eventfinder.app</span></pre></div><div class="ab cl jr js go jt" role="separator"><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw jx"/><span class="ju bw bk jv jw"/></div><div class="ha hb hc hd he"><p id="8777" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如我在这篇文章的开头提到的，它并不打算从头到尾阅读，我打算随着导航库变得更加成熟，以及我遇到更多有趣的事情来分享，继续更新它。</p><p id="b0d4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是关于导航组件的“介绍”系列的最后一篇文章，我希望你能够通过阅读它们学到一些新的东西。</p><p id="95bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果您有任何问题、建议或只是想分享您使用导航组件的经验，请不要犹豫，在下面的部分发表评论或给我发推文:</p><div class="nb nc ez fb nd ne"><a href="https://twitter.com/DarioMungoi" rel="noopener  ugc nofollow" target="_blank"><div class="nf ab dw"><div class="ng ab nh cl cj ni"><h2 class="bd hi fi z dy nj ea eb nk ed ef hg bi translated">达里奥·蒙古伊·🇲🇿(@达里奥·蒙古伊)|推特</h2><div class="nl l"><h3 class="bd b fi z dy nj ea eb nk ed ef dx translated">达里奥·蒙古伊·🇲🇿的最新推文。安卓@shopify(🇨🇦)。谷歌开发专家(安卓)…</h3></div><div class="nm l"><p class="bd b fp z dy nj ea eb nk ed ef dx translated">twitter.com</p></div></div><div class="nn l"><div class="no l np nq nr nn ns lz ne"/></div></div></a></div><p id="443d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下次见！</p><p id="d3d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">分米</p></div></div>    
</body>
</html>