<html>
<head>
<title>A 5 minute intro to Workbox 3.0</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">对Workbox 3.0的5分钟介绍</h1>
<blockquote>原文：<a href="https://medium.com/google-developer-experts/a-5-minute-intro-to-workbox-3-0-156803952b3e?source=collection_archive---------0-----------------------#2018-01-03">https://medium.com/google-developer-experts/a-5-minute-intro-to-workbox-3-0-156803952b3e?source=collection_archive---------0-----------------------#2018-01-03</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="6b16" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Workbox是一个JavaScript库的集合，当你构建<a class="ae jc" href="https://developers.google.com/web/progressive-web-apps/" rel="noopener ugc nofollow" target="_blank">渐进式网络应用</a>时，它可以帮助你使用<a class="ae jc" href="https://developers.google.com/web/fundamentals/primers/service-workers/" rel="noopener ugc nofollow" target="_blank">服务工作者</a>相关的功能。</p><p id="323b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在本文中，我将只关注使用workbox为您的应用程序生成服务工作者文件。</p><p id="588b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="jd">w̵o̵r̵k̵b̵o̵x̵̵j̵s̵̵i̵s̵̵c̵u̵r̵r̵e̵n̵t̵l̵y̵̵i̵n̵̵a̵l̵p̵h̵a̵.̵̵i̵̵w̵i̵l̵l̵̵k̵e̵e̵p̵̵t̵h̵i̵s̵̵a̵r̵t̵i̵c̵l̵e̵̵u̵p̵̵t̵o̵̵d̵a̵t̵e̵̵a̵s̵̵w̵o̵r̵k̵b̵o̵x̵̵3̵̵r̵e̵a̵c̵h̵e̵s̵̵a̵̵s̵t̵a̵b̵l̵e̵̵r̵e̵l̵e̵a̵s̵e̵.̵</em></p><p id="15f0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3月14日发布了Workbox 3.0.0🎉</p><h1 id="47f0" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">🤔为什么选择workbox？</h1><p id="3f2b" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">我以前在处理渐进式网络应用程序时使用过<a class="ae jc" href="https://github.com/GoogleChromeLabs/sw-precache" rel="noopener ugc nofollow" target="_blank">SW-pre cache</a>&amp;<a class="ae jc" href="https://github.com/GoogleChromeLabs/sw-toolbox" rel="noopener ugc nofollow" target="_blank">SW-toolbox</a>。然而，在上次Chrome Dev峰会上听到这个消息后，现在我已经看到了Workbox 3，我很高兴能够切换到Workbox 3，因为work box 3专注于提供更好的模块化、强大的调试支持，同时保持库大小较小😍。</p><h1 id="1a7d" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">💻跟着走</h1><p id="8314" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">在教授新技术时，我采用的方法是在隔离概念的同时降低一点级别。</p><p id="ef2a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这也是我和妮可·赛迪在私人公司会议上介绍PWAworkshop.com时采用的方法。这就是为什么我准备的存储库有一个<strong class="ig hi"> build </strong>文件夹来模拟构建工具的结果。</p><p id="b7e4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们在这里省略了<strong class="ig hi">构建步骤</strong>，以确保你理解<strong class="ig hi">工具箱</strong>是如何工作的。</p><p id="a065" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，要遵循本教程，首先要克隆这个存储库并安装它的依赖项:</p><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="cf53" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们正在安装的唯一依赖项是<strong class="ig hi"> http-server </strong>，它将让您在浏览器中为您的应用程序提供服务。</p><p id="55e0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是我们目前的文件夹结构:</p><pre class="kj kk kl km fd kq kr ks kt aw ku bi"><span id="af04" class="kv jf hh kr b fi kw kx l ky kz">.<br/>├── build<br/>│   ├── css<br/>│   │   └── app.css<br/>│   ├── index.html<br/>│   └── js<br/>│       └── app.js<br/>└── package.json</span></pre><h1 id="af22" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">🔗安装工具箱</h1><p id="c5a3" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">让我们从安装最新的预发布版本<strong class="ig hi"> Workbox-cli </strong>开始</p><pre class="kj kk kl km fd kq kr ks kt aw ku bi"><span id="76d2" class="kv jf hh kr b fi kw kx l ky kz">npm install workbox-cli --save-dev</span></pre><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es la"><img src="../Images/b455b38f9fb8cb86a81cec78805d0075.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*y_54H-Zb7ujpNIkIs_WHWQ.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Install workbox</figcaption></figure><p id="484b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我更喜欢在本地安装库，而不是全局安装，以避免在处理多个项目时出现意外问题。</p><p id="f856" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因为我们在本地安装了workbox，所以现在可以使用npx来调用它</p><p id="afd8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du ll lm ln kr b">npx workbox</code>(而不仅仅是<code class="du ll lm ln kr b">workbox</code>)。</p><h1 id="e6e1" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">🎩工具箱向导</h1><p id="44a7" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">我们要经历的第一个工具箱命令是<code class="du ll lm ln kr b">wizard</code>。</p><p id="ef85" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du ll lm ln kr b">workbox wizard</code>扫描您的目录并询问您一系列问题，以便生成一个<strong class="ig hi">工具箱-config.js </strong>，该工具箱将在以后您调用<strong class="ig hi">工具箱</strong>时使用。</p><pre class="kj kk kl km fd kq kr ks kt aw ku bi"><span id="4d9d" class="kv jf hh kr b fi kw kx l ky kz">npx workbox wizard</span></pre><p id="ec50" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在workbox会问你一系列问题。</p><p id="7c19" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">用<strong class="ig hi"> yes </strong>回答所有的问题，因为所有的缺省值都是有意义的，如果你需要的话，你可以简单地编辑这个文件。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es lo"><img src="../Images/3a135635eb7250e2ab39c0a12725dbe4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*uT5yudgZKMMAeYAVm5WOaQ.gif"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Workbox wizard</figcaption></figure><p id="2f71" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您现在将在根目录下有一个<code class="du ll lm ln kr b">workbox-config.js</code>，包含以下配置:</p><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="ko kp l"/></div></figure><h1 id="f50e" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">🏋️‍工具箱生成</h1><p id="614b" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">这个workbox命令将读取您的<strong class="ig hi"> workbox-config.js </strong>并生成一个服务工作者文件，该文件基于我们从workbox向导<code class="du ll lm ln kr b">**/*.{css,html,js}</code>获得的<strong class="ig hi"> globPatterns </strong>预先缓存文件。</p><pre class="kj kk kl km fd kq kr ks kt aw ku bi"><span id="77cc" class="kv jf hh kr b fi kw kx l ky kz">npx workbox generateSW workbox-config.js</span></pre><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es lp"><img src="../Images/637270fb1fd8bd3bc5c91aa7ab9d968f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*dm4Mk3CHaRGamEY1jJZfDQ.gif"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Workbox generateSW</figcaption></figure><h2 id="ebd7" class="kv jf hh bd jg lq lr ls jk lt lu lv jo ip lw lx js it ly lz jw ix ma mb ka mc bi translated">登记服务人员</h2><p id="6400" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">既然服务工作者文件已经生成，我们必须注册它。</p><p id="9af7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，让我们进入<strong class="ig hi">index.html</strong>并在主体的结束标记前添加以下代码:</p><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="ko kp l"/></div></figure><h2 id="6e4d" class="kv jf hh bd jg lq lr ls jk lt lu lv jo ip lw lx js it ly lz jw ix ma mb ka mc bi translated">上菜</h2><p id="48f0" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">现在运行<code class="du ll lm ln kr b">npm run serve</code>服务你的应用，在你的浏览器中进入<a class="ae jc" href="http://localhost:8080/" rel="noopener ugc nofollow" target="_blank"> http://localhost:8080/ </a>。</p><p id="f1bf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">瞧啊。在<a class="ae jc" href="https://developers.google.com/web/tools/chrome-devtools/" rel="noopener ugc nofollow" target="_blank"> Chrome dev tools </a>的<strong class="ig hi">网络</strong>标签中，你可以看到由服务人员提出的请求，这些请求的前缀是⚙️图标。当您在本地开发时，Workbox将只加载<strong class="ig hi"> .dev.js </strong>助手。</p><p id="a77e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Workbox还将请求带有特定<code class="du ll lm ln kr b">workbox-cache-buest</code>参数的<strong class="ig hi">index.html</strong>、<strong class="ig hi"> app.css </strong> &amp;、T32】 app.js ，以确保您获得最新版本的资产。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es md"><img src="../Images/16bfab7b4ec5e3cfbd0dc9f9b93383c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xyXJk-zjnIWSSKZni3CI1A.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Workbox pre-caching assets</figcaption></figure><p id="e7ee" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您还可以通过进入<strong class="ig hi">应用&gt;缓存存储</strong>来检查这些预先缓存的资产(您可能需要右键单击&amp;刷新)<strong class="ig hi"> &gt;工作箱-预先缓存</strong>。</p><p id="6002" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在这个改进的开发工具页面中，您可以看到缓存的资产及其内容，显示在<strong class="ig hi">预览</strong>选项卡中。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es md"><img src="../Images/f2e500b45988a8b019d601c3c6cdc7f5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zsBPBs5Ie3pgF-gf-NKzWg.png"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Preview pre-cached assets</figcaption></figure><h2 id="12ce" class="kv jf hh bd jg lq lr ls jk lt lu lv jo ip lw lx js it ly lz jw ix ma mb ka mc bi translated">下线！</h2><p id="d57b" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">回到<strong class="ig hi">网络</strong>标签，让自己离线。</p><p id="b61b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">重新加载页面，你会看到你仍然得到对index.html<strong class="ig hi">，app.js </strong> &amp; <strong class="ig hi"> app.css </strong>的响应。这是因为它们已经被预先缓存，即使在离线时也能被提供。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es me"><img src="../Images/3b72c64d6a235a596182bd4553d28323.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*X1wmsAYS5RsMDnlTRySdtw.gif"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Works offline!</figcaption></figure><h1 id="62d8" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">💉工具箱注入清单</h1><p id="09ee" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">如您所见，整个服务工作者文件现在是由Workbox生成的。但是如果你想改变一件事呢？如果要加一行呢？添加离线分析？</p><p id="9f38" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您不能更改生成的文件，因为您所做的任何更改都将在您重新生成服务工作者文件后被覆盖。</p><p id="4d96" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这就是为什么每当您想要控制您的服务工作者文件并让Workbox生成它的一部分时，您必须使用<strong class="ig hi"> injectManifest </strong>的原因。</p><p id="7fa7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以我们需要有一个<code class="du ll lm ln kr b">source service worker</code> <strong class="ig hi"> </strong>文件，它将用于生成最终的服务工人。</p><p id="116f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们创建<strong class="ig hi"> src-sw </strong>。<strong class="ig hi"> js </strong>文件放在项目的根目录下，并在其中写入以下代码:</p><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="d2f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以我们从CDN导入了workbox，添加了一些自定义代码(目前它只是一个控制台日志)，然后添加了一个占位符:<code class="du ll lm ln kr b">workbox.precaching.precacheAndRoute([]);</code>。</p><p id="edd5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Workbox将生成预缓存数组，并将其注入到这行代码中:<code class="du ll lm ln kr b">workbox.precaching.precacheAndRoute([]);</code>，同时保持其余代码的完整性。</p><p id="9123" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在在<strong class="ig hi"> workbox-config.js </strong>中，添加下面一行:</p><pre class="kj kk kl km fd kq kr ks kt aw ku bi"><span id="66bc" class="kv jf hh kr b fi kw kx l ky kz">"swSrc": "src-sw.js"</span></pre><p id="f344" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您应该在您的<strong class="ig hi"> workbox-config.js </strong>中完成这个配置:</p><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="6e11" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在只需运行:<code class="du ll lm ln kr b">npx workbox injectManifest</code></p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es mf"><img src="../Images/ef6a74d4b918c63f7448d06b7d0f4bd0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*bZjul0w09bfVlyBLvbh1kw.gif"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">Workbox injectManifest</figcaption></figure><p id="41ae" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是您将得到的生成的服务工人:</p><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="ko kp l"/></div></figure><h1 id="5355" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">🛣工具箱路由</h1><p id="da64" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">到目前为止，我们已经完成了预缓存，我们指示<strong class="ig hi">工作箱</strong>向缓存中添加一些资源，因为我们稍后会用到它们。</p><p id="76ff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">但是动态资源呢？如果您调用一个特定的API，并希望缓存它的响应，该怎么办？</p><p id="ed84" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">工作箱路由的工作来了，它允许你定义一个正则表达式，用一个<strong class="ig hi">策略</strong>匹配一个特定的请求。</p><p id="81e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您可以定义自己的策略，但大多数情况下，您会使用以下三种已经存在的策略之一:</p><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="5595" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">你可以在<a class="ae jc" href="https://developers.google.com/web/tools/workbox/modules/workbox-strategies" rel="noopener ugc nofollow" target="_blank">工具箱策略文档</a>中找到更多关于它们如何工作的解释。</p><p id="c635" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你看一下<code class="du ll lm ln kr b">build/js/app.js</code>，我们有一个<code class="du ll lm ln kr b">fetch</code>对<a class="ae jc" href="https://jsonplaceholder.typicode.com/users" rel="noopener ugc nofollow" target="_blank">https://jsonplaceholder.typicode.com/users</a>的请求，所以为了缓存这个链接的结果，我将使用<strong class="ig hi"> cacheFirst </strong>策略，并使用一个匹配url的正则表达式注册路由，它是:</p><p id="b550" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du ll lm ln kr b">new RegExp('https://jsonplaceholder.typicode.com/users')</code>。</p><p id="14e2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在只需在<strong class="ig hi"> src-sw.js </strong>文件中将路线注册在<code class="du ll lm ln kr b">console.log('this is my custom service worker');</code>下。</p><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="ko kp l"/></div></figure><p id="437b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">让我们通过运行<code class="du ll lm ln kr b">npx workbox injectManifest</code>来重新生成服务工作者文件。</p><p id="9790" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我鼓励你看一看<code class="du ll lm ln kr b">build/sw.js</code>中新产生的服务人员，以确保你在头脑中强化这些概念。</p><h2 id="3b8c" class="kv jf hh bd jg lq lr ls jk lt lu lv jo ip lw lx js it ly lz jw ix ma mb ka mc bi translated">上菜</h2><p id="11a0" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">如果您停止提供您的应用程序，您可以通过运行<code class="du ll lm ln kr b">npm run serve</code>再次提供。</p><p id="b4a0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">然后重新加载页面一次，以获得新的服务工作者，然后再次重新加载，以在缓存中缓存<code class="du ll lm ln kr b">/users</code>的响应(使用新的服务工作者代码)，然后离线。</p><figure class="kj kk kl km fd kn er es paragraph-image"><div role="button" tabindex="0" class="lb lc di ld bf le"><div class="er es mg"><img src="../Images/9e665b07fec7c51d81a597a881d5bc72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*D0h9TanqrKM7zH0a17NemA.jpeg"/></div></div><figcaption class="lh li et er es lj lk bd b be z dx">/users is served from ServiceWorker</figcaption></figure><p id="434e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">检查对<code class="du ll lm ln kr b">/users</code>的<code class="du ll lm ln kr b">fetch</code>请求是如何从缓存中得到服务的。</p><h1 id="5c02" class="je jf hh bd jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz ka kb bi translated">🚀搞定了。</h1><p id="94ad" class="pw-post-body-paragraph ie if hh ig b ih kc ij ik il kd in io ip ke ir is it kf iv iw ix kg iz ja jb ha bi translated">这样，您就可以更深入地研究workbox并构建令人敬畏的pwa了。</p><p id="1e31" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">非常感谢<a class="ae jc" href="https://github.com/GoogleChrome/workbox#core-team" rel="noopener ugc nofollow" target="_blank"> Workbox核心团队</a>构建了一个非常棒的库。</p><p id="7d67" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="kh ki ge" href="https://medium.com/u/3fb739097395?source=post_page-----156803952b3e--------------------------------" rel="noopener" target="_blank">杰弗里·波斯尼克</a>，<a class="kh ki ge" href="https://medium.com/u/17196521ef2d?source=post_page-----156803952b3e--------------------------------" rel="noopener" target="_blank">马特·冈特</a>，<a class="kh ki ge" href="https://medium.com/u/2508e4c7a8ec?source=post_page-----156803952b3e--------------------------------" rel="noopener" target="_blank">艾迪·奥斯马尼</a>，菲利普·沃顿<a class="kh ki ge" href="https://medium.com/u/d5243409b984?source=post_page-----156803952b3e--------------------------------" rel="noopener" target="_blank">普拉蒂克·巴特纳加尔</a> &amp; <a class="kh ki ge" href="https://medium.com/u/c8187519a8ef?source=post_page-----156803952b3e--------------------------------" rel="noopener" target="_blank">凯茜·巴斯奎斯</a></p></div><div class="ab cl mh mi go mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ha hb hc hd he"><p id="9da9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">查看我的互动课程:</p><ul class=""><li id="1093" class="mo mp hh ig b ih ii il im ip mq it mr ix ms jb mt mu mv mw bi translated"><a class="ae jc" href="https://learnprogramming.online" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">学编程</strong> </a></li><li id="1c96" class="mo mp hh ig b ih mx il my ip mz it na ix nb jb mt mu mv mw bi translated"><a class="ae jc" href="http://learnjavascript.online/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">学习JavaScript </strong> </a></li><li id="ef62" class="mo mp hh ig b ih mx il my ip mz it na ix nb jb mt mu mv mw bi translated"><a class="ae jc" href="https://react-tutorial.app/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">反应过来教程</strong> </a></li></ul></div><div class="ab cl mh mi go mj" role="separator"><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm mn"/><span class="mk bw bk ml mm"/></div><div class="ha hb hc hd he"><p id="1d61" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在开始使用Workbox之前，您是否正在寻找渐进式Web应用程序的介绍？那就来看看下面的视频系列吧！</p><figure class="kj kk kl km fd kn"><div class="bz dy l di"><div class="nc kp l"/></div></figure></div></div>    
</body>
</html>