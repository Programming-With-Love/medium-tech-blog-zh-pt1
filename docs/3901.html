<html>
<head>
<title>Pathway to cleaner code</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">通向更干净代码的途径</h1>
<blockquote>原文：<a href="https://medium.com/globant/pathway-to-cleaner-code-bde0c7b7b06e?source=collection_archive---------0-----------------------#2022-06-28">https://medium.com/globant/pathway-to-cleaner-code-bde0c7b7b06e?source=collection_archive---------0-----------------------#2022-06-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="05d8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于一个开发团队来说，拥有一致且可维护的代码库变得很困难。由于不同开发人员对语言和约定风格的经验水平不同，代码变得难以理解和维护。</p><p id="1d85" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这就是雨燕前来救援的地方。It <strong class="ig hi"> </strong>是一个强制执行swift风格和惯例的工具，其结果是一个更易于管理、可读性和可理解的代码库。</p><p id="e766" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">SwiftLint基于<a class="ae jc" href="https://github.com/github/swift-style-guide" rel="noopener ugc nofollow" target="_blank"> Swift风格指南</a>的指导方针。</p><p id="b9c3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以基本上它帮助我们:</p><ul class=""><li id="816b" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">维护更高水平的代码纪律</li><li id="e270" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">增加代码的可靠性</li></ul><p id="dbe4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">规则:</strong></p><p id="75c0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">SwiftLint执行Swift社区普遍接受的风格指南规则。swift lint中包含200多条规则。规则列表及其信息可以在<a class="ae jc" href="https://realm.github.io/SwiftLint/rule-directory.html" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="f91a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">规则包含:</strong></p><ul class=""><li id="f16a" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated"><strong class="ig hi">禁用规则:</strong>禁用默认启用集合中的规则(例如-冒号，-逗号，-控制语句)</li><li id="cee0" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated"><strong class="ig hi"> opt_in_rules: </strong>默认情况下它们是禁用的(即，您必须在您的配置文件中显式启用它们)。何时将规则标记为选择加入的准则:</li><li id="aacc" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">可能有许多误报的规则(例如，empty_count)</li><li id="217d" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">太慢的规则</li><li id="f1a1" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated">不是普遍认同的规则或仅在某些情况下有用的规则(例如，强制展开)</li><li id="32cc" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated"><strong class="ig hi"> only_rules: </strong>只有该列表中指定的规则才会被启用。不能与disabled_rules或opt_in_rules一起指定。</li><li id="a203" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated"><strong class="ig hi"> analyzer_rules: </strong>这是一个完全独立的规则列表，仅由analyze命令运行。所有分析器规则都是选择加入的，因此这是唯一可配置的规则列表；disabled_rules only_rules没有对等项。</li><li id="f026" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated"><strong class="ig hi"> custom_rules: </strong>可以在配置文件中定义基于正则表达式的自定义规则。如果将自定义规则与only_rules结合使用，请确保将自定义规则作为项目添加到only_rules下。</li><li id="de18" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb ji jj jk jl bi translated"><strong class="ig hi">禁用内嵌规则</strong>:</li></ul><p id="f7c7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> * </strong>可以使用源文件中的注释禁用规则，格式如下:</p><p id="1a6a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">swiftlint:disable &lt;rule1&gt; [&lt;rule2&gt; &lt;rule3&gt;…]</em></strong></code></p><p id="be53" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> * </strong>规则将被禁用，直到文件结束，或者直到linter看到匹配的启用注释:</p><p id="fc9c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">swiftlint:enable &lt;rule1&gt; [&lt;rule2&gt; &lt;rule3&gt;…]</em></strong></code></p><p id="0f3e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例子</p><figure class="jw jx jy jz fd ka"><div class="bz dy l di"><div class="kb kc l"/></div></figure><ul class=""><li id="474e" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">包含all关键字将禁用<code class="du jr js jt ju b">all</code>规则，直到linter看到匹配的启用注释</li></ul><p id="4704" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">swiftlint:disable all</em></strong></code></p><p id="495a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">swiftlint:enable all</em></strong></code></p><p id="68ec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">示例:</p><figure class="jw jx jy jz fd ka"><div class="bz dy l di"><div class="kb kc l"/></div></figure><ul class=""><li id="b5f1" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">也可以通过添加<code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">:previous, :this or :next</em></strong></code>来修改禁用或启用命令，以便仅将命令分别应用于上一行、当前行或下一行。</li></ul><p id="f31b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">示例:</p><figure class="jw jx jy jz fd ka"><div class="bz dy l di"><div class="kb kc l"/></div></figure><ul class=""><li id="4187" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">您可以在Xcode项目中隐藏Pod警告，方法是为所有第三方依赖项在Pod文件中添加<code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">inhibit_all_warnings</em></strong><em class="jv">!</em></code>，或者为特定依赖项添加:inhibit_warnings = &gt; true。比如:</li></ul><figure class="jw jx jy jz fd ka"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="3228" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要全面了解规则，请访问此处的<a class="ae jc" href="https://github.com/realm/SwiftLint" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="b5da" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">错误/警告:</strong></p><p id="7e1f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">错误/警告看起来像Xcode的示例:</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es kd"><img src="../Images/469de45fe24b24f2cb1587d116358e2a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*-nNJp9bdDE6-Mshc"/></div></div></figure><p id="2530" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">关于swiftlint的酷事:</strong></p><ol class=""><li id="5ff6" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb kk jj jk jl bi translated"><strong class="ig hi">多个配置文件:</strong>有些情况下，需要有一个项目级配置，同时允许通过子配置在每个项目中覆盖。这可以通过添加多个配置文件轻松实现。这些文件被合并到一个配置中，然后作为单个配置文件应用。</li></ol><figure class="jw jx jy jz fd ka"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="4fad" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"> 2。自动纠正:</strong> Swift lint可以通过运行命令自动纠正某些违规:<code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">swiftlint autocorrect</em></strong></code></p><p id="1ec0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">注意:</strong>该命令会用正确的版本覆盖光盘上的文件，因此请确保在运行该命令之前备份文件。</p><p id="08ea" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.你也可以在你的配置文件中使用环境变量，通过在一个字符串中使用<code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">${SOME_VARIABLE}</em></strong></code> <strong class="ig hi"> <em class="jv"> </em> </strong>。</p><p id="47c7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">安装:</strong></p><ol class=""><li id="bf21" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb kk jj jk jl bi translated">使用<a class="ae jc" href="http://brew.sh/" rel="noopener ugc nofollow" target="_blank">自制</a> : <code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">brew install swiftlint</em></strong></code></li><li id="eedd" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb kk jj jk jl bi translated">使用<a class="ae jc" href="https://cocoapods.org/" rel="noopener ugc nofollow" target="_blank"> CocoaPods </a> : <code class="du jr js jt ju b"> <strong class="ig hi"><em class="jv">pod ‘SwiftLint’ s</em></strong></code>暗示将此添加到您的Podfile中</li><li id="468f" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb kk jj jk jl bi translated">使用<a class="ae jc" href="https://github.com/yonaskolb/mint" rel="noopener ugc nofollow" target="_blank">薄荷</a> : <code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">$ mint install realm/SwiftLint</em></strong></code></li><li id="fb63" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb kk jj jk jl bi translated">使用预构建的包:通过从<a class="ae jc" href="https://github.com/realm/SwiftLint/releases/latest" rel="noopener ugc nofollow" target="_blank">最新的GitHub版本</a>下载<code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">SwiftLint.pkg</em></strong></code>来安装SwiftLint并运行它。</li><li id="893d" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb kk jj jk jl bi translated">从源代码安装:通过从这里的<a class="ae jc" href="https://github.com/realm/SwiftLint" rel="noopener ugc nofollow" target="_blank">克隆项目并运行<code class="du jr js jt ju b">“<strong class="ig hi"><em class="jv">make install</em></strong>” </code> (Xcode 13或更高版本)，从源代码构建并安装。</a></li></ol><p id="6040" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">整合:</strong></p><p id="c921" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要将Swiftlint与xcode集成，请遵循以下步骤:</p><ol class=""><li id="a394" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb kk jj jk jl bi translated">在文件导航器中选择项目</li><li id="70ff" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb kk jj jk jl bi translated">选择项目并转到“构建阶段”</li><li id="db60" class="jd je hh ig b ih jm il jn ip jo it jp ix jq jb kk jj jk jl bi translated">选择“+”并添加“新运行脚本阶段”</li></ol><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es kd"><img src="../Images/858f8367d77d17c45dd87da5d0e757b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ZCArFffCmSG5T2lu"/></div></div></figure><ol class=""><li id="21a2" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb kk jj jk jl bi translated">插入以下内容作为脚本:</li></ol><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es kd"><img src="../Images/30a292a84d8de270860729554904ad6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Y547ktzaWpr9J4Vv"/></div></div></figure><p id="ffcc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">奖励提示</strong>:</p><ul class=""><li id="eaa9" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">可以使用命令检查所有规则:</li></ul><p id="af48" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">$ swiftlint rules</em></strong></code></p><ul class=""><li id="22df" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">如果您还希望修复违规，您的脚本可以运行:</li></ul><p id="aebf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">swiftlint — fix &amp;&amp; swiftlint</em></strong></code></p><ul class=""><li id="2e55" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">如果您已经通过CocoaPods安装了SwiftLint，脚本应该是这样的:</li></ul><p id="7fbe" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">${PODS_ROOT}/SwiftLint/swiftlint</em></strong></code></p><ul class=""><li id="5e39" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">SwiftLint可以作为<a class="ae jc" href="https://pre-commit.com/" rel="noopener ugc nofollow" target="_blank"> <strong class="ig hi">预提交</strong> </a>钩子运行。一旦<a class="ae jc" href="https://pre-commit.com/#install" rel="noopener ugc nofollow" target="_blank">安装了</a>，将它添加到您的存储库根目录下的pre-commit-config.yaml中:</li></ul><figure class="jw jx jy jz fd ka"><div class="bz dy l di"><div class="kb kc l"/></div></figure><p id="423c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">注意:</strong>根据您选择的SwiftLint版本调整rev。</p><ul class=""><li id="ee83" class="jd je hh ig b ih ii il im ip jf it jg ix jh jb ji jj jk jl bi translated">通过在Xcode中配置一个设置，可以很容易地修复一些类似“<code class="du jr js jt ju b"><strong class="ig hi"><em class="jv">Trailing whitespace violations</em></strong></code>”的警告</li></ul><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es kl"><img src="../Images/04732f681887b87021f817ca90f9ffb8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*ulJXG9UKKglpe2ai"/></div></div></figure><p id="2fb8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">就是这样。安装SwiftLint，将配置文件添加到您的根目录，并lint up您的项目！</p><p id="b91e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在您可以高枕无忧，在开发人员之间拥有一致且可管理的代码。</p><figure class="jw jx jy jz fd ka er es paragraph-image"><div role="button" tabindex="0" class="ke kf di kg bf kh"><div class="er es km"><img src="../Images/a5eff2cfeccd1a5fb97d89a628407651.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OA3W94z-vxAa8GlHbY-oug.jpeg"/></div></div><figcaption class="kn ko et er es kp kq bd b be z dx">Image by <a class="ae jc" href="https://pixabay.com/users/alexas_fotos-686414/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1073427" rel="noopener ugc nofollow" target="_blank">Alexas_Fotos</a> from <a class="ae jc" href="https://pixabay.com/?utm_source=link-attribution&amp;utm_medium=referral&amp;utm_campaign=image&amp;utm_content=1073427" rel="noopener ugc nofollow" target="_blank">Pixabay</a></figcaption></figure><p id="3d1a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi">参考文献</strong></p><p id="a30c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://cocoapods.org/pods/SwiftLint" rel="noopener ugc nofollow" target="_blank">https://cocoapods.org/pods/SwiftLint</a></p><p id="f068" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" href="https://github.com/realm/SwiftLint" rel="noopener ugc nofollow" target="_blank">https://github.com/realm/SwiftLint</a></p><p id="e955" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><a class="ae jc" rel="noopener" href="/developerinsider/how-to-use-swiftlint-with-xcode-to-enforce-swift-style-and-conventions-368e49e910">https://medium . com/developer insider/how-to-use-swift lint-with-xcode-to-enforce-swift-style-and-conventions-368e 49 e 910</a></p><p id="2248" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">GitHub链接:【https://github.com/realm/SwiftLint T2】</p><p id="9d7b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Swift API指南:【https://www.swift.org/documentation/api-design-guidelines/ T4】</p></div></div>    
</body>
</html>