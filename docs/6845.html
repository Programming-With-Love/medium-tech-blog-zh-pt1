<html>
<head>
<title>WebRTC: advantages, technical hurdles, and a case study</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">WebRTC:优势、技术障碍和案例研究</h1>
<blockquote>原文：<a href="https://medium.com/quick-code/webrtc-advantages-technical-hurdles-and-a-case-study-4737d6ccd1a0?source=collection_archive---------0-----------------------#2020-04-30">https://medium.com/quick-code/webrtc-advantages-technical-hurdles-and-a-case-study-4737d6ccd1a0?source=collection_archive---------0-----------------------#2020-04-30</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="f389" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">WebRTC是一种浏览器技术，旨在使用点对点传输技术在浏览器或应用程序之间传输流数据。</p><p id="e89c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这项技术很有吸引力，因为它允许您仅使用一个浏览器在用户之间建立连接。对于许多开发人员来说，当他们了解WebRTC时，这变成了一个发现:您可以创建一个视频聊天，而不需要使用第三方服务器，您只需要一个浏览器——这很酷！</p><p id="da2f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">WebRTC不需要安装额外的插件。你只需要用JavaScript编写代码，视频流就能在浏览器中流畅地运行。</p><p id="fd7d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您不仅可以为视频聊天实现WebRTC该技术允许传输任何格式的文件和文本信息。</p><h1 id="d5d3" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">WebRTC的API</h1><p id="e571" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">WebRTC有相当多的功能和工具。我们将描述这项技术的三个API。</p><h2 id="8d29" class="kf jd hh bd je kg kh ki ji kj kk kl jm ip km kn jq it ko kp ju ix kq kr jy ks bi translated">1.getUserMedia</h2><p id="0720" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">API允许您从浏览器管理用户设备。您可以选择:</p><ul class=""><li id="89d4" class="kt ku hh ig b ih ii il im ip kv it kw ix kx jb ky kz la lb bi translated">应该用来广播视频的摄像机</li><li id="2419" class="kt ku hh ig b ih lc il ld ip le it lf ix lg jb ky kz la lb bi translated">所需的麦克风</li><li id="5f26" class="kt ku hh ig b ih lc il ld ip le it lf ix lg jb ky kz la lb bi translated">广播图像的质量</li></ul><p id="e083" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这样的设置有助于优化项目。为了加快工作速度，高质量的图像可以缩小到360像素。由于这一点，用户不依赖于设备设置:他们可以设置自己的质量限制。</p><p id="d5aa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">噪声控制算法也很有帮助:它有效地消除了音频流中的噪声和背景声音。</p><h2 id="623b" class="kf jd hh bd je kg kh ki ji kj kk kl jm ip km kn jq it ko kp ju ix kq kr jy ks bi translated">2.RTCPeerConnection</h2><p id="9130" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">这个API包含了点对点(P2P)技术，它是两个浏览器的直接结合，不使用服务器。因此，视频流可以从一个设备直接传输到另一个设备。</p><p id="ed58" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">RTCPeerConnection内部有一个重要的特性——内置对Stun/Turn服务器的支持，需要绕过NAT提供者，由于这个原因，视频流可能无法到达用户。</p><p id="462e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">开发人员可以作为单个用户访问Stun/Turn服务器，并接收一个干净的地址来传输视频流。然后，您可以从另一个用户连接到Stun/Turn服务器并重新连接。这样，就避免了由于NAT技术导致的用户连接故障和问题。</p><h2 id="b006" class="kf jd hh bd je kg kh ki ji kj kk kl jm ip km kn jq it ko kp ju ix kq kr jy ks bi translated">3.rtcdataschannel</h2><p id="761f" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">使用RTCDataChannel，可以与视频流并行传输各种格式的文本和文件。</p><p id="ae8f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">多亏了这个API，您可以为应用程序用户开发一个简单快速的聊天工具。它不需要在服务器上安装，它可以重写和传输任何格式的文件，最大为4 GB(如果浏览器允许，甚至更多)。</p><h1 id="3460" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">Flash到WebRTC的迁移</h1><p id="2495" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">Flash技术已经过时了，现在对于我们的浏览器来说几乎已经死了。因此，将使用Flash开发的项目转移到包括WebRTC在内的其他技术(以防您还没有这样做)是很重要的。</p><p id="07b2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一个小题外话:我有一篇关于从Flash/Flex迁移到HTML5和JS的文章。你可以在这里阅读<a class="ae li" rel="noopener" href="/quick-code/project-migration-from-flex-to-angular-js-html5-ba43f54676ed"><em class="lh"/></a><em class="lh">。</em></p><p id="8087" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">所以，WebRTC允许你以视频文件或直播流的形式展示不方便玩家的视频，传输任何格式的文件和文本消息。此外，这是一种全新的优化技术，具有许多内部设置，不需要安装额外的服务器或插件。</p><p id="7798" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">WebRTC不是Flash的替代品:它是一个工具，使用它可以部分实现Flash的功能。</p><figure class="lk ll lm ln fd lo er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lj"><img src="../Images/5123033dfe51dc3b3c5d748f03868eae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OtpidHkGi9x0JL_w"/></div></div></figure><h1 id="1ad4" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">技术障碍</h1><p id="e104" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">WebRTC技术有它的困难——它使用TCP和UDP协议。</p><p id="ab80" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">TCP协议的独特之处在于它无丢失地传输数据:用户接收到的是稳定的图像，视频没有丢失也没有损坏。但是该协议对数据传输量有限制。例如，您无法同时向五个人传输全高清视频。</p><p id="5ab3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">UDP协议解决了这个问题。有了它，用户可以不受限制地传输高质量的图像和视频。但是这个协议也有一个缺点:它允许数据包丢失。传输的文件很有可能会损坏:图像可能会抖动，像素可能会可见，等等。</p><p id="4fd6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这个缺点可以通过连接到第三方服务器来克服。如果正在开发一个基于WebRTC的大型项目，其中连接将发生在数百个用户之间，那么您需要使用一些额外的服务器来减少浏览器的负载。</p><h1 id="9523" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">WebRTC最适合哪些项目？</h1><p id="7933" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">最初，WebRTC被设想和计划使用对等技术创建视频会议，而不使用任何额外的服务器。因此，该技术非常适合基于浏览器的视频会议。它就像是浏览器中功能齐全的Skype功能。</p><h1 id="1398" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">WebRTC安全吗？</h1><p id="2fa6" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">WebRTC不使用可以实现数据保护的第三方服务。尽管如此，这项技术是通过成熟的网络协议来确保数据传输的安全性。</p><h1 id="66b1" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">WebRTC分析</h1><p id="368b" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">在谷歌Chrome浏览器中，有一个单独的页面，您可以在其中使用WebRTC技术监控数据传输。它反映了连接的所有统计数据:传输的数据包数量、声音和视频的质量、Stun/Turn服务器使用的浏览器负载。</p><h1 id="dee3" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">案例研究:在线舞蹈学校</h1><p id="29c8" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">我们公司使用WebRTC技术的项目是一个学习如何跳舞的在线团体学校。16名用户必须参与该课程:一名教师和15名学生。</p><figure class="lk ll lm ln fd lo er es paragraph-image"><div role="button" tabindex="0" class="lp lq di lr bf ls"><div class="er es lv"><img src="../Images/514de29eff131d91039d658845fc2e5e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*1d95LboOVcGCnxN6"/></div></div><figcaption class="lw lx et er es ly lz bd b be z dx"><em class="ma">Unfortunately, I can’t demonstrate the actual screenshots but this is kind of what it looks like</em></figcaption></figure><p id="3d84" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">项目中最困难的任务是为学生实现15个视频流的完美同步。</p><p id="7902" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">同步问题源于这样一个事实，即每个用户都有不同的连接速度、位置和互联网服务提供商。因此，我们的专家部署了一个收集所有视频流的媒体服务器Wowza。然后我们把媒体服务器和应用网站放在亚马逊上，为用户的设备减少了过载。在服务器上执行视频流的计算、处理、同步和多路复用；老师和学生收到准备播放的材料。</p><p id="a825" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">同步是通过FFmpeg实现的——一种允许您灵活方便地处理音频和视频流传输的工具。</p><p id="3a06" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">我们需要找到一种解决方案，在不使用第三方系统的情况下显示视频流。我们决定使用WebRTC技术，事实证明它是通过浏览器进行视频流传输的完美解决方案。</p><p id="3651" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">因此，我们成功地实施了创建在线舞蹈学校的项目。目前，这项服务的工作正在进行中。我们正在开发一个类似的移动应用程序，以满足客户的需求。</p><p id="6643" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">点击查看完整的项目描述<a class="ae li" href="https://intexsoft.com/portfolio/online-dance-school/" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="4953" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在我们的文章中，我描述了我们使用WebRTC的经验。说说你的吧。请在下面的评论区告诉我你的意见，我会很高兴阅读它们。</p></div></div>    
</body>
</html>