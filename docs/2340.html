<html>
<head>
<title>Akses Mudah Database via API</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">Akses Mudah Database via API</h1>
<blockquote>原文：<a href="https://medium.easyread.co/membuat-reusable-akses-database-via-api-279fdd5ec0fb?source=collection_archive---------3-----------------------#2018-10-14">https://medium.easyread.co/membuat-reusable-akses-database-via-api-279fdd5ec0fb?source=collection_archive---------3-----------------------#2018-10-14</a></blockquote><div><div class="fc ib ic id ie if"/><div class="ig ih ii ij ik"><div class=""/><p id="0485" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Membuat <em class="ki"> reusable </em> koneksi database via API</p><p id="f709" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Salah satu mindset sebagai programmer adalah melihat suatu masalah dan mencari solusi yang reusable. Dalam software development, solusi reusable bisa dalam bentuk fungsi, library,modul atau konsep yang biasa dipakai secara berulang di aplikasi.</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div role="button" tabindex="0" class="kp kq di kr bf ks"><div class="gh gi kj"><img src="../Images/7ba196c32116bc1f4c66724d7e37e32c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*t_rw9wxsBxEnUCL6"/></div></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">“person holding 3x3 Rubik's Cube” by <a class="ae kz" href="https://unsplash.com/@neonbrand?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">NeONBRAND</a> on <a class="ae kz" href="https://unsplash.com?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="f41a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> Background </strong></p><p id="ad8a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Apapun aplikasi yang kita bangun, biasanya resources yang paling sering digunakan adalah database. Bahkan mungkin aplikasi tertentu hanya dibangun untuk query dan manipulasi data di database.</p><p id="70fd" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Terlepas dari tipe aplikasi monolithic atau microservice, komunikasi ke server database umumnya dibuat di internal aplikasi sebagai berikut:</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi la"><img src="../Images/59970339391622e2c67aa3c196400712.png" data-original-src="https://miro.medium.com/v2/resize:fit:908/format:webp/1*Q-1WCU2d0n1nCVi3h9hRoA.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Komunikasi database per-aplikasi</figcaption></figure><p id="ed43" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Arsitektur diatas adalah cara mudah, cepat dan mungkin banyak diimplementasi oleh developer. Akan tetapi ketika ada kebutuhan penambahan aplikasi atau service baru yang membutuhkan database yang sama bisa kita bayangkan betapa banyaknya koneksi dan implementasi yang dibuat di masing-masing aplikasi.</p><p id="d41a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Kekurangan dari arsitekur ini menurut saya adalah sebagai berikut:</p><ol class=""><li id="934e" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lg lh li lj bi translated">Implementasi koneksi pooling dimasing-masing aplikasi sedikit banyak akan memakan resource aplikasi. Semakin banyak aplikasi semakin banyak resource terbuang.</li><li id="6d98" class="lb lc in jm b jn lk jr ll jv lm jz ln kd lo kh lg lh li lj bi translated">Kita tidak tahu seberapa besar efesiensi per aplikasi atau service menggunakan koneksi database. Karena bisa jadi 1 aplikasi hanya menggunakan komunikasi database sepersekian saja dan sisanya service yang lain.</li></ol><p id="22f9" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Disinilah konsep microservice khususnya bicara <em class="ki"> independent resource </em> bisa kita terapkan dengan membuat layer baru berupa API koneksi ke database atau saya sebut dengan istilah API-DB,</p><figure class="kk kl km kn gt ko gh gi paragraph-image"><div class="gh gi lp"><img src="../Images/8e11ece47fe4f45aa17edc4cf72ca8de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1088/format:webp/1*_dFXvL-YAm9rwXXCOgQGew.png"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Komunikasi database menggunakan middleware API-DB</figcaption></figure><p id="73ed" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">API-DB merupakan middleware aplikasi untuk handle komunikasi ke database, diantara fungsinya sebagai berikut :</p><ol class=""><li id="5390" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lg lh li lj bi translated">Convert http restAPI menjadi operation query ke database dengan custom query dan parameter yang flexible.</li><li id="047b" class="lb lc in jm b jn lk jr ll jv lm jz ln kd lo kh lg lh li lj bi translated">Response query database selanjutnya diconvert menjadi json dan dikembalikan sebagai response ke Client.</li></ol><p id="dd1e" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Dengan implementasi arsitektur diatas kita bisa mendapatkan beberapa benefit berikut :</p><ol class=""><li id="adf3" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lg lh li lj bi translated">Integrasi yang mudah untuk aplikasi/service yang baru yang membutuhkan koneksi ke database. Cukup dengan menyediakan method call Http Request dan parsing result dari Http Response.</li><li id="1a4d" class="lb lc in jm b jn lk jr ll jv lm jz ln kd lo kh lg lh li lj bi translated">Resource penggunaan koneksi database yang lebih efisien karena hanya apps/service yang membutuhkan saja yang akan membuat koneksi berupa http ke API-DB.</li><li id="762a" class="lb lc in jm b jn lk jr ll jv lm jz ln kd lo kh lg lh li lj bi translated">Monitoring dan segmentasi yang jelas antara layer database dan aplikasi, sehingga kita bisa melakukan penambahan koneksi dan efisiensi cukup di layer API-DB (misal dengan menambahkan mekanisme caching).</li></ol><p id="eff1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated"><strong class="jm io"> Implementasi </strong></p><p id="3d03" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Implementasi API-DB ini bisa kita buat dengan bahasa pemrograman apa saja dengan memperhatikan beberapa hal berikut:</p><ol class=""><li id="dede" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lg lh li lj bi translated"><strong class="jm io"> Security </strong> , setiap API dibuat dengan tujuan menggunakan resource yang ada dibelakangnya. Oleh karenanya seberapa penting implementasi security bergantung seberapa <em class="ki"> confidential </em> resource data yang akan diakses.</li><li id="398e" class="lb lc in jm b jn lk jr ll jv lm jz ln kd lo kh lg lh li lj bi translated"><strong class="jm io"> Request </strong> , karena kita akan membuat middleware yang akan dipakai oleh beberapa aplikasi untuk komunikasi database, maka diperlukan standard parameter input, untuk API-DB bisa kita define sebagai berikut:</li></ol><ul class=""><li id="0ff1" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lq lh li lj bi translated"><em class="ki"> datasource: </em> parameter yang dibutuhkan untuk koneksi ke database seperti server database, username, maximum pooling, connection dan expiry time connection</li><li id="1058" class="lb lc in jm b jn lk jr ll jv lm jz ln kd lo kh lq lh li lj bi translated"><em class="ki"> query_id: </em> query yang akan kita panggil dengan menggunakan id</li></ul><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="lr ls l"/></div><figcaption class="kv kw gj gh gi kx ky bd b be z dk">Konfigurasi datasource dan query id yang akan digunakan</figcaption></figure><ul class=""><li id="e076" class="lb lc in jm b jn jo jr js jv ld jz le kd lf kh lq lh li lj bi translated"><em class="ki"> custom parameter, </em> custom parameter yang dimaksudkan disini adalah parameter query yang nantinya akan dimasukan ke dalam query melalui API</li></ul><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="fa61" class="ly lz in lu b gy ma mb l mc md">sqlid.user2=" SELECT * from `user` where <strong class="lu io">id=[id]</strong> limit 10"</span></pre><p id="7663" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">dengan config diatas, kita bisa isi variable <strong class="jm io"> id </strong> dengan parameter dari api yang kita panggil.</p><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="54db" class="ly lz in lu b gy ma mb l mc md">curl -X GET "http://localhost:8080/v1/query/select?ds=localhost&amp;sqlid=user2&amp;<strong class="lu io">id=1</strong>" -H "accept: application/json"</span></pre><p id="d08a" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">3. <strong class="jm io"> Response </strong> , response bisa dibuatkan standard dalam bentuk json sehingga client apapun bisa consume dengan mudah.</p><pre class="kk kl km kn gt lt lu lv lw aw lx bi"><span id="306b" class="ly lz in lu b gy ma mb l mc md">result:<br/>{<br/>"count": 10,<br/>"data": [<br/>  {<br/>    "email": "slene",<br/>    "id": "1",<br/>    "name": "testing"<br/>  },<br/>  {<br/>    "email": "someemail@someemailprovider.com",<br/>    "id": "2",<br/>    "name": "First"<br/>  },<br/>  {<br/>    "email": "someemail@someemailprovider.com",<br/>    "id": "3",<br/>    "name": "First"<br/>  }<br/>  ....<br/>],<br/>"desc": "-",<br/>"success": true<br/>}</span></pre><p id="7aef" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Untuk full implementasinya bisa didapat di github saya berikut, versi golang</p><div class="me mf gp gr mg mh"><a href="https://github.com/qomarullah/godb" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd io gy z fp mm fr fs mn fu fw im bi translated">qomarullah/godb</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">api query DB with go lang. Contribute to qomarullah/godb development by creating an account on GitHub.</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">github.com</p></div></div><div class="mq l"><div class="mr l ms mt mu mq mv kt mh"/></div></div></a></div><p id="08f1" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">atau versi java berikut</p><div class="me mf gp gr mg mh"><a href="https://github.com/qomarullah/apidb" rel="noopener  ugc nofollow" target="_blank"><div class="mi ab fo"><div class="mj ab mk cl cj ml"><h2 class="bd io gy z fp mm fr fs mn fu fw im bi translated">qomarullah/apidb</h2><div class="mo l"><h3 class="bd b gy z fp mm fr fs mn fu fw dk translated">layering db connection with rest api. Contribute to qomarullah/apidb development by creating an account on GitHub.</h3></div><div class="mp l"><p class="bd b dl z fp mm fr fs mn fu fw dk translated">github.com</p></div></div><div class="mq l"><div class="mw l ms mt mu mq mv kt mh"/></div></div></a></div></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><p id="0533" class="pw-post-body-paragraph jk jl in jm b jn jo jp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ig bi translated">Demikian sharing komunikasi database menggunakan API versi saya, terima kasih telah membaca sampai akhir. Kalau menurutmu post ini bermanfaat jangan lupa <strong class="jm io"> follow, share dan clap ya! :) </strong> silahkan juga komentar apabila ada yang kurang jelas atau ingin ditanyakan.</p></div><div class="ab cl mx my hr mz" role="separator"><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc nd"/><span class="na bw bk nb nc"/></div><div class="ig ih ii ij ik"><figure class="kk kl km kn gt ko"><div class="bz fp l di"><div class="ne ls l"/></div></figure></div></div>    
</body>
</html>