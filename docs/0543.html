<html>
<head>
<title>Dark Theme with MDC</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">MDC的黑暗主题</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/dark-theme-with-mdc-4c6fc357d956?source=collection_archive---------1-----------------------#2020-08-25">https://medium.com/androiddevelopers/dark-theme-with-mdc-4c6fc357d956?source=collection_archive---------1-----------------------#2020-08-25</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/8eeed1f20ceb8c8e2cf1700524b670bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*F8MfUuEYcn7EMGtUAe-cYg.png"/></div></div></figure><div class=""/><div class=""><h2 id="48f7" class="pw-subtitle-paragraph ip hr hs bd b iq ir is it iu iv iw ix iy iz ja jb jc jd je jf jg dx translated">使用材料设计组件实现黑暗主题</h2></div><p id="c536" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">在之前的博文中，<a class="kd ke ge" href="https://medium.com/u/37290b859aca?source=post_page-----4c6fc357d956--------------------------------" rel="noopener" target="_blank"> Nick Rout </a>经历了材质主题化的基础，<a class="ae kf" rel="noopener" href="/androiddevelopers/material-theming-with-mdc-color-860dbba8ce2f">颜色</a>，<a class="ae kf" rel="noopener" href="/androiddevelopers/material-theming-with-mdc-type-8c2013430247">排版</a>，<a class="ae kf" rel="noopener" href="/androiddevelopers/material-theming-with-mdc-shape-126c4e5cd7b4">形状</a>的柱子。</p><div class="hg hh ez fb hi kg"><a rel="noopener follow" target="_blank" href="/androiddevelopers/material-theming-with-mdc-color-860dbba8ce2f"><div class="kh ab dw"><div class="ki ab kj cl cj kk"><h2 class="bd ht fi z dy kl ea eb km ed ef hr bi translated">使用MDC的材质主题:颜色</h2><div class="kn l"><h3 class="bd b fi z dy kl ea eb km ed ef dx translated">使用MDC库的Android颜色主题</h3></div><div class="ko l"><p class="bd b fp z dy kl ea eb km ed ef dx translated">medium.com</p></div></div><div class="kp l"><div class="kq l kr ks kt kp ku ho kg"/></div></div></a></div><div class="hg hh ez fb hi kg"><a rel="noopener follow" target="_blank" href="/androiddevelopers/material-theming-with-mdc-type-8c2013430247"><div class="kh ab dw"><div class="ki ab kj cl cj kk"><h2 class="bd ht fi z dy kl ea eb km ed ef hr bi translated">使用MDC的材质主题:类型</h2><div class="kn l"><h3 class="bd b fi z dy kl ea eb km ed ef dx translated">使用MDC库在Android上输入主题</h3></div><div class="ko l"><p class="bd b fp z dy kl ea eb km ed ef dx translated">medium.com</p></div></div><div class="kp l"><div class="kv l kr ks kt kp ku ho kg"/></div></div></a></div><div class="hg hh ez fb hi kg"><a rel="noopener follow" target="_blank" href="/androiddevelopers/material-theming-with-mdc-shape-126c4e5cd7b4"><div class="kh ab dw"><div class="ki ab kj cl cj kk"><h2 class="bd ht fi z dy kl ea eb km ed ef hr bi translated">使用MDC的材质主题:形状</h2><div class="kn l"><h3 class="bd b fi z dy kl ea eb km ed ef dx translated">材料主题化是一种定制材料组件以与您的品牌保持一致的方式。材料主题包括颜色…</h3></div><div class="ko l"><p class="bd b fp z dy kl ea eb km ed ef dx translated">medium.com</p></div></div><div class="kp l"><div class="kw l kr ks kt kp ku ho kg"/></div></div></a></div></div><div class="ab cl kx ky go kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ha hb hc hd he"><p id="5d99" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">这篇文章将以此为基础，看看我们如何调整我们的应用程序来支持黑暗主题。</p><p id="d5d5" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">用户可选择的黑暗主题在Android平台的Android 10中被添加，但这并不意味着它们对应用开发者来说是新的。Android设备的默认主题是黑暗的，直到Android 5.0 ( <a class="ae kf" href="https://developer.android.com/about/versions/lollipop" rel="noopener ugc nofollow" target="_blank"> Lollipop </a>)！</p><p id="5c34" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">去年的不同之处在于，该平台增加了一个设备范围的设置。这意味着用户不仅可以控制设备的主题，还可以控制应用的主题。</p><p id="aaea" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">除了最近的设备范围设置，我们现在还有关于<a class="ae kf" href="https://material.io/" rel="noopener ugc nofollow" target="_blank"> material.io </a>的综合<a class="ae kf" href="https://material.io/design/color/dark-theme.html" rel="noopener ugc nofollow" target="_blank">设计指南</a>，我们将在这篇博文的后面讨论。</p><h1 id="8f02" class="le lf hs bd lg lh li lj lk ll lm ln lo iy lp iz lq jb lr jc ls je lt jf lu lv bi translated">为什么支持黑暗主题？</h1><p id="6221" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">首先，为什么要支持黑暗主题呢？关于<a class="ae kf" href="https://material.io/design/color/dark-theme.html#usage" rel="noopener ugc nofollow" target="_blank">黑暗主题</a>的Material.io页面很好地总结了一些技术优势(重点是我的):</p><blockquote class="mb mc md"><p id="fac1" class="jh ji me jj b jk jl it jm jn jo iw jp mf jr js jt mg jv jw jx mh jz ka kb kc ha bi translated">深色主题会降低设备屏幕发出的亮度[…]。它们有助于<strong class="jj ht">改善视觉人体工程学</strong>，减少眼睛疲劳，根据当前照明条件调整亮度，以及<strong class="jj ht">在黑暗环境中方便屏幕使用</strong>——同时<strong class="jj ht">节省电池电量</strong>【用于有机发光二极管显示器】。</p></blockquote><p id="9cff" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">最重要的原因是你的用户想要它。Android团队增加了全系统的黑暗主题设置，因为它一直是用户要求最多的功能。</p><p id="71c7" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">现在，我已经说服你在你的应用程序中支持黑暗主题，让我们看看你如何添加一个…</p><h1 id="fac2" class="le lf hs bd lg lh li lj lk ll lm ln lo iy lp iz lq jb lr jc ls je lt jf lu lv bi translated">快速启动</h1><p id="444d" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">要给你的应用添加一个黑暗主题，使用<a class="ae kf" href="https://material.io/develop/android/" rel="noopener ugc nofollow" target="_blank">材质设计组件</a> (MDC)获得Android的支持:</p><h2 id="8e73" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">#1:改变你的主题</h2><p id="bcaf" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">您需要更改您的主题，以扩展其中一个<code class="du mw mx my mz b">Theme.MaterialComponents.<strong class="jj ht">DayNight</strong></code>主题:</p><pre class="na nb nc nd fd ne mz nf ng aw nh bi"><span id="c494" class="mi lf hs mz b fi ni nj l nk nl">&lt;style name="Theme.MyApp"<br/>       parent="Theme.MaterialComponents.DayNight"&gt;</span><span id="ce4b" class="mi lf hs mz b fi nm nj l nk nl">    &lt;!-- Other theme attributes --&gt;</span><span id="67f6" class="mi lf hs mz b fi nm nj l nk nl">&lt;/style&gt;</span></pre><h2 id="a6eb" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">#2:选择要进入的模式(可选)</h2><p id="6281" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">这一步是可选的，但是允许你支持运行Android 10之前版本的Android的设备。由于【Android 10之前的大多数设备都没有系统级黑暗主题设置<strong class="jj ht"> * </strong>，应用可以提供自己的应用内设置，让用户选择每个应用使用什么主题。</p><figure class="na nb nc nd fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nn"><img src="../Images/a406a4b57361f18d6eb7d597dc936cd9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*uTcbsMdSGe7oFMfY"/></div></div><figcaption class="no np et er es nq nr bd b be z dx">Example in-app dark theme setting</figcaption></figure><p id="3918" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">这在Android 10+上仍然有用，因为它允许用户按照自己的意愿覆盖系统设置。作为一个例子，假设用户将他们的设备主题设置为按时间表控制，但他们知道他们总是希望他们的社交应用程序使用深色主题。</p><p id="8dbe" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">为此，<a class="ae kf" href="https://developer.android.com/jetpack/androidx/releases/appcompat" rel="noopener ugc nofollow" target="_blank">app compat</a>(MDC使用的)提供了一个API来设置所选择的模式:<code class="du mw mx my mz b">AppCompatDelegate.<a class="ae kf" href="https://developer.android.com/reference/androidx/appcompat/app/AppCompatDelegate#setDefaultNightMode(int)" rel="noopener ugc nofollow" target="_blank">setDefaultNightMode()</a></code>。通常，每当偏好发生变化时，就会调用这个函数。</p><blockquote class="mb mc md"><p id="dd65" class="jh ji me jj b jk jl it jm jn jo iw jp mf jr js jt mg jv jw jx mh jz ka kb kc ha bi translated">*不完全正确。一些设备制造商已经为他们运行Android 9(及以下版本)的设备添加了系统级黑暗主题。不幸的是，在运行时没有办法确定这一点。</p></blockquote><p id="a2df" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">如果你想了解更多关于<a class="ae kf" href="https://developer.android.com/jetpack/androidx/releases/appcompat" rel="noopener ugc nofollow" target="_blank"> AppCompat </a>中的夜间模式功能是如何工作的，请看这篇博文:</p><div class="hg hh ez fb hi kg"><a rel="noopener follow" target="_blank" href="/androiddevelopers/appcompat-v23-2-daynight-d10f90c83e94"><div class="kh ab dw"><div class="ki ab kj cl cj kk"><h2 class="bd ht fi z dy kl ea eb km ed ef hr bi translated">日夜——给你的应用添加一个黑暗主题</h2><div class="kn l"><h3 class="bd b fi z dy kl ea eb km ed ef dx translated">AppCompat中的日夜功能允许您的应用程序在黑暗和光明主题之间轻松切换。</h3></div><div class="ko l"><p class="bd b fp z dy kl ea eb km ed ef dx translated">medium.com</p></div></div><div class="kp l"><div class="ns l kr ks kt kp ku ho kg"/></div></div></a></div><h2 id="1abd" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">#3:测试！</h2><p id="e171" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">这就是我们黑暗主题的基础！现在是时候通过检查应用程序的每个部分来测试它了，包括明主题和暗主题。注意深色背景上的深色文本，以及与深色背景对比度不足的硬编码颜色(通常为灰色)。</p><p id="0bd8" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">如果你在你的应用程序中使用硬编码的颜色值，我推荐阅读Nick Butcher的博客文章，这篇文章谈到了更喜欢的主题属性:</p><div class="hg hh ez fb hi kg"><a rel="noopener follow" target="_blank" href="/androiddevelopers/android-styling-prefer-theme-attributes-412caa748774"><div class="kh ab dw"><div class="ki ab kj cl cj kk"><h2 class="bd ht fi z dy kl ea eb km ed ef hr bi translated">Android风格:偏好主题属性</h2><div class="kn l"><h3 class="bd b fi z dy kl ea eb km ed ef dx translated">所有事物的主题属性</h3></div><div class="ko l"><p class="bd b fp z dy kl ea eb km ed ef dx translated">medium.com</p></div></div><div class="kp l"><div class="nt l kr ks kt kp ku ho kg"/></div></div></a></div><p id="34a4" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">我们在2019年Android开发峰会上的“<a class="ae kf" href="https://www.youtube.com/watch?v=Owkf8DhAOSo" rel="noopener ugc nofollow" target="_blank">主题风格</a>”演讲中也谈到了这一点:</p><figure class="na nb nc nd fd hj"><div class="bz dy l di"><div class="nu nv l"/></div></figure><h1 id="3ce0" class="le lf hs bd lg lh li lj lk ll lm ln lo iy lp iz lq jb lr jc ls je lt jf lu lv bi translated">物质黑暗主题</h1><p id="f40d" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">现在让我们来看看<a class="ae kf" href="https://material.io/design/color/dark-theme.html" rel="noopener ugc nofollow" target="_blank"> Material.io </a>上描述的黑暗主题的设计特点。</p><h2 id="cda9" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">灰色对黑色</h2><p id="be69" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">你可能注意到的第一件事是，深色主题应用的默认背景是<em class="me">而不是</em>黑色，而是深灰色:<code class="du mw mx my mz b">#121212</code>。</p><p id="c42a" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">有很多关于我们为什么选择灰色而不是黑色的讨论，特别是因为Android 10平台使用了黑色背景。这在很大程度上是可用性和节能之间的权衡。</p><p id="14fb" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">在平台中使用纯黑色<code class="du mw mx my mz b">#000000</code>作为背景，允许系统应用程序和表面在有机发光二极管显示器上打开时尽可能少用电。这些系统界面往往非常简单，通常只有文本和简单的图标，所以为了解决对比度问题，我们可以调整文本和图标的颜色。</p><p id="5289" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">然而在应用程序中，你的表面可以包含任何东西:复杂的彩色矢量动画、明亮的图像、对比鲜明的品牌表面等等。将它们放在纯黑色的背景下意味着最终的对比度更高，这会增加眼睛的疲劳。与我们上面提到的文本和图标不同，通常很难或不需要对这些类型的内容进行着色/重新着色来降低对比度，这意味着更亮的背景是解决方案。</p><h2 id="bc50" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">调色板</h2><p id="ae2b" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">接下来，让我们看看你的应用程序的调色板。很可能你的应用程序的调色板是基于亮/白背景的假设选择的，所以当应用程序在暗主题下运行时，我们可能需要对调色板进行一些调整。</p><h2 id="86f3" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">概述材料颜色系统</h2><p id="cdbe" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">我们将在下面大量讨论色调，所以这里有一个关于材质颜色系统的快速回顾。它将颜色定义为每种颜色中的一系列色调。色调编号从<strong class="jj ht"> 50 </strong>(最浅、最不饱和的色调)，到<strong class="jj ht"> 900 </strong>(最深、最饱和的色调)。这是蓝绿色和靛蓝色的基本色调:</p><figure class="na nb nc nd fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nw"><img src="../Images/b3507288dad87fcb18dbe7b0a2723971.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*WjhB0C5iT3iWbpWF"/></div></div><figcaption class="no np et er es nq nr bd b be z dx">Baseline Material color palettes</figcaption></figure><p id="2248" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">您也可以在<a class="ae kf" href="https://material.io/resources/color/" rel="noopener ugc nofollow" target="_blank">材质颜色工具</a>中进行试验，了解不同颜色的色调如何变化。<a class="kd ke ge" href="https://medium.com/u/37290b859aca?source=post_page-----4c6fc357d956--------------------------------" rel="noopener" target="_blank"> Nick Rout </a>也在这里写了一篇关于色系<a class="ae kf" rel="noopener" href="/androiddevelopers/material-theming-with-mdc-color-860dbba8ce2f">的深度剖析。</a></p><h2 id="0d86" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">原色</h2><p id="9422" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">你的应用程序的主要颜色是显示最多的颜色(除了背景和表面颜色)，所以我们需要确保它在深色主题中清晰可见。通常在浅色主题中，你的浅色主题将是一种颜色的<strong class="jj ht"> 500 </strong>色调，而在深色主题中，我们推荐一种饱和度较低且更明亮的色调，通常为<strong class="jj ht"> 200 </strong>，但根据色调的不同可以达到<strong class="jj ht"> 50 </strong>。</p><p id="300e" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">对于您的<code class="du mw mx my mz b">colorPrimaryVariant</code>，我们建议您使用灯光主题中的<code class="du mw mx my mz b">colorPrimary</code>。作为一个粗略的指南:</p><figure class="na nb nc nd fd hj"><div class="bz dy l di"><div class="nx nv l"/></div></figure><p id="fb48" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">这些值只是一个起点。你应该确保在所有使用的标高水平上，所选颜色相对于背景/表面颜色的<a class="ae kf" href="https://www.w3.org/WAI/standards-guidelines/wcag/" rel="noopener ugc nofollow" target="_blank"> WCAG AA </a>对比度至少为<em class="me"> 4.5 </em> <strong class="jj ht"> : </strong> 1。</p><figure class="na nb nc nd fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nw"><img src="../Images/77aeea8c87535c8fd2f0ecc4333555c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*SHftoAeLKL4ZjGLJ"/></div></div></figure><p id="20e2" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated"><a class="ae kf" href="https://material.io/resources/color/" rel="noopener ugc nofollow" target="_blank">材质颜色工具</a>可以方便地进行颜色实验。</p><h2 id="df53" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">彩色二次色</h2><p id="7088" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">对于你的第二种颜色，它和<code class="du mw mx my mz b">colorPrimary</code>的过程是一样的，使用一种不太饱和而更明亮的同色色调。</p><p id="1904" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">基线材质黑暗主题对待<code class="du mw mx my mz b">colorSecondaryVariant</code>和<code class="du mw mx my mz b">colorPrimaryVariant</code>略有不同，对<code class="du mw mx my mz b">colorSecondary</code>和<code class="du mw mx my mz b">colorSecondaryVariant</code>使用相同的色调。</p><p id="2be6" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">同样，作为一个粗略的指南:</p><figure class="na nb nc nd fd hj"><div class="bz dy l di"><div class="nx nv l"/></div></figure><h2 id="22d9" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">表面颜色</h2><p id="9a8f" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated"><a class="ae kf" href="https://material.io/design/color/applying-color-to-ui.html#sheets-and-surfaces" rel="noopener ugc nofollow" target="_blank">大胆的彩色表面</a>可以在常用的组件中很好地表达你的品牌，比如卡片。虽然鲜艳和大胆的颜色在白色背景下效果很好，但它们在深色背景下的易读性就不那么好了。</p><p id="5be5" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">如果设备和/或应用程序已经设置为使用深色主题，应用程序应该将此解读为用户想要一个柔和、不太鲜艳的配色方案。</p><p id="ea58" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">考虑到这一点，即使我们对品牌表面使用柔和的<strong class="jj ht">50</strong>–<strong class="jj ht">200</strong>色调，对于深色主题来说，它仍然可能过于大胆，发出过多的光:</p><figure class="na nb nc nd fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ny"><img src="../Images/0935de52757e23c86504241596f5fde8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*I9VBd2AG9P4b_69Y"/></div></div><figcaption class="no np et er es nq nr bd b be z dx"><strong class="bd lg"><em class="nz">Don’t do this. </em></strong><em class="nz">Demo showing a bottom app bar with a vivid surface color</em></figcaption></figure><p id="0393" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">那么你应该怎么做呢？有两个选项可以一起使用:</p><h2 id="3e73" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">使用主表面</h2><p id="a16b" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">第一步是明显的，在黑暗的主题中不要使用明亮、色彩丰富的表面。Android的Material Design Components通过其<code class="du mw mx my mz b">PrimarySurface</code>风格使这一点变得简单，它在浅色主题的<code class="du mw mx my mz b">Primary</code>颜色和深色主题的<code class="du mw mx my mz b">Surface</code>颜色之间切换。</p><p id="b659" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">让我们看一个例子。比方说我们有一个<code class="du mw mx my mz b"><a class="ae kf" href="https://material.io/develop/android/components/bottom-app-bars/" rel="noopener ugc nofollow" target="_blank">BottomAppBar</a></code>就像上面的例子，我们可以使用<code class="du mw mx my mz b">Widget.MaterialComponents.BottomAppBar.PrimarySurface</code>风格:</p><pre class="na nb nc nd fd ne mz nf ng aw nh bi"><span id="c089" class="mi lf hs mz b fi ni nj l nk nl">&lt;com.google.android.material.bottomappbar.BottomAppBar<br/>   style="Widget.MaterialComponents.BottomAppBar.PrimarySurface" /&gt;</span></pre><p id="9f18" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">如果您有一个非MDC视图，并且希望得到类似的对待，那么您可以使用<code class="du mw mx my mz b">?attr/colorPrimarySurface</code>主题属性:</p><pre class="na nb nc nd fd ne mz nf ng aw nh bi"><span id="9b12" class="mi lf hs mz b fi ni nj l nk nl">&lt;FrameLayout<br/>    android:background="?attr/colorPrimarySurface" /&gt;</span></pre><figure class="na nb nc nd fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es oa"><img src="../Images/58996cdfe9d171aa5dc9b2bd0bbb939f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7T9ioF5F3mnFnyfdFz5HlQ.png"/></div></div><figcaption class="no np et er es nq nr bd b be z dx">Examples showing the PrimarySurface and styles and attribute</figcaption></figure><p id="d222" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">事实上，在浅色主题中使用明亮表面颜色的组件(如<code class="du mw mx my mz b"><a class="ae kf" href="https://material.io/develop/android/components/top-app-bars/" rel="noopener ugc nofollow" target="_blank">MaterialToolbar</a></code>)默认具有相同的行为。你可能会发现你在这里不需要做任何工作。</p><h2 id="7e5b" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">品牌表面颜色</h2><p id="7c30" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">为了巧妙地在你的应用程序的所有表面上表达你的品牌颜色，你可以将你的<code class="du mw mx my mz b">colorSurface</code>设置为<code class="du mw mx my mz b">colorPrimary</code>的计算颜色，当处于深色主题时，具有<strong class="jj ht"> 8% </strong>的不透明度，在<code class="du mw mx my mz b">colorSurface</code>上合成。</p><p id="d7f4" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">对于使用基线主题值的示例:</p><figure class="na nb nc nd fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es nw"><img src="../Images/a8b9d778dca82940a89994864cc2c205.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*HzfX6Yr_E7SWq9s5"/></div></div><figcaption class="no np et er es nq nr bd b be z dx">How to calculate a branded surface color</figcaption></figure><p id="60a7" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">这使得你的品牌可以微妙地应用于整个应用程序，同时仍然保持一个柔和的，低亮度的调色板的意图。</p><h2 id="c5f2" class="mi lf hs bd lg mj mk ml lk mm mn mo lo jq mp mq lq ju mr ms ls jy mt mu lu mv bi translated">制作黑暗主题示例</h2><p id="871b" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">如果你想看一个使用浅色主题的应用程序并添加深色主题的例子，请在这里观看<a class="kd ke ge" href="https://medium.com/u/ed7976045e2f?source=post_page-----4c6fc357d956--------------------------------" rel="noopener" target="_blank"> Liam Spradlin </a>的视频，他为<a class="ae kf" href="https://material.io/design/material-studies/reply.html" rel="noopener ugc nofollow" target="_blank">回复</a>材料研究应用程序制作了一个深色主题:</p><figure class="na nb nc nd fd hj"><div class="bz dy l di"><div class="nu nv l"/></div></figure><p id="02d1" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">我们刚刚浏览了很多关于选择颜色的信息，但是你应该如何在你的Android应用程序中设置这些呢？</p><p id="1bc3" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">我们将依靠我们的主题的一些组织。我们将使用这样的主题结构:</p><figure class="na nb nc nd fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es oa"><img src="../Images/d5e4de389c88ddb4e3301089b754ede4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oEBx7OfQ2nfBNcUScF01Ug.png"/></div></div><figcaption class="no np et er es nq nr bd b be z dx">Theme structure which works well for dark themes</figcaption></figure><p id="1a32" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">这种结构使我们能够轻松地在亮暗主题中改变主题，同时也允许我们在基本主题中重用通用内容。</p><p id="ed27" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">如果你想更多地了解这个结构，我推荐你观看我和尼克·布彻去年做的<a class="ae kf" href="https://chris.banes.dev/talks/2019/developing-themes-with-style-berlin/" rel="noopener ugc nofollow" target="_blank"><strong class="jj ht"/></a>风格主题发展讲座。</p><figure class="na nb nc nd fd hj"><div class="bz dy l di"><div class="nx nv l"/></div><figcaption class="no np et er es nq nr bd b be z dx"><strong class="ak">values/themes.xml</strong></figcaption></figure><figure class="na nb nc nd fd hj"><div class="bz dy l di"><div class="nx nv l"/></div><figcaption class="no np et er es nq nr bd b be z dx"><strong class="ak">values-night/themes.xml</strong></figcaption></figure><h1 id="02a8" class="le lf hs bd lg lh li lj lk ll lm ln lo iy lp iz lq jb lr jc ls je lt jf lu lv bi translated">高程覆盖</h1><p id="9a4d" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">在这篇文章的前面，我们在几个地方提到了测试所有标高的对比度。你可能想知道为什么会这样，因为仰角就是提升表面来投射阴影，对吗？是的，仰角是关于提升表面，但它不仅仅是关于投射阴影。</p><p id="e2e3" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">材质系统中的阴影是由许多<a class="ae kf" href="https://material.io/design/environment/light-shadows.html#light" rel="noopener ugc nofollow" target="_blank">光源</a>投射的，当我们提升表面(使用高度属性)时，我们会将它们提升到光源的方向。就像我们周围的世界一样，当那些光源被表面阻挡时，就会产生阴影。类似地，表面越靠近光源，表面被照亮的越多，从而改变其感知的颜色。</p><p id="ac10" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">对于较亮的表面颜色，例如白色，这种变化是察觉不到的，因为它已经变亮了。但是对于黑暗的表面，它会有很大的影响:</p><figure class="na nb nc nd fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es ob"><img src="../Images/de68104e2966755a324441c5dab7a5e1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/1*Y32Fkb50LgUagcHseD75MA.gif"/></div></div><figcaption class="no np et er es nq nr bd b be z dx">Demo showing elevation overlay at different elevation levels</figcaption></figure><p id="3138" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">这就是<a class="ae kf" href="https://material.io/design/color/dark-theme.html#properties" rel="noopener ugc nofollow" target="_blank">高程覆盖</a>发挥作用的地方。将表面颜色变亮的行为表现为在表面颜色上合成半透明的白色覆盖。海拔越高，覆盖越不透明。</p><p id="46a8" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">回到前面的问题，这就是为什么你需要在不同的高度进行测试。由于可视表面根据高程而变化，您需要确保任何前景色都提供足够的对比度。理想情况下，你设置一个单一的<code class="du mw mx my mz b">onSurface</code>颜色，它适用于你的应用程序中使用的所有高程值。</p><h1 id="0b6d" class="le lf hs bd lg lh li lj lk ll lm ln lo iy lp iz lq jb lr jc ls je lt jf lu lv bi translated">小部件支持</h1><p id="d087" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">材料设计组件中的所有组件都支持标高自动叠加，包括:<a class="ae kf" href="https://material.io/components/android/catalog/top-app-bars/" rel="noopener ugc nofollow" target="_blank">顶部应用栏</a>、<a class="ae kf" href="https://material.io/components/android/catalog/bottom-app-bars/" rel="noopener ugc nofollow" target="_blank">底部应用栏</a>、<a class="ae kf" href="https://material.io/components/android/catalog/bottom-navigation/" rel="noopener ugc nofollow" target="_blank">底部导航</a>、<a class="ae kf" href="https://material.io/components/android/catalog/tab-layout/" rel="noopener ugc nofollow" target="_blank">标签页</a>、<a class="ae kf" href="https://material.io/components/android/catalog/cards/" rel="noopener ugc nofollow" target="_blank">卡片</a>、<a class="ae kf" href="https://material.io/components/android/catalog/dialogs/" rel="noopener ugc nofollow" target="_blank">对话框</a>、<a class="ae kf" href="https://material.io/components/android/catalog/menu/" rel="noopener ugc nofollow" target="_blank">菜单</a>、<a class="ae kf" href="https://material.io/components/android/catalog/bottom-sheet-behavior/" rel="noopener ugc nofollow" target="_blank">底单</a>、<a class="ae kf" href="https://material.io/components/android/catalog/navigation-view/" rel="noopener ugc nofollow" target="_blank">导航抽屉</a> &amp; <a class="ae kf" href="https://material.io/components/android/catalog/switches/" rel="noopener ugc nofollow" target="_blank">开关</a>。</p><p id="1f4a" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">这意味着只要背景设置为<code class="du mw mx my mz b">?attr/colorSurface</code>(显式设置或使用表面样式变量)，使用标准的高程API将自动应用高程覆盖。回到我们之前的例子:</p><figure class="na nb nc nd fd hj"><div class="bz dy l di"><div class="nx nv l"/></div></figure><p id="97ab" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">您可以设置一些主题属性来更改高程叠加的行为:</p><ul class=""><li id="0e7b" class="oc od hs jj b jk jl jn jo jq oe ju of jy og kc oh oi oj ok bi translated"><code class="du mw mx my mz b">?attr/<strong class="jj ht">elevationOverlayEnabled</strong></code>允许您打开/关闭主题的立面覆盖。这在暗主题中默认为真，在亮主题中默认为假。</li><li id="d70c" class="oc od hs jj b jk ol jn om jq on ju oo jy op kc oh oi oj ok bi translated"><code class="du mw mx my mz b">?attr/<strong class="jj ht">elevationOverlayColor</strong></code>允许你改变任何高程覆盖的颜色。这默认为<code class="du mw mx my mz b">?attr/colorOnSurface</code>。</li></ul><p id="db6c" class="pw-post-body-paragraph jh ji hs jj b jk jl it jm jn jo iw jp jq jr js jt ju jv jw jx jy jz ka kb kc ha bi translated">但是，您不应该真的需要更改这些值。</p><h1 id="afb6" class="le lf hs bd lg lh li lj lk ll lm ln lo iy lp iz lq jb lr jc ls je lt jf lu lv bi translated">自定义视图</h1><p id="a0c9" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">这很好，但是如果您有一个需要支持高程覆盖的自定义视图呢？你很幸运。所有的立面叠加支持都内置在<code class="du mw mx my mz b"><a class="ae kf" href="https://developer.android.com/reference/com/google/android/material/shape/MaterialShapeDrawable" rel="noopener ugc nofollow" target="_blank">MaterialShapeDrawable</a></code>中，在你看来有点像管道:</p><figure class="na nb nc nd fd hj"><div class="bz dy l di"><div class="nx nv l"/></div></figure></div><div class="ab cl kx ky go kz" role="separator"><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc ld"/><span class="la bw bk lb lc"/></div><div class="ha hb hc hd he"><h1 id="6b4e" class="le lf hs bd lg lh oq lj lk ll or ln lo iy os iz lq jb ot jc ls je ou jf lu lv bi translated">好吧，谷歌，晚安🌚</h1><p id="7c45" class="pw-post-body-paragraph jh ji hs jj b jk lw it jm jn lx iw jp jq ly js jt ju lz jw jx jy ma ka kb kc ha bi translated">希望在这篇博文结束的时候，你已经理解了你需要做什么来给你的应用添加一个黑暗主题。如果你在实现黑暗主题时发现有什么困难，请在下面留下评论或在Twitter <a class="ae kf" href="https://twitter.com/materialdesign" rel="noopener ugc nofollow" target="_blank"> @MaterialDesign </a>和<a class="ae kf" href="https://twitter.com/AndroidDev" rel="noopener ugc nofollow" target="_blank"> @AndroidDev </a>上联系我们。</p></div></div>    
</body>
</html>