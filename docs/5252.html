<html>
<head>
<title>Using GlusterFS on Oracle Cloud Infrastructure</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">在Oracle云基础设施上使用GlusterFS</h1>
<blockquote>原文：<a href="https://medium.com/oracledevs/using-glusterfs-on-bare-metal-cloud-services-ee34e90458cf?source=collection_archive---------0-----------------------#2017-06-28">https://medium.com/oracledevs/using-glusterfs-on-bare-metal-cloud-services-ee34e90458cf?source=collection_archive---------0-----------------------#2017-06-28</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="83dd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">本教程描述了使用分布式Glusterfs卷在Oracle裸机实例上部署高可用性GlusterFS存储环境的步骤。</p><p id="6636" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">正如在<a class="ae jc" href="https://gluster.readthedocs.io/en/latest/Quick-Start-Guide/Architecture/" rel="noopener ugc nofollow" target="_blank"> GlusterFS公共文档</a>中所解释的，您可以使用不同类型的GlusterFS卷，在进行初始配置之前，首先了解它们是很重要的。本教程演示了如何在一个CentOS 7客户端访问的两个裸机实例上使用分布式GlusterFS卷。</p><p id="0b35" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">至于Oracle Cloud Infrastructure (OCI)上的配置选项，您可以将所有GlusterFS资源保存在单个可用性域(AD)中，或者使用所有AD，如下所示。根据网络流量利用率，您应该考虑将所有GlusterFS资源放在一个AD中，或者使用跨所有可用性域的分布式选项来实现容错。确保在您的设置中添加了Gluster复制卷选项，这是为避免数据丢失和生产环境而建议的。除了使用复制的GlusterFS卷进行容错(分布式和复制卷)，您还应该启用<a class="ae jc" href="http://gluster.readthedocs.io/en/latest/Administrator%20Guide/Trash/" rel="noopener ugc nofollow" target="_blank"> GlusterFS垃圾转换器</a>和<a class="ae jc" href="http://gluster.readthedocs.io/en/latest/Administrator%20Guide/Managing%20Snapshots/" rel="noopener ugc nofollow" target="_blank">快照</a>来帮助您恢复文件(如果需要的话)。</p><p id="657c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">这是一个可以在OCI上使用的GlusterFS架构的例子</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es jd"><img src="../Images/f237271fa0b2d68d1437de4999947a01.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*a5yqNQQXB7qDWa7L.png"/></div></div></figure><h1 id="7ad5" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">什么是GlusterFS？</h1><p id="9a05" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">Gluster是一个分布式横向扩展文件系统，允许根据您的存储消耗需求快速配置额外的存储。它将自动故障转移作为一项主要功能。所有这些都是在没有集中式元数据服务器的情况下完成的。</p><h1 id="3f4e" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">入门指南</h1><p id="8a83" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">首先，本教程基于CentOS 7文章上的<a class="ae jc" href="https://wiki.centos.org/HowTos/GlusterFSonCentOS" rel="noopener ugc nofollow" target="_blank"> GlusterFS存储集群。其次，对于此设置，您需要创建至少三个Oracle裸机实例；两个实例将用于保存分布式GlusterFS卷，第三个实例作为GlusterFS客户端，具有指向GlusterFS卷的本地挂载点。作为本教程的一个可选步骤，您可以创建两个100GB块卷，并将它们连接到每个GlusterFS服务器(两个GlusterFS服务器，两个100GB块卷)，稍后将使用它们来创建一个200GB GlusterFS卷，如上图所示。</a></p><h1 id="f59b" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">环境</h1><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ks"><img src="../Images/ba6241fbccaf09c9ef320dbf4dbc5a43.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ntt9KkKICSvo7wjeuLr4yw.png"/></div></div></figure><h1 id="1045" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">GlusterFS服务器安装</h1><p id="96bb" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">选择软件包来源:CentOS Storage SIG或Gluster.org。本文介绍了如何使用CentOS Storage SIG软件包</p><p id="bbcf" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo yum搜索中心-发布-gluster</p><p id="c0d9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo yum install centos-release-gluster 310 . no arch</p><p id="8afc" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在两个存储集群节点上安装GlusterFS服务器和Samba包。</p><p id="79a9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo yum install glusterfs-server samba–y</p><h1 id="2505" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">XFS砖</h1><p id="207c" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">如果您的环境已经准备好了XFS砖(分区)，请跳过这些可选步骤。对于本文，您将使用/dev/sdb设备，这是您之前创建的100GB附加块卷，如上所述。根据当前配置，如有必要，请更改设备名称。现在，为两个集群节点上的XFS砖块创建砖块1逻辑卷，如下所示</p><p id="6af1" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo pvcreate /dev/sdb</p><p id="a2b5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo vgcreate VG _ g luster/dev/sdb</p><p id="02a2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo LV create-L 100000m-n brick 1 VG _ g luster</p><p id="f2b3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">设置XFS文件系统:</p><p id="c7a7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo mkfs . xfs/dev/VG _ g luster/brick 1</p><p id="ff94" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建一个挂载点并挂载XFS砖块:</p><p id="ce34" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo mkdir -p /bricks/brick1</p><p id="c818" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo mount/dev/VG _ g luster/brick 1/bricks/brick 1</p><p id="1b6b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">插入下面一行，扩展/etc/fstab</p><p id="db29" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">/dev/VG _ g luster/brick 1/bricks/brick 1 xfs默认值，_netdev，nofail 0 0</p><p id="e15b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">重要注意事项:正如在<a class="ae jc" href="https://docs.us-phoenix-1.oraclecloud.com/Content/GSG/Tasks/addingstorage.htm?Highlight=_netdev" rel="noopener ugc nofollow" target="_blank"> Oracle Bare Metal公共文档</a>中所述，当在linux实例块卷上连接iSCSI时，在/etc/fstab中的每个非根块卷上包括“_netdev”和“nofail”选项是很重要的，否则实例可能无法启动，因为操作系统会在iSCSI启动器启动之前尝试挂载卷。</p><p id="9e19" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">例如,/etc/fstab中的单个卷可能如下所示:</p><p id="f2ff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">/dev/sdb /data1 ext4默认值，noatime，_netdev，nofail 0 2</p><p id="63fa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果在fstab中没有这些选项的情况下重新启动，实例将在下次重新启动后无法启动。处于这种状态的实例是不可恢复的。</p><h1 id="e31d" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">可信池(存储群集)</h1><p id="cfe4" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">在两个节点上启用并启动glusterfsd.service:</p><p id="7080" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo systemctl启用glusterd.service</p><p id="1d7e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo system CTL start glusterd . service</p><p id="b459" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">端口TCP:24007–24008是GlusterFS节点之间通信所必需的，每个模块都需要另一个始于24009的TCP端口。</p><p id="b11b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在防火墙上启用所需的端口:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div class="er es kt"><img src="../Images/68f4f869483cd784799b84934becda0c.png" data-original-src="https://miro.medium.com/v2/resize:fit:946/format:webp/1*sAfdldAKYA6gBvXJeJBv-w.png"/></div></figure><p id="ad8f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您还需要在BMCS仪表板上打开端口24007–24008。您需要编辑VCN安全列表，或者打开裸机内部网络(非公共网络)的所有端口，如下所示</p><p id="6aa5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">网络172.0.0.0/16</p><p id="a3fa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">资料来源:172.0.0.0/16</p><p id="22a4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">IP协议:所有协议</p><p id="e1b5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">允许:所有端口的所有流量</p><p id="c552" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">或者只打开内部网络所需的24007–24008端口。这里有一个例子:</p><p id="7b5c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">资料来源:172.0.0.0/16</p><p id="4afa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">IP协议:TCP</p><p id="78a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">源端口范围:所有</p><p id="38de" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">目标端口范围:24007–24008</p><p id="53b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">允许:端口的TCP流量:24007–24008</p><p id="dbda" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，使用gluster命令连接第二个GlusterFS节点，并创建一个可信池(存储集群)。</p><p id="3826" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo gluster对等探测器gfsserver1</p><p id="607b" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">同行调查:成功</p><p id="79d2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">验证集群对等:</p><p id="17f8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo gluster同级状态</p><p id="a91c" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对等方数量:1</p><p id="ece5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">主机名:gfsserver1</p><p id="53aa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">uuid:955326 ef-fb6f-4d 51–8c2a-9166 B7 D3 b5 f 8</p><p id="43ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">状态:集群中的对等方(已连接)</p><h1 id="69a2" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">高可用性GlusterFS卷</h1><p id="6602" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">GlusterFS卷与Gluster文件系统一起工作，Gluster文件系统是XFS砖块的逻辑集合。下表显示了卷类型和大小之间的依赖关系:</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es ku"><img src="../Images/ef6afec6a4df03c0b3ff58ba6563fd0d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oWtZMfN7VQ2xxAJmpBJJ-w.png"/></div></div></figure><p id="bef4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:对于生产环境，出于安全原因，建议使用分布式GlusterFS卷和复制选项。</p><p id="6f34" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">现在，打开防火墙上所需的端口。请记住，GlusterFS卷中的每个砖块都需要一个始于24009:</p><p id="29e8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo firewall-cmd-zone = public-add-port = 24009/TCP-\-permanent</p><p id="a305" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo防火墙-cmd -重新加载</p><p id="5818" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:如果您没有打开内部网络的所有端口，也需要在BMCS仪表板上打开相同的端口。</p><p id="ce61" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在两个节点上使用/bricks/brick1 XFS分区创建一个高度可用的复制卷。首先在/bricks/brick1挂载点中创建一个子目录。这对GlusterFS是必要的。</p><p id="8ef2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo mkdir /bricks/brick1/brick</p><p id="ae83" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建一个分布式GlusterFS卷，仅在第一个节点(gfsserver)上运行这些命令</p><p id="2ff0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo gluster volume create glustervol 1 transport TCP GFS server:/bricks/brick 1/brick GFS server 1:/bricks/brick 1/brick</p><p id="ab4a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo gluster音量开始glustervol1</p><p id="b8e8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">验证GlusterFS的音量</p><p id="5cec" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo gluster音量信息全部</p><p id="685f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">卷名:glustervol1</p><p id="5309" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">类型:分发</p><p id="72a7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">卷号:c 660712 f-29ea-4288–96b 6–2c 0a 0 c 85 a 82 a</p><p id="02b5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">状态:已开始</p><p id="2f53" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">快照计数:0</p><p id="61a3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">砖块数量:1</p><p id="10e0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">传输类型:tcp</p><p id="bc2e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">砖块:</p><p id="7451" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">brick 1:GFS server 1:/bricks/brick 1/brick</p><p id="efcd" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">重新配置的选项:</p><p id="2126" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">运输.地址-家庭:inet</p><p id="6439" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">nfs.disable:开</p><h1 id="f2aa" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">GlusterFS客户</h1><p id="5d4e" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">可以使用GlusterFS Native Client(CentOS/red hat/Oracle Linux 6.5或更高版本)、NFS v3(其他Linux客户端)或CIFS (Windows客户端)来访问GlusterFS卷。</p><p id="8118" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为Glusterfs/NFS/CIFS客户端打开防火墙</p><figure class="je jf jg jh fd ji er es paragraph-image"><div role="button" tabindex="0" class="jj jk di jl bf jm"><div class="er es kv"><img src="../Images/547d9f7e3c75e797451f8c4d6597f461.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tbHLGiEHs-HJp-_INC9kgg.png"/></div></div></figure><p id="be30" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">注意:如上所述，相同的端口需要在BMCS仪表板上打开。</p><h1 id="8aa8" class="jp jq hh bd jr js jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh ki kj kk kl km bi translated">通过GlusterFS Native Client从另一台CentOS 7机器访问</h1><p id="1a14" class="pw-post-body-paragraph ie if hh ig b ih kn ij ik il ko in io ip kp ir is it kq iv iw ix kr iz ja jb ha bi translated">默认情况下，所有必需的软件包都可以在CentOS 7基本存储库中找到。</p><p id="f4ed" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">安装GlusterFS客户端软件包:</p><p id="8ae7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo yum安装glusterfs glusterfs-保险丝附件</p><p id="8e19" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">在客户机上挂载GlusterFS卷:</p><p id="bc4a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo mkdir /glusterfs</p><p id="c3f9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo mount-t glusterfs GFS server:/glustervol 1/glusterfs</p><p id="741d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ sudo mount |grep -i glusterfs</p><p id="6da0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">GFS server:/glustervol 1 on/glusterfs type fuse . glusterfs(rw，relatime，user_id=0，group_id=0，default_permissions，allow_other，max_read=131072)</p><p id="e0a8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">$ df -kh |grep glusterfs</p><p id="76c3" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">GFS server:/glustervol 1 196g 65M 98G 1%/glusterfs</p><p id="7ab8" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">要使它在重启后永久存在，您需要在所有GlusterFS Linux客户机上的/etc/fstab中添加下面一行</p><p id="4fa4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">GFS server:/glustervol 1/glusterfs glusterfs defaults，_netdev，nofail 0 0</p><p id="8cb5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">查看<a class="ae jc" href="https://wiki.centos.org/HowTos/GlusterFSonCentOS" rel="noopener ugc nofollow" target="_blank"> GlusterFS公共文档</a>了解更多详情:</p><ul class=""><li id="20f3" class="kw kx hh ig b ih ii il im ip ky it kz ix la jb lb lc ld le bi translated">故障排除步骤</li><li id="c469" class="kw kx hh ig b ih lf il lg ip lh it li ix lj jb lb lc ld le bi translated">如何设置Windows/Linux机器通过CIFS访问GlusterFS卷</li></ul></div><div class="ab cl lk ll go lm" role="separator"><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp lq"/><span class="ln bw bk lo lp"/></div><div class="ha hb hc hd he"><p id="a69f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><em class="lr">原载于2017年6月28日</em><a class="ae jc" href="https://community.oracle.com/people/Gilson+Melo-Oracle/blog/2017/06/28/glusterfs-on-bare-metal-cloud-services" rel="noopener ugc nofollow" target="_blank"><em class="lr">【community.oracle.com】</em></a><em class="lr">。</em></p></div></div>    
</body>
</html>