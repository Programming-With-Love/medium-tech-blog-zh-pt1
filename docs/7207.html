<html>
<head>
<title>Rolling out @Nullable</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">转出@Nullable</h1>
<blockquote>原文：<a href="https://medium.com/square-corner-blog/rolling-out-nullable-42dd823fbd89?source=collection_archive---------1-----------------------#2017-05-12">https://medium.com/square-corner-blog/rolling-out-nullable-42dd823fbd89?source=collection_archive---------1-----------------------#2017-05-12</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><blockquote class="ie"><p id="43f5" class="if ig hh bd ih ii ij ik il im in io dx translated">注意，我们已经行动了！如果您想继续了解Square的最新技术内容，请访问我们的新家<a class="ae ip" href="https://developer.squareup.com/blog" rel="noopener ugc nofollow" target="_blank">https://developer.squareup.com/blog</a></p></blockquote><p id="265f" class="pw-post-body-paragraph iq ir hh is b it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm io ha bi translated">我们很多人对null有强烈的看法。我不认为这是邪恶的，或者说使用null是草率的。我只是想慎重考虑:只要参数或返回值可以为空，对它的解释就应该是显式的。</p><pre class="jn jo jp jq fd jr js jt ju aw jv bi"><span id="d397" class="jw jx hh js b fi jy jz l ka kb">/** <br/> * Consumes the next line of text and returns it.<br/> * Returns null if there are no more lines. <br/> */<br/>String readUtf8Line() throws IOException;</span></pre><p id="8760" class="pw-post-body-paragraph iq ir hh is b it kc iv iw ix kd iz ja jb ke jd je jf kf jh ji jj kg jl jm io ha bi translated">Kotlin很棒，因为它要求我们在使用null时要明确。在Kotlin中声明相同的方法会将null放入类型系统中。</p><pre class="jn jo jp jq fd jr js jt ju aw jv bi"><span id="4e0f" class="jw jx hh js b fi jy jz l ka kb"><em class="kh">/**<br/> * Consumes the next line of text and returns it.<br/> * Returns null if there are no more lines.<br/> */<br/></em>fun readUtf8Line(): String?</span></pre><p id="d604" class="pw-post-body-paragraph iq ir hh is b it kc iv iw ix kd iz ja jb ke jd je jf kf jh ji jj kg jl jm io ha bi translated">但是当我们想从Kotlin调用Java APIs时会发生什么呢？我们需要一个注释来表明我们的返回值可以是null。但是，令人沮丧的是，Java没有内置的<code class="du ki kj kk js b">@Nullable</code>注释。相反，我们需要选择第三方库来提供它:</p><ul class=""><li id="73e3" class="kl km hh is b it kc ix kd jb kn jf ko jj kp io kq kr ks kt bi translated">Android的Nullable 对于纯Android项目来说是一个很好的选择，但是我们正在编写需要在Android和Java上工作的库。</li><li id="7637" class="kl km hh is b it ku ix kv jb kw jf kx jj ky io kq kr ks kt bi translated">Checker框架的Nullable 支持Java 8的类型注释，这允许它表达类似于<code class="du ki kj kk js b">ArrayList&lt;@Nullable String&gt;</code>的概念。</li><li id="29bf" class="kl km hh is b it ku ix kv jb kw jf kx jj ky io kq kr ks kt bi translated"><a class="ae ip" href="https://jcp.org/en/jsr/detail?id=305" rel="noopener ugc nofollow" target="_blank"> JSR 305的可空包</a>有一个标准的<code class="du ki kj kk js b">javax.annotation</code>包名。这是开源Java的黄金标准<a class="ae ip" href="https://github.com/google/guava" rel="noopener ugc nofollow" target="_blank"> Guava </a>使用的。</li></ul><p id="b1f1" class="pw-post-body-paragraph iq ir hh is b it kc iv iw ix kd iz ja jb ke jd je jf kf jh ji jj kg jl jm io ha bi translated">我们正在跟随Guava的脚步，并将在我们的开源项目中采用<code class="du ki kj kk js b">javax.annotation.Nullable</code>。Java用户可以从他们的ide和静态分析工具中获得额外的支持。Kotlin用户得到的更多:编译器强制的空安全。如果您当前的Kotlin代码不是空安全的，那么您需要在集成这些更新时修复它。</p><p id="1312" class="pw-post-body-paragraph iq ir hh is b it kc iv iw ix kd iz ja jb ke jd je jf kf jh ji jj kg jl jm io ha bi translated">这种依赖只是编译时的，所以您的构建脚本不会改变，您的二进制文件也不会变得更大。</p><p id="cc58" class="pw-post-body-paragraph iq ir hh is b it kc iv iw ix kd iz ja jb ke jd je jf kf jh ji jj kg jl jm io ha bi translated">今天我们发布了<a class="ae ip" href="https://github.com/square/okio/blob/master/CHANGELOG.md" rel="noopener ugc nofollow" target="_blank"> Okio 1.13 </a>，增加了<code class="du ki kj kk js b">@Nullable</code>来帮助你避免null带来的问题。在接下来的几天里，我们将继续发布其他开源库。尽情享受吧！</p><p id="4667" class="pw-post-body-paragraph iq ir hh is b it kc iv iw ix kd iz ja jb ke jd je jf kf jh ji jj kg jl jm io ha bi translated">这篇文章是Square的“<a class="ae ip" rel="noopener" href="/square-corner-blog/square-open-source-loves-kotlin-c57c21710a17"> Square开源♥s·科特林</a>系列的一部分。</p></div></div>    
</body>
</html>