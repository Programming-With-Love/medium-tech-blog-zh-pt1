<html>
<head>
<title>Get Your Android App Ready for Chromebooks</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">为Chromebooks准备好您的Android应用</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/get-your-android-app-ready-for-chromebooks-b4915426d021?source=collection_archive---------0-----------------------#2018-01-17">https://medium.com/androiddevelopers/get-your-android-app-ready-for-chromebooks-b4915426d021?source=collection_archive---------0-----------------------#2018-01-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="c822" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">随着新谷歌Pixelbook的发布，Chrome OS上的谷歌Play商店正式退出测试，以及Chromebooks的整体使用量在上升，是时候开始考虑你的Android应用程序在Chrome OS上的表现了。</p><p id="de06" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Chromebook用户已经可以使用大多数Android应用程序，并且无需进行任何更改即可运行。但是，有几个方面需要注意和优化。我们将在本帖中讨论其中之一，输入兼容性。</p><h1 id="de21" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">输入兼容性</h1><p id="623a" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">在Chromebook上使用应用程序时，最明显的区别是设备自带键盘、触控板，有时还有触控笔。许多(但不是全部)都有触摸屏，所以你的应用需要理解这些输入。用户希望在使用Chromebook时，某些应用程序能够像在任何其他笔记本电脑上一样运行，因此，当你在Chrome OS上测试你的应用程序时，请考虑你希望在这种外形上使用的功能。</p><p id="c8bb" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">首先，如果你想让你的应用程序在Chrome OS上使用，你应该确保你的清单中不需要触摸屏或多点触摸。触控板模拟假触摸事件，因此如果您需要触摸屏，您的应用程序将无法在某些Chrome OS设备上使用。</p><p id="6a3f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你真的认为你的应用需要一个真正的触摸屏或多点触摸，而不是基于这些来限制，但想想你如何通过操作系统的<a class="ae kf" href="https://developer.android.com/guide/topics/manifest/uses-feature-element.html#touchscreen-hw-features" rel="noopener ugc nofollow" target="_blank">模拟触摸手势</a>或处理相同行为的不同方式来提供出色的体验。通过不需要触摸屏并将其添加到清单中，您可以确保您的应用程序在所有Chrome OS设备上都可用。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="9d34" class="kp jd hh kl b fi kq kr l ks kt">&lt;uses-feature android:name="android.hardware.touchscreen"<br/>                  android:required="false" /&gt;</span></pre><h1 id="4721" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">键盘</h1><p id="c7a2" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">拥有一个物理键盘可以让你的应用程序拥有多种导航方式。作为用户，我使用tab和箭头键在列表、表单和导航选项卡中导航。这种体验让你的用户可以更快地浏览你的应用程序并获得他们想要的信息，而不必使用触控板或触摸屏，这两者可能会让用户感到不舒服。如果你已经把可访问性作为首要任务，那么你已经走在了前面，因为这些努力有助于通过除触摸之外的其他方式来创建可导航的UI。</p><p id="4438" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">通过使用布局文件中的<code class="du ku kv kw kl b">android:nextFocusForward</code>属性，您可以使用Tab键轻松添加导航。使用箭头键导航也很容易添加到布局文件中，使用<code class="du ku kv kw kl b">android:nextFocusDown</code>属性(用于向下箭头)和每个导航箭头各自的属性。点击查看更多关于添加此功能的信息<a class="ae kf" href="https://developer.android.com/training/keyboard-input/navigation.html" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="1103" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">键盘快捷键是您可以为使用键盘的用户添加的一些最佳功能，因为它在使用您的应用程序时带来了便利和熟悉程度。根据应用程序的性质，考虑用户期望的快捷方式，比如保存、打印、复制、粘贴、撤销和重做。大多数都很容易实现，因为有一个基于Ctrl的快捷键的API，<code class="du ku kv kw kl b">dispatchKeyShortcutEvent</code>。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="e6b8" class="kp jd hh kl b fi kq kr l ks kt"><a class="ae kf" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>public boolean dispatchKeyShortcutEvent(KeyEvent event) {<br/> if (event.hasModifiers(KeyEvent.<strong class="kl hi"><em class="kx">META_CTRL_ON</em></strong>) &amp;&amp;<br/>                     event.getKeyCode() == KeyEvent.<strong class="kl hi">KEYCODE_S</strong>) {<br/>   //save action<br/>   return true;<br/> }<br/> return super.dispatchKeyShortcutEvent(event);<br/>}</span></pre><p id="fcff" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">如果你正在实现一个非基于Ctrl的快捷键，你必须使用<code class="du ku kv kw kl b">dispatchKeyEvent</code> API来做更多的工作，并跟踪当前按下的键。请记住，通过工具提示或其他UI元素让用户知道快捷方式功能的存在是一个好主意。</p><h1 id="dc9e" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">鼠标和触控板</h1><p id="3db3" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">许多Chrome OS用户在浏览你的应用程序时不会使用触摸屏。像长时间点击或滑动这样的事情变得不直观，所以确保你的功能没有被锁定在触摸界面上。</p><p id="66a7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">处理长点击问题的最简单的方法是支持右键点击！使用<code class="du ku kv kw kl b">View.onContextClickListener</code>给你一个简单的方法来检测右击事件。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="2068" class="kp jd hh kl b fi kq kr l ks kt">rightClickItem.setOnContextClickListener(<br/>        new View.OnContextClickListener() {<br/>  <a class="ae kf" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>  public boolean onContextClick(View v) {<br/>    // right click action<br/>    return true;<br/> }<br/>});</span></pre><p id="1a53" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">为了解决缺乏易用滑动功能的问题，我建议提供一个悬停功能，允许用户执行相同的动作。悬停时出现的关闭按钮可以删除或关闭项目，这有助于使您的界面更易于使用鼠标。您可以使用一个<code class="du ku kv kw kl b">onHoverListener</code>来添加这个行为。确保用户界面有明显的变化，让用户知道他们处于悬停状态。</p><p id="039f" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">使用鼠标，滚动视图和列表是不同的。确保你的应用程序在使用鼠标时能够正确滚动，并找到你可能需要自己构建滚动功能的地方。您可以使用<code class="du ku kv kw kl b">View.OnGenericMotionListener</code>并检测它是否是滚动事件，然后在方法体中执行您需要的任何行为。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="a1eb" class="kp jd hh kl b fi kq kr l ks kt">scrollableView.setOnGenericMotionListener(<br/>        new View.OnGenericMotionListener() {<br/>  <a class="ae kf" href="http://twitter.com/Override" rel="noopener ugc nofollow" target="_blank">@Override</a><br/>  public boolean onGenericMotion(View v, MotionEvent event) {<br/>    if (event.getAction() == MotionEvent.ACTION_SCROLL) {<br/>      //scroll event<br/>      return true;<br/>    }<br/>    return false;<br/>  }<br/>});</span></pre><p id="87e7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于其他鼠标兼容性策略，您应该在这里看到示例<a class="ae kf" href="https://developer.android.com/topic/arc/input-compatibility.html#mouse_and_touchpad_support" rel="noopener ugc nofollow" target="_blank"/>。</p><p id="814e" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">默认情况下，你的应用可以像在手机上一样在ChromeOS设备上运行。兼容模式将帮助您的应用程序使用广泛使用的电话事件，而不是许多应用程序通常不处理的特殊事件。举个例子——许多应用程序并不测试鼠标滚轮——但是每个应用程序都关注触摸滚动事件。这样，兼容模式将把滚轮事件转换成触摸滚动事件。如果您想充分利用这些不同的事件，可以通过在清单中声明以下内容让系统知道这一点:</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="74be" class="kp jd hh kl b fi kq kr l ks kt">&lt;uses-feature<br/>    android:name="android.hardware.type.pc"<br/>    android:required="false" /&gt;</span></pre><p id="31af" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">添加这意味着您已经针对通常使用键盘、鼠标和触控板的PC设备优化了您的应用。它禁用兼容模式，并允许您处理这些不同的事件。</p><h1 id="74a7" class="jc jd hh bd je jf jg jh ji jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy jz bi translated">唱针</h1><p id="c5fd" class="pw-post-body-paragraph ie if hh ig b ih ka ij ik il kb in io ip kc ir is it kd iv iw ix ke iz ja jb ha bi translated">一些Chrome OS设备和手机附带了手写笔，因此您可以考虑为此构建支持。一些应用程序更倾向于使用手写笔，所以在考虑应用程序时要考虑到这一点。您可以使用许多手写笔API来构建更高级的支持。使用<code class="du ku kv kw kl b">View.onTouchEvent()</code>你可以获得许多信息，例如倾斜和方向、压力，以及这种触摸是来自手写笔、手指还是手写笔橡皮擦。</p><p id="3d09" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">当使用手写笔时，Chrome OS试图拒绝其他触摸，如手掌放在屏幕上。有时，在Chrome OS将触摸识别为“手掌”触摸之前，会向应用程序报告这些触摸。一个<code class="du ku kv kw kl b">ACTION_CANCEL</code>事件将被发送，告诉应用程序摆脱这些触摸。要处理这种情况，请确保在显示器上连续呈现触摸系列，但如果该事件通过系统传到您的应用程序，请准备好删除该行。更多信息可以在<a class="ae kf" href="https://developer.android.com/topic/arc/input-compatibility.html#palm_rejection" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p><p id="8429" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">对于笔记应用程序，请确保在清单中包含笔记意图。当用户请求一个笔记应用时，Chrome OS会显示所有包含此意图的应用。</p><pre class="kg kh ki kj fd kk kl km kn aw ko bi"><span id="77dd" class="kp jd hh kl b fi kq kr l ks kt">&lt;intent-filter&gt;<br/>    &lt;action android:name="org.chromium.arc.intent.action.CREATE_NOTE" /&gt;<br/>    &lt;category android:name="android.intent.category.DEFAULT" /&gt;<br/>&lt;/intent-filter&gt;</span></pre><p id="d297" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">利用Chrome OS设备上可用的新技术，关注更新的手写笔API！</p><p id="3e9d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">更多手写笔支持信息，包括如何在没有手写笔设备的情况下进行测试，可以在<a class="ae kf" href="https://developer.android.com/topic/arc/input-compatibility.html#stylus" rel="noopener ugc nofollow" target="_blank">这里</a>找到。</p></div><div class="ab cl ky kz go la" role="separator"><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld le"/><span class="lb bw bk lc ld"/></div><div class="ha hb hc hd he"><p id="1051" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">随着Play Store进入越来越多的Chrome OS设备，这些输入介质和行为将开始变得越来越常用和突出。作为开发人员，了解如何在这些令人兴奋的新外形上让您的应用程序变得更好非常重要。</p><p id="aff6" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">有关更多信息，请参见Chromebooks的<a class="ae kf" href="https://developer.android.com/topic/arc/input-compatibility.html" rel="noopener ugc nofollow" target="_blank">输入兼容性</a>。</p></div></div>    
</body>
</html>