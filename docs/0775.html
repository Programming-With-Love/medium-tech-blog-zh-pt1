<html>
<head>
<title>Just your type: Variable fonts in Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">适合您的类型:撰写中的可变字体</h1>
<blockquote>原文：<a href="https://medium.com/androiddevelopers/just-your-type-variable-fonts-in-compose-5bf63b357994?source=collection_archive---------7-----------------------#2022-11-17">https://medium.com/androiddevelopers/just-your-type-variable-fonts-in-compose-5bf63b357994?source=collection_archive---------7-----------------------#2022-11-17</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><figure class="hg hh ez fb hi hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es hf"><img src="../Images/d5bac6970a78ae2e1d827079f50dcaa7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iFJJM6acYl7vvXaH20bd0A.png"/></div></div></figure><div class=""/><p id="a778" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">可变字体可以从Compose UI <a class="ae jn" href="https://developer.android.com/jetpack/androidx/releases/compose-ui#1.3.0" rel="noopener ugc nofollow" target="_blank"> 1.3.0 </a>中使用，适用于Android O及以上版本。</p><p id="ad34" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">可变字体是一种可以通过多种方式(或轴或参数)定制的字体，可以创建截然不同的样式，同时存在于单个字体文件中。这些轴可以是众所周知的，并在标准中定义(例如:粗细、宽度、倾斜、斜体)或由字体本身添加。在<a class="ae jn" href="https://fonts.google.com/knowledge/topics/variable_fonts" rel="noopener ugc nofollow" target="_blank">谷歌字体知识</a>中了解更多关于可变字体的信息。</p><figure class="jp jq jr js fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es jo"><img src="../Images/e68a51b15ffce4f3f198661f350233e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r3kiD-RC4XMloDFiDeDFHQ.png"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx"><em class="jx">Text using the same variable font customized with different axes values.</em></figcaption></figure><p id="b605" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">通过使用可变字体而不是常规字体文件，您只需要管理一个字体文件，而不是多个，包含所有可能的字体变化。<br/>它可以让设计师真正表达品牌，让开发者在字体允许的情况下尽可能发挥创造力，通过访问各种风格，真正灵活地进行微调。</p><blockquote class="jy jz ka"><p id="5d36" class="ip iq kb ir b is it iu iv iw ix iy iz kc jb jc jd kd jf jg jh ke jj jk jl jm ha bi translated">在你真正的应用程序中，你将有一个可变的字体，并根据你的设计要求，以一种非常简单的方式定制它，使其有3-5种变化，总是使用相同的字体文件。</p></blockquote><p id="a1b4" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">在这篇博客中，我们将更进一步。使用可变字体，我们将能够快速构建一个应用程序，动态地更改字体的属性并显示它，如下所示:</p><figure class="jp jq jr js fd hj er es paragraph-image"><div class="er es kf"><img src="../Images/9385f7418c6305fca507769c445d448e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/0*drxtDASWeFXOKidM"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">This app shows a text using a variable font, and multiple sliders to modify the font axes.</figcaption></figure><p id="01fa" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于这个例子，我们将使用由<a class="ae jn" href="https://fontbureau.typenetwork.com/" rel="noopener ugc nofollow" target="_blank">字体局</a>通过<a class="ae jn" href="https://fonts.google.com/" rel="noopener ugc nofollow" target="_blank">谷歌字体</a>设计的一种叫做<a class="ae jn" href="https://fonts.google.com/specimen/Roboto+Flex" rel="noopener ugc nofollow" target="_blank"> Roboto Flex </a>的可变字体。</p><p id="f18e" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">但是谷歌字体中有更多的可变字体。您可以在此处找到整个目录<a class="ae jn" href="https://fonts.google.com/?vfonly=true" rel="noopener ugc nofollow" target="_blank">以及每个字体</a>支持的轴的<a class="ae jn" href="https://fonts.google.com/variablefonts" rel="noopener ugc nofollow" target="_blank">表。</a></p><h1 id="cad3" class="kg kh hs bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">在Compose中实现</h1><h2 id="381f" class="le kh hs bd ki lf lg lh km li lj lk kq ja ll lm ku je ln lo ky ji lp lq lc lr bi translated">设置</h2><p id="18fd" class="pw-post-body-paragraph ip iq hs ir b is ls iu iv iw lt iy iz ja lu jc jd je lv jg jh ji lw jk jl jm ha bi translated">首先，我们得到字体。在撰写本文时，可下载字体不支持可变字体(这是一个<a class="ae jn" href="https://issuetracker.google.com/223262013" rel="noopener ugc nofollow" target="_blank">开放特征请求</a>)。因此，我们需要下载字体并将其捆绑在APK中。确保。您添加的ttf文件是该字体的<em class="kb">可变字体版本</em>。</p><p id="b5f4" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于<strong class="ir ht"> Roboto Flex </strong>字体，该文件将被命名为类似于“<em class="kb">RobotoFlex-variable font _ GRAD，XTRA，YOPQ，YTAS，YTDE，YTFI，YTLC，YTUC，opsz，slnt，wdth，wght.ttf </em>的名称，我们将其重命名为“<em class="kb">RobotoFlex _ variable . TTF</em>，以添加到Android中。</p><p id="9b24" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">接下来，我们添加正确的依赖项。撰写UI应在<a class="ae jn" href="https://developer.android.com/jetpack/androidx/releases/compose-ui#version_13_2" rel="noopener ugc nofollow" target="_blank"> 1.3.0 </a>或更高版本上:</p><figure class="jp jq jr js fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><p id="6d97" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">现在，进入有趣的部分🎉。</p><p id="b95b" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果我们再次检查<a class="ae jn" href="https://fonts.google.com/variablefonts" rel="noopener ugc nofollow" target="_blank">可变字体目录</a>，我们会看到Roboto Flex可以通过以下轴进行定制:</p><figure class="jp jq jr js fd hj er es paragraph-image"><div role="button" tabindex="0" class="hk hl di hm bf hn"><div class="er es lz"><img src="../Images/da2eaa780bb68fff308d4f6455b49c44.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*oTiTRgfshW8u4g9u"/></div></div><figcaption class="jt ju et er es jv jw bd b be z dx">Axes for Roboto Flex shown in the Google Fonts website</figcaption></figure><p id="ae2e" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">该信息非常重要，因为它包含不同的轴名称(如XTRA、YTDE等)、最小值、最大值和默认值。<em class="kb">查看</em> <a class="ae jn" href="https://fonts.google.com/knowledge/glossary" rel="noopener ugc nofollow" target="_blank"> <em class="kb">谷歌字体词汇表</em> </a> <em class="kb">了解各轴如何配置字体。</em></p><blockquote class="jy jz ka"><p id="460c" class="ip iq kb ir b is it iu iv iw ix iy iz kc jb jc jd kd jf jg jh ke jj jk jl jm ha bi translated"><em class="hs">在我们的演示应用程序中，我们将只选择和实现8个Roboto Flex轴的子集，而其余的是相同的。</em></p></blockquote><p id="05f9" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">我们首先创建一个可组合的屏幕。我们为想要展示的每个轴添加一个标签和选择器(或<a class="ae jn" href="https://developer.android.com/reference/kotlin/androidx/compose/material/package-summary#Slider(kotlin.Float,kotlin.Function1,androidx.compose.ui.Modifier,kotlin.Boolean,kotlin.ranges.ClosedFloatingPointRange,kotlin.Int,kotlin.Function0,androidx.compose.foundation.interaction.MutableInteractionSource,androidx.compose.material.SliderColors)" rel="noopener ugc nofollow" target="_blank">滑块</a>，并使用<code class="du ma mb mc md b"><a class="ae jn" href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/MutableState" rel="noopener ugc nofollow" target="_blank">MutableState&lt;T&gt;</a></code>定义所有这些选择器的状态。</p><p id="9b0b" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><code class="du ma mb mc md b"><a class="ae jn" href="https://developer.android.com/reference/kotlin/androidx/compose/material/package-summary#Slider(kotlin.Float,kotlin.Function1,androidx.compose.ui.Modifier,kotlin.Boolean,kotlin.ranges.ClosedFloatingPointRange,kotlin.Int,kotlin.Function0,androidx.compose.foundation.interaction.MutableInteractionSource,androidx.compose.material.SliderColors)" rel="noopener ugc nofollow" target="_blank">Slider</a></code> composable带有一个<code class="du ma mb mc md b">valueRange</code>参数，可以用上表中的字体信息(最小/最大值)轻松定制。应用程序的这一部分看起来会像这样:</p><figure class="jp jq jr js fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><p id="f0d9" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">到目前为止，我们已经像这样配置了所有的选择器:</p><figure class="jp jq jr js fd hj er es paragraph-image"><div class="er es me"><img src="../Images/fb54aa9ef6d32a30507382983c0a2511.png" data-original-src="https://miro.medium.com/v2/resize:fit:1134/format:webp/1*nnXKuRCg0UeLi1fhWnfRBA.png"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">Sliders configured for 8 axes for Roboto Flex</figcaption></figure><h2 id="84c7" class="le kh hs bd ki lf lg lh km li lj lk kq ja ll lm ku je ln lo ky ji lp lq lc lr bi translated">预定义轴</h2><p id="29e9" class="pw-post-body-paragraph ip iq hs ir b is ls iu iv iw lt iy iz ja lu jc jd je lv jg jh ji lw jk jl jm ha bi translated">接下来，我们需要使用选择器的值并配置我们的字体。为此，我们将使用新的(<a class="ae jn" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/ExperimentalTextApi" rel="noopener ugc nofollow" target="_blank"> experimental </a> ) <code class="du ma mb mc md b"><a class="ae jn" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/font/FontVariation" rel="noopener ugc nofollow" target="_blank">FontVariation</a></code> API。</p><p id="901a" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于预定义的轴，<code class="du ma mb mc md b"><a class="ae jn" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/font/FontVariation.Settings" rel="noopener ugc nofollow" target="_blank">FontVariation</a></code>提供了预定义的方法。例如，我们有<code class="du ma mb mc md b"><a class="ae jn" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/font/FontVariation#weight(kotlin.Int)" rel="noopener ugc nofollow" target="_blank">weight</a></code>和<code class="du ma mb mc md b"><a class="ae jn" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/font/FontVariation#slant(kotlin.Float)" rel="noopener ugc nofollow" target="_blank">slant</a></code>，它们可以设置如下:</p><figure class="jp jq jr js fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><p id="7369" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">其中为<em class="kb">重量</em>和<em class="kb">倾斜度</em>传递的值先前被定义为来自<code class="du ma mb mc md b"><a class="ae jn" href="https://developer.android.com/reference/kotlin/androidx/compose/material/package-summary#Slider(kotlin.Float,kotlin.Function1,androidx.compose.ui.Modifier,kotlin.Boolean,kotlin.ranges.ClosedFloatingPointRange,kotlin.Int,kotlin.Function0,androidx.compose.foundation.interaction.MutableInteractionSource,androidx.compose.material.SliderColors)" rel="noopener ugc nofollow" target="_blank">Slider</a></code>的<code class="du ma mb mc md b"><a class="ae jn" href="https://developer.android.com/reference/kotlin/androidx/compose/runtime/State" rel="noopener ugc nofollow" target="_blank">State</a></code>。</p><h2 id="b17c" class="le kh hs bd ki lf lg lh km li lj lk kq ja ll lm ku je ln lo ky ji lp lq lc lr bi translated">自定义轴</h2><p id="b04b" class="pw-post-body-paragraph ip iq hs ir b is ls iu iv iw lt iy iz ja lu jc jd je lv jg jh ji lw jk jl jm ha bi translated">对于自定义轴，您可以使用<code class="du ma mb mc md b"><a class="ae jn" href="https://developer.android.com/reference/kotlin/androidx/compose/ui/text/font/FontVariation.Settings" rel="noopener ugc nofollow" target="_blank">FontVariation.Settings</a></code>方法，该方法接收设置名称和值作为参数。设置的名称和其他相关信息由我们之前查询的Google <a class="ae jn" href="https://fonts.google.com/variablefonts" rel="noopener ugc nofollow" target="_blank">可变字体目录</a>给出。我们可以这样配置它们:</p><figure class="jp jq jr js fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><h2 id="f1ea" class="le kh hs bd ki lf lg lh km li lj lk kq ja ll lm ku je ln lo ky ji lp lq lc lr bi translated">现在都在一起</h2><p id="3dbb" class="pw-post-body-paragraph ip iq hs ir b is ls iu iv iw lt iy iz ja lu jc jd je lv jg jh ji lw jk jl jm ha bi translated">最后，我们将新字体添加到字体家族中。我们创建一个可组合的文本，并设置字体系列。我们的主屏幕将如下所示:</p><figure class="jp jq jr js fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><blockquote class="jy jz ka"><p id="6a75" class="ip iq kb ir b is it iu iv iw ix iy iz kc jb jc jd kd jf jg jh ke jj jk jl jm ha bi translated"><em class="hs">在一个真实的应用程序中，你可能会在你的</em> <code class="du ma mb mc md b"><em class="hs">Type.kt</em></code> <em class="hs">文件中用静态值定义字体系列，而不是快照状态变量。</em></p></blockquote><p id="56d7" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">就是这样！我们已经完成了我们的示例应用程序，展示了<a class="ae jn" href="https://fonts.google.com/specimen/Roboto+Flex?vfquery=roboto+flex" rel="noopener ugc nofollow" target="_blank"> Roboto Flex </a>可变字体是如何通过它的所有轴来风格化的。</p><figure class="jp jq jr js fd hj er es paragraph-image"><div class="er es kf"><img src="../Images/524749f5bccdbf253d90a5a3eb06c9e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1200/1*O4rrBe0dBHfEK0ovXhBETw.gif"/></div><figcaption class="jt ju et er es jv jw bd b be z dx">App completed with sliders configuring 8 axes for Roboto Flex, and text dynamically reacting to the font changes.</figcaption></figure><h2 id="c59e" class="le kh hs bd ki lf lg lh km li lj lk kq ja ll lm ku je ln lo ky ji lp lq lc lr bi translated">最佳实践</h2><p id="bd39" class="pw-post-body-paragraph ip iq hs ir b is ls iu iv iw lt iy iz ja lu jc jd je lv jg jh ji lw jk jl jm ha bi translated">我们可以对代码进行两项改进。</p><p id="864a" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">对于自定义轴，我们可以将它们包装在一个验证函数中，如下所示:</p><figure class="jp jq jr js fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><p id="e0f4" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">这种重构有一些好处。最值得注意的是，它可以验证和防止其他开发人员对字体的错误配置。它还会产生更干净、更地道的语法。</p><p id="9855" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">其次，Android O之前不支持可变字体，因此如果在带有运行时<code class="du ma mb mc md b">IllegalStateException</code>的旧版本中运行，这段代码会使你的应用崩溃。为了防止这种情况，我们可以添加一个带有后备字体的护栏，如下所示:</p><figure class="jp jq jr js fd hj"><div class="bz dy l di"><div class="lx ly l"/></div></figure><h1 id="7219" class="kg kh hs bd ki kj kk kl km kn ko kp kq kr ks kt ku kv kw kx ky kz la lb lc ld bi translated">概述</h1><p id="1808" class="pw-post-body-paragraph ip iq hs ir b is ls iu iv iw lt iy iz ja lu jc jd je lv jg jh ji lw jk jl jm ha bi translated">希望你学到了一些新的东西，可以将可变字体的力量融入到你的应用程序中。</p><p id="9510" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">如果您发现任何错误或有功能请求，请通过在我们的<a class="ae jn" href="https://issuetracker.google.com/issues/new?component=779818&amp;template=1371638" rel="noopener ugc nofollow" target="_blank">跟踪器</a>上提交问题来让我们知道。</p><p id="94e4" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">最后，在这里或Twitter <a class="ae jn" href="https://twitter.com/astamatok" rel="noopener ugc nofollow" target="_blank"> @astamatok </a>或<a class="ae jn" href="https://androiddev.social/@astamato" rel="noopener ugc nofollow" target="_blank">乳齿象</a>上放下你所有的问题，分享你使用可变字体构建的东西！</p><p id="5f5e" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated">快乐作曲！👋</p><p id="3aea" class="pw-post-body-paragraph ip iq hs ir b is it iu iv iw ix iy iz ja jb jc jd je jf jg jh ji jj jk jl jm ha bi translated"><em class="kb">这篇文章是与Jetpack撰写文本团队的</em> <a class="ae jn" href="https://tech.lgbt/@objcode" rel="noopener ugc nofollow" target="_blank"> <em class="kb">肖恩·麦克奎蓝</em> </a> <em class="kb">合作撰写的。感谢DevRel团队的</em> <a class="ae jn" href="https://androiddev.social/@riggaroo" rel="noopener ugc nofollow" target="_blank"> <em class="kb">丽贝卡·弗兰克斯</em> </a> <em class="kb">和</em> <a class="ae jn" href="https://twitter.com/FMuntenescu" rel="noopener ugc nofollow" target="_blank"> <em class="kb">弗洛里纳·芒特内斯库</em> </a> <em class="kb">对他们的点评。</em></p></div></div>    
</body>
</html>