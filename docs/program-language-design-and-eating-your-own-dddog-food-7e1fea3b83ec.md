# 程序语言设计和吃你自己的 DD 狗粮

> 原文：<https://medium.com/compendium/program-language-design-and-eating-your-own-dddog-food-7e1fea3b83ec?source=collection_archive---------1----------------------->

不久前，Kevlin Henney [将我的注意力](https://twitter.com/KevlinHenney/status/1194728923642372096)吸引到 Peter Hilton[在 Twitter 上请求](https://twitter.com/PeterHilton/status/1194700163304116224)一篇关于如何正确使用 Java 包的文章。关于 Java 类是否应该根据特性或层组织在包中的讨论由来已久。我的观点是，两者都不是好的解决方案，因为根据您正在进行的任务，您会希望看到源代码以这样或那样的方式组织起来。通常，你会希望在同一个任务中看到两个方面。

彼得·希尔顿的推文让我思考了一下，就像我[回复](https://twitter.com/filipvanlaenen/status/1194923504753356800)的那样，在 2020 年即将到来之际，所有主流编程语言仍然围绕文件和目录构建，这令人惊讶。有些甚至有语义空白！

当然，源代码的主要功能不是指示计算机做什么，而是向您的开发伙伴传达您认为计算机应该做什么以及应该如何做。源代码的编译或解释仅仅是一个副作用，无论如何都应该是正确的(希望也是确定的)。但是如果指令和与计算机的通信是源代码的主要目的，我们都将为虚拟机编写字节码，或者为特定的处理器编写汇编代码。

那么问题是:文件和目录在与我们的开发伙伴交流方面真的做得这么好吗？鉴于对上述 Java 包的长期讨论，答案显然是否定的。但是，如果你认为文件和目录是保存源代码的一种方式，你可以问这样一个问题，这真的是我们在 2019 年能做的最好的事情吗？例如，我们会向我们的客户推荐这种做法来保存他们的数据吗？

![](img/cea6f3e591c01923f771bdd1d326b20e.png)

“[Files](https://www.flickr.com/photos/ted_major/4238539781/)” by [Ted Major](https://www.flickr.com/photos/ted_major/) / [CC BY-SA 2.0](https://creativecommons.org/licenses/by-sa/2.0/)

让我们花点时间讨论一下我接触过的替代方案。我记得在上个世纪 90 年代，我们试图用 Rational Rose 开发一个小程序，在一个大的 UML 图中的小窗口中输入方法的主体。我们做了所有我们能做的往返旅行，但是它就是不能很好地工作。这不仅是因为糟糕的用户界面，而且通过这样的图表编程也有一些根本性的错误。我们从来没有对一个类真正做了什么有一个很好的概述，它需要太多的点击来导航图表，即使是对业务逻辑的微小改变。我想知道任何形式的真正重构会如何进行。

我还为 Smalltalk 使用过 VisualAge，它基本上给你一个面向文本的窗口界面，带有类和方法定义，但没有文本文件。我认为可以将源代码导出到一组文本文件中，但是没有人使用它。它内置了版本控制，但是一直到方法级别，这肯定是需要考虑的。总而言之，它确实工作得很好，但是感觉有限而且有点原始。后来，IBM 为 Java 开发了一个版本，叫做 VisualAge for Java，它最终演变成了 Eclipse。VisualAge for Java 有很多问题，实际上更像是 Eclipse 的概念验证，所以体验不是很好。但是与这次讨论最相关的是，从那以后，我再也没有看到任何人在 Eclipse 或类似的 ide 中使用类/方法视图，这可能就足够了。老实说，我甚至不确定 Eclipse 的第一个版本中有没有这个特性。

我也做过一些可视化编程，编写了一些代码来处理 UI 组件之间用箭头表示的事件。那真是一团糟。不可能知道哪个箭头代表哪个事件，尽管颜色有时可以给你提示。但是如果你的用户界面中有足够的逻辑，箭头就会相互堆积。创建一个[大泥球](https://en.wikipedia.org/wiki/Big_ball_of_mud)实际上是不可能的，因为即使是相对简单的程序也会很快看起来像大团纱线。

因此，这并不是说没有人试图提出文件和目录方法的替代方案，但我所看到的替代方案显然更糟。我想知道，如果有人试图将 DDD 应用到这个问题上会发生什么，这样的尝试会产生什么样的范例和编程语言结构。有什么想法吗？