<html>
<head>
<title>Dropwizard for quickstarting RESTful web services development</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1 class="translated">快速启动RESTful web服务开发的Dropwizard</h1>
<blockquote>原文：<a href="https://medium.com/globant/dropwizard-for-quickstarting-restful-web-services-development-f4989ae9f3bc?source=collection_archive---------1-----------------------#2022-04-19">https://medium.com/globant/dropwizard-for-quickstarting-restful-web-services-development-f4989ae9f3bc?source=collection_archive---------1-----------------------#2022-04-19</a></blockquote><div><div class="ds gv gw gx gy gz"/><div class="ha hb hc hd he"><div class=""/><p id="d7a7" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Dropwizard是一个开源的Java框架，用于快速开发高性能RESTful web服务。它是一个用于构建RESTful web服务的框架，或者更准确地说，是一组用于构建RESTful web服务的工具和框架。</p><p id="1a2d" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">Dropwizard拥有对复杂的<strong class="ig hi">配置</strong>、<strong class="ig hi">应用度量</strong>、<strong class="ig hi">日志</strong>、<strong class="ig hi">操作工具</strong>等的<em class="jc">开箱即用</em>支持，让您和您的团队在尽可能短的时间内交付一个<em class="jc">生产质量的</em> web服务。</p><h2 id="3187" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">Dropwizard库</h2><p id="d2e1" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">下表总结了dropwizard提供和支持的重要库。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kd"><img src="../Images/fdf69f1fb007285e5ab1befd57a07276.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*RUZKCST6vwe3PCyCv6QQJg.png"/></div></div></figure><h2 id="7878" class="jd je hh bd jf jg jh ji jj jk jl jm jn ip jo jp jq it jr js jt ix ju jv jw jx bi translated">使用Dropwizard的简单REST应用程序</h2><p id="d5d8" class="pw-post-body-paragraph ie if hh ig b ih jy ij ik il jz in io ip ka ir is it kb iv iw ix kc iz ja jb ha bi translated">只需几个步骤就可以在dropwizard中创建一个简单的REST应用程序:<br/> 1。创建一个maven项目。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kp"><img src="../Images/935230adb57b53297fa6373929fc48d8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*xx9wnzsyhkmP_f8v"/></div></div></figure><p id="82e0" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">提及groupId、artifactId和其他详细信息。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kp"><img src="../Images/8931fff4e1b2b824ae5a0246a539d254.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Zv0dt0uL6zTK1ZKi"/></div></div></figure><p id="1757" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">添加<strong class="ig hi"><em class="jc">drop wizard-core</em></strong>作为依赖。您的pom.xml应该如下所示:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kp"><img src="../Images/9b369e4ccd62a99e58c9b546621ed79d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*x0-BGzBTMD6PgdnT"/></div></div></figure><p id="5db5" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是添加所有必需依赖项后的<em class="jc"> pom.xml </em>:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kq"><img src="../Images/9c0af12d7b4706dac2be3d0eea1c6bcc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ehM-6pDRbDirwrtgxm80Uw.png"/></div></div></figure><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kr"><img src="../Images/c24196e84ae638bb5cae7eb317ae26d2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5vc5RLJ5Vm04-2WseVbOEg.png"/></div></div></figure><p id="e3ac" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">2.创建一个新的配置文件<strong class="ig hi"> <em class="jc"> conf.yaml </em> </strong>，它将保存应用程序属性。将文件放在resources文件夹中。请注意yaml文件中的<em class="jc">产品</em>配置，我们将在示例中进一步使用。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kp"><img src="../Images/2de4f34bc9e3cac0729fe7ab7a6f4d4e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*rU8iuhYKVAXIgXHX"/></div></div></figure><p id="5da2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是最终配置的样子。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ks"><img src="../Images/14a300d398ce04165819f0fae23079c3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZPMdh2Ybze54KQGxjNQvYg.png"/></div></div></figure><p id="e146" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">3.在你的应用中定义一个模型类，比如“产品”有一些属性:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kt"><img src="../Images/702166fc2aed9673f4e2e84c92645cec.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f102kLJbTOb0RYHENlN0PQ.png"/></div></div></figure><p id="b185" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">4.用API编写一个控制器，它将返回产品资源列表。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ku"><img src="../Images/7d89a946eb503466cef7b9b0d8442017.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q7y3KT-6w8oOY_AEMOsLSw.png"/></div></div></figure><p id="b116" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">该控制器有两个资源方法，第一个方法返回产品对象列表，第二个方法只返回从默认配置创建的<em class="jc">产品</em>。为了简单起见，这里没有使用进一步的业务逻辑。您可能会得到一个错误，指出缺少类DropwizardExampleConfiguration。放松，我们接下来将创建它。</p><p id="4b46" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">5.创建一个配置类来表示应用程序配置。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kv"><img src="../Images/11d6e246573592479da23d8de4d0f984.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ofKCwk2KVAMsbp-coDsT7A.png"/></div></div></figure><p id="7ce9" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">6.最后，这里是实际启动应用程序的主要应用程序类。<em class="jc"> DropwizardExampleApp </em>类除了main方法之外还有两个方法，<em class="jc"> initialize </em>()和<em class="jc"> run()。在initialize()方法中，</em><strong class="ig hi"><em class="jc">ResourceConfigurationSourceProvider</em></strong>类在<em class="jc"> </em>资源中查找配置文件并初始化应用<em class="jc">。</em>而<em class="jc">，c </em>控制器类注册在run方法中。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kw"><img src="../Images/88c1833f6bde8ba2f5909e8fcbdc5ee7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*buM3XNA-y85PH8Ju-0ZCDw.png"/></div></div></figure><p id="6862" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">创建完所有这些类后，项目结构应该是这样的。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kq"><img src="../Images/7a2fb2089ee3bda34dbefb01e4166b21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*OI06xsVSWO37g8WZ"/></div></div></figure><p id="b2f4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">就是这样。REST应用程序准备就绪。您可以使用maven-shade-plugin(已经是上面pom.xml的一部分)来创建一个jar文件，在命令行中执行以下命令将启动服务器。</p><p id="bea2" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated"><strong class="ig hi"><em class="jc">Java-jar target/DropwizardExample-1.0-snapshot . jar server conf . YAML</em></strong></p><p id="85aa" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">您将能够在终端上看到类似于以下快照的输出。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kp"><img src="../Images/f51742f0034f08c992197aa26bac500e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/0*Bteay9fTnmP_rhgs"/></div></div></figure><p id="5c5a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">请注意关于缺少healthcheck的警告，Dropwizard希望每个应用程序都实现Healthcheck类，并定期检查应用程序的健康状态。</p><p id="9e9a" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">一旦服务器启动，如果您打开浏览器并键入<a class="ae kx" href="http://localhost:8080/products," rel="noopener ugc nofollow" target="_blank"><em class="jc">http://localhost:8080/products，</em> </a> <em class="jc"> </em>，您可以看到api返回了一个json格式的产品列表。而<a class="ae kx" href="http://localhost:8081/" rel="noopener ugc nofollow" target="_blank"><em class="jc">http://localhost:8081/</em></a><em class="jc"/>是一个管理端点，它返回可用指标的列表</p><p id="4a67" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是如何在管理端口上看到指标</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es ky"><img src="../Images/a5197e5c347b6d1e8511a4a9f5cf6237.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AyIkxuvDyiJutDHcS3wejw.png"/></div></div></figure><p id="4083" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">下面是<em class="jc">/产品</em>终点的输出:</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es kz"><img src="../Images/84dc6f8c8e0a64303bd96be45e3ad739.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ma1qU29FIs92iRhOmXaIPQ.png"/></div></div></figure><p id="ca66" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">或者，您也可以使用integration test在ProductController中测试上面创建的资源。Dropwizard通过dropwizard-testing插件提供测试支持。您可以向pom.xml添加以下依赖项来使用该插件</p><pre class="ke kf kg kh fd la lb lc ld aw le bi"><span id="0b3e" class="jd je hh lb b fi lf lg l lh li">&lt;dependency&gt;<br/>  &lt;groupId&gt;io.dropwizard&lt;/groupId&gt;<br/>  &lt;artifactId&gt;dropwizard-testing&lt;/artifactId&gt;<br/>  &lt;version&gt;${dropwizard.version}&lt;/version&gt;<br/>&lt;/dependency&gt;</span></pre><p id="eace" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">添加完依赖项后，创建一个测试类ProductConrollerTest。将<code class="du lj lk ll lb b">DropwizardExtensionsSupport</code>注释和<code class="du lj lk ll lb b">DropwizardAppExtension</code>扩展添加到您的JUnit5测试类，它将在任何测试运行之前启动应用程序，并在测试完成后再次停止。<code class="du lj lk ll lb b">DropwizardAppExtension</code>还公开了应用程序的<code class="du lj lk ll lb b">Configuration</code>、<code class="du lj lk ll lb b">Environment</code>和应用程序对象本身，以便这些可以被测试查询。测试类可以通过调用扩展的Client()方法获得HttpClient，并执行请求。</p><figure class="ke kf kg kh fd ki er es paragraph-image"><div role="button" tabindex="0" class="kj kk di kl bf km"><div class="er es lm"><img src="../Images/7ed95d571e22e265b0c1279e7b95b424.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ek-hggilI7xfTHefD9Eozw.png"/></div></div></figure><p id="9ede" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">从上面的测试中可以看出，您可以使用集成测试来验证两种控制器方法的结果。</p><p id="7611" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">以上示例的完整源代码可以在这里找到<a class="ae kx" href="https://github.com/snehalwa/DropwizardExample" rel="noopener ugc nofollow" target="_blank">。</a></p><p id="84b4" class="pw-post-body-paragraph ie if hh ig b ih ii ij ik il im in io ip iq ir is it iu iv iw ix iy iz ja jb ha bi translated">总之，如果需要快速开发REST web服务，Dropwizard是一个高效的轻量级框架。它的功能可以通过集成像Guice和DB framework JDBI这样的DI框架来进一步增强。此外，默认情况下，它提供了出色的指标，可以洞察应用程序的性能。</p></div></div>    
</body>
</html>